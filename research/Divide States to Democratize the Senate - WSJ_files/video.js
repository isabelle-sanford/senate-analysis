window.$jQ111=function(e){function t(t){for(var n,r,a=t[0],o=t[1],s=0,c=[];s<a.length;s++)r=a[s],Object.prototype.hasOwnProperty.call(i,r)&&i[r]&&c.push(i[r][0]),i[r]=0;for(n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n]);for(l&&l(t);c.length;)c.shift()()}var n={},i={1:0};function r(t){if(n[t])return n[t].exports;var i=n[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.e=function(e){var t=[],n=i[e];if(0!==n)if(n)t.push(n[2]);else{var a=new Promise((function(t,r){n=i[e]=[t,r]}));t.push(n[2]=a);var o,s=document.createElement("script");s.charset="utf-8",s.timeout=120,r.nc&&s.setAttribute("nonce",r.nc),s.src=function(e){return r.p+"v3/js/"+({0:"liveEventController",2:"vendors~hls",3:"vendors~liveEventController",4:"vendors~three"}[e]||e)+"."+{0:"10c18a5b68fc2b40c260",2:"f84b6e3e53094b0dbbb0",3:"3d4e6b2281432be6ee8e",4:"2a4b95be255e5322f588"}[e]+".min.js"}(e);var l=new Error;o=function(t){s.onerror=s.onload=null,clearTimeout(c);var n=i[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src;l.message="Loading chunk "+e+" failed.\n("+r+": "+a+")",l.name="ChunkLoadError",l.type=r,l.request=a,n[1](l)}i[e]=void 0}};var c=setTimeout((function(){o({type:"timeout",target:s})}),12e4);s.onerror=s.onload=o,document.head.appendChild(s)}return Promise.all(t)},r.m=e,r.c=n,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="https://video-api.wsj.com/api-video/player/",r.oe=function(e){throw console.error(e),e};var a=window.webpackJsonp$jQ111=window.webpackJsonp$jQ111||[],o=a.push.bind(a);a.push=t,a=a.slice();for(var s=0;s<a.length;s++)t(a[s]);var l=o;return r(r.s=87)}([function(e,t,n){"use strict";n.d(t,"s",(function(){return i})),n.d(t,"z",(function(){return r})),n.d(t,"y",(function(){return a})),n.d(t,"q",(function(){return o})),n.d(t,"p",(function(){return s})),n.d(t,"v",(function(){return l})),n.d(t,"m",(function(){return c})),n.d(t,"h",(function(){return u})),n.d(t,"g",(function(){return d})),n.d(t,"O",(function(){return h})),n.d(t,"N",(function(){return p})),n.d(t,"P",(function(){return _})),n.d(t,"I",(function(){return f})),n.d(t,"M",(function(){return g})),n.d(t,"R",(function(){return v})),n.d(t,"K",(function(){return m})),n.d(t,"L",(function(){return y})),n.d(t,"Q",(function(){return S})),n.d(t,"J",(function(){return E})),n.d(t,"G",(function(){return b})),n.d(t,"H",(function(){return T})),n.d(t,"F",(function(){return w})),n.d(t,"r",(function(){return A})),n.d(t,"i",(function(){return C})),n.d(t,"u",(function(){return I})),n.d(t,"l",(function(){return P})),n.d(t,"f",(function(){return k})),n.d(t,"b",(function(){return M})),n.d(t,"e",(function(){return D})),n.d(t,"d",(function(){return O})),n.d(t,"c",(function(){return R})),n.d(t,"a",(function(){return N})),n.d(t,"t",(function(){return L})),n.d(t,"k",(function(){return x})),n.d(t,"w",(function(){return F})),n.d(t,"n",(function(){return V})),n.d(t,"E",(function(){return B})),n.d(t,"A",(function(){return U})),n.d(t,"B",(function(){return j})),n.d(t,"D",(function(){return H})),n.d(t,"C",(function(){return K})),n.d(t,"x",(function(){return Y})),n.d(t,"o",(function(){return q})),n.d(t,"j",(function(){return G}));var i="RESIZE",r="THUMBNAIL_SHOW",a="THUMBNAIL_HIDE",o="MORE_VIDEOS_SLIDE_SHOW",s="MORE_VIDEOS_SLIDE_HIDE",l="SHOW_ENDSCREEN",c="HIDE_ENDSCREEN",u="CONTROLS_SHOW",d="CONTROLS_HIDE",h="VIDEO_PLAY",p="VIDEO_PAUSE",_="VIDEO_PROGRESS",f="VIDEO_DURATION",g="VIDEO_MUTE",v="VIDEO_UNMUTE",m="VIDEO_ENTER_FULLSCREEN",y="VIDEO_EXIT_FULLSCREEN",S="VIDEO_START_PLAYBACK_INIT",E="VIDEO_END_PLAYBACK_INIT",b="VIDEO_BUFFERING",T="VIDEO_CAN_PLAY",w="UPDATE_VIDEO_DATA",A="REPLACE_PLAYLIST",C="DEQUEUE_PLAYLIST",I="SHOW_COUNTDOWN",P="HIDE_COUNTDOWN",k="AD_STARTED",M="AD_COMPLETE",D="AD_PROGRESS",O="AD_PLAY",R="AD_PAUSE",N="AD_BUFFERING",L="SHOW_CLICK_FOR_SOUND",x="HIDE_CLICK_FOR_SOUND",F="SHOW_LOADING_SPINNER",V="HIDE_LOADING_SPINNER",B="UPDATE_VIDEO_API_LOAD_STATE",U="UPDATE_AD_ERROR_STATE",j="UPDATE_AD_INIT_STATE",H="UPDATE_IMA_LOAD_STATE",K="UPDATE_HLS_JS_LOAD_STATE",Y="SHOW_SAVED_MODAL",q="HIDE_SAVED_MODAL",G="ENABLE_LOGGING"},function(e,t,n){"use strict";n.r(t),n.d(t,"render",(function(){return F})),n.d(t,"hydrate",(function(){return V})),n.d(t,"createElement",(function(){return f})),n.d(t,"h",(function(){return f})),n.d(t,"Fragment",(function(){return m})),n.d(t,"createRef",(function(){return v})),n.d(t,"isValidElement",(function(){return r})),n.d(t,"Component",(function(){return y})),n.d(t,"cloneElement",(function(){return B})),n.d(t,"createContext",(function(){return U})),n.d(t,"toChildArray",(function(){return A})),n.d(t,"__u",(function(){return L})),n.d(t,"options",(function(){return i}));var i,r,a,o,s,l,c,u={},d=[],h=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function p(e,t){for(var n in t)e[n]=t[n];return e}function _(e){var t=e.parentNode;t&&t.removeChild(e)}function f(e,t,n){var i,r=arguments,a={};for(i in t)"key"!==i&&"ref"!==i&&(a[i]=t[i]);if(arguments.length>3)for(n=[n],i=3;i<arguments.length;i++)n.push(r[i]);if(null!=n&&(a.children=n),"function"==typeof e&&null!=e.defaultProps)for(i in e.defaultProps)void 0===a[i]&&(a[i]=e.defaultProps[i]);return g(e,a,t&&t.key,t&&t.ref,null)}function g(e,t,n,r,a){var o={type:e,props:t,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:a};return null==a&&(o.__v=o),i.vnode&&i.vnode(o),o}function v(){return{current:null}}function m(e){return e.children}function y(e,t){this.props=e,this.context=t}function S(e,t){if(null==t)return e.__?S(e.__,e.__.__k.indexOf(e)+1):null;for(var n;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e)return n.__e;return"function"==typeof e.type?S(e):null}function E(e){var t,n;if(null!=(e=e.__)&&null!=e.__c){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e){e.__e=e.__c.base=n.__e;break}return E(e)}}function b(e){(!e.__d&&(e.__d=!0)&&a.push(e)&&!T.__r++||s!==i.debounceRendering)&&((s=i.debounceRendering)||o)(T)}function T(){for(var e;T.__r=a.length;)e=a.sort((function(e,t){return e.__v.__b-t.__v.__b})),a=[],e.some((function(e){var t,n,i,r,a,o,s;e.__d&&(o=(a=(t=e).__v).__e,(s=t.__P)&&(n=[],(i=p({},a)).__v=i,r=D(s,a,i,t.__n,void 0!==s.ownerSVGElement,null,n,null==o?S(a):o),O(n,a),r!=o&&E(a)))}))}function w(e,t,n,i,r,a,o,s,l,c){var h,p,f,v,y,E,b,T=i&&i.__k||d,w=T.length;for(l==u&&(l=null!=o?o[0]:w?S(i,0):null),n.__k=[],h=0;h<t.length;h++)if(null!=(v=n.__k[h]=null==(v=t[h])||"boolean"==typeof v?null:"string"==typeof v||"number"==typeof v?g(null,v,null,null,v):Array.isArray(v)?g(m,{children:v},null,null,null):null!=v.__e||null!=v.__c?g(v.type,v.props,v.key,null,v.__v):v)){if(v.__=n,v.__b=n.__b+1,null===(f=T[h])||f&&v.key==f.key&&v.type===f.type)T[h]=void 0;else for(p=0;p<w;p++){if((f=T[p])&&v.key==f.key&&v.type===f.type){T[p]=void 0;break}f=null}y=D(e,v,f=f||u,r,a,o,s,l,c),(p=v.ref)&&f.ref!=p&&(b||(b=[]),f.ref&&b.push(f.ref,null,v),b.push(p,v.__c||y,v)),null!=y?(null==E&&(E=y),l=C(e,v,f,T,o,y,l),"option"==n.type?e.value="":"function"==typeof n.type&&(n.__d=l)):l&&f.__e==l&&l.parentNode!=e&&(l=S(f))}if(n.__e=E,null!=o&&"function"!=typeof n.type)for(h=o.length;h--;)null!=o[h]&&_(o[h]);for(h=w;h--;)null!=T[h]&&L(T[h],T[h]);if(b)for(h=0;h<b.length;h++)N(b[h],b[++h],b[++h])}function A(e){return null==e||"boolean"==typeof e?[]:Array.isArray(e)?d.concat.apply([],e.map(A)):[e]}function C(e,t,n,i,r,a,o){var s,l,c;if(void 0!==t.__d)s=t.__d,t.__d=void 0;else if(r==n||a!=o||null==a.parentNode)e:if(null==o||o.parentNode!==e)e.appendChild(a),s=null;else{for(l=o,c=0;(l=l.nextSibling)&&c<i.length;c+=2)if(l==a)break e;e.insertBefore(a,o),s=o}return void 0!==s?s:a.nextSibling}function I(e,t,n){"-"===t[0]?e.setProperty(t,n):e[t]="number"==typeof n&&!1===h.test(t)?n+"px":null==n?"":n}function P(e,t,n,i,r){var a,o,s,l,c;if(r?"className"===t&&(t="class"):"class"===t&&(t="className"),"style"===t)if(a=e.style,"string"==typeof n)a.cssText=n;else{if("string"==typeof i&&(a.cssText="",i=null),i)for(l in i)n&&l in n||I(a,l,"");if(n)for(c in n)i&&n[c]===i[c]||I(a,c,n[c])}else"o"===t[0]&&"n"===t[1]?(o=t!==(t=t.replace(/Capture$/,"")),s=t.toLowerCase(),t=(s in e?s:t).slice(2),n?(i||e.addEventListener(t,k,o),(e.l||(e.l={}))[t]=n):e.removeEventListener(t,k,o)):"list"!==t&&"tagName"!==t&&"form"!==t&&"type"!==t&&"size"!==t&&!r&&t in e?e[t]=null==n?"":n:"function"!=typeof n&&"dangerouslySetInnerHTML"!==t&&(t!==(t=t.replace(/^xlink:?/,""))?null==n||!1===n?e.removeAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase()):e.setAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase(),n):null==n||!1===n&&!/^ar/.test(t)?e.removeAttribute(t):e.setAttribute(t,n))}function k(e){this.l[e.type](i.event?i.event(e):e)}function M(e,t,n){var i,r;for(i=0;i<e.__k.length;i++)(r=e.__k[i])&&(r.__=e,r.__e&&("function"==typeof r.type&&r.__k.length>1&&M(r,t,n),t=C(n,r,r,e.__k,null,r.__e,t),"function"==typeof e.type&&(e.__d=t)))}function D(e,t,n,r,a,o,s,l,c){var u,d,h,_,f,g,v,S,E,b,T,A=t.type;if(void 0!==t.constructor)return null;(u=i.__b)&&u(t);try{e:if("function"==typeof A){if(S=t.props,E=(u=A.contextType)&&r[u.__c],b=u?E?E.props.value:u.__:r,n.__c?v=(d=t.__c=n.__c).__=d.__E:("prototype"in A&&A.prototype.render?t.__c=d=new A(S,b):(t.__c=d=new y(S,b),d.constructor=A,d.render=x),E&&E.sub(d),d.props=S,d.state||(d.state={}),d.context=b,d.__n=r,h=d.__d=!0,d.__h=[]),null==d.__s&&(d.__s=d.state),null!=A.getDerivedStateFromProps&&(d.__s==d.state&&(d.__s=p({},d.__s)),p(d.__s,A.getDerivedStateFromProps(S,d.__s))),_=d.props,f=d.state,h)null==A.getDerivedStateFromProps&&null!=d.componentWillMount&&d.componentWillMount(),null!=d.componentDidMount&&d.__h.push(d.componentDidMount);else{if(null==A.getDerivedStateFromProps&&S!==_&&null!=d.componentWillReceiveProps&&d.componentWillReceiveProps(S,b),!d.__e&&null!=d.shouldComponentUpdate&&!1===d.shouldComponentUpdate(S,d.__s,b)||t.__v===n.__v){d.props=S,d.state=d.__s,t.__v!==n.__v&&(d.__d=!1),d.__v=t,t.__e=n.__e,t.__k=n.__k,d.__h.length&&s.push(d),M(t,l,e);break e}null!=d.componentWillUpdate&&d.componentWillUpdate(S,d.__s,b),null!=d.componentDidUpdate&&d.__h.push((function(){d.componentDidUpdate(_,f,g)}))}d.context=b,d.props=S,d.state=d.__s,(u=i.__r)&&u(t),d.__d=!1,d.__v=t,d.__P=e,u=d.render(d.props,d.state,d.context),d.state=d.__s,null!=d.getChildContext&&(r=p(p({},r),d.getChildContext())),h||null==d.getSnapshotBeforeUpdate||(g=d.getSnapshotBeforeUpdate(_,f)),T=null!=u&&u.type==m&&null==u.key?u.props.children:u,w(e,Array.isArray(T)?T:[T],t,n,r,a,o,s,l,c),d.base=t.__e,d.__h.length&&s.push(d),v&&(d.__E=d.__=null),d.__e=!1}else null==o&&t.__v===n.__v?(t.__k=n.__k,t.__e=n.__e):t.__e=R(n.__e,t,n,r,a,o,s,c);(u=i.diffed)&&u(t)}catch(e){t.__v=null,i.__e(e,t,n)}return t.__e}function O(e,t){i.__c&&i.__c(t,e),e.some((function(t){try{e=t.__h,t.__h=[],e.some((function(e){e.call(t)}))}catch(e){i.__e(e,t.__v)}}))}function R(e,t,n,i,r,a,o,s){var l,c,h,p,_,f=n.props,g=t.props;if(r="svg"===t.type||r,null!=a)for(l=0;l<a.length;l++)if(null!=(c=a[l])&&((null===t.type?3===c.nodeType:c.localName===t.type)||e==c)){e=c,a[l]=null;break}if(null==e){if(null===t.type)return document.createTextNode(g);e=r?document.createElementNS("http://www.w3.org/2000/svg",t.type):document.createElement(t.type,g.is&&{is:g.is}),a=null,s=!1}if(null===t.type)f!==g&&e.data!=g&&(e.data=g);else{if(null!=a&&(a=d.slice.call(e.childNodes)),h=(f=n.props||u).dangerouslySetInnerHTML,p=g.dangerouslySetInnerHTML,!s){if(null!=a)for(f={},_=0;_<e.attributes.length;_++)f[e.attributes[_].name]=e.attributes[_].value;(p||h)&&(p&&h&&p.__html==h.__html||(e.innerHTML=p&&p.__html||""))}(function(e,t,n,i,r){var a;for(a in n)"children"===a||"key"===a||a in t||P(e,a,null,n[a],i);for(a in t)r&&"function"!=typeof t[a]||"children"===a||"key"===a||"value"===a||"checked"===a||n[a]===t[a]||P(e,a,t[a],n[a],i)})(e,g,f,r,s),p?t.__k=[]:(l=t.props.children,w(e,Array.isArray(l)?l:[l],t,n,i,"foreignObject"!==t.type&&r,a,o,u,s)),s||("value"in g&&void 0!==(l=g.value)&&l!==e.value&&P(e,"value",l,f.value,!1),"checked"in g&&void 0!==(l=g.checked)&&l!==e.checked&&P(e,"checked",l,f.checked,!1))}return e}function N(e,t,n){try{"function"==typeof e?e(t):e.current=t}catch(e){i.__e(e,n)}}function L(e,t,n){var r,a,o;if(i.unmount&&i.unmount(e),(r=e.ref)&&(r.current&&r.current!==e.__e||N(r,null,t)),n||"function"==typeof e.type||(n=null!=(a=e.__e)),e.__e=e.__d=void 0,null!=(r=e.__c)){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(e){i.__e(e,t)}r.base=r.__P=null}if(r=e.__k)for(o=0;o<r.length;o++)r[o]&&L(r[o],t,n);null!=a&&_(a)}function x(e,t,n){return this.constructor(e,n)}function F(e,t,n){var r,a,o;i.__&&i.__(e,t),a=(r=n===l)?null:n&&n.__k||t.__k,e=f(m,null,[e]),o=[],D(t,(r?t:n||t).__k=e,a||u,u,void 0!==t.ownerSVGElement,n&&!r?[n]:a?null:t.childNodes.length?d.slice.call(t.childNodes):null,o,n||u,r),O(o,e)}function V(e,t){F(e,t,l)}function B(e,t){var n,i;for(i in t=p(p({},e.props),t),arguments.length>2&&(t.children=d.slice.call(arguments,2)),n={},t)"key"!==i&&"ref"!==i&&(n[i]=t[i]);return g(e.type,n,t.key||e.key,t.ref||e.ref,null)}function U(e){var t={},n={__c:"__cC"+c++,__:e,Consumer:function(e,t){return e.children(t)},Provider:function(e){var i,r=this;return this.getChildContext||(i=[],this.getChildContext=function(){return t[n.__c]=r,t},this.shouldComponentUpdate=function(e){r.props.value!==e.value&&i.some((function(t){t.context=e.value,b(t)}))},this.sub=function(e){i.push(e);var t=e.componentWillUnmount;e.componentWillUnmount=function(){i.splice(i.indexOf(e),1),t&&t.call(e)}}),e.children}};return n.Consumer.contextType=n,n.Provider.__=n,n}i={__e:function(e,t){for(var n,i;t=t.__;)if((n=t.__c)&&!n.__)try{if(n.constructor&&null!=n.constructor.getDerivedStateFromError&&(i=!0,n.setState(n.constructor.getDerivedStateFromError(e))),null!=n.componentDidCatch&&(i=!0,n.componentDidCatch(e)),i)return b(n.__E=n)}catch(t){e=t}throw e}},r=function(e){return null!=e&&void 0===e.constructor},y.prototype.setState=function(e,t){var n;n=this.__s!==this.state?this.__s:this.__s=p({},this.state),"function"==typeof e&&(e=e(n,this.props)),e&&p(n,e),null!=e&&this.__v&&(t&&this.__h.push(t),b(this))},y.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),b(this))},y.prototype.render=m,a=[],o="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,T.__r=0,l=u,c=0},function(e,t,n){(function(t){var n=function(e){return e&&e.Math==Math&&e};e.exports=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof t&&t)||Function("return this")()}).call(this,n(22))},function(e,t,n){"use strict";n.r(t),n.d(t,"Provider",(function(){return N})),n.d(t,"connectAdvanced",(function(){return Q})),n.d(t,"ReactReduxContext",(function(){return k})),n.d(t,"connect",(function(){return de})),n.d(t,"batch",(function(){return I})),n.d(t,"useDispatch",(function(){return ge})),n.d(t,"createDispatchHook",(function(){return fe})),n.d(t,"useSelector",(function(){return ye})),n.d(t,"createSelectorHook",(function(){return me})),n.d(t,"useStore",(function(){return _e})),n.d(t,"createStoreHook",(function(){return pe})),n.d(t,"shallowEqual",(function(){return X}));var i=n(6),r=n(1);function a(e,t){for(var n in t)e[n]=t[n];return e}function o(e,t){for(var n in e)if("__source"!==n&&!(n in t))return!0;for(var i in t)if("__source"!==i&&e[i]!==t[i])return!0;return!1}var s=function(e){var t,n;function i(t){var n;return(n=e.call(this,t)||this).isPureReactComponent=!0,n}return n=e,(t=i).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,i.prototype.shouldComponentUpdate=function(e,t){return o(this.props,e)||o(this.state,t)},i}(r.Component);var l=r.options.__b;r.options.__b=function(e){e.type&&e.type.t&&e.ref&&(e.props.ref=e.ref,e.ref=null),l&&l(e)};var c="undefined"!=typeof Symbol&&Symbol.for&&Symbol.for("react.forward_ref")||3911;var u=function(e,t){return e?Object(r.toChildArray)(e).reduce((function(e,n,i){return e.concat(t(n,i))}),[]):null},d={map:u,forEach:u,count:function(e){return e?Object(r.toChildArray)(e).length:0},only:function(e){if(1!==(e=Object(r.toChildArray)(e)).length)throw new Error("Children.only() expects only one child.");return e[0]},toArray:r.toChildArray},h=r.options.__e;function p(e){return e&&((e=a({},e)).__c=null,e.__k=e.__k&&e.__k.map(p)),e}function _(){this.__u=0,this.o=null,this.__b=null}function f(e){var t=e.__.__c;return t&&t.u&&t.u(e)}function g(){this.i=null,this.l=null}r.options.__e=function(e,t,n){if(e.then)for(var i,r=t;r=r.__;)if((i=r.__c)&&i.__c)return i.__c(e,t.__c);h(e,t,n)},(_.prototype=new r.Component).__c=function(e,t){var n=this;null==n.o&&(n.o=[]),n.o.push(t);var i=f(n.__v),r=!1,a=function(){r||(r=!0,i?i(o):o())};t.__c=t.componentWillUnmount,t.componentWillUnmount=function(){a(),t.__c&&t.__c()};var o=function(){var e;if(!--n.__u)for(n.__v.__k[0]=n.state.u,n.setState({u:n.__b=null});e=n.o.pop();)e.forceUpdate()};n.__u++||n.setState({u:n.__b=n.__v.__k[0]}),e.then(a,a)},_.prototype.render=function(e,t){return this.__b&&(this.__v.__k[0]=p(this.__b),this.__b=null),[Object(r.createElement)(r.Fragment,null,t.u?null:e.children),t.u&&e.fallback]};var v=function(e,t,n){if(++n[1]===n[0]&&e.l.delete(t),e.props.revealOrder&&("t"!==e.props.revealOrder[0]||!e.l.size))for(n=e.i;n;){for(;n.length>3;)n.pop()();if(n[1]<n[0])break;e.i=n=n[2]}};(g.prototype=new r.Component).u=function(e){var t=this,n=f(t.__v),i=t.l.get(e);return i[0]++,function(r){var a=function(){t.props.revealOrder?(i.push(r),v(t,e,i)):r()};n?n(a):a()}},g.prototype.render=function(e){this.i=null,this.l=new Map;var t=Object(r.toChildArray)(e.children);e.revealOrder&&"b"===e.revealOrder[0]&&t.reverse();for(var n=t.length;n--;)this.l.set(t[n],this.i=[1,0,this.i]);return e.children},g.prototype.componentDidUpdate=g.prototype.componentDidMount=function(){var e=this;e.l.forEach((function(t,n){v(e,n,t)}))};var m=function(){function e(){}var t=e.prototype;return t.getChildContext=function(){return this.props.context},t.render=function(e){return e.children},e}();function y(e){var t=this,n=e.container,i=Object(r.createElement)(m,{context:t.context},e.vnode);return t.s&&t.s!==n&&(t.v.parentNode&&t.s.removeChild(t.v),Object(r.__u)(t.h),t.p=!1),e.vnode?t.p?(n.__k=t.__k,Object(r.render)(i,n),t.__k=n.__k):(t.v=document.createTextNode(""),Object(r.hydrate)("",n),n.appendChild(t.v),t.p=!0,t.s=n,Object(r.render)(i,n,t.v),t.__k=t.v.__k):t.p&&(t.v.parentNode&&t.s.removeChild(t.v),Object(r.__u)(t.h)),t.h=i,t.componentWillUnmount=function(){t.v.parentNode&&t.s.removeChild(t.v),Object(r.__u)(t.h)},null}var S=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|fill|flood|font|glyph(?!R)|horiz|marker(?!H|W|U)|overline|paint|stop|strikethrough|stroke|text(?!L)|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/;r.Component.prototype.isReactComponent={};var E="undefined"!=typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;var b=r.options.event;function T(e,t){e["UNSAFE_"+t]&&!e[t]&&Object.defineProperty(e,t,{configurable:!1,get:function(){return this["UNSAFE_"+t]},set:function(e){this["UNSAFE_"+t]=e}})}r.options.event=function(e){b&&(e=b(e)),e.persist=function(){};var t=!1,n=!1,i=e.stopPropagation;e.stopPropagation=function(){i.call(e),t=!0};var r=e.preventDefault;return e.preventDefault=function(){r.call(e),n=!0},e.isPropagationStopped=function(){return t},e.isDefaultPrevented=function(){return n},e.nativeEvent=e};var w={configurable:!0,get:function(){return this.class}},A=r.options.vnode;r.options.vnode=function(e){e.$$typeof=E;var t=e.type,n=e.props;if(t){if(n.class!=n.className&&(w.enumerable="className"in n,null!=n.className&&(n.class=n.className),Object.defineProperty(n,"className",w)),"function"!=typeof t){var i,a,o;for(o in n.defaultValue&&void 0!==n.value&&(n.value||0===n.value||(n.value=n.defaultValue),delete n.defaultValue),Array.isArray(n.value)&&n.multiple&&"select"===t&&(Object(r.toChildArray)(n.children).forEach((function(e){-1!=n.value.indexOf(e.props.value)&&(e.props.selected=!0)})),delete n.value),null!=n.value&&"textarea"===t&&(n.children=n.value,delete n.value),n)if(i=S.test(o))break;if(i)for(o in a=e.props={},n)a[S.test(o)?o.replace(/[A-Z0-9]/,"-$&").toLowerCase():o]=n[o]}!function(t){var n=e.type,i=e.props;if(i&&"string"==typeof n){var r={};for(var a in i)/^on(Ani|Tra|Tou)/.test(a)&&(i[a.toLowerCase()]=i[a],delete i[a]),r[a.toLowerCase()]=a;if(r.ondoubleclick&&(i.ondblclick=i[r.ondoubleclick],delete i[r.ondoubleclick]),r.onbeforeinput&&(i.onbeforeinput=i[r.onbeforeinput],delete i[r.onbeforeinput]),r.onchange&&("textarea"===n||"input"===n.toLowerCase()&&!/^fil|che|ra/i.test(i.type))){var o=r.oninput||"oninput";i[o]||(i[o]=i[r.onchange],delete i[r.onchange])}}}(),"function"==typeof t&&!t.m&&t.prototype&&(T(t.prototype,"componentWillMount"),T(t.prototype,"componentWillReceiveProps"),T(t.prototype,"componentWillUpdate"),t.m=!0)}A&&A(e)};function C(e){return!!e&&e.$$typeof===E}var I=function(e,t){return e(t)},P=(r.Fragment,{useState:i.useState,useReducer:i.useReducer,useEffect:i.useEffect,useLayoutEffect:i.useLayoutEffect,useRef:i.useRef,useImperativeHandle:i.useImperativeHandle,useMemo:i.useMemo,useCallback:i.useCallback,useContext:i.useContext,useDebugValue:i.useDebugValue,version:"16.8.0",Children:d,render:function(e,t,n){if(null==t.__k)for(;t.firstChild;)t.removeChild(t.firstChild);return Object(r.render)(e,t),"function"==typeof n&&n(),e?e.__c:null},hydrate:function(e,t,n){return Object(r.hydrate)(e,t),"function"==typeof n&&n(),e?e.__c:null},unmountComponentAtNode:function(e){return!!e.__k&&(Object(r.render)(null,e),!0)},createPortal:function(e,t){return Object(r.createElement)(y,{vnode:e,container:t})},createElement:r.createElement,createContext:r.createContext,createFactory:function(e){return r.createElement.bind(null,e)},cloneElement:function(e){return C(e)?r.cloneElement.apply(null,arguments):e},createRef:r.createRef,Fragment:r.Fragment,isValidElement:C,findDOMNode:function(e){return e&&(e.base||1===e.nodeType&&e)||null},Component:r.Component,PureComponent:s,memo:function(e,t){function n(e){var n=this.props.ref,i=n==e.ref;return!i&&n&&(n.call?n(null):n.current=null),t?!t(this.props,e)||!i:o(this.props,e)}function i(t){return this.shouldComponentUpdate=n,Object(r.createElement)(e,t)}return i.prototype.isReactComponent=!0,i.displayName="Memo("+(e.displayName||e.name)+")",i.t=!0,i},forwardRef:function(e){function t(t,n){var i=a({},t);return delete i.ref,e(i,"object"!=typeof(n=t.ref||n)||"current"in n?n:null)}return t.$$typeof=c,t.render=t,t.prototype.isReactComponent=t.t=!0,t.displayName="ForwardRef("+(e.displayName||e.name)+")",t},unstable_batchedUpdates:I,StrictMode:r.Fragment,Suspense:_,SuspenseList:g,lazy:function(e){var t,n,i;function a(a){if(t||(t=e()).then((function(e){n=e.default||e}),(function(e){i=e})),i)throw i;if(!n)throw t;return Object(r.createElement)(n,a)}return a.displayName="Lazy",a.t=!0,a}}),k=(n(149),P.createContext(null));var M=function(e){e()},D={notify:function(){}};function O(){var e=M,t=null,n=null;return{clear:function(){t=null,n=null},notify:function(){e((function(){for(var e=t;e;)e.callback(),e=e.next}))},get:function(){for(var e=[],n=t;n;)e.push(n),n=n.next;return e},subscribe:function(e){var i=!0,r=n={callback:e,next:null,prev:n};return r.prev?r.prev.next=r:t=r,function(){i&&null!==t&&(i=!1,r.next?r.next.prev=r.prev:n=r.prev,r.prev?r.prev.next=r.next:t=r.next)}}}}var R=function(){function e(e,t){this.store=e,this.parentSub=t,this.unsubscribe=null,this.listeners=D,this.handleChangeWrapper=this.handleChangeWrapper.bind(this)}var t=e.prototype;return t.addNestedSub=function(e){return this.trySubscribe(),this.listeners.subscribe(e)},t.notifyNestedSubs=function(){this.listeners.notify()},t.handleChangeWrapper=function(){this.onStateChange&&this.onStateChange()},t.isSubscribed=function(){return Boolean(this.unsubscribe)},t.trySubscribe=function(){this.unsubscribe||(this.unsubscribe=this.parentSub?this.parentSub.addNestedSub(this.handleChangeWrapper):this.store.subscribe(this.handleChangeWrapper),this.listeners=O())},t.tryUnsubscribe=function(){this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=null,this.listeners.clear(),this.listeners=D)},e}();var N=function(e){var t=e.store,n=e.context,r=e.children,a=Object(i.useMemo)((function(){var e=new R(t);return e.onStateChange=e.notifyNestedSubs,{store:t,subscription:e}}),[t]),o=Object(i.useMemo)((function(){return t.getState()}),[t]);Object(i.useEffect)((function(){var e=a.subscription;return e.trySubscribe(),o!==t.getState()&&e.notifyNestedSubs(),function(){e.tryUnsubscribe(),e.onStateChange=null}}),[a,o]);var s=n||k;return P.createElement(s.Provider,{value:a},r)};function L(){return(L=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function x(e,t){if(null==e)return{};var n,i,r={},a=Object.keys(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}var F=n(54),V=n.n(F),B=n(52),U="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?i.useLayoutEffect:i.useEffect,j=[],H=[null,null];function K(e,t){var n=e[1];return[t.payload,n+1]}function Y(e,t,n){U((function(){return e.apply(void 0,t)}),n)}function q(e,t,n,i,r,a,o){e.current=i,t.current=r,n.current=!1,a.current&&(a.current=null,o())}function G(e,t,n,i,r,a,o,s,l,c){if(e){var u=!1,d=null,h=function(){if(!u){var e,n,h=t.getState();try{e=i(h,r.current)}catch(e){n=e,d=e}n||(d=null),e===a.current?o.current||l():(a.current=e,s.current=e,o.current=!0,c({type:"STORE_UPDATED",payload:{error:n}}))}};n.onStateChange=h,n.trySubscribe(),h();return function(){if(u=!0,n.tryUnsubscribe(),n.onStateChange=null,d)throw d}}}var W=function(){return[null,0]};function Q(e,t){void 0===t&&(t={});var n=t,r=n.getDisplayName,a=void 0===r?function(e){return"ConnectAdvanced("+e+")"}:r,o=n.methodName,s=void 0===o?"connectAdvanced":o,l=n.renderCountProp,c=void 0===l?void 0:l,u=n.shouldHandleStateChanges,d=void 0===u||u,h=n.storeKey,p=void 0===h?"store":h,_=(n.withRef,n.forwardRef),f=void 0!==_&&_,g=n.context,v=void 0===g?k:g,m=x(n,["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef","forwardRef","context"]),y=v;return function(t){var n=t.displayName||t.name||"Component",r=a(n),o=L({},m,{getDisplayName:a,methodName:s,renderCountProp:c,shouldHandleStateChanges:d,storeKey:p,displayName:r,wrappedComponentName:n,WrappedComponent:t}),l=m.pure;var u=l?i.useMemo:function(e){return e()};function h(n){var r=Object(i.useMemo)((function(){var e=n.forwardedRef,t=x(n,["forwardedRef"]);return[n.context,e,t]}),[n]),a=r[0],s=r[1],l=r[2],c=Object(i.useMemo)((function(){return a&&a.Consumer&&Object(B.isContextConsumer)(P.createElement(a.Consumer,null))?a:y}),[a,y]),h=Object(i.useContext)(c),p=Boolean(n.store)&&Boolean(n.store.getState)&&Boolean(n.store.dispatch);Boolean(h)&&Boolean(h.store);var _=p?n.store:h.store,f=Object(i.useMemo)((function(){return function(t){return e(t.dispatch,o)}(_)}),[_]),g=Object(i.useMemo)((function(){if(!d)return H;var e=new R(_,p?null:h.subscription),t=e.notifyNestedSubs.bind(e);return[e,t]}),[_,p,h]),v=g[0],m=g[1],S=Object(i.useMemo)((function(){return p?h:L({},h,{subscription:v})}),[p,h,v]),E=Object(i.useReducer)(K,j,W),b=E[0][0],T=E[1];if(b&&b.error)throw b.error;var w=Object(i.useRef)(),A=Object(i.useRef)(l),C=Object(i.useRef)(),I=Object(i.useRef)(!1),k=u((function(){return C.current&&l===A.current?C.current:f(_.getState(),l)}),[_,b,l]);Y(q,[A,w,I,l,k,C,m]),Y(G,[d,_,v,f,A,w,I,C,m,T],[_,v,f]);var M=Object(i.useMemo)((function(){return P.createElement(t,L({},k,{ref:s}))}),[s,t,k]);return Object(i.useMemo)((function(){return d?P.createElement(c.Provider,{value:S},M):M}),[c,M,S])}var _=l?P.memo(h):h;if(_.WrappedComponent=t,_.displayName=r,f){var g=P.forwardRef((function(e,t){return P.createElement(_,L({},e,{forwardedRef:t}))}));return g.displayName=r,g.WrappedComponent=t,V()(g,t)}return V()(_,t)}}function z(e,t){return e===t?0!==e||0!==t||1/e==1/t:e!=e&&t!=t}function X(e,t){if(z(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(var r=0;r<n.length;r++)if(!Object.prototype.hasOwnProperty.call(t,n[r])||!z(e[n[r]],t[n[r]]))return!1;return!0}var J=n(5);function Z(e){return function(t,n){var i=e(t,n);function r(){return i}return r.dependsOnOwnProps=!1,r}}function $(e){return null!==e.dependsOnOwnProps&&void 0!==e.dependsOnOwnProps?Boolean(e.dependsOnOwnProps):1!==e.length}function ee(e,t){return function(t,n){n.displayName;var i=function(e,t){return i.dependsOnOwnProps?i.mapToProps(e,t):i.mapToProps(e)};return i.dependsOnOwnProps=!0,i.mapToProps=function(t,n){i.mapToProps=e,i.dependsOnOwnProps=$(e);var r=i(t,n);return"function"==typeof r&&(i.mapToProps=r,i.dependsOnOwnProps=$(r),r=i(t,n)),r},i}}var te=[function(e){return"function"==typeof e?ee(e):void 0},function(e){return e?void 0:Z((function(e){return{dispatch:e}}))},function(e){return e&&"object"==typeof e?Z((function(t){return Object(J.bindActionCreators)(e,t)})):void 0}];var ne=[function(e){return"function"==typeof e?ee(e):void 0},function(e){return e?void 0:Z((function(){return{}}))}];function ie(e,t,n){return L({},n,{},e,{},t)}var re=[function(e){return"function"==typeof e?function(e){return function(t,n){n.displayName;var i,r=n.pure,a=n.areMergedPropsEqual,o=!1;return function(t,n,s){var l=e(t,n,s);return o?r&&a(l,i)||(i=l):(o=!0,i=l),i}}}(e):void 0},function(e){return e?void 0:function(){return ie}}];function ae(e,t,n,i){return function(r,a){return n(e(r,a),t(i,a),a)}}function oe(e,t,n,i,r){var a,o,s,l,c,u=r.areStatesEqual,d=r.areOwnPropsEqual,h=r.areStatePropsEqual,p=!1;function _(r,p){var _,f,g=!d(p,o),v=!u(r,a);return a=r,o=p,g&&v?(s=e(a,o),t.dependsOnOwnProps&&(l=t(i,o)),c=n(s,l,o)):g?(e.dependsOnOwnProps&&(s=e(a,o)),t.dependsOnOwnProps&&(l=t(i,o)),c=n(s,l,o)):v?(_=e(a,o),f=!h(_,s),s=_,f&&(c=n(s,l,o)),c):c}return function(r,u){return p?_(r,u):(s=e(a=r,o=u),l=t(i,o),c=n(s,l,o),p=!0,c)}}function se(e,t){var n=t.initMapStateToProps,i=t.initMapDispatchToProps,r=t.initMergeProps,a=x(t,["initMapStateToProps","initMapDispatchToProps","initMergeProps"]),o=n(e,a),s=i(e,a),l=r(e,a);return(a.pure?oe:ae)(o,s,l,e,a)}function le(e,t,n){for(var i=t.length-1;i>=0;i--){var r=t[i](e);if(r)return r}return function(t,i){throw new Error("Invalid value of type "+typeof e+" for "+n+" argument when connecting component "+i.wrappedComponentName+".")}}function ce(e,t){return e===t}function ue(e){var t=void 0===e?{}:e,n=t.connectHOC,i=void 0===n?Q:n,r=t.mapStateToPropsFactories,a=void 0===r?ne:r,o=t.mapDispatchToPropsFactories,s=void 0===o?te:o,l=t.mergePropsFactories,c=void 0===l?re:l,u=t.selectorFactory,d=void 0===u?se:u;return function(e,t,n,r){void 0===r&&(r={});var o=r,l=o.pure,u=void 0===l||l,h=o.areStatesEqual,p=void 0===h?ce:h,_=o.areOwnPropsEqual,f=void 0===_?X:_,g=o.areStatePropsEqual,v=void 0===g?X:g,m=o.areMergedPropsEqual,y=void 0===m?X:m,S=x(o,["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"]),E=le(e,a,"mapStateToProps"),b=le(t,s,"mapDispatchToProps"),T=le(n,c,"mergeProps");return i(d,L({methodName:"connect",getDisplayName:function(e){return"Connect("+e+")"},shouldHandleStateChanges:Boolean(e),initMapStateToProps:E,initMapDispatchToProps:b,initMergeProps:T,pure:u,areStatesEqual:p,areOwnPropsEqual:f,areStatePropsEqual:v,areMergedPropsEqual:y},S))}}var de=ue();function he(){return Object(i.useContext)(k)}function pe(e){void 0===e&&(e=k);var t=e===k?he:function(){return Object(i.useContext)(e)};return function(){return t().store}}var _e=pe();function fe(e){void 0===e&&(e=k);var t=e===k?_e:pe(e);return function(){return t().dispatch}}var ge=fe(),ve=function(e,t){return e===t};function me(e){void 0===e&&(e=k);var t=e===k?he:function(){return Object(i.useContext)(e)};return function(e,n){void 0===n&&(n=ve);var r=t();return function(e,t,n,r){var a,o=Object(i.useReducer)((function(e){return e+1}),0)[1],s=Object(i.useMemo)((function(){return new R(n,r)}),[n,r]),l=Object(i.useRef)(),c=Object(i.useRef)(),u=Object(i.useRef)();try{a=e!==c.current||l.current?e(n.getState()):u.current}catch(e){throw l.current&&(e.message+="\nThe error may be correlated with this previous error:\n"+l.current.stack+"\n\n"),e}return U((function(){c.current=e,u.current=a,l.current=void 0})),U((function(){function e(){try{var e=c.current(n.getState());if(t(e,u.current))return;u.current=e}catch(e){l.current=e}o({})}return s.onStateChange=e,s.trySubscribe(),e(),function(){return s.tryUnsubscribe()}}),[n,s]),a}(e,n,r.store,r.subscription)}}var ye=me();M=I},function(e,t,n){var i=n(2),r=n(55),a=n(8),o=n(59),s=n(60),l=n(91),c=r("wks"),u=i.Symbol,d=l?u:u&&u.withoutSetter||o;e.exports=function(e){return a(c,e)||(s&&a(u,e)?c[e]=u[e]:c[e]=d("Symbol."+e)),c[e]}},function(e,t,n){"use strict";n.r(t),n.d(t,"__DO_NOT_USE__ActionTypes",(function(){return a})),n.d(t,"applyMiddleware",(function(){return g})),n.d(t,"bindActionCreators",(function(){return d})),n.d(t,"combineReducers",(function(){return c})),n.d(t,"compose",(function(){return f})),n.d(t,"createStore",(function(){return s}));var i=n(50),r=function(){return Math.random().toString(36).substring(7).split("").join(".")},a={INIT:"@@redux/INIT"+r(),REPLACE:"@@redux/REPLACE"+r(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+r()}};function o(e){if("object"!=typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function s(e,t,n){var r;if("function"==typeof t&&"function"==typeof n||"function"==typeof n&&"function"==typeof arguments[3])throw new Error("It looks like you are passing several store enhancers to createStore(). This is not supported. Instead, compose them together to a single function.");if("function"==typeof t&&void 0===n&&(n=t,t=void 0),void 0!==n){if("function"!=typeof n)throw new Error("Expected the enhancer to be a function.");return n(s)(e,t)}if("function"!=typeof e)throw new Error("Expected the reducer to be a function.");var l=e,c=t,u=[],d=u,h=!1;function p(){d===u&&(d=u.slice())}function _(){if(h)throw new Error("You may not call store.getState() while the reducer is executing. The reducer has already received the state as an argument. Pass it down from the top reducer instead of reading it from the store.");return c}function f(e){if("function"!=typeof e)throw new Error("Expected the listener to be a function.");if(h)throw new Error("You may not call store.subscribe() while the reducer is executing. If you would like to be notified after the store has been updated, subscribe from a component and invoke store.getState() in the callback to access the latest state. See https://redux.js.org/api-reference/store#subscribelistener for more details.");var t=!0;return p(),d.push(e),function(){if(t){if(h)throw new Error("You may not unsubscribe from a store listener while the reducer is executing. See https://redux.js.org/api-reference/store#subscribelistener for more details.");t=!1,p();var n=d.indexOf(e);d.splice(n,1),u=null}}}function g(e){if(!o(e))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if(void 0===e.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(h)throw new Error("Reducers may not dispatch actions.");try{h=!0,c=l(c,e)}finally{h=!1}for(var t=u=d,n=0;n<t.length;n++){(0,t[n])()}return e}function v(e){if("function"!=typeof e)throw new Error("Expected the nextReducer to be a function.");l=e,g({type:a.REPLACE})}function m(){var e,t=f;return(e={subscribe:function(e){if("object"!=typeof e||null===e)throw new TypeError("Expected the observer to be an object.");function n(){e.next&&e.next(_())}return n(),{unsubscribe:t(n)}}})[i.a]=function(){return this},e}return g({type:a.INIT}),(r={dispatch:g,subscribe:f,getState:_,replaceReducer:v})[i.a]=m,r}function l(e,t){var n=t&&t.type;return"Given "+(n&&'action "'+String(n)+'"'||"an action")+', reducer "'+e+'" returned undefined. To ignore an action, you must explicitly return the previous state. If you want this reducer to hold no value, you can return null instead of undefined.'}function c(e){for(var t=Object.keys(e),n={},i=0;i<t.length;i++){var r=t[i];0,"function"==typeof e[r]&&(n[r]=e[r])}var o,s=Object.keys(n);try{!function(e){Object.keys(e).forEach((function(t){var n=e[t];if(void 0===n(void 0,{type:a.INIT}))throw new Error('Reducer "'+t+"\" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined. If you don't want to set a value for this reducer, you can use null instead of undefined.");if(void 0===n(void 0,{type:a.PROBE_UNKNOWN_ACTION()}))throw new Error('Reducer "'+t+"\" returned undefined when probed with a random type. Don't try to handle "+a.INIT+' or other actions in "redux/*" namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined, but can be null.')}))}(n)}catch(e){o=e}return function(e,t){if(void 0===e&&(e={}),o)throw o;for(var i=!1,r={},a=0;a<s.length;a++){var c=s[a],u=n[c],d=e[c],h=u(d,t);if(void 0===h){var p=l(c,t);throw new Error(p)}r[c]=h,i=i||h!==d}return(i=i||s.length!==Object.keys(e).length)?r:e}}function u(e,t){return function(){return t(e.apply(this,arguments))}}function d(e,t){if("function"==typeof e)return u(e,t);if("object"!=typeof e||null===e)throw new Error("bindActionCreators expected an object or a function, instead received "+(null===e?"null":typeof e)+'. Did you write "import ActionCreators from" instead of "import * as ActionCreators from"?');var n={};for(var i in e){var r=e[i];"function"==typeof r&&(n[i]=u(r,t))}return n}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(e,t){var n=Object.keys(e);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(e)),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(n,!0).forEach((function(t){h(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function f(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}function g(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return function(){var n=e.apply(void 0,arguments),i=function(){throw new Error("Dispatching while constructing your middleware is not allowed. Other middleware would not be applied to this dispatch.")},r={getState:n.getState,dispatch:function(){return i.apply(void 0,arguments)}},a=t.map((function(e){return e(r)}));return _({},n,{dispatch:i=f.apply(void 0,a)(n.dispatch)})}}}},function(e,t,n){"use strict";n.r(t),n.d(t,"useState",(function(){return _})),n.d(t,"useReducer",(function(){return f})),n.d(t,"useEffect",(function(){return g})),n.d(t,"useLayoutEffect",(function(){return v})),n.d(t,"useRef",(function(){return m})),n.d(t,"useImperativeHandle",(function(){return y})),n.d(t,"useMemo",(function(){return S})),n.d(t,"useCallback",(function(){return E})),n.d(t,"useContext",(function(){return b})),n.d(t,"useDebugValue",(function(){return T})),n.d(t,"useErrorBoundary",(function(){return w}));var i,r,a,o=n(1),s=0,l=[],c=o.options.__r,u=o.options.diffed,d=o.options.__c,h=o.options.unmount;function p(e,t){o.options.__h&&o.options.__h(r,e,s||t),s=0;var n=r.__H||(r.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({}),n.__[e]}function _(e){return s=1,f(M,e)}function f(e,t,n){var a=p(i++,2);return a.t=e,a.__c||(a.__c=r,a.__=[n?n(t):M(void 0,t),function(e){var t=a.t(a.__[0],e);a.__[0]!==t&&(a.__=[t,a.__[1]],a.__c.setState({}))}]),a.__}function g(e,t){var n=p(i++,3);!o.options.__s&&k(n.__H,t)&&(n.__=e,n.__H=t,r.__H.__h.push(n))}function v(e,t){var n=p(i++,4);!o.options.__s&&k(n.__H,t)&&(n.__=e,n.__H=t,r.__h.push(n))}function m(e){return s=5,S((function(){return{current:e}}),[])}function y(e,t,n){s=6,v((function(){"function"==typeof e?e(t()):e&&(e.current=t())}),null==n?n:n.concat(e))}function S(e,t){var n=p(i++,7);return k(n.__H,t)?(n.__H=t,n.__h=e,n.__=e()):n.__}function E(e,t){return s=8,S((function(){return e}),t)}function b(e){var t=r.context[e.__c],n=p(i++,9);return n.__c=e,t?(null==n.__&&(n.__=!0,t.sub(r)),t.props.value):e.__}function T(e,t){o.options.useDebugValue&&o.options.useDebugValue(t?t(e):e)}function w(e){var t=p(i++,10),n=_();return t.__=e,r.componentDidCatch||(r.componentDidCatch=function(e){t.__&&t.__(e),n[1](e)}),[n[0],function(){n[1](void 0)}]}function A(){l.some((function(e){if(e.__P)try{e.__H.__h.forEach(I),e.__H.__h.forEach(P),e.__H.__h=[]}catch(t){return e.__H.__h=[],o.options.__e(t,e.__v),!0}})),l=[]}o.options.__r=function(e){c&&c(e),i=0;var t=(r=e.__c).__H;t&&(t.__h.forEach(I),t.__h.forEach(P),t.__h=[])},o.options.diffed=function(e){u&&u(e);var t=e.__c;t&&t.__H&&t.__H.__h.length&&(1!==l.push(t)&&a===o.options.requestAnimationFrame||((a=o.options.requestAnimationFrame)||function(e){var t,n=function(){clearTimeout(i),C&&cancelAnimationFrame(t),setTimeout(e)},i=setTimeout(n,100);C&&(t=requestAnimationFrame(n))})(A))},o.options.__c=function(e,t){t.some((function(e){try{e.__h.forEach(I),e.__h=e.__h.filter((function(e){return!e.__||P(e)}))}catch(n){t.some((function(e){e.__h&&(e.__h=[])})),t=[],o.options.__e(n,e.__v)}})),d&&d(e,t)},o.options.unmount=function(e){h&&h(e);var t=e.__c;if(t&&t.__H)try{t.__H.__.forEach(I)}catch(e){o.options.__e(e,t.__v)}};var C="function"==typeof requestAnimationFrame;function I(e){"function"==typeof e.u&&e.u()}function P(e){e.u=e.__()}function k(e,t){return!e||t.some((function(t,n){return t!==e[n]}))}function M(e,t){return"function"==typeof t?t(e):t}},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t,n){"use strict";function i(e,t,n,i,r,a,o){try{var s=e[a](o),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(i,r)}function r(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function s(e){i(o,r,a,s,l,"next",e)}function l(e){i(o,r,a,s,l,"throw",e)}s(void 0)}))}}function a(e){var t=Math.floor(e/60)<10?"0"+Math.floor(e/60):Math.floor(e/60),n=Math.floor(e-60*t)<10?"0"+Math.floor(e-60*t):Math.floor(e-60*t);return isNaN(n)?"00:00":t+":"+n}function o(e){void 0!==performance.mark&&performance.mark(e)}function s(e,t,n){var i=t/n>1?1:0,r=e.findIndex((function(e){return!(1==i&&e.aspectRatio<1||0==i&&e.aspectRatio>1)&&e.width>=t}));if(window.devicePixelRatio>1){var a=2*t;for(r+=1;r<e.length;r++){var o=e[r];if(!(1==i&&o.aspectRatio<1||0==i&&o.aspectRatio>1)&&o.width>=a)break}}return-1===r||r===e.length?e[e.length-1].url:e[r].url}function l(e){if(e)for(;e.firstChild;)e.removeChild(e.firstChild)}function c(e){return"0"===e.slice(0,1)?e.slice(1,e.length):e}function u(e){for(var t=e+"=",n=document.cookie.split(";"),i=0;i<n.length;i++){for(var r=n[i];" "==r.charAt(0);)r=r.substring(1);if(-1!=r.indexOf(t))return r.substring(t.length,r.length)}return""}function d(e){return fetch(e).then((function(e){if(!e.ok)throw new Error("".concat(e.status," ").concat(e.statusText));return e.json()})).then((function(e){if(!e.items||0===e.items.length)return null;var t=e.items[0];if(t.error)throw new Error(t.error);return e.items}))}function h(e,t,n,i){var r="";t.useHttps&&(r="&https=1");var a="";a=null!==n.column?"&type=column&query="+encodeURIComponent(n.column):"&type="+t.suggestionsType+"&query=news";try{t.suggestionsDoctype?a="&doctype="+t.suggestionsDoctype:""!==t.suggestionsQuery?a="&type="+t.suggestionsType+"&query="+t.suggestionsQuery.replace("&","%26"):n.column||(n["wsj-subsection"]?a="&type=wsj-subsection&query="+n["wsj-subsection"].replace("&","%26").replace(" ","%20"):n["wsj-section"]&&(a="&type=wsj-section&query="+n["wsj-section"].replace("&","%26"))),""!=t.suggestionsGroupId?a+="&groupid="+t.suggestionsGroupId:n.doctypeID?a+="&groupid=".concat(n.doctypeID):-1!==document.location.href.indexOf("www.wsj.com")&&(a+="&groupid=4276")}catch(e){}return d(e+"find_all_videos.asp?count=15"+r+a+"&fields="+i)}function p(e){return fetch(e).then((function(e){if(!e.ok)throw new Error("".concat(e.status," ").concat(e.statusText));return e.json()}))}function _(e){return f.apply(this,arguments)}function f(){return(f=r(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.abrupt("return",!0);case 4:if(e.sent.ok){e.next=7;break}return e.abrupt("return",!1);case 7:return e.next=9,response.json();case 9:return n=e.sent,e.abrupt("return",n);case 11:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}function g(e,t){e="string"==typeof e?e:e.host;for(var n=["mansionglobal.com"],i=0;i<n.length;i++)if(-1!==e.indexOf(n[i]))return t?"oms."+n[i]:"om."+n[i];return t?"oms.dowjoneson.com":"om.dowjoneson.com"}function v(e){return-1!==(e="string"==typeof e?e:e.host).indexOf("cwsj.com")||-1!==e.indexOf("cn.wsj.com")?"WSJ China":-1!==e.indexOf("jwsj.com")?"WSJ Japan":-1!==e.indexOf("kr.wsj.com")?"WSJ Korea":-1!==e.indexOf("indo.wsj.com")?"WSJ Indonesia":-1!==e.indexOf("wsj.com")?"WSJ":-1!==e.indexOf("marketwatch.com")?"MarketWatch":-1!==e.indexOf("barrons.com")?"Barrons Online":-1!==e.indexOf("wsj.de")?"WSJ Germany":-1!==e.indexOf("allthingsd.com")?"AllThingsD":-1!==e.indexOf("smartmoney.com")?"SmartMoney":-1!==e.indexOf("fxtrader")?"DJFXTrader":-1!==e.indexOf("fins.com")?"FINS":-1!==e.indexOf("mansionglobal.com")?"Mansion Global":-1!==e.indexOf("moneyish.com")?"Moneyish":"WSJ"}function m(){try{var e,t,n=null===(e=window)||void 0===e||null===(t=e.utag_data)||void 0===t?void 0:t.user_type;if(!n){var i=document.querySelector('meta[name="user.type"]');null!==i&&(n=i.getAttribute("content"))}return void 0!==n&&"nonsubscriber"!==n}catch(e){return!1}}function y(e){switch(e.type){case"emptied":console.log("currentSrc = ".concat(e.target.src))}}function S(e){for(var t=0,n=["abort","canplay","canplaythrough","durationchange","emptied","encrypted","ended","error","interruptbegin","interruptend","loadeddata","loadedmetadata","loadstart","mozaudioavailable","pause","play","playing","progress","ratechange","seeked","seeking","stalled","suspend","timeupdate","volumechange","waiting"];t<n.length;t++){var i=n[t];e.removeEventListener(i,y),e.addEventListener(i,y)}}function E(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(location.search);return null===t?"":decodeURIComponent(t[1].replace(/\+/g," "))}function b(){switch(E("wsjVideoApi")){case"prod":return"https://video-api.shdsvc.dowjones.io/api/";case"dev":return"https://video-api.dev.shdsvc.dowjones.io/api/";default:return null}}n.r(t),n.d(t,"gTimeFormat",(function(){return a})),n.d(t,"createMark",(function(){return o})),n.d(t,"pickBestThumbnail",(function(){return s})),n.d(t,"emptyElement",(function(){return l})),n.d(t,"removeZeros",(function(){return c})),n.d(t,"getCookie",(function(){return u})),n.d(t,"fetchFromApi",(function(){return d})),n.d(t,"getNewPlaylist",(function(){return h})),n.d(t,"fetchServerTime",(function(){return p})),n.d(t,"getSavedStatus",(function(){return _})),n.d(t,"getOmnitureTrackingServer",(function(){return g})),n.d(t,"getChannelFromDomain",(function(){return v})),n.d(t,"isUserLoggedIn",(function(){return m})),n.d(t,"debugVideoEvents",(function(){return S})),n.d(t,"getUrlParameter",(function(){return E})),n.d(t,"getApiUrlOverride",(function(){return b}))},function(e,t,n){"use strict";n.r(t),n.d(t,"NONE",(function(){return i})),n.d(t,"STARTED",(function(){return r})),n.d(t,"FINISHED",(function(){return a})),n.d(t,"FAILED",(function(){return o}));var i="NONE",r="STARTED",a="FINISHED",o="FAILED"},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,n){var i=n(11);e.exports=function(e){if(!i(e))throw TypeError(String(e)+" is not an object");return e}},function(e,t,n){"use strict";function i(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function r(e){return!!e&&!!e[W]}function a(e){return!!e&&(function(e){if(!e||"object"!=typeof e)return!1;var t=Object.getPrototypeOf(e);return!t||t===Object.prototype}(e)||Array.isArray(e)||!!e[G]||!!e.constructor[G]||h(e)||p(e))}function o(e,t,n){void 0===n&&(n=!1),0===s(e)?(n?Object.keys:Q)(e).forEach((function(i){n&&"symbol"==typeof i||t(i,e[i],e)})):e.forEach((function(n,i){return t(i,n,e)}))}function s(e){var t=e[W];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:h(e)?2:p(e)?3:0}function l(e,t){return 2===s(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function c(e,t){return 2===s(e)?e.get(t):e[t]}function u(e,t,n){var i=s(e);2===i?e.set(t,n):3===i?(e.delete(t),e.add(n)):e[t]=n}function d(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}function h(e){return H&&e instanceof Map}function p(e){return K&&e instanceof Set}function _(e){return e.o||e.t}function f(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=z(e);delete t[W];for(var n=Q(t),i=0;i<n.length;i++){var r=n[i],a=t[r];!1===a.writable&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(t[r]={configurable:!0,writable:!0,enumerable:a.enumerable,value:e[r]})}return Object.create(Object.getPrototypeOf(e),t)}function g(e,t){m(e)||r(e)||!a(e)||(s(e)>1&&(e.set=e.add=e.clear=e.delete=v),Object.freeze(e),t&&o(e,(function(e,t){return g(t,!0)}),!0))}function v(){i(2)}function m(e){return null==e||"object"!=typeof e||Object.isFrozen(e)}function y(e){var t=X[e];return t||i(19,e),t}function S(e,t){X[e]=t}function E(){return U}function b(e,t){t&&(y("Patches"),e.u=[],e.s=[],e.v=t)}function T(e){w(e),e.p.forEach(C),e.p=null}function w(e){e===U&&(U=e.l)}function A(e){return U={p:[],l:U,h:e,m:!0,_:0}}function C(e){var t=e[W];0===t.i||1===t.i?t.j():t.g=!0}function I(e,t){t._=t.p.length;var n=t.p[0],r=void 0!==e&&e!==n;return t.h.O||y("ES5").S(t,e,r),r?(n[W].P&&(T(t),i(4)),a(e)&&(e=P(t,e),t.l||M(t,e)),t.u&&y("Patches").M(n[W],e,t.u,t.s)):e=P(t,n,[]),T(t),t.u&&t.v(t.u,t.s),e!==q?e:void 0}function P(e,t,n){if(m(t))return t;var i=t[W];if(!i)return o(t,(function(r,a){return k(e,i,t,r,a,n)}),!0),t;if(i.A!==e)return t;if(!i.P)return M(e,i.t,!0),i.t;if(!i.I){i.I=!0,i.A._--;var r=4===i.i||5===i.i?i.o=f(i.k):i.o;o(3===i.i?new Set(r):r,(function(t,a){return k(e,i,r,t,a,n)})),M(e,r,!1),n&&e.u&&y("Patches").R(i,n,e.u,e.s)}return i.o}function k(e,t,n,i,o,s){if(r(o)){var c=P(e,o,s&&t&&3!==t.i&&!l(t.D,i)?s.concat(i):void 0);if(u(n,i,c),!r(c))return;e.m=!1}if(a(o)&&!m(o)){if(!e.h.N&&e._<1)return;P(e,o),t&&t.A.l||M(e,o)}}function M(e,t,n){void 0===n&&(n=!1),e.h.N&&e.m&&g(t,n)}function D(e,t){var n=e[W];return(n?_(n):e)[t]}function O(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var i=Object.getOwnPropertyDescriptor(n,t);if(i)return i;n=Object.getPrototypeOf(n)}}function R(e){e.P||(e.P=!0,e.l&&R(e.l))}function N(e){e.o||(e.o=f(e.t))}function L(e,t,n){var i=h(t)?y("MapSet").T(t,n):p(t)?y("MapSet").F(t,n):e.O?function(e,t){var n=Array.isArray(e),i={i:n?1:0,A:t?t.A:E(),P:!1,I:!1,D:{},l:t,t:e,k:null,o:null,j:null,C:!1},r=i,a=J;n&&(r=[i],a=Z);var o=Proxy.revocable(r,a),s=o.revoke,l=o.proxy;return i.k=l,i.j=s,l}(t,n):y("ES5").J(t,n);return(n?n.A:E()).p.push(i),i}function x(e){return r(e)||i(22,e),function e(t){if(!a(t))return t;var n,i=t[W],r=s(t);if(i){if(!i.P&&(i.i<4||!y("ES5").K(i)))return i.t;i.I=!0,n=F(t,r),i.I=!1}else n=F(t,r);return o(n,(function(t,r){i&&c(i.t,t)===r||u(n,t,e(r))})),3===r?new Set(n):n}(e)}function F(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return f(e)}function V(){function e(e,t){var n=a[e];return n?n.enumerable=t:a[e]=n={configurable:!0,enumerable:t,get:function(){var t=this[W];return J.get(t,e)},set:function(t){var n=this[W];J.set(n,e,t)}},n}function t(e){for(var t=e.length-1;t>=0;t--){var r=e[t][W];if(!r.P)switch(r.i){case 5:i(r)&&R(r);break;case 4:n(r)&&R(r)}}}function n(e){for(var t=e.t,n=e.k,i=Q(n),r=i.length-1;r>=0;r--){var a=i[r];if(a!==W){var o=t[a];if(void 0===o&&!l(t,a))return!0;var s=n[a],c=s&&s[W];if(c?c.t!==o:!d(s,o))return!0}}var u=!!t[W];return i.length!==Q(t).length+(u?0:1)}function i(e){var t=e.k;if(t.length!==e.t.length)return!0;var n=Object.getOwnPropertyDescriptor(t,t.length-1);return!(!n||n.get)}var a={};S("ES5",{J:function(t,n){var i=Array.isArray(t),r=function(t,n){if(t){for(var i=Array(n.length),r=0;r<n.length;r++)Object.defineProperty(i,""+r,e(r,!0));return i}var a=z(n);delete a[W];for(var o=Q(a),s=0;s<o.length;s++){var l=o[s];a[l]=e(l,t||!!a[l].enumerable)}return Object.create(Object.getPrototypeOf(n),a)}(i,t),a={i:i?5:4,A:n?n.A:E(),P:!1,I:!1,D:{},l:n,t:t,k:r,o:null,g:!1,C:!1};return Object.defineProperty(r,W,{value:a,writable:!0}),r},S:function(e,n,a){a?r(n)&&n[W].A===e&&t(e.p):(e.u&&function e(t){if(t&&"object"==typeof t){var n=t[W];if(n){var r=n.t,a=n.k,s=n.D,c=n.i;if(4===c)o(a,(function(t){t!==W&&(void 0!==r[t]||l(r,t)?s[t]||e(a[t]):(s[t]=!0,R(n)))})),o(r,(function(e){void 0!==a[e]||l(a,e)||(s[e]=!1,R(n))}));else if(5===c){if(i(n)&&(R(n),s.length=!0),a.length<r.length)for(var u=a.length;u<r.length;u++)s[u]=!1;else for(var d=r.length;d<a.length;d++)s[d]=!0;for(var h=Math.min(a.length,r.length),p=0;p<h;p++)void 0===s[p]&&e(a[p])}}}}(e.p[0]),t(e.p))},K:function(e){return 4===e.i?n(e):i(e)}})}n.r(t),n.d(t,"showControls",(function(){return se})),n.d(t,"hideControls",(function(){return le})),n.d(t,"playVideo",(function(){return ce})),n.d(t,"pauseVideo",(function(){return ue})),n.d(t,"updateProgress",(function(){return de})),n.d(t,"updateDuration",(function(){return he})),n.d(t,"mute",(function(){return pe})),n.d(t,"unmute",(function(){return _e})),n.d(t,"enterFullScreen",(function(){return fe})),n.d(t,"exitFullScreen",(function(){return ge})),n.d(t,"startAdMode",(function(){return ve})),n.d(t,"stopAdMode",(function(){return me})),n.d(t,"updateAdProgress",(function(){return ye})),n.d(t,"playAd",(function(){return Se})),n.d(t,"pauseAd",(function(){return Ee})),n.d(t,"adBuffering",(function(){return be})),n.d(t,"resize",(function(){return Te})),n.d(t,"showThumbnail",(function(){return we})),n.d(t,"hideThumbnail",(function(){return Ae})),n.d(t,"updateVideoData",(function(){return Ce})),n.d(t,"showMoreVideosSlide",(function(){return Ie})),n.d(t,"hideMoreVideosSlide",(function(){return Pe})),n.d(t,"showEndscreen",(function(){return ke})),n.d(t,"hideEndscreen",(function(){return Me})),n.d(t,"replacePlaylist",(function(){return De})),n.d(t,"dequeuePlaylist",(function(){return Oe})),n.d(t,"showCountdown",(function(){return Re})),n.d(t,"hideCountdown",(function(){return Ne})),n.d(t,"showClickForSound",(function(){return Le})),n.d(t,"hideClickForSound",(function(){return xe})),n.d(t,"showLoadingSpinner",(function(){return Fe})),n.d(t,"hideLoadingSpinner",(function(){return Ve})),n.d(t,"setVideoApiLoadState",(function(){return Be})),n.d(t,"setAdInitState",(function(){return Ue})),n.d(t,"setIMALoadState",(function(){return je})),n.d(t,"setAdError",(function(){return He})),n.d(t,"setHlsJsLoadState",(function(){return Ke})),n.d(t,"startVideoPlaybackInit",(function(){return Ye})),n.d(t,"endVideoPlaybackInit",(function(){return qe})),n.d(t,"buffering",(function(){return Ge})),n.d(t,"canPlay",(function(){return We})),n.d(t,"showSavedModal",(function(){return Qe})),n.d(t,"hideSavedModal",(function(){return ze})),n.d(t,"enableLogging",(function(){return Xe}));var B,U,j="undefined"!=typeof Symbol&&"symbol"==typeof Symbol("x"),H="undefined"!=typeof Map,K="undefined"!=typeof Set,Y="undefined"!=typeof Proxy&&void 0!==Proxy.revocable&&"undefined"!=typeof Reflect,q=j?Symbol.for("immer-nothing"):((B={})["immer-nothing"]=!0,B),G=j?Symbol.for("immer-draftable"):"__$immer_draftable",W=j?Symbol.for("immer-state"):"__$immer_state",Q=("undefined"!=typeof Symbol&&Symbol.iterator,"undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames),z=Object.getOwnPropertyDescriptors||function(e){var t={};return Q(e).forEach((function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)})),t},X={},J={get:function(e,t){if(t===W)return e;var n=_(e);if(!l(n,t))return function(e,t,n){var i,r=O(t,n);return r?"value"in r?r.value:null===(i=r.get)||void 0===i?void 0:i.call(e.k):void 0}(e,n,t);var i=n[t];return e.I||!a(i)?i:i===D(e.t,t)?(N(e),e.o[t]=L(e.A.h,i,e)):i},has:function(e,t){return t in _(e)},ownKeys:function(e){return Reflect.ownKeys(_(e))},set:function(e,t,n){var i=O(_(e),t);if(null==i?void 0:i.set)return i.set.call(e.k,n),!0;if(e.D[t]=!0,!e.P){if(d(n,D(_(e),t))&&(void 0!==n||l(e.t,t)))return!0;N(e),R(e)}return e.o[t]=n,!0},deleteProperty:function(e,t){return void 0!==D(e.t,t)||t in e.t?(e.D[t]=!1,N(e),R(e)):delete e.D[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=_(e),i=Reflect.getOwnPropertyDescriptor(n,t);return i?{writable:!0,configurable:1!==e.i||"length"!==t,enumerable:i.enumerable,value:n[t]}:i},defineProperty:function(){i(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){i(12)}},Z={};o(J,(function(e,t){Z[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}})),Z.deleteProperty=function(e,t){return J.deleteProperty.call(this,e[0],t)},Z.set=function(e,t,n){return J.set.call(this,e[0],t,n,e[0])};var $=new(function(){function e(e){this.O=Y,this.N=!1,"boolean"==typeof(null==e?void 0:e.useProxies)&&this.setUseProxies(e.useProxies),"boolean"==typeof(null==e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),this.produce=this.produce.bind(this),this.produceWithPatches=this.produceWithPatches.bind(this)}var t=e.prototype;return t.produce=function(e,t,n){if("function"==typeof e&&"function"!=typeof t){var r=t;t=e;var o=this;return function(e){var n=this;void 0===e&&(e=r);for(var i=arguments.length,a=Array(i>1?i-1:0),s=1;s<i;s++)a[s-1]=arguments[s];return o.produce(e,(function(e){var i;return(i=t).call.apply(i,[n,e].concat(a))}))}}var s;if("function"!=typeof t&&i(6),void 0!==n&&"function"!=typeof n&&i(7),a(e)){var l=A(this),c=L(this,e,void 0),u=!0;try{s=t(c),u=!1}finally{u?T(l):w(l)}return"undefined"!=typeof Promise&&s instanceof Promise?s.then((function(e){return b(l,n),I(e,l)}),(function(e){throw T(l),e})):(b(l,n),I(s,l))}if(!e||"object"!=typeof e){if((s=t(e))===q)return;return void 0===s&&(s=e),this.N&&g(s,!0),s}i(21,e)},t.produceWithPatches=function(e,t){var n,i,r=this;return"function"==typeof e?function(t){for(var n=arguments.length,i=Array(n>1?n-1:0),a=1;a<n;a++)i[a-1]=arguments[a];return r.produceWithPatches(t,(function(t){return e.apply(void 0,[t].concat(i))}))}:[this.produce(e,t,(function(e,t){n=e,i=t})),n,i]},t.createDraft=function(e){a(e)||i(8),r(e)&&(e=x(e));var t=A(this),n=L(this,e,void 0);return n[W].C=!0,w(t),n},t.finishDraft=function(e,t){var n=(e&&e[W]).A;return b(n,t),I(void 0,n)},t.setAutoFreeze=function(e){this.N=e},t.setUseProxies=function(e){e&&!Y&&i(20),this.O=e},t.applyPatches=function(e,t){var n;for(n=t.length-1;n>=0;n--){var i=t[n];if(0===i.path.length&&"replace"===i.op){e=i.value;break}}var a=y("Patches").$;return r(e)?a(e,t):this.produce(e,(function(e){return a(e,t.slice(n+1))}))},e}()),ee=($.produce,$.produceWithPatches.bind($),$.setAutoFreeze.bind($),$.setUseProxies.bind($),$.applyPatches.bind($),$.createDraft.bind($),$.finishDraft.bind($),n(5));function te(e,t){return e===t}function ne(e,t,n){if(null===t||null===n||t.length!==n.length)return!1;for(var i=t.length,r=0;r<i;r++)if(!e(t[r],n[r]))return!1;return!0}function ie(e){var t=Array.isArray(e[0])?e[0]:e;if(!t.every((function(e){return"function"==typeof e}))){var n=t.map((function(e){return typeof e})).join(", ");throw new Error("Selector creators expect all input-selectors to be functions, instead received the following types: ["+n+"]")}return t}!function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i]}((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:te,n=null,i=null;return function(){return ne(t,n,arguments)||(i=e.apply(null,arguments)),n=arguments,i}}));n(53);function re(){return(re=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}"undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__;function ae(e,t){function n(){if(t){var n=t.apply(void 0,arguments);if(!n)throw new Error("prepareAction did not return an object");return re({type:e,payload:n.payload},"meta"in n&&{meta:n.meta},{},"error"in n&&{error:n.error})}return{type:e,payload:arguments.length<=0?void 0:arguments[0]}}return n.toString=function(){return""+e},n.type=e,n.match=function(t){return t.type===e},n}"undefined"!=typeof Symbol&&(Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator"))),"undefined"!=typeof Symbol&&(Symbol.asyncIterator||(Symbol.asyncIterator=Symbol("Symbol.asyncIterator")));V();var oe=n(0);function se(){return{type:oe.h}}function le(){return{type:oe.g}}function ce(){return{type:oe.O}}function ue(){return{type:oe.N}}function de(e){return{type:oe.P,currentPosition:e}}function he(e){return"number"!=typeof e&&(e=parseInt(e,10)),{type:oe.I,duration:e}}function pe(){return{type:oe.M}}function _e(){return{type:oe.R}}function fe(){return{type:oe.K}}function ge(){return{type:oe.L}}var ve=ae(oe.f),me=ae(oe.b),ye=ae(oe.e),Se=ae(oe.d),Ee=ae(oe.c),be=ae(oe.a);function Te(e,t){return{type:oe.s,width:e,height:t}}var we=ae(oe.z),Ae=ae(oe.y);function Ce(e){return{type:oe.F,videoData:e}}var Ie=ae(oe.q),Pe=ae(oe.p),ke=ae(oe.v),Me=ae(oe.m);function De(e){return{type:oe.r,playlist:e}}var Oe=ae(oe.i),Re=ae(oe.u),Ne=ae(oe.l),Le=ae(oe.t),xe=ae(oe.k),Fe=ae(oe.w),Ve=ae(oe.n),Be=ae(oe.E),Ue=ae(oe.B),je=ae(oe.D),He=ae(oe.A),Ke=ae(oe.C),Ye=ae(oe.Q),qe=ae(oe.J),Ge=ae(oe.G),We=ae(oe.H),Qe=ae(oe.x),ze=ae(oe.o),Xe=ae(oe.j)},function(e,t,n){var i=n(7);e.exports=!i((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},function(e,t,n){var i=n(2),r=n(40).f,a=n(16),o=n(19),s=n(33),l=n(96),c=n(67);e.exports=function(e,t){var n,u,d,h,p,_=e.target,f=e.global,g=e.stat;if(n=f?i:g?i[_]||s(_,{}):(i[_]||{}).prototype)for(u in t){if(h=t[u],d=e.noTargetGet?(p=r(n,u))&&p.value:n[u],!c(f?u:_+(g?".":"#")+u,e.forced)&&void 0!==d){if(typeof h==typeof d)continue;l(h,d)}(e.sham||d&&d.sham)&&a(h,"sham",!0),o(n,u,h,e)}}},function(e,t,n){var i=n(14),r=n(18),a=n(35);e.exports=i?function(e,t,n){return r.f(e,t,a(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t,n){var i=n(14),r=n(57),a=n(12),o=n(58),s=Object.defineProperty;t.f=i?s:function(e,t,n){if(a(e),t=o(t,!0),a(n),r)try{return s(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},function(e,t,n){var i=n(2),r=n(16),a=n(8),o=n(33),s=n(36),l=n(26),c=l.get,u=l.enforce,d=String(String).split("String");(e.exports=function(e,t,n,s){var l=!!s&&!!s.unsafe,c=!!s&&!!s.enumerable,h=!!s&&!!s.noTargetGet;"function"==typeof n&&("string"!=typeof t||a(n,"name")||r(n,"name",t),u(n).source=d.join("string"==typeof t?t:"")),e!==i?(l?!h&&e[t]&&(c=!0):delete e[t],c?e[t]=n:r(e,t,n)):c?e[t]=n:o(t,n)})(Function.prototype,"toString",(function(){return"function"==typeof this&&c(this).source||s(this)}))},function(e,t,n){var i=n(42),r=n(2),a=function(e){return"function"==typeof e?e:void 0};e.exports=function(e,t){return arguments.length<2?a(i[e])||a(r[e]):i[e]&&i[e][t]||r[e]&&r[e][t]}},function(e,t){var n="Webkit Moz O ms".split(" ");function i(e,t,i){for(var a=e.style,o=0;o<n.length;++o){a[n[o]+r(t)]=i}a[t]=i}function r(e){return e.charAt(0).toUpperCase()+e.slice(1)}function a(e){return!function(e){return"[object Array]"===Object.prototype.toString.call(e)}(e)&&("object"===typeof e&&!!e)}function o(e,t){for(var n in e){if(e.hasOwnProperty(n))t(e[n],n)}}e.exports={extend:function e(t,n,i){for(var r in t=t||{},i=i||!1,n=n||{})if(n.hasOwnProperty(r)){var o=t[r],s=n[r];i&&a(o)&&a(s)?t[r]=e(o,s,i):t[r]=s}return t},render:function(e,t){var n=e;for(var i in t)if(t.hasOwnProperty(i)){var r=t[i],a=new RegExp("\\{"+i+"\\}","g");n=n.replace(a,r)}return n},setStyle:i,setStyles:function(e,t){o(t,(function(t,n){null!=t&&(a(t)&&!0===t.prefix?i(e,n,t.value):e.style[n]=t)}))},capitalize:r,isString:function(e){return"string"==typeof e||e instanceof String},isFunction:function(e){return"function"==typeof e},isObject:a,forEachObject:o,floatEquals:function(e,t){return Math.abs(e-t)<.001},removeChildren:function(e){for(;e.firstChild;)e.removeChild(e.firstChild)}}},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t){e.exports=!1},function(e,t){e.exports={}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function");return e}},function(e,t,n){var i,r,a,o=n(92),s=n(2),l=n(11),c=n(16),u=n(8),d=n(37),h=n(38),p=s.WeakMap;if(o){var _=new p,f=_.get,g=_.has,v=_.set;i=function(e,t){return v.call(_,e,t),t},r=function(e){return f.call(_,e)||{}},a=function(e){return g.call(_,e)}}else{var m=d("state");h[m]=!0,i=function(e,t){return c(e,m,t),t},r=function(e){return u(e,m)?e[m]:{}},a=function(e){return u(e,m)}}e.exports={set:i,get:r,has:a,enforce:function(e){return a(e)?r(e):i(e,{})},getterFor:function(e){return function(t){var n;if(!l(t)||(n=r(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return n}}}},function(e,t){e.exports=function(e){if(null==e)throw TypeError("Can't call method on "+e);return e}},function(e,t,n){var i=n(41),r=n(27);e.exports=function(e){return i(r(e))}},function(e,t,n){var i=n(25);e.exports=function(e,t,n){if(i(e),void 0===t)return e;switch(n){case 0:return function(){return e.call(t)};case 1:return function(n){return e.call(t,n)};case 2:return function(n,i){return e.call(t,n,i)};case 3:return function(n,i,r){return e.call(t,n,i,r)}}return function(){return e.apply(t,arguments)}}},function(e,t,n){var i;
/*!
  Copyright (c) 2017 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/!function(){"use strict";var n={}.hasOwnProperty;function r(){for(var e=[],t=0;t<arguments.length;t++){var i=arguments[t];if(i){var a=typeof i;if("string"===a||"number"===a)e.push(i);else if(Array.isArray(i)&&i.length){var o=r.apply(null,i);o&&e.push(o)}else if("object"===a)for(var s in i)n.call(i,s)&&i[s]&&e.push(s)}}return e.join(" ")}e.exports?(r.default=r,e.exports=r):void 0===(i=function(){return r}.apply(t,[]))||(e.exports=i)}()},function(e,t,n){var i=n(83),r=n(21),a=function e(t,n){if(!(this instanceof e))throw new Error("Constructor was called without new keyword");if(0!==arguments.length){this._opts=r.extend({color:"#555",strokeWidth:1,trailColor:null,trailWidth:null,fill:null,text:{style:{color:null,position:"absolute",left:"50%",top:"50%",padding:0,margin:0,transform:{prefix:!0,value:"translate(-50%, -50%)"}},autoStyleContainer:!0,alignToBottom:!0,value:null,className:"progressbar-text"},svgStyle:{display:"block",width:"100%"},warnings:!1},n,!0),r.isObject(n)&&void 0!==n.svgStyle&&(this._opts.svgStyle=n.svgStyle),r.isObject(n)&&r.isObject(n.text)&&void 0!==n.text.style&&(this._opts.text.style=n.text.style);var a,o=this._createSvgView(this._opts);if(!(a=r.isString(t)?document.querySelector(t):t))throw new Error("Container does not exist: "+t);this._container=a,this._container.appendChild(o.svg),this._opts.warnings&&this._warnContainerAspectRatio(this._container),this._opts.svgStyle&&r.setStyles(o.svg,this._opts.svgStyle),this.svg=o.svg,this.path=o.path,this.trail=o.trail,this.text=null;var s=r.extend({attachment:void 0,shape:this},this._opts);this._progressPath=new i(o.path,s),r.isObject(this._opts.text)&&null!==this._opts.text.value&&this.setText(this._opts.text.value)}};a.prototype.animate=function(e,t,n){if(null===this._progressPath)throw new Error("Object is destroyed");this._progressPath.animate(e,t,n)},a.prototype.stop=function(){if(null===this._progressPath)throw new Error("Object is destroyed");void 0!==this._progressPath&&this._progressPath.stop()},a.prototype.destroy=function(){if(null===this._progressPath)throw new Error("Object is destroyed");this.stop(),this.svg.parentNode.removeChild(this.svg),this.svg=null,this.path=null,this.trail=null,this._progressPath=null,null!==this.text&&(this.text.parentNode.removeChild(this.text),this.text=null)},a.prototype.set=function(e){if(null===this._progressPath)throw new Error("Object is destroyed");this._progressPath.set(e)},a.prototype.value=function(){if(null===this._progressPath)throw new Error("Object is destroyed");return void 0===this._progressPath?0:this._progressPath.value()},a.prototype.setText=function(e){if(null===this._progressPath)throw new Error("Object is destroyed");null===this.text&&(this.text=this._createTextContainer(this._opts,this._container),this._container.appendChild(this.text)),r.isObject(e)?(r.removeChildren(this.text),this.text.appendChild(e)):this.text.innerHTML=e},a.prototype._createSvgView=function(e){var t=document.createElementNS("http://www.w3.org/2000/svg","svg");this._initializeSvg(t,e);var n=null;(e.trailColor||e.trailWidth)&&(n=this._createTrail(e),t.appendChild(n));var i=this._createPath(e);return t.appendChild(i),{svg:t,path:i,trail:n}},a.prototype._initializeSvg=function(e,t){e.setAttribute("viewBox","0 0 100 100")},a.prototype._createPath=function(e){var t=this._pathString(e);return this._createPathElement(t,e)},a.prototype._createTrail=function(e){var t=this._trailString(e),n=r.extend({},e);return n.trailColor||(n.trailColor="#eee"),n.trailWidth||(n.trailWidth=n.strokeWidth),n.color=n.trailColor,n.strokeWidth=n.trailWidth,n.fill=null,this._createPathElement(t,n)},a.prototype._createPathElement=function(e,t){var n=document.createElementNS("http://www.w3.org/2000/svg","path");return n.setAttribute("d",e),n.setAttribute("stroke",t.color),n.setAttribute("stroke-width",t.strokeWidth),t.fill?n.setAttribute("fill",t.fill):n.setAttribute("fill-opacity","0"),n},a.prototype._createTextContainer=function(e,t){var n=document.createElement("div");n.className=e.text.className;var i=e.text.style;return i&&(e.text.autoStyleContainer&&(t.style.position="relative"),r.setStyles(n,i),i.color||(n.style.color=e.color)),this._initializeTextContainer(e,t,n),n},a.prototype._initializeTextContainer=function(e,t,n){},a.prototype._pathString=function(e){throw new Error("Override this function for each progress bar")},a.prototype._trailString=function(e){throw new Error("Override this function for each progress bar")},a.prototype._warnContainerAspectRatio=function(e){if(this.containerAspectRatio){var t=window.getComputedStyle(e,null),n=parseFloat(t.getPropertyValue("width"),10),i=parseFloat(t.getPropertyValue("height"),10);r.floatEquals(this.containerAspectRatio,n/i)||(console.warn("Incorrect aspect ratio of container","#"+e.id,"detected:",t.getPropertyValue("width")+"(width)","/",t.getPropertyValue("height")+"(height)","=",n/i),console.warn("Aspect ratio of should be",this.containerAspectRatio))}},e.exports=a},function(e,t,n){var i={};i[n(4)("toStringTag")]="z",e.exports="[object z]"===String(i)},function(e,t,n){var i=n(2),r=n(16);e.exports=function(e,t){try{r(i,e,t)}catch(n){i[e]=t}return t}},function(e,t,n){var i=n(2),r=n(11),a=i.document,o=r(a)&&r(a.createElement);e.exports=function(e){return o?a.createElement(e):{}}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,n){var i=n(56),r=Function.toString;"function"!=typeof i.inspectSource&&(i.inspectSource=function(e){return r.call(e)}),e.exports=i.inspectSource},function(e,t,n){var i=n(55),r=n(59),a=i("keys");e.exports=function(e){return a[e]||(a[e]=r(e))}},function(e,t){e.exports={}},function(e,t){var n=Math.ceil,i=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?i:n)(e)}},function(e,t,n){var i=n(14),r=n(63),a=n(35),o=n(28),s=n(58),l=n(8),c=n(57),u=Object.getOwnPropertyDescriptor;t.f=i?u:function(e,t){if(e=o(e),t=s(t,!0),c)try{return u(e,t)}catch(e){}if(l(e,t))return a(!r.f.call(e,t),e[t])}},function(e,t,n){var i=n(7),r=n(17),a="".split;e.exports=i((function(){return!Object("z").propertyIsEnumerable(0)}))?function(e){return"String"==r(e)?a.call(e,""):Object(e)}:Object},function(e,t,n){var i=n(2);e.exports=i},function(e,t,n){var i=n(39),r=Math.min;e.exports=function(e){return e>0?r(i(e),9007199254740991):0}},function(e,t){e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(e,t,n){var i=n(27);e.exports=function(e){return Object(i(e))}},function(e,t,n){var i=n(18).f,r=n(8),a=n(4)("toStringTag");e.exports=function(e,t,n){e&&!r(e=n?e:e.prototype,a)&&i(e,a,{configurable:!0,value:t})}},function(e,t,n){var i=n(4),r=n(70),a=n(18),o=i("unscopables"),s=Array.prototype;null==s[o]&&a.f(s,o,{configurable:!0,value:r(null)}),e.exports=function(e){s[o][e]=!0}},function(e,t,n){"use strict";var i=n(25),r=function(e){var t,n;this.promise=new e((function(e,i){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=i})),this.resolve=i(t),this.reject=i(n)};e.exports.f=function(e){return new r(e)}},function(e,t,n){var i=n(2),r=n(29),a=Function.call;e.exports=function(e,t,n){return r(a,i[e].prototype[t],n)}},function(e,t,n){"use strict";(function(e,i){var r,a=n(85);r="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==e?e:i;var o=Object(a.a)(r);t.a=o}).call(this,n(22),n(146)(e))},function(e,t,n){function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=u(e);if(t){var r=u(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return l(this,n)}}function l(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?c(e):t}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var d=n(1),h=d.h,p=d.Component,_=n(172),f=n(173),g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(d,e);var t,n,l,u=s(d);function d(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d),(t=u.call(this,e))._setCloseBtnRef=t._setCloseBtnRef.bind(c(t)),t._handleTransitionEnd=t._handleTransitionEnd.bind(c(t)),t._handleClose=t._handleClose.bind(c(t)),t}return t=d,(n=[{key:"componentWillUnmount",value:function(){clearTimeout(this._closeTimer)}},{key:"_setCloseBtnRef",value:function(e){this._closeBtnRef=e}},{key:"_handleTransitionEnd",value:function(){var e=this.props,t=e.onFadeIn,n=e.onFadeOut;e.isVisible?t():n()}},{key:"_handleClose",value:function(e){e&&e.stopPropagation(),this.props.onClose(e)}},{key:"componentDidMount",value:function(){var e=this;this._closeBtnRef&&(this._closeBtnRef.innerHTML=f),this.props.hideTimer&&(this._closeTimer=setTimeout((function(){return e._handleClose()}),this.props.hideTimer,this))}},{key:"render",value:function(){var e=[_.modal];this.props.className&&e.push(this.props.className),this.props.isVisible||e.push(_.fadeOut);var t={className:e.join(" ")};return this.props.onClick&&(t.onClick=this.props.onClick,t.style={cursor:"pointer"}),this.props.style&&"object"===r(this.props.style)&&(t.style=Object.assign({},t.style,this.props.style)),h("div",i({},t,{onTransitionEnd:this._handleTransitionEnd}),this.props.children,!this.props.hideCloseButton&&h("button",{className:_.closeBtn,ref:this._setCloseBtnRef,onClick:this._handleClose}))}}])&&a(t.prototype,n),l&&a(t,l),d}(p);g.defaultProps={onClose:function(){},onFadeIn:function(){},onFadeOut:function(){},isVisible:!0,hideCloseButton:!1},e.exports=g},function(e,t,n){"use strict";e.exports=n(152)},function(e,t,n){"use strict";function i(e){return function(t){var n=t.dispatch,i=t.getState;return function(t){return function(r){return"function"==typeof r?r(n,i,e):t(r)}}}}n.r(t);var r=i();r.withExtraArgument=i,t.default=r},function(e,t,n){"use strict";var i=n(52),r={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},a={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};function l(e){return i.isMemo(e)?o:s[e.$$typeof]||r}s[i.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s[i.Memo]=o;var c=Object.defineProperty,u=Object.getOwnPropertyNames,d=Object.getOwnPropertySymbols,h=Object.getOwnPropertyDescriptor,p=Object.getPrototypeOf,_=Object.prototype;e.exports=function e(t,n,i){if("string"!=typeof n){if(_){var r=p(n);r&&r!==_&&e(t,r,i)}var o=u(n);d&&(o=o.concat(d(n)));for(var s=l(t),f=l(n),g=0;g<o.length;++g){var v=o[g];if(!(a[v]||i&&i[v]||f&&f[v]||s&&s[v])){var m=h(n,v);try{c(t,v,m)}catch(e){}}}}return t}},function(e,t,n){var i=n(23),r=n(56);(e.exports=function(e,t){return r[e]||(r[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.6.5",mode:i?"pure":"global",copyright:" 2020 Denis Pushkarev (zloirock.ru)"})},function(e,t,n){var i=n(2),r=n(33),a=i["__core-js_shared__"]||r("__core-js_shared__",{});e.exports=a},function(e,t,n){var i=n(14),r=n(7),a=n(34);e.exports=!i&&!r((function(){return 7!=Object.defineProperty(a("div"),"a",{get:function(){return 7}}).a}))},function(e,t,n){var i=n(11);e.exports=function(e,t){if(!i(e))return e;var n,r;if(t&&"function"==typeof(n=e.toString)&&!i(r=n.call(e)))return r;if("function"==typeof(n=e.valueOf)&&!i(r=n.call(e)))return r;if(!t&&"function"==typeof(n=e.toString)&&!i(r=n.call(e)))return r;throw TypeError("Can't convert object to primitive value")}},function(e,t){var n=0,i=Math.random();e.exports=function(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++n+i).toString(36)}},function(e,t,n){var i=n(7);e.exports=!!Object.getOwnPropertySymbols&&!i((function(){return!String(Symbol())}))},function(e,t,n){var i=n(32),r=n(17),a=n(4)("toStringTag"),o="Arguments"==r(function(){return arguments}());e.exports=i?r:function(e){var t,n,i;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),a))?n:o?r(t):"Object"==(i=r(t))&&"function"==typeof t.callee?"Arguments":i}},function(e,t,n){"use strict";var i=n(15),r=n(100),a=n(69),o=n(103),s=n(46),l=n(16),c=n(19),u=n(4),d=n(23),h=n(24),p=n(68),_=p.IteratorPrototype,f=p.BUGGY_SAFARI_ITERATORS,g=u("iterator"),v=function(){return this};e.exports=function(e,t,n,u,p,m,y){r(n,t,u);var S,E,b,T=function(e){if(e===p&&P)return P;if(!f&&e in C)return C[e];switch(e){case"keys":case"values":case"entries":return function(){return new n(this,e)}}return function(){return new n(this)}},w=t+" Iterator",A=!1,C=e.prototype,I=C[g]||C["@@iterator"]||p&&C[p],P=!f&&I||T(p),k="Array"==t&&C.entries||I;if(k&&(S=a(k.call(new e)),_!==Object.prototype&&S.next&&(d||a(S)===_||(o?o(S,_):"function"!=typeof S[g]&&l(S,g,v)),s(S,w,!0,!0),d&&(h[w]=v))),"values"==p&&I&&"values"!==I.name&&(A=!0,P=function(){return I.call(this)}),d&&!y||C[g]===P||l(C,g,P),h[t]=P,p)if(E={values:T("values"),keys:m?P:T("keys"),entries:T("entries")},y)for(b in E)(f||A||!(b in C))&&c(C,b,E[b]);else i({target:t,proto:!0,forced:f||A},E);return E}},function(e,t,n){"use strict";var i={}.propertyIsEnumerable,r=Object.getOwnPropertyDescriptor,a=r&&!i.call({1:2},1);t.f=a?function(e){var t=r(this,e);return!!t&&t.enumerable}:i},function(e,t,n){var i=n(8),r=n(28),a=n(65).indexOf,o=n(38);e.exports=function(e,t){var n,s=r(e),l=0,c=[];for(n in s)!i(o,n)&&i(s,n)&&c.push(n);for(;t.length>l;)i(s,n=t[l++])&&(~a(c,n)||c.push(n));return c}},function(e,t,n){var i=n(28),r=n(43),a=n(99),o=function(e){return function(t,n,o){var s,l=i(t),c=r(l.length),u=a(o,c);if(e&&n!=n){for(;c>u;)if((s=l[u++])!=s)return!0}else for(;c>u;u++)if((e||u in l)&&l[u]===n)return e||u||0;return!e&&-1}};e.exports={includes:o(!0),indexOf:o(!1)}},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,n){var i=n(7),r=/#|\.prototype\./,a=function(e,t){var n=s[o(e)];return n==c||n!=l&&("function"==typeof t?i(t):!!t)},o=a.normalize=function(e){return String(e).replace(r,".").toLowerCase()},s=a.data={},l=a.NATIVE="N",c=a.POLYFILL="P";e.exports=a},function(e,t,n){"use strict";var i,r,a,o=n(69),s=n(16),l=n(8),c=n(4),u=n(23),d=c("iterator"),h=!1;[].keys&&("next"in(a=[].keys())?(r=o(o(a)))!==Object.prototype&&(i=r):h=!0),null==i&&(i={}),u||l(i,d)||s(i,d,(function(){return this})),e.exports={IteratorPrototype:i,BUGGY_SAFARI_ITERATORS:h}},function(e,t,n){var i=n(8),r=n(45),a=n(37),o=n(101),s=a("IE_PROTO"),l=Object.prototype;e.exports=o?Object.getPrototypeOf:function(e){return e=r(e),i(e,s)?e[s]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?l:null}},function(e,t,n){var i,r=n(12),a=n(102),o=n(44),s=n(38),l=n(72),c=n(34),u=n(37),d=u("IE_PROTO"),h=function(){},p=function(e){return"<script>"+e+"<\/script>"},_=function(){try{i=document.domain&&new ActiveXObject("htmlfile")}catch(e){}var e,t;_=i?function(e){e.write(p("")),e.close();var t=e.parentWindow.Object;return e=null,t}(i):((t=c("iframe")).style.display="none",l.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write(p("document.F=Object")),e.close(),e.F);for(var n=o.length;n--;)delete _.prototype[o[n]];return _()};s[d]=!0,e.exports=Object.create||function(e,t){var n;return null!==e?(h.prototype=r(e),n=new h,h.prototype=null,n[d]=e):n=_(),void 0===t?n:a(n,t)}},function(e,t,n){var i=n(64),r=n(44);e.exports=Object.keys||function(e){return i(e,r)}},function(e,t,n){var i=n(20);e.exports=i("document","documentElement")},function(e,t,n){var i=n(2);e.exports=i.Promise},function(e,t,n){var i=n(12),r=n(112),a=n(43),o=n(29),s=n(113),l=n(114),c=function(e,t){this.stopped=e,this.result=t};(e.exports=function(e,t,n,u,d){var h,p,_,f,g,v,m,y=o(t,n,u?2:1);if(d)h=e;else{if("function"!=typeof(p=s(e)))throw TypeError("Target is not iterable");if(r(p)){for(_=0,f=a(e.length);f>_;_++)if((g=u?y(i(m=e[_])[0],m[1]):y(e[_]))&&g instanceof c)return g;return new c(!1)}h=p.call(e)}for(v=h.next;!(m=v.call(h)).done;)if("object"==typeof(g=l(h,y,m.value,u))&&g&&g instanceof c)return g;return new c(!1)}).stop=function(e){return new c(!0,e)}},function(e,t,n){var i=n(12),r=n(25),a=n(4)("species");e.exports=function(e,t){var n,o=i(e).constructor;return void 0===o||null==(n=i(o)[a])?t:r(n)}},function(e,t,n){var i,r,a,o=n(2),s=n(7),l=n(17),c=n(29),u=n(72),d=n(34),h=n(77),p=o.location,_=o.setImmediate,f=o.clearImmediate,g=o.process,v=o.MessageChannel,m=o.Dispatch,y=0,S={},E=function(e){if(S.hasOwnProperty(e)){var t=S[e];delete S[e],t()}},b=function(e){return function(){E(e)}},T=function(e){E(e.data)},w=function(e){o.postMessage(e+"",p.protocol+"//"+p.host)};_&&f||(_=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return S[++y]=function(){("function"==typeof e?e:Function(e)).apply(void 0,t)},i(y),y},f=function(e){delete S[e]},"process"==l(g)?i=function(e){g.nextTick(b(e))}:m&&m.now?i=function(e){m.now(b(e))}:v&&!h?(a=(r=new v).port2,r.port1.onmessage=T,i=c(a.postMessage,a,1)):!o.addEventListener||"function"!=typeof postMessage||o.importScripts||s(w)||"file:"===p.protocol?i="onreadystatechange"in d("script")?function(e){u.appendChild(d("script")).onreadystatechange=function(){u.removeChild(this),E(e)}}:function(e){setTimeout(b(e),0)}:(i=w,o.addEventListener("message",T,!1))),e.exports={set:_,clear:f}},function(e,t,n){var i=n(78);e.exports=/(iphone|ipod|ipad).*applewebkit/i.test(i)},function(e,t,n){var i=n(20);e.exports=i("navigator","userAgent")||""},function(e,t,n){var i=n(12),r=n(11),a=n(48);e.exports=function(e,t){if(i(e),r(t)&&t.constructor===e)return t;var n=a.f(e);return(0,n.resolve)(t),n.promise}},function(e,t){e.exports=function(e){try{return{error:!1,value:e()}}catch(e){return{error:!0,value:e}}}},function(e,t,n){var i=n(14),r=n(7),a=n(8),o=Object.defineProperty,s={},l=function(e){throw e};e.exports=function(e,t){if(a(s,e))return s[e];t||(t={});var n=[][e],c=!!a(t,"ACCESSORS")&&t.ACCESSORS,u=a(t,0)?t[0]:l,d=a(t,1)?t[1]:void 0;return s[e]=!!n&&!r((function(){if(c&&!i)return!0;var e={length:-1};c?o(e,1,{enumerable:!0,get:l}):e[1]=1,n.call(e,u,d)}))}},function(e,t,n){e.exports={container:"styles__container_14BbdRwp0rjtmY2SthKjYh",controlsVisible:"styles__controlsVisible_3YNMpna1eItRmruuU0l4Lr",fullscreen:"styles__fullscreen_2V5MixlxseUqztCkUlknr2",fadeIn:"styles__fadeIn_1XaYC5qFhwgUnRH03aUJRp",headerText:"styles__headerText_1IpJBkAZ3G-AcDLxNohTw",row:"styles__row_25TPSCHO9j2o1qNt_F8L7A",thumbnail:"styles__thumbnail_3AQZry0uMDphvHRkATJgSv",textContainer:"styles__textContainer_3po31nE30Je29SLuNRRWWW",videoTitle:"styles__videoTitle_ejWhXhNRCLIhAxgZKXPWv",countdownText:"styles__countdownText_tQ5pKo-5lQQV3De64SQuj"}},function(e,t,n){var i=n(199),r=n(21),a={easeIn:"easeInCubic",easeOut:"easeOutCubic",easeInOut:"easeInOutCubic"},o=function e(t,n){if(!(this instanceof e))throw new Error("Constructor was called without new keyword");var i;n=r.extend({duration:800,easing:"linear",from:{},to:{},step:function(){}},n),i=r.isString(t)?document.querySelector(t):t,this.path=i,this._opts=n,this._tweenable=null;var a=this.path.getTotalLength();this.path.style.strokeDasharray=a+" "+a,this.set(0)};o.prototype.value=function(){var e=this._getComputedDashOffset(),t=this.path.getTotalLength();return parseFloat((1-e/t).toFixed(6),10)},o.prototype.set=function(e){this.stop(),this.path.style.strokeDashoffset=this._progressToOffset(e);var t=this._opts.step;if(r.isFunction(t)){var n=this._easing(this._opts.easing);t(this._calculateTo(e,n),this._opts.shape||this,this._opts.attachment)}},o.prototype.stop=function(){this._stopTween(),this.path.style.strokeDashoffset=this._getComputedDashOffset()},o.prototype.animate=function(e,t,n){t=t||{},r.isFunction(t)&&(n=t,t={});var a=r.extend({},t),o=r.extend({},this._opts);t=r.extend(o,t);var s=this._easing(t.easing),l=this._resolveFromAndTo(e,s,a);this.stop(),this.path.getBoundingClientRect();var c=this._getComputedDashOffset(),u=this._progressToOffset(e),d=this;this._tweenable=new i,this._tweenable.tween({from:r.extend({offset:c},l.from),to:r.extend({offset:u},l.to),duration:t.duration,easing:s,step:function(e){d.path.style.strokeDashoffset=e.offset;var n=t.shape||d;t.step(e,n,t.attachment)},finish:function(e){r.isFunction(n)&&n()}})},o.prototype._getComputedDashOffset=function(){var e=window.getComputedStyle(this.path,null);return parseFloat(e.getPropertyValue("stroke-dashoffset"),10)},o.prototype._progressToOffset=function(e){var t=this.path.getTotalLength();return t-e*t},o.prototype._resolveFromAndTo=function(e,t,n){return n.from&&n.to?{from:n.from,to:n.to}:{from:this._calculateFrom(t),to:this._calculateTo(e,t)}},o.prototype._calculateFrom=function(e){return i.interpolate(this._opts.from,this._opts.to,this.value(),e)},o.prototype._calculateTo=function(e,t){return i.interpolate(this._opts.from,this._opts.to,e,t)},o.prototype._stopTween=function(){null!==this._tweenable&&(this._tweenable.stop(),this._tweenable=null)},o.prototype._easing=function(e){return a.hasOwnProperty(e)?a[e]:e},e.exports=o},function(e,t,n){var i=n(31),r=n(21),a=function(e,t){this._pathTemplate="M 50,50 m 0,-{radius} a {radius},{radius} 0 1 1 0,{2radius} a {radius},{radius} 0 1 1 0,-{2radius}",this.containerAspectRatio=1,i.apply(this,arguments)};(a.prototype=new i).constructor=a,a.prototype._pathString=function(e){var t=e.strokeWidth;e.trailWidth&&e.trailWidth>e.strokeWidth&&(t=e.trailWidth);var n=50-t/2;return r.render(this._pathTemplate,{radius:n,"2radius":2*n})},a.prototype._trailString=function(e){return this._pathString(e)},e.exports=a},function(e,t,n){"use strict";function i(e){var t,n=e.Symbol;return"function"==typeof n?n.observable?t=n.observable:(t=n("observable"),n.observable=t):t="@@observable",t}n.d(t,"a",(function(){return i}))},function(e,t,n){(function(e){!function(t){"use strict";function n(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}function i(e,t){Object.defineProperty(this,"kind",{value:e,enumerable:!0}),t&&t.length&&Object.defineProperty(this,"path",{value:t,enumerable:!0})}function r(e,t,n){r.super_.call(this,"E",e),Object.defineProperty(this,"lhs",{value:t,enumerable:!0}),Object.defineProperty(this,"rhs",{value:n,enumerable:!0})}function a(e,t){a.super_.call(this,"N",e),Object.defineProperty(this,"rhs",{value:t,enumerable:!0})}function o(e,t){o.super_.call(this,"D",e),Object.defineProperty(this,"lhs",{value:t,enumerable:!0})}function s(e,t,n){s.super_.call(this,"A",e),Object.defineProperty(this,"index",{value:t,enumerable:!0}),Object.defineProperty(this,"item",{value:n,enumerable:!0})}function l(e,t,n){var i=e.slice((n||t)+1||e.length);return e.length=t<0?e.length+t:t,e.push.apply(e,i),e}function c(e){var t=void 0===e?"undefined":T(e);return"object"!==t?t:e===Math?"math":null===e?"null":Array.isArray(e)?"array":"[object Date]"===Object.prototype.toString.call(e)?"date":"function"==typeof e.toString&&/^\/.*\//.test(e.toString())?"regexp":"object"}function u(e,t,n,i,d,h,p){p=p||[];var _=(d=d||[]).slice(0);if(void 0!==h){if(i){if("function"==typeof i&&i(_,h))return;if("object"===(void 0===i?"undefined":T(i))){if(i.prefilter&&i.prefilter(_,h))return;if(i.normalize){var f=i.normalize(_,h,e,t);f&&(e=f[0],t=f[1])}}}_.push(h)}"regexp"===c(e)&&"regexp"===c(t)&&(e=e.toString(),t=t.toString());var g=void 0===e?"undefined":T(e),v=void 0===t?"undefined":T(t),m="undefined"!==g||p&&p[p.length-1].lhs&&p[p.length-1].lhs.hasOwnProperty(h),y="undefined"!==v||p&&p[p.length-1].rhs&&p[p.length-1].rhs.hasOwnProperty(h);if(!m&&y)n(new a(_,t));else if(!y&&m)n(new o(_,e));else if(c(e)!==c(t))n(new r(_,e,t));else if("date"===c(e)&&e-t!=0)n(new r(_,e,t));else if("object"===g&&null!==e&&null!==t)if(p.filter((function(t){return t.lhs===e})).length)e!==t&&n(new r(_,e,t));else{if(p.push({lhs:e,rhs:t}),Array.isArray(e)){var S;for(e.length,S=0;S<e.length;S++)S>=t.length?n(new s(_,S,new o(void 0,e[S]))):u(e[S],t[S],n,i,_,S,p);for(;S<t.length;)n(new s(_,S,new a(void 0,t[S++])))}else{var E=Object.keys(e),b=Object.keys(t);E.forEach((function(r,a){var o=b.indexOf(r);o>=0?(u(e[r],t[r],n,i,_,r,p),b=l(b,o)):u(e[r],void 0,n,i,_,r,p)})),b.forEach((function(e){u(void 0,t[e],n,i,_,e,p)}))}p.length=p.length-1}else e!==t&&("number"===g&&isNaN(e)&&isNaN(t)||n(new r(_,e,t)))}function d(e,t,n,i){return i=i||[],u(e,t,(function(e){e&&i.push(e)}),n),i.length?i:void 0}function h(e,t,n){if(e&&t&&n&&n.kind){for(var i=e,r=-1,a=n.path?n.path.length-1:0;++r<a;)void 0===i[n.path[r]]&&(i[n.path[r]]="number"==typeof n.path[r]?[]:{}),i=i[n.path[r]];switch(n.kind){case"A":!function e(t,n,i){if(i.path&&i.path.length){var r,a=t[n],o=i.path.length-1;for(r=0;r<o;r++)a=a[i.path[r]];switch(i.kind){case"A":e(a[i.path[r]],i.index,i.item);break;case"D":delete a[i.path[r]];break;case"E":case"N":a[i.path[r]]=i.rhs}}else switch(i.kind){case"A":e(t[n],i.index,i.item);break;case"D":t=l(t,n);break;case"E":case"N":t[n]=i.rhs}return t}(n.path?i[n.path[r]]:i,n.index,n.item);break;case"D":delete i[n.path[r]];break;case"E":case"N":i[n.path[r]]=n.rhs}}}function p(e){return"color: "+C[e].color+"; font-weight: bold"}function _(e,t,n,i){var r=d(e,t);try{i?n.groupCollapsed("diff"):n.group("diff")}catch(e){n.log("diff")}r?r.forEach((function(e){var t=e.kind,i=function(e){var t=e.kind,n=e.path,i=e.lhs,r=e.rhs,a=e.index,o=e.item;switch(t){case"E":return[n.join("."),i,"",r];case"N":return[n.join("."),r];case"D":return[n.join(".")];case"A":return[n.join(".")+"["+a+"]",o];default:return[]}}(e);n.log.apply(n,["%c "+C[t].text,p(t)].concat(w(i)))})):n.log(" no diff ");try{n.groupEnd()}catch(e){n.log(" diff end  ")}}function f(e,t,n,i){switch(void 0===e?"undefined":T(e)){case"object":return"function"==typeof e[i]?e[i].apply(e,w(n)):e[i];case"function":return e(t);default:return e}}function g(e,t){var n=t.logger,i=t.actionTransformer,r=t.titleFormatter,a=void 0===r?function(e){var t=e.timestamp,n=e.duration;return function(e,i,r){var a=["action"];return a.push("%c"+String(e.type)),t&&a.push("%c@ "+i),n&&a.push("%c(in "+r.toFixed(2)+" ms)"),a.join(" ")}}(t):r,o=t.collapsed,s=t.colors,l=t.level,c=t.diff,u=void 0===t.titleFormatter;e.forEach((function(r,d){var h=r.started,p=r.startedTime,g=r.action,v=r.prevState,m=r.error,y=r.took,S=r.nextState,b=e[d+1];b&&(S=b.prevState,y=b.started-h);var T=i(g),w="function"==typeof o?o((function(){return S}),g,r):o,A=E(p),C=s.title?"color: "+s.title(T)+";":"",I=["color: gray; font-weight: lighter;"];I.push(C),t.timestamp&&I.push("color: gray; font-weight: lighter;"),t.duration&&I.push("color: gray; font-weight: lighter;");var P=a(T,A,y);try{w?s.title&&u?n.groupCollapsed.apply(n,["%c "+P].concat(I)):n.groupCollapsed(P):s.title&&u?n.group.apply(n,["%c "+P].concat(I)):n.group(P)}catch(e){n.log(P)}var k=f(l,T,[v],"prevState"),M=f(l,T,[T],"action"),D=f(l,T,[m,v],"error"),O=f(l,T,[S],"nextState");if(k)if(s.prevState){var R="color: "+s.prevState(v)+"; font-weight: bold";n[k]("%c prev state",R,v)}else n[k]("prev state",v);if(M)if(s.action){var N="color: "+s.action(T)+"; font-weight: bold";n[M]("%c action    ",N,T)}else n[M]("action    ",T);if(m&&D)if(s.error){var L="color: "+s.error(m,v)+"; font-weight: bold;";n[D]("%c error     ",L,m)}else n[D]("error     ",m);if(O)if(s.nextState){var x="color: "+s.nextState(S)+"; font-weight: bold";n[O]("%c next state",x,S)}else n[O]("next state",S);c&&_(v,S,n,w);try{n.groupEnd()}catch(e){n.log(" log end ")}}))}function v(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.assign({},I,e),n=t.logger,i=t.stateTransformer,r=t.errorTransformer,a=t.predicate,o=t.logErrors,s=t.diffPredicate;if(void 0===n)return function(){return function(e){return function(t){return e(t)}}};if(e.getState&&e.dispatch)return console.error("[redux-logger] redux-logger not installed. Make sure to pass logger instance as middleware:\n// Logger with default options\nimport { logger } from 'redux-logger'\nconst store = createStore(\n  reducer,\n  applyMiddleware(logger)\n)\n// Or you can create your own logger with custom options http://bit.ly/redux-logger-options\nimport createLogger from 'redux-logger'\nconst logger = createLogger({\n  // ...options\n});\nconst store = createStore(\n  reducer,\n  applyMiddleware(logger)\n)\n"),function(){return function(e){return function(t){return e(t)}}};var l=[];return function(e){var n=e.getState;return function(e){return function(c){if("function"==typeof a&&!a(n,c))return e(c);var u={};l.push(u),u.started=b.now(),u.startedTime=new Date,u.prevState=i(n()),u.action=c;var d=void 0;if(o)try{d=e(c)}catch(e){u.error=r(e)}else d=e(c);u.took=b.now()-u.started,u.nextState=i(n());var h=t.diff&&"function"==typeof s?s(n,c):t.diff;if(g(l,Object.assign({},t,{diff:h})),l.length=0,u.error)throw u.error;return d}}}}var m,y,S=function(e,t){return function(e,t){return new Array(t+1).join(e)}("0",t-e.toString().length)+e},E=function(e){return S(e.getHours(),2)+":"+S(e.getMinutes(),2)+":"+S(e.getSeconds(),2)+"."+S(e.getMilliseconds(),3)},b="undefined"!=typeof performance&&null!==performance&&"function"==typeof performance.now?performance:Date,T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},w=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)},A=[];m="object"===(void 0===e?"undefined":T(e))&&e?e:"undefined"!=typeof window?window:{},(y=m.DeepDiff)&&A.push((function(){void 0!==y&&m.DeepDiff===d&&(m.DeepDiff=y,y=void 0)})),n(r,i),n(a,i),n(o,i),n(s,i),Object.defineProperties(d,{diff:{value:d,enumerable:!0},observableDiff:{value:u,enumerable:!0},applyDiff:{value:function(e,t,n){e&&t&&u(e,t,(function(i){n&&!n(e,t,i)||h(e,t,i)}))},enumerable:!0},applyChange:{value:h,enumerable:!0},revertChange:{value:function(e,t,n){if(e&&t&&n&&n.kind){var i,r,a=e;for(r=n.path.length-1,i=0;i<r;i++)void 0===a[n.path[i]]&&(a[n.path[i]]={}),a=a[n.path[i]];switch(n.kind){case"A":!function e(t,n,i){if(i.path&&i.path.length){var r,a=t[n],o=i.path.length-1;for(r=0;r<o;r++)a=a[i.path[r]];switch(i.kind){case"A":e(a[i.path[r]],i.index,i.item);break;case"D":case"E":a[i.path[r]]=i.lhs;break;case"N":delete a[i.path[r]]}}else switch(i.kind){case"A":e(t[n],i.index,i.item);break;case"D":case"E":t[n]=i.lhs;break;case"N":t=l(t,n)}return t}(a[n.path[i]],n.index,n.item);break;case"D":case"E":a[n.path[i]]=n.lhs;break;case"N":delete a[n.path[i]]}}},enumerable:!0},isConflict:{value:function(){return void 0!==y},enumerable:!0},noConflict:{value:function(){return A&&(A.forEach((function(e){e()})),A=null),d},enumerable:!0}});var C={E:{color:"#2196F3",text:"CHANGED:"},N:{color:"#4CAF50",text:"ADDED:"},D:{color:"#F44336",text:"DELETED:"},A:{color:"#2196F3",text:"ARRAY:"}},I={level:"log",logger:console,logErrors:!0,collapsed:void 0,predicate:void 0,duration:!1,timestamp:!0,stateTransformer:function(e){return e},actionTransformer:function(e){return e},errorTransformer:function(e){return e},colors:{title:function(){return"inherit"},prevState:function(){return"#9E9E9E"},action:function(){return"#03A9F4"},nextState:function(){return"#4CAF50"},error:function(){return"#F20404"}},diff:!1,diffPredicate:void 0,transformer:void 0},P=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.dispatch,n=e.getState;return"function"==typeof t||"function"==typeof n?v()({dispatch:t,getState:n}):void console.error("\n[redux-logger v3] BREAKING CHANGE\n[redux-logger v3] Since 3.0.0 redux-logger exports by default logger with default settings.\n[redux-logger v3] Change\n[redux-logger v3] import createLogger from 'redux-logger'\n[redux-logger v3] to\n[redux-logger v3] import { createLogger } from 'redux-logger'\n")};t.defaults=I,t.createLogger=v,t.logger=P,t.default=P,Object.defineProperty(t,"__esModule",{value:!0})}(t)}).call(this,n(22))},function(e,t,n){function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(88),n(137),n(138);var o,c,u=n(139),d=n(140),h=n(141),p=n(142),_=n(143),f=n(144),g=n(145),m=g.s_gi,y=g.Visitor,S=g.AppMeasurement,E=n(5).bindActionCreators,b=n(147),T=n(9),A=n(148).renderUI,C=n(197),I=n(201).createStore,P=n(13),k=n(202).default,M=n(10),D=function(e,t){this._time=Date.now(),this._adPlaybackTime=0,this._store=I(),this._store.subscribe(this.updateBreakpointClass.bind(this)),this._actions=E(P,this._store.dispatch),this._self=this,this._version="3.44.1.212",this.createMark("playerLoadStart"),this._container=e,this._height=this._container.offsetHeight,this._width=this._container.offsetWidth,this._isVertical=this._width/this._height<1,this._videoId=this._container.getAttribute("id"),this._video,this._captionsShowing=!1,this._vrWrapper,this._vrComponents,this._hlsPlayer,this._wrapper,this._controls,this._context,this._videodata,this._hlsAvailable=!1,this._isFullScreen=!1,this._currentTime=0,this._sizeTimer,this._volume=1,this._hlsLoadAttempted=!1,this.parseXml,this._availableCaptions=[],this._setMuted=!1,this._fields="fields=isQAEvent,type,video174kMP4Url,video320kMP4Url,video664kMP4Url,video1264kMP4Url,video1864kMP4Url,video2564kMP4Url,hls,videoMP4List,adZone,thumbnailList,guid,state,secondsUntilStartTime,author,description,name,linkURL,videoStillURL,duration,videoURL,adCategory,adsAllowed,chapterTimes,catastrophic,linkShortURL,doctypeID,youtubeID,titletag,rssURL,wsj-section,wsj-subsection,allthingsd-section,allthingsd-subsection,sm-section,sm-subsection,provider,formattedCreationDate,iso8601CreationDate,keywords,keywordsOmni,column,editor,emailURL,emailPartnerID,showName,omniProgramName,omniVideoFormat,linkRelativeURL,touchCastID,omniPublishDate,adTagParams,gptCustParams,format,forceClosedCaptions,captionsVTT,hlsNoCaptions,episodeNumber,seriesName,thumbstripURL,thumbnailImageManager,ads_allowed,mediaLiveChannelId",this._isIpad,this._isIphone,this._isAndroid,this._isIE,this._isMobile=!1,this._androidV,this._isTwitter,this._isOperaMini,this._isChrome,this._safariV=-1,this._safariInit=!1,this._safariHandler;var n=window.navigator.userAgent.toLowerCase(),i=navigator.userAgent.toLowerCase();this._isIpad=n.match(/(iPad)/i)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1,this._isIphone=n.match(/(iphone)/i),this._isIphone=null!=this._isIphone,this._isAndroid=n.match(/(android)/i),this._isAndroid=null!==this._isAndroid&&null!=a(this._isAndroid),this._androidV=parseFloat(n.slice(n.indexOf("android")+8)),this._isIE=-1!=i.indexOf("msie")&&parseInt(i.split("msie")[1]),this._isOperaMini=n.match(/(Android; Opera Mini)/i),this._isChrome=n.match(/(Chrome)/i),this._iOS=(/iPad|iPhone|iPod/.test(navigator.platform)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1)&&!window.MSStream,this._isIE||navigator.userAgent.match(/Trident/)&&!navigator.userAgent.match(/MSIE/)&&(this._isIE=11),this._isSafariMac=-1!=navigator.userAgent.indexOf("Safari")&&-1!=navigator.userAgent.indexOf("Mac")&&-1==navigator.userAgent.indexOf("Chrome");try{this._isSafariMac&&(this._safariV=parseInt(n.match("version[ /]+[0-9]*")[0].split("/")[1]))}catch(e){this._safariV=-1}if(this._isSafari=-1!=navigator.userAgent.indexOf("Safari")&&-1==navigator.userAgent.indexOf("Chrome"),this._isMobile=Boolean(this._isAndroid||i.match(/webos/i)||this._isIphone||this._isIpad||i.match(/ipod/i)||i.match(/blackberry/i)||i.match(/windows phone/i)),"mozilla/5.0 (x11; linux x86_64; rv:45.0) gecko/20100101 firefox/45.0"!=n){this._bitrateList,this._selectedBitrate="video664kMP4Url",this._skipToTime=0,this._playOverlay,this._timeDisplay,this._fullscreenBtn,this._volumeBtn,this._ccBtn,this._ccList,this._langSelected="",this._currentTrack,this._bitList,this._volumeSlider,this._adLoadingScreen,this._adsSkipButton,this._startClick,this._shareScreen,this._endScreen,this._endScreenStatus,this._ajax={},this._configLoaded=!("playerid"in t),this._futureTimer,this._startTime,this._videoMsg,this._isStalled=!1,this._endScreenShowing=!1,this._endScreenLoading=!1,this._adMarkerContainer,this._currentThumbstripURL,this._adStarted=!1,this._adsManager,this._adsLoader,this._adContainer,this._adDisplayContainer,this._adDuration=0,this._adPlayNumber=1,this._adTimer,this._adTimeoutTimer,this._adTimeoutFail=!1,this._adResponseTimeout=8e3,this._currentAd,this._midRolls=[],this._midrollRequested=!1,this._adInfo,this._adId,this._adTagUsed="none",this._captionsLangs={eng:"English",spa:"Spanish",jap:"Japanese",por:"Portuguese"},this.BUCKET_HASH_MAP=["2qgQ1WCa3A","ixi4E5ylqa","830nwKog3K","K8ZnHJ5Uyn","91GjW1q7Zg","rGgki1wrhs","q85AaJVP78","1p6sdUNJWD","63L1D4y2F9","HY0f8Of9M1"],this._skipAvailable=!1,this._adCountdownText,this._videoSkipIcon,this._formatOverride="",this._trackingMilestones=[!1,!1,!1,!1],this._mediaHeartbeat,this._mediaHeartbeatConfig,this._mediaHeartbeatDelegate,this._mediaObjectHeartbeat,this._pingMilestone=-1,this._isChained=!1,this._isLive=!1,this._contentStartTracked=!1,this._sessionStarted=!1,this._comscoreC3="13047035",this._comscoreMeta={ns_st_ci:"",c3:this._comscoreC3,c4:"*null",c6:"*null"},this._comscoreTag=new _.StreamingTag({customerC2:"6035148"}),this._retryLoadAttempts=0,this._trackInViewListenerReference,this._autoplayed,this._adErrorTracked=!0,this._adErrorEvent=!1,this._tObject={},this._pageEvents="",this._currentEvents=["event136","event40","event41","event42","event46","event67","event73","event74","event96","event97","event98","event99","event100","event113","event115","event116","event117","event141"],this._larsUrl="https://video-api.wsj.com/enf/wsjdn-video.asp",this._convivaTestCustomerKey="896e280ea92df939a292df56edeb57ab25ecaecf",this._convivaProdCustomerKey="445b2eba1211f043d37dc4994c50112384f41204",this._convivaServiceURL="https://wallstreetjournal-test.testonly.conviva.com",this._testingEnvironment=!0,this._convivaClient,this._convivaAdSessionKey=null,this._convivaContentMetadata,this._convivaContentSessionKey=null,this._convivaPlayerStateManager,this._convivaAdStateManager,this._convivaClientInterfaceObject,this._convivaHtml5PlayerInterface,this._convivaTestMode=!1,this._convivaSystemFactory,this._contentInitialized=!1,this._adsRequestPending=!1,this._playRequested=!1,this._flash,this._flashContainer,this._flashInit=!1,this._flashEvents,this._fPlaying=!1,this._bucket="";var r={autoplay:!1,loop:!1,adsEnabled:!0,vpaidEnabled:!0,shareEnabled:!0,allowPlayerPopup:!1,chainVideos:!1,disableHtmlControls:!1,enableLiveButton:!1,shareDomain:null,useAllesseh:!1,api:"https://video-api.wsj.com/api-video/",api2:"https://video-api.shdsvc.dowjones.io/api/",saveApi:"https://www.wsj.com/articles/svc/personalization/saved-contents",saveApiPublication:null,clickForSound:!1,resetOnComplete:!0,type:"",query:"",contentType:"article",enableEndScreen:!1,enableMoreVideosSlide:!1,disableTitle:!1,noThumb:!1,thumbFlashLine:!1,thumbLayout:"",larsId:"91",larsAdId:"1259",trackInView:!1,channel:null,enableScrubPreview:!0,allowFullScreen:!0,adTag:"",useHttps:!0,count:1,moduleId:"",adZone:"",lnid:"",plid:"",msrc:null,collapseable:!1,disableDVR:null,maxBitrateIndex:null,enableCaptions:!0,loaderThumb:!1,adSkipTime:15,playlist:{},suggestionsType:"wsj-section",suggestionsQuery:"",suggestionsGroupId:"",sAccount:!1,imaLibrary:"https://imasdk.googleapis.com/js/sdkloader/ima3.js",site:"",directLinks:!1,playlistQuery:"",touchCastID:null,relativeLinks:!1,disableChainPlay:!1,thumb:null,callback:null,fireTv:!1,useHLS:!0,startFullScreen:!1,playInline:!this._isVertical&&this._isIphone,suppressHeadline:!1,startLevel:!1,startPosition:-1};try{this._domain=window.location!=window.parent.location?document.referrer:document.location}catch(e){this._domain=document.domain}this._isIphone&&!r.playInline&&(r.disableHtmlControls=!0),this._settings=this.extend(r,t),this.hlsConfig={autoStartLoad:!0,startPosition:this._settings.startPosition,capLevelToPlayerSize:!1,enableWebVTT:!1,maxMaxBufferLength:30},-1!=navigator.userAgent.indexOf("amazon-fireos")?(this._settings.useHLS=!1,this._isMobile=!1):this._settings.fireTv=!1,!0!==this._settings.clickForSound&&"mobile"!=this._settings.autoplay||(this._settings.autoplay="muted"),this._isMobile&&("muted"==this._settings.autoplay?this._settings.playInline=!0:this._settings.autoplay=!1),this._isMobile||(this._settings.startFullScreen=!1),(this._iOS||this._isSafariMac)&&(this._settings.useHLS=!1),this._isIE&&(this._settings.enableCaptions=!1);"undefined"==typeof SVGRect&&!1,this._isMobile&&(this._settings.vpaidEnabled=!1),"https://video-api.wsj.com/api-video/"!==this._settings.api&&this._settings.api.split("/api-video/").length>1&&(this._larsUrl=this._settings.api.split("/api-video/")[0]+"/enf/wsjdn-video.asp"),!1!==this._settings.startLevel&&(this.hlsConfig.startLevel=this._settings.startLevel),this._settings.hasCMPConsent="undefined"==typeof djcmp||void 0===djcmp.customVendorIsEnabled||djcmp.customVendorIsEnabled("5fa5a010e954e249a3afd700");var o=T.getApiUrlOverride();if(o&&(this._settings.api2=o),this._graphics={},this._graphics.pause='<svg width="16px" height="22px" viewBox="0 0 20 28" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>Pause</title><g id="Icons" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="Icons/Play/Pause" fill="#FFFFFF" fill-rule="nonzero"><path d="M0,25 L0,3 L6,3 L6,25 L0,25 Z M11,25 L11,3 L17,3 L17,25 L11,25 Z" id="Combined-Shape"></path></g></g></svg>',this._graphics.play='<svg width="16px" height="22px" viewBox="0 0 20 28" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>Play</title><desc>Created with sketchtool.</desc><g id="Icons" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="Icons/Play/Play" fill="#FFFFFF" fill-rule="nonzero"><polyline id="Play" points="0 2 0 26 20 13.4528 0 2"></polyline></g></g></svg>',this._graphics.cc='<svg width="22px" height="22px" viewBox="0 0 28 28" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g id="Icons" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="Icons/CC/Inactive" fill="#FFFFFF" fill-rule="nonzero"><path d="M26,4 L2,4 L2,22 L7,22 L7,26 L12,22 L26,22 L26,4 Z M24,20 L4,20 L4,6 L24,6 L24,20 Z M20,17 C19.77858,17 19.4452467,17 19,17 C16,17 15,15 15,13 C15,11 16,9 19,9 C19.5054152,9 19.8387485,9 20,9 L20,11 C19,11 17,11 17,13 C17,15 19,15 20,15 L20,17 Z M13,17 C12.77858,17 12.4452467,17 12,17 C9,17 8,15 8,13 C8,11 9,9 12,9 C12.5054152,9 12.8387485,9 13,9 L13,11 C12,11 10,11 10,13 C10,15 12,15 13,15 L13,17 Z" id="CC"></path></g></g></svg>',this._graphics["cc-active"]='<svg width="22px" height="22px" viewBox="0 0 28 28" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g id="Icons" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="Icons/CC/Active" fill="#FFFFFF" fill-rule="nonzero"><path d="M26,4 L2,4 L2,22 L7,22 L7,26 L12,22 L26,22 L26,4 Z M20,17 C19.77858,17 19.4452467,17 19,17 C16,17 15,15 15,13 C15,11 16,9 19,9 C19.5054152,9 19.8387485,9 20,9 L20,11 C19,11 17,11 17,13 C17,15 19,15 20,15 L20,17 Z M13,17 C12.77858,17 12.4452467,17 12,17 C9,17 8,15 8,13 C8,11 9,9 12,9 C12.5054152,9 12.8387485,9 13,9 L13,11 C12,11 10,11 10,13 C10,15 12,15 13,15 L13,17 Z" id="CC"></path></g></g></svg>',this._graphics.bitrate='<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="100%" height="100%" viewBox="0 0 32 32" enable-background="new 0 0 32 32" xml:space="preserve"><g id="Layer_1"></g><g id="Layer_2"><g><path id="ytp-svg-39_1_" fill="#FFFFFF" d="M26,17.5v-3h-2.655c-0.189-0.956-0.567-1.845-1.089-2.633L24.122,10L22,7.878 l-1.866,1.866c-0.789-0.521-1.678-0.899-2.634-1.1V6h-3v2.645c-0.967,0.2-1.855,0.578-2.645,1.1L9.988,7.878L7.866,10l1.867,1.867 c-0.522,0.788-0.9,1.677-1.089,2.633H6v3h2.645c0.2,0.956,0.578,1.845,1.1,2.633l-1.878,1.878l2.122,2.122l1.878-1.877 c0.789,0.521,1.678,0.899,2.634,1.089V26h3v-2.655c0.956-0.189,1.833-0.567,2.622-1.089L22,24.133l2.122-2.122l-1.878-1.878 c0.522-0.788,0.9-1.677,1.101-2.633H26z M16,20.5c-2.488,0-4.5-2.022-4.5-4.5c0-2.489,2.012-4.5,4.5-4.5 c2.478,0,4.5,2.011,4.5,4.5C20.5,18.478,18.478,20.5,16,20.5L16,20.5z"/></g></g></svg>',this._graphics["share-fb"]='<a id="share-link-fb-'+this._videoId+'"><svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="100%" height="100%" viewBox="-19.5 60.5 32 32" enable-background="new -19.5 60.5 32 32" xml:space="preserve"><g id="Page-1"><g id="facebook"><path id="Path" fill="#FFFFFF" d="M1.166,76.504h-2.714V86h-4.034v-9.496H-7.5v-3.349h1.918v-2.176c0-1.551,0.758-3.979,4.064-3.979h2.987v3.267h-2.183c-0.452-0.024-0.838,0.313-0.864,0.755c-0.003,0.055,0,0.107,0.008,0.158v1.976H1.5L1.166,76.504z"/></g></g></svg></a>',this._graphics["share-twitter"]='<a id="share-link-twitter-'+this._videoId+'" target="_blank"><svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="100%" height="100%" viewBox="0 0 32 32" enable-background="new 0 0 32 32" xml:space="preserve"><g id="Logo__x2014__FIXED"><g><path fill="#FFFFFF" d="M12.837,25.5c7.613,0,11.776-7.313,11.776-13.642c0-0.206,0-0.411-0.006-0.618c0.807-0.673,1.51-1.523,2.065-2.486c-0.742,0.384-1.542,0.635-2.382,0.757c0.855-0.59,1.511-1.533,1.824-2.655c-0.799,0.553-1.687,0.944-2.632,1.159C22.726,7.08,21.652,6.5,20.464,6.5c-2.284,0-4.141,2.15-4.141,4.796c0,0.375,0.042,0.739,0.106,1.095c-3.439-0.196-6.49-2.113-8.533-5.011C7.542,8.09,7.34,8.912,7.34,9.792c0,1.664,0.734,3.132,1.841,3.991c-0.679-0.027-1.315-0.243-1.874-0.598c0,0.019,0,0.038,0,0.065c0,2.318,1.429,4.264,3.318,4.703c-0.347,0.111-0.71,0.168-1.089,0.168c-0.266,0-0.525-0.025-0.775-0.084c0.525,1.908,2.059,3.292,3.867,3.33c-1.421,1.29-3.206,2.056-5.142,2.056c-0.331,0-0.663-0.021-0.985-0.065C8.324,24.705,10.504,25.5,12.837,25.5"/></g></g></svg></a>',this._graphics["share-email"]='<a id="share-link-twitter-'+this._videoId+'" target="_blank"><svg version="1.1" id="svg2439" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="100%" height="100%" viewBox="0 0 439.371 331.469" enable-background="new 0 0 439.371 331.469" xml:space="preserve"><g id="g2449" transform="translate(-145.3305,-145.3305)"><path fill="#FFFFFF" d="M516.516,426.799H216.331V200.334h300.186V426.799z M237.275,405.856h258.298V221.279H237.275V405.856z"/><path id="path2453" fill="#FFFFFF" stroke="#000000" stroke-width="30.655" d="M226.803,210.807"/><path fill="#FFFFFF" d="M366.882,352.684c-9.349,0.001-18.261-3.576-24.451-9.815L221.946,220.78l14.907-14.711l120.465,122.068c2.265,2.283,5.757,3.603,9.563,3.603c3.784,0,7.233-1.29,9.466-3.54l120.388-121.173l14.857,14.761L391.209,342.956C385.079,349.135,376.209,352.684,366.882,352.684z"/><rect x="269.215" y="296.385" transform="matrix(0.7149 0.6993 -0.6993 0.7149 333.1573 -92.2456)" fill="#FFFFFF" width="20.944" height="131.993"/><rect x="389.075" y="352.02" transform="matrix(0.6987 0.7154 -0.7154 0.6987 395.928 -215.1116)" fill="#FFFFFF" width="128.542" height="20.945"/></g></svg></a>',"undefined"==typeof SVGRect?this._graphics["play-overlay"]='<img style="margin:0 auto;" height="50" width="50" src="'+this._settings.api+'player/v3/css/play-overlay.png" />':this._graphics["play-overlay"]='<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="100%" height="100%" viewBox="0 0 52 52" enable-background="new 0 0 52 52" xml:space="preserve"><g id="XMLID_2_" opacity="1"><path fill="#FFFFFF" d="M26,51.5C11.9,51.5,0.5,40.1,0.5,26C0.5,11.9,11.9,0.5,26,0.5c14.1,0,25.5,11.4,25.5,25.5C51.5,40.1,40.1,51.5,26,51.5z"/><path fill="#FFFFFF" d="M26,1c13.8,0,25,11.2,25,25S39.8,51,26,51S1,39.8,1,26S12.2,1,26,1 M26,0C11.7,0,0,11.7,0,26s11.7,26,26,26 s26-11.7,26-26S40.3,0,26,0L26,0z"/></g><polygon id="XMLID_1_" fill="#333333" points="19.6,37.5 19.6,14.5 37.8,25.5 "/></svg>',this._ajax.x=function(){if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;for(var e,t=["MSXML2.XmlHttp.6.0","MSXML2.XmlHttp.5.0","MSXML2.XmlHttp.4.0","MSXML2.XmlHttp.3.0","MSXML2.XmlHttp.2.0","Microsoft.XmlHttp"],n=0;n<t.length;n++)try{e=new ActiveXObject(t[n]);break}catch(e){}return e},this._ajax.send=function(e,t,n,i,r,a){try{var o=this.x();o.open(i,e,a),o.data=r,o.onerror=function(){n(),console.log("Error loading config.")},o.onreadystatechange=function(){200==o.status?4==o.readyState&&t&&(t(o.responseText,o.data),o.onreadystatechange=null,o=null):0!=o.status&&n&&(o.onreadystatechange=null,o=null,n())},o.send(r)}catch(e){n&&(o&&(o.onreadystatechange=null),n())}},this._ajax.get=function(e,t,n,i){this.send(e,t,n,"GET",i,!0)},this.base64={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(e){var t,n,i,r,a,o,s,l="",c=0;for(e=this._utf8_encode(e);c<e.length;)r=(t=e.charCodeAt(c++))>>2,a=(3&t)<<4|(n=e.charCodeAt(c++))>>4,o=(15&n)<<2|(i=e.charCodeAt(c++))>>6,s=63&i,isNaN(n)?o=s=64:isNaN(i)&&(s=64),l=l+this._keyStr.charAt(r)+this._keyStr.charAt(a)+this._keyStr.charAt(o)+this._keyStr.charAt(s);return l},decode:function(e){var t,n,i,r,a,o,s="",l=0;for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");l<e.length;)t=this._keyStr.indexOf(e.charAt(l++))<<2|(r=this._keyStr.indexOf(e.charAt(l++)))>>4,n=(15&r)<<4|(a=this._keyStr.indexOf(e.charAt(l++)))>>2,i=(3&a)<<6|(o=this._keyStr.indexOf(e.charAt(l++))),s+=String.fromCharCode(t),64!=a&&(s+=String.fromCharCode(n)),64!=o&&(s+=String.fromCharCode(i));return this._utf8_decode(s)},_utf8_encode:function(e){e=e.replace(/\r\n/g,"\n");for(var t="",n=0;n<e.length;n++){var i=e.charCodeAt(n);128>i?t+=String.fromCharCode(i):i>127&&2048>i?(t+=String.fromCharCode(i>>6|192),t+=String.fromCharCode(63&i|128)):(t+=String.fromCharCode(i>>12|224),t+=String.fromCharCode(i>>6&63|128),t+=String.fromCharCode(63&i|128))}return t},_utf8_decode:function(e){for(var t="",n=0,i=c1=c2=0;n<e.length;)128>(i=e.charCodeAt(n))?(t+=String.fromCharCode(i),n++):i>191&&224>i?(c2=e.charCodeAt(n+1),t+=String.fromCharCode((31&i)<<6|63&c2),n+=2):(c2=e.charCodeAt(n+1),c3=e.charCodeAt(n+2),t+=String.fromCharCode((15&i)<<12|(63&c2)<<6|63&c3),n+=3);return t}},void 0!==window.DOMParser)this.parseXml=function(e){return(new window.DOMParser).parseFromString(e,"text/xml")};else{if(void 0===window.ActiveXObject||!new window.ActiveXObject("Microsoft.XMLDOM"))throw new Error("No XML parser found");this.parseXml=function(e){var t=new window.ActiveXObject("Microsoft.XMLDOM");return t.async="false",t.loadXML(e),t}}}else this._container.innerHTML='<div class="videoErrorMsg"><div>Playback on your browser is not currently supported.</div></div>'};D.prototype={log:function(){var e;this._store.getState().enableLogging&&(e=console).log.apply(e,arguments)},init:function(){var e=this;if(this._configLoaded){this._bucket="",console.log("v "+this._version+this._bucket),1==this._settings.clickForSound&&(this._actions.mute(),this._actions.showClickForSound());var t=T.getCookie("djvideobit");""!=t&&(this._selectedBitrate=t),this.setupPlayer();var n=T.getCookie("djadplaynum");""!=n&&(this._adPlayNumber=parseInt(n),isNaN(this._adPlayNumber)&&(this._adPlayNumber=0));var i=T.getCookie("djvideovol");""!=i&&this.setVolume(i,!1);var r=T.getCookie("djvideolang");""!=r&&(this._langSelected=r),this._iOS&&(this._langSelected="");var a=T.getCookie("djvideomute");return""!=a&&1==a&&this._actions.mute(),"function"==typeof this._settings.callback&&this._settings.callback(),this._flashEvents={ready:function(t){e._flash=p("flash"+e._videoId),e._fPlaying=!1,e._flashInit=!0,e.startVideo({fetchAds:!0})},manifest:function(t,n,i){e._flash.playerPlay(-1),e._controls.style.display="block"},complete:function(e,t,n){},state:function(t,n,i){"PAUSED"==t?(e._fPlaying=!1,e.onPaused(t),e._actions.hideLoadingSpinner()):"PLAYING"==t?(e._fPlaying=!0,e.onPlaying(t),e._actions.hideLoadingSpinner()):"PAUSED_BUFFERING"==t?(e._fPlaying=!1,e.onPaused(t),e._actions.showLoadingSpinner()):"PLAYING_BUFFERING"==t&&(e._fPlaying=!0,e.onPlaying(t),e._actions.showLoadingSpinner())},position:function(t,n,i){e.onProgress(t)},error:function(e,t,n){}},this.onHLSMediaAttached=this.onHLSMediaAttached.bind(this),this.onHlsError=this.onHlsError.bind(this),this.onHLSLevelLoaded=this.onHLSLevelLoaded.bind(this),this.onBitrateChange=this.onBitrateChange.bind(this),this.onHLSPlayerBitrateChange=this.onHLSPlayerBitrateChange.bind(this),window.onbeforeunload=this.onPageUnload.bind(this),window["flashlsCallback"+this._videoId]=function(t,n){e._flashEvents[t].apply(null,n)},this}try{var o=this._settings.api+"player/v3/config/"+this._settings.playerid+".json?callback=cbfn";this._ajax.get(o,(function(t){e._configLoaded=!0;var n=JSON.parse(t);e._externalConfig=n.items[0];try{e._settings=e.extend(e._settings,e._externalConfig)}catch(e){}e.init()}),(function(t){e._configLoaded=!0,e.init()}),null)}catch(t){e._configLoaded=!0}},setupPlayer:function(){var e=this,t=this;this._container.className=this._container.className+" video-player"+(this._isMobile?" mobile-player":"");var n={videoId:this._videoId,videoProps:{},thumbProps:{layout:this._settings.thumbLayout,showFlashLine:this._settings.thumbFlashLine,suppressHeadline:this._settings.suppressHeadline,thumbnailOverride:this._settings.thumb,onClick:function(){t._autoplayed=!1,t.startVideo(),t.muteUnMute(!1,!1,!1),t._isAndroid&&t._settings.startFullScreen&&!t._isFullScreen&&t.toggleFullScreen()},graphics:this._graphics},countdownProps:{videoApiUrl:this._settings.api2,onCountdownComplete:function(){t._videodata.state,t.handleLiveUpdates(),t.startVideo()}},liveButtonEnabled:this._settings.enableLiveButton,saveToQueueEnabled:"string"==typeof this._settings.saveApiPublication&&T.isUserLoggedIn()};this._settings.enableMoreVideosSlide&&(n.moreVideosSlideProps={hasCMPConsent:this._settings.hasCMPConsent,videoApiUrl:this._settings.api,onSlideShowing:this.trackMoreVideosSlide.bind(this),playVideo:function(t){e._formatOverride="user initiated recommendation",e._settings.guid=t,e.loadVideo(!0)}}),this._settings.clickForSound&&(n.clickForSoundProps={onClicked:this.clickForSoundHandler.bind(this),isCountdownVisible:!0,isLiveButtonVisible:this._settings.enableLiveButton}),this._settings.enableEndScreen&&(n.endscreenProps={videoApiUrl:this._settings.api,fields:this._fields,playerSettings:this._settings,playVideo:this.playSuggestion.bind(this),onEndsceenShown:this.trackEndscreenSlide.bind(this)}),(this._settings.disableTitle||this._settings.disableHtmlControls)&&(n.disableTitle=!0),this._settings.disableHtmlControls?n.controlsProps=null:n.controlsProps={enableScrubPreview:this._settings.enableScrubPreview,isMobile:this._isMobile,onPlayPause:this.playPause.bind(this),onMuteUnMute:this.muteUnMute.bind(this,null,!0,!0),onToggleFullScreen:this.toggleFullScreen.bind(this),onSeek:this.onSeek.bind(this),saveApi:this._settings.saveApi,saveApiPublication:this._settings.saveApiPublication,showControls:this.showControls.bind(this,3e3),showShareScreen:this.showHideShareScreen.bind(this),saveToQueueEnabled:"string"==typeof this._settings.saveApiPublication&&T.isUserLoggedIn(),onSaveChange:this.onSaveChange.bind(this)},"muted"!=this._settings.autoplay||!this._isMobile&&1!=this._settings.clickForSound||(n.videoProps.autoplay=!0,n.videoProps.muted=!0),this._settings.playInline&&(n.videoProps.playsinline=!0),this._settings.loop&&(n.videoProps.loop=!0),this._store.getState().isMuted&&(n.videoProps.muted=!0),A(this._container,this._store,n),Object.defineProperties(this,{_video:{get:function(){var t=document.getElementById("videoplayer-"+e._videoId);return t&&!t.scope&&(t.scope=e),t}},_wrapper:{get:function(){var t=document.getElementById("wrapper-"+e._videoId);return t&&!t.scope&&(t.scope=e),t}},_pauseSlate:{get:function(){return document.getElementById("video-pause-slate-"+e._videoId)}},_adContainer:{get:function(){return document.getElementById("adContainer-"+e._videoId)}},_vrWrapper:{get:function(){return document.getElementById("vrWrapper_"+e._videoId)}},_flashContainer:{get:function(){return document.getElementById("flashContainer-"+e._videoId)}},_pauseScreen:{get:function(){return document.getElementById("video-pause-slate-"+e._videoId)}},_adCircleDiv:{get:function(){return document.getElementById("ad-circle-"+e._videoId)}}}),this._countdownTxt,this._adLowerCircleComponent=new C.Circle("#ad-circle-"+this._videoId,{color:"rgba(255, 255, 255, 0.50)",strokeWidth:7}),this._adCircleComponent=new C.Circle("#ad-circle-"+this._videoId,{color:"#ffffff",strokeWidth:7}),this._adContainer.style.display="none",this.setupListeners(!0),this._settings.disableHtmlControls?(document.getElementById("video-controls-container-"+this._videoId).style.display="none",this._settings.fireTv?this._video.controls=!1:this._video.controls=!0):(Object.defineProperties(this,{_adCountdownText:{get:function(){return document.getElementById("video-ad-countdown-"+e._videoId)}},_adMarkerContainer:{get:function(){return document.getElementById("video-ad-marker-container-"+e._videoId)}},_adsSkipButton:{get:function(){return document.getElementById("video-ad-skip-"+e._videoId)}},_bitBtn:{get:function(){return document.getElementById("video-bit-"+e._videoId)}},_bitList:{get:function(){return document.getElementById("bitrate-list-"+e._videoId)}},_ccBtn:{get:function(){return document.getElementById("video-cc-"+e._videoId)}},_ccList:{get:function(){return document.getElementById("captions-list-"+e._videoId)}},_controls:{get:function(){var t=document.getElementById("video-controls-container-"+e._videoId);return t&&!t.hideTime&&(t.hideTime=0),t}},_fullscreenBtn:{get:function(){return document.getElementById("video-fullscreen-"+e._videoId)}},_playOverlay:{get:function(){return document.getElementById("video-play-overlay-"+e._videoId)}},_shareBtn:{get:function(){return document.getElementById("video-share-b-"+e._videoId)}},_shareScreen:{get:function(){return document.getElementById("video-share-"+e._videoId)}},_timeDisplay:{get:function(){return document.getElementById("video-time-"+e._videoId)}},_volumeBG:{get:function(){return document.getElementById("video-volume-b-"+e._videoId)}},_volumeBtn:{get:function(){return document.getElementById("video-volume-"+e._videoId)}},_volumeHandle:{get:function(){return document.getElementById("video-volume-h-"+e._videoId)}},_volumeSetting:{get:function(){return document.getElementById("video-volume-v-"+e._videoId)}},_videoSkipIcon:{get:function(){return document.getElementById("videoSkipIcon-"+e._videoId)}},_volumeSlider:{get:function(){return document.getElementById("video-volume-slider-"+e._videoId)}}}),this._ccBtn.style.display="none",this._settings.shareEnabled||(this._shareBtn.style.display="none"),this._adsSkipButton.style.display="none",this._bitBtn.style.display="none",this.addUserEventListeners(),this._video.controls=!1),this._height=this._wrapper.offsetHeight,this._width=this._wrapper.offsetWidth,this._container._self=this,this._container.tabIndex="-1",this._container.resumeVideo=this.eResumeVideo.bind(this),this._container.pauseVideo=this.ePauseVideo,this._container.playVideo=this.ePlayVideo.bind(this),this._container.playPauseVideo=this.ePlayPauseVideo,this._container.killVideo=this.eKillVideo,this._container.loadVideo=this.eLoadVideo,this._container.setMute=this.eMute,this._container.updatePlaylist=this.eUpdatePlaylist,this._container.isPlaying=this.eIsPlaying,this._container.getStatus=this.eGetStatus,this._container.vidoraShownList=this.eVidoraShownList,this._container.seek=this.eSeek.bind(this),(this._settings.guid||""!==this._settings.type&&""!==this._settings.query)&&this.loadVideo(!1),this._iOS?(this._video.addEventListener("webkitendfullscreen",(function(e){t.onScreenChange(e)})),this._video.addEventListener("webkitbeginfullscreen",(function(e){t.onScreenChange(e)}))):this._wrapper.addEventListener(f.raw.fullscreenchange,(function(e){t.onScreenChange(e)})),this._settings.trackInView&&(this._trackInViewListenerReference=this.trackInView.bind(this),window.addEventListener("scroll",this._trackInViewListenerReference)),this._video.style.display="none",this.onResize()},initVideo:function(){var e=this,t=this;this._contentInitialized=!1;var i=this._store.getState().isAdsBlocked;if(this._settings.adsEnabled&&!i){if("undefined"==typeof google)return this._actions.setIMALoadState(M.STARTED),void this.loadScript(this._settings.imaLibrary,(function(){t._actions.setIMALoadState(M.FINISHED),t.initVideo()}),(function(){t._actions.setIMALoadState(M.FAILED),t.initVideo()}))}else this._adContainer.style.display="none";if(this._settings.useHLS&&void 0===o)return this._hlsLoadAttempted=!0,this._actions.setHlsJsLoadState(M.STARTED),void n.e(2).then(function(e){t._actions.setHlsJsLoadState(M.FINISHED),o=n(208),t._settings.useHLS=o.isSupported(),t.initVideo()}.bind(null,n)).catch((function(e){console.error(e),t._actions.setHlsJsLoadState(M.FAILED),t._settings.useHLS=!1,t.initVideo()}));this._mediaHeartbeat||this.setupTracking(),this._resizeObserver=new ResizeObserver(this.onResize.bind(this)),this._resizeObserver.observe(this._container),"469"==this._videodata.doctypeID&&(this._settings.chainVideos=!1),"future"!==this._videodata.state&&"live"!==this._videodata.state||Promise.all([n.e(3),n.e(0)]).then(function(t){var i=n(209).default;e._liveStateController=new i,"live"!==e._videodata.state||e._store.getState().isCountdownVisible||e.handleLiveUpdates()}.bind(null,n)).catch((function(e){console.error(e)})),this._settings.adsEnabled&&!i&&this.initAds(),this.trigger(this._wrapper,"onInitialize",this._videodata),this.createMark("playerReady"),this._settings.autoplay?this.startVideo():"future"!==this._videodata.state&&this.setupThumbnail()},initAds:function(){var e=this;try{this._adDisplayContainer=new google.ima.AdDisplayContainer(this._adContainer,this._video),this._adsLoader=new google.ima.AdsLoader(this._adDisplayContainer),this._settings.vpaidEnabled?google.ima.settings.setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.ENABLED):google.ima.settings.setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.DISABLED),this._adsLoader.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,(function(t){e.onAdsManagerLoaded(t)}),!1),this._adsLoader.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,(function(t){e.onAdError(t)}),!1),this.requestAds(!1)}catch(e){console.error("Failed to init ads",e),this._settings.adsEnabled=!1}},addHLSEventListeners:function(){this._hlsPlayer.off(o.Events.MEDIA_ATTACHED,this.onHLSMediaAttached),this._hlsPlayer.off(o.Events.ERROR,this.onHlsError),this._hlsPlayer.off(o.Events.LEVEL_LOADED,this.onHLSLevelLoaded),this._hlsPlayer.off(o.Events.LEVEL_SWITCHED,this.onBitrateChange),this._hlsPlayer.off(o.Events.LEVEL_SWITCHED,this.onBitrateChange),this._hlsPlayer.on(o.Events.MEDIA_ATTACHED,this.onHLSMediaAttached),this._hlsPlayer.on(o.Events.ERROR,this.onHlsError),this._hlsPlayer.on(o.Events.LEVEL_LOADED,this.onHLSLevelLoaded),this._hlsPlayer.on(o.Events.LEVEL_SWITCHED,this.onHLSPlayerBitrateChange)},onHLSMediaAttached:function(e,t,n,i){this._hlsPlayer.loadSource(this._videodata.hlsNoCaptions)},onHLSLevelLoaded:function(e,t){var n=t.details.totalduration;n>0&&n!==this._store.getState().duration&&"live"!==this._store.getState().videoData.state&&this._actions.updateDuration(n)},onHLSPlayerBitrateChange:function(e,t){this.onBitrateChange(e,t)},onHlsError:function(e,t){if(t.fatal||"bufferAppendingError"==t.details)switch(this._retryLoadAttempts>2&&(t.type=o.ErrorTypes.OTHER_ERROR),this._retryLoadAttempts++,t.type){case o.ErrorTypes.MEDIA_ERROR:this._hlsPlayer.recoverMediaError();break;case o.ErrorTypes.NETWORK_ERROR:this._hlsPlayer.loadSource(this._videodata.hlsNoCaptions),this._hlsPlayer.startLoad();break;default:this.onVideoError(this._videodata.guid+" Fatal: "+t.fatal+" - "+t.details),this._hlsPlayer.destroy()}},setupTracking:function(){var e=this;this._account=this.getTrackingAccount();var t=u.va.MediaHeartbeat,n=u.va.MediaHeartbeatConfig,i=u.va.MediaHeartbeatDelegate,r=y.getInstance("CB68E4BA55144CAA0A4C98A5@AdobeOrg",{trackingServer:"om.dowjoneson.com",trackingServerSecure:"oms.dowjoneson.com",marketingCloudServer:"om.dowjoneson.com",marketingCloudServerSecure:"oms.dowjoneson.com"});svid=m(this._account),svid.visitor=r,svid.expectSupplementalData=!1,this._appMeasurement=new S,this._appMeasurement.visitor=r,this._appMeasurement.trackingServer=svid.trackingServer="om.dowjoneson.com",this._appMeasurement.trackingServerSecure=svid.trackingServerSecure="oms.dowjoneson.com",this._appMeasurement.account=this._account,this._appMeasurement.expectSupplementalData=!1,this._mediaHeartbeatConfig=new n,this._mediaHeartbeatConfig.trackingServer="dowjones.hb.omtrdc.net",this._mediaHeartbeatConfig.playerName="Web",this._settings.fireTv&&(this._mediaHeartbeatConfig.playerName="Amazon Fire TV"),this._mediaHeartbeatConfig.channel=this.getChannel(),this._mediaHeartbeatConfig.debugLogging=!1,this._mediaHeartbeatConfig.appVersion="v "+this._version,this._mediaHeartbeatConfig.ssl=!0,this._mediaHeartbeatConfig.ovp="Custom Html Player",this._appMeasurement.pageName=this.getPageName(),this._mediaHeartbeatDelegate=new i,this._mediaHeartbeatDelegate.getCurrentPlaybackTime=function(){return e._currentTime},this._mediaHeartbeatDelegate.getQoSObject=function(){var n=e.getQOSData();return t.createQoSObject(n.bitrate,n.startuptime,n.fps,n.droppedframes)},this._mediaHeartbeat=new t(this._mediaHeartbeatDelegate,this._mediaHeartbeatConfig,this._appMeasurement);var a=this._convivaTestMode?this.getTestingSystemSettings():this.getProductionSystemSettings(),o=new Conviva.SystemInterface(new d.Html5Time,new d.Html5Timer,new d.Html5Http,new d.Html5Storage,new d.Html5Metadata,new d.Html5Logging);if(this._convivaSystemFactory=new Conviva.SystemFactory(o,a),this._convivaTestMode)(s=new Conviva.ClientSettings(this._convivaTestCustomerKey)).gatewayUrl=this._convivaServiceURL;else var s=new Conviva.ClientSettings(this._convivaProdCustomerKey);this._convivaClient=new Conviva.Client(s,this._convivaSystemFactory),this._settings.trackInView&&this.trackInView()},getTrackingAccount:function(){var e="djglobal";try{-1!==(window.location!=window.parent.location?document.referrer:document.location.href).indexOf("mansionglobal.com")&&(e="djmansionglobal")}catch(e){}return e},onCCSelected:function(e,t,n){var i,r=this;if(n&&(this._langSelected=e,document.cookie="djvideolang="+this._langSelected+"; path=/"),this._videodata){var a=""===e?"CC OFF":"CC ON "+e;svid.linkTrackVars="contextData.a.media.friendlyName,contextData.a.media.name,contextData.video.closed.captioning,contextData.action,eVar15",svid.contextData["a.media.friendlyName"]=this._videodata.name,svid.contextData["a.media.name"]=this._videodata.guid,svid.contextData["video.closed.captioning"]=a,svid.contextData.action="video.closed.captioned",svid.eVar15=a,svid.tl(!0,"o",""===e?"heartbeat_video closed captioned off":"heartbeat_video closed captioned on")}for(;this._video.firstChild;)this._video.removeChild(this._video.firstChild);(i=document.createElement("track")).kind="subtitles",i.label="English",i.srclang="en",i.mode="showing",this._video.appendChild(i),this._video.tTrack=i,i.addEventListener("load",(function(){this.mode="showing";try{r._video.textTracks[0].mode="showing"}catch(e){}try{var e=r._video.textTracks[0].cues;for(v in e)"auto"==e[v].line&&(e[v].line=-5)}catch(e){}})),i.addEventListener("error",(function(e,t){console.log("Captions failed to load.")}));try{this._video.textTracks[0].mode="showing"}catch(e){}i.src=t,this.onCloseCC()},loadCaptions:function(){var e=this;for(this._availableCaptions=[];this._video.firstChild;)this._video.removeChild(this._video.firstChild);this._ccBtn&&(this._ccBtn.style.display="none"),this._videodata.forceClosedCaptions?""==this._langSelected&&(this._langSelected="English"):this._langSelected=T.getCookie("djvideolang");var t=function(t,n){e._ccBtn&&(e._ccBtn.style.display="block");var i={id:n.url,lang:n.label};e._availableCaptions.push(i),e._availableCaptions.length<2&&""!=e._langSelected&&(e._ccBtn.innerHTML=e._graphics["cc-active"]),i.lang==e._langSelected&&e.onCCSelected(i.lang,i.id,!1)},n=function(e,t){console.log("Captions failed to load.")};if(this._videodata.captionsVTT)for(var i=this._videodata.captionsVTT,r=0;r<i.length;r++)this._ajax.get(i[r].url,t,n,i[r])},eVidoraShownList:function(e){for(gid in e)try{this._settings.hasCMPConsent&&window.vidora.push(["send","shown",e[gid]])}catch(e){}},waitForAd:function(){var e=this;return new Promise((function(t,n){var i=e._store.getState().adInitState;if(i!==M.STARTED||e._adInitUnsubscribe)i===M.FAILED?n():t();else{e._adInitUnsubscribe=e._store.subscribe((function(){var i=e._store.getState().adInitState;i!==M.STARTED&&(e._adInitUnsubscribe(),e._adInitUnsubscribe=null,i===M.FINISHED?t():n())}))}}))},startAd:function(){this._actions.startAdMode(),this._adsManager.start()},startVideo:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.fetchAds,i=void 0!==n&&n;if("future"!=this._videodata.state){var r=this._store.getState(),a=r.adInitState,o=r.isAdsBlocked;this._settings.adsEnabled&&!o&&i&&(a===M.FINISHED?this.requestAds(!1):this.initAds()),this.createNewConvivaSession();var s=this;if(this._playRequested=!0,this._controls&&(this._controls.style.display="block"),this._isIE&&("live"==this._videodata.state||"processing"==this._videodata.state)&&(this._controls.style.display="none",!this._flashInit))return this._actions.hideLoadingSpinner(),this._flashContainer.innerHTML='<object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" codebase="" id="flash'+this._videoId+'" width="100%" height="100%"><param name="movie"  value="'+this._settings.api+'player/v3/flashlsChromeless.swf?inline=1" /><param name="quality" value="autohigh" /><param name="swliveconnect" value="true" /><param name="allowScriptAccess" value="always" /><param name="bgcolor" value="#0" /><param name="allowFullScreen" value="false" /><param name="wmode" value="opaque" /><param name="FlashVars" value="callback=flashlsCallback'+this._videoId+'" /><embed src="'+this._settings.api+'player/v3/flashlsChromeless.swf?inline=1" width="100%" height="100%" style="position:absolute; z-index:1;" name="flash'+this._videoId+'" quality="autohigh" bgcolor="#0" align="middle" allowFullScreen="false" allowScriptAccess="always" type="application/x-shockwave-flash" swliveconnect="true" wmode="opaque" FlashVars="callback=flashlsCallback'+this._videoId+'" pluginspage="https://www.macromedia.com/go/getflashplayer" ></embed></object><div class="getFlash"><strong>Live video is not supported on IE wihtout Flash enabled.</strong><p>Install and enable Flash or use Chrome / Firefox</p><p><a href="https://get.adobe.com/flashplayer/">Get Flash Player</a></p></div>',void(this._flashContainer.style.display="block");if("live"==this._videodata.state&&this._controls&&(this._shareBtn.style.display="none",this._ccBtn.style.display="none"),this.setVideoSource(),this.setupListeners(!0),this._video.load(),"muted"==s._settings.autoplay&&(s._video.volume=0,s._video.muted=!0,s._actions.mute(),s.onMuteUnMute(this)),s._settings.adsEnabled&&!o&&s._adDisplayContainer.initialize(),"vr"==this._videodata.format){if(!(this._isIE||this._isSafariMac&&window==window.top))return this.initVrPlayback(this._vrWrapper),void console.log("Loading VR Libs..");this.displayVrMsg()}else this._vrWrapper.style.display="none";this._sizeTimer||(this._sizeTimer=setInterval((function(){s.checkStatus()}),500)),o&&this.onAdError(null),s._actions.hideThumbnail(),s._video.autoplay="autoplay",s._actions.startVideoPlaybackInit(),s._video.style.display="none";var l=null!==(e=s._video.play())&&void 0!==e?e:Promise.resolve();l.then((function(){s._settings.autoplay&&void 0===s._autoplayed&&(s._autoplayed=!0),s.onNewVideo(),!s._settings.adsEnabled||o||s._settings.clickForSound||"1"===s._videodata.catastrophic||"catastrophic"===s._videodata.adCategory||!1===s._videodata.adsAllowed||!1!==s._store.getState().imaAdErrorState?(s._actions.endVideoPlaybackInit(),s._actions.setAdError(!1),s._video.style.display="block"):(s._adDisplayContainer.initialize(),s._video.pause(),s.waitForAd().then((function(){return s.startAd()})).catch((function(){s._actions.endVideoPlaybackInit(),s._actions.setAdError(!1),s._video.style.display="block",s._video.play()})))})).catch((function(e){"AbortError"!=e.name&&(s._actions.endVideoPlaybackInit(),s._autoplayed=!1,"NotSupportedError"==e.name?s.onVideoError():s.setupThumbnail())}));try{this._comscoreTag.stop(),this._comscoreTag.playContentPart(this._comscoreMeta)}catch(e){}}},setVideoSource:function(){var e=this;if(this._flash)return this._video.setAttribute("src",""),void this._flash.playerLoad(this._videodata.hlsNoCaptions);if(this._hlsAvailable=!1,this._isSafariMac&&"vr"==this._videodata.format){var t=this._videodata.videoMP4List[3].url.replace(/^https?\:\/\//i,"");this._video.setAttribute("src","//"+window.location.hostname+"/"+t)}else if(this._iOS||this._settings.fireTv||this._isSafariMac)-1!==this._settings.startPosition?this._video.setAttribute("src",this._videodata.hlsNoCaptions+"#t="+this._settings.startPosition):this._video.setAttribute("src",this._videodata.hlsNoCaptions),this._settings.startPosition=-1;else if(this._settings.useHLS)if(this._hlsPlayer){this._hlsPlayer.on(o.Events.MEDIA_DETACHED,(function t(){e._hlsPlayer.off(o.Events.MEDIA_DETACHED,t),e._video.src=e._videodata.hlsNoCaptions,e._hlsPlayer=new o(e.hlsConfig),e.addHLSEventListeners(),e._hlsPlayer.attachMedia(e._video)})),this._hlsPlayer.destroy()}else this.hlsConfig.startPosition=this._settings.startPosition,this._hlsPlayer=new o(this.hlsConfig),this._settings.startPosition=-1,this.addHLSEventListeners(),this._hlsPlayer.attachMedia(this._video);else this._videodata.video664kMP4Url?this._video.setAttribute("src",this._videodata.video664kMP4Url):this._videodata.videoMP4List[2]?this._video.setAttribute("src",this._videodata.videoMP4List[2].url):this._video.setAttribute("src",this._videodata.videoMP4List[0].url);this.onResize()},getQOSData:function(){var e={};if(this._hlsPlayer){if(-1!=this._hlsPlayer.currentLevel)e={bitrate:this._hlsPlayer.levelController._levels[this._hlsPlayer.currentLevel].bitrate,startuptime:this._startupTime,fps:30,droppedframes:this._hlsDroppedFrames}}else if(this._video.videoWidth){var t=[{w:416,b:464},{w:640,b:1264},{w:960,b:1864},{w:1280,b:2564},{w:1920,b:5064}],n=0;for(var i in t)t[i].w<=this._video.videoWidth&&(n=t[i].b);e={bitrate:n,startuptime:this._startupTime,fps:30,droppedframes:0}}return e},convivaClientMeasureInterface:function(e){this.getPHT=function(){return parseInt(e._currentTime)},this.getBufferLength=function(){return e._video.buffered.length},this.getSignalStrength=function(){return 1e3},this.getRenderedFrameRate=function(){return 30}},onLiveStateChanged:function(e){this._videodata.state=e,this._actions.updateVideoData(this._videodata),this.initVideo(),this.trigger(this._wrapper,"onLiveStateChanged",this._videodata)},trackAdsDisabled:function(e,t){var n=u.va.MediaHeartbeat,i=n.createAdBreakObject("pre-roll",1,0),r={"ad.blank.start":"false","a.media.ad.podFriendlyName":"pre-roll","ad.catastrophic.blocker":e,"ad.disabled":"true"},a=n.createAdObject("Catastrophic","Catastrophic",1,0),o={};o[n.AdMetadataKeys.ADVERTISER]="",o[n.AdMetadataKeys.CAMPAIGN_ID]="",a.setValue(n.MediaObjectKey.StandardAdMetadata,o),this._mediaHeartbeat.trackError("Ad_catastrophic: "+e),this._mediaHeartbeat.trackEvent(n.Event.AdBreakStart,i),this._mediaHeartbeat.trackEvent(n.Event.AdStart,a,r),this._mediaHeartbeat.trackEvent(n.Event.AdComplete),this._mediaHeartbeat.trackEvent(n.Event.AdBreakComplete)},checkStatus:function(){this._controls&&this._wrapper.parentElement&&this._wrapper.parentElement.querySelector(":hover")!==this._wrapper&&(this.onCloseCC(),this.onCloseBit())},loadVideo:function(e){var t=this;return new Promise((function(n,i){var r=t._settings.useHttps?"&https=1":"";try{var a=t._self;t._video.pause(),t._actions.setVideoApiLoadState(M.STARTED),t._adsManager&&t._adsManager.stop();var o=function(t){var r=JSON.parse(t);a._videodata=r.items&&r.items[0]||r[0],a._actions.updateVideoData(a._videodata);try{a._settings.guid=a._videodata.guid}catch(e){}a._settings.msrc&&(a._videodata.msrc=a._settings.msrc),a._videodata.error?(a.showError(a._videodata.error),a.onVideoError(a._videodata.error),a._actions.setVideoApiLoadState(M.FAILED),i(a._videodata.error)):(a._actions.setVideoApiLoadState(M.FINISHED),e?a.startVideo({fetchAds:!0}):a.initVideo(),n())},s=function(e){a.showError(""),a.onVideoError("guid load error"),a._actions.setVideoApiLoadState(M.FAILED),i(new Error("guid load error"))}}catch(e){}t._ajax.get(t._settings.guid?t._settings.useAllesseh?"".concat(t._settings.api2,"media?type=guid&query=").concat(t._settings.guid,"&").concat(t._fields,"&allesseh=1"):"".concat(t._settings.api2,"legacy/find-all-videos?type=guid&count=1&https=1&query=").concat(t._settings.guid,"&").concat(t._fields):""!==t._settings.type&&""!==t._settings.query?""!==t._settings.groupId?t._settings.api+"find_all_videos.asp?type="+t._settings.type+"&count=1"+r+"&query="+t._settings.query+"&"+t._fields:t._settings.api+"find_all_videos.asp?type="+t._settings.type+"&count=1"+r+"&query="+t._settings.query+"&"+t._fields+"&groupid="+t._settings.groupId:void 0,o,s,null)}))},getAdTag:function(e){var t=new google.ima.AdsRequest;if(this._settings.adTag)t.adTagUrl=this._settings.adTag;else{var n=[];""!=this._settings.site&&void 0!==this._settings.site?n.site=this._settings.site:n.site="video.wsj.com",this._settings.plid?n.plid=this._settings.plid:this._videodata.plid?n.plid=this._videodata.plid:n.plid="video_articleembed",n.gptParams=this._videodata.gptCustParams,this._settings.lnid&&(n.gptParams=n.gptParams.replace(/lnid.*%26/,"lnid%3D"+this._settings.lnid+"%26")),n.gptParams+="string"==typeof this.getParameterByName("mod")?"%26mod%3D"+this.getParameterByName("mod"):"",n.gptParams+=this.getAdData();var i="%26sub%3Dno";try{T.getCookie("REMOTE_USER")&&(i="%26sub%3Dyes")}catch(e){}var r="";this._settings.msrc&&(r="%26msrc%3D"+this._settings.msrc);var a="Cheddar"==this._videodata.column?"/Cheddar":"",o=((new Date).getTime(),encodeURIComponent(this._videodata.linkURL)),s="&vpos=preroll";e&&(s="&vpos=midroll",n.gptParams+="%26mrtimeindex%3D"+parseInt(this._currentTime)),t.adTagUrl="https://pubads.g.doubleclick.net/gampad/ads?sz=4x4&gdfp_req=1&iu=/2/"+n.site+a+"&ciu_szs=300x50,300x600,300x250&url=[referrer_url]&correlator=[timestamp]&env=vp&unviewed_position_start=1&output=vast&description_url="+o+"&impl=s&hl=en"+s+"&cust_params="+n.gptParams+r+"%26adview%3D"+this._adPlayNumber+i+"%26flash%3Dno%26plid%3D"+n.plid}return"muted"==this._settings.autoplay&&(t.setAdWillAutoPlay(!0),t.setAdWillPlayMuted(!0)),t.adType="video",t},getParameterByName:function(e,t){t||(t=window.location.href),e=e.replace(/[\[\]]/g,"\\$&");var n=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(t);return n?n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):"":null},getThumbnail:function(){return this._settings.thumb?this._settings.thumb:this._videodata.thumbnailList?T.pickBestThumbnail(this._videodata.thumbnailList,this._width,this._height):this._videodata.thumbnailURL},setupThumbnail:function(e){this._store.getState().isThumbnailVisible||this._actions.showThumbnail(),this._playOverlay&&(this._playOverlay.style.display="none"),this.onResize()},showError:function(e){this._wrapper.innerHTML='<div class="videoErrorMsg"><div>We are sorry, we are unable to load this video.<br />'+e+"</div></div>"},requestAds:function(e){var t=this.getAdTag(e);this._adTagUsed=t.adTagUrl,t.linearAdSlotWidth=this._width,t.linearAdSlotHeight=this._height-40,t.nonLinearAdSlotWidth=this._width,t.nonLinearAdSlotHeight=this._height-40,this._adsLoader.requestAds(t),this.startAdTimeoutTimer(),this.trigger(this._wrapper,"adRequested"),this._actions.setAdInitState(M.STARTED)},onAdsManagerLoaded:function(e){var t=this;if(this._actions.setAdInitState(M.FINISHED),this._adTimeoutTimer&&(clearInterval(this._adTimeoutTimer),1==this._adTimeoutFail))this._adTimeoutFail=!1;else{var n=new google.ima.AdsRenderingSettings;n.enablePreloading=!0,n.loadVideoTimeout=5e3,n.mimeTypes=["video/mp4"],n.restoreCustomPlaybackStateOnAdBreakComplete=!0,n.uiElements=[google.ima.UiElements.AD_ATTRIBUTION],this._adsManager=e.getAdsManager(this._video,n),this._store.getState().isMuted?this._adsManager.setVolume(0):this._adsManager.setVolume(this._volume),this._adsManager.setVolume(0),this.addListeners();var i={adsManager:this._adsManager,reduxStore:this._store,onAdDisconnect:function(){console.warn("Ad disconnect"),t._adsManager.destroy(),t._adsLoader.destroy(),t._adDisplayContainer.destroy(),t.onAdRemoved(),t._video.play(),t.initAds()}};this._adHealthObserver=new k(i),this._adsManager.init(this._width,this._height,google.ima.ViewMode.NORMAL)}},onBuffering:function(e){var t=this;t._mediaHeartbeat||(t=t.scope),t._store.getState().isBuffering||t._actions.buffering(),"stalled"==e.type&&(t._isStalled=!0,t._mediaHeartbeat.trackEvent(u.va.MediaHeartbeat.Event.BufferStart))},onAdBuffering:function(e){this._actions.adBuffering(),this._convivaAdStateManager&&this._convivaAdStateManager.setPlayerState(Conviva.PlayerStateManager.PlayerState.BUFFERING)},onVideoResize:function(e){if(this._convivaPlayerStateManager){var t=this.getQOSData();t.bitrate&&this._convivaPlayerStateManager.setBitrateKbps(t.bitrate)}},onProgress:function(e){if(this.scope||(this.scope=this),this.scope._isStalled&&this.scope._mediaHeartbeat.trackEvent(u.va.MediaHeartbeat.Event.BufferComplete),this.scope._isStalled=!1,!this.scope._store.getState().isAdMode){this.scope._store.getState().isBuffering&&4===this.readyState&&this.scope._actions.canPlay();var t=this.scope._store.getState().duration,n=this.scope._video.currentTime;this.scope._flash&&(t=e.duration,n=e.position),this.scope._currentTime=n;var r=this.scope._currentTime/t*100;if(this.scope.trackProgress(r,this.scope._currentTime),this.scope._actions.updateProgress(this.scope._currentTime),("live"==this.scope._videodata.state||"flive"==this.scope._videodata.state)&&this.scope._controls)return this.scope._shareBtn.style.display="none",void(this.scope._ccBtn.style.display="none");for(i in this.scope._midRolls)if(this.scope._currentTime>=this.scope._midRolls[i]){this.scope._midRolls.splice(i,1),this.scope._midrollRequested||(this.scope._midrollRequested=!0,this.scope.requestAds(!0),this.scope.createAdLoadingScreen());break}}},generateMidrollMarkers:function(){var e=this._store.getState().duration;for(i in this._midRolls){var t=parseInt(this._midRolls[i]/e*this._width);this._adMarkerContainer.insertAdjacentHTML("afterbegin",'<div class="ad-midroll-marker" style="left:'+t+'px;" data-adTime="'+this._midRolls[i]+'"></div>')}},createAdLoadingScreen:function(){this._adContainer.insertAdjacentHTML("beforeBegin",'<div class="ad-loading-screen" id="ad-loading-screen-'+this._videoId+'"><div class="video-loading"><div class="video-loading-inner"></div></div><span>Advertisement loading.  Please Wait.</span></div>'),this._adLoadingScreen=document.getElementById("ad-loading-screen-"+this._videoId)},onLoadedMetadata:function(e){this.onDurationChange(e),-1!==this._settings.startPosition&&(this._video.currentTime=this._settings.startPosition,this._settings.startPosition=-1)},onDurationChange:function(e){this._video.duration>0&&this._video.duration!==this._store.getState().duration&&this._actions.updateDuration(this._video.duration)},createNewConvivaSession:function(){if(null!==this._convivaContentSessionKey&&(this._convivaClient.cleanupSession(this._convivaContentSessionKey),this._convivaContentSessionKey=null),this._convivaPlayerStateManager?this._convivaPlayerStateManager.reset():this._convivaPlayerStateManager=this._convivaClient.getPlayerStateManager(),this.setConvivaMetaData(),this._convivaContentSessionKey=this._convivaClient.createSession(this._convivaContentMetadata),this._convivaPlayerStateManager){this._convivaPlayerStateManager.setPlayerType("Universal Player"),this._convivaPlayerStateManager.setPlayerVersion(this._version);var e=this.getQOSData();this._convivaPlayerStateManager.setBitrateKbps(Math.round(parseInt(e.bitrate)/1e3))}this._convivaHtml5PlayerInterface=new d.Html5PlayerInterface(this._convivaPlayerStateManager,this._video,this._convivaSystemFactory);var t=new this.convivaClientMeasureInterface(this);this._convivaPlayerStateManager.setClientMeasureInterface(t)},onNewVideo:function(){if(this._contentStartTracked&&this._mediaHeartbeat&&this._mediaHeartbeat.trackSessionEnd(),this._completeCalled=!1,this._contentStartTracked=!1,this._sessionStarted=!1,this._contentInitialized=!0,this._adErrorTracked=!1,this._adStarted=!1,this._retryLoadAttempts=0,this.trigger(this._wrapper,"newVideo",this._videodata),this.trigger(this._wrapper,"onNewVideo",this._videodata),this.trackInit(),"1"===this._videodata.catastrophic&&(this._adContainer.style.display="none",this._video.style.display="block"),"string"==typeof this._videodata.chapterTimes&&this._videodata.chapterTimes.length>0&&this._settings.adsEnabled){var e=this._videodata.chapterTimes.split(",");for(i in e)this._midRolls[i]=parseInt(e[i]);this.generateMidrollMarkers()}!1!==this._adErrorEvent&&(this._adErrorEvent=!1,this.onAdError(this._adErrorEvent)),this._trackingMilestones=[!1,!1,!1,!1],this._pingMilestone=-1,this._settings.thumb=!1,this._controls&&(this._controls.hideTime=0,T.emptyElement(this._adMarkerContainer)),this._settings.enableCaptions&&!this._flash?this.loadCaptions():this._ccBtn&&(this._ccBtn.style.display="none")},setupListeners:function(e){this._video.removeEventListener("durationchange",this.onDurationChange.bind(this)),this._video.removeEventListener("loadedmetadata",this.onLoadedMetadata.bind(this)),this._video.removeEventListener("timeupdate",this.onProgress),this._video.removeEventListener("error ",this.onVideoError),this._video.removeEventListener("waiting",this.onBuffering),this._video.removeEventListener("playing",this.onPlaying),this._video.removeEventListener("play",this.onPlay),this._video.removeEventListener("canplay",this.onCanPlay),this._video.removeEventListener("canplaythrough",this.onCanPlay),this._video.removeEventListener("pause",this.onPaused),this._video.removeEventListener("ended",this.onVideoComplete),this._video.removeEventListener("resize",this.onVideoResize),window.document.removeEventListener("visibilitychange",this.onVisibilityChanged.bind(this)),this._isMobile?this._video.addEventListener("resize",this.onVideoResize):(this._wrapper.addEventListener("mouseleave",this.onRollOut),this._wrapper.addEventListener("mousemove",this.onMouseMove)),e&&(this._video.addEventListener("durationchange",this.onDurationChange.bind(this)),this._video.addEventListener("loadedmetadata",this.onLoadedMetadata.bind(this)),this._video.addEventListener("timeupdate",this.onProgress),this._video.addEventListener("error ",this.onVideoError),this._video.addEventListener("waiting",this.onBuffering),this._video.addEventListener("playing",this.onPlaying),this._video.addEventListener("play",this.onPlay),this._video.addEventListener("pause",this.onPaused),this._video.addEventListener("ended",this.onVideoComplete),this._video.addEventListener("canplay",this.onCanPlay),this._video.addEventListener("canplaythrough",this.onCanPlay),window.document.addEventListener("visibilitychange",this.onVisibilityChanged.bind(this)))},videoClickEvent:function(e){this.scope._settings.startFullScreen&&!this.scope._isFullScreen&&this.scope._isAndroid&&this.scope.toggleFullScreen(),this.scope.playPause(e)},addUserEventListeners:function(){var e=this;e._container.onkeyup=function(e){switch((e=e||window.event).keyCode){case 27:this.onEscapeKey();break;case 37:this.onLeftKey();break;case 39:this.onRightKey();break;case 32:this.playPause()}}.bind(this),this._shareBtn.addEventListener("click",(function(t){e.showSharing(t)})),this._controls&&(this._isMobile?(this._video.addEventListener("click",this.mobileClick.bind(this),!1),this._adContainer.addEventListener("click touchstart touchmove touchend",this.mobileAdContainerClick.bind(this),!1)):(this._iOS&&this._adContainer.addEventListener("click touchstart touchmove touchend",this.mobileAdContainerClick.bind(this),!1),this._video.addEventListener("click",this.videoClickEvent,!1))),this._volumeSlider._dragging=!1,this._volumeSlider.addEventListener("mousedown",(function(t){e.onVolumeInteraction(t,this)})),this._volumeSlider.addEventListener("mouseup",(function(e){this._dragging=!1})),this._volumeSlider.addEventListener("mouseleave",(function(e){this._dragging=!1})),this._volumeSlider.addEventListener("mousemove",(function(t){this._dragging&&e.onVolumeInteraction(t,this)})),this._container.addEventListener("onMuteUnMute",(function(t){e.onMuteUnMute(e)})),this._ccBtn.addEventListener("click",(function(t){e.onCC(e)})),this._bitBtn.addEventListener("click",(function(t){e.onBit(e)})),this._adsSkipButton.addEventListener("click",(function(t){e._skipAvailable&&e.skipAd()})),this._adContainer.addEventListener("click",(function(t){return e._settings.startFullScreen&&!e._isFullScreen&&e._isAndroid&&e.toggleFullScreen(),!1}));try{document.addEventListener(f.raw.fullscreenchange,(function(){e.onResize()}))}catch(e){}},mobileClick:function(e){this._controls&&(this._store.getState().isControlsVisible?(this.playPause(),this._actions.hideControls()):this.showControls(3e3))},mobileAdContainerClick:function(e){return e.preventDefault(),!1},onVolumeInteraction:function(e,t){var n=t.getBoundingClientRect(),i=(e.pageX-n.left)/t.offsetWidth;this.setVolume(i,!0),t._dragging=!0},onCloseCC:function(){this._ccList.active=!1,this._ccList.style.maxHeight="0",this._ccList.innerHTML=""},onCC:function(e){if(this._availableCaptions.length>1){if(this.onCloseBit(),this._ccList.active)return void this.onCloseCC();this._ccList.active=!0;var t=this;this._ccList.innerHTML="";var n='<ul class="ccList">',r="";for(""==this._langSelected&&(r="selected"),n+='<li class="captionBtn '+r+'"><a data-lang="" data-id="" class="clink">No Captions</a></li>',i=0;i<this._availableCaptions.length;i++)r="",this._langSelected==this._availableCaptions[i].lang&&(r="selected"),n+='<li class="captionBtn '+r+'"><a data-lang="'+this._availableCaptions[i].lang+'" data-id="'+this._availableCaptions[i].id+'" class="clink">'+this._availableCaptions[i].lang+"</a></li>";n+="</ul>",this._ccList.innerHTML=n,this._ccList.style.maxHeight=30*this._availableCaptions.length+30+"px",this._ccList.hasListener||(this._ccList.hasListener=!0,this._ccList.addEventListener("click",(function(e){e.target.classList.contains("clink")&&t.onCCSelected(e.target.getAttribute("data-lang"),e.target.getAttribute("data-id"),!0)})))}else""!=this._langSelected?(this._ccBtn.style.opacity=.8,this.onCCSelected("","",!0),this._ccBtn.innerHTML=this._graphics.cc):(this._ccBtn.style.opacity=1,this.onCCSelected(this._availableCaptions[0].lang,this._availableCaptions[0].id,!0),this._ccBtn.innerHTML=this._graphics["cc-active"])},onBit:function(e){if(this.onCloseCC(),this._bitList.active)this.onCloseBit();else{this._bitList.active=!0;var t=this,n=this._videodata.videoMP4List;this._bitList.innerHTML="";var r='<ul class="bitList">',a="";for(""==this._selectedBitrate&&(a="selected"),i=0;i<n.length;i++)a="",this._selectedBitrate==n[i].bitrate&&(a="selected"),r+='<li class="bitrateBtn '+a+'"><a data-bit="'+n[i].bitrate+'" class="clink">'+n[i].bitrate+"kbs</a></li>";r+="</ul>",this._bitList.innerHTML=r,this._bitList.style.maxHeight=30*n.length+30+"px",this._bitList.addEventListener("click",(function(e){e.target.classList.contains("clink")&&t.onBitSelected(e.target.getAttribute("data-bit"))}))}},onCloseBit:function(){this._bitList.active=!1,this._bitList.style.maxHeight="0",this._bitList.innerHTML=""},onBitSelected:function(e){if(""!=e){this._selectedBitrate=e,document.cookie="djvideobit="+this._selectedBitrate+"; path=/";for(var t,n=this._videodata.videoMP4List,i=0;i<n.length;i++)if(n[i].bitrate==e){t=n[i];break}if(this._video.getAttribute("src").split("#t=")[0]!=t.url){var r=this._video.paused;this._video.setAttribute("src",t.url+"#t="+Math.round(this._currentTime)),r||(this._video.play(),this._actions.showLoadingSpinner())}}this.onCloseBit()},onEscapeKey:function(e){this._shareScreen&&this.showHideShareScreen(!1)},onLeftKey:function(e){this.eSeek(this._video.currentTime-10)},onRightKey:function(e){this.eSeek(this._video.currentTime+10)},onSpaceBarKey:function(e){this.playPause()},onPlay:function(){this.scope._actions.playVideo()},onCanPlay:function(){this.scope._store.getState().isBuffering&&this.scope._actions.canPlay()},showControls:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;clearTimeout(this._hideControlsTimer);var n=this._store.getState(),i=n.isControlsVisible,r=n.isCountdownVisible,a=n.isClickForSoundVisible;i||r||a||this._actions.showControls();var o=function(){var t=e._store.getState(),n=t.isPlaying,i=t.isAdMode,r=t.isAdPlaying;!n||i&&!r||(e._actions.hideControls(),e._wrapper.classList.add("nocursor"))};0!==t?this._hideControlsTimer=setTimeout(o,t):o()},onMouseMove:function(e){this.scope.showControls(3e3),this.scope._wrapper.classList.remove("nocursor")},onRollOut:function(e){clearTimeout(this.scope._hideControlsTimer);var t=this.scope._store.getState(),n=t.isPlaying,i=t.isAdMode,r=t.isAdPlaying;(n||i&&r)&&this.scope._actions.hideControls()},onVideoComplete:function(e){try{this.scope._comscoreTag.stop()}catch(e){}this.scope._adsLoader&&this.scope._adsLoader.contentComplete(),this.scope._mediaHeartbeat&&this.scope._mediaHeartbeat.trackComplete(),this.scope.sendOptimizelyBeacon("complete"),this.scope._convivaClient&&(this.scope._convivaClient.cleanupSession(this.scope._convivaContentSessionKey),this.scope._convivaContentSessionKey=null,this.scope._convivaPlayerStateManager.reset()),this.scope.sendOptimizelyBeacon("complete");try{this._moatManager.dispatchEvent({type:"AdStopped",adVolume:this._volume})}catch(e){}this.scope._store.getState().isAdMode||(this.scope._settings.chainVideos?(this.scope._video.pause(),this.scope._iOS&&this.scope._video.webkitExitFullScreen(),this.scope.chainVideo()):this.scope._settings.resetOnComplete?(this.scope.setupThumbnail(),this.scope._iOS&&this.scope._video.webkitExitFullScreen(),this.scope._contentInitialized=!1):(this.scope._video.currentTime=0,this.scope._video.pause())),this.scope.trigger(this.scope._wrapper,"videoComplete",{guid:this.scope._videodata.guid}),this.scope.trigger(this.scope._wrapper,"onVideoComplete",{guid:this.scope._videodata.guid})},chainVideo:function(){var e=this;this._isChained=!0;var t=this._store.getState().playlist;t.length>0?(this._videodata=t[0],this._settings.guid=this._videodata.guid,this._settings.disableChainPlay?this.trigger(this._wrapper,"onSuggestionPlay",this._videodata):this.loadVideo(!0).then(this._actions.dequeuePlaylist).catch(console.error)):T.getNewPlaylist(this._settings.api,this._settings,this._store.getState().videoData,this._fields).then((function(t){t&&t.length>0&&(e._actions.replacePlaylist(t),e.chainVideo())})).catch(console.error)},onVisibilityChanged:function(e){this._isMobile&&("hidden"==window.document.visibilityState&&this._convivaContentSessionKey!==Conviva.Client.NO_SESSION_KEY&&null!==this._convivaContentSessionKey?(this._convivaClient.cleanupSession(this._convivaContentSessionKey),this._convivaContentSessionKey=null):"visible"==window.document.visibilityState&&null==this._convivaContentSessionKey&&this._contentInitialized&&this._convivaContentSessionKey&&(this._convivaContentSessionKey=this._convivaClient.createSession(this._convivaContentMetadata),this._convivaPlayerStateManager.reset(),this._convivaClient.isPlayerAttached(this._convivaContentSessionKey)||this._convivaClient.attachPlayer(this._convivaContentSessionKey,this._convivaPlayerStateManager)))},onPlaying:function(e){if("live"!==this.scope._store.getState().videoData.state&&this.scope._actions.updateDuration(this.duration),this.scope._actions.playVideo(),this.scope._isStalled=!1,!this.scope._playRequested)return this.scope._video.pause(),void(this.scope._playRequested=!0);this.scope._controls&&this.scope._isMobile&&this.scope.showControls(3e3),this.scope._playOverlay&&(this.scope._playOverlay.style.display="none"),this.scope._settings.startFullScreen&&!this.scope._isFullScreen&&this.scope.toggleFullScreen(),this.scope._isSeeking&&(this.scope._isSeeking=!1,this.scope._mediaHeartbeat&&this.scope._mediaHeartbeat.trackEvent(u.va.MediaHeartbeat.Event.SeekComplete),this.scope._convivaPlayerStateManager&&this.scope.debounce(this.scope._convivaPlayerStateManager.setPlayerSeekEnd(),100)),this.scope._contentStartTracked&&this.scope._mediaHeartbeat.trackPlay();try{this._comscoreTag.playContentPart(this._comscoreMeta)}catch(e){}try{this.scope.trigger(this.scope._wrapper,"onPlayerStateChange",{isPlaying:this.scope.eIsPlaying(),isFullscreen:this.scope._isFullScreen})}catch(e){}try{if(PARSELY){var t=window!=window.top?this.scope._videodata.linkURL:document.location.href;PARSELY.video.trackPlay(this.scope._videodata.guid,{title:this.scope._videodata.name,section:this.scope._tObject.eVar20,pub_date_tmsp:Date.now(),authors:this.scope._videodata.author.toString(),image_url:this.scope._videodata.videoStillURL,tags:[this.scope._tObject.eVar70,this.scope._store.getState().duration]},t)}}catch(e){}},onBitrateChange:function(e,t){try{var n,i;if(null===(n=this._hlsPlayer)||void 0===n||null===(i=n.levels)||void 0===i?void 0:i[t.level]){if(this._mediaHeartbeat&&this._sessionStarted){var r=this.getQOSData();this._mediaHeartbeat.trackEvent(u.va.MediaHeartbeat.Event.BitrateChange,r)}this._convivaPlayerStateManager&&this._convivaPlayerStateManager.setBitrateKbps(Math.round(parseInt(r.bitrate)/1e3))}}catch(e){}},onPageUnload:function(e,t){try{this._convivaClient.cleanupSession(this._convivaContentSessionKey),this._convivaClient.releasePlayerStateManager(playerStateManager)}catch(e){}},onPaused:function(e){this.scope||(this.scope=this),this.scope._actions.pauseVideo(),this.scope._controls&&this.scope._isMobile&&this.scope._actions.showControls(),this.scope._timePaused=new Date,this.scope._playOverlay&&(this.scope._playOverlay.style.display="block");try{this._comscoreTag.stop()}catch(e){}try{this.scope.trigger(this.scope._wrapper,"onPlayerStateChange",{isPlaying:this.scope.eIsPlaying(),isFullscreen:this.scope._isFullScreen})}catch(e){}try{if(PARSELY){var t=window!=window.top?this.scope._videodata.linkURL:document.location.href;PARSELY.video.trackPause(this.scope._videodata.guid,{title:this.scope._videodata.name,urlOverride:window.location!=window.parent.location?document.referrer:document.location.href,section:this.scope._tObject.eVar20,pub_date_tmsp:Date.now(),authors:this.scope._videodata.author.toString(),image_url:this.scope._videodata.videoStillURL,tags:[this.scope._tObject.eVar70,this.scope._store.getState().duration]},t)}}catch(e){}},onSeek:function(e){this._isSeeking=!0;var t=Math.round(this._store.getState().duration*e);this._convivaPlayerStateManager&&this.debounce(this._convivaPlayerStateManager.setPlayerSeekStart(t),100),this._actions.updateProgress(t),this._flash?this._flash.playerSeek(t):this._video.currentTime=t},onVideoError:function(e){this.displayErrorScreen("An error occurred.  Please try again later."),this._mediaHeartbeat&&("string"==typeof e?this._mediaHeartbeat.trackError("Content_"+e):this._mediaHeartbeat.trackError("Content_"+this._videodata.guid)),this._convivaClient&&null!==this._convivaContentSessionKey&&("string"!=typeof e&&(e="error: "+this._videodata.guid),this._convivaPlayerStateManager&&this._convivaPlayerStateManager.sendError("Playback Error: "+e,Conviva.Client.ErrorSeverity.FATAL),this._convivaClient.reportError(this._convivaContentSessionKey,e,Conviva.Client.ErrorSeverity.FATAL),this._convivaClient.cleanupSession(this._convivaContentSessionKey),this._convivaContentSessionKey=null)},displayErrorScreen:function(e){this._container.innerHTML='<div class="videoErrorMsg"><div>'.concat(e,"</div></div>")},updateBreakpointClass:function(){if(this._wrapper){var e=this._store.getState().currentBreakpoint;this._wrapper.classList.contains("player-".concat(e))||(this._wrapper.classList.remove("player-full"),this._wrapper.classList.remove("player-16U"),this._wrapper.classList.remove("player-12U"),this._wrapper.classList.remove("player-8U"),this._wrapper.classList.remove("player-4U"),this._wrapper.classList.remove("player-tiny"),this._wrapper.classList.add("player-".concat(e)))}},onResize:function(){this._height=this._wrapper.offsetHeight,this._width=this._wrapper.offsetWidth;var e=this._store.getState(),t=e.width,n=e.height;if(this._hlsPlayer&&this._hlsPlayer.levels){var i=0,r=this._hlsPlayer.currentLevel;if(this._height>=this._hlsPlayer.levels[this._hlsPlayer.levels.length-1].height&&this._width>=this._hlsPlayer.levels[this._hlsPlayer.levels.length-1].width)this._hlsPlayer.autoLevelCapping=-1;else for(l=0;l<this._hlsPlayer.levels.length;l++){var a=this._hlsPlayer.levels[l];if(this._height<=a.height&&this._width<=a.width){i=l,this._hlsPlayer.levels[l+1]&&this._hlsPlayer.levels[l+1].height==this._hlsPlayer.levels[l].height&&this._hlsPlayer.levels[l+1].width==this._hlsPlayer.levels[l].width&&(i=l+1),i!=r&&(this._hlsPlayer.autoLevelCapping=i);break}}}if(this._adContainer&&this._adsManager){var o=google.ima.ViewMode.NORMAL;f&&f.isFullscreen&&(o=google.ima.ViewMode.FULLSCREEN),this._adsManager.resize(this._width,this._height,o)}if(this._adMarkerContainer)for(var s=this._adMarkerContainer.firstChild;null!==s;s=s.nextSibling){var c=parseInt(s.getAttribute("data-adTime")),u=parseInt(c/this._store.getState().duration*this._width);s.style.left=u+"px"}this._width===t&&this._height===n||(this._actions.resize(this._width,this._height),this._controls&&(this._width<220?(this._timeDisplay.style.display="none",this._volumeSlider.style.display="none",this._volumeSlider.style.opacity="0",this._volumeBtn.style.width="auto"):(this._timeDisplay.style.display="inline-block",this._volumeSlider.style.removeProperty("display"),this._volumeSlider.style.removeProperty("opacity"),this._volumeBtn.style.width="120px")))},onScreenChange:function(e){var t;(t=this._iOS?this._video.webkitDisplayingFullscreen:f.isFullscreen)?this._actions.enterFullScreen():(this._actions.exitFullScreen(),this._store.getState().isMuted!==this._video.muted&&(this._video.muted?this._actions.mute():this._actions.unmute())),this._settings.startFullScreen&&(t?this._isAndroid&&(this._controls.style.display="block"):(this._adsManager&&(this._adsManager.pause(),this._adsSkipButton.style.display="none",this._actions.hideLoadingSpinner()),this._video.pause(),this._controls&&(this._controls.style.display="none",this._actions.hideLoadingSpinner(),this._video.controls=!1)));try{this.trigger(this._wrapper,"onPlayerStateChange",{isPlaying:this.eIsPlaying(),isFullscreen:t})}catch(e){}},onSaveChange:function(e){this._appMeasurement&&(svid.contextData["a.media.friendlyName"]=this._videodata.name,svid.contextData["a.media.name"]=this._videodata.guid,svid.contextData.action="video.save",svid.linkTrackVars="contextData.a.media.friendlyName,contextData.a.media.name,contextData.action",svid.tl(!0,"o",e?"video_save_add":"video_save_remove"))},muteUnMute:function(e,t,n){(null==e?!this._store.getState().isMuted:e)?(this._actions.mute(),this._flash&&this._flash.playerVolume(0),this._video.muted=!0,this._adsManager&&this._adsManager.setVolume(0),t&&(document.cookie="djvideomute=1; path=/")):(this._actions.unmute(),this._flash&&this._flash.playerVolume(100*parseFloat(this._volume)),this._video.muted=!1,this._video.volume=this._volume,this._adsManager&&this._adsManager.setVolume(this._volume),t&&(document.cookie="djvideomute=0; path=/"));var i=this._store.getState().isMuted;if(this._videodata&&n){svid.contextData["a.media.friendlyName"]=this._videodata.name,svid.contextData["a.media.name"]=this._videodata.guid,svid.contextData["video.mute"]=i?"Mute ON":"Mute OFF",svid.contextData.action="video.muted",svid.linkTrackVars="contextData.a.media.friendlyName,contextData.a.media.name,contextData.video.mute,contextData.action";var r=i?"heartbeat_video muted":"heartbeat_video unmuted";this._settings.clickForSound&&(r="heartbeat_tapped unmute"),svid.tl(!0,"o",r)}this.trigger(this._wrapper,"onMuteUnMute",{})},onMuteUnMute:function(e){e.showVolume()},setVolume:function(e,t){e=Math.min(Math.max(parseFloat(e),0),1),this._flash&&this._flash.playerVolume(100*parseFloat(this._volume)),this._adsManager&&this._adsManager.setVolume(e),this._volume=e,this._video.volume=e,this.showVolume(),t&&(this._volume=e,document.cookie="djvideovol="+e+"; path=/",document.cookie="djvideovol="+e+";",this._store.getState().isMuted&&this.muteUnMute(!1,!0,!0))},showPauseScreen:function(){var e=this.getShareLinkUrl(),t="";t+='<div class="video-pause-text"><div class="video-pause-title"  id="video-pause-title-'+this._videoId+'">'+this._videodata.name+'</div><div class="video-pause-description"  id="video-pause-title-'+this._videoId+'">'+this._videodata.description+'</div><div class="video-pause-share-icons"  id="video-share-icons-'+this._videoId+'"><ul class="share-buttons"><li><a href="https://www.facebook.com/sharer/sharer.php?u='+e+"&t="+this._videodata.name+'" title="Share on Facebook" target="_blank" id="sshare-fb-'+this._videoId+'" data-share="Facebook">'+this._graphics["share-fb"]+'</a></li><li><a href="https://twitter.com/intent/tweet?url='+e+"&text="+this._videodata.name+'" target="_blank" title="Tweet" id="sshare-twitter-'+this._videoId+'" data-share="Twitter">'+this._graphics["share-twitter"]+'</a></li><li><a href="mailto:?subject='+this._videodata.name+"&body=Description:"+e+'" target="_blank" title="Email" id="sshare-email-'+this._videoId+'" data-share="Email">'+this._graphics["share-email"]+'</a></li></ul></div></div><div class="video-pause-play-button"  id="video-pause-play-button-'+this._videoId+'"></div>',this._pauseScreen.innerHTML=t,this._pauseScreen.style.display="block"},hidePauseScreen:function(){this._pauseScreen.style.display="none",this._pauseScreen.innerHTML=""},playSuggestion:function(e){this._formatOverride="user initiated next",this._settings.disableChainPlay?this.trigger(this._wrapper,"onSuggestionPlay",e):this.ePlayVideo(e)},clickForSoundHandler:function(e){this.muteUnMute(!1,!0,!0),this.setVolume(this._volume,!1),this._settings.clickForSound=!1,this._controls&&(this._controls.style.display="block"),this._settings.adsEnabled&&this._adDisplayContainer.initialize(),this._actions.unmute(),this._settings.autoplay=!0},showVolume:function(){if(this._controls){var e=parseFloat(this._volume),t=this._volumeBG.offsetWidth;0==t&&(t=80),this._store.getState().isMuted&&(e=0),this._volumeSetting&&(this._volumeSetting.style.width=Math.round(t*e)+"px"),this._volumeHandle&&(this._volumeHandle.style.left=Math.round(t*e)+"px")}},getShareLinkUrl:function(){var e=window.location!=window.parent.location?document.referrer:document.location.href,t=this._videodata.linkURL;return null!==this._settings.shareDomain?t=this._settings.shareDomain+this._videodata.linkRelativeURL:-1!==e.indexOf("marketwatch.com")?(this._settings.shareDomain="http://www.marketwatch.com",shareSite="&site=video.marketwatch.com",t="http://www.marketwatch.com"+this._videodata.linkRelativeURL):-1!==e.indexOf("barrons.com")&&(this._settings.shareDomain="http://www.barrons.com",shareSite="&site=video.barrons.com",t="http://www.barrons.com"+this._videodata.linkRelativeURL),t},showHideShareScreen:function(e){try{if(e)this._shareScreen.classList.add("video-show-share"),document.getElementById("video-share-b-".concat(this._videoId)).style.opacity=1;else this._shareScreen.classList.remove("video-show-share"),document.getElementById("video-share-b-".concat(this._videoId)).style.opacity=.8,this._shareScreen.innerHTML=""}catch(e){}},showSharing:function(){if(this._shareScreen.classList.contains("video-show-share"))this.showHideShareScreen(!1);else{var e=this.getShareLinkUrl(),t=this._videodata,i=this._settings,r='\n            <div class="closeBtn" id="closeBtn-'.concat(this._videoId,'">\n            <?xml version="1.0" encoding="UTF-8"?><svg width="11px" height="11px" viewBox="0 0 21 21" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g id="Icons" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" fill-opacity="0.7"><g id="close" fill="#FFFFFF"><polygon id="Path" points="10.5 8.75 19.25 0 21 1.75 12.25 10.5 21 19.25 19.25 21 10.5 12.25 1.75 21 0 19.25 8.75 10.5 0 1.75 1.75 1.51121399e-15"></polygon></g></g></svg>\n            </div>\n            <span id="copy-to-clipboard-notification">\n                <div>\n                    <svg width="18px" height="18px" viewBox="0 0 18 18" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path d="M11,19.6428571 C6.22668181,19.6428571 2.35714286,15.7733182 2.35714286,11 C2.35714286,6.22668181 6.22668181,2.35714286 11,2.35714286 C15.7733182,2.35714286 19.6428571,6.22668181 19.6428571,11 C19.6428571,15.7733182 15.7733182,19.6428571 11,19.6428571 Z M14.9938835,7.85744843 L9.95229041,12.8990415 L7.79155915,10.7383103 L7.07142857,11.4587804 L9.23215983,13.6191721 L9.95229041,14.3393027 L10.672421,13.6191721 L15.7140141,8.57757901 L14.9938835,7.85744843 Z" id="path-1"></path></defs><g id="Players" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="Sharing_8U" transform="translate(-230.000000, -59.000000)"><g id="-icons-/-shapes-/-actions-/-check-active" transform="translate(228.000000, 57.000000)"><mask id="mask-2" fill="white"><use xlink:href="#path-1"></use></mask><use id="Icon_Light_Plus_Active" fill="#000000" fill-rule="evenodd" xlink:href="#path-1"></use><g id="fills-/-white" mask="url(#mask-2)" fill="#FFFFFF" fill-rule="evenodd"><rect id="fill" x="0" y="0" width="22" height="22"></rect></g></g></g></g></svg>\n                    <p id="copied-prompt"></p>\n                </div>\n            </span>\n            <table class="share-wrapper">\n                <tr>\n                    <td valign="middle">\n                        <table class="shareTable">\n                                <tr>\n                                    <td>\n                                        <ul class="share-buttons">\n                                            <li>\n                                                <a title="Copy Link" id="copy-link-url-image">\n                                                    ').concat(n(203),'\n                                                    <input id="copy-link-url" type="hidden" value="').concat(e,'" /></input>\n                                                </a>\n                                                <p class="share-button-text">Copy Link</p>\n                                            </li>\n                                            <li>\n                                                <a id="copy-embed">\n                                                    ').concat(n(204),'\n                                                </a>\n                                                <p>Copy Embed</p>\n                                            </li>\n                                            <li>\n                                                <a href="https://www.facebook.com/sharer/sharer.php?u=').concat(e,"&t=").concat(this._videodata.name,'" title="Share on Facebook" target="_blank" id="sshare-fb-').concat(this._videoId,'" data-share="Facebook">\n                                                    ').concat(n(205),'\n                                                </a>\n                                                <p>Facebook</p>\n                                            </li>\n                                            <li>\n                                                <a href="https://twitter.com/intent/tweet?url=').concat(e,"&text=").concat(this._videodata.name,'" target="_blank" title="Tweet" id="sshare-twitter-').concat(this._videoId,'" data-share="Twitter">\n                                                    ').concat(n(206),"\n                                                </a>\n                                                <p>Twitter</p>\n                                            </li>\n                                        </ul>\n                                    </td>\n                                </tr>\n                        </table>\n                    </td>\n                </tr>\n            </table>");this._shareScreen.innerHTML=r,this.showHideShareScreen(!0),document.getElementById("closeBtn-"+this._videoId).addEventListener("click",this.showHideShareScreen.bind(this,!1)),document.getElementById("copy-link-url-image").addEventListener("click",(function(){document.getElementById("copied-prompt").innerText="Link copied to clipboard",a(e),o()})),document.getElementById("copy-embed").addEventListener("click",(function(){var e='<iframe allowfullscreen="true" webkitallowfullscreen="true" mozallowfullscreen="true" frameborder="0" scrolling="no" marginheight="0" marginwidth="0" width="512" height="288" src="https://video-api.wsj.com/api-video/player/v3/iframe.html?guid='.concat(t.guid).concat(i.shareDomain?"&shareDomain=".concat(i.shareDomain):"",'"></iframe>');document.getElementById("copied-prompt").innerText="Embed copied to clipboard",a(e),o()})),document.getElementById("sshare-fb-"+this._videoId).scope=this,document.getElementById("sshare-twitter-"+this._videoId).scope=this,document.getElementById("sshare-fb-"+this._videoId).addEventListener("click",this.trackShare),document.getElementById("sshare-twitter-"+this._videoId).addEventListener("click",this.trackShare)}function a(e,t){if(!document||!window)return null;var n=navigator&&navigator.userAgent.match(/ipad|iphone/i),i=document.createElement("textarea");if(i.value=e,i.setAttribute("readonly",""),i.style.position="fixed",i.style.left="-9999px",document.body.appendChild(i),n){var r=document.createRange();r.selectNodeContents(i);var a=window.getSelection();a.removeAllRanges(),a.addRange(r),i.setSelectionRange(0,999999)}else i.select();document.execCommand("copy")}function o(){document.getElementById("copy-to-clipboard-notification").style.display="block"}},addListeners:function(){var e=this,t=this;this._adsManager.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,(function(e){t.onAdError(e,t)})),this._adsManager.addEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,(function(e){t.onContentPauseRequested(e)})),this._adsManager.addEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,(function(e){t.onContentResumeRequested(e)})),this._adsManager.addEventListener(google.ima.AdEvent.Type.ALL_ADS_COMPLETED,(function(e){t.onAdRemoved(e)})),this._adsManager.addEventListener(google.ima.AdEvent.Type.COMPLETE,(function(e){t.onAdComplete(e,t)})),this._adsManager.addEventListener(google.ima.AdEvent.Type.LOADED,(function(e){t.onAdLoaded(e)})),this._adsManager.addEventListener(google.ima.AdEvent.Type.AD_BUFFERING,(function(e){t.onAdBuffering(e)})),this._adsManager.addEventListener(google.ima.AdEvent.Type.STARTED,(function(e){t.onAdStarted(e,t)})),this._adsManager.addEventListener(google.ima.AdEvent.Type.PAUSED,(function(e){t.onAdPaused(e,t)})),this._adsManager.addEventListener(google.ima.AdEvent.Type.RESUMED,(function(e){t.onAdResumed(e,t)})),this._adsManager.addEventListener(google.ima.AdEvent.Type.SKIPPED,(function(e){t.onAdSkipped(e,t)})),this._adsManager.addEventListener(google.ima.AdEvent.Type.CLICK,(function(e){t.onAdClicked(e,t)})),this._adsManager.addEventListener(google.ima.AdEvent.Type.SKIPPABLE_STATE_CHANGED,(function(e){t.onSkippableChanged(e)})),this._adsManager.addEventListener(google.ima.AdEvent.Type.AD_PROGRESS,(function(t){return e.onAdProgress(t)}));for(var n=function(){var t=r[i];e._adsManager.addEventListener(google.ima.AdEvent.Type[t],(function(n){return e.log("IMA AdEvent ".concat(t,": "),n)}))},i=0,r=Object.keys(google.ima.AdEvent.Type);i<r.length;i++)n()},onAdClicked:function(e,t){t._adsManager.pause()},onAdStarted:function(e){var t;this._actions.endVideoPlaybackInit(),null===(t=this._adHealthObserver)||void 0===t||t.observe(),this._adLowerCircleComponent.set(1),this._adCircleComponent.set(1),this._adCircleComponent.setText(T.gTimeFormat(this._adsManager.getRemainingTime()).slice(1)),this._adStarted=!0,this._skipAvailable=!1,this._currentAd=e.getAd(),this.onResize(),this.setupListeners(!1),this._vrWrapper.style.display="none",this.trigger(this._wrapper,"adStarted");try{this._video.textTracks[0]&&(this._video.textTracks[0].mode="hidden")}catch(e){}this._actions.playAd(),this._adLoadingScreen&&this._adLoadingScreen.parentNode&&this._adLoadingScreen.parentNode.removeChild(this._adLoadingScreen),this._shareBtn&&(this._shareBtn.style.display="none"),this._midrollRequested=!1;try{var n=[],i=new google.ima.CompanionAdSelectionSettings;i.resourceType=google.ima.CompanionAdSelectionSettings.ResourceType.STATIC,i.sizeCriteria=google.ima.CompanionAdSelectionSettings.SizeCriteria.IGNORE;var r=this._currentAd.getCompanionAds(1600,1600,i);if(r.length)for(var a=0;a<r.length;a++)n[a]={url:r[a].h,clickUrl:"",height:r[a].l.height,width:r[a].l.width,type:"html"};try{this.trigger(this._wrapper,"onCompanions",{availableAds:n})}catch(e){}}catch(e){try{this.trigger(this._wrapper,"onCompanions",{availableAds:[]})}catch(e){}}if(this._currentAd.isLinear()){this._controls&&(this._controls.classList.add("video-advertisment"),this._adContainer.style.display="block",this._adsManager.isCustomPlaybackUsed()&&(this._video.style.display="block"),this._settings.startFullScreen||this._store.getState().isAdPlaying||this._actions.playAd());try{this.trigger(this._wrapper,"onPlayerStateChange",{isPlaying:!1,isFullscreen:this._isFullScreen})}catch(e){}this._store.getState().isAdMode||this._actions.startAdMode(),this._store.getState().isMuted?this._adsManager.setVolume(0):this._adsManager.setVolume(this._volume),this.showVolume(),this._adInfo=this._currentAd.getAdPodInfo(),this._adDuration=this._currentAd.getDuration();var o=!0;try{this._currentAd.getUiElements().indexOf("countdown")>=0&&(o=!1)}catch(e){}this._adsSkipButton&&this._adDuration>16&&o&&(this._adsSkipButton.style.display="block"),this.startAdTimer(),this._settings.startFullScreen&&!this._isFullScreen&&this._isMobile&&this._adsManager.pause(),this.trackAdStarted()}else this._video.play()},handleLiveUpdates:function(){var e=this;if(this._liveStateController){var t=this._store.getState().videoData.mediaLiveChannelId;t?this._liveStateController.getStatus(t).then((function(n){var i=n.state;"RUNNING"===i&&"future"===e._store.getState().videoData.state&&e.onLiveStateChanged("live"),e._liveStateController.subscribe(t,(function(t){var n=t.state,r=e._store.getState().videoData.state;"RUNNING"!==i&&"RUNNING"===n&&"live"!==r?e.onLiveStateChanged("live"):"IDLE"===i||"IDLE"!==n||"processing"===r&&"vod"===r||(e._autoplayed&&(e._settings.autoplay=!1),e.onLiveStateChanged("processing"),e._liveStateController.unsubscribe()),i=n}))})):console.error("mediaLiveChannelId was not found")}else console.error("liveStateController is not initialized")},trackAdStarted:function(){var e=u.va.MediaHeartbeat,t=e.createAdBreakObject("pre-roll",1,0),n=e.createAdObject(this._currentAd.getTitle(),this._adId,1,this._adDuration),i={};i[e.AdMetadataKeys.ADVERTISER]=this._currentAd.getAdvertiserName(),i[e.AdMetadataKeys.CAMPAIGN_ID]=this._currentAd.getCreativeId(),n.setValue(e.MediaObjectKey.StandardAdMetadata,i),this._mediaHeartbeat.trackEvent(e.Event.AdBreakStart,t),this._mediaHeartbeat.trackEvent(e.Event.AdStart,n,{"ad.blank.start":"false","ad.catastrophic.blocker":"false","ad.disabled":"false"}),this._adPlaybackTime=Date.now()-this._time,this._currentAd&&this.convivaAdStart(this._currentAd),null!==this._convivaAdSessionKey&&this._convivaAdStateManager.setPlayerState(Conviva.PlayerStateManager.PlayerState.PLAYING);try{this._comscoreTag.stop()}catch(e){}try{this._comscoreTag.playAdvertisement()}catch(e){}},convivaAdStart:function(e){this._convivaClient.adStart(this._convivaContentSessionKey,Conviva.Client.AdStream.SEPARATE,Conviva.Client.AdPlayer.SEPARATE,Conviva.Client.AdPosition.PREROLL),this._convivaClient.sendCustomEvent(this._convivaContentSessionKey,"Conviva.PodStart",{podPosition:"Pre-roll",podIndex:"1",absoluteIndex:"1",podDuration:this._adDuration+""});var t=this.getConvivaAdMetadata(e);"object"==a(e)&&(this._convivaAdSessionKey=this._convivaClient.createAdSession(this._convivaContentSessionKey,t),this._convivaAdStateManager=this._convivaClient.getPlayerStateManager(),this._convivaClient.attachPlayer(this._convivaAdSessionKey,this._convivaAdStateManager),this._convivaAdStateManager.setVideoResolutionHeight(e.getVastMediaHeight()),this._convivaAdStateManager.setVideoResolutionWidth(e.getVastMediaWidth()),this._convivaAdStateManager.setBitrateKbps(e.getVastMediaBitrate()))},getConvivaAdMetadata:function(e){var t,n,i,a,o,s=new Conviva.ContentMetadata;if(s.assetName=e.getTitle(),s.streamUrl=e.getMediaUrl(),s.defaultBitrateKbps=0,s.applicationName="WEB V3",s.viewerId=T.getCookie("REMOTE_USER"),s.duration=e.getDuration(),s.isLive=this._isLive,0!==e.getWrapperAdIds().length){var l=e.getWrapperAdIds().length;n=e.getWrapperAdSystems()[l-1],i=e.getWrapperAdIds()[l-1],a=e.getWrapperCreativeIds()[l-1],o=e.getTitle()[l-1],"NA"}else n=e.getAdSystem(),i=e.getAdId(),a=e.getCreativeId(),o=e.getTitle(),"NA";return s.custom=(r(t={"c3.ad.id":""+e.getAdId(),"c3.ad.creativeId":""+e.getCreativeId(),"c3.ad.technology":"Client Side","c3.ad.system":""+e.getAdSystem(),"c3.ad.sequence":""+e.getAdPodInfo().getAdPosition(),"c3.ad.advertiser":""+e.getAdvertiserName(),"c3.ad.adManagerName":"Google IMA SDK","c3.ad.adManagerVersion":""+google.ima.VERSION,"c3.ad.firstAdSystem":""+n,"c3.ad.firstAdId":""+i,"c3.ad.firstCreativeId":""+a,"c3.ad.position":"Pre-roll","c3.ad.type":"NA","c3.ad.mediaFileApiFramework":e.getApiFramework(),viewerId:T.getCookie("REMOTE_USER")},"c3.ad.advertiser",e.getAdvertiserName()),r(t,"c3.creativeName",o),r(t,"c3.ad.isSlate","NA"),r(t,"c3.ad.adStitcher","NA"),r(t,"c3.ad.unitName","NA"),r(t,"c3.ad.breakId","NA"),r(t,"c3.ad.category","NA"),r(t,"c3.ad.classification","NA"),r(t,"c3.ad.advertiserCategory",this._videodata.gptCustParams),r(t,"c3.ad.advertiserId","NA"),r(t,"c3.ad.campaignName","NA"),r(t,"c3.ad.dayPart","NA"),r(t,"c3.ad.sessionStartEvent","NA"),r(t,"contentAssetName",this._videodata.name+" - "+this._videodata.guid),t),s},trackShare:function(e){var t;this.scope._appMeasurement&&("string"==typeof e.share?(this.scope=this,t=e.share):t=this.dataset.share,svid.contextData["a.media.friendlyName"]=this.scope._videodata.name,svid.contextData["a.media.name"]=this.scope._videodata.guid,svid.contextData["social.share.type"]=t,svid.contextData.action="social.share",svid.linkTrackVars="contextData.a.media.friendlyName,contextData.a.media.name,contextData.social.share.type,contextData.action",svid.tl(!0,"o","heartbeat_video share"))},trackMoreVideosSlide:function(e){this._appMeasurement&&(svid.contextData["a.media.friendlyName"]=this._videodata.name,svid.contextData["a.media.name"]=this._videodata.guid,svid.contextData.action="video.slide",svid.linkTrackVars="contextData.a.media.friendlyName,contextData.a.media.name,contextData.action",svid.tl(!0,"o","video_upnext"))},trackEndscreenSlide:function(e){this._appMeasurement&&(svid.contextData["a.media.friendlyName"]=this._videodata.name,svid.contextData["a.media.name"]=this._videodata.guid,svid.contextData.action="video.slide",svid.linkTrackVars="contextData.a.media.friendlyName,contextData.a.media.name,contextData.action",svid.tl(!0,"o","video_instreamrec"))},skipAd:function(e){this._adsManager&&(this._adsManager.skip(),this._adsManager.stop())},onAdSkipped:function(e,t){t._mediaHeartbeat.trackEvent(u.va.MediaHeartbeat.Event.AdSkip),this.onAdRemoved()},onSkippableChanged:function(e){},onAdComplete:function(e,t){this.onAdRemoved(),this._adStarted=!1,t.trigger(t._wrapper,"adComplete"),t._mediaHeartbeat.trackEvent(u.va.MediaHeartbeat.Event.AdComplete),t._mediaHeartbeat.trackEvent(u.va.MediaHeartbeat.Event.AdBreakComplete),this.sendCXevent("ad_complete"),this._ajax.get(t._larsUrl+"?source="+t._settings.larsAdId+"&guid={"+t._settings.guid+"}")},onAdResumed:function(e){var t=this._store.getState(),n=t.isAdMode,i=t.isAdPlaying;n&&(i||this._actions.playAd(),this._playOverlay&&(this._playOverlay.style.display="none")),this.showControls(3e3),this._settings.startFullScreen&&!this._isFullScreen&&this.toggleFullScreen();try{this._comscoreTag.playAdvertisement()}catch(e){}this._convivaAdStateManager&&this._convivaClient&&this._convivaAdStateManager.setPlayerState(Conviva.PlayerStateManager.PlayerState.PLAYING);try{this.trigger(this._wrapper,"onPlayerStateChange",{isPlaying:!0,isFullscreen:this._isFullScreen})}catch(e){}},onAdPaused:function(e){var t=this._store.getState(),n=t.isAdMode,i=t.isAdPlaying;if(n){i&&this._actions.pauseAd(),this._playOverlay&&(this._playOverlay.style.display="block");try{this._comscoreTag.stop()}catch(e){}this._convivaAdStateManager&&this._convivaClient&&this._convivaAdStateManager.setPlayerState(Conviva.PlayerStateManager.PlayerState.PAUSED)}this.showControls(3e3);try{this.trigger(this._wrapper,"onPlayerStateChange",{isPlaying:!1,isFullscreen:this._isFullScreen})}catch(e){}},onAdProgress:function(e){var t=e.getAdData().currentTime;this._store.getState().currentAdPosition!==t&&this._actions.updateAdProgress(t)},startAdTimer:function(){var e=this;this._adTime=0,this._adTimer&&clearInterval(this._adTimer),this._adTimer=setInterval((function(){e.adTick()}),500)},startAdTimeoutTimer:function(){var e=this;this._adTimeoutFail=!1,this._adTimeoutTimer&&clearInterval(this._adTimeoutTimer),this._adTimeoutTimer=setInterval((function(){e._adTimeoutFail=!0,e.adResponseTimeout()}),e._adResponseTimeout)},adResponseTimeout:function(e){this.onAdError("timeout"),this._settings.adsEnabled=!1,this._actions.endVideoPlaybackInit()},adTick:function(e){if(this._store.getState().isAdPlaying&&this._adsManager.getRemainingTime()>0){var t=(this._adDuration-this._adsManager.getRemainingTime())/this._adDuration;try{this.trigger(this._wrapper,"onAdTimeUpdate",{percent:t,duration:this._adDuration})}catch(e){}if(this._adTime++,this._adTime>60&&clearInterval(this._adTimer),this._adDuration>15){if(this._adTime>30)this._adCountdownText&&(this._videoSkipIcon.style.display="inline-block",this._adCountdownText.innerHTML=""),this._skipAvailable=!0;else if(this._adCountdownText)this._videoSkipIcon.style.display="none",0==Math.round(15-Math.floor(this._adTime/2))?(this._adCountdownText.innerHTML="",this._videoSkipIcon.style.display="inline-block"):this._adCountdownText.innerHTML=" in "+Math.round(15-Math.floor(this._adTime/2))}else this._adsSkipButton&&(this._adsSkipButton.style.display="none");this._adsManager&&this._adsManager.getRemainingTime()<1&&clearInterval(this._adTimer);try{t>0&&this._adCircleComponent.animate(Math.abs(1-t),{duration:700}),this._timeDisplay&&this._adCircleComponent.setText(T.gTimeFormat(this._adsManager.getRemainingTime()).slice(1))}catch(e){}}},onAdRemoved:function(){var e;this._video.style.display="block",this._convivaClient&&this._adStarted&&null!=this._convivaAdSessionKey&&(this._convivaClient.adEnd(this._convivaContentSessionKey),this._adPlaybackTime=Date.now()-this._time-this._adPlaybackTime,this._convivaClient.sendCustomEvent(this._convivaContentSessionKey,"Conviva.PodEnd",{podPosition:"Pre-roll",podIndex:"1",absoluteIndex:"1",podDuration:this._adDuration+""}),this._convivaAdStateManager.setPlayerState(Conviva.PlayerStateManager.PlayerState.STOPPED),this._convivaClient.cleanupSession(this._convivaAdSessionKey),this._convivaAdSessionKey=null),!this._contentStartTracked&&this._sessionStarted&&this.trackContentStarted(),this._store.getState().isAdMode&&this._actions.stopAdMode(),this._adStarted=!1,this._skipAvailable=!1,this._adContainer.style.display="block",this.setupListeners(!0);try{this._video.textTracks[0]&&(this._video.textTracks[0].mode="showing")}catch(e){}this._adsSkipButton&&(this._adsSkipButton.style.display="none"),this._adContainer&&(this._adContainer.style.display="none"),"vr"==this._videodata.format&&(this._vrWrapper.style.display="block"),this._controls&&(this._controls.classList.remove("video-advertisment"),this._playOverlay.style.display="none",this._settings.shareEnabled&&this._shareBtn&&(this._shareBtn.style.display="block")),clearInterval(this._adTimer);try{this._comscoreTag.stop()}catch(e){}null===(e=this._adHealthObserver)||void 0===e||e.disconnect()},onAdLoaded:function(e){try{this._currentAd=e.getAd();var t="",n=this._currentAd.getWrapperAdIds();for(w in n)t+=n[w]+",";this._currentAd.getAdId()?this._adId=t+this._currentAd.getAdId():this._adId="none"}catch(e){this._adId="none"}this._convivaContentMetadata&&(this._convivaContentMetadata.adId=this._adId),this.trigger(this._wrapper,"adLoaded",this._currentAd)},onContentPauseRequested:function(){this._video.pause()},onContentResumeRequested:function(){var e=this;this.onAdRemoved(),this._playOverlay&&(this._playOverlay.style.display="none");var t=this._video.play();void 0!==t&&t.catch((function(t){e._video.play()}))},getAdContextData:function(){return{}},onAdError:function(e){var t,n=this;(this.log("AdError",e),this._adTimeoutTimer&&clearInterval(this._adTimeoutTimer),"object"===a(e))&&((null==e?void 0:e.getError())&&(null==e||null===(t=e.getError())||void 0===t?void 0:t.getErrorCode())&&this._actions.setAdError(e.getError().getErrorCode()));if(this._store.getState().adInitState===M.STARTED&&this._actions.setAdInitState(M.FAILED),this.onAdRemoved(),this.trigger(this._wrapper,"adError",r),this._adErrorTracked)this._adErrorEvent=e;else{this._adErrorTracked=!0;var i=this._adStarted?"Adpost_":"Ad_";try{this._adsLoading=!1;var r={type:"",code:"",msg:""};if(!1===e)r.code="0",r.msg="Ads Blocked";else if("timeout"===e)r.code="1",r.msg="No IMA Loader Response After 5 Seconds";else{var o=e.getError();if(r.code=o.getErrorCode(),r.msg=o.getMessage(),void 0!==r.msg&&null!==r.msg){var s=o.getInnerError();null!=s&&(r.msg=r.msg+" - "+s)}else r.msg="A null was recieved from ima getMessage"}}catch(e){}setTimeout((function(){return n._video.play()}),0),this.trackConvivaAdError(r),this._mediaHeartbeat.trackError(i+r.msg)}},trackConvivaAdError:function(e){if(this._convivaClient){if(this._currentAd)var t=this.getConvivaAdMetadata(this._currentAd);else t=new Conviva.ContentMetadata;t.assetName="Ad Error",e&&(t.custom.AdErrorType=function(e){if(0==(e=parseInt(e)))return"Ad Blocker";if(1021==e||1==e||301==e||402==e)return"Ad Timeout";if(1007==e||1009==e)return"Fallback no-ad";return"Other Ad Playback Error"}(e.code)),null===this._convivaAdSessionKey&&(this._convivaAdSessionKey=this._convivaClient.createAdSession(this._convivaContentSessionKey,t));var n="Code: "+e.code+", Message: "+e.msg;this._convivaClient.reportError(this._convivaAdSessionKey,n,Conviva.Client.ErrorSeverity.FATAL),this._adStarted&&(this._convivaClient.adEnd(this._convivaContentSessionKey),this._convivaClient.sendCustomEvent(this._convivaContentSessionKey,"Conviva.PodEnd",{podPosition:"Pre-roll",podIndex:"1",absoluteIndex:"1",podDuration:this._adDuration+""}),this._convivaAdStateManager.setPlayerState(Conviva.PlayerStateManager.PlayerState.STOPPED)),this._convivaClient.cleanupSession(this._convivaAdSessionKey),this._convivaAdSessionKey=null}},toggleFullScreen:function(){this._iOS?this._video.webkitEnterFullscreen():f.toggle(this._wrapper)},playPause:function(e){if(this._flash)this._fPlaying?this._flash.playerPause():this._flash.playerResume();else{var t,n=this._store.getState(),i=n.isAdMode,r=n.isAdPlaying;if(i)this._adsManager&&(r?(this._playRequested=!1,this._adsManager.pause(),this.onAdPaused(),this._adsManager.isCustomPlaybackUsed()&&this._video.pause()):(this._playRequested=!0,this.onAdResumed(),this._adsManager.resume(),this._adsManager.isCustomPlaybackUsed()&&this._video.play()));else if(this._video.paused)null===(t=this._video.play())||void 0===t||t.catch((function(){return""})),this._playRequested=!0;else this._video.pause(),this._playRequested=!1;this._playRequested||this._mediaHeartbeat.trackPause()}},eResumeVideo:function(e){this._playRequested=!0,this._contentInitialized?this._store.getState().isAdMode?this._adsManager.resume():this._video.paused&&(this._video.play(),this._playRequested=!0):this.startVideo({fetchAds:!0})},eSeek:function(e,t){var n=e;t&&(n=Math.round(this._store.getState().duration*(e/100))),this._video&&!this._store.getState().isAdMode&&this._contentInitialized?n+5<this._video.duration&&(this._video.currentTime=n):(this._settings.startPosition=parseInt(e),this._contentInitialized||this.startVideo({fetchAds:!0}))},ePauseVideo:function(e){this._self._playRequested=!1,this._self._flash?this.self._flash.playerPause():this._self._store.getState().isAdMode?this._self._adsManager.pause():this._self._video.paused||this._self._video.pause()},ePlayPauseVideo:function(e){this._self._contentInitialized||this._self._playRequested?this._self.playPause(e):this._self.startVideo({fetchAds:!0})},eKillVideo:function(e){this._self._adsManager&&this._self._adsManager.stop()},eIsPlaying:function(){var e=this._self._store.getState(),t=e.isAdMode,n=e.isAdPlaying;return!!(!this._self._video.paused||this._self._video.seeking||t&&n)||!(!t||!this._self._playRequested)},ePlayVideo:function(e){if("object"===a(e)){if(this._videodata=e,!this._videodata.hlsNoCaptions)return"string"==typeof this._videodata.startAction&&(this._formatOverride=this._videodata.startAction),this._settings.guid=this._videodata.guid,void this.loadVideo(!0);this._actions.updateVideoData(e),this.startVideo({fetchAds:!0})}else"number"==typeof parseInt(e)&&(this._settings.startPosition=parseInt(e),this.eResumeVideo())},eLoadVideo:function(e){this._self._settings.guid=e.guid,e.vidora&&(this._self._isChained=!1),!this._self._contentInitialized&&this._self._isMobile&&-1!==document.location.href.indexOf("wsj.com/video")?window.location.href=e.linkURL:(this._self.loadVideo(!0),this._self._shareScreen&&this._self.showHideShareScreen(!1))},eUpdatePlaylist:function(e){var t;try{t=e.items&&void 0!==e.items?e.items:e}catch(n){t=e}this._self._actions.replacePlaylist(t)},eMute:function(e){this._self.muteUnMute(e,!1,!0)},eGetStatus:function(){return{isPlaying:this._self.eIsPlaying(),isFullscreen:this._self._isFullScreen}},initVrPlayback:function(){var e=this;if(void 0!==c){var t;this._vrWrapper.style.display="block",this._vrComponents={},this._vrComponents.isUserInteracting=!1,onMouseDownMouseX=0,onMouseDownMouseY=0,lon=180,onMouseDownLon=0,lat=0,onMouseDownLat=0,phi=0,theta=0,this._vrComponents.camera=new c.PerspectiveCamera(75,parseInt(getComputedStyle(this._vrWrapper).width)/parseInt(getComputedStyle(this._vrWrapper).height),1,1100),this._isAndroid&&(this._vrComponents.controls=new c.DeviceOrientationControls(this._vrComponents.camera)),this._vrComponents.camera.target=new c.Vector3(0,0,0),this._vrComponents.scene=new c.Scene;var i=new c.SphereGeometry(500,60,40);i.scale(-1,1,1),this._video.crossOrigin="anonymous";var r=new c.VideoTexture(this._video);r.minFilter=c.LinearFilter,r.generateMipmaps=!1;var a=new c.MeshBasicMaterial({map:r});return t=new c.Mesh(i,a),this._vrComponents.scene.add(t),this._vrComponents.renderer=new c.WebGLRenderer,this._vrComponents.renderer.getContext().getExtension("OES_texture_half_float_linear"),this._vrComponents.renderer.setPixelRatio(this._vrWrapper.devicePixelRatio),this._vrComponents.renderer.setSize(parseInt(getComputedStyle(this._vrWrapper).width),parseInt(getComputedStyle(this._vrWrapper).height)),this._vrWrapper.appendChild(this._vrComponents.renderer.domElement),this._video.style.display="none",e._vrComponents.camera.aspect=e._vrWrapper.clientWidth/e._vrWrapper.clientHeight,e._vrComponents.camera.updateProjectionMatrix(),e._vrComponents.renderer.setSize(e._vrWrapper.clientWidth,e._vrWrapper.clientHeight),this._video.play(),function t(){requestAnimationFrame(t),function(){lat=Math.max(-85,Math.min(85,lat)),phi=c.Math.degToRad(90-lat),theta=c.Math.degToRad(lon),e._vrComponents.camera.target.x=500*Math.sin(phi)*Math.cos(theta),e._vrComponents.camera.target.y=500*Math.cos(phi),e._vrComponents.camera.target.z=500*Math.sin(phi)*Math.sin(theta),e._vrComponents.camera.lookAt(e._vrComponents.camera.target),e._vrComponents.controls&&e._vrComponents.controls.update();e._vrComponents.renderer.render(e._vrComponents.scene,e._vrComponents.camera)}()}(),this._isMobile?(this._vrWrapper.addEventListener("touchstart",o,!1),this._vrWrapper.addEventListener("touchmove",s,!1),this._vrWrapper.addEventListener("touchend",l,!1)):(document.addEventListener("mousedown",o,!1),document.addEventListener("mousemove",s,!1),document.addEventListener("mouseup",l,!1)),!0}function o(t){t.preventDefault(),void 0!==t.touches&&(t.clientX=t.touches[0].clientX,t.clientY=t.touches[0].clientY),e._vrComponents.isUserInteracting=!0,e._vrComponents.controls&&e._vrComponents.controls.disconnect(),onMouseDownMouseX=t.clientX,onMouseDownMouseY=t.clientY,onMouseDownLon=lon,onMouseDownLat=lat,e._isMobile&&("none"!=e._controls.style.display&&e.playPause(t),e._controls.style.display="block",e._controls.style.bottom="0px",e._controls.hideTime=e._video.currentTime)}function s(t){!0===e._vrComponents.isUserInteracting&&(void 0!==t.touches&&(t.clientX=t.touches[0].clientX,t.clientY=t.touches[0].clientY),t.target.width&&(lon=.15*(onMouseDownMouseX-t.clientX)+onMouseDownLon,lat=.15*(t.clientY-onMouseDownMouseY)+onMouseDownLat,e._vrComponents.controls&&e._vrComponents.controls.update()))}function l(t){e._vrComponents.isUserInteracting=!1,e._vrComponents.controls&&e._vrComponents.controls.connect()}n.e(4).then(function(t){c=n(210),e.initVrPlayback()}.bind(null,n)).catch((function(t){console.error(t),e.startVideo({fetchAds:!0})}))},displayVrMsg:function(){var e=this;this._vrWrapper.style.display="none",this._controls&&(this._controls.style.display="none"),this._actions.hideLoadingSpinner();var t=document.createElement("div");t.className="vr-alert",t.innerHTML='<span class="closebtn">&times;</span>360 videos are not available in this browser.<br />Please try with the Chrome browser',this._wrapper.appendChild(t),setTimeout((function(){t.classList.add("vr-down")}),500),t.onclick=function(){t.style.display="none",e.chainVideo()},document.getElementById("vrLearnMore").onclick=function(){e._video.pause()}},getTestingSystemSettings:function(){var e=new Conviva.SystemSettings;return e.logLevel=Conviva.SystemSettings.LogLevel.DEBUG,e.allowUncaughtExceptions=!0,e},getProductionSystemSettings:function(){var e=new Conviva.SystemSettings;return e.logLevel=Conviva.SystemSettings.LogLevel.ERROR,e},trackInit:function(){try{var e=u.va.MediaHeartbeat,t=this._videodata;this._ajax.get(this._larsUrl+"?source="+this._settings.larsId+"&guid={"+this._settings.guid+"}");var n="vod"===t.state?e.StreamType.VOD:e.StreamType.LIVE;this._mediaObjectHeartbeat=e.createMediaObject(t.name,t.guid,this._store.getState().duration,n),this._mediaObjectHeartbeat.setValue(e.MediaObjectKey.StandardVideoMetadata,this.getStandardMetaData())}catch(e){}this._formatOverride="",this._mediaHeartbeat._config.channel=this.getChannel(),this._mediaHeartbeat.trackSessionStart(this._mediaObjectHeartbeat,this.getContextData()),this._sessionStarted=!0;try{this._comscoreTag.playContentPart(this._comscoreMeta)}catch(e){}try{var i={level1:this._videodata["wsj-section"],level2:this._videodata["wsj-subsection"],level3:this._videodata.guid,slicer1:T.getChannelFromDomain(this._domain)};this._moatManager=h(this._video,i,this._store.getState().duration,"dowjonesjsvideocontent394324437046",this._videodata.hls),this._moatManager.dispatchEvent({type:"AdVideoStart",adVolume:this._volume})}catch(e){}try{this._settings.hasCMPConsent&&window.vidora.push(["send","play",this._videodata.guid])}catch(e){}this.sendOptimizelyBeacon("init"),void 0!==window.cX&&"function"==typeof window.cX.sendPageViewEvent&&window.cX.sendPageViewEvent({location:this._videodata.linkURL})},sendCXevent:function(e){try{if(void 0!==window.cX&&"object"===a(window.cX.callQueue))switch(e){case"play":window.cX.callQueue.push(["sendEvent","videoPlay"]);break;case"ad_complete":window.cX.callQueue.push(["sendEvent","videoAdComplete"])}}catch(e){}},sendOptimizelyBeacon:function(e){try{if("object"!==a(window.optimizely))return;var t="";try{t=window.optimizely.get("visitor").visitorId}catch(e){}var n={account_id:"5090114122",visitors:[{visitor_id:t,session_id:"AUTO",attributes:{},snapshots:this.buildSnapshots({init:["wsj-video_initiates","14369530301"],start:["wsj-video_content-start","14377780073"],complete:["wsj-video_content-completes","14350000105"],percent:["wsj-video_percentage-of-video-watched","14355670366"],percent25:["wsj-video_percentage-25","14819120481"],percent50:["wsj-video_percentage-50","14793070766"],percent75:["wsj-video_percentage-75","14805100688"],percent95:["wsj-video_percentage-95","14799330489"]}[e])}],anonymize_ip:!0,client_name:"wsj-video-api",client_version:"1.0.0",enrich_decisions:!0};fetch("https://logx.optimizely.com/v1/events",{method:"post",body:JSON.stringify(n)})}catch(e){}},buildSnapshots:function(e){try{var t=[];return t.push({decisions:[],events:[{entity_id:e[1],key:e[0],timestamp:Date.now(),uuid:this.createUUIDv4()}]}),t}catch(e){return[]}},createUUIDv4:function(){try{return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}))}catch(e){return""}},getTrackingDateString:function(e){try{var t=new Date(e.formattedCreationDate),n=e.omniPublishDate.split("video_")[1],i=new Date(n);return"original_"+t.getFullYear()+"-"+(t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1)+"-"+t.getDate()+" "+t.getHours()+":"+(t.getMinutes()<10?"0":"")+t.getMinutes()+"_current_"+i.getFullYear()+"-"+(i.getMonth()+1<10?"0"+(i.getMonth()+1):i.getMonth()+1)+"-"+i.getDate()+" "+i.getHours()+":"+(i.getMinutes()<10?"0":"")+i.getMinutes()}catch(t){return e.formattedCreationDate}return e.formattedCreationDate},getSectionSubsection:function(e){var t=[],n="wsj",i="";try{i=window.s?s.channel:T.getChannelFromDomain(this._domain)}catch(e){i=T.getChannelFromDomain(document.domain)}return"AllThingsD"==i?n="allthingsd":"SmartMoney"==i&&(n="sm"),"string"==typeof e[n+"-section"]&&t.push(e[n+"-section"]),"string"==typeof e[n+"-subsection"]&&t.push(e[n+"-subsection"]),t},getContentTypes:function(){var e=["video embedded offsite","video embedded offsite"];if(!1!==this.getChannel()){var t=this.getVideoContent();e[0]=void 0!==t.prop1?t.prop1:"Embedded Onsite",e[1]=void 0!==t.prop19?t.prop19:void 0!==t.prop1?t.prop1:"Embedded Onsite"}return e},getContextData:function(){var e=u.va.MediaHeartbeat,t={};this.getVideoContent(),document.location.href;this._settings.shareDomain&&this._settings.shareDomain,t["a.media.friendlyName"]=this._videodata.name,t["a.media.length"]=this._store.getState().duration,t["a.media.name"]=this._videodata.guid,t["a.contentType"]="vod"===this._videodata.state?e.StreamType.VOD:e.StreamType.LIVE,this._settings.fireTv?t["a.media.playerName"]="Amazon Fire TV":t["a.media.playerName"]="Web";var n=this._settings.parentUrl||window.location.href;if(t["user.ref"]=T.getCookie("TR"),t["user.type"]=this.getUserTypeVar(),t["page.content.type"]=this.getContentTypes()[0],t["page.content.type.detail"]=this.getContentTypes()[1],t["page.driver"]=this.getParameterByName("mod"),t["video.player.type"]="Web",t["page.full.url"]=n,t["video.keywords"]=this._videodata.keywordsOmni?this._videodata.keywordsOmni:"",t["page.name"]="",t["page.site"]="",t["a.media.channel"]=this.getChannel(),window.s&&(t["page.section"]=s.prop2?s.prop2:"",t["page.subsection"]=s.prop26?s.prop26:"",t["article.type"]=s.prop3?s.prop3:"",t["article.headline"]=s.prop4?s.prop4:"",t["article.id"]=s.prop20?s.prop20:"",t["article.author"]=s.prop21?s.prop21:"",t["article.publish"]=s.prop23?s.prop23:"",t["page.full.url"]=s.prop6?s.prop6:"",t["page.name"]=s.PageName?s.PageName:"",t["page.site"]=s.eVar11?s.eVar11:""),window.utag_data){if(t["page.name"]=window.utag_data.page_name?window.utag_data.page_name:"",t["page.site"]=window.utag_data.page_site?window.utag_data.page_site:"",t["user.ref"]=window.utag_data.user_ref?window.utag_data.user_ref:"",t["user.tags"]=window.utag_data.user_tags?window.utag_data.user_tags:"",t["user.type"]=window.utag_data.user_type_post?window.utag_data.user_type_post:"",t["page.content.type"]=window.utag_data.page_content_type?window.utag_data.page_content_type:"",t["page.content.type.detail"]=window.utag_data.page_content_type_detail_post?window.utag_data.page_content_type_detail_post:"",window.utag_data.qp){var i=window.utag_data.qp,r=i.mod,a=i.reflink;t["page.driver"]=r||"",t["page.driver.internal"]=r||"",t["page.driver.external"]=a||""}t["page.section"]=window.utag_data.page_section_post?window.utag_data.page_section_post:"",t["page.subsection"]=window.utag_data.page_subsection_post?window.utag_data.page_subsection_post:"",t["article.type"]=window.utag_data.article_type_post||"",t["article.headline"]=window.utag_data.article_headline_post?window.utag_data.article_headline_post:"",t["article.headline.orig"]=window.utag_data.article_headline_orig_post?window.utag_data.article_headline_orig_post:"",t["article.id"]=window.utag_data.article_id?window.utag_data.article_id:"",t["article.author"]=window.utag_data.article_author?window.utag_data.article_author:"",t["article.publish"]=window.utag_data.article_publish?window.utag_data.article_publish:"",t["article.publish.post"]=window.utag_data.article_publish_post||"",t["article.publish.orig"]=window.utag_data.article_publish_orig?window.utag_data.article_publish_orig:""}return t["video.base.url"]=n.split("?")[0],t["video.player.technology"]="html "+this._version,t["ad.blank.start"]="false",this._settings.adsEnabled?"1"===this._videodata.catastrophic&&(t["ad.catastrophic.blocker"]="true",t["ad.disabled"]="false"):(t["ad.disabled"]="true",t["ad.catastrophic.blocker"]="false"),t},getStandardMetaData:function(){var e={},t=this._videodata,n=u.va.MediaHeartbeat;e[n.VideoMetadataKeys.SHOW]=null==typeof t.column?"":t.column,e[n.VideoMetadataKeys.SEASON]="",e[n.VideoMetadataKeys.EPISODE]=t.episodeNumber,e[n.VideoMetadataKeys.ORIGINATOR]=t.author,e[n.VideoMetadataKeys.GENRE]="WSJ_"+this.getSectionSubsection(t).join("_"),e[n.VideoMetadataKeys.FIRST_DIGITAL_DATE]=this.getTrackingDateString(t),e[n.VideoMetadataKeys.FEED]=this._videodata.type,e[n.VideoMetadataKeys.NETWORK]=t.doctypeID;var i=this._store.getState().isMuted;return""!=this._formatOverride?e[n.VideoMetadataKeys.STREAM_FORMAT]=this._formatOverride:this._videodata.startAction?e[n.VideoMetadataKeys.STREAM_FORMAT]=this._video.muted||i?this._videodata.startAction+" muted":this._videodata.startAction:this._isChained?e[n.VideoMetadataKeys.STREAM_FORMAT]=this._video.muted||i?"autochain muted":"autochain":this._autoplayed?e[n.VideoMetadataKeys.STREAM_FORMAT]=this._video.muted||i?"autoplay muted":"autoplay":e[n.VideoMetadataKeys.STREAM_FORMAT]="user initiated",e},trackContentStarted:function(){this._contentStartTracked=!0,this._adPlayNumber=this._adPlayNumber>3?1:this._adPlayNumber+1,document.cookie="djadplaynum="+this._adPlayNumber.toString()+"; path=/",this._convivaContentSessionKey!==Conviva.Client.NO_SESSION_KEY?this._convivaClient.isPlayerAttached(this._convivaContentSessionKey)||this._convivaClient.attachPlayer(this._convivaContentSessionKey,this._convivaPlayerStateManager):console.log("Conviva Failed"),this._mediaHeartbeat&&this._mediaHeartbeat.trackPlay();try{this.sendCXevent("play")}catch(e){}try{this._comscoreTag.playContentPart(this._comscoreMeta)}catch(e){}},trackProgress:function(e,t){if(!this._store.getState().isAdMode&&this._sessionStarted&&(t>1&&!this._contentStartTracked&&(this.trackContentStarted(),this.sendOptimizelyBeacon("start")),e>25&&!this._trackingMilestones[0]&&(this.sendOptimizelyBeacon("percent25"),this._trackingMilestones[0]=!0),e>50&&!this._trackingMilestones[1]&&(this.sendOptimizelyBeacon("percent50"),this._trackingMilestones[1]=!0),e>75&&!this._trackingMilestones[2]&&(this.sendOptimizelyBeacon("percent75"),this._trackingMilestones[2]=!0),e>95&&!this._trackingMilestones[3]&&(this.sendOptimizelyBeacon("percent95"),this._trackingMilestones[3]=!0)),Math.floor(t/15)>this._pingMilestone){this._pingMilestone=Math.floor(t/15);try{this._settings.hasCMPConsent&&window.vidora.push(["send","playhead_update",this._videodata.guid,{params:{playhead_time:t,duration:this._store.getState().duration}}])}catch(e){}}this.trigger(this._wrapper,"onTimeUpdate",{percent:e,time:t,duration:this._store.getState().duration})},getPageName:function(e){var t=this.getVideoContent();if(t.pageName)return t.pageName;var n=this._store.getState().duration;return"WSJLive_Video_"+this._videodata.name+"_"+n},setConvivaMetaData:function(){var e=this._videodata;this._convivaContentMetadata=new Conviva.ContentMetadata,this._convivaContentMetadata.streamUrl=e.hlsNoCaptions,this._convivaContentMetadata.assetName=e.name+" - "+e.guid,this._convivaContentMetadata.streamType="vod"===e.state?Conviva.ContentMetadata.StreamType.VOD:Conviva.ContentMetadata.StreamType.LIVE,this._convivaContentMetadata.applicationName="WEB V3",this._convivaContentMetadata.viewerId=T.getCookie("REMOTE_USER"),this._convivaContentMetadata.defaultResource="Akamai",this._convivaContentMetadata.encodedFrameRate=30,this._convivaContentMetadata.duration=this._store.getState().duration,this._convivaContentMetadata.isLive=this._isLive,this._adId&&(this._convivaContentMetadata.adId=this._adId);var t={};t.isLive=e.state,t.section=void 0!==this.getSectionSubsection(e)[0]?this.getSectionSubsection(e)[0]:"",t.subsection=void 0!==this.getSectionSubsection(e)[1]?this.getSectionSubsection(e)[1]:"",t.column=e.column,t.package=e.column,t.doctype=e.doctypeID,t.guid=e.guid,t.episodeNumber=e.episodeNumber,t.seriesName=e.seriesName,t.pubDate=e.publishedDate,t.site=window.location.hostname,t.page=window.location.hostname+window.location.pathname,t.streamProtocol="HLS",t.playerVendor="Internal",t.playerVersion=this._version,t.adLibraryVersion="09099",t.accessType=T.getCookie("REMOTE_USER")?"WSJ_sub_yes":"WSJ_free",t.channel=this.getChannel(),t.genre=this._videodata.showName?this._videodata.showName:this._videodata.name,this._convivaContentMetadata.custom=t,null!==this._convivaContentSessionKey&&this._convivaClient.updateContentMetadata(this._convivaContentSessionKey,this._convivaContentMetadata)},getUserTypeVar:function(){var e,t,n=null;if(window.utag_data&&window.utag_data.user_type)n=window.utag_data.user_type;else{var i=document.querySelector('meta[name="user.type"]');null!==i&&(n=i.getAttribute("content"))}var r;n?void 0===(r={nonsubscriber:"free",subscriber:"sub_yes",freeregister:"mem_yes",procbsubscriber:"sub_yes",prosubscriber:"sub_yes",reguser:"mem_yes",member:"mem_yes"}[n.toLowerCase()])?r="free":"free"===r&&T.getCookie("TR")&&(r="reg_yes"):r="free";var a=null!==(e=null===(t=window.utag_data)||void 0===t?void 0:t.page_site_product)&&void 0!==e?e:"WSJ";return"".concat(a,"_").concat(r)},getChannel:function(){var e="";try{e=null!==this._settings.channel?this._settings.channel:window.s?s.channel:T.getChannelFromDomain(document.domain)}catch(t){e=T.getChannelFromDomain(document.domain)}return e},getHostName:function(e){var t=e.match(/:\/\/(www[0-9]?\.)?(.[^/:]+)/i);return null!=t&&t.length>2&&"string"==typeof t[2]&&t[2].length>0?t[2]:null},getVideoContent:function(){try{if(window!=window.top){if(void 0!==window.parent.s)return window.parent.s}else if(void 0!==window.s)return window.s;return!1}catch(e){return!1}},debounce:function(e,t,n){var i;return function(){var r=this,a=arguments,o=function(){i=null,n||e.apply(r,a)},s=n&&!i;clearTimeout(i),i=setTimeout(o,t),s&&e.apply(r,a)}},trackInView:function(){if(this._mediaHeartbeat){var e=this._container.getBoundingClientRect(),t=e.top>=0&&e.left>=0&&e.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&e.right<=(window.innerWidth||document.documentElement.clientWidth);return t&&(window.removeEventListener("scroll",this._trackInViewListenerReference),svid.linkTrackEvents=svid.events="event141",svid.linkTrackVars="pageName,events,eVar4,eVar11,eVar3,eVar32,eVar26,channel,prop1,prop19,prop2,prop26,prop4,prop20,eVar72,eVar73,eVar38,eVar114,list3",window.utag_data&&(svid.pageName=window.utag_data.article_headline_post?window.utag_data.article_headline_post:"WSJ_Article_"+window.utag_data.article_type+"_"+window.utag_data.article_headline,svid.eVar11=window.utag_data.page_site?window.utag_data.page_site:"D=ch",svid.eVar3=window.utag_data.user_ref?window.utag_data.user_ref:T.getCookie("TR"),svid.eVar32=window.utag_data.user_tag?window.utag_data.user_tag:"",svid.eVar26=window.utag_data.user_type_post?window.utag_data.user_type_post:"",svid.prop1=window.utag_data.page_content_type?window.utag_data.page_content_type:"",svid.prop19=window.utag_data.page_content_type_detail_post?window.utag_data.page_content_type_detail_post:"",svid.prop2=window.utag_data.page_section_post?window.utag_data.page_section_post:"",svid.prop26=window.utag_data.page_subsection_post?window.utag_data.page_subsection_post:"",svid.prop4=window.utag_data.article_headline_post?window.utag_data.article_headline_post:"",svid.prop20=window.utag_data.article_id?window.utag_data.article_id:"",svid.eVar72=window.location!=window.parent.location?document.referrer:document.location.href,svid.eVar73=window.utag_data.article_id?window.utag_data.article_id:"",svid.eVar38=svid.prop19),svid.eVar114=this._videodata.name,svid.list3="video_"+this._videodata.guid,svid.tl(!0,"o","Video in View")),t}return!1},hasFlashVersionOrBetter:function(e,t){var n;if(t=t||0,navigator.plugins&&navigator.plugins.length>0){var i="application/x-shockwave-flash",r=navigator.mimeTypes;r&&r[i]&&r[i].enabledPlugin&&r[i].enabledPlugin.description&&(n=r[i].enabledPlugin.description.replace(/^.*?([0-9]+)\.([0-9])+.*$/,"$1,$2").split(","))}else{var a=null;try{a=new ActiveXObject("ShockwaveFlash.ShockwaveFlash")}catch(e){return!1}if(null!=a){var o;try{o=a.GetVariable("$version")}catch(e){return!1}n=o.replace(/^.*?([0-9]+,[0-9]+).*$/,"$1").split(",")}}if(n){var s=parseInt(n[0],10);return e>s||e==s&&t>=parseInt(n[1],10)}return!1},getAdData:function(){var e="",t={};"string"==typeof this.getMeta("user.type")&&""!==this.getMeta("user.type")&&(t.usertype=this.getMeta("user.type")),"string"==typeof this.getMeta("page.id")&&""!==this.getMeta("page.id")&&(t.pageid=this.getMeta("page.id")),"string"==typeof this.getMeta("article.section")&&""!==this.getMeta("article.section")&&(t.articlesection=this.getMeta("article.section")),"string"==typeof this.getMeta("article.type")&&""!==this.getMeta("article.type")&&(t.articletype=this.getMeta("article.type")),"string"==typeof this.getMeta("page.content.type")&&""!==this.getMeta("page.content.type")&&(t.pagecontenttype=this.getMeta("page.content.type")),t.refsec=encodeURIComponent(b.getRefsecKeyValue()),"object"==a(window.utag_data)&&(window.utag_data.user_type&&(t.usertype=window.utag_data.user_type),window.utag_data.article_id&&(t.articleid=window.utag_data.article_id),window.utag_data.article_type&&(t.articletype=window.utag_data.article_type),window.utag_data.page_section&&(t.articlesection=window.utag_data.page_section),window.utag_data.page_subsection&&(t.articlepage=window.utag_data.page_subsection));try{return Object.keys(t).forEach((function(n,i){e+="%26"+n+"%3D"+t[n]})),e}catch(e){return""}return""},getMeta:function(e){try{for(var t=document.getElementsByTagName("meta"),n=0;n<t.length;n++)if(t[n].getAttribute("name")==e)return"_"+t[n].getAttribute("content");return""}catch(e){return""}},extend:function(e,t){var n,i={};for(n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n]);for(n in t)Object.prototype.hasOwnProperty.call(t,n)&&(i[n]=t[n]);return i},loadScript:function(e,t,n){var i=this,r=document.createElement("script");r.type="text/javascript",r.readyState?r.onreadystatechange=function(){"loaded"!=r.readyState&&"complete"!=r.readyState||(r.onreadystatechange=null,t())}:(r.onload=function(){t(i)},r.onerror=function(){n(i)}),r.src=e,document.getElementsByTagName("head")[0].appendChild(r)},trigger:function(e,t,n){var i=e;if(document.createEvent)(r=new CustomEvent("build",n)).data=n,r.initEvent(t,!0,!0),i.dispatchEvent(r);else if(document.createEventObject){var r;(r=document.createEventObject()).data=n,i.fireEvent("on"+t,r)}},createMark:function(e){T.createMark(e)}};e.exports=function(e){if(this.length=1,"string"===a(e).toLowerCase()){var t=document.querySelectorAll(e);t.length>0&&(this.element=t[0])}else this.element=e;this.WSJVideo=function(e){new D(this.element,e).init();return this.element.data=function(){return this.element},this.element};try{this.data=this.element.data}catch(t){}return this},function(){function e(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n}e.prototype=window.Event.prototype,window.CustomEvent=e}()},function(e,t,n){n(89),n(121),n(124),n(129),n(131),void 0===window.fetch&&(window.fetch=n(136).default),void 0===window.ResizeObserver&&(window.ResizeObserver=n(207).ResizeObserver)},function(e,t,n){n(90),n(94),n(105),n(108),n(119),n(120);var i=n(42);e.exports=i.Promise},function(e,t,n){var i=n(32),r=n(19),a=n(93);i||r(Object.prototype,"toString",a,{unsafe:!0})},function(e,t,n){var i=n(60);e.exports=i&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},function(e,t,n){var i=n(2),r=n(36),a=i.WeakMap;e.exports="function"==typeof a&&/native code/.test(r(a))},function(e,t,n){"use strict";var i=n(32),r=n(61);e.exports=i?{}.toString:function(){return"[object "+r(this)+"]"}},function(e,t,n){"use strict";var i=n(95).charAt,r=n(26),a=n(62),o=r.set,s=r.getterFor("String Iterator");a(String,"String",(function(e){o(this,{type:"String Iterator",string:String(e),index:0})}),(function(){var e,t=s(this),n=t.string,r=t.index;return r>=n.length?{value:void 0,done:!0}:(e=i(n,r),t.index+=e.length,{value:e,done:!1})}))},function(e,t,n){var i=n(39),r=n(27),a=function(e){return function(t,n){var a,o,s=String(r(t)),l=i(n),c=s.length;return l<0||l>=c?e?"":void 0:(a=s.charCodeAt(l))<55296||a>56319||l+1===c||(o=s.charCodeAt(l+1))<56320||o>57343?e?s.charAt(l):a:e?s.slice(l,l+2):o-56320+(a-55296<<10)+65536}};e.exports={codeAt:a(!1),charAt:a(!0)}},function(e,t,n){var i=n(8),r=n(97),a=n(40),o=n(18);e.exports=function(e,t){for(var n=r(t),s=o.f,l=a.f,c=0;c<n.length;c++){var u=n[c];i(e,u)||s(e,u,l(t,u))}}},function(e,t,n){var i=n(20),r=n(98),a=n(66),o=n(12);e.exports=i("Reflect","ownKeys")||function(e){var t=r.f(o(e)),n=a.f;return n?t.concat(n(e)):t}},function(e,t,n){var i=n(64),r=n(44).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return i(e,r)}},function(e,t,n){var i=n(39),r=Math.max,a=Math.min;e.exports=function(e,t){var n=i(e);return n<0?r(n+t,0):a(n,t)}},function(e,t,n){"use strict";var i=n(68).IteratorPrototype,r=n(70),a=n(35),o=n(46),s=n(24),l=function(){return this};e.exports=function(e,t,n){var c=t+" Iterator";return e.prototype=r(i,{next:a(1,n)}),o(e,c,!1,!0),s[c]=l,e}},function(e,t,n){var i=n(7);e.exports=!i((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}))},function(e,t,n){var i=n(14),r=n(18),a=n(12),o=n(71);e.exports=i?Object.defineProperties:function(e,t){a(e);for(var n,i=o(t),s=i.length,l=0;s>l;)r.f(e,n=i[l++],t[n]);return e}},function(e,t,n){var i=n(12),r=n(104);e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{(e=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(n,[]),t=n instanceof Array}catch(e){}return function(n,a){return i(n),r(a),t?e.call(n,a):n.__proto__=a,n}}():void 0)},function(e,t,n){var i=n(11);e.exports=function(e){if(!i(e)&&null!==e)throw TypeError("Can't set "+String(e)+" as a prototype");return e}},function(e,t,n){var i=n(2),r=n(106),a=n(107),o=n(16),s=n(4),l=s("iterator"),c=s("toStringTag"),u=a.values;for(var d in r){var h=i[d],p=h&&h.prototype;if(p){if(p[l]!==u)try{o(p,l,u)}catch(e){p[l]=u}if(p[c]||o(p,c,d),r[d])for(var _ in a)if(p[_]!==a[_])try{o(p,_,a[_])}catch(e){p[_]=a[_]}}}},function(e,t){e.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},function(e,t,n){"use strict";var i=n(28),r=n(47),a=n(24),o=n(26),s=n(62),l=o.set,c=o.getterFor("Array Iterator");e.exports=s(Array,"Array",(function(e,t){l(this,{type:"Array Iterator",target:i(e),index:0,kind:t})}),(function(){var e=c(this),t=e.target,n=e.kind,i=e.index++;return!t||i>=t.length?(e.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:i,done:!1}:"values"==n?{value:t[i],done:!1}:{value:[i,t[i]],done:!1}}),"values"),a.Arguments=a.Array,r("keys"),r("values"),r("entries")},function(e,t,n){"use strict";var i,r,a,o,s=n(15),l=n(23),c=n(2),u=n(20),d=n(73),h=n(19),p=n(109),_=n(46),f=n(110),g=n(11),v=n(25),m=n(111),y=n(17),S=n(36),E=n(74),b=n(115),T=n(75),w=n(76).set,A=n(116),C=n(79),I=n(117),P=n(48),k=n(80),M=n(26),D=n(67),O=n(4),R=n(118),N=O("species"),L="Promise",x=M.get,F=M.set,V=M.getterFor(L),B=d,U=c.TypeError,j=c.document,H=c.process,K=u("fetch"),Y=P.f,q=Y,G="process"==y(H),W=!!(j&&j.createEvent&&c.dispatchEvent),Q=D(L,(function(){if(!(S(B)!==String(B))){if(66===R)return!0;if(!G&&"function"!=typeof PromiseRejectionEvent)return!0}if(l&&!B.prototype.finally)return!0;if(R>=51&&/native code/.test(B))return!1;var e=B.resolve(1),t=function(e){e((function(){}),(function(){}))};return(e.constructor={})[N]=t,!(e.then((function(){}))instanceof t)})),z=Q||!b((function(e){B.all(e).catch((function(){}))})),X=function(e){var t;return!(!g(e)||"function"!=typeof(t=e.then))&&t},J=function(e,t,n){if(!t.notified){t.notified=!0;var i=t.reactions;A((function(){for(var r=t.value,a=1==t.state,o=0;i.length>o;){var s,l,c,u=i[o++],d=a?u.ok:u.fail,h=u.resolve,p=u.reject,_=u.domain;try{d?(a||(2===t.rejection&&te(e,t),t.rejection=1),!0===d?s=r:(_&&_.enter(),s=d(r),_&&(_.exit(),c=!0)),s===u.promise?p(U("Promise-chain cycle")):(l=X(s))?l.call(s,h,p):h(s)):p(r)}catch(e){_&&!c&&_.exit(),p(e)}}t.reactions=[],t.notified=!1,n&&!t.rejection&&$(e,t)}))}},Z=function(e,t,n){var i,r;W?((i=j.createEvent("Event")).promise=t,i.reason=n,i.initEvent(e,!1,!0),c.dispatchEvent(i)):i={promise:t,reason:n},(r=c["on"+e])?r(i):"unhandledrejection"===e&&I("Unhandled promise rejection",n)},$=function(e,t){w.call(c,(function(){var n,i=t.value;if(ee(t)&&(n=k((function(){G?H.emit("unhandledRejection",i,e):Z("unhandledrejection",e,i)})),t.rejection=G||ee(t)?2:1,n.error))throw n.value}))},ee=function(e){return 1!==e.rejection&&!e.parent},te=function(e,t){w.call(c,(function(){G?H.emit("rejectionHandled",e):Z("rejectionhandled",e,t.value)}))},ne=function(e,t,n,i){return function(r){e(t,n,r,i)}},ie=function(e,t,n,i){t.done||(t.done=!0,i&&(t=i),t.value=n,t.state=2,J(e,t,!0))},re=function(e,t,n,i){if(!t.done){t.done=!0,i&&(t=i);try{if(e===n)throw U("Promise can't be resolved itself");var r=X(n);r?A((function(){var i={done:!1};try{r.call(n,ne(re,e,i,t),ne(ie,e,i,t))}catch(n){ie(e,i,n,t)}})):(t.value=n,t.state=1,J(e,t,!1))}catch(n){ie(e,{done:!1},n,t)}}};Q&&(B=function(e){m(this,B,L),v(e),i.call(this);var t=x(this);try{e(ne(re,this,t),ne(ie,this,t))}catch(e){ie(this,t,e)}},(i=function(e){F(this,{type:L,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=p(B.prototype,{then:function(e,t){var n=V(this),i=Y(T(this,B));return i.ok="function"!=typeof e||e,i.fail="function"==typeof t&&t,i.domain=G?H.domain:void 0,n.parent=!0,n.reactions.push(i),0!=n.state&&J(this,n,!1),i.promise},catch:function(e){return this.then(void 0,e)}}),r=function(){var e=new i,t=x(e);this.promise=e,this.resolve=ne(re,e,t),this.reject=ne(ie,e,t)},P.f=Y=function(e){return e===B||e===a?new r(e):q(e)},l||"function"!=typeof d||(o=d.prototype.then,h(d.prototype,"then",(function(e,t){var n=this;return new B((function(e,t){o.call(n,e,t)})).then(e,t)}),{unsafe:!0}),"function"==typeof K&&s({global:!0,enumerable:!0,forced:!0},{fetch:function(e){return C(B,K.apply(c,arguments))}}))),s({global:!0,wrap:!0,forced:Q},{Promise:B}),_(B,L,!1,!0),f(L),a=u(L),s({target:L,stat:!0,forced:Q},{reject:function(e){var t=Y(this);return t.reject.call(void 0,e),t.promise}}),s({target:L,stat:!0,forced:l||Q},{resolve:function(e){return C(l&&this===a?B:this,e)}}),s({target:L,stat:!0,forced:z},{all:function(e){var t=this,n=Y(t),i=n.resolve,r=n.reject,a=k((function(){var n=v(t.resolve),a=[],o=0,s=1;E(e,(function(e){var l=o++,c=!1;a.push(void 0),s++,n.call(t,e).then((function(e){c||(c=!0,a[l]=e,--s||i(a))}),r)})),--s||i(a)}));return a.error&&r(a.value),n.promise},race:function(e){var t=this,n=Y(t),i=n.reject,r=k((function(){var r=v(t.resolve);E(e,(function(e){r.call(t,e).then(n.resolve,i)}))}));return r.error&&i(r.value),n.promise}})},function(e,t,n){var i=n(19);e.exports=function(e,t,n){for(var r in t)i(e,r,t[r],n);return e}},function(e,t,n){"use strict";var i=n(20),r=n(18),a=n(4),o=n(14),s=a("species");e.exports=function(e){var t=i(e),n=r.f;o&&t&&!t[s]&&n(t,s,{configurable:!0,get:function(){return this}})}},function(e,t){e.exports=function(e,t,n){if(!(e instanceof t))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return e}},function(e,t,n){var i=n(4),r=n(24),a=i("iterator"),o=Array.prototype;e.exports=function(e){return void 0!==e&&(r.Array===e||o[a]===e)}},function(e,t,n){var i=n(61),r=n(24),a=n(4)("iterator");e.exports=function(e){if(null!=e)return e[a]||e["@@iterator"]||r[i(e)]}},function(e,t,n){var i=n(12);e.exports=function(e,t,n,r){try{return r?t(i(n)[0],n[1]):t(n)}catch(t){var a=e.return;throw void 0!==a&&i(a.call(e)),t}}},function(e,t,n){var i=n(4)("iterator"),r=!1;try{var a=0,o={next:function(){return{done:!!a++}},return:function(){r=!0}};o[i]=function(){return this},Array.from(o,(function(){throw 2}))}catch(e){}e.exports=function(e,t){if(!t&&!r)return!1;var n=!1;try{var a={};a[i]=function(){return{next:function(){return{done:n=!0}}}},e(a)}catch(e){}return n}},function(e,t,n){var i,r,a,o,s,l,c,u,d=n(2),h=n(40).f,p=n(17),_=n(76).set,f=n(77),g=d.MutationObserver||d.WebKitMutationObserver,v=d.process,m=d.Promise,y="process"==p(v),S=h(d,"queueMicrotask"),E=S&&S.value;E||(i=function(){var e,t;for(y&&(e=v.domain)&&e.exit();r;){t=r.fn,r=r.next;try{t()}catch(e){throw r?o():a=void 0,e}}a=void 0,e&&e.enter()},y?o=function(){v.nextTick(i)}:g&&!f?(s=!0,l=document.createTextNode(""),new g(i).observe(l,{characterData:!0}),o=function(){l.data=s=!s}):m&&m.resolve?(c=m.resolve(void 0),u=c.then,o=function(){u.call(c,i)}):o=function(){_.call(d,i)}),e.exports=E||function(e){var t={fn:e,next:void 0};a&&(a.next=t),r||(r=t,o()),a=t}},function(e,t,n){var i=n(2);e.exports=function(e,t){var n=i.console;n&&n.error&&(1===arguments.length?n.error(e):n.error(e,t))}},function(e,t,n){var i,r,a=n(2),o=n(78),s=a.process,l=s&&s.versions,c=l&&l.v8;c?r=(i=c.split("."))[0]+i[1]:o&&(!(i=o.match(/Edge\/(\d+)/))||i[1]>=74)&&(i=o.match(/Chrome\/(\d+)/))&&(r=i[1]),e.exports=r&&+r},function(e,t,n){"use strict";var i=n(15),r=n(25),a=n(48),o=n(80),s=n(74);i({target:"Promise",stat:!0},{allSettled:function(e){var t=this,n=a.f(t),i=n.resolve,l=n.reject,c=o((function(){var n=r(t.resolve),a=[],o=0,l=1;s(e,(function(e){var r=o++,s=!1;a.push(void 0),l++,n.call(t,e).then((function(e){s||(s=!0,a[r]={status:"fulfilled",value:e},--l||i(a))}),(function(e){s||(s=!0,a[r]={status:"rejected",reason:e},--l||i(a))}))})),--l||i(a)}));return c.error&&l(c.value),n.promise}})},function(e,t,n){"use strict";var i=n(15),r=n(23),a=n(73),o=n(7),s=n(20),l=n(75),c=n(79),u=n(19);i({target:"Promise",proto:!0,real:!0,forced:!!a&&o((function(){a.prototype.finally.call({then:function(){}},(function(){}))}))},{finally:function(e){var t=l(this,s("Promise")),n="function"==typeof e;return this.then(n?function(n){return c(t,e()).then((function(){return n}))}:e,n?function(n){return c(t,e()).then((function(){throw n}))}:e)}}),r||"function"!=typeof a||a.prototype.finally||u(a.prototype,"finally",s("Promise").prototype.finally)},function(e,t,n){n(122);var i=n(42);e.exports=i.Object.assign},function(e,t,n){var i=n(15),r=n(123);i({target:"Object",stat:!0,forced:Object.assign!==r},{assign:r})},function(e,t,n){"use strict";var i=n(14),r=n(7),a=n(71),o=n(66),s=n(63),l=n(45),c=n(41),u=Object.assign,d=Object.defineProperty;e.exports=!u||r((function(){if(i&&1!==u({b:1},u(d({},"a",{enumerable:!0,get:function(){d(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},n=Symbol();return e[n]=7,"abcdefghijklmnopqrst".split("").forEach((function(e){t[e]=e})),7!=u({},e)[n]||"abcdefghijklmnopqrst"!=a(u({},t)).join("")}))?function(e,t){for(var n=l(e),r=arguments.length,u=1,d=o.f,h=s.f;r>u;)for(var p,_=c(arguments[u++]),f=d?a(_).concat(d(_)):a(_),g=f.length,v=0;g>v;)p=f[v++],i&&!h.call(_,p)||(n[p]=_[p]);return n}:u},function(e,t,n){n(125);var i=n(49);e.exports=i("Array","findIndex")},function(e,t,n){"use strict";var i=n(15),r=n(126).findIndex,a=n(47),o=n(81),s=!0,l=o("findIndex");"findIndex"in[]&&Array(1).findIndex((function(){s=!1})),i({target:"Array",proto:!0,forced:s||!l},{findIndex:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}}),a("findIndex")},function(e,t,n){var i=n(29),r=n(41),a=n(45),o=n(43),s=n(127),l=[].push,c=function(e){var t=1==e,n=2==e,c=3==e,u=4==e,d=6==e,h=5==e||d;return function(p,_,f,g){for(var v,m,y=a(p),S=r(y),E=i(_,f,3),b=o(S.length),T=0,w=g||s,A=t?w(p,b):n?w(p,0):void 0;b>T;T++)if((h||T in S)&&(m=E(v=S[T],T,y),e))if(t)A[T]=m;else if(m)switch(e){case 3:return!0;case 5:return v;case 6:return T;case 2:l.call(A,v)}else if(u)return!1;return d?-1:c||u?u:A}};e.exports={forEach:c(0),map:c(1),filter:c(2),some:c(3),every:c(4),find:c(5),findIndex:c(6)}},function(e,t,n){var i=n(11),r=n(128),a=n(4)("species");e.exports=function(e,t){var n;return r(e)&&("function"!=typeof(n=e.constructor)||n!==Array&&!r(n.prototype)?i(n)&&null===(n=n[a])&&(n=void 0):n=void 0),new(void 0===n?Array:n)(0===t?0:t)}},function(e,t,n){var i=n(17);e.exports=Array.isArray||function(e){return"Array"==i(e)}},function(e,t,n){n(130);var i=n(49);e.exports=i("Array","includes")},function(e,t,n){"use strict";var i=n(15),r=n(65).includes,a=n(47);i({target:"Array",proto:!0,forced:!n(81)("indexOf",{ACCESSORS:!0,1:0})},{includes:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}}),a("includes")},function(e,t,n){n(132);var i=n(49);e.exports=i("String","includes")},function(e,t,n){"use strict";var i=n(15),r=n(133),a=n(27);i({target:"String",proto:!0,forced:!n(135)("includes")},{includes:function(e){return!!~String(a(this)).indexOf(r(e),arguments.length>1?arguments[1]:void 0)}})},function(e,t,n){var i=n(134);e.exports=function(e){if(i(e))throw TypeError("The method doesn't accept regular expressions");return e}},function(e,t,n){var i=n(11),r=n(17),a=n(4)("match");e.exports=function(e){var t;return i(e)&&(void 0!==(t=e[a])?!!t:"RegExp"==r(e))}},function(e,t,n){var i=n(4)("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[i]=!1,"/./"[e](t)}catch(e){}}return!1}},function(e,t,n){"use strict";n.r(t),t.default=function(e,t){return t=t||{},new Promise((function(n,i){var r=new XMLHttpRequest,a=[],o=[],s={},l=function(){return{ok:2==(r.status/100|0),statusText:r.statusText,status:r.status,url:r.responseURL,text:function(){return Promise.resolve(r.responseText)},json:function(){return Promise.resolve(JSON.parse(r.responseText))},blob:function(){return Promise.resolve(new Blob([r.response]))},clone:l,headers:{keys:function(){return a},entries:function(){return o},get:function(e){return s[e.toLowerCase()]},has:function(e){return e.toLowerCase()in s}}}};for(var c in r.open(t.method||"get",e,!0),r.onload=function(){r.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,(function(e,t,n){a.push(t=t.toLowerCase()),o.push([t,n]),s[t]=s[t]?s[t]+","+n:n})),n(l())},r.onerror=i,r.withCredentials="include"==t.credentials,t.headers)r.setRequestHeader(c,t.headers[c]);r.send(t.body||null)}))}},function(e,t,n){},function(e,t){
/*! vidora-client 1.2.7 10-01-2015 */
try{!function(e,t,n){function i(e){oe.console&&console.log&&console.log(e)}function r(e){oe.console&&console.error&&console.error(e)}function a(e){throw new Error(e)}function o(e,t){return e.forEach(t)}function s(e,t){return e.map(t)}function l(e){return String(e)}function c(e){return void 0===e}function u(e){return null===e}function d(e){return c(e)||u(e)}function h(e){return!u(e)&&"object"==typeof e}function p(e){return!d(e)&&e.constructor===Array}function _(e,t){return d(e)?t:e}function f(e,t){var n=_(e,{}),i=_(t,{});for(var r in i)n[r]=i[r];return n}function g(e){var t=_(e,{});return h(t)||a("Options should be an object."),t}function v(e){return JSON.parse(e)}function m(e){return JSON.stringify(e)}function y(e){return encodeURIComponent(e).replace(/!/g,"%21").replace(/\*/g,"%2A").replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29")}function S(e){var t=[];for(var n in e){var i=e[n],r=c(i)?[n]:[n,i];t.push(r)}return t.sort((function(e,t){return function(e,t){return t>e?-1:e>t?1:0}(e,t)})),s(t,(function(e){return s(e,y).join("=")})).join("&")}function E(){return(new Date).getTime()}function b(e,t){return e.indexOf(t)>=0}function T(){return Math.random()}function w(){return Math.floor(65536*T())}function A(){return s(ue(10),(function(e){var t=(e>>1).toString(32);return de.slice(t.length)+t})).join("")}function C(e,t){return function(e,t,n){try{return e.setItem(t,m(n)),!0}catch(e){return r(e),!1}}(he,e,t)}function I(e){return function(e,t){var n=e.getItem(t);return d(n)?null:v(n)}(he,e)}function P(e){!function(e,t){e.removeItem(t)}(he,e)}function k(e){!function(e,t){for(var n=0;n<e.length;n++){t(e.key(n))}}(he,e)}function M(){return E()+":"+T()}function D(e){return e+ye}function O(e){return I(e)}function R(e){P(e),setTimeout((function(){P(e)}),100)}function N(e){return I(e)}function L(e){var t=D(e);P(e),R(t)}function x(e,t,n){var i=me+M(),r=function(e){var t=D(e),n=0;return setInterval((function(){C(t,n+=1)}),ge)}(i);return function(e,t){C(e,t)}(i,{data:e,guid:n,retry:0}),{key:i,guid:n,clock:r}}function F(){var e={};return k((function(t){(function(e){return 0===e.indexOf(me)&&-1!==e.indexOf(ye)})(t)&&(e[t]=O(t))})),e}function V(){var e=[];return k((function(t){(function(e){return 0===e.indexOf(me)&&-1===e.indexOf(ye)})(t)&&e.push(t)})),e}function B(e,t,n){i("XHR Request Succeded: "+n.url)}function U(e,t,n){r("XHR Request Failed: "+n.url+" "+e)}function j(e,t,n){r("XHR Timeout: "+n.url)}function H(e){return e}function K(e){return e}function Y(e,t){var n=function(e,t,n){var i=new XMLHttpRequest;i.open(e,t.url,n);var r="onSuccess"in t?t.onSuccess:B,a="onError"in t?t.onError:U,o="onTimeout"in t?t.onTimeout:j,s="unmarshall"in t?t.unmarshall:H;return"crossDomainCredentials"in t&&(i.withCredentials=!0===t.crossDomainCredentials),"timeoutMs"in t&&(i.timeout=t.timeoutMs,i.ontimeout=function(){o.call({},t)}),i.onload=function(){i.readyState===Ee&&200===i.status?r.call({},s(i.responseText),i.status,t):a.call({},i.statusText,i.status,i.readyState,t)},i.onerror=function(){var e="Unknown Error.";d(i.status)&&d(i.statusText)?e="Unknown Error.":"statusText"in i&&(e=i.statusText),a.call({},e,i.status,i.readyState,t)},i}(e,t,!0);if("data"in t){var i="marshall"in t?t.marshall:K;"dataType"in t&&n.setRequestHeader("Content-type",t.dataType),n.send(i(t.data))}else n.send();return n}function q(e){Y("GET",e)}function G(e,t){delete oe[Te][t],we.removeChild(e)}function W(e){var t="cb_"+E().toString(16)+"_"+T().toString(16),n=se.createElement("script");oe[Te][t]=function(i){G(n,t),e.onSuccess.call({},i,Ae,e)};var i=function(){t in oe[Te]&&(G(n,t),e.onError.call({},"jsonp error",Ce,0,be,e))};n.onerror=i,n.onload=i,n.onreadystatechange=function(){("loaded"===n.readyState||"complete"===n.readyState)&&i()},n.type="text/javascript",n.src=e.url+"&format=jsonp&callback="+encodeURIComponent(t),we.appendChild(n)}function Q(){}function z(e,t){if(f(t,Me),t.data.guid=e.guid,!d(le[Ie])&&d(t.onSuccess)){(function(e,t){return le[Ie](e,t)})(t.url,t.marshall(t.data))&&Ne(e)}else{var n=t.onSuccess||Q;t.onSuccess=function(){Ne(e),n()},function(e){Y("POST",e)}(t)}}function X(e,t,n){var i=g(n),r={url:function(e,t,n){var i=d(n._baseURI)?e._apiHost:n._baseURI,r=f(f({api_key:e.token},n.query),n._params),a=y(e.getUserId()),o=t.replace("%user_id%",a);return i+"/"+e.apiVersion+o+"?"+S(r)}(e,t,i)};f(r,De),"success"in i&&(r.onSuccess=i.success),"error"in i&&(r.onError=i.error),(function(){var e=le.userAgent;return b(e,"MSIE ")||b(e,"Trident/")||b(e,"Edge/")}()?W:q)(r)}function J(e,t){return function(e){return"string"==typeof e}(e)?e:t(e)}function Z(e,t){!function(e,t,n){var i=g(n),r=f({api_key:e.token},i._params),a={url:_(i._baseURI,e._analyticsHost)+"/"+e.apiVersion+"/validate?"+S(r),data:{data:t}},o=Re(a);"success"in i&&(a.onSuccess=i.success),z(o,a)}(e,s(t,(function(e){return e[0]})))}function $(e,t,n,i){i.query=function(e,t){if(d(e))return e;for(var n={},i=0;i<t.length;i++)t[i]in e&&(n[t[i]]=e[t[i]]);return n}(i.query,n),X(e,t,i)}function ee(e,t,n){e in n&&(t[e]=n[e])}function te(e){d(e)?a("Vidora API constructed without any options."):h(e)?"apiKey"in e||a("Vidora API constructed without an API Key"):a("Vidora API should be constructed with an option object.");var t=f({},e);this.token=t.apiKey,this.apiVersion="v1";var n=this;this._queue=function(e,t,n){function i(){e(r),r=[]}var r=[],a=setTimeout((function(){}),0);return{add:function(e){clearTimeout(a),r.push(e),r.length>=n?i():a=setTimeout(i,t)},flush:function(){clearTimeout(a),i()}}}((function(e){Z(n,e)}),500,30),this._analyticsHost=Pe,this._apiHost=ke,this._sendMode=Oe,this._build=ae,this._userId=null,Le(z)}function ne(e){e.call({},Ke,Ye)}function ie(e){var t=e[0],n=e.slice(1);t in Ke||a("Invalid api call '"+t+"'"),Ke[t].apply(Ke,n)}function re(e){p(e)?ie(e):function(e){return"function"==typeof e}(e)?ne(e):a("typeof call item '"+typeof e+"' not supported.")}var ae={version:"1.2.7",rev:"70defd4dcf46f60d01ad6075900d8e0381a4299b"},oe=window,se=document,le=navigator,ce=1,ue=!c(oe.Uint16Array)&&!c(oe.crypto)?function(e){var t=new Uint16Array(e);crypto.getRandomValues(t);for(var n=[],i=0;i<t.length;i++)n.push(t[i]);return n}:function(e){for(var t=[],n=0;ce>n&&e>n;n++)t.push(65535&(w()^E()));for(;e>n;n++)t.push(w());return t},de="000",he=(oe.sessionStorage,oe.localStorage),pe=50,_e=pe,fe=3,ge=5,ve=3*ge,me="vidoraRequest:",ye=".clock",Se=!1,Ee=4,be=2,Te="_vidora_jsonp";oe[Te]=oe[Te]||{};var we=se.head||se.body||se,Ae=-200,Ce=-400,Ie="sendBeacon",Pe="https://a.vidora.com",ke="//api.vidora.com",Me={marshall:m,dataType:"text/plain"},De={unmarshall:v},Oe=0,Re=Q,Ne=Q,Le=Q;(function(e){var t="string"==typeof e.setItem;return!d(e)&&!t})(he)&&(Re=function(e){return x(e,0,M())},Ne=function(e){var t=e.key;(function(e,t){var n=D(e);t&&clearInterval(t),R(n)})(t,e.clock),L(t)},Le=function(e,t){if(!Se){Se=!0;var n=V(),i=F();!function(e){if(e.length>pe){e.sort();for(var t=e.length-_e,n=0;t>n;n++){L(e.shift())}}}(n);setTimeout((function(){!function(e){!function(e,t){for(var n in e)t(n)}(e,(function(t){var n=e[t],i=O(t);(d(i)||i===n)&&(delete e[t],R(t))}))}(i),function(e,t){var n=[];o(e,(function(e){var t=N(e);if(d(t));else{var i=t.retry+1;if(fe>i){var r=x(t.data,0,t.guid);n.push(r)}}L(e)})),o(n,(function(e){var n=N(e.key);t(e,n.data,n.guid)}))}(function(e,t){var n=[];return o(t,(function(t){D(t)in e||n.push(t)})),n}(i,n),e),Se=!1,t&&t()}),ve)}}),te.prototype.config=function(e){var t=g(e);"analyticsHost"in t&&(this._analyticsHost=t.analyticsHost),"apiHost"in t&&(this._apiHost=t.apiHost)},te.prototype.send=function(e,t,n){for(var i=p(t)?t:[t],r=this.getUserId(),o=this.getSessionId(),s=0;s<i.length;s++){var c=i[s],u=g(n),h={type:J(e,l),user_id:J(r,l),session_id:J(o,l)};d(c)||(h.content_id=J(c,l)),f(h,u.params);var _={};ee("success",_,u),ee("error",_,u),ee("timeout",_,u);var v=this._sendMode;switch(("click"===h.type||u.quicksend)&&(v=1),v){case 1:this._queue.add([h,_]),this._queue.flush();break;case Oe:this._queue.add([h,_]);break;default:a()}}};var xe="/users/%user_id%",Fe="/groups";te.prototype.getItems=function(e){$(this,xe+"/recommendations",["category","type","limit"],e)};var Ve=["group_ids"];te.prototype.getGroupRankings=function(e){$(this,xe+Fe+"/rankings",Ve,e)},te.prototype._pncItems=function(e){X(this,"/pnc"+xe+Fe+"/items",e)};var Be="vidoraUserId";te.prototype.getUUID=function(){var e=function(e){for(var t=se.cookie.split("; "),n=0;n<t.length;n++){var i=t[n],r=i.indexOf("=");if(-1!==r)if(i.slice(0,r)===e){var a=i.slice(r+1);return decodeURIComponent(a)}}return null}(Be);return u(e)&&(e=A(),function(e,t,n,i){var r=[];if(r.push(e+"="+encodeURIComponent(t)),n){var a=new Date;a.setTime(a.getTime()+1e3*n);var o="expires="+a.toUTCString();r.push(o)}r.push("path=/"),i&&r.push("domain="+i);var s=r.join("; ");se.cookie=s}(Be,e,5256e3)),e};var Ue=A().slice(0,10);te.prototype.getSessionId=function(){return Ue},te.prototype.setUserId=function(e){this._userId=e},te.prototype.getUserId=function(){return u(this._userId)&&(this._userId=this.getUUID()),this._userId};var je="vidora-client",He=te,Ke=null,Ye={_i:function(e,t){var n=f({apiKey:e},t);Ke=new He(n),i(je+" "+Ke._build.version+" "+Ke._build.rev)},_create:function(e){return new He(e)}};(function(e,t,n){if(e[n]&&!0===e[n]._init)r(je+" included twice!");else{oe=e,se=t;var i=e[n];n in e||(e[n]={}),e[n]._init=!0,e[n].push=ie,e[n].ready=ne,i&&(i.ready=ne,i.push=ie,o(i._q,re),i=null)}})(e,t,"vidora")}(window,document),n=window,document,i="vidora",(r={_q:[]}).ready=r.push=function(e){r._q.push(e)},i in n||(n[i]=r),n[i].ready((function(e,t){t._i("wsj.E4B14D56D6D304BA4A96A94B14D11AA9",void 0)})),window.vidora.ready((function(e){console.log("Vidora API finished initializing!")}))}catch(e){}var n,i,r},function(e,t){e.exports=function(){var e={};return function(){var e;!function(e){if(void 0===t)var t={};if(void 0===n)var n={};if(void 0===i)var i={};if(i.radio||(i.radio={}),i.plugin||(i.plugin={}),void 0===r)var r={};r.clock||(r.clock={}),function(e){"use strict";function t(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function n(e,n,i,r,a,o){return t(function(e,t){return e<<t|e>>>32-t}(t(t(n,e),t(r,o)),a),i)}function i(e,t,i,r,a,o,s){return n(t&i|~t&r,e,t,a,o,s)}function r(e,t,i,r,a,o,s){return n(t&r|i&~r,e,t,a,o,s)}function a(e,t,i,r,a,o,s){return n(t^i^r,e,t,a,o,s)}function o(e,t,i,r,a,o,s){return n(i^(t|~r),e,t,a,o,s)}function s(e,n){e[n>>5]|=128<<n%32,e[14+(n+64>>>9<<4)]=n;var s,l,c,u,d,h=1732584193,p=-271733879,_=-1732584194,f=271733878;for(s=0;s<e.length;s+=16)l=h,c=p,u=_,d=f,h=i(h,p,_,f,e[s],7,-680876936),f=i(f,h,p,_,e[s+1],12,-389564586),_=i(_,f,h,p,e[s+2],17,606105819),p=i(p,_,f,h,e[s+3],22,-1044525330),h=i(h,p,_,f,e[s+4],7,-176418897),f=i(f,h,p,_,e[s+5],12,1200080426),_=i(_,f,h,p,e[s+6],17,-1473231341),p=i(p,_,f,h,e[s+7],22,-45705983),h=i(h,p,_,f,e[s+8],7,1770035416),f=i(f,h,p,_,e[s+9],12,-1958414417),_=i(_,f,h,p,e[s+10],17,-42063),p=i(p,_,f,h,e[s+11],22,-1990404162),h=i(h,p,_,f,e[s+12],7,1804603682),f=i(f,h,p,_,e[s+13],12,-40341101),_=i(_,f,h,p,e[s+14],17,-1502002290),h=r(h,p=i(p,_,f,h,e[s+15],22,1236535329),_,f,e[s+1],5,-165796510),f=r(f,h,p,_,e[s+6],9,-1069501632),_=r(_,f,h,p,e[s+11],14,643717713),p=r(p,_,f,h,e[s],20,-373897302),h=r(h,p,_,f,e[s+5],5,-701558691),f=r(f,h,p,_,e[s+10],9,38016083),_=r(_,f,h,p,e[s+15],14,-660478335),p=r(p,_,f,h,e[s+4],20,-405537848),h=r(h,p,_,f,e[s+9],5,568446438),f=r(f,h,p,_,e[s+14],9,-1019803690),_=r(_,f,h,p,e[s+3],14,-187363961),p=r(p,_,f,h,e[s+8],20,1163531501),h=r(h,p,_,f,e[s+13],5,-1444681467),f=r(f,h,p,_,e[s+2],9,-51403784),_=r(_,f,h,p,e[s+7],14,1735328473),h=a(h,p=r(p,_,f,h,e[s+12],20,-1926607734),_,f,e[s+5],4,-378558),f=a(f,h,p,_,e[s+8],11,-2022574463),_=a(_,f,h,p,e[s+11],16,1839030562),p=a(p,_,f,h,e[s+14],23,-35309556),h=a(h,p,_,f,e[s+1],4,-1530992060),f=a(f,h,p,_,e[s+4],11,1272893353),_=a(_,f,h,p,e[s+7],16,-155497632),p=a(p,_,f,h,e[s+10],23,-1094730640),h=a(h,p,_,f,e[s+13],4,681279174),f=a(f,h,p,_,e[s],11,-358537222),_=a(_,f,h,p,e[s+3],16,-722521979),p=a(p,_,f,h,e[s+6],23,76029189),h=a(h,p,_,f,e[s+9],4,-640364487),f=a(f,h,p,_,e[s+12],11,-421815835),_=a(_,f,h,p,e[s+15],16,530742520),h=o(h,p=a(p,_,f,h,e[s+2],23,-995338651),_,f,e[s],6,-198630844),f=o(f,h,p,_,e[s+7],10,1126891415),_=o(_,f,h,p,e[s+14],15,-1416354905),p=o(p,_,f,h,e[s+5],21,-57434055),h=o(h,p,_,f,e[s+12],6,1700485571),f=o(f,h,p,_,e[s+3],10,-1894986606),_=o(_,f,h,p,e[s+10],15,-1051523),p=o(p,_,f,h,e[s+1],21,-2054922799),h=o(h,p,_,f,e[s+8],6,1873313359),f=o(f,h,p,_,e[s+15],10,-30611744),_=o(_,f,h,p,e[s+6],15,-1560198380),p=o(p,_,f,h,e[s+13],21,1309151649),h=o(h,p,_,f,e[s+4],6,-145523070),f=o(f,h,p,_,e[s+11],10,-1120210379),_=o(_,f,h,p,e[s+2],15,718787259),p=o(p,_,f,h,e[s+9],21,-343485551),h=t(h,l),p=t(p,c),_=t(_,u),f=t(f,d);return[h,p,_,f]}function l(e){var t,n="";for(t=0;t<32*e.length;t+=8)n+=String.fromCharCode(e[t>>5]>>>t%32&255);return n}function c(e){var t,n=[];for(n[(e.length>>2)-1]=void 0,t=0;t<n.length;t+=1)n[t]=0;for(t=0;t<8*e.length;t+=8)n[t>>5]|=(255&e.charCodeAt(t/8))<<t%32;return n}function u(e){var t,n,i="0123456789abcdef",r="";for(n=0;n<e.length;n+=1)t=e.charCodeAt(n),r+=i.charAt(t>>>4&15)+i.charAt(15&t);return r}function d(e){return unescape(encodeURIComponent(e))}function h(e){return function(e){return l(s(c(e),8*e.length))}(d(e))}function p(e,t){return function(e,t){var n,i,r=c(e),a=[],o=[];for(a[15]=o[15]=void 0,r.length>16&&(r=s(r,8*e.length)),n=0;n<16;n+=1)a[n]=909522486^r[n],o[n]=1549556828^r[n];return i=s(a.concat(c(t)),512+8*t.length),l(s(o.concat(i),640))}(d(e),d(t))}e.md5=function(e,t,n){return t?n?p(t,e):function(e,t){return u(p(e,t))}(t,e):n?h(e):function(e){return u(h(e))}(e)}}(t),function(e){"use strict";var t={startsWith:function(e,t){return 0==e.indexOf(t)}};e.StringUtils=t}(t),function(e){"use strict";var t={clone:function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t},merge:function(e,n){var i=t.clone(e);for(var r in n)n.hasOwnProperty(r)&&(i[r]=n[r]);return i},append:function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}};e.ObjectUtils=t}(t),function(e){"use strict";function t(e){if(null==e)return!0;for(var t=0;t<e.length;++t)if(isNaN(e[t]))return!1;return!0}function n(e,n){if("string"!=typeof e||"string"!=typeof n)return NaN;var i=e.split("."),r=n.split(".");if(!t(i)||!t(r))return NaN;for(var a=Math.max(i.length,r.length),o=0;o<a;++o){var s=null!=i[o]?i[o]:"0",l=null!=r[o]?r[o]:"0";if((s=Number(s))>(l=Number(l)))return 1;if(s<l)return-1}return 0}var i={isGreaterThan:function(e,t){return n(e,t)>0},isGreaterThanEqual:function(e,t){return n(e,t)>=0},isLessThan:function(e,t){return n(e,t)<0},isLessThanEqual:function(e,t){return n(e,t)<=0},isSame:function(e,t){return 0===n(e,t)},isDifferent:function(e,t){return 0!==n(e,t)}};e.VersionUtils=i}(t),function(e){"use strict";function t(e,t,n){this.fn=e,this.ctx=t,this.params=n}t.prototype.run=function(){this.params?this.fn.apply(this.ctx,this.params):this.fn.apply(this.ctx)},e.radio.Command=t}(i),function(e){"use strict";function t(e,t){this._queue=[],this._lastTs=0,this._isSuspended=void 0!==e&&e,this._delay=void 0!==t?t:0}t.prototype.addCommand=function(e){this._queue.push(e),this._drain()},t.prototype.cancelAllCommands=function(){this._queue=[]},t.prototype.isEmpty=function(){return 0===this._queue.length},t.prototype.suspend=function(){this._isSuspended=!0},t.prototype.resume=function(){this._isSuspended=!1,this._drain()},t.prototype.flush=function(){this._isSuspended=!1;for(var e=0;e<this._queue.length;e++)this._queue[e].run();this._queue=[]},t.prototype._drain=function(){if(!this._isSuspended&&!this._drainInProgress){this._drainInProgress=!0;var e=this;!function t(){var n=e._queue.shift();n?e._runCommand(n,(function(){e._isSuspended||t()})):e._drainInProgress=!1}()}},t.prototype._runCommand=function(e,t){function n(){e.run(),null!=t&&t.call(i)}var i=this;if(0==this._lastTs)n();else{var r=(new Date).getTime(),a=r-this._lastTs;this._lastTs=r,a<this._delay?setTimeout(n,this._delay-a):n()}},e.radio.CommandQueue=t}(i),function(e){"use strict";function t(e,t){if(this._name=e,!t)throw new Error("Reference to the logger object cannot be NULL");this._logger=t,this._listeners={},this._requests={},this._commands={},this._isShutDown=!1}function n(e,n){if(e===n)return!0;for(var i=(e||"").split(t.SEPARATOR),r=(n||"").split(t.SEPARATOR),a=!0,o=0;o<i.length;o++)a=a&&(i[o]===t.WILDCARD||i[o]===r[o]);return a}t.WILDCARD="*",t.SEPARATOR=":",t.prototype.toString=function(){return"<channel: "+this._name+">"},t.prototype.shutdown=function(){this._isShutDown||(this._logger.debug(i,"#shutdown > Shutting down"),this.off(),this._requests={},this._commands={},this._isShutDown=!0)},t.prototype.on=function(e,t,n){this._isShutDown||(this._listeners[e]||(this._listeners[e]=[]),this._listeners[e].push({fn:t,ctx:n}))},t.prototype.off=function(e,t,n){if(!this._isShutDown){if(t="function"==typeof t?t:null,!e&&null==t&&!n)return void(this._listeners={});if(e)this._removeListener(e,t,n);else for(e in this._listeners)this._listeners.hasOwnProperty(e)&&this._removeListener(e,t,n)}},t.prototype.trigger=function(e){if(!this._isShutDown)for(var t in this._listeners)if(this._listeners.hasOwnProperty(t)&&n(t,e.name))for(var i=this._listeners[t].slice(0),r=0;r<i.length;r++){var a=i[r];a.fn.call(a.ctx,e)}},t.prototype.comply=function(e,t,n){this._isShutDown||(this._commands[e]={cmd:t,ctx:n})},t.prototype.command=function(e,t){if(!this._isShutDown){var n=this._commands[e];if(!n)return void this._logger.warn(i,"#command > No command handler for: "+e);n.cmd.call(n.ctx,t)}},t.prototype.reply=function(e,t,n){this._isShutDown||(this._requests[e]={fn:t,ctx:n})},t.prototype.request=function(e){if(!this._isShutDown){var t=this._requests[e];return t?t.fn.call(t.ctx):(this._logger.warn(i,"#request > No request handler for: "+e),null)}},t.prototype._removeListener=function(e,t,n){t="function"==typeof t?t:null;var i=this._listeners[e];if(i){if(!i.length||null==t&&!n)return void delete this._listeners[e];for(var r=0;r<i.length;r++){var a=i[r];null!==t&&t!==a.fn||n&&n!==a.ctx||this._listeners[e].splice(r,1)}}};var i="radio::Channel";e.radio.Channel=t}(i),function(e){"use strict";function t(e){if(!e)throw new Error("Reference to the logger object cannot be NULL");this._logger=e,this._channels={}}var n=e.radio.Channel;t.prototype.channel=function(e){return this._channels[e]||(this._channels[e]=new n(e,this._logger)),this._channels[e]},t.prototype.shutdown=function(){for(var e in this._channels)this._channels.hasOwnProperty(e)&&this._channels[e].shutdown()},e.radio.Radio=t}(i),function(e){"use strict";e.extend=function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e}}(i),function(e){"use strict";function t(){}t.prototype.write=function(e){throw new Error("Implementation error: Method must be overridden.")},e.ILogWriter=t}(i),function(e){"use strict";function t(){}t.prototype.write=function(e){window.console&&window.console.log&&window.console.log(e)},e.LogWriter=t}(i),function(e){"use strict";function t(){}t.prototype.setLogWriter=function(e){throw new Error("Implementation error: Method must be overridden.")},t.prototype.getLogWriter=function(){throw new Error("Implementation error: Method must be overridden.")},t.prototype.getEnabled=function(){throw new Error("Implementation error: Method must be overridden.")},t.prototype.enable=function(){throw new Error("Implementation error: Method must be overridden.")},t.prototype.disable=function(){throw new Error("Implementation error: Method must be overridden.")},t.prototype.debug=function(e,t){throw new Error("Implementation error: Method must be overridden.")},t.prototype.info=function(e,t){throw new Error("Implementation error: Method must be overridden.")},t.prototype.warn=function(e,t){throw new Error("Implementation error: Method must be overridden.")},t.prototype.error=function(e,t){throw new Error("Implementation error: Method must be overridden.")},e.ILogger=t}(i),function(e){"use strict";function t(){this._logWriter=new n}var n=e.LogWriter;t.prototype.setLogWriter=function(e){if(!e)throw new Error("Reference to the ILogWriter object cannot be NULL");this._logWriter=e,this._enabled=!1},t.prototype.getLogWriter=function(){return this._logWriter},t.prototype.getEnabled=function(){return this._enabled},t.prototype.enable=function(){this._enabled=!0},t.prototype.disable=function(){this._enabled=!1},t.prototype.debug=function(e,t){this._log(e,r,t)},t.prototype.info=function(e,t){this._log(e,i,t)},t.prototype.warn=function(e,t){this._log(e,a,t)},t.prototype.error=function(e,t){this._log(e,o,t)},t.prototype._log=function(e,t,n){if(t==o||this._enabled){var i="",r=new Date;i+="["+r.toTimeString()+"."+function(e){return e<10?"00"+e:e<100?"0"+e:""+e}(r.getMilliseconds())+"] ["+t+"] ",i+="["+e+"] "+n,this._logWriter.write(i)}};var i="INFO",r="DEBUG",a="WARN",o="ERROR";e.Logger=t}(i),function(e){"use strict";function t(e,t){this._pluginName=e,this._eventName=t}var n=e.radio.Channel;t.prototype.getPluginName=function(){return this._pluginName},t.prototype.getEventName=function(){return this._eventName},t.prototype.getName=function(){return this._pluginName+n.SEPARATOR+this._eventName},e.Trigger=t}(i),function(e){"use strict";function t(e,t){this.name=e,this.data=t}t.SUCCESS="success",t.ERROR="error",t.createFromTrigger=function(e){return new t(e.getName())},e.Event=t}(i),function(e){"use strict";function t(){this._events={}}t.prototype.addEventListener=function(e,t,n){e&&t&&(n=n||window,this._events[e]=this._events[e]||[],this._events[e].push({cb:t,ctx:n}))},t.prototype.removeEventListener=function(e,t,n){if(e&&t){n=n||window;var i,r,a=!1;for(r in this._events)if(e===r){a=!0;break}if(a){for(i=this._events[r].length-1;i>=0;i--){var o=this._events[r][i];t===o.cb&&n===o.ctx&&this._events[r].splice(i,1)}this._events[r].length||delete this._events[r]}}},t.prototype.dispatchEvent=function(e){var t,n;if(e.name)for(t in this._events)if(this._events.hasOwnProperty(t)&&e.name===t){var i=this._events[t].slice(0),r=i.length;for(n=0;n<r;n++)i[n].cb.call(i[n].ctx,e);break}},t.prototype.removeAllListeners=function(e){var t,n;if(e){for(n in this._events)if(this._events.hasOwnProperty(n)){for(t=this._events[n].length-1;t>=0;t--){this._events[n][t].ctx===e&&this._events[n].splice(t,1)}this._events[n].length||delete this._events[n]}}else this._events={}},e.EventDispatcher=t}(i),function(e){"use strict";function t(){}function n(){n.__super__.constructor.call(this),this._connection=null}var i=e.Event,r=e.EventDispatcher;t.GET="GET",n.RESPONSE="response",n.INSTANCE="instance",e.extend(n,r),n.prototype.close=function(){this.removeAllListeners(null)},n.prototype.load=function(e){e&&e.method&&e.url&&(e._xmlhttp=this._createCORSRequest(e),e._xmlhttp?e._xmlhttp.send():this._loadImage(e))},n.prototype._createCORSRequest=function(e){var t=null;if(void 0!==window.XMLHttpRequest){var r=new window.XMLHttpRequest;"withCredentials"in r&&(t=r).open(e.method,e.url,!0)}if(null==t&&void 0!==window.XDomainRequest&&(t=new window.XDomainRequest).open(e.method,e.url),t){var a={};a[n.INSTANCE]=this;var o=this;t.onload=function(){if(t.status&&parseInt(t.status,10)>=400)return this.onerror();a[n.RESPONSE]=t.responseText,o.dispatchEvent(new i(i.SUCCESS,a))},t.onerror=function(){o.dispatchEvent(new i(i.ERROR,a))}}return t},n.prototype._loadImage=function(e){this._connection||(this._connection=new Image,this._connection.alt=""),this._connection.src=e.url;var t={};t[n.RESPONSE]="",t[n.INSTANCE]=this,this.dispatchEvent(new i(i.SUCCESS,t))},e.URLRequestMethod=t,e.URLRequest=function(e,t){this.url=e||null,this.method=t,this._xmlhttp=null},e.URLLoader=n}(i),function(e){"use strict";var t="2.2.0.223",n="05c3c4",i={getVersion:function(){return"js-"+t+"-"+n},getMajor:function(){return i.getNumberAtPosition(0)},getMinor:function(){return i.getNumberAtPosition(1)},getMicro:function(){return i.getNumberAtPosition(2)},getPatch:function(){return i.getNumberAtPosition(3)},getBuild:function(){return n},getApiLevel:function(){return 4},getNumberAtPosition:function(e){return t.split(".")[e]}};e.Version=i}(n),function(e){"use strict";function t(e,t){this._message=e,this._details=t}t.prototype.getMessage=function(){return this._message},t.prototype.getDetails=function(){return this._details},e.ErrorInfo=t}(n),function(e){"use strict";e.HeartbeatConfig=function(){this.debugLogging=!1}}(n),function(e){"use strict";function t(){}t.prototype.onError=function(e){},e.HeartbeatDelegate=t}(n),function(e){"use strict";function t(){}t.prototype.configure=function(e){throw new Error("Implementation error: Method must be overridden.")},t.prototype.bootstrap=function(e){throw new Error("Implementation error: Method must be overridden.")},t.prototype.setup=function(){throw new Error("Implementation error: Method must be overridden.")},t.prototype.destroy=function(){throw new Error("Implementation error: Method must be overridden.")},t.prototype.enable=function(){throw new Error("Implementation error: Method must be overridden.")},t.prototype.disable=function(){throw new Error("Implementation error: Method must be overridden.")},t.prototype.getName=function(){throw new Error("Implementation error: Method must be overridden.")},t.prototype.isInitialized=function(){throw new Error("Implementation error: Method must be overridden.")},t.prototype.resolveData=function(e){throw new Error("Implementation error: Method must be overridden.")},e.plugin.IPlugin=t}(i),function(e){"use strict";function t(e,t,n,i){this.trigger=e,this.action=n,this.plugin=t,this._paramMappings={},this.mergeParams(i)}var n=e.plugin.ParamMapping;t.prototype.mergeParams=function(e){if(e)for(var t=0;t<e.length;t++){var n=e[t];this._paramMappings[n.getKeyName()]=n}},t.prototype.getParams=function(){var e=[];for(var t in this._paramMappings)this._paramMappings.hasOwnProperty(t)&&e.push(this._paramMappings[t]);return e},t.prototype.addParam=function(e){this._paramMappings[e.getKeyName()]=e},t.prototype.removeParam=function(e,t){var i=new n(e,t);this._paramMappings.hasOwnProperty(i.getKeyName())&&delete this._paramMappings[i.getKeyName()]},e.plugin.Behaviour=t}(i),function(e){"use strict";function t(e,t,i){this._pluginName=e,this._key=t,this._paramName=i||e+n.SEPARATOR+t}var n=e.radio.Channel;t.prototype.getPluginName=function(){return this._pluginName},t.prototype.getKey=function(){return this._key},t.prototype.getKeyName=function(){return this._pluginName+n.SEPARATOR+this._key},t.prototype.getParamName=function(){return this._paramName},e.plugin.ParamMapping=t}(i),function(e){"use strict";function t(e){if(!e)throw new Error("Reference to the logger object cannot be NULL");this._logger=e,this._plugins={},this._behaviours={},this._radio=new i(this._logger),this._dataChannel=this._radio.channel(o),this._ctrlChannel=this._radio.channel(s)}var n=e.Event,i=e.radio.Radio,r=e.radio.Channel,a=e.plugin.Behaviour;t.ERROR="error",t.prototype.addPlugin=function(e){var t=e.getName();this._plugins[t]&&this._logger.warn(l,"#addPlugin > Replacing plugin: "+t),this._plugins[t]=e,e.bootstrap(this)},t.prototype.setupPlugins=function(){for(var e in this._plugins)this._plugins.hasOwnProperty(e)&&this._plugins[e].setup()},t.prototype.pluginExists=function(e){return!!this._plugins[e]},t.prototype.isPluginInitialized=function(e){return this._plugins[e]&&this._plugins[e].isInitialized()},t.prototype.on=function(e,t,n,i){this._dataChannel.on(e+r.SEPARATOR+t,n,i)},t.prototype.off=function(e,t,n,i){var a=e&&t?e+r.SEPARATOR+t:null;this._dataChannel.off(a,n,i)},t.prototype.trigger=function(e){var t=e.name,n=this._behaviours[t];if(n){var i,r,a,o,s,l={},c={};for(i=0;i<n.length;i++)if(o=(a=n[i]).getParams())for(r=0;r<o.length;r++)l[(s=o[r]).getPluginName()]=l[s.getPluginName()]||[],s.key in l[s.getPluginName()]||l[s.getPluginName()].push(s.getKey());for(var u in l)l.hasOwnProperty(u)&&(c[u]=this.request(u,l[u]));for(i=0;i<n.length;i++){var d={_behaviour:a=n[i],_eventData:e.data||{}};if(o=a.getParams()){for(r=0;r<o.length;r++)d[(s=o[r]).getParamName()]=c[s.getPluginName()]?c[s.getPluginName()][s.getKey()]:null;this.command(a.plugin.getName(),a.action,d)}}}this._dataChannel.trigger(e)},t.prototype.request=function(e,t){var n=this._plugins[e];return n&&t&&0!=t.length?n.resolveData(t):null},t.prototype.raise=function(e){this._errorInfo=e;var i=new n(t.ERROR,e);this._ctrlChannel.trigger(i)},t.prototype.getErrorInfo=function(){return this._errorInfo},t.prototype.destroy=function(){for(var e in this._radio.shutdown(),this._plugins)this._plugins.hasOwnProperty(e)&&this._plugins[e].destroy()},t.prototype.comply=function(e,t,n){this._dataChannel.comply(e.getName()+r.SEPARATOR+t,n,e)},t.prototype.command=function(e,t,n){this._dataChannel.command(e+r.SEPARATOR+t,n)},t.prototype.registerBehaviour=function(e,t,n,i){var r=e.getName(),o=new a(e,t,n,i);this._behaviours[r]=this._behaviours[r]||[],this._behaviours[r].push(o)};var o="data_channel",s="ctrl_channel",l="plugin::PluginManager";e.plugin.PluginManager=t}(i),function(e,t){"use strict";function n(e){this._name=e,this._isInitialized=!1,this._isDestroyed=!1,this._isEnabled=!0,this._dataResolver={},this._logTag="plugin::"+this.getName(),this._logger=new i}var i=e.Logger,r=e.Trigger,a=e.Event,o=t.ErrorInfo;n.INITIALIZED="initialized",n.prototype.configure=function(e){},n.prototype.bootstrap=function(e){this._pluginManager=e,this._isDestroyed&&this._pluginManager.raise(new o("Invalid state.","Plugin already destroyed."))},n.prototype.setup=function(){this._trigger(n.INITIALIZED),this._isInitialized=!0},n.prototype.destroy=function(){this._isDestroyed||(this._isDestroyed=!0,this._teardown())},n.prototype.enable=function(){this._isEnabled=!0,this._enabled()},n.prototype.disable=function(){this._isEnabled=!1,this._disabled()},n.prototype.getName=function(){return this._name},n.prototype.getLogger=function(){return this._logger},n.prototype.isInitialized=function(){return this._isInitialized},n.prototype.resolveData=function(e){if(!this._isEnabled||!this._isInitialized)return this._logger.warn(this._logTag,"Unable to retrieve plugin data. Plugin: "+this._name+". Enabled: "+this._isEnabled+". Initialized: "+this._isInitialized+"."),null;if("function"==typeof this._dataResolver)return this._dataResolver.call(this,e);var t=null;if(e)for(var n=0;n<e.length;n++){var i=e[n];this._dataResolver.hasOwnProperty(i)&&(t=t||{},"function"==typeof this._dataResolver[i]?t[i]=this._dataResolver[i].call(this):t[i]=this._dataResolver[i])}return t},n.prototype.toString=function(){return"<plugin: "+this._name+">"},n.prototype._enabled=function(){},n.prototype._disabled=function(){},n.prototype._teardown=function(){},n.prototype._canProcess=function(){return this._isEnabled?!this._isDestroyed||(this._logger.error(this._logTag,"Plugin destroyed."),!1):(this._logger.error(this._logTag,"Plugin disabled."),!1)},n.prototype._trigger=function(e,t){var n=a.createFromTrigger(new r(this.getName(),e));n.data=t,this._pluginManager.trigger(n)},e.plugin.BasePlugin=n}(i,n),function(e){"use strict";function t(e,t,n){this.name=e,this.interval=t,this.isActive=!1,this.repeatCount=void 0!==n?n:r,this._nextTickTimestamp=0,this.reset()}function n(e,t){if(!e)throw new Error("Reference to the ClockService object cannot be NULL");if(this._service=e,!t)throw new Error("Reference to the logger object cannot be NULL");this._logger=t,this._isDestroyed=!1,this._timers={};var n=this;this._clock=window.setInterval((function(){n._onTick()}),1e3*a)}t.prototype.reset=function(){this.tick=0,this._createdTimestamp=(new Date).getTime(),this._updateNextTickTimestamp()},t.prototype.shouldTick=function(){return(new Date).getTime()>this._nextTickTimestamp-o/2&&(this.tick++,this._updateNextTickTimestamp(),!0)},t.prototype._updateNextTickTimestamp=function(){var e=(new Date).getTime();this._nextTickTimestamp=e+1e3*this.interval-1},n.prototype.createTimer=function(e,n,i){this._timers[e]=new t(e,n,i)},n.prototype.destroyTimer=function(e){delete this._timers[e]},n.prototype.resumeTimer=function(e,t){t=void 0!==t&&t,this._logger.debug(i,"#resumeTimer(name="+e+", reset="+t+")");var n=this._timers[e];n&&(n.isActive=!0,t&&n.reset())},n.prototype.pauseTimer=function(e,t){t=void 0!==t&&t,this._logger.debug(i,"#pauseTimer(name="+e+", reset="+t+")");var n=this._timers[e];n&&(n.isActive=!1,t&&n.reset())},n.prototype.isTimerPaused=function(e){var t=this._timers[e];return!!t&&!t.isActive},n.prototype.destroy=function(){this._isDestroyed||(this._isDestroyed=!0,this._timers={},window.clearInterval(this._clock))},n.prototype._onTick=function(){for(var e in this._timers)if(this._timers.hasOwnProperty(e)){var t=this._timers[e];t.isActive&&t.shouldTick()&&(t.interval>1&&this._logger.debug(i,"#_onTick() > "+t.name+"("+t.tick+" | "+t.repeatCount+")"),0!=t.repeatCount?(this._service.onTick(t.name,t.interval,t.tick),t.repeatCount!=r&&t.repeatCount--):this.destroyTimer(t.name))}};var i="service.clock::TimerManager",r=-1,a=.25,o=1e3*a;e.clock.TimerDescriptor=t,e.clock.TimerManager=n}(r),function(e,t,n){"use strict";function i(e){if(i.__super__.constructor.call(this,s),!e)throw new Error("Reference to the logger object cannot be NULL");this._logger=e,this._timerManager=new r(this,this._logger),this._setupDataResolver()}var r=n.clock.TimerManager,a=t.StringUtils,o=e.plugin.BasePlugin;e.extend(i,o),i.prototype.bootstrap=function(e){i.__super__.bootstrap.call(this,e),this._pluginManager.comply(this,l,this._cmdCreate),this._pluginManager.comply(this,u,this._cmdResume),this._pluginManager.comply(this,c,this._cmdPause),this._pluginManager.comply(this,d,this._cmdDestroy)},i.prototype._teardown=function(){this._timerManager.destroy()},i.prototype._cmdCreate=function(e){var t=e[_]||m;this._timerManager.createTimer(e[h],e[p],t)},i.prototype._cmdPause=function(e){this._timerManager.pauseTimer(e[h],!!e[g])},i.prototype._cmdResume=function(e){this._timerManager.resumeTimer(e[h],!!e[g])},i.prototype._cmdDestroy=function(e){this._timerManager.destroyTimer(e[h])},i.prototype.onTick=function(e,t,n){e+=".tick";var i={};i[h]=e,i[p]=t,i[f]=n,this._trigger(e,i)},i.prototype._setupDataResolver=function(){var e={},t=this._timerManager;e[v]=function(e){return t.isTimerPaused(e)},this._dataResolver=function(t){if(!t||0==t.length)return null;for(var n=null,i=0;i<t.length;i++){var r=t[i];if(n=n||{},a.startsWith(r,v)){var o=r.split(v+".");o.length>0&&(n[r]=e[v].call(this,o[1]))}}return n}};var s="service.clock",l="create",c="pause",u="resume",d="destroy",h="name",p="interval",_="repeat_count",f="tick",g="reset",v="is_paused",m=-1;n.clock.ClockService=i}(i,t,r),function(e,t,n){"use strict";function i(e,t){if(this._logger=new r,this._pluginManager=new a(this._logger),this._pluginManager.addPlugin(new o(this._logger)),t)for(var n=0;n<t.length;n++)this._pluginManager.addPlugin(t[n]);this._pluginManager.setupPlugins(),this._isDestroyed=!1}var r=e.Logger,a=e.plugin.PluginManager,o=t.clock.ClockService;i.prototype.configure=function(e){if(!e)throw new Error("Configuration object cannot be NULL.");e.debugLogging?this._logger.enable():this._logger.disable(),this._isDestroyed&&this._logger.error(s,"Instance is destroyed.")},i.prototype.destroy=function(){this._isDestroyed||(this._pluginManager.destroy(),this._isDestroyed=!0)};var s="Heartbeat";n.Heartbeat=i}(i,r,n),e.ADB||(e.ADB={}),e.ADB.core||(e.ADB.core=i),e.ADB.va||(e.ADB.va=n),e.ADB.va.utils||(e.ADB.va.utils=t),e.ADB.va.plugins||(e.ADB.va.plugins={})}(this),function(e){if(void 0===t)var t={};!function(e){"use strict";var t={ASSET_TYPE_VOD:"vod",ASSET_TYPE_LIVE:"live",ASSET_TYPE_LINEAR:"linear"};e.AssetType=t}(t),function(e){"use strict";function t(){this.playerName=null,this.name=null,this.position=null,this.startTime=null}t.prototype.toString=function(){return"playerName="+this.playerName+", name="+this.name+", position="+this.position+", startTime="+this.startTime},e.AdBreakInfo=t}(t),function(e){"use strict";function t(){this.id=null,this.name=null,this.length=null,this.position=null,this.granularTracking=!0}t.prototype.toString=function(){return"id="+this.id+", name="+this.name+", length="+this.length+", position="+this.position+", granularTracking="+this.granularTracking},e.AdInfo=t}(t),function(e){"use strict";function t(){this.name=null,this.length=null,this.position=null,this.startTime=null}t.prototype.toString=function(){return"name="+this.name+", length="+this.length+", position="+this.position+", startTime="+this.startTime},e.ChapterInfo=t}(t),function(e){"use strict";function t(){this.bitrate=null,this.fps=null,this.droppedFrames=null,this.startupTime=null}t.prototype.toString=function(){return"bitrate="+this.bitrate+", fps="+this.fps+", droppedFrames="+this.droppedFrames+", startupTime="+this.startupTime},e.QoSInfo=t}(t),function(e){"use strict";function t(){this.playerName=null,this.id=null,this.name=null,this.length=null,this.playhead=null,this.mediaType=null,this.streamType=null,this.resumed=!1}t.prototype.toString=function(){return"playerName="+this.playerName+", id="+this.id+", name="+this.name+", length="+this.length+", playhead="+this.playhead+", mediaType="+this.mediaType+", streamType="+this.streamType+", resumed="+this.resumed},e.VideoInfo=t}(t),function(e){"use strict";e.VideoPlayerPluginConfig=function(){this.debugLogging=!1}}(t),function(e){"use strict";function t(){}t.prototype.getVideoInfo=function(){throw new Error("Implementation error: Method must be overridden.")},t.prototype.getAdBreakInfo=function(){return null},t.prototype.getAdInfo=function(){return null},t.prototype.getChapterInfo=function(){return null},t.prototype.getQoSInfo=function(){return null},e.VideoPlayerPluginDelegate=t}(t),function(e,t){"use strict";function n(e){if(n.__super__.constructor.call(this,s),!e)throw new Error("PlayerPlugin delegate cannot be NULL.");this._delegate=e,this._isTrackingSessionActive=!1,this._isTrackingSessionStarted=!1,this._setupDataResolver()}var i=e.plugin.ParamMapping,r=e.Trigger,a=e.plugin.BasePlugin,o=t.VideoPlayerPluginConfig;e.extend(n,a),n.prototype.configure=function(e){if(!e)throw new Error("Reference to the configuration data cannot be NULL.");if(!(e instanceof o))throw new Error("Expected config data to be instance of VideoPlayerPluginConfig.");e.debugLogging?this._logger.enable():this._logger.disable(),this._logger.debug(this._logTag,"#configure(debugLogging="+e.debugLogging+")")},n.prototype.bootstrap=function(e){n.__super__.bootstrap.call(this,e),this._registerCommands(),this._registerBehaviours()},n.prototype._cmdVideoIdleStart=function(e){this._logger.info(this._logTag,"#_cmdVideoIdleStart()"),this._videoIdle=!0},n.prototype._cmdVideoIdleResume=function(e){this._logger.info(this._logTag,"#_cmdVideoIdleResume()"),this._videoIdle&&(this._trigger(f),this._trigger(g),e.isInAd&&(this._trigger(T),this._isTrackingAdBreak=!0),e.isInAd&&(this._trigger(A),this._isTrackingAd=!0),e.isInChapter&&this._trigger(O),this._trigger(S)),this._videoIdle=!1},n.prototype.trackSessionStart=function(){if(this._logger.info(this._logTag,"#trackSessionStart()"),this._canProcess()){if(!this._isTrackingSessionActive)return void this._logger.warn(this._logTag,"#trackSessionStart() > No active tracking session.");if(this._isTrackingSessionStarted)return void this._logger.info(this._logTag,"#trackSessionStart() > Tracking session already started.");this._trigger(f),this._isTrackingSessionStarted=!0;var e=this._dataResolver(["video.resumed"]);e.hasOwnProperty("video.resumed")&&e["video.resumed"]&&this._trigger(g)}},n.prototype.trackVideoLoad=function(){this._logger.info(this._logTag,"#trackVideoLoad()"),this._canProcess()&&(this._isTrackingAdBreak=!1,this._isTrackingAd=!1,this._contentStarted=!1,this._isPaused=!0,this._isBuffering=!1,this._isSeeking=!1,this._playheadTimer=null,this._previousPlayhead=-1,this._stalledPlayheadCount=0,this._playheadStalled=!1,this._videoIdle=!1,this._trigger(h),this._isTrackingSessionActive=!0,this._isTrackingSessionStarted=!1)},n.prototype.trackVideoUnload=function(){if(this._logger.info(this._logTag,"#trackVideoUnload()"),this._canProcess()){if(!this._isTrackingSessionActive)return void this._logger.warn(this._logTag,"#trackVideoUnload() > No active tracking session.");this._stopPlayheadTimer(),this._trigger(p),this._isTrackingSessionActive=!1,this._isTrackingSessionStarted=!1,this._contentStarted=!1}},n.prototype.trackPlay=function(){this._logger.info(this._logTag,"#trackPlay()"),this._canProcess()&&this._startSessionIfNeeded("trackPlay")&&this._allowPlayerStateChange()&&(this._isPaused=!1,this._trigger(S),this._startPlayheadTimer())},n.prototype.trackPause=function(){if(this._logger.info(this._logTag,"#trackPause()"),this._canProcess()&&this._startSessionIfNeeded("trackPause")&&this._allowPlayerStateChange()){this._stopPlayheadTimer();var e={};e[U]=!1,this._isPaused=!0,this._trigger(E,e)}},n.prototype.trackBufferStart=function(){this._logger.info(this._logTag,"#trackBufferStart()"),this._canProcess()&&this._startSessionIfNeeded("trackBufferStart")&&this._allowPlayerStateChange()&&(this._stopPlayheadTimer(),this._isBuffering=!0,this._trigger(P))},n.prototype.trackBufferComplete=function(){this._logger.info(this._logTag,"#trackBufferComplete()"),this._canProcess()&&this._startSessionIfNeeded("trackBufferComplete")&&this._allowPlayerStateChange()&&(this._isBuffering=!1,this._trigger(k),this._startPlayheadTimer())},n.prototype.trackSeekStart=function(){this._logger.info(this._logTag,"#trackSeekStart()"),this._canProcess()&&this._startSessionIfNeeded("trackSeekStart")&&this._allowPlayerStateChange()&&(this._stopPlayheadTimer(),this._isSeeking=!0,this._trigger(M))},n.prototype.trackSeekComplete=function(){this._logger.info(this._logTag,"#trackSeekComplete()"),this._canProcess()&&this._startSessionIfNeeded("trackSeekComplete")&&this._allowPlayerStateChange()&&(this._isSeeking=!1,this._trigger(D),this._startPlayheadTimer())},n.prototype.trackComplete=function(e,t){if(this._logger.info(this._logTag,"#trackComplete()"),this._canProcess()&&this._startSessionIfNeeded("trackComplete")){if(this._stopPlayheadTimer(),this._videoIdle)return this._logger.info(this._logTag,"#trackComplete() > Video session is already in Idle State."),void(e&&e());var n={};n[B]=e,(t=void 0===t||!!t)?this._trigger(v,n):(this._trigger(m),this._trigger(_,n))}},n.prototype.trackTimedMetadata=function(e){this._logger.info(this._logTag,"#trackComplete()"),this._canProcess()&&this._startSessionIfNeeded("trackTimedMetadata")&&this._trigger(y,e)},n.prototype.trackChapterStart=function(){this._logger.info(this._logTag,"#trackChapterStart()"),this._canProcess()&&this._startSessionIfNeeded("#trackChapterStart")&&this._trigger(O)},n.prototype.trackChapterComplete=function(){this._logger.info(this._logTag,"#trackChapterComplete()"),this._canProcess()&&this._startSessionIfNeeded("trackChapterComplete")&&this._trigger(R)},n.prototype.trackChapterSkip=function(){this._logger.info(this._logTag,"#trackChapterSkip()"),this._canProcess()&&this._startSessionIfNeeded("trackChapterSkip")&&this._trigger(N)},n.prototype.trackAdBreakStart=function(){this._logger.info(this._logTag,"#trackAdBreakStart()"),this._canProcess()&&this._startSessionIfNeeded("trackAdBreakStart")&&(this._trigger(T),this._isTrackingAdBreak=!0)},n.prototype.trackAdBreakComplete=function(){this._logger.info(this._logTag,"#trackAdBreakComplete()"),this._canProcess()&&this._startSessionIfNeeded("trackAdBreakComplete")&&(this._trigger(w),this._isTrackingAdBreak=!1)},n.prototype.trackAdStart=function(){this._logger.info(this._logTag,"#trackAdStart()"),this._canProcess()&&this._startSessionIfNeeded("trackAdStart")&&(this._trigger(A),this._isTrackingAd=!0)},n.prototype.trackAdComplete=function(){this._logger.info(this._logTag,"#trackAdComplete()"),this._canProcess()&&this._startSessionIfNeeded("trackAdComplete")&&(this._trigger(C),this._isTrackingAd=!1)},n.prototype.trackAdSkip=function(){this._logger.info(this._logTag,"#trackAdSkip()"),this._canProcess()&&this._startSessionIfNeeded("trackAdSkip")&&(this._trigger(I),this._isTrackingAd=!1)},n.prototype.trackBitrateChange=function(){this._logger.info(this._logTag,"#trackBitrateChange()"),this._canProcess()&&this._startSessionIfNeeded("trackBitrateChange")&&this._trigger(L)},n.prototype.trackVideoPlayerError=function(e){if(this._logger.info(this._logTag,"#trackVideoPlayerError(errorId="+e+")"),this._startSessionIfNeeded("trackVideoPlayerError")){var t={};t[j]=d,t[H]=e,this._trigger(x,t)}},n.prototype.trackApplicationError=function(e){if(this._logger.info(this._logTag,"#trackApplicationError(errorId="+e+")"),this._startSessionIfNeeded("trackApplicationError")){var t={};t[j]=u,t[H]=e,this._trigger(x,t)}},n.prototype._registerCommands=function(){this._pluginManager.comply(this,"handleVideoIdleStart",this._cmdVideoIdleStart),this._pluginManager.comply(this,"handleVideoIdleResume",this._cmdVideoIdleResume)},n.prototype._registerBehaviours=function(){this._pluginManager.registerBehaviour(new r(c,F),this,"handleVideoIdleStart"),this._pluginManager.registerBehaviour(new r(c,V),this,"handleVideoIdleResume",[new i(l,"ad.isInAdBreak","isInAdBreak"),new i(l,"ad.isInAd","isInAd"),new i(l,"chapter.isInChapter","isInChapter")])},n.prototype._setupDataResolver=function(){function e(){return o.video||(o.video=s._delegate.getVideoInfo(),s._logger.info(s._logTag,"Data from delegate > VideoInfo: "+o.video)),o.video}function t(){return o.ad||(o.ad=s._delegate.getAdInfo(),s._logger.info(s._logTag,"Data from delegate > AdInfo: "+o.ad)),o.ad}function n(){return o.pod||(o.pod=s._delegate.getAdBreakInfo(),s._logger.info(s._logTag,"Data from delegate > AdBreakInfo: "+o.pod)),o.pod}function i(){return o.chapter||(o.chapter=s._delegate.getChapterInfo(),s._logger.info(s._logTag,"Data from delegate > ChapterInfo: "+o.chapter)),o.chapter}function r(){return o.qos||(o.qos=s._delegate.getQoSInfo(),s._logger.info(s._logTag,"Data from delegate > QoSInfo: "+o.qos)),o.qos}var a={},o={},s=this;a["video.id"]=function(){var t=e(),n=t?t.id:null;return s._logger.debug(s._logTag,"Resolving video.id: "+n),n},a["video.name"]=function(){var t=e(),n=t?t.name:null;return s._logger.debug(s._logTag,"Resolving video.name: "+n),n},a["video.length"]=function(){var t=e(),n=t?t.length:NaN;return s._logger.debug(s._logTag,"Resolving video.length: "+n),n},a["video.playerName"]=function(){var t=e(),n=t?t.playerName:null;return s._logger.debug(s._logTag,"Resolving video.playerName: "+n),n},a["video.mediaType"]=function(){var t=e(),n=t?t.mediaType:null;return s._logger.debug(s._logTag,"Resolving video.mediaType: "+n),n},a["video.streamType"]=function(){var t=e(),n=t?t.streamType:null;return s._logger.debug(s._logTag,"Resolving video.streamType: "+n),n},a["video.playhead"]=function(){var t=e(),n=t?t.playhead:NaN;return s._logger.debug(s._logTag,"Resolving video.playhead: "+n),n},a["video.resumed"]=function(){var t=e(),n=!!t&&t.resumed;return s._logger.debug(s._logTag,"Resolving video.resumed: "+n),n},a["video.playheadStalled"]=function(){return this._playheadStalled},a["pod.name"]=function(){var e=n(),t=e?e.name:null;return s._logger.debug(s._logTag,"Resolving pod.name: "+t),t},a["pod.playerName"]=function(){var e=n(),t=e?e.playerName:null;return s._logger.debug(s._logTag,"Resolving pod.playerName: "+t),t},a["pod.position"]=function(){var e=n(),t=e?e.position:NaN;return s._logger.debug(s._logTag,"Resolving pod.position: "+t),t},a["pod.startTime"]=function(){var e=n(),t=e?e.startTime:NaN;return s._logger.debug(s._logTag,"Resolving pod.startTime: "+t),t},a["ad.isInAd"]=function(){var e=null!=t();return s._logger.debug(s._logTag,"Resolving ad.isInAd: "+e),e},a["ad.isInAdBreak"]=function(){var e=null!=n();return s._logger.debug(s._logTag,"Resolving ad.isInAdBreak: "+e),e},a["ad.id"]=function(){var e=t(),n=e?e.id:null;return s._logger.debug(s._logTag,"Resolving ad.id: "+n),n},a["ad.name"]=function(){var e=t(),n=e?e.name:null;return s._logger.debug(s._logTag,"Resolving ad.name: "+n),n},a["ad.length"]=function(){var e=t(),n=e?e.length:NaN;return s._logger.debug(s._logTag,"Resolving ad.length: "+n),n},a["ad.position"]=function(){var e=t(),n=e?e.position:NaN;return s._logger.debug(s._logTag,"Resolving ad.position: "+n),n},a["ad.granularTracking"]=function(){var e=t(),n=!!e&&e.granularTracking;return s._logger.debug(s._logTag,"Resolving ad.granularTracking: "+n),n},a["ad.trackingInterval"]=function(){var e=Y;return s._logger.debug(s._logTag,"Resolving ad.trackingInterval: "+e),e},a["chapter.isInChapter"]=function(){var e=null!=i();return s._logger.debug(s._logTag,"Resolving chapter.isInChapter: "+e),e},a["chapter.name"]=function(){var e=i(),t=e?e.name:null;return s._logger.debug(s._logTag,"Resolving chapter.name: "+t),t},a["chapter.length"]=function(){var e=i(),t=e?e.length:NaN;return s._logger.debug(s._logTag,"Resolving chapter.length: "+t),t},a["chapter.position"]=function(){var e=i(),t=e?e.position:NaN;return s._logger.debug(s._logTag,"Resolving chapter.position: "+t),t},a["chapter.startTime"]=function(){var e=i(),t=e?e.startTime:NaN;return s._logger.debug(s._logTag,"Resolving chapter.startTime: "+t),t},a["qos.bitrate"]=function(){var e=r(),t=e?e.bitrate:NaN;return s._logger.debug(s._logTag,"Resolving qos.bitrate: "+t),t},a["qos.fps"]=function(){var e=r(),t=e?e.fps:NaN;return s._logger.debug(s._logTag,"Resolving qos.fps: "+t),t},a["qos.droppedFrames"]=function(){var e=r(),t=e?e.droppedFrames:NaN;return s._logger.debug(s._logTag,"Resolving qos.droppedFrames: "+t),t},a["qos.startupTime"]=function(){var e=r(),t=e?1e3*e.startupTime:NaN;return s._logger.debug(s._logTag,"Resolving qos.startupTime: "+t),t},this._dataResolver=function(e){if(!e||0==e.length)return null;o={};for(var t=null,n=0;n<e.length;n++){var i=e[n];(t=t||{})[i]=a.hasOwnProperty(i)?a[i].call(this):null}return t}},n.prototype._trackPlayheadStall=function(){this._canProcess()&&(this._playheadStalled||(this._logger.info(this._logTag,"#_trackPlayheadStall()"),this._stalledPlayheadCount=0,this._playheadStalled=!0,this._trigger(E)))},n.prototype._trackExitStall=function(){this._canProcess()&&(this._stalledPlayheadCount=0,!this._playheadStalled||this._isPaused||this._isSeeking||this._isBuffering||(this._logger.info(this._logTag,"#_trackExitStall()"),this._playheadStalled=!1,this._trigger(S)))},n.prototype._startPlayheadTimer=function(){var e=this;this._playheadTimer||this._isPaused||this._isSeeking||this._isBuffering||(this._playheadTimer=setInterval((function(){if(e._canProcess()){var t=e._dataResolver(["ad.isInAd","video.playhead"]);if(e._isTrackingAdBreak)e._playheadStalled&&e._trackExitStall();else{var n=t["video.playhead"];n!=e._previousPlayhead?e._trackExitStall():e._previousPlayhead>=0&&n==e._previousPlayhead&&++e._stalledPlayheadCount==q&&e._trackPlayheadStall(),n!=e._previousPlayhead&&n>0&&!e._contentStarted&&(e._isPaused||e._isBuffering||e._isSeeking||(e._logger.info(e._logTag,"#_playheadTimer playhead progress to: "+n),e._trigger(b),e._contentStarted=!0)),e._previousPlayhead=n}}}),K))},n.prototype._stopPlayheadTimer=function(){this._playheadTimer&&(clearInterval(this._playheadTimer),this._playheadTimer=null),this._trackExitStall()},n.prototype._startSessionIfNeeded=function(e){return this._isTrackingSessionActive?(this._isTrackingSessionStarted||(this._logger.info(this._logTag,"#"+e+"() > Tracking session auto-start."),this.trackSessionStart()),!0):(this._logger.warn(this._logTag,"#"+e+"() > No active tracking session."),!1)},n.prototype._allowPlayerStateChange=function(){return!(this._isTrackingAdBreak&&!this._isTrackingAd&&(this._logger.info(this._logTag,"_allowPlayerStateChange Player plugin does not allow player state changes when in Adbreak and not in Ad."),1))};var s="player",l=s,c="adobe-heartbeat",u="sourceErrorExternal",d="sourceErrorSDK",h="video_load",p="video_unload",_="video_session_end",f="video_start",g="video_resume",v="video_complete",m="video_skip",y="timed_metadata",S="play",E="pause",b="content_start",T="adbreak_start",w="adbreak_complete",A="ad_start",C="ad_complete",I="ad_skip",P="buffer_start",k="buffer_complete",M="seek_start",D="seek_complete",O="chapter_start",R="chapter_complete",N="chapter_skip",L="bitrate_change",x="track_error",F="video_idle_start",V="video_idle_resume",B="callback",U="filter_report",j="source",H="error_id",K=1001,Y=1,q=2;t.VideoPlayerPlugin=n}(e.ADB.core,t),e.ADB.va.plugins.videoplayer||(e.ADB.va.plugins.videoplayer=t)}(this),function(e){if(void 0===t)var t={};t.clock||(t.clock={}),t.context||(t.context={}),t.filter||(t.filter={}),t.model||(t.model={}),t.network||(t.network={}),function(e,t){"use strict";function n(e,t,n,i,r){if(!t)throw new Error("Reference to the channel object cannot be NULL");if(this._channel=t,!e)throw new Error("Reference to the pluginManager object cannot be NULL");if(this._pluginManager=e,!r)throw new Error("Reference to the logger object cannot be NULL");this._logTag="ah::Timer."+n,this._logger=r,this._isDestroyed=!1,this._createTimer(n,i),this._installHandlers()}var i=e.Event;n.KEY_NAME="name",n.KEY_INTERVAL="interval",n.KEY_RESET="reset",n.prototype.resume=function(e){this._logger.debug(this._logTag,"Starting timer: "+this._name);var t={};t[n.KEY_NAME]=r+"."+this._name,t[n.KEY_RESET]=e,this._pluginManager.command(a,l,t)},n.prototype.pause=function(e){this._logger.debug(this._logTag,"Stopping timer: "+this._name);var t={};t[n.KEY_NAME]=r+"."+this._name,t[n.KEY_RESET]=e,this._pluginManager.command(a,s,t)},n.prototype.destroy=function(){if(!this._isDestroyed){this._isDestroyed=!0,this._uninstallHandlers();var e={};e[n.KEY_NAME]=r+"."+this._name,this._pluginManager.command(a,c,e)}},n.prototype.setInterval=function(e){var t=u+"."+r+"."+this._name,n=this._pluginManager.request(a,[t])[t];this.pause(!0),this._createTimer(this._name,e),n||this.resume(!0)},n.prototype._cmdResume=function(e){var t=!1;null!=e&&e.hasOwnProperty(n.KEY_RESET)&&(t=e[n.KEY_RESET]),this.resume(t)},n.prototype._cmdPause=function(e){var t=!1;null!=e&&e.hasOwnProperty(n.KEY_RESET)&&(t=e[n.KEY_RESET]),this.pause(t)},n.prototype._onTick=function(e,t){this._channel.trigger(new i("clock:"+this._name+".tick",t))},n.prototype._installHandlers=function(){this._channel.comply("clock:"+this._name+".resume",this._cmdResume,this),this._channel.comply("clock:"+this._name+".pause",this._cmdPause,this),this._pluginManager.on(a,r+"."+this._name+".tick",this._onTick,this)},n.prototype._uninstallHandlers=function(){this._channel.off(null,null,this),this._pluginManager.off(null,null,null,this)},n.prototype._createTimer=function(e,t){this._name=e,this._interval=t;var i={};i[n.KEY_NAME]=r+"."+this._name,i[n.KEY_INTERVAL]=this._interval,this._pluginManager.command(a,o,i)};var r="heartbeat",a="service.clock",o="create",s="pause",l="resume",c="destroy",u="is_paused";t.clock.Timer=n}(e.ADB.core,t),function(e,t){"use strict";function n(e,t,i){n.__super__.constructor.call(this,e,t,a,s,i)}var i=e.Event,r=t.clock.Timer;e.extend(n,r),n.prototype._onCheckStatusComplete=function(e){var t=e.data[d];if(this._logger.debug(this._logTag,"#_onCheckStatusComplete(interval="+t+")"),t){if(t==this._interval)return void this._logger.debug(this._logTag,"#_onCheckStatusComplete() > Interval value not changed.");t>o?(this._logger.warn(this._logTag,"#_onCheckStatusComplete() > Interval value too large: "+t),this.setInterval(o)):(this._logger.debug(this._logTag,"#_onCheckStatusComplete() > Interval changed to: "+t),this.setInterval(t))}else this._logger.warn(this._logTag,"#_onCheckStatusComplete() > Invalid interval value."),this.setInterval(s)},n.prototype._getSettings=function(e){this._logger.debug(this._logTag,"#_getSettings()"),this._channel.trigger(new i(l))},n.prototype._installHandlers=function(){n.__super__._installHandlers.call(this),this._channel.on(c,this._getSettings,this),this._channel.on(u,this._onCheckStatusComplete,this),this._channel.reply(d,(function(){return this._interval}),this)};var a="check_status",o=600,s=180,l="clock:check_status.tick",c="clock:check_status.get_settings",u="net:check_status_complete",d="check_status_interval";t.clock.CheckStatusTimer=n}(e.ADB.core,t),function(e,t){"use strict";function n(e,t,i){n.__super__.constructor.call(this,e,t,r,a,i),this._doNotOverrideInterval=!1}var i=t.clock.Timer;e.extend(n,i),n.prototype._onCheckStatusComplete=function(e){var t=e.data[o];if(this._logger.debug(this._logTag,"#_onCheckStatusComplete(interval="+t+")"),this._doNotOverrideInterval)this._logger.debug(this._logTag,"#_onCheckStatusComplete() > Interval value not changed. (doNotOverrideInterval = true)");else if(t){if(t==this._interval)return void this._logger.debug(this._logTag,"#_onCheckStatusComplete() > Interval value not changed.");this._logger.debug(this._logTag,"#_onCheckStatusComplete() > Interval changed to: "+t),this.setInterval(t)}else this._logger.warn(this._logTag,"#_onCheckStatusComplete() > Invalid interval value."),this.setInterval(a)},n.prototype._onUpdateReportingInterval=function(e){var t=e.data[o];if(this._doNotOverrideInterval=!!e.data[s],this._logger.debug(this._logTag,"#_onUpdateReportingInterval(interval="+t+", doNotOverrideInterval="+this._doNotOverrideInterval+")"),t){if(t==this._interval)return void this._logger.debug(this._logTag,"#_onUpdateReportingInterval() > Interval value not changed.");this._logger.debug(this._logTag,"#_onUpdateReportingInterval() > Interval changed to: "+t),this.setInterval(t)}else this._logger.warn(this._logTag,"#_onUpdateReportingInterval() > Invalid interval value."),this.setInterval(a)},n.prototype._installHandlers=function(){n.__super__._installHandlers.call(this),this._channel.on(c,this._onCheckStatusComplete,this),this._channel.on(l,this._onUpdateReportingInterval,this),this._channel.reply(o,(function(){return this._interval}),this)};var r="reporting",a=10,o="reporting_interval",s="do_not_override_interval",l="reporting:update_interval",c="net:check_status_complete";t.clock.ReportingTimer=n}(e.ADB.core,t),function(e,t){"use strict";function n(e,t,i){n.__super__.constructor.call(this,e,t,r,a,i)}var i=t.clock.Timer;e.extend(n,i);var r="idle",a=1800;t.clock.IdleTimer=n}(e.ADB.core,t),function(e,t){"use strict";function n(e,t,i){n.__super__.constructor.call(this,e,t,r,a,i)}var i=t.clock.Timer;e.extend(n,i);var r="flush_filter",a=.25;t.clock.FlushFilterTimer=n}(e.ADB.core,t),function(e,t){"use strict";function n(e,t,n){if(!e)throw new Error("Reference to the pluginManager object cannot be NULL");if(!t)throw new Error("Reference to the channel object cannot be NULL");if(!n)throw new Error("Reference to the logger object cannot be NULL");this._isDestroyed=!1,this._reportingTimer=new a(e,t,n),this._checkStatusTimer=new i(e,t,n),this._flushFilterTimer=new r(e,t,n),this._idleTimer=new o(e,t,n)}var i=t.clock.CheckStatusTimer,r=t.clock.FlushFilterTimer,a=t.clock.ReportingTimer,o=t.clock.IdleTimer;n.prototype.destroy=function(){this._isDestroyed||(this._isDestroyed=!0,this._reportingTimer.destroy(),this._checkStatusTimer.destroy(),this._flushFilterTimer.destroy(),this._idleTimer.destroy())},t.clock.Clock=n}(e.ADB.core,t),function(e,t){"use strict";function n(e,t){this.value=e,this.hint=t}function i(e){this.realm=e,this.data={}}n.HINT_SHORT="short",i.prototype.setField=function(e,t,i){this.data[e]=new n(t,i)},i.prototype._createAccessor=function(e,t,n){var i=this;return function(){return arguments.length&&(i[e]=arguments[0],i.setField(t,arguments[0],n)),i[e]}},t.model.Dao=i,t.model.DaoField=n}(e.ADB.core,t),function(e,t){"use strict";function n(){if(n.__super__.constructor.call(this,"asset"),this.adId=this._createAccessor("_adId","ad_id",null),this.sid=this._createAccessor("_sid","ad_sid",null),this.resolver=this._createAccessor("_resolver","resolver",null),this.podId=this._createAccessor("_podId","pod_id",null),this.podPosition=this._createAccessor("_podPosition","pod_position",null),this.podOffset=this._createAccessor("_podOffset","pod_offset",null),this.podName=this._createAccessor("_podName","pod_name",null),this.adLength=this._createAccessor("_adLength","ad_length",null),this.adName=this._createAccessor("_adName","ad_name",null),arguments.length&&arguments[0]instanceof n){var e=arguments[0];this.adId(e.adId()),this.sid(e.sid()),this.resolver(e.resolver()),this.podId(e.podId()),this.podPosition(e.podPosition()),this.podOffset(e.podOffset()),this.podName(e.podName()),this.adLength(e.adLength()),this.adName(e.adName())}else this.adId(""),this.sid(""),this.resolver(""),this.podId(""),this.podPosition(""),this.podOffset(0),this.podName(""),this.adLength(0),this.adName("")}var i=t.model.Dao;e.extend(n,i),t.model.AdDao=n}(e.ADB.core,t),function(e,t){"use strict";function n(){if(n.__super__.constructor.call(this,"sc"),this.reportSuiteId=this._createAccessor("_reportSuiteId","rsid",null),this.trackingServer=this._createAccessor("_trackingServer","tracking_server",null),this.ssl=this._createAccessor("_ssl","ssl",r.HINT_SHORT),arguments.length&&arguments[0]instanceof n){var e=arguments[0];this.reportSuiteId(e.reportSuiteId()),this.trackingServer(e.trackingServer()),this.ssl(e.ssl())}else this.reportSuiteId(""),this.trackingServer(""),this.ssl(0)}var i=t.model.Dao,r=t.model.DaoField;e.extend(n,i),t.model.AdobeAnalyticsDao=n}(e.ADB.core,t),function(e,t){"use strict";function n(){if(n.__super__.constructor.call(this,"stream"),this.id=this._createAccessor("_id","chapter_id",null),this.sid=this._createAccessor("_sid","chapter_sid",null),this.name=this._createAccessor("_name","chapter_name",null),this.position=this._createAccessor("_position","chapter_pos",null),this.length=this._createAccessor("_length","chapter_length",null),this.offset=this._createAccessor("_offset","chapter_offset",null),arguments.length&&arguments[0]instanceof n){var e=arguments[0];this.id(e.id()),this.sid(e.sid()),this.name(e.name()),this.position(e.position()),this.length(e.length()),this.offset(e.offset())}else this.id(""),this.sid(""),this.name(""),this.position(0),this.length(0),this.offset(0)}var i=t.model.Dao;e.extend(n,i),t.model.ChapterDao=n}(e.ADB.core,t),function(e,t){"use strict";function n(){if(n.__super__.constructor.call(this,"asset"),this.type=this._createAccessor("_type","type",null),this.videoId=this._createAccessor("_videoId","video_id",null),this.publisher=this._createAccessor("_publisher","publisher",null),this.adData=this._createAccessor("_adData","ad_data",null),this.chapterData=this._createAccessor("_chapterData","chapter_data",null),this.length=this._createAccessor("_length","length",null),this.name=this._createAccessor("_name","name",null),arguments.length&&arguments[0]instanceof n){var e=arguments[0];this.type(e.type()),this.name(e.name()),this.videoId(e.videoId()),this.publisher(e.publisher()),this.length(e.length());var t=e.adData()?new r(e.adData()):null;this.adData(t);var i=e.chapterData()?new a(e.chapterData()):null;this.chapterData(i)}else this.type(""),this.name(""),this.videoId(""),this.publisher(""),this.length(0),this.adData(null),this.chapterData(null)}var i=t.model.Dao,r=t.model.AdDao,a=t.model.ChapterDao;e.extend(n,i),n.TYPE_AD="ad",n.TYPE_MAIN_CONTENT="main",t.model.AssetDao=n}(e.ADB.core,t),function(e,t){"use strict";function n(){if(n.__super__.constructor.call(this,"event"),this.type=this._createAccessor("_type","type",null),this.duration=this._createAccessor("_duration","duration",null),this.playhead=this._createAccessor("_playhead","playhead",null),this.id=this._createAccessor("_id","id",null),this.source=this._createAccessor("_source","source",null),this.ts=this._createAccessor("_ts","ts",null),this.prevTs=this._createAccessor("_prevTs","prev_ts",null),arguments.length&&arguments[0]instanceof n){var e=arguments[0];this.type(e.type()),this.duration(e.duration()),this.playhead(e.playhead()),this.id(e.id()),this.source(e.source()),this.ts(e.ts()),this.prevTs(e.prevTs())}else this.type(""),this.duration(0),this.playhead(0),this.id(""),this.source(""),this.ts(0),this.prevTs(-1)}var i=t.model.Dao;e.extend(n,i),n.EVENT_TYPE_AA_START="aa_start",n.EVENT_TYPE_AA_AD_START="aa_ad_start",n.EVENT_TYPE_START="start",n.EVENT_TYPE_RESUME="resume",n.EVENT_TYPE_CHAPTER_START="chapter_start",n.EVENT_TYPE_CHAPTER_COMPLETE="chapter_complete",n.EVENT_TYPE_CHAPTER_SKIP="chapter_skip",n.EVENT_TYPE_PLAY="play",n.EVENT_TYPE_PAUSE="pause",n.EVENT_TYPE_STALL="stall",n.EVENT_TYPE_BUFFER="buffer",n.EVENT_TYPE_BITRATE_CHANGE="bitrate_change",n.EVENT_TYPE_ERROR="error",n.EVENT_TYPE_COMPLETE="complete",n.EVENT_TYPE_SKIP="skip",n.EVENT_TYPE_END="end",t.model.EventDao=n}(e.ADB.core,t),function(e,t){"use strict";function n(){if(n.__super__.constructor.call(this,"stream"),this.bitrate=this._createAccessor("_bitrate","bitrate",null),this.fps=this._createAccessor("_fps","fps",null),this.droppedFrames=this._createAccessor("_droppedFrames","dropped_frames",null),this.startupTime=this._createAccessor("_startup_time","startup_time",null),arguments.length&&arguments[0]instanceof n){var e=arguments[0];this.bitrate(e.bitrate()),this.fps(e.fps()),this.droppedFrames(e.droppedFrames()),this.startupTime(e.startupTime()),this.isStartupTimeOverridden=e.isStartupTimeOverridden}else this.bitrate(0),this.fps(0),this.droppedFrames(0),this.startupTime(0),this.isStartupTimeOverridden=!1}var i=t.model.Dao;e.extend(n,i),t.model.QoSDao=n}(e.ADB.core,t),function(e,t){"use strict";function n(){if(n.__super__.constructor.call(this,"sp"),this.ovp=this._createAccessor("_ovp","ovp",null),this.sdk=this._createAccessor("_sdk","sdk",null),this.channel=this._createAccessor("_channel","channel",null),this.playerName=this._createAccessor("_playerName","player_name",null),this.libVersion=this._createAccessor("_libVersion","hb_version",null),this.apiLevel=this._createAccessor("_apiLevel","hb_api_lvl",null),arguments.length&&arguments[0]instanceof n){var e=arguments[0];this.ovp(e.ovp()),this.sdk(e.sdk()),this.channel(e.channel()),this.playerName(e.playerName()),this.libVersion(e.libVersion()),this.apiLevel(e.apiLevel())}else this.ovp(r),this.sdk(r),this.channel(r),this.playerName(""),this.libVersion(""),this.apiLevel(0)}var i=t.model.Dao;e.extend(n,i);var r="unknown";t.model.ServiceProviderDao=n}(e.ADB.core,t),function(e,t){"use strict";function n(){if(n.__super__.constructor.call(this,"event"),this.sessionId=this._createAccessor("_sessionId","sid",null),arguments.length&&arguments[0]instanceof n){var e=arguments[0];this.sessionId(e.sessionId())}else this.sessionId(null)}var i=t.model.Dao;e.extend(n,i),t.model.SessionDao=n}(e.ADB.core,t),function(e,t){"use strict";function n(){if(n.__super__.constructor.call(this,"stream"),this.type=this._createAccessor("_type","type",null),arguments.length&&arguments[0]instanceof n){var e=arguments[0];this.type(e.type())}else this.type(null)}var i=t.model.Dao;e.extend(n,i),t.model.StreamDao=n}(e.ADB.core,t),function(e,t){"use strict";function n(){if(n.__super__.constructor.call(this,"user"),this.analyticsVisitorId=this._createAccessor("_analyticsVisitorId","aid",null),this.marketingCloudVisitorId=this._createAccessor("_marketingCloudVisitorId","mid",null),this.visitorId=this._createAccessor("_visitorId","id",null),arguments.length&&arguments[0]instanceof n){var e=arguments[0];this.analyticsVisitorId(e.analyticsVisitorId()),this.marketingCloudVisitorId(e.marketingCloudVisitorId()),this.visitorId(e.visitorId())}else this.analyticsVisitorId(null),this.marketingCloudVisitorId(null),this.visitorId(null)}var i=t.model.Dao;e.extend(n,i),t.model.UserDao=n}(e.ADB.core,t),function(e,t){"use strict";function n(){if(n.__super__.constructor.call(this,"aam"),this.audienceManagerBlob=this._createAccessor("_audienceManagerBlob","blob",null),this.audienceManagerLocationHint=this._createAccessor("_audienceManagerLocationHint","loc_hint",null),arguments.length&&arguments[0]instanceof n){var e=arguments[0];this.audienceManagerBlob(e.audienceManagerBlob()),this.audienceManagerLocationHint(e.audienceManagerLocationHint())}else this.audienceManagerBlob(null),this.audienceManagerLocationHint(null)}var i=t.model.Dao;e.extend(n,i),t.model.AudienceManagerDao=n}(e.ADB.core,t),function(e,t){"use strict";var n=e.ObjectUtils,i=t.model.EventDao,r=t.model.AssetDao,a=t.model.StreamDao,o=t.model.QoSDao;t.model.TrackItem=function(e,t,s,l,c){this.eventData=new i,this.eventData.type(t),this.eventData.duration(0),this.eventData.ts((new Date).getTime()),this.eventData.playhead(s),this.assetData=new r(e._assetData),this.streamData=new a(e._streamData),this.qosData=new o(e._qosData),this.cuserData=n.clone(e._cuserData),this.meta=l,this.callback=c,this.filterReport=!0}}(e.ADB.va.utils,t),function(e,t){"use strict";var n=e.ObjectUtils,i=t.model.EventDao,r=t.model.AssetDao,a=t.model.StreamDao,o=t.model.QoSDao;t.model.CUserDao,t.model.Report=function(e,t,s,l,c,u){this.adobeAnalyticsData=e,this.userData=t,this.aamData=s,this.serviceProviderData=l,this.sessionData=c,this.eventData=new i(u.eventData),this.assetData=new r(u.assetData),this.streamData=new a(u.streamData),this.qosData=new o(u.qosData),this.cuserData=n.clone(u.cuserData),this.meta=n.clone(u.meta),this.callback=u.callback,this.filterReport=u.filterReport}}(e.ADB.va.utils,t),function(e){"use strict";function t(){}t.prototype.serializeReport=function(e){},t.prototype.serializeDao=function(e){},t.prototype.serializeMap=function(e){},t.prototype.serializeNumber=function(e,t,n,i){},t.prototype.serializeString=function(e,t,n,i){},e.model.ISerializer=t}(t),function(e,t){"use strict";function n(e){if(!e)throw new Error("Reference to the logger object cannot be NULL");this._logger=e}var i=t.model.Dao,r=t.model.DaoField,a=t.model.ISerializer;e.extend(n,a),n.prototype.serializeReport=function(e){var t=[];return t.push(this.serializeDao(e.adobeAnalyticsData)),t.push(this.serializeDao(e.userData)),t.push(this.serializeDao(e.aamData)),t.push(this.serializeMap(e.cuserData,"cuser")),t.push(this.serializeDao(e.serviceProviderData)),t.push(this.serializeDao(e.sessionData)),t.push(this.serializeDao(e.eventData)),t.push(this.serializeDao(e.assetData)),t.push(this.serializeDao(e.streamData)),t.push(this.serializeDao(e.qosData)),t.push(this.serializeMap(e.meta,"meta")),{serializedOutput:t.filter((function(e){return!!e})).join("&"),callback:e.callback}},n.prototype.serializeDao=function(e){return this._processDao(e).filter((function(e){return!!e})).join("&")},n.prototype.serializeMap=function(e,t){var n=[],i=t||"meta";for(var r in e)e.hasOwnProperty(r)&&e[r]&&n.push("s:"+i+":"+r+"="+window.encodeURIComponent(e[r]));return n.join("&")},n.prototype.serializeNumber=function(e,t,n,i){var a=s;return null==t||isNaN(t)?null:(i===r.HINT_SHORT&&(a=l),a+":"+n+":"+e+"="+Math.floor(t))},n.prototype.serializeString=function(e,t,n,i){return t?c+":"+n+":"+e+"="+window.encodeURIComponent(t):null},n.prototype._processDao=function(e){var t=[];for(var n in e.data)if(e.data.hasOwnProperty(n)){var r=e.data[n],a=r.value,s=r.hint,l=null,c=e.realm;if(null==a)continue;"number"==typeof a?l=this.serializeNumber(n,a,c,s):"string"==typeof a?l=this.serializeString(n,a,c,s):a instanceof i?l=this.serializeDao(a):this._logger.warn(o,"#_processDao() > Unable to serialize DAO. Field: "+n+". Value: "+a+"."),l&&t.push(l)}return t};var o="ah::QuerystringSerializer",s="l",l="h",c="s";t.model.QuerystringSerializer=n}(e.ADB.core,t),function(e,t){"use strict";function n(e,t){if(!e)throw new Error("Reference to the data object cannot be NULL");if(this._data=e,!t)throw new Error("Reference to the logger object cannot be NULL");this._logger=t}n.prototype.parse=function(){var e,t,n,c,u,d,h;window.DOMParser?d=(new window.DOMParser).parseFromString(this._data,"text/xml"):((d=new window.ActiveXObject("Microsoft.XMLDOM")).async=!1,d.loadXML(this._data)),(h=parseInt(d.getElementsByTagName("trackingInterval")[0].childNodes[0].nodeValue,10))&&(e=h),(h=parseInt(d.getElementsByTagName("setupCheckInterval")[0].childNodes[0].nodeValue,10))&&(t=h),(h=parseInt(d.getElementsByTagName("trackExternalErrors")[0].childNodes[0].nodeValue,10))&&(n=1==h),d.getElementsByTagName("trackingDisabled")[0]&&(c=1==(h=parseInt(d.getElementsByTagName("trackingDisabled")[0].childNodes[0].nodeValue,10))),d.getElementsByTagName("nielsenEnabled")[0]?u=1==(h=parseInt(d.getElementsByTagName("nielsenEnabled")[0].childNodes[0].nodeValue,10)):u=!0;var p={};return p[r]=e,p[a]=t,p[o]=n,p[l]=c,p[s]=u,this._logger.debug(i,"#parse() > Obtained configuration settings."),p};var i="ah::SettingsParser",r="reporting_interval",a="check_status_interval",o="track_external_errors",s="nielsen_enabled",l="tracking_disabled";t.network.SettingsParser=n}(e.ADB.core,t),function(e,t){"use strict";function n(e,t){if(this._trackingServer=null,this._checkStatusServer=null,this._publisher=null,this._isConfigured=!1,this._isDestroyed=!1,this._quietMode=!1,this._visitorOptedOut=!1,this._prevReportSent=null,!e)throw new Error("Reference to the channel object cannot be NULL");if(this._channel=e,!t)throw new Error("Reference to the logger object cannot be NULL");this._logger=t,this._serializer=new l(t),this._installEventListeners()}var i=e.Event,r=e.URLRequestMethod,a=e.URLRequest,o=e.URLLoader,s=t.network.SettingsParser,l=t.model.QuerystringSerializer;n.prototype.destroy=function(){this._isDestroyed||(this._isDestroyed=!0,this._logger.debug(c,"#destroy()"),this._uninstallEventListeners())},n.prototype._onApiConfig=function(e){var t=e.data;this._logger.debug(c,"#_onApiConfig(sb_server="+t[u]+", check_status_server="+t[d]+", publisher="+t[h]+", quiet_mode="+t[p]+", ssl="+t[_]+")"),this._trackingServer=this._updateRequestProtocol(t[u],t[_]),this._checkStatusServer=this._updateRequestProtocol(t[d],t[_]),this._publisher=t[h],this._quietMode=t[p],this._isConfigured=!0},n.prototype._onUpdateVisitorOptOut=function(e){var t=e.data;this._logger.debug(c,"#_onUpdateVisitorOptOut(visitor_opt_out="+t[g]+")"),this._visitorOptedOut=t[g]},n.prototype._onFilterReportAvailable=function(e){var t=e.data;if(this._isConfigured){var n=t[f],s=this._serializer.serializeReport(n),l=this._trackingServer+"/?"+s.serializedOutput;if(this._prevReportSent&&this._prevReportSent.eventData&&n.eventData&&this._prevReportSent.eventData.playhead==n.eventData.playhead&&this._prevReportSent.eventData.ts==n.eventData.ts&&this._prevReportSent.eventData.prevTs==n.eventData.prevTs&&this._prevReportSent.eventData.type==n.eventData.type)this._logger.debug(c,"#_onFilterReportAvailable() > Duplicate heartbeat report not sent for URL:\n"+l);else{this._prevReportSent=n;var u=new a(l,r.GET);this._logger.debug(c,"#_onFilterReportAvailable() > "+u.url);var d=this;if(!this._quietMode&&!this._visitorOptedOut){var h=new o;h.addEventListener(i.SUCCESS,(function(e){h.close(),s.callback&&s.callback.call(null)}),this),h.addEventListener(i.ERROR,(function(e){h.close(),d._logger.warn(c,"#_onFilterReportAvailable() > Failed to send heartbeat report."),s.callback&&s.callback.call(null)}),this),h.load(u)}}}else this._logger.warn(c,"#_onFilterReportAvailable() > Unable to send request: not configured.")},n.prototype._onClockCheckStatusTick=function(e){if(this._isConfigured)if(this._publisher){var t=this,n=this._publisher.replace(/[^a-zA-Z0-9]+/,"-").toLocaleLowerCase(),l=this._checkStatusServer+n+".xml?r="+(new Date).getTime(),u=new a(l,r.GET),d=new o;d.addEventListener(i.SUCCESS,(function(e){if(e.data){var n=new s(e.data.response,t._logger).parse();n?t._channel.trigger(new i(E,n)):t._logger.warn(c,"#_onClockCheckStatusTick() > Failed to parse the config. settings.")}d.close()}),this),d.addEventListener(i.ERROR,(function(e){t._logger.warn(c,"#_onClockCheckStatusTick() > Failed to obtain the config. settings."),d.close()}),this),this._logger.debug(c,"#_onClockCheckStatusTick() > Get new settings from: "+l),d.load(u)}else this._logger.warn(c,"#_onClockCheckStatusTick() > Publisher is NULL.");else this._logger.warn(c,"#_onClockCheckStatusTick() > Unable to send request: not configured.")},n.prototype._updateRequestProtocol=function(e,t){var n=e;return 0===n.indexOf("http://")?n=n.slice(7):0===n.indexOf("https://")&&(n=n.slice(8)),t?"https://"+n:"http://"+n},n.prototype._installEventListeners=function(){this._channel.on(v,this._onApiConfig,this),this._channel.on(m,this._onUpdateVisitorOptOut,this),this._channel.on(y,this._onFilterReportAvailable,this),this._channel.on(S,this._onClockCheckStatusTick,this)},n.prototype._uninstallEventListeners=function(){this._channel.off(null,null,this)};var c="ah::Network",u="tracking_server",d="check_status_server",h="publisher",p="quiet_mode",_="ssl",f="report",g="visitor_opt_out",v="api:config",m="api:update_visitor_optout",y="filter:data_available",S="clock:check_status.tick",E="net:check_status_complete";t.network.Network=n}(e.ADB.core,t),function(e,t){"use strict";function n(e,t){if(!e)throw new Error("Reference to the channel object cannot be NULL");if(this._channel=e,!t)throw new Error("Reference to the logger object cannot be NULL");this._logger=t,this._isDestroyed=!1,this._isBufferingInProgress=!1,this._reportBuffer={},this._tsHistory={},this._workQueue=new s,this._installEventListeners()}function i(e){var t=[];return e&&e.forEach((function(e){e.eventData.type()==c.EVENT_TYPE_PAUSE||e.eventData.type()==c.EVENT_TYPE_STALL||e.eventData.type()==c.EVENT_TYPE_BUFFER?(!e.filterReport||e.eventData.duration()>y)&&t.push(e):t.push(e)})),t}function r(e){var t=-1,n=-1,i=[];return e.forEach((function(e){e.eventData.type()==c.EVENT_TYPE_START?e.assetData.type()==u.TYPE_MAIN_CONTENT?-1==t?t=i.push(e)-1:(e.eventData.prevTs(-1),i[t]=e):-1==n?n=i.push(e)-1:(e.eventData.prevTs(-1),i[n]=e):i.push(e)})),i}function a(e){var t=[];return e.forEach((function(n){if(n.eventData.type()==c.EVENT_TYPE_PLAY){if(n.eventData.duration()>m)t.push(n);else if(0==n.eventData.duration()&&n.assetData.type()==u.TYPE_MAIN_CONTENT){var i=function(e){var t=[];return e.forEach((function(e){e.eventData.type()!=c.EVENT_TYPE_PLAY&&e.eventData.type()!=c.EVENT_TYPE_BUFFER&&e.eventData.type()!=c.EVENT_TYPE_START||t.push(e)})),t}(e);i.indexOf(n)==i.length-1&&t.push(n)}}else t.push(n)})),t}var o=e.radio.Command,s=e.radio.CommandQueue,l=e.Event,c=t.model.EventDao,u=t.model.AssetDao;n.prototype.destroy=function(){this._isDestroyed||(this._isDestroyed=!0,this._logger.debug(E,"#destroy()"),this._uninstallEventListeners(),this.clear())},n.prototype.clear=function(){this._logger.debug(E,"#clear()"),this._workQueue.cancelAllCommands(),this._reportBuffer={},this._tsHistory={},this._isBufferingInProgress=!1},n.prototype.flush=function(){this._workQueue.addCommand(new o(this._flushBufferReport,this))},n.prototype._bufferReport=function(e){if(!this._isDestroyed){var t=e[f];if(t){var n=t.sessionData.sessionId();this._reportBuffer[n]=this._reportBuffer[n]||[],this._reportBuffer[n].push(t)}if(!this._isBufferingInProgress){this._isBufferingInProgress=!0;var i={};i[_]=!0,i[g]=1,this._channel.command(v,i)}}},n.prototype._flushBufferReport=function(){function e(e){if(e)for(var n=0;n<e.length;n++){var i=e[n],r=i.sessionData.sessionId();t._tsHistory[r]=t._tsHistory[r]||{};var a=i.eventData.type()+"."+(i.assetData.type()==u.TYPE_AD?i.assetData.adData().adId():i.assetData.videoId());t._tsHistory[r].hasOwnProperty(a)&&i.eventData.prevTs(t._tsHistory[r][a]),t._tsHistory[r][a]=i.eventData.ts()}}if(!this._isDestroyed){var t=this;for(var n in this._reportBuffer)if(this._reportBuffer.hasOwnProperty(n)){var o=a(r(i(this._reportBuffer[n])));e(o);for(var s=0;s<o.length;s++){var c=o[s],d={};d[f]=c,this._channel.trigger(new l(h,d))}}this._reportBuffer={};var p=this._channel.request(S),_=this._tsHistory[p]||{};this._tsHistory={},this._tsHistory[p]=_,this._isBufferingInProgress=!1}},n.prototype._onContextReportAvailable=function(e){var t=e.data;this._workQueue.addCommand(new o(this._bufferReport,this,[t]))},n.prototype._onClockFlushFilterTick=function(e){this.flush()},n.prototype._installEventListeners=function(){this._channel.on(d,this._onContextReportAvailable,this),this._channel.on(p,this._onClockFlushFilterTick,this)},n.prototype._uninstallEventListeners=function(){this._channel.off(null,null,this)};var d="context:report_available",h="filter:data_available",p="clock:flush_filter.tick",_="reset",f="report",g="repeat_count",v="clock:flush_filter.resume",m=250,y=250,S="session_id",E="ah::ReportFilter";t.filter.ReportFilter=n}(e.ADB.core,t),function(e,t){"use strict";function n(e,t){this._onFail={fn:e,ctx:t}}var i=e.ErrorInfo;n.prototype.validateFields=function(e,t){if(!e)return this._fail("Data cannot be null");if(t)for(var n=0;n<t.length;n++){var i=t[n];switch(i){case"videoId":if(!e.hasOwnProperty("videoId"))return this._fail("The ID for the main video must be specified.");if("string"!=typeof e.videoId)return this._fail("The ID for the main video must be a String.");if(""===e.videoId)return this._fail("The ID for the main video cannot be an empty string.");break;case"streamType":if(!e.hasOwnProperty("streamType"))return this._fail("The stream type for the main video must be specified.");if("string"!=typeof e.streamType)return this._fail("The stream type for the main video must be a String.");if(""===e.streamType)return this._fail("The stream type for the main video cannot be an empty string.");break;case"videoLength":if(!e.hasOwnProperty("videoLength"))return this._fail("The length of the main video must be specified.");if("number"!=typeof e.videoLength)return this._fail("The length of the main video must be a Number.");if(isNaN(e.videoLength))return this._fail("The length of the main video cannot be NaN.");break;case"playhead":if(!e.hasOwnProperty("playhead"))return this._fail("The playhead for the main video must be specified.");if("number"!=typeof e.playhead)return this._fail("The playhead for the main video must be a Number.");if(isNaN(e.playhead))return this._fail("The playhead for the main video cannot be NaN.");break;case"playerName":if(!e.hasOwnProperty("playerName"))return this._fail("The player name for the main video must be specified.");if("string"!=typeof e.playerName)return this._fail("The player name for the main video must be a String.");if(""===e.playerName)return this._fail("The player name for the main video cannot be an empty string.");break;case"rsid":if(!e.hasOwnProperty("rsid"))return this._fail("account (rsid) is required and has to be set in the AppMeasurement instance.");if("string"!=typeof e.rsid)return this._fail("account (rsid) of the AppMeasurement instance must be a String.");if(""===e.rsid)return this._fail("account (rsid) of the AppMeasurement instance  cannot be an empty string.");break;case"trackingServer":if(!e.hasOwnProperty("trackingServer"))return this._fail("trackingServer is required and has to be set in the AppMeasurement instance.");if("string"!=typeof e.trackingServer)return this._fail("trackingServer of the AppMeasurement instance must be a String.");if(""===e.trackingServer)return this._fail("trackingServer of the AppMeasurement instance cannot be an empty string.");break;case"podPlayerName":if(!e.hasOwnProperty("podPlayerName"))return this._fail("The player name for the ad-break must be specified.");if("string"!=typeof e.podPlayerName)return this._fail("The player name for the ad-break must be a String.");if(""===e.podPlayerName)return this._fail("The player name for the ad-break cannot be an empty string.");break;case"podPosition":if(!e.hasOwnProperty("podPosition"))return this._fail("Position (index) of the ad-break must be specified.");if("number"!=typeof e.podPosition)return this._fail("Position (index) of the ad-break must be a Number.");if(isNaN(e.podPosition))return this._fail("Position (index) of the ad-break cannot be NaN.");break;case"adId":if(!e.hasOwnProperty("adId"))return this._fail("The ad ID must be specified.");if("string"!=typeof e.adId)return this._fail("The ad ID must be a String.");if(""===e.adId)return this._fail("The ad ID cannot be an empty string.");break;case"adPosition":if(!e.hasOwnProperty("adPosition"))return this._fail("Position (index) of the ad must be specified.");if("number"!=typeof e.adPosition)return this._fail("Position (index) of the ad must be a Number.");if(isNaN(e.adPosition))return this._fail("Position (index) of the ad cannot be NaN.");break;case"chapterPosition":if(!e.hasOwnProperty("chapterPosition"))return this._fail("Position (index) of the chapter must be specified.");if("number"!=typeof e.chapterPosition)return this._fail("Position (index) of the chapter must be a Number.");if(isNaN(e.chapterPosition))return this._fail("Position (index) of the chapter cannot be NaN.");break;case"chapterOffset":if(!e.hasOwnProperty("chapterOffset"))return this._fail("Chapter start-time (offset) must be specified.");if("number"!=typeof e.chapterOffset)return this._fail("Chapter start-time (offset) must be a Number.");if(isNaN(e.chapterOffset))return this._fail("Chapter start-time (offset) cannot be NaN.");break;case"chapterLength":if(!e.hasOwnProperty("chapterLength"))return this._fail("The length of the chapter must be specified.");if("number"!=typeof e.chapterLength)return this._fail("The length of the chapter must be a Number.");if(isNaN(e.chapterLength))return this._fail("The length of the chapter cannot be NaN.");break;default:return this._fail("Unable to validate unknown parameter: "+i)}}return!0},n.prototype._fail=function(e){var t=new i("Invalid input data",e);return this._onFail.fn&&this._onFail.fn.call(this._onFail.ctx,t),!1},t.context.InputDataValidator=n}(e.ADB.va,t),function(e,t){"use strict";function n(e,t){if(!t)throw new Error("Reference to the logger object cannot be NULL");if(this._logger=t,!e)throw new Error("Reference to the context object cannot be NULL");this._context=e}var i=t.model.Report;n.prototype.createReportForItem=function(e){return this._logger.debug(r,"Creating report for item: "+e.eventData.type()),new i(this._context._adobeAnalyticsData,this._context._userData,this._context._aamData,this._context._serviceProviderData,this._context._sessionData,e)};var r="ah::ReportFactory";t.context.ReportFactory=n}(e.ADB.core,t),function(e,t,n,i){"use strict";function r(e,t){if(!e)throw new Error("Reference to the channel object cannot be NULL");if(this._channel=e,!t)throw new Error("Reference to the logger object cannot be NULL");this._logger=t,this._lastInBandItem=null,this._stashedLastInBandItem=null,this._stashedMainMetadata=null,this._autoComputedStartupTime=0,this._reportingInterval=he,this._assetData=null,this._streamData=null,this._qosData=null,this._sessionData=null,this._cuserData=null,this._adobeAnalyticsData=new c,this._serviceProviderData=new u,this._userData=new d,this._aamData=new h,this._isTrackingSessionActive=!1,this._isVideoComplete=!1,this._isDestroyed=!1,this._doNotOverrideEventDuration=!1,this._reportFactory=new S(this,this._logger),this._inputDataValidator=new E((function(e){this._logger.error(b,e.getMessage()+" | "+e.getDetails()),this._channel.trigger(new s(w,e))}),this),this._trackExternalErrors=!0,this._installEventListeners()}var a=n.md5,o=n.ObjectUtils,s=e.Event,l=i.model.SessionDao,c=i.model.AdobeAnalyticsDao,u=i.model.ServiceProviderDao,d=i.model.UserDao,h=i.model.AudienceManagerDao,p=i.model.EventDao,_=i.model.AssetDao,f=i.model.StreamDao,g=i.model.QoSDao,v=i.model.AdDao,m=i.model.ChapterDao,y=i.model.TrackItem,S=i.context.ReportFactory,E=i.context.InputDataValidator;r.prototype.destroy=function(){this._isDestroyed||(this._isDestroyed=!0,this._logger.debug(b,"#destroy()"),this._uninstallEventListeners())},r.prototype._onApiAnalyticsStart=function(e){this._logger.debug(b,"#_onApiAnalyticsStart()");var t=e.data;if(this._checkCall("_onApiAnalyticsStart")&&this._inputDataValidator.validateFields(t,["playhead"])){this._userData.visitorId(t.vid),this._userData.analyticsVisitorId(t.aid),this._userData.marketingCloudVisitorId(t.mid),this._aamData.audienceManagerBlob(t.blob),this._aamData.audienceManagerLocationHint(t.loc_hint),t.customerIDs&&(this._cuserData=t.customerIDs),this._updateQoSInfo(t);var n=new y(this,p.EVENT_TYPE_AA_START,t.playhead,null,t._eventData[M]);n.assetData.adData(null),n.assetData.type(_.TYPE_MAIN_CONTENT),this._cuserData=null,this._sendHit(n)}},r.prototype._onApiAnalyticsAdStart=function(e){this._logger.debug(b,"#_onApiAnalyticsAdStart()");var t=e.data;if(this._checkCall("_onApiAnalyticsAdStart")&&this._inputDataValidator.validateFields(t,["playhead"])){this._updateQoSInfo(t);var n=new y(this,p.EVENT_TYPE_AA_AD_START,t.playhead,null,t._eventData[M]);this._sendHit(n)}},r.prototype._onApiVideoLoad=function(e){var t=e.data;this._logger.debug(b,"#_onApiVideoLoad(rsid="+t.rsid+", aa_trackingServer="+t.trackingServer+")"),this._resetInternalState(),this._inputDataValidator.validateFields(t,["rsid","trackingServer"])&&(this._sessionData.sessionId(this._generateSessionId()),this._isTrackingSessionActive=!0)},r.prototype._onApiVideoUnload=function(e){this._logger.debug(b,"#_onApiVideoUnload()"),this._isTrackingSessionActive?this._isTrackingSessionActive=!1:this._logger.debug(b,"#_onApiVideoUnload() > No active tracking session.")},r.prototype._onApiVideoStart=function(e){var t=e.data;if(this._logger.debug(b,"#_onApiVideoStart(id="+t.videoId+", name="+t.videoName+", length="+t.videoLength+", type="+t.streamType+", playerName="+t.playerName+")"),this._checkCall("_onApiVideoStart")&&this._inputDataValidator.validateFields(t,["videoId","streamType","videoLength","playhead","playerName"])){this._lastInBandItem=null,this._stashedLastInBandItem=null,this._adobeAnalyticsData.reportSuiteId(t.rsid),this._adobeAnalyticsData.trackingServer(t.trackingServer),this._adobeAnalyticsData.ssl(Number(t.useSsl)),this._serviceProviderData.ovp(t.ovp),this._serviceProviderData.sdk(t.sdk),this._serviceProviderData.channel(t.channel),this._serviceProviderData.libVersion(t.version),this._serviceProviderData.apiLevel(t.apiLvl),this._serviceProviderData.playerName(t.playerName),this._assetData.adData(null),this._assetData.chapterData(null),this._assetData.videoId(t.videoId),this._assetData.length(t.videoLength),this._assetData.type(_.TYPE_MAIN_CONTENT),this._assetData.publisher(t.publisher),this._assetData.name(t.videoName),this._streamData.type(t.streamType),this._updateQoSInfo(t);var n=t.metaNielsen?o.merge(t.metaVideo,t.metaNielsen):t.metaVideo,i=new y(this,p.EVENT_TYPE_START,t.playhead,n,t._eventData[M]);this._sendHit(i)}},r.prototype._onApiVideoResume=function(e){var t=e.data;if(this._logger.debug(b,"#_onApiVideoResume(id="+t.videoId+", name="+t.videoName+", length="+t.videoLength+", type="+t.streamType+", playerName="+t.playerName+")"),this._checkCall("_onApiVideoResume")&&this._inputDataValidator.validateFields(t,["videoId","streamType","videoLength","playhead","playerName"])){this._assetData.videoId(t.videoId),this._assetData.length(t.videoLength),this._assetData.type(_.TYPE_MAIN_CONTENT),this._assetData.name(t.videoName),this._streamData.type(t.streamType);var n=new y(this,p.EVENT_TYPE_RESUME,t.playhead,null,t._eventData[M]);this._sendHit(n)}},r.prototype._onApiVideoSessionEnd=function(e){this._logger.debug(b,"#_onApiVideoSessionEnd()");var t=e.data;if(this._checkCall("_onApiVideoSessionEnd")&&this._inputDataValidator.validateFields(t,["playhead"])){var n=new y(this,p.EVENT_TYPE_END,t.playhead,null,t._eventData[M]);n.assetData.adData(null),n.assetData.type(_.TYPE_MAIN_CONTENT),this._sendHit(n)}},r.prototype._onApiVideoComplete=function(e){this._logger.debug(b,"#_onApiVideoComplete()");var t=e.data;if(this._checkCall("_onApiVideoComplete")){var n=new y(this,p.EVENT_TYPE_COMPLETE,this._assetData.length(),null,t._eventData[M]);this._sendHit(n),this._isVideoComplete=!0}},r.prototype._onApiVideoSkip=function(e){this._logger.debug(b,"#_onApiVideoSkip()");var t=e.data;if(this._checkCall("_onApiVideoSkip")){var n=new y(this,p.EVENT_TYPE_SKIP,t.playhead,null,t._eventData[M]);this._sendHit(n),this._isVideoComplete=!0}},r.prototype._onApiPlay=function(e){this._logger.debug(b,"#_onApiPlay()");var t=e.data;if(this._checkCall("_onApiPlay")&&this._inputDataValidator.validateFields(t,["playhead"])){this._updateQoSInfo(t);var n=new y(this,p.EVENT_TYPE_PLAY,t.playhead,null,t._eventData[M]);this._sendHit(n)}},r.prototype._onApiPause=function(e){this._logger.debug(b,"#_onApiPause()");var t=e.data;if(this._checkCall("_onApiPause")&&this._inputDataValidator.validateFields(t,["playhead"])){this._updateQoSInfo(t);var n=t.playheadStalled?p.EVENT_TYPE_STALL:p.EVENT_TYPE_PAUSE,i=new y(this,n,t.playhead,null,t._eventData[M]);t._eventData.hasOwnProperty(D)&&(i.filterReport=t._eventData[D]),this._sendHit(i)}},r.prototype._onApiBufferStart=function(e){this._logger.debug(b,"#_onApiBufferStart()");var t=e.data;if(this._checkCall("_onApiBufferStart")&&this._inputDataValidator.validateFields(t,["playhead"])){this._updateQoSInfo(t);var n=new y(this,p.EVENT_TYPE_BUFFER,t.playhead,null,t._eventData[M]);this._sendHit(n)}},r.prototype._onApiAdBreakStart=function(e){this._logger.debug(b,"#_onApiAdBreakStart()");var t=e.data;this._checkCall("_onApiAdBreakStart")&&this._inputDataValidator.validateFields(t,["playhead"])&&(this._flushLastInbandItem(t),this._updateLastInbandItemToBuffering())},r.prototype._onApiAdBreakComplete=function(e){this._logger.debug(b,"#_onApiAdBreakComplete()");var t=e.data;this._checkCall("_onApiAdBreakComplete")&&this._inputDataValidator.validateFields(t,["playhead"])&&(this._flushLastInbandItem(t),this._restoreLastInbandItem())},r.prototype._onApiAdStart=function(e){var t=e.data;if(this._logger.debug(b,"#_onApiAdStart(id="+t.adId+", player_name="+t.podPlayerName+", parent_name="+this._assetData.videoId()+", pod_pos="+t.adPosition+")"),this._checkCall("_onApiAdStart")&&this._inputDataValidator.validateFields(t,["playhead","podPosition","podPlayerName","adId","adPosition"])){var n=new v;n.adId(t.adId),n.adName(t.adName),n.adLength(t.adLength),n.resolver(t.podPlayerName),n.podId(a(this._assetData.videoId())+"_"+t.podPosition),n.podPosition(t.adPosition+""),n.podName(t.podName),n.podOffset(t.podSecond),n.sid(this._generateSessionId()),this._assetData.adData(n),this._assetData.type(_.TYPE_AD),this._updateQoSInfo(t);var i=o.merge(t.metaVideo,t.metaAd);i=t.metaNielsen?o.merge(i,t.metaNielsen):i,i=t.metaAdNielsen?o.merge(i,t.metaAdNielsen):i;var r=new y(this,p.EVENT_TYPE_START,t.playhead,i,t._eventData[M]);if(this._sendHit(r),this._restoreLastInbandItem(),t.adGranularTracking){var s=t.adTrackingInterval?t.adTrackingInterval:this._reportingInterval;this._updateReportingInterval(s,!0)}}},r.prototype._onApiAdComplete=function(e){this._logger.debug(b,"#_onApiAdComplete()");var t=e.data;if(this._checkCall("_onApiAdComplete")&&this._inputDataValidator.validateFields(t,["playhead"])){if(this._assetData.type()!=_.TYPE_AD)return void this._logger.warn(b,"#_onApiAdComplete() > Ignoring the ad complete event, because we are no longer in an ad.");this._updateQoSInfo(t);var n=new y(this,p.EVENT_TYPE_COMPLETE,t.playhead,null,t._eventData[M]);this._sendHit(n),this._updateLastInbandItemToBuffering(),this._assetData.adData(null),this._assetData.type(_.TYPE_MAIN_CONTENT),this._updateReportingInterval(this._reportingInterval,!1)}},r.prototype._onApiAdSkip=function(e){this._logger.debug(b,"#_onApiAdSkip()");var t=e.data;if(this._checkCall("_onApiAdSkip")&&this._inputDataValidator.validateFields(t,["playhead"])){if(this._assetData.type()!=_.TYPE_AD)return void this._logger.warn(b,"#_onApiAdSkip() > Ignoring the ad skip event, because we are no longer in an ad.");this._updateQoSInfo(t);var n=new y(this,p.EVENT_TYPE_SKIP,t.playhead,null,t._eventData[M]);this._sendHit(n),this._updateLastInbandItemToBuffering(),this._assetData.adData(null),this._assetData.type(_.TYPE_MAIN_CONTENT),this._updateReportingInterval(this._reportingInterval,!1)}},r.prototype._onApiChapterStart=function(e){var t=e.data;if(this._logger.debug(b,"#_onApiChapterStart(name="+t.chapterName+", length="+t.chapterLength+", position="+t.chapterPosition+", chapter_offset="+t.chapterOffset+")"),this._checkCall("_onApiChapterStart")&&this._inputDataValidator.validateFields(t,["playhead","chapterPosition","chapterOffset","chapterLength"])){var n=new m;n.id(a(this._assetData.videoId())+"_"+t.chapterPosition),n.name(t.chapterName),n.length(t.chapterLength),n.position(t.chapterPosition),n.offset(t.chapterOffset),n.sid(this._generateSessionId()),this._assetData.chapterData(n),this._updateQoSInfo(t);var i=o.merge(t.metaVideo,t.metaChapter),r=new y(this,p.EVENT_TYPE_CHAPTER_START,t.playhead,i,t._eventData[M]);r.assetData.adData(null),r.assetData.type(_.TYPE_MAIN_CONTENT),this._sendHit(r)}},r.prototype._onApiChapterComplete=function(e){this._logger.debug(b,"#_onApiChapterComplete()");var t=e.data;if(this._checkCall("_onApiChapterComplete")&&this._inputDataValidator.validateFields(t,["playhead"])){if(!this._assetData.chapterData())return void this._logger.warn(b,"#_onApiChapterComplete() > Ignoring the chapter complete event, because we are no longer in a chapter.");this._updateQoSInfo(t);var n=new y(this,p.EVENT_TYPE_CHAPTER_COMPLETE,t.playhead,null,t._eventData[M]);n.assetData.adData(null),n.assetData.type(_.TYPE_MAIN_CONTENT),this._sendHit(n),this._assetData.chapterData(null)}},r.prototype._onApiChapterSkip=function(e){this._logger.debug(b,"#_onApiChapterSkip()");var t=e.data;if(this._checkCall("_onApiChapterSkip")&&this._inputDataValidator.validateFields(t,["playhead"])){if(!this._assetData.chapterData())return void this._logger.warn(b,"#_onApiChapterSkip() > Ignoring the chapter skip event, because we are no longer in a chapter.");this._updateQoSInfo(t);var n=new y(this,p.EVENT_TYPE_CHAPTER_SKIP,t.playhead,null,t._eventData[M]);n.assetData.adData(null),n.assetData.type(_.TYPE_MAIN_CONTENT),this._sendHit(n),this._assetData.chapterData(null)}},r.prototype._onApiBitrateChange=function(e){this._logger.debug(b,"#_onApiBitrateChange()");var t=e.data;if(this._checkCall("_onApiBitrateChange")&&this._inputDataValidator.validateFields(t,["playhead"])){this._updateQoSInfo(t);var n=new y(this,p.EVENT_TYPE_BITRATE_CHANGE,t.playhead,null,t._eventData[M]);this._sendHit(n)}},r.prototype._onApiTrackError=function(e){var t=e.data;if(this._logger.debug(b,"#_onApiTrackError(source="+t._eventData.source+", err_id="+t._eventData.error_id+")"),this._isTrackingSessionActive){if(this._trackExternalErrors||t._eventData.source===T){this._updateQoSInfo(t);var n=new y(this,p.EVENT_TYPE_ERROR,0,null,t._eventData[M]);n.eventData.id(t._eventData.error_id),n.eventData.source(t._eventData.source),this._sendHit(n)}}else this._logger.warn(b,"#_onApiTrackError() > No active tracking session.")},r.prototype._onApiTrackInternalError=function(e){var t=e.data;this._logger.debug(b,"#_onApiTrackInternalError(source="+t.source+", err_id="+t.error_id+")"),this._updateQoSInfo(t);var n=new y(this,p.EVENT_TYPE_ERROR,0);n.eventData.id(t.error_id),n.eventData.source(t.source),this._sendHit(n)},r.prototype._onApiQuantumEnd=function(e){this._logger.debug(b,"#_onApiQuantumEnd(interval="+this._channel.request(I)+")");var t=e.data;if(this._checkCall("_onApiQuantumEnd")&&this._inputDataValidator.validateFields(t,["playhead"])){var n=this._lastInBandItem;if(n){this._updateQoSInfo(t);var i=new y(this,n.eventData.type(),t.playhead,n.meta,n.callback);i.filterReport=n.filterReport,this._sendHit(i,!0)}}},r.prototype._onNetworkCheckStatusComplete=function(e){var t=e.data;this._trackExternalErrors=t[N],this._reportingInterval=t[L],this._reportingInterval||(this._reportingInterval=he),this._logger.debug(b,"#_onNetworkCheckStatusComplete(track_ext_err="+this._trackExternalErrors+")")},r.prototype._onResetSessionId=function(e){var t=this._generateSessionId();this._sessionData=new l,this._sessionData.sessionId(t),this._logger.debug(b,"#_resetSessionId(new sessionId="+t+")")},r.prototype._installEventListeners=function(){this._channel.on(F,this._onApiAnalyticsStart,this),this._channel.on(V,this._onApiAnalyticsAdStart,this),this._channel.on(B,this._onApiVideoLoad,this),this._channel.on(U,this._onApiVideoUnload,this),this._channel.on(j,this._onApiVideoStart,this),this._channel.on(H,this._onApiVideoComplete,this),this._channel.on(K,this._onApiVideoSkip,this),this._channel.on(Y,this._onApiVideoResume,this),this._channel.on(q,this._onApiVideoSessionEnd,this),this._channel.on(G,this._onApiAdBreakStart,this),this._channel.on(W,this._onApiAdBreakComplete,this),this._channel.on(Q,this._onApiAdStart,this),this._channel.on(z,this._onApiAdComplete,this),this._channel.on(X,this._onApiAdSkip,this),this._channel.on(J,this._onApiPlay,this),this._channel.on(Z,this._onApiPause,this),this._channel.on($,this._onApiBufferStart,this),this._channel.on(ee,this._onApiChapterStart,this),this._channel.on(te,this._onApiChapterComplete,this),this._channel.on(ne,this._onApiChapterSkip,this),this._channel.on(ae,this._onApiBitrateChange,this),this._channel.on(ie,this._onApiTrackError,this),this._channel.on(re,this._onApiTrackInternalError,this),this._channel.on(oe,this._onApiQuantumEnd,this),this._channel.on(le,this._onNetworkCheckStatusComplete,this),this._channel.on(k,this._onResetSessionId,this),this._channel.reply(P,(function(){return this._sessionData&&this._sessionData.sessionId()?this._sessionData.sessionId():null}),this)},r.prototype._uninstallEventListeners=function(){this._channel.off(null,null,this)},r.prototype._resetInternalState=function(){this._logger.debug(b,"#_resetInternalState()"),this._isTrackingSessionActive=!1,this._isVideoComplete=!1,this._autoComputedStartupTime=0,this._lastInBandItem=null,this._stashedLastInBandItem=null,this._streamData=new f,this._qosData=new g,this._sessionData=new l,this._assetData=new _,this._cuserData=null},r.prototype._generateSessionId=function(){return""+(new Date).getTime()+Math.floor(1e9*Math.random())},r.prototype._updateQoSInfo=function(e){this._qosData.bitrate(e.bitrate||0),this._qosData.fps(e.fps||0),this._qosData.droppedFrames(e.droppedFrames||0),null==e.startupTime||isNaN(e.startupTime)?(this._qosData.startupTime(this._autoComputedStartupTime),this._qosData.isStartupTimeOverridden=!1):(this._qosData.startupTime(e.startupTime),this._qosData.isStartupTimeOverridden=!0)},r.prototype._checkCall=function(e){return this._isTrackingSessionActive?!this._isVideoComplete||"_onApiVideoSessionEnd"===e||(this._logger.warn(b,"#"+e+"() > The video content already completed."),!1):(this._logger.warn(b,"#"+e+"() > No active tracking session."),!1)},r.prototype._updateReportingInterval=function(e,t){var n={};n[x]=!!t,n[L]=e,this._channel.trigger(new s(ce,n))},r.prototype._updateLastInBandItem=function(e){var t=this._lastInBandItem,n=(new Date).getTime(),i=t.assetData.type()===_.TYPE_AD||e.assetData.type()===_.TYPE_AD,r=1e3*Math.abs(e.eventData.playhead()-t.eventData.playhead()),a=Math.abs(n-t.eventData.ts()),o=Math.abs(r-a),s=a;s>ue?(this._logger.warn(b," Resetting duration in lastInBandItem["+t.assetData.type()+":"+t.eventData.type()+"] call to 0 as calculated duration ("+s+")exceeds 10mins"),s=0):t.eventData.type()==p.EVENT_TYPE_PLAY&&!i&&!this._doNotOverrideEventDuration&&o>de&&(s=Math.min(r,a),this._logger.warn(b," Resetting duration in lastInBandItem["+t.assetData.type()+":"+t.eventData.type()+"] call to "+s+" as calculated error delta ("+o+")exceeds 2sec")),this._doNotOverrideEventDuration=!1,t.eventData.duration(s),t.eventData.ts(n),t.eventData.playhead(e.eventData.playhead()),t.qosData.startupTime(e.qosData.startupTime()),t.qosData.isStartupTimeOverridden=e.qosData.isStartupTimeOverridden},r.prototype._updateLastInbandItemToBuffering=function(){this._stashedLastInBandItem=this._lastInBandItem;var e=0;null!=this._lastInBandItem&&(this._lastInBandItem.assetData.type()==_.TYPE_MAIN_CONTENT&&this._lastInBandItem.eventData.type()==p.EVENT_TYPE_START&&(this._stashedMainMetadata=this._lastInBandItem.meta),e=this._lastInBandItem.eventData.playhead());var t=new y(this,p.EVENT_TYPE_BUFFER,e,null,null);t.assetData.adData(null),t.assetData.type(_.TYPE_MAIN_CONTENT),this._lastInBandItem=t},r.prototype._restoreLastInbandItem=function(){if(null!=this._stashedLastInBandItem){var e=null;this._stashedLastInBandItem.eventData.type()==p.EVENT_TYPE_START&&(this._lastInBandItem.assetData.type()==_.TYPE_AD?e=this._lastInBandItem.meta:(e=this._stashedMainMetadata,this._stashedMainMetadata=null));var t=new y(this,this._stashedLastInBandItem.eventData.type(),this._stashedLastInBandItem.eventData.playhead(),e,this._stashedLastInBandItem.callback);t.filterReport=this._stashedLastInBandItem.filterReport,this._lastInBandItem=t,this._stashedLastInBandItem=null}},r.prototype._flushLastInbandItem=function(e){if(this._lastInBandItem){this._updateQoSInfo(e);var t=new y(this,this._lastInBandItem.eventData.type(),e.playhead,this._lastInBandItem.meta,this._lastInBandItem.callback);this._sendHit(t,!0)}},r.prototype._createAndSendReport=function(e){var t=this._reportFactory.createReportForItem(e);t.qosData.isStartupTimeOverridden||t.qosData.startupTime(this._autoComputedStartupTime);var n={};if(n[O]=t,this._channel.trigger(new s(se,n)),t.eventData.type()==p.EVENT_TYPE_START||t.eventData.type()==p.EVENT_TYPE_PLAY||t.eventData.type()==p.EVENT_TYPE_PAUSE||t.eventData.type()==p.EVENT_TYPE_STALL||t.eventData.type()==p.EVENT_TYPE_BUFFER){var i={};i[R]=!0,this._channel.command(A,i)}},r.prototype._sendHit=function(e,t){switch(e.eventData.type()){case p.EVENT_TYPE_START:case p.EVENT_TYPE_PLAY:case p.EVENT_TYPE_PAUSE:case p.EVENT_TYPE_STALL:case p.EVENT_TYPE_BUFFER:this._lastInBandItem?(this._updateLastInBandItem(e),this._lastInBandItem.eventData.type()==p.EVENT_TYPE_START&&this._lastInBandItem.assetData.type()==_.TYPE_MAIN_CONTENT&&(this._autoComputedStartupTime+=this._lastInBandItem.eventData.duration()),this._createAndSendReport(this._lastInBandItem),t&&this._lastInBandItem.eventData.type()==e.eventData.type()||this._createAndSendReport(e)):this._createAndSendReport(e),this._lastInBandItem=e;break;case p.EVENT_TYPE_COMPLETE:case p.EVENT_TYPE_SKIP:if(this._lastInBandItem&&(this._updateLastInBandItem(e),this._createAndSendReport(this._lastInBandItem)),e.eventData.type()!==p.EVENT_TYPE_SKIP&&this._createAndSendReport(e),e.assetData.type()==_.TYPE_MAIN_CONTENT){this._lastInBandItem=null,this._stashedLastInBandItem=null;var n={};n[R]=!0,this._channel.command(C,n)}else e.assetData.type()==_.TYPE_AD&&(this._lastInBandItem.assetData.adData(null),this._lastInBandItem.assetData.type(_.TYPE_MAIN_CONTENT),this._doNotOverrideEventDuration=!0);break;case p.EVENT_TYPE_CHAPTER_START:case p.EVENT_TYPE_CHAPTER_COMPLETE:case p.EVENT_TYPE_CHAPTER_SKIP:this._lastInBandItem&&(this._updateLastInBandItem(e),this._createAndSendReport(this._lastInBandItem)),e.eventData.type()!==p.EVENT_TYPE_CHAPTER_SKIP&&this._createAndSendReport(e),this._lastInBandItem&&(this._lastInBandItem.assetData.chapterData(e.eventData.type()==p.EVENT_TYPE_CHAPTER_START?new m(e.assetData.chapterData()):null),this._lastInBandItem.eventData.duration(0),this._createAndSendReport(this._lastInBandItem));break;default:this._createAndSendReport(e)}};var b="ah::Context",T="sourceErrorSDK",w="error",A="clock:reporting.resume",C="clock:reporting.pause",I="reporting_interval",P="session_id",k="reset_session_id",M="callback",D="filter_report",O="report",R="reset",N="track_external_errors",L="reporting_interval",x="do_not_override_interval",F="api:aa_start",V="api:aa_ad_start",B="api:video_load",U="api:video_unload",j="api:video_start",H="api:video_complete",K="api:video_skip",Y="api:video_resume",q="api:video_session_end",G="api:adbreak_start",W="api:adbreak_complete",Q="api:ad_start",z="api:ad_complete",X="api:ad_skip",J="api:play",Z="api:pause",$="api:buffer_start",ee="api:chapter_start",te="api:chapter_complete",ne="api:chapter_skip",ie="api:track_error",re="api:track_internal_error",ae="api:bitrate_change",oe="api:quantum_end",se="context:report_available",le="net:check_status_complete",ce="reporting:update_interval",ue=6e5,de=2e3,he=10;i.context.Context=r}(e.ADB.core,e.ADB.va,e.ADB.va.utils,t),function(e){"use strict";var t="unknown";e.AdobeHeartbeatPluginConfig=function(e,n){this.trackingServer=e,this.publisher=n,this.ssl=!1,this.ovp=t,this.sdk=t,this.quietMode=!1,this.debugLogging=!1,this.__isPrimetime=!1,this.__psdkVersion=null}}(t),function(e){"use strict";function t(){}t.prototype.onError=function(e){},t.prototype.onTrackingDisabled=function(){},e.AdobeHeartbeatPluginDelegate=t}(t),function(e,t,n){"use strict";function i(e){i.__super__.constructor.call(this,g),this._radio=new l(this._logger),this._channel=this._radio.channel(w),this._delegate=e,this._context=new d(this._channel,this._logger),this._filter=new h(this._channel,this._logger),this._network=new p(this._channel,this._logger),this._setupDataResolver()}var r=e.Event,a=e.Trigger,o=e.plugin.BasePlugin,s=e.plugin.ParamMapping,l=e.radio.Radio,c=t.ErrorInfo,u=t.Version,d=n.context.Context,h=n.filter.ReportFilter,p=n.network.Network,_=n.clock.Clock,f=n.AdobeHeartbeatPluginConfig;e.extend(i,o),i.prototype.configure=function(e){if(!e)throw new Error("Reference to the configuration data cannot be NULL.");if(!(e instanceof f))throw new Error("Expected config data to be instance of AdobeHeartbeatPluginConfig.");this._config=e,this._config.debugLogging?this._logger.enable():this._logger.disable(),this._logger.debug(this._logTag,"#configure({trackingServer="+this._config.trackingServer+", publisher="+this._config.publisher+", quietMode="+this._config.quietMode+", ssl="+this._config.ssl+"})");var t=this._config.trackingServer+"/settings/",n={};n[oe]=this._config.trackingServer,n[se]=t,n[le]=this._config.publisher,n[ce]=this._config.quietMode,n[ue]=this._config.ssl,this._channel.trigger(new r(ge,n)),this._isConfigured=!0},i.prototype.bootstrap=function(e){i.__super__.bootstrap.call(this,e),this._channel.on(A,this._onError,this),this._clock=new _(this._pluginManager,this._channel,this._logger),this._channel.command(je),this._channel.trigger(new r(Qe)),this._channel.on(pe,this._onCheckStatusComplete,this),this._registerCommands(),this._registerBehaviours()},i.prototype._teardown=function(){this._logger.debug(this._logTag,"#_teardown()"),this._radio.shutdown(),this._context.destroy(),this._clock.destroy(),this._filter.destroy(),this._network.destroy()},i.prototype._canProcess=function(){return this._isConfigured?this._errorInfo?(this._logger.error(this._logTag,"_canProcess() > Plugin in ERROR state."),!1):i.__super__._canProcess.call(this):(this._logger.error(this._logTag,"_canProcess() > Plugin not configured."),!1)},i.prototype._cmdAnalyticsError=function(e){this._errorInfo||(this._errorInfo=new c("Internal error","AdobeAnalyticsPlugin is in ERROR state."),this._trigger(A,this._errorInfo),this._delegate&&this._delegate.onError(this._errorInfo))},i.prototype._cmdAnalyticsStart=function(e){if(this._canProcess()){var t={};t[de]=e.visitorOptedOut,this._channel.trigger(new r(ve,t)),this._channel.trigger(new r(_e,e))}},i.prototype._cmdAnalyticsAdStart=function(e){this._canProcess()&&this._channel.trigger(new r(fe,e))},i.prototype._cmdVideoLoad=function(e){this._errorInfo=null,this._canProcess()&&(this._isTrackingSessionActive&&this._channel.trigger(new r(ye,e)),this._isTrackingSessionActive=!1,this._isPaused=!0,this._isSeeking=!1,this._isBuffering=!1,this._isVideoIdle=!1,this._filter.clear(),this._channel.trigger(new r(me,e)),this._isTrackingSessionActive=!0)},i.prototype._cmdVideoUnload=function(e){this._errorInfo=null,this._canProcess()&&(this._channel.trigger(new r(ye,e)),this._filter.flush(),this._runReportingTimer(!1),this._runFlushFilterTimer(!1),this._runIdleTimer(!1),this._isTrackingSessionActive=!1)},i.prototype._cmdVideoSessionEnd=function(e){this._canProcess()&&this._channel.trigger(new r(we,e))},i.prototype._cmdVideoStart=function(e){this._canProcess()&&(this._channel.trigger(new r(Se,e)),this._filter.flush())},i.prototype._cmdVideoComplete=function(e){this._canProcess()&&this._channel.trigger(new r(Ee,e))},i.prototype._cmdVideoSkip=function(e){this._canProcess()&&this._channel.trigger(new r(be,e))},i.prototype._cmdVideoResume=function(e){this._canProcess()&&this._channel.trigger(new r(Te,e))},i.prototype._cmdPlay=function(e){this._canProcess()&&(this._isPaused=!1,this._resumePlaybackIfPossible(e))},i.prototype._cmdPause=function(e){this._canProcess()&&(this._channel.trigger(new r(De,e)),this._isPaused=!0,this._runIdleTimer(!0))},i.prototype._cmdAdBreakStart=function(e){this._canProcess()&&this._channel.trigger(new r(Ae,e))},i.prototype._cmdAdBreakComplete=function(e){this._canProcess()&&(this._channel.trigger(new r(Ce,e)),this._resumePlaybackIfPossible(e))},i.prototype._cmdAdStart=function(e){this._canProcess()&&(this._channel.trigger(new r(Ie,e)),this._resumePlaybackIfPossible(e))},i.prototype._cmdAdComplete=function(e){this._canProcess()&&this._channel.trigger(new r(Pe,e))},i.prototype._cmdAdSkip=function(e){this._canProcess()&&this._channel.trigger(new r(ke,e))},i.prototype._cmdBufferStart=function(e){this._canProcess()&&(this._channel.trigger(new r(Oe,e)),this._isBuffering=!0,this._runIdleTimer(!0))},i.prototype._cmdBufferComplete=function(e){this._canProcess()&&(this._isBuffering=!1,this._isPaused?this._channel.trigger(new r(De,e)):this._resumePlaybackIfPossible(e))},i.prototype._cmdSeekStart=function(e){this._canProcess()&&(this._channel.trigger(new r(De,e)),this._isSeeking=!0,this._runIdleTimer(!0))},i.prototype._cmdSeekComplete=function(e){this._canProcess()&&(this._isSeeking=!1,this._resumePlaybackIfPossible(e))},i.prototype._cmdChapterStart=function(e){this._canProcess()&&this._channel.trigger(new r(Re,e))},i.prototype._cmdChapterComplete=function(e){this._canProcess()&&this._channel.trigger(new r(Ne,e))},i.prototype._cmdChapterSkip=function(e){this._canProcess()&&this._channel.trigger(new r(Le,e))},i.prototype._cmdBitrateChange=function(e){this._canProcess()&&this._channel.trigger(new r(Ve,e))},i.prototype._cmdTrackError=function(e){this._canProcess()&&this._channel.trigger(new r(xe,e))},i.prototype._cmdClockReportingTick=function(e){this._canProcess()&&this._channel.trigger(new r(Be,e))},i.prototype._onCheckStatusComplete=function(e){if(this._canProcess()){var t=!1;e&&e.data&&e.data[he]&&(t=e.data[he]),this._logger.debug(this._logTag,"#_onCheckStatusComplete(trackingDisabled="+t+")"),t&&this._delegate&&this._delegate.onTrackingDisabled()}},i.prototype._cmdIdleTick=function(e){this._canProcess()&&(this._isVideoIdle=!0,this._trigger(ee),this._channel.trigger(new r(we,e)),this._filter.flush(),this._runReportingTimer(!1),this._runFlushFilterTimer(!1),this._runIdleTimer(!1),this._trigger(Z))},i.prototype._onError=function(e){this._errorInfo=e.data;var t={};t[re]=Ue,t[ae]=this._errorInfo.getMessage()+"|"+this._errorInfo.getDetails(),this._channel.trigger(new r(Fe,t)),this._runReportingTimer(!1),this._trigger(A,this._errorInfo),this._delegate&&this._delegate.onError(this._errorInfo)},i.prototype._runIdleTimer=function(e){var t={};t[ie]=!0,e?this._channel.command(Ge,t):this._channel.command(We,t)},i.prototype._runFlushFilterTimer=function(e){var t={};t[ie]=!0,e?this._channel.command(Ye,t):this._channel.command(qe,t)},i.prototype._runReportingTimer=function(e){var t={};t[ie]=!0,e?this._channel.command(He,t):this._channel.command(Ke,t)},i.prototype._registerCommands=function(){this._pluginManager.comply(this,"handleAnalyticsError",this._cmdAnalyticsError),this._pluginManager.comply(this,"handleAnalyticsStart",this._cmdAnalyticsStart),this._pluginManager.comply(this,"handleAnalyticsAdStart",this._cmdAnalyticsAdStart),this._pluginManager.comply(this,"handleVideoLoad",this._cmdVideoLoad),this._pluginManager.comply(this,"handleVideoUnload",this._cmdVideoUnload),this._pluginManager.comply(this,"handleVideoSessionEnd",this._cmdVideoSessionEnd),this._pluginManager.comply(this,"handleVideoStart",this._cmdVideoStart),this._pluginManager.comply(this,"handleVideoComplete",this._cmdVideoComplete),this._pluginManager.comply(this,"handleVideoSkip",this._cmdVideoSkip),this._pluginManager.comply(this,"handleVideoResume",this._cmdVideoResume),this._pluginManager.comply(this,"handlePlay",this._cmdPlay),this._pluginManager.comply(this,"handlePause",this._cmdPause),this._pluginManager.comply(this,"handleAdBreakStart",this._cmdAdBreakStart),this._pluginManager.comply(this,"handleAdBreakComplete",this._cmdAdBreakComplete),this._pluginManager.comply(this,"handleAdStart",this._cmdAdStart),this._pluginManager.comply(this,"handleAdComplete",this._cmdAdComplete),this._pluginManager.comply(this,"handleAdSkip",this._cmdAdSkip),this._pluginManager.comply(this,"handleBufferStart",this._cmdBufferStart),this._pluginManager.comply(this,"handleBufferComplete",this._cmdBufferComplete),this._pluginManager.comply(this,"handleSeekStart",this._cmdSeekStart),this._pluginManager.comply(this,"handleSeekComplete",this._cmdSeekComplete),this._pluginManager.comply(this,"handleChapterStart",this._cmdChapterStart),this._pluginManager.comply(this,"handleChapterComplete",this._cmdChapterComplete),this._pluginManager.comply(this,"handleChapterSkip",this._cmdChapterSkip),this._pluginManager.comply(this,"handleBitrateChange",this._cmdBitrateChange),this._pluginManager.comply(this,"handleTrackError",this._cmdTrackError),this._pluginManager.comply(this,"handleClockReportingTick",this._cmdClockReportingTick),this._pluginManager.comply(this,"handleIdleTick",this._cmdIdleTick)},i.prototype._registerBehaviours=function(){this._pluginManager.registerBehaviour(new a(y,P),this,"handleVideoLoad",[new s(m,"rsid","rsid"),new s(m,"tracking_server","trackingServer")]),this._pluginManager.registerBehaviour(new a(y,k),this,"handleVideoUnload"),this._pluginManager.registerBehaviour(new a(y,M),this,"handleVideoSessionEnd",[new s(y,"video.playhead","playhead")]),this._pluginManager.registerBehaviour(new a(y,D),this,"handleVideoStart",[new s(y,"video.id","videoId"),new s(y,"video.name","videoName"),new s(y,"video.length","videoLength"),new s(y,"video.playhead","playhead"),new s(y,"video.playerName","playerName"),new s(y,"video.streamType","streamType"),new s(y,"qos.fps","fps"),new s(y,"qos.droppedFrames","droppedFrames"),new s(y,"qos.bitrate","bitrate"),new s(y,"qos.startupTime","startupTime"),new s(m,"rsid","rsid"),new s(m,"tracking_server","trackingServer"),new s(m,"channel","channel"),new s(m,"meta.video.*","metaVideo"),new s(m,"ssl","useSsl"),new s(S,"meta","metaNielsen"),new s(v,"publisher","publisher"),new s(v,"sdk","sdk"),new s(v,"ovp","ovp"),new s(v,"version","version"),new s(v,"api_level","apiLvl")]),this._pluginManager.registerBehaviour(new a(y,R),this,"handleVideoComplete",[new s(y,"qos.fps","fps"),new s(y,"qos.droppedFrames","droppedFrames"),new s(y,"qos.bitrate","bitrate"),new s(y,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new a(y,N),this,"handleVideoSkip",[new s(y,"video.playhead","playhead"),new s(y,"qos.fps","fps"),new s(y,"qos.droppedFrames","droppedFrames"),new s(y,"qos.bitrate","bitrate"),new s(y,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new a(y,O),this,"handleVideoResume",[new s(y,"video.id","videoId"),new s(y,"video.name","videoName"),new s(y,"video.length","videoLength"),new s(y,"video.playhead","playhead"),new s(y,"video.playerName","playerName"),new s(y,"video.streamType","streamType")]),this._pluginManager.registerBehaviour(new a(y,L),this,"handlePlay",[new s(y,"video.playhead","playhead"),new s(y,"qos.fps","fps"),new s(y,"qos.droppedFrames","droppedFrames"),new s(y,"qos.bitrate","bitrate"),new s(y,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new a(y,x),this,"handlePause",[new s(y,"video.playhead","playhead"),new s(y,"video.playheadStalled","playheadStalled"),new s(y,"qos.fps","fps"),new s(y,"qos.droppedFrames","droppedFrames"),new s(y,"qos.bitrate","bitrate"),new s(y,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new a(y,V),this,"handleAdBreakStart",[new s(y,"ad.isInAdBreak","isInAdBreak"),new s(y,"video.playhead","playhead"),new s(y,"qos.fps","fps"),new s(y,"qos.droppedFrames","droppedFrames"),new s(y,"qos.bitrate","bitrate"),new s(y,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new a(y,B),this,"handleAdBreakComplete",[new s(y,"ad.isInAdBreak","isInAdBreak"),new s(y,"video.playhead","playhead"),new s(y,"qos.fps","fps"),new s(y,"qos.droppedFrames","droppedFrames"),new s(y,"qos.bitrate","bitrate"),new s(y,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new a(y,U),this,"handleAdStart",[new s(y,"video.playhead","playhead"),new s(y,"ad.id","adId"),new s(y,"ad.name","adName"),new s(y,"ad.length","adLength"),new s(y,"ad.position","adPosition"),new s(y,"ad.granularTracking","adGranularTracking"),new s(y,"ad.trackingInterval","adTrackingInterval"),new s(y,"pod.name","podName"),new s(y,"pod.playerName","podPlayerName"),new s(y,"pod.position","podPosition"),new s(y,"pod.startTime","podSecond"),new s(y,"qos.fps","fps"),new s(y,"qos.droppedFrames","droppedFrames"),new s(y,"qos.bitrate","bitrate"),new s(y,"qos.startupTime","startupTime"),new s(m,"meta.video.*","metaVideo"),new s(m,"meta.ad.*","metaAd"),new s(S,"meta","metaNielsen"),new s(S,"metaAd","metaAdNielsen")]),this._pluginManager.registerBehaviour(new a(y,j),this,"handleAdComplete",[new s(y,"video.playhead","playhead"),new s(y,"ad.isInAdBreak","isInAdBreak"),new s(y,"qos.fps","fps"),new s(y,"qos.droppedFrames","droppedFrames"),new s(y,"qos.bitrate","bitrate"),new s(y,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new a(y,H),this,"handleAdSkip",[new s(y,"video.playhead","playhead"),new s(y,"ad.isInAdBreak","isInAdBreak"),new s(y,"qos.fps","fps"),new s(y,"qos.droppedFrames","droppedFrames"),new s(y,"qos.bitrate","bitrate"),new s(y,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new a(y,K),this,"handleBufferStart",[new s(y,"video.playhead","playhead"),new s(y,"qos.fps","fps"),new s(y,"qos.droppedFrames","droppedFrames"),new s(y,"qos.bitrate","bitrate"),new s(y,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new a(y,Y),this,"handleBufferComplete",[new s(y,"video.playhead","playhead"),new s(y,"video.playheadStalled","playheadStalled"),new s(y,"qos.fps","fps"),new s(y,"qos.droppedFrames","droppedFrames"),new s(y,"qos.bitrate","bitrate"),new s(y,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new a(y,q),this,"handleSeekStart",[new s(y,"video.playhead","playhead")]),this._pluginManager.registerBehaviour(new a(y,G),this,"handleSeekComplete",[new s(y,"video.playhead","playhead"),new s(y,"ad.isInAd","isInAd"),new s(y,"ad.id","adId"),new s(y,"ad.position","adPosition"),new s(y,"pod.playerName","podPlayerName"),new s(y,"pod.position","podPosition"),new s(y,"chapter.isInChapter","isInChapter"),new s(y,"chapter.position","chapterPosition"),new s(y,"chapter.name","chapterName"),new s(y,"chapter.length","chapterLength"),new s(y,"chapter.startTime","chapterOffset"),new s(y,"qos.fps","fps"),new s(y,"qos.droppedFrames","droppedFrames"),new s(y,"qos.bitrate","bitrate"),new s(y,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new a(y,W),this,"handleChapterStart",[new s(y,"video.playhead","playhead"),new s(y,"chapter.position","chapterPosition"),new s(y,"chapter.name","chapterName"),new s(y,"chapter.length","chapterLength"),new s(y,"chapter.startTime","chapterOffset"),new s(y,"qos.fps","fps"),new s(y,"qos.droppedFrames","droppedFrames"),new s(y,"qos.bitrate","bitrate"),new s(y,"qos.startupTime","startupTime"),new s(m,"meta.video.*","metaVideo"),new s(m,"meta.chapter.*","metaChapter"),new s(S,"meta","metaNielsen")]),this._pluginManager.registerBehaviour(new a(y,Q),this,"handleChapterComplete",[new s(y,"video.playhead","playhead"),new s(y,"qos.fps","fps"),new s(y,"qos.droppedFrames","droppedFrames"),new s(y,"qos.bitrate","bitrate"),new s(y,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new a(y,z),this,"handleChapterSkip",[new s(y,"video.playhead","playhead"),new s(y,"qos.fps","fps"),new s(y,"qos.droppedFrames","droppedFrames"),new s(y,"qos.bitrate","bitrate"),new s(y,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new a(y,X),this,"handleBitrateChange",[new s(y,"video.playhead","playhead"),new s(y,"qos.fps","fps"),new s(y,"qos.droppedFrames","droppedFrames"),new s(y,"qos.bitrate","bitrate"),new s(y,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new a(y,J),this,"handleTrackError"),this._pluginManager.registerBehaviour(new a(E,te),this,"handleClockReportingTick",[new s(y,"video.playhead","playhead"),new s(y,"qos.fps","fps"),new s(y,"qos.droppedFrames","droppedFrames"),new s(y,"qos.bitrate","bitrate"),new s(y,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new a(y,F),this,"handleClockReportingTick",[new s(y,"video.playhead","playhead"),new s(y,"qos.fps","fps"),new s(y,"qos.droppedFrames","droppedFrames"),new s(y,"qos.bitrate","bitrate"),new s(y,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new a(E,ne),this,"handleIdleTick",[new s(y,"video.playhead","playhead")]),this._pluginManager.registerBehaviour(new a(v,ee),this,"handleClockReportingTick",[new s(y,"video.playhead","playhead"),new s(y,"qos.fps","fps"),new s(y,"qos.droppedFrames","droppedFrames"),new s(y,"qos.bitrate","bitrate"),new s(y,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new a(m,A),this,"handleAnalyticsError"),this._pluginManager.registerBehaviour(new a(m,C),this,"handleAnalyticsStart",[new s(m,"vid","vid"),new s(m,"aid","aid"),new s(m,"mid","mid"),new s(m,"customerIDs","customerIDs"),new s(m,"visitorOptedOut","visitorOptedOut"),new s(m,"blob","blob"),new s(m,"loc_hint","loc_hint"),new s(y,"video.playhead","playhead"),new s(y,"qos.fps","fps"),new s(y,"qos.droppedFrames","droppedFrames"),new s(y,"qos.bitrate","bitrate"),new s(y,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new a(m,I),this,"handleAnalyticsAdStart",[new s(y,"video.playhead","playhead"),new s(y,"qos.fps","fps"),new s(y,"qos.droppedFrames","droppedFrames"),new s(y,"qos.bitrate","bitrate"),new s(y,"qos.startupTime","startupTime")])},i.prototype._setupDataResolver=function(){var e={},t=this;e.version=function(){return u.getVersion()},e.api_level=function(){return u.getApiLevel()},e.tracking_server=function(){return t._config?t._config.trackingServer:null},e.publisher=function(){return t._config?t._config.publisher:null},e.quiet_mode=function(){return!!t._config&&t._config.quietMode},e.ovp=function(){return t._config?t._config.ovp:null},e.sdk=function(){return t._config?t._config.sdk:null},e.is_primetime=function(){return!!t._config&&t._config.__isPrimetime},e.psdk_version=function(){return t._config?t._config.__psdkVersion:null},e.session_id=function(){return t._channel.request(b)},this._dataResolver=function(t){if(!t||0==t.length)return null;for(var n=null,i=0;i<t.length;i++){var r=t[i];(n=n||{})[r]=e.hasOwnProperty(r)?e[r].call(this):null}return n}},i.prototype._resumePlaybackIfPossible=function(e){this._errorInfo||this._isPaused||this._isSeeking||this._isBuffering||(this._isVideoIdle?(this._isVideoIdle=!1,this._resumePlaybackFromIdle()):this._channel.trigger(new r(Me,e)),this._runIdleTimer(!1))},i.prototype._resumePlaybackFromIdle=function(){this._trigger(ee),this._filter.clear(),this._channel.trigger(new r(T)),this._trigger($),this._runReportingTimer(!0),this._runFlushFilterTimer(!0)};var g="adobe-heartbeat",v=g,m="adobe-analytics",y="player",S="nielsen",E="service.clock",b="session_id",T="reset_session_id",w="heartbeat-channel",A="error",C="aa_start",I="sc_ad_start",P="video_load",k="video_unload",M="video_session_end",D="video_start",O="video_resume",R="video_complete",N="video_skip",L="play",x="pause",F="content_start",V="adbreak_start",B="adbreak_complete",U="ad_start",j="ad_complete",H="ad_skip",K="buffer_start",Y="buffer_complete",q="seek_start",G="seek_complete",W="chapter_start",Q="chapter_complete",z="chapter_skip",X="bitrate_change",J="track_error",Z="video_idle_start",$="video_idle_resume",ee="quantum_close",te="heartbeat.reporting.tick",ne="heartbeat.idle.tick",ie="reset",re="source",ae="error_id",oe="tracking_server",se="check_status_server",le="publisher",ce="quiet_mode",ue="ssl",de="visitor_opt_out",he="tracking_disabled",pe="net:check_status_complete",_e="api:aa_start",fe="api:aa_ad_start",ge="api:config",ve="api:update_visitor_optout",me="api:video_load",ye="api:video_unload",Se="api:video_start",Ee="api:video_complete",be="api:video_skip",Te="api:video_resume",we="api:video_session_end",Ae="api:adbreak_start",Ce="api:adbreak_complete",Ie="api:ad_start",Pe="api:ad_complete",ke="api:ad_skip",Me="api:play",De="api:pause",Oe="api:buffer_start",Re="api:chapter_start",Ne="api:chapter_complete",Le="api:chapter_skip",xe="api:track_error",Fe="api:track_internal_error",Ve="api:bitrate_change",Be="api:quantum_end",Ue="sourceErrorHeartbeat",je="clock:check_status.resume",He="clock:reporting.resume",Ke="clock:reporting.pause",Ye="clock:flush_filter.resume",qe="clock:flush_filter.pause",Ge="clock:idle.resume",We="clock:idle.pause",Qe="clock:check_status.get_settings";n.AdobeHeartbeatPlugin=i}(e.ADB.core,e.ADB.va,t),e.ADB.va.plugins.ah||(e.ADB.va.plugins.ah=t)}(this),function(e){if(void 0===t)var t={};!function(e,t){"use strict";function n(e,t){this._onFail={fn:e,ctx:t}}var i=e.ErrorInfo;n.prototype.validateFields=function(e,t){if(!e)return this._fail("Data cannot be null");if(t)for(var n=0;n<t.length;n++){var i=t[n];switch(i){case"videoId":if(!e.hasOwnProperty("videoId"))return this._fail("The ID for the main video must be specified.");if("string"!=typeof e.videoId)return this._fail("The ID for the main video must be a String.");if(""===e.videoId)return this._fail("The ID for the main video cannot be an empty string.");break;case"mediaType":if(!e.hasOwnProperty("mediaType"))return this._fail("The media type for the main video must be specified.");if("string"!=typeof e.mediaType)return this._fail("The media type for the main video must be a String.");if(""===e.mediaType)return this._fail("The stream type for the main video cannot be an empty string.");break;case"streamType":if(!e.hasOwnProperty("streamType"))return this._fail("The stream type for the main video must be specified.");if("string"!=typeof e.streamType)return this._fail("The stream type for the main video must be a String.");if(""===e.streamType)return this._fail("The stream type for the main video cannot be an empty string.");break;case"playerName":if(!e.hasOwnProperty("playerName"))return this._fail("The player name for the main video must be specified.");if("string"!=typeof e.playerName)return this._fail("The player name for the main video must be a String.");if(""===e.playerName)return this._fail("The player name for the main video cannot be an empty string.");break;case"videoLength":if(!e.hasOwnProperty("videoLength"))return this._fail("The length of the main video must be specified.");if("number"!=typeof e.videoLength)return this._fail("The length of the main video must be a Number.");if(isNaN(e.videoLength))return this._fail("The length of the main video cannot be NaN.");break;case"podPlayerName":if(!e.hasOwnProperty("podPlayerName"))return this._fail("The player name for the ad-break must be specified.");if("string"!=typeof e.podPlayerName)return this._fail("The player name for the ad-break must be a String.");if(""===e.podPlayerName)return this._fail("The player name for the ad-break cannot be an empty string.");break;case"podPosition":if(!e.hasOwnProperty("podPosition"))return this._fail("Position (index) of the ad-break must be specified.");if("number"!=typeof e.podPosition)return this._fail("Position (index) of the ad-break must be a Number.");if(isNaN(e.podPosition))return this._fail("Position (index) of the ad-break cannot be NaN.");break;case"adId":if(!e.hasOwnProperty("adId"))return this._fail("The ad ID must be specified.");if("string"!=typeof e.adId)return this._fail("The ad ID must be a String.");if(""===e.adId)return this._fail("The ad ID cannot be an empty string.");break;case"adPosition":if(!e.hasOwnProperty("adPosition"))return this._fail("Position (index) of the ad must be specified.");if("number"!=typeof e.adPosition)return this._fail("Position (index) of the ad must be a Number.");if(isNaN(e.adPosition))return this._fail("Position (index) of the ad cannot be NaN.");break;case"adLength":if(!e.hasOwnProperty("adLength"))return this._fail("The length of the ad must be specified.");if("number"!=typeof e.adLength)return this._fail("The length of the ad must be a Number.");if(isNaN(e.adLength))return this._fail("The length of the ad cannot be NaN.");break;default:return this._fail("Unable to validate unknown parameter: "+i)}}return!0},n.prototype._fail=function(e){var t=new i("Invalid input data",e);return this._onFail.fn&&this._onFail.fn.call(this._onFail.ctx,t),!1},t.InputDataValidator=n}(e.ADB.va,t),function(e){"use strict";var t="";e.AdobeAnalyticsPluginConfig=function(){this.channel=t,this.debugLogging=!1}}(t),function(e){"use strict";function t(){}t.prototype.onError=function(e){},e.AdobeAnalyticsPluginDelegate=t}(t),function(e,t,n,i){"use strict";function r(e,t){if(r.__super__.constructor.call(this,v),!e)throw new Error("The reference to the AppMeasurement object cannot be NULL.");if(e.unsupportedBrowser)throw new Error("AppMeasurement is not supported in current browser.");this._appMeasurement=e,this._delegate=t,this._videoMetadata={},this._adMetadata={},this._chapterMetadata={},this._errorInfo=null,this._workQueue=new u(!0,b),this._inputDataValidator=new g((function(e){this._errorInfo=e,this._logger.error(this._logTag,e.getMessage()+" | "+e.getDetails());var t=this;setTimeout((function(){t._trigger(T,e),t._delegate&&t._delegate.onError(t._errorInfo)}),0)}),this),this._appMeasurement.isReadyToTrack(),this._setupDataResolver()}var a=e.Trigger,o=e.plugin.BasePlugin,s=e.plugin.ParamMapping,l=e.radio.Channel,c=e.radio.Command,u=e.radio.CommandQueue,d=t.ErrorInfo,h=n.md5,p=n.StringUtils,_=n.ObjectUtils,f=i.AdobeAnalyticsPluginConfig,g=i.InputDataValidator;e.extend(r,o),r.prototype.configure=function(e){if(!e)throw new Error("Reference to the configuration data cannot be NULL.");if(!(e instanceof f))throw new Error("Expected config data to be instance of AdobeAnalyticsPluginConfig.");this._config=e,this._config.debugLogging?this._logger.enable():this._logger.disable(),this._logger.debug(this._logTag,"#configure({trackingServer="+this._config.debugLogging+", channel="+this._config.channel+", ssl="+this._appMeasurement.ssl+"})")},r.prototype.bootstrap=function(e){r.__super__.bootstrap.call(this,e),this._registerCommands(),this._registerBehaviours()},r.prototype.setup=function(){this._appMeasurement.isReadyToTrack()?this._onAppMeasurementReady():this._appMeasurement.callbackWhenReadyToTrack(this,this._onAppMeasurementReady,[]),r.__super__.setup.call(this)},r.prototype.setVideoMetadata=function(e){this._videoMetadata=_.clone(e)},r.prototype.setAdMetadata=function(e){this._adMetadata=_.clone(e)},r.prototype.setChapterMetadata=function(e){this._chapterMetadata=_.clone(e)},r.prototype._canProcess=function(){return this._errorInfo?(this._logger.error(this._logTag,"#_canProcess() > In ERROR state."),!1):r.__super__._canProcess.call(this)},r.prototype._cmdVideoLoad=function(e){this._errorInfo=null},r.prototype._cmdVideoStart=function(e){this._logger.debug(this._logTag,"#_cmdVideoStart()"),this._canProcess()&&this._workQueue.addCommand(new c(this._executeOpen,this,[e]))},r.prototype._cmdAdStart=function(e){this._logger.debug(this._logTag,"#_cmdAdStart()"),this._canProcess()&&this._workQueue.addCommand(new c(this._executeOpenAd,this,[e]))},r.prototype._cmdHeartbeatPluginError=function(e){this._errorInfo||(this._errorInfo=new d("Internal error","HeartbeatPlugin is in ERROR state."),this._trigger(T,this._errorInfo),this._delegate&&this._delegate.onError(this._errorInfo))},r.prototype._track=function(e){try{if(!this._appMeasurement.visitorOptedOut){var t=this._appMeasurement.linkTrackVars;this._appMeasurement.linkTrackVars="",this._appMeasurement.track(e),this._appMeasurement.linkTrackVars=t}}catch(e){this._logger.warn(this._logTag,"appMeasurement.track() call threw an exception.")}},r.prototype._executeOpen=function(e){if(this._logger.debug(this._logTag,"#_executeOpen(id="+e.videoId+", videoName="+e.videoName+", mediaType="+e.mediaType+", streamType="+e.streamType+", length="+e.videoLength+", playerName="+e.playerName+", channel="+e.channel+", isPrimetime="+e.isPrimetime+", sessionId="+e.sessionId+")"),this._canProcess()&&this._inputDataValidator.validateFields(e,["videoId","mediaType","streamType","videoLength","playerName"])){var t={};for(var n in e.metaVideo)e.metaVideo.hasOwnProperty(n)&&(t[n]=e.metaVideo[n]);if(e.metaNielsen)for(var n in e.metaNielsen)e.metaNielsen.hasOwnProperty(n)&&(t[n]=e.metaNielsen[n]);t["a.contentType"]=e.streamType,t["a.media.name"]=e.videoId,t["a.media.friendlyName"]=e.videoName||"",t["a.media.length"]=Math.floor(e.videoLength)||"0",t["a.media.playerName"]=e.playerName,t["a.media.channel"]=e.channel||"",t["a.media.view"]=!0,t["a.media.vsid"]=e.sessionId;var i={};i.contextData=t,"audio"===e.mediaType?(i.pev3=C,i.ms_a="1"):i.pev3=w,i.pe=e.isPrimetime?k:P,this._track(i);var r=this;setTimeout((function(){r._trigger(O,e)}),0)}},r.prototype._executeOpenAd=function(e){var t=h(e.videoId)+"_"+e.podPosition;if(this._logger.debug(this._logTag,"#_executeOpenAd(id="+e.adId+", mediaType="+e.mediaType+", streamType="+e.streamType+", length="+e.adLength+", podPlayerName="+e.podPlayerName+", parentId="+e.videoId+", podId="+t+", parentPodPosition="+e.adPosition+", podSecond="+e.podSecond+")"),this._canProcess()&&this._inputDataValidator.validateFields(e,["videoId","mediaType","streamType","playerName","adId","adLength","podPlayerName","adPosition"])){e.podSecond=null==e.podSecond||isNaN(e.podSecond)?e.playhead:e.podSecond;var n={};for(i in e.metaVideo)e.metaVideo.hasOwnProperty(i)&&(n[i]=e.metaVideo[i]);for(i in e.metaAd)e.metaAd.hasOwnProperty(i)&&(n[i]=e.metaAd[i]);if(e.metaNielsen)for(var i in e.metaNielsen)e.metaNielsen.hasOwnProperty(i)&&(n[i]=e.metaNielsen[i]);n["a.contentType"]=e.streamType,n["a.media.name"]=e.videoId,n["a.media.playerName"]=e.playerName,n["a.media.channel"]=e.channel||"",n["a.media.vsid"]=e.sessionId,n["a.media.friendlyName"]=e.videoName||"",n["a.media.length"]=Math.floor(e.videoLength)||"0",n["a.media.ad.name"]=e.adId,n["a.media.ad.friendlyName"]=e.adName||"",n["a.media.ad.podFriendlyName"]=e.podName||"",n["a.media.ad.length"]=Math.floor(e.adLength)||"0",n["a.media.ad.playerName"]=e.podPlayerName,n["a.media.ad.pod"]=t,n["a.media.ad.podPosition"]=Math.floor(e.adPosition)||"0",n["a.media.ad.podSecond"]=Math.floor(e.podSecond)||"0",n["a.media.ad.view"]=!0;var r={};r.contextData=n,"audio"===e.mediaType?(r.pev3=I,r.ms_a="1"):r.pev3=A,r.pe=e.isPrimetime?D:M,this._track(r);var a=this;setTimeout((function(){a._trigger(R,e)}),0)}},r.prototype._setupDataResolver=function(){var e={},t=this;e.rsid=function(){return t._appMeasurement.account},e.tracking_server=function(){return t._appMeasurement.ssl&&t._appMeasurement.trackingServerSecure?t._appMeasurement.trackingServerSecure:t._appMeasurement.trackingServer},e.ssl=function(){return t._appMeasurement.ssl},e.vid=function(){return t._appMeasurement.visitorID},e.aid=function(){return t._appMeasurement.analyticsVisitorID},e.mid=function(){return t._appMeasurement.marketingCloudVisitorID},e.blob=function(){return t._appMeasurement.audienceManagerBlob},e.loc_hint=function(){return t._appMeasurement.audienceManagerLocationHint?parseInt(t._appMeasurement.audienceManagerLocationHint):""},e.customerIDs=function(){var e={},n=t._appMeasurement.visitor.getCustomerIDs();for(var i in n)if(n.hasOwnProperty(i)){var r=n[i];if("object"==typeof r){for(var a in r)r.hasOwnProperty(a)&&("authState"==a?e[i+".as"]=r[a]:e[i+"."+a]=r[a]);e[i+".as"]||(e[i+".as"]="0")}}return e},e.visitorOptedOut=function(){return!!t._appMeasurement.visitorOptedOut},e.channel=function(){return t._config?t._config.channel:null},e.meta=function(e){var n=e.split(".");if(n.length<2)return null;var i=n.shift();switch(e=n.join("."),i){case"video":return e==l.WILDCARD?t._videoMetadata:t._videoMetadata[e];case"ad":return e==l.WILDCARD?t._adMetadata:t._adMetadata[e];case"chapter":return e==l.WILDCARD?t._chapterMetadata:t._chapterMetadata[e];default:return null}},this._dataResolver=function(t){if(!t||0==t.length)return null;for(var n=null,i=0;i<t.length;i++){var r=t[i];n=n||{},p.startsWith(r,"meta.")?n[r]=e.meta(r.split("meta.")[1]):n[r]=e.hasOwnProperty(r)?e[r].call(this):null}return n}},r.prototype._registerCommands=function(){this._pluginManager.comply(this,"handleVideoLoad",this._cmdVideoLoad),this._pluginManager.comply(this,"handleVideoStart",this._cmdVideoStart),this._pluginManager.comply(this,"handleAdStart",this._cmdAdStart),this._pluginManager.comply(this,"handleHeartbeatPluginError",this._cmdHeartbeatPluginError)},r.prototype._registerBehaviours=function(){this._pluginManager.registerBehaviour(new a(S,N),this,"handleVideoLoad"),this._pluginManager.registerBehaviour(new a(S,L),this,"handleVideoStart",[new s(S,"video.id","videoId"),new s(S,"video.mediaType","mediaType"),new s(S,"video.streamType","streamType"),new s(S,"video.name","videoName"),new s(S,"video.length","videoLength"),new s(S,"video.playerName","playerName"),new s(S,"video.streamType","streamType"),new s(E,"is_primetime","isPrimetime"),new s(E,"session_id","sessionId"),new s(m,"channel","channel"),new s(m,"meta.video.*","metaVideo"),new s(y,"meta","metaNielsen")]),this._pluginManager.registerBehaviour(new a(S,x),this,"handleAdStart",[new s(S,"video.id","videoId"),new s(S,"video.mediaType","mediaType"),new s(S,"video.streamType","streamType"),new s(S,"video.playhead","playhead"),new s(S,"video.playerName","playerName"),new s(S,"video.name","videoName"),new s(S,"video.length","videoLength"),new s(S,"ad.id","adId"),new s(S,"ad.length","adLength"),new s(S,"ad.position","adPosition"),new s(S,"ad.name","adName"),new s(S,"pod.name","podName"),new s(S,"pod.position","podPosition"),new s(S,"pod.playerName","podPlayerName"),new s(S,"pod.startTime","podSecond"),new s(E,"is_primetime","isPrimetime"),new s(E,"session_id","sessionId"),new s(m,"channel","channel"),new s(m,"meta.video.*","metaVideo"),new s(m,"meta.ad.*","metaAd"),new s(y,"meta","metaNielsen")]),this._pluginManager.registerBehaviour(new a(E,T),this,"handleHeartbeatPluginError")},r.prototype._onAppMeasurementReady=function(){this._logger.debug(this._logTag,"[Init] #_onAppMeasurementReady"),this._workQueue.resume()};var v="adobe-analytics",m=v,y="nielsen",S="player",E="adobe-heartbeat",b=2e3,T="error",w="video",A="videoAd",C="audio",I="audioAd",P="ms_s",k="msp_s",M="msa_s",D="mspa_s",O="aa_start",R="sc_ad_start",N="video_load",L="video_start",x="ad_start";i.AdobeAnalyticsPlugin=r}(e.ADB.core,e.ADB.va,e.ADB.va.utils,t),function(e){"use strict";e.VideoMetadataKeys={SHOW:"a.media.show",SEASON:"a.media.season",EPISODE:"a.media.episode",ASSET_ID:"a.media.asset",GENRE:"a.media.genre",FIRST_AIR_DATE:"a.media.airDate",FIRST_DIGITAL_DATE:"a.media.digitalDate",RATING:"a.media.rating",ORIGINATOR:"a.media.originator",NETWORK:"a.media.network",SHOW_TYPE:"a.media.type",AD_LOAD:"a.media.adLoad",MVPD:"a.media.pass.mvpd",AUTHORIZED:"a.media.pass.auth",DAY_PART:"a.media.dayPart",FEED:"a.media.feed",STREAM_FORMAT:"a.media.format"},e.AudioMetadataKeys={ARTIST:"a.media.artist",ALBUM:"a.media.album",LABEL:"a.media.label",AUTHOR:"a.media.author",STATION:"a.media.station",PUBLISHER:"a.media.publisher"},e.AdMetadataKeys={ADVERTISER:"a.media.ad.advertiser",CAMPAIGN_ID:"a.media.ad.campaign",CREATIVE_ID:"a.media.ad.creative",PLACEMENT_ID:"a.media.ad.placement",SITE_ID:"a.media.ad.site",CREATIVE_URL:"a.media.ad.creativeURL"}}(t),e.ADB.va.plugins.aa||(e.ADB.va.plugins.aa=t)}(this),function(e,t){"use strict";function n(){this._processAction=!0,this._store={}}function i(e){if(!e)throw new Error("Reference to the logger object cannot be NULL");this._logger=e,this._rules=[]}n.prototype.setRuleName=function(e){this._ruleName=e},n.prototype.getRuleName=function(e,t){return this._ruleName},n.prototype.setData=function(e,t){this._store[e]=t},n.prototype.getData=function(e){return this._store[e]},n.prototype.shouldProcessAction=function(){return this._processAction},n.prototype.stopProcessingAction=function(){this._processAction=!1},n.prototype.startProcessingAction=function(){this._processAction=!0},i.createContext=function(){return new n},i.createPredicate=function(e,t,n){return{fn:e,expectedValue:t,msg:n}},i.prototype.registerRule=function(e,t,n,i,r){this._rules.push({name:e,desc:t,preconditions:n,actions:i,scope:r})},i.prototype.registerEnterExitAction=function(e,t){this._enterAction=e,this._exitAction=t},i.prototype._handleFailure=function(e,t){this._logger.error(r,e.desc+" -  "+t.msg)},i.prototype._getRule=function(e){for(var t=0;t<this._rules.length;++t)if(this._rules[t].name===e)return this._rules[t];return null},i.prototype.processRule=function(e,t){var n=!0,a=this._getRule(e);if(a){var o=a.scope;t||(t=i.createContext()),t.setRuleName(e);for(var s=!1,l=0;l<a.preconditions.length;++l){var c=a.preconditions[l];if(s=!!c.fn.call(o,t)!==c.expectedValue){this._handleFailure(a,c);break}}if(s)n=!1;else{for(t.startProcessingAction(),this._enterAction&&this._enterAction.call(o,t),l=0;l<a.actions.length;++l){var u=a.actions[l];if(!t.shouldProcessAction()){this._logger.info(r,"Stopping actions for "+a.desc);break}u.call(o,t)}this._exitAction&&t.shouldProcessAction()&&this._exitAction.call(o,t)}}else this._logger.warn(r,"No registered event found for ruleName "+e),n=!1;return n};var r="RuleEngine";t._RuleEngine=i}((e=this).ADB.core,e.ADB.va),function(e,t){"use strict";function n(e,t,n){this.taskFn=e,this.scope=t,this.interval=n,this.remainingInterval=n}function i(e){if(!e)throw new Error("Reference to the logger object cannot be NULL");this._logger=e,this._tasks=[],this._pausedTasks=[]}n.prototype.elapsedTime=function(e){this.remainingInterval-=e},n.prototype.shouldExecute=function(){return this.remainingInterval<=0},n.prototype.execute=function(){this.taskFn.call(this.scope)},i.prototype._getCurrentTimeInMS=function(){return(new Date).getTime()},i.prototype._runTasksForTime=function(e){var t=[],n=e-this._lastTickTime;this._lastTickTime=e;for(var i=0;i<this._tasks.length;){var r=this._tasks[i];r.elapsedTime(n),r.shouldExecute()?(t.push(r),this._tasks.splice(i,1)):++i}for(this._checkStopTimer(),i=0;i<t.length;++i)t[i].execute()},i.prototype._onTick=function(){var e=this._getCurrentTimeInMS();this._runTasksForTime(e)},i.prototype._startTimer=function(){var e=this;this._timer||(this._logger.info(r,"#startTimer()"),e._lastTickTime=this._getCurrentTimeInMS(),this._timer=window.setInterval((function(){e._onTick()}),a))},i.prototype._stopTimer=function(){this._timer&&(this._logger.info(r,"#stopTimer()"),window.clearInterval(this._timer),this._timer=null)},i.prototype._checkStartTimer=function(){this._tasks.length>0&&this._startTimer()},i.prototype._checkStopTimer=function(){0===this._tasks.length&&this._stopTimer()},i.prototype._removeTask=function(e,t){for(var n=0;n<e.length;++n)if(e[n]===t)return e.splice(n,1),!0;return!1},i.prototype.scheduleTask=function(e,t,i){if(this._logger.info(r,"#scheduleTask()"),!e)throw new Error("Reference to the taskFn cannot be NULL");var a=new n(e,t,i);return this._tasks.push(a),this._checkStartTimer(),a},i.prototype.cancelTask=function(e){this._logger.info(r,"#cancelTask()"),this._removeTask(this._tasks,e),this._checkStopTimer()},i.prototype.pauseTask=function(e){this._logger.info(r,"#pauseTask()"),this._removeTask(this._tasks,e)&&this._pausedTasks.push(e),this._checkStopTimer()},i.prototype.resumeTask=function(e){this._logger.info(r,"#resumeTask()"),this._removeTask(this._pausedTasks,e)&&this._tasks.push(e),this._checkStartTimer()},i.prototype.clearTasks=function(){this._stopTimer(),this._tasks=[],this._pausedTasks=[]};var r="TaskScheduler",a=250;t._TaskScheduler=i}(e.ADB.core,e.ADB.va),function(e){"use strict";function t(){this.trackingServer=void 0,this.channel=void 0,this.ovp=void 0,this.appVersion=void 0,this.playerName=void 0,this.ssl=!1,this.debugLogging=!1}e.MediaHeartbeatConfig=t,e.MediaHeartbeatConfig.sharedInstance=new t}(e.ADB.va),function(e){"use strict";function t(){this.data={}}var n=e.plugins.videoplayer.VideoInfo,i=e.plugins.videoplayer.AdBreakInfo,r=e.plugins.videoplayer.AdInfo,a=e.plugins.videoplayer.ChapterInfo,o=e.plugins.videoplayer.QoSInfo;t.MEDIAINFO_KEY_NAME="a.name",t.MEDIAINFO_KEY_VIDEOID="a.videoId",t.MEDIAINFO_KEY_ADID="a.adId",t.MEDIAINFO_KEY_LENGTH="a.length",t.MEDIAINFO_KEY_PLAYHEAD="a.playhead",t.MEDIAINFO_KEY_MEDIATYPE="a.mediaType",t.MEDIAINFO_KEY_STREAMTYPE="a.streamType",t.MEDIAINFO_KEY_POSITION="a.position",t.MEDIAINFO_KEY_STARTTIME="a.startTime",t.MEDIAINFO_KEY_BITRATE="a.bitrate",t.MEDIAINFO_KEY_FPS="a.fps",t.MEDIAINFO_KEY_DROPPEDFRAMES="a.droppedFrames",t.MEDIAINFO_KEY_STARTUPTIME="a.startupTime",t.MEDIAINFO_KEY_TIMEDMETADATA="a.timedMetadata",t.prototype.setValue=function(e,t){this.data[e]=t},t.prototype.getValue=function(e){return this.data.hasOwnProperty(e)?this.data[e]:null},t.prototype.createVideoInfo=function(){var e=new n;return e.id=null!=this.getValue(t.MEDIAINFO_KEY_VIDEOID)?this.getValue(t.MEDIAINFO_KEY_VIDEOID):"",e.name=null!=this.getValue(t.MEDIAINFO_KEY_NAME)?this.getValue(t.MEDIAINFO_KEY_NAME):"",e.length=null!=this.getValue(t.MEDIAINFO_KEY_LENGTH)?this.getValue(t.MEDIAINFO_KEY_LENGTH):0,e.playhead=null!=this.getValue(t.MEDIAINFO_KEY_PLAYHEAD)?this.getValue(t.MEDIAINFO_KEY_PLAYHEAD):0,e.mediaType=null!=this.getValue(t.MEDIAINFO_KEY_MEDIATYPE)?this.getValue(t.MEDIAINFO_KEY_MEDIATYPE):"",e.streamType=null!=this.getValue(t.MEDIAINFO_KEY_STREAMTYPE)?this.getValue(t.MEDIAINFO_KEY_STREAMTYPE):"",e},t.prototype.createAdBreakInfo=function(){var e=new i;return e.name=null!=this.getValue(t.MEDIAINFO_KEY_NAME)?this.getValue(t.MEDIAINFO_KEY_NAME):"",e.position=null!=this.getValue(t.MEDIAINFO_KEY_POSITION)?this.getValue(t.MEDIAINFO_KEY_POSITION):0,e.startTime=null!=this.getValue(t.MEDIAINFO_KEY_STARTTIME)?this.getValue(t.MEDIAINFO_KEY_STARTTIME):0,e},t.prototype.createAdInfo=function(){var e=new r;return e.id=null!=this.getValue(t.MEDIAINFO_KEY_ADID)?this.getValue(t.MEDIAINFO_KEY_ADID):"",e.name=null!=this.getValue(t.MEDIAINFO_KEY_NAME)?this.getValue(t.MEDIAINFO_KEY_NAME):"",e.length=null!=this.getValue(t.MEDIAINFO_KEY_LENGTH)?this.getValue(t.MEDIAINFO_KEY_LENGTH):0,e.position=null!=this.getValue(t.MEDIAINFO_KEY_POSITION)?this.getValue(t.MEDIAINFO_KEY_POSITION):0,e},t.prototype.createChapterInfo=function(){var e=new a;return e.name=null!=this.getValue(t.MEDIAINFO_KEY_NAME)?this.getValue(t.MEDIAINFO_KEY_NAME):"",e.length=null!=this.getValue(t.MEDIAINFO_KEY_LENGTH)?this.getValue(t.MEDIAINFO_KEY_LENGTH):0,e.startTime=null!=this.getValue(t.MEDIAINFO_KEY_STARTTIME)?this.getValue(t.MEDIAINFO_KEY_STARTTIME):0,e.position=null!=this.getValue(t.MEDIAINFO_KEY_POSITION)?this.getValue(t.MEDIAINFO_KEY_POSITION):0,e},t.prototype.createQoSInfo=function(){var e=new o;return e.bitrate=null!=this.getValue(t.MEDIAINFO_KEY_BITRATE)?this.getValue(t.MEDIAINFO_KEY_BITRATE):0,e.fps=null!=this.getValue(t.MEDIAINFO_KEY_FPS)?this.getValue(t.MEDIAINFO_KEY_FPS):0,e.droppedFrames=null!=this.getValue(t.MEDIAINFO_KEY_DROPPEDFRAMES)?this.getValue(t.MEDIAINFO_KEY_DROPPEDFRAMES):0,e.startupTime=null!=this.getValue(t.MEDIAINFO_KEY_STARTUPTIME)?this.getValue(t.MEDIAINFO_KEY_STARTUPTIME):0,e},t.prototype.isEqual=function(e){if(this===e)return!0;if(!e||"object"!=typeof e||"function"!=typeof e.getValue)return!1;for(var n=[t.MEDIAINFO_KEY_NAME,t.MEDIAINFO_KEY_VIDEOID,t.MEDIAINFO_KEY_ADID,t.MEDIAINFO_KEY_LENGTH,t.MEDIAINFO_KEY_PLAYHEAD,t.MEDIAINFO_KEY_STREAMTYPE,t.MEDIAINFO_KEY_MEDIATYPE,t.MEDIAINFO_KEY_POSITION,t.MEDIAINFO_KEY_STARTTIME,t.MEDIAINFO_KEY_BITRATE,t.MEDIAINFO_KEY_FPS,t.MEDIAINFO_KEY_DROPPEDFRAMES,t.MEDIAINFO_KEY_STARTUPTIME,t.MEDIAINFO_KEY_TIMEDMETADATA],i=0;i<n.length;++i){var r=n[i];if(this.getValue(r)!==e.getValue(r))return!1}return!0},e.MediaObject=t}(e.ADB.va),function(e,t){"use strict";function n(e){n.__super__.constructor.call(this),this._heartbeat=e}function i(e){i.__super__.constructor.call(this),this._heartbeat=e}function r(e){r.__super__.constructor.call(this),this._heartbeat=e}function a(e){a.__super__.constructor.call(this),this._heartbeat=e}e.extend(n,t.plugins.aa.AdobeAnalyticsPluginDelegate),n.prototype.onError=function(e){this._heartbeat&&this._heartbeat._onDelegateError(e)},e.extend(i,t.plugins.ah.AdobeHeartbeatPluginDelegate),i.prototype.onError=function(e){this._heartbeat&&this._heartbeat._onDelegateError(e)},i.prototype.onTrackingDisabled=function(){this._heartbeat&&this._heartbeat._disableHBTracking()},e.extend(r,t.HeartbeatDelegate),r.prototype.onError=function(e){this._heartbeat&&this._heartbeat._onDelegateError(e)},e.extend(a,t.plugins.videoplayer.VideoPlayerPluginDelegate),a.prototype.getVideoInfo=function(){return this._heartbeat&&this._heartbeat._videoInfo?(this._heartbeat._delegate&&(this._heartbeat._videoInfo.playhead=this._heartbeat._delegate.getCurrentPlaybackTime()),this._heartbeat._videoInfo):null},a.prototype.getAdBreakInfo=function(){return this._heartbeat&&this._heartbeat._adBreakInfo?this._heartbeat._adBreakInfo:null},a.prototype.getAdInfo=function(){return this._heartbeat&&this._heartbeat._adInfo?this._heartbeat._adInfo:null},a.prototype.getChapterInfo=function(){return this._heartbeat&&this._heartbeat._chapterInfo?this._heartbeat._chapterInfo:null},a.prototype.getQoSInfo=function(){if(this._heartbeat&&this._heartbeat._delegate&&this._heartbeat._delegate.getQoSObject()){var e=this._heartbeat._delegate.getQoSObject();if(e&&"object"==typeof e&&e.setValue)return e.createQoSInfo()}return null},t._MediaAnalyticsPluginDelegate=n,t._MediaHeartbeatPluginDelegate=i,t._ADBMediaHeartbeatDelegate=r,t._MediaHeartbeatVideoPlayerPluginDelegate=a}(e.ADB.core,e.ADB.va),function(e,t){"use strict";function n(e,i){n.__super__.constructor.call(this),this._heartbeat=e,this._logger=i,this._validator=new t.plugins.nielsen.MetadataValidator(i)}var i="MediaHeartbeatNielsenPluginDelegate",r={NielsenContentMetadata:"media_nielsen_content_metadata",NielsenChannelMetadata:"media_nielsen_channel_metadata",NielsenAdMetadata:"media_nielsen_ad_metadata"};t.plugins.nielsen&&e.extend(n,t.plugins.nielsen.NielsenPluginDelegate),n.prototype.getMetadataInfo=function(){if(this._heartbeat&&this._heartbeat._currentMediaObject){var e=this._heartbeat._currentMediaObject.getValue(r.NielsenContentMetadata);if(e&&"object"==typeof e)return this._validator.validateContentMetadata(e,"MediaHeartbeat.NielsenContentMetadataKeys"),e;this._logger.warn(i,"We expect a valid object for MediaHeartbeat.MediaObjectKey.NielsenContentMetadata in MediaObject")}return null},n.prototype.getAdMetadataInfo=function(){if(this._heartbeat&&this._heartbeat._currentAdObject){var e=this._heartbeat._currentAdObject.getValue(r.NielsenAdMetadata);if(e&&"object"==typeof e)return this._validator.validateAdMetadata(e,"MediaHeartbeat.NielsenAdMetadataKeys"),e;this._logger.warn(i,"We expect a valid object for MediaHeartbeat.MediaObjectKey.NielsenAdMetadata in MediaObject")}return null},n.prototype.getChannelInfo=function(){if(this._heartbeat&&this._heartbeat._currentMediaObject){var e=this._heartbeat._currentMediaObject.getValue(r.NielsenChannelMetadata);if(e&&"object"==typeof e)return this._validator.validateChannelMetadata(e,"MediaHeartbeat.NielsenChannelMetadataKeys"),e;this._logger.warn(i,"We expect a valid object for MediaHeartbeat.MediaObjectKey.NielsenChannelMetadata in MediaObject")}return null},n.prototype.onError=function(e){this._heartbeat&&this._heartbeat._onDelegateError(e)},t.plugins.nielsen&&(t._NielsenObjectKey=r,t._NielsenPluginDelegate=n)}(e.ADB.core,e.ADB.va),function(t,n){"use strict";function i(){}function r(t,i,r){if(this._appMeasurement=r||e.s,!this._appMeasurement)throw new Error("MediaHeartbeat needs a valid AppMeasurement instance.");if(!this._appMeasurement.visitor||!this._appMeasurement.visitor.marketingCloudOrgID)throw new Error("MediaHeartbeat needs a valid visitor instance with marketingCloudOrgId set.");if(!t)throw new Error("MediaHeartbeat needs a valid delegate object.");if(!i||"object"!=typeof i||!i.trackingServer)throw new Error("MediaHeartbeat needs a valid config object with trackingServer set.");this._config=i,this._delegate=t,this._debugLogging=n.MediaHeartbeat._debugLogging||this._config.debugLogging,this._logger=new a,this._debugLogging?this._logger.enable():this._logger.disable(),this._ruleEngine=new y(this._logger),this._taskScheduler=new S(this._logger),this._resetState(),this._setupRules()}var a=t.Logger,o=n.MediaObject,s=n.Heartbeat,l=n.HeartbeatConfig,c=n._ADBMediaHeartbeatDelegate,u=n.plugins.videoplayer.VideoPlayerPlugin,d=n.plugins.videoplayer.VideoPlayerPluginConfig,h=n._MediaHeartbeatVideoPlayerPluginDelegate,p=n.plugins.aa.AdobeAnalyticsPlugin,_=n.plugins.aa.AdobeAnalyticsPluginConfig,f=n._MediaAnalyticsPluginDelegate,g=n.plugins.ah.AdobeHeartbeatPlugin,v=n.plugins.ah.AdobeHeartbeatPluginConfig,m=n._MediaHeartbeatPluginDelegate,y=n._RuleEngine,S=n._TaskScheduler,E=n.utils.ObjectUtils,b=n.utils.VersionUtils;if(i.prototype.getCurrentPlaybackTime=function(){return null},i.prototype.getQoSObject=function(){return null},r.MediaType={Video:"video",Audio:"audio"},r.Event={AdBreakStart:"adBreakStart",AdBreakComplete:"adBreakComplete",AdStart:"adStart",AdComplete:"adComplete",AdSkip:"adSkip",ChapterStart:"chapterStart",ChapterComplete:"chapterComplete",ChapterSkip:"chapterSkip",SeekStart:"seekStart",SeekComplete:"seekComplete",BufferStart:"bufferStart",BufferComplete:"bufferComplete",BitrateChange:"bitrateChange",TimedMetadataUpdate:"timedMetadataUpdate"},r.StreamType={VOD:"vod",LIVE:"live",LINEAR:"linear",PODCAST:"podcast",AUDIOBOOK:"audiobook",AOD:"aod"},r.MediaObjectKey={StandardVideoMetadata:"media_standard_content_metadata",StandardMediaMetadata:"media_standard_content_metadata",StandardAdMetadata:"media_standard_ad_metadata",VideoResumed:"resumed",MediaResumed:"resumed",PrerollTrackingWaitingTime:"preroll_tracking_waiting_time"},r.VideoMetadataKeys=n.plugins.aa.VideoMetadataKeys,r.AudioMetadataKeys=n.plugins.aa.AudioMetadataKeys,r.AdMetadataKeys=n.plugins.aa.AdMetadataKeys,r.createMediaObject=function(e,t,n,i,a){var s=new o;s.setValue(o.MEDIAINFO_KEY_VIDEOID,t),s.setValue(o.MEDIAINFO_KEY_NAME,e),s.setValue(o.MEDIAINFO_KEY_LENGTH,n),s.setValue(o.MEDIAINFO_KEY_PLAYHEAD,0);var l=i||r.StreamType.VOD;return s.setValue(o.MEDIAINFO_KEY_STREAMTYPE,l),("string"!=typeof a||a!=r.MediaType.Video&&a!=r.MediaType.Audio)&&(a=r.MediaType.Video),s.setValue(o.MEDIAINFO_KEY_MEDIATYPE,a),s},r.createAdBreakObject=function(e,t,n){var i=new o;return i.setValue(o.MEDIAINFO_KEY_NAME,e),i.setValue(o.MEDIAINFO_KEY_POSITION,t),i.setValue(o.MEDIAINFO_KEY_STARTTIME,n),i},r.createAdObject=function(e,t,n,i){var r=new o;return r.setValue(o.MEDIAINFO_KEY_NAME,e),r.setValue(o.MEDIAINFO_KEY_ADID,t),r.setValue(o.MEDIAINFO_KEY_POSITION,n),r.setValue(o.MEDIAINFO_KEY_LENGTH,i),r},r.createChapterObject=function(e,t,n,i){var r=new o;return r.setValue(o.MEDIAINFO_KEY_NAME,e),r.setValue(o.MEDIAINFO_KEY_POSITION,t),r.setValue(o.MEDIAINFO_KEY_LENGTH,n),r.setValue(o.MEDIAINFO_KEY_STARTTIME,i),r},r.createQoSObject=function(e,t,n,i){var r=new o;return r.setValue(o.MEDIAINFO_KEY_BITRATE,e),r.setValue(o.MEDIAINFO_KEY_FPS,n),r.setValue(o.MEDIAINFO_KEY_DROPPEDFRAMES,i),r.setValue(o.MEDIAINFO_KEY_STARTUPTIME,t),r},r.createTimedMetadataObject=function(e){var t=new o;return t.setValue(o.MEDIAINFO_KEY_TIMEDMETADATA,e),t},r.version=function(){return n.Version.getVersion()},r.prototype.trackSessionStart=function(e,t){this._logger.info(P,"#::trackSessionStart()");var n=y.createContext();n.setData(k,e),n.setData(N,this._cleanContextData(t)),this._processRule(C.SessionStart,n)},r.prototype.trackPlay=function(){this._logger.info(P,"#::trackPlay()"),this._processRule(C.Play)},r.prototype.trackPause=function(){this._logger.info(P,"#::trackPause()"),this._processRule(C.Pause)},r.prototype.trackComplete=function(){this._logger.info(P,"#::trackComplete()"),this._processRule(C.VideoComplete)},r.prototype.trackSessionEnd=function(){this._logger.info(P,"#::trackSessionEnd()"),this._processRule(C.SessionEnd)},r.prototype.trackError=function(e){this._logger.info(P,"#::trackError()");var t=y.createContext();t.setData(L,e),this._processRule(C.Error,t)},r.prototype.trackEvent=function(e,t,n){this._logger.info(P,"#::trackEvent() - "+e);var i,a=y.createContext();switch(e){case r.Event.AdBreakStart:a.setData(M,t),a.setData(N,this._cleanContextData(n)),i=C.AdBreakStart;break;case r.Event.AdBreakComplete:i=C.AdBreakComplete;break;case r.Event.AdStart:a.setData(D,t),a.setData(N,this._cleanContextData(n)),i=C.AdStart;break;case r.Event.AdComplete:i=C.AdComplete;break;case r.Event.AdSkip:i=C.AdSkip;break;case r.Event.SeekStart:i=C.SeekStart;break;case r.Event.SeekComplete:i=C.SeekComplete;break;case r.Event.ChapterStart:a.setData(O,t),a.setData(N,this._cleanContextData(n)),i=C.ChapterStart;break;case r.Event.ChapterComplete:i=C.ChapterComplete;break;case r.Event.ChapterSkip:i=C.ChapterSkip;break;case r.Event.BufferStart:i=C.BufferStart;break;case r.Event.BufferComplete:i=C.BufferComplete;break;case r.Event.BitrateChange:i=C.BitrateChange;break;case r.Event.TimedMetadataUpdate:i=C.TimedMetadataUpdate,a.setData(R,t);break;default:return void this._logger.error(P,"Incorrect event name.")}this._processRule(i,a)},n.plugins.nielsen){var T=n.MediaHeartbeatConfig;T.prototype.nielsenConfigKey=void 0,T.prototype.nielsenAppInfo=void 0;var w=n._NielsenObjectKey;r.MediaObjectKey.NielsenContentMetadata=w.NielsenContentMetadata,r.MediaObjectKey.NielsenAdMetadata=w.NielsenAdMetadata,r.MediaObjectKey.NielsenChannelMetadata=w.NielsenChannelMetadata,r.NielsenContentMetadataKeys=n.plugins.nielsen.ContentMetadataKeys,r.NielsenChannelMetadataKeys=n.plugins.nielsen.ChannelMetadataKeys,r.NielsenAdMetadataKeys=n.plugins.nielsen.AdMetadataKeys,r.prototype.nielsenLoadMetadata=function(e){this._nielsenPlugin&&this._nielsenPlugin.loadMetadata(e)}}r.prototype._setState=function(e,t){this._mediaState[e]=t},r.prototype._isInState=function(e){return this._mediaState[e]},r.prototype._isTrackingDisabled=function(e){return this._mediaHeartbeatDisabled},r.prototype._isInSession=function(e){return this._isInState(A.Session)},r.prototype._isInMedia=function(e){return this._isInState(A.Media)},r.prototype._isInAd=function(e){return this._isInState(A.Ad)},r.prototype._isInAdBreak=function(e){return this._isInState(A.AdBreak)},r.prototype._isInChapter=function(e){return this._isInState(A.Chapter)},r.prototype._isInPlay=function(e){return this._isInState(A.PlayPause)},r.prototype._isInPause=function(e){return!this._isInState(A.PlayPause)},r.prototype._isInBuffer=function(e){return this._isInState(A.Buffer)},r.prototype._isInSeek=function(e){return this._isInState(A.Seek)},r.prototype._isPlatformTrackingSupported=function(e){return!this._appMeasurement.unsupportedBrowser},r.prototype._isAudioTrackingSupported=function(e){return e.getData(k).getValue(o.MEDIAINFO_KEY_MEDIATYPE)!==r.MediaType.Audio||b.isGreaterThanEqual(this._appMeasurement.version,"2.11.0")},r.prototype._isValidMediaObject=function(e){var t=e.getData(k);if(t&&t instanceof o){var n=t.getValue(r.MediaObjectKey.MediaResumed);null!=n&&"boolean"!=typeof n&&this._logger.warn(P,"Ignoring value set for MediaHeartbeat.MediaObjectKey.MediaResumed in MediaObject as we expect a boolean value");var i=t.getValue(r.MediaObjectKey.PrerollTrackingWaitingTime);null!=i&&(("string"==typeof i||"number"==typeof i)&&!isNaN(i)||this._logger.warn(P,"Ignoring value set for MediaHeartbeat.MediaObjectKey.PrerollTrackingWaitingTime in MediaObject as we expect a valid duration as number in milliseconds."));var a=t.getValue(r.MediaObjectKey.StandardMediaMetadata);return null!=a&&"object"!=typeof a&&this._logger.warn(P,"Ignoring value set for MediaHeartbeat.MediaObjectKey.StandardMediaMetadata in MediaObject as we expect a valid object with kv pairs."),!0}return!1},r.prototype._isValidAdBreakObject=function(e){var t=e.getData(M);return t&&t instanceof o},r.prototype._isDifferentAdBreakObject=function(e){var t=e.getData(M);return!(this._currentAdBreakObject&&this._currentAdBreakObject.isEqual(t))},r.prototype._isValidAdObject=function(e){var t=e.getData(D);if(t&&t instanceof o){var n=t.getValue(V);null!=n&&"boolean"!=typeof n&&this._logger.warn(P,"Ignoring value set for MediaHeartbeat.MediaObjectKey.GranularAdTracking in AdObject as we expect a boolean value.");var i=t.getValue(r.MediaObjectKey.StandardAdMetadata);return null!=i&&"object"!=typeof i&&this._logger.warn(P,"Ignoring value set for MediaHeartbeat.MediaObjectKey.StandardAdMetadata in AdObject as we expect a valid object with kv pairs."),!0}return!1},r.prototype._isDifferentAdObject=function(e){var t=e.getData(D);return!(this._currentAdObject&&this._currentAdObject.isEqual(t))},r.prototype._isValidChapterObject=function(e){var t=e.getData(O);return t&&t instanceof o},r.prototype._isDifferentChapterObject=function(e){var t=e.getData(O);return!(this._currentChapterObject&&this._currentChapterObject.isEqual(t))},r.prototype._isValidTimedMetadataObject=function(e){var t=e.getData(R);if(t&&t instanceof o){var n=t.getValue(o.MEDIAINFO_KEY_TIMEDMETADATA);return n&&"string"==typeof n}return!1},r.prototype._shouldAllowPlayerStateChange=function(e){return!(this._isInState(A.AdBreak)&&!this._isInState(A.Ad))},r.prototype._deferredTrackPlay=function(){this._prerollWaitEnabled&&(this._logger.info(P,"Executing deferred API:trackPlay."),this._prerollWaitEnabled=!1,this._playTaskHandle=null,this._processRule(C.Play))},r.prototype._cmdEnterAction=function(e){var t=e.getRuleName();if(this._prerollWaitEnabled)if(this._playReceived)switch(t){case C.SeekStart:case C.BufferStart:this._logger.info(P,"Cancelling scheduled API:trackPlay because of SeekStart/BufferStart event"),this._taskScheduler.cancelTask(this._playTaskHandle),this._playTaskHandle=null;break;case C.SeekComplete:case C.BufferComplete:this._logger.info(P,"Rescheduled API:trackPlay after SeekComplete/BufferComplete event"),this._playTaskHandle=this._taskScheduler.scheduleTask(this._deferredTrackPlay,this,this._prerollWaitTime);break;case C.Play:this._logger.info(P,"Dropping API:trackPlay as we already have a API:trackPlay scheduled."),e.stopProcessingAction();break;case C.Pause:this._logger.info(P,"Cancelling scheduled API:trackPlay because of API:trackPause call."),this._taskScheduler.cancelTask(this._playTaskHandle),this._playTaskHandle=null,this._prerollWaitEnabled=!1;break;case C.AdBreakStart:this._logger.info(P,"Received API:trackEvent(AdBreakStart) within "+this._prerollWaitTime+" ms after API:trackPlay. We will track this as preroll AdBreak."),this._taskScheduler.cancelTask(this._playTaskHandle),this._playTaskHandle=null,this._prerollWaitEnabled=!1,this._playAfterAdStart=!0}else switch(t){case C.Play:this._logger.info(P,"Deferring API:trackPlay for "+this._prerollWaitTime+" ms."),this._playReceived=!0,this._playTaskHandle=this._taskScheduler.scheduleTask(this._deferredTrackPlay,this,this._prerollWaitTime),e.stopProcessingAction();break;case C.AdBreakStart:this._logger.info(P,"Received trackEvent(AdBreakStart) before first trackPlay."),this._prerollWaitEnabled=!1}},r.prototype._cmdExitAction=function(e){var t=e.getRuleName();this._playAfterAdStart&&(t===C.AdStart?(this._cmdPlay(e),this._playAfterAdStart=!1):t===C.AdBreakComplete&&(this._playAfterAdStart=!1)),t!==C.AdStart||this._isInState(A.FPlayPause)||this._cmdPlay(e)},r.prototype._cmdConfigure=function(e){this._resetState(),this._configureAdobeAnalyticsPlugin(),this._configureAdobeHearbeatPlugin(),this._configureVideoPlayerPlugin(),this._configureOtherPlugins(),this._configureHeartbeat()},r.prototype._cmdSessionStart=function(e){var t=e.getData(k),n=e.getData(N);this._currentMediaObject=t,this._videoInfo=t.createVideoInfo(),this._videoInfo.playerName=this._config.playerName?this._config.playerName:"";var i=t.getValue(r.MediaObjectKey.StandardMediaMetadata);i&&"object"==typeof i||(i=null);var a=t.getValue(r.MediaObjectKey.MediaResumed);"boolean"==typeof a&&(this._videoInfo.resumed=a);var o=t.getValue(r.MediaObjectKey.PrerollTrackingWaitingTime);"string"!=typeof o&&"number"!=typeof o||isNaN(o)||(this._prerollWaitTime=Number(o),this._prerollWaitTime<=0&&(this._prerollWaitEnabled=!1));var s=this._prepareMetadata(i,n);s[x]=this._videoInfo.mediaType,this._aaPlugin.setVideoMetadata(s),this._playerPlugin.trackVideoLoad(),this._playerPlugin.trackSessionStart(),this._setState(A.Session,!0),this._setState(A.Media,!0)},r.prototype._cmdVideoEnd=function(e){var t=e.getRuleName()===C.VideoComplete;if(this._isInState(A.Media)){var n=this._heartbeat,i=this._playerPlugin;this._playerPlugin.trackComplete((function(){i&&i.trackVideoUnload(),n&&n.destroy()}),t)}this._setState(A.Media,!1)},r.prototype._cmdHandleMediaComplete=function(e){this._isInMedia(e)||(this._logger.info(P,"API:trackComplete has already cleaned up Heartbeat instance."),this._cmdSessionEnd(e),e.stopProcessingAction())},r.prototype._cmdSessionEnd=function(e){this._setState(A.Session,!1),this._resetState()},r.prototype._cmdDisableTracking=function(e){this._logger.info(P,"#_cmdDisableTracking: ADBMediaHeartbeat Tracking Disabled Remotely."),this._mediaHeartbeatDisabled=!0},r.prototype._cmdBufferStart=function(e){this._playerPlugin.trackBufferStart(),this._setState(A.Buffer,!0)},r.prototype._cmdBufferComplete=function(e){this._isInState(A.Buffer)&&this._playerPlugin.trackBufferComplete(),this._setState(A.Buffer,!1)},r.prototype._cmdSeekStart=function(e){this._playerPlugin.trackSeekStart(),this._setState(A.Seek,!0)},r.prototype._cmdSeekComplete=function(e){this._isInState(A.Seek)&&this._playerPlugin.trackSeekComplete(),this._setState(A.Seek,!1)},r.prototype._cmdPlay=function(e){this._playerPlugin.trackPlay(),this._setState(A.PlayPause,!0),this._setState(A.FPlayPause,!0)},r.prototype._cmdPause=function(e){this._playerPlugin.trackPause(),this._setState(A.PlayPause,!1),this._setState(A.FPlayPause,!0)},r.prototype._cmdAdBreakStart=function(e){var t=e.getData(M);this._currentAdBreakObject=t,this._adBreakInfo=t.createAdBreakInfo(),this._adBreakInfo.playerName=this._config.playerName?this._config.playerName:"",this._playerPlugin.trackAdBreakStart(),this._setState(A.AdBreak,!0)},r.prototype._cmdAdBreakComplete=function(e){this._currentAdBreakObject=null,this._adBreakInfo=null,this._isInState(A.AdBreak)&&this._playerPlugin.trackAdBreakComplete(),this._setState(A.AdBreak,!1)},r.prototype._cmdAdStart=function(e){var t=e.getData(D),n=e.getData(N);this._currentAdObject=t,this._adInfo=t.createAdInfo();var i=t.getValue(V);"boolean"==typeof i&&(this._adInfo.granularTracking=i);var a=t.getValue(r.MediaObjectKey.StandardAdMetadata);a&&"object"==typeof a||(a=null);var o=this._prepareMetadata(a,n);this._aaPlugin.setAdMetadata(o),this._playerPlugin.trackAdStart(),this._setState(A.Ad,!0)},r.prototype._cmdAdComplete=function(e){this._currentAdObject=null,this._adInfo=null,this._isInState(A.Ad)&&this._playerPlugin.trackAdComplete(),this._setState(A.Ad,!1)},r.prototype._cmdAdSkip=function(e){this._currentAdObject=null,this._adInfo=null,this._isInState(A.Ad)&&this._playerPlugin.trackAdSkip(),this._setState(A.Ad,!1)},r.prototype._cmdChapterStart=function(e){var t=e.getData(O),n=e.getData(N);this._currentChapterObject=t,this._chapterInfo=t.createChapterInfo();var i=this._prepareMetadata(null,n);this._aaPlugin.setChapterMetadata(i),this._playerPlugin.trackChapterStart(),this._setState(A.Chapter,!0)},r.prototype._cmdChapterComplete=function(e){this._currentChapterObject=null,this._chapterInfo=null,this._isInState(A.Chapter)&&this._playerPlugin.trackChapterComplete(),this._setState(A.Chapter,!1)},r.prototype._cmdChapterSkip=function(e){this._currentChapterObject=null,this._chapterInfo=null,this._isInState(A.Chapter)&&this._playerPlugin.trackChapterSkip(),this._setState(A.Chapter,!1)},r.prototype._cmdError=function(e){var t=e.getData(L);t||(t="unknown_error_id"),this._playerPlugin.trackVideoPlayerError(t)},r.prototype._cmdBitrate=function(e){this._playerPlugin.trackBitrateChange()},r.prototype._cmdTimedMetadataUpdate=function(e){var t=e.getData(R).getValue(o.MEDIAINFO_KEY_TIMEDMETADATA);this._playerPlugin.trackTimedMetadata(t)},r.prototype._processRule=function(e,t){return this._ruleEngine.processRule(e,t)},r.prototype._setupRules=function(){this._ruleEngine.registerEnterExitAction(this._cmdEnterAction,this._cmdExitAction),this._ruleEngine.registerRule(C.SessionStart,"API:trackSessionStart",[y.createPredicate(this._isPlatformTrackingSupported,!0,I.ErrUnSupportedPlatform),y.createPredicate(this._isTrackingDisabled,!1,I.ErrTrackingDisabled),y.createPredicate(this._isInSession,!1,I.ErrInSession),y.createPredicate(this._isValidMediaObject,!0,I.ErrInvalidMediaObject),y.createPredicate(this._isAudioTrackingSupported,!0,I.ErrAudioTrackingNotSupported)],[this._cmdConfigure,this._cmdSessionStart],this),this._ruleEngine.registerRule(C.SessionEnd,"API:trackSessionEnd",[y.createPredicate(this._isInSession,!0,I.ErrNotInSession)],[this._cmdHandleMediaComplete,this._cmdAdSkip,this._cmdAdBreakComplete,this._cmdChapterSkip,this._cmdVideoEnd,this._cmdSessionEnd],this),this._ruleEngine.registerRule(C.VideoComplete,"API:trackComplete",[y.createPredicate(this._isInSession,!0,I.ErrNotInSession),y.createPredicate(this._isInMedia,!0,I.ErrNotInMedia)],[this._cmdAdSkip,this._cmdAdBreakComplete,this._cmdChapterSkip,this._cmdVideoEnd],this),this._ruleEngine.registerRule(C.DisableTracking,"DisableTracking",[y.createPredicate(this._isTrackingDisabled,!1,I.ErrTrackingDisabled)],[this._cmdDisableTracking],this),this._ruleEngine.registerRule(C.Error,"API:trackError",[y.createPredicate(this._isInSession,!0,I.ErrNotInSession),y.createPredicate(this._isInMedia,!0,I.ErrNotInMedia)],[this._cmdError],this),this._ruleEngine.registerRule(C.Play,"API:trackPlay",[y.createPredicate(this._isInSession,!0,I.ErrNotInSession),y.createPredicate(this._isInMedia,!0,I.ErrNotInMedia),y.createPredicate(this._shouldAllowPlayerStateChange,!0,I.ErrInvalidPlayerState)],[this._cmdSeekComplete,this._cmdBufferComplete,this._cmdPlay],this),this._ruleEngine.registerRule(C.Pause,"API:trackPause",[y.createPredicate(this._isInSession,!0,I.ErrNotInSession),y.createPredicate(this._isInMedia,!0,I.ErrNotInMedia),y.createPredicate(this._shouldAllowPlayerStateChange,!0,I.ErrInvalidPlayerState),y.createPredicate(this._isInBuffer,!1,I.ErrInBuffer),y.createPredicate(this._isInSeek,!1,I.ErrInSeek)],[this._cmdPause],this),this._ruleEngine.registerRule(C.BufferStart,"API:trackEvent(BufferStart)",[y.createPredicate(this._isInSession,!0,I.ErrNotInSession),y.createPredicate(this._isInMedia,!0,I.ErrNotInMedia),y.createPredicate(this._shouldAllowPlayerStateChange,!0,I.ErrInvalidPlayerState),y.createPredicate(this._isInBuffer,!1,I.ErrInBuffer),y.createPredicate(this._isInSeek,!1,I.ErrInSeek)],[this._cmdBufferStart],this),this._ruleEngine.registerRule(C.BufferComplete,"API:trackEvent(BufferComplete)",[y.createPredicate(this._isInSession,!0,I.ErrNotInSession),y.createPredicate(this._isInMedia,!0,I.ErrNotInMedia),y.createPredicate(this._shouldAllowPlayerStateChange,!0,I.ErrInvalidPlayerState),y.createPredicate(this._isInBuffer,!0,I.ErrNotInBuffer)],[this._cmdBufferComplete],this),this._ruleEngine.registerRule(C.SeekStart,"API:trackEvent(SeekStart)",[y.createPredicate(this._isInSession,!0,I.ErrNotInSession),y.createPredicate(this._isInMedia,!0,I.ErrNotInMedia),y.createPredicate(this._shouldAllowPlayerStateChange,!0,I.ErrInvalidPlayerState),y.createPredicate(this._isInSeek,!1,I.ErrInSeek),y.createPredicate(this._isInBuffer,!1,I.ErrInBuffer)],[this._cmdSeekStart],this),this._ruleEngine.registerRule(C.SeekComplete,"API:trackEvent(SeekComplete)",[y.createPredicate(this._isInSession,!0,I.ErrNotInSession),y.createPredicate(this._isInMedia,!0,I.ErrNotInMedia),y.createPredicate(this._shouldAllowPlayerStateChange,!0,I.ErrInvalidPlayerState),y.createPredicate(this._isInSeek,!0,I.ErrNotInSeek)],[this._cmdSeekComplete],this),this._ruleEngine.registerRule(C.AdBreakStart,"API:trackEvent(AdBreakStart)",[y.createPredicate(this._isInSession,!0,I.ErrNotInSession),y.createPredicate(this._isInMedia,!0,I.ErrNotInMedia),y.createPredicate(this._isValidAdBreakObject,!0,I.ErrInvalidAdBreakObject),y.createPredicate(this._isDifferentAdBreakObject,!0,I.ErrDuplicateAdBreakObject)],[this._cmdAdSkip,this._cmdAdBreakComplete,this._cmdAdBreakStart],this),this._ruleEngine.registerRule(C.AdBreakComplete,"API:trackEvent(AdBreakComplete)",[y.createPredicate(this._isInSession,!0,I.ErrNotInSession),y.createPredicate(this._isInMedia,!0,I.ErrNotInMedia),y.createPredicate(this._isInAdBreak,!0,I.ErrNotInAdBreak)],[this._cmdAdSkip,this._cmdAdBreakComplete],this),this._ruleEngine.registerRule(C.AdStart,"API:trackEvent(AdStart)",[y.createPredicate(this._isInSession,!0,I.ErrNotInSession),y.createPredicate(this._isInMedia,!0,I.ErrNotInMedia),y.createPredicate(this._isInAdBreak,!0,I.ErrNotInAdBreak),y.createPredicate(this._isValidAdObject,!0,I.ErrInvalidAdObject),y.createPredicate(this._isDifferentAdObject,!0,I.ErrDuplicateAdObject)],[this._cmdAdSkip,this._cmdAdStart],this),this._ruleEngine.registerRule(C.AdComplete,"API:trackEvent(AdComplete)",[y.createPredicate(this._isInSession,!0,I.ErrNotInSession),y.createPredicate(this._isInMedia,!0,I.ErrNotInMedia),y.createPredicate(this._isInAdBreak,!0,I.ErrNotInAdBreak),y.createPredicate(this._isInAd,!0,I.ErrNotInAd)],[this._cmdAdComplete],this),this._ruleEngine.registerRule(C.AdSkip,"API:trackEvent(AdSkip)",[y.createPredicate(this._isInSession,!0,I.ErrNotInSession),y.createPredicate(this._isInMedia,!0,I.ErrNotInMedia),y.createPredicate(this._isInAdBreak,!0,I.ErrNotInAdBreak),y.createPredicate(this._isInAd,!0,I.ErrNotInAd)],[this._cmdAdSkip],this),this._ruleEngine.registerRule(C.ChapterStart,"API:trackEvent(ChapterStart)",[y.createPredicate(this._isInSession,!0,I.ErrNotInSession),y.createPredicate(this._isInMedia,!0,I.ErrNotInMedia),y.createPredicate(this._isValidChapterObject,!0,I.ErrInvalidChapterObject),y.createPredicate(this._isDifferentChapterObject,!0,I.ErrDuplicateChapterObject)],[this._cmdChapterSkip,this._cmdChapterStart],this),this._ruleEngine.registerRule(C.ChapterComplete,"API:trackEvent(ChapterComplete)",[y.createPredicate(this._isInSession,!0,I.ErrNotInSession),y.createPredicate(this._isInMedia,!0,I.ErrNotInMedia),y.createPredicate(this._isInChapter,!0,I.ErrNotInChapter)],[this._cmdChapterComplete],this),this._ruleEngine.registerRule(C.ChapterSkip,"API:trackEvent(ChapterSkip)",[y.createPredicate(this._isInSession,!0,I.ErrNotInSession),y.createPredicate(this._isInMedia,!0,I.ErrNotInMedia),y.createPredicate(this._isInChapter,!0,I.ErrNotInChapter)],[this._cmdChapterSkip],this),this._ruleEngine.registerRule(C.BitrateChange,"API:trackEvent(BitrateChange)",[y.createPredicate(this._isInSession,!0,I.ErrNotInSession),y.createPredicate(this._isInMedia,!0,I.ErrNotInMedia)],[this._cmdBitrate],this),this._ruleEngine.registerRule(C.TimedMetadataUpdate,"API:trackEvent(TimedMetadataUpdate)",[y.createPredicate(this._isInSession,!0,I.ErrNotInSession),y.createPredicate(this._isInMedia,!0,I.ErrNotInMedia),y.createPredicate(this._isValidTimedMetadataObject,!0,I.ErrInvalidTimedMetadataObject)],[this._cmdTimedMetadataUpdate],this)},r.prototype._configureAdobeAnalyticsPlugin=function(){this._aaPlugin=new p(this._appMeasurement,new f(this));var e=new _;e.channel=this._config.channel?this._config.channel:"",e.debugLogging=n.MediaHeartbeat._debugLogging||this._config.debugLogging,this._aaPlugin.configure(e),this._plugins.push(this._aaPlugin)},r.prototype._configureAdobeHearbeatPlugin=function(){var e=this._appMeasurement.visitor?this._appMeasurement.visitor.marketingCloudOrgID:"";this._ahPlugin=new g(new m(this));var t=new v(this._config.trackingServer,e);t.debugLogging=n.MediaHeartbeat._debugLogging||this._config.debugLogging,t.ovp=this._config.ovp?this._config.ovp:"",t.ssl=this._config.ssl,t.sdk=this._config.appVersion?this._config.appVersion:"";var i=this._primetimeTVSDKVersion();i&&i.length>0&&(t.__primetime=!0,t.__psdkVersion=i),this._ahPlugin.configure(t),this._plugins.push(this._ahPlugin)},r.prototype._configureVideoPlayerPlugin=function(){this._playerPlugin=new u(new h(this));var e=new d;e.debugLogging=n.MediaHeartbeat._debugLogging||this._config.debugLogging,this._playerPlugin.configure(e),this._plugins.push(this._playerPlugin)},r.prototype._configureOtherPlugins=function(){if(n.plugins.nielsen&&this._config.nielsenConfigKey&&this._config.nielsenAppInfo){this._nielsenPlugin=new n.plugins.nielsen.NielsenPlugin(new n._NielsenPluginDelegate(this,this._logger));var e=new n.plugins.nielsen.NielsenPluginConfig;e.debugLogging=n.MediaHeartbeat._debugLogging||this._config.debugLogging,e.appInfo=this._config.nielsenAppInfo,e.configKey=this._config.nielsenConfigKey,this._nielsenPlugin.configure(e),this._plugins.push(this._nielsenPlugin)}},r.prototype._configureHeartbeat=function(){var e=new l;e.debugLogging=n.MediaHeartbeat._debugLogging||this._config.debugLogging,this._heartbeat=new s(new c(this),this._plugins),this._heartbeat.configure(e)},r.prototype._resetState=function(){this._taskScheduler.clearTasks(),this._mediaState={},this._plugins=[],this._playerPlugin=null,this._aaPlugin=null,this._ahPlugin=null,this._nielsenPlugin=null,this._heartbeat=null,this._currentMediaObject=null,this._currentAdBreakObject=null,this._currentAdObject=null,this._currentChapterObject=null,this._videoInfo=null,this._adBreakInfo=null,this._adInfo=null,this._chapterInfo=null,this._prerollWaitEnabled=!0,this._prerollWaitTime=B,this._playReceived=!1,this._playTaskHandle=null,this._playAfterAdStart=!1},r.prototype._primetimeTVSDKVersion=function(){return this._currentMediaObject?this._currentMediaObject.getValue(F):null},r.prototype._cleanContextData=function(e){if(null==e||"object"!=typeof e)return null;var t={};for(var n in e)if(e.hasOwnProperty(n)){var i=e[n];"number"!=typeof i&&"string"!=typeof i&&"boolean"!=typeof i||(t[n]=i)}return t},r.prototype._prepareMetadata=function(e,t){var n={};if(t&&E.append(n,t),e){var i=this._cleanContextData(e);E.append(n,i)}return delete n[x],n},r.prototype._onDelegateError=function(e){this._logger.error(P,e.getMessage()+" | "+e.getDetails())},r.prototype._disableHBTracking=function(){var e=y.createContext();this._processRule(C.DisableTracking,e),this._processRule(C.SessionEnd,e)};var A={Session:0,Media:1,AdBreak:2,Ad:3,Chapter:4,PlayPause:5,Buffer:6,Seek:7,FPlayPause:8},C={SessionStart:0,SessionEnd:1,VideoComplete:2,Play:3,Pause:4,Error:5,AdBreakStart:6,AdBreakComplete:7,AdStart:8,AdComplete:9,AdSkip:10,ChapterStart:11,ChapterComplete:12,ChapterSkip:13,SeekStart:14,SeekComplete:15,BufferStart:16,BufferComplete:17,BitrateChange:18,TimedMetadataUpdate:19,DisableTracking:20},I={ErrUnSupportedPlatform:"MediaHeartbeat does not support tracking due to AppMeasurement or VisitorAPI not supporting the browser.",ErrNotInSession:'MediaHeartbeat is not in active tracking session, call "API:trackSessionStart" to begin a new tracking session.',ErrInSession:'MediaHeartbeat is in active tracking session, call "API:trackSessionEnd" to end current tracking session.',ErrTrackingDisabled:"MediaHeartbeat tracking is disabled for this publisher. Please contact Adobe Representative to enable tracking.",ErrNotInMedia:'MediaHeartbeat has completed tracking session, call "API:trackSessionEnd" first to end current session and then begin a new tracking session.',ErrInBuffer:'MediaHeartbeat is tracking buffer events, call "API:trackEvent(BufferComplete)" first to stop tracking buffer events.',ErrNotInBuffer:'MediaHeartbeat is not tracking buffer events, call "API:trackEvent(BufferStart)" before "API:trackEvent(BufferComplete)".',ErrInSeek:'MediaHeartbeat is tracking seek events, call "API:trackEvent(SeekComplete)" first to stop tracking seek events.',ErrNotInSeek:'MediaHeartbeat is not tracking seek events, call "API:trackEvent(SeekStart)" before "API:trackEvent(SeekComplete)".',ErrNotInAdBreak:'MediaHeartbeat is not tracking any AdBreak, call "API:trackEvent(AdBreakStart)" to begin tracking AdBreak',ErrNotInAd:'MediaHeartbeat is not tracking any Ad, call "API:trackEvent(AdStart)" to begin tracking Ad',ErrNotInChapter:'MediaHeartbeat is not tracking any Chapter, call "API:trackEvent(ChapterStart)" to begin tracking Chapter',ErrInvalidMediaObject:'MediaInfo passed into "API:trackSessionStart" is invalid.',ErrInvalidAdBreakObject:'AdBreakInfo passed into "API:trackEvent(AdBreakStart)" is invalid.',ErrDuplicateAdBreakObject:'MediaHeartbeat is currently tracking the AdBreak passed into "API:trackEvent(AdBreakStart)".',ErrInvalidAdObject:'AdInfo passed into "API:trackEvent(AdStart)" is invalid.',ErrDuplicateAdObject:'MediaHeartbeat is currently tracking the Ad passed into "API:trackEvent(AdStart)".',ErrInvalidChapterObject:'ChapterInfo passed into "API:trackEvent(ChapterStart)" is invalid.',ErrDuplicateChapterObject:'MediaHeartbeat is currently tracking the Chapter passed into "API:trackEvent(ChapterStart)".',ErrInvalidTimedMetadataObject:'TimedMetadata passed into "API:trackEvent(TimedMetadataUpdate)" is invalid.',ErrInvalidPlayerState:"MediaHeartbeat is tracking an AdBreak but not tracking any Ad and will drop any calls to track player state (Play, Pause, Buffer or Seek) in this state.",ErrAudioTrackingNotSupported:"Upgrade your AppMeasurement library to version >= '2.11.0' to support tracking audio content."},P="MediaHeartbeat",k="key_media_object",M="key_adbreak_object",D="key_ad_object",O="key_chapter_object",R="key_timed_metadata_object",N="key_custom_metadata",L="key_error_id",x="a.media.streamType",F="a.__pttvsdkVersion",V="granular_ad_tracking",B=250;n._MediaHeartbeatErrorMessage=I,n.MediaHeartbeatDelegate=i,n.MediaHeartbeat=r,n.MediaHeartbeat._debugLogging=!1}(e.ADB.core,e.ADB.va),e.ADB||(e.ADB={}),e.ADB.core||(e.ADB.core=core),e.ADB.va||(e.ADB.va=va),e.ADB.va.plugins||(e.ADB.va.plugins={})}.call(e),e.ADB}()},function(e,t,n){var i,r;(function(){!function(a,o){if(void 0!==(r="function"==typeof(i=o)?i.call(t,n,t,e):i)&&(e.exports=r),void 0!==a){if(void 0!==a.Conviva)return;if(a.ConvivaLoading)return;a.ConvivaLoading=!0,a.Conviva=o(),delete a.ConvivaLoading}}(this,(function(){var e={};return function(){"use strict";var t={};!function(){var n=e.Client=function(t,o){function l(e,t){if(!(e instanceof i))throw new Error("clientSettings parameter should be an instance of ClientSettings.");if(!(t instanceof a))throw new Error("systemFactory parameter should be an instance of SystemFactory.");(e.gatewayUrl==i._httpsProtocol+i.defaultProductionGatewayDNS||e.gatewayUrl==i._httpProtocol+i.defaultProductionGatewayDNS)&&(this.defaultGatewayURLError=!0),this._settings=e.clone(),this._systemFactory=t,this._systemFactory.configure("SDK",this._settings),this._exceptionCatcher=this._systemFactory.buildExceptionCatcher(),this._exceptionCatcher.runProtected("Client.init",(function(){c._id=D.uinteger32(),c._logger=c._systemFactory.buildLogger(),c._logger.setModuleName("Client"),c.defaultGatewayURLError&&c._logger.info("Gateway URL should not be set to https://cws.conviva.com or http://cws.conviva.com, therefore this call is ignored"),c._logger.info("init(): url="+c._settings.gatewayUrl+" customerKey="+c._settings.customerKey),c._config=c._systemFactory.buildConfig(),c._config.load(),c._sessionFactory=c._systemFactory.buildSessionFactory(c,c._settings,c._config),c._logger.info("init(): done.")}),(function(e){throw new Error("Client constructor failed: "+e.message)}))}var c=this;this.defaultGatewayURLError=!1,this._logger=null,this._sessionFactory=null,this._systemFactory=null,this._globalSessionKey=-1,this._settings=null,this._systemSettings=null,this._exceptionCatcher=null,this._config=null,this._id=-1,this._released=!1,l.apply(this,arguments),this.release=function(){this._released||this._exceptionCatcher.runProtected("Client.release",(function(){c._logger.info("release()"),c._sessionFactory.cleanup(),c._sessionFactory=null,c._globalSessionKey=-1,c._logger=null,c._id=-1,c._exceptionCatcher=null,c._settings=null,c._systemSettings=null,c._systemFactory=null,c._released=!0}))},this.createSession=function(e){var t=n.NO_SESSION_KEY;return this._released?t:null==e||e instanceof r?(this._exceptionCatcher.runProtected("Client.createSession",(function(){t=c._sessionFactory.makeVideoSession(e,S.SESSION_TYPE.VIDEO)})),t):(c._logger.error("createSession(): expecting an instance of ContentMetadata for contentMetadata parameter"),t)},this.createAdSession=function(e,t){var i=n.NO_SESSION_KEY;return this._released?i:null==t||t instanceof r?(this._exceptionCatcher.runProtected("Client.createAdSession",(function(){var n=c._sessionFactory.getVideoSession(e);null!=n&&(null==t&&(t=new r),(null==t.applicationName||null==t.viewerId)&&(null==t.viewerId&&null!=n._contentMetadata.viewerId&&(t.viewerId=n._contentMetadata.viewerId),null==t.applicationName&&null!=n._contentMetadata.applicationName&&(t.applicationName=n._contentMetadata.applicationName)),t.custom["c3.csid"]=P.ToString(n._id)),i=c._sessionFactory.makeVideoSession(t,S.SESSION_TYPE.AD)})),i):(c._logger.error("createAdSession(): expecting an instance of ContentMetadata for adMetadata parameter"),i)},this.reportError=function(t,n,i){return this._released?void 0:P.isValidString(n)?i!==e.Client.ErrorSeverity.FATAL&&i!==e.Client.ErrorSeverity.WARNING?void this._logger.error("reportError(): invalid error severity: "+i):void this._exceptionCatcher.runProtected("Client.reportError",(function(){var e=c._sessionFactory.getVideoSession(t);null!=e&&e.reportError(n,i)})):void this._logger.error("reportError(): invalid error message string: "+n)},this.updateContentMetadata=function(e,t){return this._released?void 0:t instanceof r?void this._exceptionCatcher.runProtected("Client.updateContentMetadata",(function(){var n=c._sessionFactory.getVideoSession(e);if(null!=n){var i=t.clone();n.updateContentMetadata(i)}})):void c._logger.error("updateContentMetadata(): expecting an instance of ContentMetadata for contentMetadata parameter")},this.detachPlayer=function(e){this._released||this._exceptionCatcher.runProtected("Client.detachPlayer",(function(){var t=c._sessionFactory.getVideoSession(e);null!=t&&t.detachPlayer()}))},this.attachPlayer=function(e,t){return this._released?void 0:t instanceof s?void this._exceptionCatcher.runProtected("Client.attachPlayer",(function(){var n=c._sessionFactory.getVideoSession(e);null!=n&&n.attachPlayer(t)})):void c._logger.error("attachPlayer(): expecting an instance of PlayerStateManager for playerStateManager parameter")},this.contentPreload=function(e){this._released||this._exceptionCatcher.runProtected("Client.contentPreload",(function(){var t=c._sessionFactory.getVideoSession(e);null!=t&&t.contentPreload()}))},this.contentStart=function(e){this._released||this._exceptionCatcher.runProtected("Client.contentStart",(function(){var t=c._sessionFactory.getVideoSession(e);null!=t&&t.contentStart()}))},this.sendCustomEvent=function(e,t,i){return this._released?void 0:P.isValidString(t)?void this._exceptionCatcher.runProtected("Client.sendCustomEvent",(function(){if(e==n.NO_SESSION_KEY){if(c._globalSessionKey<0){var a=new r;c._globalSessionKey=c._sessionFactory.makeGlobalSession(a,null)}e=c._globalSessionKey}var o=P.sanitizeStringToStringObject(i),s=c._sessionFactory.getSession(e);null!=s&&s.sendCustomEvent(t,o)})):void c._logger.error("sendCustomEvent(): eventName parameter must be a valid string.")},this.adStart=function(e,t,i,r){return this._released?void 0:t!==n.AdStream.CONTENT&&t!==n.AdStream.SEPARATE?void this._logger.error("adStart(): ignored, invalid value for adStream parameter: "+t):i!==n.AdPlayer.CONTENT&&i!==n.AdPlayer.SEPARATE?void this._logger.error("adStart(): ignored, invalid value for adPlayer parameter: "+i):r!==n.AdPosition.BUMPER&&r!==n.AdPosition.PREROLL&&r!==n.AdPosition.MIDROLL&&r!==n.AdPosition.POSTROLL?void this._logger.error("adStart(): ignored, invalid value for adPosition parameter: "+r):void this._exceptionCatcher.runProtected("Client.adStart",(function(){var n=c._sessionFactory.getVideoSession(e);null!=n&&n.adStart(t,i,r)}))},this.adEnd=function(e){this._released||this._exceptionCatcher.runProtected("Client.adEnd",(function(){var t=c._sessionFactory.getVideoSession(e);null!=t&&t.adEnd()}))},this.cleanupSession=function(e){return this._released?void 0:e===n.NO_SESSION_KEY?void this._logger.warning("cleanupSession(): ignored, can't cleanup Client.NO_SESSION_KEY"):void this._exceptionCatcher.runProtected("Client.cleanupSession",(function(){null!=c._sessionFactory.getVideoSession(e)&&c._sessionFactory.cleanupSession(e)}))},this.getAttachedPlayer=function(e){var t=null;return this._released?t:e===n.NO_SESSION_KEY?(this._logger.warning("getAttachedPlayer(): ignored for Client.NO_SESSION_KEY"),t):(this._exceptionCatcher.runProtected("Client.getAttachedPlayer",(function(){var n=c._sessionFactory.getVideoSession(e);null!=n&&(t=n.getPlayerStateManager())})),t)},this.isPlayerAttached=function(e){return!this._released&&null!==this.getAttachedPlayer(e)},this.getPlayerStateManager=function(){if(this._released)throw new Error("This instance of Conviva.Client has been released.");return new s(this._systemFactory)},this.releasePlayerStateManager=function(e){if(this._released)throw new Error("This instance of Conviva.Client has been released.");this._exceptionCatcher.runProtected("Client.releasePlayerStateManager",(function(){e instanceof s&&e.release()}))},this.getSettings=function(){return this._settings},this.getId=function(){return this._id}};n.version="2.151.0.36981",n.NO_SESSION_KEY=-2,n.AdPosition={BUMPER:"BUMPER",PREROLL:"PREROLL",MIDROLL:"MIDROLL",POSTROLL:"POSTROLL"},n.AdStream={CONTENT:"CONTENT",SEPARATE:"SEPARATE"},n.AdPlayer={CONTENT:"CONTENT",SEPARATE:"SEPARATE"},n.ErrorSeverity={FATAL:0,WARNING:1},n.DeviceType={DESKTOP:"DESKTOP",CONSOLE:"Console",SETTOP:"Settop",MOBILE:"Mobile",TABLET:"Tablet",SMARTTV:"SmartTV"},n.AdTechnology={CLIENT_SIDE:"Client Side",SERVER_SIDE:"Server Side"},n.AdType={BLACKOUT_SLATE:"Blackout slate",TECHNICAL_DIFFICULTIES_SLATE:"Technical Difficulties slate",COMMERCIAL_SLATE:"Commercial Break slate",OTHER_SLATE:"Other slate",VPAID:"VPAID",REGULAR:"Regular Ad"},n.AdServingType={INLINE:"Inline",WRAPPER:"Wrapper"},n.DeviceCategory={ANDROID_DEVICE:"AND",APPLE_DEVICE:"APL",CHROMECAST:"CHR",DESKTOP_APP:"DSKAPP",DEVICE_SIMULATOR:"SIMULATOR",LG_TV:"LGTV",NINTENDO:"NINTENDO",PLAYSTATION:"PS",ROKU:"RK",SAMSUNG_TV:"SAMSUNGTV",SMART_TV:"TV",SET_TOP_BOX:"STB",TIVO:"TIVO",WEB:"WEB",WINDOWS_DEVICE:"WIN",XBOX:"XB"};var i=e.ClientSettings=function(e){function t(e){if(!P.isValidString(e))throw new Error("customerKey must be valid");this.customerKey=e}function n(e){if(P.isValidString(e)){var t=e.split("://");if("cws.conviva.com"!=t[1]&&("https"==t[0]||"http"==t[0]))return e}return"https://"+r.customerKey+"."+i.defaultProductionGatewayDNS}var r=this;this._customerKey=null,P.defGet(this,"customerKey",(function(){return this._customerKey})),P.defSet(this,"customerKey",(function(e){P.isValidString(e)&&(this._customerKey=e)})),this._heartbeatInterval=i.defaultProductionHeartbeatInterval,P.defGet(this,"heartbeatInterval",(function(){return this._heartbeatInterval})),P.defSet(this,"heartbeatInterval",(function(e){if("number"==typeof e){var t=P.NumberToUnsignedInt(e);t===e&&(this._heartbeatInterval=t)}})),this._gatewayUrl=null,P.defGet(this,"gatewayUrl",(function(){return this._gatewayUrl})),P.defSet(this,"gatewayUrl",(function(e){P.isValidString(e)&&(this._gatewayUrl=e)})),t.apply(this,arguments),this.equals=function(e){return this.customerKey===e.customerKey&&this.gatewayUrl===e.gatewayUrl&&this.heartbeatInterval===e.heartbeatInterval},this.clone=function(){var e=new i(this.customerKey);return e.gatewayUrl=n(this.gatewayUrl),e.heartbeatInterval=this.heartbeatInterval,e}};i.defaultDevelopmentGatewayUrl="https://conviva.testonly.conviva.com",i.defaultProductionGatewayUrl="https://cws.conviva.com",i.defaultProductionGatewayDNS="cws.conviva.com",i.defaultDevelopmentGatewayDNS="conviva.testonly.conviva.com",i._httpsProtocol="https://",i._httpProtocol="http://",i.defaultDevelopmentHeartbeatInterval=5,i.defaultProductionHeartbeatInterval=20;var r=e.ContentMetadata=function(){function e(){return this._assetName}function t(e){"string"==typeof e&&(this._assetName=e)}function n(){return this._custom}function i(e){"object"==typeof e&&(this._custom=P.sanitizeStringToStringObject(e))}function a(){return this._defaultResource}function o(e){"string"==typeof e&&(this._defaultResource=e)}function s(){return this._viewerId}function l(e){"string"==typeof e&&(this._viewerId=e)}function c(){return this._applicationName}function u(e){"string"==typeof e&&(this._applicationName=e)}function d(){return this._streamUrl}function h(e){"string"==typeof e&&(this._streamUrl=e)}function p(){return this._streamType}function _(e){(e===r.StreamType.UNKNOWN||e===r.StreamType.VOD||e===r.StreamType.LIVE)&&(this._streamType=e)}function f(){return this._duration}function g(e){this._duration=O.sanitizeSpecialIntegerValue(e)}function v(){return this._encodedFrameRate}function m(e){this._encodedFrameRate=O.sanitizeSpecialIntegerValue(e)}function y(){}this._assetName=null,P.defGet(this,"assetName",e),P.defSet(this,"assetName",t),this._custom={},P.defGet(this,"custom",n),P.defSet(this,"custom",i),this._defaultResource=null,P.defGet(this,"defaultResource",a),P.defSet(this,"defaultResource",o),this._viewerId=null,P.defGet(this,"viewerId",s),P.defSet(this,"viewerId",l),this._applicationName=null,P.defGet(this,"applicationName",c),P.defSet(this,"applicationName",u),this._streamUrl=null,P.defGet(this,"streamUrl",d),P.defSet(this,"streamUrl",h),this._streamType=r.StreamType.UNKNOWN,P.defGet(this,"streamType",p),P.defSet(this,"streamType",_),this._duration=-1,P.defGet(this,"duration",f),P.defSet(this,"duration",g),this._encodedFrameRate=-1,P.defGet(this,"encodedFrameRate",v),P.defSet(this,"encodedFrameRate",m),y.apply(this,arguments),this.clone=function(){var e=new r;for(var t in e.assetName=this.assetName,e.applicationName=this.applicationName,e.streamUrl=this.streamUrl,e.viewerId=this.viewerId,e.defaultResource=this.defaultResource,e.streamType=this.streamType,e.duration=this.duration,e.encodedFrameRate=this.encodedFrameRate,this.custom)e.custom[t]=this.custom[t];return e}};r.StreamType={UNKNOWN:"UNKNOWN",LIVE:"LIVE",VOD:"VOD"};var a=(e.ErrorType={ERROR_UNKNOWN:"ERROR_UNKNOWN",ERROR_IO:"ERROR_IO",ERROR_TIMEOUT:"ERROR_TIMEOUT",ERROR_NULL_ASSET:"ERROR_NULL_ASSET",ERROR_MISSING_PARAMETER:"ERROR_MISSING_PARAMETER",ERROR_NO_AD_AVAILABLE:"ERROR_NO_AD_AVAILABLE",ERROR_PARSE:"ERROR_PARSE",ERROR_INVALID_VALUE:"ERROR_INVALID_VALUE",ERROR_INVALID_SLOT:"ERROR_INVALID_SLOT",ERROR_3P_COMPONENT:"ERROR_3P_COMPONENT",ERROR_UNSUPPORTED_3P_FEATURE:"ERROR_UNSUPPORTED_3P_FEATURE",ERROR_DEVICE_LIMIT:"ERROR_DEVICE_LIMIT",ERROR_UNMATCHED_SLOT_SIZE:"ERROR_UNMATCHED_SLOT_SIZE"},e.Events={AD_REQUESTED:"Conviva.AdRequested",AD_RESPONSE:"Conviva.AdResponse",AD_SLOT_STARTED:"Conviva.SlotStarted",AD_ATTEMPTED:"Conviva.AdAttempted",AD_SLOT_ENDED:"Conviva.SlotEnded",AD_IMPRESSION_START:"Conviva.AdImpression",AD_START:"Conviva.AdStart",AD_FIRST_QUARTILE:"Conviva.AdFirstQuartile",AD_MID_QUARTILE:"Conviva.AdMidQuartile",AD_THIRD_QUARTILE:"Conviva.AdThirdQuartile",AD_COMPLETE:"Conviva.AdComplete",AD_END:"Conviva.AdEnd",AD_IMPRESSION_END:"Conviva.AdImpressionEnd",AD_SKIPPED:"Conviva.AdSkipped",AD_ERROR:"Conviva.AdError",AD_PROGRESS:"Conviva.AdProgress",AD_CLOSE:"Conviva.AdClose",CONTENT_PAUSED:"Conviva.PauseContent",CONTENT_RESUMED:"Conviva.ResumeContent",POD_START:"Conviva.PodStart",POD_END:"Conviva.PodEnd"},e.SystemFactory=function(e,t){function n(e,t){if(!(e instanceof h))throw new Error("systemInterface parameter should be an instance of SystemInterface.");this._systemInterface=e,this._timeInterface=this._systemInterface._timeInterface,this._timerInterface=this._systemInterface._timerInterface,this._httpInterface=this._systemInterface._httpInterface,this._storageInterface=this._systemInterface._storageInterface,this._metadataInterface=this._systemInterface._metadataInterface,this._loggingInterface=this._systemInterface._loggingInterface,this._settings=t instanceof o?t.clone():new o}var i=this;n.apply(this,arguments),this.configure=function(e,t){this._packageName=e,this._clientSettings=t},this.release=function(){this._systemInterface.release(),this._systemInterface=null,this._packageName=null,this._settings=null,this._logBuffer=null};var r={build:function(){return new N(i._loggingInterface,i._timeInterface,i.getSettings(),i._logBuffer,i._packageName)}};this.buildLogger=function(){return r.build()},this.buildSessionFactory=function(e,t,n){return new b(e,t,n,this)},this.buildPing=function(){return new M(this.buildLogger(),this.buildHttpClient(),this._clientSettings)},this.buildCallbackWithTimeout=function(){return new T(this.buildTimer())},this.buildCallbackWithTimeoutNoPing=function(){var e=new C(this.buildLogger(),null,this.getSettings()),t=new V(this.buildLogger(),this._timerInterface,e);return new T(t)},this.buildHttpClient=function(){return new R(this.buildLogger(),this._httpInterface,this.buildCallbackWithTimeoutNoPing(),this.getSettings())},this.buildExceptionCatcher=function(){return new C(this.buildLogger(),this.buildPing(),this.getSettings())},this.buildTime=function(){return new F(this._timeInterface,this.buildLogger())},this.buildTimer=function(){return new V(this.buildLogger(),this._timerInterface,this.buildExceptionCatcher())},this.buildStorage=function(){return new L(this.buildLogger(),this._storageInterface,this.buildCallbackWithTimeout(),this.getSettings())},this.buildConfig=function(){return new w(this.buildLogger(),this.buildStorage(),this.buildJsonInterface())},this.buildSystemMetadata=function(){return new x(this.buildLogger(),this._metadataInterface,this.buildExceptionCatcher())},this.buildCwsProtocol=function(){return new v},this.buildGatewayControl=function(e){return new I(e,this.buildLogger(),this.buildHttpClient(),this.buildJsonInterface())},this.buildCwsSession=function(e,t,n){var i=this.buildGatewayControl(t);return new S(this.buildEventQueue(),e,t,this.buildLogger(),this.buildExceptionCatcher(),this.buildTimer(),i,this.buildCwsProtocol(),this.buildTime(),this.getLogBuffer(),n)},this.buildSession=function(e,t,n,i,r,a){var o=this.buildExceptionCatcher(),s=this.buildLogger(),l=t.clone(),c=this.buildCwsSession(e,l,n);return new E(i,r,a,n,this.buildSystemMetadata(),c,o,s)},this.buildEventQueue=function(){return new A},this.buildJsonInterface=function(){return new m},this.getLogBuffer=function(){return this._logBuffer},this.getSettings=function(){return this._settings},this._logBuffer=new k}),o=e.SystemSettings=function(){function e(){}this._logLevel=o.defaultProductionLogLevel,P.defGet(this,"logLevel",(function(){return this._logLevel})),P.defSet(this,"logLevel",(function(e){if("number"==typeof e){var t=P.NumberToUnsignedInt(e);t===e&&t>=o.LogLevel.DEBUG&&t<=o.LogLevel.ERROR&&(this._logLevel=t)}})),this._allowUncaughtExceptions=o.defaultProductionAllowUncaughtExceptions,P.defGet(this,"allowUncaughtExceptions",(function(){return this._allowUncaughtExceptions})),P.defSet(this,"allowUncaughtExceptions",(function(e){P.isBoolean(e)&&(this._allowUncaughtExceptions=e)})),this._storageTimeout=o.defaultStorageTimeout,P.defGet(this,"storageTimeout",(function(){return this._storageTimeout})),P.defSet(this,"storageTimeout",(function(e){if("number"==typeof e){var t=P.NumberToUnsignedInt(e);t===e&&(this._storageTimeout=t)}})),this._httpTimeout=o.defaultHttpTimeout,P.defGet(this,"httpTimeout",(function(){return this._httpTimeout})),P.defSet(this,"httpTimeout",(function(e){if("number"==typeof e){var t=P.NumberToUnsignedInt(e);t===e&&(this._httpTimeout=t)}})),e.apply(this,arguments),this.equals=function(e){return this.logLevel===e.logLevel&&this.allowUncaughtExceptions===e.allowUncaughtExceptions&&this.storageTimeout===e.storageTimeout&&this.httpTimeout===e.httpTimeout},this.clone=function(){var e=new o;return e.logLevel=this.logLevel,e.allowUncaughtExceptions=this.allowUncaughtExceptions,e.storageTimeout=this.storageTimeout,e.httpTimeout=this.httpTimeout,e}};o.LogLevel={DEBUG:0,INFO:1,WARNING:2,ERROR:3,NONE:4},o.defaultDevelopmentLogLevel=o.LogLevel.DEBUG,o.defaultProductionLogLevel=o.LogLevel.ERROR,o.defaultDevelopmentAllowUncaughtExceptions=!0,o.defaultProductionAllowUncaughtExceptions=!1,o.defaultStorageTimeout=10,o.defaultHttpTimeout=10;var s=e.PlayerStateManager=function(n){function i(e){r._systemFactory=e,r._logger=r._systemFactory.buildLogger(),r._logger.setModuleName("PlayerStateManager"),r._exceptionCatcher=r._systemFactory.buildExceptionCatcher()}var r=this;r._monitorNotifier=null,r._bitrateKbps=-2,r._playerState=s.PlayerState.UNKNOWN,r._currentMetadata={},r._renderedFrameRate=-2,r._encodedFrameRate=-2,r._duration=-2,r._playerVersion=null,r._playerType=null,r._streamUrl=null,r._moduleName=null,r._moduleVersion=null,r._width=-1,r._height=-1,r._connectionType=null,r._linkEncryption=null,r._lastError=null,r._pendingErrors=[],r._released=!1,this.release=function(){r._released||r._exceptionCatcher.runProtected("PlayerStateManager.release",(function(){null!=r._monitorNotifier&&r._monitorNotifier.onRelease(),r.removeMonitoringNotifier(),r._systemFactory=null,r._logger=null,r._exceptionCatcher=null,r._released=!0}))},this.setPlayheadTime=function(e){},this.setBufferLength=function(e){},this.setRenderedFrameRate=function(e){},this.getEncodedFrameRate=function(){return r._encodedFrameRate},this.setEncodedFrameRate=function(e){r._released||r._exceptionCatcher.runProtected("PlayerStateManager.setEncodedFrameRate",(function(){var t=O.sanitizeSpecialIntegerValue(e);t>=-1&&(r._encodedFrameRate=t,null!=r._monitorNotifier&&r._monitorNotifier.onEncodedFrameRateChange(r._encodedFrameRate))}))},this.getDuration=function(){return r._duration},this.setClientMeasureInterface=function(t){P.validateInterface(t,new e.ClientMeasureInterface,"ClientMeasureInterface"),this._playerInterface=t},this.getPHT=function(){return this._playerInterface&&"function"==typeof this._playerInterface.getPHT?this._playerInterface.getPHT():s.DEFAULT_PHT},this.getBufferLength=function(){return this._playerInterface&&"function"==typeof this._playerInterface.getBufferLength?this._playerInterface.getBufferLength():s.DEFAULT_BUFFER_LENGTH},this.getSignalStrength=function(){return this._playerInterface&&"function"==typeof this._playerInterface.getSignalStrength?this._playerInterface.getSignalStrength():s.DEFAULT_SIGNAL_STRENGTH},this.getRenderedFrameRate=function(){return this._playerInterface&&"function"==typeof this._playerInterface.getRenderedFrameRate?this._playerInterface.getRenderedFrameRate():s.DEFAULT_RENDERED_FRAME_RATE},this.setDuration=function(e){r._released||r._exceptionCatcher.runProtected("PlayerStateManager.setDuration",(function(){var t=O.sanitizeSpecialIntegerValue(e);t>=-1&&(r._duration=t,null!=r._monitorNotifier&&r._monitorNotifier.onContentLengthChange(r._duration))}))},this.getStreamUrl=function(){return r._streamUrl},this.setStreamUrl=function(e){r._released||r._exceptionCatcher.runProtected("PlayerStateManager.setStreamUrl",(function(){null!=e&&(r._streamUrl=e,null!=r._monitorNotifier&&r._monitorNotifier.onStreamUrlChange(r._streamUrl))}))},this.getModuleName=function(){return r._moduleName},this.getModuleVersion=function(){return r._moduleVersion},this.setModuleNameAndVersion=function(e,t){r._moduleName=e,r._moduleVersion=t},this.getPlayerType=function(){return r._playerType},this.setPlayerType=function(e){r._released||r._exceptionCatcher.runProtected("PlayerStateManager.setPlayerType",(function(){r._playerType=e,null!=r._monitorNotifier&&r._monitorNotifier.onPlayerTypeChange(r._playerType)}))},this.getPlayerVersion=function(){return r._playerVersion},this.setPlayerVersion=function(e){r._released||r._exceptionCatcher.runProtected("PlayerStateManager.setPlayerVersion",(function(){r._playerVersion=e,null!=r._monitorNotifier&&r._monitorNotifier.onPlayerVersionChange(r._playerVersion)}))},this.setMonitoringNotifier=function(e,t){return r._released?void 0:null==r._monitorNotifier&&(r._monitorNotifier=e,r._logger.setSessionId(t),!0)},this.removeMonitoringNotifier=function(){r._released||(r._monitorNotifier=null,r._logger.setSessionId(null))},this.pushCurrentState=function(){r.setPlayerState(r.getPlayerState()),r.setBitrateKbps(r.getBitrateKbps()),r.setDuration(r.getDuration()),r.setEncodedFrameRate(r.getEncodedFrameRate()),r.setStreamUrl(r.getStreamUrl()),r.setPlayerType(r.getPlayerType()),r.setPlayerVersion(r.getPlayerVersion());for(var e=0;e<r._pendingErrors.length;e++){var t=r._pendingErrors[e];r.setError(t)}r._pendingErrors=[]},this.getPlayerState=function(){return r._playerState},this.setPlayerState=function(e){r._released||r._exceptionCatcher.runProtected("PlayerStateManager.setPlayerState",(function(){s.isValidPlayerState(e)?(r._playerState=e,null!=r._monitorNotifier&&r._monitorNotifier.onPlayerStateChange(r._playerState)):r._logger.error("PlayerStateManager.SetPlayerState(): invalid state: "+e)}))},this.getBitrateKbps=function(){return r._bitrateKbps},this.setBitrateKbps=function(e){r._released||r._exceptionCatcher.runProtected("PlayerStateManager.setBitrateKbps",(function(){var t=O.sanitizeSpecialIntegerValue(e);t>=-1&&(r._bitrateKbps=t,null!=r._monitorNotifier&&r._monitorNotifier.onBitrateChange(r._bitrateKbps))}))},this.setPlayerSeekStart=function(e){r._released||r._exceptionCatcher.runProtected("PlayerStateManager.setPlayerSeekStart()",(function(){null!=r._monitorNotifier&&r._monitorNotifier.onSeekEvent(s.SEEK_ACTIONS_TYPE.SEEK_START,e)}))},this.setPlayerSeekEnd=function(){r._released||r._exceptionCatcher.runProtected("PlayerStateManager.setPlayerSeekEnd()",(function(){null!=r._monitorNotifier&&r._monitorNotifier.onSeekEvent(s.SEEK_ACTIONS_TYPE.SEEK_END,-1)}))},this.setUserSeekButtonUp=function(){r._released||r._exceptionCatcher.runProtected("PlayerStateManager.setUserSeekButtonUp()",(function(){null!=r._monitorNotifier&&r._monitorNotifier.onSeekEvent(s.SEEK_ACTIONS_TYPE.BUTTON_UP,-1)}))},this.setUserSeekButtonDown=function(){r._released||r._exceptionCatcher.runProtected("PlayerStateManager.setUserSeekButtonDown()",(function(){null!=r._monitorNotifier&&r._monitorNotifier.onSeekEvent(s.SEEK_ACTIONS_TYPE.BUTTON_DOWN,-1)}))},this.setVideoResolutionWidth=function(e){r._released||r._exceptionCatcher.runProtected("PlayerStateManager.setVideoResolutionWidth()",(function(){var t=O.sanitizeSpecialIntegerValue(e);t>0&&(r._width=t),null!=r._monitorNotifier&&r._monitorNotifier.onStreamResolutionWidthChange(r._width)}))},this.setVideoResolutionHeight=function(e){r._released||r._exceptionCatcher.runProtected("PlayerStateManager.setVideoResolutionHeight()",(function(){var t=O.sanitizeSpecialIntegerValue(e);t>0&&(r._height=t),null!=r._monitorNotifier&&r._monitorNotifier.onStreamResolutionHeightChange(r._height)}))},this.setConnectionType=function(e){r._released||r._exceptionCatcher.runProtected("PlayerStateManager.setConnectionType()",(function(){r._connectionType=e,null!=r._monitorNotifier&&r._monitorNotifier.onConnectionTypeChange(r._connectionType)}))},this.setLinkEncryption=function(e){r._released||r._exceptionCatcher.runProtected("PlayerStateManager.setLinkEncryption()",(function(){r._linkEncryption=e,null!=r._monitorNotifier&&r._monitorNotifier.onLinkEncryptionChange(r._linkEncryption)}))},this.setSignalStrength=function(e){},this.setError=function(e){if(r._lastError=e,null!=r._monitorNotifier){var t=e.errorCode,n=e.severity;r._monitorNotifier.onError(t,n)}else r._pendingErrors.push(e)},this.sendError=function(e,n){r._released||r._exceptionCatcher.runProtected("PlayerStateManager.sendError",(function(){var i=new t.StreamerError(e,n);r.setError(i)}))},this.reset=function(){r._released||r._exceptionCatcher.runProtected("PlayerStateManager.reset",(function(){r._bitrateKbps=-2,r._playerState=s.PlayerState.UNKNOWN,r._currentMetadata={},r._renderedFrameRate=-1,r._encodedFrameRate=-1,r._duration=-1,r._playerVersion=null,r._playerType=null,r._streamUrl=null,r._lastError=null,r._pendingErrors=[]}))},this.getError=function(){return r._lastError},i.apply(r,arguments),s.DEFAULT_SIGNAL_STRENGTH=1e3,s.DEFAULT_RENDERED_FRAME_RATE=-1,s.DEFAULT_BUFFER_LENGTH=-1,s.DEFAULT_PHT=-1};s.PlayerState={STOPPED:"STOPPED",PLAYING:"PLAYING",BUFFERING:"BUFFERING",PAUSED:"PAUSED",UNKNOWN:"UNKNOWN",NOT_MONITORED:"NOT_MONITORED"},s.isValidPlayerState=function(e){return e===s.PlayerState.STOPPED||e===s.PlayerState.PLAYING||e===s.PlayerState.BUFFERING||e===s.PlayerState.PAUSED||e===s.PlayerState.UNKNOWN||e===s.PlayerState.NOT_MONITORED},s.SEEK_ACTIONS_TYPE={SEEK_START:"pss",SEEK_END:"pse",BUTTON_UP:"bu",BUTTON_DOWN:"bd"};var l=(e.ClientMeasureInterface=function(){this.getPHT=function(){},this.getBufferLength=function(){},this.getSignalStrength=function(){},this.getRenderedFrameRate=function(){}},e.HttpInterface=function(){this.makeRequest=function(e,t,n,i,r,a){},this.release=function(){}}),c=e.LoggingInterface=function(){this.consoleLog=function(e,t){},this.release=function(){}},u=e.MetadataInterface=function(){this.getBrowserName=function(){},this.getBrowserVersion=function(){},this.getDeviceBrand=function(){},this.getDeviceManufacturer=function(){},this.getDeviceModel=function(){},this.getDeviceType=function(){},this.getDeviceVersion=function(){},this.getFrameworkName=function(){},this.getFrameworkVersion=function(){},this.getOperatingSystemName=function(){},this.getOperatingSystemVersion=function(){},this.getDeviceCategory=function(){},this.release=function(){}},d=e.StorageInterface=function(){this.saveData=function(e,t,n,i){},this.loadData=function(e,t,n){},this.release=function(){}},h=e.SystemInterface=function(e,t,n,i,r,a){function o(e,t,n,i,r,a){P.validateInterface(e,new p,"TimeInterface"),P.validateInterface(t,new _,"TimerInterface"),P.validateInterface(n,new l,"HttpInterface"),P.validateInterface(i,new d,"StorageInterface"),P.validateInterface(r,new u,"MetadataInterface"),P.validateInterface(a,new c,"LoggingInterface"),this._timeInterface=e,this._timerInterface=t,this._httpInterface=n,this._storageInterface=i,this._metadataInterface=r,this._loggingInterface=a}o.apply(this,arguments),this.release=function(){this._timeInterface.release(),this._timeInterface=null,this._timerInterface.release(),this._timerInterface=null,this._httpInterface.release(),this._httpInterface=null,this._storageInterface.release(),this._storageInterface=null,this._metadataInterface.release(),this._metadataInterface=null,this._loggingInterface.release(),this._loggingInterface=null}},p=e.TimeInterface=function(){this.getEpochTimeMs=function(){},this.release=function(){}},_=e.TimerInterface=function(){this.createTimer=function(e,t,n){},this.release=function(){}},f=t.JSON2={};!function(){function e(e){return 10>e?"0"+e:e}function t(e){return i.lastIndex=0,i.test(e)?'"'+e.replace(i,(function(e){var t=o[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)}))+'"':'"'+e+'"'}function n(e,i){var o,l,c,u,d,h=r,p=i[e];switch(p&&"object"==typeof p&&"function"==typeof p.toJSON&&(p=p.toJSON(e)),"function"==typeof s&&(p=s.call(i,e,p)),typeof p){case"string":return t(p);case"number":return isFinite(p)?String(p):"null";case"boolean":case"null":return String(p);case"object":if(!p)return"null";if(r+=a,d=[],Object.prototype.toString.apply(p)===Object.prototype.toString.apply([])){for(u=p.length,o=0;u>o;o+=1)d[o]=n(o,p)||"null";return c=0===d.length?"[]":r?"[\n"+r+d.join(",\n"+r)+"\n"+h+"]":"["+d.join(",")+"]",r=h,c}if(s&&"object"==typeof s)for(u=s.length,o=0;u>o;o+=1)"string"==typeof s[o]&&((c=n(l=s[o],p))&&d.push(t(l)+(r?": ":":")+c));else for(l in p)Object.prototype.hasOwnProperty.call(p,l)&&((c=n(l,p))&&d.push(t(l)+(r?": ":":")+c));return c=0===d.length?"{}":r?"{\n"+r+d.join(",\n"+r)+"\n"+h+"}":"{"+d.join(",")+"}",r=h,c}}var i,r,a,o,s;"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+e(this.getUTCMonth()+1)+"-"+e(this.getUTCDate())+"T"+e(this.getUTCHours())+":"+e(this.getUTCMinutes())+":"+e(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()}),"function"!=typeof f.stringify&&(i=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,o={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},f.stringify=function(e,t,i){var o;if(r="",a="","number"==typeof i)for(o=0;i>o;o+=1)a+=" ";else"string"==typeof i&&(a=i);if(s=t,t&&"function"!=typeof t&&("object"!=typeof t||"number"!=typeof t.length))throw new Error("JSON2.stringify");return n("",{"":e})})}();var g=t.JsonParse=function(){var e,t,n,i,r={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"},a=function(t){throw{name:"SyntaxError",message:t,at:e,text:n}},o=function(i){return i&&i!==t&&a("Expected '"+i+"' instead of '"+t+"'"),t=n.charAt(e),e+=1,t},s=function(){var e,n="";for("-"===t&&(n="-",o("-"));t>="0"&&"9">=t;)n+=t,o();if("."===t)for(n+=".";o()&&t>="0"&&"9">=t;)n+=t;if("e"===t||"E"===t)for(n+=t,o(),("-"===t||"+"===t)&&(n+=t,o());t>="0"&&"9">=t;)n+=t,o();return e=+n,isNaN(e)?void a("Bad number"):e},l=function(){var e,n,i,s="";if('"'===t)for(;o();){if('"'===t)return o(),s;if("\\"===t)if(o(),"u"===t){for(i=0,n=0;4>n&&(e=parseInt(o(),16),isFinite(e));n+=1)i=16*i+e;s+=String.fromCharCode(i)}else{if("string"!=typeof r[t])break;s+=r[t]}else s+=t}a("Bad string")},c=function(){for(;t&&" ">=t;)o()};return i=function(){switch(c(),t){case"{":return function(){var e,n={};if("{"===t){if(o("{"),c(),"}"===t)return o("}"),n;for(;t;){if(e=l(),c(),o(":"),Object.hasOwnProperty.call(n,e)&&a('Duplicate key "'+e+'"'),n[e]=i(),c(),"}"===t)return o("}"),n;o(","),c()}}a("Bad object")}();case"[":return function(){var e=[];if("["===t){if(o("["),c(),"]"===t)return o("]"),e;for(;t;){if(e.push(i()),c(),"]"===t)return o("]"),e;o(","),c()}}a("Bad array")}();case'"':return l();case"-":return s();default:return t>="0"&&"9">=t?s():function(){switch(t){case"t":return o("t"),o("r"),o("u"),o("e"),!0;case"f":return o("f"),o("a"),o("l"),o("s"),o("e"),!1;case"n":return o("n"),o("u"),o("l"),o("l"),null}a("Unexpected '"+t+"'")}()}},function(r,o){var s;return n=r,e=0,t=" ",s=i(),c(),t&&a("Syntax error"),"function"==typeof o?function e(t,n){var i,r,a=t[n];if(a&&"object"==typeof a)for(i in a)Object.hasOwnProperty.call(a,i)&&(void 0!==(r=e(a,i))?a[i]=r:delete a[i]);return o.call(t,n,a)}({"":s},""):s}}(),v=t.CwsProtocol=function(){this.generateEvent=function(e,t,n,i){return i.seq=e,i.st=t,i.t=n,i},this.generateSessionEndEvent=function(e,t){var n=v.EVENT_TYPE_SESSION_END;return this.generateEvent(e,t,n,{})}};v.version="2.4",v.gatewayPath="/0/wsg",v.DEFAULT_CLIENT_ID="0",v.DEFAULT_MAX_HEARTBEAT_INFOS=0,v.DEFAULT_PLAYHEAD_TIME=-1,v.DEFAULT_BUFFER_LENGTH=-1,v.DEFAULT_SIGNAL_STRENGTH=1e3,v.SDK_METADATA_SCHEMA="sdk.js.1",v.EVENT_TYPE_STATE_CHANGE="CwsStateChangeEvent",v.EVENT_TYPE_ERROR="CwsErrorEvent",v.EVENT_TYPE_SESSION_END="CwsSessionEndEvent",v.EVENT_TYPE_CUSTOM="CwsCustomEvent",v.EVENT_TYPE_SEEK="CwsSeekEvent",v.EVENT_TYPE_DATA_SAMPLE="CwsDataSamplesEvent",v.RESPONSE_STATUS_NO_ERRORS="ok",v.RESPONSE_KEY_STATUS="err",v.RESPONSE_KEY_CLIENT_ID="clid",v.RESPONSE_KEY_CONFIG="cfg",v.RESPONSE_KEY_EVENTS="evs",v.RESPONSE_CONFIG_KEY_MAX_HEARTBEAT_INFOS="maxhbinfos",v.RESPONSE_CONFIG_KEY_SEND_LOGS="slg",v.RESPONSE_CONFIG_KEY_HEARTBEAT_INTERVAL="hbi",v.RESPONSE_CONFIG_KEY_GATEWAY_URL="gw",v.MESSAGE_TYPE_SESSION_HEARTBEAT="CwsSessionHb",v.REQUEST_KEY_MESSAGE_TYPE="t",v.REQUEST_KEY_SESSION_TIME="st",v.REQUEST_KEY_SESSION_START_TIME="sst",v.REQUEST_KEY_IS_LIVE="lv",v.REQUEST_KEY_SEQUENCE_NUMBER="seq",v.REQUEST_KEY_CUSTOMER_KEY="cid",v.REQUEST_KEY_CLIENT_ID="clid",v.REQUEST_KEY_CLIENT_VERSION="clv",v.REQUEST_KEY_PROTOCOL_VERSION="pver",v.REQUEST_KEY_INSTANCE_ID="iid",v.REQUEST_KEY_SESSION_ID="sid",v.REQUEST_KEY_VIEWER_ID="vid",v.REQUEST_KEY_ASSET_NAME="an",v.REQUEST_KEY_PLAYER_NAME="pn",v.REQUEST_KEY_TAGS="tags",v.REQUEST_KEY_SESSION_FLAGS="sf",v.REQUEST_KEY_EVENTS="evs",v.REQUEST_KEY_LOGS="lg",v.REQUEST_KEY_HEARTBEAT_INFOS="hbinfos",v.REQUEST_KEY_IS_SDK_CLIENT="sdk",v.REQUEST_KEY_PAUSE_JOIN="pj",v.REQUEST_KEY_PLAYER_STATE="ps",v.REQUEST_KEY_BITRATE="br",v.REQUEST_KEY_CONTENT_LENGTH="cl",v.REQUEST_KEY_ENCODED_FRAME_RATE="efps",v.REQUEST_KEY_AVERAGE_FRAME_RATE="afps",v.REQUEST_KEY_RFPS_TOTAL="rfpstot",v.REQUEST_KEY_RFPS_COUNT="rfpscnt",v.REQUEST_KEY_RESOURCE="rs",v.REQUEST_KEY_PLAYHEAD_TIME="pht",v.REQUEST_KEY_BUFFER_LENGTH="bl",v.REQUEST_KEY_STREAM_URL="url",v.REQUEST_KEY_CAPABILITIES="caps",v.REQUEST_KEY_PLATFORM_METADATA="pm",v.REQUEST_KEY_VIDEO_WIDTH="w",v.REQUEST_KEY_VIDEO_HEIGHT="h",v.REQUEST_KEY_CONNECTION_TYPE="ct",v.REQUEST_KEY_LINK_ENCRYPTION="le",v.REQUEST_KEY_SIGNAL_STRENGTH="ss",v.REQUEST_KEY_STREAM_METADATA_CHANGE="strmetadata",v.REQUEST_PLATFORM_METADATA_KEY_SCHEMA="sch",v.REQUEST_PLATFORM_METADATA_KEY_BROWSER_NAME="br",v.REQUEST_PLATFORM_METADATA_KEY_BROWSER_VERSION="brv",v.REQUEST_PLATFORM_METADATA_KEY_DEVICE_BRAND="dvb",v.REQUEST_PLATFORM_METADATA_KEY_DEVICE_MANUFACTURER="dvma",v.REQUEST_PLATFORM_METADATA_KEY_DEVICE_MODEL="dvm",v.REQUEST_PLATFORM_METADATA_KEY_DEVICE_TYPE="dvt",v.REQUEST_PLATFORM_METADATA_KEY_DEVICE_VERSION="dvv",v.REQUEST_PLATFORM_METADATA_KEY_FRAMEWORK_NAME="fw",v.REQUEST_PLATFORM_METADATA_KEY_FRAMEWORK_VERSION="fwv",v.REQUEST_PLATFORM_METADATA_KEY_CLIENT_CONFIGURATION="cc",v.REQUEST_PLATFORM_METADATA_KEY_MODULE_NAME="mn",v.REQUEST_PLATFORM_METADATA_KEY_MODULE_VERSION="mv",v.REQUEST_PLATFORM_METADATA_KEY_OPERATING_SYSTEM_NAME="os",v.REQUEST_PLATFORM_METADATA_KEY_OPERATING_SYSTEM_VERSION="osv",v.REQUEST_PLATFORM_METADATA_KEY_DEVICE_CATEGORY="cat",v.REQUEST_KEY_PROTOCOL_CAPP="caps",v.REQUEST_EVENT_KEY_TYPE="t",v.REQUEST_EVENT_KEY_SEQUENCE_NUMBER="seq",v.REQUEST_EVENT_KEY_SESSION_TIME="st",v.REQUEST_EVENT_KEY_SEEK_ACT_TYPE="act",v.REQUEST_EVENT_KEY_SEEK_TO_POS="skto",v.REQUEST_ERROR_EVENT_KEY_MESSAGE="err",v.REQUEST_ERROR_EVENT_KEY_FATAL="ft",v.REQUEST_STATE_CHANGE_EVENT_KEY_NEW="new",v.REQUEST_STATE_CHANGE_EVENT_KEY_OLD="old",v.REQUEST_CUSTOM_EVENT_KEY_NAME="name",v.REQUEST_CUSTOM_EVENT_KEY_ATTRIBUTES="attr",v.REQUEST_HEARTBEAT_INFO_KEY_SEQUENCE_NUMBER="seq",v.REQUEST_HEARTBEAT_INFO_KEY_STATUS="err",v.REQUEST_HEARTBEAT_INFO_KEY_ROUNDTRIP_TIME="rtt",v.REQUEST_KEY_IS_AD_SESSION="ad",v.convertPlayerState=function(e){switch(e){case s.PlayerState.STOPPED:return v.eStopped;case s.PlayerState.PLAYING:return v.ePlaying;case s.PlayerState.BUFFERING:return v.eBuffering;case s.PlayerState.PAUSED:return v.ePaused;case s.PlayerState.NOT_MONITORED:return v.eNotMonitored;default:return v.eUnknown}},v.eStopped=1,v.ePlaying=3,v.eBuffering=6,v.ePaused=12,v.eNotMonitored=98,v.eUnknown=100,v.SessionFlags={GLOBAL:0,VIDEO:1,QUALITY_METRICS:2,BITRATE_METRICS:4},v.Capabilities={INSIGHTS:0};var m=(t.JSONInterface=function(){this.encode=function(e){},this.decode=function(e){}},t.LibJSONInterface=function(){this.encode=function(e){var t=null;try{t=f.stringify(e)}catch(e){}return t},this.decode=function(e){var t=null;try{t=g(e)}catch(e){}return P.isObject(t)||(t=null),t}}),y=t.CwsHeartbeat=function(){function e(){}this._data={},e.apply(this,arguments),this.get=function(){return this._data},this.setField=function(e,t){this._data[e]=t},this.setInnerField=function(e,t,n){this._data[e]||(this._data[e]={}),this._data[e][t]=n},this.setMessageType=function(e){this.setField(v.REQUEST_KEY_MESSAGE_TYPE,e)},this.setSessionTime=function(e){this.setField(v.REQUEST_KEY_SESSION_TIME,e)},this.setSessionStartTime=function(e){this.setField(v.REQUEST_KEY_SESSION_START_TIME,e)},this.setIsLive=function(e){this.setField(v.REQUEST_KEY_IS_LIVE,e)},this.setSequenceNumber=function(e){this.setField(v.REQUEST_KEY_SEQUENCE_NUMBER,e)},this.setCustomerKey=function(e){this.setField(v.REQUEST_KEY_CUSTOMER_KEY,e)},this.setClientId=function(e){this.setField(v.REQUEST_KEY_CLIENT_ID,e)},this.setClientVersion=function(e){this.setField(v.REQUEST_KEY_CLIENT_VERSION,e)},this.setProtocolVersion=function(e){this.setField(v.REQUEST_KEY_PROTOCOL_VERSION,e)},this.setCapfield=function(e){this.setField(v.REQUEST_KEY_PROTOCOL_CAPP,e)},this.setSessionId=function(e){this.setField(v.REQUEST_KEY_SESSION_ID,e)},this.setInstanceId=function(e){this.setField(v.REQUEST_KEY_INSTANCE_ID,e)},this.setViewerId=function(e){this.setField(v.REQUEST_KEY_VIEWER_ID,e)},this.setAssetName=function(e){this.setField(v.REQUEST_KEY_ASSET_NAME,e)},this.setPlayerName=function(e){this.setField(v.REQUEST_KEY_PLAYER_NAME,e)},this.setTags=function(e){this.setField(v.REQUEST_KEY_TAGS,e)},this.setSessionFlags=function(e){this.setField(v.REQUEST_KEY_SESSION_FLAGS,e)},this.setCapabilities=function(e){this.setField(v.REQUEST_KEY_CAPABILITIES,e)},this.setEvents=function(e){this.setField(v.REQUEST_KEY_EVENTS,e)},this.setIsSdkClient=function(e){this.setField(v.REQUEST_KEY_IS_SDK_CLIENT,e)},this.setLogs=function(e){this.setField(v.REQUEST_KEY_LOGS,e)},this.setHeartbeatInfos=function(e){this.setField(v.REQUEST_KEY_HEARTBEAT_INFOS,e)},this.setPlayerState=function(e){this.setField(v.REQUEST_KEY_PLAYER_STATE,e)},this.setPauseJoin=function(e){this.setField(v.REQUEST_KEY_PAUSE_JOIN,e)},this.setContentLength=function(e){this.setField(v.REQUEST_KEY_CONTENT_LENGTH,e)},this.setBitrate=function(e){this.setField(v.REQUEST_KEY_BITRATE,e)},this.setResource=function(e){this.setField(v.REQUEST_KEY_RESOURCE,e)},this.setEncodedFrameRate=function(e){this.setField(v.REQUEST_KEY_ENCODED_FRAME_RATE,e)},this.setAverageFrameRate=function(e){this.setField(v.REQUEST_KEY_AVERAGE_FRAME_RATE,e)},this.setRfpsObservationCount=function(e){this.setField(v.REQUEST_KEY_RFPS_COUNT,e)},this.setRfpsTotal=function(e){this.setField(v.REQUEST_KEY_RFPS_TOTAL,e)},this.setPlatformMetadataSchema=function(e){this.setInnerField(v.REQUEST_KEY_PLATFORM_METADATA,v.REQUEST_PLATFORM_METADATA_KEY_SCHEMA,e)},this.setBrowserName=function(e){this.setInnerField(v.REQUEST_KEY_PLATFORM_METADATA,v.REQUEST_PLATFORM_METADATA_KEY_BROWSER_NAME,e)},this.setBrowserVersion=function(e){this.setInnerField(v.REQUEST_KEY_PLATFORM_METADATA,v.REQUEST_PLATFORM_METADATA_KEY_BROWSER_VERSION,e)},this.setDeviceBrand=function(e){this.setInnerField(v.REQUEST_KEY_PLATFORM_METADATA,v.REQUEST_PLATFORM_METADATA_KEY_DEVICE_BRAND,e)},this.setDeviceManufacturer=function(e){this.setInnerField(v.REQUEST_KEY_PLATFORM_METADATA,v.REQUEST_PLATFORM_METADATA_KEY_DEVICE_MANUFACTURER,e)},this.setDeviceModel=function(e){this.setInnerField(v.REQUEST_KEY_PLATFORM_METADATA,v.REQUEST_PLATFORM_METADATA_KEY_DEVICE_MODEL,e)},this.setDeviceType=function(e){this.setInnerField(v.REQUEST_KEY_PLATFORM_METADATA,v.REQUEST_PLATFORM_METADATA_KEY_DEVICE_TYPE,e)},this.setDeviceVersion=function(e){this.setInnerField(v.REQUEST_KEY_PLATFORM_METADATA,v.REQUEST_PLATFORM_METADATA_KEY_DEVICE_VERSION,e)},this.setFrameworkName=function(e){this.setInnerField(v.REQUEST_KEY_PLATFORM_METADATA,v.REQUEST_PLATFORM_METADATA_KEY_FRAMEWORK_NAME,e),this.setField(v.REQUEST_PLATFORM_METADATA_KEY_FRAMEWORK_NAME,e)},this.setFrameworkVersion=function(e){this.setInnerField(v.REQUEST_KEY_PLATFORM_METADATA,v.REQUEST_PLATFORM_METADATA_KEY_FRAMEWORK_VERSION,e),this.setField(v.REQUEST_PLATFORM_METADATA_KEY_FRAMEWORK_VERSION,e)},this.setOperatingSystemName=function(e){this.setInnerField(v.REQUEST_KEY_PLATFORM_METADATA,v.REQUEST_PLATFORM_METADATA_KEY_OPERATING_SYSTEM_NAME,e.toUpperCase())},this.setOperatingSystemVersion=function(e){this.setInnerField(v.REQUEST_KEY_PLATFORM_METADATA,v.REQUEST_PLATFORM_METADATA_KEY_OPERATING_SYSTEM_VERSION,e)},this.setDeviceCategory=function(e){this.setInnerField(v.REQUEST_KEY_PLATFORM_METADATA,v.REQUEST_PLATFORM_METADATA_KEY_DEVICE_CATEGORY,e)},this.setPlayheadTime=function(e){this.setField(v.REQUEST_KEY_PLAYHEAD_TIME,e)},this.setBufferLength=function(e){this.setField(v.REQUEST_KEY_BUFFER_LENGTH,e)},this.setStreamUrl=function(e){this.setField(v.REQUEST_KEY_STREAM_URL,e)},this.setStreamWidth=function(e){this.setField(v.REQUEST_KEY_VIDEO_WIDTH,e)},this.setStreamHeight=function(e){this.setField(v.REQUEST_KEY_VIDEO_HEIGHT,e)},this.setConnectionType=function(e){this.setField(v.REQUEST_KEY_CONNECTION_TYPE,e)},this.setLinkEncryption=function(e){this.setField(v.REQUEST_KEY_LINK_ENCRYPTION,e)},this.setIsAdSession=function(){this.setField(v.REQUEST_KEY_IS_AD_SESSION,!0)},this.setSignalStrength=function(e){this.setField(v.REQUEST_KEY_SIGNAL_STRENGTH,e)},this.setModuleName=function(e){this.setInnerField(v.REQUEST_PLATFORM_METADATA_KEY_CLIENT_CONFIGURATION,v.REQUEST_PLATFORM_METADATA_KEY_MODULE_NAME,e)},this.setModuleVersion=function(e){this.setInnerField(v.REQUEST_PLATFORM_METADATA_KEY_CLIENT_CONFIGURATION,v.REQUEST_PLATFORM_METADATA_KEY_MODULE_VERSION,e)}},S=t.CwsSession=function(e,t,i,r,a,o,l,c,u,d,h){function p(e,t,n,i,r,a,o,s,l,c,u){this._eventQueue=e,this._client=t,this._clientSettings=n,this._logger=i,this._logger.setModuleName("CwsSession"),this._exceptionCatcher=r,this._timer=a,this._gatewayControl=o,this._cwsProtocol=s,this._time=l,this._logBuffer=c,this._clientConfig=u}var _=this;_._heartbeatTimerCancel=null,_._startTimeMs=0,_._heartbeatSequenceNumber=0,_._sessionFlags=v.SessionFlags.GLOBAL,_._capabilities=v.Capabilities.INSIGHTS,_._heartbeatInfos=[],_._lastRequestSentMs=-1,_._bitrateKbps=-2,_._resource=null,_._playerState=s.PlayerState.NOT_MONITORED,_._encodedFrameRate=-1,_._contentLengthSec=-1,_._streamUrl=null,_._width=-1,_._height=-1,_._playerStateManager=null,_._assetName=null,_._viewerId=null,_._playerName=null,_._isLive=null,_._tags={},_._browserName=null,_._browserVersion=null,_._deviceBrand=null,_._deviceManufacturer=null,_._deviceModel=null,_._deviceType=null,_._deviceVersion=null,_._frameworkName=null,_._frameworkVersion=null,_._operatingSystemName=null,_._operatingSystemVersion=null,_._deviceCategory=null,_._moduleName=null,_._moduleVersion=null,_._connectionType=null,_._linkEncryption=null,_._pauseJoin=!1,_._hasJoined=!1,_._cleanedUp=!1,_._willEndSoon=!1,_._rfpsTimerCancel=null,_._rfpsTimerInterval=1e3,_._playingFpsObservationCount=0,_._playingFpsTotal=0,p.apply(this,arguments),this.cleanup=function(){this._clientConfig=null,this._logBuffer=null,this._systemSettings=null,this._time=null,this._cwsProtocol=null,this._gatewayControl=null,this._timer=null,this._exceptionCatcher=null,this._logger=null,this._clientSettings=null,this._client=null,this._eventQueue.flush(),this._eventQueue=null,this._cleanedUp=!0},this.start=function(e){this._session=e,this._global=this._session._global,this._logger.setSessionId(this._session._id),this._startTimeMs=this._time.current(),(this.isVideoSession()||this.isAdSession())&&(this._sessionFlags+=S.DEFAULT_VIDEO_SESSION_FLAGS)},this.willEndSoon=function(){this._willEndSoon=!0},this.initialize=function(){this._logger.debug("initialize()")},this.end=function(){(this.isVideoSession()||this.isAdSession())&&(this._logger.debug("end(): schedule the last hb before session cleanup"+_.sessionTypeTag()),this.enqueueSessionEndEvent()),this.cancelHeartbeatTimer(),this.sendHeartbeat()},this.startSendingHeartbeats=function(){this._willEndSoon||(this.sendHeartbeat(),this.resetHeartbeatTimer())},this.setBrowserName=function(e){_._logger.debug("setBrowserName(): "+e);var t=_._browserName;t!==e&&null!=e&&(_._logger.debug("Change browserName from "+t+" to "+e),_._browserName=e)},this.setBrowserVersion=function(e){_._logger.debug("setBrowserVersion(): "+e);var t=_._browserVersion;t!==e&&null!=e&&(_._logger.debug("Change browserVersion from "+t+" to "+e),_._browserVersion=e)},this.setDeviceBrand=function(e){_._logger.debug("setDeviceBrand(): "+e);var t=_._deviceBrand;t!==e&&null!=e&&(_._logger.debug("Change deviceBrand from "+t+" to "+e),_._deviceBrand=e)},this.setDeviceManufacturer=function(e){_._logger.debug("setDeviceManufacturer(): "+e);var t=_._deviceManufacturer;t!==e&&null!=e&&(_._logger.debug("Change deviceManufacturer from "+t+" to "+e),_._deviceManufacturer=e)},this.setDeviceModel=function(e){_._logger.debug("setDeviceModel(): "+e);var t=_._deviceModel;t!==e&&null!=e&&(_._logger.debug("Change deviceModel from "+t+" to "+e),_._deviceModel=e)},this.setDeviceType=function(e){_._logger.debug("setDeviceBrand(): "+e);var t=_._deviceType;t!==e&&null!=e&&(_._logger.debug("Change deviceType from "+t+" to "+e),_._deviceType=e)},this.setDeviceVersion=function(e){_._logger.debug("setDeviceVersion(): "+e);var t=_._deviceVersion;t!==e&&null!=e&&(_._logger.debug("Change deviceVersion from "+t+" to "+e),_._deviceVersion=e)},this.setOperatingSystemName=function(e){_._logger.debug("setOperatingSystemName(): "+e);var t=_._operatingSystemName;t!==e&&null!=e&&(_._logger.debug("Change operatingSystemName from "+t+" to "+e),_._operatingSystemName=e)},this.setOperatingSystemVersion=function(e){_._logger.debug("setOperatingSystemVersion(): "+e);var t=_._operatingSystemVersion;t!==e&&null!=e&&(_._logger.debug("Change operatingSystemVersion from "+t+" to "+e),_._operatingSystemVersion=e)},this.setDeviceCategory=function(e){_._logger.debug("setDeviceCategory(): "+e);var t=_._deviceCategory;t!==e&&null!=e&&(_._logger.debug("Change operatingSystemVersion from "+t+" to "+e),_._deviceCategory=e)},this.getFrameworkName=function(){return _._frameworkName},this.setFrameworkName=function(e){_._logger.debug("setFrameworkName(): "+e);var t=_._frameworkName;t!==e&&null!=e&&(_._logger.debug("Change frameworkName from "+t+" to "+e),_._frameworkName=e)},this.getFrameworkVersion=function(){return _._frameworkVersion},this.setFrameworkVersion=function(e){_._logger.debug("setFrameworkVersion(): "+e);var t=_._frameworkVersion;t!==e&&null!=e&&(_._logger.debug("Change frameworkVersion from "+t+" to "+e),_._frameworkVersion=e)},this.setStreamUrl=function(e){_._logger.debug("setStreamUrl(): "+e);var t=_._streamUrl;t!==e&&null!=e&&(_._logger.debug("Change stream url from "+t+" to "+e),_._streamUrl=e)},this.setBitrateKbps=function(e){_._logger.debug("setBitrateKbps(): "+e);var t=_._bitrateKbps;t!==e&&e>0&&(_._logger.info("Change bitrate from "+t+" to "+e),_.enqueueBitrateChangeEvent(t,e),_._bitrateKbps=e)},this.setResource=function(e){_._logger.debug("setResource(): "+e);var t=_._resource;t!==e&&null!=e&&(_._logger.info("Change resource from "+t+" to "+e),_._resource=e)},this.setAssetName=function(e){_._logger.debug("setAssetName(): "+e),_._assetName!==e&&null!=e&&(_._logger.info("Change assetName from "+_._assetName+" to "+e),_._assetName=e)},this.setIsLive=function(e){_._logger.debug("setIsLive(): "+e);var t=_._isLive;t!==e&&null!=e&&(_._logger.info("Change isLive from "+t+" to "+e),_._isLive=e)},this.setViewerId=function(e){_._logger.debug("setViewerId(): "+e);var t=_._viewerId;t!==e&&null!=e&&(_._logger.info("Change viewerId from "+t+" to "+e),_._viewerId=e)},this.setPlayerName=function(e){_._logger.debug("setPlayerName(): "+e);var t=_._playerName;t!==e&&null!=e&&(_._logger.info("Change playerName from "+t+" to "+e),_._playerName=e)},this.setTags=function(e){_._logger.debug("setTags()");var t=_._tags;P.ObjectShallowEquals(t,e)||null==e||(_._logger.info("Change tags from "+P.ObjectToString(t)+" to "+P.ObjectToString(e)),_._tags=e)},this.setEncodedFrameRate=function(e){_._logger.debug("setEncodedFrameRate(): "+e),_._encodedFrameRate=e},this.setContentLength=function(e){_._logger.debug("setContentLength(): "+e),_._contentLengthSec=e},this.setPlayerState=function(e){if(_._logger.debug("setPlayerState(): "+e),_._hasJoined||e!=s.PlayerState.PLAYING||(_.togglePauseJoin(!1),_._hasJoined=!0),_._playerState!==e){var t=_._playerState;_._logger.info("setPlayerState(): changing player state from "+t+" to "+e),_.enqueuePlayerStateChangeEvent(t,e),_._playerState=e}},this.setStreamResolutionWidth=function(e){_._logger.debug("setStreamResolutionWidth(): "+e);var t=_._width;t!==e&&e>0&&(_._logger.debug("Change stream resolution width from "+t+" to "+e),_.enqueueResolutionWidthChangeEvent(t,e),_._width=e)},this.setStreamResolutionHeight=function(e){_._logger.debug("setStreamResolutionHeight(): "+e);var t=_._height;t!==e&&e>0&&(_._logger.debug("Change stream resolution height from "+t+" to "+e),_.enqueueResolutionHeightChangeEvent(t,e),_._height=e)},this.setConnectionType=function(e){_._logger.debug("setConnectionType(): "+e);var t=_._connectionType;t!==e&&null!=e&&(_._logger.debug("Change network connection type from "+t+" to "+e),_.enqueueConnectionTypeChangeEvent(t,e),_._connectionType=e)},this.setLinkEncryption=function(e){_._logger.debug("setLinkEncryption(): "+e);var t=_._linkEncryption;t!==e&&null!=e&&(_._logger.debug("Change network link encryption from "+t+" to "+e),_.enqueueLinkEncryptionChangeEvent(t,e),_._linkEncryption=e)},this.togglePauseJoin=function(e){if(_._logger.debug("togglePauseJoin()"),_._pauseJoin!==e){var t=_._pauseJoin,n=!_._pauseJoin;_.enqueuePauseJoinChangeEvent(t,n),_._pauseJoin=!_._pauseJoin}else _._logger.debug("togglePauseJoin(): same value, ignoring")},this.sendError=function(e,t){_.enqueueErrorEvent(e,t)},this.enqueueEvent=function(e,t){if(t[v.REQUEST_EVENT_KEY_TYPE]=e,t[v.REQUEST_EVENT_KEY_SESSION_TIME]=this.getSessionTime(),t[v.REQUEST_EVENT_KEY_SEQUENCE_NUMBER]=this._eventQueue.getNumber(),this._playerStateManager){var n=O.Integer(this._playerStateManager.getPHT(),0,null,-1),i=O.Integer(this._playerStateManager.getBufferLength(),0,null,-1);n>=0&&(t[v.REQUEST_KEY_PLAYHEAD_TIME]=n),i>0&&(t[v.REQUEST_KEY_BUFFER_LENGTH]=i)}this._eventQueue.enqueue(t)},this.setPlayerStateManager=function(e){_._playerStateManager=e,null!=_._playerStateManager?_.startRfpsTimer():_.cancelRfpsTimer()},this.enqueueSessionEndEvent=function(){var e=this.getSessionTime(),t=this.getNextEventNumber(),n=this._cwsProtocol.generateSessionEndEvent(t,e);this._eventQueue.enqueue(n)},this.enqueueErrorEvent=function(e,t){var n={};n[v.REQUEST_ERROR_EVENT_KEY_MESSAGE]=e,n[v.REQUEST_ERROR_EVENT_KEY_FATAL]=t,this.enqueueEvent(v.EVENT_TYPE_ERROR,n)},this.enqueueBitrateChangeEvent=function(e,t){var n={},i={};e>0&&(i[v.REQUEST_KEY_BITRATE]=e),n[v.REQUEST_KEY_BITRATE]=t,this.declareStateChange(n,i)},this.enqueueSeekEvent=function(e,t){var n={};n[v.REQUEST_EVENT_KEY_SEEK_ACT_TYPE]=e,t>=0&&(n[v.REQUEST_EVENT_KEY_SEEK_TO_POS]=t),this.enqueueEvent(v.EVENT_TYPE_SEEK,n)},this.enqueueResolutionWidthChangeEvent=function(e,t){var n={},i={};-1!==e&&(i[v.REQUEST_KEY_VIDEO_WIDTH]=e),n[v.REQUEST_KEY_VIDEO_WIDTH]=t,this.declareStateChange(n,i)},this.enqueueResolutionHeightChangeEvent=function(e,t){var n={},i={};-1!==e&&(i[v.REQUEST_KEY_VIDEO_HEIGHT]=e),n[v.REQUEST_KEY_VIDEO_HEIGHT]=t,this.declareStateChange(n,i)},this.enqueueConnectionTypeChangeEvent=function(e,t){var n={},i={};null!==e&&(i[v.REQUEST_KEY_CONNECTION_TYPE]=e),n[v.REQUEST_KEY_CONNECTION_TYPE]=t,this.declareStateChange(n,i)},this.enqueueLinkEncryptionChangeEvent=function(e,t){var n={},i={};null!==e&&(i[v.REQUEST_KEY_LINK_ENCRYPTION]=e),n[v.REQUEST_KEY_LINK_ENCRYPTION]=t,this.declareStateChange(n,i)},this.enqueuePauseJoinChangeEvent=function(e,t){var n={},i={};i[v.REQUEST_KEY_PAUSE_JOIN]=e,n[v.REQUEST_KEY_PAUSE_JOIN]=t,this.declareStateChange(n,i)},this.enqueuePlayerStateChangeEvent=function(e,t){var n={},i={};n[v.REQUEST_KEY_PLAYER_STATE]=v.convertPlayerState(t),i[v.REQUEST_KEY_PLAYER_STATE]=v.convertPlayerState(e),this.declareStateChange(n,i)},this.declareStateChange=function(e,t){var n={};n[v.REQUEST_STATE_CHANGE_EVENT_KEY_NEW]=e,null!=t&&P.dictCount(t)>0&&(n[v.REQUEST_STATE_CHANGE_EVENT_KEY_OLD]=t),this.enqueueEvent(v.EVENT_TYPE_STATE_CHANGE,n)},this.enqueueCustomEvent=function(e,t){var n={};n[v.REQUEST_CUSTOM_EVENT_KEY_NAME]=e,n[v.REQUEST_CUSTOM_EVENT_KEY_ATTRIBUTES]=t,this.enqueueEvent(v.EVENT_TYPE_CUSTOM,n)},this.cancelHeartbeatTimer=function(){null!=_._heartbeatTimerCancel&&(_._heartbeatTimerCancel(),_._heartbeatTimerCancel=null)},this.resetHeartbeatTimer=function(){_.cancelHeartbeatTimer();var e=1e3*_._clientSettings.heartbeatInterval;_._heartbeatTimerCancel=_._timer.create(_.sendHeartbeat,e,"Session.sendHeartbeat")},this.cancelRfpsTimer=function(){null!=_._rfpsTimerCancel&&(_._rfpsTimerCancel(),_._rfpsTimerCancel=null)},this.startRfpsTimer=function(){_.cancelRfpsTimer(),_._rfpsTimerCancel=_._timer.create(_.countRfps,_._rfpsTimerInterval,"Session.startRfpsTimer")},this.createHeartbeatInfo=function(){var e={err:"pending"};e.seq=_._heartbeatSequenceNumber-1,e.sentAt=_.getSessionTime(),e.rtt=-1,_._heartbeatInfos.push(e)},this.updateHeartbeatInfoOnFailure=function(e,t){for(var n=0;n<_._heartbeatInfos.length;n++){var i=_._heartbeatInfos[n];i.seq===e&&(i.rtt=_.getSessionTime()-i.sentAt,i.err=t)}},this.updateHeartbeatInfoOnSuccess=function(e){for(var t=0;t<_._heartbeatInfos.length;t++){var n=_._heartbeatInfos[t];n.seq===e&&(n.rtt=_.getSessionTime()-n.sentAt,n.err="ok")}},this.removeOutdatedHeartbeatInfos=function(){for(var e=_._clientConfig.get(w.CONFIG_KEY_MAX_HEARTBEAT_INFOS),t=[],n=0;n<_._heartbeatInfos.length;n++)_._heartbeatInfos[n].seq<_._heartbeatSequenceNumber-e&&t.push(n);for(var i=[],r=0;r<_._heartbeatInfos.length;r++)_._heartbeatInfos[r].seq,t.indexOf(r)<0&&i.push(_._heartbeatInfos[r]);_._heartbeatInfos=i},this.compileHeartbeatInfos=function(){_.removeOutdatedHeartbeatInfos();for(var e=[],t=0;t<_._heartbeatInfos.length;t++){var n=_._heartbeatInfos[t],i={};i[v.REQUEST_HEARTBEAT_INFO_KEY_SEQUENCE_NUMBER]=n.seq,i[v.REQUEST_HEARTBEAT_INFO_KEY_ROUNDTRIP_TIME]=n.rtt,i[v.REQUEST_HEARTBEAT_INFO_KEY_STATUS]=n.err,e.push(i)}return e},this.makeHeartbeat=function(){var e=_._eventQueue.flush();if(_.isGlobalSession()&&0===e.length)return null;var t=new y;if(t.setMessageType(v.MESSAGE_TYPE_SESSION_HEARTBEAT),t.setCustomerKey(_._clientSettings.customerKey),t.setClientId(_._clientConfig.get(w.CONFIG_KEY_CLIENT_ID)),t.setSessionId(_._session._id),t.setSequenceNumber(_._heartbeatSequenceNumber),t.setProtocolVersion(v.version),t.setClientVersion(n.version),t.setInstanceId(_._client.getId()),t.setCapfield(0),null!=_._connectionType&&t.setConnectionType(_._connectionType),null!=_._linkEncryption&&t.setLinkEncryption(_._linkEncryption),t.setPlatformMetadataSchema(v.SDK_METADATA_SCHEMA),null!=_._browserName&&t.setBrowserName(_._browserName),null!=_._browserVersion&&t.setBrowserVersion(_._browserVersion),null!=_._deviceBrand&&t.setDeviceBrand(_._deviceBrand),null!=_._deviceManufacturer&&t.setDeviceManufacturer(_._deviceManufacturer),null!=_._deviceModel&&t.setDeviceModel(_._deviceModel),null!=_._deviceType&&t.setDeviceType(_._deviceType),null!=_._deviceVersion&&t.setDeviceVersion(_._deviceVersion),null!=_._frameworkName&&t.setFrameworkName(_._frameworkName),null!=_._frameworkVersion&&t.setFrameworkVersion(_._frameworkVersion),null!=_._operatingSystemName&&t.setOperatingSystemName(_._operatingSystemName),null!=_._operatingSystemVersion&&t.setOperatingSystemVersion(_._operatingSystemVersion),null!=_._deviceCategory&&t.setDeviceCategory(_._deviceCategory),null!=_._playerStateManager&&(_._moduleName=_._playerStateManager.getModuleName(),null!=_._moduleName&&t.setModuleName(_._moduleName)),null!=_._playerStateManager&&(_._moduleVersion=_._playerStateManager.getModuleVersion(),null!=_._moduleVersion&&t.setModuleVersion(_._moduleVersion)),null!=_._viewerId&&t.setViewerId(_._viewerId),P.dictCount(_._tags)>0&&t.setTags(_._tags),_.isVideoSession()||_.isAdSession()){_.isAdSession()&&t.setIsAdSession(),null!=_._assetName&&t.setAssetName(_._assetName),t.setSessionFlags(_._sessionFlags);var i,r,a,o=v.convertPlayerState(_._playerState);t.setPlayerState(o),t.setPauseJoin(_._pauseJoin),null!=_._playerName&&t.setPlayerName(_._playerName),null!=_._isLive&&t.setIsLive(_._isLive),_._contentLengthSec>0&&t.setContentLength(_._contentLengthSec),_._bitrateKbps>0&&t.setBitrate(_._bitrateKbps),null!==_._resource&&t.setResource(_._resource),_._encodedFrameRate>0&&t.setEncodedFrameRate(_._encodedFrameRate),null!=_._playerStateManager&&(i=O.Integer(_._playerStateManager.getPHT(),0,null,-1),r=O.Integer(_._playerStateManager.getBufferLength(),0,null,-1),a=_._playerStateManager.getSignalStrength()),i>=0&&t.setPlayheadTime(i),r>0&&t.setBufferLength(r);var s=_.updateAverageFrameRate();s>0&&t.setAverageFrameRate(s),_._playingFpsTotal>0&&t.setRfpsTotal(O.Integer(_._playingFpsTotal,0,null,-1)),_._playingFpsObservationCount>0&&t.setRfpsObservationCount(O.Integer(_._playingFpsObservationCount,0,null,-1)),0>=a&&t.setSignalStrength(a),null!=_._streamUrl&&t.setStreamUrl(_._streamUrl),_._width>0&&t.setStreamWidth(_._width),_._height>0&&t.setStreamHeight(_._height)}else t.setSessionFlags(v.SessionFlags.GLOBAL);if(e.length>0&&t.setEvents(e),t.setCapabilities(_._capabilities),t.setIsSdkClient(!0),_._clientConfig.get(w.CONFIG_KEY_SEND_LOGS)&&t.setLogs(_._logBuffer.flush()),_._clientConfig.get(w.CONFIG_KEY_MAX_HEARTBEAT_INFOS)>0){var l=_.compileHeartbeatInfos();l.length>0&&t.setHeartbeatInfos(l)}return t.setSessionStartTime(_._startTimeMs),t.setSessionTime(_.getSessionTime()),_._heartbeatSequenceNumber++,t.get()},this.sendHeartbeat=function(){if(!_._cleanedUp){var e=_.makeHeartbeat();null!=e&&_.postHeartbeat(e)}},this.countRfps=function(){if(_._playerState===s.PlayerState.PLAYING){var e=_._playerStateManager.getRenderedFrameRate();e>=0&&(_._playingFpsTotal+=e,_._playingFpsObservationCount++)}},this.updateAverageFrameRate=function(){if(_._playerState===s.PlayerState.PLAYING){var e=_._playerStateManager.getRenderedFrameRate();return e>=0?(_._playingFpsTotal+=e,_._playingFpsObservationCount++,P.Int32.Cast(1*_._playingFpsTotal/_._playingFpsObservationCount)):-1}return-1},this.postHeartbeat=function(e){_.createHeartbeatInfo();var t=_._heartbeatSequenceNumber-1;_._logger.info("postHeartbeat(): Send HB["+t+"]"+_.sessionTypeTag());_._gatewayControl.send(e,(function(e,n){_.onHeartbeatResponse(e,n,t)}))},this.onHeartbeatResponse=function(e,t,n){_._cleanedUp||_._exceptionCatcher.runProtected("onHeartbeatResponse",(function(){if(e){var i=t;if(null!=i){_._logger.debug("onHeartbeatResponse(): received valid response for HB["+n+"]"),_.updateHeartbeatInfoOnSuccess(n);var r=i[v.RESPONSE_KEY_CLIENT_ID];null!=r&&r!=_._clientConfig.get(w.CONFIG_KEY_CLIENT_ID)&&(_._logger.debug("onHeartbeatResponse(): setting the client id to "+r+" (from gateway)"),_._clientConfig.set(w.CONFIG_KEY_CLIENT_ID,r),_._clientConfig.save());var a=i[v.RESPONSE_KEY_STATUS];null!=a&&a!=v.RESPONSE_STATUS_NO_ERRORS&&_._logger.error("onHeartbeatResponse(): error from gateway: "+a);var o=i[v.RESPONSE_KEY_CONFIG];if("object"==typeof o){var s=o[v.RESPONSE_CONFIG_KEY_MAX_HEARTBEAT_INFOS];null!=s&&_._clientConfig.get(w.CONFIG_KEY_MAX_HEARTBEAT_INFOS)!==s&&(_._logger.debug("onHeartbeatResponse(): setting Maximum Heartbeat Infos to "+s+" (from gateway)"),_._clientConfig.set(w.CONFIG_KEY_MAX_HEARTBEAT_INFOS,s));var l=o[v.RESPONSE_CONFIG_KEY_SEND_LOGS],c=null!=l&&P.AsBoolean(l);c!==_._clientConfig.get(w.CONFIG_KEY_SEND_LOGS)&&(_._logger.debug("onHeartbeatResponse(): turning "+(c?"on":"off")+" sending of logs"),_._clientConfig.set(w.CONFIG_KEY_SEND_LOGS,c));var u=o[v.RESPONSE_CONFIG_KEY_HEARTBEAT_INTERVAL];if(null!=u){var d=P.Int32.Cast(u);d!=_._clientSettings.heartbeatInterval&&(_._logger.debug("onHeartbeatResponse(): received hbIntervalMs from gateway: "+d),_._clientSettings.heartbeatInterval=d,null!=_._heartbeatTimerCancel&&_.resetHeartbeatTimer())}var h=o[v.RESPONSE_CONFIG_KEY_GATEWAY_URL];null!=h&&h!=_._clientSettings.gatewayUrl&&(_._logger.debug("onHeartbeatResponse(): received gatewayUrl from gateway: "+h),_._clientSettings.gatewayUrl=h)}}else _._logger.warning("onHeartbeatResponse(): decoded heartbeat response is null.")}else{var p=t;P.isValidString(p)?P.stringStartsWith(p,"HTTP timeout")?_._logger.warning("onHeartbeatResponse(): "+p):_._logger.error("onHeartbeatResponse(): failed to send heartbeat: "+p):(p=E.DEFAULT_HEARTBEAT_ERROR_MESSAGE,_._logger.error("onHeartbeatResponse(): "+p)),_.updateHeartbeatInfoOnFailure(n,p)}}))},this.getSessionTime=function(){return P.Int32.Cast(_._time.current()-_._startTimeMs)},this.getNextEventNumber=function(){return this._eventQueue.getNumber()},this.sessionTypeTag=function(){return this.isGlobalSession()?" (global session)":""},this.isGlobalSession=function(){return this._global==S.SESSION_TYPE.GLOBAL},this.isVideoSession=function(){return this._global==S.SESSION_TYPE.VIDEO},this.isAdSession=function(){return this._global==S.SESSION_TYPE.AD}};S.DEFAULT_VIDEO_SESSION_FLAGS=v.SessionFlags.VIDEO+v.SessionFlags.QUALITY_METRICS+v.SessionFlags.BITRATE_METRICS,S.SESSION_TYPE={VIDEO:"Video",GLOBAL:"Global",AD:"Ad"};var E=(t.IMonitor=function(){this.onPlayerStateChange=function(e){},this.onBitrateChange=function(e){},this.onSeekEvent=function(e,t){},this.onEncodedFrameRateChange=function(e){},this.onRenderedFrameRateChange=function(e){},this.onContentLengthChange=function(e){},this.onPlayheadTimeChange=function(e){},this.onStreamUrlChange=function(e){},this.onBufferLengthChange=function(e){},this.onPlayerTypeChange=function(e){},this.onPlayerVersionChange=function(e){},this.onStreamResolutionWidthChange=function(e){},this.onStreamResolutionHeightChange=function(e){},this.onConnectionTypeChange=function(e){},this.onLinkEncryptionChange=function(e){},this.onSignalStrengthChange=function(e){},this.onError=function(e,t){},this.onRelease=function(){}},t.Session=function(){function t(e,t,n,i,r,a,o,s){this._id=e,this._global=t,this._contentMetadata=n,this._clientConfig=i,this._systemMetadata=r,this._cwsSession=a,this._exceptionCatcher=o,this._logger=s,this._logger.setModuleName("Session"),this._logger.setSessionId(P.ToString(this._id))}var n=this;n._contentMetadata=null,n._playerStateManager=null,n._id=0,n._global=S.SESSION_TYPE.VIDEO,n._cleaningUp=!1,n._cleanedUp=!1,n._adPlaying=!1,n._adStream=null,n._adPlayer=null,n._adPosition=null,n._ignorePlayerState=!1,n._pooledPlayerState=s.PlayerState.NOT_MONITORED,n._ignoreBitrateAndResource=!1,n._ignorePlayheadTimeandBufferLength=!1,n._ignoreEncodedFrameRateAndDuration=!1,n._ignoreError=!1,t.apply(n,arguments),this.start=function(){if(n.isVideoSession()||n.isAdSession()?n._logger.info("start(): assetName="+n._contentMetadata.assetName):n._logger.info("start()"+n.sessionTypeTag()),n._cwsSession.start(this),n._clientConfig.isReady())n.initiateSession();else{n._clientConfig.register((function(){n.initiateSession()}))}},this.cleanup=function(){if(n._logger.info("cleanup()"+n.sessionTypeTag()),n._cleaningUp=!0,n._cwsSession.willEndSoon(),n._clientConfig.isReady())n.endCwsSessionAndCleanupAll();else{n._clientConfig.register((function(){n.endCwsSessionAndCleanupAll()}))}},this.cleanupAll=function(){n._logger.debug("cleanupAll()"+n.sessionTypeTag()),(n.isVideoSession()||n.isAdSession())&&null!=n._playerStateManager&&n.detachPlayer(),n._contentMetadata=null,n._logger.setSessionId(null),n._logger=null,n._exceptionCatcher=null,n._client=null,n._clientConfig=null,n._systemMetadata=null,n._cwsSession.cleanup(),n._cwsSession=null,n._cleanedUp=!0},this.endCwsSessionAndCleanupAll=function(){n._cwsSession.end(),n.cleanupAll()},this.initiateSession=function(){n._cwsSession.initialize(),n.setStatesFromSystemMetadata(),(n.isVideoSession()||n.isAdSession())&&(n.setStatesFromContentMetadata(),n.enqueueEventForContentMetadata()),n._cwsSession.startSendingHeartbeats()},this.enqueueEventForContentMetadata=function(){var t={};if(null!=n._contentMetadata.assetName?t[v.REQUEST_KEY_ASSET_NAME]=n._contentMetadata.assetName:n._logger.warning("enqueueEventForContentMetadata(): assetName was not set."),null!=n._contentMetadata.applicationName?(void 0===t[v.REQUEST_KEY_STREAM_METADATA_CHANGE]&&(t[v.REQUEST_KEY_STREAM_METADATA_CHANGE]={}),t[v.REQUEST_KEY_STREAM_METADATA_CHANGE][v.REQUEST_KEY_PLAYER_NAME]=n._contentMetadata.applicationName):n._logger.warning("enqueueEventForContentMetadata(): applicationName was not set."),null!=n._contentMetadata.streamUrl?t[v.REQUEST_KEY_STREAM_URL]=n._contentMetadata.streamUrl:n._logger.warning("enqueueEventForContentMetadata(): streamUrl was not set."),null!=n._contentMetadata.viewerId?(void 0===t[v.REQUEST_KEY_STREAM_METADATA_CHANGE]&&(t[v.REQUEST_KEY_STREAM_METADATA_CHANGE]={}),t[v.REQUEST_KEY_STREAM_METADATA_CHANGE][v.REQUEST_KEY_VIEWER_ID]=n._contentMetadata.viewerId):n._logger.warning("enqueueEventForContentMetadata(): viewerId was not set."),null!=n._contentMetadata.defaultResource?t[v.REQUEST_KEY_RESOURCE]=n._contentMetadata.defaultResource:n._logger.warning("enqueueEventForContentMetadata(): defaultResource was not set."),n._contentMetadata.duration>-1?t[v.REQUEST_KEY_CONTENT_LENGTH]=n._contentMetadata.duration:n._logger.warning("enqueueEventForContentMetadata(): duration was not set."),n._contentMetadata.encodedFrameRate>-1?t[v.REQUEST_KEY_ENCODED_FRAME_RATE]=n._contentMetadata.encodedFrameRate:n._logger.warning("enqueueEventForContentMetadata(): encodedFrameRate was not set."),n._contentMetadata.streamType!=r.StreamType.UNKNOWN?n._contentMetadata.streamType==e.ContentMetadata.StreamType.LIVE?t[v.REQUEST_KEY_IS_LIVE]=!0:t[v.REQUEST_KEY_IS_LIVE]=!1:n._logger.warning("enqueueEventForContentMetadata(): streamType was not set."),P.dictCount(n._contentMetadata.custom)>0)for(var i in t[v.REQUEST_KEY_TAGS]={},n._contentMetadata.custom)t[v.REQUEST_KEY_TAGS][i]=n._contentMetadata.custom[i];else n._logger.warning("enqueueEventForContentMetadata(): custom tags were not set.");P.dictCount(t)>0&&n._cwsSession.declareStateChange(t,null)},this.setStatesFromSystemMetadata=function(){n._logger.debug("setStatesFromSystemMetadata()");var e=n._systemMetadata.get(),t=e[x.BROWSER_NAME];null!=t&&n._cwsSession.setBrowserName(t);var i=e[x.BROWSER_VERSION];null!=i&&n._cwsSession.setBrowserVersion(i);var r=e[x.DEVICE_BRAND];null!=r&&n._cwsSession.setDeviceBrand(r);var a=e[x.DEVICE_MANUFACTURER];null!=a&&n._cwsSession.setDeviceManufacturer(a);var o=e[x.DEVICE_MODEL];null!=o&&n._cwsSession.setDeviceModel(o);var s=e[x.DEVICE_TYPE];null!=s&&n._cwsSession.setDeviceType(s);var l=e[x.DEVICE_VERSION];null!=l&&n._cwsSession.setDeviceVersion(l);var c=e[x.FRAMEWORK_NAME];null!=c&&n._cwsSession.setFrameworkName(c);var u=e[x.FRAMEWORK_VERSION];null!=u&&n._cwsSession.setFrameworkVersion(u);var d=e[x.OPERATING_SYSTEM_NAME];null!=d&&n._cwsSession.setOperatingSystemName(d);var h=e[x.OPERATING_SYSTEM_VERSION];null!=h&&n._cwsSession.setOperatingSystemVersion(h);var p=e[x.DEVICE_CATEGORY];null!=p&&n._cwsSession.setDeviceCategory(p)},this.setStatesFromContentMetadata=function(){if(n._logger.debug("setStatesFromContentMetadata()"),null!=n._contentMetadata.defaultResource&&n._cwsSession.setResource(n._contentMetadata.defaultResource),null!=n._contentMetadata.streamUrl&&n._cwsSession.setStreamUrl(n._contentMetadata.streamUrl),n._contentMetadata.duration>0&&n._cwsSession.setContentLength(n._contentMetadata.duration),n._contentMetadata.encodedFrameRate>0&&n._cwsSession.setEncodedFrameRate(n._contentMetadata.encodedFrameRate),n._contentMetadata.streamType!==r.StreamType.UNKNOWN){var e=n._contentMetadata.streamType===r.StreamType.LIVE;n._cwsSession.setIsLive(e)}null!=n._contentMetadata.assetName&&n._cwsSession.setAssetName(n._contentMetadata.assetName),null!=n._contentMetadata.viewerId&&n._cwsSession.setViewerId(n._contentMetadata.viewerId),null!=n._contentMetadata.applicationName&&n._cwsSession.setPlayerName(n._contentMetadata.applicationName),P.dictCount(n._contentMetadata.custom)>0&&n._cwsSession.setTags(n._contentMetadata.custom)},this.onPlayerStateChange=function(e){return n._logger.debug("onPlayerStateChange(): "+e),n._cwsSession._playerState!=e?(n._cwsSession._playerState==s.PlayerState.NOT_MONITORED&&e!=s.PlayerState.NOT_MONITORED&&(n._pooledPlayerState=e),n._ignorePlayerState?void n._logger.debug("onPlayerStateChange(): "+e+" (pooled, "+(n._adPlaying?"ad playing":"preloading")+")"):void n._cwsSession.setPlayerState(e)):void 0},this.onBitrateChange=function(e){return n._logger.debug("onBitrateChange(): "+e),n._ignoreBitrateAndResource?void n._logger.info("onBitrateChange(): ignored"):void n._cwsSession.setBitrateKbps(e)},this.onSeekEvent=function(e,t){null==t||P.isInteger(t)||(n._logger.error("onSeekEvent(): Ignored non-integer seekToPosition data: "+t),t=-1),n._cwsSession.enqueueSeekEvent(e,t)},this.onEncodedFrameRateChange=function(e){n._logger.debug("onEncodedFrameRateChange(): "+e),n._contentMetadata.encodedFrameRate>0||(e>0?n._ignoreEncodedFrameRateAndDuration?n._logger.info("onEncodedFrameRateChange(): Ignored encoded frame rate data: "+e+" (ads)"):(n._cwsSession.setEncodedFrameRate(e),n._logger.info("onEncodedFrameRateChange(): Received encoded frame rate data: "+e)):n._logger.warning("onEncodedFrameRateChange(): Ignored invalid encoded frame rate data: "+e))},this.onContentLengthChange=function(e){n._logger.debug("onContentLengthChange(): "+e),n._contentMetadata.duration>0||(e>0?n._ignoreEncodedFrameRateAndDuration?n._logger.info("setContentLength(): Ignored content length data: "+e+" (ads)"):(n._cwsSession.setContentLength(e),n._logger.info("setContentLength(): Received content length data: "+e)):n._logger.warning("setContentLength(): Ignored invalid content length data: "+e))},this.onStreamUrlChange=function(e){n._logger.debug("onStreamUrlChange(): "+e),null==n._contentMetadata.streamUrl&&n._cwsSession.setStreamUrl(e)},this.onStreamResolutionWidthChange=function(e){n._logger.debug("onStreamResolutionWidthChange(): "+e),n._cwsSession.setStreamResolutionWidth(e)},this.onStreamResolutionHeightChange=function(e){n._logger.debug("onStreamResolutionHeightChange(): "+e),n._cwsSession.setStreamResolutionHeight(e)},this.onConnectionTypeChange=function(e){n._logger.debug("onConnectionTypeChange(): "+e),n._cwsSession.setConnectionType(e)},this.onLinkEncryptionChange=function(e){n._logger.debug("onLinkEncryptionChange(): "+e),n._cwsSession.setLinkEncryption(e)},this.onPlayerTypeChange=function(e){n._logger.debug("onPlayerTypeChange(): "+e),null==n._cwsSession.getFrameworkName()&&n._cwsSession.setFrameworkName(e)},this.onPlayerVersionChange=function(e){n._logger.debug("onPlayerVersionChange(): "+e),null==n._cwsSession.getFrameworkVersion()&&n._cwsSession.setFrameworkVersion(e)},this.onError=function(e,t){n._logger.debug("onError(): "+e+" ("+t+")"),n.reportError(e,t)},this.onRelease=function(){n._logger.debug("onRelease()"),n.detachPlayer()},this.adStart=function(t,i,r){return n._logger.debug("adStart(): adStream="+t+" adPlayer="+i+" adPosition="+r),n._adPlaying?void n._logger.warning("adStart(): multiple adStart calls, ignoring"):(n._adPlaying=!0,n._adStream=t,n._adPlayer=i,n._adPosition=r,n._cwsSession._hasJoined||n._cwsSession.togglePauseJoin(!0),void(n._adStream==e.Client.AdStream.CONTENT||n._adPlayer==e.Client.AdPlayer.SEPARATE?(n._cwsSession._playerState!==s.PlayerState.NOT_MONITORED&&(n._pooledPlayerState=n._cwsSession._playerState),n._cwsSession.setPlayerState(s.PlayerState.NOT_MONITORED),n._ignorePlayerState=!0):n._adStream==e.Client.AdStream.SEPARATE&&n._adPlayer==e.Client.AdPlayer.CONTENT&&(n._cwsSession._playerState!==s.PlayerState.NOT_MONITORED&&(n._pooledPlayerState=n._cwsSession._playerState),n._cwsSession.setPlayerState(s.PlayerState.NOT_MONITORED),n._ignorePlayerState=!0,n._ignoreBitrateAndResource=!0,n._ignoreEncodedFrameRateAndDuration=!0,n._ignorePlayheadTimeandBufferLength=!0,n._ignoreError=!0)))},this.adEnd=function(){return n._logger.debug("adEnd()"),n._adPlaying?(n._cwsSession._hasJoined||n._cwsSession.togglePauseJoin(!1),n._adStream==e.Client.AdStream.CONTENT||n._adPlayer==e.Client.AdPlayer.SEPARATE?n._preloading||(n._ignorePlayerState=!1,n._cwsSession.setPlayerState(n._pooledPlayerState)):n._adStream==e.Client.AdStream.SEPARATE&&n._adPlayer==e.Client.AdPlayer.CONTENT&&(n._ignoreBitrateAndResource=!1,n._ignoreEncodedFrameRateAndDuration=!1,n._ignorePlayheadTimeandBufferLength=!1,n._ignoreError=!1,n._preloading||(n._ignorePlayerState=!1,n._cwsSession.setPlayerState(n._pooledPlayerState))),n._adPlaying=!1,void(n._adStream=n._adPlayer=n._adPosition=null)):void n._logger.debug("adEnd(): called before adStart, ignoring")},this.detachPlayer=function(){n._logger.debug("detachPlayer()"),null!==n._playerStateManager&&(n._exceptionCatcher.runProtected("Session.detachPlayer",(function(){n._playerStateManager.removeMonitoringNotifier()})),n._playerStateManager=null,n._cwsSession.setPlayerStateManager(null),n._cwsSession.setPlayerState(s.PlayerState.NOT_MONITORED))},this.attachPlayer=function(e){return n._logger.debug("attachPlayer()"),null!=n._playerStateManager?void n._logger.error("attachPlayer(): detach current PlayerStateManager first"):void n._exceptionCatcher.runProtected("Session.attachPlayer()",(function(){e.setMonitoringNotifier(n,n._id)?(e.pushCurrentState(),n._playerStateManager=e,n._cwsSession.setPlayerStateManager(n._playerStateManager)):n._logger.error("attachPlayer(): instance of PlayerStateManager is already attached to a session")}))},this.getPlayerStateManager=function(){return n._logger.debug("getPlayerStateManager()"),n._playerStateManager},this.contentPreload=function(){return n._logger.debug("contentPreload()"),n._preloading?void n._logger.debug("contentPreload(): called twice, ignoring"):(n._preloading=!0,void(n._ignorePlayerState=!0))},this.contentStart=function(){return n._logger.debug("contentStart()"),n._preloading?(n._preloading=!1,void(n._adPlaying||(n._ignorePlayerState=!1,n._cwsSession.setPlayerState(n._pooledPlayerState)))):void n._logger.warning("contentStart(): called without contentPreload, ignoring")},this.reportError=function(t,i){if(n._logger.info("reportError(): "+t),P.isValidString(t))if(i===e.Client.ErrorSeverity.FATAL||i===e.Client.ErrorSeverity.WARNING)if(n._ignoreError)n._logger.debug("reportError(): ignored");else{var r=i===e.Client.ErrorSeverity.FATAL;n._cwsSession.sendError(t,r)}else n._logger.error("reportError(): invalid error severity: "+i);else n._logger.error("reportError(): invalid error message string: "+t)},this.updateContentMetadata=function(e){n._logger.debug("updateContentMetadata(): enter"),n._exceptionCatcher.runProtected("Session.updateContentMetadata",(function(){n.mergeContentMetadata(e),n.setStatesFromContentMetadata()}))},this.sendCustomEvent=function(e,t){n._logger.info("sendEvent(): eventName="+e+n.sessionTypeTag()),n._cwsSession.enqueueCustomEvent(e,t)},this.mergeContentMetadata=function(t){var i={},a={};if(P.isValidString(t.assetName)&&(n._contentMetadata.assetName!=t.assetName?(null!=n._contentMetadata.assetName&&(i[v.REQUEST_KEY_ASSET_NAME]=n._contentMetadata.assetName),a[v.REQUEST_KEY_ASSET_NAME]=t.assetName,n._contentMetadata.assetName=t.assetName):n._logger.warning("mergeContentMetadata(): assetName was not changed.")),P.isValidString(t.applicationName)&&(n._contentMetadata.applicationName!=t.applicationName?(null!=n._contentMetadata.applicationName&&(void 0===i[v.REQUEST_KEY_STREAM_METADATA_CHANGE]&&(i[v.REQUEST_KEY_STREAM_METADATA_CHANGE]={}),i[v.REQUEST_KEY_STREAM_METADATA_CHANGE][v.REQUEST_KEY_PLAYER_NAME]=n._contentMetadata.applicationName),void 0===a[v.REQUEST_KEY_STREAM_METADATA_CHANGE]&&(a[v.REQUEST_KEY_STREAM_METADATA_CHANGE]={}),a[v.REQUEST_KEY_STREAM_METADATA_CHANGE][v.REQUEST_KEY_PLAYER_NAME]=t.applicationName,n._contentMetadata.applicationName=t.applicationName):n._logger.warning("mergeContentMetadata(): applicationName was not changed.")),P.isValidString(t.streamUrl)&&(n._contentMetadata.streamUrl!=t.streamUrl?(null!=n._contentMetadata.streamUrl&&(i[v.REQUEST_KEY_STREAM_URL]=n._contentMetadata.streamUrl),a[v.REQUEST_KEY_STREAM_URL]=t.streamUrl,n._contentMetadata.streamUrl=t.streamUrl):n._logger.warning("mergeContentMetadata(): streamUrl was not changed.")),P.isValidString(t.viewerId)&&(n._contentMetadata.viewerId!=t.viewerId?(null!=n._contentMetadata.viewerId&&(void 0===i[v.REQUEST_KEY_STREAM_METADATA_CHANGE]&&(i[v.REQUEST_KEY_STREAM_METADATA_CHANGE]={}),i[v.REQUEST_KEY_STREAM_METADATA_CHANGE][v.REQUEST_KEY_VIEWER_ID]=n._contentMetadata.viewerId),void 0===a[v.REQUEST_KEY_STREAM_METADATA_CHANGE]&&(a[v.REQUEST_KEY_STREAM_METADATA_CHANGE]={}),a[v.REQUEST_KEY_STREAM_METADATA_CHANGE][v.REQUEST_KEY_VIEWER_ID]=t.viewerId,n._contentMetadata.viewerId=t.viewerId):n._logger.warning("mergeContentMetadata(): viewerId was not changed.")),P.isValidString(t.defaultResource)&&(n._contentMetadata.defaultResource!=t.defaultResource?(null!=n._contentMetadata.defaultResource&&(i[v.REQUEST_KEY_RESOURCE]=n._contentMetadata.defaultResource),a[v.REQUEST_KEY_RESOURCE]=t.defaultResource,n._contentMetadata.defaultResource=t.defaultResource):n._logger.warning("mergeContentMetadata(): defaultResource was not changed.")),P.isInteger(t.duration)&&t.duration>0&&(n._contentMetadata.duration!=t.duration?(n._cwsSession._contentLengthSec>0&&(i[v.REQUEST_KEY_CONTENT_LENGTH]=n._cwsSession._contentLengthSec),a[v.REQUEST_KEY_CONTENT_LENGTH]=t.duration,n._contentMetadata.duration=t.duration):n._logger.warning("mergeContentMetadata(): duration was not changed.")),P.isInteger(t.encodedFrameRate)&&t.encodedFrameRate>0&&(n._contentMetadata.encodedFrameRate!=t.encodedFrameRate?(n._contentMetadata.encodedFrameRate>-1&&(i[v.REQUEST_KEY_ENCODED_FRAME_RATE]=n._contentMetadata.encodedFrameRate),a[v.REQUEST_KEY_ENCODED_FRAME_RATE]=t.encodedFrameRate,n._contentMetadata.encodedFrameRate=t.encodedFrameRate):n._logger.warning("mergeContentMetadata(): encodedFrameRate was not changed.")),t.streamType!=r.StreamType.UNKNOWN&&(n._contentMetadata.streamType!=t.streamType?(n._contentMetadata.streamType!=r.StreamType.UNKNOWN&&(n._contentMetadata.streamType==e.ContentMetadata.StreamType.LIVE?i[v.REQUEST_KEY_IS_LIVE]=!0:i[v.REQUEST_KEY_IS_LIVE]=!1),t.streamType==e.ContentMetadata.StreamType.LIVE?a[v.REQUEST_KEY_IS_LIVE]=!0:a[v.REQUEST_KEY_IS_LIVE]=!1,n._contentMetadata.streamType=t.streamType):n._logger.warning("mergeContentMetadata(): streamType was not changed.")),P.dictCount(t.custom)>0){var o={},s={};for(var l in t.custom){n._contentMetadata.custom[l]!=t.custom[l]?(o[l]=t.custom[l],n._contentMetadata.custom[l]&&(s[l]=n._contentMetadata.custom[l]),n._contentMetadata.custom[l]=t.custom[l]):n._logger.info("mergeContentMetadata(): custom."+l+" was not changed.")}P.dictCount(o)>0?(P.dictCount(s)>0&&(i[v.REQUEST_KEY_TAGS]=s),a[v.REQUEST_KEY_TAGS]=o):n._logger.warning("mergeContentMetadata(): custom was not changed.")}P.dictCount(a)>0&&n._cwsSession.declareStateChange(a,i)},this.isGlobalSession=function(){return n._global==S.SESSION_TYPE.GLOBAL},this.isVideoSession=function(){return n._global==S.SESSION_TYPE.VIDEO},this.isAdSession=function(){return n._global==S.SESSION_TYPE.AD},this.sessionTypeTag=function(){return n.isGlobalSession()?" (global session)":""}});E.DEFAULT_HEARTBEAT_ERROR_MESSAGE="received no response (or a bad response) to heartbeat POST request";var b=t.SessionFactory=function(){function e(e,n,i,r){t._client=e,t._clientSettings=n,t._clientConfig=i,t._systemFactory=r,t._logger=t._systemFactory.buildLogger(),t._logger.setModuleName("SessionFactory"),t._nextSessionKey=0,t._sessionsByKey={}}var t=this;t._logger=null,t._logBuffer=null,t._nextSessionKey=0,t._sessionsByKey=null,e.apply(t,arguments),this.cleanup=function(){for(var e in t._logger=null,t._logBuffer=null,t._sessionsByKey){t._sessionsByKey[e].cleanup()}t._sessionsByKey=null,t._nextSessionKey=0},this.newSessionKey=function(){var e=t._nextSessionKey;return t._nextSessionKey++,e},this.makeVideoSession=function(e,n){return null==e&&(e=new r),t.makeSession(e,n)},this.makeGlobalSession=function(e){return t.makeSession(e,S.SESSION_TYPE.GLOBAL)},this.generateSessionId=function(){return D.integer32()},this.makeSession=function(e,n){var i=e.clone(),r=t.generateSessionId(),a=t._systemFactory.buildSession(t._client,t._clientSettings,t._clientConfig,r,n,i),o=t.newSessionKey();return t.addSession(o,a),a.start(),o},this.getSession=function(e){var n=t._sessionsByKey[e];return null==n&&t._logger.error("Client: invalid sessionKey. Did you cleanup that session previously?"),n},this.getVideoSession=function(e){var n=this.getSession(e);return null!=n&&(n.isVideoSession()||n.isAdSession()||(t._logger.error("Client: invalid sessionKey. Did you cleanup that session previously?"),n=null)),n},this.addSession=function(e,n){t._sessionsByKey[e]=n},this.removeSession=function(e){delete t._sessionsByKey[e]},this.cleanupSession=function(e){var n=t.getSession(e);t.removeSession(e),n.cleanup()}},T=t.CallbackWithTimeout=function(e){this._timer=e,this.getWrapperCallback=function(e,t,n){var i=!1;this._timer.createOnce((function(){i||(i=!0,e(!1,n+" ("+t+" ms)"))}),t,"CallbackWithTimeout.wrap");return function(t,n){i||(i=!0,e(t,n))}}},w=t.Config=function(e,t,n){var i=this;this._logger=e,this._logger.setModuleName("Config"),this._storage=t,this._jsonInterface=n,this._defaultConfig={clientId:v.DEFAULT_CLIENT_ID,sendLogs:!1,maxHbInfos:v.DEFAULT_MAX_HEARTBEAT_INFOS},this._config=P.ObjectShallowCopy(this._defaultConfig),this._loaded=!1,this._loadedEmpty=!1,this._waitingConsumers=[],this.isReady=function(){return this._loaded},this.load=function(){this._storage.load(w.STORAGE_KEY,(function(e,t){e?(i._parse(t),i._logger.debug("load(): configuration successfully loaded from local storage"+(i._loadedEmpty?" (was empty)":"")+".")):i._logger.error("load(): error loading configuration from local storage: "+t),i._loaded=!0,i._notify()}))},this._parse=function(e){var t=this._jsonInterface.decode(e);if(null!=t){var n=t[w.CONFIG_STORAGE_KEY_CLIENT_ID];null!=n&&n!=v.DEFAULT_CLIENT_ID&&""!=n&&"null"!=n&&(this._config[w.CONFIG_KEY_CLIENT_ID]=n,this._logger.debug("parse(): loaded clientId="+n+" (from local storage)"))}else this._loadedEmpty=!0},this._marshall=function(){var e={};return e[w.CONFIG_STORAGE_KEY_CLIENT_ID]=this._config.clientId,this._logger.debug("_marshall(): saving clientId="+this._config.clientId+" (to local storage)"),this._jsonInterface.encode(e)},this.save=function(){this._storage.save(w.STORAGE_KEY,this._marshall(),(function(e,t){e?i._logger.debug("save(): configuration successfully saved to local storage."):i._logger.error("save(): error saving configuration to local storage: "+t)}))},this.register=function(e){return this.isReady()?void e():void this._waitingConsumers.push(e)},this.get=function(e){return this._loaded?this._config[e]:null},this.set=function(e,t){this._loaded&&(this._config[e]=t)},this._notify=function(){for(var e;null!=(e=this._waitingConsumers.shift());)e()}};w.STORAGE_KEY="sdkConfig",w.CONFIG_STORAGE_KEY_CLIENT_ID="clId",w.CONFIG_KEY_CLIENT_ID="clientId",w.CONFIG_KEY_SEND_LOGS="sendLogs",w.CONFIG_KEY_MAX_HEARTBEAT_INFOS="maxHbInfos";var A=t.EventQueue=function(){this._events=[],this._nextEventNumber=0,this.enqueue=function(e){this._events.push(e)},this.getNumber=function(){var e=this._nextEventNumber;return this._nextEventNumber++,e},this.flush=function(){var e=this._events;return this._events=[],e}},C=t.ExceptionCatcher=function(e,t,n){this._logger=e,this._logger.setModuleName("ExceptionCatcher"),this._ping=t,this._systemSettings=n,this.runProtected=function(e,t,n){try{t()}catch(t){if(null!=n)n(t);else{if(this._systemSettings.allowUncaughtExceptions)throw t;this.onUncaughtException(e,t)}}},this.onUncaughtException=function(e,t){var n="Uncaught exception: "+e+": "+t.toString();if(null!=this._ping)try{this._ping.send(n)}catch(e){this._logger.error("Caught exception while sending ping: "+e.toString())}this._logger.error(n)}},I=t.GatewayControl=function(e,t,n,i){var r=this;this._clientSettings=e,this._logger=t,this._logger.setModuleName("GatewayControl"),this._httpClient=n,this._jsonInterface=i,this.send=function(e,t){var n=this._jsonInterface.encode(e),i=this._clientSettings.gatewayUrl+v.gatewayPath;this._httpClient.request("POST",i,n,"application/json",(function(e,n){if(e){var i=r._jsonInterface.decode(n);t(e,i)}else{t(e,n)}}))}},P=t.Lang={};P.isMeaningfulString=function(e){return P.isValidString(e)&&null!=e&&"undefined"!=e&&"null"!=e},P.sanitizeStringToStringObject=function(e){var t={};for(var n in e)if(P.isMeaningfulString(n)){var i=e[n];P.isMeaningfulString(i)&&(t[n]=i)}return t},P.validateInterface=function(e,t,n){if(null==e)throw new Error("Expected "+n+" implementation is null.");for(var i in t)if("function"!=typeof e[i])throw new Error("Expected method "+i+" in "+n+" implementation.")},P.dictCount=function(e){var t,n=0;for(t in e)e.hasOwnProperty(t)&&n++;return n},P.ToString=function(e){return""+e},P.NumberToInt=function(e){return Math.floor(e)},P.NumberToUnsignedInt=function(e){return Math.abs(P.NumberToInt(e))},P.AsBoolean=function(e){return Boolean(e)},P.isValidString=function(e){return"string"==typeof e&&""!==e},P.stringStartsWith=function(e,t){return"string"==typeof e&&"string"==typeof t&&("function"==typeof e.indexOf&&0===e.indexOf(t))},P.isBoolean=function(e){return"boolean"==typeof e},P.UrlEncodeString=function(e){return escape(e)},P.isObject=function(e){return"object"==typeof e},P.ObjectToString=function(e){var t="";for(var n in e){t+=n+"="+e[n]}return"Object{"+t+"}"},P.ObjectShallowCopyOmitNull=function(e){var t=P.ObjectShallowCopy(e);for(var n in t)null==t[n]&&delete t[n];return t},P.ObjectShallowCopy=function(e){var t={};for(var n in e)t[n]=e[n];return t},P.ObjectShallowEquals=function(e,t){if(typeof e!=typeof t)return!1;if(e instanceof Object&&t instanceof Object){if(P.dictCount(e)!==P.dictCount(t))return!1;for(var n in e)if(!(e[n]===t[n]))return!1;return!0}return e===t},P.isInteger=function(e){return"number"==typeof e&&Math.round(e)===e},P.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)},P.ArrayEquals=function(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!=t.length)return!1;for(var n=0;n<e.length;++n)if(P.isArray(e[n])&&P.isArray(t[n])){if(!P.ArrayEquals(e[n],t[n]))return!1}else if(e[n]!==t[n])return!1;return!0},P.isObjectDefinePropertyPresent=function(){return void 0!==Object.defineProperty&&function(){try{return Object.defineProperty({},"x",{}),!0}catch(e){return!1}}()},P.defGet=function(e,t,n){if(P.isObjectDefinePropertyPresent())Object.defineProperty(e,t,{configurable:!0,enumerable:!0,get:n});else{if(void 0===e.__defineGetter__)throw new Error("JavaScript runtime must support either Object.defineProperty or __defineGetter__");e.__defineGetter__(t,n)}},P.defSet=function(e,t,n){if(P.isObjectDefinePropertyPresent())Object.defineProperty(e,t,{configurable:!0,set:n});else{if(void 0===e.__defineSetter__)throw new Error("JavaScript runtime must support either Object.defineProperty or __defineSetter__");e.__defineSetter__(t,n)}},function(){var e={two32:4294967296};e.MaxValue=e.two32-1,e.MinValue=0,P.UInt32=e,P.UInt32.Cast=function(t){var n=parseInt(t,10);return n>e.MaxValue?n%=e.two32:n<e.MinValue&&(n=-n%e.two32,n=e.two32-n),n},P.UInt32.InRange=function(t){var n=parseInt(t,10);return n<=e.MaxValue&&n>=e.MinValue};var t={MaxValue:2147483647,MinValue:-2147483648};P.Int32=t,P.Int32.Cast=function(e){var n=parseInt(e,10);return n>t.MaxValue?n%=t.MaxValue:n<t.MinValue&&(n=-n%t.MaxValue,n=t.MaxValue-n),n},P.Int32.InRange=function(e){var n=parseInt(e,10);return n<=t.MaxValue&&n>=t.MinValue}}();var k=t.LogBuffer=function(){this._buffer=[],this.add=function(e){this._buffer.length>=32&&this._buffer.shift(),this._buffer.push(e)},this.flush=function(){var e=this._buffer;return this._buffer=[],e}},M=t.Ping=function(e,t,i){this._isSendingPing=!1,this._cachedBasePingUrl=null,this._logger=e,this._logger.setModuleName("Ping"),this._httpClient=t,this._clientSettings=i,this.send=function(e){if(!this._isSendingPing){this._isSendingPing=!0;var t=this.getBasePingUrl()+"&d="+P.UrlEncodeString(e.toString());this._logger.error("send(): "+t),this._httpClient.request("GET",t,null,null,null),this._isSendingPing=!1}},this.getBasePingUrl=function(){if(!this._cachedBasePingUrl){var e=M.SERVICE_URL+"?comp="+M.COMPONENT_NAME+"&clv="+n.version;if(this._clientSettings&&(e+="&cid="+this._clientSettings.customerKey),e+="&sch="+v.SDK_METADATA_SCHEMA,!this._clientSettings)return e;this._cachedBasePingUrl=e}return this._cachedBasePingUrl}};M.COMPONENT_NAME="sdkjs",M.SERVICE_URL="https://pings.conviva.com/ping.ping";var D=t.Random={};D.maxUInt32=4294967295,D.maxInt32=2147483647,D.minInt32=-2147483648,D.integer32=function(){return Math.floor(Math.random()*D.maxUInt32)+D.minInt32},D.uinteger32=function(){return Math.floor(Math.random()*D.maxUInt32)};var O=t.Sanitize={};O.Integer=function(e,t,n,i){if(isNaN(e))return i;if("number"!=typeof e)return i;if(e==i)return i;var r=P.NumberToInt(e);return O.EnforceBoundaries(r,t,n)},O.EnforceBoundaries=function(e,t,n){return null!=n&&e>n?e=n:null!=t&&t>e&&(e=t),e},O.sanitizeSpecialIntegerValue=function(e){return-1==e||-2==e?e:e=O.Integer(e,0,null,-1)};var R=(t.StreamerError=function(){function e(e,n){t.errorCode=e,t.severity=n}var t=this;t.errorCode=null,t.severity=n.ErrorSeverity.FATAL,e.apply(t,arguments)},t.HttpClient=function(e,t,n,i){this._logger=e,this._logger.setModuleName("HttpClient"),this._httpInterface=t,this._callbackWithTimeout=n,this._systemSettings=i,this.request=function(e,t,n,i,r){var a=1e3*this._systemSettings.httpTimeout,o=this._callbackWithTimeout.getWrapperCallback(r,a,"HTTP timeout");this._logger.debug("request(): calling HttpInterface.makeRequest"),this._httpInterface.makeRequest(e,t,n,i,a,o)}}),N=t.Logger=function(e,t,n,i,r){this._loggingInterface=e,this._timeInterface=t,this._settings=n,this._logBuffer=i,this._packageName=r,this.debug=function(e){this.log(e,o.LogLevel.DEBUG)},this.info=function(e){this.log(e,o.LogLevel.INFO)},this.warning=function(e){this.log(e,o.LogLevel.WARNING)},this.error=function(e){this.log(e,o.LogLevel.ERROR)},this.log=function(e,t){var n=this.formatMessage(e,t);this._logBuffer.add(n),this._settings.logLevel<=t&&this._loggingInterface.consoleLog(n,t)},this.prependModuleName=function(e){var t=e;return"["+this._moduleName+"] "+t},this.prependPackageName=function(e){var t=e;return"["+this._packageName+"] "+t},this.prependConvivaNamespace=function(e){return"[Conviva] "+e},this.prependTime=function(e){return"["+(this._timeInterface.getEpochTimeMs()/1e3).toFixed(3).toString()+"] "+e},this.prependLogLevel=function(e,t){return"["+N.getLogLevelString(t)+"] "+e},this.prependSessionId=function(e){var t=e;return null!=this._sessionId&&(t="sid="+this._sessionId+" "+t),t},this.setSessionId=function(e){this._sessionId=e},this.setModuleName=function(e){this._moduleName=e},this.formatMessage=function(e,t){return this.prependConvivaNamespace(this.prependTime(this.prependLogLevel(this.prependPackageName(this.prependModuleName(this.prependSessionId(e))),t)))}};N.getLogLevelString=function(e){var t;switch(e){case o.LogLevel.ERROR:t="ERROR";break;case o.LogLevel.WARNING:t="WARNING";break;case o.LogLevel.INFO:t="INFO";break;case o.LogLevel.DEBUG:t="DEBUG"}return t};var L=t.Storage=function(e,t,n,i){this._logger=e,this._logger.setModuleName("Storage"),this._storageInterface=t,this._callbackWithTimeout=n,this._systemSettings=i,this.load=function(e,t){var n=this._callbackWithTimeout.getWrapperCallback(t,1e3*this._systemSettings.storageTimeout,"storage load timeout");this._logger.debug("load(): calling StorageInterface.loadData"),this._storageInterface.loadData(L.STORAGE_SPACE,e,n)},this.save=function(e,t,n){var i=this._callbackWithTimeout.getWrapperCallback(n,1e3*this._systemSettings.storageTimeout,"storage save timeout");this._logger.debug("save(): calling StorageInterface.saveData"),this._storageInterface.saveData(L.STORAGE_SPACE,e,t,i)}};L.STORAGE_SPACE="Conviva";var x=t.SystemMetadata=function(t,n,i){this._logger=t,this._logger.setModuleName("SystemMetadata"),this._metadataInterface=n,this._exceptionCatcher=i,this._cachedMetadata=null,this.get=function(){return this._cachedMetadata||this.retrieve(),this._cachedMetadata},this.retrieve=function(){function t(e,t){i._exceptionCatcher.runProtected("Session.getSystemMetadataSchema(): "+e,(function(){var n=t[e];t[e]=n.call(i._metadataInterface)}))}var n={};n[x.BROWSER_NAME]=this._metadataInterface.getBrowserName,n[x.BROWSER_VERSION]=this._metadataInterface.getBrowserVersion,n[x.DEVICE_BRAND]=this._metadataInterface.getDeviceBrand,n[x.DEVICE_MANUFACTURER]=this._metadataInterface.getDeviceManufacturer,n[x.DEVICE_MODEL]=this._metadataInterface.getDeviceModel,n[x.DEVICE_TYPE]=this._metadataInterface.getDeviceType,n[x.DEVICE_VERSION]=this._metadataInterface.getDeviceVersion,n[x.FRAMEWORK_NAME]=this._metadataInterface.getFrameworkName,n[x.FRAMEWORK_VERSION]=this._metadataInterface.getFrameworkVersion,n[x.OPERATING_SYSTEM_NAME]=this._metadataInterface.getOperatingSystemName,n[x.OPERATING_SYSTEM_VERSION]=this._metadataInterface.getOperatingSystemVersion,n[x.DEVICE_CATEGORY]=this._metadataInterface.getDeviceCategory;var i=this;for(var r in this._logger.debug("retrieve(): calling MetadataInterface methods"),n)t(r,n),P.isValidString(n[r])||delete n[r];var a=!1;if(void 0!==n[x.DEVICE_TYPE]){for(var o in e.Client.DeviceType)if(n[x.DEVICE_TYPE]===e.Client.DeviceType[o]){a=!0;break}a||delete n[x.DEVICE_TYPE]}if(a=!1,void 0!==n[x.DEVICE_CATEGORY]){for(var s in e.Client.DeviceCategory)if(n[x.DEVICE_CATEGORY]===e.Client.DeviceCategory[s]){a=!0;break}a||delete n[x.DEVICE_CATEGORY]}this._cachedMetadata=P.ObjectShallowCopyOmitNull(n)}};x.BROWSER_NAME="browserName",x.BROWSER_VERSION="browserVersion",x.DEVICE_BRAND="deviceBrand",x.DEVICE_MANUFACTURER="deviceManufacturer",x.DEVICE_MODEL="deviceModel",x.DEVICE_TYPE="deviceType",x.DEVICE_VERSION="deviceVersion",x.FRAMEWORK_NAME="frameworkName",x.FRAMEWORK_VERSION="frameworkVersion",x.OPERATING_SYSTEM_NAME="operatingSystemName",x.OPERATING_SYSTEM_VERSION="operatingSystemVersion",x.DEVICE_CATEGORY="deviceCategory";var F=t.Time=function(e,t){this._timeInterface=e,this._logger=t,this._logger.setModuleName("Time"),this.current=function(){var e=this._timeInterface.getEpochTimeMs();return P.isInteger(e)||this._logger.error("current(): TimeInterface.getEpochTimeMs() did not return an integer ("+e+")"),e}},V=t.Timer=function(e,t,n){var i=this;this._logger=e,this._logger.setModuleName("Timer"),this._timerInterface=t,this._exceptionCatcher=n,this.create=function(e,t,n){return this.createTimer((function(){i._exceptionCatcher.runProtected(n,(function(){e()}))}),t,n)},this.createOnce=function(e,t,n){var r={cancel:null},a=this.createTimer((function(){i._exceptionCatcher.runProtected(n,(function(){r&&"function"==typeof r.cancel&&(r.cancel(),r.cancel=null,r=null),e()}))}),t,n);return r.cancel=a,a},this.createTimer=function(e,t,n){return this._logger.debug("createTimer(): calling TimerInterface.create"),this._timerInterface.createTimer(e,t,n)}}}()}(),e}));var a={Html5Time:function(){function e(){}e.apply(this,arguments),this.getEpochTimeMs=function(){return(new Date).getTime()},this.release=function(){}},Html5Http:function(){function e(){}e.apply(this,arguments),this.makeRequest=function(e,t,n,i,r,a){return this.makeRequestStandard.apply(this,arguments)},this.makeRequestStandard=function(e,t,n,i,r,a){var o=new XMLHttpRequest;return o.open(e,t,!0),i&&o.overrideMimeType&&(o.overrideMimeType=i),i&&o.setRequestHeader&&o.setRequestHeader("Content-Type",i),r>0&&(o.timeout=r,o.ontimeout=function(){o.ontimeout=o.onreadystatechange=null,a&&a(!1,"timeout after "+r+" ms")}),o.onreadystatechange=function(){4===o.readyState&&(o.ontimeout=o.onreadystatechange=null,200==o.status?a&&a(!0,o.responseText):a&&a(!1,"http status "+o.status))},o.send(n),null},this.release=function(){}},Html5Timer:function(){function e(){}e.apply(this,arguments),this.createTimer=function(e,t,n){var i=setInterval(e,t);return function(){-1!==i&&(clearInterval(i),i=-1)}},this.release=function(){}},Html5Storage:function(){function e(){}e.apply(this,arguments),this.saveData=function(e,t,n,i){var r=e+"."+t;try{localStorage.setItem(r,n),i(!0,null)}catch(e){i(!1,e.toString())}},this.loadData=function(e,t,n){var i=e+"."+t;try{n(!0,localStorage.getItem(i))}catch(e){n(!1,e.toString())}},this.release=function(){}},Html5Metadata:function(){function e(){}e.apply(this,arguments),this.getBrowserName=function(){return null},this.getBrowserVersion=function(){return null},this.getDeviceBrand=function(){return null},this.getDeviceManufacturer=function(){return null},this.getDeviceModel=function(){return null},this.getDeviceType=function(){return Conviva.Client.DeviceType.DESKTOP},this.getDeviceVersion=function(){return null},this.getFrameworkName=function(){return"HTML5"},this.getFrameworkVersion=function(){return null},this.getOperatingSystemName=function(){return null},this.getOperatingSystemVersion=function(){return null},this.getDeviceCategory=function(){return Conviva.Client.DeviceCategory.WEB},this.release=function(){}},Html5Logging:function(){function e(){}e.apply(this,arguments),this.consoleLog=function(e,t){"undefined"!=typeof console&&(console.log&&t===Conviva.SystemSettings.LogLevel.DEBUG||t===Conviva.SystemSettings.LogLevel.INFO?console.log(e):console.warn&&t===Conviva.SystemSettings.LogLevel.WARNING?console.warn(e):console.error&&t===Conviva.SystemSettings.LogLevel.ERROR&&console.error(e))},this.release=function(){}},Html5PlayerInterface:function(e,t){var n=this;function i(e,t){if(!e)throw new Error("Html5PlayerInterface: playerStateManager argument cannot be null.");if(!t)throw new Error("Html5PlayerInterface: videoElement argument cannot be null.");this._playerStateManager=e,this._videoElement=t,this._eventListeners=[],this._registerVideoEventListeners(),this._startPolling(),this._findCurrentState(),this._playerStateManager.setClientMeasureInterface(this)}n._timeupdate=0,n._lastTimeupdate=0,n._currentTimeIsInvalid=!1,n._width=-1,n._height=-1,this._timerInterface=new a.Html5Timer,this._loggingInterface=new a.Html5Logging,this._addEventListener=function(e,t,i){void 0===i&&(i=n._videoElement),n._eventListeners.push([e,t,i]),window.addEventListener?i.addEventListener(e,t,!1):i.attachEvent("on"+e,t)},this._removeEventListener=function(e,t,i){void 0===i&&(i=n._videoElement),window.removeEventListener?i.removeEventListener(e,t,!1):i.detachEvent("on"+e,t)},this._registerVideoEventListeners=function(){n._addEventListener("ended",(function(){n._receivedHtml5Event("ended")})),n._addEventListener("pause",(function(){n._receivedHtml5Event("pause")})),n._addEventListener("playing",(function(){0!=n._videoElement.currentTime?n._videoElement.seeking||n._receivedHtml5Event("playing"):n._currentTimeIsInvalid=!0})),n._addEventListener("waiting",(function(){n._receivedHtml5Event("waiting")})),n._addEventListener("timeupdate",(function(){n._currentTimeIsInvalid&&(n._timeupdate++,n._playerStateManager.getPlayerState()===Conviva.PlayerStateManager.PlayerState.PLAYING||n._videoElement.seeking||n._receivedHtml5Event("playing"))})),n._addEventListener("error",(function(){if(n._videoElement.error){var e=n._videoElement.error.code;n._reportHtml5Error(e)}})),n._addEventListener("loadedmetadata",n._loadedMetadata),n._addEventListener("seeking",(function(){n.isSeekStarted||(n.isSeekStarted=!0,n._playerStateManager.setPlayerSeekStart(-1)),n._currentTimeIsInvalid&&n._playerStateManager.getPlayerState()!==Conviva.PlayerStateManager.PlayerState.BUFFERING&&n._receivedHtml5Event("waiting")})),n._addEventListener("seeked",(function(){n.isSeekStarted=!1,n._playerStateManager.setPlayerSeekEnd()})),n._monitorErrorsFromSourceElements()},this.getPHT=function(){return 1e3*n._videoElement.currentTime},this.getBufferLength=function(){if(n._videoElement){var e=n._videoElement.buffered;if(void 0!==e){for(var t=0,i=0;i<e.length;i++){var r=e.start(i),a=e.end(i);r<=n._videoElement.currentTime&&n._videoElement.currentTime<a&&(t+=a-n._videoElement.currentTime)}return n._currentBufferLength=t,1e3*n._currentBufferLength}}},this.getSignalStrength=function(){return Conviva.PlayerStateManager.DEFAULT_SIGNAL_STRENGTH},this.getRenderedFrameRate=function(){return Conviva.PlayerStateManager.DEFAULT_RENDERED_FRAME_RATE},this._monitorErrorsFromSourceElements=function(){if(void 0!==n._videoElement.children){var e=function(){n._log("Caught non-specific error from <source> element, reporting as ERR_UNKNOWN"),n._reportHtml5Error(0)};n._videoElement._sources=n._videoElement.children;for(var t=0;t<n._videoElement._sources.length;t++){var i=n._videoElement._sources[t];"SOURCE"==i.tagName&&n._addEventListener("error",e,i)}}},this._removeVideoEventHandlers=function(){for(var e=0;e<n._eventListeners.length;e++){var t=n._eventListeners[e];n._removeEventListener(t[0],t[1],t[2])}n._eventListeners=[]},this._findCurrentState=function(){n._prevReadyState=n._videoElement.readyState,0===n._videoElement.readyState||n._videoElement.ended?n._updateConvivaPlayerState(Conviva.PlayerStateManager.PlayerState.STOPPED):(n._videoElement.paused||n._videoElement.seeking)&&n._updateConvivaPlayerState(Conviva.PlayerStateManager.PlayerState.PAUSED),n._videoElement.readyState>=n._videoElement.HAVE_METADATA&&n._loadedMetadata()},this._receivedHtml5Event=function(e){var t=n._convertHtml5EventToConvivaPlayerState(e);n._updateConvivaPlayerState(t)},this._updateConvivaPlayerState=function(e){n._playerStateManager.getPlayerState()!==e&&(n._playerStateManager.setPlayerState(e),n._playerStateRecentlyChanged=!0)},this._convertHtml5EventToConvivaPlayerState=function(e){switch(e){case"playing":return Conviva.PlayerStateManager.PlayerState.PLAYING;case"waiting":return Conviva.PlayerStateManager.PlayerState.BUFFERING;case"ended":case"stopped":return Conviva.PlayerStateManager.PlayerState.STOPPED;case"pause":return Conviva.PlayerStateManager.PlayerState.PAUSED;default:return Conviva.PlayerStateManager.PlayerState.UNKNOWN}},this._reportHtml5Error=function(e){var t;switch(e){case 1:t="MEDIA_ERR_ABORTED";break;case 2:t="MEDIA_ERR_NETWORK";break;case 3:t="MEDIA_ERR_DECODE";break;case 4:t="MEDIA_ERR_SRC_NOT_SUPPORTED";break;default:t="MEDIA_ERR_UNKNOWN"}n._log("Reporting error: code="+e+" message="+t);var i=Conviva.Client.ErrorSeverity.FATAL;n._playerStateManager.sendError(t,i)},this._loadedMetadata=function(){var e=n._videoElement.duration;isNaN(e)||e==1/0||n._playerStateManager.setDuration(e);var t=n._videoElement.videoWidth;!isNaN(t)&&t>=0&&n._playerStateManager.setVideoResolutionWidth(t);var i=n._videoElement.videoHeight;!isNaN(i)&&i>=0&&n._playerStateManager.setVideoResolutionHeight(i),n._playerStateManager.setConnectionType("Wi-fi"),n._playerStateManager.setLinkEncryption("YES")},this._startPolling=function(){this._previousPosition=0,this._currentPosition=0,this._currentBufferLength=0,this._pollingTimerCancel=this._timerInterface.createTimer(this._poll,500,"Html5PlayerInterface._poll()")},this._poll=function(){n._pollStreamerResolution(),n._inferPlayerStateFromPosition()},this._pollStreamerResolution=function(){var e=n._videoElement.videoWidth;!isNaN(e)&&e>=0&&e!=n._width&&(n._playerStateManager.setVideoResolutionWidth(e),n._width=e);var t=n._videoElement.videoHeight;!isNaN(t)&&t>=0&&t!=n._height&&(n._playerStateManager.setVideoResolutionHeight(t),n._height=t)},this._inferPlayerStateFromPosition=function(){if(n._previousPosition=n._currentPosition,n._currentPosition=n._videoElement.currentTime,n._positionDelta=Math.abs(n._previousPosition-n._currentPosition),!(n._positionDelta>1))if(n._playerStateRecentlyChanged)n._playerStateRecentlyChanged=!1;else{var e=0!==n._positionDelta,t=n._playerStateManager.getPlayerState();e&&t!==Conviva.PlayerStateManager.PlayerState.PLAYING?n._updateConvivaPlayerState(Conviva.PlayerStateManager.PlayerState.PLAYING):e||t!==Conviva.PlayerStateManager.PlayerState.PLAYING||(n._videoElement.paused?t!=Conviva.PlayerStateManager.PlayerState.PAUSED&&n._updateConvivaPlayerState(Conviva.PlayerStateManager.PlayerState.PAUSED):n._videoElement.seeking||n._updateConvivaPlayerState(Conviva.PlayerStateManager.PlayerState.BUFFERING)),n._currentTimeIsInvalid&&(n._videoElement.paused?(t!=Conviva.PlayerStateManager.PlayerState.PAUSED&&n._updateConvivaPlayerState(Conviva.PlayerStateManager.PlayerState.PAUSED),n._timeupdate=n._lastTimeupdate):n._videoElement.seeking||(n._timeupdate>1&&n._timeupdate==n._lastTimeupdate&&n._updateConvivaPlayerState(Conviva.PlayerStateManager.PlayerState.BUFFERING),n._lastTimeupdate=n._timeupdate))}},this._stopPolling=function(){this._pollingTimerCancel()},this._log=function(e){var t="[Html5PlayerInterface] "+e;this._loggingInterface.consoleLog(t,Conviva.SystemSettings.LogLevel.ERROR)},i.apply(this,arguments),this.cleanup=function(){this._stopPolling(),this._removeVideoEventHandlers(),this._videoElement=null,this._playerStateManager=null}}};e.exports=a}).call(window)},function(e,t){e.exports=function(e,t,n,i,r){var a,o,s=document.createElement("script"),l=[];t={adData:{ids:t,duration:n,url:r},dispatchEvent:function(e){this.sendEvent?(l&&(l.push(e),e=l,l=!1),this.sendEvent(e)):l.push(e)}},n="_moatApi"+Math.floor(1e8*Math.random());try{o=(a=e.ownerDocument).defaultView||a.parentWindow}catch(e){a=document,o=window}return o[n]=t,s.type="text/javascript",e&&e.insertBefore(s,e.childNodes[0]||null),s.src="https://z.moatads.com/"+i+"/moatvideo.js#"+n,t}},function(e,t){e.exports=function(e){return window.document[e]?window.document[e]:-1!=navigator.appName.indexOf("Microsoft Internet")?document.getElementById(e):document.embeds&&document.embeds[e]?document.embeds[e]:void 0}},function(e,t){"undefined"==typeof _comscore&&(_comscore=[]),function(){var e,t="length",n=self,i=n.encodeURIComponent?encodeURIComponent:escape,r=".scorecardresearch.com",a=Math,o="script",s=/c2=(\d*)&/,l=function(e){if(e){var n,a,o,s=[],l=0,c="";for(var d in e)"string"!=(n=typeof e[d])&&"number"!=n||(s[s[t]]=d+"="+i(e[d]),"c2"==d?c=e[d]:"c1"==d&&(l=1));if(s[t]<=0||""==c)return;if((o=e.options||{}).d=o.d||document,"string"==typeof o.url_append){d=0;for(var h,p=(a=o.url_append.replace(/&amp;/,"&").split("&"))[t];d<p;d++)2==(h=a[d].split("="))[t]&&(s[s[t]]=h[0]+"="+i(h[1]))}(function(e,t){var n,i,r,a,o,s="comScore=",l=document,c=l.cookie,u="",d="indexOf",h="substring",p="length",_=2048,f="&ns_",g=window,v=g.encodeURIComponent||escape;if(c[d](s)+1)for(a=0,o=(r=c.split(";"))[p];a<o;a++)(i=r[a][d](s))+1&&(u="&"+unescape(r[a][h](i+s[p])));(e+=f+"_t="+ +new Date+f+"c="+(l.characterSet||l.defaultCharset||"")+"&c8="+v(l.title)+u+"&c7="+v(l.URL)+"&c9="+v(l.referrer))[p]>_&&e[d]("&")>0&&(n=e[h](0,2040).lastIndexOf("&"),e=(e[h](0,n)+f+"cut="+v(e[h](n+1)))[h](0,_)),l.images?(i=new Image,g.ns_p||(ns_p=i),"function"==typeof t&&(i.onload=i.onerror=t),i.src=e):l.write("<","p","><",'img src="',e,'" height="1" width="1" alt="*"',"><","/p",">")})(["http","s"==o.d.URL.charAt(4)?"s://sb":"://b",r,"/b?",l?"":"c1=2&",s.join("&").replace(/&$/,"")].join(""),(function(){u(this,o)}))}},c=function(e){for(var n=0,i=(e=e||_comscore)[t];n<i;n++)l(e[n]);e=_comscore=[]},u=function(e,t){if(!(e.src.indexOf("c1=2")<0)&&t.d.createElement&&(t.force_script_extension||2==e.width&&e.height>a.round(100*a.random()))){var n=t.d.createElement(o),i=t.d.getElementsByTagName(o)[0],r=[t.script_extension_url||"//app.scorecardresearch.com/s2e/invite","?","c2=",e.src.match(s)[1]].join("");i&&(n.src=r,n.async=!0,i.parentNode.insertBefore(n,i))}};c(),(e=n.COMSCORE)?(e.purge=c,e.beacon=l):COMSCORE={purge:c,beacon:l}}();var n=n||{};n.StreamSense=n.StreamSense||function(){function e(e){s=e}function t(e){e}function i(e,t){var n=e||"",i="undefined",r=a.comScore||a.sitestat||function(e){var t,n,r,l,c,u="comScore=",d=o.cookie,h="",p="indexOf",_="substring",f="length",g=2048,v="&ns_",m=a.encodeURIComponent||escape;if(d[p](u)+1)for(l=0,c=(r=d.split(";"))[f];l<c;l++)(n=r[l][p](u))+1&&(h="&"+unescape(r[l][_](n+u[f])));(e+=v+"_t="+ +new Date+v+"c="+(o.characterSet||o.defaultCharset||"")+h)[f]>g&&e[p]("&")>0&&(t=e[_](0,2040).lastIndexOf("&"),e=(e[_](0,t)+v+"cut="+m(e[_](t+1)))[_](0,g)),s(e),typeof ns_p===i&&(ns_p={src:e}),ns_p.lastMeasurement=e};if(typeof t!==i){var l=[],c=a.encodeURIComponent||escape;for(var u in t)t.hasOwnProperty(u)&&l.push(c(u)+"="+c(t[u]));/[\?\&]$/.test(n)||(n+="&"),n+=l.join("&")}return r(n)}function r(e,t){for(var n,i=2048,r=a.encodeURIComponent||escape,s=[],l=h.LABELS_ORDER,c=e.split("?"),u=c[0],d=c[1].split("&"),p=0,_=d.length;p<_;p++){var f=d[p].split("="),g=unescape(f[0]),v=unescape(f[1]);g&&(t[g]=v)}var m={};for(p=0,_=l.length;p<_;p++){var y=l[p];t.hasOwnProperty(y)&&(m[y]=!0,s.push(r(y)+"="+r(t[y])))}for(var y in t)m[y]||t.hasOwnProperty(y)&&s.push(r(y)+"="+r(t[y]));return(n=(n=u+"?"+s.join("&"))+(n.indexOf("&c8=")<0?"&c8="+r(o.title):"")+(n.indexOf("&c7=")<0?"&c7="+r(o.URL):"")+(n.indexOf("&c9=")<0?"&c9="+r(o.referrer):"")).length>i&&n.indexOf("&")>0&&(last=n.substr(0,2040).lastIndexOf("&"),n=(n.substring(0,last)+"&ns_cut="+r(n.substring(last+1))).substr(0,i)),n}var a,o,s=function(e,t){};e((function(e,t){(new Image).src=e,t&&setTimeout(t,0)})),t((function(e,t,n){n&&setTimeout(n,0)})),"undefined"!=typeof window&&"undefined"!=typeof document?(a=window,o=document):(a={},o={location:{href:""},title:"",URL:"",referrer:"",cookie:""});var l=function(){var e={uid:function(){var e=1;return function(){return+new Date+"_"+e++}}(),filter:function(e,t){var n={};for(var i in t)t.hasOwnProperty(i)&&e(t[i])&&(n[i]=t[i]);return n},extend:function(e){var t,n=arguments.length;e=e||{};for(var i=1;i<n;i++)if(t=arguments[i])for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);return e},getString:function(e,t){var n=String(e);return null==e?t||"na":n},getLong:function(e,t){var n=Number(e);return null==e||isNaN(n)?t||0:n},getInteger:function(e,t){var n=Number(e);return null==e||isNaN(n)?t||0:n},getBoolean:function(e,t){var n="true"==String(e).toLowerCase();return null==e?t||!1:n},isNotEmpty:function(e){return null!=e&&e.length>0},indexOf:function(t,n){var i=-1;return e.forEach(n,(function(e,n){e==t&&(i=n)})),i},forEach:function(e,t,n){try{if("function"==typeof t)if(n=void 0!==n?n:null,"number"!=typeof e.length||void 0===e[0]){var i=void 0!==e.__proto__;for(var r in e)(!i||i&&void 0===e.__proto__[r])&&"function"!=typeof e[r]&&t.call(n,e[r],r)}else{r=0;for(var a=e.length;r<a;r++)t.call(n,e[r],r)}}catch(e){}},regionMatches:function(e,t,n,i,r){if(t<0||i<0||t+r>e.length||i+r>n.length)return!1;for(;--r>=0;){if(e.charAt(t++)!=n.charAt(i++))return!1}return!0},size:function(e){var t=0;for(var n in e)e.hasOwnProperty(n)&&t++;return t},log:function(e,t){if(void 0!==t&&t){var n=new Date,i=n.getHours()+":"+n.getMinutes()+":"+n.getSeconds();console.log(i,e)}},isTrue:function(e){return void 0!==e&&("string"==typeof e?"true"===(e=e.toLowerCase())||"1"===e||"on"===e:!!e)},toString:function(t){if(void 0===t)return"undefined";if("string"==typeof t)return t;if("[object Array]"===Object.prototype.toString.call(t))return t.join(",");if(e.size(t)>0){var n="";for(var i in t)t.hasOwnProperty(i)&&(n+=i+":"+t[i]+";");return n}return t.toString()},exists:function(e){return void 0!==e&&null!=e},firstGreaterThan0:function(){for(var e=0,t=arguments.length;e<t;e++){var n=arguments[e];if(n>0)return n}return 0},cloneObject:function(e){if(null==e||"object"!=typeof e)return e;var t=e.constructor();for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t},filterMap:function(t,n){for(var i in t)-1==e.indexOf(i,n)&&delete t[i]},getKeys:function(e,t){var n,i=[];for(n in e)(!t||t.test(n))&&e.hasOwnProperty(n)&&(i[i.length]=n);return i},getBrowserName:function(){var e,t,n=navigator.userAgent,i=navigator.appName;return-1!=(t=n.indexOf("Opera"))?i="Opera":-1!=(t=n.indexOf("MSIE"))?i="Microsoft Internet Explorer":-1!=(t=n.indexOf("Android"))?i="Android":-1!=(t=n.indexOf("Chrome"))?i="Chrome":-1!=(t=n.indexOf("Safari"))?i="Safari":-1!=(t=n.indexOf("Firefox"))?i="Firefox":-1!=(t=n.indexOf("Windows NT"))?i="Microsoft Internet Explorer":(e=n.lastIndexOf(" ")+1)<(t=n.lastIndexOf("/"))&&((i=n.substring(e,t)).toLowerCase()==i.toUpperCase()&&(i=navigator.appName)),i},getBrowserFullVersion:function(){var e,t,n=navigator.userAgent,i=""+parseFloat(navigator.appVersion),r=parseInt(navigator.appVersion,10);return-1!=(e=n.indexOf("Opera"))?(i=n.substring(e+6),-1!=(e=n.indexOf("Version"))&&(i=n.substring(e+8))):-1!=(e=n.indexOf("MSIE"))?i=n.substring(e+5):-1!=(e=n.indexOf("Android"))?i=n.substring(e+8):-1!=(e=n.indexOf("Chrome"))?i=n.substring(e+7):-1!=(e=n.indexOf("Safari"))?(i=n.substring(e+7),-1!=(e=n.indexOf("Version"))&&(i=n.substring(e+8))):-1!=(e=n.indexOf("Firefox"))?i=n.substring(e+8):-1!=(e=n.indexOf("Windows NT"))?(e=n.indexOf("rv:"),i=n.substring(e+3)):n.lastIndexOf(" ")+1<(e=n.lastIndexOf("/"))&&(i=n.substring(e+1)),-1!=(t=i.indexOf(";"))&&(i=i.substring(0,t)),-1!=(t=i.indexOf(" "))&&(i=i.substring(0,t)),-1!=(t=i.indexOf(")"))&&(i=i.substring(0,t)),r=parseInt(""+i,10),isNaN(r)&&(i=""+parseFloat(navigator.appVersion)),i}};return e}(),c=function(){var e=["play","pause","end","buffer","keep-alive","hb","custom","ad_play","ad_pause","ad_end","ad_click"];return{PLAY:0,PAUSE:1,END:2,BUFFER:3,KEEP_ALIVE:4,HEART_BEAT:5,CUSTOM:6,AD_PLAY:7,AD_PAUSE:8,AD_END:9,AD_CLICK:10,toString:function(t){return e[t]}}}(),u=function(){var e=[c.END,c.PLAY,c.PAUSE,c.BUFFER];return{IDLE:0,PLAYING:1,PAUSED:2,BUFFERING:3,toEventType:function(t){return e[t]}}}(),d={ADPLAY:c.AD_PLAY,ADPAUSE:c.AD_PAUSE,ADEND:c.AD_END,ADCLICK:c.AD_CLICK},h={STREAMSENSE_VERSION:"4.1408.29",DEFAULT_PLAYERNAME:"streamsense",DEFAULT_HEARTBEAT_INTERVAL:[{playingtime:6e4,interval:1e4},{playingtime:null,interval:6e4}],DEFAULT_KEEP_ALIVE_INTERVAL:12e5,DEFAULT_PAUSED_ON_BUFFERING_INTERVAL:500,C1_VALUE:"19",C10_VALUE:"js",NS_AP_C12M_VALUE:"1",NS_NC_VALUE:"1",PAGE_NAME_LABEL:"name",LABELS_ORDER:["c1","c2","ns_site","ns_vsite","ns_ap_an","ns_ap_pn","ns_ap_pv","c12","name","ns_ak","ns_ap_ec","ns_ap_ev","ns_ap_device","ns_ap_id","ns_ap_csf","ns_ap_bi","ns_ap_pfm","ns_ap_pfv","ns_ap_ver","ns_ap_sv","ns_type","ns_radio","ns_nc","ns_ap_ui","ns_ap_gs","ns_st_sv","ns_st_pv","ns_st_it","ns_st_id","ns_st_ec","ns_st_sp","ns_st_sq","ns_st_cn","ns_st_ev","ns_st_po","ns_st_cl","ns_st_el","ns_st_pb","ns_st_hc","ns_st_mp","ns_st_mv","ns_st_pn","ns_st_tp","ns_st_pt","ns_st_pa","ns_st_ad","ns_st_li","ns_st_ci","ns_ap_jb","ns_ap_res","ns_ap_c12m","ns_ap_install","ns_ap_updated","ns_ap_lastrun","ns_ap_cs","ns_ap_runs","ns_ap_usage","ns_ap_fg","ns_ap_ft","ns_ap_dft","ns_ap_bt","ns_ap_dbt","ns_ap_dit","ns_ap_as","ns_ap_das","ns_ap_it","ns_ap_uc","ns_ap_aus","ns_ap_daus","ns_ap_us","ns_ap_dus","ns_ap_ut","ns_ap_oc","ns_ap_uxc","ns_ap_uxs","ns_ap_lang","ns_ap_miss","ns_ts","ns_st_ca","ns_st_cp","ns_st_er","ns_st_pe","ns_st_ui","ns_st_bc","ns_st_bt","ns_st_bp","ns_st_pc","ns_st_pp","ns_st_br","ns_st_ub","ns_st_vo","ns_st_ws","ns_st_pl","ns_st_pr","ns_st_ep","ns_st_ty","ns_st_cs","ns_st_ge","ns_st_st","ns_st_dt","ns_st_ct","ns_st_de","ns_st_pu","ns_st_cu","ns_st_fee","c3","c4","c5","c6","c10","c11","c12","c13","c14","c15","c16","c7","c8","c9"]},p=function(){function e(e,t){var i=t[e];null!=i&&(n[e]=i)}var t,n,i=this,r=0,a=0,o=0,s=0,d=0,h=0;l.extend(this,{reset:function(e){null!=e&&e.length>0?l.filterMap(n,e):n={},n.hasOwnProperty("ns_st_cl")||(n.ns_st_cl="0"),n.hasOwnProperty("ns_st_pn")||(n.ns_st_pn="1"),n.hasOwnProperty("ns_st_tp")||(n.ns_st_tp="1"),i.setPauses(0),i.setStarts(0),i.setBufferingTime(0),i.setBufferingTimestamp(-1),i.setPlaybackTime(0),i.setPlaybackTimestamp(-1)},setLabels:function(e,t){null!=e&&l.extend(n,e),i.setRegisters(n,t)},getLabels:function(){return n},setLabel:function(e,t){var n={};n[e]=t,i.setLabels(n,null)},getLabel:function(e){return n[e]},getClipId:function(){return(void 0===t||null==t)&&i.setClipId("1"),t},setClipId:function(e){t=e},setRegisters:function(t,n){var s=t.ns_st_cn;null!=s&&(i.setClipId(s),delete t.ns_st_cn),null!=(s=t.ns_st_bt)&&(o=Number(s),delete t.ns_st_bt),e("ns_st_cl",t),e("ns_st_pn",t),e("ns_st_tp",t),e("ns_st_ub",t),e("ns_st_br",t),n!=u.PLAYING&&null!=n||null!=(s=t.ns_st_sq)&&(a=Number(s),delete t.ns_st_sq),n!=u.BUFFERING&&null!=(s=t.ns_st_pt)&&(d=Number(s),delete t.ns_st_pt),n!=u.PAUSED&&n!=u.IDLE&&null!=n||null!=(s=t.ns_st_pc)&&(r=Number(s),delete t.ns_st_pc)},createLabels:function(e,t){var n=t||{};return n.ns_st_cn=i.getClipId(),n.ns_st_bt=String(i.getBufferingTime()),e!=c.PLAY&&null!=e||(n.ns_st_sq=String(a)),e!=c.PAUSE&&e!=c.END&&e!=c.KEEP_ALIVE&&e!=c.HEART_BEAT&&null!=e||(n.ns_st_pt=String(i.getPlaybackTime()),n.ns_st_pc=String(r)),l.extend(n,i.getLabels()),n},incrementPauses:function(){r++},incrementStarts:function(){a++},getBufferingTime:function(){var e=o;return s>=0&&(e+=+new Date-s),e},setBufferingTime:function(e){o=e},getPlaybackTime:function(){var e=d;return h>=0&&(e+=+new Date-h),e},setPlaybackTime:function(e){d=e},getPlaybackTimestamp:function(){return h},setPlaybackTimestamp:function(e){h=e},getBufferingTimestamp:function(){return s},setBufferingTimestamp:function(e){s=e},getPauses:function(){return r},setPauses:function(e){r=e},getStarts:function(){return a},setStarts:function(e){a=e}}),n={},i.reset()},_=function(){var e,t,n=this,i=null,r=0,a=0,o=0,s=0,d=0,h=0,_=!1;l.extend(this,{reset:function(e){null!=e&&e.length>0?l.filterMap(t,e):t={},n.setPlaylistId(+new Date+"_"+h),n.setBufferingTime(0),n.setPlaybackTime(0),n.setPauses(0),n.setStarts(0),n.setRebufferCount(0),_=!1},setLabels:function(e,i){null!=e&&l.extend(t,e),n.setRegisters(t,i)},getLabels:function(){return t},setLabel:function(e,t){var i={};i[e]=t,n.setLabels(i,null)},getLabel:function(e){return t[e]},getClip:function(){return i},getPlaylistId:function(){return e},setPlaylistId:function(t){e=t},setRegisters:function(t,n){var i=t.ns_st_sp;null!=i&&(r=Number(i),delete t.ns_st_sp),null!=(i=t.ns_st_bc)&&(o=Number(i),delete t.ns_st_bc),null!=(i=t.ns_st_bp)&&(s=Number(i),delete t.ns_st_bp),null!=(i=t.ns_st_id)&&(e=i,delete t.ns_st_id),n!=u.BUFFERING&&null!=(i=t.ns_st_pa)&&(d=Number(i),delete t.ns_st_pa),n!=u.PAUSED&&n!=u.IDLE&&null!=n||null!=(i=t.ns_st_pp)&&(a=Number(i),delete t.ns_st_pp)},createLabels:function(t,i){var s=i||{};return s.ns_st_bp=String(n.getBufferingTime()),s.ns_st_sp=String(r),s.ns_st_id=String(e),o>0&&(s.ns_st_bc=String(o)),t!=c.PAUSE&&t!=c.END&&t!=c.KEEP_ALIVE&&t!=c.HEART_BEAT&&null!=t||(s.ns_st_pa=String(n.getPlaybackTime()),s.ns_st_pp=String(a)),t!=c.PLAY&&null!=t||n.didFirstPlayOccurred()||(s.ns_st_pb="1",n.setFirstPlayOccurred(!0)),l.extend(s,n.getLabels()),s},incrementStarts:function(){r++},incrementPauses:function(){a++,i.incrementPauses()},setPlaylistCounter:function(e){h=e},incrementPlaylistCounter:function(){h++},addPlaybackTime:function(e){if(i.getPlaybackTimestamp()>=0){var t=e-i.getPlaybackTimestamp();i.setPlaybackTimestamp(-1),i.setPlaybackTime(i.getPlaybackTime()+t),n.setPlaybackTime(n.getPlaybackTime()+t)}},addBufferingTime:function(e){if(i.getBufferingTimestamp()>=0){var t=e-i.getBufferingTimestamp();i.setBufferingTimestamp(-1),i.setBufferingTime(i.getBufferingTime()+t),n.setBufferingTime(n.getBufferingTime()+t)}},getBufferingTime:function(){var e=s;return i.getBufferingTimestamp()>=0&&(e+=+new Date-i.getBufferingTimestamp()),e},setBufferingTime:function(e){s=e},getPlaybackTime:function(){var e=d;return i.getPlaybackTimestamp()>=0&&(e+=+new Date-i.getPlaybackTimestamp()),e},setPlaybackTime:function(e){d=e},getStarts:function(){return r},setStarts:function(e){r=e},getPauses:function(){return a},setPauses:function(e){a=e},getRebufferCount:function(){return o},incrementRebufferCount:function(){o++},setRebufferCount:function(e){o=e},didFirstPlayOccurred:function(){return _},setFirstPlayOccurred:function(e){_=e}}),i=new p,t={},n.reset()},f=function(){var a=function(a,o){function d(e){var t=0;if(null!=re)for(var n=0;n<re.length;n++){var i=re[n],r=i.playingtime;if(!r||e<r){t=i.interval;break}}return t}function p(){m();var e=d(te.getClip().getPlaybackTime());e>0&&(K=setTimeout(v,se>0?se:e));se=0}function f(){m();var e=d(te.getClip().getPlaybackTime());se=e-te.getClip().getPlaybackTime()%e,null!=K&&m()}function g(){se=0,0,le=0}function v(){le++,M(N(c.HEART_BEAT,null)),se=0,p()}function m(){null!=K&&(clearTimeout(K),K=null)}function y(){E(),H=setTimeout(S,ae)}function S(){M(N(c.KEEP_ALIVE,null)),ee++,y()}function E(){null!=H&&(clearTimeout(H),H=null)}function b(){w(),z.isPauseOnBufferingEnabled()&&D(u.PAUSED)&&(j=setTimeout(T,oe))}function T(){Y==u.PLAYING&&(te.incrementRebufferCount(),te.incrementPauses(),M(N(c.PAUSE,null)),ee++,Y=u.PAUSED)}function w(){null!=j&&(clearTimeout(j),j=null)}function A(e){return e==u.PLAYING||e==u.PAUSED}function C(){V&&(clearTimeout(V),V=null)}function I(e){return e==c.PLAY?u.PLAYING:e==c.PAUSE?u.PAUSED:e==c.BUFFER?u.BUFFERING:e==c.END?u.IDLE:null}function P(e,t,n){if(C(),n)V=setTimeout(function(e,t){return function(){P(e,t)}}(e,t),n);else if(function(e){return null!=e&&R()!=e}(e)){var i=R(),r=Z,a=O(t),o=r>=0?a-r:0;(function(e,t){var n=O(t);if(e==u.PLAYING)te.addPlaybackTime(n),f(),E();else if(e==u.BUFFERING)te.addBufferingTime(n),w();else if(e==u.IDLE){var i=l.getKeys(te.getClip().getLabels());te.getClip().reset(i)}})(R(),t),function(e,t){var n=O(t),i=function(e){var t=-1;return e.hasOwnProperty("ns_st_po")&&(t=l.getInteger(e.ns_st_po)),t}(t);$=i,e==u.PLAYING?(p(),y(),te.getClip().setPlaybackTimestamp(n),D(e)&&(te.getClip().incrementStarts(),te.getStarts()<1&&te.setStarts(1))):e==u.PAUSED?D(e)&&te.incrementPauses():e==u.BUFFERING?(te.getClip().setBufferingTimestamp(n),ie&&b()):e==u.IDLE&&g()}(e,t),function(e){e}(R()),function(e){B=e,Z=+new Date}(e);for(var s=0,c=Q.length;s<c;s++)Q[s](i,e,t,o);k(t),te.setRegisters(t,e),te.getClip().setRegisters(t,e);var d=N(u.toEventType(e),t);l.extend(d,t),D(B)&&(M(d),Y=B,ee++)}}function k(e){var t=e.ns_st_mp;null!=t&&(q=t,delete e.ns_st_mp),null!=(t=e.ns_st_mv)&&(G=t,delete e.ns_st_mv),null!=(t=e.ns_st_ec)&&(ee=Number(t),delete e.ns_st_ec)}function M(e,t){void 0===t&&(t=!0),t&&function(e){W=N(null),l.extend(W,e)}(e);var n=z.getPixelURL();if(U){if(!function(){var e=U.getAppContext(),t=U.getSalt(),n=U.getPixelURL();return null==e||null==t||0==t.length||null==n||0==n.length}()){var i=ue.am,a=ue.et,o=i.newApplicationMeasurement(U,a.HIDDEN,e,n);U.getQueue().offer(o)}}else n&&s(r(n,e))}function D(e){return(e!=u.PAUSED&&e!=u.IDLE||Y!=u.IDLE&&null!=Y)&&(e!=u.BUFFERING&&Y!=e)}function O(e){var t=-1;return e.hasOwnProperty("ns_ts")&&(t=Number(e.ns_ts)),t}function R(){return B}function N(){var e,t;1==arguments.length?(e=u.toEventType(B),t=arguments[0]):(e=arguments[0],t=arguments[1]);var n={};if("undefined"!=typeof document){var i=document;n.c7=i.URL,n.c8=i.title,n.c9=i.referrer}return null!=t&&l.extend(n,t),n.hasOwnProperty("ns_ts")||(n.ns_ts=String(+new Date)),null!=e&&!n.hasOwnProperty("ns_st_ev")&&(n.ns_st_ev=c.toString(e)),z.isPersistentLabelsShared()&&U&&l.extend(n,U.getLabels()),l.extend(n,z.getLabels()),L(e,n),te.createLabels(e,n),te.getClip().createLabels(e,n),n.hasOwnProperty("ns_st_mp")||(n.ns_st_mp=q),n.hasOwnProperty("ns_st_mv")||(n.ns_st_mv=G),n.hasOwnProperty("ns_st_ub")||(n.ns_st_ub="0"),n.hasOwnProperty("ns_st_br")||(n.ns_st_br="0"),n.hasOwnProperty("ns_st_pn")||(n.ns_st_pn="1"),n.hasOwnProperty("ns_st_tp")||(n.ns_st_tp="1"),n.hasOwnProperty("ns_st_it")||(n.ns_st_it="c"),n.ns_st_sv=h.STREAMSENSE_VERSION,n.ns_type="hidden",n}function L(e,t){var n=t||{};if(n.ns_st_ec=String(ee),!n.hasOwnProperty("ns_st_po")){var i=$,r=O(n);(e==c.PLAY||e==c.KEEP_ALIVE||e==c.HEART_BEAT||null==e&&B==u.PLAYING)&&(i+=r-te.getClip().getPlaybackTimestamp()),n.ns_st_po=l.getInteger(i)}return e==c.HEART_BEAT&&(n.ns_st_hc=String(le)),n}function x(e){O(e)<0&&(e.ns_ts=String(+new Date))}var F,V,B,U,j,H,K,Y,q,G,W,Q,z=this,X=500,J=null,Z=0,$=0,ee=0,te=null,ne=!0,ie=!0,re=h.DEFAULT_HEARTBEAT_INTERVAL,ae=h.DEFAULT_KEEP_ALIVE_INTERVAL,oe=h.DEFAULT_PAUSED_ON_BUFFERING_INTERVAL,se=0,le=0,ce=!1,ue={};l.extend(this,{reset:function(e){te.reset(e),te.setPlaylistCounter(0),te.setPlaylistId(+new Date+"_1"),te.getClip().reset(e),null==e||e.isEmpty()?F={}:l.filterMap(F,e),ee=1,le=0,f(),g(),E(),w(),C(),B=u.IDLE,null,Z=-1,Y=null,q=h.DEFAULT_PLAYERNAME,G=h.STREAMSENSE_VERSION,W=null},setPauseOnBufferingInterval:function(e){oe=e},getPauseOnBufferingInterval:function(){return oe},setKeepAliveInterval:function(e){ae=e},getKeepAliveInterval:function(){return ae},setHeartbeatIntervals:function(e){re=e},notify:function(){var e,t,n,i;3==arguments.length?(n=arguments[1],i=arguments[2]):(n={},i=arguments[1]),e=I(t=arguments[0]);var r=l.extend({},n);if(x(r),r.hasOwnProperty("ns_st_po")||(r.ns_st_po=l.getInteger(i).toString()),t==c.PLAY||t==c.PAUSE||t==c.BUFFER||t==c.END)z.isPausePlaySwitchDelayEnabled()&&A(B)&&A(e)&&(B!=u.PLAYING||e!=u.PAUSED||V)?P(e,r,X):P(e,r);else{var a=N(t,r);l.extend(a,r),M(a,!1),ee++}},getLabels:function(){return F},getState:function(){return B},setLabels:function(e){null!=e&&(null==F?F=e:l.extend(F,e))},getLabel:function(e){return F[e]},setLabel:function(e,t){null==t?delete F[e]:F[e]=t},setPixelURL:function(e){if(null==e||0==e.length)return null;var t=decodeURIComponent||unescape,n=e.indexOf("?");if(n>=0){if(n<e.length-1){for(var i=e.substring(n+1).split("&"),r=0,a=i.length;r<a;r++){var o=i[r].split("=");2==o.length?z.setLabel(o[0],t(o[1])):1==o.length&&z.setLabel(h.PAGE_NAME_LABEL,t(o[0]))}e=e.substring(0,n+1)}}else e+="?";return J=e},getPixelURL:function(){return J||("undefined"!=typeof ns_p&&"string"==typeof ns_p.src?J=ns_p.src.replace(/&amp;/,"&").replace(/&ns__t=\d+/,""):"string"==typeof ns_pixelUrl?J=ns_pixelUrl.replace(/&amp;/,"&").replace(/&ns__t=\d+/,""):null)},isPersistentLabelsShared:function(){return ne},setPersistentLabelsShared:function(e){ne=e},isPauseOnBufferingEnabled:function(){return ie},setPauseOnBufferingEnabled:function(e){ie=e},isPausePlaySwitchDelayEnabled:function(){return ce},setPausePlaySwitchDelayEnabled:function(e){ce=e},setPausePlaySwitchDelay:function(e){e&&e>0&&(X=e)},getPausePlaySwitchDelay:function(){return X},setClip:function(e,t){var n=!1;return B==u.IDLE&&(te.getClip().reset(),te.getClip().setLabels(e,null),t&&te.incrementStarts(),n=!0),n},setPlaylist:function(e){var t=!1;return B==u.IDLE&&(te.incrementPlaylistCounter(),te.reset(),te.getClip().reset(),te.setLabels(e,null),t=!0),t},importState:function(e){reset();var t=l.extend({},e);te.setRegisters(t,null),te.getClip().setRegisters(t,null),k(t),ee++},exportState:function(){return W},getVersion:function(){return h.STREAMSENSE_VERSION},addListener:function(e){Q.push(e)},removeListener:function(e){Q.splice(l.indexOf(e,Q),1)},getClip:function(){return te.getClip()},getPlaylist:function(){return te},setHttpGet:e,setHttpPost:t}),l.extend(this,{adNotify:function(e,t,n){(t=t||{}).ns_st_ad=1,e>=c.AD_PLAY&&e<=c.AD_CLICK&&z.notify(e,t,n)},customNotify:function(e,t){z.notify(c.CUSTOM,e,t)},viewNotify:function(e,t){(e=e||z.getPixelURL())&&i(e,t)}}),n.comScore&&(ue=n.comScore.exports,U=ue.c()),F={},ee=1,B=u.IDLE,te=new _,j=null,ie=!0,K=null,le=0,g(),H=null,V=null,ce=!1,Y=null,$=0,Q=[],z.reset(),a&&z.setLabels(a),o&&z.setPixelURL(o)};return function(e){function t(e,t){return o[c]||r(e,t)}function i(){c=-1;for(var e=0;e<=s;e++)if(o.hasOwnProperty(e)){c=e;break}return n.StreamSense.activeIndex=c,c}function r(e,t){return t=t||null,(e=e||null)&&"object"==typeof e&&(t=e,e=null),o[++s]=new n.StreamSense(t,e),i(),o[s]}function a(){var e=!1,t=c;if("number"==typeof arguments[0]&&isFinite(arguments[0]))t=arguments[0];else if(arguments[0]instanceof n.StreamSense)for(var r in o)if(o[r]===arguments[0]){t=r;break}return o.hasOwnProperty(t)&&(e=o[t],delete o[t],e.reset(),i()),e}var o={},s=-1,c=-1;l.extend(e,{activeIndex:c,newInstance:r,new:r,destroyInstance:a,destroy:a,newPlaylist:function(e){return e=e||{},t().setPlaylist(e),t().getPlaylist()},newClip:function(e,n,i){return e=e||{},"number"==typeof n&&(e.ns_st_cn=n),t().setClip(e,i),t().getClip()},notify:function(e,n,i){return void 0!==e&&(i=i||null,n=n||{},t().notify(e,n,i))},setLabels:function(e){void 0!==e&&t().setLabels(e)},getLabels:function(){return t().getLabels()},setPlaylistLabels:function(e){void 0!==e&&t().getPlaylist().setLabels(e)},getPlaylistLabels:function(){return t().getPlaylist().getLabels()},setClipLabels:function(e){void 0!==e&&t().getClip().setLabels(e)},getClipLabels:function(){return t().getClip().getLabels()},resetInstance:function(e){return t().reset(e||{})},resetPlaylist:function(e){return t().getPlaylist().reset(e||{})},resetClip:function(e){return t().getClip().reset(e||{})},viewEvent:function(e){return e=e||{},t().viewNotify(null,e)},customEvent:function(e,n){return arguments.length>2&&(e=arguments[1],n=arguments[2]),e=e||{},"number"==typeof n&&(e.ns_st_po=n),t().customNotify(e,n)},exportState:function(){return t().exportState()},importState:function(e){t().importState(e)}})}(a),a}();return f.AdEvents=d,f.PlayerEvents=c,n.StreamingTag=n.StreamingTag||function(){var e=function(e){function t(e){return l.exists(e)||(e={}),l.exists(e.ns_st_ci)||(e.ns_st_ci="0"),l.exists(e.c3)||(e.c3="*null"),l.exists(e.c4)||(e.c4="*null"),l.exists(e.c6)||(e.c6="*null"),e}function n(e){return s>0&&e>=s?d+=e-s:d=0,d}function i(e){_.getState()!=u.IDLE&&_.getState()!=u.PAUSED?_.notify(c.END,n(e)):_.getState()==u.PAUSED&&_.notify(c.END,d)}function r(e,t,n){if(l.exists(e)&&l.exists(t)&&l.exists(n)){var i=t[e],r=n[e];return l.exists(i)&&l.exists(r)&&i===r}return!1}function a(e,t){i(e),o++,_.setClip({ns_st_cn:o,ns_st_pn:"1",ns_st_ct:"vc",ns_st_tp:"0"}),_.getClip().setLabels(t),h=t,s=e,d=0,_.notify(c.PLAY,d)}var o=0,s=0,d=0,h=null,p=!1,_=new f;l.extend(this,{playAdvertisement:function(){var e=+new Date;i(e),o++;var n=t(null);n.ns_st_cn=o,n.ns_st_pn="1",n.ns_st_ct="va",n.ns_st_tp="1",n.ns_st_ad="1",_.setClip(n),d=0,_.notify(c.PLAY,d),s=e,p=!1},playContentPart:function(e){var n=+new Date;e=t(e),p&&function(e){return r("ns_st_ci",h,e)&&r("c3",h,e)&&r("c4",h,e)&&r("c6",h,e)}(e)?(_.getClip().setLabels(e),_.getState()!=u.PLAYING&&(s=n,_.notify(c.PLAY,d))):a(n,e),p=!0},stop:function(){var e=+new Date;_.notify(c.PAUSE,n(e))}}),function(){if(l.exists(e)&&l.exists(e.customerC2)){var t=e.secure?"https://sb":"http"+("s"==document.location.href.charAt(4)?"s://sb":"://b");_.setPixelURL(t+".scorecardresearch.com/p?c1=2"),_.setLabel("c2",e.customerC2),_.setLabel("ns_st_it","r")}}()};return e}(),f}(),e.exports=n},function(e,t,n){!function(){"use strict";var t="undefined"!=typeof window&&void 0!==window.document?window.document:{},n=e.exports,i="undefined"!=typeof Element&&"ALLOW_KEYBOARD_INPUT"in Element,r=function(){for(var e,n=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],i=0,r=n.length,a={};i<r;i++)if((e=n[i])&&e[1]in t){for(i=0;i<e.length;i++)a[n[0][i]]=e[i];return a}return!1}(),a={change:r.fullscreenchange,error:r.fullscreenerror},o={request:function(e){return new Promise(function(n){var a=r.requestFullscreen,o=function(){this.off("change",o),n()}.bind(this);e=e||t.documentElement,/ Version\/5\.1(?:\.\d+)? Safari\//.test(navigator.userAgent)?e[a]():e[a](i?Element.ALLOW_KEYBOARD_INPUT:{}),this.on("change",o)}.bind(this))},exit:function(){return new Promise(function(e){var n=function(){this.off("change",n),e()}.bind(this);t[r.exitFullscreen](),this.on("change",n)}.bind(this))},toggle:function(e){return this.isFullscreen?this.exit():this.request(e)},onchange:function(e){this.on("change",e)},onerror:function(e){this.on("error",e)},on:function(e,n){var i=a[e];i&&t.addEventListener(i,n,!1)},off:function(e,n){var i=a[e];i&&t.removeEventListener(i,n,!1)},raw:r};r?(Object.defineProperties(o,{isFullscreen:{get:function(){return Boolean(t[r.fullscreenElement])}},element:{enumerable:!0,get:function(){return t[r.fullscreenElement]}},enabled:{enumerable:!0,get:function(){return Boolean(t[r.fullscreenEnabled])}}}),n?e.exports=o:window.screenfull=o):n?e.exports=!1:window.screenfull=!1}()},function(e,t,n){(function(t){
/**
 * @license
 * Adobe Visitor API for JavaScript version: 4.4.0
 * Copyright 2019 Adobe, Inc. All Rights Reserved
 * More info available at https://marketing.adobe.com/resources/help/en_US/mcvid/
 */
!function(){"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function n(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t,n){var i=null==e?void 0:e[t];return void 0===i?n:i}function r(e,t){if(e===t)return 0;var n=e.toString().split("."),i=t.toString().split(".");return function(e){for(var t=/^\d+$/,n=0,i=e.length;n<i;n++)if(!t.test(e[n]))return!1;return!0}(n.concat(i))?(function(e,t){for(;e.length<t.length;)e.push("0");for(;t.length<e.length;)t.push("0")}(n,i),function(e,t){for(var n=0;n<e.length;n++){var i=parseInt(e[n],10),r=parseInt(t[n],10);if(i>r)return 1;if(r>i)return-1}return 0}(n,i)):NaN}function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.isEnabled,n=e.cookieName,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=i.cookies;return t&&n&&r?{remove:function(){r.remove(n)},get:function(){var e=r.get(n),t={};try{t=JSON.parse(e)}catch(e){t={}}return t},set:function(e,t){t=t||{},r.set(n,JSON.stringify(e),{domain:t.optInCookieDomain||"",cookieLifetime:t.optInStorageExpiry||3419e4,expires:!0})}}:{get:Se,set:Se,remove:Se}}function o(e){this.name=this.constructor.name,this.message=e,"function"==typeof Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error(e).stack}function s(){function e(e,t){var n=ue(e);return n.length?n.every((function(e){return!!t[e]})):de(t)}function t(){I(A),C($.COMPLETE),v(g.status,g.permissions),f.set(g.permissions,{optInCookieDomain:c,optInStorageExpiry:u}),m.execute(Ae)}function n(e){return function(n,i){if(!he(n))throw new Error("[OptIn] Invalid category(-ies). Please use the `OptIn.Categories` enum.");return C($.CHANGED),Object.assign(A,pe(ue(n),e)),i||t(),g}}var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=i.doesOptInApply,o=i.previousPermissions,s=i.preOptInApprovals,l=i.isOptInStorageEnabled,c=i.optInCookieDomain,u=i.optInStorageExpiry,d=i.isIabContext,h=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},p=h.cookies,_=Ee(o);be(_,"Invalid `previousPermissions`!"),be(s,"Invalid `preOptInApprovals`!");var f=a({isEnabled:!!l,cookieName:"adobeujs-optin"},{cookies:p}),g=this,v=Z(g),m=re(),y=ge(_),S=ge(s),E=f.get(),b={},T=function(e,t){return ve(e)||t&&ve(t)?$.COMPLETE:$.PENDING}(y,E),w=function(e,t,n){var i=pe(ie,!r);return r?Object.assign({},i,e,t,n):i}(S,y,E),A=_e(w),C=function(e){return T=e},I=function(e){return w=e};g.deny=n(!1),g.approve=n(!0),g.denyAll=g.deny.bind(g,ie),g.approveAll=g.approve.bind(g,ie),g.isApproved=function(t){return e(t,g.permissions)},g.isPreApproved=function(t){return e(t,S)},g.fetchPermissions=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=t?g.on($.COMPLETE,e):Se;return!r||r&&g.isComplete||s?e(g.permissions):t||m.add(Ae,(function(){return e(g.permissions)})),n},g.complete=function(){g.status===$.CHANGED&&t()},g.registerPlugin=function(e){if(!e||!e.name||"function"!=typeof e.onRegister)throw new Error(Ce);b[e.name]||(b[e.name]=e,e.onRegister.call(e,g))},g.execute=we(b),Object.defineProperties(g,{permissions:{get:function(){return w}},status:{get:function(){return T}},Categories:{get:function(){return ee}},doesOptInApply:{get:function(){return!!r}},isPending:{get:function(){return g.status===$.PENDING}},isComplete:{get:function(){return g.status===$.COMPLETE}},__plugins:{get:function(){return Object.keys(b)}},isIabContext:{get:function(){return d}}})}function l(e,t){if(void 0===t)return e;var n=setTimeout((function(){n=null,e.call(e,new o("The call took longer than you wanted!"))}),t);return function(){n&&(clearTimeout(n),e.apply(e,arguments))}}function c(){if(window.__cmp)return window.__cmp;var e=window;if(e!==window.top){for(var t;!t;){e=e.parent;try{e.frames.__cmpLocator&&(t=e)}catch(e){}if(e===window.top)break}if(t){var n={};return window.__cmp=function(e,i,r){var a=Math.random()+"",o={__cmpCall:{command:e,parameter:i,callId:a}};n[a]=r,t.postMessage(o,"*")},window.addEventListener("message",(function(e){var t=e.data;if("string"==typeof t)try{t=JSON.parse(e.data)}catch(e){}if(t.__cmpReturn){var i=t.__cmpReturn;n[i.callId]&&(n[i.callId](i.returnValue,i.success),delete n[i.callId])}}),!1),window.__cmp}le.error("__cmp not found")}else le.error("__cmp not found")}var u="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{};Object.assign=Object.assign||function(e){for(var t,n,i=1;i<arguments.length;++i)for(t in n=arguments[i])Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t]);return e};var d,h,p={HANDSHAKE:"HANDSHAKE",GETSTATE:"GETSTATE",PARENTSTATE:"PARENTSTATE"},_={MCMID:"getMarketingCloudVisitorID",MCAID:"getAnalyticsVisitorID",MCAAMB:"getAudienceManagerBlob",MCAAMLH:"getAudienceManagerLocationHint",MCOPTOUT:"isOptedOut",ALLFIELDS:"getVisitorValues"},f={MCMID:"getMarketingCloudVisitorID",MCAAMB:"getAudienceManagerBlob",MCAAMLH:"getAudienceManagerLocationHint",MCOPTOUT:"isOptedOut",MCAID:"getAnalyticsVisitorID",CUSTOMERIDS:"getCustomerIDs",ALLFIELDS:"getVisitorValues"},g={MC:"MCMID",A:"MCAID",AAM:"MCAAMB"},v={MCMID:"MCMID",MCOPTOUT:"MCOPTOUT",MCAID:"MCAID",MCAAMLH:"MCAAMLH",MCAAMB:"MCAAMB"},m={UNKNOWN:0,AUTHENTICATED:1,LOGGED_OUT:2},y={GLOBAL:"global"},S={MCMID:"MCMID",MCAID:"MCAID",MCAAMB:"MCAAMB",MCAAMLH:"MCAAMLH",MCOPTOUT:"MCOPTOUT",CUSTOMERIDS:"CUSTOMERIDS"},E=function(e){function t(){}function n(t,n){var i=this;return function(){var r=e(0,t),a={};return a[t]=r,i.setStateAndPublish(a),n(r),r}}this.getMarketingCloudVisitorID=function(e){e=e||t;var i=this.findField(S.MCMID,e),r=n.call(this,S.MCMID,e);return void 0!==i?i:r()},this.getVisitorValues=function(e){this.getMarketingCloudVisitorID((function(t){e({MCMID:t})}))}},b=p,T=_,w={CUSTOMERIDS:"getCustomerIDs"},A=function(){function e(){}function t(e,t){var n=this;return function(){return n.callbackRegistry.add(e,t),n.messageParent(b.GETSTATE),""}}Object.keys(T).forEach((function(n){this[T[n]]=function(i){i=i||e;var r=this.findField(n,i),a=t.call(this,n,i);return void 0!==r?r:a()}}),this),Object.keys(w).forEach((function(t){this[w[t]]=function(){return this.findField(t,e)||{}}}),this)},C=_,I=function(){Object.keys(C).forEach((function(e){this[C[e]]=function(t){this.callbackRegistry.add(e,t)}}),this)},P=function(e,t){return e(t={exports:{}},t.exports),t.exports}((function(t,n){n.isObjectEmpty=function(e){return e===Object(e)&&0===Object.keys(e).length},n.isValueEmpty=function(e){return""===e||n.isObjectEmpty(e)},n.getIeVersion=function(){if(document.documentMode)return document.documentMode;for(var e=7;e>4;e--){var t=document.createElement("div");if(t.innerHTML="\x3c!--[if IE "+e+"]><span></span><![endif]--\x3e",t.getElementsByTagName("span").length)return t=null,e;t=null}return null},n.encodeAndBuildRequest=function(e,t){return e.map(encodeURIComponent).join(t)},n.isObject=function(t){return null!==t&&"object"===e(t)&&!1===Array.isArray(t)},n.defineGlobalNamespace=function(){return window.adobe=n.isObject(window.adobe)?window.adobe:{},window.adobe},n.pluck=function(e,t){return t.reduce((function(t,n){return e[n]&&(t[n]=e[n]),t}),Object.create(null))},n.parseOptOut=function(e,t,n){t||(t=n,e.d_optout&&e.d_optout instanceof Array&&(t=e.d_optout.join(",")));var i=parseInt(e.d_ottl,10);return isNaN(i)&&(i=7200),{optOut:t,d_ottl:i}},n.normalizeBoolean=function(e){var t=e;return"true"===e?t=!0:"false"===e&&(t=!1),t}})),k=(P.isObjectEmpty,P.isValueEmpty,P.getIeVersion,P.encodeAndBuildRequest,P.isObject,P.defineGlobalNamespace,P.pluck,P.parseOptOut,P.normalizeBoolean,function(){return{callbacks:{},add:function(e,t){this.callbacks[e]=this.callbacks[e]||[];var n=this.callbacks[e].push(t)-1,i=this;return function(){i.callbacks[e].splice(n,1)}},execute:function(e,t){if(this.callbacks[e]){t=(t=void 0===t?[]:t)instanceof Array?t:[t];try{for(;this.callbacks[e].length;){var n=this.callbacks[e].shift();"function"==typeof n?n.apply(null,t):n instanceof Array&&n[1].apply(n[0],t)}delete this.callbacks[e]}catch(e){}}},executeAll:function(e,t){(t||e&&!P.isObjectEmpty(e))&&Object.keys(this.callbacks).forEach((function(t){var n=void 0!==e[t]?e[t]:"";this.execute(t,n)}),this)},hasCallbacks:function(){return Boolean(Object.keys(this.callbacks).length)}}}),M=p,D={0:"prefix",1:"orgID",2:"state"},O=function(e,t){this.parse=function(e){try{var t={};return e.data.split("|").forEach((function(e,n){void 0!==e&&(t[D[n]]=2!==n?e:JSON.parse(e))})),t}catch(e){}},this.isInvalid=function(n){var i=this.parse(n);if(!i||Object.keys(i).length<2)return!0;var r=e!==i.orgID,a=!t||n.origin!==t,o=-1===Object.keys(M).indexOf(i.prefix);return r||a||o},this.send=function(n,i,r){var a=i+"|"+e;r&&r===Object(r)&&(a+="|"+JSON.stringify(r));try{n.postMessage(a,t)}catch(e){}}},R=p,N=function(e,t,n,i){function r(e){Object.assign(c,e)}function a(e){if(!p.isInvalid(e)){h=!1;var t=p.parse(e);c.setStateAndPublish(t.state)}}function o(e){!h&&d&&(h=!0,p.send(i,e))}function s(){r(new E(n._generateID)),c.getMarketingCloudVisitorID(),c.callbackRegistry.executeAll(c.state,!0),u.removeEventListener("message",l)}function l(e){if(!p.isInvalid(e)){var t=p.parse(e);h=!1,u.clearTimeout(c._handshakeTimeout),u.removeEventListener("message",l),r(new A(c)),u.addEventListener("message",a),c.setStateAndPublish(t.state),c.callbackRegistry.hasCallbacks()&&o(R.GETSTATE)}}var c=this,d=t.whitelistParentDomain;c.state={ALLFIELDS:{}},c.version=n.version,c.marketingCloudOrgID=e,c.cookieDomain=n.cookieDomain||"",c._instanceType="child";var h=!1,p=new O(e,d);c.callbackRegistry=k(),c.init=function(){u.s_c_in||(u.s_c_il=[],u.s_c_in=0),c._c="Visitor",c._il=u.s_c_il,c._in=u.s_c_in,c._il[c._in]=c,u.s_c_in++,Object.keys(n).forEach((function(e){0!==e.indexOf("_")&&"function"==typeof n[e]&&(c[e]=function(){})})),c.getSupplementalDataID=n.getSupplementalDataID,c.isAllowed=function(){return!0},r(new I(c)),d&&postMessage?(u.addEventListener("message",l),o(R.HANDSHAKE),c._handshakeTimeout=setTimeout(s,250)):s()},c.findField=function(e,t){if(void 0!==c.state[e])return t(c.state[e]),c.state[e]},c.messageParent=o,c.setStateAndPublish=function(e){Object.assign(c.state,e),Object.assign(c.state.ALLFIELDS,e),c.callbackRegistry.executeAll(c.state)}},L=p,x=f,F=_,V=g,B=function(e,t){function n(){var t={};return Object.keys(x).forEach((function(n){var i=x[n],r=e[i]();P.isValueEmpty(r)||(t[n]=r)})),t}function i(t){return function n(i){var r=function(){var t=[];return e._loading&&Object.keys(e._loading).forEach((function(n){if(e._loading[n]){var i=V[n];t.push(i)}})),t.length?t:null}();if(r){var a=F[r[0]];e[a](n,!0)}else t()}}function r(e,i){var r=n();t.send(e,i,r)}function a(e){s(e),r(e,L.HANDSHAKE)}function o(e){i((function(){r(e,L.PARENTSTATE)}))()}function s(n){var i=e.setCustomerIDs;e.setCustomerIDs=function(r){i.call(e,r),t.send(n,L.PARENTSTATE,{CUSTOMERIDS:e.getCustomerIDs()})}}return function(e){t.isInvalid(e)||(t.parse(e).prefix===L.HANDSHAKE?a:o)(e.source)}},U={get:function(e){e=encodeURIComponent(e);var t=(";"+document.cookie).split(" ").join(";"),n=t.indexOf(";"+e+"="),i=n<0?n:t.indexOf(";",n+1);return n<0?"":decodeURIComponent(t.substring(n+2+e.length,i<0?t.length:i))},set:function(e,t,n){var r=i(n,"cookieLifetime"),a=i(n,"expires"),o=i(n,"domain"),s=i(n,"secure")?"Secure":"";if(a&&"SESSION"!==r&&"NONE"!==r){var l=""!==t?parseInt(r||0,10):-60;if(l)(a=new Date).setTime(a.getTime()+1e3*l);else if(1===a){var c=(a=new Date).getYear();a.setYear(c+2+(c<1900?1900:0))}}else a=0;return e&&"NONE"!==r?(document.cookie=encodeURIComponent(e)+"="+encodeURIComponent(t)+"; path=/;"+(a?" expires="+a.toGMTString()+";":"")+(o?" domain="+o+";":"")+s,this.get(e)===t):0},remove:function(e,t){var n=i(t,"domain");n=n?" domain="+n+";":"",document.cookie=encodeURIComponent(e)+"=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;"+n}},j=function(e){var t;!e&&u.location&&(e=u.location.hostname);var n,i=(t=e).split(".");for(n=i.length-2;n>=0;n--)if(t=i.slice(n).join("."),U.set("test","cookie",{domain:t}))return U.remove("test",{domain:t}),t;return""},H=function(e,t){return r(e,t)<0},K=function(e,t){return 0!==r(e,t)},Y=!!u.postMessage,q=function(e,t,n){var i=1;t&&(Y?n.postMessage(e,t.replace(/([^:]+:\/\/[^\/]+).*/,"$1")):t&&(n.location=t.replace(/#.*$/,"")+"#"+ +new Date+i+++"&"+e))},G=function(e,t){var n;try{Y&&(e&&(n=function(n){if("string"==typeof t&&n.origin!==t||"[object Function]"===Object.prototype.toString.call(t)&&!1===t(n.origin))return!1;e(n)}),u.addEventListener?u[e?"addEventListener":"removeEventListener"]("message",n):u[e?"attachEvent":"detachEvent"]("onmessage",n))}catch(e){}},W=function(e){var t,n,i="0123456789",r="",a="",o=8,s=10,l=10;if(1==e){for(i+="ABCDEF",t=0;16>t;t++)n=Math.floor(Math.random()*o),r+=i.substring(n,n+1),n=Math.floor(Math.random()*o),a+=i.substring(n,n+1),o=16;return r+"-"+a}for(t=0;19>t;t++)n=Math.floor(Math.random()*s),r+=i.substring(n,n+1),0===t&&9==n?s=3:((1==t||2==t)&&10!=s&&2>n||2<t)&&(s=10),n=Math.floor(Math.random()*l),a+=i.substring(n,n+1),0===t&&9==n?l=3:((1==t||2==t)&&10!=l&&2>n||2<t)&&(l=10);return r+a},Q=function(e,t){return{corsMetadata:function(){var e="none",t=!0;return"undefined"!=typeof XMLHttpRequest&&XMLHttpRequest===Object(XMLHttpRequest)&&("withCredentials"in new XMLHttpRequest?e="XMLHttpRequest":"undefined"!=typeof XDomainRequest&&XDomainRequest===Object(XDomainRequest)&&(t=!1),Object.prototype.toString.call(u.HTMLElement).indexOf("Constructor")>0&&(t=!1)),{corsType:e,corsCookiesEnabled:t}}(),getCORSInstance:function(){return"none"===this.corsMetadata.corsType?null:new u[this.corsMetadata.corsType]},fireCORS:function(t,n,i){var r=this;n&&(t.loadErrorHandler=n);try{var a=this.getCORSInstance();a.open("get",t.corsUrl+"&ts="+(new Date).getTime(),!0),"XMLHttpRequest"===this.corsMetadata.corsType&&(a.withCredentials=!0,a.timeout=e.loadTimeout,a.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),a.onreadystatechange=function(){4===this.readyState&&200===this.status&&function(e){var n;try{if((n=JSON.parse(e))!==Object(n))return void r.handleCORSError(t,null,"Response is not JSON")}catch(e){return void r.handleCORSError(t,e,"Error parsing response as JSON")}try{for(var i=t.callback,a=u,o=0;o<i.length;o++)a=a[i[o]];a(n)}catch(e){r.handleCORSError(t,e,"Error forming callback function")}}(this.responseText)}),a.onerror=function(e){r.handleCORSError(t,e,"onerror")},a.ontimeout=function(e){r.handleCORSError(t,e,"ontimeout")},a.send(),e._log.requests.push(t.corsUrl)}catch(e){this.handleCORSError(t,e,"try-catch")}},handleCORSError:function(t,n,i){e.CORSErrors.push({corsData:t,error:n,description:i}),t.loadErrorHandler&&("ontimeout"===i?t.loadErrorHandler(!0):t.loadErrorHandler(!1))}}},z={POST_MESSAGE_ENABLED:!!u.postMessage,DAYS_BETWEEN_SYNC_ID_CALLS:1,MILLIS_PER_DAY:864e5,ADOBE_MC:"adobe_mc",ADOBE_MC_SDID:"adobe_mc_sdid",VALID_VISITOR_ID_REGEX:/^[0-9a-fA-F\-]+$/,ADOBE_MC_TTL_IN_MIN:5,VERSION_REGEX:/vVersion\|((\d+\.)?(\d+\.)?(\*|\d+))(?=$|\|)/,FIRST_PARTY_SERVER_COOKIE:"s_ecid"},X={audienceManagerServer:{},audienceManagerServerSecure:{},cookieDomain:{},cookieLifetime:{},cookieName:{},doesOptInApply:{},disableThirdPartyCalls:{},discardTrackingServerECID:{},idSyncAfterIDCallResult:{},idSyncAttachIframeOnWindowLoad:{},idSyncContainerID:{},idSyncDisable3rdPartySyncing:{},disableThirdPartyCookies:{},idSyncDisableSyncs:{},disableIdSyncs:{},idSyncIDCallResult:{},idSyncSSLUseAkamai:{},isCoopSafe:{},isIabContext:{},isOptInStorageEnabled:{},loadSSL:{},loadTimeout:{},marketingCloudServer:{},marketingCloudServerSecure:{},optInCookieDomain:{},optInStorageExpiry:{},overwriteCrossDomainMCIDAndAID:{},preOptInApprovals:{},previousPermissions:{},resetBeforeVersion:{},sdidParamExpiry:{},serverState:{},sessionCookieName:{},secureCookie:{},takeTimeoutMetrics:{},trackingServer:{},trackingServerSecure:{},whitelistIframeDomains:{},whitelistParentDomain:{}},J={getConfigNames:function(){return Object.keys(X)},getConfigs:function(){return X},normalizeConfig:function(e){return"function"!=typeof e?e:e()}},Z=function(e){var t={};return e.on=function(e,n,i){if(!n||"function"!=typeof n)throw new Error("[ON] Callback should be a function.");t.hasOwnProperty(e)||(t[e]=[]);var r=t[e].push({callback:n,context:i})-1;return function(){t[e].splice(r,1),t[e].length||delete t[e]}},e.off=function(e,n){t.hasOwnProperty(e)&&(t[e]=t[e].filter((function(e){if(e.callback!==n)return e})))},e.publish=function(e){if(t.hasOwnProperty(e)){var n=[].slice.call(arguments,1);t[e].slice(0).forEach((function(e){e.callback.apply(e.context,n)}))}},e.publish},$={PENDING:"pending",CHANGED:"changed",COMPLETE:"complete"},ee={AAM:"aam",ADCLOUD:"adcloud",ANALYTICS:"aa",CAMPAIGN:"campaign",ECID:"ecid",LIVEFYRE:"livefyre",TARGET:"target",VIDEO_ANALYTICS:"videoaa"},te=(n(d={},ee.AAM,565),n(d,ee.ECID,565),d),ne=(n(h={},ee.AAM,[1,2,5]),n(h,ee.ECID,[1,2,5]),h),ie=function(e){return Object.keys(e).map((function(t){return e[t]}))}(ee),re=function(){var e={};return e.callbacks=Object.create(null),e.add=function(t,n){if(!function(e){return"function"==typeof e||e instanceof Array&&e.length}(n))throw new Error("[callbackRegistryFactory] Make sure callback is a function or an array of functions.");e.callbacks[t]=e.callbacks[t]||[];var i=e.callbacks[t].push(n)-1;return function(){e.callbacks[t].splice(i,1)}},e.execute=function(t,n){if(e.callbacks[t]){n=(n=void 0===n?[]:n)instanceof Array?n:[n];try{for(;e.callbacks[t].length;){var i=e.callbacks[t].shift();"function"==typeof i?i.apply(null,n):i instanceof Array&&i[1].apply(i[0],n)}delete e.callbacks[t]}catch(e){}}},e.executeAll=function(t,n){(n||t&&!function(e){return e===Object(e)&&0===Object.keys(e).length}(t))&&Object.keys(e.callbacks).forEach((function(n){var i=void 0!==t[n]?t[n]:"";e.execute(n,i)}),e)},e.hasCallbacks=function(){return Boolean(Object.keys(e.callbacks).length)},e},ae=function(){},oe=function(e){var t=window.console;return!!t&&"function"==typeof t[e]},se=function(e,t,n){return n()?function(){if(oe(e)){for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];console[e].apply(console,[t].concat(i))}}:ae},le=new function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return!0};this.log=se("log",e,t),this.warn=se("warn",e,t),this.error=se("error",e,t)}("[ADOBE OPT-IN]"),ce=function(t,n){return e(t)===n},ue=function(e,t){return e instanceof Array?e:ce(e,"string")?[e]:t||[]},de=function(e){var t=Object.keys(e);return!!t.length&&t.every((function(t){return!0===e[t]}))},he=function(e){return!(!e||fe(e))&&ue(e).every((function(e){return ie.indexOf(e)>-1}))},pe=function(e,t){return e.reduce((function(e,n){return e[n]=t,e}),{})},_e=function(e){return JSON.parse(JSON.stringify(e))},fe=function(e){return"[object Array]"===Object.prototype.toString.call(e)&&!e.length},ge=function(e){if(ye(e))return e;try{return JSON.parse(e)}catch(e){return{}}},ve=function(e){return void 0===e||(ye(e)?he(Object.keys(e)):me(e))},me=function(e){try{var t=JSON.parse(e);return!!e&&ce(e,"string")&&he(Object.keys(t))}catch(e){return!1}},ye=function(e){return null!==e&&ce(e,"object")&&!1===Array.isArray(e)},Se=function(){},Ee=function(e){return ce(e,"function")?e():e},be=function(e,t){ve(e)||le.error("".concat(t))},Te=function(e){return function(e){return Object.keys(e).map((function(t){return e[t]}))}(e).filter((function(e,t,n){return n.indexOf(e)===t}))},we=function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.command,i=t.params,r=void 0===i?{}:i,a=t.callback,o=void 0===a?Se:a;if(!n||-1===n.indexOf("."))throw new Error("[OptIn.execute] Please provide a valid command.");try{var s=n.split("."),l=e[s[0]],c=s[1];if(!l||"function"!=typeof l[c])throw new Error("Make sure the plugin and API name exist.");var u=Object.assign(r,{callback:o});l[c].call(l,u)}catch(e){le.error("[execute] Something went wrong: "+e.message)}}};o.prototype=Object.create(Error.prototype),o.prototype.constructor=o;var Ae="fetchPermissions",Ce="[OptIn#registerPlugin] Plugin is invalid.";s.Categories=ee,s.TimeoutError=o;var Ie=Object.freeze({OptIn:s,IabPlugin:function(){var e=this;e.name="iabPlugin",e.version="0.0.1";var t=re(),n={allConsentData:null},i=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n[e]=t};e.fetchConsentData=function(e){var t=l(e.callback,e.timeout);r({callback:t})},e.isApproved=function(e){var t=e.callback,i=e.category,a=e.timeout;if(n.allConsentData)return t(null,s(i,n.allConsentData.vendorConsents,n.allConsentData.purposeConsents));var o=l((function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.vendorConsents,a=n.purposeConsents;t(e,s(i,r,a))}),a);r({category:i,callback:o})},e.onRegister=function(t){var n=Object.keys(te);e.fetchConsentData({callback:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=i.purposeConsents,a=i.gdprApplies,o=i.vendorConsents;!e&&a&&o&&r&&(n.forEach((function(e){var n=s(e,o,r);t[n?"approve":"deny"](e,!0)})),t.complete())}})};var r=function(e){var r=e.callback;if(n.allConsentData)return r(null,n.allConsentData);t.add("FETCH_CONSENT_DATA",r);var s={};o((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.purposeConsents,o=e.gdprApplies,l=e.vendorConsents;(arguments.length>1?arguments[1]:void 0)&&i("allConsentData",s={purposeConsents:r,gdprApplies:o,vendorConsents:l}),a((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(arguments.length>1?arguments[1]:void 0)&&(s.consentString=e.consentData,i("allConsentData",s)),t.execute("FETCH_CONSENT_DATA",[null,n.allConsentData])}))}))},a=function(e){var t=c();t&&t("getConsentData",null,e)},o=function(e){var t=Te(te),n=c();n&&n("getVendorConsents",t,e)},s=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=!!t[te[e]];return i&&ne[e].every((function(e){return n[e]}))}}}),Pe=function(e,t){return"SHA-256"!==t&&"SHA256"!==t&&"sha256"!==t&&"sha-256"!==t||(e=function e(t){function n(e,t){return e>>>t|e<<32-t}for(var i,r,a=Math.pow,o=a(2,32),s="",l=[],c=8*t.length,u=e.h=e.h||[],d=e.k=e.k||[],h=d.length,p={},_=2;h<64;_++)if(!p[_]){for(i=0;i<313;i+=_)p[i]=_;u[h]=a(_,.5)*o|0,d[h++]=a(_,1/3)*o|0}for(t+="";t.length%64-56;)t+="\0";for(i=0;i<t.length;i++){if((r=t.charCodeAt(i))>>8)return;l[i>>2]|=r<<(3-i)%4*8}for(l[l.length]=c/o|0,l[l.length]=c,r=0;r<l.length;){var f=l.slice(r,r+=16),g=u;for(u=u.slice(0,8),i=0;i<64;i++){var v=f[i-15],m=f[i-2],y=u[0],S=u[4],E=u[7]+(n(S,6)^n(S,11)^n(S,25))+(S&u[5]^~S&u[6])+d[i]+(f[i]=i<16?f[i]:f[i-16]+(n(v,7)^n(v,18)^v>>>3)+f[i-7]+(n(m,17)^n(m,19)^m>>>10)|0);(u=[E+((n(y,2)^n(y,13)^n(y,22))+(y&u[1]^y&u[2]^u[1]&u[2]))|0].concat(u))[4]=u[4]+E|0}for(i=0;i<8;i++)u[i]=u[i]+g[i]|0}for(i=0;i<8;i++)for(r=3;r+1;r--){var b=u[i]>>8*r&255;s+=(b<16?0:"")+b.toString(16)}return s}(e)),e},ke=function(e){return String(e).trim().toLowerCase()},Me=Ie.OptIn;P.defineGlobalNamespace(),window.adobe.OptInCategories=Me.Categories;var De=function(t,n,i){function r(e){var t=e;return function(e){var n=e||S.location.href;try{var i=h._extractParamFromUri(n,t);if(i)return L.parsePipeDelimetedKeyValues(i)}catch(e){}}}function a(e){e=e||{},h._supplementalDataIDCurrent=e.supplementalDataIDCurrent||"",h._supplementalDataIDCurrentConsumed=e.supplementalDataIDCurrentConsumed||{},h._supplementalDataIDLast=e.supplementalDataIDLast||"",h._supplementalDataIDLastConsumed=e.supplementalDataIDLastConsumed||{}}function o(e){return function(e){return(e=e?e+="|":e)+"TS="+L.getTimestampInSeconds()}(e.reduce((function(e,t){var n=t[0],i=t[1];return null!=i&&i!==M&&(e=function(e,t,n){return(n=n?n+="|":n)+(e+"=")+encodeURIComponent(t)}(n,i,e)),e}),""))}function s(){return h.configs.isIabContext?p.optIn.isApproved(p.optIn.Categories.ECID)&&f:p.optIn.isApproved(p.optIn.Categories.ECID)}function l(e,t){if(f=!0,e)throw new Error("[IAB plugin] : "+e);t.gdprApplies&&(_=t.consentString),h.init(),d()}function c(){p.optIn.isApproved(p.optIn.Categories.ECID)&&(h.configs.isIabContext?p.optIn.execute({command:"iabPlugin.fetchConsentData",callback:l}):(h.init(),d()))}function d(){p.optIn.off("complete",c)}if(!i||i.split("").reverse().join("")!==t)throw new Error("Please use `Visitor.getInstance` to instantiate Visitor.");var h=this,p=window.adobe,_="",f=!1,g=!1;h.version="4.4.0";var S=u,E=S.Visitor;E.version=h.version,E.AuthState=m,E.OptOut=y,S.s_c_in||(S.s_c_il=[],S.s_c_in=0),h._c="Visitor",h._il=S.s_c_il,h._in=S.s_c_in,h._il[h._in]=h,S.s_c_in++,h._instanceType="regular",h._log={requests:[]},h.marketingCloudOrgID=t,h.cookieName="AMCV_"+t,h.sessionCookieName="AMCVS_"+t,h.cookieDomain=j(),h.loadSSL=S.location.protocol.toLowerCase().indexOf("https")>=0,h.loadTimeout=3e4,h.CORSErrors=[],h.marketingCloudServer=h.audienceManagerServer="dpm.demdex.net",h.sdidParamExpiry=30;var b=null,T="MCMID",w="MCIDTS",A="A",C="MCAID",I="AAM",k="MCAAMB",M="NONE",D=function(e){return!Object.prototype[e]},R=Q(h);h.FIELDS=v,h.cookieRead=function(e){return U.get(e)},h.cookieWrite=function(e,t,n){var i=h.cookieLifetime?(""+h.cookieLifetime).toUpperCase():"",r=!1;return h.configs&&h.configs.secureCookie&&"https:"===location.protocol&&(r=!0),U.set(e,""+t,{expires:n,domain:h.cookieDomain,cookieLifetime:i,secure:r})},h.resetState=function(e){e?h._mergeServerState(e):a()},h._isAllowedDone=!1,h._isAllowedFlag=!1,h.isAllowed=function(){return h._isAllowedDone||(h._isAllowedDone=!0,(h.cookieRead(h.cookieName)||h.cookieWrite(h.cookieName,"T",1))&&(h._isAllowedFlag=!0)),"T"===h.cookieRead(h.cookieName)&&h._helpers.removeCookie(h.cookieName),h._isAllowedFlag},h.setMarketingCloudVisitorID=function(e){h._setMarketingCloudFields(e)},h._use1stPartyMarketingCloudServer=!1,h.getMarketingCloudVisitorID=function(e,t){h.marketingCloudServer&&h.marketingCloudServer.indexOf(".demdex.net")<0&&(h._use1stPartyMarketingCloudServer=!0);var n=h._getAudienceManagerURLData("_setMarketingCloudFields"),i=n.url;return h._getRemoteField(T,i,e,t,n)},h.getVisitorValues=function(e,t){var n={MCMID:{fn:h.getMarketingCloudVisitorID,args:[!0],context:h},MCOPTOUT:{fn:h.isOptedOut,args:[void 0,!0],context:h},MCAID:{fn:h.getAnalyticsVisitorID,args:[!0],context:h},MCAAMLH:{fn:h.getAudienceManagerLocationHint,args:[!0],context:h},MCAAMB:{fn:h.getAudienceManagerBlob,args:[!0],context:h}};!function(e,t){function n(e){return function(n){i[e]=n,++r===a&&t(i)}}var i={},r=0,a=Object.keys(e).length;Object.keys(e).forEach((function(t){var i=e[t];if(i.fn){var r=i.args||[];r.unshift(n(t)),i.fn.apply(i.context||null,r)}}))}(t&&t.length?P.pluck(n,t):n,e)},h._currentCustomerIDs={},h._customerIDsHashChanged=!1,h._newCustomerIDsHash="",h.setCustomerIDs=function(t,n){if(!h.isOptedOut()&&t){if(!P.isObject(t)||P.isObjectEmpty(t))return!1;var i,r,a;for(i in h._readVisitor(),t)if(D(i)&&(n=(r=t[i]).hasOwnProperty("hashType")?r.hashType:n,r))if("object"===e(r)){var o={};if(r.id){if(n){if(!(a=Pe(ke(r.id),n)))return;r.id=a,o.hashType=n}o.id=r.id}null!=r.authState&&(o.authState=r.authState),h._currentCustomerIDs[i]=o}else if(n){if(!(a=Pe(ke(r),n)))return;h._currentCustomerIDs[i]={id:a,hashType:n}}else h._currentCustomerIDs[i]={id:r};var s=h.getCustomerIDs(),l=h._getField("MCCIDH"),c="";for(i in l||(l=0),s)D(i)&&(c+=(c?"|":"")+i+"|"+((r=s[i]).id?r.id:"")+(r.authState?r.authState:""));h._newCustomerIDsHash=String(h._hash(c)),h._newCustomerIDsHash!==l&&(h._customerIDsHashChanged=!0,h._mapCustomerIDs((function(){h._customerIDsHashChanged=!1})))}},h.getCustomerIDs=function(){h._readVisitor();var e,t,n={};for(e in h._currentCustomerIDs)D(e)&&(t=h._currentCustomerIDs[e],n[e]||(n[e]={}),t.id&&(n[e].id=t.id),null!=t.authState?n[e].authState=t.authState:n[e].authState=E.AuthState.UNKNOWN,t.hashType&&(n[e].hashType=t.hashType));return n},h.setAnalyticsVisitorID=function(e){h._setAnalyticsFields(e)},h.getAnalyticsVisitorID=function(e,t,n){if(!L.isTrackingServerPopulated()&&!n)return h._callCallback(e,[""]),"";var i="";if(n||(i=h.getMarketingCloudVisitorID((function(t){h.getAnalyticsVisitorID(e,!0)}))),i||n){var r=n?h.marketingCloudServer:h.trackingServer,a="";h.loadSSL&&(n?h.marketingCloudServerSecure&&(r=h.marketingCloudServerSecure):h.trackingServerSecure&&(r=h.trackingServerSecure));var o={};if(r){var s="http"+(h.loadSSL?"s":"")+"://"+r+"/id",l="d_visid_ver="+h.version+"&mcorgid="+encodeURIComponent(h.marketingCloudOrgID)+(i?"&mid="+encodeURIComponent(i):"")+(h.idSyncDisable3rdPartySyncing||h.disableThirdPartyCookies?"&d_coppa=true":""),c=["s_c_il",h._in,"_set"+(n?"MarketingCloud":"Analytics")+"Fields"];a=s+"?"+l+"&callback=s_c_il%5B"+h._in+"%5D._set"+(n?"MarketingCloud":"Analytics")+"Fields",o.corsUrl=s+"?"+l,o.callback=c}return o.url=a,h._getRemoteField(n?T:C,a,e,t,o)}return""},h.getAudienceManagerLocationHint=function(e,t){if(h.getMarketingCloudVisitorID((function(t){h.getAudienceManagerLocationHint(e,!0)}))){var n=h._getField(C);if(!n&&L.isTrackingServerPopulated()&&(n=h.getAnalyticsVisitorID((function(t){h.getAudienceManagerLocationHint(e,!0)}))),n||!L.isTrackingServerPopulated()){var i=h._getAudienceManagerURLData(),r=i.url;return h._getRemoteField("MCAAMLH",r,e,t,i)}}return""},h.getLocationHint=h.getAudienceManagerLocationHint,h.getAudienceManagerBlob=function(e,t){if(h.getMarketingCloudVisitorID((function(t){h.getAudienceManagerBlob(e,!0)}))){var n=h._getField(C);if(!n&&L.isTrackingServerPopulated()&&(n=h.getAnalyticsVisitorID((function(t){h.getAudienceManagerBlob(e,!0)}))),n||!L.isTrackingServerPopulated()){var i=h._getAudienceManagerURLData(),r=i.url;return h._customerIDsHashChanged&&h._setFieldExpire(k,-1),h._getRemoteField(k,r,e,t,i)}}return""},h._supplementalDataIDCurrent="",h._supplementalDataIDCurrentConsumed={},h._supplementalDataIDLast="",h._supplementalDataIDLastConsumed={},h.getSupplementalDataID=function(e,t){h._supplementalDataIDCurrent||t||(h._supplementalDataIDCurrent=h._generateID(1));var n=h._supplementalDataIDCurrent;return h._supplementalDataIDLast&&!h._supplementalDataIDLastConsumed[e]?(n=h._supplementalDataIDLast,h._supplementalDataIDLastConsumed[e]=!0):n&&(h._supplementalDataIDCurrentConsumed[e]&&(h._supplementalDataIDLast=h._supplementalDataIDCurrent,h._supplementalDataIDLastConsumed=h._supplementalDataIDCurrentConsumed,h._supplementalDataIDCurrent=n=t?"":h._generateID(1),h._supplementalDataIDCurrentConsumed={}),n&&(h._supplementalDataIDCurrentConsumed[e]=!0)),n};var N=!1;h._liberatedOptOut=null,h.getOptOut=function(e,t){var n=h._getAudienceManagerURLData("_setMarketingCloudFields"),i=n.url;if(s())return h._getRemoteField("MCOPTOUT",i,e,t,n);if(h._registerCallback("liberatedOptOut",e),null!==h._liberatedOptOut)return h._callAllCallbacks("liberatedOptOut",[h._liberatedOptOut]),N=!1,h._liberatedOptOut;if(N)return null;N=!0;var r="liberatedGetOptOut";return n.corsUrl=n.corsUrl.replace(/dpm\.demdex\.net\/id\?/,"dpm.demdex.net/optOutStatus?"),n.callback=[r],u[r]=function(e){if(e===Object(e)){var t,n,i=P.parseOptOut(e,t,M);t=i.optOut,n=1e3*i.d_ottl,h._liberatedOptOut=t,setTimeout((function(){h._liberatedOptOut=null}),n)}h._callAllCallbacks("liberatedOptOut",[t]),N=!1},R.fireCORS(n),null},h.isOptedOut=function(e,t,n){t||(t=E.OptOut.GLOBAL);var i=h.getOptOut((function(n){var i=n===E.OptOut.GLOBAL||n.indexOf(t)>=0;h._callCallback(e,[i])}),n);return i?i===E.OptOut.GLOBAL||i.indexOf(t)>=0:null},h._fields=null,h._fieldsExpired=null,h._hash=function(e){var t,n=0;if(e)for(t=0;t<e.length;t++)n=(n<<5)-n+e.charCodeAt(t),n&=n;return n},h._generateID=W,h._generateLocalMID=function(){var e=h._generateID(0);return F.isClientSideMarketingCloudVisitorID=!0,e},h._callbackList=null,h._callCallback=function(e,t){try{"function"==typeof e?e.apply(S,t):e[1].apply(e[0],t)}catch(e){}},h._registerCallback=function(e,t){t&&(null==h._callbackList&&(h._callbackList={}),null==h._callbackList[e]&&(h._callbackList[e]=[]),h._callbackList[e].push(t))},h._callAllCallbacks=function(e,t){if(null!=h._callbackList){var n=h._callbackList[e];if(n)for(;n.length>0;)h._callCallback(n.shift(),t)}},h._addQuerystringParam=function(e,t,n,i){var r=encodeURIComponent(t)+"="+encodeURIComponent(n),a=L.parseHash(e),o=L.hashlessUrl(e);if(-1===o.indexOf("?"))return o+"?"+r+a;var s=o.split("?"),l=s[0]+"?",c=s[1];return l+L.addQueryParamAtLocation(c,r,i)+a},h._extractParamFromUri=function(e,t){var n=new RegExp("[\\?&#]"+t+"=([^&#]*)").exec(e);if(n&&n.length)return decodeURIComponent(n[1])},h._parseAdobeMcFromUrl=r(z.ADOBE_MC),h._parseAdobeMcSdidFromUrl=r(z.ADOBE_MC_SDID),h._attemptToPopulateSdidFromUrl=function(e){var n=h._parseAdobeMcSdidFromUrl(e),i=1e9;n&&n.TS&&(i=L.getTimestampInSeconds()-n.TS),n&&n.SDID&&n.MCORGID===t&&i<h.sdidParamExpiry&&(h._supplementalDataIDCurrent=n.SDID,h._supplementalDataIDCurrentConsumed.SDID_URL_PARAM=!0)},h._attemptToPopulateIdsFromUrl=function(){var e=h._parseAdobeMcFromUrl();if(e&&e.TS){var n=L.getTimestampInSeconds()-e.TS;if(Math.floor(n/60)>z.ADOBE_MC_TTL_IN_MIN||e.MCORGID!==t)return;!function(e){function t(e,t,n){e&&e.match(z.VALID_VISITOR_ID_REGEX)&&(n===T&&(g=!0),t(e))}t(e[T],h.setMarketingCloudVisitorID,T),h._setFieldExpire(k,-1),t(e[C],h.setAnalyticsVisitorID)}(e)}},h._mergeServerState=function(e){if(e)try{if((e=function(e){return L.isObject(e)?e:JSON.parse(e)}(e))[h.marketingCloudOrgID]){var t=e[h.marketingCloudOrgID];!function(e){L.isObject(e)&&h.setCustomerIDs(e)}(t.customerIDs),a(t.sdid)}}catch(e){throw new Error("`serverState` has an invalid format.")}},h._timeout=null,h._loadData=function(e,t,n,i){t=h._addQuerystringParam(t,"d_fieldgroup",e,1),i.url=h._addQuerystringParam(i.url,"d_fieldgroup",e,1),i.corsUrl=h._addQuerystringParam(i.corsUrl,"d_fieldgroup",e,1),F.fieldGroupObj[e]=!0,i===Object(i)&&i.corsUrl&&"XMLHttpRequest"===R.corsMetadata.corsType&&R.fireCORS(i,n,e)},h._clearTimeout=function(e){null!=h._timeout&&h._timeout[e]&&(clearTimeout(h._timeout[e]),h._timeout[e]=0)},h._settingsDigest=0,h._getSettingsDigest=function(){if(!h._settingsDigest){var e=h.version;h.audienceManagerServer&&(e+="|"+h.audienceManagerServer),h.audienceManagerServerSecure&&(e+="|"+h.audienceManagerServerSecure),h._settingsDigest=h._hash(e)}return h._settingsDigest},h._readVisitorDone=!1,h._readVisitor=function(){if(!h._readVisitorDone){h._readVisitorDone=!0;var e,t,n,i,r,a,o=h._getSettingsDigest(),s=!1,l=h.cookieRead(h.cookieName),c=new Date;if(l||g||h.discardTrackingServerECID||(l=h.cookieRead(z.FIRST_PARTY_SERVER_COOKIE)),null==h._fields&&(h._fields={}),l&&"T"!==l)for((l=l.split("|"))[0].match(/^[\-0-9]+$/)&&(parseInt(l[0],10)!==o&&(s=!0),l.shift()),l.length%2==1&&l.pop(),e=0;e<l.length;e+=2)n=(t=l[e].split("-"))[0],i=l[e+1],t.length>1?(r=parseInt(t[1],10),a=t[1].indexOf("s")>0):(r=0,a=!1),s&&("MCCIDH"===n&&(i=""),r>0&&(r=c.getTime()/1e3-60)),n&&i&&(h._setField(n,i,1),r>0&&(h._fields["expire"+n]=r+(a?"s":""),(c.getTime()>=1e3*r||a&&!h.cookieRead(h.sessionCookieName))&&(h._fieldsExpired||(h._fieldsExpired={}),h._fieldsExpired[n]=!0)));!h._getField(C)&&L.isTrackingServerPopulated()&&(l=h.cookieRead("s_vi"))&&((l=l.split("|")).length>1&&l[0].indexOf("v1")>=0&&((e=(i=l[1]).indexOf("["))>=0&&(i=i.substring(0,e)),i&&i.match(z.VALID_VISITOR_ID_REGEX)&&h._setField(C,i)))}},h._appendVersionTo=function(e){var t="vVersion|"+h.version,n=e?h._getCookieVersion(e):null;return n?K(n,h.version)&&(e=e.replace(z.VERSION_REGEX,t)):e+=(e?"|":"")+t,e},h._writeVisitor=function(){var e,t,n=h._getSettingsDigest();for(e in h._fields)D(e)&&h._fields[e]&&"expire"!==e.substring(0,6)&&(t=h._fields[e],n+=(n?"|":"")+e+(h._fields["expire"+e]?"-"+h._fields["expire"+e]:"")+"|"+t);n=h._appendVersionTo(n),h.cookieWrite(h.cookieName,n,1)},h._getField=function(e,t){return null==h._fields||!t&&h._fieldsExpired&&h._fieldsExpired[e]?null:h._fields[e]},h._setField=function(e,t,n){null==h._fields&&(h._fields={}),h._fields[e]=t,n||h._writeVisitor()},h._getFieldList=function(e,t){var n=h._getField(e,t);return n?n.split("*"):null},h._setFieldList=function(e,t,n){h._setField(e,t?t.join("*"):"",n)},h._getFieldMap=function(e,t){var n=h._getFieldList(e,t);if(n){var i,r={};for(i=0;i<n.length;i+=2)r[n[i]]=n[i+1];return r}return null},h._setFieldMap=function(e,t,n){var i,r=null;if(t)for(i in r=[],t)D(i)&&(r.push(i),r.push(t[i]));h._setFieldList(e,r,n)},h._setFieldExpire=function(e,t,n){var i=new Date;i.setTime(i.getTime()+1e3*t),null==h._fields&&(h._fields={}),h._fields["expire"+e]=Math.floor(i.getTime()/1e3)+(n?"s":""),t<0?(h._fieldsExpired||(h._fieldsExpired={}),h._fieldsExpired[e]=!0):h._fieldsExpired&&(h._fieldsExpired[e]=!1),n&&(h.cookieRead(h.sessionCookieName)||h.cookieWrite(h.sessionCookieName,"1"))},h._findVisitorID=function(t){return t&&("object"===e(t)&&(t=t.d_mid?t.d_mid:t.visitorID?t.visitorID:t.id?t.id:t.uuid?t.uuid:""+t),t&&"NOTARGET"===(t=t.toUpperCase())&&(t=M),t&&(t===M||t.match(z.VALID_VISITOR_ID_REGEX))||(t="")),t},h._setFields=function(t,n){if(h._clearTimeout(t),null!=h._loading&&(h._loading[t]=!1),F.fieldGroupObj[t]&&F.setState(t,!1),"MC"===t){!0!==F.isClientSideMarketingCloudVisitorID&&(F.isClientSideMarketingCloudVisitorID=!1);var i=h._getField(T);if(!i||h.overwriteCrossDomainMCIDAndAID){if(!(i="object"===e(n)&&n.mid?n.mid:h._findVisitorID(n))){if(h._use1stPartyMarketingCloudServer&&!h.tried1stPartyMarketingCloudServer)return h.tried1stPartyMarketingCloudServer=!0,void h.getAnalyticsVisitorID(null,!1,!0);i=h._generateLocalMID()}h._setField(T,i)}i&&i!==M||(i=""),"object"===e(n)&&((n.d_region||n.dcs_region||n.d_blob||n.blob)&&h._setFields(I,n),h._use1stPartyMarketingCloudServer&&n.mid&&h._setFields(A,{id:n.id})),h._callAllCallbacks(T,[i])}if(t===I&&"object"===e(n)){var r=604800;null!=n.id_sync_ttl&&n.id_sync_ttl&&(r=parseInt(n.id_sync_ttl,10));var a=x.getRegionAndCheckIfChanged(n,r);h._callAllCallbacks("MCAAMLH",[a]);var o=h._getField(k);(n.d_blob||n.blob)&&((o=n.d_blob)||(o=n.blob),h._setFieldExpire(k,r),h._setField(k,o)),o||(o=""),h._callAllCallbacks(k,[o]),!n.error_msg&&h._newCustomerIDsHash&&h._setField("MCCIDH",h._newCustomerIDsHash)}if(t===A){var l=h._getField(C);l&&!h.overwriteCrossDomainMCIDAndAID||((l=h._findVisitorID(n))?l!==M&&h._setFieldExpire(k,-1):l=M,h._setField(C,l)),l&&l!==M||(l=""),h._callAllCallbacks(C,[l])}if(h.idSyncDisableSyncs||h.disableIdSyncs)x.idCallNotProcesssed=!0;else{x.idCallNotProcesssed=!1;var c={};c.ibs=n.ibs,c.subdomain=n.subdomain,x.processIDCallData(c)}if(n===Object(n)){var u,d;s()&&h.isAllowed()&&(u=h._getField("MCOPTOUT"));var p=P.parseOptOut(n,u,M);u=p.optOut,d=p.d_ottl,h._setFieldExpire("MCOPTOUT",d,!0),h._setField("MCOPTOUT",u),h._callAllCallbacks("MCOPTOUT",[u])}},h._loading=null,h._getRemoteField=function(e,t,n,i,r){var a,o="",l=L.isFirstPartyAnalyticsVisitorIDCall(e);if(s()&&h.isAllowed())if(h._readVisitor(),!(!(o=h._getField(e,!0==={MCAAMLH:!0,MCAAMB:!0}[e]))||h._fieldsExpired&&h._fieldsExpired[e])||h.disableThirdPartyCalls&&!l)o||(e===T?(h._registerCallback(e,n),o=h._generateLocalMID(),h.setMarketingCloudVisitorID(o)):e===C?(h._registerCallback(e,n),o="",h.setAnalyticsVisitorID(o)):(o="",i=!0));else if(e===T||"MCOPTOUT"===e?a="MC":"MCAAMLH"===e||e===k?a=I:e===C&&(a=A),a)return!t||null!=h._loading&&h._loading[a]||(null==h._loading&&(h._loading={}),h._loading[a]=!0,h._loadData(a,t,(function(t){if(!h._getField(e)){t&&F.setState(a,!0);var n="";e===T?n=h._generateLocalMID():a===I&&(n={error_msg:"timeout"}),h._setFields(a,n)}}),r)),h._registerCallback(e,n),o||(t||h._setFields(a,{id:M}),"");return e!==T&&e!==C||o!==M||(o="",i=!0),n&&i&&h._callCallback(n,[o]),o},h._setMarketingCloudFields=function(e){h._readVisitor(),h._setFields("MC",e)},h._mapCustomerIDs=function(e){h.getAudienceManagerBlob(e,!0)},h._setAnalyticsFields=function(e){h._readVisitor(),h._setFields(A,e)},h._setAudienceManagerFields=function(e){h._readVisitor(),h._setFields(I,e)},h._getAudienceManagerURLData=function(e){var t=h.audienceManagerServer,n="",i=h._getField(T),r=h._getField(k,!0),a=h._getField(C),o=a&&a!==M?"&d_cid_ic=AVID%01"+encodeURIComponent(a):"";if(h.loadSSL&&h.audienceManagerServerSecure&&(t=h.audienceManagerServerSecure),t){var s,l,c=h.getCustomerIDs();if(c)for(s in c)D(s)&&(l=c[s],o+="&d_cid_ic="+encodeURIComponent(s)+"%01"+encodeURIComponent(l.id?l.id:"")+(l.authState?"%01"+l.authState:""));e||(e="_setAudienceManagerFields");var u="http"+(h.loadSSL?"s":"")+"://"+t+"/id",d="d_visid_ver="+h.version+(_&&-1!==u.indexOf("demdex.net")?"&gdpr=1&gdpr_force=1&gdpr_consent="+_:"")+"&d_rtbd=json&d_ver=2"+(!i&&h._use1stPartyMarketingCloudServer?"&d_verify=1":"")+"&d_orgid="+encodeURIComponent(h.marketingCloudOrgID)+"&d_nsid="+(h.idSyncContainerID||0)+(i?"&d_mid="+encodeURIComponent(i):"")+(h.idSyncDisable3rdPartySyncing||h.disableThirdPartyCookies?"&d_coppa=true":"")+(!0===b?"&d_coop_safe=1":!1===b?"&d_coop_unsafe=1":"")+(r?"&d_blob="+encodeURIComponent(r):"")+o,p=["s_c_il",h._in,e];return{url:n=u+"?"+d+"&d_cb=s_c_il%5B"+h._in+"%5D."+e,corsUrl:u+"?"+d,callback:p}}return{url:n}},h.appendVisitorIDsTo=function(e){try{var t=[[T,h._getField(T)],[C,h._getField(C)],["MCORGID",h.marketingCloudOrgID]];return h._addQuerystringParam(e,z.ADOBE_MC,o(t))}catch(t){return e}},h.appendSupplementalDataIDTo=function(e,t){if(!(t=t||h.getSupplementalDataID(L.generateRandomString(),!0)))return e;try{var n=o([["SDID",t],["MCORGID",h.marketingCloudOrgID]]);return h._addQuerystringParam(e,z.ADOBE_MC_SDID,n)}catch(t){return e}};var L={parseHash:function(e){var t=e.indexOf("#");return t>0?e.substr(t):""},hashlessUrl:function(e){var t=e.indexOf("#");return t>0?e.substr(0,t):e},addQueryParamAtLocation:function(e,t,n){var i=e.split("&");return n=null!=n?n:i.length,i.splice(n,0,t),i.join("&")},isFirstPartyAnalyticsVisitorIDCall:function(e,t,n){return e===C&&(t||(t=h.trackingServer),n||(n=h.trackingServerSecure),!("string"!=typeof(i=h.loadSSL?n:t)||!i.length)&&i.indexOf("2o7.net")<0&&i.indexOf("omtrdc.net")<0);var i},isObject:function(e){return Boolean(e&&e===Object(e))},removeCookie:function(e){U.remove(e,{domain:h.cookieDomain})},isTrackingServerPopulated:function(){return!!h.trackingServer||!!h.trackingServerSecure},getTimestampInSeconds:function(){return Math.round((new Date).getTime()/1e3)},parsePipeDelimetedKeyValues:function(e){return e.split("|").reduce((function(e,t){var n=t.split("=");return e[n[0]]=decodeURIComponent(n[1]),e}),{})},generateRandomString:function(e){e=e||5;for(var t="",n="abcdefghijklmnopqrstuvwxyz0123456789";e--;)t+=n[Math.floor(Math.random()*n.length)];return t},normalizeBoolean:function(e){return"true"===e||"false"!==e&&e},parseBoolean:function(e){return"true"===e||"false"!==e&&null},replaceMethodsWithFunction:function(e,t){for(var n in e)e.hasOwnProperty(n)&&"function"==typeof e[n]&&(e[n]=t);return e}};h._helpers=L;var x=function(e,t){var n=u.document;return{THROTTLE_START:3e4,MAX_SYNCS_LENGTH:649,throttleTimerSet:!1,id:null,onPagePixels:[],iframeHost:null,getIframeHost:function(e){if("string"==typeof e){var t=e.split("/");return t[0]+"//"+t[2]}},subdomain:null,url:null,getUrl:function(){var t,i="http://fast.",r="?d_nsid="+e.idSyncContainerID+"#"+encodeURIComponent(n.location.origin);return this.subdomain||(this.subdomain="nosubdomainreturned"),e.loadSSL&&(i=e.idSyncSSLUseAkamai?"https://fast.":"https://"),t=i+this.subdomain+".demdex.net/dest5.html"+r,this.iframeHost=this.getIframeHost(t),this.id="destination_publishing_iframe_"+this.subdomain+"_"+e.idSyncContainerID,t},checkDPIframeSrc:function(){var t="?d_nsid="+e.idSyncContainerID+"#"+encodeURIComponent(n.location.href);"string"==typeof e.dpIframeSrc&&e.dpIframeSrc.length&&(this.id="destination_publishing_iframe_"+(e._subdomain||this.subdomain||(new Date).getTime())+"_"+e.idSyncContainerID,this.iframeHost=this.getIframeHost(e.dpIframeSrc),this.url=e.dpIframeSrc+t)},idCallNotProcesssed:null,doAttachIframe:!1,startedAttachingIframe:!1,iframeHasLoaded:null,iframeIdChanged:null,newIframeCreated:null,originalIframeHasLoadedAlready:null,iframeLoadedCallbacks:[],regionChanged:!1,timesRegionChanged:0,sendingMessages:!1,messages:[],messagesPosted:[],messagesReceived:[],messageSendingInterval:z.POST_MESSAGE_ENABLED?null:100,onPageDestinationsFired:[],jsonForComparison:[],jsonDuplicates:[],jsonWaiting:[],jsonProcessed:[],canSetThirdPartyCookies:!0,receivedThirdPartyCookiesNotification:!1,readyToAttachIframePreliminary:function(){return!(e.idSyncDisableSyncs||e.disableIdSyncs||e.idSyncDisable3rdPartySyncing||e.disableThirdPartyCookies||e.disableThirdPartyCalls)},readyToAttachIframe:function(){return this.readyToAttachIframePreliminary()&&(this.doAttachIframe||e._doAttachIframe)&&(this.subdomain&&"nosubdomainreturned"!==this.subdomain||e._subdomain)&&this.url&&!this.startedAttachingIframe},attachIframe:function(){function e(){(r=n.createElement("iframe")).sandbox="allow-scripts allow-same-origin",r.title="Adobe ID Syncing iFrame",r.id=i.id,r.name=i.id+"_name",r.style.cssText="display: none; width: 0; height: 0;",r.src=i.url,i.newIframeCreated=!0,t(),n.body.appendChild(r)}function t(e){r.addEventListener("load",(function(){r.className="aamIframeLoaded",i.iframeHasLoaded=!0,i.fireIframeLoadedCallbacks(e),i.requestToProcess()}))}this.startedAttachingIframe=!0;var i=this,r=n.getElementById(this.id);r?"IFRAME"!==r.nodeName?(this.id+="_2",this.iframeIdChanged=!0,e()):(this.newIframeCreated=!1,"aamIframeLoaded"!==r.className?(this.originalIframeHasLoadedAlready=!1,t("The destination publishing iframe already exists from a different library, but hadn't loaded yet.")):(this.originalIframeHasLoadedAlready=!0,this.iframeHasLoaded=!0,this.iframe=r,this.fireIframeLoadedCallbacks("The destination publishing iframe already exists from a different library, and had loaded alresady."),this.requestToProcess())):e(),this.iframe=r},fireIframeLoadedCallbacks:function(e){this.iframeLoadedCallbacks.forEach((function(t){"function"==typeof t&&t({message:e||"The destination publishing iframe was attached and loaded successfully."})})),this.iframeLoadedCallbacks=[]},requestToProcess:function(t){function n(){r.jsonForComparison.push(t),r.jsonWaiting.push(t),r.processSyncOnPage(t)}var i,r=this;if(t===Object(t)&&t.ibs)if(i=JSON.stringify(t.ibs||[]),this.jsonForComparison.length){var a,o,s,l=!1;for(a=0,o=this.jsonForComparison.length;a<o;a++)if(s=this.jsonForComparison[a],i===JSON.stringify(s.ibs||[])){l=!0;break}l?this.jsonDuplicates.push(t):n()}else n();if((this.receivedThirdPartyCookiesNotification||!z.POST_MESSAGE_ENABLED||this.iframeHasLoaded)&&this.jsonWaiting.length){var c=this.jsonWaiting.shift();this.process(c),this.requestToProcess()}e.idSyncDisableSyncs||e.disableIdSyncs||!this.iframeHasLoaded||!this.messages.length||this.sendingMessages||(this.throttleTimerSet||(this.throttleTimerSet=!0,setTimeout((function(){r.messageSendingInterval=z.POST_MESSAGE_ENABLED?null:150}),this.THROTTLE_START)),this.sendingMessages=!0,this.sendMessages())},getRegionAndCheckIfChanged:function(t,n){var i=e._getField("MCAAMLH"),r=t.d_region||t.dcs_region;return i?r&&(e._setFieldExpire("MCAAMLH",n),e._setField("MCAAMLH",r),parseInt(i,10)!==r&&(this.regionChanged=!0,this.timesRegionChanged++,e._setField("MCSYNCSOP",""),e._setField("MCSYNCS",""),i=r)):(i=r)&&(e._setFieldExpire("MCAAMLH",n),e._setField("MCAAMLH",i)),i||(i=""),i},processSyncOnPage:function(e){var t,n,i,r;if((t=e.ibs)&&t instanceof Array&&(n=t.length))for(i=0;i<n;i++)(r=t[i]).syncOnPage&&this.checkFirstPartyCookie(r,"","syncOnPage")},process:function(e){var t,n,i,r,a,o=encodeURIComponent,s=!1;if((t=e.ibs)&&t instanceof Array&&(n=t.length))for(s=!0,i=0;i<n;i++)r=t[i],a=[o("ibs"),o(r.id||""),o(r.tag||""),P.encodeAndBuildRequest(r.url||[],","),o(r.ttl||""),"","",r.fireURLSync?"true":"false"],r.syncOnPage||(this.canSetThirdPartyCookies?this.addMessage(a.join("|")):r.fireURLSync&&this.checkFirstPartyCookie(r,a.join("|")));s&&this.jsonProcessed.push(e)},checkFirstPartyCookie:function(t,n,i){var r="syncOnPage"===i,a=r?"MCSYNCSOP":"MCSYNCS";e._readVisitor();var o,s,l=e._getField(a),c=!1,u=!1,d=Math.ceil((new Date).getTime()/z.MILLIS_PER_DAY);l?(o=l.split("*"),c=(s=this.pruneSyncData(o,t.id,d)).dataPresent,u=s.dataValid,c&&u||this.fireSync(r,t,n,o,a,d)):(o=[],this.fireSync(r,t,n,o,a,d))},pruneSyncData:function(e,t,n){var i,r,a,o=!1,s=!1;for(r=0;r<e.length;r++)i=e[r],a=parseInt(i.split("-")[1],10),i.match("^"+t+"-")?(o=!0,n<a?s=!0:(e.splice(r,1),r--)):n>=a&&(e.splice(r,1),r--);return{dataPresent:o,dataValid:s}},manageSyncsSize:function(e){if(e.join("*").length>this.MAX_SYNCS_LENGTH)for(e.sort((function(e,t){return parseInt(e.split("-")[1],10)-parseInt(t.split("-")[1],10)}));e.join("*").length>this.MAX_SYNCS_LENGTH;)e.shift()},fireSync:function(t,n,i,r,a,o){var s=this;if(t){if("img"===n.tag){var l,c,u,d,h=n.url,p=e.loadSSL?"https:":"http:";for(l=0,c=h.length;l<c;l++){u=h[l],d=/^\/\//.test(u);var _=new Image;_.addEventListener("load",function(t,n,i,r){return function(){s.onPagePixels[t]=null,e._readVisitor();var o,l,c,u,d=e._getField(a),h=[];if(d)for(l=0,c=(o=d.split("*")).length;l<c;l++)(u=o[l]).match("^"+n.id+"-")||h.push(u);s.setSyncTrackingData(h,n,i,r)}}(this.onPagePixels.length,n,a,o)),_.src=(d?p:"")+u,this.onPagePixels.push(_)}}}else this.addMessage(i),this.setSyncTrackingData(r,n,a,o)},addMessage:function(t){var n=encodeURIComponent(e._enableErrorReporting?"---destpub-debug---":"---destpub---");this.messages.push((z.POST_MESSAGE_ENABLED?"":n)+t)},setSyncTrackingData:function(t,n,i,r){t.push(n.id+"-"+(r+Math.ceil(n.ttl/60/24))),this.manageSyncsSize(t),e._setField(i,t.join("*"))},sendMessages:function(){var e,t=this,n="",i=encodeURIComponent;this.regionChanged&&(n=i("---destpub-clear-dextp---"),this.regionChanged=!1),this.messages.length?z.POST_MESSAGE_ENABLED?(e=n+i("---destpub-combined---")+this.messages.join("%01"),this.postMessage(e),this.messages=[],this.sendingMessages=!1):(e=this.messages.shift(),this.postMessage(n+e),setTimeout((function(){t.sendMessages()}),this.messageSendingInterval)):this.sendingMessages=!1},postMessage:function(e){q(e,this.url,this.iframe.contentWindow),this.messagesPosted.push(e)},receiveMessage:function(e){var t,n=/^---destpub-to-parent---/;"string"==typeof e&&n.test(e)&&("canSetThirdPartyCookies"===(t=e.replace(n,"").split("|"))[0]&&(this.canSetThirdPartyCookies="true"===t[1],this.receivedThirdPartyCookiesNotification=!0,this.requestToProcess()),this.messagesReceived.push(e))},processIDCallData:function(i){(null==this.url||i.subdomain&&"nosubdomainreturned"===this.subdomain)&&("string"==typeof e._subdomain&&e._subdomain.length?this.subdomain=e._subdomain:this.subdomain=i.subdomain||"",this.url=this.getUrl()),i.ibs instanceof Array&&i.ibs.length&&(this.doAttachIframe=!0),this.readyToAttachIframe()&&(e.idSyncAttachIframeOnWindowLoad?(t.windowLoaded||"complete"===n.readyState||"loaded"===n.readyState)&&this.attachIframe():this.attachIframeASAP()),"function"==typeof e.idSyncIDCallResult?e.idSyncIDCallResult(i):this.requestToProcess(i),"function"==typeof e.idSyncAfterIDCallResult&&e.idSyncAfterIDCallResult(i)},canMakeSyncIDCall:function(t,n){return e._forceSyncIDCall||!t||n-t>z.DAYS_BETWEEN_SYNC_ID_CALLS},attachIframeASAP:function(){var e=this;!function t(){e.startedAttachingIframe||(n.body?e.attachIframe():setTimeout(t,30))}()}}}(h,E);h._destinationPublishing=x,h.timeoutMetricsLog=[];var F={isClientSideMarketingCloudVisitorID:null,MCIDCallTimedOut:null,AnalyticsIDCallTimedOut:null,AAMIDCallTimedOut:null,fieldGroupObj:{},setState:function(e,t){switch(e){case"MC":!1===t?!0!==this.MCIDCallTimedOut&&(this.MCIDCallTimedOut=!1):this.MCIDCallTimedOut=t;break;case A:!1===t?!0!==this.AnalyticsIDCallTimedOut&&(this.AnalyticsIDCallTimedOut=!1):this.AnalyticsIDCallTimedOut=t;break;case I:!1===t?!0!==this.AAMIDCallTimedOut&&(this.AAMIDCallTimedOut=!1):this.AAMIDCallTimedOut=t}}};h.isClientSideMarketingCloudVisitorID=function(){return F.isClientSideMarketingCloudVisitorID},h.MCIDCallTimedOut=function(){return F.MCIDCallTimedOut},h.AnalyticsIDCallTimedOut=function(){return F.AnalyticsIDCallTimedOut},h.AAMIDCallTimedOut=function(){return F.AAMIDCallTimedOut},h.idSyncGetOnPageSyncInfo=function(){return h._readVisitor(),h._getField("MCSYNCSOP")},h.idSyncByURL=function(e){if(!h.isOptedOut()){var t=function(e){var t=e.minutesToLive,n="";return(h.idSyncDisableSyncs||h.disableIdSyncs)&&(n=n||"Error: id syncs have been disabled"),"string"==typeof e.dpid&&e.dpid.length||(n=n||"Error: config.dpid is empty"),"string"==typeof e.url&&e.url.length||(n=n||"Error: config.url is empty"),void 0===t?t=20160:(t=parseInt(t,10),(isNaN(t)||t<=0)&&(n=n||"Error: config.minutesToLive needs to be a positive number")),{error:n,ttl:t}}(e||{});if(t.error)return t.error;var n,i,r=e.url,a=encodeURIComponent,o=x;return r=r.replace(/^https:/,"").replace(/^http:/,""),n=P.encodeAndBuildRequest(["",e.dpid,e.dpuuid||""],","),i=["ibs",a(e.dpid),"img",a(r),t.ttl,"",n],o.addMessage(i.join("|")),o.requestToProcess(),"Successfully queued"}},h.idSyncByDataSource=function(e){if(!h.isOptedOut())return e===Object(e)&&"string"==typeof e.dpuuid&&e.dpuuid.length?(e.url="//dpm.demdex.net/ibs:dpid="+e.dpid+"&dpuuid="+e.dpuuid,h.idSyncByURL(e)):"Error: config or config.dpuuid is empty"},function(e,t){e.publishDestinations=function(n){var i=arguments[1],r=arguments[2];try{r="function"==typeof r?r:n.callback}catch(e){r=function(){}}var a=t;if(a.readyToAttachIframePreliminary()){if("string"==typeof n){if(!n.length)return void r({error:"subdomain is not a populated string."});if(!(i instanceof Array&&i.length))return void r({error:"messages is not a populated array."});var o=!1;if(i.forEach((function(e){"string"==typeof e&&e.length&&(a.addMessage(e),o=!0)})),!o)return void r({error:"None of the messages are populated strings."})}else{if(!P.isObject(n))return void r({error:"Invalid parameters passed."});var s=n;if("string"!=typeof(n=s.subdomain)||!n.length)return void r({error:"config.subdomain is not a populated string."});var l=s.urlDestinations;if(!(l instanceof Array&&l.length))return void r({error:"config.urlDestinations is not a populated array."});var c=[];l.forEach((function(e){P.isObject(e)&&(e.hideReferrer?e.message&&a.addMessage(e.message):c.push(e))})),function e(){c.length&&setTimeout((function(){var t=new Image,n=c.shift();t.src=n.url,a.onPageDestinationsFired.push(n),e()}),100)}()}a.iframe?(r({message:"The destination publishing iframe is already attached and loaded."}),a.requestToProcess()):!e.subdomain&&e._getField("MCMID")?(a.subdomain=n,a.doAttachIframe=!0,a.url=a.getUrl(),a.readyToAttachIframe()?(a.iframeLoadedCallbacks.push((function(e){r({message:"Attempted to attach and load the destination publishing iframe through this API call. Result: "+(e.message||"no result")})})),a.attachIframe()):r({error:"Encountered a problem in attempting to attach and load the destination publishing iframe through this API call."})):a.iframeLoadedCallbacks.push((function(e){r({message:"Attempted to attach and load the destination publishing iframe through normal Visitor API processing. Result: "+(e.message||"no result")})}))}else r({error:"The destination publishing iframe is disabled in the Visitor library."})}}(h,x),h._getCookieVersion=function(e){e=e||h.cookieRead(h.cookieName);var t=z.VERSION_REGEX.exec(e);return t&&t.length>1?t[1]:null},h._resetAmcvCookie=function(e){var t=h._getCookieVersion();t&&!H(t,e)||L.removeCookie(h.cookieName)},h.setAsCoopSafe=function(){b=!0},h.setAsCoopUnsafe=function(){b=!1},function(){if(h.configs=Object.create(null),L.isObject(n))for(var e in n)D(e)&&(h[e]=n[e],h.configs[e]=n[e])}(),[["getMarketingCloudVisitorID"],["setCustomerIDs",void 0],["getAnalyticsVisitorID"],["getAudienceManagerLocationHint"],["getLocationHint"],["getAudienceManagerBlob"]].forEach((function(e){var t=e[0],n=2===e.length?e[1]:"",i=h[t];h[t]=function(e){return s()&&h.isAllowed()?i.apply(h,arguments):("function"==typeof e&&h._callCallback(e,[n]),n)}})),h.init=function(){if(!(!h.configs.doesOptInApply||p.optIn.isComplete&&s()))return p.optIn.fetchPermissions(c,!0);!function(){if(L.isObject(n)){h.idSyncContainerID=h.idSyncContainerID||0,b="boolean"==typeof h.isCoopSafe?h.isCoopSafe:L.parseBoolean(h.isCoopSafe),h.resetBeforeVersion&&h._resetAmcvCookie(h.resetBeforeVersion),h._attemptToPopulateIdsFromUrl(),h._attemptToPopulateSdidFromUrl(),h._readVisitor();var e=h._getField(w),t=Math.ceil((new Date).getTime()/z.MILLIS_PER_DAY);h.idSyncDisableSyncs||h.disableIdSyncs||!x.canMakeSyncIDCall(e,t)||(h._setFieldExpire(k,-1),h._setField(w,t)),h.getMarketingCloudVisitorID(),h.getAudienceManagerLocationHint(),h.getAudienceManagerBlob(),h._mergeServerState(h.serverState)}else h._attemptToPopulateIdsFromUrl(),h._attemptToPopulateSdidFromUrl()}(),function(){if(!h.idSyncDisableSyncs&&!h.disableIdSyncs){x.checkDPIframeSrc();S.addEventListener("load",(function(){E.windowLoaded=!0,function(){var e=x;e.readyToAttachIframe()&&e.attachIframe()}()}));try{G((function(e){x.receiveMessage(e.data)}),x.iframeHost)}catch(e){}}}(),h.whitelistIframeDomains&&z.POST_MESSAGE_ENABLED&&(h.whitelistIframeDomains=h.whitelistIframeDomains instanceof Array?h.whitelistIframeDomains:[h.whitelistIframeDomains],h.whitelistIframeDomains.forEach((function(e){var n=new O(t,e),i=B(h,n);G(i,e)})))}};De.config=J,u.Visitor=De;var Oe=De,Re=Ie.OptIn,Ne=Ie.IabPlugin;Oe.getInstance=function(e,t){if(!e)throw new Error("Visitor requires Adobe Marketing Cloud Org ID.");e.indexOf("@")<0&&(e+="@AdobeOrg");var n=function(){var t=u.s_c_il;if(t)for(var n=0;n<t.length;n++){var i=t[n];if(i&&"Visitor"===i._c&&i.marketingCloudOrgID===e)return i}}();if(n)return n;var i=function(e){if(P.isObject(e))return Object.keys(e).filter((function(t){return""!==e[t]})).reduce((function(t,n){var i="doesOptInApply"!==n?e[n]:J.normalizeConfig(e[n]),r=P.normalizeBoolean(i);return t[n]=r,t}),Object.create(null))}(t);!function(e){u.adobe.optIn=u.adobe.optIn||function(){var t=P.pluck(e,["doesOptInApply","previousPermissions","preOptInApprovals","isOptInStorageEnabled","optInStorageExpiry","isIabContext"]),n=e.optInCookieDomain||e.cookieDomain;n=(n=n||j())===window.location.hostname?"":n,t.optInCookieDomain=n;var i=new Re(t,{cookies:U});if(t.isIabContext){var r=new Ne(window.__cmp);i.registerPlugin(r)}return i}()}(i||{});var r=e.split("").reverse().join(""),a=new Oe(e,null,r);P.isObject(i)&&i.cookieDomain&&(a.cookieDomain=i.cookieDomain),u.s_c_il.splice(--u.s_c_in,1);var o=P.getIeVersion();if("number"==typeof o&&o<10)return a._helpers.replaceMethodsWithFunction(a,(function(){}));var s=function(){try{return u.self!==u.parent}catch(e){return!0}}()&&!function(e){return e.cookieWrite("TEST_AMCV_COOKIE","T",1),"T"===e.cookieRead("TEST_AMCV_COOKIE")&&(e._helpers.removeCookie("TEST_AMCV_COOKIE"),!0)}(a)&&u.parent?new N(e,i,a,u.parent):new Oe(e,i,r);return a=null,s.init(),s},function(){function e(){Oe.windowLoaded=!0}u.addEventListener?u.addEventListener("load",e):u.attachEvent&&u.attachEvent("onload",e),Oe.codeLoadEnd=(new Date).getTime()}()}();function n(e){var t=this;t.version="2.17.0";var n=window;n.s_c_in||(n.s_c_il=[],n.s_c_in=0),t._il=n.s_c_il,t._in=n.s_c_in,t._il[t._in]=t,n.s_c_in++,t._c="s_c";var i=n.AppMeasurement.ec;i||(i=null);var r,a,o,s=n;try{for(r=s.parent,a=s.location;r&&r.location&&a&&""+r.location!=""+a&&s.location&&""+r.location!=""+s.location&&r.location.host==a.host;)r=(s=r).parent}catch(e){}t.C=function(e){try{console.log(e)}catch(e){}},t.Pa=function(e){return""+parseInt(e)==""+e},t.replace=function(e,t,n){return!e||0>e.indexOf(t)?e:e.split(t).join(n)},t.escape=function(e){var n,i;if(!e)return e;for(e=encodeURIComponent(e),n=0;7>n;n++)i="+~!*()'".substring(n,n+1),0<=e.indexOf(i)&&(e=t.replace(e,i,"%"+i.charCodeAt(0).toString(16).toUpperCase()));return e},t.unescape=function(e){if(!e)return e;e=0<=e.indexOf("+")?t.replace(e,"+"," "):e;try{return decodeURIComponent(e)}catch(e){}return unescape(e)},t.Kb=function(){var e,i=n.location.hostname,r=t.fpCookieDomainPeriods;if(r||(r=t.cookieDomainPeriods),i&&!t.Ia&&!/^[0-9.]+$/.test(i)&&(r=2<(r=r?parseInt(r):2)?r:2,0<=(e=i.lastIndexOf(".")))){for(;0<=e&&1<r;)e=i.lastIndexOf(".",e-1),r--;t.Ia=0<e?i.substring(e):i}return t.Ia},t.c_r=t.cookieRead=function(e){e=t.escape(e);var n=" "+t.d.cookie,i=n.indexOf(" "+e+"="),r=0>i?i:n.indexOf(";",i);return"[[B]]"!=(e=0>i?"":t.unescape(n.substring(i+2+e.length,0>r?n.length:r)))?e:""},t.c_w=t.cookieWrite=function(e,n,i){var r,a=t.Kb(),o=t.cookieLifetime;return n=""+n,o=o?(""+o).toUpperCase():"",i&&"SESSION"!=o&&"NONE"!=o&&((r=""!=n?parseInt(o||0):-60)?(i=new Date).setTime(i.getTime()+1e3*r):1===i&&(r=(i=new Date).getYear(),i.setYear(r+2+(1900>r?1900:0)))),e&&"NONE"!=o?(t.d.cookie=t.escape(e)+"="+t.escape(""!=n?n:"[[B]]")+"; path=/;"+(i&&"SESSION"!=o?" expires="+i.toUTCString()+";":"")+(a?" domain="+a+";":""),t.cookieRead(e)==n):0},t.Hb=function(){var e=t.Util.getIeVersion();"number"==typeof e&&10>e&&(t.unsupportedBrowser=!0,t.ub(t,(function(){})))},t.ub=function(e,t){for(var n in e)e.hasOwnProperty(n)&&"function"==typeof e[n]&&(e[n]=t)},t.K=[],t.ea=function(e,n,i){if(t.Ja)return 0;t.maxDelay||(t.maxDelay=250);var r=0,a=(new Date).getTime()+t.maxDelay,o=t.d.visibilityState,s=["webkitvisibilitychange","visibilitychange"];if(o||(o=t.d.webkitVisibilityState),o&&"prerender"==o){if(!t.fa)for(t.fa=1,i=0;i<s.length;i++)t.d.addEventListener(s[i],(function(){var e=t.d.visibilityState;e||(e=t.d.webkitVisibilityState),"visible"==e&&(t.fa=0,t.delayReady())}));r=1,a=0}else i||t.u("_d")&&(r=1);return r&&(t.K.push({m:e,a:n,t:a}),t.fa||setTimeout(t.delayReady,t.maxDelay)),r},t.delayReady=function(){var e,n=(new Date).getTime(),i=0;for(t.u("_d")?i=1:t.ya();0<t.K.length;){if(e=t.K.shift(),i&&!e.t&&e.t>n){t.K.unshift(e),setTimeout(t.delayReady,parseInt(t.maxDelay/2));break}t.Ja=1,t[e.m].apply(t,e.a),t.Ja=0}},t.setAccount=t.sa=function(e){var n,i;if(!t.ea("setAccount",arguments))if(t.account=e,t.allAccounts)for(n=t.allAccounts.concat(e.split(",")),t.allAccounts=[],n.sort(),i=0;i<n.length;i++)0!=i&&n[i-1]==n[i]||t.allAccounts.push(n[i]);else t.allAccounts=e.split(",")},t.foreachVar=function(e,n){var i,r,a,o,s="";for(a=r="",t.lightProfileID?(i=t.O,(s=t.lightTrackVars)&&(s=","+s+","+t.ka.join(",")+",")):(i=t.g,(t.pe||t.linkType)&&(s=t.linkTrackVars,r=t.linkTrackEvents,t.pe&&(a=t.pe.substring(0,1).toUpperCase()+t.pe.substring(1),t[a]&&(s=t[a].ac,r=t[a].$b))),s&&(s=","+s+","+t.F.join(",")+","),r&&s&&(s+=",events,")),n&&(n=","+n+","),r=0;r<i.length;r++)a=i[r],(o=t[a])&&(!s||0<=s.indexOf(","+a+","))&&(!n||0<=n.indexOf(","+a+","))&&e(a,o)},t.o=function(e,n,i,r,a){var o,s,l,c,u="",d=0;if("contextData"==e&&(e="c"),n){for(o in n)if(!(Object.prototype[o]||a&&o.substring(0,a.length)!=a)&&n[o]&&(!i||0<=i.indexOf(","+(r?r+".":"")+o+","))){if(l=!1,d)for(s=0;s<d.length;s++)if(o.substring(0,d[s].length)==d[s]){l=!0;break}if(!l&&(""==u&&(u+="&"+e+"."),s=n[o],a&&(o=o.substring(a.length)),0<o.length))if(0<(l=o.indexOf(".")))l=(a||"")+(s=o.substring(0,l))+".",d||(d=[]),d.push(l),u+=t.o(s,n,i,r,l);else if("boolean"==typeof s&&(s=s?"true":"false"),s){if("retrieveLightData"==r&&0>a.indexOf(".contextData."))switch(l=o.substring(0,4),c=o.substring(4),o){case"transactionID":o="xact";break;case"channel":o="ch";break;case"campaign":o="v0";break;default:t.Pa(c)&&("prop"==l?o="c"+c:"eVar"==l?o="v"+c:"list"==l?o="l"+c:"hier"==l&&(o="h"+c,s=s.substring(0,255)))}u+="&"+t.escape(o)+"="+t.escape(s)}}""!=u&&(u+="&."+e)}return u},t.usePostbacks=0,t.Nb=function(){var e,n,r,a,o,s,l,c,u="",d="",h="",p=a="",_=t.T();if(t.lightProfileID?(e=t.O,(d=t.lightTrackVars)&&(d=","+d+","+t.ka.join(",")+",")):(e=t.g,(t.pe||t.linkType)&&(d=t.linkTrackVars,h=t.linkTrackEvents,t.pe&&(a=t.pe.substring(0,1).toUpperCase()+t.pe.substring(1),t[a]&&(d=t[a].ac,h=t[a].$b))),d&&(d=","+d+","+t.F.join(",")+","),h&&(h=","+h+",",d&&(d+=",events,")),t.events2&&(p+=(""!=p?",":"")+t.events2)),_&&_.getCustomerIDs){if(a=i,o=_.getCustomerIDs())for(n in o)Object.prototype[n]||"object"==typeof(r=o[n])&&(a||(a={}),r.id&&(a[n+".id"]=r.id),r.authState&&(a[n+".as"]=r.authState));a&&(u+=t.o("cid",a))}for(t.AudienceManagement&&t.AudienceManagement.isReady()&&(u+=t.o("d",t.AudienceManagement.getEventCallConfigParams())),n=0;n<e.length;n++){if(a=e[n],o=t[a],r=a.substring(0,4),s=a.substring(4),o||("events"==a&&p?(o=p,p=""):"marketingCloudOrgID"==a&&_&&t.V("ECID")&&(o=_.marketingCloudOrgID)),o&&(!d||0<=d.indexOf(","+a+","))){switch(a){case"customerPerspective":a="cp";break;case"marketingCloudOrgID":a="mcorgid";break;case"supplementalDataID":a="sdid";break;case"timestamp":a="ts";break;case"dynamicVariablePrefix":a="D";break;case"visitorID":a="vid";break;case"marketingCloudVisitorID":a="mid";break;case"analyticsVisitorID":a="aid";break;case"audienceManagerLocationHint":a="aamlh";break;case"audienceManagerBlob":a="aamb";break;case"authState":a="as";break;case"pageURL":a="g",255<o.length&&(t.pageURLRest=o.substring(255),o=o.substring(0,255));break;case"pageURLRest":a="-g";break;case"referrer":a="r";break;case"vmk":case"visitorMigrationKey":a="vmt";break;case"visitorMigrationServer":a="vmf",t.ssl&&t.visitorMigrationServerSecure&&(o="");break;case"visitorMigrationServerSecure":a="vmf",!t.ssl&&t.visitorMigrationServer&&(o="");break;case"charSet":a="ce";break;case"visitorNamespace":a="ns";break;case"cookieDomainPeriods":a="cdp";break;case"cookieLifetime":a="cl";break;case"variableProvider":a="vvp";break;case"currencyCode":a="cc";break;case"channel":a="ch";break;case"transactionID":a="xact";break;case"campaign":a="v0";break;case"latitude":a="lat";break;case"longitude":a="lon";break;case"resolution":a="s";break;case"colorDepth":a="c";break;case"javascriptVersion":a="j";break;case"javaEnabled":a="v";break;case"cookiesEnabled":a="k";break;case"browserWidth":a="bw";break;case"browserHeight":a="bh";break;case"connectionType":a="ct";break;case"homepage":a="hp";break;case"events":if(p&&(o+=(""!=o?",":"")+p),h)for(s=o.split(","),o="",r=0;r<s.length;r++)0<=(c=(l=s[r]).indexOf("="))&&(l=l.substring(0,c)),0<=(c=l.indexOf(":"))&&(l=l.substring(0,c)),0<=h.indexOf(","+l+",")&&(o+=(o?",":"")+s[r]);break;case"events2":o="";break;case"contextData":u+=t.o("c",t[a],d,a),o="";break;case"lightProfileID":a="mtp";break;case"lightStoreForSeconds":a="mtss",t.lightProfileID||(o="");break;case"lightIncrementBy":a="mti",t.lightProfileID||(o="");break;case"retrieveLightProfiles":a="mtsr";break;case"deleteLightProfiles":a="mtsd";break;case"retrieveLightData":t.retrieveLightProfiles&&(u+=t.o("mts",t[a],d,a)),o="";break;default:t.Pa(s)&&("prop"==r?a="c"+s:"eVar"==r?a="v"+s:"list"==r?a="l"+s:"hier"==r&&(a="h"+s,o=o.substring(0,255)))}o&&(u+="&"+a+"="+("pev"!=a.substring(0,3)?t.escape(o):o))}"pev3"==a&&t.e&&(u+=t.e)}return t.ja&&(u+="&lrt="+t.ja,t.ja=null),u},t.B=function(e){var t=e.tagName;return"undefined"!=""+e.hc||"undefined"!=""+e.Wb&&"HTML"!=(""+e.Wb).toUpperCase()?"":("SHAPE"==(t=t&&t.toUpperCase?t.toUpperCase():"")&&(t=""),t&&(("INPUT"==t||"BUTTON"==t)&&e.type&&e.type.toUpperCase?t=e.type.toUpperCase():!t&&e.href&&(t="A")),t)},t.La=function(e){var t,i,r,a=n.location,o=e.href?e.href:"";return t=o.indexOf(":"),i=o.indexOf("?"),r=o.indexOf("/"),o&&(0>t||0<=i&&t>i||0<=r&&t>r)&&(i=e.protocol&&1<e.protocol.length?e.protocol:a.protocol?a.protocol:"",t=a.pathname.lastIndexOf("/"),o=(i?i+"//":"")+(e.host?e.host:a.host?a.host:"")+("/"!=o.substring(0,1)?a.pathname.substring(0,0>t?0:t)+"/":"")+o),o},t.L=function(e){var n,i,r=t.B(e),a="",o=0;return r&&(n=e.protocol,i=e.onclick,!e.href||"A"!=r&&"AREA"!=r||i&&n&&!(0>n.toLowerCase().indexOf("javascript"))?i?(a=t.replace(t.replace(t.replace(t.replace(""+i,"\r",""),"\n",""),"\t","")," ",""),o=2):"INPUT"==r||"SUBMIT"==r?(e.value?a=e.value:e.innerText?a=e.innerText:e.textContent&&(a=e.textContent),o=3):"IMAGE"==r&&e.src&&(a=e.src):a=t.La(e),a)?{id:a.substring(0,100),type:o}:0},t.fc=function(e){for(var n=t.B(e),i=t.L(e);e&&!i&&"BODY"!=n;)(e=e.parentElement?e.parentElement:e.parentNode)&&(n=t.B(e),i=t.L(e));return i&&"BODY"!=n||(e=0),e&&(0<=(n=e.onclick?""+e.onclick:"").indexOf(".tl(")||0<=n.indexOf(".trackLink("))&&(e=0),e},t.Vb=function(){var e,i,r,a,o=t.linkObject,s=t.linkType,l=t.linkURL;if(t.la=1,o||(t.la=0,o=t.clickObject),o){for(e=t.B(o),i=t.L(o);o&&!i&&"BODY"!=e;)(o=o.parentElement?o.parentElement:o.parentNode)&&(e=t.B(o),i=t.L(o));if(i&&"BODY"!=e||(o=0),o&&!t.linkObject){var c=o.onclick?""+o.onclick:"";(0<=c.indexOf(".tl(")||0<=c.indexOf(".trackLink("))&&(o=0)}}else t.la=1;if(!l&&o&&(l=t.La(o)),l&&!t.linkLeaveQueryString&&(0<=(r=l.indexOf("?"))&&(l=l.substring(0,r))),!s&&l){var u,d=0,h=0;if(t.trackDownloadLinks&&t.linkDownloadFileTypes)for(r=(c=l.toLowerCase()).indexOf("?"),a=c.indexOf("#"),0<=r?0<=a&&a<r&&(r=a):r=a,0<=r&&(c=c.substring(0,r)),r=t.linkDownloadFileTypes.toLowerCase().split(","),a=0;a<r.length;a++)(u=r[a])&&c.substring(c.length-(u.length+1))=="."+u&&(s="d");if(t.trackExternalLinks&&!s&&(c=l.toLowerCase(),t.Oa(c)&&(t.linkInternalFilters||(t.linkInternalFilters=n.location.hostname),r=0,t.linkExternalFilters?(r=t.linkExternalFilters.toLowerCase().split(","),d=1):t.linkInternalFilters&&(r=t.linkInternalFilters.toLowerCase().split(",")),r))){for(a=0;a<r.length;a++)u=r[a],0<=c.indexOf(u)&&(h=1);h?d&&(s="e"):d||(s="e")}}t.linkObject=o,t.linkURL=l,t.linkType=s,(t.trackClickMap||t.trackInlineStats)&&(t.e="",o&&(s=t.pageName,l=1,o=o.sourceIndex,s||(s=t.pageURL,l=0),n.s_objectID&&(i.id=n.s_objectID,o=i.type=1),s&&i&&i.id&&e&&(t.e="&pid="+t.escape(s.substring(0,255))+(l?"&pidt="+l:"")+"&oid="+t.escape(i.id.substring(0,100))+(i.type?"&oidt="+i.type:"")+"&ot="+e+(o?"&oi="+o:""))))},t.Ob=function(){var e=t.la,n=t.linkType,i=t.linkURL,r=t.linkName;if(n&&(i||r)&&("d"!=(n=n.toLowerCase())&&"e"!=n&&(n="o"),t.pe="lnk_"+n,t.pev1=i?t.escape(i):"",t.pev2=r?t.escape(r):"",e=1),t.abort&&(e=0),t.trackClickMap||t.trackInlineStats||t.Rb()){n={},i=0;var a,o,s,l=(c=t.pb())?c.split("&"):0,c=0;if(l)for(a=0;a<l.length;a++)o=l[a].split("="),r=t.unescape(o[0]).split(","),n[o=t.unescape(o[1])]=r;for(s in r=t.account.split(","),a={},t.contextData)s&&!Object.prototype[s]&&"a.activitymap."==s.substring(0,14)&&(a[s]=t.contextData[s],t.contextData[s]="");if(t.e=t.o("c",a)+(t.e?t.e:""),e||t.e){for(o in e&&!t.e&&(c=1),n)if(!Object.prototype[o])for(s=0;s<r.length;s++)for(c&&((l=n[o].join(","))==t.account&&(t.e+=("&"!=o.charAt(0)?"&":"")+o,n[o]=[],i=1)),a=0;a<n[o].length;a++)(l=n[o][a])==r[s]&&(c&&(t.e+="&u="+t.escape(l)+("&"!=o.charAt(0)?"&":"")+o+"&u=0"),n[o].splice(a,1),i=1);if(e||(i=1),i){for(o in c="",a=2,!e&&t.e&&(c=t.escape(r.join(","))+"="+t.escape(t.e),a=1),n)!Object.prototype[o]&&0<a&&0<n[o].length&&(c+=(c?"&":"")+t.escape(n[o].join(","))+"="+t.escape(o),a--);t.wb(c)}}}return e},t.pb=function(){return t.useLinkTrackSessionStorage?t.Ca()?n.sessionStorage.getItem(t.P):void 0:t.cookieRead(t.P)},t.Ca=function(){return!!n.sessionStorage},t.wb=function(e){t.useLinkTrackSessionStorage?t.Ca()&&n.sessionStorage.setItem(t.P,e):t.cookieWrite(t.P,e)},t.Pb=function(){if(!t.Zb){var e,n,i,r,a=new Date,o=s.location,l=n=e="",c="1.2",u=t.cookieWrite("s_cc","true",0)?"Y":"N",d="",h="";if(a.setUTCDate&&(c="1.3",(0).toPrecision&&(c="1.5",(a=[]).forEach))){c="1.6",n=0,e={};try{(n=new Iterator(e)).next&&(c="1.7",a.reduce&&((c="1.8").trim&&(c="1.8.1",Date.parse&&(c="1.8.2",Object.create&&(c="1.8.5")))))}catch(e){}}e=screen.width+"x"+screen.height,l=navigator.javaEnabled()?"Y":"N",n=screen.pixelDepth?screen.pixelDepth:screen.colorDepth,i=t.w.innerWidth?t.w.innerWidth:t.d.documentElement.offsetWidth,r=t.w.innerHeight?t.w.innerHeight:t.d.documentElement.offsetHeight;try{t.b.addBehavior("#default#homePage"),d=t.b.gc(o)?"Y":"N"}catch(e){}try{t.b.addBehavior("#default#clientCaps"),h=t.b.connectionType}catch(e){}t.resolution=e,t.colorDepth=n,t.javascriptVersion=c,t.javaEnabled=l,t.cookiesEnabled=u,t.browserWidth=i,t.browserHeight=r,t.connectionType=h,t.homepage=d,t.Zb=1}},t.Q={},t.loadModule=function(e,i){var r=t.Q[e];if(!r){r=n["AppMeasurement_Module_"+e]?new n["AppMeasurement_Module_"+e](t):{},t.Q[e]=t[e]=r,r.ib=function(){return r.sb},r.xb=function(n){(r.sb=n)&&(t[e+"_onLoad"]=n,t.ea(e+"_onLoad",[t,r],1)||n(t,r))};try{Object.defineProperty?Object.defineProperty(r,"onLoad",{get:r.ib,set:r.xb}):r._olc=1}catch(e){r._olc=1}}i&&(t[e+"_onLoad"]=i,t.ea(e+"_onLoad",[t,r],1)||i(t,r))},t.u=function(e){var n,i;for(n in t.Q)if(!Object.prototype[n]&&(i=t.Q[n])&&(i._olc&&i.onLoad&&(i._olc=0,i.onLoad(t,i)),i[e]&&i[e]()))return 1;return 0},t.Rb=function(){return!(!t.ActivityMap||!t.ActivityMap._c)},t.Sb=function(){var e=Math.floor(1e13*Math.random()),n=t.visitorSampling,i=t.visitorSamplingGroup,r=(i="s_vsn_"+(t.visitorNamespace?t.visitorNamespace:t.account)+(i?"_"+i:""),t.cookieRead(i));if(n){if(n*=100,r&&(r=parseInt(r)),!r){if(!t.cookieWrite(i,e))return 0;r=e}if(r%1e4>n)return 0}return 1},t.S=function(e,n){var i,r,a,o,s,l,c;for(c={},i=0;2>i;i++)for(r=0<i?t.Ea:t.g,a=0;a<r.length;a++)if((s=e[o=r[a]])||e["!"+o]){if(s&&!n&&("contextData"==o||"retrieveLightData"==o)&&t[o])for(l in t[o])s[l]||(s[l]=t[o][l]);t[o]||(c["!"+o]=1),c[o]=t[o],t[o]=s}return c},t.cc=function(e){var n,i,r,a;for(n=0;2>n;n++)for(i=0<n?t.Ea:t.g,r=0;r<i.length;r++)e[a=i[r]]=t[a],e[a]||"prop"!==a.substring(0,4)&&"eVar"!==a.substring(0,4)&&"hier"!==a.substring(0,4)&&"list"!==a.substring(0,4)&&"channel"!==a&&"events"!==a&&"eventList"!==a&&"products"!==a&&"productList"!==a&&"purchaseID"!==a&&"transactionID"!==a&&"state"!==a&&"zip"!==a&&"campaign"!==a&&"events2"!==a&&"latitude"!==a&&"longitude"!==a&&"ms_a"!==a&&"contextData"!==a&&"supplementalDataID"!==a&&"tnt"!==a&&"timestamp"!==a&&"abort"!==a&&"useBeacon"!==a&&"linkObject"!==a&&"clickObject"!==a&&"linkType"!==a&&"linkName"!==a&&"linkURL"!==a&&"bodyClickTarget"!==a&&"bodyClickFunction"!==a||(e["!"+a]=1)},t.Jb=function(e){var t,n,i,r,a,o,s=0,l="",c="";if(e&&255<e.length&&(0<(n=(t=""+e).indexOf("?"))&&(o=t.substring(n+1),i=0,"http://"==(r=(t=t.substring(0,n)).toLowerCase()).substring(0,7)?i+=7:"https://"==r.substring(0,8)&&(i+=8),0<(n=r.indexOf("/",i))&&(r=r.substring(i,n),a=t.substring(n),t=t.substring(0,n),0<=r.indexOf("google")?s=",q,ie,start,search_key,word,kw,cd,":0<=r.indexOf("yahoo.co")?s=",p,ei,":0<=r.indexOf("baidu.")&&(s=",wd,word,"),s&&o)))){if((e=o.split("&"))&&1<e.length){for(i=0;i<e.length;i++)0<(n=(r=e[i]).indexOf("="))&&0<=s.indexOf(","+r.substring(0,n)+",")?l+=(l?"&":"")+r:c+=(c?"&":"")+r;l&&c?o=l+"&"+c:c=""}e=t+(0<(n=253-(o.length-c.length)-t.length)?a.substring(0,n):"")+"?"+o}return e},t.bb=function(e){var n=t.d.visibilityState,i=["webkitvisibilitychange","visibilitychange"];if(n||(n=t.d.webkitVisibilityState),n&&"prerender"==n){if(e)for(n=0;n<i.length;n++)t.d.addEventListener(i[n],(function(){var n=t.d.visibilityState;n||(n=t.d.webkitVisibilityState),"visible"==n&&e()}));return!1}return!0},t.ba=!1,t.H=!1,t.zb=function(){t.H=!0,t.p()},t.I=!1,t.Ab=function(e){t.marketingCloudVisitorID=e.MCMID,t.visitorOptedOut=e.MCOPTOUT,t.analyticsVisitorID=e.MCAID,t.audienceManagerLocationHint=e.MCAAMLH,t.audienceManagerBlob=e.MCAAMB,t.I=!1,t.p()},t.ab=function(e){return t.maxDelay||(t.maxDelay=250),!t.u("_d")||(e&&setTimeout((function(){e()}),t.maxDelay),!1)},t.Z=!1,t.G=!1,t.ya=function(){t.G=!0,t.p()},t.isReadyToTrack=function(){var e=!0;return!(!t.mb()||!t.kb())&&(t.ob()||(e=!1),t.rb()||(e=!1),e)},t.mb=function(){return t.ba||t.H||(t.bb(t.zb)?t.H=!0:t.ba=!0),!(t.ba&&!t.H)},t.kb=function(){var e=t.va();if(e){if(!t.ra&&!t.aa)return e.fetchPermissions(t.tb,!0),t.aa=!0,!1;if(!t.ra)return!1;if(!e.isApproved(e.Categories.ANALYTICS))return!1}return!0},t.V=function(e){var n=t.va();return!(n&&!n.isApproved(n.Categories[e]))},t.va=function(){return n.adobe&&n.adobe.optIn?n.adobe.optIn:null},t.Y=!0,t.ob=function(){var e=t.T();return!e||!e.getVisitorValues||(t.Y&&(t.Y=!1,t.I||(t.I=!0,e.getVisitorValues(t.Ab))),!t.I)},t.T=function(){var e=t.visitor;return e&&!e.isAllowed()&&(e=null),e},t.rb=function(){return t.Z||t.G||(t.ab(t.ya)?t.G=!0:t.Z=!0),!(t.Z&&!t.G)},t.aa=!1,t.tb=function(){t.aa=!1,t.ra=!0},t.j=i,t.q=0,t.callbackWhenReadyToTrack=function(e,n,r){var a;(a={}).Eb=e,a.Db=n,a.Bb=r,t.j==i&&(t.j=[]),t.j.push(a),0==t.q&&(t.q=setInterval(t.p,100))},t.p=function(){var e;if(t.isReadyToTrack()&&(t.yb(),t.j!=i))for(;0<t.j.length;)(e=t.j.shift()).Db.apply(e.Eb,e.Bb)},t.yb=function(){t.q&&(clearInterval(t.q),t.q=0)},t.ta=function(e){var n,r={};if(t.cc(r),e!=i)for(n in e)r[n]=e[n];t.callbackWhenReadyToTrack(t,t.Da,[r]),t.Ba()},t.Lb=function(){var e,n=t.cookieRead("s_fid"),i="",r="";e=8;var a=4;if(!n||0>n.indexOf("-")){for(n=0;16>n;n++)e=Math.floor(Math.random()*e),i+="0123456789ABCDEF".substring(e,e+1),e=Math.floor(Math.random()*a),r+="0123456789ABCDEF".substring(e,e+1),e=a=16;n=i+"-"+r}return t.cookieWrite("s_fid",n,1)||(n=0),n},t.Da=function(e){var i,r=new Date,a="s"+Math.floor(r.getTime()/108e5)%10+Math.floor(1e13*Math.random()),o=r.getYear(),l=(o="t="+t.escape(r.getDate()+"/"+r.getMonth()+"/"+(1900>o?o+1900:o)+" "+r.getHours()+":"+r.getMinutes()+":"+r.getSeconds()+" "+r.getDay()+" "+r.getTimezoneOffset()),t.T());e&&(i=t.S(e,1)),t.Sb()&&!t.visitorOptedOut&&(t.wa()||(t.fid=t.Lb()),t.Vb(),t.usePlugins&&t.doPlugins&&t.doPlugins(t),t.account&&(t.abort||(t.trackOffline&&!t.timestamp&&(t.timestamp=Math.floor(r.getTime()/1e3)),e=n.location,t.pageURL||(t.pageURL=e.href?e.href:e),t.referrer||t.Za||(e=t.Util.getQueryParam("adobe_mc_ref",null,null,!0),t.referrer=e||void 0===e?void 0===e?"":e:s.document.referrer),t.Za=1,t.referrer=t.Jb(t.referrer),t.u("_g")),t.Ob()&&!t.abort&&(l&&t.V("TARGET")&&!t.supplementalDataID&&l.getSupplementalDataID&&(t.supplementalDataID=l.getSupplementalDataID("AppMeasurement:"+t._in,!t.expectSupplementalData)),t.V("AAM")||(t.contextData["cm.ssf"]=1),t.Pb(),o+=t.Nb(),t.qb(a,o),t.u("_t"),t.referrer=""))),t.Ba(),i&&t.S(i,1)},t.t=t.track=function(e,n){n&&t.S(n),t.Y=!0,t.isReadyToTrack()?null!=t.j&&0<t.j.length?(t.ta(e),t.p()):t.Da(e):t.ta(e)},t.Ba=function(){t.abort=t.supplementalDataID=t.timestamp=t.pageURLRest=t.linkObject=t.clickObject=t.linkURL=t.linkName=t.linkType=n.s_objectID=t.pe=t.pev1=t.pev2=t.pev3=t.e=t.lightProfileID=t.useBeacon=t.referrer=0},t.Aa=[],t.registerPreTrackCallback=function(e){for(var n=[],i=1;i<arguments.length;i++)n.push(arguments[i]);"function"==typeof e?t.Aa.push([e,n]):t.debugTracking&&t.C("DEBUG: Non function type passed to registerPreTrackCallback")},t.fb=function(e){t.ua(t.Aa,e)},t.za=[],t.registerPostTrackCallback=function(e){for(var n=[],i=1;i<arguments.length;i++)n.push(arguments[i]);"function"==typeof e?t.za.push([e,n]):t.debugTracking&&t.C("DEBUG: Non function type passed to registerPostTrackCallback")},t.eb=function(e){t.ua(t.za,e)},t.ua=function(e,n){if("object"==typeof e)for(var i=0;i<e.length;i++){var r=e[i][0],a=e[i][1].slice();if(a.unshift(n),"function"==typeof r)try{r.apply(null,a)}catch(e){t.debugTracking&&t.C(e.message)}}},t.tl=t.trackLink=function(e,n,i,r,a){return t.linkObject=e,t.linkType=n,t.linkName=i,a&&(t.bodyClickTarget=e,t.bodyClickFunction=a),t.track(r)},t.trackLight=function(e,n,i,r){return t.lightProfileID=e,t.lightStoreForSeconds=n,t.lightIncrementBy=i,t.track(r)},t.clearVars=function(){var e,n;for(e=0;e<t.g.length;e++)("prop"==(n=t.g[e]).substring(0,4)||"eVar"==n.substring(0,4)||"hier"==n.substring(0,4)||"list"==n.substring(0,4)||"channel"==n||"events"==n||"eventList"==n||"products"==n||"productList"==n||"purchaseID"==n||"transactionID"==n||"state"==n||"zip"==n||"campaign"==n)&&(t[n]=void 0)},t.tagContainerMarker="",t.qb=function(e,n){var i=t.gb()+"/"+e+"?AQB=1&ndh=1&pf=1&"+(t.xa()?"callback=s_c_il["+t._in+"].doPostbacks&et=1&":"")+n+"&AQE=1";t.fb(i),t.cb(i),t.U()},t.gb=function(){var e=t.hb();return"http"+(t.ssl?"s":"")+"://"+e+"/b/ss/"+t.account+"/"+(t.mobile?"5.":"")+(t.xa()?"10":"1")+"/JS-"+t.version+(t.Yb?"T":"")+(t.tagContainerMarker?"-"+t.tagContainerMarker:"")},t.xa=function(){return t.AudienceManagement&&t.AudienceManagement.isReady()||0!=t.usePostbacks},t.hb=function(){var e=t.dc,n=t.trackingServer;return n?t.trackingServerSecure&&t.ssl&&(n=t.trackingServerSecure):("d1"==(e=e?(""+e).toLowerCase():"d1")?e="112":"d2"==e&&(e="122"),n=t.jb()+"."+e+".2o7.net"),n},t.jb=function(){var e=t.visitorNamespace;return e||(e=(e=t.account.split(",")[0]).replace(/[^0-9a-z]/gi,"")),e},t.Ya=/{(%?)(.*?)(%?)}/,t.bc=RegExp(t.Ya.source,"g"),t.Ib=function(e){if("object"==typeof e.dests)for(var n=0;n<e.dests.length;++n){var i=e.dests[n];if("string"==typeof i.c&&"aa."==i.id.substr(0,3))for(var r=i.c.match(t.bc),a=0;a<r.length;++a){var o=r[a],s=o.match(t.Ya),l="";"%"==s[1]&&"timezone_offset"==s[2]?l=(new Date).getTimezoneOffset():"%"==s[1]&&"timestampz"==s[2]&&(l=t.Mb()),i.c=i.c.replace(o,t.escape(l))}}},t.Mb=function(){var e=new Date,n=new Date(6e4*Math.abs(e.getTimezoneOffset()));return t.k(4,e.getFullYear())+"-"+t.k(2,e.getMonth()+1)+"-"+t.k(2,e.getDate())+"T"+t.k(2,e.getHours())+":"+t.k(2,e.getMinutes())+":"+t.k(2,e.getSeconds())+(0<e.getTimezoneOffset()?"-":"+")+t.k(2,n.getUTCHours())+":"+t.k(2,n.getUTCMinutes())},t.k=function(e,t){return(Array(e+1).join(0)+t).slice(-e)},t.pa={},t.doPostbacks=function(e){if("object"==typeof e)if(t.Ib(e),"object"==typeof t.AudienceManagement&&"function"==typeof t.AudienceManagement.isReady&&t.AudienceManagement.isReady()&&"function"==typeof t.AudienceManagement.passData)t.AudienceManagement.passData(e);else if("object"==typeof e&&"object"==typeof e.dests)for(var n=0;n<e.dests.length;++n){var i=e.dests[n];"object"==typeof i&&"string"==typeof i.c&&"string"==typeof i.id&&"aa."==i.id.substr(0,3)&&(t.pa[i.id]=new Image,t.pa[i.id].alt="",t.pa[i.id].src=i.c)}},t.cb=function(e){t.i||t.Qb(),t.i.push(e),t.ia=t.A(),t.Wa()},t.Qb=function(){t.i=t.Tb(),t.i||(t.i=[])},t.Tb=function(){var e,i;if(t.oa()){try{(i=n.localStorage.getItem(t.ma()))&&(e=n.JSON.parse(i))}catch(e){}return e}},t.oa=function(){var e=!0;return t.trackOffline&&t.offlineFilename&&n.localStorage&&n.JSON||(e=!1),e},t.Ma=function(){var e=0;return t.i&&(e=t.i.length),t.l&&e++,e},t.U=function(){if(!t.l||(t.v&&t.v.complete&&t.v.D&&t.v.R(),!t.l))if(t.Na=i,t.na)t.ia>t.N&&t.Ua(t.i),t.qa(500);else{var e=t.Cb();0<e?t.qa(e):(e=t.Ka())&&(t.l=1,t.Ub(e),t.Xb(e))}},t.qa=function(e){t.Na||(e||(e=0),t.Na=setTimeout(t.U,e))},t.Cb=function(){var e;return!t.trackOffline||0>=t.offlineThrottleDelay?0:(e=t.A()-t.Sa,t.offlineThrottleDelay<e?0:t.offlineThrottleDelay-e)},t.Ka=function(){if(0<t.i.length)return t.i.shift()},t.Ub=function(e){if(t.debugTracking){var n,i="AppMeasurement Debug: "+e;for(e=e.split("&"),n=0;n<e.length;n++)i+="\n\t"+t.unescape(e[n]);t.C(i)}},t.wa=function(){return t.marketingCloudVisitorID||t.analyticsVisitorID},t.X=!1;try{o=JSON.parse('{"x":"y"}')}catch(e){o=null}for(o&&"y"==o.x?(t.X=!0,t.W=function(e){return JSON.parse(e)}):n.$&&n.$.parseJSON?(t.W=function(e){return n.$.parseJSON(e)},t.X=!0):t.W=function(){return null},t.Xb=function(e){var r,a,o;if(t.lb(e)&&(a=1,r={send:function(e){t.useBeacon=!1,navigator.sendBeacon(e)?r.R():r.ga()}}),!r&&t.wa()&&2047<e.length&&(t.$a()&&(a=2,r=new XMLHttpRequest),r&&(t.AudienceManagement&&t.AudienceManagement.isReady()||0!=t.usePostbacks)&&(t.X?r.Fa=!0:r=0)),!r&&t.Xa&&(e=e.substring(0,2047)),!r&&t.d.createElement&&(0!=t.usePostbacks||t.AudienceManagement&&t.AudienceManagement.isReady())&&(r=t.d.createElement("SCRIPT"))&&"async"in r&&((o=(o=t.d.getElementsByTagName("HEAD"))&&o[0]?o[0]:t.d.body)?(r.type="text/javascript",r.setAttribute("async","async"),a=3):r=0),r||((r=new Image).alt="",r.abort||void 0===n.InstallTrigger||(r.abort=function(){r.src=i})),r.Ta=Date.now(),r.Ha=function(){try{r.D&&(clearTimeout(r.D),r.D=0)}catch(e){}},r.onload=r.R=function(){if(r.Ta&&(t.ja=Date.now()-r.Ta),t.eb(e),r.Ha(),t.Gb(),t.ca(),t.l=0,t.U(),r.Fa){r.Fa=!1;try{t.doPostbacks(t.W(r.responseText))}catch(e){}}},r.onabort=r.onerror=r.ga=function(){r.Ha(),(t.trackOffline||t.na)&&t.l&&t.i.unshift(t.Fb),t.l=0,t.ia>t.N&&t.Ua(t.i),t.ca(),t.qa(500)},r.onreadystatechange=function(){4==r.readyState&&(200==r.status?r.R():r.ga())},t.Sa=t.A(),1===a)r.send(e);else if(2===a)o=e.indexOf("?"),a=e.substring(0,o),o=(o=e.substring(o+1)).replace(/&callback=[a-zA-Z0-9_.\[\]]+/,""),r.open("POST",a,!0),r.withCredentials=!0,r.send(o);else if(r.src=e,3===a){if(t.Qa)try{o.removeChild(t.Qa)}catch(e){}o.firstChild?o.insertBefore(r,o.firstChild):o.appendChild(r),t.Qa=t.v}r.D=setTimeout((function(){r.D&&(r.complete?r.R():(t.trackOffline&&r.abort&&r.abort(),r.ga()))}),5e3),t.Fb=e,t.v=n["s_i_"+t.replace(t.account,",","_")]=r,(t.useForcedLinkTracking&&t.J||t.bodyClickFunction)&&(t.forcedLinkTrackingTimeout||(t.forcedLinkTrackingTimeout=250),t.da=setTimeout(t.ca,t.forcedLinkTrackingTimeout))},t.lb=function(e){var n=!1;return navigator.sendBeacon&&(t.nb(e)||t.useBeacon)&&(n=!0),t.vb(e)&&(n=!1),n},t.nb=function(e){return!!(e&&0<e.indexOf("pe=lnk_e"))},t.vb=function(e){return 64e3<=e.length},t.$a=function(){return"undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest},t.Gb=function(){if(t.oa()&&!(t.Ra>t.N))try{n.localStorage.removeItem(t.ma()),t.Ra=t.A()}catch(e){}},t.Ua=function(e){if(t.oa()){t.Wa();try{n.localStorage.setItem(t.ma(),n.JSON.stringify(e)),t.N=t.A()}catch(e){}}},t.Wa=function(){if(t.trackOffline)for((!t.offlineLimit||0>=t.offlineLimit)&&(t.offlineLimit=10);t.i.length>t.offlineLimit;)t.Ka()},t.forceOffline=function(){t.na=!0},t.forceOnline=function(){t.na=!1},t.ma=function(){return t.offlineFilename+"-"+t.visitorNamespace+t.account},t.A=function(){return(new Date).getTime()},t.Oa=function(e){return 0!=(e=e.toLowerCase()).indexOf("#")&&0!=e.indexOf("about:")&&0!=e.indexOf("opera:")&&0!=e.indexOf("javascript:")},t.setTagContainer=function(e){var n,i,r;for(t.Yb=e,n=0;n<t._il.length;n++)if((i=t._il[n])&&"s_l"==i._c&&i.tagContainerName==e){if(t.S(i),i.lmq)for(n=0;n<i.lmq.length;n++)r=i.lmq[n],t.loadModule(r.n);if(i.ml)for(r in i.ml)if(t[r])for(n in e=t[r],r=i.ml[r])!Object.prototype[n]&&("function"!=typeof r[n]||0>(""+r[n]).indexOf("s_c_il"))&&(e[n]=r[n]);if(i.mmq)for(n=0;n<i.mmq.length;n++)r=i.mmq[n],t[r.m]&&((e=t[r.m])[r.f]&&"function"==typeof e[r.f]&&(r.a?e[r.f].apply(e,r.a):e[r.f].apply(e)));if(i.tq)for(n=0;n<i.tq.length;n++)t.track(i.tq[n]);i.s=t;break}},t.Util={urlEncode:t.escape,urlDecode:t.unescape,cookieRead:t.cookieRead,cookieWrite:t.cookieWrite,getQueryParam:function(e,i,r,a){var o,s="";return i||(i=t.pageURL?t.pageURL:n.location),r=r||"&",e&&i?0>(o=(i=""+i).indexOf("?"))?s:(i=r+i.substring(o+1)+r,a&&(0<=i.indexOf(r+e+r)||0<=i.indexOf(r+e+"="+r))?void 0:(0<=(o=i.indexOf("#"))&&(i=i.substr(0,o)+r),0>(o=i.indexOf(r+e+"="))||(0<=(o=(i=i.substring(o+r.length+e.length+1)).indexOf(r))&&(i=i.substring(0,o)),0<i.length&&(s=t.unescape(i))),s)):s},getIeVersion:function(){if(document.documentMode)return document.documentMode;for(var e=7;4<e;e--){var t=document.createElement("div");if(t.innerHTML="\x3c!--[if IE "+e+"]><span></span><![endif]--\x3e",t.getElementsByTagName("span").length)return e}return null}},t.F="supplementalDataID timestamp dynamicVariablePrefix visitorID marketingCloudVisitorID analyticsVisitorID audienceManagerLocationHint authState fid vmk visitorMigrationKey visitorMigrationServer visitorMigrationServerSecure charSet visitorNamespace cookieDomainPeriods fpCookieDomainPeriods cookieLifetime pageName pageURL customerPerspective referrer contextData currencyCode lightProfileID lightStoreForSeconds lightIncrementBy retrieveLightProfiles deleteLightProfiles retrieveLightData".split(" "),t.g=t.F.concat("purchaseID variableProvider channel server pageType transactionID campaign state zip events events2 products audienceManagerBlob tnt".split(" ")),t.ka="timestamp charSet visitorNamespace cookieDomainPeriods cookieLifetime contextData lightProfileID lightStoreForSeconds lightIncrementBy".split(" "),t.O=t.ka.slice(0),t.Ea="account allAccounts debugTracking visitor visitorOptedOut trackOffline offlineLimit offlineThrottleDelay offlineFilename usePlugins doPlugins configURL visitorSampling visitorSamplingGroup linkObject clickObject linkURL linkName linkType trackDownloadLinks trackExternalLinks trackClickMap trackInlineStats linkLeaveQueryString linkTrackVars linkTrackEvents linkDownloadFileTypes linkExternalFilters linkInternalFilters useForcedLinkTracking forcedLinkTrackingTimeout useLinkTrackSessionStorage trackingServer trackingServerSecure ssl abort mobile dc lightTrackVars maxDelay expectSupplementalData useBeacon usePostbacks registerPreTrackCallback registerPostTrackCallback bodyClickTarget bodyClickFunction AudienceManagement".split(" "),r=0;250>=r;r++)76>r&&(t.g.push("prop"+r),t.O.push("prop"+r)),t.g.push("eVar"+r),t.O.push("eVar"+r),6>r&&t.g.push("hier"+r),4>r&&t.g.push("list"+r);r="pe pev1 pev2 pev3 latitude longitude resolution colorDepth javascriptVersion javaEnabled cookiesEnabled browserWidth browserHeight connectionType homepage pageURLRest marketingCloudOrgID ms_a".split(" "),t.g=t.g.concat(r),t.F=t.F.concat(r),t.ssl=0<=n.location.protocol.toLowerCase().indexOf("https"),t.charSet="UTF-8",t.contextData={},t.offlineThrottleDelay=0,t.offlineFilename="AppMeasurement.offline",t.P="s_sq",t.Sa=0,t.ia=0,t.N=0,t.Ra=0,t.linkDownloadFileTypes="exe,zip,wav,mp3,mov,mpg,avi,wmv,pdf,doc,docx,xls,xlsx,ppt,pptx",t.w=n,t.d=n.document;try{if(t.Xa=!1,navigator){var l=navigator.userAgent;("Microsoft Internet Explorer"==navigator.appName||0<=l.indexOf("MSIE ")||0<=l.indexOf("Trident/")&&0<=l.indexOf("Windows NT 6"))&&(t.Xa=!0)}}catch(e){}t.ca=function(){t.da&&(n.clearTimeout(t.da),t.da=i),t.bodyClickTarget&&t.J&&t.bodyClickTarget.dispatchEvent(t.J),t.bodyClickFunction&&("function"==typeof t.bodyClickFunction?t.bodyClickFunction():t.bodyClickTarget&&t.bodyClickTarget.href&&(t.d.location=t.bodyClickTarget.href)),t.bodyClickTarget=t.J=t.bodyClickFunction=0},t.Va=function(){t.b=t.d.body,t.b?(t.r=function(e){var i,r,a,o,s;if(!(t.d&&t.d.getElementById("cppXYctnr")||e&&e["s_fe_"+t._in])){if(t.Ga){if(!t.useForcedLinkTracking)return t.b.removeEventListener("click",t.r,!0),void(t.Ga=t.useForcedLinkTracking=0);t.b.removeEventListener("click",t.r,!1)}else t.useForcedLinkTracking=0;t.clickObject=e.srcElement?e.srcElement:e.target;try{if(!t.clickObject||t.M&&t.M==t.clickObject||!(t.clickObject.tagName||t.clickObject.parentElement||t.clickObject.parentNode))t.clickObject=0;else{var l=t.M=t.clickObject;if(t.ha&&(clearTimeout(t.ha),t.ha=0),t.ha=setTimeout((function(){t.M==l&&(t.M=0)}),1e4),a=t.Ma(),t.track(),a<t.Ma()&&t.useForcedLinkTracking&&e.target){for(o=e.target;o&&o!=t.b&&"A"!=o.tagName.toUpperCase()&&"AREA"!=o.tagName.toUpperCase();)o=o.parentNode;if(o&&(s=o.href,t.Oa(s)||(s=0),r=o.target,e.target.dispatchEvent&&s&&(!r||"_self"==r||"_top"==r||"_parent"==r||n.name&&r==n.name))){try{i=t.d.createEvent("MouseEvents")}catch(e){i=new n.MouseEvent}if(i){try{i.initMouseEvent("click",e.bubbles,e.cancelable,e.view,e.detail,e.screenX,e.screenY,e.clientX,e.clientY,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,e.button,e.relatedTarget)}catch(e){i=0}i&&(i["s_fe_"+t._in]=i.s_fe=1,e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),e.preventDefault(),t.bodyClickTarget=e.target,t.J=i)}}}}}catch(e){t.clickObject=0}}},t.b&&t.b.attachEvent?t.b.attachEvent("onclick",t.r):t.b&&t.b.addEventListener&&(navigator&&(0<=navigator.userAgent.indexOf("WebKit")&&t.d.createEvent||0<=navigator.userAgent.indexOf("Firefox/2")&&n.MouseEvent)&&(t.Ga=1,t.useForcedLinkTracking=1,t.b.addEventListener("click",t.r,!0)),t.b.addEventListener("click",t.r,!1))):setTimeout(t.Va,30)},t.Hb(),t.ic||(e?t.setAccount(e):t.C("Error, missing Report Suite ID in AppMeasurement initialization"),t.Va(),t.loadModule("ActivityMap"))}function i(e){var t,i,r,a,o,s=window.s_c_il,l=e.split(","),c=0;if(s)for(i=0;!c&&i<s.length;){if("s_c"==(t=s[i])._c&&(t.account||t.oun))if(t.account&&t.account==e)c=1;else for(r=t.account?t.account:t.oun,r=t.allAccounts?t.allAccounts:r.split(","),a=0;a<l.length;a++)for(o=0;o<r.length;o++)l[a]==r[o]&&(c=1);i++}return c?t.setAccount&&t.setAccount(e):t=new n(e),t}n.getInstance=i,window.s_objectID||(window.s_objectID=0),function(){var e,t,n,r=window,a=r.s_giq;if(a)for(e=0;e<a.length;e++)(n=i((t=a[e]).oun)).setAccount(t.un),n.setTagContainer(t.tagContainerName);r.s_giq=0}(),window.AppMeasurement=n,e.exports={Visitor:Visitor,s_gi:i,AppMeasurement:n}}).call(this,n(22))},function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}},function(e,t){e.exports.getRefsecKeyValue=function(){var e=document.createElement("a");if(e.href=document.referrer,e.hostname.indexOf("wsj.com")<0&&e.hostname.indexOf("barrons.com")<0)return"";var t=e.pathname;"/"===t[0]&&(t=t.substring(1));var n=t.replace(/\//g,",").split(",");return"articles"===n[0]?"":n.join(",")}},function(e,t,n){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=u(e);if(t){var r=u(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return c(this,n)}}function c(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var d=n(1),h=d.h,p=d.render,_=d.Component,f=d.Fragment,g=n(3).Provider,v=n(9).emptyElement,m=n(153),y=n(171).MoreVideosSlide,S=n(175).Endscreen,E=n(177),b=n(184),T=n(186),w=n(188),A=n(190),C=n(192),I=n(194),P=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(u,e);var t,n,i,c=l(u);function u(){return a(this,u),c.apply(this,arguments)}return t=u,(n=[{key:"shouldComponentUpdate",value:function(){return!1}},{key:"render",value:function(){var e=this.props,t=e.videoId,n=e.videoProps,i=e.controlsProps,a=e.thumbProps,o=e.countdownProps,s=e.moreVideosSlideProps,l=e.endscreenProps,c=e.clickForSoundProps,u=e.disableTitle,d=e.liveButtonEnabled,p=e.saveToQueueEnabled;return h(f,null,h(w,o),!u&&h(b,{videoId:t}),h("div",{id:"video-ad-skip-".concat(t),class:"adSkip"},h("div",{class:"skipTxt"},"Skip Ad"),h("div",{class:"videoSkipIcon",id:"videoSkipIcon-".concat(t)}),h("div",{class:"videoSkipCountdown",id:"video-ad-countdown-".concat(t)}," in 15")),s&&h(y,r({videoId:t},s)),l&&h(S,l),h("div",{class:"video-share",id:"video-share-".concat(t)}),h("div",{id:"flashContainer-".concat(t),class:"flashVideo"}),h("video",r({src:"",id:"videoplayer-".concat(t),style:{width:"100%",height:"100%",position:"absolute"},preload:"none"},n,{crossorigin:"anonymous",controls:!0}),"Your browser does not support HTML5 video."),h("div",{class:"video-play-overlay",id:"video-play-overlay-".concat(t)}),h(I,null),h("div",{class:"video-adContainer",id:"adContainer-".concat(t)},h("div",{class:"ad-top-background"}),h("div",{class:"ad-circle",id:"ad-circle-".concat(t)}),h("div",{class:"ad-text"})),h("div",{id:"video-controls-container-".concat(t),class:"video-controls-container"},i&&h(m,r({videoId:t},i))),p&&h(T,null),h("div",{id:"vrWrapper_".concat(t),class:"vrWrapper"}),c&&h(A,r({videoId:t},c)),d&&!u&&h(C,{videoId:t}),h(E,r({videoId:t},a)),h("div",{class:"video-pause-slate",id:"video-pause-slate-".concat(t)}))}}])&&o(t.prototype,n),i&&o(t,i),u}(_);e.exports={renderUI:function(e,t,n){v(e);var i=document.createElement("div");return i.classList.add("video-wrapper"),i.id="wrapper-".concat(n.videoId),e.appendChild(i),p(h(g,{store:t},h(P,n)),i)}}},function(e,t,n){e.exports=n(150)()},function(e,t,n){"use strict";var i=n(151);function r(){}function a(){}a.resetWarningCache=r,e.exports=function(){function e(e,t,n,r,a,o){if(o!==i){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:a,resetWarningCache:r};return n.PropTypes=n,n}},function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t,n){"use strict";
/** @license React v16.13.0
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var i="function"==typeof Symbol&&Symbol.for,r=i?Symbol.for("react.element"):60103,a=i?Symbol.for("react.portal"):60106,o=i?Symbol.for("react.fragment"):60107,s=i?Symbol.for("react.strict_mode"):60108,l=i?Symbol.for("react.profiler"):60114,c=i?Symbol.for("react.provider"):60109,u=i?Symbol.for("react.context"):60110,d=i?Symbol.for("react.async_mode"):60111,h=i?Symbol.for("react.concurrent_mode"):60111,p=i?Symbol.for("react.forward_ref"):60112,_=i?Symbol.for("react.suspense"):60113,f=i?Symbol.for("react.suspense_list"):60120,g=i?Symbol.for("react.memo"):60115,v=i?Symbol.for("react.lazy"):60116,m=i?Symbol.for("react.block"):60121,y=i?Symbol.for("react.fundamental"):60117,S=i?Symbol.for("react.responder"):60118,E=i?Symbol.for("react.scope"):60119;function b(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case d:case h:case o:case l:case s:case _:return e;default:switch(e=e&&e.$$typeof){case u:case p:case v:case g:case c:return e;default:return t}}case a:return t}}}function T(e){return b(e)===h}t.AsyncMode=d,t.ConcurrentMode=h,t.ContextConsumer=u,t.ContextProvider=c,t.Element=r,t.ForwardRef=p,t.Fragment=o,t.Lazy=v,t.Memo=g,t.Portal=a,t.Profiler=l,t.StrictMode=s,t.Suspense=_,t.isAsyncMode=function(e){return T(e)||b(e)===d},t.isConcurrentMode=T,t.isContextConsumer=function(e){return b(e)===u},t.isContextProvider=function(e){return b(e)===c},t.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return b(e)===p},t.isFragment=function(e){return b(e)===o},t.isLazy=function(e){return b(e)===v},t.isMemo=function(e){return b(e)===g},t.isPortal=function(e){return b(e)===a},t.isProfiler=function(e){return b(e)===l},t.isStrictMode=function(e){return b(e)===s},t.isSuspense=function(e){return b(e)===_},t.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===o||e===h||e===l||e===s||e===_||e===f||"object"==typeof e&&null!==e&&(e.$$typeof===v||e.$$typeof===g||e.$$typeof===c||e.$$typeof===u||e.$$typeof===p||e.$$typeof===y||e.$$typeof===S||e.$$typeof===E||e.$$typeof===m)},t.typeOf=b},function(e,t,n){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=c(e);if(t){var r=c(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return l(this,n)}}function l(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var u=n(1),d=u.h,h=u.Component,p=n(3).connect,_=n(154),f=n(157),g=n(160),v=n(161),m=n(164),y=n(165),S=n(169),E=n(170),b=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(c,e);var t,n,i,l=s(c);function c(){return r(this,c),l.apply(this,arguments)}return t=c,(n=[{key:"componentDidMount",value:function(){document.getElementById("video-cc-".concat(this.props.videoId)).innerHTML=S,document.getElementById("video-share-b-".concat(this.props.videoId)).innerHTML=E}},{key:"componentDidUpdate",value:function(){this.props.isControlsVisible||this.props.showShareScreen(!1)}},{key:"render",value:function(){var e=this.props,t=e.isMobile,n=e.videoData,i=e.isAdMode,r="live"===n.state||"flive"===n.state||i,a={isMobile:t,videoId:this.props.videoId,onSeek:this.props.onSeek,showControls:this.props.showControls,enableScrubPreview:this.props.enableScrubPreview},o={onSaveChange:this.props.onSaveChange,saveApiPublication:this.props.saveApiPublication,saveApi:this.props.saveApi,guid:this.props.videoData.guid};return d("div",{className:"video-controls-background ".concat(this.props.isControlsVisible?"video-fade-in":"video-fade-out")},d("div",{className:"video-controls",id:"video-controls-".concat(this.props.videoId)},d(_,{onPlayPause:this.props.onPlayPause}),d(f,{videoId:this.props.videoId,onMuteUnMute:this.props.onMuteUnMute}),d(m,{videoId:this.props.videoId}),d(g,{videoId:this.props.videoId,onToggleFullScreen:this.props.onToggleFullScreen}),this.props.saveToQueueEnabled&&d(v,o),d("button",{className:"video-bit f-r",id:"video-bit-".concat(this.props.videoId)}),d("button",{className:"video-cc f-r",id:"video-cc-".concat(this.props.videoId)}),d("button",{className:"video-share-b f-r",id:"video-share-b-".concat(this.props.videoId)}),d("div",{className:"bitrate-list",id:"bitrate-list-".concat(this.props.videoId)}),d("div",{className:"captions-list",id:"captions-list-".concat(this.props.videoId)}),!r&&d(y,a)))}}])&&a(t.prototype,n),i&&a(t,i),c}(h);var T=p((function(e){return{isControlsVisible:e.isControlsVisible,videoData:e.videoData,isAdMode:e.isAdMode}}))(b);e.exports=T},function(e,t,n){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function o(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=c(e);if(t){var r=c(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return s(this,n)}}function s(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?l(e):t}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var u=n(1),d=u.h,h=u.Component,p=n(3).connect,_=n(30),f=n(10),g=n(155),v=n(156);function m(){}var y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(c,e);var t,n,i,s=o(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=s.call(this,e))._pickIcon=t._pickIcon.bind(l(t)),t}return t=c,(n=[{key:"_pickIcon",value:function(){var e=this.props,t=e.isPlaying,n=e.isAdPlaying,i=e.isAdMode;return e.isPlaybackInitializing?g:i?n?v:g:t?v:g}},{key:"shouldComponentUpdate",value:function(e){return this.props.isPlaying!==e.isPlaying||this.props.isAdPlaying!==e.isAdPlaying||this.props.isAdMode!==e.isAdMode||this.props.isPlaybackInitializing!==e.isPlaybackInitializing||this.props.isBtnDisabled!==e.isBtnDisabled}},{key:"render",value:function(){var e=this.props,t=e.onPlayPause,n=e.isBtnDisabled;return d("button",{onClick:n?m:t,className:_("f-l",{"disabled-btn":n}),dangerouslySetInnerHTML:{__html:this._pickIcon()}})}}])&&r(t.prototype,n),i&&r(t,i),c}(h);var S=p((function(e){return{isPlaying:e.isPlaying,isAdPlaying:e.isAdPlaying,isAdMode:e.isAdMode,isPlaybackInitializing:e.isPlaybackInitializing,isBtnDisabled:e.isPlaybackInitializing||e.adInitState===f.STARTED||e.videoApiLoadState===f.STARTED||e.imaLoadState===f.STARTED||e.hlsJsLoadState===f.STARTED}}))(y);e.exports=S},function(e,t){e.exports='<svg width="16px" height="22px" viewBox="0 0 20 28" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>Play</title><desc>Created with sketchtool.</desc><g id="Icons" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="Icons/Play/Play" fill="#FFFFFF" fill-rule="nonzero"><polyline id="Play" points="0 2 0 26 20 13.4528 0 2"></polyline></g></g></svg>'},function(e,t){e.exports='<title>Pause</title><svg width="16px" height="22px" viewBox="0 0 20 28" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g id="Icons" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="Icons/Play/Pause" fill="#FFFFFF" fill-rule="nonzero"><path d="M0,25 L0,3 L6,3 L6,25 L0,25 Z M11,25 L11,3 L17,3 L17,25 L11,25 Z" id="Combined-Shape"></path></g></g></svg>'},function(e,t,n){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=c(e);if(t){var r=c(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return l(this,n)}}function l(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var u=n(1),d=u.h,h=u.Component,p=n(3).connect,_=n(158),f=n(159),g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(c,e);var t,n,i,l=s(c);function c(){return r(this,c),l.apply(this,arguments)}return t=c,(n=[{key:"shouldComponentUpdate",value:function(e){return this.props.isMuted!==e.isMuted}},{key:"render",value:function(){var e=this.props,t=e.videoId,n=e.isMuted?f:_;return d("div",{className:"video-volume f-l",id:"video-volume-".concat(t)},d("div",{className:"video-volume-slider",id:"video-volume-slider-".concat(t)},d("div",{id:"video-volume-b-".concat(t),className:"video-volume-b"}),d("div",{id:"video-volume-v-".concat(t),className:"video-volume-v"}),d("div",{id:"video-volume-h-".concat(t),className:"video-volume-h"})),d("span",{className:"video-volume-g-videoplayer",id:"video-volume-g-".concat(t),dangerouslySetInnerHTML:{__html:n},onClick:this.props.onMuteUnMute}))}}])&&a(t.prototype,n),i&&a(t,i),c}(h);var v=p((function(e){return{isMuted:e.isMuted}}))(g);e.exports=v},function(e,t){e.exports='<svg width="22px" height="22px" viewBox="0 0 28 28" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>Sound On</title><desc>Created with sketchtool.</desc><g id="Icons" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="Icons/Volume/Sound-On" fill="#FFFFFF" fill-rule="nonzero"><path d="M7.28905409,9.11111111 L14.0058039,3 L15.0900792,3 L15.0900792,25 L14.0058039,25 L7.28905409,18.8546667 L2.9711435,18.8546667 C2.70066473,18.8892622 2.43003539,18.7916893 2.24109317,18.5914537 C2.05215095,18.391218 1.96708083,18.1118307 2.01160781,17.8377778 L2.01160781,10.128 C1.96708083,9.85394708 2.05215095,9.57455976 2.24109317,9.37432412 C2.43003539,9.17408847 2.70066473,9.07651553 2.9711435,9.11111111 L7.28905409,9.11111111 Z M21.3784679,21.4376257 L21.6473569,21.0690761 C23.1764535,18.9732373 24,16.5399204 24,14 C24,11.4600796 23.1764535,9.02676274 21.6473569,6.93092392 L21.3784679,6.56237426 L22.8492845,5.26760137 L23.1738214,5.69974676 C25.0062579,8.1397748 26,11.0044256 26,14 C26,16.9955744 25.0062579,19.8602252 23.1738214,22.3002532 L22.8492845,22.7323986 L21.3784679,21.4376257 Z M17.704601,17.5721503 L17.9772048,17.1731776 C18.6483088,16.1909752 19,15.1126779 19,14 C19,12.8873221 18.6483088,11.8090248 17.9772048,10.8268224 L17.704601,10.4278497 L19.2389389,9.30076441 L19.5348499,9.70435344 C20.48979,11.0067833 21,12.4746927 21,14 C21,15.5253073 20.48979,16.9932167 19.5348499,18.2956466 L19.2389389,18.6992356 L17.704601,17.5721503 Z" id="Volume"></path></g></g></svg>'},function(e,t){e.exports='<svg width="22px" height="22px" viewBox="0 0 28 28" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>Mute</title><desc>Created with sketchtool.</desc><g id="Icons" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="Icons/Volume/Mute" fill="#FFFFFF" fill-rule="nonzero"><path d="M7.32880533,9.11111111 L14.0960366,3 L15.1884611,3 L15.1884611,25 L14.0960366,25 L7.32880533,18.8546667 L2.97844238,18.8546667 C2.70593076,18.8892622 2.43326743,18.7916893 2.24290517,18.5914537 C2.05254291,18.391218 1.96683342,18.1118307 2.01169505,17.8377778 L2.01169505,10.128 C1.96683342,9.85394708 2.05254291,9.57455976 2.24290517,9.37432412 C2.43326743,9.17408847 2.70593076,9.07651553 2.97844238,9.11111111 L7.32880533,9.11111111 Z M22.5676418,14 L25,16.4142136 L23.5751576,17.8284271 L21.1427994,15.4142136 L18.7104412,17.8284271 L17.2855987,16.4142136 L19.7179569,14 L17.2855987,11.5857864 L18.7104412,10.1715729 L21.1427994,12.5857864 L23.5751576,10.1715729 L25,11.5857864 L22.5676418,14 Z" id="Volume"></path></g></g></svg>'},function(e,t,n){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=c(e);if(t){var r=c(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return l(this,n)}}function l(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var u=n(1),d=u.h,h=u.Component,p=n(3).connect,_=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(c,e);var t,n,i,l=s(c);function c(){return r(this,c),l.apply(this,arguments)}return t=c,(n=[{key:"shouldComponentUpdate",value:function(e){return this.props.isFullScreen!==e.isFullScreen}},{key:"render",value:function(){var e=this.props,t=e.isFullScreen,n=e.onToggleFullScreen,i=t?'<svg width="22px" height="22px" viewBox="0 0 28 28" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g id="Icons" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="Icons/Full-Screen/Active" fill="#FFFFFF" fill-rule="nonzero"><path d="M8.33333333,6.55555556 L11,3.88888889 L11,11 L3.88888889,11 L6.55555556,8.33333333 L3,4.77777778 L4.77777778,3 L8.33333333,6.55555556 Z M6.55555556,19.6666667 L3.88888889,17 L11,17 L11,24.1111111 L8.33333333,21.4444444 L4.77777778,25 L3,23.2222222 L6.55555556,19.6666667 Z M21.4444444,8.33333333 L24.1111111,11 L17,11 L17,3.88888889 L19.6666667,6.55555556 L23.2222222,3 L25,4.77777778 L21.4444444,8.33333333 Z M19.6666667,21.4444444 L17,24.1111111 L17,17 L24.1111111,17 L21.4444444,19.6666667 L25,23.2222222 L23.2222222,25 L19.6666667,21.4444444 Z" id="Full-Screen"></path></g></g></svg>':'<svg width="22px" height="22px" viewBox="0 0 28 28" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g id="Icons" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="Icons/Full-Screen/Inactive" fill="#FFFFFF" fill-rule="nonzero"><path d="M21.3333333,19.5555556 L24,16.8888889 L24,24 L16.8888889,24 L19.5555556,21.3333333 L16,17.7777778 L17.7777778,16 L21.3333333,19.5555556 Z M19.5555556,6.66666667 L16.8888889,4 L24,4 L24,11.1111111 L21.3333333,8.44444444 L17.7777778,12 L16,10.2222222 L19.5555556,6.66666667 Z M8.44444444,21.3333333 L11.1111111,24 L4,24 L4,16.8888889 L6.66666667,19.5555556 L10.2222222,16 L12,17.7777778 L8.44444444,21.3333333 Z M6.66666667,8.44444444 L4,11.1111111 L4,4 L11.1111111,4 L8.44444444,6.66666667 L12,10.2222222 L10.2222222,12 L6.66666667,8.44444444 Z" id="Full-Screen"></path></g></g></svg>';return d("button",{className:"video-fullscreen f-r",id:"video-fullscreen-".concat(this.props.videoId),dangerouslySetInnerHTML:{__html:i},onClick:n})}}])&&a(t.prototype,n),i&&a(t,i),c}(h);var f=p((function(e){return{isFullScreen:e.isFullScreen}}))(_);e.exports=f},function(e,t,n){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function o(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=l(e);if(t){var r=l(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return s(this,n)}}function s(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var c=n(1),u=c.h,d=c.Component,h=n(6),p=(h.useRef,h.useEffect,h.useState,n(3).connect),_=(n(9).getSavedStatus,n(13)),f=_.showSavedModal,g=(_.hideSavedModal,n(162)),v=n(163),m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(l,e);var t,n,i,s=o(l);function l(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(e=s.call(this)).state={isSaved:null,isSaving:!1,isAvailable:!1,isLoaded:!1},e}return t=l,(n=[{key:"componentDidUpdate",value:function(e){var t,n,i,r=this;e.videoData.guid!==this.props.videoData.guid&&this.setState((i=!1,(n="isSaved")in(t={isAvailable:!1,isSaved:!1,isLoaded:!1})?Object.defineProperty(t,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[n]=i,t)),this.props.isPlaybackInitializing&&!this.state.isLoaded&&(this.setState({isLoaded:!0}),fetch("".concat(this.props.saveApi,"/by-content-id/").concat(this.props.videoData.guid,"?pub=").concat(this.props.saveApiPublication)).then((function(e){if(e.ok)return e.json();throw Error("Cannot receive save status")})).then((function(e){void 0===e?r.setState({isAvailable:!1,isSaved:!1}):r.setState({isAvailable:!0,isSaved:e})})).catch((function(e){return r.setState({isSaving:!1})})))}},{key:"saveToQueue",value:function(){var e=this;if(!this.state.isSaved){this.setState({isSaved:!0,isSaving:!0});var t={contentId:this.props.videoData.guid,pub:this.props.saveApiPublication};fetch(this.props.saveApi,{method:"POST",body:JSON.stringify(t),headers:{"content-type":"application/json"}}).then((function(t){return t.ok||e.setState({isSaved:!1}),t.json()})).then((function(t){e.setState({isSaved:!0,isSaving:!1}),e.props.showSavedModal()})).catch((function(t){return e.setState({isSaving:!1})}))}}},{key:"deleteFromQueue",value:function(){var e=this;this.state.isSaved&&(this.setState({isSaved:!1,isSaving:!0}),fetch("".concat(this.props.saveApi,"?contentId=").concat(this.props.videoData.guid,"&pub=").concat(this.props.saveApiPublication),{method:"DELETE",headers:{"content-type":"application/json"}}).then((function(e){return e.json()})).then((function(t){e.setState({isSaved:!1,isSaving:!1})})).catch((function(t){return e.setState({isSaving:!1})})))}},{key:"shouldComponentUpdate",value:function(e,t){return this.state.isSaved!==t.isSaved||this.props.isPlaybackInitializing!==e.isPlaybackInitializing||this.props.isAvailable!==e.isAvailable}},{key:"handleClick",value:function(){this.state.isSaving||(this.props.onSaveChange(!this.state.isSaved),this.state.isSaved?this.deleteFromQueue():this.saveToQueue())}},{key:"render",value:function(){return this.state.isAvailable?(this.props.saveApi,u("button",{className:"video-save-queue f-r",dangerouslySetInnerHTML:{__html:!0===this.state.isSaved?v:g},onClick:this.handleClick.bind(this)})):null}}])&&r(t.prototype,n),i&&r(t,i),l}(d);var y=p((function(e){return{videoData:e.videoData,isPlaybackInitializing:e.isPlaybackInitializing}}),{showSavedModal:f})(m);e.exports=y},function(e,t){e.exports='<svg width="24" height="24" version="1.1" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:xlink="http://www.w3.org/1999/xlink"><metadata><rdf:RDF><cc:Work rdf:about><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"></dc><dc:title></dc></cc:Work></rdf:RDF></metadata><defs><path id="bookmark-stroke-medium-a" d="m16 2c1.1046 0 2 0.89543 2 2v18h-0.63893l-5.3518-3.7988-5.3391 3.7541h-0.67018v-17.955c0-1.1046 0.89543-2 2-2h8zm0 1h-8c-0.51284 0-0.93551 0.38604-0.99327 0.88338l-0.0067277 0.11662v16.5l5.012-3.5232 4.988 3.5402v-16.517c0-0.51284-0.38604-0.93551-0.88338-0.99327l-0.11662-0.0067277z"></path></defs><use fill="#ffffff" fill-rule="evenodd" xlink:href="#bookmark-stroke-medium-a"></use></svg>'},function(e,t){e.exports='<svg width="24" height="24" version="1.1" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:xlink="http://www.w3.org/1999/xlink"><metadata><rdf:RDF><cc:Work rdf:about><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"></dc><dc:title></dc></cc:Work></rdf:RDF></metadata><defs><path id="bookmark-filled-medium-a" d="m16 2c1.1046 0 2 0.89543 2 2v18h-0.63893l-5.3518-3.7988-5.3391 3.7541h-0.67018v-17.955c0-1.1046 0.89543-2 2-2h8z"></path></defs><use fill="#ffffff" fill-rule="evenodd" xlink:href="#bookmark-filled-medium-a"></use></svg>'},function(e,t,n){var i=n(1).h,r=n(3).connect,a=n(9),o=a.gTimeFormat,s=a.removeZeros;var l=r((function(e){return{currentPosition:e.currentPosition,duration:e.duration,isLive:"live"===e.videoData.state||"flive"===e.videoData.state}}))((function(e){var t=e.videoId,n=e.currentPosition,r=void 0===n?0:n,a=e.duration,l=void 0===a?0:a;if(e.isLive)return i("div",{className:"video-time f-l",id:"video-time-".concat(t)},"LIVE");var c=s(o(r)),u=s(o(l));return i("div",{className:"video-time f-l",id:"video-time-".concat(t),style:{opacity:".8"}},c,i("span",{style:{opacity:".5"}}," / "),u)}));e.exports=l},function(e,t,n){function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],i=!0,r=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(i=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);i=!0);}catch(e){r=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw a}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var l=n(1),c=l.h,u=l.Fragment,d=n(6),h=d.useRef,p=d.useEffect,_=d.useReducer,f=d.useCallback,g=n(3).useSelector,v=n(30),m=n(166),y=n(168),S={isDragging:!1,showLoadedBar:!1,showPreview:!1,scrubBarWidth:0,mouseXCoord:0,loadedPercent:0},E="START_DRAG",b="END_DRAG",T="SHOW_LOADED_BAR",w="HIDE_LOADED_BAR",A="SHOW_PREVIEW",C="HIDE_PREVIEW",I="UPDATE_SCRUB_BAR_WIDTH",P="UPDATE_SCRUB_X_COORD",k=function(e,t){return Math.min(t/e*100,100)};function M(e,t){switch(t.type){case E:return o(o({},e),{},{isDragging:!0});case b:return o(o({},e),{},{isDragging:!1});case T:return o(o({},e),{},{showLoadedBar:!0});case w:return o(o({},e),{},{showLoadedBar:!1});case A:return o(o({},e),{},{showPreview:!0});case C:return o(o({},e),{},{showPreview:!1});case I:return o(o({},e),{},{scrubBarWidth:t.width,loadedPercent:k(t.width,e.mouseXCoord)});case P:return o(o({},e),{},{mouseXCoord:Math.min(Math.max(t.xCoord,0),e.scrubBarWidth),loadedPercent:k(e.scrubBarWidth,t.xCoord)});default:return e}}e.exports=function(e){var t=g((function(e){return e.currentPosition})),n=g((function(e){return e.duration})),r=g((function(e){return e.width})),a=i(_(M,S),2),o=a[0],l=a[1],d=h(null),k=e.isMobile,D=e.videoId,O=e.onSeek,R=e.showControls,N=e.enableScrubPreview,L=f((function(e){var t,n=e.pageX,i=e.touches,r=null!=n?n:null==i||null===(t=i[0])||void 0===t?void 0:t.pageX;if(r){var a=d.current,s=r-a.getBoundingClientRect().left;o.scrubBarWidth!==a.offsetWidth&&l({type:I,width:a.offsetWidth}),l({type:P,xCoord:s})}}),[o.scrubBarWidth]);p((function(){var e=d.current,t=function(){l({type:T}),l({type:A})};return e.addEventListener("mouseover",t),function(){return e.removeEventListener("mouseover",t)}}),[]),p((function(){var e=d.current,t=function(){l({type:w}),l({type:C})};return e.addEventListener("mouseout",t),function(){return e.removeEventListener("mouseout",t)}}),[]),p((function(){var e=d.current,t=function(){return l({type:E})};return e.addEventListener("mousedown",t),k&&e.addEventListener("touchstart",t),function(){e.removeEventListener("mousedown",t),k&&e.removeEventListener("touchstart",t)}}),[k]),p((function(){if(k){var e=d.current,t=function(e){R(),o.isDragging||l({type:E}),L(e)};return e.addEventListener("touchmove",t),function(){return e.removeEventListener("touchmove",t)}}}),[k,o.isDragging,R,L]),p((function(){return window.addEventListener("mousemove",L),function(){return window.removeEventListener("mousemove",L)}}),[L]),p((function(){var e=d.current,t=function(){o.isDragging&&O&&O(o.loadedPercent/100),l({type:b})};return window.addEventListener("mouseup",t),k&&e.addEventListener("touchend",t),function(){window.removeEventListener("mouseup",t),k&&e.removeEventListener("touchend",t)}}),[o.isDragging,o.loadedPercent,O,k]);var x=o.isDragging?o.loadedPercent:t/n*100;return c(u,null,N&&!k&&r>=400&&c(m,{scrubBarWidth:o.scrubBarWidth,mouseXCoord:o.mouseXCoord,show:o.showPreview||o.isDragging}),c("div",{ref:d,className:v(y.scrubBar,s({},y.mobile,k))},c("div",{className:y.adMarkerContainer,id:"video-ad-marker-container-".concat(D)}),c("div",{className:y.scrubPadding}),o.showLoadedBar&&c("div",{className:y.scrubLoaded,style:{width:"".concat(o.loadedPercent,"%")}}),c("div",{className:y.scrubBackground}),c("div",{className:y.scrubProgress,style:{width:"".concat(x,"%")}},c("span",{className:y.dot}))))}},function(e,t,n){function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],i=!0,r=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(i=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);i=!0);}catch(e){r=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw a}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var a=n(1).h,o=n(6),s=o.useRef,l=o.useEffect,c=o.useState,u=n(3).useSelector,d=n(30),h=n(9),p=h.removeZeros,_=h.gTimeFormat,f=n(167);e.exports=function(e){var t,n=u((function(e){var t;return null===(t=e.videoData)||void 0===t?void 0:t.thumbstripURL})),r=u((function(e){return e.duration})),o=u((function(e){return e.width})),h=u((function(e){return e.isAdMode})),g=134===(t=u((function(e){var t;return parseInt(null===(t=e.videoData)||void 0===t?void 0:t.doctypeID,10)})))?9/16:144===t?1:16/9,v=i(c(!1),2),m=v[0],y=v[1],S=s(null),E=s(null);if(l((function(){return y(!1)}),[n]),!n)return null;var b=e.mouseXCoord,T=e.scrubBarWidth,w=e.show,A=function(e,t,n){if(!n)return 0;var i=t-n.offsetWidth/2+20;i=i<0?0:i;var r=e-n.offsetWidth;return i>r?r:i}(o,b,S.current),C=Math.min(b/T,1),I={left:"".concat(A,"px")},P={};if(m){var k=E.current,M=k.naturalWidth,D=k.naturalHeight/2,O=D*g;P.left="".concat(Math.round(100*C)*-O,"px"),P.width="".concat(M/2,"px"),P.height="".concat(D,"px"),I.width="".concat(O,"px"),I.height="".concat(D,"px")}var R,N,L,x=!m||!w||h;return a("div",{onselectstart:"return false;",ref:S,className:d(f.preview,(R={},N=f.hide,L=x,N in R?Object.defineProperty(R,N,{value:L,enumerable:!0,configurable:!0,writable:!0}):R[N]=L,R)),style:I},a("span",{className:f.time},p(_(C*r))),a("img",{ref:E,className:f.img,src:n,onLoad:function(){return y(!0)},style:P}))}},function(e,t,n){e.exports={preview:"styles__preview_2nS_r1y42rPCYXSm3Dk6qY",hide:"styles__hide_qzdw3-CF5x1fAAZNbJvVb",time:"styles__time_X3WOoR-A7hh34442Fwris",img:"styles__img_2rEDBJuX6st5F3hCxhZ_Og"}},function(e,t,n){e.exports={scrubBar:"styles__scrubBar_2SmbWUCzg3R7MnjhBWuFJ8",mobile:"styles__mobile_343QZe_YU0jEvjdFU8aWrD",scrubBackground:"styles__scrubBackground_39WBXpRiaOiOKB9Y6QGmuf",scrubPadding:"styles__scrubPadding_nJS-HnfwjM3JloRoiOPSB",scrubProgress:"styles__scrubProgress_3-29CANQyOYYdFkSGbGvkt",dot:"styles__dot_dUP_ksR6S-rypXCDfKE4F",scrubLoaded:"styles__scrubLoaded_Fnwh6GSDzGHJx2PcKL7Uk",adMarkerContainer:"styles__adMarkerContainer_NbCndWtAjjtP4dnbRGNo0"}},function(e,t){e.exports='<svg width="22px" height="22px" viewBox="0 0 28 28" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>Closed Captions Inactive</title><desc>Created with sketchtool.</desc><g id="Icons" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="Icons/CC/Inactive" fill="#FFFFFF" fill-rule="nonzero"><path d="M26,4 L2,4 L2,22 L7,22 L7,26 L12,22 L26,22 L26,4 Z M24,20 L4,20 L4,6 L24,6 L24,20 Z M20,17 C19.77858,17 19.4452467,17 19,17 C16,17 15,15 15,13 C15,11 16,9 19,9 C19.5054152,9 19.8387485,9 20,9 L20,11 C19,11 17,11 17,13 C17,15 19,15 20,15 L20,17 Z M13,17 C12.77858,17 12.4452467,17 12,17 C9,17 8,15 8,13 C8,11 9,9 12,9 C12.5054152,9 12.8387485,9 13,9 L13,11 C12,11 10,11 10,13 C10,15 12,15 13,15 L13,17 Z" id="CC"></path></g></g></svg>'},function(e,t){e.exports='<svg width="22px" height="22px" viewBox="0 0 28 28" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>Share</title><desc>Created with sketchtool.</desc><g id="Icons" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="Icons/Share" fill="#FFFFFF" fill-rule="nonzero"><path d="M16,4 L16,9 L13,9 C9,9 3,12.3958048 3,22 C3,22 4,22 4,22 C4,22 5.45666691,16 11,16 L16,16 L16,22 L26,13 L16,4 Z" id="Path"></path></g></g></svg>'},function(e,t,n){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function o(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=c(e);if(t){var r=c(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return s(this,n)}}function s(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?l(e):t}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var u=n(1),d=u.h,h=u.Component,p=n(3).connect,_=n(13),f=_.showMoreVideosSlide,g=_.hideMoreVideosSlide,v=n(9),m=n(51),y=n(174),S=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(c,e);var t,n,i,s=o(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=s.call(this,e)).state={recommendations:null},t._hasShown=!1,t._isLoading=!1,t._positionShown=null,t._setThumbnailRef=t._setThumbnailRef.bind(l(t)),t._handleSlideClick=t._handleSlideClick.bind(l(t)),t._hideSlide=t._hideSlide.bind(l(t)),t}return t=c,(n=[{key:"_setThumbnailRef",value:function(e){this._thumbnailRef=e}},{key:"_hideSlide",value:function(){this.props.hideMoreVideosSlide(),this._positionShown=null}},{key:"_handleSlideClick",value:function(){this._hideSlide(),this.props.playVideo(this.state.recommendations.guid)}},{key:"_fetchRecommendedVideo",value:function(){if(this.props.hasCMPConsent){var e="".concat(this.props.videoApiUrl,"find_all_videos.asp?type=recommended&count=1&userid=").concat(v.getCookie("vidoraUserId"),"&fields=guid,thumbnailList,name");return v.fetchFromApi(e).then((function(e){return e[0]}))}return url="".concat(this.props.videoApiUrl,"find_all_videos.asp?type=playlist&query=Most%20Viewed%20WSJ%20Videos&count=20&fields=guid,thumbnailList,name"),v.fetchFromApi(url).then((function(e){return e[Math.floor(Math.random()*e.length)]}))}},{key:"_getThumbnail",value:function(){if(!this._thumbnailRef)return"";var e=this._thumbnailRef.offsetWidth;return v.pickBestThumbnail(this.state.recommendations.thumbnailList,e,.5625*e)}},{key:"componentDidUpdate",value:function(e){var t,n,i=this,r=this.props,a=r.width,o=r.isMoreVideosSlideVisible,s=r.currentPosition,l=r.duration,c=r.showMoreVideosSlide,u=r.isEndscreenVisible,d=r.videoData;if(a<485||"vod"!==(null==d?void 0:d.state)||"469"===(null==d?void 0:d.doctypeID)&&0===(null!==(t=null==d||null===(n=d.column)||void 0===n?void 0:n.length)&&void 0!==t?t:0)||isNaN(s)||isNaN(l)||0===l)o&&this._hideSlide();else{var h=this.props.videoData.guid;if(e.videoData.guid!==h&&this._hasShown)return o&&this._hideSlide(),this._hasShown=!1,void(this._positionShown=null);if(!(s/l>=.6)||u||o||this._hasShown||this._isLoading)null!==this._positionShown&&(this._positionShown+7<=s||u)&&this._hideSlide();else{this._isLoading=!0;var p=this.props.onSlideShowing;this._fetchRecommendedVideo().then((function(e){i._hasShown=!0,i._isLoading=!1,e&&(i.setState({recommendations:e}),c(),p(),i._positionShown=s)})).catch((function(e){console.error("Failed to fetch recommendations",e),i._hasShown=!0,i._isLoading=!1}))}}}},{key:"render",value:function(){var e,t,n,i,r=this.props.isMoreVideosSlideVisible,a=this.state.recommendations;a||(a={});var o=r&&this.props.width>=485&&"vod"===(null===(e=this.props.videoData)||void 0===e?void 0:e.state)&&("469"!==(null===(t=this.props.videoData)||void 0===t?void 0:t.doctypeID)||(null===(n=this.props.videoData)||void 0===n||null===(i=n.column)||void 0===i?void 0:i.length)>0),s=[y.slide];return o&&s.push(y.slideIn),d(m,{className:s.join(" "),isVisible:o,onClick:this._handleSlideClick,onClose:this._hideSlide},a.thumbnailList&&d("img",{className:y.thumbnail,src:this._getThumbnail(),ref:this._setThumbnailRef}),d("div",{className:y.textContainer},d("div",{className:y.headerText},"You may also like"),d("div",{className:y.videoTitle},a.name)))}}])&&r(t.prototype,n),i&&r(t,i),c}(h);var E=p((function(e){return{currentPosition:e.currentPosition,videoData:e.videoData,duration:e.duration,isMoreVideosSlideVisible:e.isMoreVideosSlideVisible,width:e.width,isEndscreenVisible:e.isEndscreenVisible}}),{showMoreVideosSlide:f,hideMoreVideosSlide:g})(S);e.exports={MoreVideosSlide:E,UnconnectedMoreVideosSlide:S}},function(e,t,n){e.exports={modal:"styles__modal_2R1Yuwcs6Div8q2nH9vsGH",fadeOut:"styles__fadeOut_1hQV739Kjrr_eNk6KLGOPF",closeBtn:"styles__closeBtn_1Fyo4cC4u9TQu-8KxlZu6F"}},function(e,t){e.exports='<svg width="21px" height="21px" viewBox="0 0 21 21" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>Close</title><desc>Created with sketchtool.</desc><g id="Icons" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" fill-opacity="0.7"><g id="close" fill="#FFFFFF"><polygon id="Path" points="10.5 8.75 19.25 0 21 1.75 12.25 10.5 21 19.25 19.25 21 10.5 12.25 1.75 21 0 19.25 8.75 10.5 0 1.75 1.75 1.51121399e-15"></polygon></g></g></svg>'},function(e,t,n){e.exports={slide:"styles__slide_3F5t-YABxZaZsuoa9SXzP1",slideIn:"styles__slideIn_yI9dRsGQl6Kqx9TQ4MZ0v",thumbnail:"styles__thumbnail_1jNdgKuyHijlqaWVZxfQ2l",textContainer:"styles__textContainer_1PIpaSWl4SBHiFamj1SUf-",headerText:"styles__headerText_3DlP-XHOkfVdJVOwSKvO7v",videoTitle:"styles__videoTitle_3IAORCFNrdSYW86-9lRxXX"}},function(e,t,n){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=u(e);if(t){var r=u(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return l(this,n)}}function l(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?c(e):t}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var d=n(1),h=d.h,p=d.Component,_=n(3).connect,f=n(13),g=f.showEndscreen,v=f.hideEndscreen,m=f.replacePlaylist,y=n(9),S=n(51),E=n(176),b=n(82),T=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(u,e);var t,n,i,l=s(u);function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=l.call(this,e)).state={visiblePlaylist:[]},t._isLoading=!1,t._hasShown=!1,t._hadError=!1,t._hideTime=-1,t._handleFadeOut=t._handleFadeOut.bind(c(t)),t}return t=u,(n=[{key:"_syncVisiblePlaylist",value:function(){this.state.visiblePlaylist!==this.props.playlist&&this.props.playlist.length>0&&this.setState({visiblePlaylist:this.props.playlist})}},{key:"_handleFadeOut",value:function(){this._syncVisiblePlaylist()}},{key:"componentDidUpdate",value:function(e){var t,n,i=this,r=this.props,a=r.currentPosition,o=r.duration,s=r.videoData;if(!(isNaN(a)||isNaN(o)||0===o||"vod"!==(null==s?void 0:s.state)||"469"===(null==s?void 0:s.doctypeID)&&0===(null!==(t=null==s||null===(n=s.column)||void 0===n?void 0:n.length)&&void 0!==t?t:0))){var l=this.props,c=l.isEndscreenVisible,u=l.hideEndscreen;if(e.videoData.guid!==s.guid)return c&&(this._hideTime=Date.now(),u()),void(this._hasShown=!1);var d=this.props,h=d.showEndscreen,p=d.replacePlaylist,_=d.playlist,f=d.onEndsceenShown;if(!c&&!this._isLoading&&0===_.length&&Math.floor(a)>Math.max(Math.floor(o)-20,0)&&!this._hadError){this._isLoading=!0;var g=this.props,v=g.videoApiUrl,m=g.fields,S=g.playerSettings;y.getNewPlaylist(v,S,s,m).then((function(e){var t;!e||1===e.length&&(null==e||null===(t=e[0])||void 0===t?void 0:t.guid)===s.guid?(i._hadError=!0,i._isLoading=!1):(p(e),i.setState({visiblePlaylist:e},(function(){return i._isLoading=!1})))})).catch((function(e){console.error("Failed to load playlist for endscreen",e),i._isLoading=!1}))}!c&&!this._isLoading&&_.length>0&&!this._hasShown&&Math.floor(a)>Math.max(Math.floor(o)-7,0)&&Date.now()-2e3>this._hideTime&&(f(),this._syncVisiblePlaylist(),this._hasShown=!0,h())}}},{key:"render",value:function(){var e,t=[b.container],n=this.props,i=n.isEndscreenVisible,a=n.isControlsVisible,o=n.width,s=n.videoData,l=n.duration,c=i&&l>0&&"vod"===(null==s?void 0:s.state)&&("469"!==(null==s?void 0:s.doctypeID)||(null==s||null===(e=s.column)||void 0===e?void 0:e.length)>0);c&&t.push(b.fadeIn),a&&t.push(b.controlsVisible),o<440&&t.push(b.fullscreen);var u={className:t.join(" "),isVisible:c},d=this.props,p=d.currentBreakpoint,_=d.currentPosition,f=d.playVideo,g=this.state.visiblePlaylist;if(null!==g){var v="16U"===p||"full"===p,m={currentBreakpoint:p};return h(S,r({},u,{onFadeOut:this._handleFadeOut,onClose:this.props.hideEndscreen}),h("div",{className:b.headerText},"Up Next"),h(E,r({videoData:g[0],showCountdown:i,duration:l,currentPosition:_,onClick:function(){return f(g[0])}},m)),v&&h(E,r({videoData:g[1],onClick:function(){return f(g[1])}},m)))}}}])&&a(t.prototype,n),i&&a(t,i),u}(p);var w=_((function(e){return{width:e.width,currentPosition:e.currentPosition,videoData:e.videoData,duration:e.duration,isEndscreenVisible:e.isEndscreenVisible,currentBreakpoint:e.currentBreakpoint,isControlsVisible:e.isControlsVisible,playlist:e.playlist}}),{showEndscreen:g,hideEndscreen:v,replacePlaylist:m})(T);e.exports={Endscreen:w,UnconnectedEndscreen:T}},function(e,t,n){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function o(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=l(e);if(t){var r=l(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return s(this,n)}}function s(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var c=n(1),u=c.h,d=c.Component,h=n(9),p=n(82),_=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(l,e);var t,n,i,s=o(l);function l(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),s.call(this,e)}return t=l,(n=[{key:"_getThumbnail",value:function(){var e=this.props,t=e.videoData,n=e.currentBreakpoint,i=220;return"8U"===n?i=150:"4U"===n?i=120:"tiny"===n&&(i=70),h.pickBestThumbnail(t.thumbnailList,i,.5625*i)}},{key:"_renderCountdown",value:function(){var e=this.props,t=e.duration,n=e.currentPosition,i=Math.max(Math.floor(t)-Math.floor(n),0),r=1===i?"second":"seconds";return u("div",{className:p.countdownText},"Starting in ",u("strong",null,i)," ",r)}},{key:"render",value:function(){var e=this.props,t=e.videoData,n=e.showCountdown;return t?u("div",{className:p.row,onClick:this.props.onClick},t.thumbnailList&&u("img",{className:p.thumbnail,src:this._getThumbnail(),alt:t.name}),u("div",{className:p.textContainer},u("div",{className:p.videoTitle},t.name),n&&this._renderCountdown())):null}}])&&r(t.prototype,n),i&&r(t,i),l}(d);_.defaultProps={showCountdown:!1,onClick:function(){}},e.exports=_},function(e,t,n){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function o(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=l(e);if(t){var r=l(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return s(this,n)}}function s(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var c=n(1),u=c.h,d=c.Component,h=n(3).connect,p=n(178),_=n(9),f=_.gTimeFormat,g=_.createMark,v=_.pickBestThumbnail,m=n(179),y=n(180),S=n(181),E=n(182),b=n(183),T=function(){return g("playerDisplayed")},w=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(l,e);var t,n,i,s=o(l);function l(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),t=s.call(this,e);var n={};switch(e.layout){case"foe":n=y;break;case"wsj-article":n=S;break;case"mobile":n=E;break;case"barrons-video-center":n=b}return t.theme=Object.assign({},m,n),t.state={thumbSrc:t._getThumbnail()},t._updateThumbSrc=p((function(){t.setState({thumbSrc:t._getThumbnail()})}),350),t}return t=l,(n=[{key:"componentDidUpdate",value:function(e,t){e.width===this.props.width&&e.height===this.props.height&&this.state.thumbSrc||this._updateThumbSrc()}},{key:"_renderGradient",value:function(e){var t=this.props,n=t.layout,i=t.suppressHeadline;return"mobile"!==n&&"wsj-article"!==n&&"foe"!==n||"foe"===n&&i?null:u("div",{className:e?this.theme.gradientTop:this.theme.gradient})}},{key:"_renderHeadline",value:function(){var e=this.props,t=e.suppressHeadline,n=e.layout,i=e.width;if(t||"mobile"===n||"wsj-article"===n)return null;var r={};return i<=470&&(r.fontSize="15px",r.lineHeight="22px"),u("div",{className:this.theme.videoThumbText,style:r},u("span",{className:this.theme.videoTitle},this.props.videoData.name))}},{key:"_renderFlashLine",value:function(){var e=this.props,t=e.layout,n=e.videoData,i=e.showFlashLine,r="";if("mobile"===t&&"string"==typeof n.seriesName)r=n.seriesName;else if("wsj-article"===t&&"string"==typeof n.name)r=n.name;else{if(!i||"string"!=typeof n.seriesName)return null;r="Video | ".concat(n.seriesName)}return u("div",{className:this.theme.videoThumbFlashLine},r)}},{key:"_renderCTA",value:function(){var e=this.props,t=e.layout,n=e.videoData;if("wsj-article"===t){var i=null;return"live"!==n.state&&(i=u("span",null,"| ",f(n.duration))),u("div",{className:this.theme.videoThumbCta},"Play Video ",i)}return"mobile"===t?u("div",{className:this.theme.videoThumbCta},"Play Video"):"foe"===t&&"string"==typeof n.seriesName?u("div",{className:this.theme.videoThumbCta},n.seriesName):null}},{key:"_getThumbnail",value:function(){if(this.props.thumbnailOverride)return this.props.thumbnailOverride;var e=this.props,t=e.videoData,n=e.width,i=e.height;return t.thumbnailImageManager?t.thumbnailImageManager+"?width="+n:t.thumbnailList?v(t.thumbnailList,n,i):t.thumbnailURL}},{key:"render",value:function(){var e=this.state.thumbSrc;if(!this.props.isThumbnailVisible)return null;var t=this.props,n=t.videoId,i=t.videoData,r=t.onClick,a=t.graphics,o=this._renderFlashLine(),s=null!==o;return u("div",{class:"video-thumb",id:"video-thumb-".concat(n)},u("div",{className:this.theme.vidThumb},u("div",{className:this.theme.videoThumbContent,onClick:r},this._renderGradient(s),u("div",{className:this.theme.videoHint,dangerouslySetInnerHTML:{__html:a["play-overlay"]}}),void 0!==e&&u("img",{className:this.theme.videoThumbImg,alt:i.name,src:e,onLoad:T}),this._renderHeadline(),o,this._renderCTA())))}}])&&r(t.prototype,n),i&&r(t,i),l}(d);var A=h((function(e){return{width:e.width,height:e.height,isThumbnailVisible:e.isThumbnailVisible,videoData:e.videoData}}))(w);e.exports=A},function(e,t,n){(function(t){var n=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,r=/^0b[01]+$/i,a=/^0o[0-7]+$/i,o=parseInt,s="object"==typeof t&&t&&t.Object===Object&&t,l="object"==typeof self&&self&&self.Object===Object&&self,c=s||l||Function("return this")(),u=Object.prototype.toString,d=Math.max,h=Math.min,p=function(){return c.Date.now()};function _(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function f(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==u.call(e)}(e))return NaN;if(_(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=_(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(n,"");var s=r.test(e);return s||a.test(e)?o(e.slice(2),s?2:8):i.test(e)?NaN:+e}e.exports=function(e,t,n){var i,r,a,o,s,l,c=0,u=!1,g=!1,v=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function m(t){var n=i,a=r;return i=r=void 0,c=t,o=e.apply(a,n)}function y(e){return c=e,s=setTimeout(E,t),u?m(e):o}function S(e){var n=e-l;return void 0===l||n>=t||n<0||g&&e-c>=a}function E(){var e=p();if(S(e))return b(e);s=setTimeout(E,function(e){var n=t-(e-l);return g?h(n,a-(e-c)):n}(e))}function b(e){return s=void 0,v&&i?m(e):(i=r=void 0,o)}function T(){var e=p(),n=S(e);if(i=arguments,r=this,l=e,n){if(void 0===s)return y(l);if(g)return s=setTimeout(E,t),m(l)}return void 0===s&&(s=setTimeout(E,t)),o}return t=f(t)||0,_(n)&&(u=!!n.leading,a=(g="maxWait"in n)?d(f(n.maxWait)||0,t):a,v="trailing"in n?!!n.trailing:v),T.cancel=function(){void 0!==s&&clearTimeout(s),c=0,i=l=r=s=void 0},T.flush=function(){return void 0===s?o:b(p())},T}}).call(this,n(22))},function(e,t,n){e.exports={vidThumb:"base__vidThumb_1ClPgLDBgLr-7YsvMmn-sY",videoThumbContent:"base__videoThumbContent_3Kb4OYgEfuuLpg9LXT8b69",videoHint:"base__videoHint_Rz0yg9Tt-lxY16-R1Fxe5",videoThumbImg:"base__videoThumbImg_1clHXjbP_aRS55gpoYwjW2",videoThumbFlashLine:"base__videoThumbFlashLine_1U6xOGEqqoiEJu5jHM1hAQ",videoThumbText:"base__videoThumbText_1PRf5FdWQbSwLGFnet8uCa",videoTitle:"base__videoTitle_3REXSZqJQDsfabpaaSWGAf"}},function(e,t,n){e.exports={videoThumbContent:"foe__videoThumbContent_1nsyi53vKav96Y_EOWeCh6",videoHint:"foe__videoHint_1pWcN5AqwvaiuDjVp3WHny",gradient:"foe__gradient_3ecTM0uXyHmdCPRTWc8WqI",gradientTop:"foe__gradientTop_2qvfusi-Yvew7TBOGOJHIh",videoThumbText:"foe__videoThumbText_1nTI7-QQIE1mK-XLNH-vg5",videoTitle:"foe__videoTitle_2jEeQEkNXmVTj4HvVdvp-0",videoThumbCta:"foe__videoThumbCta_25WYND_l7g3TzAw7xW301m"}},function(e,t,n){e.exports={gradient:"wsj-article__gradient_CRbo3WFYc_EgONG4rBQgu mobile__gradient_3T-q4CQI-g0ojJ-QWlMsua",gradientTop:"wsj-article__gradientTop_3cj0JstF817A2AnHJuM-tg mobile__gradientTop_19Xt6M_W5rjnbjO8IINtz8",videoThumbContent:"wsj-article__videoThumbContent_YML1WOJl1YMu_KdQvoqh base__videoThumbContent_3Kb4OYgEfuuLpg9LXT8b69",videoHint:"wsj-article__videoHint_g5jkq8msD-toSrHk8KvsI mobile__videoHint_2B69kcP3mOOD7rnnxPL8YH",videoThumbFlashLine:"wsj-article__videoThumbFlashLine_31No8cYhZm2FHmS3cO0pNy",videoThumbCta:"wsj-article__videoThumbCta_wbOurVY-DRWfP7X86qieu mobile__videoThumbCta_3NPpbP_vRPxMIYRzd2YiJa"}},function(e,t,n){e.exports={gradient:"mobile__gradient_3T-q4CQI-g0ojJ-QWlMsua",gradientTop:"mobile__gradientTop_19Xt6M_W5rjnbjO8IINtz8",videoThumbContent:"mobile__videoThumbContent_3g5J0Hg4Oo3tQLJYvv3tTh base__videoThumbContent_3Kb4OYgEfuuLpg9LXT8b69",videoHint:"mobile__videoHint_2B69kcP3mOOD7rnnxPL8YH",videoThumbFlashLine:"mobile__videoThumbFlashLine_cbyksiYAy5t9QkuHg6MfR",videoThumbCta:"mobile__videoThumbCta_3NPpbP_vRPxMIYRzd2YiJa"}},function(e,t,n){},function(e,t,n){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=c(e);if(t){var r=c(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return l(this,n)}}function l(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var u=n(1),d=u.h,h=u.Component,p=n(3).connect,_=n(185),f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(c,e);var t,n,i,l=s(c);function c(){return r(this,c),l.apply(this,arguments)}return t=c,(n=[{key:"render",value:function(){var e=this.props,t=e.isControlsVisible,n=e.isCountdownVisible,i=e.isAdMode,r=(e.isLive,[_.videoTitleContainer,!t||n||i?"video-fade-out":"video-fade-in"]);return d("div",{id:"video-title-".concat(this.props.videoId),className:r.join(" ")},d("div",{className:_.videoTitle},this.props.name))}}])&&a(t.prototype,n),i&&a(t,i),c}(h);var g=p((function(e){return{isControlsVisible:e.isControlsVisible,name:e.videoData.name,isCountdownVisible:e.isCountdownVisible,isAdMode:e.isAdMode,isLive:"live"==e.videoData.state}}))(f);e.exports=g},function(e,t,n){e.exports={videoTitleContainer:"styles__videoTitleContainer_2N-qWhjdmXNqdA0OpqWVr_",videoTitle:"styles__videoTitle_25kJSwCFvWN3BOOrBzhlDq"}},function(e,t,n){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=u(e);if(t){var r=u(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return l(this,n)}}function l(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?c(e):t}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var d=n(1),h=d.h,p=d.Component,_=n(51),f=n(3).connect,g=n(187),v=n(13).hideSavedModal,m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(u,e);var t,n,i,l=s(u);function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=l.call(this,e))._hasShown=!1,t._hideSavedModal=t._hideSavedModal.bind(c(t)),t._savedContentPage="https://www.wsj.com/user/personalization/saved-content",t}return t=u,(n=[{key:"_hideSavedModal",value:function(){this.props.hideSavedModal()}},{key:"shouldComponentUpdate",value:function(e){return this.props.isSavedQueueModalVisible!==e.isSavedQueueModalVisible}},{key:"componentDidUpdate",value:function(e){var t=this.props;t.hideSavedModal,!t.isSavedQueueModalVisible&&!this._hasShown&&(this._hasShown=!0)}},{key:"render",value:function(){if(!this.props.isSavedQueueModalVisible)return null;var e=this.props,t=e.isSavedQueueModalVisible,n=e.width,i=[g.videoTitleContainer,t?"video-fade-in":"video-fade-out"],a=t;a&&i.push(g.fadeIn);var o={className:g.videoSavedQueueModalContainer,hideCloseButton:!0,hideTimer:5e3,isVisible:a};return h(_,r({},o,{onClose:this._hideSavedModal}),h("div",{className:g.videoSavedQueueModalText},"Added ",n>450?"to your saved content":"to saved"),h("a",{target:"_blank",href:this._savedContentPage},h("button",{className:g.videoSavedQueueModalButton},"View saved content")))}}])&&a(t.prototype,n),i&&a(t,i),u}(p);var y=f((function(e){return{width:e.width,isSavedQueueModalVisible:e.isSavedQueueModalVisible}}),{hideSavedModal:v})(m);e.exports=y},function(e,t,n){e.exports={videoSavedQueueModalContainer:"styles__videoSavedQueueModalContainer_1gfJyAvga7sj0VMg26BPPw",videoSavedQueueModalText:"styles__videoSavedQueueModalText_qNgvU3syGaAOx5RYtAtXn",videoSavedQueueModalButton:"styles__videoSavedQueueModalButton_13toxT1j9KEX4PTEImAe6r"}},function(e,t,n){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function o(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=l(e);if(t){var r=l(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return s(this,n)}}function s(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var c=n(1),u=c.h,d=c.Component,h=n(3).connect,p=n(13),_=p.showCountdown,f=p.hideCountdown,g=n(189),v=n(9),m=v.pickBestThumbnail,y=v.fetchServerTime,S=function(e){return u("div",{className:g.countdownSquare},u("div",{className:g.squareNumber},e.value),u("div",{className:g.squareTime},e.time))},E=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(l,e);var t,n,i,s=o(l);function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=s.call(this,e)).state={timerStarted:!1,secondsRemaining:null,endCountdown:!1,thumbnailURL:null,serverTime:null},t.interval=null,t}return t=l,(n=[{key:"componentDidMount",value:function(){var e=this;this.props.videoData&&this.setState({thumbnailURL:this._getThumbnail()}),this.props.videoData&&y(this.props.videoApiUrl+"time").then((function(t){e.setState({serverTime:t.time})})).catch((function(t){console.error("Failed to fetch server time",t),e.setState({serverTime:Date.now()})}))}},{key:"componentDidUpdate",value:function(e){var t=this;if(!this.props.videoData||this.props.videoData.guid===e.videoData.guid&&null!==this.state.thumbnailURL||this.setState({thumbnailURL:this._getThumbnail()}),null!==this.state.serverTime&&!this.state.timerStarted&&this.props.videoData&&this.props.videoData.formattedCreationDate&&"future"===this.props.videoData.state){var n=new Date(this.state.serverTime),i=new Date(this.props.videoData.iso8601CreationDate),r=i.getTime()-n.getTime(),a=Date.now()-n.getTime();if(r>0){var o=function(){return(i.getTime()-Date.now()+a)/1e3};this.setState({serverTime:null,secondsRemaining:o(),timerStarted:!0}),this.interval=setInterval((function(){return t.setState({secondsRemaining:o()})}),250),this.props.showCountdown()}}this.state.timerStarted&&this.state.secondsRemaining<1&&this.props.isCountdownVisible&&(clearInterval(this.interval),this.props.hideCountdown(),this.props.onCountdownComplete())}},{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"_getThumbnail",value:function(){if(this.props.thumbnailOverride)return this.props.thumbnailOverride;var e=this.props,t=e.videoData,n=e.width,i=e.height;return t.thumbnailImageManager?t.thumbnailImageManager+"?width="+n:t.thumbnailList?m(t.thumbnailList,n,i):t.thumbnailURL}},{key:"render",value:function(){return this.props.isCountdownVisible&&"future"===this.props.videoData.state?(this.state.secondsRemaining&&(i=parseInt(this.state.secondsRemaining,10),(e=Math.floor(i/86400))>0&&(i-=3600*e*24),i-=3600*(t=Math.floor(i/3600)),i-=60*(n=Math.floor(i/60))),u("div",{className:g.countdownContainer},u("div",{style:{backgroundImage:"linear-gradient(-180deg, rgba(0, 0, 0, 0) 0%, rgba(0, 0, 0, 0.8) 100%), url(".concat(this.state.thumbnailURL,")")},className:g.thumbnail}),u("div",{className:g.countdown},u("div",{className:g.title},this.state.secondsRemaining?this.props.isQAEvent?"LIVE Q&A BEGINS IN":"LIVE STREAM BEGINS IN":""),null!==this.state.secondsRemaining&&null!==e&&u("div",null,e>0&&u(S,{value:("0"+e).slice(-2),time:1===e?"DAY":"DAYS"}),u(S,{value:("0"+t).slice(-2),time:1===t?"HOUR":"HOURS"}),u(S,{value:("0"+n).slice(-2),time:1===n?"MINUTE":"MINUTES"}),e<1&&u(S,{value:("0"+i).slice(-2),time:1===i?"SECOND":"SECONDS"}))))):null;var e,t,n,i}}])&&r(t.prototype,n),i&&r(t,i),l}(d);var b=h((function(e){var t;return{videoData:e.videoData,width:e.width,height:e.height,isQAEvent:null===(t=e.videoData)||void 0===t?void 0:t.isQAEvent,isCountdownVisible:e.isCountdownVisible}}),{showCountdown:_,hideCountdown:f})(E);e.exports=b},function(e,t,n){e.exports={countdownContainer:"styles__countdownContainer_2pr34wbnvFCqOfp90Fp-cE",thumbnail:"styles__thumbnail_11r309-0jEMDC1tsf36Bcd",countdown:"styles__countdown_2trNv4b4zgOZb1uekjxqOE",countdownSquare:"styles__countdownSquare_1XPXuBXoiDB15D_POUOPZP",squareNumber:"styles__squareNumber_2nygUMI8HtGGPZpV5gP-XX",squareTime:"styles__squareTime_1JahuyWPVV4CxqoRyv9-GF",title:"styles__title_QmwLtBbjyErNbhH7qGUhp"}},function(e,t,n){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=c(e);if(t){var r=c(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return l(this,n)}}function l(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var u=n(1),d=u.h,h=u.Component,p=n(3).connect,_=n(191),f=n(13).hideClickForSound,g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(c,e);var t,n,i,l=s(c);function c(){return r(this,c),l.apply(this,arguments)}return t=c,(n=[{key:"shouldComponentUpdate",value:function(e){return this.props.isCountdownVisible!==e.isCountdownVisible||this.props.isClickForSoundVisible!==e.isClickForSoundVisible||this.props.isThumbnailVisible!==e.isThumbnailVisible||this.props.isLive!==e.isLive}},{key:"render",value:function(){var e=this.props,t=e.onClicked,n=(e.isCountdownVisible,e.isClickForSoundVisible),i=e.hideClickForSound,r=e.isThumbnailVisible;if(e.isLive,e.isControlsVisible,e.isLiveButtonVisible,this.props.isCountdownVisible||!n||r)return null;var a=[_.clickForSoundWrapper];return this.props.isLive&&!this.props.isControlsVisible&&this.props.isLiveButtonVisible&&a.push(_.clickForSoundWrapperWithLive),d("div",{onClick:function(){i(),t()},id:"video-sound-".concat(this.props.videoId),className:a.join(" ")},d("div",null,d("span",{className:_.cta,dangerouslySetInnerHTML:{__html:'<svg height="24px" version="1.1" viewBox="4 6 20 24" width="24px"><use class="ytp-svg-shadow" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#ytp-svg-13"></use><path class="ytp-svg-fill" d="M8,21 L12,21 L17,26 L17,10 L12,15 L8,15 L8,21 Z M19,14 L19,22 C20.48,21.32 21.5,19.77 21.5,18 C21.5,16.26 20.48,14.74 19,14 Z M19,11.29 C21.89,12.15 24,14.83 24,18 C24,21.17 21.89,23.85 19,24.71 L19,26.77 C23.01,25.86 26,22.28 26,18 C26,13.72 23.01,10.14 19,9.23 L19,11.29 Z" id="ytp-svg-13"></path><svg class="ytp-svg-sound-mute-group" style="opacity: 0;"><use class="ytp-svg-shadow" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#ytp-svg-14"></use><path class="ytp-svg-fill" d="M 26.11,15.73 24.85,14.5 22.52,16.76 20.20,14.5 18.94,15.73 21.26,18 18.94,20.26 20.20,21.5 22.52,19.23 24.85,21.5 26.11,20.26 23.79,18 l 2.32,-2.26 0,0 z" id="ytp-svg-14"></path></svg></svg><span> Tap For Sound</span>'}})))}}])&&a(t.prototype,n),i&&a(t,i),c}(h);var v=p((function(e){return{isCountdownVisible:e.isCountdownVisible,isClickForSoundVisible:e.isClickForSoundVisible,isThumbnailVisible:e.isThumbnailVisible,isLive:"live"==e.videoData.state,isControlsVisible:e.isControlsVisible}}),{hideClickForSound:f})(g);e.exports=v},function(e,t,n){e.exports={clickForSoundWrapper:"styles__clickForSoundWrapper_1GX2g3g0TxMstht6vN1xga",cta:"styles__cta_2Ze8pPggh35dr7QDOTQwup",clickForSoundWrapperWithLive:"styles__clickForSoundWrapperWithLive_31xCi2ZLYtcOfi1U365Eid"}},function(e,t,n){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=c(e);if(t){var r=c(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return l(this,n)}}function l(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var u=n(1),d=u.h,h=u.Component,p=n(3).connect,_=n(193),f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(c,e);var t,n,i,l=s(c);function c(){return r(this,c),l.apply(this,arguments)}return t=c,(n=[{key:"render",value:function(){var e=this.props;return e.isCountdownVisible,e.isClickForSoundVisible,e.isThumbnailVisible,e.isLive,this.props.isAdMode,!this.props.isLive||this.props.isCountdownVisible||this.props.isControlsVisible&&!this.props.isClickForSoundVisible?null:d("div",{id:"video-live-".concat(this.props.videoId),className:_.liveIndicatorWrapper},d("span",{className:_.liveButton},"LIVE"))}}])&&a(t.prototype,n),i&&a(t,i),c}(h);var g=p((function(e){return{isCountdownVisible:e.isCountdownVisible,isClickForSoundVisible:e.isClickForSoundVisible,isThumbnailVisible:e.isThumbnailVisible,isLive:"live"==e.videoData.state,isControlsVisible:e.isControlsVisible,isAdMode:e.isAdMode}}))(f);e.exports=g},function(e,t,n){e.exports={liveIndicatorWrapper:"styles__liveIndicatorWrapper_3LqyrHPQyYyI-tNdm-bPST",liveButton:"styles__liveButton_1ns5XvEXwEg8MK2qEG0uaI"}},function(e,t,n){var i=n(1).h,r=n(3).useSelector,a=n(30),o=n(10),s=n(195),l=n(196),c={__html:"".concat(l," <div></div>")};function u(e){return!e.isThumbnailVisible&&(e.isBuffering||e.isAdBuffering||e.isPlaybackInitializing||e.isLoadingSpinnerVisible||e.adInitState===o.STARTED||e.videoApiLoadState===o.STARTED||e.imaLoadState===o.STARTED||e.hlsJsLoadState===o.STARTED)}e.exports=function(){return r(u)?i("div",{className:a("video-loading",s.loader)},i("div",{className:s.loaderInner,dangerouslySetInnerHTML:c})):null}},function(e,t,n){e.exports={loader:"styles__loader_2fMYXAAKUoWUtRfViLH466",hide:"styles__hide_26mxdO48gpuVbo3RsXGG8x",loaderInner:"styles__loaderInner_3TVMSN7m78Wly8qB_0U-qS",loadspin:"styles__loadspin_1GpaQPOz0YpaJBYqI5pk6b"}},function(e,t){e.exports='<svg x="0px" y="0px" viewBox="0 0 60 60"><mask id="loading-mask-top-l" maskUnits="userSpaceOnUse"><rect x="0" y="30" width="60" height="30" fill="white"></rect></mask><circle cx="30" cy="30" r="29" stroke="#0294E8" stroke-width="2" fill="transparent" mask="url(#loading-mask-top-l)"></circle><mask id="loading-mask-bottom-l" maskUnits="userSpaceOnUse"><rect x="0" y="0" width="60" height="30" fill="white"></rect></mask><circle cx="30" cy="30" r="29" stroke="#666666" stroke-width="2" fill="transparent" mask="url(#loading-mask-bottom-l)"></circle></svg>'},function(e,t,n){e.exports={Line:n(198),Circle:n(84),SemiCircle:n(200),Path:n(83),Shape:n(31),utils:n(21)}},function(e,t,n){var i=n(31),r=n(21),a=function(e,t){this._pathTemplate="M 0,{center} L 100,{center}",i.apply(this,arguments)};(a.prototype=new i).constructor=a,a.prototype._initializeSvg=function(e,t){e.setAttribute("viewBox","0 0 100 "+t.strokeWidth),e.setAttribute("preserveAspectRatio","none")},a.prototype._pathString=function(e){return r.render(this._pathTemplate,{center:e.strokeWidth/2})},a.prototype._trailString=function(e){return this._pathString(e)},e.exports=a},function(e,t,n){(function(){var t,n=this||Function("return this")(),i=function(){"use strict";var t,i,r,a,o,s,l=Date.now?Date.now:function(){return+new Date},c="undefined"!=typeof SHIFTY_DEBUG_NOW?SHIFTY_DEBUG_NOW:l;function u(){}function d(e,t){var n;for(n in e)Object.hasOwnProperty.call(e,n)&&t(n)}function h(e,t){return d(t,(function(n){e[n]=t[n]})),e}function p(e,t){d(t,(function(n){void 0===e[n]&&(e[n]=t[n])}))}function _(e,n,i,r,a,o,s){var l,c,u,d=e<o?0:(e-o)/a;for(l in n)n.hasOwnProperty(l)&&(u="function"==typeof(c=s[l])?c:t[c],n[l]=f(i[l],r[l],u,d));return n}function f(e,t,n,i){return e+(t-e)*n(i)}function g(e,t){var n=y.prototype.filter,i=e._filterArgs;d(n,(function(r){void 0!==n[r][t]&&n[r][t].apply(e,i)}))}function v(e,t,n,i,l,u,d,h,p,f,v){r=t+n+i,a=Math.min(v||c(),r),o=a>=r,s=i-(r-a),e.isPlaying()&&(o?(p(d,e._attachment,s),e.stop(!0)):(e._scheduleId=f(e._timeoutHandler,1e3/60),g(e,"beforeTween"),a<t+n?_(1,l,u,d,1,1,h):_(a,l,u,d,i,t+n,h),g(e,"afterTween"),p(l,e._attachment,s)))}function m(e,t){var n={},i=typeof t;return d(e,"string"===i||"function"===i?function(e){n[e]=t}:function(e){n[e]||(n[e]=t[e]||"linear")}),n}function y(e,t){this._currentState=e||{},this._configured=!1,this._scheduleFunction=i,void 0!==t&&this.setConfig(t)}return i="undefined"!=typeof window&&(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||window.mozCancelRequestAnimationFrame&&window.mozRequestAnimationFrame)||setTimeout,y.prototype.tween=function(e){return this._isTweening?this:(void 0===e&&this._configured||this.setConfig(e),this._timestamp=c(),this._start(this.get(),this._attachment),this.resume())},y.prototype.setConfig=function(e){e=e||{},this._configured=!0,this._attachment=e.attachment,this._pausedAtTime=null,this._scheduleId=null,this._delay=e.delay||0,this._start=e.start||u,this._step=e.step||u,this._finish=e.finish||u,this._duration=e.duration||500,this._currentState=h({},e.from||this.get()),this._originalState=this.get(),this._targetState=h({},e.to||this.get());var t=this;this._timeoutHandler=function(){v(t,t._timestamp,t._delay,t._duration,t._currentState,t._originalState,t._targetState,t._easing,t._step,t._scheduleFunction)};var n=this._currentState,i=this._targetState;return p(i,n),this._easing=m(n,e.easing||"linear"),this._filterArgs=[n,this._originalState,i,this._easing],g(this,"tweenCreated"),this},y.prototype.get=function(){return h({},this._currentState)},y.prototype.set=function(e){this._currentState=e},y.prototype.pause=function(){return this._pausedAtTime=c(),this._isPaused=!0,this},y.prototype.resume=function(){return this._isPaused&&(this._timestamp+=c()-this._pausedAtTime),this._isPaused=!1,this._isTweening=!0,this._timeoutHandler(),this},y.prototype.seek=function(e){e=Math.max(e,0);var t=c();return this._timestamp+e===0||(this._timestamp=t-e,this.isPlaying()||(this._isTweening=!0,this._isPaused=!1,v(this,this._timestamp,this._delay,this._duration,this._currentState,this._originalState,this._targetState,this._easing,this._step,this._scheduleFunction,t),this.pause())),this},y.prototype.stop=function(e){return this._isTweening=!1,this._isPaused=!1,this._timeoutHandler=u,(n.cancelAnimationFrame||n.webkitCancelAnimationFrame||n.oCancelAnimationFrame||n.msCancelAnimationFrame||n.mozCancelRequestAnimationFrame||n.clearTimeout)(this._scheduleId),e&&(g(this,"beforeTween"),_(1,this._currentState,this._originalState,this._targetState,1,0,this._easing),g(this,"afterTween"),g(this,"afterTweenEnd"),this._finish.call(this,this._currentState,this._attachment)),this},y.prototype.isPlaying=function(){return this._isTweening&&!this._isPaused},y.prototype.setScheduleFunction=function(e){this._scheduleFunction=e},y.prototype.dispose=function(){var e;for(e in this)this.hasOwnProperty(e)&&delete this[e]},y.prototype.filter={},y.prototype.formula={linear:function(e){return e}},t=y.prototype.formula,h(y,{now:c,each:d,tweenProps:_,tweenProp:f,applyFilter:g,shallowCopy:h,defaults:p,composeEasingObject:m}),"function"==typeof SHIFTY_DEBUG_NOW&&(n.timeoutHandler=v),e.exports=y,y}();i.shallowCopy(i.prototype.formula,{easeInQuad:function(e){return Math.pow(e,2)},easeOutQuad:function(e){return-(Math.pow(e-1,2)-1)},easeInOutQuad:function(e){return(e/=.5)<1?.5*Math.pow(e,2):-.5*((e-=2)*e-2)},easeInCubic:function(e){return Math.pow(e,3)},easeOutCubic:function(e){return Math.pow(e-1,3)+1},easeInOutCubic:function(e){return(e/=.5)<1?.5*Math.pow(e,3):.5*(Math.pow(e-2,3)+2)},easeInQuart:function(e){return Math.pow(e,4)},easeOutQuart:function(e){return-(Math.pow(e-1,4)-1)},easeInOutQuart:function(e){return(e/=.5)<1?.5*Math.pow(e,4):-.5*((e-=2)*Math.pow(e,3)-2)},easeInQuint:function(e){return Math.pow(e,5)},easeOutQuint:function(e){return Math.pow(e-1,5)+1},easeInOutQuint:function(e){return(e/=.5)<1?.5*Math.pow(e,5):.5*(Math.pow(e-2,5)+2)},easeInSine:function(e){return 1-Math.cos(e*(Math.PI/2))},easeOutSine:function(e){return Math.sin(e*(Math.PI/2))},easeInOutSine:function(e){return-.5*(Math.cos(Math.PI*e)-1)},easeInExpo:function(e){return 0===e?0:Math.pow(2,10*(e-1))},easeOutExpo:function(e){return 1===e?1:1-Math.pow(2,-10*e)},easeInOutExpo:function(e){return 0===e?0:1===e?1:(e/=.5)<1?.5*Math.pow(2,10*(e-1)):.5*(2-Math.pow(2,-10*--e))},easeInCirc:function(e){return-(Math.sqrt(1-e*e)-1)},easeOutCirc:function(e){return Math.sqrt(1-Math.pow(e-1,2))},easeInOutCirc:function(e){return(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)},easeOutBounce:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},easeInBack:function(e){var t=1.70158;return e*e*((t+1)*e-t)},easeOutBack:function(e){var t=1.70158;return(e-=1)*e*((t+1)*e+t)+1},easeInOutBack:function(e){var t=1.70158;return(e/=.5)<1?e*e*((1+(t*=1.525))*e-t)*.5:.5*((e-=2)*e*((1+(t*=1.525))*e+t)+2)},elastic:function(e){return-1*Math.pow(4,-8*e)*Math.sin((6*e-1)*(2*Math.PI)/2)+1},swingFromTo:function(e){var t=1.70158;return(e/=.5)<1?e*e*((1+(t*=1.525))*e-t)*.5:.5*((e-=2)*e*((1+(t*=1.525))*e+t)+2)},swingFrom:function(e){var t=1.70158;return e*e*((t+1)*e-t)},swingTo:function(e){var t=1.70158;return(e-=1)*e*((t+1)*e+t)+1},bounce:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},bouncePast:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?2-(7.5625*(e-=1.5/2.75)*e+.75):e<2.5/2.75?2-(7.5625*(e-=2.25/2.75)*e+.9375):2-(7.5625*(e-=2.625/2.75)*e+.984375)},easeFromTo:function(e){return(e/=.5)<1?.5*Math.pow(e,4):-.5*((e-=2)*Math.pow(e,3)-2)},easeFrom:function(e){return Math.pow(e,4)},easeTo:function(e){return Math.pow(e,.25)}}),function(){function e(e,t,n,i,r,a){var o,s,l=0,c=0,u=0,d=0,h=0,p=0;function _(e){return((l*e+c)*e+u)*e}function f(e){return(3*l*e+2*c)*e+u}function g(e){return e>=0?e:0-e}return l=1-(u=3*t)-(c=3*(i-t)-u),d=1-(p=3*n)-(h=3*(r-n)-p),o=e,s=function(e){return 1/(200*e)}(a),function(e){return((d*e+h)*e+p)*e}(function(e,t){var n,i,r,a,o,s;for(r=e,s=0;s<8;s++){if(g(a=_(r)-e)<t)return r;if(g(o=f(r))<1e-6)break;r-=a/o}if(i=1,(r=e)<(n=0))return n;if(r>i)return i;for(;n<i;){if(g((a=_(r))-e)<t)return r;e>a?n=r:i=r,r=.5*(i-n)+n}return r}(o,s))}i.setBezierFunction=function(t,n,r,a,o){var s=function(t,n,i,r){return function(a){return e(a,t,n,i,r,1)}}(n,r,a,o);return s.displayName=t,s.x1=n,s.y1=r,s.x2=a,s.y2=o,i.prototype.formula[t]=s},i.unsetBezierFunction=function(e){delete i.prototype.formula[e]}}(),(t=new i)._filterArgs=[],i.interpolate=function(e,n,r,a,o){var s=i.shallowCopy({},e),l=o||0,c=i.composeEasingObject(e,a||"linear");t.set({});var u=t._filterArgs;u.length=0,u[0]=s,u[1]=e,u[2]=n,u[3]=c,i.applyFilter(t,"tweenCreated"),i.applyFilter(t,"beforeTween");var d=function(e,t,n,r,a,o){return i.tweenProps(r,t,e,n,1,o,a)}(e,s,n,r,c,l);return i.applyFilter(t,"afterTween"),d},function(e){var t=/(\d|\-|\.)/,n=/([^\-0-9\.]+)/g,i=/[0-9.\-]+/g,r=new RegExp("rgb\\("+i.source+/,\s*/.source+i.source+/,\s*/.source+i.source+"\\)","g"),a=/^.*\(/,o=/#([0-9]|[a-f]){3,6}/gi;function s(e,t){var n,i=[],r=e.length;for(n=0;n<r;n++)i.push("_"+t+"_"+n);return i}function l(t){e.each(t,(function(e){var n=t[e];"string"==typeof n&&n.match(o)&&(t[e]=h(o,n,c))}))}function c(e){var t=function(e){3===(e=e.replace(/#/,"")).length&&(e=(e=e.split(""))[0]+e[0]+e[1]+e[1]+e[2]+e[2]);return u[0]=d(e.substr(0,2)),u[1]=d(e.substr(2,2)),u[2]=d(e.substr(4,2)),u}(e);return"rgb("+t[0]+","+t[1]+","+t[2]+")"}var u=[];function d(e){return parseInt(e,16)}function h(e,t,n){var i=t.match(e),r=t.replace(e,"VAL");if(i)for(var a,o=i.length,s=0;s<o;s++)a=i.shift(),r=r.replace("VAL",n(a));return r}function p(e){for(var t=e.match(i),n=t.length,r=e.match(a)[0],o=0;o<n;o++)r+=parseInt(t[o],10)+",";return r=r.slice(0,-1)+")"}function _(t,n){e.each(n,(function(e){for(var i=v(t[e]),r=i.length,a=0;a<r;a++)t[n[e].chunkNames[a]]=+i[a];delete t[e]}))}function f(t,n){e.each(n,(function(e){var i=t[e],a=function(e,t){g.length=0;for(var n=t.length,i=0;i<n;i++)g.push(e[t[i]]);return g}(function(e,t){for(var n,i={},r=t.length,a=0;a<r;a++)n=t[a],i[n]=e[n],delete e[n];return i}(t,n[e].chunkNames),n[e].chunkNames);i=function(e,t){for(var n=e,i=t.length,r=0;r<i;r++)n=n.replace("VAL",+t[r].toFixed(4));return n}(n[e].formatString,a),t[e]=h(r,i,p)}))}var g=[];function v(e){return e.match(i)}e.prototype.filter.token={tweenCreated:function(i,r,a,o){var c,u;l(i),l(r),l(a),this._tokenData=(c=i,u={},e.each(c,(function(e){var i,r,a=c[e];if("string"==typeof a){var o=v(a);u[e]={formatString:(i=a,r=i.match(n),r?(1===r.length||i.charAt(0).match(t))&&r.unshift(""):r=["",""],r.join("VAL")),chunkNames:s(o,e)}}})),u)},beforeTween:function(t,n,i,r){!function(t,n){e.each(n,(function(e){var i,r=n[e].chunkNames,a=r.length,o=t[e];if("string"==typeof o){var s=o.split(" "),l=s[s.length-1];for(i=0;i<a;i++)t[r[i]]=s[i]||l}else for(i=0;i<a;i++)t[r[i]]=o;delete t[e]}))}(r,this._tokenData),_(t,this._tokenData),_(n,this._tokenData),_(i,this._tokenData)},afterTween:function(t,n,i,r){f(t,this._tokenData),f(n,this._tokenData),f(i,this._tokenData),function(t,n){e.each(n,(function(e){var i=n[e].chunkNames,r=i.length,a=t[i[0]];if("string"===typeof a){for(var o="",s=0;s<r;s++)o+=" "+t[i[s]],delete t[i[s]];t[e]=o.substr(1)}else t[e]=a}))}(r,this._tokenData)}}}(i)}).call(null)},function(e,t,n){var i=n(31),r=n(84),a=n(21),o=function(e,t){this._pathTemplate="M 50,50 m -{radius},0 a {radius},{radius} 0 1 1 {2radius},0",this.containerAspectRatio=2,i.apply(this,arguments)};(o.prototype=new i).constructor=o,o.prototype._initializeSvg=function(e,t){e.setAttribute("viewBox","0 0 100 50")},o.prototype._initializeTextContainer=function(e,t,n){e.text.style&&(n.style.top="auto",n.style.bottom="0",e.text.alignToBottom?a.setStyle(n,"transform","translate(-50%, 0)"):a.setStyle(n,"transform","translate(-50%, 50%)"))},o.prototype._pathString=r.prototype._pathString,o.prototype._trailString=r.prototype._trailString,e.exports=o},function(e,t,n){"use strict";n.r(t),n.d(t,"createStore",(function(){return S}));var i=n(5),r=n(86),a=n(0),o=n(10),s=n(13);function l(e){return function(e){if(Array.isArray(e))return d(e)}(e)||h(e)||u(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e){return function(e){if(Array.isArray(e))return e}(e)||h(e)||u(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){if(e){if("string"==typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(e,t):void 0}}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function h(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){f(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var g={width:0,height:0,adInitState:o.NONE,isControlsVisible:!1,isEndscreenVisible:!1,hlsJsLoadState:o.NONE,imaAdErrorState:!1,imaLoadState:o.NONE,isLoadingSpinnerVisible:!1,videoApiLoadState:o.NONE,isMoreVideosSlideVisible:!1,isPlaying:!1,isThumbnailVisible:!1,currentPosition:0,currentAdPosition:0,duration:0,videoData:{secondsUntilStartTime:0},isMuted:!1,isFullScreen:!1,currentBreakpoint:"16U",playlist:[],isCountdownVisible:!1,isAdMode:!1,isAdPlaying:!1,isAdBuffering:!1,isAdsBlocked:!1,isClickForSoundVisible:!1,isPlaybackInitializing:!1,isBuffering:!1,isSavedQueueModalVisible:!1,loggingEnabled:!1};function v(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case a.j:return _(_({},e),{},{enableLogging:!0});case a.s:return _(_({},e),{},{width:t.width,height:t.height,currentBreakpoint:e.isFullScreen?"full":y(t.width)});case a.z:return _(_({},e),{},{isThumbnailVisible:!0});case a.y:return _(_({},e),{},{isThumbnailVisible:!1});case a.q:return _(_({},e),{},{isMoreVideosSlideVisible:!0});case a.p:return _(_({},e),{},{isMoreVideosSlideVisible:!1});case a.h:return _(_({},e),{},{isControlsVisible:!0});case a.g:return _(_({},e),{},{isControlsVisible:!1});case a.v:return _(_({},e),{},{isEndscreenVisible:!0});case a.m:return _(_({},e),{},{isEndscreenVisible:!1});case a.O:return _(_({},e),{},{isPlaying:!0});case a.N:return _(_({},e),{},{isPlaying:!1});case a.P:return _(_({},e),{},{currentPosition:t.currentPosition});case a.I:return _(_({},e),{},{duration:t.duration});case a.M:return _(_({},e),{},{isMuted:!0});case a.R:return _(_({},e),{},{isMuted:!1});case a.K:return _(_({},e),{},{isFullScreen:!0,currentBreakpoint:"full"});case a.L:return _(_({},e),{},{isFullScreen:!1,currentBreakpoint:y(e.width)});case a.x:return _(_({},e),{},{isSavedQueueModalVisible:!0});case a.o:return _(_({},e),{},{isSavedQueueModalVisible:!1});case a.F:return _(_({},e),{},{videoData:t.videoData,currentPosition:0,duration:t.videoData&&t.videoData.duration?parseInt(t.videoData.duration,10):g.duration,playlist:e.playlist.length>0?m(e.playlist,t.videoData.guid):e.playlist});case a.r:if(!t.playlist||0===t.playlist.length)return e;var n=m(t.playlist,e.videoData.guid);return _(_({},e),{},{playlist:n});case a.i:var i=e.playlist;if(0===i.length)return e;var r=c(i),s=r.slice(1);return _(_({},e),{},{playlist:s});case a.u:return _(_({},e),{},{isCountdownVisible:!0,isControlsVisible:!1});case a.l:return _(_({},e),{},{isCountdownVisible:!1});case a.t:return _(_({},e),{},{isClickForSoundVisible:!0});case a.k:return _(_({},e),{},{isClickForSoundVisible:!1});case a.w:return _(_({},e),{},{isLoadingSpinnerVisible:!0});case a.n:return _(_({},e),{},{isLoadingSpinnerVisible:!1});case a.E:return _(_({},e),{},{videoApiLoadState:t.payload});case a.B:return _(_({},e),{},{adInitState:t.payload,isAdsBlocked:t.payload===o.FAILED});case a.D:return _(_({},e),{},{imaLoadState:t.payload,isAdsBlocked:t.payload===o.FAILED});case a.A:return _(_({},e),{},{imaAdErrorState:t.payload});case a.C:return _(_({},e),{},{hlsJsLoadState:t.payload});case a.Q:return _(_({},e),{},{isPlaybackInitializing:!0,currentPosition:0});case a.J:return _(_({},e),{},{isPlaybackInitializing:!1});case a.G:return _(_({},e),{},{isBuffering:!0});case a.H:return _(_({},e),{},{isBuffering:!1});case a.f:return _(_({},e),{},{isAdMode:!0});case a.b:return _(_({},e),{},{isAdMode:!1,isPlaybackInitializing:!1,isAdBuffering:!1,isAdPlaying:!1,currentAdPosition:0});case a.e:return _(_({},e),{},{currentAdPosition:t.payload,isAdBuffering:!1});case a.d:return _(_({},e),{},{isAdPlaying:!0});case a.c:return _(_({},e),{},{isAdPlaying:!1});case a.a:return _(_({},e),{},{isAdBuffering:!0});default:return e}}function m(e,t){var n=l(e),i=n.findIndex((function(e){return e.guid===t}));return-1!==i&&n.splice(i,1),n}function y(e){return e>=1260?"16U":e>=860?"12U":e>=620?"8U":e>350?"4U":"tiny"}function S(){if(window.location.search.includes("wsjVideoLogger")){var e=[a.P],t=Object(r.createLogger)({predicate:function(t,n){return-1===e.indexOf(n.type)},diff:!0,collapsed:!0}),n=Object(i.createStore)(v,Object(i.applyMiddleware)(t));return n.dispatch(Object(s.enableLogging)()),n}return Object(i.createStore)(v)}},function(e,t,n){"use strict";function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}n.r(t);var r=function(){function e(t){var n=t.adsManager,i=t.onAdDisconnect,r=t.reduxStore;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._adsManager=n,this._onAdDisconnect=i,this._store=r,this._observing=!1,this._isHealthy=!0,this._clearAllTimeouts=this._clearAllTimeouts.bind(this),this._handleAdProgress=this._handleAdProgress.bind(this)}var t,n,r;return t=e,(n=[{key:"_isAdPlaying",value:function(){return this._store.getState().isAdMode}},{key:"_isAdBuffering",value:function(){return this._store.getState().isAdBuffering}},{key:"_clearAllTimeouts",value:function(){clearTimeout(this._adDelayTimeout),clearTimeout(this._adDestroyTimeout)}},{key:"_handleAdProgress",value:function(){var e=this;this._isAdPlaying()&&!this._isAdBuffering()&&(this._adRemainder=this._adsManager.getRemainingTime(),this._clearAllTimeouts(),this._adDelayTimeout=setTimeout((function(){if(e._isAdPlaying()&&!e._isAdBuffering()){var t=1e3*Math.max(e._adRemainder-2,0);e._adDestroyTimeout=setTimeout((function(){e._isHealthy=!1,e._onAdDisconnect()}),t)}}),2e3))}},{key:"isHealthy",value:function(){return this._isHealthy}},{key:"observe",value:function(){this._observing||(this._adsManager.addEventListener(google.ima.AdEvent.Type.PAUSED,this._clearAllTimeouts),this._adsManager.addEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,this._clearAllTimeouts),this._adsManager.addEventListener(google.ima.AdEvent.Type.AD_PROGRESS,this._handleAdProgress),this._observing=!0)}},{key:"disconnect",value:function(){this._observing&&(this._clearAllTimeouts(),this._adsManager.removeEventListener(google.ima.AdEvent.Type.PAUSED,this._clearAllTimeouts),this._adsManager.removeEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,this._clearAllTimeouts),this._adsManager.removeEventListener(google.ima.AdEvent.Type.AD_PROGRESS,this._handleAdProgress),this._observing=!1)}}])&&i(t.prototype,n),r&&i(t,r),e}();t.default=r},function(e,t){e.exports='<svg width="41px" height="41px" viewBox="0 0 41 41" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>Link</title><desc>Created with sketchtool.</desc><g id="Symbols" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="Share-Tools/Small" transform="translate(-19.000000, -3.000000)" fill="#FFFFFF"><g id="Group" transform="translate(0.000000, 3.000000)"><g id="link-2" transform="translate(19.000000, 0.000000)"><path d="M20.5,41 C31.8218374,41 41,31.8218374 41,20.5 C41,9.17816263 31.8218374,0 20.5,0 C9.17816263,0 0,9.17816263 0,20.5 C0,31.8218374 9.17816263,41 20.5,41 Z M29.1482244,10 L31,11.8517601 L23.8517756,19 L22,17.1482399 L29.1482244,10 Z M17.1482244,22 L19,23.8517601 L11.8517756,31 L10,29.1482399 L17.1482244,22 Z M11.6250344,24 L9.76878951,22.1436387 C8.74361379,21.1183986 8.74357389,19.4561959 9.76964768,18.4300578 L18.4304073,9.76875462 C19.456057,8.74304058 21.1206655,8.7447425 22.1437552,9.7678964 L24,11.6242577 L22.1437552,13.4806191 L20.905613,12.2423992 C20.5642443,11.9010091 20.0123957,11.8993896 19.6682227,12.2435842 L12.244322,19.6679508 C11.9022989,20.0099954 11.8989297,20.5611898 12.243137,20.9054188 L13.4812792,22.1436387 L11.6250344,24 Z M29.3749656,17 L31.2312105,18.8563613 C32.2563862,19.8816014 32.2564261,21.5438041 31.2303523,22.5699422 L22.5695927,31.2312454 C21.543943,32.2569594 19.8793345,32.2552575 18.8562448,31.2321036 L17,29.3757423 L18.8562448,27.5193809 L20.094387,28.7576008 C20.4357557,29.0989909 20.9876043,29.1006104 21.3317773,28.7564158 L28.755678,21.3320492 C29.0977011,20.9900046 29.1010703,20.4388102 28.756863,20.0945812 L27.5187208,18.8563613 L29.3749656,17 Z" id="link"></path></g></g></g></g></svg>'},function(e,t){e.exports='<svg width="41px" height="41px" viewBox="0 0 41 41" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>Embed</title><desc>Created with sketchtool.</desc><g id="Symbols" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="Share-Tools/Small" transform="translate(-106.000000, -3.000000)" fill="#FFFFFF" fill-rule="nonzero"><g id="Group-2" transform="translate(87.000000, 3.000000)"><g id="embed-2" transform="translate(19.000000, 0.000000)"><path d="M20.5,41 C31.8218374,41 41,31.8218374 41,20.5 C41,9.17816263 31.8218374,0 20.5,0 C9.17816263,0 0,9.17816263 0,20.5 C0,31.8218374 9.17816263,41 20.5,41 Z M15,25 L7,20.8333333 L7,19.1666667 L15,15 L15,17.5 L9.66666667,20 L15,22.5 L15,25 Z M26,15 L34,19.1666667 L34,20.8333333 L26,25 L26,22.5 L31.3333333,20 L26,17.5 L26,15 Z M25,9 L18.7,31 L16,31 L22.3,9 L25,9 Z" id="embed"></path></g></g></g></g></svg>'},function(e,t){e.exports='<svg width="41px" height="41px" viewBox="0 0 41 41" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>Facebook</title><desc>Created with sketchtool.</desc><g id="Symbols" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="Share-Tools/Small" transform="translate(-193.000000, -3.000000)" fill="#FFFFFF" fill-rule="nonzero"><g id="Group-3" transform="translate(174.000000, 3.000000)"><g id="facebook-2" transform="translate(19.000000, 0.000000)"><path d="M20.5,41 C31.8218374,41 41,31.8218374 41,20.5 C41,9.17816263 31.8218374,0 20.5,0 C9.17816263,0 0,9.17816263 0,20.5 C0,31.8218374 9.17816263,41 20.5,41 Z M24.6293176,20.0039078 L21.6133109,20.0039078 L21.6133109,31 L17.1314238,31 L17.1314238,20.0039078 L15,20.0039078 L15,16.4790934 L17.1314238,16.4790934 L17.1314238,14.1891364 C17.1314238,12.5556858 17.9738837,10 21.6470093,10 L24.9663016,10 L24.9663016,13.4388433 L22.5400168,13.4388433 C22.2678957,13.4246304 22.0032383,13.5243373 21.8188466,13.7105368 C21.6344549,13.8967363 21.5497517,14.1498151 21.5880371,14.4001563 L21.5880371,16.4790934 L25,16.4790934 L24.6293176,20.0039078 Z" id="facebook"></path></g></g></g></g></svg>'},function(e,t){e.exports='<svg width="41px" height="41px" viewBox="0 0 41 41" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>Twitter</title><desc>Created with sketchtool.</desc><g id="Symbols" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="Share-Tools/Small" transform="translate(-280.000000, -3.000000)" fill="#FFFFFF" fill-rule="nonzero"><g id="Group-4" transform="translate(261.000000, 3.000000)"><g id="twitter-2" transform="translate(19.000000, 0.000000)"><path d="M20.5,41 C31.8218374,41 41,31.8218374 41,20.5 C41,9.17816263 31.8218374,0 20.5,0 C9.17816263,0 0,9.17816263 0,20.5 C0,31.8218374 9.17816263,41 20.5,41 Z M28.8878177,16.9914714 L28.8878177,17.5117273 C28.8878177,22.8507464 24.7773883,29 17.266433,29 C15.0406158,28.9997821 12.8630788,28.3685169 11,27.1833689 C11.3229742,27.2188708 11.647806,27.2359576 11.9728309,27.2345416 C13.8142019,27.2426377 15.6036642,26.6411222 17.0473269,25.5287847 C15.3014982,25.4648489 13.7888941,24.3317766 13.2787029,22.7057571 C13.5331575,22.7510116 13.791287,22.7738475 14.0499562,22.7739873 C14.4143875,22.7735026 14.7770536,22.7247247 15.1279579,22.628998 C13.2095189,22.2327674 11.8406388,20.5801033 11.8501315,18.671642 L11.8501315,18.6289981 C12.4152302,18.940806 13.0500517,19.1135464 13.6993865,19.1321964 C11.8998965,17.9298176 11.350723,15.5843096 12.4373357,13.7420046 C14.4948277,16.2558532 17.5616482,17.7899922 20.8597721,17.9552241 C20.7888495,17.6530764 20.7535646,17.3440438 20.7546012,17.0341154 C20.7400195,14.8235531 22.5671829,13.0187685 24.8387379,13.0000003 C25.9709047,12.9995619 27.0515495,13.4604156 27.8185802,14.2707892 C28.7470872,14.0956075 29.6369313,13.7636647 30.4478528,13.289979 C30.1460477,14.2215957 29.5078215,15.015366 28.6511832,15.5245205 C29.4628438,15.4280487 30.2547824,15.2123781 31,14.8848617 C30.432782,15.7056959 29.7171122,16.4194776 28.8878177,16.9914714 Z" id="twitter"></path></g></g></g></g></svg>'},function(e,t,n){"use strict";n.r(t),n.d(t,"ResizeObserver",(function(){return U})),n.d(t,"ResizeObserverEntry",(function(){return E}));var i,r=[],a="ResizeObserver loop completed with undelivered notifications.";!function(e){e.BORDER_BOX="border-box",e.CONTENT_BOX="content-box",e.DEVICE_PIXEL_CONTENT_BOX="device-pixel-content-box"}(i||(i={}));var o,s=function(){function e(e,t,n,i){return this.x=e,this.y=t,this.width=n,this.height=i,this.top=this.y,this.left=this.x,this.bottom=this.top+this.height,this.right=this.left+this.width,Object.freeze(this)}return e.prototype.toJSON=function(){var e=this;return{x:e.x,y:e.y,top:e.top,right:e.right,bottom:e.bottom,left:e.left,width:e.width,height:e.height}},e.fromRect=function(t){return new e(t.x,t.y,t.width,t.height)},e}(),l=function(e){return e instanceof SVGElement&&"getBBox"in e},c=function(e){if(l(e)){var t=e.getBBox(),n=t.width,i=t.height;return!n&&!i}var r=e,a=r.offsetWidth,o=r.offsetHeight;return!(a||o||e.getClientRects().length)},u=function(e){var t,n,i=null===(n=null===(t=e)||void 0===t?void 0:t.ownerDocument)||void 0===n?void 0:n.defaultView;return!!(i&&e instanceof i.Element)},d="undefined"!=typeof window?window:{},h=new WeakMap,p=/auto|scroll/,_=/^tb|vertical/,f=/msie|trident/i.test(d.navigator&&d.navigator.userAgent),g=function(e){return parseFloat(e||"0")},v=function(e,t,n){return void 0===e&&(e=0),void 0===t&&(t=0),void 0===n&&(n=!1),Object.freeze({inlineSize:(n?t:e)||0,blockSize:(n?e:t)||0})},m=Object.freeze({devicePixelContentBoxSize:v(),borderBoxSize:v(),contentBoxSize:v(),contentRect:new s(0,0,0,0)}),y=function(e,t){if(void 0===t&&(t=!1),h.has(e)&&!t)return h.get(e);if(c(e))return h.set(e,m),m;var n=getComputedStyle(e),i=l(e)&&e.ownerSVGElement&&e.getBBox(),r=!f&&"border-box"===n.boxSizing,a=_.test(n.writingMode||""),o=!i&&p.test(n.overflowY||""),u=!i&&p.test(n.overflowX||""),d=i?0:g(n.paddingTop),y=i?0:g(n.paddingRight),S=i?0:g(n.paddingBottom),E=i?0:g(n.paddingLeft),b=i?0:g(n.borderTopWidth),T=i?0:g(n.borderRightWidth),w=i?0:g(n.borderBottomWidth),A=E+y,C=d+S,I=(i?0:g(n.borderLeftWidth))+T,P=b+w,k=u?e.offsetHeight-P-e.clientHeight:0,M=o?e.offsetWidth-I-e.clientWidth:0,D=r?A+I:0,O=r?C+P:0,R=i?i.width:g(n.width)-D-M,N=i?i.height:g(n.height)-O-k,L=R+A+M+I,x=N+C+k+P,F=Object.freeze({devicePixelContentBoxSize:v(Math.round(R*devicePixelRatio),Math.round(N*devicePixelRatio),a),borderBoxSize:v(L,x,a),contentBoxSize:v(R,N,a),contentRect:new s(E,d,R,N)});return h.set(e,F),F},S=function(e,t,n){var r=y(e,n),a=r.borderBoxSize,o=r.contentBoxSize,s=r.devicePixelContentBoxSize;switch(t){case i.DEVICE_PIXEL_CONTENT_BOX:return s;case i.BORDER_BOX:return a;default:return o}},E=function(e){var t=y(e);this.target=e,this.contentRect=t.contentRect,this.borderBoxSize=[t.borderBoxSize],this.contentBoxSize=[t.contentBoxSize],this.devicePixelContentBoxSize=[t.devicePixelContentBoxSize]},b=function(e){if(c(e))return 1/0;for(var t=0,n=e.parentNode;n;)t+=1,n=n.parentNode;return t},T=function(){var e=1/0,t=[];r.forEach((function(n){if(0!==n.activeTargets.length){var i=[];n.activeTargets.forEach((function(t){var n=new E(t.target),r=b(t.target);i.push(n),t.lastReportedSize=S(t.target,t.observedBox),r<e&&(e=r)})),t.push((function(){n.callback.call(n.observer,i,n.observer)})),n.activeTargets.splice(0,n.activeTargets.length)}}));for(var n=0,i=t;n<i.length;n++){(0,i[n])()}return e},w=function(e){r.forEach((function(t){t.activeTargets.splice(0,t.activeTargets.length),t.skippedTargets.splice(0,t.skippedTargets.length),t.observationTargets.forEach((function(n){n.isActive()&&(b(n.target)>e?t.activeTargets.push(n):t.skippedTargets.push(n))}))}))},A=function(){var e,t=0;for(w(t);r.some((function(e){return e.activeTargets.length>0}));)t=T(),w(t);return r.some((function(e){return e.skippedTargets.length>0}))&&("function"==typeof ErrorEvent?e=new ErrorEvent("error",{message:a}):((e=document.createEvent("Event")).initEvent("error",!1,!1),e.message=a),window.dispatchEvent(e)),t>0},C=[],I=function(e){if(!o){var t=0,n=document.createTextNode("");new MutationObserver((function(){return C.splice(0).forEach((function(e){return e()}))})).observe(n,{characterData:!0}),o=function(){n.textContent=""+(t?t--:t++)}}C.push(e),o()},P=0,k={attributes:!0,characterData:!0,childList:!0,subtree:!0},M=["resize","load","transitionend","animationend","animationstart","animationiteration","keyup","keydown","mouseup","mousedown","mouseover","mouseout","blur","focus"],D=function(e){return void 0===e&&(e=0),Date.now()+e},O=!1,R=new(function(){function e(){var e=this;this.stopped=!0,this.listener=function(){return e.schedule()}}return e.prototype.run=function(e){var t=this;if(void 0===e&&(e=250),!O){O=!0;var n,i=D(e);n=function(){var n=!1;try{n=A()}finally{if(O=!1,e=i-D(),!P)return;n?t.run(1e3):e>0?t.run(e):t.start()}},I((function(){requestAnimationFrame(n)}))}},e.prototype.schedule=function(){this.stop(),this.run()},e.prototype.observe=function(){var e=this,t=function(){return e.observer&&e.observer.observe(document.body,k)};document.body?t():d.addEventListener("DOMContentLoaded",t)},e.prototype.start=function(){var e=this;this.stopped&&(this.stopped=!1,this.observer=new MutationObserver(this.listener),this.observe(),M.forEach((function(t){return d.addEventListener(t,e.listener,!0)})))},e.prototype.stop=function(){var e=this;this.stopped||(this.observer&&this.observer.disconnect(),M.forEach((function(t){return d.removeEventListener(t,e.listener,!0)})),this.stopped=!0)},e}()),N=function(e){!P&&e>0&&R.start(),!(P+=e)&&R.stop()},L=function(){function e(e,t){this.target=e,this.observedBox=t||i.CONTENT_BOX,this.lastReportedSize={inlineSize:0,blockSize:0}}return e.prototype.isActive=function(){var e,t=S(this.target,this.observedBox,!0);return e=this.target,l(e)||function(e){switch(e.tagName){case"INPUT":if("image"!==e.type)break;case"VIDEO":case"AUDIO":case"EMBED":case"OBJECT":case"CANVAS":case"IFRAME":case"IMG":return!0}return!1}(e)||"inline"!==getComputedStyle(e).display||(this.lastReportedSize=t),this.lastReportedSize.inlineSize!==t.inlineSize||this.lastReportedSize.blockSize!==t.blockSize},e}(),x=function(e,t){this.activeTargets=[],this.skippedTargets=[],this.observationTargets=[],this.observer=e,this.callback=t},F=new WeakMap,V=function(e,t){for(var n=0;n<e.length;n+=1)if(e[n].target===t)return n;return-1},B=function(){function e(){}return e.connect=function(e,t){var n=new x(e,t);F.set(e,n)},e.observe=function(e,t,n){var i=F.get(e),a=0===i.observationTargets.length;V(i.observationTargets,t)<0&&(a&&r.push(i),i.observationTargets.push(new L(t,n&&n.box)),N(1),R.schedule())},e.unobserve=function(e,t){var n=F.get(e),i=V(n.observationTargets,t),a=1===n.observationTargets.length;i>=0&&(a&&r.splice(r.indexOf(n),1),n.observationTargets.splice(i,1),N(-1))},e.disconnect=function(e){var t=this,n=F.get(e);n.observationTargets.slice().forEach((function(n){return t.unobserve(e,n.target)})),n.activeTargets.splice(0,n.activeTargets.length)},e}(),U=function(){function e(e){if(0===arguments.length)throw new TypeError("Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.");if("function"!=typeof e)throw new TypeError("Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.");B.connect(this,e)}return e.prototype.observe=function(e,t){if(0===arguments.length)throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!u(e))throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element");B.observe(this,e,t)},e.prototype.unobserve=function(e){if(0===arguments.length)throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!u(e))throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element");B.unobserve(this,e)},e.prototype.disconnect=function(){B.disconnect(this)},e.toString=function(){return"function ResizeObserver () { [polyfill code] }"},e}()}]);
//# sourceMappingURL=video.min.js.map