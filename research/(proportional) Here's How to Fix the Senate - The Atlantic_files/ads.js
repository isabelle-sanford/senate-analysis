!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e=e||self).ads={})}(this,(function(e){"use strict";var t,n,o=function(){var e=window.crypto||window.msCrypto,t=new RegExp(/[xy]/g);if(void 0!==e&&void 0!==e.getRandomValues)return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(t,(function(t){var n=e.getRandomValues(new Uint8Array(1))[0]%16|0;return("x"==t?n:3&n|8).toString(16)}))}(),i=(t={},window.location.search.slice(1).toLowerCase().split("&").forEach((function(e){var n=e.split("=");t[n[0]]=n[1]||!0})),t),r=(n={},window.location.search.slice(1).toLowerCase().split("&").map((function(e){return e.split("=")})).forEach((function(e){"debug"===e[0]&&(n[e[1]]=!0)})),n),a={"1x2":"native","1x3":"responsive","3x3":"house"},s="https://securepubads.g.doubleclick.net/tag/js/gpt.js",d=r.ads?console.debug.bind(window.console):function(){},c=r.ads&&console.table?console.table.bind(window.console):function(){};function u(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}function l(e){return e.replace(/\n\s+/g,"\n")}function f(e,t){var n=document.createEvent("Event");n.initEvent(e,!0,!0),t.dispatchEvent(n)}function p(e){for(var t=[],n=0;n<e.length;n++)t.push(e[n]);return t}var g={native:[1,2],logo:[88,31],leaderboard:[728,90],billboard:[970,250],halfpage:[300,600],box:[300,250],mobilebanner:[320,50],custom:[1,1],responsive:[1,3],videoUpNext:[2,2],cineflex:[2,4],house:[3,3]},m={native:[g.native],house:[g.house],"mobile-wide":[g.responsive,g.box],"desktop-wide":[g.responsive,g.leaderboard,g.billboard],rail:[g.box,g.halfpage],box:[g.box],"bottompersistent-desktop":[g.leaderboard],"bottompersistent-mobile":[g.mobilebanner],cineflex:[g.cineflex],logo:[g.logo],custom:[g.custom]};function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function w(e,t,n){return t&&b(e.prototype,t),n&&b(e,n),e}function _(){return(_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}function y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],o=!0,i=!1,r=void 0;try{for(var a,s=e[Symbol.iterator]();!(o=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);o=!0);}catch(e){i=!0,r=e}finally{try{o||null==s.return||s.return()}finally{if(i)throw r}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return k(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return k(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}var x=window.performance||{};x.mark=x.mark||function(e){},x.measure=x.measure||function(e,t,n){},x.now=x.now||function(){};function j(e){this.message=e}j.prototype=new Error,j.prototype.name="InvalidCharacterError";var z="undefined"!=typeof window&&window.atob&&window.atob.bind(window)||function(e){var t=String(e).replace(/=+$/,"");if(t.length%4==1)throw new j("'atob' failed: The string to be decoded is not correctly encoded.");for(var n,o,i=0,r=0,a="";o=t.charAt(r++);~o&&(n=i%4?64*n+o:o,i++%4)?a+=String.fromCharCode(255&n>>(-2*i&6)):0)o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(o);return a};var S=function(e){var t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}try{return function(e){return decodeURIComponent(z(e).replace(/(.)/g,(function(e,t){var n=t.charCodeAt(0).toString(16).toUpperCase();return n.length<2&&(n="0"+n),"%"+n})))}(t)}catch(e){return z(t)}};function I(e){this.message=e}I.prototype=new Error,I.prototype.name="InvalidTokenError";var A=function(e,t){if("string"!=typeof e)throw new I("Invalid token specified");var n=!0===(t=t||{}).header?0:1;try{return JSON.parse(S(e.split(".")[n]))}catch(e){throw new I("Invalid token specified: "+e.message)}};A.InvalidTokenError=I;var E=function(e,t,n){if(n){var o=new Date;o.setTime(o.getTime()+24*n*60*60*1e3),document.cookie="".concat(e,"=").concat(t,"; expires=").concat(o.toUTCString(),"; path=/")}else document.cookie="".concat(e,"=").concat(t,"; path=/")},T=function(e){e+="=";for(var t=document.cookie.split(";"),n=0;n<t.length;n++){for(var o=t[n];" "==o.charAt(0);)o=o.substring(1,o.length);if(0===o.indexOf(e))return o.substring(e.length,o.length)}return null},C={globals:{user:[]}};function q(e){_(C,e)}function P(){return C}function O(e){var t={};return e&&e.length?(e.forEach((function(e){t[e]=C.globals[e]})),t):C.globals}function B(e){_(C.globals,e)}function N(){var e=T("atljwt");if(!e)return{};try{return A(e)}catch(e){return console.warn("Issue decoding JWT token",e),{}}}function R(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;return e+Math.floor(Math.random()*(t-e+1))}var L=void 0,D=void 0;function M(){return void 0===L&&(L=parseInt(i.adkv_abt,10)||(P().globals||{}).abt||R(1,100),d("ABT value: ".concat(L))),L}var U={};U.disableBanners=function(){return e=40,t=49,M()>=e&&M()<=t;var e,t},U.disableAppnexus=function(){return[55,59,71].indexOf(M())>-1},U.disableCriteo=function(){return[56,59,71].indexOf(M())>-1},U.disableIndex=function(){return[57,59,67,71].indexOf(M())>-1},U.disableRubicon=function(){return[58,59,70,71].indexOf(M())>-1},U.disableTAM=function(){return[64,71].indexOf(M())>-1},U.disablePubmatic=function(){return[59,69,71,76].indexOf(M())>-1},U.disableTeads=function(){return[65,59,71].indexOf(M())>-1},U.disableAllPrebid=function(){return U.disableAppnexus()&&U.disableCriteo()&&U.disableIndex()&&U.disableRubicon()&&U.disablePubmatic()&&U.disableTeads()};var F=N().ad_free,G=0;function V(e){return F?e.filter((function(e){return 3===e[0]&&3===e[1]})):e}function H(e){var t,n={id:null,targeting:{},breakpoints:[]};e.id||(G++,e.id="".concat("gpt-unit-").concat(G)),t=e.id,document.querySelectorAll('[id="'.concat(t,'"]')).length>1&&console.error(l("There's more than one element\n              with the id of '".concat(t,"'.\n              Unless the ids are unique no ads will load."))),n.id=e.id,n.targeting={},function(e){var t=e.getElementsByTagName("gpt-sizeset");Array.prototype.map.call(t,(function(t){var n=JSON.parse(t.getAttribute("viewport-size"))[0];e.setAttribute("sizes-at-".concat(n),t.getAttribute("sizes"))}))}(e);var o=p(e.attributes);return o.forEach((function(e){if(0===e.name.indexOf("sizes-at-")){var t=parseInt(e.name.slice("sizes-at-".length),10);isNaN(t)&&console.warn("An ad has a breakpoint of '".concat(breakpoint,"', which makes no sense üö®"));var o=function(e){if(0===e.indexOf("[[")||"[]"===e)return V(JSON.parse(e));var t=e.split(",").filter((function(e){return""!==e})),n=[];return t.forEach((function(e){e=e.trim(),m[e]?m[e].forEach((function(e){return n.push(e)})):console.error("Couldn't find ad sizes matching '".concat(e,"'"))})),V(n)}(e.value);U.disableBanners()&&(o=o.filter((function(e){var t=y(e,2),n=t[0],o=t[1];return!(728===n&&90===o)}))),n.breakpoints.push({viewport:[t,0],sizes:o})}})),o.forEach((function(e){if(0===e.name.indexOf("targeting-")){var t=e.name.slice("targeting-".length),o=e.value.split(",");n.targeting[t]=o}})),0===n.breakpoints.length&&console.error("üöí No ad sizes were specified for",e),n.format=function(e){var t=e.getAttribute("format");t||(t=function(e){var t,n=["injector","rrail","adhesion","native","logo","recirc","cineflex"],o=e.className.split(" "),i=[];o.filter((function(e){return-1!==e.indexOf("kvr-")})).length?i=o.filter((function(e){return 0===e.indexOf("kvr-")})).map((function(e){return e.slice(4)})):i.push("other");for(var r=0;r<n.length;r++)if(-1!==i.indexOf(n[r])){t=n[r];break}return t}(e));return t||"other"}(e),n.targeting.class=[n.format],n}window.googletag=window.googletag||{},window.googletag.cmd=window.googletag.cmd||[],window.ad_queue=window.ad_queue||[];var K={init:window.ad_queue,justInTimeQueue:[],lazyLoadQueue:[]};function W(e,t){this.key=e,this.q=K[e],this.externalCallback=t||null}W.prototype.reset=function(){this.q.length=0,delete this.q.push},W.prototype.push=function(e){this.externalCallback?this.externalCallback(e):this.q.push(e)},W.prototype.setCallback=function(e){this.externalCallback?this.externalCallback=e:this.q.push=e},W.prototype.execute=function(e){this.externalCallback?console.error("You can't execute the ".concat(this.key," queue because it's a vendor API.")):this.q.forEach(e)};var Y=new W("init"),J=new W("justInTimeQueue"),Q=new W("lazyLoadQueue"),X=new W("gpt",(function(e){window.googletag.cmd.push(e)}));function Z(){var e=window.navigator.userAgent||"",t="desktop";return(window.screen.width||window.innerWidth)<800&&(t="mobile"),e.match(/(ipad|tablet|(android(?!.*mobile))|(windows(?!.*phone)(.*touch))|kindle|playbook|silk|(puffin(?!.*(IP|AP|WP))))/i)?t="tablet":e.match(/Mobile|iP(hone|od)|BlackBerry|IEMobile/i)&&(t="mobile"),t}function $(e){function t(e){for(var t=e;e=e.previousElementSibling;)if(e.offsetParent)return e;for(e=t;e=e.nextElementSibling;)if(e.offsetParent)return e}for(;null===e.offsetParent;)e=t(e)||e.parentNode;return e.getBoundingClientRect()}function ee(){return Qe.all().filter((function(e){return!e.isDeferred()&&!e.called&&document.body.contains(e.element)}))}function te(e,t){return 0===t||function(e){var t=e.clientRect,n=e.lazy,o=t.top;return o<window.innerHeight*n&&o>0}({clientRect:$(e),lazy:t})}var ne=null,oe=!1;var ie=window.pageYOffset,re=0,ae=!1,se=!1;function de(e){e=_({changeCorrelator:!re,defaultLazy:P().lazy_load||0},e);var t=Math.abs(ie-window.pageYOffset);if(ie=window.pageYOffset,!(t>500)){var n=ee();Q.execute((function(e){e()}));var o=(n=(n=n.filter((function(e){var t=e.getLazySetting();return te(e.element,t)}))).filter((function(e){var t=e.isTaskQueueComplete();if(!t){var n=e.tasks.filter((function(e){return!e.isComplete})).map((function(e){return e.name})).join(", ");d("".concat(e.element.id," stalled waiting on ").concat(n," üõë")),e.stalls++}return t}))).map((function(e){return e.gptSlot})),i=ne&&!oe?(oe=!0,d("Included outofpage ad in gpt call"),ne):null;if(i&&o.push(i),0!==o.length){re++;var r=function(){var e={injector:0,rrail:0};Qe.all().filter((function(e){return e.getActiveSizes().length})).map((function(e){return e.data.format||""})).forEach((function(t){void 0!==e[t]&&e[t]++}));var t={};return Object.keys(e).forEach((function(n){if(e[n]>0){for(var o=e[n],i=[],r=1;r<=o;r++)i.push(r);t["".concat(n,"-count")]=i}})),d("Counted all the ads by format."),t}();n.forEach((function(e){if(e.setCalled(),e.batch=re,e.gptSlot){var t=e.getBidders(),n=0===t.length||e.getMaxBid()<=.25;e.gptSlot.setTargeting("nobids",n.toString()),e.data.targeting.nobids=n;var o=e.tasks.length?(e.getMaxBid()||"0.00").toString():void 0;for(var i in e.data.targeting.maxbid=o,e.gptSlot.setTargeting("maxbid",o),t.length?d("Ads: ".concat(e.id," called with the bidders from \n  ").concat(t.join("\n  ")),"\nTargeting : ",e.getTargetingMap()):d("Ads: ".concat(e.id," called with 0 bids")),r)e.gptSlot.setTargeting(i,r[i]);e.recordTargeting()}else d("üî• You've attempted to render an ad with no GPT slot. Something has gone horribly wrong.",e)})),d("GPT Refresh call:",{ads:n,changeCorrelator:e.changeCorrelator}),ae||(x.mark("ads:first_call"),ae=!0),!se&&n.filter((function(e){return e.tasks.length})).length&&(x.mark("ads:first_call_with_locking_tasks"),se=!0),googletag.pubads().refresh(o,{changeCorrelator:e.changeCorrelator})}}}var ce=setTimeout;function ue(e){return Boolean(e&&void 0!==e.length)}function le(){}function fe(e){if(!(this instanceof fe))throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],be(e,this)}function pe(e,t){for(;3===e._state;)e=e._value;0!==e._state?(e._handled=!0,fe._immediateFn((function(){var n=1===e._state?t.onFulfilled:t.onRejected;if(null!==n){var o;try{o=n(e._value)}catch(e){return void me(t.promise,e)}ge(t.promise,o)}else(1===e._state?ge:me)(t.promise,e._value)}))):e._deferreds.push(t)}function ge(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var n=t.then;if(t instanceof fe)return e._state=3,e._value=t,void he(e);if("function"==typeof n)return void be((o=n,i=t,function(){o.apply(i,arguments)}),e)}e._state=1,e._value=t,he(e)}catch(t){me(e,t)}var o,i}function me(e,t){e._state=2,e._value=t,he(e)}function he(e){2===e._state&&0===e._deferreds.length&&fe._immediateFn((function(){e._handled||fe._unhandledRejectionFn(e._value)}));for(var t=0,n=e._deferreds.length;t<n;t++)pe(e,e._deferreds[t]);e._deferreds=null}function ve(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}function be(e,t){var n=!1;try{e((function(e){n||(n=!0,ge(t,e))}),(function(e){n||(n=!0,me(t,e))}))}catch(e){if(n)return;n=!0,me(t,e)}}fe.prototype.catch=function(e){return this.then(null,e)},fe.prototype.then=function(e,t){var n=new this.constructor(le);return pe(this,new ve(e,t,n)),n},fe.prototype.finally=function(e){var t=this.constructor;return this.then((function(n){return t.resolve(e()).then((function(){return n}))}),(function(n){return t.resolve(e()).then((function(){return t.reject(n)}))}))},fe.all=function(e){return new fe((function(t,n){if(!ue(e))return n(new TypeError("Promise.all accepts an array"));var o=Array.prototype.slice.call(e);if(0===o.length)return t([]);var i=o.length;function r(e,a){try{if(a&&("object"==typeof a||"function"==typeof a)){var s=a.then;if("function"==typeof s)return void s.call(a,(function(t){r(e,t)}),n)}o[e]=a,0==--i&&t(o)}catch(e){n(e)}}for(var a=0;a<o.length;a++)r(a,o[a])}))},fe.resolve=function(e){return e&&"object"==typeof e&&e.constructor===fe?e:new fe((function(t){t(e)}))},fe.reject=function(e){return new fe((function(t,n){n(e)}))},fe.race=function(e){return new fe((function(t,n){if(!ue(e))return n(new TypeError("Promise.race accepts an array"));for(var o=0,i=e.length;o<i;o++)fe.resolve(e[o]).then(t,n)}))},fe._immediateFn="function"==typeof setImmediate&&function(e){setImmediate(e)}||function(e){ce(e,0)},fe._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)};var we=[1,2,3,4,7,9],_e=[];function ye(e,t){return 0===t.map((function(t){return e[t]||!1})).filter((function(e){return!0!==e})).length}function ke(){return new Promise((function(e,t){window.__tcfapi("getTCData",2,(function(t,n){if(0===Object.keys(t.purpose.consents).length)return d("CMP: No data yet available"),e({hasData:!1,consented:null});var o=t.purpose,i=t.vendor,r=ye(o.consents,we),a=ye(i.consents,_e);e({hasData:!0,consented:r&&a})}))}))}function xe(){return new Promise((function(e){ze()?new Promise((function(e,t){ke().then((function(t){var n=t.hasData,o=t.consented;n?e({consentGranted:o}):window.__tcfapi("addEventListener",2,(function(t,n){"useractioncomplete"===t.eventStatus&&ke().then((function(t){var n=t.hasData,o=t.consented;e({hasData:n,consentGranted:o}),window.__tcfapi("removeEventListener",2,(function(){d("CMP: my work here is done.")}))}))}))}))})).then((function(t){var n=t.consentGranted;e({ok:n})})):e({ok:!0})}))}function je(){return null!==T("atl_ccpa")||r.donotsell||!1}function ze(){return"1"===T("is_gdpr")||r.gdpr||window.location.search.match(/is_gdpr=1/)||!1}var Se=["728x90","970x250","300x600","300x250","320x50"],Ie=0,Ae={b5pw5c:"tam_amazon","1e2my2o":"tam_gumgum","2cks8w":"tam_districtm",szhszk:"tam_rubicon","1lubksg":"tam_pubmatic",b87shs:"tam_openx",k3usqo:"tam_pulsepoint","1si1tz4":"tam_emx_digital","1iigg74":"tam_yieldmo",izwf7k:"tam_dmx","156zxts":"tam_kargo","18meps":"tam_oath"},Ee=3e3,Te=2250,Ce="ads:amazon:init",qe="ads:amazon:ready",Pe="ads:amazon:bid:start",Oe="ads:amazon:bid:end",Be=!0,Ne={},Re={};function Le(e){var t=e.getActiveSizes().filter((function(e){return Se.indexOf(e.join("x"))>-1}));return!!t.length&&(Re[e.id]=t,!0)}var De={r42jnk:"0.02",h5iww:"0.04",i8fjeo:"0.06",dsm1a8:"0.08",vjw1s0:"0.10","4wz11c":"0.12",mo91j4:"0.14",bkpa80:"0.16",tbzaps:"0.18","2p29z4":"0.20",kgcagw:"0.22",g0iscg:"0.24",xrssu8:"0.26","74vs3k":"0.28",ow5slc:"0.30",agqwow:"0.32",s80x6o:"0.34","1l3wg0":"0.36",jcdwxs:"0.38",ewketc:"0.40",wnufb4:"0.42","60xekg":"0.44",ns7f28:"0.46",connr4:"0.48",ufxo8w:"0.50","3t0ni8":"0.52",lkao00:"0.54",h4h5vk:"0.56",yvr6dc:"0.58","88u5mo":"0.60",q0464g:"0.62","9wrpxc":"0.64",ro1qf4:"0.66","114pog":"0.68",iseq68:"0.70",ecl81s:"0.72",w3v8jk:"0.74","5gy7sw":"0.76",n888ao:"0.78",c4ogzk:"0.80",tvyhhc:"0.82","391gqo":"0.84",l0bh8g:"0.86",gkhz40:"0.88",ybrzls:"0.90","7ouyv4":"0.92",pg4zcw:"0.94",b0q3gg:"0.96",ss03y8:"0.98","25337k":"1.00",jwd3pc:"1.02",fgjlkw:"1.04",x7tm2o:"1.06","6kwlc0":"1.08",oc6lts:"1.10",d8muio:"1.12",uzwv0g:"1.14","4czu9s":"1.16",m49urk:"1.18",hogcn4:"1.20",zfqd4w:"1.22","8stce8":"1.24",qk3cw0:"1.26","92sxs0":"1.28",qu2y9s:"1.30","75xj4":"1.32",hyfy0w:"1.34",dimfwg:"1.36",v9wge8:"1.38","4mzfnk":"1.40",me9g5c:"1.42",bapou8:"1.44",t1zpc0:"1.46","2f2olc":"1.48",k6cp34:"1.50",fqj6yo:"1.52",xht7gg:"1.54","6uw6ps":"1.56",om677k:"1.58",a6rbb4:"1.60",ry1bsw:"1.62","1b4b28":"1.64",j2ebk0:"1.66",emktfk:"1.68",wdutxc:"1.70","5qxt6o":"1.72",ni7tog:"1.74",ceo2dc:"1.76",u5y2v4:"1.78","3j124g":"1.80",lab2m8:"1.82",guhkhs:"1.84",ylrkzk:"1.86","7yuk8w":"1.88",pq4kqo:"1.90","9ms4jk":"1.92",re251c:"1.94",r54ao:"1.96",iif4sg:"1.98",e2lmo0:"2.00","14pineo":"2.05",tlyw3k:"2.10","1k8vwu8":"2.15","7evdhc":"2.20","1a9aj28":"2.25",jmdibk:"2.30","1wge1og":"2.35",cyn94w:"2.40","13lk9vk":"2.45",z5qrr4:"2.50","1psnshs":"2.55",c5q80:"2.60","1d669kw":"2.65",mj98u8:"2.70","1spjj0g":"2.75",fviznk:"2.80","16ig0e8":"2.85",s314hs:"2.90","1ipy58g":"2.95","5vxlvk":"3.00","1c27w1s":"3.05",lfavb4:"3.10","1y9beo0":"3.15","9rrx8g":"3.20","10eoxz4":"3.25",vyvfuo:"3.30","1mlsglc":"3.35","341o1s":"3.40","1fy27eo":"3.45",pb56o0:"3.50","1s5kc8w":"3.55",fbjsw0:"3.60","15ygtmo":"3.65",uux2bk:"3.70","1lhu328":"3.75","8ntjpc":"3.80","18gd62o":"3.85",htg5c0:"3.90","1ungoow":"3.95",b5pw5c:"4.00","11smww0":"4.05",xcterk:"4.10","1nzqfi8":"4.15","164idc":"4.20","1e051q8":"4.25",nd80zk:"4.30","1tjib5s":"4.35",gphrsw:"4.40","17cesjk":"4.45",r92ccg:"4.50","1hvzd34":"4.55","51ytq8":"4.60","1b893wg":"4.65",klc35s:"4.70","1xfcmio":"4.75",alqpds:"4.80","118nq4g":"4.85",wsu800:"4.90","1nfr8qo":"4.95","3y0g74":"5.00","1gs0zk0":"5.05",q53ytc:"5.10","1qp4gzk":"5.15",dv3xmo:"5.20","14i0ydc":"5.25",teh728:"5.30","1k1e7sw":"5.35","77dog0":"5.40","1a1su0w":"5.45",jevta8:"5.50","1w8wcn4":"5.55",cr5k3k:"5.60","13e2ku8":"5.65",yy92ps:"5.70","1pl63gg":"5.75","13mm0w":"5.80","1dxn5ds":"5.85",naq4n4:"5.90","1th0etc":"5.95",gmzvgg:"6.00","179ww74":"6.05",sui0ao:"6.10","1jhf11c":"6.15","6nehog":"6.20","1ctoruo":"6.25",m6rr40:"6.30","1z0sagw":"6.35","95au4g":"6.40",zs7uv4:"6.45",vcecqo:"6.50","1lzbdhc":"6.55","2hkkxs":"6.60","1fbl4ao":"6.65",ooo3k0:"6.70","1rj394w":"6.75",ep2ps0:"6.80","15bzqio":"6.85",u8fz7k:"6.90","1kvczy8":"6.95","81cglc":"7.00","197u1vk":"7.05",ikx14w:"7.10","1vexkhs":"7.15",bx6ry8:"7.20","12k3sow":"7.25",y4aakg:"7.30","1or7bb4":"7.35","1xle68":"7.40","1erlxj4":"7.45",o4owsg:"7.50","1uaz6yo":"7.55",hgynls:"7.60","183vocg":"7.65",r1knb4:"7.70","1hoho1s":"7.75","4uh4ow":"7.80","1b0rev4":"7.85",kdue4g:"7.90","1x7uxhc":"7.95",ae90cg:"8.00",1116134:"8.05",wlciyo:"8.10","1n89jpc":"8.15","3qir5s":"8.20","1gkjaio":"8.25",pxm9s0:"8.30","1r43v28":"8.35",ea3bpc:"8.40","14x0cg0":"8.45",ttgl4w:"8.50","1kgdlvk":"8.55","7md2io":"8.60","1ags83k":"8.65",jtv7cw:"8.70","1wnvqps":"8.75",d64y68:"8.80","13t1yww":"8.85",zd8gsg:"8.90","1q05hj4":"8.95","4o16o":"9.00","1cyokjk":"9.05",mbrjsw:"9.10","1si1tz4":"9.15",fo1am8:"9.20","16aybcw":"9.25",rvjfgg:"9.30","1iigg74":"9.35","5ofwu8":"9.40","1buq70g":"9.45",l7t69s:"9.50","1y1tpmo":"9.55","9ka874":"9.60","10778xs":"9.65",vrdqtc:"9.70","1meark0":"9.75","2wjz0g":"9.80","1fqkidc":"9.85",p3nhmo:"9.90","1ry2n7k":"9.95",f423uo:"10.00","18u3lz4":"10.25",xqjuo0:"10.50","1tx8r28":"10.75","5fp9mo":"11.00","11me60w":"11.25",qiueps:"11.50","1jnnrwg":"11.75",cdf474:"12.00","1djwphc":"12.25",sgrke8:"12.50","1yn1ukg":"12.75","2itj40":"13.00","15d8oow":"13.25",im5zb4:"13.50","1osg9hc":"13.75",hi7ls0:"14.00","1an0yyo":"14.25",w7m328:"14.50","1qqdf5s":"14.75","78mmm8":"15.00","13fbj0g":"15.25",mphzpc:"15.50","1iw6w3k":"15.75","9y0o3k":"16.00","1g4ay9s":"16.25",v15t6o:"16.50","1utpfk0":"16.75","1cd98g":"17.00","17injeo":"17.25",krku0w:"17.50","1nlzzls":"17.75",dov6rk:"18.00","19vk35s":"18.25",ys0buo:"18.50","1tarny8":"18.75","6h5qtc":"19.00",zlz400:"19.25",oifcow:"19.50","1kp4934":"19.75",bqy134:"20.00","1eld6o0":"20.25",r3g2kg:"20.50","1x9qcqo":"20.75","3se6f4":"21.00","14yvrpc":"21.25",jvqmm8:"21.50","1q20wsg":"21.75",fpwpvk:"22.00","1bwlm9s":"22.25",vt962o:"22.50","1rzy2gw":"22.75","8i79xc":"23.00","122016o":"23.25",nml5a8:"23.50","1i5chds":"23.75",av3tog:"24.00","1h1e3uo":"24.25",swdfk0:"24.50","1vqsl4w":"24.75",liuio:"25.00",lonzls:"25.50",eyfu2o:"26.00",ydnev4:"26.50","4ouuww":"27.00",ps0000:"27.50",d0ioe8:"28.00",s4wjr4:"28.50","35x3b4":"29.00",hvbklc:"29.50",grd728:"30.00",wupn9c:"30.50","730cu8":"31.00",n6ct1c:"31.50","90xiio":"32.00",u42nls:"32.50","1t82kg":"33.00",k9h2io:"33.50",e5q03k:"34.00",z8v56o:"34.50","5k2l8g":"35.00",oza60w:"35.50",blbrb4:"36.00",roo7i8:"36.50","4dmbcw":"37.00",j30sn4:"37.50",gb4utc:"38.00",vfiq68:"38.50","84gu0w":"39.00",o7ta80:"39.50",a2dzpc:"40.00",thlkhs:"40.50",hgrgg:"41.00",lklwjk:"41.50",fguu4g:"42.00",xi4g00:"42.50","579uyo":"43.00",qaf01s:"43.50",cjz3ls:"44.00",snbjsw:"44.50","2ae4g0":"45.00",idqkn4:"45.50",h9s740:"46.00",wqnk74:"46.50","7ro3r4":"47.00",mh2l1c:"47.50","9pl9fk":"48.00",usqeio:"48.50","1ix8n4":"49.00",ky4tfk:"49.50",dgfs3k:"50.00","68qc5c":"51.00",c3qrcw:"52.00","3i3chs":"53.00",fula0w:"54.00","8mvu2o":"55.00",akszr4:"56.00","12owe8":"57.00",eo505c:"58.00","4tjf28":"59.00",d578jk:"60.00","2vm9ds":"61.00",h45xc0:"62.00","6uky68":"63.00","97hhxc":"64.00","1zs1z4":"65.00",dxalfk:"66.00","6342dc":"67.00",bcwcn4:"68.00","456wow":"69.00",ghou80:"70.00","7w1fcw":"71.00",af6pz4:"72.00","5lqtc":"73.00",f4zthc:"74.00","5ae8e8":"75.00",c842yo:"76.00","2pzzls":"77.00",hpe29s:"78.00","7ft340":"79.00","9spmv4":"80.00",172800:"81.00",dsgf0g:"82.00","6kqz28":"83.00",buj9c0:"84.00","3nv8jk":"85.00",flds00:"86.00","8doc1s":"87.00",b32dj4:"88.00",thedc:"89.00",etww74:"90.00","4kbx1c":"91.00",cvzqio:"92.00","37mwao":"93.00",gt301s:"94.00","6yheyo":"95.00","8wekn4":"96.00","1op4ow":"97.00",edojy8:"98.00","5s1534":"99.00",bgstfk:"100.00"};function Me(e){var t=document.createElement("img");t.src=e,t.width=1,t.height=1,t.setAttribute("style","position: absolute; top: -1px; left: -1px; width:0; height:0; visibility:hidden;"),document.body.appendChild(t)}var Ue=[];function Fe(e,t,n){if(-1===Ue.indexOf(t)){Ue.push(t);var o=document.createElement("script");return o.src=e,o.async=!0,o.onload=function(){return performance.mark("ads:".concat(t,"_loaded"))},o.onerror=n,document.body.appendChild(o),document.body.setAttribute("data-".concat(t,"-loaded"),"true"),o}}function Ge(e){return new Promise((function(t,n){var o=new XMLHttpRequest;o.addEventListener("load",(function(e){try{t(JSON.parse(o.response))}catch(e){n()}})),o.addEventListener("error",(function(e){n()})),o.open("GET",e),o.send()}))}var Ve={country:void 0,region:void 0};function He(e){e=e||function(){};var t,n,o={};try{o=JSON.parse(localStorage.getItem("adsgeo2"))||{},Ve=o}catch(e){}if(!1==(t=o.lastUpdated,n=Date.now()-new Date(t).valueOf(),!!isNaN(n)||n/1e3/60/60/24>14))return e();Object.keys(o).length>0&&(d("Ads: updating your geodata in the background"),e()),Ge("/api/user_country/").then((function(t){t.lastUpdated=new Date,Ve={country:t.country,region:t.region,is_gdpr:t.is_gdpr,speed:t.speed},e(),localStorage.setItem("adsgeo2",JSON.stringify(Ve)),d("Updated geodata"),x.mark("ads:synced_new_geodata")})).catch(e)}function Ke(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50;x.mark("ads:geodata_start");var t=!1;return new Promise((function(n,o){He((function(){t=!0,d("Ads: Geodata is ready üåé"),x.mark("ads:geodata_ready"),n()})),setTimeout((function(){t||(d("Ads: Geodata lookup timed out üåé"),n())}),e)})).then((function(){x.mark("ads:geodata_done"),x.measure("ads:geodata_delay","ads:geodata_start","ads:geodata_done")}))}function We(){return Ve}var Ye=[],Je=window.IntersectionObserver?new window.IntersectionObserver((function(e){e.forEach((function(e){Qe.getById(e.target.id).inView=e.isIntersecting}))})):{observe:function(){},unobserve:function(){}},Qe=function(){function e(t){v(this,e),d("Registerd an gpt-ad element",t),this.element=t,Je.observe(this.element),this.inView=!1,this.data=H(t),this.element.inspect=function(){return e.getById(this.id)},this.called=!1,this.loaded=!1,this.size=null,this.gptSlot=null,this.isResponsive=null,this.stalls=0,this.startTime=null,this.loadtime=null,this.batch=0,this.memoryAtLoad=null,this.delayAtLoad=null,this.advertiserId=null,this.lineItemId=null,this.creativeId=null,this.campaignId=null,this.hadViewableImpression=null,this.googleQueryId=null,this.tasks=[],this._recordedTargeting={}}return w(e,[{key:"getLazySetting",value:function(){var e=P().lazy_load;return this.element.hasAttribute("lazy-load")?parseFloat(this.element.getAttribute("lazy-load")):e||0}},{key:"getAdUnitPath",value:function(){return P().zone+"/"+this.data.format}},{key:"createGptSlot",value:function(){var e=this.getAdUnitPath();this.gptSlot||(this.gptSlot=function(e,t){var n=e.data,o=e.gptSlot;for(var i in o||(o=googletag.defineSlot(t,[0,0],n.id).addService(googletag.pubads()),d("Created slot for ad: "+n.id)),e.data.targeting.slotname=e.getSlotName(),n.targeting)o.setTargeting(i,n.targeting[i]);var r=googletag.sizeMapping();return n.breakpoints.forEach((function(e){r.addSize(e.viewport,e.sizes)})),o.defineSizeMapping(r.build()),googletag.display(e.id),o}(this,e))}},{key:"isDeferred",value:function(){return this.element.hasAttribute("defer")}},{key:"setCalled",value:function(){this.called=!0,this.element.classList.add("ad-called"),this.startTime=x.now()}},{key:"isTaskQueueComplete",value:function(){return 0===this.tasks.filter((function(e){return!e.isComplete})).length}},{key:"getActiveSizes",value:function(){return(e=this.data.breakpoints.sort((function(e){return e.viewport[0]})).filter((function(e){return matchMedia("(min-width: "+e.viewport[0]+"px)").matches})))[e.length-1].sizes;var e}},{key:"getActiveBreakpoint",value:function(){return this.data.breakpoints.map((function(e){return e.viewport[0]})).sort((function(e,t){return t-e})).filter((function(e){return matchMedia("(min-width: ".concat(e,"px)")).matches}))[0]}},{key:"getSlotName",value:function(){if(this._slotName)return this._slotName;var e=We().country;e=e?"USA"===e?"us":"non-us":"unknown";var t=Z(),n=this.data.format;return this._slotName="".concat(t,"_").concat(n,"_").concat(e),this._slotName}},{key:"getTargetingMap",value:function(){var e=this,t={};return this.gptSlot.getTargetingKeys().forEach((function(n){return t[n]=e.gptSlot.getTargeting(n)})),t}},{key:"getMaxBid",value:function(){var e,t=this.gptSlot.getTargeting("hb_pb")[0],n=this.getAmazonBids();for(var o in n){var i=parseFloat(n[o]);(!e||i>e)&&(e=i)}return t&&(!e||parseFloat(t)>e)?parseFloat(t).toFixed(2):e?e.toFixed(2):void 0}},{key:"getAmazonBids",value:function(){var e=this.getTargetingMap(),t={};return(e.amznbid||[]).length&&e.amznbid.forEach((function(n,o){if(1!=n&&2!=n&&0!=n){var i=e.amznp[o],r=Ae[i]||"tam_unmapped_".concat(i),a=De[n];void 0!==a?t[r]=a:console.warn("A9 returned a bid that does not map to a real value")}})),t}},{key:"getBids",value:function(){var e=this.getTargetingMap(),t={};Object.keys(this.getTargetingMap()).filter((function(e){return 0===e.indexOf("hb_pb_")})).forEach((function(n){var o=parseFloat(e[n][0]);o>0&&!isNaN(o)&&(t[n.replace("hb_pb_","prebid_")]=e[n][0])}));var n=this.getAmazonBids();return t=_({},t,n)}},{key:"getBidders",value:function(){return Object.keys(this.getBids())}},{key:"recordTargeting",value:function(){this._recordedTargeting=_({},this.getTargetingMap())}},{key:"getRecordedTargeting",value:function(){return this._recordedTargeting||{}}},{key:"unregister",value:function(){Ye.splice(Ye.indexOf(this),1),this.element.removeAttribute("id")}},{key:"reset",value:function(){var e;d("Resetting ad",e=this),e.element.classList.remove("ad-called"),e.element.className=e.element.className.split(" ").filter((function(e){return 0!==e.indexOf("ad-loaded")})).join(" "),e.element.removeAttribute("id"),e.element.removeAttribute("data-google-query-id"),e.called=!1,e.isResponsive=null,e.size=null,e.hadViewableImpression=null,e.loaded=!1,e.tasks=[],Je.unobserve(e.element),X.push((function(){googletag.pubads().clear([e.gptSlot])}))}},{key:"setTabIndex",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"-1";if(this.element){var t=this.element.getAttribute("tabindex");(null==t||null==h(t)||isNaN(t))&&this.element.setAttribute("tabindex",e)}}},{key:"id",get:function(){return this.element.id}}],[{key:"all",value:function(){return Ye}},{key:"clear",value:function(){G=0,Ye.map((function(e){return e.reset()})),Ye.length=0}},{key:"getById",value:function(e){return Ye.filter((function(t){return t.element.id===e}))[0]}}]),e}(),Xe=function(){function e(t){v(this,e),this.name=t,this.isComplete=!1}return w(e,[{key:"done",value:function(){this.isComplete=!0}}]),e}();function Ze(){var e=Qe.all().map((function(e){return e.id})),t=p(document.getElementsByTagName("gpt-ad")).filter((function(t){return!t.id||-1===e.indexOf(t.id)})).map((function(e){return new Qe(e)}));t.length&&d("Found ".concat(t.length," <gpt-ad> elements")),t.forEach((function(e){Ye.push(e)}))}function $e(e){var t=this.constructor;return this.then((function(n){return t.resolve(e()).then((function(){return n}))}),(function(n){return t.resolve(e()).then((function(){return t.reject(n)}))}))}X.push((function(){d("Bind slotRenderEnded handler"),googletag.pubads().addEventListener("slotRenderEnded",(function(e){d("slotRenderEnded",e);var t=Qe.getById(e.slot.getSlotElementId());if(t){if(e.isEmpty)return d("Ad loaded empty: ".concat(t.id," üì≠")),t.element.classList.add("is-empty"),void f("ad-empty",t.element);if(t.size=e.size,t.advertiserId=e.advertiserId,t.lineItemId=e.lineItemId,t.creativeId=e.creativeId,t.campaignId=e.campaignId,t.hadViewableImpression=!1,t.googleQueryId=t.element.getAttribute("data-google-query-id"),-1!==e.slot.getHtml().indexOf('<meta name="atlads" content="block-unit">'))return d("Ad loaded suppressed ".concat(t.id," üôÖ‚Äç‚ôÇÔ∏è")),t.element.classList.add("is-empty"),t.element.classList.add("is-empty--suppressed"),t.element.style.display="none",void f("ad-empty",t.element);t.loaded=!0,u(t.size,g.native)||u(t.size,g.custom)||u(t.size,g.responsive)||u(t.size,g.cineflex)||u(t.size,g.house)?t.setTabIndex(0):t.setTabIndex(-1),d("Ad loaded successfully: ".concat(t.id," as a ").concat(t.size.join("x")," üé£"));var n=t.element.className.split(" ").filter((function(e){return 0!==e.indexOf("ad-loaded")}));n.push("ad-loaded");var o,i=a[t.size.join("x")]||"standard";n.push("ad-loaded--".concat(i)),t.element.className=n.join(" "),f("ad-loaded",t.element),o=t.id,p(document.querySelectorAll("[data-enable-if-ad="+o+"]")).forEach((function(e){e.style.display="block",e.style.visibility="visible",console.warn("[data-enable-if-ad] is deprecated. Please remove it from..."),console.warn(e)}));var r="none"===getComputedStyle(t.element).display||null===t.offsetParent,s=null!==!t.parentElement,c=t.element.classList.contains("ad-hidden");r&&s&&!c&&console.error(l("\n        DANGER ‚ò¢Ô∏è! DANGER ‚ò¢Ô∏è!\n\n        The ad with the id of ".concat(t.id," has loaded with a display\n        style of none. This is never allowed to happen. If an\n        ad loads, it must be visible.\n      "))),u(t.size,g.responsive)?t.isResponsive=!0:t.isResponsive=!1}}))})),X.push((function(e){d("Bind impressionViewable handler"),googletag.pubads().addEventListener("impressionViewable",(function(e){var t=Qe.getById(e.slot.getSlotElementId());t&&(t.hadViewableImpression=!0,f("viewable-impression",t.element),d("Viewable impression for ".concat(t.id," üëÄ")))}))}));var et=setTimeout;function tt(e){return Boolean(e&&void 0!==e.length)}function nt(){}function ot(e){if(!(this instanceof ot))throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],ct(e,this)}function it(e,t){for(;3===e._state;)e=e._value;0!==e._state?(e._handled=!0,ot._immediateFn((function(){var n=1===e._state?t.onFulfilled:t.onRejected;if(null!==n){var o;try{o=n(e._value)}catch(e){return void at(t.promise,e)}rt(t.promise,o)}else(1===e._state?rt:at)(t.promise,e._value)}))):e._deferreds.push(t)}function rt(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var n=t.then;if(t instanceof ot)return e._state=3,e._value=t,void st(e);if("function"==typeof n)return void ct((o=n,i=t,function(){o.apply(i,arguments)}),e)}e._state=1,e._value=t,st(e)}catch(t){at(e,t)}var o,i}function at(e,t){e._state=2,e._value=t,st(e)}function st(e){2===e._state&&0===e._deferreds.length&&ot._immediateFn((function(){e._handled||ot._unhandledRejectionFn(e._value)}));for(var t=0,n=e._deferreds.length;t<n;t++)it(e,e._deferreds[t]);e._deferreds=null}function dt(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}function ct(e,t){var n=!1;try{e((function(e){n||(n=!0,rt(t,e))}),(function(e){n||(n=!0,at(t,e))}))}catch(e){if(n)return;n=!0,at(t,e)}}ot.prototype.catch=function(e){return this.then(null,e)},ot.prototype.then=function(e,t){var n=new this.constructor(nt);return it(this,new dt(e,t,n)),n},ot.prototype.finally=$e,ot.all=function(e){return new ot((function(t,n){if(!tt(e))return n(new TypeError("Promise.all accepts an array"));var o=Array.prototype.slice.call(e);if(0===o.length)return t([]);var i=o.length;function r(e,a){try{if(a&&("object"==typeof a||"function"==typeof a)){var s=a.then;if("function"==typeof s)return void s.call(a,(function(t){r(e,t)}),n)}o[e]=a,0==--i&&t(o)}catch(e){n(e)}}for(var a=0;a<o.length;a++)r(a,o[a])}))},ot.resolve=function(e){return e&&"object"==typeof e&&e.constructor===ot?e:new ot((function(t){t(e)}))},ot.reject=function(e){return new ot((function(t,n){n(e)}))},ot.race=function(e){return new ot((function(t,n){if(!tt(e))return n(new TypeError("Promise.race accepts an array"));for(var o=0,i=e.length;o<i;o++)ot.resolve(e[o]).then(t,n)}))},ot._immediateFn="function"==typeof setImmediate&&function(e){setImmediate(e)}||function(e){et(e,0)},ot._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)};var ut=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("unable to locate global object")}();"Promise"in ut?ut.Promise.prototype.finally||(ut.Promise.prototype.finally=$e):ut.Promise=ot;var lt=0;function ft(){if(!T("adfree_audience")){var e=1e13*Math.random();Me("https://pubads.g.doubleclick.net/activity;dc_iu=/4624/DFPAudiencePixel;ord=".concat(e,";dc_seg=468357871?")),E("adfree_audience","1",30)}}function pt(){return!!T("scroll0")}function gt(e){var t=[];for(var n in e)void 0!==e[n]&&t.push("".concat(n,"=").concat(encodeURIComponent(e[n])));return t.join("&")}function mt(){var e=[];for(var t in U){var n=U[t];"function"==typeof n&&(n=n()),!1!==n&&e.push("".concat(t,":").concat(n))}return e.join(",")}var ht=localStorage.getItem("bidStore2"),vt=[];if(ht)try{vt=JSON.parse(ht)}catch(e){d("Couldn't parse bidStore: ",vt)}window.addEventListener("unload",(function(){try{localStorage.setItem("bidStore2",JSON.stringify(vt)),function(){try{localStorage.removeItem("bidStore")}catch(e){}}()}catch(e){console.warn(e),console.warn("Local storage error. Bid history not saved.")}}));var bt={getLog:function(){return vt},addBid:function(e){d("Remembering bid for ".concat(e)),vt.unshift(e),vt.length=vt.length<20?vt.length:20},getBids:function(){return vt.join(",")}},wt=null,_t=!0,yt=!0,kt=Z(),xt=["grapeshot_segments","abt","experiment"],jt=["slotName"];function zt(){var e,t,n,o,i,r=null===(e=x.getEntriesByName("ads:controller_to_first_ad")[0])||void 0===e?void 0:e.duration,a=null===(t=x.getEntriesByName("ads:controller_to_first_ad_with_tasks")[0])||void 0===t?void 0:t.duration,s=null===(n=x.getEntries()[0])||void 0===n?void 0:n.domContentLoadedEventEnd,d=(null===(o=x.getEntriesByName("ads:first_ad")[0])||void 0===o?void 0:o.startTime)-s,u=(null===(i=x.getEntriesByName("ads:first_ad_with_tasks")[0])||void 0===i?void 0:i.startTime)-s;c({TimeToFirstAd:{fromControllerReady:r,fromDomContentLoaded:d},TimeToFirstAdWithTasks:{fromControllerReady:a,fromDomContentLoaded:u}})}function St(e){var t=P(),n=t.perfUrl,i=t.globals,r=t.appname,a=x.now();if(e.loadtime=a-e.startTime,(_t||yt)&&(e.loadtime=a-wt),e.loadtime=Math.round(e.loadtime),_t&&(x.mark("ads:first_ad"),x.measure("ads:dfp_roundtrip","ads:first_call","ads:first_ad"),x.measure("ads:controller_to_first_ad","ads:controller_loaded","ads:first_ad"),zt()),yt&&e.tasks.length&&(x.mark("ads:first_ad_with_tasks"),x.measure("ads:controller_to_first_ad_with_tasks","ads:controller_loaded","ads:first_ad_with_tasks"),zt()),n){var s=e.getBids(),d={init:wt,isfirst:_t,isFirstWithTasks:yt,time:e.loadtime,device:kt,advId:e.advertiserId,crId:e.creativeId,cmpId:e.campaignId,LnId:e.lineItemId,zone:e.gptSlot.getAdUnitPath(),url:location.href,pageviewid:o,size:e.size.join("x"),eligibleSizes:function(e){return e.getActiveSizes().map((function(e){return e.join("x")})).join(",")}(e),batch:e.batch,experiments:mt(),stalls:e.stalls,memoryAtLoad:e.memoryAtLoad,delayAtLoad:e.delayAtLoad,pos:(e.data.targeting.pos||[]).join(","),class:e.data.format,bidcount:Object.keys(s).length,donotsell:je()?1:0,previousBids:bt.getBids(),template:i.template,pageviewnum:lt,appname:r};for(var c in s)d["bid:".concat(c)]=s[c],bt.addBid(s[c]);var u=function(e,t){var n=Object.keys(e).filter((function(n){return t(n,e[n])})),o={};return n.forEach((function(t){return o[t]=e[t]})),o}(i,(function(e){return-1!==xt.indexOf(e)}));d=_({},u,d),jt.forEach((function(t){var n=e.gptSlot.getTargeting(t);t.length&&(d["kv_".concat(t)]=n)}));var l=gt(d);Me("".concat(n,"?").concat(l,"&").concat(function(e){var t=[];return Object.keys(e).forEach((function(n){var o=e[n];Array.isArray(o)||(o=[].concat(o)),t.push("kv_".concat(n,"_items=").concat(o.length,"&kv_").concat(n,"_length=").concat(o.join("").length))})),t.join("&")}(i))),_t=!1,e.tasks.length&&(yt=!1)}}function It(e){var t=e.addEventListener,n=["scroll","dommousescroll","mousewheel","wheel","touchmove","touchstart","mousemove"];e.EventTarget.prototype.addEventListener=function(e){var o=Array.prototype.slice.call(arguments);e=e.toLowerCase();var i=o[2]&&o[2].passive;if(!i&&n.indexOf(e)>-1){var r="object"===h(o[2])?o[2]:{};"boolean"==typeof o[2]&&(r.useCapture=o[2]),r.passive=!0,o[2]=r}t.apply(this,o)}}function At(e){(window.dataLayer=window.dataLayer||[],window.dataLayer).push({ad_creatives:"".concat(e.lineItemId,"/").concat(e.creativeId)})}var Et=0;function Tt(){var e=performance.getEntriesByType("measure").filter((function(e){return e.name.startsWith("ads:")}));if(e.length!==Et){Et=e.length;var t={};e.forEach((function(e){t[e.name]=e.duration})),console.debug(t)}}function Ct(e,t){e[t]?e[t]++:e[t]=1}function qt(){var e=Qe.all().filter((function(e){return e.loaded&&e.getActiveSizes().length})),t={version:2,type:"endstate",date:new Date,time_from_pageload:x.now(),ua:window.navigator.userAgent,pageViewUuid:o,experiments:mt(),abt:M(),adsOnPage:e.length,adsCalled:e.filter((function(e){return e.called})).length,adsLoaded:e.filter((function(e){return e.loaded})).length,country:We().country};t=_(t,function(e){var t={};return e.map((function(e){var n=e.getBidders();n.length?Ct(t,"adsWithBids"):Ct(t,"adsWithoutBids"),n.map((function(n){var o="lostBids:".concat(n);e.loaded?o="completedBids:".concat(n):e.called&&(o="calledNotLoadedBids:".concat(n)),Ct(t,o)}))})),t}(e)),r.endstate&&(d("üëã debug=endstate logged the end state 5s after you enter the page."),d(t));var n=gt(t);navigator.sendBeacon("".concat("https://data-cdn.theatlantic.com/ads.gif","?").concat(n))}var Pt="".concat(window.location.protocol,"//").concat(window.location.host,"/static/advertising/bookmarklet.js");var Ot={};var Bt,Nt=["728x90","970x250","300x600","300x250","320x50"],Rt=[],Lt=0;function Dt(e){var t=Ot.disableAdRefresh;return!!t&&(-1!==t.line_items.indexOf(e.lineItemId)?(d("üé© Line item ".concat(e.lineItemId," is a sponsorship")),!0):-1!==t.orders.indexOf(e.campaignId)&&(d("üé© Order ".concat(e.campaignId," is a sponsorship")),!0))}function Mt(e){var t=!!e.creativeId,n=p(e.element.attributes).filter((function(e){return-1!==e.name.indexOf("sizes-at-")})).length>0;return e.loaded&&e.hadViewableImpression&&t&&function(e){return e.size&&-1!==Nt.indexOf(e.size.join("x"))}(e)&&!Dt(e)&&n}function Ut(){"hidden"!==document.visibilityState&&(document.getElementById("adops-dashboard")||Rt.length&&Rt.filter((function(e){return e.inView})).forEach((function(e){if(Lt>=3)return d("Refreshing ads stopped. We've reached the maximum ".concat(3," ads per pageview.")),void clearInterval(Bt);d("‚åõÔ∏è We will refresh ".concat(e.id,"!")),Rt.splice(Rt.indexOf(e),1),function(e){e.element.setAttribute("targeting-refresh","1");var t=e.getActiveBreakpoint();e.element.setAttribute("sizes-at-".concat(t),JSON.stringify([e.size]));var n=e.element.style.height;e.element.style.height="".concat(e.element.getBoundingClientRect().height,"px"),e.element.addEventListener("ad-loaded",(function(t){e.element.style.height=n}),{once:!0}),e.unregister()}(e),Lt++})))}var Ft="https://static.scroll.com/js/scroll.js";var Gt={referrers:function(){document.referrer&&document.referrer.split("/")[2]!==window.location.hostname&&!sessionStorage.referrer&&(sessionStorage.referrer=document.referrer.split("/")[2]),sessionStorage.referrer&&B({referrer:sessionStorage.referrer})},gptDomainOverride:function(){var e=P(),t=e.zone,n=e.adtest_domain,o=t.split("/"),r=parseInt(i.adtest,10),a=r+"";isNaN(r)||(1===r&&(a=""),o[2]="".concat(n).concat(a));var s=i["gpt-domain"];s&&(o[2]=s),q({zone:o.join("/")})},utmSource:function(){i.utm_source&&B({utm_source:i.utm_source})},timing:function(){wt=Math.round(x.now()),P().perfUrl&&void 0!==x.now()&&window.addEventListener("ad-loaded",(function(e){St(Qe.getById(e.target.id))}))},patchEventHandlers:function(){P().patchEventHandlers&&function(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("test",null,t)}catch(e){}return e}()&&(It(window),X.push((function(){googletag.pubads().addEventListener("slotRenderEnded",(function(e){for(var t=e.slot.getSlotElementId(),n=document.getElementById(t).querySelectorAll("iframe"),o=0;o<n.length;o++)It(n[o].contentWindow)}))})))},setRandomValue:function(){var e=O().experiment;B({abt:M(),sync:(void 0===D&&(D=R(1,100)),D),experiment:e||"null"})},doubleVerifyReady:function(){var e=!1,t=P().datePublished;if(t){var n=new Date(t).getTime();e=((new Date).getTime()-n)/1e3/60/60>1}B({dv_ready:e?"yes":"no"})},keyValueOverride:function(){Object.keys(i).filter((function(e){return 0===e.indexOf("adkv_")})).forEach((function(e){var t={};t[e.replace("adkv_","")]=i[e].split(","),B(t)}))},blueconic:function(){var e=localStorage.getItem("dfp_blueconic_targeting");e&&B({bc_segments:e.split(",")}),window.addEventListener("ad-loaded",(function(e){At(Qe.getById(e.target.id))}))},pageMeta:function(e){e||(e=((window.Atlantic||{}).page_meta||{}).adtargeting),e&&B(e)},sessionDepth:function(){sessionStorage.sessionDepth?sessionStorage.sessionDepth=Number(sessionStorage.sessionDepth)+1:sessionStorage.sessionDepth=1,B({session_depth:sessionStorage.sessionDepth})},measurementHelpers:function(){r.adperf&&(window.addEventListener("ad-loaded",Tt),window.addEventListener("ad-empty",Tt))},logEndState:function(){window.navigator.sendBeacon&&(r.endstate&&setTimeout((function(){qt()}),5e3),window.addEventListener("unload",qt,!1))},loadBookmarklet:function(){var e=function(){"#badad"===window.location.hash&&Fe(Pt,"bookmarklet")};e(),window.onhashchange=e},user:function(){var e;N().ad_free&&(d("üí• User has premium account. Targeting for house ads only and disabling header bidders."),e="adfree",C.globals.user||(C.globals.user=[]),C.globals.user.push(e),q({prebid:null,amazon:null}))},privacy:function(){-1===window.location.origin.indexOf("citylab.com")&&(B({ccpa:je()}),function(){if(je()){window.Krux||((window.Krux=function(){window.Krux.q.push(arguments)}).q=[]);window.Krux("ns:atlantic","consent:set",{idt:"device",dt:"kxcookie",dc:!0,al:!0,tg:!0,cd:!0,sh:!0,re:!1})}}(),d("__uspapi created for communicating CCPA state."),window.__uspapi=function(e,t,n){if("getUSPData"===e)if((new Date).getFullYear()<2020&&!r.donotsell)n(null);else{var o=1,i="-",a="-",s="-";("CA"===We().region||je())&&(i="Y",a=je()?"Y":"N",s="Y"),n({version:o,uspString:[o,i,a,s].join("")},!0)}else console.error("üôâ __uspapi Command wasn't getUSPData. No other commands are supported.")})},templates:function(){var e=O(),t=e.template_raw||"unknown";window.next&&window.next.router&&window.next.router.route&&(t="next: ".concat(window.next.router.route)),B({template:e.template||"other_unassigned",template_raw:t})},setupRefresh:function(){!1!==P().refresh&&(window.addEventListener("viewable-impression",(function(e){var t=Qe.getById(e.target.id);Mt(t)&&(Lt<3&&d("‚è≥ We can refresh ".concat(t.id," in ").concat(30,"s")),setTimeout((function(){Rt.push(t)}),3e4))})),Bt=setInterval(Ut,5e3))},scroll:function(){document.querySelector("script[src='".concat(Ft,"']"))||(!function(e,t,n,o){if(!e[t]){var i=e[t]={};i._q=[],i.do=function(e){i._q.push(e)}}}(window,"Scroll"),window.Scroll.config={orientation:"bottom",detected:!!T("scroll0")},Fe(Ft))}};function Vt(e){return function(){try{e()}catch(e){console.error(e)}}}var Ht="desktop"===Z()?2250:3e3,Kt=["300x250","320x50","728x90","300x600","970x250","1x3"],Wt={buckets:[{precision:2,min:0,max:2,increment:.02},{precision:2,min:2,max:10,increment:.05},{precision:2,min:10,max:25,increment:.25},{precision:2,min:25,max:50,increment:.5},{precision:2,min:50,max:100,increment:1}]};var Yt={};function Jt(e){if(Yt[e.id])return Yt[e.id];var t="".concat(e.getSlotName(),"/").concat(e.id);return Yt[e.id]=t,t}function Qt(e){var t;for(var n in Yt)if(Yt[n]===e){t=Qe.getById(n);break}return void 0===t&&console.error('üö® No ad matching Prebid code "'.concat(e,'".\n      Something is very wrong. üö®')),t}var Xt={mobile_injector_us:1230211,"mobile_injector_non-us":1407710,mobile_rrail_us:1407713,"mobile_rrail_non-us":1407711,mobile_adhesion_us:1230205,"mobile_adhesion_non-us":1407712,tablet_injector_us:1230330,"tablet_injector_non-us":1407707,tablet_rrail_us:1230328,"tablet_rrail_non-us":1407708,tablet_adhesion_us:1230326,"tablet_adhesion_non-us":1407709,desktop_injector_us:1230203,"desktop_injector_non-us":1407706,desktop_rrail_us:1444602,"desktop_rrail_non-us":1407705,desktop_adhesion_us:1230200,"desktop_adhesion_non-us":1407704,desktop_injector_unknown:1444603,desktop_rrail_unknown:1444601,desktop_adhesion_unknown:1444605,mobile_injector_unknown:1444609,mobile_rrail_unknown:1444608,mobile_adhesion_unknown:1444607,tablet_injector_unknown:1444604,tablet_rrail_unknown:1444600,tablet_adhesion_unknown:1444606};var Zt={mobile_injector_us:417250,"mobile_injector_non-us":417251,mobile_rrail_us:417252,"mobile_rrail_non-us":417253,mobile_adhesion_us:417254,"mobile_adhesion_non-us":417255,tablet_injector_us:417256,"tablet_injector_non-us":417257,tablet_rrail_us:417258,"tablet_rrail_non-us":417259,tablet_adhesion_us:417260,"tablet_adhesion_non-us":417261,desktop_injector_us:417262,"desktop_injector_non-us":417263,desktop_rrail_us:417264,"desktop_rrail_non-us":417265,desktop_adhesion_us:417266,"desktop_adhesion_non-us":417267,desktop_injector_unknown:417268,desktop_rrail_unknown:417269,desktop_adhesion_unknown:417270,mobile_injector_unknown:417271,mobile_rrail_unknown:417272,mobile_adhesion_unknown:417273,tablet_injector_unknown:417274,tablet_rrail_unknown:417275,tablet_adhesion_unknown:417276};var $t={"desktop_adhesion_non-us":1417850,desktop_adhesion_unknown:1417858,desktop_adhesion_us:1417848,"desktop_injector_non-us":1417842,desktop_injector_unknown:1417852,desktop_injector_us:1417840,"desktop_rrail_non-us":1417846,desktop_rrail_unknown:1417854,desktop_rrail_us:1417844,"mobile_adhesion_non-us":1417826,mobile_adhesion_unknown:1417866,mobile_adhesion_us:1417824,"mobile_injector_non-us":1417816,mobile_injector_unknown:1417860,mobile_injector_us:1417814,"mobile_rrail_non-us":1417822,mobile_rrail_unknown:1417862,mobile_rrail_us:1417818,"tablet_adhesion_non-us":1417838,tablet_adhesion_unknown:1417874,tablet_adhesion_us:1417836,"tablet_injector_non-us":1417830,tablet_injector_unknown:1417870,tablet_injector_us:1417828,"tablet_rrail_non-us":1417834,tablet_rrail_unknown:1417872,tablet_rrail_us:1417832};var en={"desktop_adhesion_non-us":"2472060",desktop_adhesion_unknown:"2472061",desktop_adhesion_us:"2472062","desktop_injector_non-us":"2472063",desktop_injector_unknown:"2472064",desktop_injector_us:"2472065","desktop_rrail_non-us":"2472066",desktop_rrail_unknown:"2472067",desktop_rrail_us:"2472068","mobile_adhesion_non-us":"2472069",mobile_adhesion_unknown:"2472070",mobile_adhesion_us:"2472071","mobile_injector_non-us":"2472072",mobile_injector_unknown:"2472073",mobile_injector_us:"2472074","mobile_rrail_non-us":"2472075",mobile_rrail_unknown:"2472076",mobile_rrail_us:"2472077","tablet_adhesion_non-us":"2472078",tablet_adhesion_unknown:"2472079",tablet_adhesion_us:"2472080","tablet_injector_non-us":"2472081",tablet_injector_unknown:"2472082",tablet_injector_us:"2472083","tablet_rrail_non-us":"2472084",tablet_rrail_unknown:"2472085",tablet_rrail_us:"2472086"};var tn=[],nn=1;function on(e){U.disableAppnexus()?d("üî¨Disabled Appnexus for experiment"):function(e){var t=13395560;"mobile"!==Z()&&(t=13395544);var n={"desktop_adhesion_non-us":16889974,"desktop_injector_non-us":16889968,"desktop_rrail_non-us":16889972,"desktop_unknown_non-us":17396299,"mobile_adhesion_non-us":16889956,"mobile_injector_non-us":16889950,"mobile_rrail_non-us":16889953,"mobile_unknown_non-us":17396301,"tablet_adhesion_non-us":16889962,"tablet_injector_non-us":16889958,"tablet_rrail_non-us":16889960,"tablet_unknown_non-us":17396300,desktop_adhesion_unknown:17396287,desktop_adhesion_us:16889973,desktop_injector_unknown:17396288,desktop_injector_us:16889967,desktop_rrail_unknown:17396289,desktop_rrail_us:16889970,desktop_unknown_unknown:17396302,desktop_unknown_us:17396296,mobile_adhesion_unknown:17396290,mobile_adhesion_us:16889954,mobile_injector_unknown:17396291,mobile_injector_us:16889949,mobile_rrail_unknown:17396292,mobile_rrail_us:16889951,mobile_unknown_unknown:17396304,mobile_unknown_us:17396298,tablet_adhesion_unknown:17396293,tablet_adhesion_us:16889961,tablet_injector_unknown:17396294,tablet_injector_us:16889957,tablet_rrail_unknown:17396295,tablet_rrail_us:16889959,tablet_unknown_unknown:17396303,tablet_unknown_us:17396297};n[e._slotName]&&(t=n[e._slotName]),e.bids.push({bidder:"appnexus",params:{placementId:t,member:7498}})}(e),U.disableIndex()?d("üî¨Disabled IX for experiment"):function(e){var t=Zt[e._slotName],n={"300x250":"274648","320x50":"274649"};"mobile"!==Z()&&(n={"300x250":"274644","300x600":"274645","728x90":"274646","970x250":"274647"});var o=e.mediaTypes.banner.sizes.filter((function(e){return void 0!==n[e.join("x")]}));0!==o.length&&o.forEach((function(n){e.bids.push({bidder:"ix",params:{siteId:t,size:n}})}))}(e),U.disableCriteo()?d("üî¨Disabled Criteo for experiment"):function(e){e.bids.push({bidder:"criteo",params:{zoneId:Xt[e._slotName],networkId:7221}})}(e),U.disableRubicon()?d("üî¨Disabled Rubicon for experiment"):function(e){var t=$t[e._slotName]||1093984;e.bids.push({bidder:"rubicon",params:{accountId:10540,siteId:202078,zoneId:t}})}(e),U.disableRubicon()?d("üî¨Disabled Pubmatic for experiment"):function(e){var t=en[e._slotName];e.bids.push({bidder:"pubmatic",params:{publisherId:"158802",adSlot:t}})}(e),U.disableTeads()?d("üî¨Disabled Teads for experiment"):function(e){e.bids.push({bidder:"teads",params:{placementId:125397,pageId:115526}})}(e)}function rn(e){var t=e.map((function(e){return function(e){var t=e.getActiveSizes().filter((function(e){return-1!==Kt.indexOf(e.join("x"))}));if(0!==t.length)return{code:Jt(e),mediaTypes:{banner:{sizes:t}},bids:[],_slotName:e.getSlotName(),_elementId:e.id}}(e)})).filter((function(e){return void 0!==e}));return t.forEach((function(e){return on(e)})),t.filter((function(e){return e.bids.length>0}))}function an(){var e={debug:r.prebid,bidderTimeout:1500,enableSendAllBids:!0,priceGranularity:Wt,userSync:{filterSettings:{iframe:{bidders:["pubmatic","rubicon","appnexus"],filter:"include"},image:{bidders:"*",filter:"include"}}},currency:{adServerCurrency:"USD",defaultRates:{USD:{CAD:1.3189669771,HKD:7.750042337,ISK:138.8653683319,PHP:48.5461473328,DKK:6.3018628281,HUF:309.6359017782,CZK:23.0592718036,GBP:.773319221,RON:4.1287891617,SEK:8.7895850974,IDR:14710.49957663,INR:73.5364098222,BRL:5.6038950042,RUB:77.9202370872,HRK:6.4204911092,JPY:105.6646909399,THB:31.299745978,CHF:.9080440305,EUR:.8467400508,MYR:4.150465707,BGN:1.6560541914,TRY:7.900169348,CNY:6.6823031329,NOK:9.2885690093,NZD:1.5246401355,ZAR:16.5321761219,USD:1,MXN:21.1951735817,SGD:1.3578323455,AUD:1.4226079594,ILS:3.3794242168,KRW:1140.0084674005,PLN:3.8788314987}}},floors:{data:{schema:{fields:["mediaType","size"]},values:{"*|*":.5},default:.5}}};ze()&&(e=function(e){return _({},e,{consentManagement:{gdpr:{cmpApi:"iab",defaultGdprScope:!0},timeout:500,allowAuctionWithoutConsent:!1}})}(e),d("üôà Prebid configured for GDPR"));var t=We(),n=t.country,o=t.region,i="USA"===n&&"CA"===o;return(je()||i)&&(e=function(e){return _({},e,{usp:{cmpApi:"iab",timeout:100}})}(e),d("üôà Prebid configured for US privacy")),nn>1&&(d("Prebid using a higher timeout for batch ".concat(nn)),e.bidderTimeout=Ht),e}function sn(){var e=ee().filter((function(e){return-1===tn.indexOf(e.id)})).filter((function(e){var t=e.getLazySetting();return 0===t||(t+=.5,nn>1&&(t+=1),te(e.element,t))}));if(e.length){e.forEach((function(e){return tn.push(e.id)}));var t=rn(e);window.pbjs.addAdUnits(t),(e=e.filter((function(e){return t.filter((function(t){return t._elementId===e.id})).length}))).map((function(e){return d("".concat(e.data.id," in Prebid bidding batch ").concat(nn))})),nn>1&&window.pbjs.setConfig(an());var n=new Xe("prebid");e.forEach((function(e){return e.tasks.push(n)}));var o=t.map((function(e){return e.code}));d("Prebid requesting bids for ".concat(o.join(", ")," üõ∏"));var i="ads:prebid-lazybid-start:".concat(o.join(",")),a="ads:prebid-lazybid-end:".concat(o.join(",")),s="ads:prebid-lazybid:".concat(o.join(","));x.mark(i),window.pbjs.bidderSettings={teads:{bidCpmAdjustment:function(e){return.75*e}}},window.pbjs.onEvent("bidTimeout",(function(t){e.forEach((function(e){var n=Jt(e),o=t.filter((function(e){return e.adUnitCode===n}));if(o.length){var i=e.gptSlot.getTargeting("timedout")||[];o.forEach((function(e){-1===i.indexOf(e.bidder)&&i.push(e.bidder)})),e.gptSlot.setTargeting("timedout",i)}}))})),window.pbjs.requestBids({adUnitCodes:o,bidsBackHandler:function(e,t){J.push((function(){d("Prebid assigning bids for : üëæ ",o,t?"Some bids timed out.":"Bids didn't time out.","bids : ",e),r.ads&&function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object.keys(e).length){var t=[],n=function(n){e[n].bids.map((function(e){t.push({adUnit:n,creativeId:e.creativeId,adId:e.adId,bidder:e.bidder,timeToRespond:e.timeToRespond,cpm:e.cpm,size:e.size,statusMessage:e.statusMessage})}))};for(var o in e)n(o);c(t)}}(e),window.pbjs.setTargetingForGPTAsync(o,(function(e){return function(t){var n=e.getSlotElementId();return Qt(t).id===n}})),n.done(),x.mark(a),x.measure(s,i,a)}))}}),nn++}}function dn(){return!!P().prebid&&(!U.disableAllPrebid()||(d("üî¨Disabled all of Prebid for experiment"),!1))}var cn=!1;var un={amazon:function(e){if(Ne={},je())return d("üôà TAM disabled per Do Not Sell request."),void e();var t=P().amazon;if(U.disableTAM())return d("üî¨Disabled TAM for experiment"),void e();t?(x.mark(Ce),function(e,t,n,o,i,r,a){function s(n,o){t[e]._Q.push([n,o])}t[e]||(t[e]={init:function(){s("i",arguments)},fetchBids:function(){s("f",arguments)},setDisplayBids:function(){},targetingKeys:function(){return[]},_Q:[]},(r=n.createElement(o)).async=!0,r.src="//c.amazon-adsystem.com/aax2/apstag.js",(a=n.getElementsByTagName(o)[0]).parentNode.insertBefore(r,a))}("apstag",window,document,"script"),window.apstag.init({pubID:t,adServer:"googletag"}),Q.push((function(){var e=ee().filter((function(e){return!Ne[e.id]})).filter(Le).filter((function(e){return function(e){var t=e.getLazySetting();return 0===t||(t+=.5,Ie>1&&(t+=1),te(e.element,t))}(e)}));e.length&&(!function(e){Ie++;var t=e.map((function(e){return e.id}));d("Amazon lazy bidding on",t);var n=!!Be;n&&x.mark(Pe),Be=!1;var o=new Xe("amazon");e.forEach((function(e){return e.tasks.push(o)})),window.setTimeout((function(){o.isComplete||(d("Amazon bids timed out (".concat(1500,"ms)"),t),e.forEach((function(e){if(t.includes(e.data.id)){var n=e.gptSlot.getTargeting("timedout")||[];n.push("amazon"),e.gptSlot.setTargeting("timedout",n)}})),o.done())}),1500);var i=e.map((function(e){return d("".concat(e.data.id," in Amazon bidding batch ").concat(Ie)),{slotID:e.element.id,slotName:e.getSlotName(),sizes:Re[e.id]}})),r=e.map((function(e){return e.element.id})),a="ads:amazon-lazybid-start:".concat(r.join(",")),s="ads:amazon-lazybid-end:".concat(r.join(",")),c="ads:amazon-lazybid:".concat(r.join(","));x.mark(a);var u={slots:i,timeout:1500};Ie>1&&(d("Amazon bids for batch ".concat(Ie," will use longer timeouts.")),u.timeout=Ee,"desktop"===Z()&&(u.timeout=Te)),window.apstag.fetchBids(u,(function(e){d("Received ".concat(e.length," Amazon bids"),t),x.mark(s),x.measure(c,a,s),d("Set Amazon bids to slots",t),window.apstag.setDisplayBids(),o.done(),J.push(de),n&&x.mark(Oe)}))}(e),e.forEach((function(e){return Ne[e.id]=!0})))})),x.mark(qe),e()):e()},prebid:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};if(!dn())return e();var t=P(),n=t.prebid;ze()&&(n=n.replace("/prebid.js","/prebid.cmp.js")),Fe(n,"Prebid.js",(function(){d("Could not load Prebid.js"),e()})),window.pbjs=window.pbjs||{},window.pbjs.que=window.pbjs.que||[],window.pbjs.que.push(Vt((function(){window.pbjs.setConfig(an()),sn(),Q.push(sn),e()})))},cleanCreatives:function(e){var t=P(),n=t.prebid,o=t.amazon,i=!(!n&&!o),a="desktop"===Z();if(r["disable-cleanio"]||cn||a)e();else if(cn=!0,i){d("Loading Clean Creatives");var s=Fe("https://dojx47ab4dyxi.cloudfront.net/script.js","clean-creatives");s.onload=e,s.onerror=e,setTimeout(e,5e3)}else e()},brandmetrics:function(e){Fe("https://cdn.brandmetrics.com/survey/script/558f587068db40e4aaca882e644a65b3.js"),e()},hattie:function(e){Ge("https://www.theatlantic.com/sponsored/config/").then((function(e){_(Ot,e)})).catch((function(e){console.warn("Could not reach Hattie",e)})).finally(e),setTimeout(e,500)}};function ln(){if(window.matchMedia&&void 0!==window.matchMedia("all").addListener){for(var e,t,n,o,i,r,a=(t=[],n=Qe.all().map((function(e){return e.data.breakpoints})),(e=n,e.reduce((function(e,t){return e.concat(t)}),[])).map((function(e){return e.viewport[0]})).forEach((function(e){-1===t.indexOf(e)&&t.push(e)})),t),s=function(e){if(e.matches){var t=Qe.all().filter((function(e){return e.called&&document.body.contains(e.element)&&!function(e){return!!e.size&&e.getActiveSizes().filter((function(t){return u(e.size,t)})).length>0}(e)}));t.length&&(d("Crosses breakpoint ".concat(e.media,", clearing ads: ").concat(t.map((function(e){return e.id})).join(", "))),t.forEach((function(e){return e.reset()})))}},c=[],l=0;l<a.length;l++)r="(min-width: "+a[l]+"px)",(o=a[l+1])&&(r+=" and (max-width: "+(o-1)+"px)"),(i=window.matchMedia(r)).addListener(s.bind(this)),c.push(i);d("Created Breakpoints for Ads:",c)}}function fn(e){var t=this;d("Created ads controller",this),d("Ad options set to",e),q(e),ze()&&window.__tcfapi?Promise.all([xe(),Ke()]).then((function(e){var n=e[0].ok;d("üåç GDPR consent ".concat(n?"was":"was not"," granted!")),n&&t.init()})):Ke().then(this.init.bind(this))}fn.prototype.loop,fn.prototype.init=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];for(var t in d("Init ad Controller with automatic polling ".concat(e?"enabled":"disabled",".")),x.mark("ads:controller_loaded"),Gt)Gt[t].call(this);if(pt())return ft(),void d("This is an adfree experience. üëã");Fe(s,"GPT");var n=function(e){e.call(o)};Y.execute(n),Y.setCallback(n),e&&Ze();var o=this;x.mark("ads:vendors_start");var i=Object.keys(un).map((function(e){x.mark("ads:start:".concat(e)),d("Ad vendor started: ".concat(e));var t=new Promise(un[e].bind(o));return t.then((function(){d("Ad vendor ready: ".concat(e)),x.mark("ads:complete:".concat(e)),x.measure("ads:measure:".concat(e),"ads:start:".concat(e),"ads:complete:".concat(e))})),t}));Promise.all(i).then((function(){d("Vendors loaded. Pushing to GPT cmd queue. üí®"),x.mark("ads:vendors_ready"),x.measure("ads:measure:vendors","ads:vendors_start","ads:vendors_ready"),X.push((function(){o.startGpt(),J.execute(n),J.setCallback(n),d("Started making ad calls üöÄ"),de(),o.loop=setInterval((function(){"hidden"!==document.visibilityState&&(e&&(Ze(),Qe.all().map((function(e){return e.createGptSlot()}))),de())}),250)}))}))},fn.prototype.setPageTargeting=function(){var e,t,n=O();for(e in n)void 0!==(t=n[e])&&(Array.isArray(t)?t=t.map((function(e){return e.toString()})):null!==t&&(t=t.toString()),googletag.pubads().setTargeting(e,t),d("Set global targeting: "+e+"="+t))},fn.prototype.startGpt=function(){this.setPageTargeting(),googletag.pubads().setPrivacySettings({restrictDataProcessing:je(),childDirectedTreatment:!1}),googletag.pubads().enableSingleRequest(),googletag.pubads().disableInitialLoad(),googletag.pubads().setSafeFrameConfig({sandbox:!0}),googletag.pubads().enableAsyncRendering(),googletag.pubads().collapseEmptyDivs(),googletag.pubads().setCentering(!0),googletag.enableServices(),d("Started GPT services"),Qe.all().map((function(e){return e.createGptSlot()})),function(){var e="outofpage";if(P().outofpage&&!ne){if(null===document.getElementById(e)){var t=document.createElement("div");t.id=e,document.body.appendChild(t)}ne=googletag.defineOutOfPageSlot(P().zone,e).addService(googletag.pubads()).setTargeting("pos",e),d("Created outofpage ad")}}(),ln()},fn.prototype.pause=function(){this.loop&&(d("Pausing ad loadings lifecycle, anticipating a new pageview"),clearInterval(this.loop))},fn.prototype.reset=function(e){window.navigator.sendBeacon&&qt(),C={globals:{user:[]}},this.loop&&clearInterval(this.loop),Qe.clear(),googletag.destroySlots(),googletag.pubads().clearTargeting(),googletag.pubads().clear(),tn=[],nn=1,window.pbjs&&window.pbjs.que.push((function(){window.pbjs.removeAdUnit()})),d("Ad options changed to",e),Lt=0,d("Resetting queues"),[Y,J,Q].forEach((function(e){return e.reset()})),L=void 0,D=void 0,q(e),this.init()},fn.prototype.getOptions=function(){return P()};var pn=fn;window.__ads=window.__ads||{};var gn,mn=window.__ads.pageview instanceof Array?window.__ads.pageview:[];window.__ads.pause=window.__ads.pause||[],window.__ads.pageview={push:function(e){if(gn)try{gn.reset(e)}catch(e){console.error("Hummingbird failure.",e)}else gn=new fn(e);lt++}},window.__ads.pause={push:function(){gn&&gn.pause()}},window.__ads.get=function(e){var t=e.id||e;return Qe.getById(t)},window.__ads.getGlobals=function(e){return O(e)},mn.forEach((function(e){return window.__ads.pageview.push(e)})),e.Controller=pn,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=ads.min.js.map
