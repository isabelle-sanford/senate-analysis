function ReferrerTracker(){}function handleDebugResponse(n,t,i){if(t&&t.isEnabled==!0&&t.callback){if(!i){var r=n.responseText;return t.callback(n.readyState,n.status,r),r}return t.callback(-1,-1,i.message),null}}ReferrerTracker.prototype.tryFindTopMostReferrer=function(){var n=window,t=null,i=!1;try{top.location.href&&(t=top.location.href)}catch(r){i=!0}if(i)for(;;)try{if(t=n.document.referrer,window.parent!=n)n=window.parent;else break}catch(r){break}return t};ReferrerTracker.prototype.send=function(n,t,i){var r=new XMLHttpRequest,u,e,f;try{if(u=this.tryFindTopMostReferrer(),u||(u=""),e='{ pie: "21", data: "'+u+'", params: "'+t+'" }',f=!i||i.isEnabled==!1,r.open("POST",n,f==!0),r.setRequestHeader("Content-type","application/json; charset=utf-8"),r.setRequestHeader("Content-length",e.length),r.setRequestHeader("Connection","close"),f==!0&&(r.onreadystatechange=function(){handleDebugResponse(r,i)}),r.send(e),f==!1)return handleDebugResponse(r,i)}catch(o){handleDebugResponse(r,i,o)}return null};