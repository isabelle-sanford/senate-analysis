!function(t){var i={};function e(s){if(i[s])return i[s].exports;var n=i[s]={i:s,l:!1,exports:{}};return t[s].call(n.exports,n,n.exports,e),n.l=!0,n.exports}e.m=t,e.c=i,e.d=function(t,i,s){e.o(t,i)||Object.defineProperty(t,i,{enumerable:!0,get:s})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"_",{value:!0})},e.t=function(t,i){if(1&i&&(t=e(t)),8&i)return t;if(4&i&&"object"==typeof t&&t&&t._)return t;var s=Object.create(null);if(e.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&i&&"string"!=typeof t)for(var n in t)e.d(s,n,function(i){return t[i]}.bind(null,n));return s},e.n=function(t){var i=t&&t._?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},e.p="",e(e.s=172)}([function(t,i,e){"use strict";var s,n,r=e(61),a=r.Reader,h=r.Writer,o=r.util,c=r.roots.default||(r.roots.default={});c.ProtoAdBreak=function(){function t(t){if(this.types=[],t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.types=o.emptyArray,t.prototype.maxAdPodDuration=0,t.prototype.maxAdSlotDuration=180,t.prototype.numberOfAdSlots=1,t.encode=function(t,i){if(i||(i=h.create()),null!=t.types&&t.types.length){i.uint32(10).fork();for(var e=0;e<t.types.length;++e)i.int32(t.types[e]);i.ldelim()}return null!=t.maxAdPodDuration&&t.hasOwnProperty("maxAdPodDuration")&&i.uint32(16).int32(t.maxAdPodDuration),null!=t.maxAdSlotDuration&&t.hasOwnProperty("maxAdSlotDuration")&&i.uint32(24).int32(t.maxAdSlotDuration),null!=t.numberOfAdSlots&&t.hasOwnProperty("numberOfAdSlots")&&i.uint32(32).int32(t.numberOfAdSlots),i},t.decode=function(t,i){t instanceof a||(t=a.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoAdBreak;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:if(s.types&&s.types.length||(s.types=[]),2==(7&n))for(var r=t.uint32()+t.pos;t.pos<r;)s.types.push(t.int32());else s.types.push(t.int32());break;case 2:s.maxAdPodDuration=t.int32();break;case 3:s.maxAdSlotDuration=t.int32();break;case 4:s.numberOfAdSlots=t.int32();break;default:t.skipType(7&n)}}return s},t.fromObject=function(t){if(t instanceof c.ProtoAdBreak)return t;var i=new c.ProtoAdBreak;if(t.types){if(!Array.isArray(t.types))throw TypeError(".ProtoAdBreak.types: array expected");i.types=[];for(var e=0;e<t.types.length;++e)switch(t.types[e]){default:case"None":case 0:i.types[e]=0;break;case"PreRoll":case 1:i.types[e]=1;break;case"MidRoll":case 2:i.types[e]=2;break;case"PostRoll":case 3:i.types[e]=3}}return null!=t.maxAdPodDuration&&(i.maxAdPodDuration=0|t.maxAdPodDuration),null!=t.maxAdSlotDuration&&(i.maxAdSlotDuration=0|t.maxAdSlotDuration),null!=t.numberOfAdSlots&&(i.numberOfAdSlots=0|t.numberOfAdSlots),i},t.toObject=function(t,i){i||(i={});var e={};if((i.arrays||i.defaults)&&(e.types=[]),i.defaults&&(e.maxAdPodDuration=0,e.maxAdSlotDuration=180,e.numberOfAdSlots=1),t.types&&t.types.length){e.types=[];for(var s=0;s<t.types.length;++s)e.types[s]=i.enums===String?c.ProtoAdBreakTypeEnum[t.types[s]]:t.types[s]}return null!=t.maxAdPodDuration&&t.hasOwnProperty("maxAdPodDuration")&&(e.maxAdPodDuration=t.maxAdPodDuration),null!=t.maxAdSlotDuration&&t.hasOwnProperty("maxAdSlotDuration")&&(e.maxAdSlotDuration=t.maxAdSlotDuration),null!=t.numberOfAdSlots&&t.hasOwnProperty("numberOfAdSlots")&&(e.numberOfAdSlots=t.numberOfAdSlots),e},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.ProtoPlayerPlaybackModeEnum=(s={},(n=Object.create(s))[s[0]="Autoplay"]=0,n[s[1]="ScrollToPlay"]=1,n[s[2]="ClickToPlay"]=2,n),c.ProtoPlayerCloseButtonMode=function(){var t={},i=Object.create(t);return i[t[0]="Off"]=0,i[t[1]="OnHover"]=1,i[t[2]="OnHoverAfterFirstAd"]=2,i[t[3]="AlwaysOn"]=3,i}(),c.ProtoPlayerFloatingMode=function(){var t={},i=Object.create(t);return i[t[0]="Off"]=0,i[t[1]="OnPageLoad"]=1,i[t[2]="AfterInView"]=2,i[t[3]="Always"]=3,i}(),c.ProtoPlayerSoundMode=function(){var t={},i=Object.create(t);return i[t[0]="Mute"]=0,i[t[1]="On"]=1,i[t[2]="Hover"]=2,i}(),c.ProtoPlayerInsertMode=function(){var t={},i=Object.create(t);return i[t[0]="WithinContainer"]=0,i[t[1]="BeforeContainer"]=1,i[t[2]="AfterContainer"]=2,i[t[3]="ReplaceContainer"]=3,i[t[4]="HideContainer"]=4,i}(),c.ProtoAdViewabilityPolicy=function(){var t={},i=Object.create(t);return i[t[0]="Default"]=0,i[t[1]="Strict"]=1,i}(),c.ProtoSharingDestination=function(){var t={},i=Object.create(t);return i[t[0]="Facebook"]=0,i[t[1]="Twitter"]=1,i[t[2]="LinkedIn"]=2,i}(),c.ProtoFloatingFixedPositionMode=function(){var t={},i=Object.create(t);return i[t[0]="Page"]=0,i[t[1]="Element"]=1,i}(),c.ProtoPositionMode=function(){var t={},i=Object.create(t);return i[t[0]="BottomRight"]=0,i[t[1]="BottomLeft"]=1,i[t[2]="TopRight"]=2,i[t[3]="TopLeft"]=3,i}(),c.ProtoAdPlaybackMode=function(){var t={},i=Object.create(t);return i[t[0]="Autoplay"]=0,i[t[1]="ScrollToPlay"]=1,i}(),c.ProtoFloatingAppendLocationEnum=function(){var t={},i=Object.create(t);return i[t[0]="Above"]=0,i[t[1]="Below"]=1,i[t[2]="Within"]=2,i}(),c.ProtoPlayerAdSkippability=function(){var t={},i=Object.create(t);return i[t[0]="IfLongerThan31Sec"]=0,i[t[1]="Always"]=1,i[t[2]="NoRestrictions"]=2,i}(),c.ProtoVideoQuality=function(){var t={},i=Object.create(t);return i[t[0]="Auto"]=0,i[t[1]="High1080p"]=1,i[t[2]="High720p"]=2,i[t[3]="Medium360p"]=3,i}(),c.ProtoImplementationType=function(){var t={},i=Object.create(t);return i[t[0]="Web"]=0,i[t[1]="Amp"]=1,i}(),c.ProtoAdBreakTypeEnum=function(){var t={},i=Object.create(t);return i[t[0]="None"]=0,i[t[1]="PreRoll"]=1,i[t[2]="MidRoll"]=2,i[t[3]="PostRoll"]=3,i}(),c.ProtoAdSlotAdTypeEnum=function(){var t={},i=Object.create(t);return i[t[0]="SingleAd"]=0,i[t[1]="AdPod"]=1,i}(),c.ProtoAdDomainBlockingResponse=function(){function t(t){if(this.domains=[],t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.domains=o.emptyArray,t.encode=function(t,i){if(i||(i=h.create()),null!=t.domains&&t.domains.length)for(var e=0;e<t.domains.length;++e)i.uint32(10).string(t.domains[e]);return i},t.decode=function(t,i){t instanceof a||(t=a.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoAdDomainBlockingResponse;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.domains&&s.domains.length||(s.domains=[]),s.domains.push(t.string());break;default:t.skipType(7&n)}}return s},t.fromObject=function(t){if(t instanceof c.ProtoAdDomainBlockingResponse)return t;var i=new c.ProtoAdDomainBlockingResponse;if(t.domains){if(!Array.isArray(t.domains))throw TypeError(".ProtoAdDomainBlockingResponse.domains: array expected");i.domains=[];for(var e=0;e<t.domains.length;++e)i.domains[e]=String(t.domains[e])}return i},t.toObject=function(t,i){i||(i={});var e={};if((i.arrays||i.defaults)&&(e.domains=[]),t.domains&&t.domains.length){e.domains=[];for(var s=0;s<t.domains.length;++s)e.domains[s]=t.domains[s]}return e},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.ProtoCoreTamBidRequest=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.lineItemId="",t.prototype.code="",t.prototype.metadata=null,t.prototype.exploration=!1,t.encode=function(t,i){return i||(i=h.create()),null!=t.lineItemId&&t.hasOwnProperty("lineItemId")&&i.uint32(10).string(t.lineItemId),null!=t.code&&t.hasOwnProperty("code")&&i.uint32(18).string(t.code),null!=t.metadata&&t.hasOwnProperty("metadata")&&c.MetadataModel.encode(t.metadata,i.uint32(26).fork()).ldelim(),null!=t.exploration&&t.hasOwnProperty("exploration")&&i.uint32(32).bool(t.exploration),i},t.decode=function(t,i){t instanceof a||(t=a.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoCoreTamBidRequest;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.lineItemId=t.string();break;case 2:s.code=t.string();break;case 3:s.metadata=c.MetadataModel.decode(t,t.uint32());break;case 4:s.exploration=t.bool();break;default:t.skipType(7&n)}}return s},t.fromObject=function(t){if(t instanceof c.ProtoCoreTamBidRequest)return t;var i=new c.ProtoCoreTamBidRequest;if(null!=t.lineItemId&&(i.lineItemId=String(t.lineItemId)),null!=t.code&&(i.code=String(t.code)),null!=t.metadata){if("object"!=typeof t.metadata)throw TypeError(".ProtoCoreTamBidRequest.metadata: object expected");i.metadata=c.MetadataModel.fromObject(t.metadata)}return null!=t.exploration&&(i.exploration=Boolean(t.exploration)),i},t.toObject=function(t,i){i||(i={});var e={};return i.defaults&&(e.lineItemId="",e.code="",e.metadata=null,e.exploration=!1),null!=t.lineItemId&&t.hasOwnProperty("lineItemId")&&(e.lineItemId=t.lineItemId),null!=t.code&&t.hasOwnProperty("code")&&(e.code=t.code),null!=t.metadata&&t.hasOwnProperty("metadata")&&(e.metadata=c.MetadataModel.toObject(t.metadata,i)),null!=t.exploration&&t.hasOwnProperty("exploration")&&(e.exploration=t.exploration),e},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.MetadataModel=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.version=0,t.prototype.sessionId="",t.prototype.playerId="",t.prototype.userId="",t.prototype.browser=null,t.prototype.geo=null,t.prototype.clientAb0=0,t.prototype.clientAb1=0,t.prototype.serverAb0=0,t.prototype.serverAb1=0,t.prototype.pageUrl="",t.prototype.bundleId="",t.prototype.implementationType=0,t.prototype.trackAllRequests=!1,t.prototype.customParam1="",t.prototype.customParam2="",t.prototype.customParam3="",t.prototype.abTestId="",t.prototype.pageInFocus=!1,t.prototype.customParam4="",t.prototype.customParam5="",t.encode=function(t,i){return i||(i=h.create()),null!=t.version&&t.hasOwnProperty("version")&&i.uint32(8).int32(t.version),null!=t.sessionId&&t.hasOwnProperty("sessionId")&&i.uint32(18).string(t.sessionId),null!=t.playerId&&t.hasOwnProperty("playerId")&&i.uint32(26).string(t.playerId),null!=t.userId&&t.hasOwnProperty("userId")&&i.uint32(34).string(t.userId),null!=t.browser&&t.hasOwnProperty("browser")&&c.Browser.encode(t.browser,i.uint32(42).fork()).ldelim(),null!=t.geo&&t.hasOwnProperty("geo")&&c.GeoLocation.encode(t.geo,i.uint32(50).fork()).ldelim(),null!=t.clientAb0&&t.hasOwnProperty("clientAb0")&&i.uint32(56).int32(t.clientAb0),null!=t.clientAb1&&t.hasOwnProperty("clientAb1")&&i.uint32(64).int32(t.clientAb1),null!=t.serverAb0&&t.hasOwnProperty("serverAb0")&&i.uint32(72).int32(t.serverAb0),null!=t.serverAb1&&t.hasOwnProperty("serverAb1")&&i.uint32(80).int32(t.serverAb1),null!=t.pageUrl&&t.hasOwnProperty("pageUrl")&&i.uint32(122).string(t.pageUrl),null!=t.bundleId&&t.hasOwnProperty("bundleId")&&i.uint32(138).string(t.bundleId),null!=t.implementationType&&t.hasOwnProperty("implementationType")&&i.uint32(144).int32(t.implementationType),null!=t.trackAllRequests&&t.hasOwnProperty("trackAllRequests")&&i.uint32(152).bool(t.trackAllRequests),null!=t.customParam1&&t.hasOwnProperty("customParam1")&&i.uint32(162).string(t.customParam1),null!=t.customParam2&&t.hasOwnProperty("customParam2")&&i.uint32(170).string(t.customParam2),null!=t.customParam3&&t.hasOwnProperty("customParam3")&&i.uint32(178).string(t.customParam3),null!=t.abTestId&&t.hasOwnProperty("abTestId")&&i.uint32(194).string(t.abTestId),null!=t.pageInFocus&&t.hasOwnProperty("pageInFocus")&&i.uint32(200).bool(t.pageInFocus),null!=t.customParam4&&t.hasOwnProperty("customParam4")&&i.uint32(210).string(t.customParam4),null!=t.customParam5&&t.hasOwnProperty("customParam5")&&i.uint32(218).string(t.customParam5),i},t.decode=function(t,i){t instanceof a||(t=a.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.MetadataModel;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.version=t.int32();break;case 2:s.sessionId=t.string();break;case 3:s.playerId=t.string();break;case 4:s.userId=t.string();break;case 5:s.browser=c.Browser.decode(t,t.uint32());break;case 6:s.geo=c.GeoLocation.decode(t,t.uint32());break;case 7:s.clientAb0=t.int32();break;case 8:s.clientAb1=t.int32();break;case 9:s.serverAb0=t.int32();break;case 10:s.serverAb1=t.int32();break;case 15:s.pageUrl=t.string();break;case 17:s.bundleId=t.string();break;case 18:s.implementationType=t.int32();break;case 19:s.trackAllRequests=t.bool();break;case 20:s.customParam1=t.string();break;case 21:s.customParam2=t.string();break;case 22:s.customParam3=t.string();break;case 24:s.abTestId=t.string();break;case 25:s.pageInFocus=t.bool();break;case 26:s.customParam4=t.string();break;case 27:s.customParam5=t.string();break;default:t.skipType(7&n)}}return s},t.fromObject=function(t){if(t instanceof c.MetadataModel)return t;var i=new c.MetadataModel;if(null!=t.version&&(i.version=0|t.version),null!=t.sessionId&&(i.sessionId=String(t.sessionId)),null!=t.playerId&&(i.playerId=String(t.playerId)),null!=t.userId&&(i.userId=String(t.userId)),null!=t.browser){if("object"!=typeof t.browser)throw TypeError(".MetadataModel.browser: object expected");i.browser=c.Browser.fromObject(t.browser)}if(null!=t.geo){if("object"!=typeof t.geo)throw TypeError(".MetadataModel.geo: object expected");i.geo=c.GeoLocation.fromObject(t.geo)}switch(null!=t.clientAb0&&(i.clientAb0=0|t.clientAb0),null!=t.clientAb1&&(i.clientAb1=0|t.clientAb1),null!=t.serverAb0&&(i.serverAb0=0|t.serverAb0),null!=t.serverAb1&&(i.serverAb1=0|t.serverAb1),null!=t.pageUrl&&(i.pageUrl=String(t.pageUrl)),null!=t.bundleId&&(i.bundleId=String(t.bundleId)),t.implementationType){case"Web":case 0:i.implementationType=0;break;case"Amp":case 1:i.implementationType=1}return null!=t.trackAllRequests&&(i.trackAllRequests=Boolean(t.trackAllRequests)),null!=t.customParam1&&(i.customParam1=String(t.customParam1)),null!=t.customParam2&&(i.customParam2=String(t.customParam2)),null!=t.customParam3&&(i.customParam3=String(t.customParam3)),null!=t.abTestId&&(i.abTestId=String(t.abTestId)),null!=t.pageInFocus&&(i.pageInFocus=Boolean(t.pageInFocus)),null!=t.customParam4&&(i.customParam4=String(t.customParam4)),null!=t.customParam5&&(i.customParam5=String(t.customParam5)),i},t.toObject=function(t,i){i||(i={});var e={};return i.defaults&&(e.version=0,e.sessionId="",e.playerId="",e.userId="",e.browser=null,e.geo=null,e.clientAb0=0,e.clientAb1=0,e.serverAb0=0,e.serverAb1=0,e.pageUrl="",e.bundleId="",e.implementationType=i.enums===String?"Web":0,e.trackAllRequests=!1,e.customParam1="",e.customParam2="",e.customParam3="",e.abTestId="",e.pageInFocus=!1,e.customParam4="",e.customParam5=""),null!=t.version&&t.hasOwnProperty("version")&&(e.version=t.version),null!=t.sessionId&&t.hasOwnProperty("sessionId")&&(e.sessionId=t.sessionId),null!=t.playerId&&t.hasOwnProperty("playerId")&&(e.playerId=t.playerId),null!=t.userId&&t.hasOwnProperty("userId")&&(e.userId=t.userId),null!=t.browser&&t.hasOwnProperty("browser")&&(e.browser=c.Browser.toObject(t.browser,i)),null!=t.geo&&t.hasOwnProperty("geo")&&(e.geo=c.GeoLocation.toObject(t.geo,i)),null!=t.clientAb0&&t.hasOwnProperty("clientAb0")&&(e.clientAb0=t.clientAb0),null!=t.clientAb1&&t.hasOwnProperty("clientAb1")&&(e.clientAb1=t.clientAb1),null!=t.serverAb0&&t.hasOwnProperty("serverAb0")&&(e.serverAb0=t.serverAb0),null!=t.serverAb1&&t.hasOwnProperty("serverAb1")&&(e.serverAb1=t.serverAb1),null!=t.pageUrl&&t.hasOwnProperty("pageUrl")&&(e.pageUrl=t.pageUrl),null!=t.bundleId&&t.hasOwnProperty("bundleId")&&(e.bundleId=t.bundleId),null!=t.implementationType&&t.hasOwnProperty("implementationType")&&(e.implementationType=i.enums===String?c.ProtoImplementationType[t.implementationType]:t.implementationType),null!=t.trackAllRequests&&t.hasOwnProperty("trackAllRequests")&&(e.trackAllRequests=t.trackAllRequests),null!=t.customParam1&&t.hasOwnProperty("customParam1")&&(e.customParam1=t.customParam1),null!=t.customParam2&&t.hasOwnProperty("customParam2")&&(e.customParam2=t.customParam2),null!=t.customParam3&&t.hasOwnProperty("customParam3")&&(e.customParam3=t.customParam3),null!=t.abTestId&&t.hasOwnProperty("abTestId")&&(e.abTestId=t.abTestId),null!=t.pageInFocus&&t.hasOwnProperty("pageInFocus")&&(e.pageInFocus=t.pageInFocus),null!=t.customParam4&&t.hasOwnProperty("customParam4")&&(e.customParam4=t.customParam4),null!=t.customParam5&&t.hasOwnProperty("customParam5")&&(e.customParam5=t.customParam5),e},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.ProtoDeviceType=function(){var t={},i=Object.create(t);return i[t[0]="Desktop"]=0,i[t[1]="Smartphone"]=1,i[t[2]="Tablet"]=2,i[t[3]="GameConsole"]=3,i[t[4]="SmartTV"]=4,i[t[5]="WearableComputer"]=5,i[t[6]="PDA"]=6,i[t[7]="Unrecognized"]=7,i}(),c.Browser=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.browserVersion="",t.prototype.browserType="",t.prototype.osCode="",t.prototype.device=0,t.encode=function(t,i){return i||(i=h.create()),null!=t.browserVersion&&t.hasOwnProperty("browserVersion")&&i.uint32(10).string(t.browserVersion),null!=t.browserType&&t.hasOwnProperty("browserType")&&i.uint32(18).string(t.browserType),null!=t.osCode&&t.hasOwnProperty("osCode")&&i.uint32(26).string(t.osCode),null!=t.device&&t.hasOwnProperty("device")&&i.uint32(32).int32(t.device),i},t.decode=function(t,i){t instanceof a||(t=a.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.Browser;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.browserVersion=t.string();break;case 2:s.browserType=t.string();break;case 3:s.osCode=t.string();break;case 4:s.device=t.int32();break;default:t.skipType(7&n)}}return s},t.fromObject=function(t){if(t instanceof c.Browser)return t;var i=new c.Browser;switch(null!=t.browserVersion&&(i.browserVersion=String(t.browserVersion)),null!=t.browserType&&(i.browserType=String(t.browserType)),null!=t.osCode&&(i.osCode=String(t.osCode)),t.device){case"Desktop":case 0:i.device=0;break;case"Smartphone":case 1:i.device=1;break;case"Tablet":case 2:i.device=2;break;case"GameConsole":case 3:i.device=3;break;case"SmartTV":case 4:i.device=4;break;case"WearableComputer":case 5:i.device=5;break;case"PDA":case 6:i.device=6;break;case"Unrecognized":case 7:i.device=7}return i},t.toObject=function(t,i){i||(i={});var e={};return i.defaults&&(e.browserVersion="",e.browserType="",e.osCode="",e.device=i.enums===String?"Desktop":0),null!=t.browserVersion&&t.hasOwnProperty("browserVersion")&&(e.browserVersion=t.browserVersion),null!=t.browserType&&t.hasOwnProperty("browserType")&&(e.browserType=t.browserType),null!=t.osCode&&t.hasOwnProperty("osCode")&&(e.osCode=t.osCode),null!=t.device&&t.hasOwnProperty("device")&&(e.device=i.enums===String?c.ProtoDeviceType[t.device]:t.device),e},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.GeoLocation=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.countryGeoId=0,t.prototype.cityId=0,t.prototype.subdivisionId=0,t.prototype.dmaId=0,t.prototype.ip="",t.prototype.lat=0,t.prototype.lon=0,t.encode=function(t,i){return i||(i=h.create()),null!=t.countryGeoId&&t.hasOwnProperty("countryGeoId")&&i.uint32(8).int32(t.countryGeoId),null!=t.cityId&&t.hasOwnProperty("cityId")&&i.uint32(16).int32(t.cityId),null!=t.subdivisionId&&t.hasOwnProperty("subdivisionId")&&i.uint32(24).int32(t.subdivisionId),null!=t.dmaId&&t.hasOwnProperty("dmaId")&&i.uint32(32).int32(t.dmaId),null!=t.ip&&t.hasOwnProperty("ip")&&i.uint32(42).string(t.ip),null!=t.lat&&t.hasOwnProperty("lat")&&i.uint32(49).double(t.lat),null!=t.lon&&t.hasOwnProperty("lon")&&i.uint32(57).double(t.lon),i},t.decode=function(t,i){t instanceof a||(t=a.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.GeoLocation;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.countryGeoId=t.int32();break;case 2:s.cityId=t.int32();break;case 3:s.subdivisionId=t.int32();break;case 4:s.dmaId=t.int32();break;case 5:s.ip=t.string();break;case 6:s.lat=t.double();break;case 7:s.lon=t.double();break;default:t.skipType(7&n)}}return s},t.fromObject=function(t){if(t instanceof c.GeoLocation)return t;var i=new c.GeoLocation;return null!=t.countryGeoId&&(i.countryGeoId=0|t.countryGeoId),null!=t.cityId&&(i.cityId=0|t.cityId),null!=t.subdivisionId&&(i.subdivisionId=0|t.subdivisionId),null!=t.dmaId&&(i.dmaId=0|t.dmaId),null!=t.ip&&(i.ip=String(t.ip)),null!=t.lat&&(i.lat=Number(t.lat)),null!=t.lon&&(i.lon=Number(t.lon)),i},t.toObject=function(t,i){i||(i={});var e={};return i.defaults&&(e.countryGeoId=0,e.cityId=0,e.subdivisionId=0,e.dmaId=0,e.ip="",e.lat=0,e.lon=0),null!=t.countryGeoId&&t.hasOwnProperty("countryGeoId")&&(e.countryGeoId=t.countryGeoId),null!=t.cityId&&t.hasOwnProperty("cityId")&&(e.cityId=t.cityId),null!=t.subdivisionId&&t.hasOwnProperty("subdivisionId")&&(e.subdivisionId=t.subdivisionId),null!=t.dmaId&&t.hasOwnProperty("dmaId")&&(e.dmaId=t.dmaId),null!=t.ip&&t.hasOwnProperty("ip")&&(e.ip=t.ip),null!=t.lat&&t.hasOwnProperty("lat")&&(e.lat=i.json&&!isFinite(t.lat)?String(t.lat):t.lat),null!=t.lon&&t.hasOwnProperty("lon")&&(e.lon=i.json&&!isFinite(t.lon)?String(t.lon):t.lon),e},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.ProtoCoreTamBidResponse=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.errorMessage="",t.prototype.encryptedBidPrice="",t.prototype.ofskp=0,t.prototype.impressionTimeSpent=0,t.prototype.bidRate=0,t.prototype.successRate=0,t.encode=function(t,i){return i||(i=h.create()),null!=t.errorMessage&&t.hasOwnProperty("errorMessage")&&i.uint32(10).string(t.errorMessage),null!=t.encryptedBidPrice&&t.hasOwnProperty("encryptedBidPrice")&&i.uint32(82).string(t.encryptedBidPrice),null!=t.ofskp&&t.hasOwnProperty("ofskp")&&i.uint32(97).double(t.ofskp),null!=t.impressionTimeSpent&&t.hasOwnProperty("impressionTimeSpent")&&i.uint32(104).int32(t.impressionTimeSpent),null!=t.bidRate&&t.hasOwnProperty("bidRate")&&i.uint32(113).double(t.bidRate),null!=t.successRate&&t.hasOwnProperty("successRate")&&i.uint32(121).double(t.successRate),i},t.decode=function(t,i){t instanceof a||(t=a.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoCoreTamBidResponse;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.errorMessage=t.string();break;case 10:s.encryptedBidPrice=t.string();break;case 12:s.ofskp=t.double();break;case 13:s.impressionTimeSpent=t.int32();break;case 14:s.bidRate=t.double();break;case 15:s.successRate=t.double();break;default:t.skipType(7&n)}}return s},t.fromObject=function(t){if(t instanceof c.ProtoCoreTamBidResponse)return t;var i=new c.ProtoCoreTamBidResponse;return null!=t.errorMessage&&(i.errorMessage=String(t.errorMessage)),null!=t.encryptedBidPrice&&(i.encryptedBidPrice=String(t.encryptedBidPrice)),null!=t.ofskp&&(i.ofskp=Number(t.ofskp)),null!=t.impressionTimeSpent&&(i.impressionTimeSpent=0|t.impressionTimeSpent),null!=t.bidRate&&(i.bidRate=Number(t.bidRate)),null!=t.successRate&&(i.successRate=Number(t.successRate)),i},t.toObject=function(t,i){i||(i={});var e={};return i.defaults&&(e.errorMessage="",e.encryptedBidPrice="",e.ofskp=0,e.impressionTimeSpent=0,e.bidRate=0,e.successRate=0),null!=t.errorMessage&&t.hasOwnProperty("errorMessage")&&(e.errorMessage=t.errorMessage),null!=t.encryptedBidPrice&&t.hasOwnProperty("encryptedBidPrice")&&(e.encryptedBidPrice=t.encryptedBidPrice),null!=t.ofskp&&t.hasOwnProperty("ofskp")&&(e.ofskp=i.json&&!isFinite(t.ofskp)?String(t.ofskp):t.ofskp),null!=t.impressionTimeSpent&&t.hasOwnProperty("impressionTimeSpent")&&(e.impressionTimeSpent=t.impressionTimeSpent),null!=t.bidRate&&t.hasOwnProperty("bidRate")&&(e.bidRate=i.json&&!isFinite(t.bidRate)?String(t.bidRate):t.bidRate),null!=t.successRate&&t.hasOwnProperty("successRate")&&(e.successRate=i.json&&!isFinite(t.successRate)?String(t.successRate):t.successRate),e},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.ProtoCookieSettings=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.name="",t.prototype.value="",t.prototype.timestamp=o.Long?o.Long.fromBits(0,0,!1):0,t.encode=function(t,i){return i||(i=h.create()),null!=t.name&&t.hasOwnProperty("name")&&i.uint32(10).string(t.name),null!=t.value&&t.hasOwnProperty("value")&&i.uint32(18).string(t.value),null!=t.timestamp&&t.hasOwnProperty("timestamp")&&i.uint32(24).int64(t.timestamp),i},t.decode=function(t,i){t instanceof a||(t=a.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoCookieSettings;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.name=t.string();break;case 2:s.value=t.string();break;case 3:s.timestamp=t.int64();break;default:t.skipType(7&n)}}return s},t.fromObject=function(t){if(t instanceof c.ProtoCookieSettings)return t;var i=new c.ProtoCookieSettings;return null!=t.name&&(i.name=String(t.name)),null!=t.value&&(i.value=String(t.value)),null!=t.timestamp&&(o.Long?(i.timestamp=o.Long.fromValue(t.timestamp)).unsigned=!1:"string"==typeof t.timestamp?i.timestamp=parseInt(t.timestamp,10):"number"==typeof t.timestamp?i.timestamp=t.timestamp:"object"==typeof t.timestamp&&(i.timestamp=new o.LongBits(t.timestamp.low>>>0,t.timestamp.high>>>0).toNumber())),i},t.toObject=function(t,i){i||(i={});var e={};if(i.defaults)if(e.name="",e.value="",o.Long){var s=new o.Long(0,0,!1);e.timestamp=i.longs===String?s.toString():i.longs===Number?s.toNumber():s}else e.timestamp=i.longs===String?"0":0;return null!=t.name&&t.hasOwnProperty("name")&&(e.name=t.name),null!=t.value&&t.hasOwnProperty("value")&&(e.value=t.value),null!=t.timestamp&&t.hasOwnProperty("timestamp")&&("number"==typeof t.timestamp?e.timestamp=i.longs===String?String(t.timestamp):t.timestamp:e.timestamp=i.longs===String?o.Long.prototype.toString.call(t.timestamp):i.longs===Number?new o.LongBits(t.timestamp.low>>>0,t.timestamp.high>>>0).toNumber():t.timestamp),e},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.ProtoCookieSecureModeEnum=function(){var t={},i=Object.create(t);return i[t[0]="Secure"]=0,i[t[1]="Unsecure"]=1,i[t[2]="Auto"]=2,i}(),c.ProtoCookieSyncRequest=function(){function t(t){if(this.cookieList=[],t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.cookieList=o.emptyArray,t.prototype.secureMode=0,t.prototype.browserInfo=null,t.encode=function(t,i){if(i||(i=h.create()),null!=t.cookieList&&t.cookieList.length)for(var e=0;e<t.cookieList.length;++e)c.ProtoCookieSettings.encode(t.cookieList[e],i.uint32(10).fork()).ldelim();return null!=t.secureMode&&t.hasOwnProperty("secureMode")&&i.uint32(16).int32(t.secureMode),null!=t.browserInfo&&t.hasOwnProperty("browserInfo")&&c.Browser.encode(t.browserInfo,i.uint32(26).fork()).ldelim(),i},t.decode=function(t,i){t instanceof a||(t=a.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoCookieSyncRequest;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.cookieList&&s.cookieList.length||(s.cookieList=[]),s.cookieList.push(c.ProtoCookieSettings.decode(t,t.uint32()));break;case 2:s.secureMode=t.int32();break;case 3:s.browserInfo=c.Browser.decode(t,t.uint32());break;default:t.skipType(7&n)}}return s},t.fromObject=function(t){if(t instanceof c.ProtoCookieSyncRequest)return t;var i=new c.ProtoCookieSyncRequest;if(t.cookieList){if(!Array.isArray(t.cookieList))throw TypeError(".ProtoCookieSyncRequest.cookieList: array expected");i.cookieList=[];for(var e=0;e<t.cookieList.length;++e){if("object"!=typeof t.cookieList[e])throw TypeError(".ProtoCookieSyncRequest.cookieList: object expected");i.cookieList[e]=c.ProtoCookieSettings.fromObject(t.cookieList[e])}}switch(t.secureMode){case"Secure":case 0:i.secureMode=0;break;case"Unsecure":case 1:i.secureMode=1;break;case"Auto":case 2:i.secureMode=2}if(null!=t.browserInfo){if("object"!=typeof t.browserInfo)throw TypeError(".ProtoCookieSyncRequest.browserInfo: object expected");i.browserInfo=c.Browser.fromObject(t.browserInfo)}return i},t.toObject=function(t,i){i||(i={});var e={};if((i.arrays||i.defaults)&&(e.cookieList=[]),i.defaults&&(e.secureMode=i.enums===String?"Secure":0,e.browserInfo=null),t.cookieList&&t.cookieList.length){e.cookieList=[];for(var s=0;s<t.cookieList.length;++s)e.cookieList[s]=c.ProtoCookieSettings.toObject(t.cookieList[s],i)}return null!=t.secureMode&&t.hasOwnProperty("secureMode")&&(e.secureMode=i.enums===String?c.ProtoCookieSecureModeEnum[t.secureMode]:t.secureMode),null!=t.browserInfo&&t.hasOwnProperty("browserInfo")&&(e.browserInfo=c.Browser.toObject(t.browserInfo,i)),e},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.ProtoUserInformation=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.userId="",t.prototype.lookupId="",t.prototype.lookupResponseCode=0,t.prototype.callFraudSensor=!1,t.prototype.publisherAdsTxt="",t.encode=function(t,i){return i||(i=h.create()),null!=t.userId&&t.hasOwnProperty("userId")&&i.uint32(10).string(t.userId),null!=t.lookupId&&t.hasOwnProperty("lookupId")&&i.uint32(26).string(t.lookupId),null!=t.lookupResponseCode&&t.hasOwnProperty("lookupResponseCode")&&i.uint32(32).int32(t.lookupResponseCode),null!=t.callFraudSensor&&t.hasOwnProperty("callFraudSensor")&&i.uint32(40).bool(t.callFraudSensor),null!=t.publisherAdsTxt&&t.hasOwnProperty("publisherAdsTxt")&&i.uint32(50).string(t.publisherAdsTxt),i},t.decode=function(t,i){t instanceof a||(t=a.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoUserInformation;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.userId=t.string();break;case 3:s.lookupId=t.string();break;case 4:s.lookupResponseCode=t.int32();break;case 5:s.callFraudSensor=t.bool();break;case 6:s.publisherAdsTxt=t.string();break;default:t.skipType(7&n)}}return s},t.fromObject=function(t){if(t instanceof c.ProtoUserInformation)return t;var i=new c.ProtoUserInformation;return null!=t.userId&&(i.userId=String(t.userId)),null!=t.lookupId&&(i.lookupId=String(t.lookupId)),null!=t.lookupResponseCode&&(i.lookupResponseCode=0|t.lookupResponseCode),null!=t.callFraudSensor&&(i.callFraudSensor=Boolean(t.callFraudSensor)),null!=t.publisherAdsTxt&&(i.publisherAdsTxt=String(t.publisherAdsTxt)),i},t.toObject=function(t,i){i||(i={});var e={};return i.defaults&&(e.userId="",e.lookupId="",e.lookupResponseCode=0,e.callFraudSensor=!1,e.publisherAdsTxt=""),null!=t.userId&&t.hasOwnProperty("userId")&&(e.userId=t.userId),null!=t.lookupId&&t.hasOwnProperty("lookupId")&&(e.lookupId=t.lookupId),null!=t.lookupResponseCode&&t.hasOwnProperty("lookupResponseCode")&&(e.lookupResponseCode=t.lookupResponseCode),null!=t.callFraudSensor&&t.hasOwnProperty("callFraudSensor")&&(e.callFraudSensor=t.callFraudSensor),null!=t.publisherAdsTxt&&t.hasOwnProperty("publisherAdsTxt")&&(e.publisherAdsTxt=t.publisherAdsTxt),e},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.ProtoTrackerType=function(){var t={},i=Object.create(t);return i[t[0]="Image"]=0,i[t[1]="Javascript"]=1,i}(),c.ProtoTrackerTriggerType=function(){var t={},i=Object.create(t);return i[t[0]="Impression"]=0,i[t[1]="Complete25Pc"]=1,i[t[2]="Complete50Pc"]=2,i[t[3]="Complete75Pc"]=3,i[t[4]="ViewCompletion"]=4,i[t[5]="VideoClick"]=5,i[t[6]="Pause"]=6,i[t[7]="Resume"]=7,i[t[8]="Mute"]=8,i[t[9]="Unmute"]=9,i}(),c.CreativeTrackerViewModel=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.type=0,t.prototype.trigger=0,t.prototype.url="",t.decode=function(t,i){t instanceof a||(t=a.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.CreativeTrackerViewModel;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.type=t.int32();break;case 2:s.trigger=t.int32();break;case 3:s.url=t.string();break;default:t.skipType(7&n)}}return s},t.toObject=function(t,i){i||(i={});var e={};return i.defaults&&(e.type=i.enums===String?"Image":0,e.trigger=i.enums===String?"Impression":0,e.url=""),null!=t.type&&t.hasOwnProperty("type")&&(e.type=i.enums===String?c.ProtoTrackerType[t.type]:t.type),null!=t.trigger&&t.hasOwnProperty("trigger")&&(e.trigger=i.enums===String?c.ProtoTrackerTriggerType[t.trigger]:t.trigger),null!=t.url&&t.hasOwnProperty("url")&&(e.url=t.url),e},t}(),c.ProtoCreativeTypeEnum=function(){var t={},i=Object.create(t);return i[t[0]="ThirdParty"]=0,i[t[1]="MediaFile"]=1,i[t[2]="Rtb"]=2,i[t[3]="External"]=3,i[t[4]="HeaderBidder"]=4,i[t[7]="Tam"]=7,i}(),c.ProtoResetCapTypeEnum=function(){var t={},i=Object.create(t);return i[t[0]="TimeCapping"]=0,i[t[1]="ContentCapping"]=1,i[t[2]="OpportunityCapping"]=2,i}(),c.ProtoAdSlotsEnum=function(){var t={},i=Object.create(t);return i[t[0]="PreRoll"]=0,i[t[1]="MidRoll"]=1,i[t[2]="PostRoll"]=2,i}(),c.ProtoLineItemPriority=function(){var t={},i=Object.create(t);return i[t[0]="House"]=0,i[t[1]="Default"]=1,i[t[2]="Preferred"]=2,i[t[3]="Top"]=3,i}(),c.ProtoAdSkipMode=function(){var t={},i=Object.create(t);return i[t[0]="IfLongerThan31Sec"]=0,i[t[1]="Always"]=1,i[t[2]="Never"]=2,i[t[3]="NotAplicable"]=3,i}(),c.ProtoAdType=function(){var t={},i=Object.create(t);return i[t[0]="Video"]=0,i[t[1]="Overlay"]=1,i}(),c.ProtoChoiceCriteriaEnum=function(){var t={},i=Object.create(t);return i[t[0]="Only"]=0,i[t[1]="Except"]=1,i}(),c.ProtoLineItemAdBreakTypeEnum=function(){var t={},i=Object.create(t);return i[t[1]="All"]=1,i[t[2]="SingleAd"]=2,i[t[3]="AdPod"]=3,i}(),c.ProtoLineItemTargetingTypeEnum=function(){var t={},i=Object.create(t);return i[t[0]="Only"]=0,i[t[1]="Except"]=1,i}(),c.ProtoLineItemAdSlotTargetingTypeEnum=function(){var t={},i=Object.create(t);return i[t[1]="SpecificSlots"]=1,i[t[2]="Interval"]=2,i}(),c.ProtoLineItemPauseAdOutOfViewEnum=function(){var t={},i=Object.create(t);return i[t[0]="Default"]=0,i[t[1]="Strict"]=1,i}(),c.ProtoLineItemContextualTargetingEnum=function(){var t={},i=Object.create(t);return i[t[0]="IncludeAny"]=0,i[t[1]="IncludeAll"]=1,i[t[2]="ExcludeAny"]=2,i[t[3]="ExcludeAll"]=3,i}(),c.ProtoSizeChoiceCriteriaEnum=function(){var t={},i=Object.create(t);return i[t[0]="GreaterThan"]=0,i[t[1]="SmallerThan"]=1,i[t[2]="Between"]=2,i}(),c.ProtoLineItemAdBreakTargeting=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.adRollType=0,t.prototype.adBreakTypeEnum=1,t.encode=function(t,i){return i||(i=h.create()),null!=t.adRollType&&t.hasOwnProperty("adRollType")&&i.uint32(8).int32(t.adRollType),null!=t.adBreakTypeEnum&&t.hasOwnProperty("adBreakTypeEnum")&&i.uint32(16).int32(t.adBreakTypeEnum),i},t.decode=function(t,i){t instanceof a||(t=a.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoLineItemAdBreakTargeting;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.adRollType=t.int32();break;case 2:s.adBreakTypeEnum=t.int32();break;default:t.skipType(7&n)}}return s},t.fromObject=function(t){if(t instanceof c.ProtoLineItemAdBreakTargeting)return t;var i=new c.ProtoLineItemAdBreakTargeting;switch(t.adRollType){case"None":case 0:i.adRollType=0;break;case"PreRoll":case 1:i.adRollType=1;break;case"MidRoll":case 2:i.adRollType=2;break;case"PostRoll":case 3:i.adRollType=3}switch(t.adBreakTypeEnum){case"All":case 1:i.adBreakTypeEnum=1;break;case"SingleAd":case 2:i.adBreakTypeEnum=2;break;case"AdPod":case 3:i.adBreakTypeEnum=3}return i},t.toObject=function(t,i){i||(i={});var e={};return i.defaults&&(e.adRollType=i.enums===String?"None":0,e.adBreakTypeEnum=i.enums===String?"All":1),null!=t.adRollType&&t.hasOwnProperty("adRollType")&&(e.adRollType=i.enums===String?c.ProtoAdBreakTypeEnum[t.adRollType]:t.adRollType),null!=t.adBreakTypeEnum&&t.hasOwnProperty("adBreakTypeEnum")&&(e.adBreakTypeEnum=i.enums===String?c.ProtoLineItemAdBreakTypeEnum[t.adBreakTypeEnum]:t.adBreakTypeEnum),e},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.ProtoLineItemAdPodTargeting=function(){function t(t){if(this.adSlotPositions=[],t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.targetingType=0,t.prototype.adSlotTargetingType=1,t.prototype.adSlotPositions=o.emptyArray,t.encode=function(t,i){if(i||(i=h.create()),null!=t.targetingType&&t.hasOwnProperty("targetingType")&&i.uint32(8).int32(t.targetingType),null!=t.adSlotTargetingType&&t.hasOwnProperty("adSlotTargetingType")&&i.uint32(16).int32(t.adSlotTargetingType),null!=t.adSlotPositions&&t.adSlotPositions.length){i.uint32(26).fork();for(var e=0;e<t.adSlotPositions.length;++e)i.int32(t.adSlotPositions[e]);i.ldelim()}return i},t.decode=function(t,i){t instanceof a||(t=a.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoLineItemAdPodTargeting;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.targetingType=t.int32();break;case 2:s.adSlotTargetingType=t.int32();break;case 3:if(s.adSlotPositions&&s.adSlotPositions.length||(s.adSlotPositions=[]),2==(7&n))for(var r=t.uint32()+t.pos;t.pos<r;)s.adSlotPositions.push(t.int32());else s.adSlotPositions.push(t.int32());break;default:t.skipType(7&n)}}return s},t.fromObject=function(t){if(t instanceof c.ProtoLineItemAdPodTargeting)return t;var i=new c.ProtoLineItemAdPodTargeting;switch(t.targetingType){case"Only":case 0:i.targetingType=0;break;case"Except":case 1:i.targetingType=1}switch(t.adSlotTargetingType){case"SpecificSlots":case 1:i.adSlotTargetingType=1;break;case"Interval":case 2:i.adSlotTargetingType=2}if(t.adSlotPositions){if(!Array.isArray(t.adSlotPositions))throw TypeError(".ProtoLineItemAdPodTargeting.adSlotPositions: array expected");i.adSlotPositions=[];for(var e=0;e<t.adSlotPositions.length;++e)i.adSlotPositions[e]=0|t.adSlotPositions[e]}return i},t.toObject=function(t,i){i||(i={});var e={};if((i.arrays||i.defaults)&&(e.adSlotPositions=[]),i.defaults&&(e.targetingType=i.enums===String?"Only":0,e.adSlotTargetingType=i.enums===String?"SpecificSlots":1),null!=t.targetingType&&t.hasOwnProperty("targetingType")&&(e.targetingType=i.enums===String?c.ProtoLineItemTargetingTypeEnum[t.targetingType]:t.targetingType),null!=t.adSlotTargetingType&&t.hasOwnProperty("adSlotTargetingType")&&(e.adSlotTargetingType=i.enums===String?c.ProtoLineItemAdSlotTargetingTypeEnum[t.adSlotTargetingType]:t.adSlotTargetingType),t.adSlotPositions&&t.adSlotPositions.length){e.adSlotPositions=[];for(var s=0;s<t.adSlotPositions.length;++s)e.adSlotPositions[s]=t.adSlotPositions[s]}return e},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.ProtoLineItemAdBreakSettings=function(){function t(t){if(this.adBreakTargeting=[],t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.adBreakTargeting=o.emptyArray,t.prototype.adPodTargeting=null,t.encode=function(t,i){if(i||(i=h.create()),null!=t.adBreakTargeting&&t.adBreakTargeting.length)for(var e=0;e<t.adBreakTargeting.length;++e)c.ProtoLineItemAdBreakTargeting.encode(t.adBreakTargeting[e],i.uint32(10).fork()).ldelim();return null!=t.adPodTargeting&&t.hasOwnProperty("adPodTargeting")&&c.ProtoLineItemAdPodTargeting.encode(t.adPodTargeting,i.uint32(18).fork()).ldelim(),i},t.decode=function(t,i){t instanceof a||(t=a.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoLineItemAdBreakSettings;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.adBreakTargeting&&s.adBreakTargeting.length||(s.adBreakTargeting=[]),s.adBreakTargeting.push(c.ProtoLineItemAdBreakTargeting.decode(t,t.uint32()));break;case 2:s.adPodTargeting=c.ProtoLineItemAdPodTargeting.decode(t,t.uint32());break;default:t.skipType(7&n)}}return s},t.fromObject=function(t){if(t instanceof c.ProtoLineItemAdBreakSettings)return t;var i=new c.ProtoLineItemAdBreakSettings;if(t.adBreakTargeting){if(!Array.isArray(t.adBreakTargeting))throw TypeError(".ProtoLineItemAdBreakSettings.adBreakTargeting: array expected");i.adBreakTargeting=[];for(var e=0;e<t.adBreakTargeting.length;++e){if("object"!=typeof t.adBreakTargeting[e])throw TypeError(".ProtoLineItemAdBreakSettings.adBreakTargeting: object expected");i.adBreakTargeting[e]=c.ProtoLineItemAdBreakTargeting.fromObject(t.adBreakTargeting[e])}}if(null!=t.adPodTargeting){if("object"!=typeof t.adPodTargeting)throw TypeError(".ProtoLineItemAdBreakSettings.adPodTargeting: object expected");i.adPodTargeting=c.ProtoLineItemAdPodTargeting.fromObject(t.adPodTargeting)}return i},t.toObject=function(t,i){i||(i={});var e={};if((i.arrays||i.defaults)&&(e.adBreakTargeting=[]),i.defaults&&(e.adPodTargeting=null),t.adBreakTargeting&&t.adBreakTargeting.length){e.adBreakTargeting=[];for(var s=0;s<t.adBreakTargeting.length;++s)e.adBreakTargeting[s]=c.ProtoLineItemAdBreakTargeting.toObject(t.adBreakTargeting[s],i)}return null!=t.adPodTargeting&&t.hasOwnProperty("adPodTargeting")&&(e.adPodTargeting=c.ProtoLineItemAdPodTargeting.toObject(t.adPodTargeting,i)),e},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.ProtoLineItem=function(){function t(t){if(this.trackers=[],this.renditions=[],this.floorPrices=[],this.advertiserContextualTargeting=[],this.publisherContextualTargeting=[],t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.publisherLineItemId="",t.prototype.advertiserLineItemId="",t.prototype.adTag="",t.prototype.creativeType=0,t.prototype.sound=!1,t.prototype.viewability=!1,t.prototype.impressionTimeSpent=0,t.prototype.vendorId="",t.prototype.trackers=o.emptyArray,t.prototype.duration=0,t.prototype.renditions=o.emptyArray,t.prototype.mediaCreativeId="",t.prototype.ignoreFilledRequests=!1,t.prototype.requestCap=3,t.prototype.impressionCap=0,t.prototype.successRate=0,t.prototype.lineItemPriority=0,t.prototype.headerBidderBids="",t.prototype.headerBidderTimeout=0,t.prototype.mediaCreativeClickUrl="",t.prototype.resetRequestsCapTime=60,t.prototype.resetImpressionsCapTime=60,t.prototype.resetCapType=0,t.prototype.creativeHlsFileName="",t.prototype.timeBetweenRequests=0,t.prototype.skipMode=0,t.prototype.mediaIdTargeting=null,t.prototype.mediaKeywordsTargeting=null,t.prototype.mediaLanguageTargeting=null,t.prototype.adType=0,t.prototype.overlayTime=30,t.prototype.floorPrice=0,t.prototype.adBreakSettings=null,t.prototype.floorPrices=o.emptyArray,t.prototype.bidRate=0,t.prototype.pauseAdOutOfView=0,t.prototype.moatTrackingEnabled=!1,t.prototype.cnxCreativeId="",t.prototype.blockedDomainsRevisionNumber=0,t.prototype.advertiserContextualTargeting=o.emptyArray,t.prototype.publisherContextualTargeting=o.emptyArray,t.prototype.playerSizeTargetings=null,t.prototype.playerSize="",t.decode=function(t,i){t instanceof a||(t=a.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoLineItem;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.publisherLineItemId=t.string();break;case 2:s.advertiserLineItemId=t.string();break;case 3:s.adTag=t.string();break;case 4:s.creativeType=t.int32();break;case 6:s.sound=t.bool();break;case 7:s.viewability=t.bool();break;case 9:s.impressionTimeSpent=t.int32();break;case 10:s.vendorId=t.string();break;case 12:s.trackers&&s.trackers.length||(s.trackers=[]),s.trackers.push(c.CreativeTrackerViewModel.decode(t,t.uint32()));break;case 13:s.duration=t.int32();break;case 14:s.renditions&&s.renditions.length||(s.renditions=[]),s.renditions.push(c.ProtoRendition.decode(t,t.uint32()));break;case 15:s.mediaCreativeId=t.string();break;case 16:s.ignoreFilledRequests=t.bool();break;case 17:s.requestCap=t.int32();break;case 18:s.impressionCap=t.int32();break;case 19:s.successRate=t.double();break;case 20:s.lineItemPriority=t.int32();break;case 21:s.headerBidderBids=t.string();break;case 22:s.headerBidderTimeout=t.int32();break;case 23:s.mediaCreativeClickUrl=t.string();break;case 24:s.resetRequestsCapTime=t.int32();break;case 25:s.resetImpressionsCapTime=t.int32();break;case 26:s.resetCapType=t.int32();break;case 27:s.creativeHlsFileName=t.string();break;case 28:s.timeBetweenRequests=t.int32();break;case 29:s.skipMode=t.int32();break;case 30:s.mediaIdTargeting=c.ProtoTargetingChoiceModel.decode(t,t.uint32());break;case 31:s.mediaKeywordsTargeting=c.ProtoTargetingChoiceModel.decode(t,t.uint32());break;case 32:s.mediaLanguageTargeting=c.ProtoTargetingChoiceModel.decode(t,t.uint32());break;case 33:s.adType=t.int32();break;case 34:s.overlayTime=t.int32();break;case 35:s.floorPrice=t.double();break;case 36:s.adBreakSettings=c.ProtoLineItemAdBreakSettings.decode(t,t.uint32());break;case 38:if(s.floorPrices&&s.floorPrices.length||(s.floorPrices=[]),2==(7&n))for(var r=t.uint32()+t.pos;t.pos<r;)s.floorPrices.push(t.double());else s.floorPrices.push(t.double());break;case 39:s.bidRate=t.double();break;case 40:s.pauseAdOutOfView=t.int32();break;case 41:s.moatTrackingEnabled=t.bool();break;case 42:s.cnxCreativeId=t.string();break;case 44:s.blockedDomainsRevisionNumber=t.int32();break;case 45:s.advertiserContextualTargeting&&s.advertiserContextualTargeting.length||(s.advertiserContextualTargeting=[]),s.advertiserContextualTargeting.push(c.ProtoContextualTargetingCaseModel.decode(t,t.uint32()));break;case 46:s.publisherContextualTargeting&&s.publisherContextualTargeting.length||(s.publisherContextualTargeting=[]),s.publisherContextualTargeting.push(c.ProtoContextualTargetingCaseModel.decode(t,t.uint32()));break;case 47:s.playerSizeTargetings=c.ProtoPlayerSizeTargetings.decode(t,t.uint32());break;case 101:s.playerSize=t.string();break;default:t.skipType(7&n)}}return s},t.toObject=function(t,i){i||(i={});var e={};if((i.arrays||i.defaults)&&(e.trackers=[],e.renditions=[],e.floorPrices=[],e.advertiserContextualTargeting=[],e.publisherContextualTargeting=[]),i.defaults&&(e.publisherLineItemId="",e.advertiserLineItemId="",e.adTag="",e.creativeType=i.enums===String?"ThirdParty":0,e.sound=!1,e.viewability=!1,e.impressionTimeSpent=0,e.vendorId="",e.duration=0,e.mediaCreativeId="",e.ignoreFilledRequests=!1,e.requestCap=3,e.impressionCap=0,e.successRate=0,e.lineItemPriority=i.enums===String?"House":0,e.headerBidderBids="",e.headerBidderTimeout=0,e.mediaCreativeClickUrl="",e.resetRequestsCapTime=60,e.resetImpressionsCapTime=60,e.resetCapType=i.enums===String?"TimeCapping":0,e.creativeHlsFileName="",e.timeBetweenRequests=0,e.skipMode=i.enums===String?"IfLongerThan31Sec":0,e.mediaIdTargeting=null,e.mediaKeywordsTargeting=null,e.mediaLanguageTargeting=null,e.adType=i.enums===String?"Video":0,e.overlayTime=30,e.floorPrice=0,e.adBreakSettings=null,e.bidRate=0,e.pauseAdOutOfView=i.enums===String?"Default":0,e.moatTrackingEnabled=!1,e.cnxCreativeId="",e.blockedDomainsRevisionNumber=0,e.playerSizeTargetings=null,e.playerSize=""),null!=t.publisherLineItemId&&t.hasOwnProperty("publisherLineItemId")&&(e.publisherLineItemId=t.publisherLineItemId),null!=t.advertiserLineItemId&&t.hasOwnProperty("advertiserLineItemId")&&(e.advertiserLineItemId=t.advertiserLineItemId),null!=t.adTag&&t.hasOwnProperty("adTag")&&(e.adTag=t.adTag),null!=t.creativeType&&t.hasOwnProperty("creativeType")&&(e.creativeType=i.enums===String?c.ProtoCreativeTypeEnum[t.creativeType]:t.creativeType),null!=t.sound&&t.hasOwnProperty("sound")&&(e.sound=t.sound),null!=t.viewability&&t.hasOwnProperty("viewability")&&(e.viewability=t.viewability),null!=t.impressionTimeSpent&&t.hasOwnProperty("impressionTimeSpent")&&(e.impressionTimeSpent=t.impressionTimeSpent),null!=t.vendorId&&t.hasOwnProperty("vendorId")&&(e.vendorId=t.vendorId),t.trackers&&t.trackers.length){e.trackers=[];for(var s=0;s<t.trackers.length;++s)e.trackers[s]=c.CreativeTrackerViewModel.toObject(t.trackers[s],i)}if(null!=t.duration&&t.hasOwnProperty("duration")&&(e.duration=t.duration),t.renditions&&t.renditions.length){e.renditions=[];for(s=0;s<t.renditions.length;++s)e.renditions[s]=c.ProtoRendition.toObject(t.renditions[s],i)}if(null!=t.mediaCreativeId&&t.hasOwnProperty("mediaCreativeId")&&(e.mediaCreativeId=t.mediaCreativeId),null!=t.ignoreFilledRequests&&t.hasOwnProperty("ignoreFilledRequests")&&(e.ignoreFilledRequests=t.ignoreFilledRequests),null!=t.requestCap&&t.hasOwnProperty("requestCap")&&(e.requestCap=t.requestCap),null!=t.impressionCap&&t.hasOwnProperty("impressionCap")&&(e.impressionCap=t.impressionCap),null!=t.successRate&&t.hasOwnProperty("successRate")&&(e.successRate=i.json&&!isFinite(t.successRate)?String(t.successRate):t.successRate),null!=t.lineItemPriority&&t.hasOwnProperty("lineItemPriority")&&(e.lineItemPriority=i.enums===String?c.ProtoLineItemPriority[t.lineItemPriority]:t.lineItemPriority),null!=t.headerBidderBids&&t.hasOwnProperty("headerBidderBids")&&(e.headerBidderBids=t.headerBidderBids),null!=t.headerBidderTimeout&&t.hasOwnProperty("headerBidderTimeout")&&(e.headerBidderTimeout=t.headerBidderTimeout),null!=t.mediaCreativeClickUrl&&t.hasOwnProperty("mediaCreativeClickUrl")&&(e.mediaCreativeClickUrl=t.mediaCreativeClickUrl),null!=t.resetRequestsCapTime&&t.hasOwnProperty("resetRequestsCapTime")&&(e.resetRequestsCapTime=t.resetRequestsCapTime),null!=t.resetImpressionsCapTime&&t.hasOwnProperty("resetImpressionsCapTime")&&(e.resetImpressionsCapTime=t.resetImpressionsCapTime),null!=t.resetCapType&&t.hasOwnProperty("resetCapType")&&(e.resetCapType=i.enums===String?c.ProtoResetCapTypeEnum[t.resetCapType]:t.resetCapType),null!=t.creativeHlsFileName&&t.hasOwnProperty("creativeHlsFileName")&&(e.creativeHlsFileName=t.creativeHlsFileName),null!=t.timeBetweenRequests&&t.hasOwnProperty("timeBetweenRequests")&&(e.timeBetweenRequests=t.timeBetweenRequests),null!=t.skipMode&&t.hasOwnProperty("skipMode")&&(e.skipMode=i.enums===String?c.ProtoAdSkipMode[t.skipMode]:t.skipMode),null!=t.mediaIdTargeting&&t.hasOwnProperty("mediaIdTargeting")&&(e.mediaIdTargeting=c.ProtoTargetingChoiceModel.toObject(t.mediaIdTargeting,i)),null!=t.mediaKeywordsTargeting&&t.hasOwnProperty("mediaKeywordsTargeting")&&(e.mediaKeywordsTargeting=c.ProtoTargetingChoiceModel.toObject(t.mediaKeywordsTargeting,i)),null!=t.mediaLanguageTargeting&&t.hasOwnProperty("mediaLanguageTargeting")&&(e.mediaLanguageTargeting=c.ProtoTargetingChoiceModel.toObject(t.mediaLanguageTargeting,i)),null!=t.adType&&t.hasOwnProperty("adType")&&(e.adType=i.enums===String?c.ProtoAdType[t.adType]:t.adType),null!=t.overlayTime&&t.hasOwnProperty("overlayTime")&&(e.overlayTime=t.overlayTime),null!=t.floorPrice&&t.hasOwnProperty("floorPrice")&&(e.floorPrice=i.json&&!isFinite(t.floorPrice)?String(t.floorPrice):t.floorPrice),null!=t.adBreakSettings&&t.hasOwnProperty("adBreakSettings")&&(e.adBreakSettings=c.ProtoLineItemAdBreakSettings.toObject(t.adBreakSettings,i)),t.floorPrices&&t.floorPrices.length){e.floorPrices=[];for(s=0;s<t.floorPrices.length;++s)e.floorPrices[s]=i.json&&!isFinite(t.floorPrices[s])?String(t.floorPrices[s]):t.floorPrices[s]}if(null!=t.bidRate&&t.hasOwnProperty("bidRate")&&(e.bidRate=i.json&&!isFinite(t.bidRate)?String(t.bidRate):t.bidRate),null!=t.pauseAdOutOfView&&t.hasOwnProperty("pauseAdOutOfView")&&(e.pauseAdOutOfView=i.enums===String?c.ProtoLineItemPauseAdOutOfViewEnum[t.pauseAdOutOfView]:t.pauseAdOutOfView),null!=t.moatTrackingEnabled&&t.hasOwnProperty("moatTrackingEnabled")&&(e.moatTrackingEnabled=t.moatTrackingEnabled),null!=t.cnxCreativeId&&t.hasOwnProperty("cnxCreativeId")&&(e.cnxCreativeId=t.cnxCreativeId),null!=t.blockedDomainsRevisionNumber&&t.hasOwnProperty("blockedDomainsRevisionNumber")&&(e.blockedDomainsRevisionNumber=t.blockedDomainsRevisionNumber),t.advertiserContextualTargeting&&t.advertiserContextualTargeting.length){e.advertiserContextualTargeting=[];for(s=0;s<t.advertiserContextualTargeting.length;++s)e.advertiserContextualTargeting[s]=c.ProtoContextualTargetingCaseModel.toObject(t.advertiserContextualTargeting[s],i)}if(t.publisherContextualTargeting&&t.publisherContextualTargeting.length){e.publisherContextualTargeting=[];for(s=0;s<t.publisherContextualTargeting.length;++s)e.publisherContextualTargeting[s]=c.ProtoContextualTargetingCaseModel.toObject(t.publisherContextualTargeting[s],i)}return null!=t.playerSizeTargetings&&t.hasOwnProperty("playerSizeTargetings")&&(e.playerSizeTargetings=c.ProtoPlayerSizeTargetings.toObject(t.playerSizeTargetings,i)),null!=t.playerSize&&t.hasOwnProperty("playerSize")&&(e.playerSize=t.playerSize),e},t}(),c.ProtoTargetingChoiceModel=function(){function t(t){if(this.items=[],t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.choiceCriteria=0,t.prototype.items=o.emptyArray,t.encode=function(t,i){if(i||(i=h.create()),null!=t.choiceCriteria&&t.hasOwnProperty("choiceCriteria")&&i.uint32(8).int32(t.choiceCriteria),null!=t.items&&t.items.length)for(var e=0;e<t.items.length;++e)i.uint32(18).string(t.items[e]);return i},t.decode=function(t,i){t instanceof a||(t=a.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoTargetingChoiceModel;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.choiceCriteria=t.int32();break;case 2:s.items&&s.items.length||(s.items=[]),s.items.push(t.string());break;default:t.skipType(7&n)}}return s},t.fromObject=function(t){if(t instanceof c.ProtoTargetingChoiceModel)return t;var i=new c.ProtoTargetingChoiceModel;switch(t.choiceCriteria){case"Only":case 0:i.choiceCriteria=0;break;case"Except":case 1:i.choiceCriteria=1}if(t.items){if(!Array.isArray(t.items))throw TypeError(".ProtoTargetingChoiceModel.items: array expected");i.items=[];for(var e=0;e<t.items.length;++e)i.items[e]=String(t.items[e])}return i},t.toObject=function(t,i){i||(i={});var e={};if((i.arrays||i.defaults)&&(e.items=[]),i.defaults&&(e.choiceCriteria=i.enums===String?"Only":0),null!=t.choiceCriteria&&t.hasOwnProperty("choiceCriteria")&&(e.choiceCriteria=i.enums===String?c.ProtoChoiceCriteriaEnum[t.choiceCriteria]:t.choiceCriteria),t.items&&t.items.length){e.items=[];for(var s=0;s<t.items.length;++s)e.items[s]=t.items[s]}return e},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.ProtoContextualTargetingCaseModel=function(){function t(t){if(this.filters=[],t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.filters=o.emptyArray,t.encode=function(t,i){if(i||(i=h.create()),null!=t.filters&&t.filters.length)for(var e=0;e<t.filters.length;++e)c.ProtoContextualTargetingFilterModel.encode(t.filters[e],i.uint32(10).fork()).ldelim();return i},t.decode=function(t,i){t instanceof a||(t=a.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoContextualTargetingCaseModel;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.filters&&s.filters.length||(s.filters=[]),s.filters.push(c.ProtoContextualTargetingFilterModel.decode(t,t.uint32()));break;default:t.skipType(7&n)}}return s},t.fromObject=function(t){if(t instanceof c.ProtoContextualTargetingCaseModel)return t;var i=new c.ProtoContextualTargetingCaseModel;if(t.filters){if(!Array.isArray(t.filters))throw TypeError(".ProtoContextualTargetingCaseModel.filters: array expected");i.filters=[];for(var e=0;e<t.filters.length;++e){if("object"!=typeof t.filters[e])throw TypeError(".ProtoContextualTargetingCaseModel.filters: object expected");i.filters[e]=c.ProtoContextualTargetingFilterModel.fromObject(t.filters[e])}}return i},t.toObject=function(t,i){i||(i={});var e={};if((i.arrays||i.defaults)&&(e.filters=[]),t.filters&&t.filters.length){e.filters=[];for(var s=0;s<t.filters.length;++s)e.filters[s]=c.ProtoContextualTargetingFilterModel.toObject(t.filters[s],i)}return e},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.ProtoContextualTargetingFilterModel=function(){function t(t){if(this.items=[],t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.type=0,t.prototype.items=o.emptyArray,t.encode=function(t,i){if(i||(i=h.create()),null!=t.type&&t.hasOwnProperty("type")&&i.uint32(8).int32(t.type),null!=t.items&&t.items.length)for(var e=0;e<t.items.length;++e)i.uint32(18).string(t.items[e]);return i},t.decode=function(t,i){t instanceof a||(t=a.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoContextualTargetingFilterModel;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.type=t.int32();break;case 2:s.items&&s.items.length||(s.items=[]),s.items.push(t.string());break;default:t.skipType(7&n)}}return s},t.fromObject=function(t){if(t instanceof c.ProtoContextualTargetingFilterModel)return t;var i=new c.ProtoContextualTargetingFilterModel;switch(t.type){case"IncludeAny":case 0:i.type=0;break;case"IncludeAll":case 1:i.type=1;break;case"ExcludeAny":case 2:i.type=2;break;case"ExcludeAll":case 3:i.type=3}if(t.items){if(!Array.isArray(t.items))throw TypeError(".ProtoContextualTargetingFilterModel.items: array expected");i.items=[];for(var e=0;e<t.items.length;++e)i.items[e]=String(t.items[e])}return i},t.toObject=function(t,i){i||(i={});var e={};if((i.arrays||i.defaults)&&(e.items=[]),i.defaults&&(e.type=i.enums===String?"IncludeAny":0),null!=t.type&&t.hasOwnProperty("type")&&(e.type=i.enums===String?c.ProtoLineItemContextualTargetingEnum[t.type]:t.type),t.items&&t.items.length){e.items=[];for(var s=0;s<t.items.length;++s)e.items[s]=t.items[s]}return e},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.ProtoPlayerSizeTargetings=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.sizeChoiceCriteria=0,t.prototype.minWidth=0,t.prototype.maxWidth=0,t.encode=function(t,i){return i||(i=h.create()),null!=t.sizeChoiceCriteria&&t.hasOwnProperty("sizeChoiceCriteria")&&i.uint32(8).int32(t.sizeChoiceCriteria),null!=t.minWidth&&t.hasOwnProperty("minWidth")&&i.uint32(16).int32(t.minWidth),null!=t.maxWidth&&t.hasOwnProperty("maxWidth")&&i.uint32(24).int32(t.maxWidth),i},t.decode=function(t,i){t instanceof a||(t=a.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoPlayerSizeTargetings;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.sizeChoiceCriteria=t.int32();break;case 2:s.minWidth=t.int32();break;case 3:s.maxWidth=t.int32();break;default:t.skipType(7&n)}}return s},t.fromObject=function(t){if(t instanceof c.ProtoPlayerSizeTargetings)return t;var i=new c.ProtoPlayerSizeTargetings;switch(t.sizeChoiceCriteria){case"GreaterThan":case 0:i.sizeChoiceCriteria=0;break;case"SmallerThan":case 1:i.sizeChoiceCriteria=1;break;case"Between":case 2:i.sizeChoiceCriteria=2}return null!=t.minWidth&&(i.minWidth=0|t.minWidth),null!=t.maxWidth&&(i.maxWidth=0|t.maxWidth),i},t.toObject=function(t,i){i||(i={});var e={};return i.defaults&&(e.sizeChoiceCriteria=i.enums===String?"GreaterThan":0,e.minWidth=0,e.maxWidth=0),null!=t.sizeChoiceCriteria&&t.hasOwnProperty("sizeChoiceCriteria")&&(e.sizeChoiceCriteria=i.enums===String?c.ProtoSizeChoiceCriteriaEnum[t.sizeChoiceCriteria]:t.sizeChoiceCriteria),null!=t.minWidth&&t.hasOwnProperty("minWidth")&&(e.minWidth=t.minWidth),null!=t.maxWidth&&t.hasOwnProperty("maxWidth")&&(e.maxWidth=t.maxWidth),e},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.ProtoRendition=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.height=0,t.prototype.codec="",t.prototype.file="",t.decode=function(t,i){t instanceof a||(t=a.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoRendition;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.height=t.int32();break;case 2:s.codec=t.string();break;case 3:s.file=t.string();break;default:t.skipType(7&n)}}return s},t.toObject=function(t,i){i||(i={});var e={};return i.defaults&&(e.height=0,e.codec="",e.file=""),null!=t.height&&t.hasOwnProperty("height")&&(e.height=t.height),null!=t.codec&&t.hasOwnProperty("codec")&&(e.codec=t.codec),null!=t.file&&t.hasOwnProperty("file")&&(e.file=t.file),e},t}(),c.ProtoLiveMediaMetadataResponse=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.startDate="",t.prototype.outputUrl="",t.prototype.thumbnailUrl="",t.prototype.altText="",t.decode=function(t,i){t instanceof a||(t=a.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoLiveMediaMetadataResponse;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.startDate=t.string();break;case 2:s.outputUrl=t.string();break;case 3:s.thumbnailUrl=t.string();break;case 4:s.altText=t.string();break;default:t.skipType(7&n)}}return s},t.toObject=function(t,i){i||(i={});var e={};return i.defaults&&(e.startDate="",e.outputUrl="",e.thumbnailUrl="",e.altText=""),null!=t.startDate&&t.hasOwnProperty("startDate")&&(e.startDate=t.startDate),null!=t.outputUrl&&t.hasOwnProperty("outputUrl")&&(e.outputUrl=t.outputUrl),null!=t.thumbnailUrl&&t.hasOwnProperty("thumbnailUrl")&&(e.thumbnailUrl=t.thumbnailUrl),null!=t.altText&&t.hasOwnProperty("altText")&&(e.altText=t.altText),e},t}(),c.ProtoLoggingLevelEnum=function(){var t={},i=Object.create(t);return i[t[0]="FATAL"]=0,i[t[1]="WARNING"]=1,i[t[2]="INFO"]=2,i}(),c.ProtoLoggingRequest=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.message="",t.prototype.version=0,t.prototype.level=0,t.prototype.callStack="",t.prototype.pageUrl="",t.prototype.exception="",t.prototype.sessionId="",t.encode=function(t,i){return i||(i=h.create()),null!=t.message&&t.hasOwnProperty("message")&&i.uint32(10).string(t.message),null!=t.version&&t.hasOwnProperty("version")&&i.uint32(16).int32(t.version),null!=t.level&&t.hasOwnProperty("level")&&i.uint32(24).int32(t.level),null!=t.callStack&&t.hasOwnProperty("callStack")&&i.uint32(34).string(t.callStack),null!=t.pageUrl&&t.hasOwnProperty("pageUrl")&&i.uint32(42).string(t.pageUrl),null!=t.exception&&t.hasOwnProperty("exception")&&i.uint32(50).string(t.exception),null!=t.sessionId&&t.hasOwnProperty("sessionId")&&i.uint32(58).string(t.sessionId),i},t.fromObject=function(t){if(t instanceof c.ProtoLoggingRequest)return t;var i=new c.ProtoLoggingRequest;switch(null!=t.message&&(i.message=String(t.message)),null!=t.version&&(i.version=0|t.version),t.level){case"FATAL":case 0:i.level=0;break;case"WARNING":case 1:i.level=1;break;case"INFO":case 2:i.level=2}return null!=t.callStack&&(i.callStack=String(t.callStack)),null!=t.pageUrl&&(i.pageUrl=String(t.pageUrl)),null!=t.exception&&(i.exception=String(t.exception)),null!=t.sessionId&&(i.sessionId=String(t.sessionId)),i},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.ProtoSpriteSheet=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.file="",t.prototype.height=0,t.prototype.count=0,t.decode=function(t,i){t instanceof a||(t=a.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoSpriteSheet;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.file=t.string();break;case 2:s.height=t.int32();break;case 3:s.count=t.int32();break;default:t.skipType(7&n)}}return s},t.toObject=function(t,i){i||(i={});var e={};return i.defaults&&(e.file="",e.height=0,e.count=0),null!=t.file&&t.hasOwnProperty("file")&&(e.file=t.file),null!=t.height&&t.hasOwnProperty("height")&&(e.height=t.height),null!=t.count&&t.hasOwnProperty("count")&&(e.count=t.count),e},t}(),c.ProtoTrack=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.file="",t.decode=function(t,i){t instanceof a||(t=a.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoTrack;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.file=t.string();break;default:t.skipType(7&n)}}return s},t.toObject=function(t,i){i||(i={});var e={};return i.defaults&&(e.file=""),null!=t.file&&t.hasOwnProperty("file")&&(e.file=t.file),e},t}(),c.ProtoCustomField=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.name="",t.prototype.value="",t.decode=function(t,i){t instanceof a||(t=a.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoCustomField;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.name=t.string();break;case 2:s.value=t.string();break;default:t.skipType(7&n)}}return s},t.toObject=function(t,i){i||(i={});var e={};return i.defaults&&(e.name="",e.value=""),null!=t.name&&t.hasOwnProperty("name")&&(e.name=t.name),null!=t.value&&t.hasOwnProperty("value")&&(e.value=t.value),e},t}(),c.ProtoMediaMetadataResponse=function(){function t(t){if(this.keywordList=[],this.trackList=[],this.renditionList=[],this.customFields=[],this.videoIndexes=[],t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.title="",t.prototype.description="",t.prototype.duration=0,t.prototype.clickUrl="",t.prototype.keywordList=o.emptyArray,t.prototype.trackList=o.emptyArray,t.prototype.spriteSheet=null,t.prototype.thumbnail="",t.prototype.renditionList=o.emptyArray,t.prototype.customFields=o.emptyArray,t.prototype.hlsFilePath="",t.prototype.languageId="",t.prototype.sourceItemId="",t.prototype.altText="",t.prototype.videoIndexes=o.emptyArray,t.decode=function(t,i){t instanceof a||(t=a.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoMediaMetadataResponse;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.title=t.string();break;case 2:s.description=t.string();break;case 3:s.duration=t.int32();break;case 4:s.clickUrl=t.string();break;case 5:s.keywordList&&s.keywordList.length||(s.keywordList=[]),s.keywordList.push(t.string());break;case 6:s.trackList&&s.trackList.length||(s.trackList=[]),s.trackList.push(c.ProtoTrack.decode(t,t.uint32()));break;case 7:s.spriteSheet=c.ProtoSpriteSheet.decode(t,t.uint32());break;case 8:s.thumbnail=t.string();break;case 9:s.renditionList&&s.renditionList.length||(s.renditionList=[]),s.renditionList.push(c.ProtoRendition.decode(t,t.uint32()));break;case 10:s.customFields&&s.customFields.length||(s.customFields=[]),s.customFields.push(c.ProtoCustomField.decode(t,t.uint32()));break;case 11:s.hlsFilePath=t.string();break;case 12:s.languageId=t.string();break;case 13:s.sourceItemId=t.string();break;case 14:s.altText=t.string();break;case 15:s.videoIndexes&&s.videoIndexes.length||(s.videoIndexes=[]),s.videoIndexes.push(t.string());break;default:t.skipType(7&n)}}return s},t.toObject=function(t,i){i||(i={});var e={};if((i.arrays||i.defaults)&&(e.keywordList=[],e.trackList=[],e.renditionList=[],e.customFields=[],e.videoIndexes=[]),i.defaults&&(e.title="",e.description="",e.duration=0,e.clickUrl="",e.spriteSheet=null,e.thumbnail="",e.hlsFilePath="",e.languageId="",e.sourceItemId="",e.altText=""),null!=t.title&&t.hasOwnProperty("title")&&(e.title=t.title),null!=t.description&&t.hasOwnProperty("description")&&(e.description=t.description),null!=t.duration&&t.hasOwnProperty("duration")&&(e.duration=t.duration),null!=t.clickUrl&&t.hasOwnProperty("clickUrl")&&(e.clickUrl=t.clickUrl),t.keywordList&&t.keywordList.length){e.keywordList=[];for(var s=0;s<t.keywordList.length;++s)e.keywordList[s]=t.keywordList[s]}if(t.trackList&&t.trackList.length){e.trackList=[];for(s=0;s<t.trackList.length;++s)e.trackList[s]=c.ProtoTrack.toObject(t.trackList[s],i)}if(null!=t.spriteSheet&&t.hasOwnProperty("spriteSheet")&&(e.spriteSheet=c.ProtoSpriteSheet.toObject(t.spriteSheet,i)),null!=t.thumbnail&&t.hasOwnProperty("thumbnail")&&(e.thumbnail=t.thumbnail),t.renditionList&&t.renditionList.length){e.renditionList=[];for(s=0;s<t.renditionList.length;++s)e.renditionList[s]=c.ProtoRendition.toObject(t.renditionList[s],i)}if(t.customFields&&t.customFields.length){e.customFields=[];for(s=0;s<t.customFields.length;++s)e.customFields[s]=c.ProtoCustomField.toObject(t.customFields[s],i)}if(null!=t.hlsFilePath&&t.hasOwnProperty("hlsFilePath")&&(e.hlsFilePath=t.hlsFilePath),null!=t.languageId&&t.hasOwnProperty("languageId")&&(e.languageId=t.languageId),null!=t.sourceItemId&&t.hasOwnProperty("sourceItemId")&&(e.sourceItemId=t.sourceItemId),null!=t.altText&&t.hasOwnProperty("altText")&&(e.altText=t.altText),t.videoIndexes&&t.videoIndexes.length){e.videoIndexes=[];for(s=0;s<t.videoIndexes.length;++s)e.videoIndexes[s]=t.videoIndexes[s]}return e},t}(),c.ProtoMediaTypeEnum=function(){var t={},i=Object.create(t);return i[t[0]="Image"]=0,i[t[1]="Video"]=1,i}(),c.ProtoRtbRequest=function(){function t(t){if(this.lineItems={},this.customMacros={},t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.metadata=null,t.prototype.coppa=!1,t.prototype.refererUrl="",t.prototype.testMode=!1,t.prototype.videoWidth=0,t.prototype.videoHeight=0,t.prototype.gdprCompliant=!1,t.prototype.soundOn=!1,t.prototype.gdprConsentData="",t.prototype.explorationMode=!1,t.prototype.viewability=!1,t.prototype.outstream=!1,t.prototype.domainURL="",t.prototype.isClickToPlay=!1,t.prototype.appVersion="",t.prototype.deviceID="",t.prototype.lineItems=o.emptyObject,t.prototype.isCcpaBlockingUserInfo=!1,t.prototype.usPrivacyString="",t.prototype.adSkippability=0,t.prototype.skipAdAfter=5,t.prototype.gdprConsentMode=0,t.prototype.maxAdDuration=180,t.prototype.customMacros=o.emptyObject,t.encode=function(t,i){if(i||(i=h.create()),null!=t.metadata&&t.hasOwnProperty("metadata")&&c.MetadataModel.encode(t.metadata,i.uint32(10).fork()).ldelim(),null!=t.coppa&&t.hasOwnProperty("coppa")&&i.uint32(32).bool(t.coppa),null!=t.refererUrl&&t.hasOwnProperty("refererUrl")&&i.uint32(42).string(t.refererUrl),null!=t.testMode&&t.hasOwnProperty("testMode")&&i.uint32(48).bool(t.testMode),null!=t.videoWidth&&t.hasOwnProperty("videoWidth")&&i.uint32(56).int32(t.videoWidth),null!=t.videoHeight&&t.hasOwnProperty("videoHeight")&&i.uint32(64).int32(t.videoHeight),null!=t.gdprCompliant&&t.hasOwnProperty("gdprCompliant")&&i.uint32(72).bool(t.gdprCompliant),null!=t.soundOn&&t.hasOwnProperty("soundOn")&&i.uint32(80).bool(t.soundOn),null!=t.gdprConsentData&&t.hasOwnProperty("gdprConsentData")&&i.uint32(90).string(t.gdprConsentData),null!=t.explorationMode&&t.hasOwnProperty("explorationMode")&&i.uint32(96).bool(t.explorationMode),null!=t.viewability&&t.hasOwnProperty("viewability")&&i.uint32(104).bool(t.viewability),null!=t.outstream&&t.hasOwnProperty("outstream")&&i.uint32(112).bool(t.outstream),null!=t.domainURL&&t.hasOwnProperty("domainURL")&&i.uint32(130).string(t.domainURL),null!=t.isClickToPlay&&t.hasOwnProperty("isClickToPlay")&&i.uint32(144).bool(t.isClickToPlay),null!=t.appVersion&&t.hasOwnProperty("appVersion")&&i.uint32(170).string(t.appVersion),null!=t.deviceID&&t.hasOwnProperty("deviceID")&&i.uint32(194).string(t.deviceID),null!=t.lineItems&&t.hasOwnProperty("lineItems"))for(var e=Object.keys(t.lineItems),s=0;s<e.length;++s)i.uint32(202).fork().uint32(10).string(e[s]),c.ProtoRtbRequestLineItemEntry.encode(t.lineItems[e[s]],i.uint32(18).fork()).ldelim().ldelim();if(null!=t.isCcpaBlockingUserInfo&&t.hasOwnProperty("isCcpaBlockingUserInfo")&&i.uint32(208).bool(t.isCcpaBlockingUserInfo),null!=t.usPrivacyString&&t.hasOwnProperty("usPrivacyString")&&i.uint32(218).string(t.usPrivacyString),null!=t.adSkippability&&t.hasOwnProperty("adSkippability")&&i.uint32(256).int32(t.adSkippability),null!=t.skipAdAfter&&t.hasOwnProperty("skipAdAfter")&&i.uint32(264).int32(t.skipAdAfter),null!=t.gdprConsentMode&&t.hasOwnProperty("gdprConsentMode")&&i.uint32(288).int32(t.gdprConsentMode),null!=t.maxAdDuration&&t.hasOwnProperty("maxAdDuration")&&i.uint32(296).int32(t.maxAdDuration),null!=t.customMacros&&t.hasOwnProperty("customMacros"))for(e=Object.keys(t.customMacros),s=0;s<e.length;++s)i.uint32(306).fork().uint32(10).string(e[s]).uint32(18).string(t.customMacros[e[s]]).ldelim();return i},t.fromObject=function(t){if(t instanceof c.ProtoRtbRequest)return t;var i=new c.ProtoRtbRequest;if(null!=t.metadata){if("object"!=typeof t.metadata)throw TypeError(".ProtoRtbRequest.metadata: object expected");i.metadata=c.MetadataModel.fromObject(t.metadata)}if(null!=t.coppa&&(i.coppa=Boolean(t.coppa)),null!=t.refererUrl&&(i.refererUrl=String(t.refererUrl)),null!=t.testMode&&(i.testMode=Boolean(t.testMode)),null!=t.videoWidth&&(i.videoWidth=0|t.videoWidth),null!=t.videoHeight&&(i.videoHeight=0|t.videoHeight),null!=t.gdprCompliant&&(i.gdprCompliant=Boolean(t.gdprCompliant)),null!=t.soundOn&&(i.soundOn=Boolean(t.soundOn)),null!=t.gdprConsentData&&(i.gdprConsentData=String(t.gdprConsentData)),null!=t.explorationMode&&(i.explorationMode=Boolean(t.explorationMode)),null!=t.viewability&&(i.viewability=Boolean(t.viewability)),null!=t.outstream&&(i.outstream=Boolean(t.outstream)),null!=t.domainURL&&(i.domainURL=String(t.domainURL)),null!=t.isClickToPlay&&(i.isClickToPlay=Boolean(t.isClickToPlay)),null!=t.appVersion&&(i.appVersion=String(t.appVersion)),null!=t.deviceID&&(i.deviceID=String(t.deviceID)),t.lineItems){if("object"!=typeof t.lineItems)throw TypeError(".ProtoRtbRequest.lineItems: object expected");i.lineItems={};for(var e=Object.keys(t.lineItems),s=0;s<e.length;++s){if("object"!=typeof t.lineItems[e[s]])throw TypeError(".ProtoRtbRequest.lineItems: object expected");i.lineItems[e[s]]=c.ProtoRtbRequestLineItemEntry.fromObject(t.lineItems[e[s]])}}switch(null!=t.isCcpaBlockingUserInfo&&(i.isCcpaBlockingUserInfo=Boolean(t.isCcpaBlockingUserInfo)),null!=t.usPrivacyString&&(i.usPrivacyString=String(t.usPrivacyString)),t.adSkippability){case"IfLongerThan31Sec":case 0:i.adSkippability=0;break;case"Always":case 1:i.adSkippability=1;break;case"NoRestrictions":case 2:i.adSkippability=2}switch(null!=t.skipAdAfter&&(i.skipAdAfter=0|t.skipAdAfter),t.gdprConsentMode){case"Unknown":case 0:i.gdprConsentMode=0;break;case"NoCmp":case 1:i.gdprConsentMode=1;break;case"NoConsent":case 2:i.gdprConsentMode=2;break;case"NoConnatixConsent":case 3:i.gdprConsentMode=3;break;case"NotAllDemandConsent":case 4:i.gdprConsentMode=4;break;case"AllGood":case 5:i.gdprConsentMode=5}if(null!=t.maxAdDuration&&(i.maxAdDuration=0|t.maxAdDuration),t.customMacros){if("object"!=typeof t.customMacros)throw TypeError(".ProtoRtbRequest.customMacros: object expected");i.customMacros={};for(e=Object.keys(t.customMacros),s=0;s<e.length;++s)i.customMacros[e[s]]=String(t.customMacros[e[s]])}return i},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.ProtoRtbRequestLineItemEntry=function(){function t(t){if(this.ignoredFloorPriceFactorIndexes=[],t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.availableRequests=0,t.prototype.cachedFloorPrice=0,t.prototype.ignoredFloorPriceFactorIndexes=o.emptyArray,t.prototype.gdprConsent=!1,t.prototype.publisherLineItemId="",t.prototype.slotWidth=0,t.prototype.slotHeight=0,t.encode=function(t,i){if(i||(i=h.create()),null!=t.availableRequests&&t.hasOwnProperty("availableRequests")&&i.uint32(8).int32(t.availableRequests),null!=t.cachedFloorPrice&&t.hasOwnProperty("cachedFloorPrice")&&i.uint32(17).double(t.cachedFloorPrice),null!=t.ignoredFloorPriceFactorIndexes&&t.ignoredFloorPriceFactorIndexes.length){i.uint32(26).fork();for(var e=0;e<t.ignoredFloorPriceFactorIndexes.length;++e)i.int32(t.ignoredFloorPriceFactorIndexes[e]);i.ldelim()}return null!=t.gdprConsent&&t.hasOwnProperty("gdprConsent")&&i.uint32(32).bool(t.gdprConsent),null!=t.publisherLineItemId&&t.hasOwnProperty("publisherLineItemId")&&i.uint32(42).string(t.publisherLineItemId),null!=t.slotWidth&&t.hasOwnProperty("slotWidth")&&i.uint32(48).int32(t.slotWidth),null!=t.slotHeight&&t.hasOwnProperty("slotHeight")&&i.uint32(56).int32(t.slotHeight),i},t.decode=function(t,i){t instanceof a||(t=a.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoRtbRequestLineItemEntry;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.availableRequests=t.int32();break;case 2:s.cachedFloorPrice=t.double();break;case 3:if(s.ignoredFloorPriceFactorIndexes&&s.ignoredFloorPriceFactorIndexes.length||(s.ignoredFloorPriceFactorIndexes=[]),2==(7&n))for(var r=t.uint32()+t.pos;t.pos<r;)s.ignoredFloorPriceFactorIndexes.push(t.int32());else s.ignoredFloorPriceFactorIndexes.push(t.int32());break;case 4:s.gdprConsent=t.bool();break;case 5:s.publisherLineItemId=t.string();break;case 6:s.slotWidth=t.int32();break;case 7:s.slotHeight=t.int32();break;default:t.skipType(7&n)}}return s},t.fromObject=function(t){if(t instanceof c.ProtoRtbRequestLineItemEntry)return t;var i=new c.ProtoRtbRequestLineItemEntry;if(null!=t.availableRequests&&(i.availableRequests=0|t.availableRequests),null!=t.cachedFloorPrice&&(i.cachedFloorPrice=Number(t.cachedFloorPrice)),t.ignoredFloorPriceFactorIndexes){if(!Array.isArray(t.ignoredFloorPriceFactorIndexes))throw TypeError(".ProtoRtbRequestLineItemEntry.ignoredFloorPriceFactorIndexes: array expected");i.ignoredFloorPriceFactorIndexes=[];for(var e=0;e<t.ignoredFloorPriceFactorIndexes.length;++e)i.ignoredFloorPriceFactorIndexes[e]=0|t.ignoredFloorPriceFactorIndexes[e]}return null!=t.gdprConsent&&(i.gdprConsent=Boolean(t.gdprConsent)),null!=t.publisherLineItemId&&(i.publisherLineItemId=String(t.publisherLineItemId)),null!=t.slotWidth&&(i.slotWidth=0|t.slotWidth),null!=t.slotHeight&&(i.slotHeight=0|t.slotHeight),i},t.toObject=function(t,i){i||(i={});var e={};if((i.arrays||i.defaults)&&(e.ignoredFloorPriceFactorIndexes=[]),i.defaults&&(e.availableRequests=0,e.cachedFloorPrice=0,e.gdprConsent=!1,e.publisherLineItemId="",e.slotWidth=0,e.slotHeight=0),null!=t.availableRequests&&t.hasOwnProperty("availableRequests")&&(e.availableRequests=t.availableRequests),null!=t.cachedFloorPrice&&t.hasOwnProperty("cachedFloorPrice")&&(e.cachedFloorPrice=i.json&&!isFinite(t.cachedFloorPrice)?String(t.cachedFloorPrice):t.cachedFloorPrice),t.ignoredFloorPriceFactorIndexes&&t.ignoredFloorPriceFactorIndexes.length){e.ignoredFloorPriceFactorIndexes=[];for(var s=0;s<t.ignoredFloorPriceFactorIndexes.length;++s)e.ignoredFloorPriceFactorIndexes[s]=t.ignoredFloorPriceFactorIndexes[s]}return null!=t.gdprConsent&&t.hasOwnProperty("gdprConsent")&&(e.gdprConsent=t.gdprConsent),null!=t.publisherLineItemId&&t.hasOwnProperty("publisherLineItemId")&&(e.publisherLineItemId=t.publisherLineItemId),null!=t.slotWidth&&t.hasOwnProperty("slotWidth")&&(e.slotWidth=t.slotWidth),null!=t.slotHeight&&t.hasOwnProperty("slotHeight")&&(e.slotHeight=t.slotHeight),e},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.ProtoRtbResponse=function(){function t(t){if(this.lineItemResponses=[],t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.lineItemResponses=o.emptyArray,t.decode=function(t,i){t instanceof a||(t=a.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoRtbResponse;t.pos<e;){var n=t.uint32();switch(n>>>3){case 3:s.lineItemResponses&&s.lineItemResponses.length||(s.lineItemResponses=[]),s.lineItemResponses.push(c.ProtoRtbLineItem.decode(t,t.uint32()));break;default:t.skipType(7&n)}}return s},t.toObject=function(t,i){i||(i={});var e={};if((i.arrays||i.defaults)&&(e.lineItemResponses=[]),t.lineItemResponses&&t.lineItemResponses.length){e.lineItemResponses=[];for(var s=0;s<t.lineItemResponses.length;++s)e.lineItemResponses[s]=c.ProtoRtbLineItem.toObject(t.lineItemResponses[s],i)}return e},t}(),c.ProtoRtbBid=function(){function t(t){if(this.billingNoticeUrlList=[],t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.winNoticeUrl="",t.prototype.adQualityCheckUrl="",t.prototype.vastTag="",t.prototype.encryptedPrice="",t.prototype.creativeId="",t.prototype.seatId="",t.prototype.adomain="",t.prototype.syncedUser=!1,t.prototype.requestedFloorPrice=0,t.prototype.floorPriceFactorIndex=0,t.prototype.campaignId="",t.prototype.width=0,t.prototype.height=0,t.prototype.billingNoticeUrlList=o.emptyArray,t.prototype.mime="text/html",t.prototype.gtkpbp=0,t.prototype.successRate=0,t.prototype.impressionTimeSpent=0,t.prototype.bidRate=0,t.prototype.dspId="",t.prototype.cnxBidId="",t.encode=function(t,i){if(i||(i=h.create()),null!=t.winNoticeUrl&&t.hasOwnProperty("winNoticeUrl")&&i.uint32(18).string(t.winNoticeUrl),null!=t.adQualityCheckUrl&&t.hasOwnProperty("adQualityCheckUrl")&&i.uint32(26).string(t.adQualityCheckUrl),null!=t.vastTag&&t.hasOwnProperty("vastTag")&&i.uint32(34).string(t.vastTag),null!=t.encryptedPrice&&t.hasOwnProperty("encryptedPrice")&&i.uint32(50).string(t.encryptedPrice),null!=t.creativeId&&t.hasOwnProperty("creativeId")&&i.uint32(58).string(t.creativeId),null!=t.seatId&&t.hasOwnProperty("seatId")&&i.uint32(66).string(t.seatId),null!=t.adomain&&t.hasOwnProperty("adomain")&&i.uint32(74).string(t.adomain),null!=t.syncedUser&&t.hasOwnProperty("syncedUser")&&i.uint32(80).bool(t.syncedUser),null!=t.requestedFloorPrice&&t.hasOwnProperty("requestedFloorPrice")&&i.uint32(89).double(t.requestedFloorPrice),null!=t.floorPriceFactorIndex&&t.hasOwnProperty("floorPriceFactorIndex")&&i.uint32(96).int32(t.floorPriceFactorIndex),null!=t.campaignId&&t.hasOwnProperty("campaignId")&&i.uint32(106).string(t.campaignId),null!=t.width&&t.hasOwnProperty("width")&&i.uint32(112).int32(t.width),null!=t.height&&t.hasOwnProperty("height")&&i.uint32(120).int32(t.height),null!=t.billingNoticeUrlList&&t.billingNoticeUrlList.length)for(var e=0;e<t.billingNoticeUrlList.length;++e)i.uint32(130).string(t.billingNoticeUrlList[e]);return null!=t.mime&&t.hasOwnProperty("mime")&&i.uint32(138).string(t.mime),null!=t.gtkpbp&&t.hasOwnProperty("gtkpbp")&&i.uint32(145).double(t.gtkpbp),null!=t.successRate&&t.hasOwnProperty("successRate")&&i.uint32(153).double(t.successRate),null!=t.impressionTimeSpent&&t.hasOwnProperty("impressionTimeSpent")&&i.uint32(160).int32(t.impressionTimeSpent),null!=t.bidRate&&t.hasOwnProperty("bidRate")&&i.uint32(169).double(t.bidRate),null!=t.dspId&&t.hasOwnProperty("dspId")&&i.uint32(178).string(t.dspId),null!=t.cnxBidId&&t.hasOwnProperty("cnxBidId")&&i.uint32(186).string(t.cnxBidId),i},t.decode=function(t,i){t instanceof a||(t=a.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoRtbBid;t.pos<e;){var n=t.uint32();switch(n>>>3){case 2:s.winNoticeUrl=t.string();break;case 3:s.adQualityCheckUrl=t.string();break;case 4:s.vastTag=t.string();break;case 6:s.encryptedPrice=t.string();break;case 7:s.creativeId=t.string();break;case 8:s.seatId=t.string();break;case 9:s.adomain=t.string();break;case 10:s.syncedUser=t.bool();break;case 11:s.requestedFloorPrice=t.double();break;case 12:s.floorPriceFactorIndex=t.int32();break;case 13:s.campaignId=t.string();break;case 14:s.width=t.int32();break;case 15:s.height=t.int32();break;case 16:s.billingNoticeUrlList&&s.billingNoticeUrlList.length||(s.billingNoticeUrlList=[]),s.billingNoticeUrlList.push(t.string());break;case 17:s.mime=t.string();break;case 18:s.gtkpbp=t.double();break;case 19:s.successRate=t.double();break;case 20:s.impressionTimeSpent=t.int32();break;case 21:s.bidRate=t.double();break;case 22:s.dspId=t.string();break;case 23:s.cnxBidId=t.string();break;default:t.skipType(7&n)}}return s},t.fromObject=function(t){if(t instanceof c.ProtoRtbBid)return t;var i=new c.ProtoRtbBid;if(null!=t.winNoticeUrl&&(i.winNoticeUrl=String(t.winNoticeUrl)),null!=t.adQualityCheckUrl&&(i.adQualityCheckUrl=String(t.adQualityCheckUrl)),null!=t.vastTag&&(i.vastTag=String(t.vastTag)),null!=t.encryptedPrice&&(i.encryptedPrice=String(t.encryptedPrice)),null!=t.creativeId&&(i.creativeId=String(t.creativeId)),null!=t.seatId&&(i.seatId=String(t.seatId)),null!=t.adomain&&(i.adomain=String(t.adomain)),null!=t.syncedUser&&(i.syncedUser=Boolean(t.syncedUser)),null!=t.requestedFloorPrice&&(i.requestedFloorPrice=Number(t.requestedFloorPrice)),null!=t.floorPriceFactorIndex&&(i.floorPriceFactorIndex=0|t.floorPriceFactorIndex),null!=t.campaignId&&(i.campaignId=String(t.campaignId)),null!=t.width&&(i.width=0|t.width),null!=t.height&&(i.height=0|t.height),t.billingNoticeUrlList){if(!Array.isArray(t.billingNoticeUrlList))throw TypeError(".ProtoRtbBid.billingNoticeUrlList: array expected");i.billingNoticeUrlList=[];for(var e=0;e<t.billingNoticeUrlList.length;++e)i.billingNoticeUrlList[e]=String(t.billingNoticeUrlList[e])}return null!=t.mime&&(i.mime=String(t.mime)),null!=t.gtkpbp&&(i.gtkpbp=Number(t.gtkpbp)),null!=t.successRate&&(i.successRate=Number(t.successRate)),null!=t.impressionTimeSpent&&(i.impressionTimeSpent=0|t.impressionTimeSpent),null!=t.bidRate&&(i.bidRate=Number(t.bidRate)),null!=t.dspId&&(i.dspId=String(t.dspId)),null!=t.cnxBidId&&(i.cnxBidId=String(t.cnxBidId)),i},t.toObject=function(t,i){i||(i={});var e={};if((i.arrays||i.defaults)&&(e.billingNoticeUrlList=[]),i.defaults&&(e.winNoticeUrl="",e.adQualityCheckUrl="",e.vastTag="",e.encryptedPrice="",e.creativeId="",e.seatId="",e.adomain="",e.syncedUser=!1,e.requestedFloorPrice=0,e.floorPriceFactorIndex=0,e.campaignId="",e.width=0,e.height=0,e.mime="text/html",e.gtkpbp=0,e.successRate=0,e.impressionTimeSpent=0,e.bidRate=0,e.dspId="",e.cnxBidId=""),null!=t.winNoticeUrl&&t.hasOwnProperty("winNoticeUrl")&&(e.winNoticeUrl=t.winNoticeUrl),null!=t.adQualityCheckUrl&&t.hasOwnProperty("adQualityCheckUrl")&&(e.adQualityCheckUrl=t.adQualityCheckUrl),null!=t.vastTag&&t.hasOwnProperty("vastTag")&&(e.vastTag=t.vastTag),null!=t.encryptedPrice&&t.hasOwnProperty("encryptedPrice")&&(e.encryptedPrice=t.encryptedPrice),null!=t.creativeId&&t.hasOwnProperty("creativeId")&&(e.creativeId=t.creativeId),null!=t.seatId&&t.hasOwnProperty("seatId")&&(e.seatId=t.seatId),null!=t.adomain&&t.hasOwnProperty("adomain")&&(e.adomain=t.adomain),null!=t.syncedUser&&t.hasOwnProperty("syncedUser")&&(e.syncedUser=t.syncedUser),null!=t.requestedFloorPrice&&t.hasOwnProperty("requestedFloorPrice")&&(e.requestedFloorPrice=i.json&&!isFinite(t.requestedFloorPrice)?String(t.requestedFloorPrice):t.requestedFloorPrice),null!=t.floorPriceFactorIndex&&t.hasOwnProperty("floorPriceFactorIndex")&&(e.floorPriceFactorIndex=t.floorPriceFactorIndex),null!=t.campaignId&&t.hasOwnProperty("campaignId")&&(e.campaignId=t.campaignId),null!=t.width&&t.hasOwnProperty("width")&&(e.width=t.width),null!=t.height&&t.hasOwnProperty("height")&&(e.height=t.height),t.billingNoticeUrlList&&t.billingNoticeUrlList.length){e.billingNoticeUrlList=[];for(var s=0;s<t.billingNoticeUrlList.length;++s)e.billingNoticeUrlList[s]=t.billingNoticeUrlList[s]}return null!=t.mime&&t.hasOwnProperty("mime")&&(e.mime=t.mime),null!=t.gtkpbp&&t.hasOwnProperty("gtkpbp")&&(e.gtkpbp=i.json&&!isFinite(t.gtkpbp)?String(t.gtkpbp):t.gtkpbp),null!=t.successRate&&t.hasOwnProperty("successRate")&&(e.successRate=i.json&&!isFinite(t.successRate)?String(t.successRate):t.successRate),null!=t.impressionTimeSpent&&t.hasOwnProperty("impressionTimeSpent")&&(e.impressionTimeSpent=t.impressionTimeSpent),null!=t.bidRate&&t.hasOwnProperty("bidRate")&&(e.bidRate=i.json&&!isFinite(t.bidRate)?String(t.bidRate):t.bidRate),null!=t.dspId&&t.hasOwnProperty("dspId")&&(e.dspId=t.dspId),null!=t.cnxBidId&&t.hasOwnProperty("cnxBidId")&&(e.cnxBidId=t.cnxBidId),e},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.ProtoRtbNoBid=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.connatixReason=0,t.prototype.partnerReason=0,t.prototype.syncedUser=!1,t.prototype.requestedFloorPrice=0,t.prototype.floorPriceFactorIndex=0,t.prototype.partnerCustomHeaders="",t.encode=function(t,i){return i||(i=h.create()),null!=t.connatixReason&&t.hasOwnProperty("connatixReason")&&i.uint32(8).int32(t.connatixReason),null!=t.partnerReason&&t.hasOwnProperty("partnerReason")&&i.uint32(16).int32(t.partnerReason),null!=t.syncedUser&&t.hasOwnProperty("syncedUser")&&i.uint32(24).bool(t.syncedUser),null!=t.requestedFloorPrice&&t.hasOwnProperty("requestedFloorPrice")&&i.uint32(33).double(t.requestedFloorPrice),null!=t.floorPriceFactorIndex&&t.hasOwnProperty("floorPriceFactorIndex")&&i.uint32(40).int32(t.floorPriceFactorIndex),null!=t.partnerCustomHeaders&&t.hasOwnProperty("partnerCustomHeaders")&&i.uint32(50).string(t.partnerCustomHeaders),i},t.decode=function(t,i){t instanceof a||(t=a.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoRtbNoBid;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.connatixReason=t.int32();break;case 2:s.partnerReason=t.int32();break;case 3:s.syncedUser=t.bool();break;case 4:s.requestedFloorPrice=t.double();break;case 5:s.floorPriceFactorIndex=t.int32();break;case 6:s.partnerCustomHeaders=t.string();break;default:t.skipType(7&n)}}return s},t.fromObject=function(t){if(t instanceof c.ProtoRtbNoBid)return t;var i=new c.ProtoRtbNoBid;switch(t.connatixReason){case"RequestException":case 0:i.connatixReason=0;break;case"Timeout":case 1:i.connatixReason=1;break;case"EmptyResponse":case 2:i.connatixReason=2;break;case"InvalidResponse":case 3:i.connatixReason=3;break;case"NoBid":case 4:i.connatixReason=4;break;case"BidBelowFloor":case 5:i.connatixReason=5;break;case"DealIdMismatch":case 6:i.connatixReason=6;break;case"CsInvalidResponse":case 7:i.connatixReason=7;break;case"CsRequestException":case 8:i.connatixReason=8;break;case"CsEmptyResponse":case 9:i.connatixReason=9;break;case"NoLibInPage":case 11:i.connatixReason=11}switch(t.partnerReason){case"Unknown":case 0:i.partnerReason=0;break;case"TechnicalError":case 1:i.partnerReason=1;break;case"InvalidRequest":case 2:i.partnerReason=2;break;case"KnownWebSpider":case 3:i.partnerReason=3;break;case"SuspectedNonHumanTraffic":case 4:i.partnerReason=4;break;case"CloudIP":case 5:i.partnerReason=5;break;case"UnsupportedDevice":case 6:i.partnerReason=6;break;case"BlockedPublisher":case 7:i.partnerReason=7;break;case"UnmatchedUser":case 8:i.partnerReason=8;break;case"DailyReaderCapMet":case 9:i.partnerReason=9;break;case"DailyDomainCapMet":case 10:i.partnerReason=10}return null!=t.syncedUser&&(i.syncedUser=Boolean(t.syncedUser)),null!=t.requestedFloorPrice&&(i.requestedFloorPrice=Number(t.requestedFloorPrice)),null!=t.floorPriceFactorIndex&&(i.floorPriceFactorIndex=0|t.floorPriceFactorIndex),null!=t.partnerCustomHeaders&&(i.partnerCustomHeaders=String(t.partnerCustomHeaders)),i},t.toObject=function(t,i){i||(i={});var e={};return i.defaults&&(e.connatixReason=i.enums===String?"RequestException":0,e.partnerReason=i.enums===String?"Unknown":0,e.syncedUser=!1,e.requestedFloorPrice=0,e.floorPriceFactorIndex=0,e.partnerCustomHeaders=""),null!=t.connatixReason&&t.hasOwnProperty("connatixReason")&&(e.connatixReason=i.enums===String?c.ConnatixNoBidReasonEnum[t.connatixReason]:t.connatixReason),null!=t.partnerReason&&t.hasOwnProperty("partnerReason")&&(e.partnerReason=i.enums===String?c.PartnerNoBidReasonEnum[t.partnerReason]:t.partnerReason),null!=t.syncedUser&&t.hasOwnProperty("syncedUser")&&(e.syncedUser=t.syncedUser),null!=t.requestedFloorPrice&&t.hasOwnProperty("requestedFloorPrice")&&(e.requestedFloorPrice=i.json&&!isFinite(t.requestedFloorPrice)?String(t.requestedFloorPrice):t.requestedFloorPrice),null!=t.floorPriceFactorIndex&&t.hasOwnProperty("floorPriceFactorIndex")&&(e.floorPriceFactorIndex=t.floorPriceFactorIndex),null!=t.partnerCustomHeaders&&t.hasOwnProperty("partnerCustomHeaders")&&(e.partnerCustomHeaders=t.partnerCustomHeaders),e},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.ProtoRtbLineItem=function(){function t(t){if(this.bids=[],this.noBids=[],t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.id="",t.prototype.cachedFloorPrice=0,t.prototype.bids=o.emptyArray,t.prototype.noBids=o.emptyArray,t.encode=function(t,i){if(i||(i=h.create()),null!=t.id&&t.hasOwnProperty("id")&&i.uint32(10).string(t.id),null!=t.cachedFloorPrice&&t.hasOwnProperty("cachedFloorPrice")&&i.uint32(17).double(t.cachedFloorPrice),null!=t.bids&&t.bids.length)for(var e=0;e<t.bids.length;++e)c.ProtoRtbBid.encode(t.bids[e],i.uint32(26).fork()).ldelim();if(null!=t.noBids&&t.noBids.length)for(e=0;e<t.noBids.length;++e)c.ProtoRtbNoBid.encode(t.noBids[e],i.uint32(34).fork()).ldelim();return i},t.decode=function(t,i){t instanceof a||(t=a.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoRtbLineItem;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.id=t.string();break;case 2:s.cachedFloorPrice=t.double();break;case 3:s.bids&&s.bids.length||(s.bids=[]),s.bids.push(c.ProtoRtbBid.decode(t,t.uint32()));break;case 4:s.noBids&&s.noBids.length||(s.noBids=[]),s.noBids.push(c.ProtoRtbNoBid.decode(t,t.uint32()));break;default:t.skipType(7&n)}}return s},t.fromObject=function(t){if(t instanceof c.ProtoRtbLineItem)return t;var i=new c.ProtoRtbLineItem;if(null!=t.id&&(i.id=String(t.id)),null!=t.cachedFloorPrice&&(i.cachedFloorPrice=Number(t.cachedFloorPrice)),t.bids){if(!Array.isArray(t.bids))throw TypeError(".ProtoRtbLineItem.bids: array expected");i.bids=[];for(var e=0;e<t.bids.length;++e){if("object"!=typeof t.bids[e])throw TypeError(".ProtoRtbLineItem.bids: object expected");i.bids[e]=c.ProtoRtbBid.fromObject(t.bids[e])}}if(t.noBids){if(!Array.isArray(t.noBids))throw TypeError(".ProtoRtbLineItem.noBids: array expected");i.noBids=[];for(e=0;e<t.noBids.length;++e){if("object"!=typeof t.noBids[e])throw TypeError(".ProtoRtbLineItem.noBids: object expected");i.noBids[e]=c.ProtoRtbNoBid.fromObject(t.noBids[e])}}return i},t.toObject=function(t,i){i||(i={});var e={};if((i.arrays||i.defaults)&&(e.bids=[],e.noBids=[]),i.defaults&&(e.id="",e.cachedFloorPrice=0),null!=t.id&&t.hasOwnProperty("id")&&(e.id=t.id),null!=t.cachedFloorPrice&&t.hasOwnProperty("cachedFloorPrice")&&(e.cachedFloorPrice=i.json&&!isFinite(t.cachedFloorPrice)?String(t.cachedFloorPrice):t.cachedFloorPrice),t.bids&&t.bids.length){e.bids=[];for(var s=0;s<t.bids.length;++s)e.bids[s]=c.ProtoRtbBid.toObject(t.bids[s],i)}if(t.noBids&&t.noBids.length){e.noBids=[];for(s=0;s<t.noBids.length;++s)e.noBids[s]=c.ProtoRtbNoBid.toObject(t.noBids[s],i)}return e},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.ConnatixNoBidReasonEnum=function(){var t={},i=Object.create(t);return i[t[0]="RequestException"]=0,i[t[1]="Timeout"]=1,i[t[2]="EmptyResponse"]=2,i[t[3]="InvalidResponse"]=3,i[t[4]="NoBid"]=4,i[t[5]="BidBelowFloor"]=5,i[t[6]="DealIdMismatch"]=6,i[t[7]="CsInvalidResponse"]=7,i[t[8]="CsRequestException"]=8,i[t[9]="CsEmptyResponse"]=9,i[t[11]="NoLibInPage"]=11,i}(),c.PartnerNoBidReasonEnum=function(){var t={},i=Object.create(t);return i[t[0]="Unknown"]=0,i[t[1]="TechnicalError"]=1,i[t[2]="InvalidRequest"]=2,i[t[3]="KnownWebSpider"]=3,i[t[4]="SuspectedNonHumanTraffic"]=4,i[t[5]="CloudIP"]=5,i[t[6]="UnsupportedDevice"]=6,i[t[7]="BlockedPublisher"]=7,i[t[8]="UnmatchedUser"]=8,i[t[9]="DailyReaderCapMet"]=9,i[t[10]="DailyDomainCapMet"]=10,i}(),c.ProtoSupplyChain=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.businessDomain="",t.prototype.supplyChainId="",t.decode=function(t,i){t instanceof a||(t=a.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoSupplyChain;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.businessDomain=t.string();break;case 3:s.supplyChainId=t.string();break;default:t.skipType(7&n)}}return s},t.toObject=function(t,i){i||(i={});var e={};return i.defaults&&(e.businessDomain="",e.supplyChainId=""),null!=t.businessDomain&&t.hasOwnProperty("businessDomain")&&(e.businessDomain=t.businessDomain),null!=t.supplyChainId&&t.hasOwnProperty("supplyChainId")&&(e.supplyChainId=t.supplyChainId),e},t}(),c.ProtoAdBlockDetectionTypeEnum=function(){var t={},i=Object.create(t);return i[t[0]="Banner"]=0,i[t[1]="Network"]=1,i}(),c.ProtoAdClickTrackingRequest=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.trackingRequestMeta=null,t.prototype.mediaGuid="",t.prototype.publisherLineItemId="",t.prototype.advertiserLineItemId="",t.prototype.type=1,t.encode=function(t,i){return i||(i=h.create()),null!=t.trackingRequestMeta&&t.hasOwnProperty("trackingRequestMeta")&&c.MetadataModel.encode(t.trackingRequestMeta,i.uint32(10).fork()).ldelim(),null!=t.mediaGuid&&t.hasOwnProperty("mediaGuid")&&i.uint32(18).string(t.mediaGuid),null!=t.publisherLineItemId&&t.hasOwnProperty("publisherLineItemId")&&i.uint32(26).string(t.publisherLineItemId),null!=t.advertiserLineItemId&&t.hasOwnProperty("advertiserLineItemId")&&i.uint32(34).string(t.advertiserLineItemId),null!=t.type&&t.hasOwnProperty("type")&&i.uint32(40).int32(t.type),i},t.fromObject=function(t){if(t instanceof c.ProtoAdClickTrackingRequest)return t;var i=new c.ProtoAdClickTrackingRequest;if(null!=t.trackingRequestMeta){if("object"!=typeof t.trackingRequestMeta)throw TypeError(".ProtoAdClickTrackingRequest.trackingRequestMeta: object expected");i.trackingRequestMeta=c.MetadataModel.fromObject(t.trackingRequestMeta)}switch(null!=t.mediaGuid&&(i.mediaGuid=String(t.mediaGuid)),null!=t.publisherLineItemId&&(i.publisherLineItemId=String(t.publisherLineItemId)),null!=t.advertiserLineItemId&&(i.advertiserLineItemId=String(t.advertiserLineItemId)),t.type){case"AdClick":case 1:i.type=1;break;case"AdClickThrough":case 2:i.type=2;break;case"AdSkipClick":case 3:i.type=3;break;case"VolumeClick":case 4:i.type=4;break;case"PauseClick":case 5:i.type=5;break;case"PlayClick":case 6:i.type=6;break;case"FullScreenClick":case 7:i.type=7;break;case"MuteClick":case 8:i.type=8;break;case"UnmuteClick":case 9:i.type=9}return i},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.ProtoAdClickTypeEnum=function(){var t={},i=Object.create(t);return i[t[1]="AdClick"]=1,i[t[2]="AdClickThrough"]=2,i[t[3]="AdSkipClick"]=3,i[t[4]="VolumeClick"]=4,i[t[5]="PauseClick"]=5,i[t[6]="PlayClick"]=6,i[t[7]="FullScreenClick"]=7,i[t[8]="MuteClick"]=8,i[t[9]="UnmuteClick"]=9,i}(),c.ProtoAdOpportunityRequest=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.sessionId="",t.prototype.trackingRequestMeta=null,t.prototype.adBreak=0,t.encode=function(t,i){return i||(i=h.create()),null!=t.sessionId&&t.hasOwnProperty("sessionId")&&i.uint32(10).string(t.sessionId),null!=t.trackingRequestMeta&&t.hasOwnProperty("trackingRequestMeta")&&c.MetadataModel.encode(t.trackingRequestMeta,i.uint32(18).fork()).ldelim(),null!=t.adBreak&&t.hasOwnProperty("adBreak")&&i.uint32(24).int32(t.adBreak),i},t.fromObject=function(t){if(t instanceof c.ProtoAdOpportunityRequest)return t;var i=new c.ProtoAdOpportunityRequest;if(null!=t.sessionId&&(i.sessionId=String(t.sessionId)),null!=t.trackingRequestMeta){if("object"!=typeof t.trackingRequestMeta)throw TypeError(".ProtoAdOpportunityRequest.trackingRequestMeta: object expected");i.trackingRequestMeta=c.MetadataModel.fromObject(t.trackingRequestMeta)}switch(t.adBreak){case"None":case 0:i.adBreak=0;break;case"PreRoll":case 1:i.adBreak=1;break;case"MidRoll":case 2:i.adBreak=2;break;case"PostRoll":case 3:i.adBreak=3}return i},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.ProtoAdsourceTypeEnum=function(){var t={},i=Object.create(t);return i[t[0]="Unknown"]=0,i[t[1]="Vpaid"]=1,i[t[2]="VastMedia"]=2,i[t[3]="CnxMedia"]=3,i[t[4]="Jw"]=4,i[t[5]="Ima"]=5,i[t[6]="AOL"]=6,i}(),c.ProtoGdprConsentModeEnum=function(){var t={},i=Object.create(t);return i[t[0]="Unknown"]=0,i[t[1]="NoCmp"]=1,i[t[2]="NoConsent"]=2,i[t[3]="NoConnatixConsent"]=3,i[t[4]="NotAllDemandConsent"]=4,i[t[5]="AllGood"]=5,i}(),c.ProtoPrebid=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.publisherLineItemId="",t.prototype.advertiserLineItemId="",t.prototype.syncedUser=!1,t.prototype.timeSpent=0,t.prototype.reason=0,t.prototype.rtbRequestNumber=0,t.prototype.partnerReason=0,t.prototype.requestedFloorPrice=0,t.prototype.partnerCustomHeaders="",t.prototype.prebidJsBidderName="",t.encode=function(t,i){return i||(i=h.create()),null!=t.publisherLineItemId&&t.hasOwnProperty("publisherLineItemId")&&i.uint32(10).string(t.publisherLineItemId),null!=t.advertiserLineItemId&&t.hasOwnProperty("advertiserLineItemId")&&i.uint32(18).string(t.advertiserLineItemId),null!=t.syncedUser&&t.hasOwnProperty("syncedUser")&&i.uint32(24).bool(t.syncedUser),null!=t.timeSpent&&t.hasOwnProperty("timeSpent")&&i.uint32(32).int32(t.timeSpent),null!=t.reason&&t.hasOwnProperty("reason")&&i.uint32(40).int32(t.reason),null!=t.rtbRequestNumber&&t.hasOwnProperty("rtbRequestNumber")&&i.uint32(48).int32(t.rtbRequestNumber),null!=t.partnerReason&&t.hasOwnProperty("partnerReason")&&i.uint32(56).int32(t.partnerReason),null!=t.requestedFloorPrice&&t.hasOwnProperty("requestedFloorPrice")&&i.uint32(65).double(t.requestedFloorPrice),null!=t.partnerCustomHeaders&&t.hasOwnProperty("partnerCustomHeaders")&&i.uint32(74).string(t.partnerCustomHeaders),null!=t.prebidJsBidderName&&t.hasOwnProperty("prebidJsBidderName")&&i.uint32(98).string(t.prebidJsBidderName),i},t.fromObject=function(t){if(t instanceof c.ProtoPrebid)return t;var i=new c.ProtoPrebid;switch(null!=t.publisherLineItemId&&(i.publisherLineItemId=String(t.publisherLineItemId)),null!=t.advertiserLineItemId&&(i.advertiserLineItemId=String(t.advertiserLineItemId)),null!=t.syncedUser&&(i.syncedUser=Boolean(t.syncedUser)),null!=t.timeSpent&&(i.timeSpent=0|t.timeSpent),t.reason){case"RequestException":case 0:i.reason=0;break;case"Timeout":case 1:i.reason=1;break;case"EmptyResponse":case 2:i.reason=2;break;case"InvalidResponse":case 3:i.reason=3;break;case"NoBid":case 4:i.reason=4;break;case"BidBelowFloor":case 5:i.reason=5;break;case"DealIdMismatch":case 6:i.reason=6;break;case"CsInvalidResponse":case 7:i.reason=7;break;case"CsRequestException":case 8:i.reason=8;break;case"CsEmptyResponse":case 9:i.reason=9;break;case"NoLibInPage":case 11:i.reason=11}switch(null!=t.rtbRequestNumber&&(i.rtbRequestNumber=0|t.rtbRequestNumber),t.partnerReason){case"Unknown":case 0:i.partnerReason=0;break;case"TechnicalError":case 1:i.partnerReason=1;break;case"InvalidRequest":case 2:i.partnerReason=2;break;case"KnownWebSpider":case 3:i.partnerReason=3;break;case"SuspectedNonHumanTraffic":case 4:i.partnerReason=4;break;case"CloudIP":case 5:i.partnerReason=5;break;case"UnsupportedDevice":case 6:i.partnerReason=6;break;case"BlockedPublisher":case 7:i.partnerReason=7;break;case"UnmatchedUser":case 8:i.partnerReason=8;break;case"DailyReaderCapMet":case 9:i.partnerReason=9;break;case"DailyDomainCapMet":case 10:i.partnerReason=10}return null!=t.requestedFloorPrice&&(i.requestedFloorPrice=Number(t.requestedFloorPrice)),null!=t.partnerCustomHeaders&&(i.partnerCustomHeaders=String(t.partnerCustomHeaders)),null!=t.prebidJsBidderName&&(i.prebidJsBidderName=String(t.prebidJsBidderName)),i},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.ProtoBid=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.publisherLineItemId="",t.prototype.advertiserLineItemId="",t.prototype.syncedUser=!1,t.prototype.timeSpent=0,t.prototype.rtbRequestNumber=0,t.prototype.creativeId="",t.prototype.rtbSeatId="",t.prototype.rtbAdomain="",t.prototype.encryptedPrice="",t.prototype.requestedFloorPrice=0,t.prototype.prebidJsBidderName="",t.prototype.customClientPrice=0,t.prototype.dspId="",t.prototype.cnxBidId="",t.encode=function(t,i){return i||(i=h.create()),null!=t.publisherLineItemId&&t.hasOwnProperty("publisherLineItemId")&&i.uint32(10).string(t.publisherLineItemId),null!=t.advertiserLineItemId&&t.hasOwnProperty("advertiserLineItemId")&&i.uint32(18).string(t.advertiserLineItemId),null!=t.syncedUser&&t.hasOwnProperty("syncedUser")&&i.uint32(24).bool(t.syncedUser),null!=t.timeSpent&&t.hasOwnProperty("timeSpent")&&i.uint32(32).int32(t.timeSpent),null!=t.rtbRequestNumber&&t.hasOwnProperty("rtbRequestNumber")&&i.uint32(40).int32(t.rtbRequestNumber),null!=t.creativeId&&t.hasOwnProperty("creativeId")&&i.uint32(50).string(t.creativeId),null!=t.rtbSeatId&&t.hasOwnProperty("rtbSeatId")&&i.uint32(58).string(t.rtbSeatId),null!=t.rtbAdomain&&t.hasOwnProperty("rtbAdomain")&&i.uint32(66).string(t.rtbAdomain),null!=t.encryptedPrice&&t.hasOwnProperty("encryptedPrice")&&i.uint32(74).string(t.encryptedPrice),null!=t.requestedFloorPrice&&t.hasOwnProperty("requestedFloorPrice")&&i.uint32(81).double(t.requestedFloorPrice),null!=t.prebidJsBidderName&&t.hasOwnProperty("prebidJsBidderName")&&i.uint32(106).string(t.prebidJsBidderName),null!=t.customClientPrice&&t.hasOwnProperty("customClientPrice")&&i.uint32(113).double(t.customClientPrice),null!=t.dspId&&t.hasOwnProperty("dspId")&&i.uint32(122).string(t.dspId),null!=t.cnxBidId&&t.hasOwnProperty("cnxBidId")&&i.uint32(130).string(t.cnxBidId),i},t.fromObject=function(t){if(t instanceof c.ProtoBid)return t;var i=new c.ProtoBid;return null!=t.publisherLineItemId&&(i.publisherLineItemId=String(t.publisherLineItemId)),null!=t.advertiserLineItemId&&(i.advertiserLineItemId=String(t.advertiserLineItemId)),null!=t.syncedUser&&(i.syncedUser=Boolean(t.syncedUser)),null!=t.timeSpent&&(i.timeSpent=0|t.timeSpent),null!=t.rtbRequestNumber&&(i.rtbRequestNumber=0|t.rtbRequestNumber),null!=t.creativeId&&(i.creativeId=String(t.creativeId)),null!=t.rtbSeatId&&(i.rtbSeatId=String(t.rtbSeatId)),null!=t.rtbAdomain&&(i.rtbAdomain=String(t.rtbAdomain)),null!=t.encryptedPrice&&(i.encryptedPrice=String(t.encryptedPrice)),null!=t.requestedFloorPrice&&(i.requestedFloorPrice=Number(t.requestedFloorPrice)),null!=t.prebidJsBidderName&&(i.prebidJsBidderName=String(t.prebidJsBidderName)),null!=t.customClientPrice&&(i.customClientPrice=Number(t.customClientPrice)),null!=t.dspId&&(i.dspId=String(t.dspId)),null!=t.cnxBidId&&(i.cnxBidId=String(t.cnxBidId)),i},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.ProtoPostBid=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.publisherLineItemId="",t.prototype.advertiserLineItemId="",t.prototype.syncedUser=!1,t.prototype.timeSpent=0,t.prototype.error="",t.prototype.loaded=!1,t.prototype.creativeId="",t.prototype.rtbSeatId="",t.prototype.rtbAdomain="",t.prototype.adsourceType=0,t.prototype.vastMediaType="",t.prototype.adPodSlotPosition=0,t.prototype.prebidJsBidderName="",t.prototype.dspId="",t.prototype.cnxBidId="",t.prototype.winToAdLoadedTime=0,t.encode=function(t,i){return i||(i=h.create()),null!=t.publisherLineItemId&&t.hasOwnProperty("publisherLineItemId")&&i.uint32(10).string(t.publisherLineItemId),null!=t.advertiserLineItemId&&t.hasOwnProperty("advertiserLineItemId")&&i.uint32(18).string(t.advertiserLineItemId),null!=t.syncedUser&&t.hasOwnProperty("syncedUser")&&i.uint32(24).bool(t.syncedUser),null!=t.timeSpent&&t.hasOwnProperty("timeSpent")&&i.uint32(32).int32(t.timeSpent),null!=t.error&&t.hasOwnProperty("error")&&i.uint32(42).string(t.error),null!=t.loaded&&t.hasOwnProperty("loaded")&&i.uint32(48).bool(t.loaded),null!=t.creativeId&&t.hasOwnProperty("creativeId")&&i.uint32(58).string(t.creativeId),null!=t.rtbSeatId&&t.hasOwnProperty("rtbSeatId")&&i.uint32(66).string(t.rtbSeatId),null!=t.rtbAdomain&&t.hasOwnProperty("rtbAdomain")&&i.uint32(74).string(t.rtbAdomain),null!=t.adsourceType&&t.hasOwnProperty("adsourceType")&&i.uint32(80).int32(t.adsourceType),null!=t.vastMediaType&&t.hasOwnProperty("vastMediaType")&&i.uint32(90).string(t.vastMediaType),null!=t.adPodSlotPosition&&t.hasOwnProperty("adPodSlotPosition")&&i.uint32(96).int32(t.adPodSlotPosition),null!=t.prebidJsBidderName&&t.hasOwnProperty("prebidJsBidderName")&&i.uint32(106).string(t.prebidJsBidderName),null!=t.dspId&&t.hasOwnProperty("dspId")&&i.uint32(114).string(t.dspId),null!=t.cnxBidId&&t.hasOwnProperty("cnxBidId")&&i.uint32(122).string(t.cnxBidId),null!=t.winToAdLoadedTime&&t.hasOwnProperty("winToAdLoadedTime")&&i.uint32(128).int32(t.winToAdLoadedTime),i},t.fromObject=function(t){if(t instanceof c.ProtoPostBid)return t;var i=new c.ProtoPostBid;switch(null!=t.publisherLineItemId&&(i.publisherLineItemId=String(t.publisherLineItemId)),null!=t.advertiserLineItemId&&(i.advertiserLineItemId=String(t.advertiserLineItemId)),null!=t.syncedUser&&(i.syncedUser=Boolean(t.syncedUser)),null!=t.timeSpent&&(i.timeSpent=0|t.timeSpent),null!=t.error&&(i.error=String(t.error)),null!=t.loaded&&(i.loaded=Boolean(t.loaded)),null!=t.creativeId&&(i.creativeId=String(t.creativeId)),null!=t.rtbSeatId&&(i.rtbSeatId=String(t.rtbSeatId)),null!=t.rtbAdomain&&(i.rtbAdomain=String(t.rtbAdomain)),t.adsourceType){case"Unknown":case 0:i.adsourceType=0;break;case"Vpaid":case 1:i.adsourceType=1;break;case"VastMedia":case 2:i.adsourceType=2;break;case"CnxMedia":case 3:i.adsourceType=3;break;case"Jw":case 4:i.adsourceType=4;break;case"Ima":case 5:i.adsourceType=5;break;case"AOL":case 6:i.adsourceType=6}return null!=t.vastMediaType&&(i.vastMediaType=String(t.vastMediaType)),null!=t.adPodSlotPosition&&(i.adPodSlotPosition=0|t.adPodSlotPosition),null!=t.prebidJsBidderName&&(i.prebidJsBidderName=String(t.prebidJsBidderName)),null!=t.dspId&&(i.dspId=String(t.dspId)),null!=t.cnxBidId&&(i.cnxBidId=String(t.cnxBidId)),null!=t.winToAdLoadedTime&&(i.winToAdLoadedTime=0|t.winToAdLoadedTime),i},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.ProtoBidTrackingsRequest=function(){function t(t){if(this.prebids=[],this.bids=[],this.postBids=[],t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.trackingRequestMeta=null,t.prototype.mediaGuid="",t.prototype.prebids=o.emptyArray,t.prototype.bids=o.emptyArray,t.prototype.postBids=o.emptyArray,t.prototype.logEveryting=!1,t.prototype.hasGdprConsentPayload=!1,t.prototype.gdprConsentMode=0,t.prototype.useExploration=!1,t.encode=function(t,i){if(i||(i=h.create()),null!=t.trackingRequestMeta&&t.hasOwnProperty("trackingRequestMeta")&&c.MetadataModel.encode(t.trackingRequestMeta,i.uint32(10).fork()).ldelim(),null!=t.mediaGuid&&t.hasOwnProperty("mediaGuid")&&i.uint32(18).string(t.mediaGuid),null!=t.prebids&&t.prebids.length)for(var e=0;e<t.prebids.length;++e)c.ProtoPrebid.encode(t.prebids[e],i.uint32(34).fork()).ldelim();if(null!=t.bids&&t.bids.length)for(e=0;e<t.bids.length;++e)c.ProtoBid.encode(t.bids[e],i.uint32(42).fork()).ldelim();if(null!=t.postBids&&t.postBids.length)for(e=0;e<t.postBids.length;++e)c.ProtoPostBid.encode(t.postBids[e],i.uint32(50).fork()).ldelim();return null!=t.logEveryting&&t.hasOwnProperty("logEveryting")&&i.uint32(56).bool(t.logEveryting),null!=t.hasGdprConsentPayload&&t.hasOwnProperty("hasGdprConsentPayload")&&i.uint32(80).bool(t.hasGdprConsentPayload),null!=t.gdprConsentMode&&t.hasOwnProperty("gdprConsentMode")&&i.uint32(88).int32(t.gdprConsentMode),null!=t.useExploration&&t.hasOwnProperty("useExploration")&&i.uint32(96).bool(t.useExploration),i},t.fromObject=function(t){if(t instanceof c.ProtoBidTrackingsRequest)return t;var i=new c.ProtoBidTrackingsRequest;if(null!=t.trackingRequestMeta){if("object"!=typeof t.trackingRequestMeta)throw TypeError(".ProtoBidTrackingsRequest.trackingRequestMeta: object expected");i.trackingRequestMeta=c.MetadataModel.fromObject(t.trackingRequestMeta)}if(null!=t.mediaGuid&&(i.mediaGuid=String(t.mediaGuid)),t.prebids){if(!Array.isArray(t.prebids))throw TypeError(".ProtoBidTrackingsRequest.prebids: array expected");i.prebids=[];for(var e=0;e<t.prebids.length;++e){if("object"!=typeof t.prebids[e])throw TypeError(".ProtoBidTrackingsRequest.prebids: object expected");i.prebids[e]=c.ProtoPrebid.fromObject(t.prebids[e])}}if(t.bids){if(!Array.isArray(t.bids))throw TypeError(".ProtoBidTrackingsRequest.bids: array expected");i.bids=[];for(e=0;e<t.bids.length;++e){if("object"!=typeof t.bids[e])throw TypeError(".ProtoBidTrackingsRequest.bids: object expected");i.bids[e]=c.ProtoBid.fromObject(t.bids[e])}}if(t.postBids){if(!Array.isArray(t.postBids))throw TypeError(".ProtoBidTrackingsRequest.postBids: array expected");i.postBids=[];for(e=0;e<t.postBids.length;++e){if("object"!=typeof t.postBids[e])throw TypeError(".ProtoBidTrackingsRequest.postBids: object expected");i.postBids[e]=c.ProtoPostBid.fromObject(t.postBids[e])}}switch(null!=t.logEveryting&&(i.logEveryting=Boolean(t.logEveryting)),null!=t.hasGdprConsentPayload&&(i.hasGdprConsentPayload=Boolean(t.hasGdprConsentPayload)),t.gdprConsentMode){case"Unknown":case 0:i.gdprConsentMode=0;break;case"NoCmp":case 1:i.gdprConsentMode=1;break;case"NoConsent":case 2:i.gdprConsentMode=2;break;case"NoConnatixConsent":case 3:i.gdprConsentMode=3;break;case"NotAllDemandConsent":case 4:i.gdprConsentMode=4;break;case"AllGood":case 5:i.gdprConsentMode=5}return null!=t.useExploration&&(i.useExploration=Boolean(t.useExploration)),i},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.ProtoHeavyAdBlockTypeEnum=function(){var t={},i=Object.create(t);return i[t[0]="Global"]=0,i[t[1]="Script"]=1,i[t[2]="VpaidIframe"]=2,i[t[3]="OverlayIframe"]=3,i}(),c.ProtoHeavyAdTrackingRequest=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.trackingRequestMeta=null,t.prototype.advertiserLineItemId="",t.prototype.heavyAdBlockTypeEnum=0,t.encode=function(t,i){return i||(i=h.create()),null!=t.trackingRequestMeta&&t.hasOwnProperty("trackingRequestMeta")&&c.MetadataModel.encode(t.trackingRequestMeta,i.uint32(10).fork()).ldelim(),null!=t.advertiserLineItemId&&t.hasOwnProperty("advertiserLineItemId")&&i.uint32(18).string(t.advertiserLineItemId),null!=t.heavyAdBlockTypeEnum&&t.hasOwnProperty("heavyAdBlockTypeEnum")&&i.uint32(24).int32(t.heavyAdBlockTypeEnum),i},t.decode=function(t,i){t instanceof a||(t=a.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoHeavyAdTrackingRequest;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.trackingRequestMeta=c.MetadataModel.decode(t,t.uint32());break;case 2:s.advertiserLineItemId=t.string();break;case 3:s.heavyAdBlockTypeEnum=t.int32();break;default:t.skipType(7&n)}}return s},t.fromObject=function(t){if(t instanceof c.ProtoHeavyAdTrackingRequest)return t;var i=new c.ProtoHeavyAdTrackingRequest;if(null!=t.trackingRequestMeta){if("object"!=typeof t.trackingRequestMeta)throw TypeError(".ProtoHeavyAdTrackingRequest.trackingRequestMeta: object expected");i.trackingRequestMeta=c.MetadataModel.fromObject(t.trackingRequestMeta)}switch(null!=t.advertiserLineItemId&&(i.advertiserLineItemId=String(t.advertiserLineItemId)),t.heavyAdBlockTypeEnum){case"Global":case 0:i.heavyAdBlockTypeEnum=0;break;case"Script":case 1:i.heavyAdBlockTypeEnum=1;break;case"VpaidIframe":case 2:i.heavyAdBlockTypeEnum=2;break;case"OverlayIframe":case 3:i.heavyAdBlockTypeEnum=3}return i},t.toObject=function(t,i){i||(i={});var e={};return i.defaults&&(e.trackingRequestMeta=null,e.advertiserLineItemId="",e.heavyAdBlockTypeEnum=i.enums===String?"Global":0),null!=t.trackingRequestMeta&&t.hasOwnProperty("trackingRequestMeta")&&(e.trackingRequestMeta=c.MetadataModel.toObject(t.trackingRequestMeta,i)),null!=t.advertiserLineItemId&&t.hasOwnProperty("advertiserLineItemId")&&(e.advertiserLineItemId=t.advertiserLineItemId),null!=t.heavyAdBlockTypeEnum&&t.hasOwnProperty("heavyAdBlockTypeEnum")&&(e.heavyAdBlockTypeEnum=i.enums===String?c.ProtoHeavyAdBlockTypeEnum[t.heavyAdBlockTypeEnum]:t.heavyAdBlockTypeEnum),e},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.ProtoMediaClickTrackingRequest=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.trackingRequestMeta=null,t.prototype.mediaGuid="",t.prototype.type=0,t.prototype.clickUrl="",t.prototype.slideTitle="",t.prototype.slideNumber=0,t.prototype.slideMediaType=0,t.encode=function(t,i){return i||(i=h.create()),null!=t.trackingRequestMeta&&t.hasOwnProperty("trackingRequestMeta")&&c.MetadataModel.encode(t.trackingRequestMeta,i.uint32(10).fork()).ldelim(),null!=t.mediaGuid&&t.hasOwnProperty("mediaGuid")&&i.uint32(18).string(t.mediaGuid),null!=t.type&&t.hasOwnProperty("type")&&i.uint32(24).int32(t.type),null!=t.clickUrl&&t.hasOwnProperty("clickUrl")&&i.uint32(34).string(t.clickUrl),null!=t.slideTitle&&t.hasOwnProperty("slideTitle")&&i.uint32(42).string(t.slideTitle),null!=t.slideNumber&&t.hasOwnProperty("slideNumber")&&i.uint32(48).int32(t.slideNumber),null!=t.slideMediaType&&t.hasOwnProperty("slideMediaType")&&i.uint32(56).int32(t.slideMediaType),i},t.decode=function(t,i){t instanceof a||(t=a.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoMediaClickTrackingRequest;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.trackingRequestMeta=c.MetadataModel.decode(t,t.uint32());break;case 2:s.mediaGuid=t.string();break;case 3:s.type=t.int32();break;case 4:s.clickUrl=t.string();break;case 5:s.slideTitle=t.string();break;case 6:s.slideNumber=t.int32();break;case 7:s.slideMediaType=t.int32();break;default:t.skipType(7&n)}}return s},t.fromObject=function(t){if(t instanceof c.ProtoMediaClickTrackingRequest)return t;var i=new c.ProtoMediaClickTrackingRequest;if(null!=t.trackingRequestMeta){if("object"!=typeof t.trackingRequestMeta)throw TypeError(".ProtoMediaClickTrackingRequest.trackingRequestMeta: object expected");i.trackingRequestMeta=c.MetadataModel.fromObject(t.trackingRequestMeta)}switch(null!=t.mediaGuid&&(i.mediaGuid=String(t.mediaGuid)),t.type){case"Click":case 0:i.type=0;break;case"UrlClick":case 1:i.type=1;break;case"VolumeClick":case 2:i.type=2;break;case"PlayClick":case 3:i.type=3;break;case"PauseClick":case 4:i.type=4;break;case"NextClick":case 5:i.type=5;break;case"PreviousClick":case 6:i.type=6;break;case"MuteClick":case 7:i.type=7;break;case"UnmuteClick":case 8:i.type=8;break;case"CloseClick":case 9:i.type=9;break;case"ScrollClick":case 10:i.type=10;break;case"GalleryClick":case 11:i.type=11;break;case"SubtitleClick":case 12:i.type=12;break;case"FullScreenClick":case 13:i.type=13;break;case"ExitFullScreenClick":case 14:i.type=14}switch(null!=t.clickUrl&&(i.clickUrl=String(t.clickUrl)),null!=t.slideTitle&&(i.slideTitle=String(t.slideTitle)),null!=t.slideNumber&&(i.slideNumber=0|t.slideNumber),t.slideMediaType){case"Image":case 0:i.slideMediaType=0;break;case"Video":case 1:i.slideMediaType=1}return i},t.toObject=function(t,i){i||(i={});var e={};return i.defaults&&(e.trackingRequestMeta=null,e.mediaGuid="",e.type=i.enums===String?"Click":0,e.clickUrl="",e.slideTitle="",e.slideNumber=0,e.slideMediaType=i.enums===String?"Image":0),null!=t.trackingRequestMeta&&t.hasOwnProperty("trackingRequestMeta")&&(e.trackingRequestMeta=c.MetadataModel.toObject(t.trackingRequestMeta,i)),null!=t.mediaGuid&&t.hasOwnProperty("mediaGuid")&&(e.mediaGuid=t.mediaGuid),null!=t.type&&t.hasOwnProperty("type")&&(e.type=i.enums===String?c.ProtoMediaClickTypeEnum[t.type]:t.type),null!=t.clickUrl&&t.hasOwnProperty("clickUrl")&&(e.clickUrl=t.clickUrl),null!=t.slideTitle&&t.hasOwnProperty("slideTitle")&&(e.slideTitle=t.slideTitle),null!=t.slideNumber&&t.hasOwnProperty("slideNumber")&&(e.slideNumber=t.slideNumber),null!=t.slideMediaType&&t.hasOwnProperty("slideMediaType")&&(e.slideMediaType=i.enums===String?c.ProtoMediaTypeEnum[t.slideMediaType]:t.slideMediaType),e},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.ProtoMediaClickTypeEnum=function(){var t={},i=Object.create(t);return i[t[0]="Click"]=0,i[t[1]="UrlClick"]=1,i[t[2]="VolumeClick"]=2,i[t[3]="PlayClick"]=3,i[t[4]="PauseClick"]=4,i[t[5]="NextClick"]=5,i[t[6]="PreviousClick"]=6,i[t[7]="MuteClick"]=7,i[t[8]="UnmuteClick"]=8,i[t[9]="CloseClick"]=9,i[t[10]="ScrollClick"]=10,i[t[11]="GalleryClick"]=11,i[t[12]="SubtitleClick"]=12,i[t[13]="FullScreenClick"]=13,i[t[14]="ExitFullScreenClick"]=14,i}(),c.ProtoMediaTrackingRequest=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.trackingRequestMeta=null,t.prototype.mediaGuid="",t.prototype.quartile=0,t.encode=function(t,i){return i||(i=h.create()),null!=t.trackingRequestMeta&&t.hasOwnProperty("trackingRequestMeta")&&c.MetadataModel.encode(t.trackingRequestMeta,i.uint32(10).fork()).ldelim(),null!=t.mediaGuid&&t.hasOwnProperty("mediaGuid")&&i.uint32(18).string(t.mediaGuid),null!=t.quartile&&t.hasOwnProperty("quartile")&&i.uint32(32).int32(t.quartile),i},t.fromObject=function(t){if(t instanceof c.ProtoMediaTrackingRequest)return t;var i=new c.ProtoMediaTrackingRequest;if(null!=t.trackingRequestMeta){if("object"!=typeof t.trackingRequestMeta)throw TypeError(".ProtoMediaTrackingRequest.trackingRequestMeta: object expected");i.trackingRequestMeta=c.MetadataModel.fromObject(t.trackingRequestMeta)}switch(null!=t.mediaGuid&&(i.mediaGuid=String(t.mediaGuid)),t.quartile){case"Start":case 0:i.quartile=0;break;case"First":case 1:i.quartile=1;break;case"Second":case 2:i.quartile=2;break;case"Third":case 3:i.quartile=3;break;case"Fourth":case 4:i.quartile=4}return i},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.ProtoQuartilesEnum=function(){var t={},i=Object.create(t);return i[t[0]="Start"]=0,i[t[1]="First"]=1,i[t[2]="Second"]=2,i[t[3]="Third"]=3,i[t[4]="Fourth"]=4,i}(),c.ProtoSessionAdBlockerRequest=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.trackingRequestMeta=null,t.prototype.adBlockDetectionType=0,t.encode=function(t,i){return i||(i=h.create()),null!=t.trackingRequestMeta&&t.hasOwnProperty("trackingRequestMeta")&&c.MetadataModel.encode(t.trackingRequestMeta,i.uint32(10).fork()).ldelim(),null!=t.adBlockDetectionType&&t.hasOwnProperty("adBlockDetectionType")&&i.uint32(16).int32(t.adBlockDetectionType),i},t.decode=function(t,i){t instanceof a||(t=a.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoSessionAdBlockerRequest;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.trackingRequestMeta=c.MetadataModel.decode(t,t.uint32());break;case 2:s.adBlockDetectionType=t.int32();break;default:t.skipType(7&n)}}return s},t.fromObject=function(t){if(t instanceof c.ProtoSessionAdBlockerRequest)return t;var i=new c.ProtoSessionAdBlockerRequest;if(null!=t.trackingRequestMeta){if("object"!=typeof t.trackingRequestMeta)throw TypeError(".ProtoSessionAdBlockerRequest.trackingRequestMeta: object expected");i.trackingRequestMeta=c.MetadataModel.fromObject(t.trackingRequestMeta)}switch(t.adBlockDetectionType){case"Banner":case 0:i.adBlockDetectionType=0;break;case"Network":case 1:i.adBlockDetectionType=1}return i},t.toObject=function(t,i){i||(i={});var e={};return i.defaults&&(e.trackingRequestMeta=null,e.adBlockDetectionType=i.enums===String?"Banner":0),null!=t.trackingRequestMeta&&t.hasOwnProperty("trackingRequestMeta")&&(e.trackingRequestMeta=c.MetadataModel.toObject(t.trackingRequestMeta,i)),null!=t.adBlockDetectionType&&t.hasOwnProperty("adBlockDetectionType")&&(e.adBlockDetectionType=i.enums===String?c.ProtoAdBlockDetectionTypeEnum[t.adBlockDetectionType]:t.adBlockDetectionType),e},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.ProtoSessionTimeTrackingRequest=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.trackingRequestMeta=null,t.prototype.timePlayed=0,t.prototype.timePlayedInView=0,t.prototype.sessionTime=0,t.encode=function(t,i){return i||(i=h.create()),null!=t.trackingRequestMeta&&t.hasOwnProperty("trackingRequestMeta")&&c.MetadataModel.encode(t.trackingRequestMeta,i.uint32(10).fork()).ldelim(),null!=t.timePlayed&&t.hasOwnProperty("timePlayed")&&i.uint32(16).int32(t.timePlayed),null!=t.timePlayedInView&&t.hasOwnProperty("timePlayedInView")&&i.uint32(24).int32(t.timePlayedInView),null!=t.sessionTime&&t.hasOwnProperty("sessionTime")&&i.uint32(32).int32(t.sessionTime),i},t.fromObject=function(t){if(t instanceof c.ProtoSessionTimeTrackingRequest)return t;var i=new c.ProtoSessionTimeTrackingRequest;if(null!=t.trackingRequestMeta){if("object"!=typeof t.trackingRequestMeta)throw TypeError(".ProtoSessionTimeTrackingRequest.trackingRequestMeta: object expected");i.trackingRequestMeta=c.MetadataModel.fromObject(t.trackingRequestMeta)}return null!=t.timePlayed&&(i.timePlayed=0|t.timePlayed),null!=t.timePlayedInView&&(i.timePlayedInView=0|t.timePlayedInView),null!=t.sessionTime&&(i.sessionTime=0|t.sessionTime),i},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.ProtoTrackingRequest=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.trackingRequestMeta=null,t.prototype.hasAdBlocker=!1,t.encode=function(t,i){return i||(i=h.create()),null!=t.trackingRequestMeta&&t.hasOwnProperty("trackingRequestMeta")&&c.MetadataModel.encode(t.trackingRequestMeta,i.uint32(10).fork()).ldelim(),null!=t.hasAdBlocker&&t.hasOwnProperty("hasAdBlocker")&&i.uint32(32).bool(t.hasAdBlocker),i},t.fromObject=function(t){if(t instanceof c.ProtoTrackingRequest)return t;var i=new c.ProtoTrackingRequest;if(null!=t.trackingRequestMeta){if("object"!=typeof t.trackingRequestMeta)throw TypeError(".ProtoTrackingRequest.trackingRequestMeta: object expected");i.trackingRequestMeta=c.MetadataModel.fromObject(t.trackingRequestMeta)}return null!=t.hasAdBlocker&&(i.hasAdBlocker=Boolean(t.hasAdBlocker)),i},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.ProtoTrackingResponse=function(){function t(t){if(this.platformCappedLineItemIdList=[],t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.errorMessage="",t.prototype.platformCappedLineItemIdList=o.emptyArray,t.prototype.impressionRevenue=0,t.decode=function(t,i){t instanceof a||(t=a.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoTrackingResponse;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.errorMessage=t.string();break;case 2:s.platformCappedLineItemIdList&&s.platformCappedLineItemIdList.length||(s.platformCappedLineItemIdList=[]),s.platformCappedLineItemIdList.push(t.string());break;case 3:s.impressionRevenue=t.double();break;default:t.skipType(7&n)}}return s},t.toObject=function(t,i){i||(i={});var e={};if((i.arrays||i.defaults)&&(e.platformCappedLineItemIdList=[]),i.defaults&&(e.errorMessage="",e.impressionRevenue=0),null!=t.errorMessage&&t.hasOwnProperty("errorMessage")&&(e.errorMessage=t.errorMessage),t.platformCappedLineItemIdList&&t.platformCappedLineItemIdList.length){e.platformCappedLineItemIdList=[];for(var s=0;s<t.platformCappedLineItemIdList.length;++s)e.platformCappedLineItemIdList[s]=t.platformCappedLineItemIdList[s]}return null!=t.impressionRevenue&&t.hasOwnProperty("impressionRevenue")&&(e.impressionRevenue=i.json&&!isFinite(t.impressionRevenue)?String(t.impressionRevenue):t.impressionRevenue),e},t}(),c.ProtoVideoAdImpressionRequest=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.trackingRequestMeta=null,t.prototype.mediaGuid="",t.prototype.publisherLineItemId="",t.prototype.advertiserLineItemId="",t.prototype.syncedUser=!1,t.prototype.timeSpent=0,t.prototype.encryptedPrice="",t.prototype.creativeId="",t.prototype.rtbSeatId="",t.prototype.rtbAdomain="",t.prototype.customClientPrice=0,t.prototype.adsourceType=0,t.prototype.vastMediaType="",t.prototype.adPodSlotPosition=0,t.prototype.prebidJsBidderName="",t.prototype.dspId="",t.prototype.cnxBidId="",t.prototype.winToAdLoadedTime=0,t.prototype.startAdToImpressionTime=0,t.prototype.declaredDuration=0,t.prototype.impressionDuration=0,t.prototype.useExploration=!1,t.encode=function(t,i){return i||(i=h.create()),null!=t.trackingRequestMeta&&t.hasOwnProperty("trackingRequestMeta")&&c.MetadataModel.encode(t.trackingRequestMeta,i.uint32(10).fork()).ldelim(),null!=t.mediaGuid&&t.hasOwnProperty("mediaGuid")&&i.uint32(26).string(t.mediaGuid),null!=t.publisherLineItemId&&t.hasOwnProperty("publisherLineItemId")&&i.uint32(42).string(t.publisherLineItemId),null!=t.advertiserLineItemId&&t.hasOwnProperty("advertiserLineItemId")&&i.uint32(50).string(t.advertiserLineItemId),null!=t.syncedUser&&t.hasOwnProperty("syncedUser")&&i.uint32(56).bool(t.syncedUser),null!=t.timeSpent&&t.hasOwnProperty("timeSpent")&&i.uint32(64).int32(t.timeSpent),null!=t.encryptedPrice&&t.hasOwnProperty("encryptedPrice")&&i.uint32(74).string(t.encryptedPrice),null!=t.creativeId&&t.hasOwnProperty("creativeId")&&i.uint32(82).string(t.creativeId),null!=t.rtbSeatId&&t.hasOwnProperty("rtbSeatId")&&i.uint32(90).string(t.rtbSeatId),null!=t.rtbAdomain&&t.hasOwnProperty("rtbAdomain")&&i.uint32(98).string(t.rtbAdomain),null!=t.customClientPrice&&t.hasOwnProperty("customClientPrice")&&i.uint32(105).double(t.customClientPrice),null!=t.adsourceType&&t.hasOwnProperty("adsourceType")&&i.uint32(112).int32(t.adsourceType),null!=t.vastMediaType&&t.hasOwnProperty("vastMediaType")&&i.uint32(122).string(t.vastMediaType),null!=t.adPodSlotPosition&&t.hasOwnProperty("adPodSlotPosition")&&i.uint32(144).int32(t.adPodSlotPosition),null!=t.prebidJsBidderName&&t.hasOwnProperty("prebidJsBidderName")&&i.uint32(154).string(t.prebidJsBidderName),null!=t.dspId&&t.hasOwnProperty("dspId")&&i.uint32(162).string(t.dspId),null!=t.cnxBidId&&t.hasOwnProperty("cnxBidId")&&i.uint32(170).string(t.cnxBidId),null!=t.winToAdLoadedTime&&t.hasOwnProperty("winToAdLoadedTime")&&i.uint32(176).int32(t.winToAdLoadedTime),null!=t.startAdToImpressionTime&&t.hasOwnProperty("startAdToImpressionTime")&&i.uint32(184).int32(t.startAdToImpressionTime),null!=t.declaredDuration&&t.hasOwnProperty("declaredDuration")&&i.uint32(193).double(t.declaredDuration),null!=t.impressionDuration&&t.hasOwnProperty("impressionDuration")&&i.uint32(201).double(t.impressionDuration),null!=t.useExploration&&t.hasOwnProperty("useExploration")&&i.uint32(208).bool(t.useExploration),i},t.fromObject=function(t){if(t instanceof c.ProtoVideoAdImpressionRequest)return t;var i=new c.ProtoVideoAdImpressionRequest;if(null!=t.trackingRequestMeta){if("object"!=typeof t.trackingRequestMeta)throw TypeError(".ProtoVideoAdImpressionRequest.trackingRequestMeta: object expected");i.trackingRequestMeta=c.MetadataModel.fromObject(t.trackingRequestMeta)}switch(null!=t.mediaGuid&&(i.mediaGuid=String(t.mediaGuid)),null!=t.publisherLineItemId&&(i.publisherLineItemId=String(t.publisherLineItemId)),null!=t.advertiserLineItemId&&(i.advertiserLineItemId=String(t.advertiserLineItemId)),null!=t.syncedUser&&(i.syncedUser=Boolean(t.syncedUser)),null!=t.timeSpent&&(i.timeSpent=0|t.timeSpent),null!=t.encryptedPrice&&(i.encryptedPrice=String(t.encryptedPrice)),null!=t.creativeId&&(i.creativeId=String(t.creativeId)),null!=t.rtbSeatId&&(i.rtbSeatId=String(t.rtbSeatId)),null!=t.rtbAdomain&&(i.rtbAdomain=String(t.rtbAdomain)),null!=t.customClientPrice&&(i.customClientPrice=Number(t.customClientPrice)),t.adsourceType){case"Unknown":case 0:i.adsourceType=0;break;case"Vpaid":case 1:i.adsourceType=1;break;case"VastMedia":case 2:i.adsourceType=2;break;case"CnxMedia":case 3:i.adsourceType=3;break;case"Jw":case 4:i.adsourceType=4;break;case"Ima":case 5:i.adsourceType=5;break;case"AOL":case 6:i.adsourceType=6}return null!=t.vastMediaType&&(i.vastMediaType=String(t.vastMediaType)),null!=t.adPodSlotPosition&&(i.adPodSlotPosition=0|t.adPodSlotPosition),null!=t.prebidJsBidderName&&(i.prebidJsBidderName=String(t.prebidJsBidderName)),null!=t.dspId&&(i.dspId=String(t.dspId)),null!=t.cnxBidId&&(i.cnxBidId=String(t.cnxBidId)),null!=t.winToAdLoadedTime&&(i.winToAdLoadedTime=0|t.winToAdLoadedTime),null!=t.startAdToImpressionTime&&(i.startAdToImpressionTime=0|t.startAdToImpressionTime),null!=t.declaredDuration&&(i.declaredDuration=Number(t.declaredDuration)),null!=t.impressionDuration&&(i.impressionDuration=Number(t.impressionDuration)),null!=t.useExploration&&(i.useExploration=Boolean(t.useExploration)),i},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.ProtoVideoAdImpressionViewableRequest=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.trackingRequestMeta=null,t.prototype.mediaGuid="",t.prototype.publisherLineItemId="",t.prototype.advertiserLineItemId="",t.encode=function(t,i){return i||(i=h.create()),null!=t.trackingRequestMeta&&t.hasOwnProperty("trackingRequestMeta")&&c.MetadataModel.encode(t.trackingRequestMeta,i.uint32(10).fork()).ldelim(),null!=t.mediaGuid&&t.hasOwnProperty("mediaGuid")&&i.uint32(26).string(t.mediaGuid),null!=t.publisherLineItemId&&t.hasOwnProperty("publisherLineItemId")&&i.uint32(42).string(t.publisherLineItemId),null!=t.advertiserLineItemId&&t.hasOwnProperty("advertiserLineItemId")&&i.uint32(50).string(t.advertiserLineItemId),i},t.fromObject=function(t){if(t instanceof c.ProtoVideoAdImpressionViewableRequest)return t;var i=new c.ProtoVideoAdImpressionViewableRequest;if(null!=t.trackingRequestMeta){if("object"!=typeof t.trackingRequestMeta)throw TypeError(".ProtoVideoAdImpressionViewableRequest.trackingRequestMeta: object expected");i.trackingRequestMeta=c.MetadataModel.fromObject(t.trackingRequestMeta)}return null!=t.mediaGuid&&(i.mediaGuid=String(t.mediaGuid)),null!=t.publisherLineItemId&&(i.publisherLineItemId=String(t.publisherLineItemId)),null!=t.advertiserLineItemId&&(i.advertiserLineItemId=String(t.advertiserLineItemId)),i},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.ProtoVideoAdQuartilesRequest=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.trackingRequestMeta=null,t.prototype.mediaGuid="",t.prototype.publisherLineItemId="",t.prototype.advertiserLineItemId="",t.prototype.quartile=0,t.encode=function(t,i){return i||(i=h.create()),null!=t.trackingRequestMeta&&t.hasOwnProperty("trackingRequestMeta")&&c.MetadataModel.encode(t.trackingRequestMeta,i.uint32(10).fork()).ldelim(),null!=t.mediaGuid&&t.hasOwnProperty("mediaGuid")&&i.uint32(26).string(t.mediaGuid),null!=t.publisherLineItemId&&t.hasOwnProperty("publisherLineItemId")&&i.uint32(42).string(t.publisherLineItemId),null!=t.advertiserLineItemId&&t.hasOwnProperty("advertiserLineItemId")&&i.uint32(50).string(t.advertiserLineItemId),null!=t.quartile&&t.hasOwnProperty("quartile")&&i.uint32(56).int32(t.quartile),i},t.fromObject=function(t){if(t instanceof c.ProtoVideoAdQuartilesRequest)return t;var i=new c.ProtoVideoAdQuartilesRequest;if(null!=t.trackingRequestMeta){if("object"!=typeof t.trackingRequestMeta)throw TypeError(".ProtoVideoAdQuartilesRequest.trackingRequestMeta: object expected");i.trackingRequestMeta=c.MetadataModel.fromObject(t.trackingRequestMeta)}switch(null!=t.mediaGuid&&(i.mediaGuid=String(t.mediaGuid)),null!=t.publisherLineItemId&&(i.publisherLineItemId=String(t.publisherLineItemId)),null!=t.advertiserLineItemId&&(i.advertiserLineItemId=String(t.advertiserLineItemId)),t.quartile){case"Start":case 0:i.quartile=0;break;case"First":case 1:i.quartile=1;break;case"Second":case 2:i.quartile=2;break;case"Third":case 3:i.quartile=3;break;case"Fourth":case 4:i.quartile=4}return i},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.ProtoUserSyncRequest=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.userId="",t.prototype.demandPartner=0,t.prototype.demandPartnerUserId="",t.encode=function(t,i){return i||(i=h.create()),null!=t.userId&&t.hasOwnProperty("userId")&&i.uint32(10).string(t.userId),null!=t.demandPartner&&t.hasOwnProperty("demandPartner")&&i.uint32(16).int32(t.demandPartner),null!=t.demandPartnerUserId&&t.hasOwnProperty("demandPartnerUserId")&&i.uint32(26).string(t.demandPartnerUserId),i},t.fromObject=function(t){if(t instanceof c.ProtoUserSyncRequest)return t;var i=new c.ProtoUserSyncRequest;return null!=t.userId&&(i.userId=String(t.userId)),null!=t.demandPartner&&(i.demandPartner=0|t.demandPartner),null!=t.demandPartnerUserId&&(i.demandPartnerUserId=String(t.demandPartnerUserId)),i},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),t.exports=c},function(t,i,e){"use strict";e.d(i,"v",function(){return f}),e.d(i,"R",function(){return p}),e.d(i,"Q",function(){return b}),e.d(i,"N",function(){return v}),e.d(i,"M",function(){return m}),e.d(i,"B",function(){return g}),e.d(i,"A",function(){return y}),e.d(i,"z",function(){return w}),e.d(i,"a",function(){return x}),e.d(i,"L",function(){return k}),e.d(i,"u",function(){return S}),e.d(i,"O",function(){return O}),e.d(i,"m",function(){return _}),e.d(i,"l",function(){return j}),e.d(i,"n",function(){return A}),e.d(i,"b",function(){return I}),e.d(i,"c",function(){return T}),e.d(i,"f",function(){return C}),e.d(i,"U",function(){return P}),e.d(i,"o",function(){return M}),e.d(i,"i",function(){return E}),e.d(i,"P",function(){return L}),e.d(i,"e",function(){return R}),e.d(i,"q",function(){return D}),e.d(i,"j",function(){return F}),e.d(i,"t",function(){return $}),e.d(i,"d",function(){return U}),e.d(i,"y",function(){return V}),e.d(i,"x",function(){return N}),e.d(i,"w",function(){return H}),e.d(i,"k",function(){return q}),e.d(i,"h",function(){return W}),e.d(i,"g",function(){return G}),e.d(i,"E",function(){return J}),e.d(i,"J",function(){return Q}),e.d(i,"T",function(){return X}),e.d(i,"D",function(){return Y}),e.d(i,"s",function(){return K}),e.d(i,"r",function(){return Z}),e.d(i,"K",function(){return tt}),e.d(i,"F",function(){return it}),e.d(i,"V",function(){return et}),e.d(i,"p",function(){return st}),e.d(i,"G",function(){return nt}),e.d(i,"S",function(){return rt}),e.d(i,"H",function(){return at}),e.d(i,"C",function(){return ht}),e.d(i,"I",function(){return ot});var s=e(24),n=e(2),r=e(6),a=e(3),h=e(7),o=e(0),c=e(5);function l(t,i){t&&(t.style.display=i?"":"none")}function u(t,i){if(Object(n.a)(t.classList))return void t.classList.add(i);const e=`${t.getAttribute("class")} ${i}`;t.setAttribute("class",e)}function d(t,i){if(Object(n.a)(t.classList))return void t.classList.remove(i);const e=t.getAttribute("class").replace(i,"");t.setAttribute("class",e)}function f(t){l(t,!1)}function p(t){l(t,!0)}function b(t,i){for(const e in i)i.hasOwnProperty(e)&&(t.style[e]=i[e])}function v(t,...i){i.forEach(i=>{t.style[i]=""})}function m(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function g(t,i,e,s,r){if(i)try{const a=e.document.createElement("link");return a.id=t.id,a.type="text/css",a.rel="stylesheet",a.href=t.src,Object(n.b)(s)&&(a.onload=()=>{s()}),Object(n.b)(r)&&(a.onerror=t=>{i.removeChild(a),Object(n.g)(t)?r(`link_stylesheet_load_error_${t}`):r(`link_stylesheet_load_error_${function(t,i){const e=t.document.createElement("div");return e.appendChild(i),e.innerHTML}(e,a)}`)}),i.appendChild(a),a}catch(t){return null}}function y(t,i,e,s,r,a=!0,h){try{const l=e.document.createElement("script");return l.src=t.src,l.async=!0,l.type="text/javascript",t.id&&(l.id=t.id),Object(n.b)(s)&&(l.onload=()=>{s()}),l.onerror=e=>{i.removeChild(l),a&&Object(c.a)({message:h,exception:"script_load_error",callStack:t.src,level:o.ProtoLoggingLevelEnum.INFO,throttle:2,sendMaxLog:!1}),Object(n.b)(r)&&r()},i.appendChild(l),l}catch(i){return a&&Object(c.a)({message:h,exception:`script_insert_error_${i.message}_${i.stack}`,callStack:t.src,level:o.ProtoLoggingLevelEnum.FATAL,throttle:2,sendMaxLog:!1}),Object(n.b)(r)&&r(),null}}function w(t,i,e){if(t)try{const s=i.document.createElement("script"),n=i.document.createTextNode(e);return s.appendChild(n),t.appendChild(s),s}catch(t){return null}}function x(t,...i){t&&i.forEach(i=>{Object(n.h)(i)&&u(t,i)})}function k(t,...i){t&&i.forEach(i=>{Object(n.h)(i)&&d(t,i)})}function S(t,i){return t&&t.classList.contains(i)}function O(t,i,e,s=!1){t&&(d(t,i),s&&E(t),u(t,e))}const _=(t,i)=>i.document.getElementById(t),j=(t,i,e)=>i.getComputedStyle(t,e),A=(t,i)=>i.document.getElementsByClassName(t);function I(t,i="",e){const s=e.document.getElementsByTagName("head")[0],n=e.document.createElement("style");n.setAttribute("type","text/css"),n.id=i,n.styleSheet?n.styleSheet.cssText=t:n.appendChild(e.document.createTextNode(t)),s.appendChild(n)}function T(t,i){const e=i.document.getElementsByTagName("head")[0],s=i.document.createElement("link");s.setAttribute("rel","preconnect"),s.setAttribute("link",t),e.appendChild(s)}function C(t,i){const e=i.document.createElement("div");return e.innerHTML=t,e.firstElementChild}function P(t,i){i>0?(t.removeAttribute("muted"),t.muted=!1):(t.setAttribute("muted",""),t.muted=!0)}function M(t){return s.b.find(i=>{if(i.keys.fullscreenEnabled in t)return!0})}function E(t){t.getBoundingClientRect()}function L(t,i){return(t.requestAnimationFrame||t.webkitRequestAnimationFrame||function(t){return setTimeout(t,20)})(i)}function R(t,i){return(t.cancelAnimationFrame||t.webkitCancelAnimationFrame||function(t){return clearTimeout(t)})(i)}function B(t,i,e){const s=function(t,i){const e=function(t,i){let e=i;for(;e;){const i=e.parentNode;if(i){const e=t.reduce((t,e)=>t||i.querySelector(e),null);if(e)return e}e=i}return null}(t,i);return e?j(e,$(e)):null}(t,i);return s?function(t,i){return t.getPropertyValue(i)}(s,e):null}function D(t){const i=B(["h1","h2"],t,"font-family");return i||"inherit"}function F(t){const i=B(["p"],t,"font-family");return i||"inherit"}function $(t){try{return t.ownerDocument.defaultView}catch(t){return null}}function U(t,i){t&&i&&(Array.isArray(t)?t.forEach(t=>i.appendChild(t)):i.appendChild(t))}function V(t,i,e){let s=!1;const n=Object(r.c)(i.children);for(let i=0;i<n.length;i++)if(e-1===i||0===e){s=!0,Array.isArray(t)?N(n[i],...t):N(n[i],t);break}s||U(t,i)}function N(t,...i){if(t&&t.parentElement)for(let e=i.length;e--;)t.parentElement.insertBefore(i[e],t)}function H(t,...i){for(let e=i.length;e--;)t.parentNode.insertBefore(i[e],t.nextSibling)}function q(t,i){return Object(r.c)(i.children).indexOf(t)}function z(t){const i=$(t);if(!i)return;const{display:e}=j(t,i);"none"===e&&(t.style.display="block")}function W(t,i=(()=>{})){const e=function(s){"opacity"===s.propertyName&&(k(t,a.n.FadeOutBase,a.n.FadeOut),i(),t.removeEventListener("transitionend",e))};x(t,a.n.FadeOutBase),z(t),E(t),t.addEventListener("transitionend",e),x(t,a.n.FadeOut)}function G(t,i=(()=>{})){const e=function(s){"opacity"===s.propertyName&&(k(t,a.n.FadeInBase,a.n.FadeIn),i(),t.removeEventListener("transitionend",e))};x(t,a.n.FadeInBase),z(t),E(t),t.addEventListener("transitionend",e),x(t,a.n.FadeIn)}function J(t){const i=$(t);if(!i)return!0;const{display:e,opacity:s}=j(t,i);return"none"===e||"0"===s}function Q(t,i){return null===t.firstChild?t.appendChild(i):t.insertBefore(i,t.firstChild)}function X(t,i){const e=i.document.createElement("div");return e.innerHTML=t||"",e.innerText}function Y(){const t=window.navigator&&window.navigator.doNotTrack||window.doNotTrack;return"1"===t||"yes"===t}function K(t,i){const e=Object(h.f)(t).topFrame;return e[i]?e:null}function Z(t,i){let e=t,s=null;try{for(;!s;){try{e.frames[i]&&(s=e)}catch(t){}if(!t.top||t.top===e)break;e=e.parent}}catch(t){}return s}function tt(t,i){let e=[];try{e=e.slice.call(i.document.querySelectorAll(t),0)}catch(t){}return e}function it(t){return-1!==Object(h.f)(t).topFrame.location.protocol.indexOf("https")}function et(t){if(!it(t))return;[window,t].forEach(t=>{if(null===t.document.querySelector("meta[content=upgrade-insecure-requests]")){const i=t.document.createElement("meta");i.setAttribute("http-equiv","Content-Security-Policy"),i.content="upgrade-insecure-requests",t.document.head.appendChild(i)}})}function st(t){return Object(h.f)(t).topFrame.document.referrer}function nt(t,i){const e=Object(h.f)(i).topFrame.location.hostname,s=Object(h.g)(t);return s&&s.hostname===e}function rt(t){t.removeAttribute("href"),t.removeAttribute("target"),t.removeAttribute("download"),t.removeAttribute("ping"),t.removeAttribute("rel"),t.removeAttribute("media"),t.removeAttribute("hreflang"),t.removeAttribute("type")}function at(t,i){try{t.onclick=t=>{const{tagName:e,className:s}=t.target;Object(c.a)({message:`${i} - click on tag:${e} class:${s}`,level:o.ProtoLoggingLevelEnum.INFO})}}catch(t){Object(c.a)({message:`${i}_Error - iframe click`,level:o.ProtoLoggingLevelEnum.WARNING,callStack:t.stack})}}function ht(t){t.currentTime=t.currentTime+.01}function ot(t,i){!function(t,i,e){const s=t.document.createElement("link");s.rel="preload",s.href=i,s.as=e,t.document.head.appendChild(s)}(i,t,"script")}},function(t,i,e){"use strict";function s(t){return"string"==typeof t}function n(t){return!isNaN(parseFloat(t))&&isFinite(t)}function r(t){return n(t)&&t>0}function a(t){return s(t)&&t.length>0}function h(t){return void 0!==t}function o(t){return"function"==typeof t}function c(t){return"object"==typeof t&&null!==t&&!Array.isArray(t)}function l(t){try{if(t.contentWindow||t.contentDocument)return!0}catch(t){}return!1}e.d(i,"g",function(){return s}),e.d(i,"d",function(){return n}),e.d(i,"e",function(){return r}),e.d(i,"h",function(){return a}),e.d(i,"a",function(){return h}),e.d(i,"b",function(){return o}),e.d(i,"f",function(){return c}),e.d(i,"c",function(){return l})},function(t,i,e){"use strict";var s,n,r;e.d(i,"h",function(){return s}),e.d(i,"g",function(){return n}),e.d(i,"j",function(){return r}),e.d(i,"t",function(){return a}),e.d(i,"p",function(){return h}),e.d(i,"i",function(){return o}),e.d(i,"k",function(){return c}),e.d(i,"f",function(){return l}),e.d(i,"m",function(){return u}),e.d(i,"l",function(){return d}),e.d(i,"e",function(){return f}),e.d(i,"o",function(){return p}),e.d(i,"n",function(){return b}),e.d(i,"r",function(){return v}),e.d(i,"s",function(){return m}),e.d(i,"b",function(){return y}),e.d(i,"c",function(){return w}),e.d(i,"d",function(){return x}),e.d(i,"q",function(){return k}),e.d(i,"a",function(){return S}),function(t){t.Invisible="cnx-mod-invisible",t.HoverStart="cnx-mod-hover-s",t.HoverEnd="cnx-mod-hover",t.HoverBoom="cnx-mod-boom",t.DisplayNone="cnx-mod-display-none",t.Active="cnx-mod-active",t.HideOnVolumeHover="cnx-hide-on-volume-hover",t.HideOnSingleVideo="cnx-hide-on-single-video",t.NoTransition="cnx-mod-no-transition",t.Collapsable="cnx-mod-collapsable",t.HasCustomScrollbar="cnx-mod-scrollbar",t.Show="cnx-mod-show",t.Hide="cnx-mod-hide",t.OnHold="cnx-mod-onhold",t.ForceLineBreak="cnx-mod-force-line-break",t.HideOnAdOverlay="cnx-mod-ad-overlay-none",t.HideOnPodLoadingScreen="cnx-mod-pod-loading-none"}(s||(s={})),function(t){t.Fullscreen="cnx-in-fullscreen",t.Ad="cnx-in-ad",t.AdOverlayType="cnx-in-ad-overlay",t.AdFullSize="cnx-in-ad-full",t.ShowControls="cnx-in-show-controls",t.Mobile="cnx-in-mobile",t.Desktop="cnx-in-desktop",t.Muted="cnx-in-mute",t.CanClose="cnx-in-can-close",t.Collapsed="cnx-in-collapse",t.GalleryPortrait="cnx-in-g-portrait",t.GalleryLandscape="cnx-in-g-landscape",t.ContextController="cnx-context-controller",t.HideUI="cnx-in-hide-ui",t.AlwaysOn="cnx-ui-always-on",t.PodLoadingScreen="cnx-in-pod-loading"}(n||(n={})),function(t){t.Playing="cnx-is-playing",t.Paused="cnx-is-paused",t.Stopped="cnx-is-stopped",t.Preroll="cnx-is-preroll",t.Postroll="cnx-is-postroll",t.Loading="cnx-is-loading",t.LiveEnded="cnx-live-ended"}(r||(r={}));const a={Xxl:"cnx-bp-xxl-v",Xl:"cnx-bp-xl-v",Lg:"cnx-bp-lg-v",Md:"cnx-bp-md-v",Sm:"cnx-bp-sm-v",Xs:"cnx-bp-xs-v",Xxs:"cnx-bp-xxs-v"},h={Xxl:"cnx-bp-xxl-st",Xl:"cnx-bp-xl-st",Lg:"cnx-bp-lg-st",Md:"cnx-bp-md-st",Sm:"cnx-bp-sm-st",Xs:"cnx-bp-xs-st",Xxs:"cnx-bp-xxs-st"};var o,c,l,u,d,f,p;!function(t){t.Responsive="cnx-size-responsive",t.Fixed="cnx-size-fixed"}(o||(o={})),function(t){t.ClickOption="cnx-cm-item--click",t.ToggleOption="cnx-cm-item--toggle",t.SubmenuOption="cnx-cm-item--submenu",t.ItemIcon="cnx-cm-item__icon",t.ItemTitle="cnx-cm-item__title",t.ItemExtra="cnx-cm-item__extra",t.Items="cnx-cm-items",t.Container="cnx-cm-container"}(c||(c={})),function(t){t.Icons="cnx-color-icon",t.TooltipText="cnx-color-tt-text",t.TooltipBackground="cnx-color-tt-bg",t.AccentColor="cnx-color-accent",t.PrimaryColor="cnx-color-primary",t.SecondaryColor="cnx-color-secondary",t.TitleComponent="cnx-title-component",t.TitleLink="cnx-color-title-link",t.SlideProgressBar="cnx-slides-progress-bar",t.ProgressFill="cnx-progress-fill"}(l||(l={})),function(t){t.InheritTitleFontFamily="cnx-inherit-title-font-family",t.InheritBodyFontFamily="cnx-inherit-body-font-family"}(u||(u={})),function(t){t.Connatix="#0099FF",t.Icons="#FFFFFF",t.PrimaryBackground="#F1F1F1",t.PrimaryForeground="#000000",t.SecondaryBackground="#000000",t.SecondaryForeground="#F1F1F1",t.AccentForeground="#FFFFFF"}(d||(d={})),function(t){t.CaptionContainer="cnx-captions-text-holder"}(f||(f={})),function(t){t.MainClass="cnx-float",t.TransitionClass="cnx-float-transition"}(p||(p={}));const b={FadeOutBase:"cnx-fade-out-base",FadeOut:"cnx-fade-out",FadeInBase:"cnx-fade-in-base",FadeIn:"cnx-fade-in"};var v,m,g;!function(t){t.CurrentSlide="cnx-slide-current",t.NextSlide="cnx-slide-next",t.SlideLeft="cnx-slide-left",t.SlideRight="cnx-slide-right"}(v||(v={})),function(t){t.OpacityInTransition="cnx-tooltip-animation-in"}(m||(m={})),function(t){t.Card="cnx-g-card",t.CardSlot="cnx-g-card-slot",t.CardImage="cnx-g-card-image",t.CardText="cnx-g-card-text",t.CardTextContainer="cnx-g-card-text-container",t.CardPlaceholder="cnx-g-card-placeholder",t.CardRail="cnx-g-rail",t.StyleDetailed="cnx-g-style-detailed",t.StyleVisual="cnx-g-style-visual",t.ExploreMore="cnx-g-explore-more",t.FadeOut="cnx-g-fade-out"}(g||(g={}));const y={MainContainer:"cnx-main-container",MainContainerFlex:"cnx-main-container-flex",PlayerWrapper:"cnx-player-wrapper",ImagePlaceholder:"cnx-image-placeholder"},w="cnx-ratio",x="cnx-hide-video",k={Text:"cnx-skip-ad-text",Timer:"cnx-timer-loader",Icon:"cnx-skip-ad-icon",SkipAdButton:"cnx-skip-ad-button",InTimer:"cnx-skip-ad-in-timer"},S={Icon:"cnx-pod-open-new-icon",Button:"cnx-pod-read-more-btn",ButtonContainer:"cnx-pod-read-more-container",Wrapper:"cnx-pod-read-more-wrapper",BackgroundImg:"cnx-pod-loading-background",InfoContainer:"cnx-pod-loading-info",FallbackContainer:"cnx-pod-loading-fallback",SlotCountText:"cnx-pod-slot-count-text"}},function(t,i,e){"use strict";var s,n;e.d(i,"a",function(){return s}),e.d(i,"b",function(){return n}),function(t){t.Fullscreen="fullscreen",t.Normal="normal",t.Thumbnail="thumbnail"}(s||(s={})),function(t){t.AdLoaded="AdLoaded",t.AdStarted="AdStarted",t.AdStopped="AdStopped",t.AdSkipped="AdSkipped",t.AdSkippableStateChange="AdSkippableStateChange",t.AdSizeChange="AdSizeChange",t.AdLinearChange="AdLinearChange",t.AdDurationChange="AdDurationChange",t.AdExpandedChange="AdExpandedChange",t.AdRemainingTimeChange="AdRemainingTimeChange",t.AdVolumeChange="AdVolumeChange",t.AdImpression="AdImpression",t.AdVideoStart="AdVideoStart",t.AdVideoFirstQuartile="AdVideoFirstQuartile",t.AdVideoMidpoint="AdVideoMidpoint",t.AdVideoThirdQuartile="AdVideoThirdQuartile",t.AdVideoComplete="AdVideoComplete",t.AdClickThru="AdClickThru",t.AdInteraction="AdInteraction",t.AdUserAcceptInvitation="AdUserAcceptInvitation",t.AdUserMinimize="AdUserMinimize",t.AdUserClose="AdUserClose",t.AdPaused="AdPaused",t.AdPlaying="AdPlaying",t.AdLog="AdLog",t.AdError="AdError"}(n||(n={}))},function(t,i,e){"use strict";var s=e(19),n=e(25),r=e(0),a=e(13),h=e(31);const o=!0,c=30;var l=e(38);e.d(i,"a",function(){return b});var u=function(t,i){var e={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&i.indexOf(s)<0&&(e[s]=t[s]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(s=Object.getOwnPropertySymbols(t);n<s.length;n++)i.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(t,s[n])&&(e[s[n]]=t[s[n]])}return e};const d=500;let f=window.location&&window.location.href,p=!1;try{f=window.top.location.href}catch(t){}function b(t){var{throttle:i=c,sendMaxLog:e=!0,logJsonState:v=!1}=t,m=u(t,["throttle","sendMaxLog","logJsonState"]);if(!p)if(m.playerDestroyed&&(p=!0),m.sessionId=h.a.sessionId,o&&(h.a.incrementLogCount(m.message),h.a.isMaxLogOverflow(m.message)&&b({message:"Logging_max_log_overflow_1000",exception:m.message,callStack:m.callStack,level:r.ProtoLoggingLevelEnum.FATAL,sendMaxLog:!1,throttle:100,sessionId:h.a.sessionId}),h.a.isMaxLog(m.message,i)))e&&!h.a.isMaxLogSent(m.message)&&(h.a.setMaxLogSent(m.message),b({message:"Logging_max_log_sent",exception:m.message,callStack:m.callStack,level:r.ProtoLoggingLevelEnum.FATAL,sessionId:h.a.sessionId}));else{if(v&&(m.callStack=l.a.getJsonString()),void 0===m.callStack){const t=new Error(m.message);m.callStack=t.stack}if(m.callStack=m.callStack.substring(0,d),s.a.logToServer){m.pageUrl=f,m.version=s.a.version;const t={requestData:m,endpoint:a.a.endPoints.tracking.logging,ProtoRequest:r.ProtoLoggingRequest,logError:!0};m.sendBeacon?n.a.sendProtoBeaconRequest(t):n.a.sendProtoRequest(t).catch(t=>{})}s.a.logToConsole&&function(t){let i;switch(t.level){case r.ProtoLoggingLevelEnum.FATAL:i="#8B0000";break;case r.ProtoLoggingLevelEnum.WARNING:i="#FF8C00";break;case r.ProtoLoggingLevelEnum.INFO:i="#000000"}console.log(`%cConnatix Logging:\n   message: ${t.message}\n   exception: ${t.exception}\n   level: ${t.level}\n   version: ${t.version}\n   sessionId: ${t.sessionId}\n   callStack: ${t.callStack}`,`color:${i}`)}(m)}}},function(t,i,e){"use strict";e.d(i,"g",function(){return o}),e.d(i,"m",function(){return c}),e.d(i,"e",function(){return l}),e.d(i,"c",function(){return u}),e.d(i,"f",function(){return d}),e.d(i,"h",function(){return f}),e.d(i,"i",function(){return p}),e.d(i,"l",function(){return b}),e.d(i,"j",function(){return v}),e.d(i,"a",function(){return m}),e.d(i,"b",function(){return g}),e.d(i,"n",function(){return y}),e.d(i,"k",function(){return w}),e.d(i,"d",function(){return x});var s=e(32),n=e(7),r=e(2),a=e(5),h=e(0);function o(t,i){return i.indexOf(t)>-1}function c(t){return Array.isArray(t)?t:[t]}function l(t,i){const e=[],s=new Map;return i.forEach(i=>{s.has(i[t])||(s.set(i[t],!0),e.push(i))}),e}function u(t){return[].slice.call(t)}function d(t){const i=[];for(const e in t)e&&parseInt(e,10)>=0&&i.push(t[e]);return i}function f(t){return t&&t.length>0}function p(t){return t.every(t=>Object(r.d)(t))}function b(t){let i="[";for(let e=0;e<t.length;e++)i+=Object(s.c)(t[e])+(e===t.length-1?"":",");return i+="]"}function v(t,i){return!(!t||!i)&&(t.length===i.length&&(t===i||0===t.length&&0===i.length||t.every((t,e)=>Object(n.i)(t,i[e]))))}function m(t,i){return t.filter(t=>!i.includes(t))}function g(t,i){return t.filter(t=>i.includes(t))}function y(t){return t.filter((i,e)=>t.indexOf(i)===e)}function w(t,i){const e=t.indexOf(i);-1!==e?t.splice(e,1):Object(a.a)({message:"removeItemFromArray_error_item_not_found",exception:JSON.stringify(i),level:h.ProtoLoggingLevelEnum.WARNING})}function x(t){const i=[];return t.forEach(t=>i.push(t)),i}},function(t,i,e){"use strict";e.d(i,"c",function(){return h}),e.d(i,"d",function(){return o}),e.d(i,"e",function(){return c}),e.d(i,"g",function(){return l}),e.d(i,"f",function(){return u}),e.d(i,"m",function(){return d}),e.d(i,"l",function(){return f}),e.d(i,"b",function(){return p}),e.d(i,"a",function(){return b}),e.d(i,"i",function(){return v}),e.d(i,"h",function(){return m}),e.d(i,"j",function(){return g}),e.d(i,"k",function(){return y});var s=e(18),n=e(2),r=e(32),a=e(6);function h(){let t=Date.now();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(i){const e=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"===i?e:3&e|8).toString(16)})}function o(){return h().replace(/-/g,"")}function c(t,i){let e="";if(!t.err)try{e=t.topFrame.location.href}catch(t){}if(!e||0===e.length)try{e=i.top.location.href}catch(t){}if(!e||0===e.length)try{e=t.topFrame.document.referrer}catch(t){}return e}function l(t){try{const i=t.match(/^(https?:)\/\/(([^:\/?#]*)(?::([0-9]+))?)([\/]{0,1}[^?#]*)(\?[^#]*|)(#.*|)$/);return{href:t,protocol:i[1],host:i[2],hostname:i[3],port:i[4],pathname:i[5],search:i[6],hash:i[7]}}catch(t){return null}}function u(t){let i=t,e=null,s=!1;try{for(;i.parent.document!==i.document;){if(!i.parent.document){s=!0;break}e=i,i=i.parent}}catch(t){s=!0}return{topFrame:i,topChildFrame:e,err:s}}function d(t=[],i,e={}){t.forEach(t=>{Object(n.g)(t)&&((new i.Image).src=`${t}${Object(s.c)(t)}${function(t,i){const e=[];return Object.keys(t).forEach(s=>{const h=i?`${i}[${s}]`:s,o=t[s];if(Object(n.f)(o))e.push(`${encodeURIComponent(h)}=${Object(r.c)(o)}`);else if(Array.isArray(o))e.push(`${encodeURIComponent(h)}=${Object(a.l)(o)}`);else if(null!=o){const t=encodeURIComponent(o),i=encodeURIComponent(h);t&&i&&e.push(`${i}=${t}`)}}),e.join("&")}(e)}`)})}function f(t){const i=Math.floor(100*Math.random());let e=0,s=0;for(let n=0;n<t.length;n++)if(i<(s+=t[n])){e=n;break}return e}function p(){let t=!1;try{const i=document.createElement("audio");i.volume=1,i.muted=!1;const e=i.play();void 0!==e&&e.catch(()=>{}),t=!i.paused,i.pause()}catch(t){}return t}function b(t,i=0,...e){return setTimeout(()=>{t.apply(this,e)},i)}function v(t,i){return Object(n.f)(t)?Object(r.b)(t,i):Array.isArray(t)?Object(a.j)(t,i):t===i}function m(t,i,e){let s=0,n=t;for(;s<=e;){if(s++,n.classList.contains(i))return!0;if(!(n=n.parentElement))return!1}return!1}function g(t,i){try{const e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);let s=parseInt(e[1],16),n=parseInt(e[2],16),r=parseInt(e[3],16);s/=255,n/=255,r/=255;const a=Math.max(s,n,r),h=Math.min(s,n,r);let o,c,l=(a+h)/2;if(a===h)o=c=0;else{const t=a-h;switch(c=l>.5?t/(2-a-h):t/(a+h),a){case s:o=(n-r)/t+(n<r?6:0);break;case n:o=(r-s)/t+2;break;case r:o=(s-n)/t+4}o/=6}return o=Math.round(360*o),c=Math.round(100*c),l=Math.round(100*l),`hsl(${o},${c}%,${l+=i/100*(100-l)}%)`}catch(i){return t}}function y(t,i=5){return new Promise((e,s)=>{t().then(e).catch(n=>{1!==i?y(t,i-1).then(e,s):s(n)})})}},function(t,i,e){"use strict";var s;!function(t){t[t.HoldStart=0]="HoldStart",t[t.HoldEnd=1]="HoldEnd",t[t.TapLeft=2]="TapLeft",t[t.TapRight=3]="TapRight",t[t.SwipeEnd=4]="SwipeEnd",t[t.SwipeMove=5]="SwipeMove",t[t.Scroll=6]="Scroll",t[t.Click=7]="Click"}(s||(s={})),i.a=s},function(t,i,e){"use strict";var s,n,r=e(61),a=r.Reader,h=r.Writer,o=r.util,c=r.roots.default||(r.roots.default={});c.ProtoPlayspaceCodecEnum=(s={},(n=Object.create(s))[s[0]="h264"]=0,n[s[1]="hevc"]=1,n),c.ProtoPlayspaceVideoSlideRendition=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.width=0,t.prototype.height=0,t.prototype.videoUrl="",t.prototype.codec=0,t.decode=function(t,i){t instanceof a||(t=a.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoPlayspaceVideoSlideRendition;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.width=t.int32();break;case 2:s.height=t.int32();break;case 3:s.videoUrl=t.string();break;case 4:s.codec=t.int32();break;default:t.skipType(7&n)}}return s},t.toObject=function(t,i){i||(i={});var e={};return i.defaults&&(e.width=0,e.height=0,e.videoUrl="",e.codec=i.enums===String?"h264":0),null!=t.width&&t.hasOwnProperty("width")&&(e.width=t.width),null!=t.height&&t.hasOwnProperty("height")&&(e.height=t.height),null!=t.videoUrl&&t.hasOwnProperty("videoUrl")&&(e.videoUrl=t.videoUrl),null!=t.codec&&t.hasOwnProperty("codec")&&(e.codec=i.enums===String?c.ProtoPlayspaceCodecEnum[t.codec]:t.codec),e},t}(),c.ProtoPlayspaceVideoSettings=function(){function t(t){if(this.renditions=[],t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.renditions=o.emptyArray,t.decode=function(t,i){t instanceof a||(t=a.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoPlayspaceVideoSettings;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.renditions&&s.renditions.length||(s.renditions=[]),s.renditions.push(c.ProtoPlayspaceVideoSlideRendition.decode(t,t.uint32()));break;default:t.skipType(7&n)}}return s},t.toObject=function(t,i){i||(i={});var e={};if((i.arrays||i.defaults)&&(e.renditions=[]),t.renditions&&t.renditions.length){e.renditions=[];for(var s=0;s<t.renditions.length;++s)e.renditions[s]=c.ProtoPlayspaceVideoSlideRendition.toObject(t.renditions[s],i)}return e},t}(),c.ProtoPlayerOrientationEnum=function(){var t={},i=Object.create(t);return i[t[0]="Mixed"]=0,i[t[1]="Portrait"]=1,i[t[2]="Landscape"]=2,i}(),c.ProtoEndOfSlideCycleMode=function(){var t={},i=Object.create(t);return i[t[0]="Loop"]=0,i[t[1]="Stop"]=1,i}(),c.ProtoPlayspaceColorSchemeEnum=function(){var t={},i=Object.create(t);return i[t[0]="Default"]=0,i[t[1]="Accent"]=1,i[t[2]="Primary"]=2,i[t[3]="Secondary"]=3,i}(),c.ProtoPlayspaceSlideTypeEnum=function(){var t={},i=Object.create(t);return i[t[0]="Default"]=0,i[t[1]="Cover"]=1,i[t[2]="Description"]=2,i[t[3]="BulletList"]=3,i[t[4]="Stock"]=4,i[t[5]="Quote"]=5,i[t[6]="Instagram"]=6,i}(),c.ProtoPlayspaceSlideCapabilitiesEnum=function(){var t={},i=Object.create(t);return i[t[0]="VolumeControls"]=0,i[t[1]="PlaybackControls"]=1,i[t[2]="PlaylistControls"]=2,i[t[3]="CtaButton"]=3,i[t[4]="TopStoryTitle"]=4,i[t[5]="TopSlideTitle"]=5,i}(),c.ProtoMediaContextEnum=function(){var t={},i=Object.create(t);return i[t[0]="None"]=0,i[t[1]="Logo"]=1,i}(),c.ProtoSlideCapabilityMetadata=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.label="",t.decode=function(t,i){t instanceof a||(t=a.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoSlideCapabilityMetadata;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.label=t.string();break;default:t.skipType(7&n)}}return s},t.toObject=function(t,i){i||(i={});var e={};return i.defaults&&(e.label=""),null!=t.label&&t.hasOwnProperty("label")&&(e.label=t.label),e},t}(),c.ProtoPlayspaceSlideCapability=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.type=0,t.prototype.metadata=null,t.decode=function(t,i){t instanceof a||(t=a.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoPlayspaceSlideCapability;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.type=t.int32();break;case 2:s.metadata=c.ProtoSlideCapabilityMetadata.decode(t,t.uint32());break;default:t.skipType(7&n)}}return s},t.toObject=function(t,i){i||(i={});var e={};return i.defaults&&(e.type=i.enums===String?"VolumeControls":0,e.metadata=null),null!=t.type&&t.hasOwnProperty("type")&&(e.type=i.enums===String?c.ProtoPlayspaceSlideCapabilitiesEnum[t.type]:t.type),null!=t.metadata&&t.hasOwnProperty("metadata")&&(e.metadata=c.ProtoSlideCapabilityMetadata.toObject(t.metadata,i)),e},t}(),c.ProtoFallbackStoryResponse=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.storyId="",t.prototype.activeVersionId="",t.decode=function(t,i){t instanceof a||(t=a.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoFallbackStoryResponse;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.storyId=t.string();break;case 2:s.activeVersionId=t.string();break;default:t.skipType(7&n)}}return s},t.toObject=function(t,i){i||(i={});var e={};return i.defaults&&(e.storyId="",e.activeVersionId=""),null!=t.storyId&&t.hasOwnProperty("storyId")&&(e.storyId=t.storyId),null!=t.activeVersionId&&t.hasOwnProperty("activeVersionId")&&(e.activeVersionId=t.activeVersionId),e},t}(),c.ProtoPlayspaceMediaMetadataResponse=function(){function t(t){if(this.slides=[],t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.slides=o.emptyArray,t.prototype.storyTitle="",t.decode=function(t,i){t instanceof a||(t=a.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoPlayspaceMediaMetadataResponse;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.slides&&s.slides.length||(s.slides=[]),s.slides.push(c.ProtoPlayspaceSlideMetadata.decode(t,t.uint32()));break;case 2:s.storyTitle=t.string();break;default:t.skipType(7&n)}}return s},t.toObject=function(t,i){i||(i={});var e={};if((i.arrays||i.defaults)&&(e.slides=[]),i.defaults&&(e.storyTitle=""),t.slides&&t.slides.length){e.slides=[];for(var s=0;s<t.slides.length;++s)e.slides[s]=c.ProtoPlayspaceSlideMetadata.toObject(t.slides[s],i)}return null!=t.storyTitle&&t.hasOwnProperty("storyTitle")&&(e.storyTitle=t.storyTitle),e},t}(),c.ProtoPlayspaceSlideMetadata=function(){function t(t){if(this.capabilityList=[],t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.mediaType=0,t.prototype.title="",t.prototype.clickUrl="",t.prototype.imageUrl="",t.prototype.slideDuration=0,t.prototype.videoRendition=null,t.prototype.type=0,t.prototype.coverMetadata=null,t.prototype.descriptionMetadata=null,t.prototype.bulletListMetadata=null,t.prototype.stockMetadata=null,t.prototype.quoteMetadata=null,t.prototype.instagramMetadata=null,t.prototype.capabilityList=o.emptyArray,t.prototype.portraitImageUrl="",t.prototype.mediaContext=0,t.prototype.altText="",t.decode=function(t,i){t instanceof a||(t=a.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoPlayspaceSlideMetadata;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.mediaType=t.int32();break;case 2:s.title=t.string();break;case 3:s.clickUrl=t.string();break;case 4:s.imageUrl=t.string();break;case 5:s.slideDuration=t.int32();break;case 6:s.videoRendition=c.ProtoPlayspaceVideoSettings.decode(t,t.uint32());break;case 7:s.type=t.int32();break;case 8:s.coverMetadata=c.ProtoPlayspaceCoverMetadata.decode(t,t.uint32());break;case 9:s.descriptionMetadata=c.ProtoPlayspaceDescriptionMetadata.decode(t,t.uint32());break;case 10:s.bulletListMetadata=c.ProtoPlayspaceBulletListMetadata.decode(t,t.uint32());break;case 11:s.stockMetadata=c.ProtoPlayspaceStockMetadata.decode(t,t.uint32());break;case 12:s.quoteMetadata=c.ProtoPlayspaceQuoteMetadata.decode(t,t.uint32());break;case 16:s.instagramMetadata=c.ProtoPlayspaceInstagramMetadata.decode(t,t.uint32());break;case 13:s.capabilityList&&s.capabilityList.length||(s.capabilityList=[]),s.capabilityList.push(c.ProtoPlayspaceSlideCapability.decode(t,t.uint32()));break;case 14:s.portraitImageUrl=t.string();break;case 15:s.mediaContext=t.int32();break;case 17:s.altText=t.string();break;default:t.skipType(7&n)}}return s},t.toObject=function(t,i){i||(i={});var e={};if((i.arrays||i.defaults)&&(e.capabilityList=[]),i.defaults&&(e.mediaType=i.enums===String?"Image":0,e.title="",e.clickUrl="",e.imageUrl="",e.slideDuration=0,e.videoRendition=null,e.type=i.enums===String?"Default":0,e.coverMetadata=null,e.descriptionMetadata=null,e.bulletListMetadata=null,e.stockMetadata=null,e.quoteMetadata=null,e.portraitImageUrl="",e.mediaContext=i.enums===String?"None":0,e.instagramMetadata=null,e.altText=""),null!=t.mediaType&&t.hasOwnProperty("mediaType")&&(e.mediaType=i.enums===String?c.ProtoMediaTypeEnum[t.mediaType]:t.mediaType),null!=t.title&&t.hasOwnProperty("title")&&(e.title=t.title),null!=t.clickUrl&&t.hasOwnProperty("clickUrl")&&(e.clickUrl=t.clickUrl),null!=t.imageUrl&&t.hasOwnProperty("imageUrl")&&(e.imageUrl=t.imageUrl),null!=t.slideDuration&&t.hasOwnProperty("slideDuration")&&(e.slideDuration=t.slideDuration),null!=t.videoRendition&&t.hasOwnProperty("videoRendition")&&(e.videoRendition=c.ProtoPlayspaceVideoSettings.toObject(t.videoRendition,i)),null!=t.type&&t.hasOwnProperty("type")&&(e.type=i.enums===String?c.ProtoPlayspaceSlideTypeEnum[t.type]:t.type),null!=t.coverMetadata&&t.hasOwnProperty("coverMetadata")&&(e.coverMetadata=c.ProtoPlayspaceCoverMetadata.toObject(t.coverMetadata,i)),null!=t.descriptionMetadata&&t.hasOwnProperty("descriptionMetadata")&&(e.descriptionMetadata=c.ProtoPlayspaceDescriptionMetadata.toObject(t.descriptionMetadata,i)),null!=t.bulletListMetadata&&t.hasOwnProperty("bulletListMetadata")&&(e.bulletListMetadata=c.ProtoPlayspaceBulletListMetadata.toObject(t.bulletListMetadata,i)),null!=t.stockMetadata&&t.hasOwnProperty("stockMetadata")&&(e.stockMetadata=c.ProtoPlayspaceStockMetadata.toObject(t.stockMetadata,i)),null!=t.quoteMetadata&&t.hasOwnProperty("quoteMetadata")&&(e.quoteMetadata=c.ProtoPlayspaceQuoteMetadata.toObject(t.quoteMetadata,i)),t.capabilityList&&t.capabilityList.length){e.capabilityList=[];for(var s=0;s<t.capabilityList.length;++s)e.capabilityList[s]=c.ProtoPlayspaceSlideCapability.toObject(t.capabilityList[s],i)}return null!=t.portraitImageUrl&&t.hasOwnProperty("portraitImageUrl")&&(e.portraitImageUrl=t.portraitImageUrl),null!=t.mediaContext&&t.hasOwnProperty("mediaContext")&&(e.mediaContext=i.enums===String?c.ProtoMediaContextEnum[t.mediaContext]:t.mediaContext),null!=t.instagramMetadata&&t.hasOwnProperty("instagramMetadata")&&(e.instagramMetadata=c.ProtoPlayspaceInstagramMetadata.toObject(t.instagramMetadata,i)),null!=t.altText&&t.hasOwnProperty("altText")&&(e.altText=t.altText),e},t}(),c.ProtoPlayspaceCoverMetadata=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.title="",t.prototype.subtitle="",t.decode=function(t,i){t instanceof a||(t=a.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoPlayspaceCoverMetadata;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.title=t.string();break;case 2:s.subtitle=t.string();break;default:t.skipType(7&n)}}return s},t.toObject=function(t,i){i||(i={});var e={};return i.defaults&&(e.title="",e.subtitle=""),null!=t.title&&t.hasOwnProperty("title")&&(e.title=t.title),null!=t.subtitle&&t.hasOwnProperty("subtitle")&&(e.subtitle=t.subtitle),e},t}(),c.ProtoPlayspaceDescriptionChunk=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.text="",t.prototype.colorScheme=0,t.decode=function(t,i){t instanceof a||(t=a.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoPlayspaceDescriptionChunk;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.text=t.string();break;case 2:s.colorScheme=t.int32();break;default:t.skipType(7&n)}}return s},t.toObject=function(t,i){i||(i={});var e={};return i.defaults&&(e.text="",e.colorScheme=i.enums===String?"Default":0),null!=t.text&&t.hasOwnProperty("text")&&(e.text=t.text),null!=t.colorScheme&&t.hasOwnProperty("colorScheme")&&(e.colorScheme=i.enums===String?c.ProtoPlayspaceColorSchemeEnum[t.colorScheme]:t.colorScheme),e},t}(),c.ProtoPlayspaceDescriptionMetadata=function(){function t(t){if(this.chunkList=[],t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.chunkList=o.emptyArray,t.prototype.label=null,t.decode=function(t,i){t instanceof a||(t=a.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoPlayspaceDescriptionMetadata;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.chunkList&&s.chunkList.length||(s.chunkList=[]),s.chunkList.push(c.ProtoPlayspaceDescriptionChunk.decode(t,t.uint32()));break;case 2:s.label=c.ProtoPlayspaceDescriptionChunk.decode(t,t.uint32());break;default:t.skipType(7&n)}}return s},t.toObject=function(t,i){i||(i={});var e={};if((i.arrays||i.defaults)&&(e.chunkList=[]),i.defaults&&(e.label=null),t.chunkList&&t.chunkList.length){e.chunkList=[];for(var s=0;s<t.chunkList.length;++s)e.chunkList[s]=c.ProtoPlayspaceDescriptionChunk.toObject(t.chunkList[s],i)}return null!=t.label&&t.hasOwnProperty("label")&&(e.label=c.ProtoPlayspaceDescriptionChunk.toObject(t.label,i)),e},t}(),c.ProtoBulletOptions=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.title="",t.prototype.description="",t.decode=function(t,i){t instanceof a||(t=a.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoBulletOptions;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.title=t.string();break;case 2:s.description=t.string();break;default:t.skipType(7&n)}}return s},t.toObject=function(t,i){i||(i={});var e={};return i.defaults&&(e.title="",e.description=""),null!=t.title&&t.hasOwnProperty("title")&&(e.title=t.title),null!=t.description&&t.hasOwnProperty("description")&&(e.description=t.description),e},t}(),c.ProtoPlayspaceBulletListMetadata=function(){function t(t){if(this.items=[],t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.title="",t.prototype.items=o.emptyArray,t.decode=function(t,i){t instanceof a||(t=a.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoPlayspaceBulletListMetadata;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.title=t.string();break;case 2:s.items&&s.items.length||(s.items=[]),s.items.push(c.ProtoBulletOptions.decode(t,t.uint32()));break;default:t.skipType(7&n)}}return s},t.toObject=function(t,i){i||(i={});var e={};if((i.arrays||i.defaults)&&(e.items=[]),i.defaults&&(e.title=""),null!=t.title&&t.hasOwnProperty("title")&&(e.title=t.title),t.items&&t.items.length){e.items=[];for(var s=0;s<t.items.length;++s)e.items[s]=c.ProtoBulletOptions.toObject(t.items[s],i)}return e},t}(),c.ProtoPlayspaceQuoteMetadata=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.text="",t.prototype.source="",t.decode=function(t,i){t instanceof a||(t=a.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoPlayspaceQuoteMetadata;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.text=t.string();break;case 2:s.source=t.string();break;default:t.skipType(7&n)}}return s},t.toObject=function(t,i){i||(i={});var e={};return i.defaults&&(e.text="",e.source=""),null!=t.text&&t.hasOwnProperty("text")&&(e.text=t.text),null!=t.source&&t.hasOwnProperty("source")&&(e.source=t.source),e},t}(),c.ProtoPlayspaceStockMetadata=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.encode=function(t,i){return i||(i=h.create()),i},t.decode=function(t,i){t instanceof a||(t=a.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoPlayspaceStockMetadata;t.pos<e;){var n=t.uint32();t.skipType(7&n)}return s},t.fromObject=function(t){return t instanceof c.ProtoPlayspaceStockMetadata?t:new c.ProtoPlayspaceStockMetadata},t.toObject=function(){return{}},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.ProtoPlayspaceInstagramMetadata=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.handle="",t.prototype.createdDate="",t.prototype.likes="",t.prototype.comments="",t.encode=function(t,i){return i||(i=h.create()),null!=t.handle&&t.hasOwnProperty("handle")&&i.uint32(10).string(t.handle),null!=t.createdDate&&t.hasOwnProperty("createdDate")&&i.uint32(18).string(t.createdDate),null!=t.likes&&t.hasOwnProperty("likes")&&i.uint32(26).string(t.likes),null!=t.comments&&t.hasOwnProperty("comments")&&i.uint32(34).string(t.comments),i},t.decode=function(t,i){t instanceof a||(t=a.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoPlayspaceInstagramMetadata;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.handle=t.string();break;case 2:s.createdDate=t.string();break;case 3:s.likes=t.string();break;case 4:s.comments=t.string();break;default:t.skipType(7&n)}}return s},t.fromObject=function(t){if(t instanceof c.ProtoPlayspaceInstagramMetadata)return t;var i=new c.ProtoPlayspaceInstagramMetadata;return null!=t.handle&&(i.handle=String(t.handle)),null!=t.createdDate&&(i.createdDate=String(t.createdDate)),null!=t.likes&&(i.likes=String(t.likes)),null!=t.comments&&(i.comments=String(t.comments)),i},t.toObject=function(t,i){i||(i={});var e={};return i.defaults&&(e.handle="",e.createdDate="",e.likes="",e.comments=""),null!=t.handle&&t.hasOwnProperty("handle")&&(e.handle=t.handle),null!=t.createdDate&&t.hasOwnProperty("createdDate")&&(e.createdDate=t.createdDate),null!=t.likes&&t.hasOwnProperty("likes")&&(e.likes=t.likes),null!=t.comments&&t.hasOwnProperty("comments")&&(e.comments=t.comments),e},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.ProtoMediaTypeEnum=function(){var t={},i=Object.create(t);return i[t[0]="Image"]=0,i[t[1]="Video"]=1,i}(),c.ProtoPlayspaceColorPrimary=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.background="#F1F1F1",t.prototype.foreground="#000000",t.decode=function(t,i){t instanceof a||(t=a.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoPlayspaceColorPrimary;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.background=t.string();break;case 2:s.foreground=t.string();break;default:t.skipType(7&n)}}return s},t.toObject=function(t,i){i||(i={});var e={};return i.defaults&&(e.background="#F1F1F1",e.foreground="#000000"),null!=t.background&&t.hasOwnProperty("background")&&(e.background=t.background),null!=t.foreground&&t.hasOwnProperty("foreground")&&(e.foreground=t.foreground),e},t}(),c.ProtoPlayspaceColorSecondary=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.background="#000000 ",t.prototype.foreground="#F1F1F1",t.decode=function(t,i){t instanceof a||(t=a.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoPlayspaceColorSecondary;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.background=t.string();break;case 2:s.foreground=t.string();break;default:t.skipType(7&n)}}return s},t.toObject=function(t,i){i||(i={});var e={};return i.defaults&&(e.background="#000000 ",e.foreground="#F1F1F1"),null!=t.background&&t.hasOwnProperty("background")&&(e.background=t.background),null!=t.foreground&&t.hasOwnProperty("foreground")&&(e.foreground=t.foreground),e},t}(),c.ProtoPlayspaceColorAccent=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.background="",t.prototype.foreground="",t.decode=function(t,i){t instanceof a||(t=a.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoPlayspaceColorAccent;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.background=t.string();break;case 2:s.foreground=t.string();break;default:t.skipType(7&n)}}return s},t.toObject=function(t,i){i||(i={});var e={};return i.defaults&&(e.background="",e.foreground=""),null!=t.background&&t.hasOwnProperty("background")&&(e.background=t.background),null!=t.foreground&&t.hasOwnProperty("foreground")&&(e.foreground=t.foreground),e},t}(),c.ProtoPlayspaceRequest=function(){function t(t){if(this.tokens=[],this.queryJsTargeting={},this.reloadedPlayers={},t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.tokens=o.emptyArray,t.prototype.pageUrl="",t.prototype.userId="",t.prototype.forceLineItemId="",t.prototype.forcePlayerId="",t.prototype.forceStoryId="",t.prototype.version=0,t.prototype.clientAb0=0,t.prototype.clientAb1=0,t.prototype.customParam1="",t.prototype.customParam2="",t.prototype.customParam3="",t.prototype.forceExploration=!1,t.prototype.es6=!1,t.prototype.bundleId="",t.prototype.parseDomain=!1,t.prototype.implementationType=0,t.prototype.queryJsTargeting=o.emptyObject,t.prototype.isConsentConnatix=!0,t.prototype.reloadedPlayers=o.emptyObject,t.prototype.disableTracking=!1,t.prototype.referrer="",t.prototype.customParam4="",t.prototype.customParam5="",t.encode=function(t,i){if(i||(i=h.create()),null!=t.tokens&&t.tokens.length)for(var e=0;e<t.tokens.length;++e)i.uint32(10).string(t.tokens[e]);if(null!=t.pageUrl&&t.hasOwnProperty("pageUrl")&&i.uint32(26).string(t.pageUrl),null!=t.userId&&t.hasOwnProperty("userId")&&i.uint32(42).string(t.userId),null!=t.forceLineItemId&&t.hasOwnProperty("forceLineItemId")&&i.uint32(50).string(t.forceLineItemId),null!=t.forcePlayerId&&t.hasOwnProperty("forcePlayerId")&&i.uint32(58).string(t.forcePlayerId),null!=t.forceStoryId&&t.hasOwnProperty("forceStoryId")&&i.uint32(66).string(t.forceStoryId),null!=t.version&&t.hasOwnProperty("version")&&i.uint32(72).int32(t.version),null!=t.clientAb0&&t.hasOwnProperty("clientAb0")&&i.uint32(80).int32(t.clientAb0),null!=t.clientAb1&&t.hasOwnProperty("clientAb1")&&i.uint32(88).int32(t.clientAb1),null!=t.customParam1&&t.hasOwnProperty("customParam1")&&i.uint32(114).string(t.customParam1),null!=t.customParam2&&t.hasOwnProperty("customParam2")&&i.uint32(122).string(t.customParam2),null!=t.customParam3&&t.hasOwnProperty("customParam3")&&i.uint32(130).string(t.customParam3),null!=t.forceExploration&&t.hasOwnProperty("forceExploration")&&i.uint32(136).bool(t.forceExploration),null!=t.es6&&t.hasOwnProperty("es6")&&i.uint32(144).bool(t.es6),null!=t.bundleId&&t.hasOwnProperty("bundleId")&&i.uint32(154).string(t.bundleId),null!=t.parseDomain&&t.hasOwnProperty("parseDomain")&&i.uint32(160).bool(t.parseDomain),null!=t.implementationType&&t.hasOwnProperty("implementationType")&&i.uint32(168).int32(t.implementationType),null!=t.queryJsTargeting&&t.hasOwnProperty("queryJsTargeting")){var s=Object.keys(t.queryJsTargeting);for(e=0;e<s.length;++e)i.uint32(178).fork().uint32(10).string(s[e]).uint32(18).string(t.queryJsTargeting[s[e]]).ldelim()}if(null!=t.isConsentConnatix&&t.hasOwnProperty("isConsentConnatix")&&i.uint32(184).bool(t.isConsentConnatix),null!=t.reloadedPlayers&&t.hasOwnProperty("reloadedPlayers"))for(s=Object.keys(t.reloadedPlayers),e=0;e<s.length;++e)i.uint32(202).fork().uint32(10).string(s[e]).uint32(18).string(t.reloadedPlayers[s[e]]).ldelim();return null!=t.disableTracking&&t.hasOwnProperty("disableTracking")&&i.uint32(216).bool(t.disableTracking),null!=t.referrer&&t.hasOwnProperty("referrer")&&i.uint32(226).string(t.referrer),null!=t.customParam4&&t.hasOwnProperty("customParam4")&&i.uint32(234).string(t.customParam4),null!=t.customParam5&&t.hasOwnProperty("customParam5")&&i.uint32(242).string(t.customParam5),i},t.fromObject=function(t){if(t instanceof c.ProtoPlayspaceRequest)return t;var i=new c.ProtoPlayspaceRequest;if(t.tokens){if(!Array.isArray(t.tokens))throw TypeError(".ProtoPlayspaceRequest.tokens: array expected");i.tokens=[];for(var e=0;e<t.tokens.length;++e)i.tokens[e]=String(t.tokens[e])}switch(null!=t.pageUrl&&(i.pageUrl=String(t.pageUrl)),null!=t.userId&&(i.userId=String(t.userId)),null!=t.forceLineItemId&&(i.forceLineItemId=String(t.forceLineItemId)),null!=t.forcePlayerId&&(i.forcePlayerId=String(t.forcePlayerId)),null!=t.forceStoryId&&(i.forceStoryId=String(t.forceStoryId)),null!=t.version&&(i.version=0|t.version),null!=t.clientAb0&&(i.clientAb0=0|t.clientAb0),null!=t.clientAb1&&(i.clientAb1=0|t.clientAb1),null!=t.customParam1&&(i.customParam1=String(t.customParam1)),null!=t.customParam2&&(i.customParam2=String(t.customParam2)),null!=t.customParam3&&(i.customParam3=String(t.customParam3)),null!=t.forceExploration&&(i.forceExploration=Boolean(t.forceExploration)),null!=t.es6&&(i.es6=Boolean(t.es6)),null!=t.bundleId&&(i.bundleId=String(t.bundleId)),null!=t.parseDomain&&(i.parseDomain=Boolean(t.parseDomain)),t.implementationType){case"Web":case 0:i.implementationType=0;break;case"Amp":case 1:i.implementationType=1}if(t.queryJsTargeting){if("object"!=typeof t.queryJsTargeting)throw TypeError(".ProtoPlayspaceRequest.queryJsTargeting: object expected");i.queryJsTargeting={};var s=Object.keys(t.queryJsTargeting);for(e=0;e<s.length;++e)i.queryJsTargeting[s[e]]=String(t.queryJsTargeting[s[e]])}if(null!=t.isConsentConnatix&&(i.isConsentConnatix=Boolean(t.isConsentConnatix)),t.reloadedPlayers){if("object"!=typeof t.reloadedPlayers)throw TypeError(".ProtoPlayspaceRequest.reloadedPlayers: object expected");i.reloadedPlayers={};for(s=Object.keys(t.reloadedPlayers),e=0;e<s.length;++e)i.reloadedPlayers[s[e]]=String(t.reloadedPlayers[s[e]])}return null!=t.disableTracking&&(i.disableTracking=Boolean(t.disableTracking)),null!=t.referrer&&(i.referrer=String(t.referrer)),null!=t.customParam4&&(i.customParam4=String(t.customParam4)),null!=t.customParam5&&(i.customParam5=String(t.customParam5)),i},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.ProtoPlayspace=function(){function t(t){if(this.sharingDestinations=[],this.floatingDeviceMode=[],this.lineItems=[],this.adBreaks=[],t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.playerId="",t.prototype.playbackMode=0,t.prototype.soundMode=0,t.prototype.endOfCycleMode=0,t.prototype.containerSelector="",t.prototype.position=0,t.prototype.insertPosition=0,t.prototype.forceInsertPath=!1,t.prototype.renderInFrame=!1,t.prototype.scrollHijackingProtection=!1,t.prototype.preRollBreak=0,t.prototype.postRollBreak=0,t.prototype.midRollNumber=-1,t.prototype.slidesBetweenAds=0,t.prototype.minSlidesBeforeFirstAd=0,t.prototype.adViewabilityPolicy=0,t.prototype.casting=!1,t.prototype.sharingDestinations=o.emptyArray,t.prototype.expandButton=!1,t.prototype.closeButtonMode=0,t.prototype.floatingMode=0,t.prototype.floatingDeviceMode=o.emptyArray,t.prototype.floatingCloseButtonMode=0,t.prototype.floatingFixedPosition=0,t.prototype.floatingPageElement="",t.prototype.floatingUseElementWidth=!1,t.prototype.floatingScrollPosition=0,t.prototype.floatingGutterX=0,t.prototype.floatingGutterY=0,t.prototype.floatingWidth=0,t.prototype.html="",t.prototype.logoUrl="",t.prototype.lineItems=o.emptyArray,t.prototype.adPlaybackMode=0,t.prototype.css="",t.prototype.sessionId="",t.prototype.orientation=0,t.prototype.orientationBreakpoint=0,t.prototype.activeVersion="",t.prototype.storyId="",t.prototype.floatingAppendLocation=0,t.prototype.floatingYAxisPadding=0,t.prototype.contentTitleTextColor="",t.prototype.useAccentColorForProgressBar=!1,t.prototype.primaryColorList=null,t.prototype.secondaryColorList=null,t.prototype.accentColorList=null,t.prototype.customJsCode="",t.prototype.initializationSettingsJson="",t.prototype.publisherName="",t.prototype.adSkippability=0,t.prototype.skipAdAfter=5,t.prototype.adBreaks=o.emptyArray,t.prototype.amazonTamSlotId="",t.prototype.limitClientSideApiUse=!1,t.prototype.abTestId="",t.decode=function(t,i){t instanceof a||(t=a.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoPlayspace;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.playerId=t.string();break;case 2:s.playbackMode=t.int32();break;case 3:s.soundMode=t.int32();break;case 4:s.endOfCycleMode=t.int32();break;case 5:s.containerSelector=t.string();break;case 6:s.position=t.int32();break;case 7:s.insertPosition=t.int32();break;case 8:s.forceInsertPath=t.bool();break;case 9:s.renderInFrame=t.bool();break;case 10:s.scrollHijackingProtection=t.bool();break;case 11:s.preRollBreak=t.int32();break;case 12:s.postRollBreak=t.int32();break;case 13:s.midRollNumber=t.int32();break;case 14:s.slidesBetweenAds=t.int32();break;case 15:s.minSlidesBeforeFirstAd=t.int32();break;case 16:s.adViewabilityPolicy=t.int32();break;case 18:s.casting=t.bool();break;case 19:if(s.sharingDestinations&&s.sharingDestinations.length||(s.sharingDestinations=[]),2==(7&n))for(var r=t.uint32()+t.pos;t.pos<r;)s.sharingDestinations.push(t.int32());else s.sharingDestinations.push(t.int32());break;case 20:s.expandButton=t.bool();break;case 21:s.closeButtonMode=t.int32();break;case 22:s.floatingMode=t.int32();break;case 23:if(s.floatingDeviceMode&&s.floatingDeviceMode.length||(s.floatingDeviceMode=[]),2==(7&n))for(r=t.uint32()+t.pos;t.pos<r;)s.floatingDeviceMode.push(t.int32());else s.floatingDeviceMode.push(t.int32());break;case 24:s.floatingCloseButtonMode=t.int32();break;case 25:s.floatingFixedPosition=t.int32();break;case 26:s.floatingPageElement=t.string();break;case 27:s.floatingUseElementWidth=t.bool();break;case 28:s.floatingScrollPosition=t.int32();break;case 29:s.floatingGutterX=t.int32();break;case 30:s.floatingGutterY=t.int32();break;case 31:s.floatingWidth=t.int32();break;case 35:s.html=t.string();break;case 36:s.logoUrl=t.string();break;case 37:s.lineItems&&s.lineItems.length||(s.lineItems=[]),s.lineItems.push(c.ProtoLineItem.decode(t,t.uint32()));break;case 38:s.adPlaybackMode=t.int32();break;case 39:s.css=t.string();break;case 40:s.sessionId=t.string();break;case 41:s.orientation=t.int32();break;case 42:s.orientationBreakpoint=t.int32();break;case 43:s.activeVersion=t.string();break;case 44:s.storyId=t.string();break;case 50:s.floatingAppendLocation=t.int32();break;case 51:s.floatingYAxisPadding=t.int32();break;case 57:s.contentTitleTextColor=t.string();break;case 58:s.useAccentColorForProgressBar=t.bool();break;case 59:s.primaryColorList=c.ProtoPlayspaceColorPrimary.decode(t,t.uint32());break;case 60:s.secondaryColorList=c.ProtoPlayspaceColorSecondary.decode(t,t.uint32());break;case 61:s.accentColorList=c.ProtoPlayspaceColorAccent.decode(t,t.uint32());break;case 62:s.customJsCode=t.string();break;case 63:s.initializationSettingsJson=t.string();break;case 64:s.publisherName=t.string();break;case 65:s.adSkippability=t.int32();break;case 66:s.skipAdAfter=t.int32();break;case 67:s.adBreaks&&s.adBreaks.length||(s.adBreaks=[]),s.adBreaks.push(c.ProtoAdBreak.decode(t,t.uint32()));break;case 68:s.amazonTamSlotId=t.string();break;case 69:s.limitClientSideApiUse=t.bool();break;case 70:s.abTestId=t.string();break;default:t.skipType(7&n)}}return s},t.toObject=function(t,i){i||(i={});var e={};if((i.arrays||i.defaults)&&(e.sharingDestinations=[],e.floatingDeviceMode=[],e.lineItems=[],e.adBreaks=[]),i.defaults&&(e.playerId="",e.playbackMode=i.enums===String?"Autoplay":0,e.soundMode=i.enums===String?"Mute":0,e.endOfCycleMode=i.enums===String?"Loop":0,e.containerSelector="",e.position=0,e.insertPosition=i.enums===String?"WithinContainer":0,e.forceInsertPath=!1,e.renderInFrame=!1,e.scrollHijackingProtection=!1,e.preRollBreak=0,e.postRollBreak=0,e.midRollNumber=-1,e.slidesBetweenAds=0,e.minSlidesBeforeFirstAd=0,e.adViewabilityPolicy=i.enums===String?"Default":0,e.casting=!1,e.expandButton=!1,e.closeButtonMode=i.enums===String?"Off":0,e.floatingMode=i.enums===String?"Off":0,e.floatingCloseButtonMode=i.enums===String?"Off":0,e.floatingFixedPosition=i.enums===String?"Page":0,e.floatingPageElement="",e.floatingUseElementWidth=!1,e.floatingScrollPosition=i.enums===String?"BottomRight":0,e.floatingGutterX=0,e.floatingGutterY=0,e.floatingWidth=0,e.html="",e.logoUrl="",e.adPlaybackMode=i.enums===String?"Autoplay":0,e.css="",e.sessionId="",e.orientation=i.enums===String?"Mixed":0,e.orientationBreakpoint=0,e.activeVersion="",e.storyId="",e.floatingAppendLocation=i.enums===String?"Above":0,e.floatingYAxisPadding=0,e.contentTitleTextColor="",e.useAccentColorForProgressBar=!1,e.primaryColorList=null,e.secondaryColorList=null,e.accentColorList=null,e.customJsCode="",e.initializationSettingsJson="",e.publisherName="",e.adSkippability=i.enums===String?"IfLongerThan31Sec":0,e.skipAdAfter=5,e.amazonTamSlotId="",e.limitClientSideApiUse=!1,e.abTestId=""),null!=t.playerId&&t.hasOwnProperty("playerId")&&(e.playerId=t.playerId),null!=t.playbackMode&&t.hasOwnProperty("playbackMode")&&(e.playbackMode=i.enums===String?c.ProtoPlayerPlaybackModeEnum[t.playbackMode]:t.playbackMode),null!=t.soundMode&&t.hasOwnProperty("soundMode")&&(e.soundMode=i.enums===String?c.ProtoPlayerSoundMode[t.soundMode]:t.soundMode),null!=t.endOfCycleMode&&t.hasOwnProperty("endOfCycleMode")&&(e.endOfCycleMode=i.enums===String?c.ProtoEndOfSlideCycleMode[t.endOfCycleMode]:t.endOfCycleMode),null!=t.containerSelector&&t.hasOwnProperty("containerSelector")&&(e.containerSelector=t.containerSelector),null!=t.position&&t.hasOwnProperty("position")&&(e.position=t.position),null!=t.insertPosition&&t.hasOwnProperty("insertPosition")&&(e.insertPosition=i.enums===String?c.ProtoPlayerInsertMode[t.insertPosition]:t.insertPosition),null!=t.forceInsertPath&&t.hasOwnProperty("forceInsertPath")&&(e.forceInsertPath=t.forceInsertPath),null!=t.renderInFrame&&t.hasOwnProperty("renderInFrame")&&(e.renderInFrame=t.renderInFrame),null!=t.scrollHijackingProtection&&t.hasOwnProperty("scrollHijackingProtection")&&(e.scrollHijackingProtection=t.scrollHijackingProtection),null!=t.preRollBreak&&t.hasOwnProperty("preRollBreak")&&(e.preRollBreak=t.preRollBreak),null!=t.postRollBreak&&t.hasOwnProperty("postRollBreak")&&(e.postRollBreak=t.postRollBreak),null!=t.midRollNumber&&t.hasOwnProperty("midRollNumber")&&(e.midRollNumber=t.midRollNumber),null!=t.slidesBetweenAds&&t.hasOwnProperty("slidesBetweenAds")&&(e.slidesBetweenAds=t.slidesBetweenAds),null!=t.minSlidesBeforeFirstAd&&t.hasOwnProperty("minSlidesBeforeFirstAd")&&(e.minSlidesBeforeFirstAd=t.minSlidesBeforeFirstAd),null!=t.adViewabilityPolicy&&t.hasOwnProperty("adViewabilityPolicy")&&(e.adViewabilityPolicy=i.enums===String?c.ProtoAdViewabilityPolicy[t.adViewabilityPolicy]:t.adViewabilityPolicy),null!=t.casting&&t.hasOwnProperty("casting")&&(e.casting=t.casting),t.sharingDestinations&&t.sharingDestinations.length){e.sharingDestinations=[];for(var s=0;s<t.sharingDestinations.length;++s)e.sharingDestinations[s]=i.enums===String?c.ProtoSharingDestination[t.sharingDestinations[s]]:t.sharingDestinations[s]}if(null!=t.expandButton&&t.hasOwnProperty("expandButton")&&(e.expandButton=t.expandButton),null!=t.closeButtonMode&&t.hasOwnProperty("closeButtonMode")&&(e.closeButtonMode=i.enums===String?c.ProtoPlayerCloseButtonMode[t.closeButtonMode]:t.closeButtonMode),null!=t.floatingMode&&t.hasOwnProperty("floatingMode")&&(e.floatingMode=i.enums===String?c.ProtoPlayerFloatingMode[t.floatingMode]:t.floatingMode),t.floatingDeviceMode&&t.floatingDeviceMode.length){e.floatingDeviceMode=[];for(s=0;s<t.floatingDeviceMode.length;++s)e.floatingDeviceMode[s]=i.enums===String?c.ProtoDeviceType[t.floatingDeviceMode[s]]:t.floatingDeviceMode[s]}if(null!=t.floatingCloseButtonMode&&t.hasOwnProperty("floatingCloseButtonMode")&&(e.floatingCloseButtonMode=i.enums===String?c.ProtoPlayerCloseButtonMode[t.floatingCloseButtonMode]:t.floatingCloseButtonMode),null!=t.floatingFixedPosition&&t.hasOwnProperty("floatingFixedPosition")&&(e.floatingFixedPosition=i.enums===String?c.ProtoFloatingFixedPositionMode[t.floatingFixedPosition]:t.floatingFixedPosition),null!=t.floatingPageElement&&t.hasOwnProperty("floatingPageElement")&&(e.floatingPageElement=t.floatingPageElement),null!=t.floatingUseElementWidth&&t.hasOwnProperty("floatingUseElementWidth")&&(e.floatingUseElementWidth=t.floatingUseElementWidth),null!=t.floatingScrollPosition&&t.hasOwnProperty("floatingScrollPosition")&&(e.floatingScrollPosition=i.enums===String?c.ProtoPositionMode[t.floatingScrollPosition]:t.floatingScrollPosition),null!=t.floatingGutterX&&t.hasOwnProperty("floatingGutterX")&&(e.floatingGutterX=t.floatingGutterX),null!=t.floatingGutterY&&t.hasOwnProperty("floatingGutterY")&&(e.floatingGutterY=t.floatingGutterY),null!=t.floatingWidth&&t.hasOwnProperty("floatingWidth")&&(e.floatingWidth=t.floatingWidth),null!=t.html&&t.hasOwnProperty("html")&&(e.html=t.html),null!=t.logoUrl&&t.hasOwnProperty("logoUrl")&&(e.logoUrl=t.logoUrl),t.lineItems&&t.lineItems.length){e.lineItems=[];for(s=0;s<t.lineItems.length;++s)e.lineItems[s]=c.ProtoLineItem.toObject(t.lineItems[s],i)}if(null!=t.adPlaybackMode&&t.hasOwnProperty("adPlaybackMode")&&(e.adPlaybackMode=i.enums===String?c.ProtoAdPlaybackMode[t.adPlaybackMode]:t.adPlaybackMode),null!=t.css&&t.hasOwnProperty("css")&&(e.css=t.css),null!=t.sessionId&&t.hasOwnProperty("sessionId")&&(e.sessionId=t.sessionId),null!=t.orientation&&t.hasOwnProperty("orientation")&&(e.orientation=i.enums===String?c.ProtoPlayerOrientationEnum[t.orientation]:t.orientation),null!=t.orientationBreakpoint&&t.hasOwnProperty("orientationBreakpoint")&&(e.orientationBreakpoint=t.orientationBreakpoint),null!=t.activeVersion&&t.hasOwnProperty("activeVersion")&&(e.activeVersion=t.activeVersion),null!=t.storyId&&t.hasOwnProperty("storyId")&&(e.storyId=t.storyId),null!=t.floatingAppendLocation&&t.hasOwnProperty("floatingAppendLocation")&&(e.floatingAppendLocation=i.enums===String?c.ProtoFloatingAppendLocationEnum[t.floatingAppendLocation]:t.floatingAppendLocation),null!=t.floatingYAxisPadding&&t.hasOwnProperty("floatingYAxisPadding")&&(e.floatingYAxisPadding=t.floatingYAxisPadding),null!=t.contentTitleTextColor&&t.hasOwnProperty("contentTitleTextColor")&&(e.contentTitleTextColor=t.contentTitleTextColor),null!=t.useAccentColorForProgressBar&&t.hasOwnProperty("useAccentColorForProgressBar")&&(e.useAccentColorForProgressBar=t.useAccentColorForProgressBar),null!=t.primaryColorList&&t.hasOwnProperty("primaryColorList")&&(e.primaryColorList=c.ProtoPlayspaceColorPrimary.toObject(t.primaryColorList,i)),null!=t.secondaryColorList&&t.hasOwnProperty("secondaryColorList")&&(e.secondaryColorList=c.ProtoPlayspaceColorSecondary.toObject(t.secondaryColorList,i)),null!=t.accentColorList&&t.hasOwnProperty("accentColorList")&&(e.accentColorList=c.ProtoPlayspaceColorAccent.toObject(t.accentColorList,i)),null!=t.customJsCode&&t.hasOwnProperty("customJsCode")&&(e.customJsCode=t.customJsCode),null!=t.initializationSettingsJson&&t.hasOwnProperty("initializationSettingsJson")&&(e.initializationSettingsJson=t.initializationSettingsJson),null!=t.publisherName&&t.hasOwnProperty("publisherName")&&(e.publisherName=t.publisherName),null!=t.adSkippability&&t.hasOwnProperty("adSkippability")&&(e.adSkippability=i.enums===String?c.ProtoPlayerAdSkippability[t.adSkippability]:t.adSkippability),null!=t.skipAdAfter&&t.hasOwnProperty("skipAdAfter")&&(e.skipAdAfter=t.skipAdAfter),t.adBreaks&&t.adBreaks.length){e.adBreaks=[];for(s=0;s<t.adBreaks.length;++s)e.adBreaks[s]=c.ProtoAdBreak.toObject(t.adBreaks[s],i)}return null!=t.amazonTamSlotId&&t.hasOwnProperty("amazonTamSlotId")&&(e.amazonTamSlotId=t.amazonTamSlotId),null!=t.limitClientSideApiUse&&t.hasOwnProperty("limitClientSideApiUse")&&(e.limitClientSideApiUse=t.limitClientSideApiUse),null!=t.abTestId&&t.hasOwnProperty("abTestId")&&(e.abTestId=t.abTestId),e},t}(),c.ProtoPlayspaceResponse=function(){function t(t){if(this.players=[],this.lineItems=[],this.cookieSyncUrls={},t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.errorMessage="",t.prototype.players=o.emptyArray,t.prototype.browser=null,t.prototype.geoLocation=null,t.prototype.lineItems=o.emptyArray,t.prototype.cookieSyncUrls=o.emptyObject,t.prototype.explorationMode=!1,t.prototype.supplyChain=null,t.prototype.secondLevelDomain="",t.prototype.userInformation=null,t.prototype.serverAb0=0,t.prototype.serverAb1=0,t.prototype.isSeoTraffic=!1,t.decode=function(t,i){t instanceof a||(t=a.create(t));for(var e,s=void 0===i?t.len:t.pos+i,n=new c.ProtoPlayspaceResponse;t.pos<s;){var r=t.uint32();switch(r>>>3){case 1:n.errorMessage=t.string();break;case 10:n.players&&n.players.length||(n.players=[]),n.players.push(c.ProtoPlayspace.decode(t,t.uint32()));break;case 11:n.browser=c.Browser.decode(t,t.uint32());break;case 12:n.geoLocation=c.GeoLocation.decode(t,t.uint32());break;case 13:n.lineItems&&n.lineItems.length||(n.lineItems=[]),n.lineItems.push(c.ProtoLineItem.decode(t,t.uint32()));break;case 14:t.skip().pos++,n.cookieSyncUrls===o.emptyObject&&(n.cookieSyncUrls={}),e=t.int32(),t.pos++,n.cookieSyncUrls[e]=t.string();break;case 15:n.explorationMode=t.bool();break;case 17:n.supplyChain=c.ProtoSupplyChain.decode(t,t.uint32());break;case 18:n.secondLevelDomain=t.string();break;case 20:n.userInformation=c.ProtoUserInformation.decode(t,t.uint32());break;case 21:n.serverAb0=t.int32();break;case 22:n.serverAb1=t.int32();break;case 23:n.isSeoTraffic=t.bool();break;default:t.skipType(7&r)}}return n},t.toObject=function(t,i){i||(i={});var e,s={};if((i.arrays||i.defaults)&&(s.players=[],s.lineItems=[]),(i.objects||i.defaults)&&(s.cookieSyncUrls={}),i.defaults&&(s.errorMessage="",s.browser=null,s.geoLocation=null,s.explorationMode=!1,s.supplyChain=null,s.secondLevelDomain="",s.userInformation=null,s.serverAb0=0,s.serverAb1=0,s.isSeoTraffic=!1),null!=t.errorMessage&&t.hasOwnProperty("errorMessage")&&(s.errorMessage=t.errorMessage),t.players&&t.players.length){s.players=[];for(var n=0;n<t.players.length;++n)s.players[n]=c.ProtoPlayspace.toObject(t.players[n],i)}if(null!=t.browser&&t.hasOwnProperty("browser")&&(s.browser=c.Browser.toObject(t.browser,i)),null!=t.geoLocation&&t.hasOwnProperty("geoLocation")&&(s.geoLocation=c.GeoLocation.toObject(t.geoLocation,i)),t.lineItems&&t.lineItems.length){s.lineItems=[];for(n=0;n<t.lineItems.length;++n)s.lineItems[n]=c.ProtoLineItem.toObject(t.lineItems[n],i)}if(t.cookieSyncUrls&&(e=Object.keys(t.cookieSyncUrls)).length){s.cookieSyncUrls={};for(n=0;n<e.length;++n)s.cookieSyncUrls[e[n]]=t.cookieSyncUrls[e[n]]}return null!=t.explorationMode&&t.hasOwnProperty("explorationMode")&&(s.explorationMode=t.explorationMode),null!=t.supplyChain&&t.hasOwnProperty("supplyChain")&&(s.supplyChain=c.ProtoSupplyChain.toObject(t.supplyChain,i)),null!=t.secondLevelDomain&&t.hasOwnProperty("secondLevelDomain")&&(s.secondLevelDomain=t.secondLevelDomain),null!=t.userInformation&&t.hasOwnProperty("userInformation")&&(s.userInformation=c.ProtoUserInformation.toObject(t.userInformation,i)),null!=t.serverAb0&&t.hasOwnProperty("serverAb0")&&(s.serverAb0=t.serverAb0),null!=t.serverAb1&&t.hasOwnProperty("serverAb1")&&(s.serverAb1=t.serverAb1),null!=t.isSeoTraffic&&t.hasOwnProperty("isSeoTraffic")&&(s.isSeoTraffic=t.isSeoTraffic),s},t}(),c.ProtoDeviceType=function(){var t={},i=Object.create(t);return i[t[0]="Desktop"]=0,i[t[1]="Smartphone"]=1,i[t[2]="Tablet"]=2,i[t[3]="GameConsole"]=3,i[t[4]="SmartTV"]=4,i[t[5]="WearableComputer"]=5,i[t[6]="PDA"]=6,i[t[7]="Unrecognized"]=7,i}(),c.Browser=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.browserVersion="",t.prototype.browserType="",t.prototype.osCode="",t.prototype.device=0,t.encode=function(t,i){return i||(i=h.create()),null!=t.browserVersion&&t.hasOwnProperty("browserVersion")&&i.uint32(10).string(t.browserVersion),null!=t.browserType&&t.hasOwnProperty("browserType")&&i.uint32(18).string(t.browserType),null!=t.osCode&&t.hasOwnProperty("osCode")&&i.uint32(26).string(t.osCode),null!=t.device&&t.hasOwnProperty("device")&&i.uint32(32).int32(t.device),i},t.decode=function(t,i){t instanceof a||(t=a.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.Browser;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.browserVersion=t.string();break;case 2:s.browserType=t.string();break;case 3:s.osCode=t.string();break;case 4:s.device=t.int32();break;default:t.skipType(7&n)}}return s},t.fromObject=function(t){if(t instanceof c.Browser)return t;var i=new c.Browser;switch(null!=t.browserVersion&&(i.browserVersion=String(t.browserVersion)),null!=t.browserType&&(i.browserType=String(t.browserType)),null!=t.osCode&&(i.osCode=String(t.osCode)),t.device){case"Desktop":case 0:i.device=0;break;case"Smartphone":case 1:i.device=1;break;case"Tablet":case 2:i.device=2;break;case"GameConsole":case 3:i.device=3;break;case"SmartTV":case 4:i.device=4;break;case"WearableComputer":case 5:i.device=5;break;case"PDA":case 6:i.device=6;break;case"Unrecognized":case 7:i.device=7}return i},t.toObject=function(t,i){i||(i={});var e={};return i.defaults&&(e.browserVersion="",e.browserType="",e.osCode="",e.device=i.enums===String?"Desktop":0),null!=t.browserVersion&&t.hasOwnProperty("browserVersion")&&(e.browserVersion=t.browserVersion),null!=t.browserType&&t.hasOwnProperty("browserType")&&(e.browserType=t.browserType),null!=t.osCode&&t.hasOwnProperty("osCode")&&(e.osCode=t.osCode),null!=t.device&&t.hasOwnProperty("device")&&(e.device=i.enums===String?c.ProtoDeviceType[t.device]:t.device),e},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.GeoLocation=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.countryGeoId=0,t.prototype.cityId=0,t.prototype.subdivisionId=0,t.prototype.dmaId=0,t.prototype.ip="",t.prototype.lat=0,t.prototype.lon=0,t.encode=function(t,i){return i||(i=h.create()),null!=t.countryGeoId&&t.hasOwnProperty("countryGeoId")&&i.uint32(8).int32(t.countryGeoId),null!=t.cityId&&t.hasOwnProperty("cityId")&&i.uint32(16).int32(t.cityId),null!=t.subdivisionId&&t.hasOwnProperty("subdivisionId")&&i.uint32(24).int32(t.subdivisionId),null!=t.dmaId&&t.hasOwnProperty("dmaId")&&i.uint32(32).int32(t.dmaId),null!=t.ip&&t.hasOwnProperty("ip")&&i.uint32(42).string(t.ip),null!=t.lat&&t.hasOwnProperty("lat")&&i.uint32(49).double(t.lat),null!=t.lon&&t.hasOwnProperty("lon")&&i.uint32(57).double(t.lon),i},t.decode=function(t,i){t instanceof a||(t=a.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.GeoLocation;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.countryGeoId=t.int32();break;case 2:s.cityId=t.int32();break;case 3:s.subdivisionId=t.int32();break;case 4:s.dmaId=t.int32();break;case 5:s.ip=t.string();break;case 6:s.lat=t.double();break;case 7:s.lon=t.double();break;default:t.skipType(7&n)}}return s},t.fromObject=function(t){if(t instanceof c.GeoLocation)return t;var i=new c.GeoLocation;return null!=t.countryGeoId&&(i.countryGeoId=0|t.countryGeoId),null!=t.cityId&&(i.cityId=0|t.cityId),null!=t.subdivisionId&&(i.subdivisionId=0|t.subdivisionId),null!=t.dmaId&&(i.dmaId=0|t.dmaId),null!=t.ip&&(i.ip=String(t.ip)),null!=t.lat&&(i.lat=Number(t.lat)),null!=t.lon&&(i.lon=Number(t.lon)),i},t.toObject=function(t,i){i||(i={});var e={};return i.defaults&&(e.countryGeoId=0,e.cityId=0,e.subdivisionId=0,e.dmaId=0,e.ip="",e.lat=0,e.lon=0),null!=t.countryGeoId&&t.hasOwnProperty("countryGeoId")&&(e.countryGeoId=t.countryGeoId),null!=t.cityId&&t.hasOwnProperty("cityId")&&(e.cityId=t.cityId),null!=t.subdivisionId&&t.hasOwnProperty("subdivisionId")&&(e.subdivisionId=t.subdivisionId),null!=t.dmaId&&t.hasOwnProperty("dmaId")&&(e.dmaId=t.dmaId),null!=t.ip&&t.hasOwnProperty("ip")&&(e.ip=t.ip),null!=t.lat&&t.hasOwnProperty("lat")&&(e.lat=i.json&&!isFinite(t.lat)?String(t.lat):t.lat),null!=t.lon&&t.hasOwnProperty("lon")&&(e.lon=i.json&&!isFinite(t.lon)?String(t.lon):t.lon),e},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.ProtoTrackerType=function(){var t={},i=Object.create(t);return i[t[0]="Image"]=0,i[t[1]="Javascript"]=1,i}(),c.ProtoTrackerTriggerType=function(){var t={},i=Object.create(t);return i[t[0]="Impression"]=0,i[t[1]="Complete25Pc"]=1,i[t[2]="Complete50Pc"]=2,i[t[3]="Complete75Pc"]=3,i[t[4]="ViewCompletion"]=4,i[t[5]="VideoClick"]=5,i[t[6]="Pause"]=6,i[t[7]="Resume"]=7,i[t[8]="Mute"]=8,i[t[9]="Unmute"]=9,i}(),c.CreativeTrackerViewModel=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.type=0,t.prototype.trigger=0,t.prototype.url="",t.decode=function(t,i){t instanceof a||(t=a.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.CreativeTrackerViewModel;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.type=t.int32();break;case 2:s.trigger=t.int32();break;case 3:s.url=t.string();break;default:t.skipType(7&n)}}return s},t.toObject=function(t,i){i||(i={});var e={};return i.defaults&&(e.type=i.enums===String?"Image":0,e.trigger=i.enums===String?"Impression":0,e.url=""),null!=t.type&&t.hasOwnProperty("type")&&(e.type=i.enums===String?c.ProtoTrackerType[t.type]:t.type),null!=t.trigger&&t.hasOwnProperty("trigger")&&(e.trigger=i.enums===String?c.ProtoTrackerTriggerType[t.trigger]:t.trigger),null!=t.url&&t.hasOwnProperty("url")&&(e.url=t.url),e},t}(),c.ProtoCreativeTypeEnum=function(){var t={},i=Object.create(t);return i[t[0]="ThirdParty"]=0,i[t[1]="MediaFile"]=1,i[t[2]="Rtb"]=2,i[t[3]="External"]=3,i[t[4]="HeaderBidder"]=4,i[t[7]="Tam"]=7,i}(),c.ProtoResetCapTypeEnum=function(){var t={},i=Object.create(t);return i[t[0]="TimeCapping"]=0,i[t[1]="ContentCapping"]=1,i[t[2]="OpportunityCapping"]=2,i}(),c.ProtoAdSlotsEnum=function(){var t={},i=Object.create(t);return i[t[0]="PreRoll"]=0,i[t[1]="MidRoll"]=1,i[t[2]="PostRoll"]=2,i}(),c.ProtoLineItemPriority=function(){var t={},i=Object.create(t);return i[t[0]="House"]=0,i[t[1]="Default"]=1,i[t[2]="Preferred"]=2,i[t[3]="Top"]=3,i}(),c.ProtoAdSkipMode=function(){var t={},i=Object.create(t);return i[t[0]="IfLongerThan31Sec"]=0,i[t[1]="Always"]=1,i[t[2]="Never"]=2,i[t[3]="NotAplicable"]=3,i}(),c.ProtoAdType=function(){var t={},i=Object.create(t);return i[t[0]="Video"]=0,i[t[1]="Overlay"]=1,i}(),c.ProtoChoiceCriteriaEnum=function(){var t={},i=Object.create(t);return i[t[0]="Only"]=0,i[t[1]="Except"]=1,i}(),c.ProtoLineItemAdBreakTypeEnum=function(){var t={},i=Object.create(t);return i[t[1]="All"]=1,i[t[2]="SingleAd"]=2,i[t[3]="AdPod"]=3,i}(),c.ProtoLineItemTargetingTypeEnum=function(){var t={},i=Object.create(t);return i[t[0]="Only"]=0,i[t[1]="Except"]=1,i}(),c.ProtoLineItemAdSlotTargetingTypeEnum=function(){var t={},i=Object.create(t);return i[t[1]="SpecificSlots"]=1,i[t[2]="Interval"]=2,i}(),c.ProtoLineItemPauseAdOutOfViewEnum=function(){var t={},i=Object.create(t);return i[t[0]="Default"]=0,i[t[1]="Strict"]=1,i}(),c.ProtoLineItemContextualTargetingEnum=function(){var t={},i=Object.create(t);return i[t[0]="IncludeAny"]=0,i[t[1]="IncludeAll"]=1,i[t[2]="ExcludeAny"]=2,i[t[3]="ExcludeAll"]=3,i}(),c.ProtoSizeChoiceCriteriaEnum=function(){var t={},i=Object.create(t);return i[t[0]="GreaterThan"]=0,i[t[1]="SmallerThan"]=1,i[t[2]="Between"]=2,i}(),c.ProtoLineItemAdBreakTargeting=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.adRollType=0,t.prototype.adBreakTypeEnum=1,t.encode=function(t,i){return i||(i=h.create()),null!=t.adRollType&&t.hasOwnProperty("adRollType")&&i.uint32(8).int32(t.adRollType),null!=t.adBreakTypeEnum&&t.hasOwnProperty("adBreakTypeEnum")&&i.uint32(16).int32(t.adBreakTypeEnum),i},t.decode=function(t,i){t instanceof a||(t=a.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoLineItemAdBreakTargeting;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.adRollType=t.int32();break;case 2:s.adBreakTypeEnum=t.int32();break;default:t.skipType(7&n)}}return s},t.fromObject=function(t){if(t instanceof c.ProtoLineItemAdBreakTargeting)return t;var i=new c.ProtoLineItemAdBreakTargeting;switch(t.adRollType){case"None":case 0:i.adRollType=0;break;case"PreRoll":case 1:i.adRollType=1;break;case"MidRoll":case 2:i.adRollType=2;break;case"PostRoll":case 3:i.adRollType=3}switch(t.adBreakTypeEnum){case"All":case 1:i.adBreakTypeEnum=1;break;case"SingleAd":case 2:i.adBreakTypeEnum=2;break;case"AdPod":case 3:i.adBreakTypeEnum=3}return i},t.toObject=function(t,i){i||(i={});var e={};return i.defaults&&(e.adRollType=i.enums===String?"None":0,e.adBreakTypeEnum=i.enums===String?"All":1),null!=t.adRollType&&t.hasOwnProperty("adRollType")&&(e.adRollType=i.enums===String?c.ProtoAdBreakTypeEnum[t.adRollType]:t.adRollType),null!=t.adBreakTypeEnum&&t.hasOwnProperty("adBreakTypeEnum")&&(e.adBreakTypeEnum=i.enums===String?c.ProtoLineItemAdBreakTypeEnum[t.adBreakTypeEnum]:t.adBreakTypeEnum),e},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.ProtoLineItemAdPodTargeting=function(){function t(t){if(this.adSlotPositions=[],t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.targetingType=0,t.prototype.adSlotTargetingType=1,t.prototype.adSlotPositions=o.emptyArray,t.encode=function(t,i){if(i||(i=h.create()),null!=t.targetingType&&t.hasOwnProperty("targetingType")&&i.uint32(8).int32(t.targetingType),null!=t.adSlotTargetingType&&t.hasOwnProperty("adSlotTargetingType")&&i.uint32(16).int32(t.adSlotTargetingType),null!=t.adSlotPositions&&t.adSlotPositions.length){i.uint32(26).fork();for(var e=0;e<t.adSlotPositions.length;++e)i.int32(t.adSlotPositions[e]);i.ldelim()}return i},t.decode=function(t,i){t instanceof a||(t=a.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoLineItemAdPodTargeting;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.targetingType=t.int32();break;case 2:s.adSlotTargetingType=t.int32();break;case 3:if(s.adSlotPositions&&s.adSlotPositions.length||(s.adSlotPositions=[]),2==(7&n))for(var r=t.uint32()+t.pos;t.pos<r;)s.adSlotPositions.push(t.int32());else s.adSlotPositions.push(t.int32());break;default:t.skipType(7&n)}}return s},t.fromObject=function(t){if(t instanceof c.ProtoLineItemAdPodTargeting)return t;var i=new c.ProtoLineItemAdPodTargeting;switch(t.targetingType){case"Only":case 0:i.targetingType=0;break;case"Except":case 1:i.targetingType=1}switch(t.adSlotTargetingType){case"SpecificSlots":case 1:i.adSlotTargetingType=1;break;case"Interval":case 2:i.adSlotTargetingType=2}if(t.adSlotPositions){if(!Array.isArray(t.adSlotPositions))throw TypeError(".ProtoLineItemAdPodTargeting.adSlotPositions: array expected");i.adSlotPositions=[];for(var e=0;e<t.adSlotPositions.length;++e)i.adSlotPositions[e]=0|t.adSlotPositions[e]}return i},t.toObject=function(t,i){i||(i={});var e={};if((i.arrays||i.defaults)&&(e.adSlotPositions=[]),i.defaults&&(e.targetingType=i.enums===String?"Only":0,e.adSlotTargetingType=i.enums===String?"SpecificSlots":1),null!=t.targetingType&&t.hasOwnProperty("targetingType")&&(e.targetingType=i.enums===String?c.ProtoLineItemTargetingTypeEnum[t.targetingType]:t.targetingType),null!=t.adSlotTargetingType&&t.hasOwnProperty("adSlotTargetingType")&&(e.adSlotTargetingType=i.enums===String?c.ProtoLineItemAdSlotTargetingTypeEnum[t.adSlotTargetingType]:t.adSlotTargetingType),t.adSlotPositions&&t.adSlotPositions.length){e.adSlotPositions=[];for(var s=0;s<t.adSlotPositions.length;++s)e.adSlotPositions[s]=t.adSlotPositions[s]}return e},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.ProtoLineItemAdBreakSettings=function(){function t(t){if(this.adBreakTargeting=[],t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.adBreakTargeting=o.emptyArray,t.prototype.adPodTargeting=null,t.encode=function(t,i){if(i||(i=h.create()),null!=t.adBreakTargeting&&t.adBreakTargeting.length)for(var e=0;e<t.adBreakTargeting.length;++e)c.ProtoLineItemAdBreakTargeting.encode(t.adBreakTargeting[e],i.uint32(10).fork()).ldelim();return null!=t.adPodTargeting&&t.hasOwnProperty("adPodTargeting")&&c.ProtoLineItemAdPodTargeting.encode(t.adPodTargeting,i.uint32(18).fork()).ldelim(),i},t.decode=function(t,i){t instanceof a||(t=a.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoLineItemAdBreakSettings;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.adBreakTargeting&&s.adBreakTargeting.length||(s.adBreakTargeting=[]),s.adBreakTargeting.push(c.ProtoLineItemAdBreakTargeting.decode(t,t.uint32()));break;case 2:s.adPodTargeting=c.ProtoLineItemAdPodTargeting.decode(t,t.uint32());break;default:t.skipType(7&n)}}return s},t.fromObject=function(t){if(t instanceof c.ProtoLineItemAdBreakSettings)return t;var i=new c.ProtoLineItemAdBreakSettings;if(t.adBreakTargeting){if(!Array.isArray(t.adBreakTargeting))throw TypeError(".ProtoLineItemAdBreakSettings.adBreakTargeting: array expected");i.adBreakTargeting=[];for(var e=0;e<t.adBreakTargeting.length;++e){if("object"!=typeof t.adBreakTargeting[e])throw TypeError(".ProtoLineItemAdBreakSettings.adBreakTargeting: object expected");i.adBreakTargeting[e]=c.ProtoLineItemAdBreakTargeting.fromObject(t.adBreakTargeting[e])}}if(null!=t.adPodTargeting){if("object"!=typeof t.adPodTargeting)throw TypeError(".ProtoLineItemAdBreakSettings.adPodTargeting: object expected");i.adPodTargeting=c.ProtoLineItemAdPodTargeting.fromObject(t.adPodTargeting)}return i},t.toObject=function(t,i){i||(i={});var e={};if((i.arrays||i.defaults)&&(e.adBreakTargeting=[]),i.defaults&&(e.adPodTargeting=null),t.adBreakTargeting&&t.adBreakTargeting.length){e.adBreakTargeting=[];for(var s=0;s<t.adBreakTargeting.length;++s)e.adBreakTargeting[s]=c.ProtoLineItemAdBreakTargeting.toObject(t.adBreakTargeting[s],i)}return null!=t.adPodTargeting&&t.hasOwnProperty("adPodTargeting")&&(e.adPodTargeting=c.ProtoLineItemAdPodTargeting.toObject(t.adPodTargeting,i)),e},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.ProtoLineItem=function(){function t(t){if(this.trackers=[],this.renditions=[],this.floorPrices=[],this.advertiserContextualTargeting=[],this.publisherContextualTargeting=[],t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.publisherLineItemId="",t.prototype.advertiserLineItemId="",t.prototype.adTag="",t.prototype.creativeType=0,t.prototype.sound=!1,t.prototype.viewability=!1,t.prototype.impressionTimeSpent=0,t.prototype.vendorId="",t.prototype.trackers=o.emptyArray,t.prototype.duration=0,t.prototype.renditions=o.emptyArray,t.prototype.mediaCreativeId="",t.prototype.ignoreFilledRequests=!1,t.prototype.requestCap=3,t.prototype.impressionCap=0,t.prototype.successRate=0,t.prototype.lineItemPriority=0,t.prototype.headerBidderBids="",t.prototype.headerBidderTimeout=0,t.prototype.mediaCreativeClickUrl="",t.prototype.resetRequestsCapTime=60,t.prototype.resetImpressionsCapTime=60,t.prototype.resetCapType=0,t.prototype.creativeHlsFileName="",t.prototype.timeBetweenRequests=0,t.prototype.skipMode=0,t.prototype.mediaIdTargeting=null,t.prototype.mediaKeywordsTargeting=null,t.prototype.mediaLanguageTargeting=null,t.prototype.adType=0,t.prototype.overlayTime=30,t.prototype.floorPrice=0,t.prototype.adBreakSettings=null,t.prototype.floorPrices=o.emptyArray,t.prototype.bidRate=0,t.prototype.pauseAdOutOfView=0,t.prototype.moatTrackingEnabled=!1,t.prototype.cnxCreativeId="",t.prototype.blockedDomainsRevisionNumber=0,t.prototype.advertiserContextualTargeting=o.emptyArray,t.prototype.publisherContextualTargeting=o.emptyArray,t.prototype.playerSizeTargetings=null,t.prototype.playerSize="",t.decode=function(t,i){t instanceof a||(t=a.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoLineItem;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.publisherLineItemId=t.string();break;case 2:s.advertiserLineItemId=t.string();break;case 3:s.adTag=t.string();break;case 4:s.creativeType=t.int32();break;case 6:s.sound=t.bool();break;case 7:s.viewability=t.bool();break;case 9:s.impressionTimeSpent=t.int32();break;case 10:s.vendorId=t.string();break;case 12:s.trackers&&s.trackers.length||(s.trackers=[]),s.trackers.push(c.CreativeTrackerViewModel.decode(t,t.uint32()));break;case 13:s.duration=t.int32();break;case 14:s.renditions&&s.renditions.length||(s.renditions=[]),s.renditions.push(c.ProtoRendition.decode(t,t.uint32()));break;case 15:s.mediaCreativeId=t.string();break;case 16:s.ignoreFilledRequests=t.bool();break;case 17:s.requestCap=t.int32();break;case 18:s.impressionCap=t.int32();break;case 19:s.successRate=t.double();break;case 20:s.lineItemPriority=t.int32();break;case 21:s.headerBidderBids=t.string();break;case 22:s.headerBidderTimeout=t.int32();break;case 23:s.mediaCreativeClickUrl=t.string();break;case 24:s.resetRequestsCapTime=t.int32();break;case 25:s.resetImpressionsCapTime=t.int32();break;case 26:s.resetCapType=t.int32();break;case 27:s.creativeHlsFileName=t.string();break;case 28:s.timeBetweenRequests=t.int32();break;case 29:s.skipMode=t.int32();break;case 30:s.mediaIdTargeting=c.ProtoTargetingChoiceModel.decode(t,t.uint32());break;case 31:s.mediaKeywordsTargeting=c.ProtoTargetingChoiceModel.decode(t,t.uint32());break;case 32:s.mediaLanguageTargeting=c.ProtoTargetingChoiceModel.decode(t,t.uint32());break;case 33:s.adType=t.int32();break;case 34:s.overlayTime=t.int32();break;case 35:s.floorPrice=t.double();break;case 36:s.adBreakSettings=c.ProtoLineItemAdBreakSettings.decode(t,t.uint32());break;case 38:if(s.floorPrices&&s.floorPrices.length||(s.floorPrices=[]),2==(7&n))for(var r=t.uint32()+t.pos;t.pos<r;)s.floorPrices.push(t.double());else s.floorPrices.push(t.double());break;case 39:s.bidRate=t.double();break;case 40:s.pauseAdOutOfView=t.int32();break;case 41:s.moatTrackingEnabled=t.bool();break;case 42:s.cnxCreativeId=t.string();break;case 44:s.blockedDomainsRevisionNumber=t.int32();break;case 45:s.advertiserContextualTargeting&&s.advertiserContextualTargeting.length||(s.advertiserContextualTargeting=[]),s.advertiserContextualTargeting.push(c.ProtoContextualTargetingCaseModel.decode(t,t.uint32()));break;case 46:s.publisherContextualTargeting&&s.publisherContextualTargeting.length||(s.publisherContextualTargeting=[]),s.publisherContextualTargeting.push(c.ProtoContextualTargetingCaseModel.decode(t,t.uint32()));break;case 47:s.playerSizeTargetings=c.ProtoPlayerSizeTargetings.decode(t,t.uint32());break;case 101:s.playerSize=t.string();break;default:t.skipType(7&n)}}return s},t.toObject=function(t,i){i||(i={});var e={};if((i.arrays||i.defaults)&&(e.trackers=[],e.renditions=[],e.floorPrices=[],e.advertiserContextualTargeting=[],e.publisherContextualTargeting=[]),i.defaults&&(e.publisherLineItemId="",e.advertiserLineItemId="",e.adTag="",e.creativeType=i.enums===String?"ThirdParty":0,e.sound=!1,e.viewability=!1,e.impressionTimeSpent=0,e.vendorId="",e.duration=0,e.mediaCreativeId="",e.ignoreFilledRequests=!1,e.requestCap=3,e.impressionCap=0,e.successRate=0,e.lineItemPriority=i.enums===String?"House":0,e.headerBidderBids="",e.headerBidderTimeout=0,e.mediaCreativeClickUrl="",e.resetRequestsCapTime=60,e.resetImpressionsCapTime=60,e.resetCapType=i.enums===String?"TimeCapping":0,e.creativeHlsFileName="",e.timeBetweenRequests=0,e.skipMode=i.enums===String?"IfLongerThan31Sec":0,e.mediaIdTargeting=null,e.mediaKeywordsTargeting=null,e.mediaLanguageTargeting=null,e.adType=i.enums===String?"Video":0,e.overlayTime=30,e.floorPrice=0,e.adBreakSettings=null,e.bidRate=0,e.pauseAdOutOfView=i.enums===String?"Default":0,e.moatTrackingEnabled=!1,e.cnxCreativeId="",e.blockedDomainsRevisionNumber=0,e.playerSizeTargetings=null,e.playerSize=""),null!=t.publisherLineItemId&&t.hasOwnProperty("publisherLineItemId")&&(e.publisherLineItemId=t.publisherLineItemId),null!=t.advertiserLineItemId&&t.hasOwnProperty("advertiserLineItemId")&&(e.advertiserLineItemId=t.advertiserLineItemId),null!=t.adTag&&t.hasOwnProperty("adTag")&&(e.adTag=t.adTag),null!=t.creativeType&&t.hasOwnProperty("creativeType")&&(e.creativeType=i.enums===String?c.ProtoCreativeTypeEnum[t.creativeType]:t.creativeType),null!=t.sound&&t.hasOwnProperty("sound")&&(e.sound=t.sound),null!=t.viewability&&t.hasOwnProperty("viewability")&&(e.viewability=t.viewability),null!=t.impressionTimeSpent&&t.hasOwnProperty("impressionTimeSpent")&&(e.impressionTimeSpent=t.impressionTimeSpent),null!=t.vendorId&&t.hasOwnProperty("vendorId")&&(e.vendorId=t.vendorId),t.trackers&&t.trackers.length){e.trackers=[];for(var s=0;s<t.trackers.length;++s)e.trackers[s]=c.CreativeTrackerViewModel.toObject(t.trackers[s],i)}if(null!=t.duration&&t.hasOwnProperty("duration")&&(e.duration=t.duration),t.renditions&&t.renditions.length){e.renditions=[];for(s=0;s<t.renditions.length;++s)e.renditions[s]=c.ProtoRendition.toObject(t.renditions[s],i)}if(null!=t.mediaCreativeId&&t.hasOwnProperty("mediaCreativeId")&&(e.mediaCreativeId=t.mediaCreativeId),null!=t.ignoreFilledRequests&&t.hasOwnProperty("ignoreFilledRequests")&&(e.ignoreFilledRequests=t.ignoreFilledRequests),null!=t.requestCap&&t.hasOwnProperty("requestCap")&&(e.requestCap=t.requestCap),null!=t.impressionCap&&t.hasOwnProperty("impressionCap")&&(e.impressionCap=t.impressionCap),null!=t.successRate&&t.hasOwnProperty("successRate")&&(e.successRate=i.json&&!isFinite(t.successRate)?String(t.successRate):t.successRate),null!=t.lineItemPriority&&t.hasOwnProperty("lineItemPriority")&&(e.lineItemPriority=i.enums===String?c.ProtoLineItemPriority[t.lineItemPriority]:t.lineItemPriority),null!=t.headerBidderBids&&t.hasOwnProperty("headerBidderBids")&&(e.headerBidderBids=t.headerBidderBids),null!=t.headerBidderTimeout&&t.hasOwnProperty("headerBidderTimeout")&&(e.headerBidderTimeout=t.headerBidderTimeout),null!=t.mediaCreativeClickUrl&&t.hasOwnProperty("mediaCreativeClickUrl")&&(e.mediaCreativeClickUrl=t.mediaCreativeClickUrl),null!=t.resetRequestsCapTime&&t.hasOwnProperty("resetRequestsCapTime")&&(e.resetRequestsCapTime=t.resetRequestsCapTime),null!=t.resetImpressionsCapTime&&t.hasOwnProperty("resetImpressionsCapTime")&&(e.resetImpressionsCapTime=t.resetImpressionsCapTime),null!=t.resetCapType&&t.hasOwnProperty("resetCapType")&&(e.resetCapType=i.enums===String?c.ProtoResetCapTypeEnum[t.resetCapType]:t.resetCapType),null!=t.creativeHlsFileName&&t.hasOwnProperty("creativeHlsFileName")&&(e.creativeHlsFileName=t.creativeHlsFileName),null!=t.timeBetweenRequests&&t.hasOwnProperty("timeBetweenRequests")&&(e.timeBetweenRequests=t.timeBetweenRequests),null!=t.skipMode&&t.hasOwnProperty("skipMode")&&(e.skipMode=i.enums===String?c.ProtoAdSkipMode[t.skipMode]:t.skipMode),null!=t.mediaIdTargeting&&t.hasOwnProperty("mediaIdTargeting")&&(e.mediaIdTargeting=c.ProtoTargetingChoiceModel.toObject(t.mediaIdTargeting,i)),null!=t.mediaKeywordsTargeting&&t.hasOwnProperty("mediaKeywordsTargeting")&&(e.mediaKeywordsTargeting=c.ProtoTargetingChoiceModel.toObject(t.mediaKeywordsTargeting,i)),null!=t.mediaLanguageTargeting&&t.hasOwnProperty("mediaLanguageTargeting")&&(e.mediaLanguageTargeting=c.ProtoTargetingChoiceModel.toObject(t.mediaLanguageTargeting,i)),null!=t.adType&&t.hasOwnProperty("adType")&&(e.adType=i.enums===String?c.ProtoAdType[t.adType]:t.adType),null!=t.overlayTime&&t.hasOwnProperty("overlayTime")&&(e.overlayTime=t.overlayTime),null!=t.floorPrice&&t.hasOwnProperty("floorPrice")&&(e.floorPrice=i.json&&!isFinite(t.floorPrice)?String(t.floorPrice):t.floorPrice),null!=t.adBreakSettings&&t.hasOwnProperty("adBreakSettings")&&(e.adBreakSettings=c.ProtoLineItemAdBreakSettings.toObject(t.adBreakSettings,i)),t.floorPrices&&t.floorPrices.length){e.floorPrices=[];for(s=0;s<t.floorPrices.length;++s)e.floorPrices[s]=i.json&&!isFinite(t.floorPrices[s])?String(t.floorPrices[s]):t.floorPrices[s]}if(null!=t.bidRate&&t.hasOwnProperty("bidRate")&&(e.bidRate=i.json&&!isFinite(t.bidRate)?String(t.bidRate):t.bidRate),null!=t.pauseAdOutOfView&&t.hasOwnProperty("pauseAdOutOfView")&&(e.pauseAdOutOfView=i.enums===String?c.ProtoLineItemPauseAdOutOfViewEnum[t.pauseAdOutOfView]:t.pauseAdOutOfView),null!=t.moatTrackingEnabled&&t.hasOwnProperty("moatTrackingEnabled")&&(e.moatTrackingEnabled=t.moatTrackingEnabled),null!=t.cnxCreativeId&&t.hasOwnProperty("cnxCreativeId")&&(e.cnxCreativeId=t.cnxCreativeId),null!=t.blockedDomainsRevisionNumber&&t.hasOwnProperty("blockedDomainsRevisionNumber")&&(e.blockedDomainsRevisionNumber=t.blockedDomainsRevisionNumber),t.advertiserContextualTargeting&&t.advertiserContextualTargeting.length){e.advertiserContextualTargeting=[];for(s=0;s<t.advertiserContextualTargeting.length;++s)e.advertiserContextualTargeting[s]=c.ProtoContextualTargetingCaseModel.toObject(t.advertiserContextualTargeting[s],i)}if(t.publisherContextualTargeting&&t.publisherContextualTargeting.length){e.publisherContextualTargeting=[];for(s=0;s<t.publisherContextualTargeting.length;++s)e.publisherContextualTargeting[s]=c.ProtoContextualTargetingCaseModel.toObject(t.publisherContextualTargeting[s],i)}return null!=t.playerSizeTargetings&&t.hasOwnProperty("playerSizeTargetings")&&(e.playerSizeTargetings=c.ProtoPlayerSizeTargetings.toObject(t.playerSizeTargetings,i)),null!=t.playerSize&&t.hasOwnProperty("playerSize")&&(e.playerSize=t.playerSize),e},t}(),c.ProtoTargetingChoiceModel=function(){function t(t){if(this.items=[],t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.choiceCriteria=0,t.prototype.items=o.emptyArray,t.encode=function(t,i){if(i||(i=h.create()),null!=t.choiceCriteria&&t.hasOwnProperty("choiceCriteria")&&i.uint32(8).int32(t.choiceCriteria),null!=t.items&&t.items.length)for(var e=0;e<t.items.length;++e)i.uint32(18).string(t.items[e]);return i},t.decode=function(t,i){t instanceof a||(t=a.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoTargetingChoiceModel;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.choiceCriteria=t.int32();break;case 2:s.items&&s.items.length||(s.items=[]),s.items.push(t.string());break;default:t.skipType(7&n)}}return s},t.fromObject=function(t){if(t instanceof c.ProtoTargetingChoiceModel)return t;var i=new c.ProtoTargetingChoiceModel;switch(t.choiceCriteria){case"Only":case 0:i.choiceCriteria=0;break;case"Except":case 1:i.choiceCriteria=1}if(t.items){if(!Array.isArray(t.items))throw TypeError(".ProtoTargetingChoiceModel.items: array expected");i.items=[];for(var e=0;e<t.items.length;++e)i.items[e]=String(t.items[e])}return i},t.toObject=function(t,i){i||(i={});var e={};if((i.arrays||i.defaults)&&(e.items=[]),i.defaults&&(e.choiceCriteria=i.enums===String?"Only":0),null!=t.choiceCriteria&&t.hasOwnProperty("choiceCriteria")&&(e.choiceCriteria=i.enums===String?c.ProtoChoiceCriteriaEnum[t.choiceCriteria]:t.choiceCriteria),t.items&&t.items.length){e.items=[];for(var s=0;s<t.items.length;++s)e.items[s]=t.items[s]}return e},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.ProtoContextualTargetingCaseModel=function(){function t(t){if(this.filters=[],t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.filters=o.emptyArray,t.encode=function(t,i){if(i||(i=h.create()),null!=t.filters&&t.filters.length)for(var e=0;e<t.filters.length;++e)c.ProtoContextualTargetingFilterModel.encode(t.filters[e],i.uint32(10).fork()).ldelim();return i},t.decode=function(t,i){t instanceof a||(t=a.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoContextualTargetingCaseModel;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.filters&&s.filters.length||(s.filters=[]),s.filters.push(c.ProtoContextualTargetingFilterModel.decode(t,t.uint32()));break;default:t.skipType(7&n)}}return s},t.fromObject=function(t){if(t instanceof c.ProtoContextualTargetingCaseModel)return t;var i=new c.ProtoContextualTargetingCaseModel;if(t.filters){if(!Array.isArray(t.filters))throw TypeError(".ProtoContextualTargetingCaseModel.filters: array expected");i.filters=[];for(var e=0;e<t.filters.length;++e){if("object"!=typeof t.filters[e])throw TypeError(".ProtoContextualTargetingCaseModel.filters: object expected");i.filters[e]=c.ProtoContextualTargetingFilterModel.fromObject(t.filters[e])}}return i},t.toObject=function(t,i){i||(i={});var e={};if((i.arrays||i.defaults)&&(e.filters=[]),t.filters&&t.filters.length){e.filters=[];for(var s=0;s<t.filters.length;++s)e.filters[s]=c.ProtoContextualTargetingFilterModel.toObject(t.filters[s],i)}return e},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.ProtoContextualTargetingFilterModel=function(){function t(t){if(this.items=[],t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.type=0,t.prototype.items=o.emptyArray,t.encode=function(t,i){if(i||(i=h.create()),null!=t.type&&t.hasOwnProperty("type")&&i.uint32(8).int32(t.type),null!=t.items&&t.items.length)for(var e=0;e<t.items.length;++e)i.uint32(18).string(t.items[e]);return i},t.decode=function(t,i){t instanceof a||(t=a.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoContextualTargetingFilterModel;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.type=t.int32();break;case 2:s.items&&s.items.length||(s.items=[]),s.items.push(t.string());break;default:t.skipType(7&n)}}return s},t.fromObject=function(t){if(t instanceof c.ProtoContextualTargetingFilterModel)return t;var i=new c.ProtoContextualTargetingFilterModel;switch(t.type){case"IncludeAny":case 0:i.type=0;break;case"IncludeAll":case 1:i.type=1;break;case"ExcludeAny":case 2:i.type=2;break;case"ExcludeAll":case 3:i.type=3}if(t.items){if(!Array.isArray(t.items))throw TypeError(".ProtoContextualTargetingFilterModel.items: array expected");i.items=[];for(var e=0;e<t.items.length;++e)i.items[e]=String(t.items[e])}return i},t.toObject=function(t,i){i||(i={});var e={};if((i.arrays||i.defaults)&&(e.items=[]),i.defaults&&(e.type=i.enums===String?"IncludeAny":0),null!=t.type&&t.hasOwnProperty("type")&&(e.type=i.enums===String?c.ProtoLineItemContextualTargetingEnum[t.type]:t.type),t.items&&t.items.length){e.items=[];for(var s=0;s<t.items.length;++s)e.items[s]=t.items[s]}return e},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.ProtoPlayerSizeTargetings=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.sizeChoiceCriteria=0,t.prototype.minWidth=0,t.prototype.maxWidth=0,t.encode=function(t,i){return i||(i=h.create()),null!=t.sizeChoiceCriteria&&t.hasOwnProperty("sizeChoiceCriteria")&&i.uint32(8).int32(t.sizeChoiceCriteria),null!=t.minWidth&&t.hasOwnProperty("minWidth")&&i.uint32(16).int32(t.minWidth),null!=t.maxWidth&&t.hasOwnProperty("maxWidth")&&i.uint32(24).int32(t.maxWidth),i},t.decode=function(t,i){t instanceof a||(t=a.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoPlayerSizeTargetings;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.sizeChoiceCriteria=t.int32();break;case 2:s.minWidth=t.int32();break;case 3:s.maxWidth=t.int32();break;default:t.skipType(7&n)}}return s},t.fromObject=function(t){if(t instanceof c.ProtoPlayerSizeTargetings)return t;var i=new c.ProtoPlayerSizeTargetings;switch(t.sizeChoiceCriteria){case"GreaterThan":case 0:i.sizeChoiceCriteria=0;break;case"SmallerThan":case 1:i.sizeChoiceCriteria=1;break;case"Between":case 2:i.sizeChoiceCriteria=2}return null!=t.minWidth&&(i.minWidth=0|t.minWidth),null!=t.maxWidth&&(i.maxWidth=0|t.maxWidth),i},t.toObject=function(t,i){i||(i={});var e={};return i.defaults&&(e.sizeChoiceCriteria=i.enums===String?"GreaterThan":0,e.minWidth=0,e.maxWidth=0),null!=t.sizeChoiceCriteria&&t.hasOwnProperty("sizeChoiceCriteria")&&(e.sizeChoiceCriteria=i.enums===String?c.ProtoSizeChoiceCriteriaEnum[t.sizeChoiceCriteria]:t.sizeChoiceCriteria),null!=t.minWidth&&t.hasOwnProperty("minWidth")&&(e.minWidth=t.minWidth),null!=t.maxWidth&&t.hasOwnProperty("maxWidth")&&(e.maxWidth=t.maxWidth),e},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.ProtoRendition=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.height=0,t.prototype.codec="",t.prototype.file="",t.decode=function(t,i){t instanceof a||(t=a.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoRendition;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.height=t.int32();break;case 2:s.codec=t.string();break;case 3:s.file=t.string();break;default:t.skipType(7&n)}}return s},t.toObject=function(t,i){i||(i={});var e={};return i.defaults&&(e.height=0,e.codec="",e.file=""),null!=t.height&&t.hasOwnProperty("height")&&(e.height=t.height),null!=t.codec&&t.hasOwnProperty("codec")&&(e.codec=t.codec),null!=t.file&&t.hasOwnProperty("file")&&(e.file=t.file),e},t}(),c.ProtoPlayerPlaybackModeEnum=function(){var t={},i=Object.create(t);return i[t[0]="Autoplay"]=0,i[t[1]="ScrollToPlay"]=1,i[t[2]="ClickToPlay"]=2,i}(),c.ProtoPlayerCloseButtonMode=function(){var t={},i=Object.create(t);return i[t[0]="Off"]=0,i[t[1]="OnHover"]=1,i[t[2]="OnHoverAfterFirstAd"]=2,i[t[3]="AlwaysOn"]=3,i}(),c.ProtoPlayerFloatingMode=function(){var t={},i=Object.create(t);return i[t[0]="Off"]=0,i[t[1]="OnPageLoad"]=1,i[t[2]="AfterInView"]=2,i[t[3]="Always"]=3,i}(),c.ProtoPlayerSoundMode=function(){var t={},i=Object.create(t);return i[t[0]="Mute"]=0,i[t[1]="On"]=1,i[t[2]="Hover"]=2,i}(),c.ProtoPlayerInsertMode=function(){var t={},i=Object.create(t);return i[t[0]="WithinContainer"]=0,i[t[1]="BeforeContainer"]=1,i[t[2]="AfterContainer"]=2,i[t[3]="ReplaceContainer"]=3,i[t[4]="HideContainer"]=4,i}(),c.ProtoAdViewabilityPolicy=function(){var t={},i=Object.create(t);return i[t[0]="Default"]=0,i[t[1]="Strict"]=1,i}(),c.ProtoSharingDestination=function(){var t={},i=Object.create(t);return i[t[0]="Facebook"]=0,i[t[1]="Twitter"]=1,i[t[2]="LinkedIn"]=2,i}(),c.ProtoFloatingFixedPositionMode=function(){var t={},i=Object.create(t);return i[t[0]="Page"]=0,i[t[1]="Element"]=1,i}(),c.ProtoPositionMode=function(){var t={},i=Object.create(t);return i[t[0]="BottomRight"]=0,i[t[1]="BottomLeft"]=1,i[t[2]="TopRight"]=2,i[t[3]="TopLeft"]=3,i}(),c.ProtoAdPlaybackMode=function(){var t={},i=Object.create(t);return i[t[0]="Autoplay"]=0,i[t[1]="ScrollToPlay"]=1,i}(),c.ProtoFloatingAppendLocationEnum=function(){var t={},i=Object.create(t);return i[t[0]="Above"]=0,i[t[1]="Below"]=1,i[t[2]="Within"]=2,i}(),c.ProtoPlayerAdSkippability=function(){var t={},i=Object.create(t);return i[t[0]="IfLongerThan31Sec"]=0,i[t[1]="Always"]=1,i[t[2]="NoRestrictions"]=2,i}(),c.ProtoVideoQuality=function(){var t={},i=Object.create(t);return i[t[0]="Auto"]=0,i[t[1]="High1080p"]=1,i[t[2]="High720p"]=2,i[t[3]="Medium360p"]=3,i}(),c.ProtoImplementationType=function(){var t={},i=Object.create(t);return i[t[0]="Web"]=0,i[t[1]="Amp"]=1,i}(),c.ProtoAdBreakTypeEnum=function(){var t={},i=Object.create(t);return i[t[0]="None"]=0,i[t[1]="PreRoll"]=1,i[t[2]="MidRoll"]=2,i[t[3]="PostRoll"]=3,i}(),c.ProtoAdSlotAdTypeEnum=function(){var t={},i=Object.create(t);return i[t[0]="SingleAd"]=0,i[t[1]="AdPod"]=1,i}(),c.ProtoSupplyChain=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.businessDomain="",t.prototype.supplyChainId="",t.decode=function(t,i){t instanceof a||(t=a.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoSupplyChain;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.businessDomain=t.string();break;case 3:s.supplyChainId=t.string();break;default:t.skipType(7&n)}}return s},t.toObject=function(t,i){i||(i={});var e={};return i.defaults&&(e.businessDomain="",e.supplyChainId=""),null!=t.businessDomain&&t.hasOwnProperty("businessDomain")&&(e.businessDomain=t.businessDomain),null!=t.supplyChainId&&t.hasOwnProperty("supplyChainId")&&(e.supplyChainId=t.supplyChainId),e},t}(),c.ProtoUserInformation=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.userId="",t.prototype.lookupId="",t.prototype.lookupResponseCode=0,t.prototype.callFraudSensor=!1,t.prototype.publisherAdsTxt="",t.encode=function(t,i){return i||(i=h.create()),null!=t.userId&&t.hasOwnProperty("userId")&&i.uint32(10).string(t.userId),null!=t.lookupId&&t.hasOwnProperty("lookupId")&&i.uint32(26).string(t.lookupId),null!=t.lookupResponseCode&&t.hasOwnProperty("lookupResponseCode")&&i.uint32(32).int32(t.lookupResponseCode),null!=t.callFraudSensor&&t.hasOwnProperty("callFraudSensor")&&i.uint32(40).bool(t.callFraudSensor),null!=t.publisherAdsTxt&&t.hasOwnProperty("publisherAdsTxt")&&i.uint32(50).string(t.publisherAdsTxt),i},t.decode=function(t,i){t instanceof a||(t=a.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoUserInformation;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.userId=t.string();break;case 3:s.lookupId=t.string();break;case 4:s.lookupResponseCode=t.int32();break;case 5:s.callFraudSensor=t.bool();break;case 6:s.publisherAdsTxt=t.string();break;default:t.skipType(7&n)}}return s},t.fromObject=function(t){if(t instanceof c.ProtoUserInformation)return t;var i=new c.ProtoUserInformation;return null!=t.userId&&(i.userId=String(t.userId)),null!=t.lookupId&&(i.lookupId=String(t.lookupId)),null!=t.lookupResponseCode&&(i.lookupResponseCode=0|t.lookupResponseCode),null!=t.callFraudSensor&&(i.callFraudSensor=Boolean(t.callFraudSensor)),null!=t.publisherAdsTxt&&(i.publisherAdsTxt=String(t.publisherAdsTxt)),i},t.toObject=function(t,i){i||(i={});var e={};return i.defaults&&(e.userId="",e.lookupId="",e.lookupResponseCode=0,e.callFraudSensor=!1,e.publisherAdsTxt=""),null!=t.userId&&t.hasOwnProperty("userId")&&(e.userId=t.userId),null!=t.lookupId&&t.hasOwnProperty("lookupId")&&(e.lookupId=t.lookupId),null!=t.lookupResponseCode&&t.hasOwnProperty("lookupResponseCode")&&(e.lookupResponseCode=t.lookupResponseCode),null!=t.callFraudSensor&&t.hasOwnProperty("callFraudSensor")&&(e.callFraudSensor=t.callFraudSensor),null!=t.publisherAdsTxt&&t.hasOwnProperty("publisherAdsTxt")&&(e.publisherAdsTxt=t.publisherAdsTxt),e},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.ProtoAdBreak=function(){function t(t){if(this.types=[],t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.types=o.emptyArray,t.prototype.maxAdPodDuration=0,t.prototype.maxAdSlotDuration=180,t.prototype.numberOfAdSlots=1,t.encode=function(t,i){if(i||(i=h.create()),null!=t.types&&t.types.length){i.uint32(10).fork();for(var e=0;e<t.types.length;++e)i.int32(t.types[e]);i.ldelim()}return null!=t.maxAdPodDuration&&t.hasOwnProperty("maxAdPodDuration")&&i.uint32(16).int32(t.maxAdPodDuration),null!=t.maxAdSlotDuration&&t.hasOwnProperty("maxAdSlotDuration")&&i.uint32(24).int32(t.maxAdSlotDuration),null!=t.numberOfAdSlots&&t.hasOwnProperty("numberOfAdSlots")&&i.uint32(32).int32(t.numberOfAdSlots),i},t.decode=function(t,i){t instanceof a||(t=a.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoAdBreak;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:if(s.types&&s.types.length||(s.types=[]),2==(7&n))for(var r=t.uint32()+t.pos;t.pos<r;)s.types.push(t.int32());else s.types.push(t.int32());break;case 2:s.maxAdPodDuration=t.int32();break;case 3:s.maxAdSlotDuration=t.int32();break;case 4:s.numberOfAdSlots=t.int32();break;default:t.skipType(7&n)}}return s},t.fromObject=function(t){if(t instanceof c.ProtoAdBreak)return t;var i=new c.ProtoAdBreak;if(t.types){if(!Array.isArray(t.types))throw TypeError(".ProtoAdBreak.types: array expected");i.types=[];for(var e=0;e<t.types.length;++e)switch(t.types[e]){default:case"None":case 0:i.types[e]=0;break;case"PreRoll":case 1:i.types[e]=1;break;case"MidRoll":case 2:i.types[e]=2;break;case"PostRoll":case 3:i.types[e]=3}}return null!=t.maxAdPodDuration&&(i.maxAdPodDuration=0|t.maxAdPodDuration),null!=t.maxAdSlotDuration&&(i.maxAdSlotDuration=0|t.maxAdSlotDuration),null!=t.numberOfAdSlots&&(i.numberOfAdSlots=0|t.numberOfAdSlots),i},t.toObject=function(t,i){i||(i={});var e={};if((i.arrays||i.defaults)&&(e.types=[]),i.defaults&&(e.maxAdPodDuration=0,e.maxAdSlotDuration=180,e.numberOfAdSlots=1),t.types&&t.types.length){e.types=[];for(var s=0;s<t.types.length;++s)e.types[s]=i.enums===String?c.ProtoAdBreakTypeEnum[t.types[s]]:t.types[s]}return null!=t.maxAdPodDuration&&t.hasOwnProperty("maxAdPodDuration")&&(e.maxAdPodDuration=t.maxAdPodDuration),null!=t.maxAdSlotDuration&&t.hasOwnProperty("maxAdSlotDuration")&&(e.maxAdSlotDuration=t.maxAdSlotDuration),null!=t.numberOfAdSlots&&t.hasOwnProperty("numberOfAdSlots")&&(e.numberOfAdSlots=t.numberOfAdSlots),e},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),t.exports=c},function(t,i,e){"use strict";e.d(i,"b",function(){return s}),e.d(i,"d",function(){return n}),e.d(i,"e",function(){return r}),e.d(i,"f",function(){return a}),e.d(i,"g",function(){return h}),e.d(i,"a",function(){return o}),e.d(i,"c",function(){return c});const s=/(\d\d):(\d\d):(\d\d)(\.(\d\d\d))?/,n=36e5,r=6e4,a=1e3,h=60,o=864e5,c=60},function(t,i,e){"use strict";var s,n,r,a;e.d(i,"a",function(){return s}),e.d(i,"d",function(){return n}),e.d(i,"c",function(){return r}),e.d(i,"b",function(){return a}),function(t){t[t.Idle=0]="Idle",t[t.Loading=1]="Loading",t[t.Ready=2]="Ready",t[t.Error=3]="Error",t[t.Capped=4]="Capped",t[t.InWin=5]="InWin",t[t.Consumed=6]="Consumed",t[t.InImpression=7]="InImpression"}(s||(s={})),function(t){t[t.Javascript=0]="Javascript",t[t.Video=1]="Video"}(n||(n={})),function(t){t.Timeout="timeout",t.TimeoutLoaded="timeout_loaded",t.VpaidError="vpaidError",t.ImaError="imaError",t.ImaScriptFailure="imaScriptFailure",t.ImaObjectNotFound="imaObjectNotFound",t.SpotxError="spotxError",t.ImaManagerInit="imaManagerInit",t.ImaInitSdkError="initImasdkError",t.SpotXAdOSInit="spotxAdOSInit",t.SpotXLoadAd="spotxLoadAd",t.VastVideoTagEventError="vastVideoTagEventError",t.VastUnsupportedMedia="vastUnsupportedMedia",t.VastPlayPromiseReject="playPromiseReject",t.AdStopped="adStopped",t.MuteEnforce="muteEnforce",t.VpaidOnLoad="vpaidOnLoad",t.VpaidEnforcements="vpaidEnforcements",t.VpaidInvalid="vpaidInvalid",t.VpaidGetVpaidAdError="vpaidGetVpaidAdError",t.AolImpresssionFunction="aolCustom",t.CnxMediaNoRenditions="noRenditions",t.CnxMediaSrcNotSupported="srcNotSupported",t.CreateSameAd="createSameAd",t.InvalidVpaidEvent="invalidVpaidEvent",t.AdxOverlayNoFill="adxOverlayNoFill",t.AdxOverlayGptScriptLoad="adxOverlayGptScriptLoad",t.DisplayIntegratorNoHtml="displayIntegratorNoMime",t.DisplayIntegratorJavascriptSyntax="displayIntegratorJavascriptSyntax",t.DisplayIntegratorIframeLoad="displayIntegratorIframeLoad",t.EnforcementMalware="malwareDetected",t.EnforcementVolume="volumeDetected",t.Cancelled="adManagerRemoved",t.DomainBlocked="domainBlocked",t.AdaptorStartAdError="adaptorStartAdError",t.AdaptorInitAdError="adaptorInitAdError",t.WrapperStartAdError="wrapperStartAdError",t.WrapperInitAdError="wrapperInitAdError"}(r||(r={})),function(t){t.Html="text/html",t.Javascript="application/javascript"}(a||(a={}))},function(t,i,e){"use strict";const s=e(4).b,n=Object.assign(Object.assign({},s),{AdBreakStart:"adBreakStart",AdComplete:"adComplete",AdBreakComplete:"adBreakComplete",Pause:"pause",AdPause:"adPause",Play:"play",AdPlay:"adPlay",ContentComplete:"contentComplete",SessionStart:"sessionStart",SessionEnd:"sessionEnd",PlayerResized:"playerStateResize",OnEnterFullscreen:"onEnterFullscreen",OnExitFullscreen:"onExitFullscreen",PlayerCollapsed:"playerCollapsed",PlayerExpanded:"playerExpanded",PlayError:"playError",RenderError:"renderError",AdStateChange:"adStateChange",VolumeChange:"volumeChange",Destroy:"destroy"});i.a=n},function(t,i,e){"use strict";var s=e(19);class n{constructor(t){this.base=t,this.api={pls:t.core+"core/pls",story:t.core+"core/story",rtb:t.core+"rtb/g",vpaid:t.core+"vpaid",syncUrls:t.core+"core/us",fallbackstory:t.core+"core/fallbackstory",cookie:t.core+"core/ck",tam:t.core+"core/atam"},this.tracking={session_rendered:t.tracking+"sr",session_view:t.tracking+"sv",session_time:t.tracking+"st",session_client_error:t.tracking+"e",media_quartile:t.tracking+"mq",media_click:t.tracking+"mc",ad_impression:t.tracking+"ai",bids:t.tracking+"abt",ad_impression_viewable:t.tracking+"av",ad_quartile:t.tracking+"aq",ad_click:t.tracking+"ac",contentLoad:t.tracking+"clr",noContent:t.tracking+"nc",eventService:t.tracking+"et",tracking:t.tracking+"tr",vastWin:t.tracking+"vw",rtb:t.tracking+"g",logging:t.tracking+"e",galleryCardClick:t.tracking+"cc",playerStart:t.tracking+"ps",adOpportunity:t.tracking+"ao",sessionAdBlocker:t.tracking+"sab",heavy_ad_intervention:t.tracking+"ha"},this.assets={css:{elements:`${this.$(t.assets)}connatix.player.css`,playspace:`${this.$(t.assets)}connatix.playspace.css`}}}$(t){return"development"===s.a.env?"//cd.connatix.com/":`${t}p/${s.a.version}/`}}var r=e(18),a=e(7);e.d(i,"a",function(){return h});class h{static W(){const t=Object(r.b)("cnxEnv",Object(a.f)(window).topFrame.location.href);return t&&(s.a.domainPrefix=`-${t}`),Object.keys(this.Z).forEach(t=>{this.Z[t]=this.Z[t].replace("{{env}}",s.a.domainPrefix)}),new n(h.Z)}static get endPoints(){return null===h.tt&&(h.tt=h.W()),h.tt}}h.Z={a:"//a{{env}}.connatix.com/",video:"//vid.connatix.com/",image:"//img.connatix.com/",core:"https://capi{{env}}.connatix.com/",tracking:"//capi{{env}}.connatix.com/tr/",metadata:"//vid.connatix.com/",assets:"//cds{{env}}.connatix.com/",lineItems:"//lit.connatix.com/"},h.tt=null},function(t,i,e){"use strict";e.d(i,"g",function(){return n}),e.d(i,"c",function(){return r}),e.d(i,"d",function(){return a}),e.d(i,"e",function(){return h}),e.d(i,"h",function(){return o}),e.d(i,"f",function(){return c}),e.d(i,"a",function(){return l}),e.d(i,"b",function(){return u});var s=e(2);function n(t,i,e,s,n){return e+(s-e)*function(t,i,e){return(e-t)/(i-t)}(t,i,n)}function r(t,i){return i.reduce((i,e)=>Math.abs(e-t)<=Math.abs(i-t)?e:i)}function a(t,i){let e=t,s=i;for(;0!==e&&0!==s;)e>s?e%=s:s%=e;return 0===e?s:e}function h(t,i){return i/100*t}function o(t,i){const e=Math.pow(10,i);return Math.round(t*e)/e}function c(t){return!Object(s.e)(t.width)||!Object(s.e)(t.height)}function l(t){const i=[{value:1,symbol:""},{value:1e3,symbol:"k"},{value:1e6,symbol:"M"}],e=/\.0+$|(\.[0-9]*[1-9])0+$/;let s;for(s=i.length-1;s>0&&!(t>=i[s].value);s--);return t/i[s].value<i[s].value/10?(Math.floor(t/i[s].value*10)/10).toFixed(1).replace(e,"$1")+i[s].symbol:Math.floor(t/i[s].value).toFixed(0)+i[s].symbol}function u(t,i){for(let e=i;e>1;e--)t%e==0&&i%e==0&&(t/=e,i/=e);return{widthRatio:t,heightRatio:i}}},function(t,i,e){"undefined"!=typeof window&&(t.exports=function(t){var i={};function e(s){if(i[s])return i[s].exports;var n=i[s]={i:s,l:!1,exports:{}};return t[s].call(n.exports,n,n.exports,e),n.l=!0,n.exports}return e.m=t,e.c=i,e.d=function(t,i,s){e.o(t,i)||Object.defineProperty(t,i,{enumerable:!0,get:s})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"_",{value:!0})},e.t=function(t,i){if(1&i&&(t=e(t)),8&i)return t;if(4&i&&"object"==typeof t&&t&&t._)return t;var s=Object.create(null);if(e.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&i&&"string"!=typeof t)for(var n in t)e.d(s,n,function(i){return t[i]}.bind(null,n));return s},e.n=function(t){var i=t&&t._?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},e.p="/dist/",e(e.s=13)}([function(t,i,e){"use strict";e.d(i,"a",function(){return o}),e.d(i,"b",function(){return c});var s=e(5);function n(){}var r={trace:n,debug:n,log:n,warn:n,info:n,error:n},a=r,h=Object(s.a)(),o=function(t){if(h.console&&!0===t||"object"==typeof t){!function(t){for(var i=arguments.length,e=new Array(i>1?i-1:0),s=1;s<i;s++)e[s-1]=arguments[s];e.forEach(function(i){a[i]=t[i]?t[i].bind(t):function(t){var i=h.console[t];return i?function(){for(var e=arguments.length,s=new Array(e),n=0;n<e;n++)s[n]=arguments[n];s[0]&&(s[0]=function(t,i){return i="["+t+"] > "+i}(t,s[0])),i.apply(h.console,s)}:n}(i)})}(t,"debug","log","info","warn","error");try{a.log()}catch(t){a=r}}else a=r},c=a},function(t,i,e){"use strict";i.a={MEDIA_ATTACHING:"hlsMediaAttaching",MEDIA_ATTACHED:"hlsMediaAttached",MEDIA_DETACHING:"hlsMediaDetaching",MEDIA_DETACHED:"hlsMediaDetached",BUFFER_RESET:"hlsBufferReset",BUFFER_CODECS:"hlsBufferCodecs",BUFFER_CREATED:"hlsBufferCreated",BUFFER_APPENDING:"hlsBufferAppending",BUFFER_APPENDED:"hlsBufferAppended",BUFFER_EOS:"hlsBufferEos",BUFFER_FLUSHING:"hlsBufferFlushing",BUFFER_FLUSHED:"hlsBufferFlushed",MANIFEST_LOADING:"hlsManifestLoading",MANIFEST_LOADED:"hlsManifestLoaded",MANIFEST_PARSED:"hlsManifestParsed",LEVEL_SWITCHING:"hlsLevelSwitching",LEVEL_SWITCHED:"hlsLevelSwitched",LEVEL_LOADING:"hlsLevelLoading",LEVEL_LOADED:"hlsLevelLoaded",LEVEL_UPDATED:"hlsLevelUpdated",LEVEL_PTS_UPDATED:"hlsLevelPtsUpdated",AUDIO_TRACKS_UPDATED:"hlsAudioTracksUpdated",AUDIO_TRACK_SWITCHING:"hlsAudioTrackSwitching",AUDIO_TRACK_SWITCHED:"hlsAudioTrackSwitched",AUDIO_TRACK_LOADING:"hlsAudioTrackLoading",AUDIO_TRACK_LOADED:"hlsAudioTrackLoaded",SUBTITLE_TRACKS_UPDATED:"hlsSubtitleTracksUpdated",SUBTITLE_TRACK_SWITCH:"hlsSubtitleTrackSwitch",SUBTITLE_TRACK_LOADING:"hlsSubtitleTrackLoading",SUBTITLE_TRACK_LOADED:"hlsSubtitleTrackLoaded",SUBTITLE_FRAG_PROCESSED:"hlsSubtitleFragProcessed",INIT_PTS_FOUND:"hlsInitPtsFound",FRAG_LOADING:"hlsFragLoading",FRAG_LOAD_PROGRESS:"hlsFragLoadProgress",FRAG_LOAD_EMERGENCY_ABORTED:"hlsFragLoadEmergencyAborted",FRAG_LOADED:"hlsFragLoaded",FRAG_DECRYPTED:"hlsFragDecrypted",FRAG_PARSING_INIT_SEGMENT:"hlsFragParsingInitSegment",FRAG_PARSING_USERDATA:"hlsFragParsingUserdata",FRAG_PARSING_METADATA:"hlsFragParsingMetadata",FRAG_PARSING_DATA:"hlsFragParsingData",FRAG_PARSED:"hlsFragParsed",FRAG_BUFFERED:"hlsFragBuffered",FRAG_CHANGED:"hlsFragChanged",FPS_DROP:"hlsFpsDrop",FPS_DROP_LEVEL_CAPPING:"hlsFpsDropLevelCapping",ERROR:"hlsError",DESTROYING:"hlsDestroying",KEY_LOADING:"hlsKeyLoading",KEY_LOADED:"hlsKeyLoaded",STREAM_STATE_TRANSITION:"hlsStreamStateTransition",LIVE_BACK_BUFFER_REACHED:"hlsLiveBackBufferReached"}},function(t,i,e){"use strict";var s,n;e.d(i,"b",function(){return s}),e.d(i,"a",function(){return n}),function(t){t.NETWORK_ERROR="networkError",t.MEDIA_ERROR="mediaError",t.KEY_SYSTEM_ERROR="keySystemError",t.MUX_ERROR="muxError",t.OTHER_ERROR="otherError"}(s||(s={})),function(t){t.KEY_SYSTEM_NO_KEYS="keySystemNoKeys",t.KEY_SYSTEM_NO_ACCESS="keySystemNoAccess",t.KEY_SYSTEM_NO_SESSION="keySystemNoSession",t.KEY_SYSTEM_LICENSE_REQUEST_FAILED="keySystemLicenseRequestFailed",t.KEY_SYSTEM_NO_INIT_DATA="keySystemNoInitData",t.MANIFEST_LOAD_ERROR="manifestLoadError",t.MANIFEST_LOAD_TIMEOUT="manifestLoadTimeOut",t.MANIFEST_PARSING_ERROR="manifestParsingError",t.MANIFEST_INCOMPATIBLE_CODECS_ERROR="manifestIncompatibleCodecsError",t.LEVEL_LOAD_ERROR="levelLoadError",t.LEVEL_LOAD_TIMEOUT="levelLoadTimeOut",t.LEVEL_SWITCH_ERROR="levelSwitchError",t.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",t.AUDIO_TRACK_LOAD_TIMEOUT="audioTrackLoadTimeOut",t.FRAG_LOAD_ERROR="fragLoadError",t.FRAG_LOAD_TIMEOUT="fragLoadTimeOut",t.FRAG_DECRYPT_ERROR="fragDecryptError",t.FRAG_PARSING_ERROR="fragParsingError",t.REMUX_ALLOC_ERROR="remuxAllocError",t.KEY_LOAD_ERROR="keyLoadError",t.KEY_LOAD_TIMEOUT="keyLoadTimeOut",t.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",t.BUFFER_APPEND_ERROR="bufferAppendError",t.BUFFER_APPENDING_ERROR="bufferAppendingError",t.BUFFER_STALLED_ERROR="bufferStalledError",t.BUFFER_FULL_ERROR="bufferFullError",t.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",t.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",t.INTERNAL_EXCEPTION="internalException"}(n||(n={}))},function(t,i,e){"use strict";e.d(i,"a",function(){return s});var s=Number.isFinite||function(t){return"number"==typeof t&&isFinite(t)}},function(t,i,e){"use strict";e.d(i,"b",function(){return h});var s,n=e(5),r=function(){function t(){}return t.isHeader=function(t,i){return i+10<=t.length&&73===t[i]&&68===t[i+1]&&51===t[i+2]&&t[i+3]<255&&t[i+4]<255&&t[i+6]<128&&t[i+7]<128&&t[i+8]<128&&t[i+9]<128},t.isFooter=function(t,i){return i+10<=t.length&&51===t[i]&&68===t[i+1]&&73===t[i+2]&&t[i+3]<255&&t[i+4]<255&&t[i+6]<128&&t[i+7]<128&&t[i+8]<128&&t[i+9]<128},t.getID3Data=function(i,e){for(var s=e,n=0;t.isHeader(i,e);)n+=10,n+=t.it(i,e+6),t.isFooter(i,e+10)&&(n+=10),e+=n;if(n>0)return i.subarray(s,s+n)},t.it=function(t,i){var e=0;return e=(127&t[i])<<21,e|=(127&t[i+1])<<14,e|=(127&t[i+2])<<7,e|=127&t[i+3]},t.getTimeStamp=function(i){for(var e=t.getID3Frames(i),s=0;s<e.length;s++){var n=e[s];if(t.isTimeStampFrame(n))return t.et(n)}},t.isTimeStampFrame=function(t){return t&&"PRIV"===t.key&&"com.apple.streaming.transportStreamTimestamp"===t.info},t.st=function(i){var e=String.fromCharCode(i[0],i[1],i[2],i[3]),s=t.it(i,4);return{type:e,size:s,data:i.subarray(10,10+s)}},t.getID3Frames=function(i){for(var e=0,s=[];t.isHeader(i,e);){for(var n=t.it(i,e+6),r=(e+=10)+n;e+8<r;){var a=t.st(i.subarray(e)),h=t.nt(a);h&&s.push(h),e+=a.size+10}t.isFooter(i,e)&&(e+=10)}return s},t.nt=function(i){return"PRIV"===i.type?t.rt(i):"T"===i.type[0]?t.at(i):"W"===i.type[0]?t.ht(i):void 0},t.et=function(t){if(8===t.data.byteLength){var i=new Uint8Array(t.data),e=1&i[3],s=(i[4]<<23)+(i[5]<<15)+(i[6]<<7)+i[7];return s/=45,e&&(s+=47721858.84),Math.round(s)}},t.rt=function(i){if(!(i.size<2)){var e=t.ot(i.data,!0),s=new Uint8Array(i.data.subarray(e.length+1));return{key:i.type,info:e,data:s.buffer}}},t.at=function(i){if(!(i.size<2)){if("TXXX"===i.type){var e=1,s=t.ot(i.data.subarray(e),!0);e+=s.length+1;var n=t.ot(i.data.subarray(e));return{key:i.type,info:s,data:n}}var r=t.ot(i.data.subarray(1));return{key:i.type,data:r}}},t.ht=function(i){if("WXXX"===i.type){if(i.size<2)return;var e=1,s=t.ot(i.data.subarray(e));e+=s.length+1;var n=t.ot(i.data.subarray(e));return{key:i.type,info:s,data:n}}var r=t.ot(i.data);return{key:i.type,data:r}},t.ot=function(t,i){void 0===i&&(i=!1);var e=a();if(e){var s=e.decode(t);if(i){var n=s.indexOf("\0");return-1!==n?s.substring(0,n):s}return s.replace(/\0/g,"")}for(var r,h,o,c=t.length,l="",u=0;u<c;){if(0===(r=t[u++])&&i)return l;if(0!==r&&3!==r)switch(r>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:l+=String.fromCharCode(r);break;case 12:case 13:h=t[u++],l+=String.fromCharCode((31&r)<<6|63&h);break;case 14:h=t[u++],o=t[u++],l+=String.fromCharCode((15&r)<<12|(63&h)<<6|(63&o)<<0)}}return l},t}();function a(){var t=Object(n.a)();return s||void 0===t.TextDecoder||(s=new t.TextDecoder("utf-8")),s}var h=r.ot;i.a=r},function(t,i,e){"use strict";function s(){return"undefined"==typeof window?self:window.cnxRenderWindow?window.cnxRenderWindow:window}e.d(i,"a",function(){return s})},function(t,i){t.exports=void 0},function(t,i,e){var s,n,r,a,h;s=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/\?#]*\/)*.*?)??(;.*?)?(\?.*?)?(#.*?)?$/,n=/^([^\/?#]*)(.*)$/,r=/(?:\/|^)\.(?=\/)/g,a=/(?:\/|^)\.\.\/(?!\.\.\/).*?(?=\/)/g,h={buildAbsoluteURL:function(t,i,e){if(e=e||{},t=t.trim(),!(i=i.trim())){if(!e.alwaysNormalize)return t;var s=h.parseURL(t);if(!s)throw new Error("Error trying to parse base URL.");return s.path=h.normalizePath(s.path),h.buildURLFromParts(s)}var r=h.parseURL(i);if(!r)throw new Error("Error trying to parse relative URL.");if(r.scheme)return e.alwaysNormalize?(r.path=h.normalizePath(r.path),h.buildURLFromParts(r)):i;var a=h.parseURL(t);if(!a)throw new Error("Error trying to parse base URL.");if(!a.netLoc&&a.path&&"/"!==a.path[0]){var o=n.exec(a.path);a.netLoc=o[1],a.path=o[2]}a.netLoc&&!a.path&&(a.path="/");var c={scheme:a.scheme,netLoc:r.netLoc,path:null,params:r.params,query:r.query,fragment:r.fragment};if(!r.netLoc&&(c.netLoc=a.netLoc,"/"!==r.path[0]))if(r.path){var l=a.path,u=l.substring(0,l.lastIndexOf("/")+1)+r.path;c.path=h.normalizePath(u)}else c.path=a.path,r.params||(c.params=a.params,r.query||(c.query=a.query));return null===c.path&&(c.path=e.alwaysNormalize?h.normalizePath(r.path):r.path),h.buildURLFromParts(c)},parseURL:function(t){var i=s.exec(t);return i?{scheme:i[1]||"",netLoc:i[2]||"",path:i[3]||"",params:i[4]||"",query:i[5]||"",fragment:i[6]||""}:null},normalizePath:function(t){for(t=t.split("").reverse().join("").replace(r,"");t.length!==(t=t.replace(a,"")).length;);return t.split("").reverse().join("")},buildURLFromParts:function(t){return t.scheme+t.netLoc+t.path+t.params+t.query+t.fragment}},t.exports=h},function(t,i,e){"use strict";var s=Object.prototype.hasOwnProperty,n="~";function r(){}function a(t,i,e){this.fn=t,this.context=i,this.once=e||!1}function h(t,i,e,s,r){if("function"!=typeof e)throw new TypeError("The listener must be a function");var h=new a(e,s||t,r),o=n?n+i:i;return t.ct[o]?t.ct[o].fn?t.ct[o]=[t.ct[o],h]:t.ct[o].push(h):(t.ct[o]=h,t.lt++),t}function o(t,i){0==--t.lt?t.ct=new r:delete t.ct[i]}function c(){this.ct=new r,this.lt=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),c.prototype.eventNames=function(){var t,i,e=[];if(0===this.lt)return e;for(i in t=this.ct)s.call(t,i)&&e.push(n?i.slice(1):i);return Object.getOwnPropertySymbols?e.concat(Object.getOwnPropertySymbols(t)):e},c.prototype.listeners=function(t){var i=n?n+t:t,e=this.ct[i];if(!e)return[];if(e.fn)return[e.fn];for(var s=0,r=e.length,a=new Array(r);s<r;s++)a[s]=e[s].fn;return a},c.prototype.listenerCount=function(t){var i=n?n+t:t,e=this.ct[i];return e?e.fn?1:e.length:0},c.prototype.emit=function(t,i,e,s,r,a){var h=n?n+t:t;if(!this.ct[h])return!1;var o,c,l=this.ct[h],u=arguments.length;if(l.fn){switch(l.once&&this.removeListener(t,l.fn,void 0,!0),u){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,i),!0;case 3:return l.fn.call(l.context,i,e),!0;case 4:return l.fn.call(l.context,i,e,s),!0;case 5:return l.fn.call(l.context,i,e,s,r),!0;case 6:return l.fn.call(l.context,i,e,s,r,a),!0}for(c=1,o=new Array(u-1);c<u;c++)o[c-1]=arguments[c];l.fn.apply(l.context,o)}else{var d,f=l.length;for(c=0;c<f;c++)switch(l[c].once&&this.removeListener(t,l[c].fn,void 0,!0),u){case 1:l[c].fn.call(l[c].context);break;case 2:l[c].fn.call(l[c].context,i);break;case 3:l[c].fn.call(l[c].context,i,e);break;case 4:l[c].fn.call(l[c].context,i,e,s);break;default:if(!o)for(d=1,o=new Array(u-1);d<u;d++)o[d-1]=arguments[d];l[c].fn.apply(l[c].context,o)}}return!0},c.prototype.on=function(t,i,e){return h(this,t,i,e,!1)},c.prototype.once=function(t,i,e){return h(this,t,i,e,!0)},c.prototype.removeListener=function(t,i,e,s){var r=n?n+t:t;if(!this.ct[r])return this;if(!i)return o(this,r),this;var a=this.ct[r];if(a.fn)a.fn!==i||s&&!a.once||e&&a.context!==e||o(this,r);else{for(var h=0,c=[],l=a.length;h<l;h++)(a[h].fn!==i||s&&!a[h].once||e&&a[h].context!==e)&&c.push(a[h]);c.length?this.ct[r]=1===c.length?c[0]:c:o(this,r)}return this},c.prototype.removeAllListeners=function(t){var i;return t?(i=n?n+t:t,this.ct[i]&&o(this,i)):(this.ct=new r,this.lt=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=n,c.EventEmitter=c,t.exports=c},function(t,i,e){"use strict";var s=e(1),n=e(2),r=function(){function t(t,i){this.subtle=t,this.aesIV=i}return t.prototype.decrypt=function(t,i){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},i,t)},t}(),a=function(){function t(t,i){this.subtle=t,this.key=i}return t.prototype.expandKey=function(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])},t}(),h=function(){function t(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.initTable()}var i=t.prototype;return i.uint8ArrayToUint32Array_=function(t){for(var i=new DataView(t),e=new Uint32Array(4),s=0;s<4;s++)e[s]=i.getUint32(4*s);return e},i.initTable=function(){var t=this.sBox,i=this.invSBox,e=this.subMix,s=e[0],n=e[1],r=e[2],a=e[3],h=this.invSubMix,o=h[0],c=h[1],l=h[2],u=h[3],d=new Uint32Array(256),f=0,p=0,b=0;for(b=0;b<256;b++)d[b]=b<128?b<<1:b<<1^283;for(b=0;b<256;b++){var v=p^p<<1^p<<2^p<<3^p<<4;v=v>>>8^255&v^99,t[f]=v,i[v]=f;var m=d[f],g=d[m],y=d[g],w=257*d[v]^16843008*v;s[f]=w<<24|w>>>8,n[f]=w<<16|w>>>16,r[f]=w<<8|w>>>24,a[f]=w,w=16843009*y^65537*g^257*m^16843008*f,o[v]=w<<24|w>>>8,c[v]=w<<16|w>>>16,l[v]=w<<8|w>>>24,u[v]=w,f?(f=m^d[d[d[y^m]]],p^=d[d[p]]):f=p=1}},i.expandKey=function(t){for(var i=this.uint8ArrayToUint32Array_(t),e=!0,s=0;s<i.length&&e;)e=i[s]===this.key[s],s++;if(!e){this.key=i;var n=this.keySize=i.length;if(4!==n&&6!==n&&8!==n)throw new Error("Invalid aes key size="+n);var r,a,h,o,c=this.ksRows=4*(n+6+1),l=this.keySchedule=new Uint32Array(c),u=this.invKeySchedule=new Uint32Array(c),d=this.sBox,f=this.rcon,p=this.invSubMix,b=p[0],v=p[1],m=p[2],g=p[3];for(r=0;r<c;r++)r<n?h=l[r]=i[r]:(o=h,r%n==0?(o=d[(o=o<<8|o>>>24)>>>24]<<24|d[o>>>16&255]<<16|d[o>>>8&255]<<8|d[255&o],o^=f[r/n|0]<<24):n>6&&r%n==4&&(o=d[o>>>24]<<24|d[o>>>16&255]<<16|d[o>>>8&255]<<8|d[255&o]),l[r]=h=(l[r-n]^o)>>>0);for(a=0;a<c;a++)r=c-a,o=3&a?l[r]:l[r-4],u[a]=a<4||r<=4?o:b[d[o>>>24]]^v[d[o>>>16&255]]^m[d[o>>>8&255]]^g[d[255&o]],u[a]=u[a]>>>0}},i.networkToHostOrderSwap=function(t){return t<<24|(65280&t)<<8|(16711680&t)>>8|t>>>24},i.decrypt=function(t,i,e,s){for(var n,r,a,h,o,c,l,u,d,f,p,b,v,m,g,y,w,x=this.keySize+6,k=this.invKeySchedule,S=this.invSBox,O=this.invSubMix,_=O[0],j=O[1],A=O[2],I=O[3],T=this.uint8ArrayToUint32Array_(e),C=T[0],P=T[1],M=T[2],E=T[3],L=new Int32Array(t),R=new Int32Array(L.length),B=this.networkToHostOrderSwap;i<L.length;){for(d=B(L[i]),f=B(L[i+1]),p=B(L[i+2]),b=B(L[i+3]),o=d^k[0],c=b^k[1],l=p^k[2],u=f^k[3],v=4,m=1;m<x;m++)n=_[o>>>24]^j[c>>16&255]^A[l>>8&255]^I[255&u]^k[v],r=_[c>>>24]^j[l>>16&255]^A[u>>8&255]^I[255&o]^k[v+1],a=_[l>>>24]^j[u>>16&255]^A[o>>8&255]^I[255&c]^k[v+2],h=_[u>>>24]^j[o>>16&255]^A[c>>8&255]^I[255&l]^k[v+3],o=n,c=r,l=a,u=h,v+=4;n=S[o>>>24]<<24^S[c>>16&255]<<16^S[l>>8&255]<<8^S[255&u]^k[v],r=S[c>>>24]<<24^S[l>>16&255]<<16^S[u>>8&255]<<8^S[255&o]^k[v+1],a=S[l>>>24]<<24^S[u>>16&255]<<16^S[o>>8&255]<<8^S[255&c]^k[v+2],h=S[u>>>24]<<24^S[o>>16&255]<<16^S[c>>8&255]<<8^S[255&l]^k[v+3],v+=3,R[i]=B(n^C),R[i+1]=B(h^P),R[i+2]=B(a^M),R[i+3]=B(r^E),C=d,P=f,M=p,E=b,i+=4}return s?(g=R.buffer,y=g.byteLength,(w=y&&new DataView(g).getUint8(y-1))?g.slice(0,y-w):g):R.buffer},i.destroy=function(){this.key=void 0,this.keySize=void 0,this.ksRows=void 0,this.sBox=void 0,this.invSBox=void 0,this.subMix=void 0,this.invSubMix=void 0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.rcon=void 0},t}(),o=e(0),c=e(5),l=function(){function t(t,i,e){var s=(void 0===e?{}:e).removePKCS7Padding,n=void 0===s||s;if(this.logEnabled=!0,this.observer=t,this.config=i,this.removePKCS7Padding=n,n)try{var r=Object(c.a)().crypto;r&&(this.subtle=r.subtle||r.webkitSubtle)}catch(t){}this.disableWebCrypto=!this.subtle}var i=t.prototype;return i.isSync=function(){return this.disableWebCrypto&&this.config.enableSoftwareAES},i.decrypt=function(t,i,e,s){var n=this;if(this.disableWebCrypto&&this.config.enableSoftwareAES){this.logEnabled&&(o.b.log("JS AES decrypt"),this.logEnabled=!1);var c=this.decryptor;c||(this.decryptor=c=new h),c.expandKey(i),s(c.decrypt(t,0,e,this.removePKCS7Padding))}else{this.logEnabled&&(o.b.log("WebCrypto AES decrypt"),this.logEnabled=!1);var l=this.subtle;this.key!==i&&(this.key=i,this.fastAesKey=new a(l,i)),this.fastAesKey.expandKey().then(function(a){new r(l,e).decrypt(t,a).catch(function(r){n.onWebCryptoError(r,t,i,e,s)}).then(function(t){s(t)})}).catch(function(r){n.onWebCryptoError(r,t,i,e,s)})}},i.onWebCryptoError=function(t,i,e,r,a){this.config.enableSoftwareAES?(o.b.log("WebCrypto Error, disable WebCrypto API"),this.disableWebCrypto=!0,this.logEnabled=!0,this.decrypt(i,e,r,a)):(o.b.error("decrypting error : "+t.message),this.observer.trigger(s.a.ERROR,{type:n.b.MEDIA_ERROR,details:n.a.FRAG_DECRYPT_ERROR,fatal:!0,reason:t.message}))},i.destroy=function(){var t=this.decryptor;t&&(t.destroy(),this.decryptor=void 0)},t}(),u=e(3);function d(t,i){return 255===t[i]&&240==(246&t[i+1])}function f(t,i){return 1&t[i+1]?7:9}function p(t,i){return(3&t[i+3])<<11|t[i+4]<<3|(224&t[i+5])>>>5}function b(t,i){return!!(i+1<t.length&&d(t,i))}function v(t,i){if(b(t,i)){var e=f(t,i);i+5<t.length&&(e=p(t,i));var s=i+e;if(s===t.length||s+1<t.length&&d(t,s))return!0}return!1}function m(t,i,e,r,a){if(!t.samplerate){var h=function(t,i,e,r){var a,h,c,l,u,d=navigator.userAgent.toLowerCase(),f=r,p=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];if(a=1+((192&i[e+2])>>>6),!((h=(60&i[e+2])>>>2)>p.length-1))return l=(1&i[e+2])<<2,l|=(192&i[e+3])>>>6,o.b.log("manifest codec:"+r+",ADTS data:type:"+a+",sampleingIndex:"+h+"["+p[h]+"Hz],channelConfig:"+l),/firefox/i.test(d)?h>=6?(a=5,u=new Array(4),c=h-3):(a=2,u=new Array(2),c=h):-1!==d.indexOf("android")?(a=2,u=new Array(2),c=h):(a=5,u=new Array(4),r&&(-1!==r.indexOf("mp4a.40.29")||-1!==r.indexOf("mp4a.40.5"))||!r&&h>=6?c=h-3:((r&&-1!==r.indexOf("mp4a.40.2")&&(h>=6&&1===l||/vivaldi/i.test(d))||!r&&1===l)&&(a=2,u=new Array(2)),c=h)),u[0]=a<<3,u[0]|=(14&h)>>1,u[1]|=(1&h)<<7,u[1]|=l<<3,5===a&&(u[1]|=(14&c)>>1,u[2]=(1&c)<<7,u[2]|=8,u[3]=0),{config:u,samplerate:p[h],channelCount:l,codec:"mp4a.40."+a,manifestCodec:f};t.trigger(s.a.ERROR,{type:n.b.MEDIA_ERROR,details:n.a.FRAG_PARSING_ERROR,fatal:!0,reason:"invalid ADTS sampling index:"+h})}(i,e,r,a);t.config=h.config,t.samplerate=h.samplerate,t.channelCount=h.channelCount,t.codec=h.codec,t.manifestCodec=h.manifestCodec,o.b.log("parsed codec:"+t.codec+",rate:"+h.samplerate+",nb channel:"+h.channelCount)}}function g(t){return 9216e4/t}function y(t,i,e,s,n){var r=function(t,i,e,s,n){var r,a,h=t.length;if(r=f(t,i),a=p(t,i),(a-=r)>0&&i+r+a<=h)return{headerLength:r,frameLength:a,stamp:e+s*n}}(i,e,s,n,g(t.samplerate));if(r){var a=r.stamp,h=r.headerLength,o=r.frameLength,c={unit:i.subarray(e+h,e+h+o),pts:a,dts:a};return t.samples.push(c),{sample:c,length:o+h}}}var w=e(4),x=function(){function t(t,i,e){this.observer=t,this.config=e,this.remuxer=i}var i=t.prototype;return i.resetInitSegment=function(t,i,e,s){this.ut={container:"audio/adts",type:"audio",id:0,sequenceNumber:0,isAAC:!0,samples:[],len:0,manifestCodec:i,duration:s,inputTimeScale:9e4}},i.resetTimeStamp=function(){},t.probe=function(t){if(!t)return!1;for(var i=(w.a.getID3Data(t,0)||[]).length,e=t.length;i<e;i++)if(v(t,i))return o.b.log("ADTS sync word found !"),!0;return!1},i.append=function(t,i,e,s){for(var n=this.ut,r=w.a.getID3Data(t,0)||[],a=w.a.getTimeStamp(r),h=Object(u.a)(a)?90*a:9e4*i,c=0,l=h,d=t.length,f=r.length,p=[{pts:l,dts:l,data:r}];f<d-1;)if(b(t,f)&&f+5<d){m(n,this.observer,t,f,n.manifestCodec);var v=y(n,t,f,h,c);if(!v){o.b.log("Unable to parse AAC frame");break}f+=v.length,l=v.sample.pts,c++}else w.a.isHeader(t,f)?(r=w.a.getID3Data(t,f),p.push({pts:l,dts:l,data:r}),f+=r.length):f++;this.remuxer.remux(n,{samples:[]},{samples:p,inputTimeScale:9e4},{samples:[]},i,e,s)},i.destroy=function(){},t}(),k=e(10),S={BitratesMap:[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],SamplingRateMap:[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],SamplesCoefficients:[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],BytesInSlot:[0,1,1,4],appendFrame:function(t,i,e,s,n){if(!(e+24>i.length)){var r=this.parseHeader(i,e);if(r&&e+r.frameLength<=i.length){var a=s+n*(9e4*r.samplesPerFrame/r.sampleRate),h={unit:i.subarray(e,e+r.frameLength),pts:a,dts:a};return t.config=[],t.channelCount=r.channelCount,t.samplerate=r.sampleRate,t.samples.push(h),{sample:h,length:r.frameLength}}}},parseHeader:function(t,i){var e=t[i+1]>>3&3,s=t[i+1]>>1&3,n=t[i+2]>>4&15,r=t[i+2]>>2&3,a=t[i+2]>>1&1;if(1!==e&&0!==n&&15!==n&&3!==r){var h=3===e?3-s:3===s?3:4,o=1e3*S.BitratesMap[14*h+n-1],c=3===e?0:2===e?1:2,l=S.SamplingRateMap[3*c+r],u=t[i+3]>>6==3?1:2,d=S.SamplesCoefficients[e][s],f=S.BytesInSlot[s],p=8*d*f;return{sampleRate:l,channelCount:u,frameLength:parseInt(d*o/l+a,10)*f,samplesPerFrame:p}}},isHeaderPattern:function(t,i){return 255===t[i]&&224==(224&t[i+1])&&0!=(6&t[i+1])},isHeader:function(t,i){return!!(i+1<t.length&&this.isHeaderPattern(t,i))},probe:function(t,i){if(i+1<t.length&&this.isHeaderPattern(t,i)){var e=this.parseHeader(t,i),s=4;e&&e.frameLength&&(s=e.frameLength);var n=i+s;if(n===t.length||n+1<t.length&&this.isHeaderPattern(t,n))return!0}return!1}},O=S,_=function(){function t(t){this.data=t,this.bytesAvailable=t.byteLength,this.word=0,this.bitsAvailable=0}var i=t.prototype;return i.loadWord=function(){var t=this.data,i=this.bytesAvailable,e=t.byteLength-i,s=new Uint8Array(4),n=Math.min(4,i);if(0===n)throw new Error("no bytes available");s.set(t.subarray(e,e+n)),this.word=new DataView(s.buffer).getUint32(0),this.bitsAvailable=8*n,this.bytesAvailable-=n},i.skipBits=function(t){var i;this.bitsAvailable>t?(this.word<<=t,this.bitsAvailable-=t):(t-=this.bitsAvailable,t-=(i=t>>3)>>3,this.bytesAvailable-=i,this.loadWord(),this.word<<=t,this.bitsAvailable-=t)},i.readBits=function(t){var i=Math.min(this.bitsAvailable,t),e=this.word>>>32-i;return t>32&&o.b.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=i,this.bitsAvailable>0?this.word<<=i:this.bytesAvailable>0&&this.loadWord(),(i=t-i)>0&&this.bitsAvailable?e<<i|this.readBits(i):e},i.skipLZ=function(){var t;for(t=0;t<this.bitsAvailable;++t)if(0!=(this.word&2147483648>>>t))return this.word<<=t,this.bitsAvailable-=t,t;return this.loadWord(),t+this.skipLZ()},i.skipUEG=function(){this.skipBits(1+this.skipLZ())},i.skipEG=function(){this.skipBits(1+this.skipLZ())},i.readUEG=function(){var t=this.skipLZ();return this.readBits(t+1)-1},i.readEG=function(){var t=this.readUEG();return 1&t?1+t>>>1:-1*(t>>>1)},i.readBoolean=function(){return 1===this.readBits(1)},i.readUByte=function(){return this.readBits(8)},i.readUShort=function(){return this.readBits(16)},i.readUInt=function(){return this.readBits(32)},i.skipScalingList=function(t){var i,e=8,s=8;for(i=0;i<t;i++)0!==s&&(s=(e+this.readEG()+256)%256),e=0===s?e:s},i.readSPS=function(){var t,i,e,s,n,r,a,h=0,o=0,c=0,l=0,u=this.readUByte.bind(this),d=this.readBits.bind(this),f=this.readUEG.bind(this),p=this.readBoolean.bind(this),b=this.skipBits.bind(this),v=this.skipEG.bind(this),m=this.skipUEG.bind(this),g=this.skipScalingList.bind(this);if(u(),t=u(),d(5),b(3),u(),m(),100===t||110===t||122===t||244===t||44===t||83===t||86===t||118===t||128===t){var y=f();if(3===y&&b(1),m(),m(),b(1),p())for(r=3!==y?8:12,a=0;a<r;a++)p()&&g(a<6?16:64)}m();var w=f();if(0===w)f();else if(1===w)for(b(1),v(),v(),i=f(),a=0;a<i;a++)v();m(),b(1),e=f(),s=f(),0===(n=d(1))&&b(1),b(1),p()&&(h=f(),o=f(),c=f(),l=f());var x=[1,1];if(p()&&p())switch(u()){case 1:x=[1,1];break;case 2:x=[12,11];break;case 3:x=[10,11];break;case 4:x=[16,11];break;case 5:x=[40,33];break;case 6:x=[24,11];break;case 7:x=[20,11];break;case 8:x=[32,11];break;case 9:x=[80,33];break;case 10:x=[18,11];break;case 11:x=[15,11];break;case 12:x=[64,33];break;case 13:x=[160,99];break;case 14:x=[4,3];break;case 15:x=[3,2];break;case 16:x=[2,1];break;case 255:x=[u()<<8|u(),u()<<8|u()]}return{width:Math.ceil(16*(e+1)-2*h-2*o),height:(2-n)*(s+1)*16-(n?2:4)*(c+l),pixelRatio:x}},i.readSliceType=function(){return this.readUByte(),this.readUEG(),this.readUEG()},t}(),j=function(){function t(t,i,e,s){this.decryptdata=e,this.discardEPB=s,this.decrypter=new l(t,i,{removePKCS7Padding:!1})}var i=t.prototype;return i.decryptBuffer=function(t,i){this.decrypter.decrypt(t,this.decryptdata.key.buffer,this.decryptdata.iv.buffer,i)},i.decryptAacSample=function(t,i,e,s){var n=t[i].unit,r=n.subarray(16,n.length-n.length%16),a=r.buffer.slice(r.byteOffset,r.byteOffset+r.length),h=this;this.decryptBuffer(a,function(r){r=new Uint8Array(r),n.set(r,16),s||h.decryptAacSamples(t,i+1,e)})},i.decryptAacSamples=function(t,i,e){for(;;i++){if(i>=t.length)return void e();if(!(t[i].unit.length<32)){var s=this.decrypter.isSync();if(this.decryptAacSample(t,i,e,s),!s)return}}},i.getAvcEncryptedData=function(t){for(var i=16*Math.floor((t.length-48)/160)+16,e=new Int8Array(i),s=0,n=32;n<=t.length-16;n+=160,s+=16)e.set(t.subarray(n,n+16),s);return e},i.getAvcDecryptedUnit=function(t,i){i=new Uint8Array(i);for(var e=0,s=32;s<=t.length-16;s+=160,e+=16)t.set(i.subarray(e,e+16),s);return t},i.decryptAvcSample=function(t,i,e,s,n,r){var a=this.discardEPB(n.data),h=this.getAvcEncryptedData(a),o=this;this.decryptBuffer(h.buffer,function(h){n.data=o.getAvcDecryptedUnit(a,h),r||o.decryptAvcSamples(t,i,e+1,s)})},i.decryptAvcSamples=function(t,i,e,s){for(;;i++,e=0){if(i>=t.length)return void s();for(var n=t[i].units;!(e>=n.length);e++){var r=n[e];if(!(r.length<=48||1!==r.type&&5!==r.type)){var a=this.decrypter.isSync();if(this.decryptAvcSample(t,i,e,s,r,a),!a)return}}}},t}(),A={video:1,audio:2,id3:3,text:4},I=function(){function t(t,i,e,s){this.observer=t,this.config=e,this.typeSupported=s,this.remuxer=i,this.sampleAes=null}var i=t.prototype;return i.setDecryptData=function(t){null!=t&&null!=t.key&&"SAMPLE-AES"===t.method?this.sampleAes=new j(this.observer,this.config,t,this.discardEPB):this.sampleAes=null},t.probe=function(i){var e=t.dt(i);return!(e<0||(e&&o.b.warn("MPEG2-TS detected but first sync word found @ offset "+e+", junk ahead ?"),0))},t.dt=function(t){for(var i=Math.min(1e3,t.length-564),e=0;e<i;){if(71===t[e]&&71===t[e+188]&&71===t[e+376])return e;e++}return-1},t.createTrack=function(t,i){return{container:"video"===t||"audio"===t?"video/mp2t":void 0,type:t,id:A[t],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:"video"===t?0:void 0,isAAC:"audio"===t||void 0,duration:"audio"===t?i:void 0}},i.resetInitSegment=function(i,e,s,n){this.pmtParsed=!1,this.ft=-1,this.pt=t.createTrack("video",n),this.ut=t.createTrack("audio",n),this.bt=t.createTrack("id3",n),this.vt=t.createTrack("text",n),this.aacOverFlow=null,this.aacLastPTS=null,this.avcSample=null,this.audioCodec=e,this.videoCodec=s,this.gt=n},i.resetTimeStamp=function(){},i.append=function(i,e,r,a){var h,c,l,u,d,f=i.length,p=!1;this.contiguous=r;var b=this.pmtParsed,v=this.pt,m=this.ut,g=this.bt,y=v.pid,w=m.pid,x=g.pid,k=this.ft,S=v.pesData,O=m.pesData,_=g.pesData,j=this.yt,A=this.wt,I=this.xt,T=this.kt.bind(this),C=this.St.bind(this),P=this.Ot.bind(this),M=this._t.bind(this),E=t.dt(i);for(f-=(f+E)%188,h=E;h<f;h+=188)if(71===i[h]){if(c=!!(64&i[h+1]),l=((31&i[h+1])<<8)+i[h+2],(48&i[h+3])>>4>1){if((u=h+5+i[h+4])===h+188)continue}else u=h+4;switch(l){case y:c&&(S&&(d=I(S))&&T(d,!1),S={data:[],size:0}),S&&(S.data.push(i.subarray(u,h+188)),S.size+=h+188-u);break;case w:c&&(O&&(d=I(O))&&(m.isAAC?C(d):P(d)),O={data:[],size:0}),O&&(O.data.push(i.subarray(u,h+188)),O.size+=h+188-u);break;case x:c&&(_&&(d=I(_))&&M(d),_={data:[],size:0}),_&&(_.data.push(i.subarray(u,h+188)),_.size+=h+188-u);break;case 0:c&&(u+=i[u]+1),k=this.ft=j(i,u);break;case k:c&&(u+=i[u]+1);var L=A(i,u,!0===this.typeSupported.mpeg||!0===this.typeSupported.mp3,null!=this.sampleAes);(y=L.avc)>0&&(v.pid=y),(w=L.audio)>0&&(m.pid=w,m.isAAC=L.isAAC),(x=L.id3)>0&&(g.pid=x),p&&!b&&(o.b.log("reparse from beginning"),p=!1,h=E-188),b=this.pmtParsed=!0;break;case 17:case 8191:break;default:p=!0}}else this.observer.trigger(s.a.ERROR,{type:n.b.MEDIA_ERROR,details:n.a.FRAG_PARSING_ERROR,fatal:!1,reason:"TS packet did not start with 0x47"});S&&(d=I(S))?(T(d,!0),v.pesData=null):v.pesData=S,O&&(d=I(O))?(m.isAAC?C(d):P(d),m.pesData=null):(O&&O.size&&o.b.log("last AAC PES packet truncated,might overlap between fragments"),m.pesData=O),_&&(d=I(_))?(M(d),g.pesData=null):g.pesData=_,null==this.sampleAes?this.remuxer.remux(m,v,g,this.vt,e,r,a):this.decryptAndRemux(m,v,g,this.vt,e,r,a)},i.decryptAndRemux=function(t,i,e,s,n,r,a){if(t.samples&&t.isAAC){var h=this;this.sampleAes.decryptAacSamples(t.samples,0,function(){h.decryptAndRemuxAvc(t,i,e,s,n,r,a)})}else this.decryptAndRemuxAvc(t,i,e,s,n,r,a)},i.decryptAndRemuxAvc=function(t,i,e,s,n,r,a){if(i.samples){var h=this;this.sampleAes.decryptAvcSamples(i.samples,0,0,function(){h.remuxer.remux(t,i,e,s,n,r,a)})}else this.remuxer.remux(t,i,e,s,n,r,a)},i.destroy=function(){this.jt=this.At=void 0,this.gt=0},i.yt=function(t,i){return(31&t[i+10])<<8|t[i+11]},i.wt=function(t,i,e,s){var n,r,a={audio:-1,avc:-1,id3:-1,isAAC:!0};for(n=i+3+((15&t[i+1])<<8|t[i+2])-4,i+=12+((15&t[i+10])<<8|t[i+11]);i<n;){switch(r=(31&t[i+1])<<8|t[i+2],t[i]){case 207:if(!s){o.b.log("unknown stream type:"+t[i]);break}case 15:-1===a.audio&&(a.audio=r);break;case 21:-1===a.id3&&(a.id3=r);break;case 219:if(!s){o.b.log("unknown stream type:"+t[i]);break}case 27:-1===a.avc&&(a.avc=r);break;case 3:case 4:e?-1===a.audio&&(a.audio=r,a.isAAC=!1):o.b.log("MPEG audio found, not supported in this browser for now");break;case 36:o.b.warn("HEVC stream type found, not supported for now");break;default:o.b.log("unknown stream type:"+t[i])}i+=5+((15&t[i+3])<<8|t[i+4])}return a},i.xt=function(t){var i,e,s,n,r,a,h,c,l=0,u=t.data;if(!t||0===t.size)return null;for(;u[0].length<19&&u.length>1;){var d=new Uint8Array(u[0].length+u[1].length);d.set(u[0]),d.set(u[1],u[0].length),u[0]=d,u.splice(1,1)}if(1===((i=u[0])[0]<<16)+(i[1]<<8)+i[2]){if((s=(i[4]<<8)+i[5])&&s>t.size-6)return null;if(192&(e=i[7])&&((a=536870912*(14&i[9])+4194304*(255&i[10])+16384*(254&i[11])+128*(255&i[12])+(254&i[13])/2)>4294967295&&(a-=8589934592),64&e?((h=536870912*(14&i[14])+4194304*(255&i[15])+16384*(254&i[16])+128*(255&i[17])+(254&i[18])/2)>4294967295&&(h-=8589934592),a-h>54e5&&(o.b.warn(Math.round((a-h)/9e4)+"s delta between PTS and DTS, align them"),a=h)):h=a),c=(n=i[8])+9,t.size<=c)return null;t.size-=c,r=new Uint8Array(t.size);for(var f=0,p=u.length;f<p;f++){var b=(i=u[f]).byteLength;if(c){if(c>b){c-=b;continue}i=i.subarray(c),b-=c,c=0}r.set(i,l),l+=b}return s&&(s-=n+3),{data:r,pts:a,dts:h,len:s}}return null},i.pushAccesUnit=function(t,i){if(t.units.length&&t.frame){var e=i.samples,s=e.length;if(isNaN(t.pts)){if(!s)return void i.dropped++;var n=e[s-1];t.pts=n.pts,t.dts=n.dts}!this.config.forceKeyFrameOnDiscontinuity||!0===t.key||i.sps&&(s||this.contiguous)?(t.id=s,e.push(t)):i.dropped++}t.debug.length&&o.b.log(t.pts+"/"+t.dts+":"+t.debug)},i.kt=function(t,i){var e,s,n,r=this,a=this.pt,h=this.It(t.data),o=this.avcSample,c=!1,l=this.pushAccesUnit.bind(this),u=function(t,i,e,s){return{key:t,pts:i,dts:e,units:[],debug:s}};t.data=null,o&&h.length&&!a.audFound&&(l(o,a),o=this.avcSample=u(!1,t.pts,t.dts,"")),h.forEach(function(i){switch(i.type){case 1:s=!0,o||(o=r.avcSample=u(!0,t.pts,t.dts,"")),o.frame=!0;var h=i.data;if(c&&h.length>4){var d=new _(h).readSliceType();2!==d&&4!==d&&7!==d&&9!==d||(o.key=!0)}break;case 5:s=!0,o||(o=r.avcSample=u(!0,t.pts,t.dts,"")),o.key=!0,o.frame=!0;break;case 6:s=!0,(e=new _(r.discardEPB(i.data))).readUByte();for(var f=0,p=0,b=!1,v=0;!b&&e.bytesAvailable>1;){f=0;do{f+=v=e.readUByte()}while(255===v);p=0;do{p+=v=e.readUByte()}while(255===v);if(4===f&&0!==e.bytesAvailable){if(b=!0,181===e.readUByte()&&49===e.readUShort()&&1195456820===e.readUInt()&&3===e.readUByte()){var m=e.readUByte(),g=31&m,y=[m,e.readUByte()];for(n=0;n<g;n++)y.push(e.readUByte()),y.push(e.readUByte()),y.push(e.readUByte());r.Tt(r.vt.samples,{type:3,pts:t.pts,bytes:y})}}else if(5===f&&0!==e.bytesAvailable){if(b=!0,p>16){var x=[];for(n=0;n<16;n++)x.push(e.readUByte().toString(16)),3!==n&&5!==n&&7!==n&&9!==n||x.push("-");var k=p-16,S=new Uint8Array(k);for(n=0;n<k;n++)S[n]=e.readUByte();r.Tt(r.vt.samples,{pts:t.pts,payloadType:f,uuid:x.join(""),userDataBytes:S,userData:Object(w.b)(S.buffer)})}}else if(p<e.bytesAvailable)for(n=0;n<p;n++)e.readUByte()}break;case 7:if(s=!0,c=!0,!a.sps){var O=(e=new _(i.data)).readSPS();a.width=O.width,a.height=O.height,a.pixelRatio=O.pixelRatio,a.sps=[i.data],a.duration=r.gt;var j=i.data.subarray(1,4),A="avc1.";for(n=0;n<3;n++){var I=j[n].toString(16);I.length<2&&(I="0"+I),A+=I}a.codec=A}break;case 8:s=!0,a.pps||(a.pps=[i.data]);break;case 9:s=!1,a.audFound=!0,o&&l(o,a),o=r.avcSample=u(!1,t.pts,t.dts,"");break;case 12:s=!1;break;default:s=!1,o&&(o.debug+="unknown NAL "+i.type+" ")}o&&s&&o.units.push(i)}),i&&o&&(l(o,a),this.avcSample=null)},i.Tt=function(t,i){var e=t.length;if(e>0){if(i.pts>=t[e-1].pts)t.push(i);else for(var s=e-1;s>=0;s--)if(i.pts<t[s].pts){t.splice(s,0,i);break}}else t.push(i)},i.Ct=function(){var t,i=this.avcSample;if(!i||0===i.units.length){var e=this.pt.samples;i=e[e.length-1]}if(i){var s=i.units;t=s[s.length-1]}return t},i.It=function(t){var i,e,s,n,r=0,a=t.byteLength,h=this.pt,o=h.naluState||0,c=o,l=[],u=-1;for(-1===o&&(u=0,n=31&t[0],o=0,r=1);r<a;)if(i=t[r++],o)if(1!==o)if(i)if(1===i){if(u>=0)s={data:t.subarray(u,r-o-1),type:n},l.push(s);else{var d=this.Ct();if(d&&(c&&r<=4-c&&d.state&&(d.data=d.data.subarray(0,d.data.byteLength-c)),(e=r-o-1)>0)){var f=new Uint8Array(d.data.byteLength+e);f.set(d.data,0),f.set(t.subarray(0,e),d.data.byteLength),d.data=f}}r<a?(u=r,n=31&t[r],o=0):o=-1}else o=0;else o=3;else o=i?0:2;else o=i?0:1;if(u>=0&&o>=0&&(s={data:t.subarray(u,a),type:n,state:o},l.push(s)),0===l.length){var p=this.Ct();if(p){var b=new Uint8Array(p.data.byteLength+t.byteLength);b.set(p.data,0),b.set(t,p.data.byteLength),p.data=b}}return h.naluState=o,l},i.discardEPB=function(t){for(var i,e,s=t.byteLength,n=[],r=1;r<s-2;)0===t[r]&&0===t[r+1]&&3===t[r+2]?(n.push(r+2),r+=2):r++;if(0===n.length)return t;i=s-n.length,e=new Uint8Array(i);var a=0;for(r=0;r<i;a++,r++)a===n[0]&&(a++,n.shift()),e[r]=t[a];return e},i.St=function(t){var i,e,r,a,h,c,l,u=this.ut,d=t.data,f=t.pts,p=this.aacOverFlow,v=this.aacLastPTS;if(p){var w=new Uint8Array(p.byteLength+d.byteLength);w.set(p,0),w.set(d,p.byteLength),d=w}for(r=0,h=d.length;r<h-1&&!b(d,r);r++);if(!r||(r<h-1?(c="AAC PES did not start with ADTS header,offset:"+r,l=!1):(c="no ADTS header found in AAC PES",l=!0),o.b.warn("parsing error:"+c),this.observer.trigger(s.a.ERROR,{type:n.b.MEDIA_ERROR,details:n.a.FRAG_PARSING_ERROR,fatal:l,reason:c}),!l)){if(m(u,this.observer,d,r,this.audioCodec),e=0,i=g(u.samplerate),p&&v){var x=v+i;Math.abs(x-f)>1&&(o.b.log("AAC: align PTS for overlapping frames by "+Math.round((x-f)/90)),f=x)}for(;r<h;){if(b(d,r)){if(r+5<h){var k=y(u,d,r,f,e);if(k){r+=k.length,a=k.sample.pts,e++;continue}}break}r++}p=r<h?d.subarray(r,h):null,this.aacOverFlow=p,this.aacLastPTS=a}},i.Ot=function(t){for(var i=t.data,e=i.length,s=0,n=0,r=t.pts;n<e;)if(O.isHeader(i,n)){var a=O.appendFrame(this.ut,i,n,r,s);if(!a)break;n+=a.length,s++}else n++},i._t=function(t){this.bt.samples.push(t)},t}(),T=function(){function t(t,i,e){this.observer=t,this.config=e,this.remuxer=i}var i=t.prototype;return i.resetInitSegment=function(t,i,e,s){this.ut={container:"audio/mpeg",type:"audio",id:-1,sequenceNumber:0,isAAC:!1,samples:[],len:0,manifestCodec:i,duration:s,inputTimeScale:9e4}},i.resetTimeStamp=function(){},t.probe=function(t){var i,e,s=w.a.getID3Data(t,0);if(s&&void 0!==w.a.getTimeStamp(s))for(i=s.length,e=Math.min(t.length-1,i+100);i<e;i++)if(O.probe(t,i))return o.b.log("MPEG Audio sync word found !"),!0;return!1},i.append=function(t,i,e,s){for(var n=w.a.getID3Data(t,0),r=w.a.getTimeStamp(n),a=r?90*r:9e4*i,h=n.length,o=t.length,c=0,l=0,u=this.ut,d=[{pts:a,dts:a,data:n}];h<o;)if(O.isHeader(t,h)){var f=O.appendFrame(u,t,h,a,c);if(!f)break;h+=f.length,l=f.sample.pts,c++}else w.a.isHeader(t,h)?(n=w.a.getID3Data(t,h),d.push({pts:l,dts:l,data:n}),h+=n.length):h++;this.remuxer.remux(u,{samples:[]},{samples:d,inputTimeScale:9e4},{samples:[]},i,e,s)},i.destroy=function(){},t}(),C=function(){function t(){}return t.getSilentFrame=function(t,i){switch(t){case"mp4a.40.2":if(1===i)return new Uint8Array([0,200,0,128,35,128]);if(2===i)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===i)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===i)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===i)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===i)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(1===i)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===i)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===i)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return null},t}(),P=Math.pow(2,32)-1,M=function(){function t(){}return t.init=function(){var i;for(i in t.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]},t.types)t.types.hasOwnProperty(i)&&(t.types[i]=[i.charCodeAt(0),i.charCodeAt(1),i.charCodeAt(2),i.charCodeAt(3)]);var e=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),s=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);t.HDLR_TYPES={video:e,audio:s};var n=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),r=new Uint8Array([0,0,0,0,0,0,0,0]);t.STTS=t.STSC=t.STCO=r,t.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),t.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),t.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),t.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);var a=new Uint8Array([105,115,111,109]),h=new Uint8Array([97,118,99,49]),o=new Uint8Array([0,0,0,1]);t.FTYP=t.box(t.types.ftyp,a,o,a,h),t.DINF=t.box(t.types.dinf,t.box(t.types.dref,n))},t.box=function(t){for(var i,e=Array.prototype.slice.call(arguments,1),s=8,n=e.length,r=n;n--;)s+=e[n].byteLength;for((i=new Uint8Array(s))[0]=s>>24&255,i[1]=s>>16&255,i[2]=s>>8&255,i[3]=255&s,i.set(t,4),n=0,s=8;n<r;n++)i.set(e[n],s),s+=e[n].byteLength;return i},t.hdlr=function(i){return t.box(t.types.hdlr,t.HDLR_TYPES[i])},t.mdat=function(i){return t.box(t.types.mdat,i)},t.mdhd=function(i,e){e*=i;var s=Math.floor(e/(P+1)),n=Math.floor(e%(P+1));return t.box(t.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,i>>24&255,i>>16&255,i>>8&255,255&i,s>>24,s>>16&255,s>>8&255,255&s,n>>24,n>>16&255,n>>8&255,255&n,85,196,0,0]))},t.mdia=function(i){return t.box(t.types.mdia,t.mdhd(i.timescale,i.duration),t.hdlr(i.type),t.minf(i))},t.mfhd=function(i){return t.box(t.types.mfhd,new Uint8Array([0,0,0,0,i>>24,i>>16&255,i>>8&255,255&i]))},t.minf=function(i){return"audio"===i.type?t.box(t.types.minf,t.box(t.types.smhd,t.SMHD),t.DINF,t.stbl(i)):t.box(t.types.minf,t.box(t.types.vmhd,t.VMHD),t.DINF,t.stbl(i))},t.moof=function(i,e,s){return t.box(t.types.moof,t.mfhd(i),t.traf(s,e))},t.moov=function(i){for(var e=i.length,s=[];e--;)s[e]=t.trak(i[e]);return t.box.apply(null,[t.types.moov,t.mvhd(i[0].timescale,i[0].duration)].concat(s).concat(t.mvex(i)))},t.mvex=function(i){for(var e=i.length,s=[];e--;)s[e]=t.trex(i[e]);return t.box.apply(null,[t.types.mvex].concat(s))},t.mvhd=function(i,e){e*=i;var s=Math.floor(e/(P+1)),n=Math.floor(e%(P+1)),r=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,i>>24&255,i>>16&255,i>>8&255,255&i,s>>24,s>>16&255,s>>8&255,255&s,n>>24,n>>16&255,n>>8&255,255&n,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return t.box(t.types.mvhd,r)},t.sdtp=function(i){var e,s,n=i.samples||[],r=new Uint8Array(4+n.length);for(s=0;s<n.length;s++)e=n[s].flags,r[s+4]=e.dependsOn<<4|e.isDependedOn<<2|e.hasRedundancy;return t.box(t.types.sdtp,r)},t.stbl=function(i){return t.box(t.types.stbl,t.stsd(i),t.box(t.types.stts,t.STTS),t.box(t.types.stsc,t.STSC),t.box(t.types.stsz,t.STSZ),t.box(t.types.stco,t.STCO))},t.avc1=function(i){var e,s,n,r=[],a=[];for(e=0;e<i.sps.length;e++)n=(s=i.sps[e]).byteLength,r.push(n>>>8&255),r.push(255&n),r=r.concat(Array.prototype.slice.call(s));for(e=0;e<i.pps.length;e++)n=(s=i.pps[e]).byteLength,a.push(n>>>8&255),a.push(255&n),a=a.concat(Array.prototype.slice.call(s));var h=t.box(t.types.avcC,new Uint8Array([1,r[3],r[4],r[5],255,224|i.sps.length].concat(r).concat([i.pps.length]).concat(a))),o=i.width,c=i.height,l=i.pixelRatio[0],u=i.pixelRatio[1];return t.box(t.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,o>>8&255,255&o,c>>8&255,255&c,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),h,t.box(t.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),t.box(t.types.pasp,new Uint8Array([l>>24,l>>16&255,l>>8&255,255&l,u>>24,u>>16&255,u>>8&255,255&u])))},t.esds=function(t){var i=t.config.length;return new Uint8Array([0,0,0,0,3,23+i,0,1,0,4,15+i,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([i]).concat(t.config).concat([6,1,2]))},t.mp4a=function(i){var e=i.samplerate;return t.box(t.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,i.channelCount,0,16,0,0,0,0,e>>8&255,255&e,0,0]),t.box(t.types.esds,t.esds(i)))},t.mp3=function(i){var e=i.samplerate;return t.box(t.types[".mp3"],new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,i.channelCount,0,16,0,0,0,0,e>>8&255,255&e,0,0]))},t.stsd=function(i){return"audio"===i.type?i.isAAC||"mp3"!==i.codec?t.box(t.types.stsd,t.STSD,t.mp4a(i)):t.box(t.types.stsd,t.STSD,t.mp3(i)):t.box(t.types.stsd,t.STSD,t.avc1(i))},t.tkhd=function(i){var e=i.id,s=i.duration*i.timescale,n=i.width,r=i.height,a=Math.floor(s/(P+1)),h=Math.floor(s%(P+1));return t.box(t.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,255&e,0,0,0,0,a>>24,a>>16&255,a>>8&255,255&a,h>>24,h>>16&255,h>>8&255,255&h,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,n>>8&255,255&n,0,0,r>>8&255,255&r,0,0]))},t.traf=function(i,e){var s=t.sdtp(i),n=i.id,r=Math.floor(e/(P+1)),a=Math.floor(e%(P+1));return t.box(t.types.traf,t.box(t.types.tfhd,new Uint8Array([0,0,0,0,n>>24,n>>16&255,n>>8&255,255&n])),t.box(t.types.tfdt,new Uint8Array([1,0,0,0,r>>24,r>>16&255,r>>8&255,255&r,a>>24,a>>16&255,a>>8&255,255&a])),t.trun(i,s.length+16+20+8+16+8+8),s)},t.trak=function(i){return i.duration=i.duration||4294967295,t.box(t.types.trak,t.tkhd(i),t.mdia(i))},t.trex=function(i){var e=i.id;return t.box(t.types.trex,new Uint8Array([0,0,0,0,e>>24,e>>16&255,e>>8&255,255&e,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))},t.trun=function(i,e){var s,n,r,a,h,o,c=i.samples||[],l=c.length,u=12+16*l,d=new Uint8Array(u);for(e+=8+u,d.set([0,0,15,1,l>>>24&255,l>>>16&255,l>>>8&255,255&l,e>>>24&255,e>>>16&255,e>>>8&255,255&e],0),s=0;s<l;s++)r=(n=c[s]).duration,a=n.size,h=n.flags,o=n.cts,d.set([r>>>24&255,r>>>16&255,r>>>8&255,255&r,a>>>24&255,a>>>16&255,a>>>8&255,255&a,h.isLeading<<2|h.dependsOn,h.isDependedOn<<6|h.hasRedundancy<<4|h.paddingValue<<1|h.isNonSync,61440&h.degradPrio,15&h.degradPrio,o>>>24&255,o>>>16&255,o>>>8&255,255&o],12+16*s);return t.box(t.types.trun,d)},t.initSegment=function(i){t.types||t.init();var e,s=t.moov(i);return(e=new Uint8Array(t.FTYP.byteLength+s.byteLength)).set(t.FTYP),e.set(s,t.FTYP.byteLength),e},t}();function E(t,i,e,s){void 0===e&&(e=1),void 0===s&&(s=!1);var n=t*i*e;return s?Math.round(n):n}function L(t,i){return void 0===i&&(i=!1),E(t,1e3,1/9e4,i)}function R(t,i){return void 0===i&&(i=1),E(t,9e4,1/i)}var B,D=R(10),F=R(.2),$=function(){function t(t,i,e,s){this.observer=t,this.config=i,this.typeSupported=e;var n=navigator.userAgent;this.isSafari=s&&s.indexOf("Apple")>-1&&n&&!n.match("CriOS"),this.ISGenerated=!1}var i=t.prototype;return i.destroy=function(){},i.resetTimeStamp=function(t){this.jt=this.At=t},i.resetInitSegment=function(){this.ISGenerated=!1},i.remux=function(t,i,e,n,r,a,h){if(this.ISGenerated||this.generateIS(t,i,r),this.ISGenerated){var c=t.samples.length,l=i.samples.length,u=r,d=r;if(c&&l){var f=(t.samples[0].pts-i.samples[0].pts)/i.inputTimeScale;u+=Math.max(0,f),d+=Math.max(0,-f)}if(c){t.timescale||(o.b.warn("regenerate InitSegment as audio detected"),this.generateIS(t,i,r));var p,b=this.remuxAudio(t,u,a,h);l&&(b&&(p=b.endPTS-b.startPTS),i.timescale||(o.b.warn("regenerate InitSegment as video detected"),this.generateIS(t,i,r)),this.remuxVideo(i,d,a,p,h))}else if(l){var v=this.remuxVideo(i,d,a,0,h);v&&t.codec&&this.remuxEmptyAudio(t,u,a,v)}}e.samples.length&&this.remuxID3(e,r),n.samples.length&&this.remuxText(n,r),this.observer.trigger(s.a.FRAG_PARSED)},i.generateIS=function(t,i,e){var r,a,h=this.observer,c=t.samples,l=i.samples,u=this.typeSupported,d="audio/mp4",f={},p={tracks:f},b=void 0===this.jt;if(b&&(r=a=1/0),t.config&&c.length&&(t.timescale=t.samplerate,o.b.log("audio sampling rate : "+t.samplerate),t.isAAC||(u.mpeg?(d="audio/mpeg",t.codec=""):u.mp3&&(t.codec="mp3")),f.audio={container:d,codec:t.codec,initSegment:!t.isAAC&&u.mpeg?new Uint8Array:M.initSegment([t]),metadata:{channelCount:t.channelCount}},b&&(r=a=c[0].pts-t.inputTimeScale*e)),i.sps&&i.pps&&l.length){var v=i.inputTimeScale;i.timescale=v,f.video={container:"video/mp4",codec:i.codec,initSegment:M.initSegment([i]),metadata:{width:i.width,height:i.height}},b&&(r=Math.min(r,l[0].pts-v*e),a=Math.min(a,l[0].dts-v*e),this.observer.trigger(s.a.INIT_PTS_FOUND,{initPTS:r}))}Object.keys(f).length?(h.trigger(s.a.FRAG_PARSING_INIT_SEGMENT,p),this.ISGenerated=!0,b&&(this.jt=r,this.At=a)):h.trigger(s.a.ERROR,{type:n.b.MEDIA_ERROR,details:n.a.FRAG_PARSING_ERROR,fatal:!1,reason:"no audio/video samples found"})},i.remuxVideo=function(t,i,e,r,a){var h,c,l,u,d,f,p,b=8,v=t.timescale,m=t.samples,g=[],y=m.length,w=this.Pt,x=this.jt,k=this.nextAvcDts,S=this.isSafari;if(0!==y){S&&(e|=m.length&&k&&(a&&Math.abs(i-k/v)<.1||Math.abs(m[0].pts-k-x)<v/5)),e||(k=i*v),m.forEach(function(t){t.pts=w(t.pts-x,k),t.dts=w(t.dts-x,k)}),m.sort(function(t,i){var e=t.dts-i.dts,s=t.pts-i.pts;return e||s||t.id-i.id});var O=m.reduce(function(t,i){return Math.max(Math.min(t,i.pts-i.dts),-1*F)},0);if(O<0){o.b.warn("PTS < DTS detected in video samples, shifting DTS by "+L(O,!0)+" ms to overcome this issue");for(var _=0;_<m.length;_++)m[_].dts+=O}var j=m[0];d=Math.max(j.dts,0),u=Math.max(j.pts,0);var A=d-k;e&&A&&(A>1?o.b.log("AVC: "+L(A,!0)+" ms hole between fragments detected,filling it"):A<-1&&o.b.log("AVC: "+L(-A,!0)+" ms overlapping between fragments detected"),d=k,m[0].dts=d,u=Math.max(u-A,k),m[0].pts=u,o.b.log("Video: PTS/DTS adjusted: "+L(u,!0)+"/"+L(d,!0)+", delta: "+L(A,!0)+" ms")),j=m[m.length-1],p=Math.max(j.dts,0),f=Math.max(j.pts,0,p),S&&(h=Math.round((p-d)/(m.length-1)));for(var I=0,T=0,C=0;C<y;C++){for(var P=m[C],E=P.units,R=E.length,B=0,D=0;D<R;D++)B+=E[D].data.length;T+=B,I+=R,P.length=B,P.dts=S?d+C*h:Math.max(P.dts,d),P.pts=Math.max(P.pts,P.dts)}var $=T+4*I+8;try{c=new Uint8Array($)}catch(t){return void this.observer.trigger(s.a.ERROR,{type:n.b.MUX_ERROR,details:n.a.REMUX_ALLOC_ERROR,fatal:!1,bytes:$,reason:"fail allocating video mdat "+$})}var U=new DataView(c.buffer);U.setUint32(0,$),c.set(M.types.mdat,4);for(var V=0;V<y;V++){for(var N=m[V],H=N.units,q=0,z=void 0,W=0,G=H.length;W<G;W++){var J=H[W],Q=J.data,X=J.data.byteLength;U.setUint32(b,X),b+=4,c.set(Q,b),b+=X,q+=4+X}if(S)z=Math.max(0,h*Math.round((N.pts-N.dts)/h));else{if(V<y-1)h=m[V+1].dts-N.dts;else{var Y=this.config,K=N.dts-m[V>0?V-1:V].dts;if(Y.stretchShortVideoTrack){var Z=Y.maxBufferHole,tt=Math.floor(Z*v),it=(r?u+r*v:this.nextAudioPts)-N.pts;it>tt?((h=it-K)<0&&(h=K),o.b.log("It is approximately "+L(it,!1)+" ms to the next segment; using duration "+L(h,!1)+" ms for the last video frame.")):h=K}else h=K}z=Math.round(N.pts-N.dts)}g.push({size:q,duration:h,cts:z,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:N.key?2:1,isNonSync:N.key?0:1}})}this.nextAvcDts=p+h;var et=t.dropped;if(t.nbNalu=0,t.dropped=0,g.length&&navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var st=g[0].flags;st.dependsOn=2,st.isNonSync=0}t.samples=g,l=M.moof(t.sequenceNumber++,d,t),t.samples=[];var nt={data1:l,data2:c,startPTS:u/v,endPTS:(f+h)/v,startDTS:d/v,endDTS:this.nextAvcDts/v,type:"video",hasAudio:!1,hasVideo:!0,nb:g.length,dropped:et};return this.observer.trigger(s.a.FRAG_PARSING_DATA,nt),nt}},i.remuxAudio=function(t,i,e,r){var a,h,c,l,u,d,f=t.inputTimeScale,p=t.timescale,b=f/p,v=(t.isAAC?1024:1152)*b,m=this.Pt,g=this.jt,y=!t.isAAC&&this.typeSupported.mpeg,w=y?0:8,x=t.samples,k=[],S=this.nextAudioPts;if(e|=x.length&&S&&(r&&Math.abs(i-S/f)<.1||Math.abs(x[0].pts-S-g)<20*v),x.forEach(function(t){t.pts=t.dts=m(t.pts-g,i*f)}),0!==(x=x.filter(function(t){return t.pts>=0})).length){if(e||(S=r?i*f:x[0].pts),t.isAAC)for(var O=this.config.maxAudioFramesDrift,_=0,j=S;_<x.length;){var A,I=x[_];if((A=I.pts-j)<=-O*v)o.b.warn("Dropping 1 audio frame @ "+L(j,!0)+" ms due to "+L(A,!0)+" ms overlap."),x.splice(_,1);else if(A>=O*v&&A<D&&j){var T=Math.round(A/v);o.b.warn("Injecting "+T+" audio frames @ "+L(j,!0)+" ms due to "+L(j,!0)+" ms gap.");for(var P=0;P<T;P++){var E=Math.max(j,0);(h=C.getSilentFrame(t.manifestCodec||t.codec,t.channelCount))||(o.b.log("Unable to get silent frame for given audio codec; duplicating last frame instead."),h=I.unit.subarray()),x.splice(_,0,{unit:h,pts:E,dts:E}),j+=v,_++}I.pts=I.dts=j,j+=v,_++}else Math.abs(A),I.pts=I.dts=j,j+=v,_++}for(var R=x.length,B=0;R--;)B+=x[R].unit.byteLength;for(var F=0,$=x.length;F<$;F++){var U=x[F],V=U.unit,N=U.pts;if(void 0!==d)a.duration=Math.round((N-d)/b);else{var H=N-S,q=0;if(e&&t.isAAC&&H){if(H>0&&H<D)q=Math.round((N-S)/v),o.b.log(L(H,!0)+" ms hole between AAC samples detected,filling it"),q>0&&((h=C.getSilentFrame(t.manifestCodec||t.codec,t.channelCount))||(h=V.subarray()),B+=q*h.length);else if(H<-12){o.b.log("drop overlapping AAC sample, expected/parsed/delta: "+L(S,!0)+" ms / "+L(N,!0)+" ms / "+L(-H,!0)+" ms"),B-=V.byteLength;continue}N=S}if(u=N,!(B>0))return;B+=w;try{c=new Uint8Array(B)}catch(t){return void this.observer.trigger(s.a.ERROR,{type:n.b.MUX_ERROR,details:n.a.REMUX_ALLOC_ERROR,fatal:!1,bytes:B,reason:"fail allocating audio mdat "+B})}y||(new DataView(c.buffer).setUint32(0,B),c.set(M.types.mdat,4));for(var z=0;z<q;z++)(h=C.getSilentFrame(t.manifestCodec||t.codec,t.channelCount))||(o.b.log("Unable to get silent frame for given audio codec; duplicating this frame instead."),h=V.subarray()),c.set(h,w),w+=h.byteLength,a={size:h.byteLength,cts:0,duration:1024,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},k.push(a)}c.set(V,w);var W=V.byteLength;w+=W,a={size:W,cts:0,duration:0,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},k.push(a),d=N}var G=0;if((R=k.length)>=2&&(G=k[R-2].duration,a.duration=G),R){this.nextAudioPts=S=d+b*G,t.samples=k,l=y?new Uint8Array:M.moof(t.sequenceNumber++,u/b,t),t.samples=[];var J=u/f,Q=S/f,X={data1:l,data2:c,startPTS:J,endPTS:Q,startDTS:J,endDTS:Q,type:"audio",hasAudio:!0,hasVideo:!1,nb:R};return this.observer.trigger(s.a.FRAG_PARSING_DATA,X),X}return null}},i.remuxEmptyAudio=function(t,i,e,s){var n=t.inputTimeScale,r=n/(t.samplerate?t.samplerate:n),a=this.nextAudioPts,h=(void 0!==a?a:s.startDTS*n)+this.At,c=s.endDTS*n+this.At,l=1024*r,u=Math.ceil((c-h)/l),d=C.getSilentFrame(t.manifestCodec||t.codec,t.channelCount);if(o.b.warn("remux empty Audio"),d){for(var f=[],p=0;p<u;p++){var b=h+p*l;f.push({unit:d,pts:b,dts:b})}t.samples=f,this.remuxAudio(t,i,e)}else o.b.trace("Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec!")},i.remuxID3=function(t){var i,e=t.samples.length,n=t.inputTimeScale,r=this.jt,a=this.At;if(e){for(var h=0;h<e;h++)(i=t.samples[h]).pts=(i.pts-r)/n,i.dts=(i.dts-a)/n;this.observer.trigger(s.a.FRAG_PARSING_METADATA,{samples:t.samples})}t.samples=[]},i.remuxText=function(t){t.samples.sort(function(t,i){return t.pts-i.pts});var i,e=t.samples.length,n=t.inputTimeScale,r=this.jt;if(e){for(var a=0;a<e;a++)(i=t.samples[a]).pts=(i.pts-r)/n;this.observer.trigger(s.a.FRAG_PARSING_USERDATA,{samples:t.samples})}t.samples=[]},i.Pt=function(t,i){var e;if(void 0===i)return t;for(e=i<t?-8589934592:8589934592;Math.abs(t-i)>4294967296;)t+=e;return t},t}(),U=function(){function t(t){this.observer=t}var i=t.prototype;return i.destroy=function(){},i.resetTimeStamp=function(){},i.resetInitSegment=function(){},i.remux=function(t,i,e,n,r,a,h,o){var c=this.observer,l="";t&&(l+="audio"),i&&(l+="video"),c.trigger(s.a.FRAG_PARSING_DATA,{data1:o,startPTS:r,startDTS:r,type:l,hasAudio:!!t,hasVideo:!!i,nb:1,dropped:0}),c.trigger(s.a.FRAG_PARSED)},t}(),V=Object(c.a)();try{B=V.performance.now.bind(V.performance)}catch(t){o.b.debug("Unable to use Performance API on this environment"),B=V.Date.now}var N=function(){function t(t,i,e,s){this.observer=t,this.typeSupported=i,this.config=e,this.vendor=s}var i=t.prototype;return i.destroy=function(){var t=this.demuxer;t&&t.destroy()},i.push=function(t,i,e,n,r,a,h,o,c,u,d,f){var p=this;if(t.byteLength>0&&null!=i&&null!=i.key&&"AES-128"===i.method){var b=this.decrypter;null==b&&(b=this.decrypter=new l(this.observer,this.config));var v=B();b.decrypt(t,i.key.buffer,i.iv.buffer,function(t){var l=B();p.observer.trigger(s.a.FRAG_DECRYPTED,{stats:{tstart:v,tdecrypt:l}}),p.pushDecrypted(new Uint8Array(t),i,new Uint8Array(e),n,r,a,h,o,c,u,d,f)})}else this.pushDecrypted(new Uint8Array(t),i,new Uint8Array(e),n,r,a,h,o,c,u,d,f)},i.pushDecrypted=function(t,i,e,r,a,h,o,c,l,u,d,f){var p=this.demuxer;if(!p||(o||c)&&!this.probe(t)){for(var b=this.observer,v=this.typeSupported,m=this.config,g=[{demux:I,remux:$},{demux:k.a,remux:U},{demux:x,remux:$},{demux:T,remux:$}],y=0,w=g.length;y<w;y++){var S=g[y],O=S.demux.probe;if(O(t)){var _=this.remuxer=new S.remux(b,m,v,this.vendor);p=new S.demux(b,_,m,v),this.probe=O;break}}if(!p)return void b.trigger(s.a.ERROR,{type:n.b.MEDIA_ERROR,details:n.a.FRAG_PARSING_ERROR,fatal:!0,reason:"no demux matching with content found"});this.demuxer=p}var j=this.remuxer;(o||c)&&(p.resetInitSegment(e,r,a,u),j.resetInitSegment()),o&&(p.resetTimeStamp(f),j.resetTimeStamp(f)),"function"==typeof p.setDecryptData&&p.setDecryptData(i),p.append(t,h,l,d)},t}();i.a=N},function(t,i,e){"use strict";var s=e(0),n=e(1),r=Math.pow(2,32)-1,a=function(){function t(t,i){this.observer=t,this.remuxer=i}var i=t.prototype;return i.resetTimeStamp=function(t){this.initPTS=t},i.resetInitSegment=function(i,e,s,r){if(i&&i.byteLength){var a=this.initData=t.parseInitSegment(i);null==e&&(e="mp4a.40.5"),null==s&&(s="avc1.42e01e");var h={};a.audio&&a.video?h.audiovideo={container:"video/mp4",codec:e+","+s,initSegment:r?i:null}:(a.audio&&(h.audio={container:"audio/mp4",codec:e,initSegment:r?i:null}),a.video&&(h.video={container:"video/mp4",codec:s,initSegment:r?i:null})),this.observer.trigger(n.a.FRAG_PARSING_INIT_SEGMENT,{tracks:h})}else e&&(this.audioCodec=e),s&&(this.videoCodec=s)},t.probe=function(i){return t.findBox({data:i,start:0,end:Math.min(i.length,16384)},["moof"]).length>0},t.bin2str=function(t){return String.fromCharCode.apply(null,t)},t.readUint16=function(t,i){t.data&&(i+=t.start,t=t.data);var e=t[i]<<8|t[i+1];return e<0?65536+e:e},t.readUint32=function(t,i){t.data&&(i+=t.start,t=t.data);var e=t[i]<<24|t[i+1]<<16|t[i+2]<<8|t[i+3];return e<0?4294967296+e:e},t.writeUint32=function(t,i,e){t.data&&(i+=t.start,t=t.data),t[i]=e>>24,t[i+1]=e>>16&255,t[i+2]=e>>8&255,t[i+3]=255&e},t.findBox=function(i,e){var s,n,r,a,h,o,c=[];if(i.data?(h=i.start,r=i.end,i=i.data):(h=0,r=i.byteLength),!e.length)return null;for(s=h;s<r;)o=(n=t.readUint32(i,s))>1?s+n:r,t.bin2str(i.subarray(s+4,s+8))===e[0]&&(1===e.length?c.push({data:i,start:s+8,end:o}):(a=t.findBox({data:i,start:s+8,end:o},e.slice(1))).length&&(c=c.concat(a))),s=o;return c},t.parseSegmentIndex=function(i){var e,s=t.findBox(i,["moov"])[0],n=s?s.end:null,r=0,a=t.findBox(i,["sidx"]);if(!a||!a[0])return null;e=[];var h=(a=a[0]).data[0];r=0===h?8:16;var o=t.readUint32(a,r);r+=4,r+=0===h?8:16,r+=2;var c=a.end+0,l=t.readUint16(a,r);r+=2;for(var u=0;u<l;u++){var d=r,f=t.readUint32(a,d);d+=4;var p=2147483647&f;if(1==(2147483648&f)>>>31)return void console.warn("SIDX has hierarchical references (not supported)");var b=t.readUint32(a,d);d+=4,e.push({referenceSize:p,subsegmentDuration:b,info:{duration:b/o,start:c,end:c+p-1}}),c+=p,r=d+=4}return{earliestPresentationTime:0,timescale:o,version:h,referencesCount:l,references:e,moovEndOffset:n}},t.parseInitSegment=function(i){var e=[];return t.findBox(i,["moov","trak"]).forEach(function(i){var n=t.findBox(i,["tkhd"])[0];if(n){var r=n.data[n.start],a=0===r?12:20,h=t.readUint32(n,a),o=t.findBox(i,["mdia","mdhd"])[0];if(o){a=0===(r=o.data[o.start])?12:20;var c=t.readUint32(o,a),l=t.findBox(i,["mdia","hdlr"])[0];if(l){var u={soun:"audio",vide:"video"}[t.bin2str(l.data.subarray(l.start+8,l.start+12))];if(u){var d=t.findBox(i,["mdia","minf","stbl","stsd"]);if(d.length){d=d[0];var f=t.bin2str(d.data.subarray(d.start+12,d.start+16));s.b.log("MP4Demuxer:"+u+":"+f+" found")}e[h]={timescale:c,type:u},e[u]={timescale:c,id:h}}}}}}),e},t.getStartDTS=function(i,e){var s,n,r;return s=t.findBox(e,["moof","traf"]),n=[].concat.apply([],s.map(function(e){return t.findBox(e,["tfhd"]).map(function(s){var n,r;return n=t.readUint32(s,4),r=i[n].timescale||9e4,t.findBox(e,["tfdt"]).map(function(i){var e,s;return e=i.data[i.start],s=t.readUint32(i,4),1===e&&(s*=Math.pow(2,32),s+=t.readUint32(i,8)),s})[0]/r})})),r=Math.min.apply(null,n),isFinite(r)?r:0},t.offsetStartDTS=function(i,e,s){t.findBox(e,["moof","traf"]).map(function(e){return t.findBox(e,["tfhd"]).map(function(n){var a=t.readUint32(n,4),h=i[a].timescale||9e4;t.findBox(e,["tfdt"]).map(function(i){var e=i.data[i.start],n=t.readUint32(i,4);if(0===e)t.writeUint32(i,4,n-s*h);else{n*=Math.pow(2,32),n+=t.readUint32(i,8),n-=s*h,n=Math.max(n,0);var a=Math.floor(n/(r+1)),o=Math.floor(n%(r+1));t.writeUint32(i,4,a),t.writeUint32(i,8,o)}})})})},i.append=function(i,e,s,r){var a=this.initData;a||(this.resetInitSegment(i,this.audioCodec,this.videoCodec,!1),a=this.initData);var h,o=this.initPTS;if(void 0===o){var c=t.getStartDTS(a,i);this.initPTS=o=c-e,this.observer.trigger(n.a.INIT_PTS_FOUND,{initPTS:o})}t.offsetStartDTS(a,i,o),h=t.getStartDTS(a,i),this.remuxer.remux(a.audio,a.video,null,null,h,s,r,i)},i.destroy=function(){},t}();i.a=a},function(t,i,e){function s(t){var i={};function e(s){if(i[s])return i[s].exports;var n=i[s]={i:s,l:!1,exports:{}};return t[s].call(n.exports,n,n.exports,e),n.l=!0,n.exports}e.m=t,e.c=i,e.i=function(t){return t},e.d=function(t,i,s){e.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:s})},e.r=function(t){Object.defineProperty(t,"_",{value:!0})},e.n=function(t){var i=t&&t._?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},e.p="/",e.oe=function(t){throw console.error(t),t};var s=e(e.s=ENTRY_MODULE);return s.default||s}var n="\\(\\s*(/\\*.*?\\*/)?\\s*.*?([\\.|\\-|\\+|\\w|/|@]+).*?\\)";function r(t){return(t+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function a(t,i,s){var a={};a[s]=[];var h=i.toString(),o=h.match(/^function\s?\w*\(\w+,\s*\w+,\s*(\w+)\)/);if(!o)return a;for(var c,l=o[1],u=new RegExp("(\\\\n|\\W)"+r(l)+n,"g");c=u.exec(h);)"dll-reference"!==c[3]&&a[s].push(c[3]);for(u=new RegExp("\\("+r(l)+'\\("(dll-reference\\s([\\.|\\-|\\+|\\w|/|@]+))"\\)\\)'+n,"g");c=u.exec(h);)t[c[2]]||(a[s].push(c[1]),t[c[2]]=e(c[1]).m),a[c[2]]=a[c[2]]||[],a[c[2]].push(c[4]);for(var d,f=Object.keys(a),p=0;p<f.length;p++)for(var b=0;b<a[f[p]].length;b++)d=a[f[p]][b],isNaN(1*d)||(a[f[p]][b]=1*a[f[p]][b]);return a}function h(t){return Object.keys(t).reduce(function(i,e){return i||t[e].length>0},!1)}t.exports=function(t,i){i=i||{};var n={main:e.m},r=i.all?{main:Object.keys(n.main)}:function(t,i){for(var e={main:[i]},s={main:[]},n={main:{}};h(e);)for(var r=Object.keys(e),o=0;o<r.length;o++){var c=r[o],l=e[c].pop();if(n[c]=n[c]||{},!n[c][l]&&t[c][l]){n[c][l]=!0,s[c]=s[c]||[],s[c].push(l);for(var u=a(t,t[c][l],c),d=Object.keys(u),f=0;f<d.length;f++)e[d[f]]=e[d[f]]||[],e[d[f]]=e[d[f]].concat(u[d[f]])}}return s}(n,t),o="";Object.keys(r).filter(function(t){return"main"!==t}).forEach(function(t){for(var i=0;r[t][i];)i++;r[t].push(i),n[t][i]="(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })",o=o+"var "+t+" = ("+s.toString().replace("ENTRY_MODULE",JSON.stringify(i))+")({"+r[t].map(function(i){return JSON.stringify(i)+": "+n[t][i].toString()}).join(",")+"});\n"}),o=o+"new (("+s.toString().replace("ENTRY_MODULE",JSON.stringify(t))+")({"+r.main.map(function(t){return JSON.stringify(t)+": "+n.main[t].toString()}).join(",")+"}))(self);";var c=new window.Blob([o],{type:"text/javascript"});if(i.bare)return c;var l=(window.URL||window.webkitURL||window.mozURL||window.msURL).createObjectURL(c),u=new window.Worker(l);return u.objectURL=l,u}},function(t,i,e){"use strict";e.r(i);var s=e(9),n=e(1),r=e(0),a=e(8);i.default=function(t){var i=new a.EventEmitter;i.trigger=function(t){for(var e=arguments.length,s=new Array(e>1?e-1:0),n=1;n<e;n++)s[n-1]=arguments[n];i.emit.apply(i,[t,t].concat(s))},i.off=function(t){for(var e=arguments.length,s=new Array(e>1?e-1:0),n=1;n<e;n++)s[n-1]=arguments[n];i.removeListener.apply(i,[t].concat(s))};var e=function(i,e){t.postMessage({event:i,data:e})};t.addEventListener("message",function(n){var a=n.data;switch(a.cmd){case"init":var h=JSON.parse(a.config);t.demuxer=new s.a(i,a.typeSupported,h,a.vendor),Object(r.a)(h.debug),e("init",null);break;case"demux":t.demuxer.push(a.data,a.decryptdata,a.initSegment,a.audioCodec,a.videoCodec,a.timeOffset,a.discontinuity,a.trackSwitch,a.contiguous,a.duration,a.accurateTimeOffset,a.defaultInitPTS)}}),i.on(n.a.FRAG_DECRYPTED,e),i.on(n.a.FRAG_PARSING_INIT_SEGMENT,e),i.on(n.a.FRAG_PARSED,e),i.on(n.a.ERROR,e),i.on(n.a.FRAG_PARSING_METADATA,e),i.on(n.a.FRAG_PARSING_USERDATA,e),i.on(n.a.INIT_PTS_FOUND,e),i.on(n.a.FRAG_PARSING_DATA,function(i,e){var s=[],n={event:i,data:e};e.data1&&(n.data1=e.data1.buffer,s.push(e.data1.buffer),delete e.data1),e.data2&&(n.data2=e.data2.buffer,s.push(e.data2.buffer),delete e.data2),t.postMessage(n,s)})}},function(t,i,e){"use strict";e.r(i);var s,n,r=e(7),a=e(2),h=e(3),o=e(1),c=e(0),l={hlsEventGeneric:!0,hlsHandlerDestroying:!0,hlsHandlerDestroyed:!0},u=function(){function t(t){this.hls=void 0,this.handledEvents=void 0,this.useGenericHandler=void 0,this.hls=t,this.onEvent=this.onEvent.bind(this);for(var i=arguments.length,e=new Array(i>1?i-1:0),s=1;s<i;s++)e[s-1]=arguments[s];this.handledEvents=e,this.useGenericHandler=!0,this.registerListeners()}var i=t.prototype;return i.destroy=function(){this.onHandlerDestroying(),this.unregisterListeners(),this.onHandlerDestroyed()},i.onHandlerDestroying=function(){},i.onHandlerDestroyed=function(){},i.isEventHandler=function(){return"object"==typeof this.handledEvents&&this.handledEvents.length&&"function"==typeof this.onEvent},i.registerListeners=function(){this.isEventHandler()&&this.handledEvents.forEach(function(t){if(l[t])throw new Error("Forbidden event-name: "+t);this.hls.on(t,this.onEvent)},this)},i.unregisterListeners=function(){this.isEventHandler()&&this.handledEvents.forEach(function(t){this.hls.off(t,this.onEvent)},this)},i.onEvent=function(t,i){this.onEventGeneric(t,i)},i.onEventGeneric=function(t,i){try{(function(t,i){var e="on"+t.replace("hls","");if("function"!=typeof this[e])throw new Error("Event "+t+" has no generic handler in this "+this.constructor.name+" class (tried "+e+")");return this[e].bind(this,i)}).call(this,t,i).call()}catch(i){c.b.error("An internal error happened while handling event "+t+'. Error message: "'+i.message+'". Here is a stacktrace:',i),this.hls.trigger(o.a.ERROR,{type:a.b.OTHER_ERROR,details:a.a.INTERNAL_EXCEPTION,fatal:!1,event:t,err:i})}},t}();!function(t){t.MANIFEST="manifest",t.LEVEL="level",t.AUDIO_TRACK="audioTrack",t.SUBTITLE_TRACK="subtitleTrack"}(s||(s={})),function(t){t.MAIN="main",t.AUDIO="audio",t.SUBTITLE="subtitle"}(n||(n={}));var d=e(10);function f(t,i){for(var e=0;e<i.length;e++){var s=i[e];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}var p,b=function(){function t(t,i){this.Mt=null,this.baseuri=void 0,this.reluri=void 0,this.method=null,this.key=null,this.iv=null,this.baseuri=t,this.reluri=i}var i,e;return i=t,(e=[{key:"uri",get:function(){return!this.Mt&&this.reluri&&(this.Mt=Object(r.buildAbsoluteURL)(this.baseuri,this.reluri,{alwaysNormalize:!0})),this.Mt}}])&&f(i.prototype,e),t}();function v(t,i){for(var e=0;e<i.length;e++){var s=i[e];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}!function(t){t.AUDIO="audio",t.VIDEO="video"}(p||(p={}));var m=function(){function t(){var t;this.Et=null,this.Lt=null,this.Rt=null,this.Bt=((t={})[p.AUDIO]=!1,t[p.VIDEO]=!1,t),this.deltaPTS=0,this.rawProgramDateTime=null,this.programDateTime=null,this.title=null,this.tagList=[],this.cc=void 0,this.type=void 0,this.relurl=void 0,this.baseurl=void 0,this.duration=void 0,this.start=void 0,this.sn=0,this.urlId=0,this.level=0,this.levelkey=void 0,this.loader=void 0}var i,e,s=t.prototype;return s.setByteRange=function(t,i){var e=t.split("@",2),s=[];1===e.length?s[0]=i?i.byteRangeEndOffset:0:s[0]=parseInt(e[1]),s[1]=parseInt(e[0])+s[0],this.Lt=s},s.addElementaryStream=function(t){this.Bt[t]=!0},s.hasElementaryStream=function(t){return!0===this.Bt[t]},s.createInitializationVector=function(t){for(var i=new Uint8Array(16),e=12;e<16;e++)i[e]=t>>8*(15-e)&255;return i},s.setDecryptDataFromLevelKey=function(t,i){var e=t;return t&&t.method&&t.uri&&!t.iv&&((e=new b(t.baseuri,t.reluri)).method=t.method,e.iv=this.createInitializationVector(i)),e},i=t,(e=[{key:"url",get:function(){return!this.Et&&this.relurl&&(this.Et=Object(r.buildAbsoluteURL)(this.baseurl,this.relurl,{alwaysNormalize:!0})),this.Et},set:function(t){this.Et=t}},{key:"byteRange",get:function(){return this.Lt?this.Lt:[]}},{key:"byteRangeStartOffset",get:function(){return this.byteRange[0]}},{key:"byteRangeEndOffset",get:function(){return this.byteRange[1]}},{key:"decryptdata",get:function(){if(!this.levelkey&&!this.Rt)return null;if(!this.Rt&&this.levelkey){var t=this.sn;"number"!=typeof t&&(this.levelkey&&"AES-128"===this.levelkey.method&&!this.levelkey.iv&&c.b.warn('missing IV for initialization segment with method="'+this.levelkey.method+'" - compliance issue'),t=0),this.Rt=this.setDecryptDataFromLevelKey(this.levelkey,t)}return this.Rt}},{key:"endProgramDateTime",get:function(){if(null===this.programDateTime)return null;if(!Object(h.a)(this.programDateTime))return null;var t=Object(h.a)(this.duration)?this.duration:0;return this.programDateTime+1e3*t}},{key:"encrypted",get:function(){return!(!this.decryptdata||null===this.decryptdata.uri||null!==this.decryptdata.key)}}])&&v(i.prototype,e),t}();function g(t,i){for(var e=0;e<i.length;e++){var s=i[e];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}var y=function(){function t(t){this.endCC=0,this.endSN=0,this.fragments=[],this.initSegment=null,this.live=!0,this.needSidxRanges=!1,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=t,this.version=null}var i,e;return i=t,(e=[{key:"hasProgramDateTime",get:function(){return!(!this.fragments[0]||!Object(h.a)(this.fragments[0].programDateTime))}}])&&g(i.prototype,e),t}(),w=/^(\d+)x(\d+)$/,x=/\s*(.+?)\s*=((?:\".*?\")|.*?)(?:,|$)/g,k=function(){function t(i){for(var e in"string"==typeof i&&(i=t.parseAttrList(i)),i)i.hasOwnProperty(e)&&(this[e]=i[e])}var i=t.prototype;return i.decimalInteger=function(t){var i=parseInt(this[t],10);return i>Number.MAX_SAFE_INTEGER?1/0:i},i.hexadecimalInteger=function(t){if(this[t]){var i=(this[t]||"0x").slice(2);i=(1&i.length?"0":"")+i;for(var e=new Uint8Array(i.length/2),s=0;s<i.length/2;s++)e[s]=parseInt(i.slice(2*s,2*s+2),16);return e}return null},i.hexadecimalIntegerAsNumber=function(t){var i=parseInt(this[t],16);return i>Number.MAX_SAFE_INTEGER?1/0:i},i.decimalFloatingPoint=function(t){return parseFloat(this[t])},i.enumeratedString=function(t){return this[t]},i.decimalResolution=function(t){var i=w.exec(this[t]);if(null!==i)return{width:parseInt(i[1],10),height:parseInt(i[2],10)}},t.parseAttrList=function(t){var i,e={};for(x.lastIndex=0;null!==(i=x.exec(t));){var s=i[2];0===s.indexOf('"')&&s.lastIndexOf('"')===s.length-1&&(s=s.slice(1,-1)),e[i[1]]=s}return e},t}(),S={audio:{a3ds:!0,"ac-3":!0,"ac-4":!0,alac:!0,alaw:!0,dra1:!0,"dts+":!0,"dts-":!0,dtsc:!0,dtse:!0,dtsh:!0,"ec-3":!0,enca:!0,g719:!0,g726:!0,m4ae:!0,mha1:!0,mha2:!0,mhm1:!0,mhm2:!0,mlpa:!0,mp4a:!0,"raw ":!0,Opus:!0,samr:!0,sawb:!0,sawp:!0,sevc:!0,sqcp:!0,ssmv:!0,twos:!0,ulaw:!0},video:{avc1:!0,avc2:!0,avc3:!0,avc4:!0,avcp:!0,drac:!0,dvav:!0,dvhe:!0,encv:!0,hev1:!0,hvc1:!0,mjp2:!0,mp4v:!0,mvc1:!0,mvc2:!0,mvc3:!0,mvc4:!0,resv:!0,rv60:!0,s263:!0,svc1:!0,svc2:!0,"vc-1":!0,vp08:!0,vp09:!0}};function O(t,i){return MediaSource.isTypeSupported((i||"video")+'/mp4;codecs="'+t+'"')}var _=/#EXT-X-STREAM-INF:([^\n\r]*)[\r\n]+([^\r\n]+)/g,j=/#EXT-X-MEDIA:(.*)/g,A=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/|(?!#)([\S+ ?]+)/.source,/|#EXT-X-BYTERANGE:*(.+)/.source,/|#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/|#.*/.source].join(""),"g"),I=/(?:(?:#(EXTM3U))|(?:#EXT-X-(PLAYLIST-TYPE):(.+))|(?:#EXT-X-(MEDIA-SEQUENCE): *(\d+))|(?:#EXT-X-(TARGETDURATION): *(\d+))|(?:#EXT-X-(KEY):(.+))|(?:#EXT-X-(START):(.+))|(?:#EXT-X-(ENDLIST))|(?:#EXT-X-(DISCONTINUITY-SEQ)UENCE:(\d+))|(?:#EXT-X-(DIS)CONTINUITY))|(?:#EXT-X-(VERSION):(\d+))|(?:#EXT-X-(MAP):(.+))|(?:(#)([^:]*):(.*))|(?:(#)(.*))(?:.*)\r?\n?/,T=/\.(mp4|m4s|m4v|m4a)$/i,C=function(){function t(){}return t.findGroup=function(t,i){for(var e=0;e<t.length;e++){var s=t[e];if(s.id===i)return s}},t.convertAVC1ToAVCOTI=function(t){var i,e=t.split(".");return e.length>2?(i=e.shift()+".",i+=parseInt(e.shift()).toString(16),i+=("000"+parseInt(e.shift()).toString(16)).substr(-4)):i=t,i},t.resolve=function(t,i){return r.buildAbsoluteURL(i,t,{alwaysNormalize:!0})},t.parseMasterPlaylist=function(i,e){var s,n=[];function r(t,i){["video","audio"].forEach(function(e){var s=t.filter(function(t){return function(t,i){var e=S[i];return!!e&&!0===e[t.slice(0,4)]}(t,e)});if(s.length){var n=s.filter(function(t){return 0===t.lastIndexOf("avc1",0)||0===t.lastIndexOf("mp4a",0)});i[e+"Codec"]=n.length>0?n[0]:s[0],t=t.filter(function(t){return-1===s.indexOf(t)})}}),i.unknownCodecs=t}for(_.lastIndex=0;null!=(s=_.exec(i));){var a={},h=a.attrs=new k(s[1]);a.url=t.resolve(s[2],e);var o=h.decimalResolution("RESOLUTION");o&&(a.width=o.width,a.height=o.height),a.bitrate=h.decimalInteger("AVERAGE-BANDWIDTH")||h.decimalInteger("BANDWIDTH"),a.name=h.NAME,r([].concat((h.CODECS||"").split(/[ ,]+/)),a),a.videoCodec&&-1!==a.videoCodec.indexOf("avc1")&&(a.videoCodec=t.convertAVC1ToAVCOTI(a.videoCodec)),n.push(a)}return n},t.parseMasterPlaylistMedia=function(i,e,s,n){var r;void 0===n&&(n=[]);var a=[],h=0;for(j.lastIndex=0;null!==(r=j.exec(i));){var o=new k(r[1]);if(o.TYPE===s){var c={id:h++,groupId:o["GROUP-ID"],name:o.NAME||o.LANGUAGE,type:s,default:"YES"===o.DEFAULT,autoselect:"YES"===o.AUTOSELECT,forced:"YES"===o.FORCED,lang:o.LANGUAGE};if(o.URI&&(c.url=t.resolve(o.URI,e)),n.length){var l=t.findGroup(n,c.groupId);c.audioCodec=l?l.codec:n[0].codec}a.push(c)}}return a},t.parseLevelPlaylist=function(t,i,e,s,n){var r,a,o,l=0,u=0,d=new y(i),f=0,p=null,v=new m,g=null;for(A.lastIndex=0;null!==(r=A.exec(t));){var w=r[1];if(w){v.duration=parseFloat(w);var x=(" "+r[2]).slice(1);v.title=x||null,v.tagList.push(x?["INF",w,x]:["INF",w])}else if(r[3]){if(Object(h.a)(v.duration)){var S=l++;v.type=s,v.start=u,o&&(v.levelkey=o),v.sn=S,v.level=e,v.cc=f,v.urlId=n,v.baseurl=i,v.relurl=(" "+r[3]).slice(1),P(v,p),d.fragments.push(v),p=v,u+=v.duration,v=new m}}else if(r[4]){var O=(" "+r[4]).slice(1);p?v.setByteRange(O,p):v.setByteRange(O)}else if(r[5])v.rawProgramDateTime=(" "+r[5]).slice(1),v.tagList.push(["PROGRAM-DATE-TIME",v.rawProgramDateTime]),null===g&&(g=d.fragments.length);else{if(!(r=r[0].match(I))){c.b.warn("No matches on slow regex match for level playlist!");continue}for(a=1;a<r.length&&void 0===r[a];a++);var _=(" "+r[a+1]).slice(1),j=(" "+r[a+2]).slice(1);switch(r[a]){case"#":v.tagList.push(j?[_,j]:[_]);break;case"PLAYLIST-TYPE":d.type=_.toUpperCase();break;case"MEDIA-SEQUENCE":l=d.startSN=parseInt(_);break;case"TARGETDURATION":d.targetduration=parseFloat(_);break;case"VERSION":d.version=parseInt(_);break;case"EXTM3U":break;case"ENDLIST":d.live=!1;break;case"DIS":f++,v.tagList.push(["DIS"]);break;case"DISCONTINUITY-SEQ":f=parseInt(_);break;case"KEY":var C=new k(_),M=C.enumeratedString("METHOD"),E=C.URI,L=C.hexadecimalInteger("IV");M&&(o=new b(i,E),E&&["AES-128","SAMPLE-AES","SAMPLE-AES-CENC"].indexOf(M)>=0&&(o.method=M,o.key=null,o.iv=L));break;case"START":var R=new k(_).decimalFloatingPoint("TIME-OFFSET");Object(h.a)(R)&&(d.startTimeOffset=R);break;case"MAP":var B=new k(_);v.relurl=B.URI,B.BYTERANGE&&v.setByteRange(B.BYTERANGE),v.baseurl=i,v.level=e,v.type=s,v.sn="initSegment",d.initSegment=v,(v=new m).rawProgramDateTime=d.initSegment.rawProgramDateTime;break;default:c.b.warn("line parsed but not handled: "+r)}}}return(v=p)&&!v.relurl&&(d.fragments.pop(),u-=v.duration),d.totalduration=u,d.averagetargetduration=u/d.fragments.length,d.endSN=l-1,d.startCC=d.fragments[0]?d.fragments[0].cc:0,d.endCC=f,!d.initSegment&&d.fragments.length&&d.fragments.every(function(t){return T.test(t.relurl)})&&(c.b.warn("MP4 fragments found but no init segment (probably no MAP, incomplete M3U8), trying to fetch SIDX"),(v=new m).relurl=d.fragments[0].relurl,v.baseurl=i,v.level=e,v.type=s,v.sn="initSegment",d.initSegment=v,d.needSidxRanges=!0),g&&function(t,i){for(var e=t[i],s=i-1;s>=0;s--){var n=t[s];n.programDateTime=e.programDateTime-1e3*n.duration,e=n}}(d.fragments,g),d},t}();function P(t,i){t.rawProgramDateTime?t.programDateTime=Date.parse(t.rawProgramDateTime):i&&i.programDateTime&&(t.programDateTime=i.endProgramDateTime),Object(h.a)(t.programDateTime)||(t.programDateTime=null,t.rawProgramDateTime=null)}var M=window.performance,E=function(t){var i,e;function r(i){var e;return(e=t.call(this,i,o.a.MANIFEST_LOADING,o.a.LEVEL_LOADING,o.a.AUDIO_TRACK_LOADING,o.a.SUBTITLE_TRACK_LOADING)||this).loaders={},e}e=t,(i=r).prototype=Object.create(e.prototype),i.prototype.constructor=i,i.__proto__=e,r.canHaveQualityLevels=function(t){return t!==s.AUDIO_TRACK&&t!==s.SUBTITLE_TRACK},r.mapContextToLevelType=function(t){switch(t.type){case s.AUDIO_TRACK:return n.AUDIO;case s.SUBTITLE_TRACK:return n.SUBTITLE;default:return n.MAIN}},r.getResponseUrl=function(t,i){var e=t.url;return void 0!==e&&0!==e.indexOf("data:")||(e=i.url),e};var l=r.prototype;return l.createInternalLoader=function(t){var i=this.hls.config,e=i.pLoader,s=i.loader,n=new(e||s)(i);return t.loader=n,this.loaders[t.type]=n,n},l.getInternalLoader=function(t){return this.loaders[t.type]},l.resetInternalLoader=function(t){this.loaders[t]&&delete this.loaders[t]},l.destroyInternalLoaders=function(){for(var t in this.loaders){var i=this.loaders[t];i&&i.destroy(),this.resetInternalLoader(t)}},l.destroy=function(){this.destroyInternalLoaders(),t.prototype.destroy.call(this)},l.onManifestLoading=function(t){this.load({url:t.url,type:s.MANIFEST,level:0,id:null,responseType:"text"})},l.onLevelLoading=function(t){this.load({url:t.url,type:s.LEVEL,level:t.level,id:t.id,responseType:"text"})},l.onAudioTrackLoading=function(t){this.load({url:t.url,type:s.AUDIO_TRACK,level:null,id:t.id,responseType:"text"})},l.onSubtitleTrackLoading=function(t){this.load({url:t.url,type:s.SUBTITLE_TRACK,level:null,id:t.id,responseType:"text"})},l.load=function(t){var i=this.hls.config;c.b.debug("Loading playlist of type "+t.type+", level: "+t.level+", id: "+t.id);var e,n,r,a,h=this.getInternalLoader(t);if(h){var o=h.context;if(o&&o.url===t.url)return c.b.trace("playlist request ongoing"),!1;c.b.warn("aborting previous loader for type: "+t.type),h.abort()}switch(t.type){case s.MANIFEST:e=i.manifestLoadingMaxRetry,n=i.manifestLoadingTimeOut,r=i.manifestLoadingRetryDelay,a=i.manifestLoadingMaxRetryTimeout;break;case s.LEVEL:e=0,a=0,r=0,n=i.levelLoadingTimeOut;break;default:e=i.levelLoadingMaxRetry,n=i.levelLoadingTimeOut,r=i.levelLoadingRetryDelay,a=i.levelLoadingMaxRetryTimeout}h=this.createInternalLoader(t);var l={timeout:n,maxRetry:e,retryDelay:r,maxRetryDelay:a},u={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)};return c.b.debug("Calling internal loader delegate for URL: "+t.url),h.load(t,l,u),!0},l.loadsuccess=function(t,i,e,s){if(void 0===s&&(s=null),e.isSidxRequest)return this.Dt(t,e),void this.Ft(t,i,e,s);if(this.resetInternalLoader(e.type),"string"!=typeof t.data)throw new Error('expected responseType of "text" for PlaylistLoader');var n=t.data;i.tload=M.now(),0===n.indexOf("#EXTM3U")?n.indexOf("#EXTINF:")>0||n.indexOf("#EXT-X-TARGETDURATION:")>0?this.$t(t,i,e,s):this.Ut(t,i,e,s):this.Vt(t,e,"no EXTM3U delimiter",s)},l.loaderror=function(t,i,e){void 0===e&&(e=null),this.Nt(i,e,!1,t)},l.loadtimeout=function(t,i,e){void 0===e&&(e=null),this.Nt(i,e,!0)},l.Ut=function(t,i,e,s){var n=this.hls,a=t.data,h=r.getResponseUrl(t,e),l=C.parseMasterPlaylist(a,h);if(l.length){var u=l.map(function(t){return{id:t.attrs.AUDIO,codec:t.audioCodec}}),d=C.parseMasterPlaylistMedia(a,h,"AUDIO",u),f=C.parseMasterPlaylistMedia(a,h,"SUBTITLES");if(d.length){var p=!1;d.forEach(function(t){t.url||(p=!0)}),!1===p&&l[0].audioCodec&&!l[0].attrs.AUDIO&&(c.b.log("audio codec signaled in quality level, but no embedded audio track signaled, create one"),d.unshift({type:"main",name:"main",default:!1,autoselect:!1,forced:!1,id:-1}))}n.trigger(o.a.MANIFEST_LOADED,{levels:l,audioTracks:d,subtitles:f,url:h,stats:i,networkDetails:s})}else this.Vt(t,e,"no level found in manifest",s)},l.$t=function(t,i,e,n){var a=this.hls,c=e.id,l=e.level,u=e.type,d=r.getResponseUrl(t,e),f=Object(h.a)(c)?c:0,p=Object(h.a)(l)?l:f,b=r.mapContextToLevelType(e),v=C.parseLevelPlaylist(t.data,d,p,b,f);if(v.tload=i.tload,u===s.MANIFEST){var m={url:d,details:v};a.trigger(o.a.MANIFEST_LOADED,{levels:[m],audioTracks:[],url:d,stats:i,networkDetails:n})}if(i.tparsed=M.now(),v.needSidxRanges){var g=v.initSegment.url;this.load({url:g,isSidxRequest:!0,type:u,level:l,levelDetails:v,id:c,rangeStart:0,rangeEnd:2048,responseType:"arraybuffer"})}else e.levelDetails=v,this.Ft(t,i,e,n)},l.Dt=function(t,i){if("string"==typeof t.data)throw new Error("sidx request must be made with responseType of array buffer");var e=d.a.parseSegmentIndex(new Uint8Array(t.data));if(e){var s=e.references,n=i.levelDetails;s.forEach(function(t,i){var e=t.info;if(n){var s=n.fragments[i];0===s.byteRange.length&&s.setByteRange(String(1+e.end-e.start)+"@"+String(e.start))}}),n&&n.initSegment.setByteRange(String(e.moovEndOffset)+"@0")}},l.Vt=function(t,i,e,s){this.hls.trigger(o.a.ERROR,{type:a.b.NETWORK_ERROR,details:a.a.MANIFEST_PARSING_ERROR,fatal:!0,url:t.url,reason:e,networkDetails:s})},l.Nt=function(t,i,e,n){var r,h;void 0===e&&(e=!1),void 0===n&&(n=null),c.b.info("A network error occured while loading a "+t.type+"-type playlist");var l=this.getInternalLoader(t);switch(t.type){case s.MANIFEST:r=e?a.a.MANIFEST_LOAD_TIMEOUT:a.a.MANIFEST_LOAD_ERROR,h=!0;break;case s.LEVEL:r=e?a.a.LEVEL_LOAD_TIMEOUT:a.a.LEVEL_LOAD_ERROR,h=!1;break;case s.AUDIO_TRACK:r=e?a.a.AUDIO_TRACK_LOAD_TIMEOUT:a.a.AUDIO_TRACK_LOAD_ERROR,h=!1;break;default:h=!1}l&&(l.abort(),this.resetInternalLoader(t.type));var u={type:a.b.NETWORK_ERROR,details:r,fatal:h,url:t.url,loader:l,context:t,networkDetails:i};n&&(u.response=n),this.hls.trigger(o.a.ERROR,u)},l.Ft=function(t,i,e,n){var a=e.type,h=e.level,c=e.id,l=e.levelDetails;if(l&&l.targetduration)if(r.canHaveQualityLevels(e.type))this.hls.trigger(o.a.LEVEL_LOADED,{details:l,level:h||0,id:c||0,stats:i,networkDetails:n});else switch(a){case s.AUDIO_TRACK:this.hls.trigger(o.a.AUDIO_TRACK_LOADED,{details:l,id:c,stats:i,networkDetails:n});break;case s.SUBTITLE_TRACK:this.hls.trigger(o.a.SUBTITLE_TRACK_LOADED,{details:l,id:c,stats:i,networkDetails:n})}else this.Vt(t,e,"invalid target duration",n)},r}(u),L=function(t){var i,e;function s(i){var e;return(e=t.call(this,i,o.a.FRAG_LOADING)||this).loaders={},e}e=t,(i=s).prototype=Object.create(e.prototype),i.prototype.constructor=i,i.__proto__=e;var n=s.prototype;return n.destroy=function(){var i=this.loaders;for(var e in i){var s=i[e];s&&s.destroy()}this.loaders={},t.prototype.destroy.call(this)},n.onFragLoading=function(t){var i=t.frag,e=i.type,s=this.loaders,n=this.hls.config,r=n.fLoader,a=n.loader;i.loaded=0;var o,l,u,d=s[e];d&&(c.b.warn("abort previous fragment loader for type: "+e),d.abort()),d=s[e]=i.loader=n.fLoader?new r(n):new a(n),o={url:i.url,frag:i,responseType:"arraybuffer",progressData:!1};var f=i.byteRangeStartOffset,p=i.byteRangeEndOffset;Object(h.a)(f)&&Object(h.a)(p)&&(o.rangeStart=f,o.rangeEnd=p),l={timeout:n.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:n.fragLoadingMaxRetryTimeout},u={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this),onProgress:this.loadprogress.bind(this)},d.load(o,l,u)},n.loadsuccess=function(t,i,e,s){void 0===s&&(s=null);var n=t.data,r=e.frag;r.loader=void 0,this.loaders[r.type]=void 0,this.hls.trigger(o.a.FRAG_LOADED,{payload:n,frag:r,stats:i,networkDetails:s})},n.loaderror=function(t,i,e){void 0===e&&(e=null);var s=i.frag,n=s.loader;n&&n.abort(),this.loaders[s.type]=void 0,this.hls.trigger(o.a.ERROR,{type:a.b.NETWORK_ERROR,details:a.a.FRAG_LOAD_ERROR,fatal:!1,frag:i.frag,response:t,networkDetails:e})},n.loadtimeout=function(t,i,e){void 0===e&&(e=null);var s=i.frag,n=s.loader;n&&n.abort(),this.loaders[s.type]=void 0,this.hls.trigger(o.a.ERROR,{type:a.b.NETWORK_ERROR,details:a.a.FRAG_LOAD_TIMEOUT,fatal:!1,frag:i.frag,networkDetails:e})},n.loadprogress=function(t,i,e,s){void 0===s&&(s=null);var n=i.frag;n.loaded=t.loaded,this.hls.trigger(o.a.FRAG_LOAD_PROGRESS,{frag:n,stats:t,networkDetails:s})},s}(u),R=function(t){var i,e;function s(i){var e;return(e=t.call(this,i,o.a.KEY_LOADING)||this).loaders={},e.decryptkey=null,e.decrypturl=null,e}e=t,(i=s).prototype=Object.create(e.prototype),i.prototype.constructor=i,i.__proto__=e;var n=s.prototype;return n.destroy=function(){for(var i in this.loaders){var e=this.loaders[i];e&&e.destroy()}this.loaders={},t.prototype.destroy.call(this)},n.onKeyLoading=function(t){var i=t.frag,e=i.type,s=this.loaders[e];if(i.decryptdata){var n=i.decryptdata.uri;if(n!==this.decrypturl||null===this.decryptkey){var r=this.hls.config;if(s&&(c.b.warn("abort previous key loader for type:"+e),s.abort()),!n)return void c.b.warn("key uri is falsy");i.loader=this.loaders[e]=new r.loader(r),this.decrypturl=n,this.decryptkey=null;var a={url:n,frag:i,responseType:"arraybuffer"},h={timeout:r.fragLoadingTimeOut,maxRetry:0,retryDelay:r.fragLoadingRetryDelay,maxRetryDelay:r.fragLoadingMaxRetryTimeout},l={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)};i.loader.load(a,h,l)}else this.decryptkey&&(i.decryptdata.key=this.decryptkey,this.hls.trigger(o.a.KEY_LOADED,{frag:i}))}else c.b.warn("Missing decryption data on fragment in onKeyLoading")},n.loadsuccess=function(t,i,e){var s=e.frag;s.decryptdata?(this.decryptkey=s.decryptdata.key=new Uint8Array(t.data),s.loader=void 0,delete this.loaders[s.type],this.hls.trigger(o.a.KEY_LOADED,{frag:s})):c.b.error("after key load, decryptdata unset")},n.loaderror=function(t,i){var e=i.frag,s=e.loader;s&&s.abort(),delete this.loaders[e.type],this.hls.trigger(o.a.ERROR,{type:a.b.NETWORK_ERROR,details:a.a.KEY_LOAD_ERROR,fatal:!1,frag:e,response:t})},n.loadtimeout=function(t,i){var e=i.frag,s=e.loader;s&&s.abort(),delete this.loaders[e.type],this.hls.trigger(o.a.ERROR,{type:a.b.NETWORK_ERROR,details:a.a.KEY_LOAD_TIMEOUT,fatal:!1,frag:e})},s}(u),B="NOT_LOADED",D="APPENDING",F="PARTIAL",$=function(t){var i,e;function s(i){var e;return(e=t.call(this,i,o.a.BUFFER_APPENDED,o.a.FRAG_BUFFERED,o.a.FRAG_LOADED)||this).bufferPadding=.2,e.fragments=Object.create(null),e.timeRanges=Object.create(null),e.config=i.config,e}e=t,(i=s).prototype=Object.create(e.prototype),i.prototype.constructor=i,i.__proto__=e;var n=s.prototype;return n.destroy=function(){this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.config=null,u.prototype.destroy.call(this),t.prototype.destroy.call(this)},n.getBufferedFrag=function(t,i){var e=this.fragments,s=Object.keys(e).filter(function(s){var n=e[s];if(n.body.type!==i)return!1;if(!n.buffered)return!1;var r=n.body;return r.startPTS<=t&&t<=r.endPTS});if(0===s.length)return null;var n=s.pop();return e[n].body},n.detectEvictedFragments=function(t,i){var e,s,n=this;Object.keys(this.fragments).forEach(function(r){var a=n.fragments[r];if(!0===a.buffered){var h=a.range[t];if(h){e=h.time;for(var o=0;o<e.length;o++)if(s=e[o],!1===n.isTimeBuffered(s.startPTS,s.endPTS,i)){n.removeFragment(a.body);break}}}})},n.detectPartialFragments=function(t){var i=this,e=this.getFragmentKey(t),s=this.fragments[e];s&&(s.buffered=!0,Object.keys(this.timeRanges).forEach(function(e){if(t.hasElementaryStream(e)){var n=i.timeRanges[e];s.range[e]=i.getBufferedTimes(t.startPTS,t.endPTS,n)}}))},n.getBufferedTimes=function(t,i,e){for(var s,n,r=[],a=!1,h=0;h<e.length;h++){if(s=e.start(h)-this.bufferPadding,n=e.end(h)+this.bufferPadding,t>=s&&i<=n){r.push({startPTS:Math.max(t,e.start(h)),endPTS:Math.min(i,e.end(h))});break}if(t<n&&i>s)r.push({startPTS:Math.max(t,e.start(h)),endPTS:Math.min(i,e.end(h))}),a=!0;else if(i<=s)break}return{time:r,partial:a}},n.getFragmentKey=function(t){return t.type+"_"+t.level+"_"+t.urlId+"_"+t.sn},n.getPartialFragment=function(t){var i,e,s,n=this,r=null,a=0;return Object.keys(this.fragments).forEach(function(h){var o=n.fragments[h];n.isPartial(o)&&(e=o.body.startPTS-n.bufferPadding,s=o.body.endPTS+n.bufferPadding,t>=e&&t<=s&&(i=Math.min(t-e,s-t),a<=i&&(r=o.body,a=i)))}),r},n.getState=function(t){var i=this.getFragmentKey(t),e=this.fragments[i],s=B;return void 0!==e&&(s=e.buffered?!0===this.isPartial(e)?F:"OK":D),s},n.isPartial=function(t){return!0===t.buffered&&(void 0!==t.range.video&&!0===t.range.video.partial||void 0!==t.range.audio&&!0===t.range.audio.partial)},n.isTimeBuffered=function(t,i,e){for(var s,n,r=0;r<e.length;r++){if(s=e.start(r)-this.bufferPadding,n=e.end(r)+this.bufferPadding,t>=s&&i<=n)return!0;if(i<=s)return!1}return!1},n.onFragLoaded=function(t){var i=t.frag;Object(h.a)(i.sn)&&!i.bitrateTest&&(this.fragments[this.getFragmentKey(i)]={body:i,range:Object.create(null),buffered:!1})},n.onBufferAppended=function(t){var i=this;this.timeRanges=t.timeRanges,Object.keys(this.timeRanges).forEach(function(t){var e=i.timeRanges[t];i.detectEvictedFragments(t,e)})},n.onFragBuffered=function(t){this.detectPartialFragments(t.frag)},n.hasFragment=function(t){var i=this.getFragmentKey(t);return void 0!==this.fragments[i]},n.removeFragment=function(t){var i=this.getFragmentKey(t);delete this.fragments[i]},n.removeAllFragments=function(){this.fragments=Object.create(null)},s}(u),U={search:function(t,i){for(var e=0,s=t.length-1,n=null,r=null;e<=s;){var a=i(r=t[n=(e+s)/2|0]);if(a>0)e=n+1;else{if(!(a<0))return r;s=n-1}}return null}},V=function(){function t(){}return t.isBuffered=function(t,i){try{if(t)for(var e=t.buffered,s=0;s<e.length;s++)if(i>=e.start(s)&&i<=e.end(s))return!0}catch(t){}return!1},t.bufferInfo=function(t,i,e){try{if(t){var s,n=t.buffered,r=[];for(s=0;s<n.length;s++)r.push({start:n.start(s),end:n.end(s)});return this.bufferedInfo(r,i,e)}}catch(t){}return{len:0,start:i,end:i,nextStart:void 0}},t.bufferedInfo=function(t,i,e){t.sort(function(t,i){var e=t.start-i.start;return e||i.end-t.end});var s=[];if(e)for(var n=0;n<t.length;n++){var r=s.length;if(r){var a=s[r-1].end;t[n].start-a<e?t[n].end>a&&(s[r-1].end=t[n].end):s.push(t[n])}else s.push(t[n])}else s=t;for(var h,o=0,c=i,l=i,u=0;u<s.length;u++){var d=s[u].start,f=s[u].end;if(i+e>=d&&i<f)c=d,o=(l=f)-i;else if(i+e<d){h=d;break}}return{len:o,start:c,end:l,nextStart:h}},t}(),N=e(8),H=e(11),q=e(9);function z(){return window.MediaSource||window.WebKitMediaSource}var W=e(5),G=function(t){var i,e;function s(){return t.apply(this,arguments)||this}return e=t,(i=s).prototype=Object.create(e.prototype),i.prototype.constructor=i,i.__proto__=e,s.prototype.trigger=function(t){for(var i=arguments.length,e=new Array(i>1?i-1:0),s=1;s<i;s++)e[s-1]=arguments[s];this.emit.apply(this,[t,t].concat(e))},s}(N.EventEmitter),J=z()||{isTypeSupported:function(){return!1}},Q=function(){function t(t,i){var e=this;this.hls=t,this.id=i;var s=this.observer=new G,n=t.config,r=function(i,s){(s=s||{}).frag=e.frag,s.id=e.id,t.trigger(i,s)};s.on(o.a.FRAG_DECRYPTED,r),s.on(o.a.FRAG_PARSING_INIT_SEGMENT,r),s.on(o.a.FRAG_PARSING_DATA,r),s.on(o.a.FRAG_PARSED,r),s.on(o.a.ERROR,r),s.on(o.a.FRAG_PARSING_METADATA,r),s.on(o.a.FRAG_PARSING_USERDATA,r),s.on(o.a.INIT_PTS_FOUND,r);var h={mp4:J.isTypeSupported("video/mp4"),mpeg:J.isTypeSupported("audio/mpeg"),mp3:J.isTypeSupported('audio/mp4; codecs="mp3"')},l=navigator.vendor;if(n.enableWorker&&"undefined"!=typeof Worker){var u;c.b.log("demuxing in webworker");try{u=this.w=H(12),this.onwmsg=this.onWorkerMessage.bind(this),u.addEventListener("message",this.onwmsg),u.onerror=function(i){t.trigger(o.a.ERROR,{type:a.b.OTHER_ERROR,details:a.a.INTERNAL_EXCEPTION,fatal:!0,event:"demuxerWorker",err:{message:i.message+" ("+i.filename+":"+i.lineno+")"}})},u.postMessage({cmd:"init",typeSupported:h,vendor:l,id:i,config:JSON.stringify(n)})}catch(t){c.b.warn("Error in worker:",t),c.b.error("Error while initializing DemuxerWorker, fallback on DemuxerInline"),u&&Object(W.a)().URL.revokeObjectURL(u.objectURL),this.demuxer=new q.a(s,h,n,l),this.w=void 0}}else this.demuxer=new q.a(s,h,n,l)}var i=t.prototype;return i.destroy=function(){var t=this.w;if(t)t.removeEventListener("message",this.onwmsg),t.terminate(),this.w=null;else{var i=this.demuxer;i&&(i.destroy(),this.demuxer=null)}var e=this.observer;e&&(e.removeAllListeners(),this.observer=null)},i.push=function(t,i,e,s,n,r,a,o){var l=this.w,u=Object(h.a)(n.startPTS)?n.startPTS:n.start,d=n.decryptdata,f=this.frag,p=!(f&&n.cc===f.cc),b=!(f&&n.level===f.level),v=f&&n.sn===f.sn+1,m=!b&&v;if(p&&c.b.log(this.id+":discontinuity detected"),b&&c.b.log(this.id+":switch detected"),this.frag=n,l)l.postMessage({cmd:"demux",data:t,decryptdata:d,initSegment:i,audioCodec:e,videoCodec:s,timeOffset:u,discontinuity:p,trackSwitch:b,contiguous:m,duration:r,accurateTimeOffset:a,defaultInitPTS:o},t instanceof ArrayBuffer?[t]:[]);else{var g=this.demuxer;g&&g.push(t,d,i,e,s,u,p,b,m,r,a,o)}},i.onWorkerMessage=function(t){var i=t.data,e=this.hls;switch(i.event){case"init":Object(W.a)().URL.revokeObjectURL(this.w.objectURL);break;case o.a.FRAG_PARSING_DATA:i.data.data1=new Uint8Array(i.data1),i.data2&&(i.data.data2=new Uint8Array(i.data2));default:i.data=i.data||{},i.data.frag=this.frag,i.data.id=this.id,e.trigger(i.event,i.data)}},t}();function X(t,i,e){switch(i){case"audio":t.audioGroupIds||(t.audioGroupIds=[]),t.audioGroupIds.push(e);break;case"text":t.textGroupIds||(t.textGroupIds=[]),t.textGroupIds.push(e)}}function Y(t,i,e){var s=t[i],n=t[e],r=n.startPTS;Object(h.a)(r)?e>i?(s.duration=r-s.start,s.duration<0&&c.b.warn("negative duration computed for frag "+s.sn+",level "+s.level+", there should be some duration drift between playlist and fragment!")):(n.duration=s.start-r,n.duration<0&&c.b.warn("negative duration computed for frag "+n.sn+",level "+n.level+", there should be some duration drift between playlist and fragment!")):n.start=e>i?s.start+s.duration:Math.max(s.start-n.duration,0)}function K(t,i,e,s,n,r){var a=e;if(Object(h.a)(i.startPTS)){var o=Math.abs(i.startPTS-e);Object(h.a)(i.deltaPTS)?i.deltaPTS=Math.max(o,i.deltaPTS):i.deltaPTS=o,a=Math.max(e,i.startPTS),e=Math.min(e,i.startPTS),s=Math.max(s,i.endPTS),n=Math.min(n,i.startDTS),r=Math.max(r,i.endDTS)}var c=e-i.start;i.start=i.startPTS=e,i.maxStartPTS=a,i.endPTS=s,i.startDTS=n,i.endDTS=r,i.duration=s-e;var l,u,d,f=i.sn;if(!t||f<t.startSN||f>t.endSN)return 0;for(l=f-t.startSN,(u=t.fragments)[l]=i,d=l;d>0;d--)Y(u,d,d-1);for(d=l;d<u.length-1;d++)Y(u,d,d+1);return t.PTSKnown=!0,c}var Z={toString:function(t){for(var i="",e=t.length,s=0;s<e;s++)i+="["+t.start(s).toFixed(3)+","+t.end(s).toFixed(3)+"]";return i}};function tt(t,i){i.fragments.forEach(function(i){if(i){var e=i.start+t;i.start=i.startPTS=e,i.endPTS=e+i.duration}}),i.PTSKnown=!0}function it(t,i,e){!function(t,i,e){if(function(t,i,e){var s=!1;return i&&i.details&&e&&(e.endCC>e.startCC||t&&t.cc<e.startCC)&&(s=!0),s}(t,e,i)){var s=function(t,i){var e=t.fragments,s=i.fragments;if(s.length&&e.length){var n=function(t,i){for(var e=null,s=0;s<t.length;s+=1){var n=t[s];if(n&&n.cc===i){e=n;break}}return e}(e,s[0].cc);if(n&&(!n||n.startPTS))return n;c.b.log("No frag in previous level to align on")}else c.b.log("No fragments to align")}(e.details,i);s&&(c.b.log("Adjusting PTS using last level due to CC increase within current level"),tt(s.start,i))}}(t,e,i),!e.PTSKnown&&i&&function(t,i){if(i&&i.fragments.length){if(!t.hasProgramDateTime||!i.hasProgramDateTime)return;var e=i.fragments[0].programDateTime,s=(t.fragments[0].programDateTime-e)/1e3+i.fragments[0].start;Object(h.a)(s)&&(c.b.log("adjusting PTS using programDateTime delta, sliding:"+s.toFixed(3)),tt(s,t))}}(e,i.details)}function et(t,i,e){void 0===t&&(t=0),void 0===i&&(i=0);var s=Math.min(i,e.duration+(e.deltaPTS?e.deltaPTS:0));return e.start+e.duration-s<=t?1:e.start-s>t&&e.start?-1:0}function st(t,i,e){var s=1e3*Math.min(i,e.duration+(e.deltaPTS?e.deltaPTS:0));return(e.endProgramDateTime||0)-s>t}var nt=function(){function t(t,i,e,s){this.config=t,this.media=i,this.fragmentTracker=e,this.hls=s,this.nudgeRetry=0,this.stallReported=!1,this.stalled=null,this.moved=!1,this.seeking=!1}var i=t.prototype;return i.poll=function(t){var i=this.config,e=this.media,s=this.stalled,n=e.currentTime,r=e.seeking,a=this.seeking&&!r,h=!this.seeking&&r;if(this.seeking=r,n===t){if((h||a)&&(this.stalled=null),!e.paused&&!e.ended&&0!==e.playbackRate&&e.buffered.length){var o=V.bufferInfo(e,n,0),l=o.len>0,u=o.nextStart||0;if(l||u){if(r){if(o.len>2||!u||u-n>2)return;this.moved=!1}if(!this.moved&&this.stalled){var d=Math.max(u,o.start||0)-n;if(d>0&&d<=2)return void this.Ht(null)}var f=self.performance.now();if(null!==s){var p=f-s;!r&&p>=250&&this.qt(o.len);var b=V.bufferInfo(e,n,i.maxBufferHole);this.zt(b,p)}else this.stalled=f}}}else if(this.moved=!0,null!==s){if(this.stallReported){var v=self.performance.now()-s;c.b.warn("playback not stuck anymore @"+n+", after "+Math.round(v)+"ms"),this.stallReported=!1}this.stalled=null,this.nudgeRetry=0}},i.zt=function(t,i){var e=this.config,s=this.fragmentTracker,n=this.media.currentTime,r=s.getPartialFragment(n);r&&this.Ht(r)||t.len>e.maxBufferHole&&i>1e3*e.highBufferWatchdogPeriod&&(c.b.warn("Trying to nudge playhead over buffer-hole"),this.stalled=null,this.Wt())},i.qt=function(t){var i=this.hls,e=this.media;this.stallReported||(this.stallReported=!0,c.b.warn("Playback stalling at @"+e.currentTime+" due to low buffer"),i.trigger(o.a.ERROR,{type:a.b.MEDIA_ERROR,details:a.a.BUFFER_STALLED_ERROR,fatal:!1,buffer:t}))},i.Ht=function(t){for(var i=this.config,e=this.hls,s=this.media,n=s.currentTime,r=0,h=0;h<s.buffered.length;h++){var l=s.buffered.start(h);if(n+i.maxBufferHole>=r&&n<l){var u=Math.max(l+.05,s.currentTime+.1);return c.b.warn("skipping hole, adjusting currentTime from "+n+" to "+u),this.moved=!0,this.stalled=null,s.currentTime=u,t&&e.trigger(o.a.ERROR,{type:a.b.MEDIA_ERROR,details:a.a.BUFFER_SEEK_OVER_HOLE,fatal:!1,reason:"fragment loaded with buffer holes, seeking from "+n+" to "+u,frag:t}),u}r=s.buffered.end(h)}return 0},i.Wt=function(){var t=this.config,i=this.hls,e=this.media,s=e.currentTime,n=(this.nudgeRetry||0)+1;if(this.nudgeRetry=n,n<t.nudgeMaxRetry){var r=s+n*t.nudgeOffset;c.b.warn("Nudging 'currentTime' from "+s+" to "+r),e.currentTime=r,i.trigger(o.a.ERROR,{type:a.b.MEDIA_ERROR,details:a.a.BUFFER_NUDGE_ON_STALL,fatal:!1})}else c.b.error("Playhead still not moving while enough data buffered @"+s+" after "+t.nudgeMaxRetry+" nudges"),i.trigger(o.a.ERROR,{type:a.b.MEDIA_ERROR,details:a.a.BUFFER_STALLED_ERROR,fatal:!0})},t}(),rt="STOPPED",at="IDLE",ht="KEY_LOADING",ot="FRAG_LOADING",ct="FRAG_LOADING_WAITING_RETRY",lt="PARSING",ut="PARSED",dt="BUFFER_FLUSHING",ft="ERROR",pt="WAITING_LEVEL";function bt(t,i){for(var e=0;e<i.length;e++){var s=i[e];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}var vt=function(t){var i,e;function s(i,e){var s;return(s=t.call(this,i,o.a.MEDIA_ATTACHED,o.a.MEDIA_DETACHING,o.a.MANIFEST_LOADING,o.a.MANIFEST_PARSED,o.a.LEVEL_LOADED,o.a.KEY_LOADED,o.a.FRAG_LOADED,o.a.FRAG_LOAD_EMERGENCY_ABORTED,o.a.FRAG_PARSING_INIT_SEGMENT,o.a.FRAG_PARSING_DATA,o.a.FRAG_PARSED,o.a.ERROR,o.a.AUDIO_TRACK_SWITCHING,o.a.AUDIO_TRACK_SWITCHED,o.a.BUFFER_CREATED,o.a.BUFFER_APPENDED,o.a.BUFFER_FLUSHED)||this).fragmentTracker=e,s.config=i.config,s.audioCodecSwap=!1,s.Gt=rt,s.stallReported=!1,s.gapController=null,s.altAudio=!1,s}e=t,(i=s).prototype=Object.create(e.prototype),i.prototype.constructor=i,i.__proto__=e;var r,l,u=s.prototype;return u.startLoad=function(t){if(this.levels){var i=this.lastCurrentTime,e=this.hls;if(this.stopLoad(),this.setInterval(100),this.level=-1,this.fragLoadError=0,!this.startFragRequested){var s=e.startLevel;-1===s&&(s=0,this.bitrateTest=!0),this.level=e.nextLoadLevel=s,this.loadedmetadata=!1}i>0&&-1===t&&(c.b.log("override startPosition with lastCurrentTime @"+i.toFixed(3)),t=i),this.state=at,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=t,this.tick()}else this.forceStartLoad=!0,this.state=rt},u.stopLoad=function(){this.forceStartLoad=!1,t.prototype.stopLoad.call(this)},u.doTick=function(){switch(this.state){case dt:this.fragLoadError=0;break;case at:this.Jt();break;case pt:var t=this.levels[this.level];t&&t.details&&(this.state=at);break;case ct:var i=window.performance.now(),e=this.retryDate;(!e||i>=e||this.media&&this.media.seeking)&&(c.b.log("mediaController: retryDate reached, switch back to IDLE state"),this.state=at)}this.Qt(),this.Xt()},u.Jt=function(){var t=this.hls,i=t.config,e=this.media;if(void 0!==this.levelLastLoaded&&(e||!this.startFragRequested&&i.startFragPrefetch)){var s;s=this.loadedmetadata?e.currentTime:this.nextLoadPosition;var n=t.nextLoadLevel,r=this.levels[n];if(r){var a,h=r.bitrate;a=h?Math.max(8*i.maxBufferSize/h,i.maxBufferLength):i.maxBufferLength,a=Math.min(a,i.maxMaxBufferLength);var l=V.bufferInfo(this.mediaBuffer?this.mediaBuffer:e,s,i.maxBufferHole),u=l.len;if(!(u>=a)){c.b.trace("buffer length of "+u.toFixed(3)+" is below max of "+a.toFixed(3)+". checking for more payload ..."),this.level=t.nextLoadLevel=n;var d=r.details;if(!d||d.live&&this.levelLastLoaded!==n)this.state=pt;else{if(this.Yt(l,d)){var f={};return this.altAudio&&(f.type="video"),this.hls.trigger(o.a.BUFFER_EOS,f),void(this.state="ENDED")}this.Kt(s,l,d)}}}}},u.Kt=function(t,i,e){var s=this.fragPrevious,n=this.level,r=e.fragments,a=r.length;if(0!==a){var h,o=r[0].start,l=r[a-1].start+r[a-1].duration,u=i.end;if(e.initSegment&&!e.initSegment.data)h=e.initSegment;else if(e.live){var d=this.config.initialLiveManifestSize;if(a<d)return void c.b.warn("Can not start playback of a level, reason: not enough fragments "+a+" < "+d);if(null===(h=this.Zt(e,u,o,l,s,r,a)))return}else u<o&&(h=r[0]);h||(h=this.ti(o,s,a,r,u,l,e)),h&&(h.encrypted?(c.b.log("Loading key for "+h.sn+" of ["+e.startSN+" ,"+e.endSN+"],level "+n),this.ii(h)):(c.b.log("Loading "+h.sn+" of ["+e.startSN+" ,"+e.endSN+"],level "+n+", currentTime:"+t.toFixed(3)+",bufferEnd:"+u.toFixed(3)),this.ei(h)))}},u.Zt=function(t,i,e,s,n,r,a){var o,l=this.hls.config,u=this.media,d=void 0!==l.liveMaxLatencyDuration?l.liveMaxLatencyDuration:l.liveMaxLatencyDurationCount*t.targetduration;if(i<Math.max(e-l.maxFragLookUpTolerance,s-d)){var f=this.liveSyncPosition=this.computeLivePosition(e,t);i=f,u&&!u.paused&&u.readyState&&u.duration>f&&f>u.currentTime&&(c.b.log("buffer end: "+i.toFixed(3)+" is located too far from the end of live sliding playlist, reset currentTime to : "+f.toFixed(3)),u.currentTime=f),this.nextLoadPosition=f}if(t.PTSKnown&&i>s&&u&&u.readyState)return null;if(this.startFragRequested&&!t.PTSKnown){if(n)if(t.hasProgramDateTime)c.b.log("live playlist, switching playlist, load frag with same PDT: "+n.programDateTime),o=function(t,i,e){if(null===i||!Array.isArray(t)||!t.length||!Object(h.a)(i))return null;if(i<(t[0].programDateTime||0))return null;if(i>=(t[t.length-1].endProgramDateTime||0))return null;e=e||0;for(var s=0;s<t.length;++s){var n=t[s];if(st(i,e,n))return n}return null}(r,n.endProgramDateTime,l.maxFragLookUpTolerance);else{var p=n.sn+1;if(p>=t.startSN&&p<=t.endSN){var b=r[p-t.startSN];n.cc===b.cc&&(o=b,c.b.log("live playlist, switching playlist, load frag with next SN: "+o.sn))}o||(o=U.search(r,function(t){return n.cc-t.cc}))&&c.b.log("live playlist, switching playlist, load frag with same CC: "+o.sn)}o||(o=r[Math.min(a-1,Math.round(a/2))],c.b.log("live playlist, switching playlist, unknown, load middle frag : "+o.sn))}return o},u.ti=function(t,i,e,s,n,r,a){var h,o=this.hls.config;if(h=n<r?function(t,i,e,s){void 0===e&&(e=0),void 0===s&&(s=0);var n=t?i[t.sn-i[0].sn+1]:null;return n&&!et(e,s,n)?n:U.search(i,et.bind(null,e,s))}(i,s,n,n>r-o.maxFragLookUpTolerance?0:o.maxFragLookUpTolerance):s[e-1]){var l=h.sn-a.startSN,u=i&&h.level===i.level,d=s[l-1],f=s[l+1];if(i&&h.sn===i.sn)if(u&&!h.backtracked)if(h.sn<a.endSN){var p=i.deltaPTS;p&&p>o.maxBufferHole&&i.dropped&&l?(h=d,c.b.warn("Previous fragment was dropped with large PTS gap between audio and video. Maybe fragment is not starting with a keyframe? Loading previous one to try to overcome this")):(h=f,c.b.log("Re-loading fragment with SN: "+h.sn))}else h=null;else h.backtracked&&(f&&f.backtracked?(c.b.warn("Already backtracked from fragment "+f.sn+", will not backtrack to fragment "+h.sn+". Loading fragment "+f.sn),h=f):(c.b.warn("Loaded fragment with dropped frames, backtracking 1 segment to find a keyframe"),h.dropped=0,d?(h=d).backtracked=!0:l&&(h=null)))}return h},u.ii=function(t){this.state=ht,this.hls.trigger(o.a.KEY_LOADING,{frag:t})},u.ei=function(t){var i=this.fragmentTracker.getState(t);this.fragCurrent=t,"initSegment"!==t.sn&&(this.startFragRequested=!0),Object(h.a)(t.sn)&&!t.bitrateTest&&(this.nextLoadPosition=t.start+t.duration),t.backtracked||i===B||i===F?(t.autoLevel=this.hls.autoLevelEnabled,t.bitrateTest=this.bitrateTest,this.hls.trigger(o.a.FRAG_LOADING,{frag:t}),this.demuxer||(this.demuxer=new Q(this.hls,"main")),this.state=ot):i===D&&this.si(t.duration)&&this.fragmentTracker.removeFragment(t)},u.getBufferedFrag=function(t){return this.fragmentTracker.getBufferedFrag(t,n.MAIN)},u.followingBufferedFrag=function(t){return t?this.getBufferedFrag(t.endPTS+.5):null},u.Xt=function(){var t,i,e=this.media;if(e&&e.readyState&&!1===e.seeking&&((i=e.currentTime)>this.lastCurrentTime&&(this.lastCurrentTime=i),V.isBuffered(e,i)?t=this.getBufferedFrag(i):V.isBuffered(e,i+.1)&&(t=this.getBufferedFrag(i+.1)),t)){var s=t;if(s!==this.fragPlaying){this.hls.trigger(o.a.FRAG_CHANGED,{frag:s});var n=s.level;this.fragPlaying&&this.fragPlaying.level===n||this.hls.trigger(o.a.LEVEL_SWITCHED,{level:n}),this.fragPlaying=s}}},u.immediateLevelSwitch=function(){if(c.b.log("immediateLevelSwitch"),!this.immediateSwitch){this.immediateSwitch=!0;var t,i=this.media;i?(t=i.paused,i.pause()):t=!0,this.previouslyPaused=t}var e=this.fragCurrent;e&&e.loader&&e.loader.abort(),this.fragCurrent=null,this.flushMainBuffer(0,Number.POSITIVE_INFINITY)},u.immediateLevelSwitchEnd=function(){var t=this.media;t&&t.buffered.length&&(this.immediateSwitch=!1,V.isBuffered(t,t.currentTime)&&(t.currentTime-=1e-4),this.previouslyPaused||t.play())},u.nextLevelSwitch=function(){var t=this.media;if(t&&t.readyState){var i,e,s;if((e=this.getBufferedFrag(t.currentTime))&&e.startPTS>1&&this.flushMainBuffer(0,e.startPTS-1),t.paused)i=0;else{var n=this.hls.nextLoadLevel,r=this.levels[n],a=this.fragLastKbps;i=a&&this.fragCurrent?this.fragCurrent.duration*r.bitrate/(1e3*a)+1:0}if((s=this.getBufferedFrag(t.currentTime+i))&&(s=this.followingBufferedFrag(s))){var h=this.fragCurrent;h&&h.loader&&h.loader.abort(),this.fragCurrent=null,this.flushMainBuffer(s.maxStartPTS,Number.POSITIVE_INFINITY)}}},u.flushMainBuffer=function(t,i){this.state=dt;var e={startOffset:t,endOffset:i};this.altAudio&&(e.type="video"),this.hls.trigger(o.a.BUFFER_FLUSHING,e)},u.onMediaAttached=function(t){var i=this.media=this.mediaBuffer=t.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),this.onvended=this.onMediaEnded.bind(this),i.addEventListener("seeking",this.onvseeking),i.addEventListener("seeked",this.onvseeked),i.addEventListener("ended",this.onvended);var e=this.config;this.levels&&e.autoStartLoad&&this.hls.startLoad(e.startPosition),this.gapController=new nt(e,i,this.fragmentTracker,this.hls)},u.onMediaDetaching=function(){var t=this.media;t&&t.ended&&(c.b.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0);var i=this.levels;i&&i.forEach(function(t){t.details&&t.details.fragments.forEach(function(t){t.backtracked=void 0})}),t&&(t.removeEventListener("seeking",this.onvseeking),t.removeEventListener("seeked",this.onvseeked),t.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.fragmentTracker.removeAllFragments(),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.stopLoad()},u.onMediaSeeked=function(){var t=this.media,i=t?t.currentTime:void 0;Object(h.a)(i)&&c.b.log("media seeked to "+i.toFixed(3)),this.tick()},u.onManifestLoading=function(){c.b.log("trigger BUFFER_RESET"),this.hls.trigger(o.a.BUFFER_RESET),this.fragmentTracker.removeAllFragments(),this.stalled=!1,this.startPosition=this.lastCurrentTime=0},u.onManifestParsed=function(t){var i,e=!1,s=!1;t.levels.forEach(function(t){(i=t.audioCodec)&&(-1!==i.indexOf("mp4a.40.2")&&(e=!0),-1!==i.indexOf("mp4a.40.5")&&(s=!0))}),this.audioCodecSwitch=e&&s,this.audioCodecSwitch&&c.b.log("both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.altAudio=t.altAudio,this.levels=t.levels,this.startFragRequested=!1;var n=this.config;(n.autoStartLoad||this.forceStartLoad)&&this.hls.startLoad(n.startPosition)},u.onLevelLoaded=function(t){var i=t.details,e=t.level,s=this.levels[this.levelLastLoaded],n=this.levels[e],r=i.totalduration,a=0;if(c.b.log("level "+e+" loaded ["+i.startSN+","+i.endSN+"],duration:"+r),i.live){var l=n.details;l&&i.fragments.length>0?(function(t,i){i.initSegment&&t.initSegment&&(i.initSegment=t.initSegment);var e,s=0;if(function(t,i,e){if(t&&i)for(var s=Math.max(t.startSN,i.startSN)-i.startSN,n=Math.min(t.endSN,i.endSN)-i.startSN,r=i.startSN-t.startSN,a=s;a<=n;a++){var h=t.fragments[r+a],o=i.fragments[a];if(!h||!o)break;e(h,o,a)}}(t,i,function(t,n){s=t.cc-n.cc,Object(h.a)(t.startPTS)&&(n.start=n.startPTS=t.startPTS,n.endPTS=t.endPTS,n.duration=t.duration,n.backtracked=t.backtracked,n.dropped=t.dropped,e=n),i.PTSKnown=!0}),i.PTSKnown){if(s){c.b.log("discontinuity sliding from playlist, take drift into account");for(var n=i.fragments,r=0;r<n.length;r++)n[r].cc+=s}e?K(i,e,e.startPTS,e.endPTS,e.startDTS,e.endDTS):function(t,i){var e=i.startSN-t.startSN,s=t.fragments,n=i.fragments;if(!(e<0||e>s.length))for(var r=0;r<n.length;r++)n[r].start+=s[e].start}(t,i),i.PTSKnown=t.PTSKnown}}(l,i),a=i.fragments[0].start,this.liveSyncPosition=this.computeLivePosition(a,l),i.PTSKnown&&Object(h.a)(a)?c.b.log("live playlist sliding:"+a.toFixed(3)):(c.b.log("live playlist - outdated PTS, unknown sliding"),it(this.fragPrevious,s,i))):(c.b.log("live playlist - first load, unknown sliding"),i.PTSKnown=!1,it(this.fragPrevious,s,i))}else i.PTSKnown=!1;if(n.details=i,this.levelLastLoaded=e,this.hls.trigger(o.a.LEVEL_UPDATED,{details:i,level:e}),!1===this.startFragRequested){if(-1===this.startPosition||-1===this.lastCurrentTime){var u=i.startTimeOffset;Object(h.a)(u)?(u<0&&(c.b.log("negative start time offset "+u+", count from end of last fragment"),u=a+r+u),c.b.log("start time offset found in playlist, adjust startPosition to "+u),this.startPosition=u):i.live?(this.startPosition=this.computeLivePosition(a,i),c.b.log("configure startPosition to "+this.startPosition)):this.startPosition=0,this.lastCurrentTime=this.startPosition}this.nextLoadPosition=this.startPosition}this.state===pt&&(this.state=at),this.tick()},u.onKeyLoaded=function(){this.state===ht&&(this.state=at,this.tick())},u.onFragLoaded=function(t){var i=this.fragCurrent,e=this.hls,s=this.levels,n=this.media,r=t.frag;if(this.state===ot&&i&&"main"===r.type&&r.level===i.level&&r.sn===i.sn){var a=t.stats,h=s[i.level],l=h.details;if(this.bitrateTest=!1,this.stats=a,c.b.log("Loaded "+i.sn+" of ["+l.startSN+" ,"+l.endSN+"],level "+i.level),r.bitrateTest&&e.nextLoadLevel)this.state=at,this.startFragRequested=!1,a.tparsed=a.tbuffered=window.performance.now(),e.trigger(o.a.FRAG_BUFFERED,{stats:a,frag:i,id:"main"}),this.tick();else if("initSegment"===r.sn)this.state=at,a.tparsed=a.tbuffered=window.performance.now(),l.initSegment.data=t.payload,e.trigger(o.a.FRAG_BUFFERED,{stats:a,frag:i,id:"main"}),this.tick();else{c.b.log("Parsing "+i.sn+" of ["+l.startSN+" ,"+l.endSN+"],level "+i.level+", cc "+i.cc),this.state=lt,this.pendingBuffering=!0,this.appended=!1,r.bitrateTest&&(r.bitrateTest=!1,this.fragmentTracker.onFragLoaded({frag:r}));var u=!(n&&n.seeking)&&(l.PTSKnown||!l.live),d=l.initSegment?l.initSegment.data:[],f=this.ni(h);(this.demuxer=this.demuxer||new Q(this.hls,"main")).push(t.payload,d,f,h.videoCodec,i,l.totalduration,u)}}this.fragLoadError=0},u.onFragParsingInitSegment=function(t){var i=this.fragCurrent,e=t.frag;if(i&&"main"===t.id&&e.sn===i.sn&&e.level===i.level&&this.state===lt){var s,n,r=t.tracks;if(r.audio&&this.altAudio&&delete r.audio,n=r.audio){var a=this.levels[this.level].audioCodec,h=navigator.userAgent.toLowerCase();a&&this.audioCodecSwap&&(c.b.log("swapping playlist audio codec"),a=-1!==a.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),this.audioCodecSwitch&&1!==n.metadata.channelCount&&-1===h.indexOf("firefox")&&(a="mp4a.40.5"),-1!==h.indexOf("android")&&"audio/mpeg"!==n.container&&(a="mp4a.40.2",c.b.log("Android: force audio codec to "+a)),n.levelCodec=a,n.id=t.id}for(s in(n=r.video)&&(n.levelCodec=this.levels[this.level].videoCodec,n.id=t.id),this.hls.trigger(o.a.BUFFER_CODECS,r),r){n=r[s],c.b.log("main track:"+s+",container:"+n.container+",codecs[level/parsed]=["+n.levelCodec+"/"+n.codec+"]");var l=n.initSegment;l&&(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(o.a.BUFFER_APPENDING,{type:s,data:l,parent:"main",content:"initSegment"}))}this.tick()}},u.onFragParsingData=function(t){var i=this,e=this.fragCurrent,s=t.frag;if(e&&"main"===t.id&&s.sn===e.sn&&s.level===e.level&&("audio"!==t.type||!this.altAudio)&&this.state===lt){var n=this.levels[this.level],r=e;if(Object(h.a)(t.endPTS)||(t.endPTS=t.startPTS+e.duration,t.endDTS=t.startDTS+e.duration),!0===t.hasAudio&&r.addElementaryStream(p.AUDIO),!0===t.hasVideo&&r.addElementaryStream(p.VIDEO),c.b.log("Parsed "+t.type+",PTS:["+t.startPTS.toFixed(3)+","+t.endPTS.toFixed(3)+"],DTS:["+t.startDTS.toFixed(3)+"/"+t.endDTS.toFixed(3)+"],nb:"+t.nb+",dropped:"+(t.dropped||0)),"video"===t.type)if(r.dropped=t.dropped,r.dropped)if(r.backtracked)c.b.warn("Already backtracked on this fragment, appending with the gap",r.sn);else{var a=n.details;if(!a||r.sn!==a.startSN)return c.b.warn("missing video frame(s), backtracking fragment",r.sn),this.fragmentTracker.removeFragment(r),r.backtracked=!0,this.nextLoadPosition=t.startPTS,this.state=at,this.fragPrevious=r,void this.tick();c.b.warn("missing video frame(s) on first frag, appending with gap",r.sn)}else r.backtracked=!1;var l=K(n.details,r,t.startPTS,t.endPTS,t.startDTS,t.endDTS),u=this.hls;u.trigger(o.a.LEVEL_PTS_UPDATED,{details:n.details,level:this.level,drift:l,type:t.type,start:t.startPTS,end:t.endPTS}),[t.data1,t.data2].forEach(function(e){e&&e.length&&i.state===lt&&(i.appended=!0,i.pendingBuffering=!0,u.trigger(o.a.BUFFER_APPENDING,{type:t.type,data:e,parent:"main",content:"data"}))}),this.tick()}},u.onFragParsed=function(t){var i=this.fragCurrent,e=t.frag;i&&"main"===t.id&&e.sn===i.sn&&e.level===i.level&&this.state===lt&&(this.stats.tparsed=window.performance.now(),this.state=ut,this.ri())},u.onAudioTrackSwitching=function(t){var i=!!t.url,e=t.id;if(!i){if(this.mediaBuffer!==this.media){c.b.log("switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;var s=this.fragCurrent;s.loader&&(c.b.log("switching to main audio track, cancel main fragment load"),s.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.state=at}var n=this.hls;n.trigger(o.a.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),n.trigger(o.a.AUDIO_TRACK_SWITCHED,{id:e}),this.altAudio=!1}},u.onAudioTrackSwitched=function(t){var i=t.id,e=!!this.hls.audioTracks[i].url;if(e){var s=this.videoBuffer;s&&this.mediaBuffer!==s&&(c.b.log("switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=s)}this.altAudio=e,this.tick()},u.onBufferCreated=function(t){var i,e,s=t.tracks,n=!1;for(var r in s){var a=s[r];"main"===a.id?(e=r,i=a,"video"===r&&(this.videoBuffer=s[r].buffer)):n=!0}n&&i?(c.b.log("alternate track found, use "+e+".buffered to schedule main fragment loading"),this.mediaBuffer=i.buffer):this.mediaBuffer=this.media},u.onBufferAppended=function(t){if("main"===t.parent){var i=this.state;i!==lt&&i!==ut||(this.pendingBuffering=t.pending>0,this.ri())}},u.ri=function(){if(!(this.state!==ut||this.appended&&this.pendingBuffering)){var t=this.fragCurrent;if(t){var i=this.mediaBuffer?this.mediaBuffer:this.media;c.b.log("main buffered : "+Z.toString(i.buffered)),this.fragPrevious=t;var e=this.stats;e.tbuffered=window.performance.now(),this.fragLastKbps=Math.round(8*e.total/(e.tbuffered-e.tfirst)),this.hls.trigger(o.a.FRAG_BUFFERED,{stats:e,frag:t,id:"main"}),this.state=at}this.tick()}},u.onError=function(t){var i=t.frag||this.fragCurrent;if(!i||"main"===i.type){var e=!!this.media&&V.isBuffered(this.media,this.media.currentTime)&&V.isBuffered(this.media,this.media.currentTime+.5);switch(t.details){case a.a.FRAG_LOAD_ERROR:case a.a.FRAG_LOAD_TIMEOUT:case a.a.KEY_LOAD_ERROR:case a.a.KEY_LOAD_TIMEOUT:if(!t.fatal)if(this.fragLoadError+1<=this.config.fragLoadingMaxRetry){var s=Math.min(Math.pow(2,this.fragLoadError)*this.config.fragLoadingRetryDelay,this.config.fragLoadingMaxRetryTimeout);c.b.warn("mediaController: frag loading failed, retry in "+s+" ms"),this.retryDate=window.performance.now()+s,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.fragLoadError++,this.state=ct}else c.b.error("mediaController: "+t.details+" reaches max retry, redispatch as fatal ..."),t.fatal=!0,this.state=ft;break;case a.a.LEVEL_LOAD_ERROR:case a.a.LEVEL_LOAD_TIMEOUT:this.state!==ft&&(t.fatal?(this.state=ft,c.b.warn("streamController: "+t.details+",switch to "+this.state+" state ...")):t.levelRetry||this.state!==pt||(this.state=at));break;case a.a.BUFFER_FULL_ERROR:"main"!==t.parent||this.state!==lt&&this.state!==ut||(e?(this.si(this.config.maxBufferLength),this.state=at):(c.b.warn("buffer full error also media.currentTime is not buffered, flush everything"),this.fragCurrent=null,this.flushMainBuffer(0,Number.POSITIVE_INFINITY)))}}},u.si=function(t){var i=this.config;return i.maxMaxBufferLength>=t&&(i.maxMaxBufferLength/=2,c.b.warn("main:reduce max buffer length to "+i.maxMaxBufferLength+"s"),!0)},u.Qt=function(){var t=this.media;if(t&&0!==t.readyState){var i=(this.mediaBuffer?this.mediaBuffer:t).buffered;!this.loadedmetadata&&i.length?(this.loadedmetadata=!0,this.ai()):this.immediateSwitch?this.immediateLevelSwitchEnd():this.gapController.poll(this.lastCurrentTime,i)}},u.onFragLoadEmergencyAborted=function(){this.state=at,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tick()},u.onBufferFlushed=function(){var t=this.mediaBuffer?this.mediaBuffer:this.media;t&&this.fragmentTracker.detectEvictedFragments(p.VIDEO,t.buffered),this.state=at,this.fragPrevious=null},u.swapAudioCodec=function(){this.audioCodecSwap=!this.audioCodecSwap},u.ai=function(){var t=this.media,i=t.currentTime,e=t.seeking?i:this.startPosition;i!==e&&e>=0&&(c.b.log("target start position not buffered, seek to buffered.start(0) "+e+" from current time "+i+" "),t.currentTime=e)},u.ni=function(t){var i=this.config.defaultAudioCodec||t.audioCodec;return this.audioCodecSwap&&(c.b.log("swapping playlist audio codec"),i&&(i=-1!==i.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5")),i},r=s,(l=[{key:"state",set:function(t){if(this.state!==t){var i=this.state;this.Gt=t,c.b.log("main stream-controller: "+i+"->"+t),this.hls.trigger(o.a.STREAM_STATE_TRANSITION,{previousState:i,nextState:t})}},get:function(){return this.Gt}},{key:"currentLevel",get:function(){var t=this.media;if(t){var i=this.getBufferedFrag(t.currentTime);if(i)return i.level}return-1}},{key:"nextBufferedFrag",get:function(){var t=this.media;return t?this.followingBufferedFrag(this.getBufferedFrag(t.currentTime)):null}},{key:"nextLevel",get:function(){var t=this.nextBufferedFrag;return t?t.level:-1}},{key:"liveSyncPosition",get:function(){return this.oi},set:function(t){this.oi=t}}])&&bt(r.prototype,l),s}(function(t){var i,e;function s(){return t.apply(this,arguments)||this}e=t,(i=s).prototype=Object.create(e.prototype),i.prototype.constructor=i,i.__proto__=e;var n=s.prototype;return n.doTick=function(){},n.startLoad=function(){},n.stopLoad=function(){var t=this.fragCurrent;t&&(t.loader&&t.loader.abort(),this.fragmentTracker.removeFragment(t)),this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=rt},n.Yt=function(t,i){var e=this.fragCurrent,s=this.fragmentTracker;if(!i.live&&e&&!e.backtracked&&e.sn===i.endSN&&!t.nextStart){var n=s.getState(e);return n===F||"OK"===n}return!1},n.onMediaSeeking=function(){var t=this.config,i=this.media,e=this.mediaBuffer,s=this.state,n=i?i.currentTime:null,r=V.bufferInfo(e||i,n,this.config.maxBufferHole);if(Object(h.a)(n)&&c.b.log("media seeking to "+n.toFixed(3)),s===ot){var a=this.fragCurrent;if(0===r.len&&a){var o=t.maxFragLookUpTolerance,l=a.start-o,u=a.start+a.duration+o;n<l||n>u?(a.loader&&(c.b.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),a.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.state=at):c.b.log("seeking outside of buffer but within currently loaded fragment range")}}else"ENDED"===s&&(0===r.len&&(this.fragPrevious=null,this.fragCurrent=null),this.state=at);i&&(this.lastCurrentTime=n),this.loadedmetadata||(this.nextLoadPosition=this.startPosition=n),this.tick()},n.onMediaEnded=function(){this.startPosition=this.lastCurrentTime=0},n.onHandlerDestroying=function(){this.stopLoad(),t.prototype.onHandlerDestroying.call(this)},n.onHandlerDestroyed=function(){this.state=rt,this.fragmentTracker=null},n.computeLivePosition=function(t,i){var e=void 0!==this.config.liveSyncDuration?this.config.liveSyncDuration:this.config.liveSyncDurationCount*i.targetduration;return t+Math.max(0,i.totalduration-e)},s}(function(t){var i,e;function s(i){for(var e,s=arguments.length,n=new Array(s>1?s-1:0),r=1;r<s;r++)n[r-1]=arguments[r];return(e=t.call.apply(t,[this,i].concat(n))||this).ci=void 0,e.li=null,e.ui=null,e.di=0,e.ci=e.tick.bind(function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(e)),e}e=t,(i=s).prototype=Object.create(e.prototype),i.prototype.constructor=i,i.__proto__=e;var n=s.prototype;return n.onHandlerDestroying=function(){this.clearNextTick(),this.clearInterval()},n.hasInterval=function(){return!!this.ui},n.hasNextTick=function(){return!!this.li},n.setInterval=function(t){return!this.ui&&(this.ui=self.setInterval(this.ci,t),!0)},n.clearInterval=function(){return!!this.ui&&(self.clearInterval(this.ui),this.ui=null,!0)},n.clearNextTick=function(){return!!this.li&&(self.clearTimeout(this.li),this.li=null,!0)},n.tick=function(){this.di++,1===this.di&&(this.doTick(),this.di>1&&(this.clearNextTick(),this.li=self.setTimeout(this.ci,0)),this.di=0)},n.doTick=function(){},s}(u)));function mt(t,i){for(var e=0;e<i.length;e++){var s=i[e];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}window.performance;var gt,yt=function(t){var i,e;function s(i){var e;return(e=t.call(this,i,o.a.MANIFEST_LOADED,o.a.LEVEL_LOADED,o.a.AUDIO_TRACK_SWITCHED,o.a.FRAG_LOADED,o.a.ERROR)||this).canload=!1,e.currentLevelIndex=null,e.manualLevelIndex=-1,e.timer=null,gt=/chrome|firefox/.test(navigator.userAgent.toLowerCase()),e}e=t,(i=s).prototype=Object.create(e.prototype),i.prototype.constructor=i,i.__proto__=e;var n,r,h=s.prototype;return h.onHandlerDestroying=function(){this.clearTimer(),this.manualLevelIndex=-1},h.clearTimer=function(){null!==this.timer&&(clearTimeout(this.timer),this.timer=null)},h.startLoad=function(){var t=this.fi;this.canload=!0,this.levelRetryCount=0,t&&t.forEach(function(t){t.loadError=0;var i=t.details;i&&i.live&&(t.details=void 0)}),null!==this.timer&&this.loadLevel()},h.stopLoad=function(){this.canload=!1},h.onManifestLoaded=function(t){var i,e=[],s=[],n={},r=null,h=!1,l=!1;if(t.levels.forEach(function(t){var i=t.attrs;t.loadError=0,t.fragmentError=!1,h=h||!!t.videoCodec,l=l||!!t.audioCodec,gt&&t.audioCodec&&-1!==t.audioCodec.indexOf("mp4a.40.34")&&(t.audioCodec=void 0),(r=n[t.bitrate])?r.url.push(t.url):(t.url=[t.url],t.urlId=0,n[t.bitrate]=t,e.push(t)),i&&(i.AUDIO&&(l=!0,X(r||t,"audio",i.AUDIO)),i.SUBTITLES&&X(r||t,"text",i.SUBTITLES))}),h&&l&&(e=e.filter(function(t){return!!t.videoCodec})),e=e.filter(function(t){var i=t.audioCodec,e=t.videoCodec;return(!i||O(i,"audio"))&&(!e||O(e,"video"))}),t.audioTracks&&(s=t.audioTracks.filter(function(t){return!t.audioCodec||O(t.audioCodec,"audio")})).forEach(function(t,i){t.id=i}),e.length>0){i=e[0].bitrate,e.sort(function(t,i){return t.bitrate-i.bitrate}),this.fi=e;for(var u=0;u<e.length;u++)if(e[u].bitrate===i){this.pi=u,c.b.log("manifest loaded,"+e.length+" level(s) found, first bitrate:"+i);break}this.hls.trigger(o.a.MANIFEST_PARSED,{levels:e,audioTracks:s,firstLevel:this.pi,stats:t.stats,audio:l,video:h,altAudio:s.some(function(t){return!!t.url})})}else this.hls.trigger(o.a.ERROR,{type:a.b.MEDIA_ERROR,details:a.a.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:this.hls.url,reason:"no level with compatible codecs found in manifest"})},h.setLevelInternal=function(t){var i=this.fi,e=this.hls;if(t>=0&&t<i.length){if(this.clearTimer(),this.currentLevelIndex!==t){c.b.log("switching to level "+t),this.currentLevelIndex=t;var s=i[t];s.level=t,e.trigger(o.a.LEVEL_SWITCHING,s)}var n=i[t],r=n.details;if(!r||r.live){var h=n.urlId;e.trigger(o.a.LEVEL_LOADING,{url:n.url[h],level:t,id:h})}}else e.trigger(o.a.ERROR,{type:a.b.OTHER_ERROR,details:a.a.LEVEL_SWITCH_ERROR,level:t,fatal:!1,reason:"invalid level idx"})},h.onError=function(t){if(t.fatal)t.type===a.b.NETWORK_ERROR&&this.clearTimer();else{var i,e=!1,s=!1;switch(t.details){case a.a.FRAG_LOAD_ERROR:case a.a.FRAG_LOAD_TIMEOUT:case a.a.KEY_LOAD_ERROR:case a.a.KEY_LOAD_TIMEOUT:i=t.frag.level,s=!0;break;case a.a.LEVEL_LOAD_ERROR:case a.a.LEVEL_LOAD_TIMEOUT:i=t.context.level,e=!0;break;case a.a.REMUX_ALLOC_ERROR:i=t.level,e=!0}void 0!==i&&this.recoverLevel(t,i,e,s)}},h.recoverLevel=function(t,i,e,s){var n,r,a,h=this,o=this.hls.config,l=t.details,u=this.fi[i];if(u.loadError++,u.fragmentError=s,e){if(!(this.levelRetryCount+1<=o.levelLoadingMaxRetry))return c.b.error("level controller, cannot recover from "+l+" error"),this.currentLevelIndex=null,this.clearTimer(),void(t.fatal=!0);r=Math.min(Math.pow(2,this.levelRetryCount)*o.levelLoadingRetryDelay,o.levelLoadingMaxRetryTimeout),this.timer=setTimeout(function(){return h.loadLevel()},r),t.levelRetry=!0,this.levelRetryCount++,c.b.warn("level controller, "+l+", retry in "+r+" ms, current retry count is "+this.levelRetryCount)}(e||s)&&((n=u.url.length)>1&&u.loadError<n?(u.urlId=(u.urlId+1)%n,u.details=void 0,c.b.warn("level controller, "+l+" for level "+i+": switching to redundant URL-id "+u.urlId)):-1===this.manualLevelIndex?(a=0===i?this.fi.length-1:i-1,c.b.warn("level controller, "+l+": switch to "+a),this.hls.nextAutoLevel=this.currentLevelIndex=a):s&&(c.b.warn("level controller, "+l+": reload a fragment"),this.currentLevelIndex=null))},h.onFragLoaded=function(t){var i=t.frag;if(void 0!==i&&"main"===i.type){var e=this.fi[i.level];void 0!==e&&(e.fragmentError=!1,e.loadError=0,this.levelRetryCount=0)}},h.onLevelLoaded=function(t){var i=this,e=t.level,s=t.details;if(e===this.currentLevelIndex){var n=this.fi[e];if(n.fragmentError||(n.loadError=0,this.levelRetryCount=0),s.live){var r=function(t,i,e){var s=1e3*(i.averagetargetduration?i.averagetargetduration:i.targetduration),n=s/2;return t&&i.endSN===t.endSN&&(s=n),e&&(s=Math.max(n,s-(window.performance.now()-e))),Math.round(s)}(n.details,s,t.stats.trequest);c.b.log("live playlist, reload in "+Math.round(r)+" ms"),this.timer=setTimeout(function(){return i.loadLevel()},r)}else this.clearTimer()}},h.onAudioTrackSwitched=function(t){var i=this.hls.audioTracks[t.id].groupId,e=this.hls.levels[this.currentLevelIndex];if(e&&e.audioGroupIds){for(var s=-1,n=0;n<e.audioGroupIds.length;n++)if(e.audioGroupIds[n]===i){s=n;break}s!==e.urlId&&(e.urlId=s,this.startLoad())}},h.loadLevel=function(){if(c.b.debug("call to loadLevel"),null!==this.currentLevelIndex&&this.canload){var t=this.fi[this.currentLevelIndex];if("object"==typeof t&&t.url.length>0){var i=this.currentLevelIndex,e=t.urlId,s=t.url[e];c.b.log("Attempt loading level index "+i+" with URL-id "+e),this.hls.trigger(o.a.LEVEL_LOADING,{url:s,level:i,id:e})}}},n=s,(r=[{key:"levels",get:function(){return this.fi}},{key:"level",get:function(){return this.currentLevelIndex},set:function(t){var i=this.fi;i&&(t=Math.min(t,i.length-1),this.currentLevelIndex===t&&i[t].details||this.setLevelInternal(t))}},{key:"manualLevel",get:function(){return this.manualLevelIndex},set:function(t){this.manualLevelIndex=t,void 0===this.bi&&(this.bi=t),-1!==t&&(this.level=t)}},{key:"firstLevel",get:function(){return this.pi},set:function(t){this.pi=t}},{key:"startLevel",get:function(){if(void 0===this.bi){var t=this.hls.config.startLevel;return void 0!==t?t:this.pi}return this.bi},set:function(t){this.bi=t}},{key:"nextLoadLevel",get:function(){return-1!==this.manualLevelIndex?this.manualLevelIndex:this.hls.nextAutoLevel},set:function(t){this.level=t,-1===this.manualLevelIndex&&(this.hls.nextAutoLevel=t)}}])&&mt(n.prototype,r),s}(u),wt=e(4);function xt(t,i){var e;try{e=new Event("addtrack")}catch(t){(e=document.createEvent("Event")).initEvent("addtrack",!1,!1)}e.track=t,i.dispatchEvent(e)}var kt=function(t){var i,e;function s(i){var e;return(e=t.call(this,i,o.a.MEDIA_ATTACHED,o.a.MEDIA_DETACHING,o.a.FRAG_PARSING_METADATA,o.a.LIVE_BACK_BUFFER_REACHED)||this).id3Track=void 0,e.media=void 0,e}e=t,(i=s).prototype=Object.create(e.prototype),i.prototype.constructor=i,i.__proto__=e;var n=s.prototype;return n.destroy=function(){u.prototype.destroy.call(this)},n.onMediaAttached=function(t){this.media=t.media,this.media},n.onMediaDetaching=function(){!function(t){if(t&&t.cues)for(;t.cues.length>0;)t.removeCue(t.cues[0])}(this.id3Track),this.id3Track=void 0,this.media=void 0},n.getID3Track=function(t){for(var i=0;i<t.length;i++){var e=t[i];if("metadata"===e.kind&&"id3"===e.label)return xt(e,this.media),e}return this.media.addTextTrack("metadata","id3")},n.onFragParsingMetadata=function(t){var i=t.frag,e=t.samples;this.id3Track||(this.id3Track=this.getID3Track(this.media.textTracks),this.id3Track.mode="hidden");for(var s=this.hls.config.cnxRenderWindow.WebKitDataCue||his.hls.config.cnxRenderWindow.VTTCue||his.hls.config.cnxRenderWindow.TextTrackCue,n=0;n<e.length;n++){var r=wt.a.getID3Frames(e[n].data);if(r){var a=e[n].pts,h=n<e.length-1?e[n+1].pts:i.endPTS;a===h?h+=1e-4:a>h&&(c.b.warn("detected an id3 sample with endTime < startTime, adjusting endTime to (startTime + 0.25)"),h=a+.25);for(var o=0;o<r.length;o++){var l=r[o];if(!wt.a.isTimeStampFrame(l)){var u=new s(a,h,"");u.value=l,this.id3Track.addCue(u)}}}}},n.onLiveBackBufferReached=function(t){var i=t.bufferEnd,e=this.id3Track;if(e&&e.cues&&e.cues.length){var s=function(t,i){if(i<t[0].endTime)return t[0];if(i>t[t.length-1].endTime)return t[t.length-1];for(var e=0,s=t.length-1;e<=s;){var n=Math.floor((s+e)/2);if(i<t[n].endTime)s=n-1;else{if(!(i>t[n].endTime))return t[n];e=n+1}}return t[e].endTime-i<i-t[s].endTime?t[e]:t[s]}(e.cues,i);if(s)for(;e.cues[0]!==s;)e.removeCue(e.cues[0])}},s}(u),St=function(){function t(t){this.alpha_=void 0,this.estimate_=void 0,this.totalWeight_=void 0,this.alpha_=t?Math.exp(Math.log(.5)/t):0,this.estimate_=0,this.totalWeight_=0}var i=t.prototype;return i.sample=function(t,i){var e=Math.pow(this.alpha_,t);this.estimate_=i*(1-e)+e*this.estimate_,this.totalWeight_+=t},i.getTotalWeight=function(){return this.totalWeight_},i.getEstimate=function(){if(this.alpha_){var t=1-Math.pow(this.alpha_,this.totalWeight_);return this.estimate_/t}return this.estimate_},t}(),Ot=function(){function t(t,i,e,s){this.hls=void 0,this.defaultEstimate_=void 0,this.minWeight_=void 0,this.minDelayMs_=void 0,this.slow_=void 0,this.fast_=void 0,this.hls=t,this.defaultEstimate_=s,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new St(i),this.fast_=new St(e)}var i=t.prototype;return i.sample=function(t,i){var e=(t=Math.max(t,this.minDelayMs_))/1e3,s=8*i/e;this.fast_.sample(e,s),this.slow_.sample(e,s)},i.canEstimate=function(){var t=this.fast_;return t&&t.getTotalWeight()>=this.minWeight_},i.getEstimate=function(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_},i.destroy=function(){},t}();function _t(t,i){for(var e=0;e<i.length;e++){var s=i[e];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}var jt=window.performance,At=function(t){var i,e;function s(i){var e;return(e=t.call(this,i,o.a.FRAG_LOADING,o.a.FRAG_LOADED,o.a.FRAG_BUFFERED,o.a.ERROR)||this).lastLoadedFragLevel=0,e.vi=-1,e.hls=i,e.timer=null,e.bwEstimator=null,e.onCheck=e.mi.bind(function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(e)),e}e=t,(i=s).prototype=Object.create(e.prototype),i.prototype.constructor=i,i.__proto__=e;var n,r,l=s.prototype;return l.destroy=function(){this.clearTimer(),u.prototype.destroy.call(this)},l.onFragLoading=function(t){var i=t.frag;if("main"===i.type&&(this.timer||(this.fragCurrent=i,this.timer=setInterval(this.onCheck,100)),!this.bwEstimator)){var e,s,n=this.hls,r=n.config,a=i.level;n.levels[a].details.live?(e=r.abrEwmaFastLive,s=r.abrEwmaSlowLive):(e=r.abrEwmaFastVoD,s=r.abrEwmaSlowVoD),this.bwEstimator=new Ot(n,s,e,r.abrEwmaDefaultEstimate)}},l.mi=function(){var t=this.hls,i=t.media,e=this.fragCurrent;if(e){var s=e.loader,n=t.minAutoLevel;if(!s||s.stats&&s.stats.aborted)return c.b.warn("frag loader destroy or aborted, disarm abandonRules"),this.clearTimer(),void(this.vi=-1);var r=s.stats;if(i&&r&&(!i.paused&&0!==i.playbackRate||!i.readyState)&&e.autoLevel&&e.level){var a=jt.now()-r.trequest,h=Math.abs(i.playbackRate);if(a>500*e.duration/h){var l=t.levels,u=Math.max(1,r.bw?r.bw/8:1e3*r.loaded/a),d=l[e.level],f=d.realBitrate?Math.max(d.realBitrate,d.bitrate):d.bitrate,p=r.total?r.total:Math.max(r.loaded,Math.round(e.duration*f/8)),b=i.currentTime,v=(p-r.loaded)/u,m=(V.bufferInfo(i,b,t.config.maxBufferHole).end-b)/h;if(m<2*e.duration/h&&v>m){var g;for(g=e.level-1;g>n;g--){var y=l[g].realBitrate?Math.max(l[g].realBitrate,l[g].bitrate):l[g].bitrate;if(e.duration*y/(6.4*u)<m)break}void 0<v&&(c.b.warn("loading too slow, abort fragment loading and switch to level "+g+":fragLoadedDelay["+g+"]<fragLoadedDelay["+(e.level-1)+"];bufferStarvationDelay:"+(void 0).toFixed(1)+"<"+v.toFixed(1)+":"+m.toFixed(1)),t.nextLoadLevel=g,this.bwEstimator.sample(a,r.loaded),s.abort(),this.clearTimer(),t.trigger(o.a.FRAG_LOAD_EMERGENCY_ABORTED,{frag:e,stats:r}))}}}}},l.onFragLoaded=function(t){var i=t.frag;if("main"===i.type&&Object(h.a)(i.sn)){if(this.clearTimer(),this.lastLoadedFragLevel=i.level,this.vi=-1,this.hls.config.abrMaxWithRealBitrate){var e=this.hls.levels[i.level],s=(e.loaded?e.loaded.bytes:0)+t.stats.loaded,n=(e.loaded?e.loaded.duration:0)+t.frag.duration;e.loaded={bytes:s,duration:n},e.realBitrate=Math.round(8*s/n)}if(t.frag.bitrateTest){var r=t.stats;r.tparsed=r.tbuffered=r.tload,this.onFragBuffered(t)}}},l.onFragBuffered=function(t){var i=t.stats,e=t.frag;if(!0!==i.aborted&&"main"===e.type&&Object(h.a)(e.sn)&&(!e.bitrateTest||i.tload===i.tbuffered)){var s=i.tparsed-i.trequest;c.b.log("latency/loading/parsing/append/kbps:"+Math.round(i.tfirst-i.trequest)+"/"+Math.round(i.tload-i.tfirst)+"/"+Math.round(i.tparsed-i.tload)+"/"+Math.round(i.tbuffered-i.tparsed)+"/"+Math.round(8*i.loaded/(i.tbuffered-i.trequest))),this.bwEstimator.sample(s,i.loaded),i.bwEstimate=this.bwEstimator.getEstimate(),e.bitrateTest?this.bitrateTestDelay=s/1e3:this.bitrateTestDelay=0}},l.onError=function(t){switch(t.details){case a.a.FRAG_LOAD_ERROR:case a.a.FRAG_LOAD_TIMEOUT:this.clearTimer()}},l.clearTimer=function(){clearInterval(this.timer),this.timer=null},l.gi=function(t,i,e,s,n,r,a,h,o){for(var l=n;l>=s;l--){var u=o[l];if(u){var d=u.details,f=d?d.totalduration/d.fragments.length:i,p=!!d&&d.live,b=void 0;b=l<=t?a*e:h*e;var v=o[l].realBitrate?Math.max(o[l].realBitrate,o[l].bitrate):o[l].bitrate,m=v*f/b;if(c.b.trace("level/adjustedbw/bitrate/avgDuration/maxFetchDuration/fetchDuration: "+l+"/"+Math.round(b)+"/"+v+"/"+f+"/"+r+"/"+m),b>v&&(!m||p&&!this.bitrateTestDelay||m<r))return l}}return-1},n=s,(r=[{key:"nextAutoLevel",get:function(){var t=this.vi,i=this.bwEstimator;if(!(-1===t||i&&i.canEstimate()))return t;var e=this.nextABRAutoLevel;return-1!==t&&(e=Math.min(t,e)),e},set:function(t){this.vi=t}},{key:"nextABRAutoLevel",get:function(){var t=this.hls,i=t.maxAutoLevel,e=t.levels,s=t.config,n=t.minAutoLevel,r=t.media,a=this.lastLoadedFragLevel,h=this.fragCurrent?this.fragCurrent.duration:0,o=r?r.currentTime:0,l=r&&0!==r.playbackRate?Math.abs(r.playbackRate):1,u=this.bwEstimator?this.bwEstimator.getEstimate():s.abrEwmaDefaultEstimate,d=(V.bufferInfo(r,o,s.maxBufferHole).end-o)/l,f=this.gi(a,h,u,n,i,d,s.abrBandWidthFactor,s.abrBandWidthUpFactor,e);if(f>=0)return f;c.b.trace("rebuffering expected to happen, lets try to find a quality level minimizing the rebuffering");var p=h?Math.min(h,s.maxStarvationDelay):s.maxStarvationDelay,b=s.abrBandWidthFactor,v=s.abrBandWidthUpFactor;if(0===d){var m=this.bitrateTestDelay;m&&(p=(h?Math.min(h,s.maxLoadingDelay):s.maxLoadingDelay)-m,c.b.trace("bitrate test took "+Math.round(1e3*m)+"ms, set first fragment max fetchDuration to "+Math.round(1e3*p)+" ms"),b=v=1)}return f=this.gi(a,h,u,n,i,d+p,b,v,e),Math.max(f,0)}}])&&_t(n.prototype,r),s}(u),It=z(),Tt=function(t){var i,e;function s(i){var e;return(e=t.call(this,i,o.a.MEDIA_ATTACHING,o.a.MEDIA_DETACHING,o.a.MANIFEST_PARSED,o.a.BUFFER_RESET,o.a.BUFFER_APPENDING,o.a.BUFFER_CODECS,o.a.BUFFER_EOS,o.a.BUFFER_FLUSHING,o.a.LEVEL_PTS_UPDATED,o.a.LEVEL_UPDATED)||this).yi=null,e.wi=null,e.xi=10,e.ki=null,e.Si=null,e.Oi=!1,e._i=!1,e.config=void 0,e.audioTimestampOffset=void 0,e.bufferCodecEventsExpected=0,e.ji=0,e.media=null,e.mediaSource=null,e.segments=[],e.parent=void 0,e.appending=!1,e.appended=0,e.appendError=0,e.flushBufferCounter=0,e.tracks={},e.pendingTracks={},e.sourceBuffer={},e.flushRange=[],e.Ai=function(){c.b.log("media source opened"),e.hls.trigger(o.a.MEDIA_ATTACHED,{media:e.media});var t=e.mediaSource;t&&t.removeEventListener("sourceopen",e.Ai),e.checkPendingTracks()},e.Ii=function(){c.b.log("media source closed")},e.Ti=function(){c.b.log("media source ended")},e.Ci=function(){if(e.audioTimestampOffset&&e.sourceBuffer.audio){var t=e.sourceBuffer.audio;c.b.warn("change mpeg audio timestamp offset from "+t.timestampOffset+" to "+e.audioTimestampOffset),t.timestampOffset=e.audioTimestampOffset,delete e.audioTimestampOffset}e.Oi&&e.doFlush(),e._i&&e.checkEos(),e.appending=!1;var i=e.parent,s=e.segments.reduce(function(t,e){return e.parent===i?t+1:t},0),n={},r=e.sourceBuffer;for(var a in r){var h=r[a];if(!h)throw Error("handling source buffer update end error: source buffer for "+a+" uninitilized and unable to update buffered TimeRanges.");n[a]=h.buffered}e.hls.trigger(o.a.BUFFER_APPENDED,{parent:i,pending:s,timeRanges:n}),e.Oi||e.doAppending(),e.updateMediaElementDuration(),0===s&&e.flushLiveBackBuffer()},e.Pi=function(t){c.b.error("sourceBuffer error:",t),e.hls.trigger(o.a.ERROR,{type:a.b.MEDIA_ERROR,details:a.a.BUFFER_APPENDING_ERROR,fatal:!1})},e.config=i.config,e}e=t,(i=s).prototype=Object.create(e.prototype),i.prototype.constructor=i,i.__proto__=e;var n=s.prototype;return n.destroy=function(){u.prototype.destroy.call(this)},n.onLevelPtsUpdated=function(t){var i=t.type,e=this.tracks.audio;if("audio"===i&&e&&"audio/mpeg"===e.container){var s=this.sourceBuffer.audio;if(!s)throw Error("Level PTS Updated and source buffer for audio uninitalized");if(Math.abs(s.timestampOffset-t.start)>.1){var n=s.updating;try{s.abort()}catch(t){c.b.warn("can not abort audio buffer: "+t)}n?this.audioTimestampOffset=t.start:(c.b.warn("change mpeg audio timestamp offset from "+s.timestampOffset+" to "+t.start),s.timestampOffset=t.start)}}},n.onManifestParsed=function(t){this.bufferCodecEventsExpected=this.ji=t.altAudio?2:1,c.b.log(this.bufferCodecEventsExpected+" bufferCodec event(s) expected")},n.onMediaAttaching=function(t){var i=this.media=t.media;if(i&&It){var e=this.mediaSource=new It;e.addEventListener("sourceopen",this.Ai),e.addEventListener("sourceended",this.Ti),e.addEventListener("sourceclose",this.Ii),i.src=window.URL.createObjectURL(e),this.Si=i.src}},n.onMediaDetaching=function(){c.b.log("media source detaching");var t=this.mediaSource;if(t){if("open"===t.readyState)try{t.endOfStream()}catch(t){c.b.warn("onMediaDetaching:"+t.message+" while calling endOfStream")}t.removeEventListener("sourceopen",this.Ai),t.removeEventListener("sourceended",this.Ti),t.removeEventListener("sourceclose",this.Ii),this.media&&(this.Si&&this.hls.config.cnxRenderWindow.URL.revokeObjectURL(this.Si),this.media.src===this.Si?(this.media.removeAttribute("src"),this.media.load()):c.b.warn("media.src was changed by a third party - skip cleanup")),this.mediaSource=null,this.media=null,this.Si=null,this.bufferCodecEventsExpected=this.ji,this.pendingTracks={},this.tracks={},this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0}this.hls.trigger(o.a.MEDIA_DETACHED)},n.checkPendingTracks=function(){var t=this.bufferCodecEventsExpected,i=this.pendingTracks,e=Object.keys(i).length;(e&&!t||2===e)&&(this.createSourceBuffers(i),this.pendingTracks={},this.doAppending())},n.onBufferReset=function(){var t=this.sourceBuffer;for(var i in t){var e=t[i];try{e&&(this.mediaSource&&this.mediaSource.removeSourceBuffer(e),e.removeEventListener("updateend",this.Ci),e.removeEventListener("error",this.Pi))}catch(t){}}this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0},n.onBufferCodecs=function(t){var i=this;Object.keys(this.sourceBuffer).length||(Object.keys(t).forEach(function(e){i.pendingTracks[e]=t[e]}),this.bufferCodecEventsExpected=Math.max(this.bufferCodecEventsExpected-1,0),this.mediaSource&&"open"===this.mediaSource.readyState&&this.checkPendingTracks())},n.createSourceBuffers=function(t){var i=this.sourceBuffer,e=this.mediaSource;if(!e)throw Error("createSourceBuffers called when mediaSource was null");for(var s in t)if(!i[s]){var n=t[s];if(!n)throw Error("source buffer exists for track "+s+", however track does not");var r=n.levelCodec||n.codec,h=n.container+";codecs="+r;c.b.log("creating sourceBuffer("+h+")");try{var l=i[s]=e.addSourceBuffer(h);l.addEventListener("updateend",this.Ci),l.addEventListener("error",this.Pi),this.tracks[s]={buffer:l,codec:r,id:n.id,container:n.container,levelCodec:n.levelCodec}}catch(t){c.b.error("error while trying to add sourceBuffer:"+t.message),this.hls.trigger(o.a.ERROR,{type:a.b.MEDIA_ERROR,details:a.a.BUFFER_ADD_CODEC_ERROR,fatal:!1,err:t,mimeType:h})}}this.hls.trigger(o.a.BUFFER_CREATED,{tracks:this.tracks})},n.onBufferAppending=function(t){this.Oi||(this.segments?this.segments.push(t):this.segments=[t],this.doAppending())},n.onBufferEos=function(t){for(var i in this.sourceBuffer)if(!t.type||t.type===i){var e=this.sourceBuffer[i];e&&!e.ended&&(e.ended=!0,c.b.log(i+" sourceBuffer now EOS"))}this.checkEos()},n.checkEos=function(){var t=this.sourceBuffer,i=this.mediaSource;if(i&&"open"===i.readyState){for(var e in t){var s=t[e];if(s){if(!s.ended)return;if(s.updating)return void(this._i=!0)}}c.b.log("all media data are available, signal endOfStream() to MediaSource and stop loading fragment");try{i.endOfStream()}catch(t){c.b.warn("exception while calling mediaSource.endOfStream()")}this._i=!1}else this._i=!1},n.onBufferFlushing=function(t){t.type?this.flushRange.push({start:t.startOffset,end:t.endOffset,type:t.type}):(this.flushRange.push({start:t.startOffset,end:t.endOffset,type:"video"}),this.flushRange.push({start:t.startOffset,end:t.endOffset,type:"audio"})),this.flushBufferCounter=0,this.doFlush()},n.flushLiveBackBuffer=function(){if(this.ki){var t=this.config.liveBackBufferLength;if(isFinite(t)&&!(t<0))if(this.media)for(var i=this.media.currentTime,e=this.sourceBuffer,s=Object.keys(e),n=i-Math.max(t,this.xi),r=s.length-1;r>=0;r--){var a=s[r],h=e[a];if(h){var l=h.buffered;l.length>0&&n>l.start(0)&&this.removeBufferRange(a,h,0,n)&&this.hls.trigger(o.a.LIVE_BACK_BUFFER_REACHED,{bufferEnd:n})}}else c.b.error("flushLiveBackBuffer called without attaching media")}},n.onLevelUpdated=function(t){var i=t.details;i.fragments.length>0&&(this.wi=i.totalduration+i.fragments[0].start,this.xi=i.averagetargetduration||i.targetduration||10,this.ki=i.live,this.updateMediaElementDuration())},n.updateMediaElementDuration=function(){var t,i=this.config;if(null!==this.wi&&this.media&&this.mediaSource&&this.sourceBuffer&&0!==this.media.readyState&&"open"===this.mediaSource.readyState){for(var e in this.sourceBuffer){var s=this.sourceBuffer[e];if(s&&!0===s.updating)return}t=this.media.duration,null===this.yi&&(this.yi=this.mediaSource.duration),!0===this.ki&&!0===i.liveDurationInfinity?(c.b.log("Media Source duration is set to Infinity"),this.yi=this.mediaSource.duration=1/0):(this.wi>this.yi&&this.wi>t||!Object(h.a)(t))&&(c.b.log("Updating Media Source duration to "+this.wi.toFixed(3)),this.yi=this.mediaSource.duration=this.wi)}},n.doFlush=function(){for(;this.flushRange.length;){var t=this.flushRange[0];if(!this.flushBuffer(t.start,t.end,t.type))return void(this.Oi=!0);this.flushRange.shift(),this.flushBufferCounter=0}if(0===this.flushRange.length){this.Oi=!1;var i=0,e=this.sourceBuffer;try{for(var s in e){var n=e[s];n&&(i+=n.buffered.length)}}catch(t){c.b.error("error while accessing sourceBuffer.buffered")}this.appended=i,this.hls.trigger(o.a.BUFFER_FLUSHED)}},n.doAppending=function(){var t=this.config,i=this.hls,e=this.segments,s=this.sourceBuffer;if(Object.keys(s).length){if(!this.media||this.media.error)return this.segments=[],void c.b.error("trying to append although a media error occured, flush segment and abort");if(!this.appending){var n=e.shift();if(n)try{var r=s[n.type];if(!r)return void this.Ci();if(r.updating)return void e.unshift(n);r.ended=!1,this.parent=n.parent,r.appendBuffer(n.data),this.appendError=0,this.appended++,this.appending=!0}catch(s){c.b.error("error while trying to append buffer:"+s.message),e.unshift(n);var h={type:a.b.MEDIA_ERROR,parent:n.parent,details:"",fatal:!1};22===s.code?(this.segments=[],h.details=a.a.BUFFER_FULL_ERROR):(this.appendError++,h.details=a.a.BUFFER_APPEND_ERROR,this.appendError>t.appendErrorMaxRetry&&(c.b.log("fail "+t.appendErrorMaxRetry+" times to append segment in sourceBuffer"),this.segments=[],h.fatal=!0)),i.trigger(o.a.ERROR,h)}}}},n.flushBuffer=function(t,i,e){var s=this.sourceBuffer;if(!Object.keys(s).length)return!0;var n="null";if(this.media&&(n=this.media.currentTime.toFixed(3)),c.b.log("flushBuffer,pos/start/end: "+n+"/"+t+"/"+i),this.flushBufferCounter>=this.appended)return c.b.warn("abort flushing too many retries"),!0;var r=s[e];if(r){if(r.ended=!1,r.updating)return c.b.warn("cannot flush, sb updating in progress"),!1;if(this.removeBufferRange(e,r,t,i))return this.flushBufferCounter++,!1}return c.b.log("buffer flushed"),!0},n.removeBufferRange=function(t,i,e,s){try{for(var n=0;n<i.buffered.length;n++){var r=i.buffered.start(n),a=i.buffered.end(n),h=Math.max(r,e),o=Math.min(a,s);if(Math.min(o,a)-h>.5){var l="null";return this.media&&(l=this.media.currentTime.toString()),c.b.log("sb remove "+t+" ["+h+","+o+"], of ["+r+","+a+"], pos:"+l),i.remove(h,o),!0}}}catch(t){c.b.warn("removeBufferRange failed",t)}return!1},s}(u);function Ct(t,i){for(var e=0;e<i.length;e++){var s=i[e];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}var Pt,Mt=function(t){var i,e;function s(i){var e;return(e=t.call(this,i,o.a.FPS_DROP_LEVEL_CAPPING,o.a.MEDIA_ATTACHING,o.a.MANIFEST_PARSED,o.a.BUFFER_CODECS,o.a.MEDIA_DETACHING)||this).autoLevelCapping=Number.POSITIVE_INFINITY,e.firstLevel=null,e.levels=[],e.media=null,e.restrictedLevels=[],e.timer=null,e}e=t,(i=s).prototype=Object.create(e.prototype),i.prototype.constructor=i,i.__proto__=e;var n,r,a,h=s.prototype;return h.destroy=function(){this.hls.config.capLevelToPlayerSize&&(this.media=null,this.stopCapping())},h.onFpsDropLevelCapping=function(t){s.isLevelAllowed(t.droppedLevel,this.restrictedLevels)&&this.restrictedLevels.push(t.droppedLevel)},h.onMediaAttaching=function(t){this.media=t.media instanceof this.hls.config.cnxRenderWindow.HTMLVideoElement?t.media:null},h.onManifestParsed=function(t){var i=this.hls;this.restrictedLevels=[],this.levels=t.levels,this.firstLevel=t.firstLevel,i.config.capLevelToPlayerSize&&t.video&&this.startCapping()},h.onBufferCodecs=function(t){this.hls.config.capLevelToPlayerSize&&t.video&&this.startCapping()},h.onLevelsUpdated=function(t){this.levels=t.levels},h.onMediaDetaching=function(){this.stopCapping()},h.detectPlayerSize=function(){if(this.media){var t=this.levels?this.levels.length:0;if(t){var i=this.hls;i.autoLevelCapping=this.getMaxLevel(t-1),i.autoLevelCapping>this.autoLevelCapping&&i.streamController.nextLevelSwitch(),this.autoLevelCapping=i.autoLevelCapping}}},h.getMaxLevel=function(t){var i=this;if(!this.levels)return-1;var e=this.levels.filter(function(e,n){return s.isLevelAllowed(n,i.restrictedLevels)&&n<=t});return s.getMaxLevelByMediaSize(e,this.mediaWidth,this.mediaHeight)},h.startCapping=function(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,this.hls.firstLevel=this.getMaxLevel(this.firstLevel),clearInterval(this.timer),this.timer=setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())},h.stopCapping=function(){this.restrictedLevels=[],this.firstLevel=null,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(this.timer=clearInterval(this.timer),this.timer=null)},s.isLevelAllowed=function(t,i){return void 0===i&&(i=[]),-1===i.indexOf(t)},s.getMaxLevelByMediaSize=function(t,i,e){if(!t||t&&!t.length)return-1;for(var s,n,r=t.length-1,a=0;a<t.length;a+=1){var h=t[a];if((h.width>=i||h.height>=e)&&(s=h,!(n=t[a+1])||s.width!==n.width||s.height!==n.height)){r=a;break}}return r},n=s,a=[{key:"contentScaleFactor",get:function(){return 1}}],(r=[{key:"mediaWidth",get:function(){var t,i=this.media;return i&&(t=i.width||i.clientWidth||i.offsetWidth,t*=s.contentScaleFactor),t}},{key:"mediaHeight",get:function(){var t,i=this.media;return i&&(t=i.height||i.clientHeight||i.offsetHeight,t*=s.contentScaleFactor),t}}])&&Ct(n.prototype,r),a&&Ct(n,a),s}(u),Et=window.performance,Lt=function(t){var i,e;function s(i){return t.call(this,i,o.a.MEDIA_ATTACHING)||this}e=t,(i=s).prototype=Object.create(e.prototype),i.prototype.constructor=i,i.__proto__=e;var n=s.prototype;return n.destroy=function(){this.timer&&clearInterval(this.timer),this.isVideoPlaybackQualityAvailable=!1},n.onMediaAttaching=function(t){var i=this.hls.config;i.capLevelOnFPSDrop&&("function"==typeof(this.video=t.media instanceof this.hls.config.cnxRenderWindow.HTMLVideoElement?t.media:null).getVideoPlaybackQuality&&(this.isVideoPlaybackQualityAvailable=!0),clearInterval(this.timer),this.timer=setInterval(this.checkFPSInterval.bind(this),i.fpsDroppedMonitoringPeriod))},n.checkFPS=function(t,i,e){var s=Et.now();if(i){if(this.lastTime){var n=s-this.lastTime,r=e-this.lastDroppedFrames,a=i-this.lastDecodedFrames,h=1e3*r/n,l=this.hls;if(l.trigger(o.a.FPS_DROP,{currentDropped:r,currentDecoded:a,totalDroppedFrames:e}),h>0&&r>l.config.fpsDroppedMonitoringThreshold*a){var u=l.currentLevel;c.b.warn("drop FPS ratio greater than max allowed value for currentLevel: "+u),u>0&&(-1===l.autoLevelCapping||l.autoLevelCapping>=u)&&(u-=1,l.trigger(o.a.FPS_DROP_LEVEL_CAPPING,{level:u,droppedLevel:l.currentLevel}),l.autoLevelCapping=u,l.streamController.nextLevelSwitch())}}this.lastTime=s,this.lastDroppedFrames=e,this.lastDecodedFrames=i}},n.checkFPSInterval=function(){var t=this.video;if(t)if(this.isVideoPlaybackQualityAvailable){var i=t.getVideoPlaybackQuality();this.checkFPS(t,i.totalVideoFrames,i.droppedVideoFrames)}else this.checkFPS(t,t.webkitDecodedFrameCount,t.webkitDroppedFrameCount)},s}(u),Rt=window,Bt=Rt.performance,Dt=Rt.XMLHttpRequest,Ft=function(){function t(t){t&&t.xhrSetup&&(this.xhrSetup=t.xhrSetup)}var i=t.prototype;return i.destroy=function(){this.abort(),this.loader=null},i.abort=function(){var t=this.loader;t&&4!==t.readyState&&(this.stats.aborted=!0,t.abort()),window.clearTimeout(this.requestTimeout),this.requestTimeout=null,window.clearTimeout(this.retryTimeout),this.retryTimeout=null},i.load=function(t,i,e){this.context=t,this.config=i,this.callbacks=e,this.stats={trequest:Bt.now(),retry:0},this.retryDelay=i.retryDelay,this.loadInternal()},i.loadInternal=function(){var t,i=this.context;t=this.loader=new Dt;var e=this.stats;e.tfirst=0,e.loaded=0;var s=this.xhrSetup;try{if(s)try{s(t,i.url)}catch(e){t.open("GET",i.url,!0),s(t,i.url)}t.readyState||t.open("GET",i.url,!0)}catch(e){return void this.callbacks.onError({code:t.status,text:e.message},i,t)}i.rangeEnd&&t.setRequestHeader("Range","bytes="+i.rangeStart+"-"+(i.rangeEnd-1)),t.onreadystatechange=this.readystatechange.bind(this),t.onprogress=this.loadprogress.bind(this),t.responseType=i.responseType,this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),this.config.timeout),t.send()},i.readystatechange=function(t){var i=t.currentTarget,e=i.readyState,s=this.stats,n=this.context,r=this.config;if(!s.aborted&&e>=2)if(window.clearTimeout(this.requestTimeout),0===s.tfirst&&(s.tfirst=Math.max(Bt.now(),s.trequest)),4===e){var a=i.status;if(a>=200&&a<300){var h,o;s.tload=Math.max(s.tfirst,Bt.now()),o="arraybuffer"===n.responseType?(h=i.response).byteLength:(h=i.responseText).length,s.loaded=s.total=o;var l={url:i.responseURL,data:h};this.callbacks.onSuccess(l,s,n,i)}else s.retry>=r.maxRetry||a>=400&&a<499?(c.b.error(a+" while loading "+n.url),this.callbacks.onError({code:a,text:i.statusText},n,i)):(c.b.warn(a+" while loading "+n.url+", retrying in "+this.retryDelay+"..."),this.destroy(),this.retryTimeout=window.setTimeout(this.loadInternal.bind(this),this.retryDelay),this.retryDelay=Math.min(2*this.retryDelay,r.maxRetryDelay),s.retry++)}else this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),r.timeout)},i.loadtimeout=function(){c.b.warn("timeout while loading "+this.context.url),this.callbacks.onTimeout(this.stats,this.context,null)},i.loadprogress=function(t){var i=t.currentTarget,e=this.stats;e.loaded=t.loaded,t.lengthComputable&&(e.total=t.total);var s=this.callbacks.onProgress;s&&s(e,this.context,null,i)},t}();e(6),function(t){t.WIDEVINE="com.widevine.alpha",t.PLAYREADY="com.microsoft.playready"}(Pt||(Pt={}));var $t=function(){var t=window.cnxRenderWindow;return void 0!==t&&t.navigator&&t.navigator.requestMediaKeySystemAccess?t.navigator.requestMediaKeySystemAccess.bind(t.navigator):null}();function Ut(t,i,e){return i in t?Object.defineProperty(t,i,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[i]=e,t}var Vt=function(t){for(var i=1;i<arguments.length;i++){var e=null!=arguments[i]?arguments[i]:{},s=Object.keys(e);"function"==typeof Object.getOwnPropertySymbols&&(s=s.concat(Object.getOwnPropertySymbols(e).filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.forEach(function(i){Ut(t,i,e[i])})}return t}({cnxRenderWindow:window,autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,initialLiveManifestSize:1,maxBufferLength:30,maxBufferSize:6e7,maxBufferHole:.5,lowBufferWatchdogPeriod:.5,highBufferWatchdogPeriod:3,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,liveDurationInfinity:!1,liveBackBufferLength:1/0,maxMaxBufferLength:600,enableWorker:!0,enableSoftwareAES:!0,manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,startLevel:void 0,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:Ft,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,abrController:At,bufferController:Tt,capLevelController:Mt,fpsController:Lt,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,requestMediaKeySystemAccessFunc:$t},{},{subtitleStreamController:void 0,subtitleTrackController:void 0,timelineController:void 0,audioStreamController:void 0,audioTrackController:void 0,emeController:void 0});function Nt(t,i,e){return i in t?Object.defineProperty(t,i,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[i]=e,t}function Ht(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function qt(t,i){for(var e=0;e<i.length;e++){var s=i[e];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function zt(t,i,e){return i&&qt(t.prototype,i),e&&qt(t,e),t}e.d(i,"default",function(){return Wt});var Wt=function(t){var i,e;function s(i){var e;void 0===i&&(i={}),(e=t.call(this)||this).config=void 0,e.Mi=void 0,e.abrController=void 0,e.capLevelController=void 0,e.levelController=void 0,e.streamController=void 0,e.networkControllers=void 0,e.audioTrackController=void 0,e.subtitleTrackController=void 0,e.emeController=void 0,e.coreComponents=void 0,e.media=null,e.url=null;var n=s.DefaultConfig;if((i.liveSyncDurationCount||i.liveMaxLatencyDurationCount)&&(i.liveSyncDuration||i.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");e.config=function(t){for(var i=1;i<arguments.length;i++){var e=null!=arguments[i]?arguments[i]:{},s=Object.keys(e);"function"==typeof Object.getOwnPropertySymbols&&(s=s.concat(Object.getOwnPropertySymbols(e).filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.forEach(function(i){Nt(t,i,e[i])})}return t}({},n,i),window.cnxRenderWindow=e.config.cnxRenderWindow;var r=Ht(e).config;if(void 0!==r.liveMaxLatencyDurationCount&&r.liveMaxLatencyDurationCount<=r.liveSyncDurationCount)throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be gt "liveSyncDurationCount"');if(void 0!==r.liveMaxLatencyDuration&&(void 0===r.liveSyncDuration||r.liveMaxLatencyDuration<=r.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be gt "liveSyncDuration"');Object(c.a)(r.debug),e.Mi=-1;var a=e.abrController=new r.abrController(Ht(e)),h=new r.bufferController(Ht(e)),o=e.capLevelController=new r.capLevelController(Ht(e)),l=new r.fpsController(Ht(e)),u=new E(Ht(e)),d=new L(Ht(e)),f=new R(Ht(e)),p=new kt(Ht(e)),b=e.levelController=new yt(Ht(e)),v=new $(Ht(e)),m=[b,e.streamController=new vt(Ht(e),v)],g=r.audioStreamController;g&&m.push(new g(Ht(e),v)),e.networkControllers=m;var y=[u,d,f,a,h,o,l,p,v];if(g=r.audioTrackController){var w=new g(Ht(e));e.audioTrackController=w,y.push(w)}if(g=r.subtitleTrackController){var x=new g(Ht(e));e.subtitleTrackController=x,m.push(x)}if(g=r.emeController){var k=new g(Ht(e));e.emeController=k,y.push(k)}return(g=r.subtitleStreamController)&&m.push(new g(Ht(e),v)),(g=r.timelineController)&&y.push(new g(Ht(e))),e.coreComponents=y,e}e=t,(i=s).prototype=Object.create(e.prototype),i.prototype.constructor=i,i.__proto__=e,s.isSupported=function(){return function(){var t=z();if(!t)return!1;var i=self.SourceBuffer||self.WebKitSourceBuffer,e=t&&"function"==typeof t.isTypeSupported&&t.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),s=!i||i.prototype&&"function"==typeof i.prototype.appendBuffer&&"function"==typeof i.prototype.remove;return!!e&&!!s}()},zt(s,null,[{key:"version",get:function(){}},{key:"Events",get:function(){return o.a}},{key:"ErrorTypes",get:function(){return a.b}},{key:"ErrorDetails",get:function(){return a.a}},{key:"DefaultConfig",get:function(){return s.defaultConfig?s.defaultConfig:Vt},set:function(t){s.defaultConfig=t}}]);var n=s.prototype;return n.destroy=function(){c.b.log("destroy"),this.trigger(o.a.DESTROYING),this.detachMedia(),this.coreComponents.concat(this.networkControllers).forEach(function(t){t.destroy()}),this.url=null,this.removeAllListeners(),this.Mi=-1},n.attachMedia=function(t){c.b.log("attachMedia"),this.media=t,this.trigger(o.a.MEDIA_ATTACHING,{media:t})},n.detachMedia=function(){c.b.log("detachMedia"),this.trigger(o.a.MEDIA_DETACHING),this.media=null},n.loadSource=function(t){t=r.buildAbsoluteURL(this.config.cnxRenderWindow.location.href,t,{alwaysNormalize:!0}),c.b.log("loadSource:"+t),this.url=t,this.trigger(o.a.MANIFEST_LOADING,{url:t})},n.startLoad=function(t){void 0===t&&(t=-1),c.b.log("startLoad("+t+")"),this.networkControllers.forEach(function(i){i.startLoad(t)})},n.stopLoad=function(){c.b.log("stopLoad"),this.networkControllers.forEach(function(t){t.stopLoad()})},n.swapAudioCodec=function(){c.b.log("swapAudioCodec"),this.streamController.swapAudioCodec()},n.recoverMediaError=function(){c.b.log("recoverMediaError");var t=this.media;this.detachMedia(),t&&this.attachMedia(t)},zt(s,[{key:"levels",get:function(){return this.levelController.levels}},{key:"currentLevel",get:function(){return this.streamController.currentLevel},set:function(t){c.b.log("set currentLevel:"+t),this.loadLevel=t,this.streamController.immediateLevelSwitch()}},{key:"nextLevel",get:function(){return this.streamController.nextLevel},set:function(t){c.b.log("set nextLevel:"+t),this.levelController.manualLevel=t,this.streamController.nextLevelSwitch()}},{key:"loadLevel",get:function(){return this.levelController.level},set:function(t){c.b.log("set loadLevel:"+t),this.levelController.manualLevel=t}},{key:"nextLoadLevel",get:function(){return this.levelController.nextLoadLevel},set:function(t){this.levelController.nextLoadLevel=t}},{key:"firstLevel",get:function(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)},set:function(t){c.b.log("set firstLevel:"+t),this.levelController.firstLevel=t}},{key:"startLevel",get:function(){return this.levelController.startLevel},set:function(t){c.b.log("set startLevel:"+t),-1!==t&&(t=Math.max(t,this.minAutoLevel)),this.levelController.startLevel=t}},{key:"capLevelToPlayerSize",set:function(t){var i=!!t;i!==this.config.capLevelToPlayerSize&&(i?this.capLevelController.startCapping():(this.capLevelController.stopCapping(),this.autoLevelCapping=-1,this.streamController.nextLevelSwitch()),this.config.capLevelToPlayerSize=i)}},{key:"autoLevelCapping",get:function(){return this.Mi},set:function(t){c.b.log("set autoLevelCapping:"+t),this.Mi=t}},{key:"bandwidthEstimate",get:function(){var t=this.abrController.bwEstimator;return t?t.getEstimate():NaN}},{key:"autoLevelEnabled",get:function(){return-1===this.levelController.manualLevel}},{key:"manualLevel",get:function(){return this.levelController.manualLevel}},{key:"minAutoLevel",get:function(){for(var t=this.levels,i=this.config.minAutoBitrate,e=t?t.length:0,s=0;s<e;s++)if((t[s].realBitrate?Math.max(t[s].realBitrate,t[s].bitrate):t[s].bitrate)>i)return s;return 0}},{key:"maxAutoLevel",get:function(){var t=this.levels,i=this.autoLevelCapping;return-1===i&&t&&t.length?t.length-1:i}},{key:"nextAutoLevel",get:function(){return Math.min(Math.max(this.abrController.nextAutoLevel,this.minAutoLevel),this.maxAutoLevel)},set:function(t){this.abrController.nextAutoLevel=Math.max(this.minAutoLevel,t)}},{key:"audioTracks",get:function(){var t=this.audioTrackController;return t?t.audioTracks:[]}},{key:"audioTrack",get:function(){var t=this.audioTrackController;return t?t.audioTrack:-1},set:function(t){var i=this.audioTrackController;i&&(i.audioTrack=t)}},{key:"liveSyncPosition",get:function(){return this.streamController.liveSyncPosition}},{key:"subtitleTracks",get:function(){var t=this.subtitleTrackController;return t?t.subtitleTracks:[]}},{key:"subtitleTrack",get:function(){var t=this.subtitleTrackController;return t?t.subtitleTrack:-1},set:function(t){var i=this.subtitleTrackController;i&&(i.subtitleTrack=t)}},{key:"subtitleDisplay",get:function(){var t=this.subtitleTrackController;return!!t&&t.subtitleDisplay},set:function(t){var i=this.subtitleTrackController;i&&(i.subtitleDisplay=t)}}]),s}(G);Wt.defaultConfig=void 0}]).default)},function(t,i,e){"use strict";e.d(i,"c",function(){return s}),e.d(i,"d",function(){return n}),e.d(i,"b",function(){return r}),e.d(i,"a",function(){return a});const s={FullscreenChanged:"fullscreenChanged",PlayerFloatChanged:"playerFloatChanged"},n={OmidViewabilityThreshold:"OmidViewabilityThreshold"},r=Object.assign(Object.assign(Object.assign(Object.assign({Ready:"ready",Removed:"removed",SetupError:"setupError",IsViewable:"isViewable",SizeChanged:"sizeChanged",BrandingClicked:"brandingClicked",ImpressionPrice:"impressionPrice"},{Play:"play",Pause:"pause",QualityChanged:"qualityChanged",PlayError:"playError",VolumeChanged:"volumeChanged"}),s),n),{AdClick:"adClick",AdPlay:"adPlay",AdPause:"adPause",AdImpression:"adImpression",AdCompleted25:"adCompleted25",AdCompleted50:"adCompleted50",AdCompleted75:"adCompleted75",AdCompleted100:"adCompleted100",AdSkipped:"adSkipped",AdError:"adError",AdStopped:"adStopped",AdCompanion:"adCompanion"});var a;!function(t){t.SetupError="SetupError",t.NoPlayer="NoPlayer",t.RenderError="RenderError"}(a||(a={}))},function(t,i,e){"use strict";e.d(i,"a",function(){return n});var s=e(6);class n{constructor(){this.Ei={}}subscribe(t,i,e){this.Ei[t]||(this.Ei[t]=[]),this.Ei[t].push({context:i,func:e})}unsubscribe(t,i,e){this.Ei[t]&&(this.Ei[t]=this.Ei[t].filter(t=>!(t.context===i&&(t.func===e||!e))))}unsubscribeAll(t){Object.keys(this.Ei).forEach(i=>{this.Ei[i]=this.Ei[i].filter(i=>i.context!==t)})}publish(t,i,e={payload:void 0}){Object.prototype.hasOwnProperty.call(this.Ei,i)&&this.Ei[i].forEach(i=>{i.context===t&&i.func(e)})}relay(t,i,e,n){Object(s.m)(t).forEach(t=>{this.subscribe(t,i,i=>{n.publish(e,t,i)})})}relayBulk(t,i,e){t.forEach(t=>{this.relay(t.channel,t.source,i,e)})}}},function(t,i,e){"use strict";e.d(i,"b",function(){return r}),e.d(i,"e",function(){return a}),e.d(i,"c",function(){return h}),e.d(i,"a",function(){return o}),e.d(i,"d",function(){return l});var s=e(2);const n=".cdn.ampproject.org";function r(t,i){i||(i=location.search),t=t.replace(/\[/,"\\[").replace(/]/,"\\]");const e=new RegExp(`[\\?&]${t}=([^&#]*)`,"i").exec(i);return null===e?null:decodeURIComponent(e[1])}function a(t,i,e){const s=new RegExp(`([?&])${i}=.*?(&|$)`,"i"),n=-1!==t.indexOf("?")?"&":"?";return t.match(s)?e?t.replace(s,`$1${i}=${e}$2`):t.replace(s,"$1"):`${t}${n}${i}=${e}`}function h(t){return t.indexOf("?")>-1?"&":"?"}function o(t){if(Object(s.h)(t))return t.indexOf("://")>-1?t.split("/")[2]:t.split("/")[0]}function c(t,i){return`${"http"+(/(\/s\/)+/.test(t.replace(i,""))?"s":"")}://${i}`}function l(t,i=!0){return t=function(t){return-1===t.indexOf(n)?t:(t=(t=(t=(t=(t=(t=(t=t.replace(n,"")).replace("www-","www.")).replace("amp-","amp.")).cnx_replaceAll("--","=")).cnx_replaceAll("-",".")).cnx_replaceAll("=","-")).replace("www.","amp.")).indexOf("amp.")>-1?t:t=(t=t.replace("http://","http://amp.")).replace("https://","https://amp.")}(t=function(t){const i=/^https:\/\/www.google\..*?\/amp\/s*\/*/.exec(t);if(null!==i){const e=t.replace(i[0],"");return c(t,e)}return t}(t=function(t){if(t.indexOf(n)>-1){t=t.replace("https://","");const i=/^[^\/]+(\/[a-z]+\/)+s*\/*/,e=i.test(t)?t.replace(i.exec(t)[0],""):t;return c(t,e)}return t}(t))),i&&(t=function(t){if(-1===t.indexOf("#origin-")&&-1===t.indexOf("viewerUrl-"))return t;const i=t.split("#origin-")[1].split("viewerUrl-");return l(t=decodeURIComponent(i[1]),!1)}(t)),t}},function(t,i,e){"use strict";e.d(i,"a",function(){return s}),e.d(i,"b",function(){return n});const s=JSON.parse('{"version":117129,"domainPrefix":"","logToConsole":false,"logToServer":true,"env":"production"}'),n=!0},function(t,i,e){"use strict";var s,n,r,a;e.d(i,"a",function(){return s}),e.d(i,"b",function(){return n}),e.d(i,"c",function(){return r}),e.d(i,"d",function(){return a}),function(t){t[t.X=0]="X",t[t.Y=1]="Y"}(s||(s={})),function(t){t.Click="click",t.InteractionStart="interactionstart",t.Interaction="interaction",t.InteractionEnd="interactionend"}(n||(n={})),function(t){t[t.Swipe=0]="Swipe",t[t.Hold=1]="Hold"}(r||(r={})),function(t){t[t.Left=0]="Left",t[t.Right=1]="Right"}(a||(a={}))},function(t,i,e){"use strict";var s;e.d(i,"c",function(){return s}),e.d(i,"b",function(){return n}),e.d(i,"a",function(){return r}),function(t){t.SessionRendered="rendered",t.SessionView="enter_view"}(s||(s={}));const n={UserInteraction:"userInteraction",GeneralUserInteraction:"generalUserInteraction",CanStart:"canStart",Destroy:"destroy"},r={StateChanged:"stateChanged"}},function(t,i,e){"use strict";e.d(i,"a",function(){return n}),e.d(i,"b",function(){return r});var s=e(0);const n=[s.ProtoDeviceType.Smartphone,s.ProtoDeviceType.Tablet];var r;!function(t){t.Ios="ios",t.Android="android",t.Mac="macos",t.Windows="windows",t.Linux="linux"}(r||(r={}))},function(t,i,e){"use strict";var s;e.d(i,"a",function(){return s}),function(t){t[t.CmpApi=0]="CmpApi",t[t.TcfApi=1]="TcfApi"}(s||(s={}))},function(t,i,e){"use strict";var s,n;e.d(i,"a",function(){return s}),e.d(i,"d",function(){return n}),e.d(i,"b",function(){return r}),e.d(i,"c",function(){return a}),function(t){t.Chrome="chrome",t.Firefox="firefox",t.Edge="edge",t.Safari="safari",t.Opera="opera",t.Samsung="samsung",t.Facebook="facebook",t.InternetExplorer="ie"}(s||(s={})),function(t){t.Standard="standard",t.Webkit="webkit",t.Moz="moz",t.Ms="ms",t.O="o"}(n||(n={}));const r=[{name:n.Standard,keys:{fullscreenEnabled:"fullscreenEnabled",fullscreenElement:"fullscreenElement",requestFullscreen:"requestFullscreen",exitFullscreen:"exitFullscreen",fullscreenchange:"fullscreenchange",fullscreenerror:"fullscreenerror"}},{name:n.Webkit,keys:{fullscreenEnabled:"webkitFullscreenEnabled",fullscreenElement:"webkitFullscreenElement",requestFullscreen:"webkitRequestFullscreen",exitFullscreen:"webkitExitFullscreen",fullscreenchange:"webkitfullscreenchange",fullscreenerror:"webkitfullscreenerror"}},{name:n.Webkit,keys:{fullscreenEnabled:"webkitSupportsFullscreen",fullscreenElement:"webkitFullscreenElement",requestFullscreen:"webkitEnterFullscreen",exitFullscreen:"webkitExitFullscreen",fullscreenchange:"webkitfullscreenchange",fullscreenerror:"webkitfullscreenerror"}},{name:n.Moz,keys:{fullscreenEnabled:"mozFullScreenEnabled",fullscreenElement:"mozFullScreenElement",requestFullscreen:"mozRequestFullScreen",exitFullscreen:"mozCancelFullScreen",fullscreenchange:"mozfullscreenchange",fullscreenerror:"mozfullscreenerror"}},{name:n.Ms,keys:{fullscreenEnabled:"msFullscreenEnabled",fullscreenElement:"msFullscreenElement",requestFullscreen:"msRequestFullscreen",exitFullscreen:"msExitFullscreen",fullscreenchange:"MSFullscreenChange",fullscreenerror:"MSFullscreenError"}}];var a;!function(t){t.Self="_self",t.Blank="_blank",t.Parent="_parent",t.Top="_top"}(a||(a={}))},function(t,i,e){"use strict";e.d(i,"a",function(){return s});var s,n=e(5),r=e(0),a=e(7),h=e(2),o=e(18);!function(t){const i=3e4;function e(t,e){const s=function({requestUrl:t,requestType:e="POST",contentType:s="",responseType:n="",withCredentials:r=!1}){const a=new XMLHttpRequest;return a.open(e,t,!0),s.length>0&&a.setRequestHeader("Content-Type",s),n.length>0&&(a.responseType=n),a.timeout=i,a.withCredentials=r,a}(t),n=new Date;return new Promise((t,i)=>{s.onreadystatechange=()=>{if(s.readyState===XMLHttpRequest.DONE)if(200===s.status)t(s.response);else{let t="";try{t=s.responseText}catch(t){}const e=(new Date).getTime()-n.getTime();i(new Error(`Request fail. status:${s.status}, readyState:${s.readyState}, response:${t}, time:${e}`))}},s.ontimeout=()=>{const t=(new Date).getTime()-n.getTime();i(new Error(`Request timeout status:${s.status}. time:${t}`))},s.send(e)})}function s(t,i,e){try{const s=Object(a.l)([95,5]);!s||i&&0!==Object.keys(i).length||Object(n.a)({message:"empty_proto_request",callStack:"empty_function_argument",exception:e,level:r.ProtoLoggingLevelEnum.INFO,sendMaxLog:!1});const h=t.fromObject(i);!s||h&&0!==Object.keys(h).length||Object(n.a)({message:"empty_proto_request",callStack:"empty_fromObject_result",exception:e,level:r.ProtoLoggingLevelEnum.INFO,sendMaxLog:!1});const o=t.encode(h).finish();return!s||o&&0!==Object.keys(o).length||Object(n.a)({message:"empty_proto_request",callStack:"empty_encode_result",exception:e,level:r.ProtoLoggingLevelEnum.INFO,sendMaxLog:!1}),o}catch(t){throw Object(n.a)({throttle:10,sendMaxLog:!0,exception:e,level:r.ProtoLoggingLevelEnum.FATAL,callStack:JSON.stringify(i),message:"Protobuf_encode"}),Error()}}function c(t,i,s="POST",a,h){return function(t,i,e){return new Promise((s,a)=>{i.then(i=>{if(t){let h=null;try{const s=i?new Uint8Array(i):new Uint8Array;h=t.toObject(t.decode(s),{defaults:!0,arrays:!0,objects:!0})}catch(t){Object(n.a)({exception:`${e}__${t.message}`,message:"Protobuf_decode",callStack:t.stack,level:r.ProtoLoggingLevelEnum.WARNING,sendMaxLog:!0,throttle:100})}h&&h.errorMessage&&"500"===h.errorMessage&&a(h.errorMessage),s(h)}}).catch(t=>{a(t)})})}(t,e({requestUrl:i,requestType:s,withCredentials:h,contentType:"POST"===s?"multipart/form-data":"",responseType:"arraybuffer"},a),i)}t.fetchXMLRequest=function(t,i=!0){const s=e({requestUrl:t,requestType:"GET",withCredentials:i});return new Promise((t,i)=>{s.then(i=>{t(i)}).catch(t=>{i(t)})})},t.sendProtoRequest=function({ProtoResponse:t,ProtoRequest:i,requestData:e,endpoint:l,requestType:u,withCredentials:d,queryParams:f,logError:p}){const b=e?s(i,e,l):null;return c(t,l=function(t,i){return Object(h.f)(i)?(Object.keys(i).forEach(e=>t=Object(o.e)(t,e,i[e])),t):t}(l,f),u,b,d).catch(t=>{throw p&&Object(a.l)([95,5])&&Object(n.a)({message:"Xhr_error",exception:l,callStack:`${t}`,level:r.ProtoLoggingLevelEnum.INFO}),new Error(t)})},t.sendProtoBeaconRequest=function({ProtoRequest:t,requestData:i,endpoint:e}){const n=i?s(t,i,e):null;return navigator.sendBeacon(e,n)},t.trackPixel=function(t){try{(new Image).src=t}catch(t){Object(n.a)({message:"Xhr_trackPixel",exception:t.message,callStack:t.stack,level:r.ProtoLoggingLevelEnum.FATAL})}}}(s||(s={}))},function(t,i,e){"use strict";e.d(i,"h",function(){return s}),e.d(i,"i",function(){return n}),e.d(i,"j",function(){return r}),e.d(i,"f",function(){return a}),e.d(i,"b",function(){return h}),e.d(i,"a",function(){return o}),e.d(i,"g",function(){return c}),e.d(i,"e",function(){return l}),e.d(i,"c",function(){return u}),e.d(i,"d",function(){return d});const s=200,n=.9,r=1.1,a=31,h=2e3,o=1e3,c=.5,l="connatix.com",u=2,d=41},function(t,i,e){"use strict";var s,n,r=e(61),a=r.Reader,h=r.Writer,o=r.util,c=r.roots.default||(r.roots.default={});c.ProtoElementsRequest=function(){function t(t){if(this.tokens=[],this.queryJsTargeting={},this.reloadedPlayers={},t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.tokens=o.emptyArray,t.prototype.pageUrl="",t.prototype.userId="",t.prototype.forceLineItemId="",t.prototype.forcePlayerId="",t.prototype.forceMediaId="",t.prototype.forcePlaylistId="",t.prototype.version=0,t.prototype.clientAb0=0,t.prototype.clientAb1=0,t.prototype.customParam1="",t.prototype.customParam2="",t.prototype.customParam3="",t.prototype.forceExploration=!1,t.prototype.es6=!1,t.prototype.bundleId="",t.prototype.forceSourceItemId="",t.prototype.parseDomain=!1,t.prototype.implementationType=0,t.prototype.queryJsTargeting=o.emptyObject,t.prototype.isConsentConnatix=!0,t.prototype.reloadedPlayers=o.emptyObject,t.prototype.disableTracking=!1,t.prototype.referrer="",t.prototype.localTimestamp=o.Long?o.Long.fromBits(0,0,!1):0,t.prototype.customParam4="",t.prototype.customParam5="",t.encode=function(t,i){if(i||(i=h.create()),null!=t.tokens&&t.tokens.length)for(var e=0;e<t.tokens.length;++e)i.uint32(10).string(t.tokens[e]);if(null!=t.pageUrl&&t.hasOwnProperty("pageUrl")&&i.uint32(26).string(t.pageUrl),null!=t.userId&&t.hasOwnProperty("userId")&&i.uint32(42).string(t.userId),null!=t.forceLineItemId&&t.hasOwnProperty("forceLineItemId")&&i.uint32(50).string(t.forceLineItemId),null!=t.forcePlayerId&&t.hasOwnProperty("forcePlayerId")&&i.uint32(58).string(t.forcePlayerId),null!=t.forceMediaId&&t.hasOwnProperty("forceMediaId")&&i.uint32(66).string(t.forceMediaId),null!=t.forcePlaylistId&&t.hasOwnProperty("forcePlaylistId")&&i.uint32(74).string(t.forcePlaylistId),null!=t.version&&t.hasOwnProperty("version")&&i.uint32(80).int32(t.version),null!=t.clientAb0&&t.hasOwnProperty("clientAb0")&&i.uint32(96).int32(t.clientAb0),null!=t.clientAb1&&t.hasOwnProperty("clientAb1")&&i.uint32(104).int32(t.clientAb1),null!=t.customParam1&&t.hasOwnProperty("customParam1")&&i.uint32(130).string(t.customParam1),null!=t.customParam2&&t.hasOwnProperty("customParam2")&&i.uint32(138).string(t.customParam2),null!=t.customParam3&&t.hasOwnProperty("customParam3")&&i.uint32(146).string(t.customParam3),null!=t.forceExploration&&t.hasOwnProperty("forceExploration")&&i.uint32(160).bool(t.forceExploration),null!=t.es6&&t.hasOwnProperty("es6")&&i.uint32(168).bool(t.es6),null!=t.bundleId&&t.hasOwnProperty("bundleId")&&i.uint32(178).string(t.bundleId),null!=t.forceSourceItemId&&t.hasOwnProperty("forceSourceItemId")&&i.uint32(186).string(t.forceSourceItemId),null!=t.parseDomain&&t.hasOwnProperty("parseDomain")&&i.uint32(192).bool(t.parseDomain),null!=t.implementationType&&t.hasOwnProperty("implementationType")&&i.uint32(200).int32(t.implementationType),null!=t.queryJsTargeting&&t.hasOwnProperty("queryJsTargeting")){var s=Object.keys(t.queryJsTargeting);for(e=0;e<s.length;++e)i.uint32(210).fork().uint32(10).string(s[e]).uint32(18).string(t.queryJsTargeting[s[e]]).ldelim()}if(null!=t.isConsentConnatix&&t.hasOwnProperty("isConsentConnatix")&&i.uint32(216).bool(t.isConsentConnatix),null!=t.reloadedPlayers&&t.hasOwnProperty("reloadedPlayers"))for(s=Object.keys(t.reloadedPlayers),e=0;e<s.length;++e)i.uint32(234).fork().uint32(10).string(s[e]).uint32(18).string(t.reloadedPlayers[s[e]]).ldelim();return null!=t.disableTracking&&t.hasOwnProperty("disableTracking")&&i.uint32(248).bool(t.disableTracking),null!=t.referrer&&t.hasOwnProperty("referrer")&&i.uint32(258).string(t.referrer),null!=t.localTimestamp&&t.hasOwnProperty("localTimestamp")&&i.uint32(264).int64(t.localTimestamp),null!=t.customParam4&&t.hasOwnProperty("customParam4")&&i.uint32(274).string(t.customParam4),null!=t.customParam5&&t.hasOwnProperty("customParam5")&&i.uint32(282).string(t.customParam5),i},t.decode=function(t,i){t instanceof a||(t=a.create(t));for(var e,s=void 0===i?t.len:t.pos+i,n=new c.ProtoElementsRequest;t.pos<s;){var r=t.uint32();switch(r>>>3){case 1:n.tokens&&n.tokens.length||(n.tokens=[]),n.tokens.push(t.string());break;case 3:n.pageUrl=t.string();break;case 5:n.userId=t.string();break;case 6:n.forceLineItemId=t.string();break;case 7:n.forcePlayerId=t.string();break;case 8:n.forceMediaId=t.string();break;case 9:n.forcePlaylistId=t.string();break;case 10:n.version=t.int32();break;case 12:n.clientAb0=t.int32();break;case 13:n.clientAb1=t.int32();break;case 16:n.customParam1=t.string();break;case 17:n.customParam2=t.string();break;case 18:n.customParam3=t.string();break;case 20:n.forceExploration=t.bool();break;case 21:n.es6=t.bool();break;case 22:n.bundleId=t.string();break;case 23:n.forceSourceItemId=t.string();break;case 24:n.parseDomain=t.bool();break;case 25:n.implementationType=t.int32();break;case 26:t.skip().pos++,n.queryJsTargeting===o.emptyObject&&(n.queryJsTargeting={}),e=t.string(),t.pos++,n.queryJsTargeting[e]=t.string();break;case 27:n.isConsentConnatix=t.bool();break;case 29:t.skip().pos++,n.reloadedPlayers===o.emptyObject&&(n.reloadedPlayers={}),e=t.string(),t.pos++,n.reloadedPlayers[e]=t.string();break;case 31:n.disableTracking=t.bool();break;case 32:n.referrer=t.string();break;case 33:n.localTimestamp=t.int64();break;case 34:n.customParam4=t.string();break;case 35:n.customParam5=t.string();break;default:t.skipType(7&r)}}return n},t.fromObject=function(t){if(t instanceof c.ProtoElementsRequest)return t;var i=new c.ProtoElementsRequest;if(t.tokens){if(!Array.isArray(t.tokens))throw TypeError(".ProtoElementsRequest.tokens: array expected");i.tokens=[];for(var e=0;e<t.tokens.length;++e)i.tokens[e]=String(t.tokens[e])}switch(null!=t.pageUrl&&(i.pageUrl=String(t.pageUrl)),null!=t.userId&&(i.userId=String(t.userId)),null!=t.forceLineItemId&&(i.forceLineItemId=String(t.forceLineItemId)),null!=t.forcePlayerId&&(i.forcePlayerId=String(t.forcePlayerId)),null!=t.forceMediaId&&(i.forceMediaId=String(t.forceMediaId)),null!=t.forcePlaylistId&&(i.forcePlaylistId=String(t.forcePlaylistId)),null!=t.version&&(i.version=0|t.version),null!=t.clientAb0&&(i.clientAb0=0|t.clientAb0),null!=t.clientAb1&&(i.clientAb1=0|t.clientAb1),null!=t.customParam1&&(i.customParam1=String(t.customParam1)),null!=t.customParam2&&(i.customParam2=String(t.customParam2)),null!=t.customParam3&&(i.customParam3=String(t.customParam3)),null!=t.forceExploration&&(i.forceExploration=Boolean(t.forceExploration)),null!=t.es6&&(i.es6=Boolean(t.es6)),null!=t.bundleId&&(i.bundleId=String(t.bundleId)),null!=t.forceSourceItemId&&(i.forceSourceItemId=String(t.forceSourceItemId)),null!=t.parseDomain&&(i.parseDomain=Boolean(t.parseDomain)),t.implementationType){case"Web":case 0:i.implementationType=0;break;case"Amp":case 1:i.implementationType=1}if(t.queryJsTargeting){if("object"!=typeof t.queryJsTargeting)throw TypeError(".ProtoElementsRequest.queryJsTargeting: object expected");i.queryJsTargeting={};var s=Object.keys(t.queryJsTargeting);for(e=0;e<s.length;++e)i.queryJsTargeting[s[e]]=String(t.queryJsTargeting[s[e]])}if(null!=t.isConsentConnatix&&(i.isConsentConnatix=Boolean(t.isConsentConnatix)),t.reloadedPlayers){if("object"!=typeof t.reloadedPlayers)throw TypeError(".ProtoElementsRequest.reloadedPlayers: object expected");i.reloadedPlayers={};for(s=Object.keys(t.reloadedPlayers),e=0;e<s.length;++e)i.reloadedPlayers[s[e]]=String(t.reloadedPlayers[s[e]])}return null!=t.disableTracking&&(i.disableTracking=Boolean(t.disableTracking)),null!=t.referrer&&(i.referrer=String(t.referrer)),null!=t.localTimestamp&&(o.Long?(i.localTimestamp=o.Long.fromValue(t.localTimestamp)).unsigned=!1:"string"==typeof t.localTimestamp?i.localTimestamp=parseInt(t.localTimestamp,10):"number"==typeof t.localTimestamp?i.localTimestamp=t.localTimestamp:"object"==typeof t.localTimestamp&&(i.localTimestamp=new o.LongBits(t.localTimestamp.low>>>0,t.localTimestamp.high>>>0).toNumber())),null!=t.customParam4&&(i.customParam4=String(t.customParam4)),null!=t.customParam5&&(i.customParam5=String(t.customParam5)),i},t.toObject=function(t,i){i||(i={});var e,s={};if((i.arrays||i.defaults)&&(s.tokens=[]),(i.objects||i.defaults)&&(s.queryJsTargeting={},s.reloadedPlayers={}),i.defaults){if(s.pageUrl="",s.userId="",s.forceLineItemId="",s.forcePlayerId="",s.forceMediaId="",s.forcePlaylistId="",s.version=0,s.clientAb0=0,s.clientAb1=0,s.customParam1="",s.customParam2="",s.customParam3="",s.forceExploration=!1,s.es6=!1,s.bundleId="",s.forceSourceItemId="",s.parseDomain=!1,s.implementationType=i.enums===String?"Web":0,s.isConsentConnatix=!0,s.disableTracking=!1,s.referrer="",o.Long){var n=new o.Long(0,0,!1);s.localTimestamp=i.longs===String?n.toString():i.longs===Number?n.toNumber():n}else s.localTimestamp=i.longs===String?"0":0;s.customParam4="",s.customParam5=""}if(t.tokens&&t.tokens.length){s.tokens=[];for(var r=0;r<t.tokens.length;++r)s.tokens[r]=t.tokens[r]}if(null!=t.pageUrl&&t.hasOwnProperty("pageUrl")&&(s.pageUrl=t.pageUrl),null!=t.userId&&t.hasOwnProperty("userId")&&(s.userId=t.userId),null!=t.forceLineItemId&&t.hasOwnProperty("forceLineItemId")&&(s.forceLineItemId=t.forceLineItemId),null!=t.forcePlayerId&&t.hasOwnProperty("forcePlayerId")&&(s.forcePlayerId=t.forcePlayerId),null!=t.forceMediaId&&t.hasOwnProperty("forceMediaId")&&(s.forceMediaId=t.forceMediaId),null!=t.forcePlaylistId&&t.hasOwnProperty("forcePlaylistId")&&(s.forcePlaylistId=t.forcePlaylistId),null!=t.version&&t.hasOwnProperty("version")&&(s.version=t.version),null!=t.clientAb0&&t.hasOwnProperty("clientAb0")&&(s.clientAb0=t.clientAb0),null!=t.clientAb1&&t.hasOwnProperty("clientAb1")&&(s.clientAb1=t.clientAb1),null!=t.customParam1&&t.hasOwnProperty("customParam1")&&(s.customParam1=t.customParam1),null!=t.customParam2&&t.hasOwnProperty("customParam2")&&(s.customParam2=t.customParam2),null!=t.customParam3&&t.hasOwnProperty("customParam3")&&(s.customParam3=t.customParam3),null!=t.forceExploration&&t.hasOwnProperty("forceExploration")&&(s.forceExploration=t.forceExploration),null!=t.es6&&t.hasOwnProperty("es6")&&(s.es6=t.es6),null!=t.bundleId&&t.hasOwnProperty("bundleId")&&(s.bundleId=t.bundleId),null!=t.forceSourceItemId&&t.hasOwnProperty("forceSourceItemId")&&(s.forceSourceItemId=t.forceSourceItemId),null!=t.parseDomain&&t.hasOwnProperty("parseDomain")&&(s.parseDomain=t.parseDomain),null!=t.implementationType&&t.hasOwnProperty("implementationType")&&(s.implementationType=i.enums===String?c.ProtoImplementationType[t.implementationType]:t.implementationType),t.queryJsTargeting&&(e=Object.keys(t.queryJsTargeting)).length){s.queryJsTargeting={};for(r=0;r<e.length;++r)s.queryJsTargeting[e[r]]=t.queryJsTargeting[e[r]]}if(null!=t.isConsentConnatix&&t.hasOwnProperty("isConsentConnatix")&&(s.isConsentConnatix=t.isConsentConnatix),t.reloadedPlayers&&(e=Object.keys(t.reloadedPlayers)).length){s.reloadedPlayers={};for(r=0;r<e.length;++r)s.reloadedPlayers[e[r]]=t.reloadedPlayers[e[r]]}return null!=t.disableTracking&&t.hasOwnProperty("disableTracking")&&(s.disableTracking=t.disableTracking),null!=t.referrer&&t.hasOwnProperty("referrer")&&(s.referrer=t.referrer),null!=t.localTimestamp&&t.hasOwnProperty("localTimestamp")&&("number"==typeof t.localTimestamp?s.localTimestamp=i.longs===String?String(t.localTimestamp):t.localTimestamp:s.localTimestamp=i.longs===String?o.Long.prototype.toString.call(t.localTimestamp):i.longs===Number?new o.LongBits(t.localTimestamp.low>>>0,t.localTimestamp.high>>>0).toNumber():t.localTimestamp),null!=t.customParam4&&t.hasOwnProperty("customParam4")&&(s.customParam4=t.customParam4),null!=t.customParam5&&t.hasOwnProperty("customParam5")&&(s.customParam5=t.customParam5),s},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.ProtoOutstreamInitialRenderingEnum=(s={},(n=Object.create(s))[s[0]="ExpandWithAd"]=0,n[s[1]="FullyRendered"]=1,n),c.ProtoOutstreamEndAdBreakPolicyEnum=function(){var t={},i=Object.create(t);return i[t[0]="Hide"]=0,i[t[1]="HouseScreen"]=1,i[t[2]="Loop"]=2,i}(),c.ProtoGalleryStyleMode=function(){var t={},i=Object.create(t);return i[t[0]="None"]=0,i[t[1]="Detailed"]=1,i[t[2]="Visual"]=2,i}(),c.ProtoLogoPositionMode=function(){var t={},i=Object.create(t);return i[t[0]="None"]=0,i[t[1]="ControlBar"]=1,i[t[2]="BottomRight"]=2,i[t[3]="BottomLeft"]=3,i[t[4]="TopRight"]=4,i[t[5]="TopLeft"]=5,i[t[6]="Center"]=6,i}(),c.ProtoGalleryOrientationEnum=function(){var t={},i=Object.create(t);return i[t[0]="Landscape"]=0,i[t[1]="Portrait"]=1,i}(),c.ProtoElementsTypeEnum=function(){var t={},i=Object.create(t);return i[t[0]="InStream"]=0,i[t[1]="OutStream"]=1,i[t[2]="InStreamInApp"]=2,i[t[3]="Live"]=3,i}(),c.ProtoPlayerUpNextMode=function(){var t={},i=Object.create(t);return i[t[0]="Loop"]=0,i[t[1]="Next"]=1,i[t[2]="Stop"]=2,i}(),c.ProtoPlaylistItem=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.mediaId="",t.prototype.revisionNumber=0,t.prototype.mediaContentVersionId="",t.encode=function(t,i){return i||(i=h.create()),null!=t.mediaId&&t.hasOwnProperty("mediaId")&&i.uint32(10).string(t.mediaId),null!=t.revisionNumber&&t.hasOwnProperty("revisionNumber")&&i.uint32(16).int32(t.revisionNumber),null!=t.mediaContentVersionId&&t.hasOwnProperty("mediaContentVersionId")&&i.uint32(26).string(t.mediaContentVersionId),i},t.decode=function(t,i){t instanceof a||(t=a.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoPlaylistItem;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.mediaId=t.string();break;case 2:s.revisionNumber=t.int32();break;case 3:s.mediaContentVersionId=t.string();break;default:t.skipType(7&n)}}return s},t.fromObject=function(t){if(t instanceof c.ProtoPlaylistItem)return t;var i=new c.ProtoPlaylistItem;return null!=t.mediaId&&(i.mediaId=String(t.mediaId)),null!=t.revisionNumber&&(i.revisionNumber=0|t.revisionNumber),null!=t.mediaContentVersionId&&(i.mediaContentVersionId=String(t.mediaContentVersionId)),i},t.toObject=function(t,i){i||(i={});var e={};return i.defaults&&(e.mediaId="",e.revisionNumber=0,e.mediaContentVersionId=""),null!=t.mediaId&&t.hasOwnProperty("mediaId")&&(e.mediaId=t.mediaId),null!=t.revisionNumber&&t.hasOwnProperty("revisionNumber")&&(e.revisionNumber=t.revisionNumber),null!=t.mediaContentVersionId&&t.hasOwnProperty("mediaContentVersionId")&&(e.mediaContentVersionId=t.mediaContentVersionId),e},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.ProtoElements=function(){function t(t){if(this.sharingDestinations=[],this.floatingDeviceMode=[],this.lineItems=[],this.playlist=[],this.adBreaks=[],t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.playerId="",t.prototype.playbackMode=0,t.prototype.soundMode=0,t.prototype.upNextMode=1,t.prototype.containerSelector="",t.prototype.position=0,t.prototype.insertPosition=0,t.prototype.forceInsertPath=!1,t.prototype.renderInFrame=!1,t.prototype.scrollHijackingProtection=!1,t.prototype.preRollBreak=0,t.prototype.postRollBreak=0,t.prototype.midRollNumber=-1,t.prototype.timeBetweenAds=0,t.prototype.minTimeBeforeFirstAd=0,t.prototype.adViewabilityPolicy=0,t.prototype.responsive=!1,t.prototype.ratioWidth=0,t.prototype.ratioHeight=0,t.prototype.fixedWidth=0,t.prototype.fixedHeight=0,t.prototype.casting=!1,t.prototype.sharingDestinations=o.emptyArray,t.prototype.closedCaption=!1,t.prototype.muteWatermark=!1,t.prototype.expandButton=!1,t.prototype.closeButtonMode=0,t.prototype.floatingMode=0,t.prototype.floatingDeviceMode=o.emptyArray,t.prototype.floatingCloseButtonMode=0,t.prototype.floatingFixedPosition=0,t.prototype.floatingPageElement="",t.prototype.floatingUseElementWidth=!1,t.prototype.floatingScrollPosition=0,t.prototype.floatingGutterX=0,t.prototype.floatingGutterY=0,t.prototype.floatingWidth=0,t.prototype.iconsColor="",t.prototype.accentColor="",t.prototype.tooltipTextColor="",t.prototype.tooltipBackgroundColor="",t.prototype.html="",t.prototype.galleryStyle=0,t.prototype.logoPosition=0,t.prototype.logoUrl="",t.prototype.lineItems=o.emptyArray,t.prototype.adPlaybackMode=0,t.prototype.css="",t.prototype.sessionId="",t.prototype.playlistId="",t.prototype.playerType=0,t.prototype.outstreamInitialRendering=0,t.prototype.outstreamHouseBackgroundColor="",t.prototype.outstreamTotalAdBreakLength=0,t.prototype.outstreamEndAdBreakPolicy=0,t.prototype.galleryOrientation=0,t.prototype.playlist=o.emptyArray,t.prototype.floatingAppendLocation=0,t.prototype.floatingYAxisPadding=0,t.prototype.customJsCode="",t.prototype.videoQuality=0,t.prototype.initializationSettingsJson="",t.prototype.adSkippability=0,t.prototype.skipAdAfter=5,t.prototype.adBreaks=o.emptyArray,t.prototype.amazonTamSlotId="",t.prototype.midRollOnlyOnLongContent=!0,t.prototype.limitClientSideApiUse=!1,t.prototype.abTestId="",t.encode=function(t,i){if(i||(i=h.create()),null!=t.playerId&&t.hasOwnProperty("playerId")&&i.uint32(10).string(t.playerId),null!=t.playbackMode&&t.hasOwnProperty("playbackMode")&&i.uint32(16).int32(t.playbackMode),null!=t.soundMode&&t.hasOwnProperty("soundMode")&&i.uint32(24).int32(t.soundMode),null!=t.upNextMode&&t.hasOwnProperty("upNextMode")&&i.uint32(32).int32(t.upNextMode),null!=t.containerSelector&&t.hasOwnProperty("containerSelector")&&i.uint32(42).string(t.containerSelector),null!=t.position&&t.hasOwnProperty("position")&&i.uint32(48).int32(t.position),null!=t.insertPosition&&t.hasOwnProperty("insertPosition")&&i.uint32(56).int32(t.insertPosition),null!=t.forceInsertPath&&t.hasOwnProperty("forceInsertPath")&&i.uint32(64).bool(t.forceInsertPath),null!=t.renderInFrame&&t.hasOwnProperty("renderInFrame")&&i.uint32(72).bool(t.renderInFrame),null!=t.scrollHijackingProtection&&t.hasOwnProperty("scrollHijackingProtection")&&i.uint32(80).bool(t.scrollHijackingProtection),null!=t.preRollBreak&&t.hasOwnProperty("preRollBreak")&&i.uint32(88).int32(t.preRollBreak),null!=t.postRollBreak&&t.hasOwnProperty("postRollBreak")&&i.uint32(96).int32(t.postRollBreak),null!=t.midRollNumber&&t.hasOwnProperty("midRollNumber")&&i.uint32(104).int32(t.midRollNumber),null!=t.timeBetweenAds&&t.hasOwnProperty("timeBetweenAds")&&i.uint32(112).int32(t.timeBetweenAds),null!=t.minTimeBeforeFirstAd&&t.hasOwnProperty("minTimeBeforeFirstAd")&&i.uint32(120).int32(t.minTimeBeforeFirstAd),null!=t.adViewabilityPolicy&&t.hasOwnProperty("adViewabilityPolicy")&&i.uint32(128).int32(t.adViewabilityPolicy),null!=t.responsive&&t.hasOwnProperty("responsive")&&i.uint32(144).bool(t.responsive),null!=t.ratioWidth&&t.hasOwnProperty("ratioWidth")&&i.uint32(152).int32(t.ratioWidth),null!=t.ratioHeight&&t.hasOwnProperty("ratioHeight")&&i.uint32(160).int32(t.ratioHeight),null!=t.fixedWidth&&t.hasOwnProperty("fixedWidth")&&i.uint32(168).int32(t.fixedWidth),null!=t.fixedHeight&&t.hasOwnProperty("fixedHeight")&&i.uint32(176).int32(t.fixedHeight),null!=t.casting&&t.hasOwnProperty("casting")&&i.uint32(184).bool(t.casting),null!=t.sharingDestinations&&t.sharingDestinations.length){i.uint32(194).fork();for(var e=0;e<t.sharingDestinations.length;++e)i.int32(t.sharingDestinations[e]);i.ldelim()}if(null!=t.closedCaption&&t.hasOwnProperty("closedCaption")&&i.uint32(200).bool(t.closedCaption),null!=t.muteWatermark&&t.hasOwnProperty("muteWatermark")&&i.uint32(208).bool(t.muteWatermark),null!=t.expandButton&&t.hasOwnProperty("expandButton")&&i.uint32(216).bool(t.expandButton),null!=t.closeButtonMode&&t.hasOwnProperty("closeButtonMode")&&i.uint32(224).int32(t.closeButtonMode),null!=t.floatingMode&&t.hasOwnProperty("floatingMode")&&i.uint32(232).int32(t.floatingMode),null!=t.floatingDeviceMode&&t.floatingDeviceMode.length){i.uint32(242).fork();for(e=0;e<t.floatingDeviceMode.length;++e)i.int32(t.floatingDeviceMode[e]);i.ldelim()}if(null!=t.floatingCloseButtonMode&&t.hasOwnProperty("floatingCloseButtonMode")&&i.uint32(248).int32(t.floatingCloseButtonMode),null!=t.floatingFixedPosition&&t.hasOwnProperty("floatingFixedPosition")&&i.uint32(256).int32(t.floatingFixedPosition),null!=t.floatingPageElement&&t.hasOwnProperty("floatingPageElement")&&i.uint32(266).string(t.floatingPageElement),null!=t.floatingUseElementWidth&&t.hasOwnProperty("floatingUseElementWidth")&&i.uint32(272).bool(t.floatingUseElementWidth),null!=t.floatingScrollPosition&&t.hasOwnProperty("floatingScrollPosition")&&i.uint32(280).int32(t.floatingScrollPosition),null!=t.floatingGutterX&&t.hasOwnProperty("floatingGutterX")&&i.uint32(288).int32(t.floatingGutterX),null!=t.floatingGutterY&&t.hasOwnProperty("floatingGutterY")&&i.uint32(296).int32(t.floatingGutterY),null!=t.floatingWidth&&t.hasOwnProperty("floatingWidth")&&i.uint32(304).int32(t.floatingWidth),null!=t.iconsColor&&t.hasOwnProperty("iconsColor")&&i.uint32(314).string(t.iconsColor),null!=t.accentColor&&t.hasOwnProperty("accentColor")&&i.uint32(322).string(t.accentColor),null!=t.tooltipTextColor&&t.hasOwnProperty("tooltipTextColor")&&i.uint32(330).string(t.tooltipTextColor),null!=t.tooltipBackgroundColor&&t.hasOwnProperty("tooltipBackgroundColor")&&i.uint32(338).string(t.tooltipBackgroundColor),null!=t.html&&t.hasOwnProperty("html")&&i.uint32(346).string(t.html),null!=t.galleryStyle&&t.hasOwnProperty("galleryStyle")&&i.uint32(360).int32(t.galleryStyle),null!=t.logoPosition&&t.hasOwnProperty("logoPosition")&&i.uint32(368).int32(t.logoPosition),null!=t.logoUrl&&t.hasOwnProperty("logoUrl")&&i.uint32(378).string(t.logoUrl),null!=t.lineItems&&t.lineItems.length)for(e=0;e<t.lineItems.length;++e)c.ProtoLineItem.encode(t.lineItems[e],i.uint32(394).fork()).ldelim();if(null!=t.adPlaybackMode&&t.hasOwnProperty("adPlaybackMode")&&i.uint32(400).int32(t.adPlaybackMode),null!=t.css&&t.hasOwnProperty("css")&&i.uint32(410).string(t.css),null!=t.sessionId&&t.hasOwnProperty("sessionId")&&i.uint32(418).string(t.sessionId),null!=t.playlistId&&t.hasOwnProperty("playlistId")&&i.uint32(426).string(t.playlistId),null!=t.playerType&&t.hasOwnProperty("playerType")&&i.uint32(432).int32(t.playerType),null!=t.outstreamInitialRendering&&t.hasOwnProperty("outstreamInitialRendering")&&i.uint32(440).int32(t.outstreamInitialRendering),null!=t.outstreamHouseBackgroundColor&&t.hasOwnProperty("outstreamHouseBackgroundColor")&&i.uint32(450).string(t.outstreamHouseBackgroundColor),null!=t.outstreamTotalAdBreakLength&&t.hasOwnProperty("outstreamTotalAdBreakLength")&&i.uint32(456).int32(t.outstreamTotalAdBreakLength),null!=t.outstreamEndAdBreakPolicy&&t.hasOwnProperty("outstreamEndAdBreakPolicy")&&i.uint32(464).int32(t.outstreamEndAdBreakPolicy),null!=t.galleryOrientation&&t.hasOwnProperty("galleryOrientation")&&i.uint32(472).int32(t.galleryOrientation),null!=t.playlist&&t.playlist.length)for(e=0;e<t.playlist.length;++e)c.ProtoPlaylistItem.encode(t.playlist[e],i.uint32(482).fork()).ldelim();if(null!=t.floatingAppendLocation&&t.hasOwnProperty("floatingAppendLocation")&&i.uint32(488).int32(t.floatingAppendLocation),null!=t.floatingYAxisPadding&&t.hasOwnProperty("floatingYAxisPadding")&&i.uint32(496).int32(t.floatingYAxisPadding),null!=t.customJsCode&&t.hasOwnProperty("customJsCode")&&i.uint32(506).string(t.customJsCode),null!=t.videoQuality&&t.hasOwnProperty("videoQuality")&&i.uint32(512).int32(t.videoQuality),null!=t.initializationSettingsJson&&t.hasOwnProperty("initializationSettingsJson")&&i.uint32(522).string(t.initializationSettingsJson),null!=t.adSkippability&&t.hasOwnProperty("adSkippability")&&i.uint32(528).int32(t.adSkippability),null!=t.skipAdAfter&&t.hasOwnProperty("skipAdAfter")&&i.uint32(536).int32(t.skipAdAfter),null!=t.adBreaks&&t.adBreaks.length)for(e=0;e<t.adBreaks.length;++e)c.ProtoAdBreak.encode(t.adBreaks[e],i.uint32(546).fork()).ldelim();return null!=t.amazonTamSlotId&&t.hasOwnProperty("amazonTamSlotId")&&i.uint32(554).string(t.amazonTamSlotId),null!=t.midRollOnlyOnLongContent&&t.hasOwnProperty("midRollOnlyOnLongContent")&&i.uint32(560).bool(t.midRollOnlyOnLongContent),null!=t.limitClientSideApiUse&&t.hasOwnProperty("limitClientSideApiUse")&&i.uint32(568).bool(t.limitClientSideApiUse),null!=t.abTestId&&t.hasOwnProperty("abTestId")&&i.uint32(578).string(t.abTestId),i},t.decode=function(t,i){t instanceof a||(t=a.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoElements;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.playerId=t.string();break;case 2:s.playbackMode=t.int32();break;case 3:s.soundMode=t.int32();break;case 4:s.upNextMode=t.int32();break;case 5:s.containerSelector=t.string();break;case 6:s.position=t.int32();break;case 7:s.insertPosition=t.int32();break;case 8:s.forceInsertPath=t.bool();break;case 9:s.renderInFrame=t.bool();break;case 10:s.scrollHijackingProtection=t.bool();break;case 11:s.preRollBreak=t.int32();break;case 12:s.postRollBreak=t.int32();break;case 13:s.midRollNumber=t.int32();break;case 14:s.timeBetweenAds=t.int32();break;case 15:s.minTimeBeforeFirstAd=t.int32();break;case 16:s.adViewabilityPolicy=t.int32();break;case 18:s.responsive=t.bool();break;case 19:s.ratioWidth=t.int32();break;case 20:s.ratioHeight=t.int32();break;case 21:s.fixedWidth=t.int32();break;case 22:s.fixedHeight=t.int32();break;case 23:s.casting=t.bool();break;case 24:if(s.sharingDestinations&&s.sharingDestinations.length||(s.sharingDestinations=[]),2==(7&n))for(var r=t.uint32()+t.pos;t.pos<r;)s.sharingDestinations.push(t.int32());else s.sharingDestinations.push(t.int32());break;case 25:s.closedCaption=t.bool();break;case 26:s.muteWatermark=t.bool();break;case 27:s.expandButton=t.bool();break;case 28:s.closeButtonMode=t.int32();break;case 29:s.floatingMode=t.int32();break;case 30:if(s.floatingDeviceMode&&s.floatingDeviceMode.length||(s.floatingDeviceMode=[]),2==(7&n))for(r=t.uint32()+t.pos;t.pos<r;)s.floatingDeviceMode.push(t.int32());else s.floatingDeviceMode.push(t.int32());break;case 31:s.floatingCloseButtonMode=t.int32();break;case 32:s.floatingFixedPosition=t.int32();break;case 33:s.floatingPageElement=t.string();break;case 34:s.floatingUseElementWidth=t.bool();break;case 35:s.floatingScrollPosition=t.int32();break;case 36:s.floatingGutterX=t.int32();break;case 37:s.floatingGutterY=t.int32();break;case 38:s.floatingWidth=t.int32();break;case 39:s.iconsColor=t.string();break;case 40:s.accentColor=t.string();break;case 41:s.tooltipTextColor=t.string();break;case 42:s.tooltipBackgroundColor=t.string();break;case 43:s.html=t.string();break;case 45:s.galleryStyle=t.int32();break;case 46:s.logoPosition=t.int32();break;case 47:s.logoUrl=t.string();break;case 49:s.lineItems&&s.lineItems.length||(s.lineItems=[]),s.lineItems.push(c.ProtoLineItem.decode(t,t.uint32()));break;case 50:s.adPlaybackMode=t.int32();break;case 51:s.css=t.string();break;case 52:s.sessionId=t.string();break;case 53:s.playlistId=t.string();break;case 54:s.playerType=t.int32();break;case 55:s.outstreamInitialRendering=t.int32();break;case 56:s.outstreamHouseBackgroundColor=t.string();break;case 57:s.outstreamTotalAdBreakLength=t.int32();break;case 58:s.outstreamEndAdBreakPolicy=t.int32();break;case 59:s.galleryOrientation=t.int32();break;case 60:s.playlist&&s.playlist.length||(s.playlist=[]),s.playlist.push(c.ProtoPlaylistItem.decode(t,t.uint32()));break;case 61:s.floatingAppendLocation=t.int32();break;case 62:s.floatingYAxisPadding=t.int32();break;case 63:s.customJsCode=t.string();break;case 64:s.videoQuality=t.int32();break;case 65:s.initializationSettingsJson=t.string();break;case 66:s.adSkippability=t.int32();break;case 67:s.skipAdAfter=t.int32();break;case 68:s.adBreaks&&s.adBreaks.length||(s.adBreaks=[]),s.adBreaks.push(c.ProtoAdBreak.decode(t,t.uint32()));break;case 69:s.amazonTamSlotId=t.string();break;case 70:s.midRollOnlyOnLongContent=t.bool();break;case 71:s.limitClientSideApiUse=t.bool();break;case 72:s.abTestId=t.string();break;default:t.skipType(7&n)}}return s},t.fromObject=function(t){if(t instanceof c.ProtoElements)return t;var i=new c.ProtoElements;switch(null!=t.playerId&&(i.playerId=String(t.playerId)),t.playbackMode){case"Autoplay":case 0:i.playbackMode=0;break;case"ScrollToPlay":case 1:i.playbackMode=1;break;case"ClickToPlay":case 2:i.playbackMode=2}switch(t.soundMode){case"Mute":case 0:i.soundMode=0;break;case"On":case 1:i.soundMode=1;break;case"Hover":case 2:i.soundMode=2}switch(t.upNextMode){case"Loop":case 0:i.upNextMode=0;break;case"Next":case 1:i.upNextMode=1;break;case"Stop":case 2:i.upNextMode=2}switch(null!=t.containerSelector&&(i.containerSelector=String(t.containerSelector)),null!=t.position&&(i.position=0|t.position),t.insertPosition){case"WithinContainer":case 0:i.insertPosition=0;break;case"BeforeContainer":case 1:i.insertPosition=1;break;case"AfterContainer":case 2:i.insertPosition=2;break;case"ReplaceContainer":case 3:i.insertPosition=3;break;case"HideContainer":case 4:i.insertPosition=4}switch(null!=t.forceInsertPath&&(i.forceInsertPath=Boolean(t.forceInsertPath)),null!=t.renderInFrame&&(i.renderInFrame=Boolean(t.renderInFrame)),null!=t.scrollHijackingProtection&&(i.scrollHijackingProtection=Boolean(t.scrollHijackingProtection)),null!=t.preRollBreak&&(i.preRollBreak=0|t.preRollBreak),null!=t.postRollBreak&&(i.postRollBreak=0|t.postRollBreak),null!=t.midRollNumber&&(i.midRollNumber=0|t.midRollNumber),null!=t.timeBetweenAds&&(i.timeBetweenAds=0|t.timeBetweenAds),null!=t.minTimeBeforeFirstAd&&(i.minTimeBeforeFirstAd=0|t.minTimeBeforeFirstAd),t.adViewabilityPolicy){case"Default":case 0:i.adViewabilityPolicy=0;break;case"Strict":case 1:i.adViewabilityPolicy=1}if(null!=t.responsive&&(i.responsive=Boolean(t.responsive)),null!=t.ratioWidth&&(i.ratioWidth=0|t.ratioWidth),null!=t.ratioHeight&&(i.ratioHeight=0|t.ratioHeight),null!=t.fixedWidth&&(i.fixedWidth=0|t.fixedWidth),null!=t.fixedHeight&&(i.fixedHeight=0|t.fixedHeight),null!=t.casting&&(i.casting=Boolean(t.casting)),t.sharingDestinations){if(!Array.isArray(t.sharingDestinations))throw TypeError(".ProtoElements.sharingDestinations: array expected");i.sharingDestinations=[];for(var e=0;e<t.sharingDestinations.length;++e)switch(t.sharingDestinations[e]){default:case"Facebook":case 0:i.sharingDestinations[e]=0;break;case"Twitter":case 1:i.sharingDestinations[e]=1;break;case"LinkedIn":case 2:i.sharingDestinations[e]=2}}switch(null!=t.closedCaption&&(i.closedCaption=Boolean(t.closedCaption)),null!=t.muteWatermark&&(i.muteWatermark=Boolean(t.muteWatermark)),null!=t.expandButton&&(i.expandButton=Boolean(t.expandButton)),t.closeButtonMode){case"Off":case 0:i.closeButtonMode=0;break;case"OnHover":case 1:i.closeButtonMode=1;break;case"OnHoverAfterFirstAd":case 2:i.closeButtonMode=2;break;case"AlwaysOn":case 3:i.closeButtonMode=3}switch(t.floatingMode){case"Off":case 0:i.floatingMode=0;break;case"OnPageLoad":case 1:i.floatingMode=1;break;case"AfterInView":case 2:i.floatingMode=2;break;case"Always":case 3:i.floatingMode=3}if(t.floatingDeviceMode){if(!Array.isArray(t.floatingDeviceMode))throw TypeError(".ProtoElements.floatingDeviceMode: array expected");i.floatingDeviceMode=[];for(e=0;e<t.floatingDeviceMode.length;++e)switch(t.floatingDeviceMode[e]){default:case"Desktop":case 0:i.floatingDeviceMode[e]=0;break;case"Smartphone":case 1:i.floatingDeviceMode[e]=1;break;case"Tablet":case 2:i.floatingDeviceMode[e]=2;break;case"GameConsole":case 3:i.floatingDeviceMode[e]=3;break;case"SmartTV":case 4:i.floatingDeviceMode[e]=4;break;case"WearableComputer":case 5:i.floatingDeviceMode[e]=5;break;case"PDA":case 6:i.floatingDeviceMode[e]=6;break;case"Unrecognized":case 7:i.floatingDeviceMode[e]=7}}switch(t.floatingCloseButtonMode){case"Off":case 0:i.floatingCloseButtonMode=0;break;case"OnHover":case 1:i.floatingCloseButtonMode=1;break;case"OnHoverAfterFirstAd":case 2:i.floatingCloseButtonMode=2;break;case"AlwaysOn":case 3:i.floatingCloseButtonMode=3}switch(t.floatingFixedPosition){case"Page":case 0:i.floatingFixedPosition=0;break;case"Element":case 1:i.floatingFixedPosition=1}switch(null!=t.floatingPageElement&&(i.floatingPageElement=String(t.floatingPageElement)),null!=t.floatingUseElementWidth&&(i.floatingUseElementWidth=Boolean(t.floatingUseElementWidth)),t.floatingScrollPosition){case"BottomRight":case 0:i.floatingScrollPosition=0;break;case"BottomLeft":case 1:i.floatingScrollPosition=1;break;case"TopRight":case 2:i.floatingScrollPosition=2;break;case"TopLeft":case 3:i.floatingScrollPosition=3}switch(null!=t.floatingGutterX&&(i.floatingGutterX=0|t.floatingGutterX),null!=t.floatingGutterY&&(i.floatingGutterY=0|t.floatingGutterY),null!=t.floatingWidth&&(i.floatingWidth=0|t.floatingWidth),null!=t.iconsColor&&(i.iconsColor=String(t.iconsColor)),null!=t.accentColor&&(i.accentColor=String(t.accentColor)),null!=t.tooltipTextColor&&(i.tooltipTextColor=String(t.tooltipTextColor)),null!=t.tooltipBackgroundColor&&(i.tooltipBackgroundColor=String(t.tooltipBackgroundColor)),null!=t.html&&(i.html=String(t.html)),t.galleryStyle){case"None":case 0:i.galleryStyle=0;break;case"Detailed":case 1:i.galleryStyle=1;break;case"Visual":case 2:i.galleryStyle=2}switch(t.logoPosition){case"None":case 0:i.logoPosition=0;break;case"ControlBar":case 1:i.logoPosition=1;break;case"BottomRight":case 2:i.logoPosition=2;break;case"BottomLeft":case 3:i.logoPosition=3;break;case"TopRight":case 4:i.logoPosition=4;break;case"TopLeft":case 5:i.logoPosition=5;break;case"Center":case 6:i.logoPosition=6}if(null!=t.logoUrl&&(i.logoUrl=String(t.logoUrl)),t.lineItems){if(!Array.isArray(t.lineItems))throw TypeError(".ProtoElements.lineItems: array expected");i.lineItems=[];for(e=0;e<t.lineItems.length;++e){if("object"!=typeof t.lineItems[e])throw TypeError(".ProtoElements.lineItems: object expected");i.lineItems[e]=c.ProtoLineItem.fromObject(t.lineItems[e])}}switch(t.adPlaybackMode){case"Autoplay":case 0:i.adPlaybackMode=0;break;case"ScrollToPlay":case 1:i.adPlaybackMode=1}switch(null!=t.css&&(i.css=String(t.css)),null!=t.sessionId&&(i.sessionId=String(t.sessionId)),null!=t.playlistId&&(i.playlistId=String(t.playlistId)),t.playerType){case"InStream":case 0:i.playerType=0;break;case"OutStream":case 1:i.playerType=1;break;case"InStreamInApp":case 2:i.playerType=2;break;case"Live":case 3:i.playerType=3}switch(t.outstreamInitialRendering){case"ExpandWithAd":case 0:i.outstreamInitialRendering=0;break;case"FullyRendered":case 1:i.outstreamInitialRendering=1}switch(null!=t.outstreamHouseBackgroundColor&&(i.outstreamHouseBackgroundColor=String(t.outstreamHouseBackgroundColor)),null!=t.outstreamTotalAdBreakLength&&(i.outstreamTotalAdBreakLength=0|t.outstreamTotalAdBreakLength),t.outstreamEndAdBreakPolicy){case"Hide":case 0:i.outstreamEndAdBreakPolicy=0;break;case"HouseScreen":case 1:i.outstreamEndAdBreakPolicy=1;break;case"Loop":case 2:i.outstreamEndAdBreakPolicy=2}switch(t.galleryOrientation){case"Landscape":case 0:i.galleryOrientation=0;break;case"Portrait":case 1:i.galleryOrientation=1}if(t.playlist){if(!Array.isArray(t.playlist))throw TypeError(".ProtoElements.playlist: array expected");i.playlist=[];for(e=0;e<t.playlist.length;++e){if("object"!=typeof t.playlist[e])throw TypeError(".ProtoElements.playlist: object expected");i.playlist[e]=c.ProtoPlaylistItem.fromObject(t.playlist[e])}}switch(t.floatingAppendLocation){case"Above":case 0:i.floatingAppendLocation=0;break;case"Below":case 1:i.floatingAppendLocation=1;break;case"Within":case 2:i.floatingAppendLocation=2}switch(null!=t.floatingYAxisPadding&&(i.floatingYAxisPadding=0|t.floatingYAxisPadding),null!=t.customJsCode&&(i.customJsCode=String(t.customJsCode)),t.videoQuality){case"Auto":case 0:i.videoQuality=0;break;case"High1080p":case 1:i.videoQuality=1;break;case"High720p":case 2:i.videoQuality=2;break;case"Medium360p":case 3:i.videoQuality=3}switch(null!=t.initializationSettingsJson&&(i.initializationSettingsJson=String(t.initializationSettingsJson)),t.adSkippability){case"IfLongerThan31Sec":case 0:i.adSkippability=0;break;case"Always":case 1:i.adSkippability=1;break;case"NoRestrictions":case 2:i.adSkippability=2}if(null!=t.skipAdAfter&&(i.skipAdAfter=0|t.skipAdAfter),t.adBreaks){if(!Array.isArray(t.adBreaks))throw TypeError(".ProtoElements.adBreaks: array expected");i.adBreaks=[];for(e=0;e<t.adBreaks.length;++e){if("object"!=typeof t.adBreaks[e])throw TypeError(".ProtoElements.adBreaks: object expected");i.adBreaks[e]=c.ProtoAdBreak.fromObject(t.adBreaks[e])}}return null!=t.amazonTamSlotId&&(i.amazonTamSlotId=String(t.amazonTamSlotId)),null!=t.midRollOnlyOnLongContent&&(i.midRollOnlyOnLongContent=Boolean(t.midRollOnlyOnLongContent)),null!=t.limitClientSideApiUse&&(i.limitClientSideApiUse=Boolean(t.limitClientSideApiUse)),null!=t.abTestId&&(i.abTestId=String(t.abTestId)),i},t.toObject=function(t,i){i||(i={});var e={};if((i.arrays||i.defaults)&&(e.sharingDestinations=[],e.floatingDeviceMode=[],e.lineItems=[],e.playlist=[],e.adBreaks=[]),i.defaults&&(e.playerId="",e.playbackMode=i.enums===String?"Autoplay":0,e.soundMode=i.enums===String?"Mute":0,e.upNextMode=i.enums===String?"Next":1,e.containerSelector="",e.position=0,e.insertPosition=i.enums===String?"WithinContainer":0,e.forceInsertPath=!1,e.renderInFrame=!1,e.scrollHijackingProtection=!1,e.preRollBreak=0,e.postRollBreak=0,e.midRollNumber=-1,e.timeBetweenAds=0,e.minTimeBeforeFirstAd=0,e.adViewabilityPolicy=i.enums===String?"Default":0,e.responsive=!1,e.ratioWidth=0,e.ratioHeight=0,e.fixedWidth=0,e.fixedHeight=0,e.casting=!1,e.closedCaption=!1,e.muteWatermark=!1,e.expandButton=!1,e.closeButtonMode=i.enums===String?"Off":0,e.floatingMode=i.enums===String?"Off":0,e.floatingCloseButtonMode=i.enums===String?"Off":0,e.floatingFixedPosition=i.enums===String?"Page":0,e.floatingPageElement="",e.floatingUseElementWidth=!1,e.floatingScrollPosition=i.enums===String?"BottomRight":0,e.floatingGutterX=0,e.floatingGutterY=0,e.floatingWidth=0,e.iconsColor="",e.accentColor="",e.tooltipTextColor="",e.tooltipBackgroundColor="",e.html="",e.galleryStyle=i.enums===String?"None":0,e.logoPosition=i.enums===String?"None":0,e.logoUrl="",e.adPlaybackMode=i.enums===String?"Autoplay":0,e.css="",e.sessionId="",e.playlistId="",e.playerType=i.enums===String?"InStream":0,e.outstreamInitialRendering=i.enums===String?"ExpandWithAd":0,e.outstreamHouseBackgroundColor="",e.outstreamTotalAdBreakLength=0,e.outstreamEndAdBreakPolicy=i.enums===String?"Hide":0,e.galleryOrientation=i.enums===String?"Landscape":0,e.floatingAppendLocation=i.enums===String?"Above":0,e.floatingYAxisPadding=0,e.customJsCode="",e.videoQuality=i.enums===String?"Auto":0,e.initializationSettingsJson="",e.adSkippability=i.enums===String?"IfLongerThan31Sec":0,e.skipAdAfter=5,e.amazonTamSlotId="",e.midRollOnlyOnLongContent=!0,e.limitClientSideApiUse=!1,e.abTestId=""),null!=t.playerId&&t.hasOwnProperty("playerId")&&(e.playerId=t.playerId),null!=t.playbackMode&&t.hasOwnProperty("playbackMode")&&(e.playbackMode=i.enums===String?c.ProtoPlayerPlaybackModeEnum[t.playbackMode]:t.playbackMode),null!=t.soundMode&&t.hasOwnProperty("soundMode")&&(e.soundMode=i.enums===String?c.ProtoPlayerSoundMode[t.soundMode]:t.soundMode),null!=t.upNextMode&&t.hasOwnProperty("upNextMode")&&(e.upNextMode=i.enums===String?c.ProtoPlayerUpNextMode[t.upNextMode]:t.upNextMode),null!=t.containerSelector&&t.hasOwnProperty("containerSelector")&&(e.containerSelector=t.containerSelector),null!=t.position&&t.hasOwnProperty("position")&&(e.position=t.position),null!=t.insertPosition&&t.hasOwnProperty("insertPosition")&&(e.insertPosition=i.enums===String?c.ProtoPlayerInsertMode[t.insertPosition]:t.insertPosition),null!=t.forceInsertPath&&t.hasOwnProperty("forceInsertPath")&&(e.forceInsertPath=t.forceInsertPath),null!=t.renderInFrame&&t.hasOwnProperty("renderInFrame")&&(e.renderInFrame=t.renderInFrame),null!=t.scrollHijackingProtection&&t.hasOwnProperty("scrollHijackingProtection")&&(e.scrollHijackingProtection=t.scrollHijackingProtection),null!=t.preRollBreak&&t.hasOwnProperty("preRollBreak")&&(e.preRollBreak=t.preRollBreak),null!=t.postRollBreak&&t.hasOwnProperty("postRollBreak")&&(e.postRollBreak=t.postRollBreak),null!=t.midRollNumber&&t.hasOwnProperty("midRollNumber")&&(e.midRollNumber=t.midRollNumber),null!=t.timeBetweenAds&&t.hasOwnProperty("timeBetweenAds")&&(e.timeBetweenAds=t.timeBetweenAds),null!=t.minTimeBeforeFirstAd&&t.hasOwnProperty("minTimeBeforeFirstAd")&&(e.minTimeBeforeFirstAd=t.minTimeBeforeFirstAd),null!=t.adViewabilityPolicy&&t.hasOwnProperty("adViewabilityPolicy")&&(e.adViewabilityPolicy=i.enums===String?c.ProtoAdViewabilityPolicy[t.adViewabilityPolicy]:t.adViewabilityPolicy),null!=t.responsive&&t.hasOwnProperty("responsive")&&(e.responsive=t.responsive),null!=t.ratioWidth&&t.hasOwnProperty("ratioWidth")&&(e.ratioWidth=t.ratioWidth),null!=t.ratioHeight&&t.hasOwnProperty("ratioHeight")&&(e.ratioHeight=t.ratioHeight),null!=t.fixedWidth&&t.hasOwnProperty("fixedWidth")&&(e.fixedWidth=t.fixedWidth),null!=t.fixedHeight&&t.hasOwnProperty("fixedHeight")&&(e.fixedHeight=t.fixedHeight),null!=t.casting&&t.hasOwnProperty("casting")&&(e.casting=t.casting),t.sharingDestinations&&t.sharingDestinations.length){e.sharingDestinations=[];for(var s=0;s<t.sharingDestinations.length;++s)e.sharingDestinations[s]=i.enums===String?c.ProtoSharingDestination[t.sharingDestinations[s]]:t.sharingDestinations[s]}if(null!=t.closedCaption&&t.hasOwnProperty("closedCaption")&&(e.closedCaption=t.closedCaption),null!=t.muteWatermark&&t.hasOwnProperty("muteWatermark")&&(e.muteWatermark=t.muteWatermark),null!=t.expandButton&&t.hasOwnProperty("expandButton")&&(e.expandButton=t.expandButton),null!=t.closeButtonMode&&t.hasOwnProperty("closeButtonMode")&&(e.closeButtonMode=i.enums===String?c.ProtoPlayerCloseButtonMode[t.closeButtonMode]:t.closeButtonMode),null!=t.floatingMode&&t.hasOwnProperty("floatingMode")&&(e.floatingMode=i.enums===String?c.ProtoPlayerFloatingMode[t.floatingMode]:t.floatingMode),t.floatingDeviceMode&&t.floatingDeviceMode.length){e.floatingDeviceMode=[];for(s=0;s<t.floatingDeviceMode.length;++s)e.floatingDeviceMode[s]=i.enums===String?c.ProtoDeviceType[t.floatingDeviceMode[s]]:t.floatingDeviceMode[s]}if(null!=t.floatingCloseButtonMode&&t.hasOwnProperty("floatingCloseButtonMode")&&(e.floatingCloseButtonMode=i.enums===String?c.ProtoPlayerCloseButtonMode[t.floatingCloseButtonMode]:t.floatingCloseButtonMode),null!=t.floatingFixedPosition&&t.hasOwnProperty("floatingFixedPosition")&&(e.floatingFixedPosition=i.enums===String?c.ProtoFloatingFixedPositionMode[t.floatingFixedPosition]:t.floatingFixedPosition),null!=t.floatingPageElement&&t.hasOwnProperty("floatingPageElement")&&(e.floatingPageElement=t.floatingPageElement),null!=t.floatingUseElementWidth&&t.hasOwnProperty("floatingUseElementWidth")&&(e.floatingUseElementWidth=t.floatingUseElementWidth),null!=t.floatingScrollPosition&&t.hasOwnProperty("floatingScrollPosition")&&(e.floatingScrollPosition=i.enums===String?c.ProtoPositionMode[t.floatingScrollPosition]:t.floatingScrollPosition),null!=t.floatingGutterX&&t.hasOwnProperty("floatingGutterX")&&(e.floatingGutterX=t.floatingGutterX),null!=t.floatingGutterY&&t.hasOwnProperty("floatingGutterY")&&(e.floatingGutterY=t.floatingGutterY),null!=t.floatingWidth&&t.hasOwnProperty("floatingWidth")&&(e.floatingWidth=t.floatingWidth),null!=t.iconsColor&&t.hasOwnProperty("iconsColor")&&(e.iconsColor=t.iconsColor),null!=t.accentColor&&t.hasOwnProperty("accentColor")&&(e.accentColor=t.accentColor),null!=t.tooltipTextColor&&t.hasOwnProperty("tooltipTextColor")&&(e.tooltipTextColor=t.tooltipTextColor),null!=t.tooltipBackgroundColor&&t.hasOwnProperty("tooltipBackgroundColor")&&(e.tooltipBackgroundColor=t.tooltipBackgroundColor),null!=t.html&&t.hasOwnProperty("html")&&(e.html=t.html),null!=t.galleryStyle&&t.hasOwnProperty("galleryStyle")&&(e.galleryStyle=i.enums===String?c.ProtoGalleryStyleMode[t.galleryStyle]:t.galleryStyle),null!=t.logoPosition&&t.hasOwnProperty("logoPosition")&&(e.logoPosition=i.enums===String?c.ProtoLogoPositionMode[t.logoPosition]:t.logoPosition),null!=t.logoUrl&&t.hasOwnProperty("logoUrl")&&(e.logoUrl=t.logoUrl),t.lineItems&&t.lineItems.length){e.lineItems=[];for(s=0;s<t.lineItems.length;++s)e.lineItems[s]=c.ProtoLineItem.toObject(t.lineItems[s],i)}if(null!=t.adPlaybackMode&&t.hasOwnProperty("adPlaybackMode")&&(e.adPlaybackMode=i.enums===String?c.ProtoAdPlaybackMode[t.adPlaybackMode]:t.adPlaybackMode),null!=t.css&&t.hasOwnProperty("css")&&(e.css=t.css),null!=t.sessionId&&t.hasOwnProperty("sessionId")&&(e.sessionId=t.sessionId),null!=t.playlistId&&t.hasOwnProperty("playlistId")&&(e.playlistId=t.playlistId),null!=t.playerType&&t.hasOwnProperty("playerType")&&(e.playerType=i.enums===String?c.ProtoElementsTypeEnum[t.playerType]:t.playerType),null!=t.outstreamInitialRendering&&t.hasOwnProperty("outstreamInitialRendering")&&(e.outstreamInitialRendering=i.enums===String?c.ProtoOutstreamInitialRenderingEnum[t.outstreamInitialRendering]:t.outstreamInitialRendering),null!=t.outstreamHouseBackgroundColor&&t.hasOwnProperty("outstreamHouseBackgroundColor")&&(e.outstreamHouseBackgroundColor=t.outstreamHouseBackgroundColor),null!=t.outstreamTotalAdBreakLength&&t.hasOwnProperty("outstreamTotalAdBreakLength")&&(e.outstreamTotalAdBreakLength=t.outstreamTotalAdBreakLength),null!=t.outstreamEndAdBreakPolicy&&t.hasOwnProperty("outstreamEndAdBreakPolicy")&&(e.outstreamEndAdBreakPolicy=i.enums===String?c.ProtoOutstreamEndAdBreakPolicyEnum[t.outstreamEndAdBreakPolicy]:t.outstreamEndAdBreakPolicy),null!=t.galleryOrientation&&t.hasOwnProperty("galleryOrientation")&&(e.galleryOrientation=i.enums===String?c.ProtoGalleryOrientationEnum[t.galleryOrientation]:t.galleryOrientation),t.playlist&&t.playlist.length){e.playlist=[];for(s=0;s<t.playlist.length;++s)e.playlist[s]=c.ProtoPlaylistItem.toObject(t.playlist[s],i)}if(null!=t.floatingAppendLocation&&t.hasOwnProperty("floatingAppendLocation")&&(e.floatingAppendLocation=i.enums===String?c.ProtoFloatingAppendLocationEnum[t.floatingAppendLocation]:t.floatingAppendLocation),null!=t.floatingYAxisPadding&&t.hasOwnProperty("floatingYAxisPadding")&&(e.floatingYAxisPadding=t.floatingYAxisPadding),null!=t.customJsCode&&t.hasOwnProperty("customJsCode")&&(e.customJsCode=t.customJsCode),null!=t.videoQuality&&t.hasOwnProperty("videoQuality")&&(e.videoQuality=i.enums===String?c.ProtoVideoQuality[t.videoQuality]:t.videoQuality),null!=t.initializationSettingsJson&&t.hasOwnProperty("initializationSettingsJson")&&(e.initializationSettingsJson=t.initializationSettingsJson),null!=t.adSkippability&&t.hasOwnProperty("adSkippability")&&(e.adSkippability=i.enums===String?c.ProtoPlayerAdSkippability[t.adSkippability]:t.adSkippability),null!=t.skipAdAfter&&t.hasOwnProperty("skipAdAfter")&&(e.skipAdAfter=t.skipAdAfter),t.adBreaks&&t.adBreaks.length){e.adBreaks=[];for(s=0;s<t.adBreaks.length;++s)e.adBreaks[s]=c.ProtoAdBreak.toObject(t.adBreaks[s],i)}return null!=t.amazonTamSlotId&&t.hasOwnProperty("amazonTamSlotId")&&(e.amazonTamSlotId=t.amazonTamSlotId),null!=t.midRollOnlyOnLongContent&&t.hasOwnProperty("midRollOnlyOnLongContent")&&(e.midRollOnlyOnLongContent=t.midRollOnlyOnLongContent),null!=t.limitClientSideApiUse&&t.hasOwnProperty("limitClientSideApiUse")&&(e.limitClientSideApiUse=t.limitClientSideApiUse),null!=t.abTestId&&t.hasOwnProperty("abTestId")&&(e.abTestId=t.abTestId),e},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.ProtoElementsResponse=function(){function t(t){if(this.players=[],this.lineItems=[],this.cookieSyncUrls={},t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.errorMessage="",t.prototype.players=o.emptyArray,t.prototype.browser=null,t.prototype.geoLocation=null,t.prototype.lineItems=o.emptyArray,t.prototype.cookieSyncUrls=o.emptyObject,t.prototype.explorationMode=!1,t.prototype.supplyChain=null,t.prototype.secondLevelDomain="",t.prototype.userInformation=null,t.prototype.serverAb0=0,t.prototype.serverAb1=0,t.prototype.isSeoTraffic=!1,t.encode=function(t,i){if(i||(i=h.create()),null!=t.errorMessage&&t.hasOwnProperty("errorMessage")&&i.uint32(10).string(t.errorMessage),null!=t.players&&t.players.length)for(var e=0;e<t.players.length;++e)c.ProtoElements.encode(t.players[e],i.uint32(82).fork()).ldelim();if(null!=t.browser&&t.hasOwnProperty("browser")&&c.Browser.encode(t.browser,i.uint32(90).fork()).ldelim(),null!=t.geoLocation&&t.hasOwnProperty("geoLocation")&&c.GeoLocation.encode(t.geoLocation,i.uint32(98).fork()).ldelim(),null!=t.lineItems&&t.lineItems.length)for(e=0;e<t.lineItems.length;++e)c.ProtoLineItem.encode(t.lineItems[e],i.uint32(106).fork()).ldelim();if(null!=t.cookieSyncUrls&&t.hasOwnProperty("cookieSyncUrls")){var s=Object.keys(t.cookieSyncUrls);for(e=0;e<s.length;++e)i.uint32(114).fork().uint32(8).int32(s[e]).uint32(18).string(t.cookieSyncUrls[s[e]]).ldelim()}return null!=t.explorationMode&&t.hasOwnProperty("explorationMode")&&i.uint32(120).bool(t.explorationMode),null!=t.supplyChain&&t.hasOwnProperty("supplyChain")&&c.ProtoSupplyChain.encode(t.supplyChain,i.uint32(138).fork()).ldelim(),null!=t.secondLevelDomain&&t.hasOwnProperty("secondLevelDomain")&&i.uint32(146).string(t.secondLevelDomain),null!=t.userInformation&&t.hasOwnProperty("userInformation")&&c.ProtoUserInformation.encode(t.userInformation,i.uint32(162).fork()).ldelim(),null!=t.serverAb0&&t.hasOwnProperty("serverAb0")&&i.uint32(168).int32(t.serverAb0),null!=t.serverAb1&&t.hasOwnProperty("serverAb1")&&i.uint32(176).int32(t.serverAb1),null!=t.isSeoTraffic&&t.hasOwnProperty("isSeoTraffic")&&i.uint32(184).bool(t.isSeoTraffic),i},t.decode=function(t,i){t instanceof a||(t=a.create(t));for(var e,s=void 0===i?t.len:t.pos+i,n=new c.ProtoElementsResponse;t.pos<s;){var r=t.uint32();switch(r>>>3){case 1:n.errorMessage=t.string();break;case 10:n.players&&n.players.length||(n.players=[]),n.players.push(c.ProtoElements.decode(t,t.uint32()));break;case 11:n.browser=c.Browser.decode(t,t.uint32());break;case 12:n.geoLocation=c.GeoLocation.decode(t,t.uint32());break;case 13:n.lineItems&&n.lineItems.length||(n.lineItems=[]),n.lineItems.push(c.ProtoLineItem.decode(t,t.uint32()));break;case 14:t.skip().pos++,n.cookieSyncUrls===o.emptyObject&&(n.cookieSyncUrls={}),e=t.int32(),t.pos++,n.cookieSyncUrls[e]=t.string();break;case 15:n.explorationMode=t.bool();break;case 17:n.supplyChain=c.ProtoSupplyChain.decode(t,t.uint32());break;case 18:n.secondLevelDomain=t.string();break;case 20:n.userInformation=c.ProtoUserInformation.decode(t,t.uint32());break;case 21:n.serverAb0=t.int32();break;case 22:n.serverAb1=t.int32();break;case 23:n.isSeoTraffic=t.bool();break;default:t.skipType(7&r)}}return n},t.fromObject=function(t){if(t instanceof c.ProtoElementsResponse)return t;var i=new c.ProtoElementsResponse;if(null!=t.errorMessage&&(i.errorMessage=String(t.errorMessage)),t.players){if(!Array.isArray(t.players))throw TypeError(".ProtoElementsResponse.players: array expected");i.players=[];for(var e=0;e<t.players.length;++e){if("object"!=typeof t.players[e])throw TypeError(".ProtoElementsResponse.players: object expected");i.players[e]=c.ProtoElements.fromObject(t.players[e])}}if(null!=t.browser){if("object"!=typeof t.browser)throw TypeError(".ProtoElementsResponse.browser: object expected");i.browser=c.Browser.fromObject(t.browser)}if(null!=t.geoLocation){if("object"!=typeof t.geoLocation)throw TypeError(".ProtoElementsResponse.geoLocation: object expected");i.geoLocation=c.GeoLocation.fromObject(t.geoLocation)}if(t.lineItems){if(!Array.isArray(t.lineItems))throw TypeError(".ProtoElementsResponse.lineItems: array expected");i.lineItems=[];for(e=0;e<t.lineItems.length;++e){if("object"!=typeof t.lineItems[e])throw TypeError(".ProtoElementsResponse.lineItems: object expected");i.lineItems[e]=c.ProtoLineItem.fromObject(t.lineItems[e])}}if(t.cookieSyncUrls){if("object"!=typeof t.cookieSyncUrls)throw TypeError(".ProtoElementsResponse.cookieSyncUrls: object expected");i.cookieSyncUrls={};var s=Object.keys(t.cookieSyncUrls);for(e=0;e<s.length;++e)i.cookieSyncUrls[s[e]]=String(t.cookieSyncUrls[s[e]])}if(null!=t.explorationMode&&(i.explorationMode=Boolean(t.explorationMode)),null!=t.supplyChain){if("object"!=typeof t.supplyChain)throw TypeError(".ProtoElementsResponse.supplyChain: object expected");i.supplyChain=c.ProtoSupplyChain.fromObject(t.supplyChain)}if(null!=t.secondLevelDomain&&(i.secondLevelDomain=String(t.secondLevelDomain)),null!=t.userInformation){if("object"!=typeof t.userInformation)throw TypeError(".ProtoElementsResponse.userInformation: object expected");i.userInformation=c.ProtoUserInformation.fromObject(t.userInformation)}return null!=t.serverAb0&&(i.serverAb0=0|t.serverAb0),null!=t.serverAb1&&(i.serverAb1=0|t.serverAb1),null!=t.isSeoTraffic&&(i.isSeoTraffic=Boolean(t.isSeoTraffic)),i},t.toObject=function(t,i){i||(i={});var e,s={};if((i.arrays||i.defaults)&&(s.players=[],s.lineItems=[]),(i.objects||i.defaults)&&(s.cookieSyncUrls={}),i.defaults&&(s.errorMessage="",s.browser=null,s.geoLocation=null,s.explorationMode=!1,s.supplyChain=null,s.secondLevelDomain="",s.userInformation=null,s.serverAb0=0,s.serverAb1=0,s.isSeoTraffic=!1),null!=t.errorMessage&&t.hasOwnProperty("errorMessage")&&(s.errorMessage=t.errorMessage),t.players&&t.players.length){s.players=[];for(var n=0;n<t.players.length;++n)s.players[n]=c.ProtoElements.toObject(t.players[n],i)}if(null!=t.browser&&t.hasOwnProperty("browser")&&(s.browser=c.Browser.toObject(t.browser,i)),null!=t.geoLocation&&t.hasOwnProperty("geoLocation")&&(s.geoLocation=c.GeoLocation.toObject(t.geoLocation,i)),t.lineItems&&t.lineItems.length){s.lineItems=[];for(n=0;n<t.lineItems.length;++n)s.lineItems[n]=c.ProtoLineItem.toObject(t.lineItems[n],i)}if(t.cookieSyncUrls&&(e=Object.keys(t.cookieSyncUrls)).length){s.cookieSyncUrls={};for(n=0;n<e.length;++n)s.cookieSyncUrls[e[n]]=t.cookieSyncUrls[e[n]]}return null!=t.explorationMode&&t.hasOwnProperty("explorationMode")&&(s.explorationMode=t.explorationMode),null!=t.supplyChain&&t.hasOwnProperty("supplyChain")&&(s.supplyChain=c.ProtoSupplyChain.toObject(t.supplyChain,i)),null!=t.secondLevelDomain&&t.hasOwnProperty("secondLevelDomain")&&(s.secondLevelDomain=t.secondLevelDomain),null!=t.userInformation&&t.hasOwnProperty("userInformation")&&(s.userInformation=c.ProtoUserInformation.toObject(t.userInformation,i)),null!=t.serverAb0&&t.hasOwnProperty("serverAb0")&&(s.serverAb0=t.serverAb0),null!=t.serverAb1&&t.hasOwnProperty("serverAb1")&&(s.serverAb1=t.serverAb1),null!=t.isSeoTraffic&&t.hasOwnProperty("isSeoTraffic")&&(s.isSeoTraffic=t.isSeoTraffic),s},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.ProtoCreativeTypeEnum=function(){var t={},i=Object.create(t);return i[t[0]="ThirdParty"]=0,i[t[1]="MediaFile"]=1,i[t[2]="Rtb"]=2,i[t[3]="External"]=3,i[t[4]="HeaderBidder"]=4,i[t[7]="Tam"]=7,i}(),c.ProtoResetCapTypeEnum=function(){var t={},i=Object.create(t);return i[t[0]="TimeCapping"]=0,i[t[1]="ContentCapping"]=1,i[t[2]="OpportunityCapping"]=2,i}(),c.ProtoAdSlotsEnum=function(){var t={},i=Object.create(t);return i[t[0]="PreRoll"]=0,i[t[1]="MidRoll"]=1,i[t[2]="PostRoll"]=2,i}(),c.ProtoLineItemPriority=function(){var t={},i=Object.create(t);return i[t[0]="House"]=0,i[t[1]="Default"]=1,i[t[2]="Preferred"]=2,i[t[3]="Top"]=3,i}(),c.ProtoAdSkipMode=function(){var t={},i=Object.create(t);return i[t[0]="IfLongerThan31Sec"]=0,i[t[1]="Always"]=1,i[t[2]="Never"]=2,i[t[3]="NotAplicable"]=3,i}(),c.ProtoAdType=function(){var t={},i=Object.create(t);return i[t[0]="Video"]=0,i[t[1]="Overlay"]=1,i}(),c.ProtoChoiceCriteriaEnum=function(){var t={},i=Object.create(t);return i[t[0]="Only"]=0,i[t[1]="Except"]=1,i}(),c.ProtoLineItemAdBreakTypeEnum=function(){var t={},i=Object.create(t);return i[t[1]="All"]=1,i[t[2]="SingleAd"]=2,i[t[3]="AdPod"]=3,i}(),c.ProtoLineItemTargetingTypeEnum=function(){var t={},i=Object.create(t);return i[t[0]="Only"]=0,i[t[1]="Except"]=1,i}(),c.ProtoLineItemAdSlotTargetingTypeEnum=function(){var t={},i=Object.create(t);return i[t[1]="SpecificSlots"]=1,i[t[2]="Interval"]=2,i}(),c.ProtoLineItemPauseAdOutOfViewEnum=function(){var t={},i=Object.create(t);return i[t[0]="Default"]=0,i[t[1]="Strict"]=1,i}(),c.ProtoLineItemContextualTargetingEnum=function(){var t={},i=Object.create(t);return i[t[0]="IncludeAny"]=0,i[t[1]="IncludeAll"]=1,i[t[2]="ExcludeAny"]=2,i[t[3]="ExcludeAll"]=3,i}(),c.ProtoSizeChoiceCriteriaEnum=function(){var t={},i=Object.create(t);return i[t[0]="GreaterThan"]=0,i[t[1]="SmallerThan"]=1,i[t[2]="Between"]=2,i}(),c.ProtoLineItemAdBreakTargeting=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.adRollType=0,t.prototype.adBreakTypeEnum=1,t.encode=function(t,i){return i||(i=h.create()),null!=t.adRollType&&t.hasOwnProperty("adRollType")&&i.uint32(8).int32(t.adRollType),null!=t.adBreakTypeEnum&&t.hasOwnProperty("adBreakTypeEnum")&&i.uint32(16).int32(t.adBreakTypeEnum),i},t.decode=function(t,i){t instanceof a||(t=a.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoLineItemAdBreakTargeting;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.adRollType=t.int32();break;case 2:s.adBreakTypeEnum=t.int32();break;default:t.skipType(7&n)}}return s},t.fromObject=function(t){if(t instanceof c.ProtoLineItemAdBreakTargeting)return t;var i=new c.ProtoLineItemAdBreakTargeting;switch(t.adRollType){case"None":case 0:i.adRollType=0;break;case"PreRoll":case 1:i.adRollType=1;break;case"MidRoll":case 2:i.adRollType=2;break;case"PostRoll":case 3:i.adRollType=3}switch(t.adBreakTypeEnum){case"All":case 1:i.adBreakTypeEnum=1;break;case"SingleAd":case 2:i.adBreakTypeEnum=2;break;case"AdPod":case 3:i.adBreakTypeEnum=3}return i},t.toObject=function(t,i){i||(i={});var e={};return i.defaults&&(e.adRollType=i.enums===String?"None":0,e.adBreakTypeEnum=i.enums===String?"All":1),null!=t.adRollType&&t.hasOwnProperty("adRollType")&&(e.adRollType=i.enums===String?c.ProtoAdBreakTypeEnum[t.adRollType]:t.adRollType),null!=t.adBreakTypeEnum&&t.hasOwnProperty("adBreakTypeEnum")&&(e.adBreakTypeEnum=i.enums===String?c.ProtoLineItemAdBreakTypeEnum[t.adBreakTypeEnum]:t.adBreakTypeEnum),e},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.ProtoLineItemAdPodTargeting=function(){function t(t){if(this.adSlotPositions=[],t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.targetingType=0,t.prototype.adSlotTargetingType=1,t.prototype.adSlotPositions=o.emptyArray,t.encode=function(t,i){if(i||(i=h.create()),null!=t.targetingType&&t.hasOwnProperty("targetingType")&&i.uint32(8).int32(t.targetingType),null!=t.adSlotTargetingType&&t.hasOwnProperty("adSlotTargetingType")&&i.uint32(16).int32(t.adSlotTargetingType),null!=t.adSlotPositions&&t.adSlotPositions.length){i.uint32(26).fork();for(var e=0;e<t.adSlotPositions.length;++e)i.int32(t.adSlotPositions[e]);i.ldelim()}return i},t.decode=function(t,i){t instanceof a||(t=a.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoLineItemAdPodTargeting;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.targetingType=t.int32();break;case 2:s.adSlotTargetingType=t.int32();break;case 3:if(s.adSlotPositions&&s.adSlotPositions.length||(s.adSlotPositions=[]),2==(7&n))for(var r=t.uint32()+t.pos;t.pos<r;)s.adSlotPositions.push(t.int32());else s.adSlotPositions.push(t.int32());break;default:t.skipType(7&n)}}return s},t.fromObject=function(t){if(t instanceof c.ProtoLineItemAdPodTargeting)return t;var i=new c.ProtoLineItemAdPodTargeting;switch(t.targetingType){case"Only":case 0:i.targetingType=0;break;case"Except":case 1:i.targetingType=1}switch(t.adSlotTargetingType){case"SpecificSlots":case 1:i.adSlotTargetingType=1;break;case"Interval":case 2:i.adSlotTargetingType=2}if(t.adSlotPositions){if(!Array.isArray(t.adSlotPositions))throw TypeError(".ProtoLineItemAdPodTargeting.adSlotPositions: array expected");i.adSlotPositions=[];for(var e=0;e<t.adSlotPositions.length;++e)i.adSlotPositions[e]=0|t.adSlotPositions[e]}return i},t.toObject=function(t,i){i||(i={});var e={};if((i.arrays||i.defaults)&&(e.adSlotPositions=[]),i.defaults&&(e.targetingType=i.enums===String?"Only":0,e.adSlotTargetingType=i.enums===String?"SpecificSlots":1),null!=t.targetingType&&t.hasOwnProperty("targetingType")&&(e.targetingType=i.enums===String?c.ProtoLineItemTargetingTypeEnum[t.targetingType]:t.targetingType),null!=t.adSlotTargetingType&&t.hasOwnProperty("adSlotTargetingType")&&(e.adSlotTargetingType=i.enums===String?c.ProtoLineItemAdSlotTargetingTypeEnum[t.adSlotTargetingType]:t.adSlotTargetingType),t.adSlotPositions&&t.adSlotPositions.length){e.adSlotPositions=[];for(var s=0;s<t.adSlotPositions.length;++s)e.adSlotPositions[s]=t.adSlotPositions[s]}return e},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.ProtoLineItemAdBreakSettings=function(){function t(t){if(this.adBreakTargeting=[],t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.adBreakTargeting=o.emptyArray,t.prototype.adPodTargeting=null,t.encode=function(t,i){if(i||(i=h.create()),null!=t.adBreakTargeting&&t.adBreakTargeting.length)for(var e=0;e<t.adBreakTargeting.length;++e)c.ProtoLineItemAdBreakTargeting.encode(t.adBreakTargeting[e],i.uint32(10).fork()).ldelim();return null!=t.adPodTargeting&&t.hasOwnProperty("adPodTargeting")&&c.ProtoLineItemAdPodTargeting.encode(t.adPodTargeting,i.uint32(18).fork()).ldelim(),i},t.decode=function(t,i){t instanceof a||(t=a.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoLineItemAdBreakSettings;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.adBreakTargeting&&s.adBreakTargeting.length||(s.adBreakTargeting=[]),s.adBreakTargeting.push(c.ProtoLineItemAdBreakTargeting.decode(t,t.uint32()));break;case 2:s.adPodTargeting=c.ProtoLineItemAdPodTargeting.decode(t,t.uint32());break;default:t.skipType(7&n)}}return s},t.fromObject=function(t){if(t instanceof c.ProtoLineItemAdBreakSettings)return t;var i=new c.ProtoLineItemAdBreakSettings;if(t.adBreakTargeting){if(!Array.isArray(t.adBreakTargeting))throw TypeError(".ProtoLineItemAdBreakSettings.adBreakTargeting: array expected");i.adBreakTargeting=[];for(var e=0;e<t.adBreakTargeting.length;++e){if("object"!=typeof t.adBreakTargeting[e])throw TypeError(".ProtoLineItemAdBreakSettings.adBreakTargeting: object expected");i.adBreakTargeting[e]=c.ProtoLineItemAdBreakTargeting.fromObject(t.adBreakTargeting[e])}}if(null!=t.adPodTargeting){if("object"!=typeof t.adPodTargeting)throw TypeError(".ProtoLineItemAdBreakSettings.adPodTargeting: object expected");i.adPodTargeting=c.ProtoLineItemAdPodTargeting.fromObject(t.adPodTargeting)}return i},t.toObject=function(t,i){i||(i={});var e={};if((i.arrays||i.defaults)&&(e.adBreakTargeting=[]),i.defaults&&(e.adPodTargeting=null),t.adBreakTargeting&&t.adBreakTargeting.length){e.adBreakTargeting=[];for(var s=0;s<t.adBreakTargeting.length;++s)e.adBreakTargeting[s]=c.ProtoLineItemAdBreakTargeting.toObject(t.adBreakTargeting[s],i)}return null!=t.adPodTargeting&&t.hasOwnProperty("adPodTargeting")&&(e.adPodTargeting=c.ProtoLineItemAdPodTargeting.toObject(t.adPodTargeting,i)),e},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.ProtoLineItem=function(){function t(t){if(this.trackers=[],this.renditions=[],this.floorPrices=[],this.advertiserContextualTargeting=[],this.publisherContextualTargeting=[],t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.publisherLineItemId="",t.prototype.advertiserLineItemId="",t.prototype.adTag="",t.prototype.creativeType=0,t.prototype.sound=!1,t.prototype.viewability=!1,t.prototype.impressionTimeSpent=0,t.prototype.vendorId="",t.prototype.trackers=o.emptyArray,t.prototype.duration=0,t.prototype.renditions=o.emptyArray,t.prototype.mediaCreativeId="",t.prototype.ignoreFilledRequests=!1,t.prototype.requestCap=3,t.prototype.impressionCap=0,t.prototype.successRate=0,t.prototype.lineItemPriority=0,t.prototype.headerBidderBids="",t.prototype.headerBidderTimeout=0,t.prototype.mediaCreativeClickUrl="",t.prototype.resetRequestsCapTime=60,t.prototype.resetImpressionsCapTime=60,t.prototype.resetCapType=0,t.prototype.creativeHlsFileName="",t.prototype.timeBetweenRequests=0,t.prototype.skipMode=0,t.prototype.mediaIdTargeting=null,t.prototype.mediaKeywordsTargeting=null,t.prototype.mediaLanguageTargeting=null,t.prototype.adType=0,t.prototype.overlayTime=30,t.prototype.floorPrice=0,t.prototype.adBreakSettings=null,t.prototype.floorPrices=o.emptyArray,t.prototype.bidRate=0,t.prototype.pauseAdOutOfView=0,t.prototype.moatTrackingEnabled=!1,t.prototype.cnxCreativeId="",t.prototype.blockedDomainsRevisionNumber=0,t.prototype.advertiserContextualTargeting=o.emptyArray,t.prototype.publisherContextualTargeting=o.emptyArray,t.prototype.playerSizeTargetings=null,t.prototype.playerSize="",t.decode=function(t,i){t instanceof a||(t=a.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoLineItem;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.publisherLineItemId=t.string();break;case 2:s.advertiserLineItemId=t.string();break;case 3:s.adTag=t.string();break;case 4:s.creativeType=t.int32();break;case 6:s.sound=t.bool();break;case 7:s.viewability=t.bool();break;case 9:s.impressionTimeSpent=t.int32();break;case 10:s.vendorId=t.string();break;case 12:s.trackers&&s.trackers.length||(s.trackers=[]),s.trackers.push(c.CreativeTrackerViewModel.decode(t,t.uint32()));break;case 13:s.duration=t.int32();break;case 14:s.renditions&&s.renditions.length||(s.renditions=[]),s.renditions.push(c.ProtoRendition.decode(t,t.uint32()));break;case 15:s.mediaCreativeId=t.string();break;case 16:s.ignoreFilledRequests=t.bool();break;case 17:s.requestCap=t.int32();break;case 18:s.impressionCap=t.int32();break;case 19:s.successRate=t.double();break;case 20:s.lineItemPriority=t.int32();break;case 21:s.headerBidderBids=t.string();break;case 22:s.headerBidderTimeout=t.int32();break;case 23:s.mediaCreativeClickUrl=t.string();break;case 24:s.resetRequestsCapTime=t.int32();break;case 25:s.resetImpressionsCapTime=t.int32();break;case 26:s.resetCapType=t.int32();break;case 27:s.creativeHlsFileName=t.string();break;case 28:s.timeBetweenRequests=t.int32();break;case 29:s.skipMode=t.int32();break;case 30:s.mediaIdTargeting=c.ProtoTargetingChoiceModel.decode(t,t.uint32());break;case 31:s.mediaKeywordsTargeting=c.ProtoTargetingChoiceModel.decode(t,t.uint32());break;case 32:s.mediaLanguageTargeting=c.ProtoTargetingChoiceModel.decode(t,t.uint32());break;case 33:s.adType=t.int32();break;case 34:s.overlayTime=t.int32();break;case 35:s.floorPrice=t.double();break;case 36:s.adBreakSettings=c.ProtoLineItemAdBreakSettings.decode(t,t.uint32());break;case 38:if(s.floorPrices&&s.floorPrices.length||(s.floorPrices=[]),2==(7&n))for(var r=t.uint32()+t.pos;t.pos<r;)s.floorPrices.push(t.double());else s.floorPrices.push(t.double());break;case 39:s.bidRate=t.double();break;case 40:s.pauseAdOutOfView=t.int32();break;case 41:s.moatTrackingEnabled=t.bool();break;case 42:s.cnxCreativeId=t.string();break;case 44:s.blockedDomainsRevisionNumber=t.int32();break;case 45:s.advertiserContextualTargeting&&s.advertiserContextualTargeting.length||(s.advertiserContextualTargeting=[]),s.advertiserContextualTargeting.push(c.ProtoContextualTargetingCaseModel.decode(t,t.uint32()));break;case 46:s.publisherContextualTargeting&&s.publisherContextualTargeting.length||(s.publisherContextualTargeting=[]),s.publisherContextualTargeting.push(c.ProtoContextualTargetingCaseModel.decode(t,t.uint32()));break;case 47:s.playerSizeTargetings=c.ProtoPlayerSizeTargetings.decode(t,t.uint32());break;case 101:s.playerSize=t.string();break;default:t.skipType(7&n)}}return s},t.toObject=function(t,i){i||(i={});var e={};if((i.arrays||i.defaults)&&(e.trackers=[],e.renditions=[],e.floorPrices=[],e.advertiserContextualTargeting=[],e.publisherContextualTargeting=[]),i.defaults&&(e.publisherLineItemId="",e.advertiserLineItemId="",e.adTag="",e.creativeType=i.enums===String?"ThirdParty":0,e.sound=!1,e.viewability=!1,e.impressionTimeSpent=0,e.vendorId="",e.duration=0,e.mediaCreativeId="",e.ignoreFilledRequests=!1,e.requestCap=3,e.impressionCap=0,e.successRate=0,e.lineItemPriority=i.enums===String?"House":0,e.headerBidderBids="",e.headerBidderTimeout=0,e.mediaCreativeClickUrl="",e.resetRequestsCapTime=60,e.resetImpressionsCapTime=60,e.resetCapType=i.enums===String?"TimeCapping":0,e.creativeHlsFileName="",e.timeBetweenRequests=0,e.skipMode=i.enums===String?"IfLongerThan31Sec":0,e.mediaIdTargeting=null,e.mediaKeywordsTargeting=null,e.mediaLanguageTargeting=null,e.adType=i.enums===String?"Video":0,e.overlayTime=30,e.floorPrice=0,e.adBreakSettings=null,e.bidRate=0,e.pauseAdOutOfView=i.enums===String?"Default":0,e.moatTrackingEnabled=!1,e.cnxCreativeId="",e.blockedDomainsRevisionNumber=0,e.playerSizeTargetings=null,e.playerSize=""),null!=t.publisherLineItemId&&t.hasOwnProperty("publisherLineItemId")&&(e.publisherLineItemId=t.publisherLineItemId),null!=t.advertiserLineItemId&&t.hasOwnProperty("advertiserLineItemId")&&(e.advertiserLineItemId=t.advertiserLineItemId),null!=t.adTag&&t.hasOwnProperty("adTag")&&(e.adTag=t.adTag),null!=t.creativeType&&t.hasOwnProperty("creativeType")&&(e.creativeType=i.enums===String?c.ProtoCreativeTypeEnum[t.creativeType]:t.creativeType),null!=t.sound&&t.hasOwnProperty("sound")&&(e.sound=t.sound),null!=t.viewability&&t.hasOwnProperty("viewability")&&(e.viewability=t.viewability),null!=t.impressionTimeSpent&&t.hasOwnProperty("impressionTimeSpent")&&(e.impressionTimeSpent=t.impressionTimeSpent),null!=t.vendorId&&t.hasOwnProperty("vendorId")&&(e.vendorId=t.vendorId),t.trackers&&t.trackers.length){e.trackers=[];for(var s=0;s<t.trackers.length;++s)e.trackers[s]=c.CreativeTrackerViewModel.toObject(t.trackers[s],i)}if(null!=t.duration&&t.hasOwnProperty("duration")&&(e.duration=t.duration),t.renditions&&t.renditions.length){e.renditions=[];for(s=0;s<t.renditions.length;++s)e.renditions[s]=c.ProtoRendition.toObject(t.renditions[s],i)}if(null!=t.mediaCreativeId&&t.hasOwnProperty("mediaCreativeId")&&(e.mediaCreativeId=t.mediaCreativeId),null!=t.ignoreFilledRequests&&t.hasOwnProperty("ignoreFilledRequests")&&(e.ignoreFilledRequests=t.ignoreFilledRequests),null!=t.requestCap&&t.hasOwnProperty("requestCap")&&(e.requestCap=t.requestCap),null!=t.impressionCap&&t.hasOwnProperty("impressionCap")&&(e.impressionCap=t.impressionCap),null!=t.successRate&&t.hasOwnProperty("successRate")&&(e.successRate=i.json&&!isFinite(t.successRate)?String(t.successRate):t.successRate),null!=t.lineItemPriority&&t.hasOwnProperty("lineItemPriority")&&(e.lineItemPriority=i.enums===String?c.ProtoLineItemPriority[t.lineItemPriority]:t.lineItemPriority),null!=t.headerBidderBids&&t.hasOwnProperty("headerBidderBids")&&(e.headerBidderBids=t.headerBidderBids),null!=t.headerBidderTimeout&&t.hasOwnProperty("headerBidderTimeout")&&(e.headerBidderTimeout=t.headerBidderTimeout),null!=t.mediaCreativeClickUrl&&t.hasOwnProperty("mediaCreativeClickUrl")&&(e.mediaCreativeClickUrl=t.mediaCreativeClickUrl),null!=t.resetRequestsCapTime&&t.hasOwnProperty("resetRequestsCapTime")&&(e.resetRequestsCapTime=t.resetRequestsCapTime),null!=t.resetImpressionsCapTime&&t.hasOwnProperty("resetImpressionsCapTime")&&(e.resetImpressionsCapTime=t.resetImpressionsCapTime),null!=t.resetCapType&&t.hasOwnProperty("resetCapType")&&(e.resetCapType=i.enums===String?c.ProtoResetCapTypeEnum[t.resetCapType]:t.resetCapType),null!=t.creativeHlsFileName&&t.hasOwnProperty("creativeHlsFileName")&&(e.creativeHlsFileName=t.creativeHlsFileName),null!=t.timeBetweenRequests&&t.hasOwnProperty("timeBetweenRequests")&&(e.timeBetweenRequests=t.timeBetweenRequests),null!=t.skipMode&&t.hasOwnProperty("skipMode")&&(e.skipMode=i.enums===String?c.ProtoAdSkipMode[t.skipMode]:t.skipMode),null!=t.mediaIdTargeting&&t.hasOwnProperty("mediaIdTargeting")&&(e.mediaIdTargeting=c.ProtoTargetingChoiceModel.toObject(t.mediaIdTargeting,i)),null!=t.mediaKeywordsTargeting&&t.hasOwnProperty("mediaKeywordsTargeting")&&(e.mediaKeywordsTargeting=c.ProtoTargetingChoiceModel.toObject(t.mediaKeywordsTargeting,i)),null!=t.mediaLanguageTargeting&&t.hasOwnProperty("mediaLanguageTargeting")&&(e.mediaLanguageTargeting=c.ProtoTargetingChoiceModel.toObject(t.mediaLanguageTargeting,i)),null!=t.adType&&t.hasOwnProperty("adType")&&(e.adType=i.enums===String?c.ProtoAdType[t.adType]:t.adType),null!=t.overlayTime&&t.hasOwnProperty("overlayTime")&&(e.overlayTime=t.overlayTime),null!=t.floorPrice&&t.hasOwnProperty("floorPrice")&&(e.floorPrice=i.json&&!isFinite(t.floorPrice)?String(t.floorPrice):t.floorPrice),null!=t.adBreakSettings&&t.hasOwnProperty("adBreakSettings")&&(e.adBreakSettings=c.ProtoLineItemAdBreakSettings.toObject(t.adBreakSettings,i)),t.floorPrices&&t.floorPrices.length){e.floorPrices=[];for(s=0;s<t.floorPrices.length;++s)e.floorPrices[s]=i.json&&!isFinite(t.floorPrices[s])?String(t.floorPrices[s]):t.floorPrices[s]}if(null!=t.bidRate&&t.hasOwnProperty("bidRate")&&(e.bidRate=i.json&&!isFinite(t.bidRate)?String(t.bidRate):t.bidRate),null!=t.pauseAdOutOfView&&t.hasOwnProperty("pauseAdOutOfView")&&(e.pauseAdOutOfView=i.enums===String?c.ProtoLineItemPauseAdOutOfViewEnum[t.pauseAdOutOfView]:t.pauseAdOutOfView),null!=t.moatTrackingEnabled&&t.hasOwnProperty("moatTrackingEnabled")&&(e.moatTrackingEnabled=t.moatTrackingEnabled),null!=t.cnxCreativeId&&t.hasOwnProperty("cnxCreativeId")&&(e.cnxCreativeId=t.cnxCreativeId),null!=t.blockedDomainsRevisionNumber&&t.hasOwnProperty("blockedDomainsRevisionNumber")&&(e.blockedDomainsRevisionNumber=t.blockedDomainsRevisionNumber),t.advertiserContextualTargeting&&t.advertiserContextualTargeting.length){e.advertiserContextualTargeting=[];for(s=0;s<t.advertiserContextualTargeting.length;++s)e.advertiserContextualTargeting[s]=c.ProtoContextualTargetingCaseModel.toObject(t.advertiserContextualTargeting[s],i)}if(t.publisherContextualTargeting&&t.publisherContextualTargeting.length){e.publisherContextualTargeting=[];for(s=0;s<t.publisherContextualTargeting.length;++s)e.publisherContextualTargeting[s]=c.ProtoContextualTargetingCaseModel.toObject(t.publisherContextualTargeting[s],i)}return null!=t.playerSizeTargetings&&t.hasOwnProperty("playerSizeTargetings")&&(e.playerSizeTargetings=c.ProtoPlayerSizeTargetings.toObject(t.playerSizeTargetings,i)),null!=t.playerSize&&t.hasOwnProperty("playerSize")&&(e.playerSize=t.playerSize),e},t}(),c.ProtoTargetingChoiceModel=function(){function t(t){if(this.items=[],t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.choiceCriteria=0,t.prototype.items=o.emptyArray,t.encode=function(t,i){if(i||(i=h.create()),null!=t.choiceCriteria&&t.hasOwnProperty("choiceCriteria")&&i.uint32(8).int32(t.choiceCriteria),null!=t.items&&t.items.length)for(var e=0;e<t.items.length;++e)i.uint32(18).string(t.items[e]);return i},t.decode=function(t,i){t instanceof a||(t=a.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoTargetingChoiceModel;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.choiceCriteria=t.int32();break;case 2:s.items&&s.items.length||(s.items=[]),s.items.push(t.string());break;default:t.skipType(7&n)}}return s},t.fromObject=function(t){if(t instanceof c.ProtoTargetingChoiceModel)return t;var i=new c.ProtoTargetingChoiceModel;switch(t.choiceCriteria){case"Only":case 0:i.choiceCriteria=0;break;case"Except":case 1:i.choiceCriteria=1}if(t.items){if(!Array.isArray(t.items))throw TypeError(".ProtoTargetingChoiceModel.items: array expected");i.items=[];for(var e=0;e<t.items.length;++e)i.items[e]=String(t.items[e])}return i},t.toObject=function(t,i){i||(i={});var e={};if((i.arrays||i.defaults)&&(e.items=[]),i.defaults&&(e.choiceCriteria=i.enums===String?"Only":0),null!=t.choiceCriteria&&t.hasOwnProperty("choiceCriteria")&&(e.choiceCriteria=i.enums===String?c.ProtoChoiceCriteriaEnum[t.choiceCriteria]:t.choiceCriteria),t.items&&t.items.length){e.items=[];for(var s=0;s<t.items.length;++s)e.items[s]=t.items[s]}return e},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.ProtoContextualTargetingCaseModel=function(){function t(t){if(this.filters=[],t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.filters=o.emptyArray,t.encode=function(t,i){if(i||(i=h.create()),null!=t.filters&&t.filters.length)for(var e=0;e<t.filters.length;++e)c.ProtoContextualTargetingFilterModel.encode(t.filters[e],i.uint32(10).fork()).ldelim();return i},t.decode=function(t,i){t instanceof a||(t=a.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoContextualTargetingCaseModel;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.filters&&s.filters.length||(s.filters=[]),s.filters.push(c.ProtoContextualTargetingFilterModel.decode(t,t.uint32()));break;default:t.skipType(7&n)}}return s},t.fromObject=function(t){if(t instanceof c.ProtoContextualTargetingCaseModel)return t;var i=new c.ProtoContextualTargetingCaseModel;if(t.filters){if(!Array.isArray(t.filters))throw TypeError(".ProtoContextualTargetingCaseModel.filters: array expected");i.filters=[];for(var e=0;e<t.filters.length;++e){if("object"!=typeof t.filters[e])throw TypeError(".ProtoContextualTargetingCaseModel.filters: object expected");i.filters[e]=c.ProtoContextualTargetingFilterModel.fromObject(t.filters[e])}}return i},t.toObject=function(t,i){i||(i={});var e={};if((i.arrays||i.defaults)&&(e.filters=[]),t.filters&&t.filters.length){e.filters=[];for(var s=0;s<t.filters.length;++s)e.filters[s]=c.ProtoContextualTargetingFilterModel.toObject(t.filters[s],i)}return e},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.ProtoContextualTargetingFilterModel=function(){function t(t){if(this.items=[],t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.type=0,t.prototype.items=o.emptyArray,t.encode=function(t,i){if(i||(i=h.create()),null!=t.type&&t.hasOwnProperty("type")&&i.uint32(8).int32(t.type),null!=t.items&&t.items.length)for(var e=0;e<t.items.length;++e)i.uint32(18).string(t.items[e]);return i},t.decode=function(t,i){t instanceof a||(t=a.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoContextualTargetingFilterModel;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.type=t.int32();break;case 2:s.items&&s.items.length||(s.items=[]),s.items.push(t.string());break;default:t.skipType(7&n)}}return s},t.fromObject=function(t){if(t instanceof c.ProtoContextualTargetingFilterModel)return t;var i=new c.ProtoContextualTargetingFilterModel;switch(t.type){case"IncludeAny":case 0:i.type=0;break;case"IncludeAll":case 1:i.type=1;break;case"ExcludeAny":case 2:i.type=2;break;case"ExcludeAll":case 3:i.type=3}if(t.items){if(!Array.isArray(t.items))throw TypeError(".ProtoContextualTargetingFilterModel.items: array expected");i.items=[];for(var e=0;e<t.items.length;++e)i.items[e]=String(t.items[e])}return i},t.toObject=function(t,i){i||(i={});var e={};if((i.arrays||i.defaults)&&(e.items=[]),i.defaults&&(e.type=i.enums===String?"IncludeAny":0),null!=t.type&&t.hasOwnProperty("type")&&(e.type=i.enums===String?c.ProtoLineItemContextualTargetingEnum[t.type]:t.type),t.items&&t.items.length){e.items=[];for(var s=0;s<t.items.length;++s)e.items[s]=t.items[s]}return e},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.ProtoPlayerSizeTargetings=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.sizeChoiceCriteria=0,t.prototype.minWidth=0,t.prototype.maxWidth=0,t.encode=function(t,i){return i||(i=h.create()),null!=t.sizeChoiceCriteria&&t.hasOwnProperty("sizeChoiceCriteria")&&i.uint32(8).int32(t.sizeChoiceCriteria),null!=t.minWidth&&t.hasOwnProperty("minWidth")&&i.uint32(16).int32(t.minWidth),null!=t.maxWidth&&t.hasOwnProperty("maxWidth")&&i.uint32(24).int32(t.maxWidth),i},t.decode=function(t,i){t instanceof a||(t=a.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoPlayerSizeTargetings;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.sizeChoiceCriteria=t.int32();break;case 2:s.minWidth=t.int32();break;case 3:s.maxWidth=t.int32();break;default:t.skipType(7&n)}}return s},t.fromObject=function(t){if(t instanceof c.ProtoPlayerSizeTargetings)return t;var i=new c.ProtoPlayerSizeTargetings;switch(t.sizeChoiceCriteria){case"GreaterThan":case 0:i.sizeChoiceCriteria=0;break;case"SmallerThan":case 1:i.sizeChoiceCriteria=1;break;case"Between":case 2:i.sizeChoiceCriteria=2}return null!=t.minWidth&&(i.minWidth=0|t.minWidth),null!=t.maxWidth&&(i.maxWidth=0|t.maxWidth),i},t.toObject=function(t,i){i||(i={});var e={};return i.defaults&&(e.sizeChoiceCriteria=i.enums===String?"GreaterThan":0,e.minWidth=0,e.maxWidth=0),null!=t.sizeChoiceCriteria&&t.hasOwnProperty("sizeChoiceCriteria")&&(e.sizeChoiceCriteria=i.enums===String?c.ProtoSizeChoiceCriteriaEnum[t.sizeChoiceCriteria]:t.sizeChoiceCriteria),null!=t.minWidth&&t.hasOwnProperty("minWidth")&&(e.minWidth=t.minWidth),null!=t.maxWidth&&t.hasOwnProperty("maxWidth")&&(e.maxWidth=t.maxWidth),e},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.ProtoTrackerType=function(){var t={},i=Object.create(t);return i[t[0]="Image"]=0,i[t[1]="Javascript"]=1,i}(),c.ProtoTrackerTriggerType=function(){var t={},i=Object.create(t);return i[t[0]="Impression"]=0,i[t[1]="Complete25Pc"]=1,i[t[2]="Complete50Pc"]=2,i[t[3]="Complete75Pc"]=3,i[t[4]="ViewCompletion"]=4,i[t[5]="VideoClick"]=5,i[t[6]="Pause"]=6,i[t[7]="Resume"]=7,i[t[8]="Mute"]=8,i[t[9]="Unmute"]=9,i}(),c.CreativeTrackerViewModel=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.type=0,t.prototype.trigger=0,t.prototype.url="",t.decode=function(t,i){t instanceof a||(t=a.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.CreativeTrackerViewModel;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.type=t.int32();break;case 2:s.trigger=t.int32();break;case 3:s.url=t.string();break;default:t.skipType(7&n)}}return s},t.toObject=function(t,i){i||(i={});var e={};return i.defaults&&(e.type=i.enums===String?"Image":0,e.trigger=i.enums===String?"Impression":0,e.url=""),null!=t.type&&t.hasOwnProperty("type")&&(e.type=i.enums===String?c.ProtoTrackerType[t.type]:t.type),null!=t.trigger&&t.hasOwnProperty("trigger")&&(e.trigger=i.enums===String?c.ProtoTrackerTriggerType[t.trigger]:t.trigger),null!=t.url&&t.hasOwnProperty("url")&&(e.url=t.url),e},t}(),c.ProtoRendition=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.height=0,t.prototype.codec="",t.prototype.file="",t.decode=function(t,i){t instanceof a||(t=a.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoRendition;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.height=t.int32();break;case 2:s.codec=t.string();break;case 3:s.file=t.string();break;default:t.skipType(7&n)}}return s},t.toObject=function(t,i){i||(i={});var e={};return i.defaults&&(e.height=0,e.codec="",e.file=""),null!=t.height&&t.hasOwnProperty("height")&&(e.height=t.height),null!=t.codec&&t.hasOwnProperty("codec")&&(e.codec=t.codec),null!=t.file&&t.hasOwnProperty("file")&&(e.file=t.file),e},t}(),c.ProtoPlayerPlaybackModeEnum=function(){var t={},i=Object.create(t);return i[t[0]="Autoplay"]=0,i[t[1]="ScrollToPlay"]=1,i[t[2]="ClickToPlay"]=2,i}(),c.ProtoPlayerCloseButtonMode=function(){var t={},i=Object.create(t);return i[t[0]="Off"]=0,i[t[1]="OnHover"]=1,i[t[2]="OnHoverAfterFirstAd"]=2,i[t[3]="AlwaysOn"]=3,i}(),c.ProtoPlayerFloatingMode=function(){var t={},i=Object.create(t);return i[t[0]="Off"]=0,i[t[1]="OnPageLoad"]=1,i[t[2]="AfterInView"]=2,i[t[3]="Always"]=3,i}(),c.ProtoPlayerSoundMode=function(){var t={},i=Object.create(t);return i[t[0]="Mute"]=0,i[t[1]="On"]=1,i[t[2]="Hover"]=2,i}(),c.ProtoPlayerInsertMode=function(){var t={},i=Object.create(t);return i[t[0]="WithinContainer"]=0,i[t[1]="BeforeContainer"]=1,i[t[2]="AfterContainer"]=2,i[t[3]="ReplaceContainer"]=3,i[t[4]="HideContainer"]=4,i}(),c.ProtoAdViewabilityPolicy=function(){var t={},i=Object.create(t);return i[t[0]="Default"]=0,i[t[1]="Strict"]=1,i}(),c.ProtoSharingDestination=function(){var t={},i=Object.create(t);return i[t[0]="Facebook"]=0,i[t[1]="Twitter"]=1,i[t[2]="LinkedIn"]=2,i}(),c.ProtoFloatingFixedPositionMode=function(){var t={},i=Object.create(t);return i[t[0]="Page"]=0,i[t[1]="Element"]=1,i}(),c.ProtoPositionMode=function(){var t={},i=Object.create(t);return i[t[0]="BottomRight"]=0,i[t[1]="BottomLeft"]=1,i[t[2]="TopRight"]=2,i[t[3]="TopLeft"]=3,i}(),c.ProtoAdPlaybackMode=function(){var t={},i=Object.create(t);return i[t[0]="Autoplay"]=0,i[t[1]="ScrollToPlay"]=1,i}(),c.ProtoFloatingAppendLocationEnum=function(){var t={},i=Object.create(t);return i[t[0]="Above"]=0,i[t[1]="Below"]=1,i[t[2]="Within"]=2,i}(),c.ProtoPlayerAdSkippability=function(){var t={},i=Object.create(t);return i[t[0]="IfLongerThan31Sec"]=0,i[t[1]="Always"]=1,i[t[2]="NoRestrictions"]=2,i}(),c.ProtoVideoQuality=function(){var t={},i=Object.create(t);return i[t[0]="Auto"]=0,i[t[1]="High1080p"]=1,i[t[2]="High720p"]=2,i[t[3]="Medium360p"]=3,i}(),c.ProtoImplementationType=function(){var t={},i=Object.create(t);return i[t[0]="Web"]=0,i[t[1]="Amp"]=1,i}(),c.ProtoAdBreakTypeEnum=function(){var t={},i=Object.create(t);return i[t[0]="None"]=0,i[t[1]="PreRoll"]=1,i[t[2]="MidRoll"]=2,i[t[3]="PostRoll"]=3,i}(),c.ProtoAdSlotAdTypeEnum=function(){var t={},i=Object.create(t);return i[t[0]="SingleAd"]=0,i[t[1]="AdPod"]=1,i}(),c.ProtoDeviceType=function(){var t={},i=Object.create(t);return i[t[0]="Desktop"]=0,i[t[1]="Smartphone"]=1,i[t[2]="Tablet"]=2,i[t[3]="GameConsole"]=3,i[t[4]="SmartTV"]=4,i[t[5]="WearableComputer"]=5,i[t[6]="PDA"]=6,i[t[7]="Unrecognized"]=7,i}(),c.Browser=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.browserVersion="",t.prototype.browserType="",t.prototype.osCode="",t.prototype.device=0,t.encode=function(t,i){return i||(i=h.create()),null!=t.browserVersion&&t.hasOwnProperty("browserVersion")&&i.uint32(10).string(t.browserVersion),null!=t.browserType&&t.hasOwnProperty("browserType")&&i.uint32(18).string(t.browserType),null!=t.osCode&&t.hasOwnProperty("osCode")&&i.uint32(26).string(t.osCode),null!=t.device&&t.hasOwnProperty("device")&&i.uint32(32).int32(t.device),i},t.decode=function(t,i){t instanceof a||(t=a.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.Browser;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.browserVersion=t.string();break;case 2:s.browserType=t.string();break;case 3:s.osCode=t.string();break;case 4:s.device=t.int32();break;default:t.skipType(7&n)}}return s},t.fromObject=function(t){if(t instanceof c.Browser)return t;var i=new c.Browser;switch(null!=t.browserVersion&&(i.browserVersion=String(t.browserVersion)),null!=t.browserType&&(i.browserType=String(t.browserType)),null!=t.osCode&&(i.osCode=String(t.osCode)),t.device){case"Desktop":case 0:i.device=0;break;case"Smartphone":case 1:i.device=1;break;case"Tablet":case 2:i.device=2;break;case"GameConsole":case 3:i.device=3;break;case"SmartTV":case 4:i.device=4;break;case"WearableComputer":case 5:i.device=5;break;case"PDA":case 6:i.device=6;break;case"Unrecognized":case 7:i.device=7}return i},t.toObject=function(t,i){i||(i={});var e={};return i.defaults&&(e.browserVersion="",e.browserType="",e.osCode="",e.device=i.enums===String?"Desktop":0),null!=t.browserVersion&&t.hasOwnProperty("browserVersion")&&(e.browserVersion=t.browserVersion),null!=t.browserType&&t.hasOwnProperty("browserType")&&(e.browserType=t.browserType),null!=t.osCode&&t.hasOwnProperty("osCode")&&(e.osCode=t.osCode),null!=t.device&&t.hasOwnProperty("device")&&(e.device=i.enums===String?c.ProtoDeviceType[t.device]:t.device),e},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.GeoLocation=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.countryGeoId=0,t.prototype.cityId=0,t.prototype.subdivisionId=0,t.prototype.dmaId=0,t.prototype.ip="",t.prototype.lat=0,t.prototype.lon=0,t.encode=function(t,i){return i||(i=h.create()),null!=t.countryGeoId&&t.hasOwnProperty("countryGeoId")&&i.uint32(8).int32(t.countryGeoId),null!=t.cityId&&t.hasOwnProperty("cityId")&&i.uint32(16).int32(t.cityId),null!=t.subdivisionId&&t.hasOwnProperty("subdivisionId")&&i.uint32(24).int32(t.subdivisionId),null!=t.dmaId&&t.hasOwnProperty("dmaId")&&i.uint32(32).int32(t.dmaId),null!=t.ip&&t.hasOwnProperty("ip")&&i.uint32(42).string(t.ip),null!=t.lat&&t.hasOwnProperty("lat")&&i.uint32(49).double(t.lat),null!=t.lon&&t.hasOwnProperty("lon")&&i.uint32(57).double(t.lon),i},t.decode=function(t,i){t instanceof a||(t=a.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.GeoLocation;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.countryGeoId=t.int32();break;case 2:s.cityId=t.int32();break;case 3:s.subdivisionId=t.int32();break;case 4:s.dmaId=t.int32();break;case 5:s.ip=t.string();break;case 6:s.lat=t.double();break;case 7:s.lon=t.double();break;default:t.skipType(7&n)}}return s},t.fromObject=function(t){if(t instanceof c.GeoLocation)return t;var i=new c.GeoLocation;return null!=t.countryGeoId&&(i.countryGeoId=0|t.countryGeoId),null!=t.cityId&&(i.cityId=0|t.cityId),null!=t.subdivisionId&&(i.subdivisionId=0|t.subdivisionId),null!=t.dmaId&&(i.dmaId=0|t.dmaId),null!=t.ip&&(i.ip=String(t.ip)),null!=t.lat&&(i.lat=Number(t.lat)),null!=t.lon&&(i.lon=Number(t.lon)),i},t.toObject=function(t,i){i||(i={});var e={};return i.defaults&&(e.countryGeoId=0,e.cityId=0,e.subdivisionId=0,e.dmaId=0,e.ip="",e.lat=0,e.lon=0),null!=t.countryGeoId&&t.hasOwnProperty("countryGeoId")&&(e.countryGeoId=t.countryGeoId),null!=t.cityId&&t.hasOwnProperty("cityId")&&(e.cityId=t.cityId),null!=t.subdivisionId&&t.hasOwnProperty("subdivisionId")&&(e.subdivisionId=t.subdivisionId),null!=t.dmaId&&t.hasOwnProperty("dmaId")&&(e.dmaId=t.dmaId),null!=t.ip&&t.hasOwnProperty("ip")&&(e.ip=t.ip),null!=t.lat&&t.hasOwnProperty("lat")&&(e.lat=i.json&&!isFinite(t.lat)?String(t.lat):t.lat),null!=t.lon&&t.hasOwnProperty("lon")&&(e.lon=i.json&&!isFinite(t.lon)?String(t.lon):t.lon),e},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.ProtoSupplyChain=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.businessDomain="",t.prototype.supplyChainId="",t.decode=function(t,i){t instanceof a||(t=a.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoSupplyChain;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.businessDomain=t.string();break;case 3:s.supplyChainId=t.string();break;default:t.skipType(7&n)}}return s},t.toObject=function(t,i){i||(i={});var e={};return i.defaults&&(e.businessDomain="",e.supplyChainId=""),null!=t.businessDomain&&t.hasOwnProperty("businessDomain")&&(e.businessDomain=t.businessDomain),null!=t.supplyChainId&&t.hasOwnProperty("supplyChainId")&&(e.supplyChainId=t.supplyChainId),e},t}(),c.ProtoUserInformation=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.userId="",t.prototype.lookupId="",t.prototype.lookupResponseCode=0,t.prototype.callFraudSensor=!1,t.prototype.publisherAdsTxt="",t.encode=function(t,i){return i||(i=h.create()),null!=t.userId&&t.hasOwnProperty("userId")&&i.uint32(10).string(t.userId),null!=t.lookupId&&t.hasOwnProperty("lookupId")&&i.uint32(26).string(t.lookupId),null!=t.lookupResponseCode&&t.hasOwnProperty("lookupResponseCode")&&i.uint32(32).int32(t.lookupResponseCode),null!=t.callFraudSensor&&t.hasOwnProperty("callFraudSensor")&&i.uint32(40).bool(t.callFraudSensor),null!=t.publisherAdsTxt&&t.hasOwnProperty("publisherAdsTxt")&&i.uint32(50).string(t.publisherAdsTxt),i},t.decode=function(t,i){t instanceof a||(t=a.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoUserInformation;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.userId=t.string();break;case 3:s.lookupId=t.string();break;case 4:s.lookupResponseCode=t.int32();break;case 5:s.callFraudSensor=t.bool();break;case 6:s.publisherAdsTxt=t.string();break;default:t.skipType(7&n)}}return s},t.fromObject=function(t){if(t instanceof c.ProtoUserInformation)return t;var i=new c.ProtoUserInformation;return null!=t.userId&&(i.userId=String(t.userId)),null!=t.lookupId&&(i.lookupId=String(t.lookupId)),null!=t.lookupResponseCode&&(i.lookupResponseCode=0|t.lookupResponseCode),null!=t.callFraudSensor&&(i.callFraudSensor=Boolean(t.callFraudSensor)),null!=t.publisherAdsTxt&&(i.publisherAdsTxt=String(t.publisherAdsTxt)),i},t.toObject=function(t,i){i||(i={});var e={};return i.defaults&&(e.userId="",e.lookupId="",e.lookupResponseCode=0,e.callFraudSensor=!1,e.publisherAdsTxt=""),null!=t.userId&&t.hasOwnProperty("userId")&&(e.userId=t.userId),null!=t.lookupId&&t.hasOwnProperty("lookupId")&&(e.lookupId=t.lookupId),null!=t.lookupResponseCode&&t.hasOwnProperty("lookupResponseCode")&&(e.lookupResponseCode=t.lookupResponseCode),null!=t.callFraudSensor&&t.hasOwnProperty("callFraudSensor")&&(e.callFraudSensor=t.callFraudSensor),null!=t.publisherAdsTxt&&t.hasOwnProperty("publisherAdsTxt")&&(e.publisherAdsTxt=t.publisherAdsTxt),e},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.ProtoAdBreak=function(){function t(t){if(this.types=[],t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.types=o.emptyArray,t.prototype.maxAdPodDuration=0,t.prototype.maxAdSlotDuration=180,t.prototype.numberOfAdSlots=1,t.encode=function(t,i){if(i||(i=h.create()),null!=t.types&&t.types.length){i.uint32(10).fork();for(var e=0;e<t.types.length;++e)i.int32(t.types[e]);i.ldelim()}return null!=t.maxAdPodDuration&&t.hasOwnProperty("maxAdPodDuration")&&i.uint32(16).int32(t.maxAdPodDuration),null!=t.maxAdSlotDuration&&t.hasOwnProperty("maxAdSlotDuration")&&i.uint32(24).int32(t.maxAdSlotDuration),null!=t.numberOfAdSlots&&t.hasOwnProperty("numberOfAdSlots")&&i.uint32(32).int32(t.numberOfAdSlots),i},t.decode=function(t,i){t instanceof a||(t=a.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoAdBreak;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:if(s.types&&s.types.length||(s.types=[]),2==(7&n))for(var r=t.uint32()+t.pos;t.pos<r;)s.types.push(t.int32());else s.types.push(t.int32());break;case 2:s.maxAdPodDuration=t.int32();break;case 3:s.maxAdSlotDuration=t.int32();break;case 4:s.numberOfAdSlots=t.int32();break;default:t.skipType(7&n)}}return s},t.fromObject=function(t){if(t instanceof c.ProtoAdBreak)return t;var i=new c.ProtoAdBreak;if(t.types){if(!Array.isArray(t.types))throw TypeError(".ProtoAdBreak.types: array expected");i.types=[];for(var e=0;e<t.types.length;++e)switch(t.types[e]){default:case"None":case 0:i.types[e]=0;break;case"PreRoll":case 1:i.types[e]=1;break;case"MidRoll":case 2:i.types[e]=2;break;case"PostRoll":case 3:i.types[e]=3}}return null!=t.maxAdPodDuration&&(i.maxAdPodDuration=0|t.maxAdPodDuration),null!=t.maxAdSlotDuration&&(i.maxAdSlotDuration=0|t.maxAdSlotDuration),null!=t.numberOfAdSlots&&(i.numberOfAdSlots=0|t.numberOfAdSlots),i},t.toObject=function(t,i){i||(i={});var e={};if((i.arrays||i.defaults)&&(e.types=[]),i.defaults&&(e.maxAdPodDuration=0,e.maxAdSlotDuration=180,e.numberOfAdSlots=1),t.types&&t.types.length){e.types=[];for(var s=0;s<t.types.length;++s)e.types[s]=i.enums===String?c.ProtoAdBreakTypeEnum[t.types[s]]:t.types[s]}return null!=t.maxAdPodDuration&&t.hasOwnProperty("maxAdPodDuration")&&(e.maxAdPodDuration=t.maxAdPodDuration),null!=t.maxAdSlotDuration&&t.hasOwnProperty("maxAdSlotDuration")&&(e.maxAdSlotDuration=t.maxAdSlotDuration),null!=t.numberOfAdSlots&&t.hasOwnProperty("numberOfAdSlots")&&(e.numberOfAdSlots=t.numberOfAdSlots),e},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),t.exports=c},function(t,i,e){"use strict";e.d(i,"j",function(){return s}),e.d(i,"k",function(){return n}),e.d(i,"i",function(){return r}),e.d(i,"d",function(){return a}),e.d(i,"g",function(){return h}),e.d(i,"h",function(){return o}),e.d(i,"b",function(){return c}),e.d(i,"f",function(){return l}),e.d(i,"c",function(){return u}),e.d(i,"e",function(){return d}),e.d(i,"a",function(){return f});const s="1.3.13-iab2343",n="1.3.13-iab2343",r="Connatix";var a,h,o,c,l,u,d,f;!function(t){t.Generic="generic",t.Video="video"}(a||(a={})),function(t){t.Click="click",t.InvitationAccept="invitationAccept"}(h||(h={})),function(t){t.PreRoll="preroll",t.MidRoll="midroll",t.PostRoll="postroll",t.Standalone="standalone"}(o||(o={})),function(t){t.SessionStart="sessionStart",t.SessionError="sessionError",t.SessionFinish="sessionFinish"}(c||(c={})),function(t){t.DefinedByJavascript="definedByJavaScript",t.BeginToRender="beginToRender"}(l||(l={})),function(t){t.DefinedByJavascript="definedByJavaScript",t.Video="video"}(u||(u={})),function(t){t.sessionError="sessionError",t.geometryChange="geometryChange"}(d||(d={})),function(t){t.backgrounded="backgrounded",t.notFound="notFound"}(f||(f={}))},function(t,i,e){"use strict";var s;e.d(i,"c",function(){return s}),e.d(i,"a",function(){return n}),e.d(i,"b",function(){return r}),function(t){t.Connatix="143",t.AppNexus="32",t.DistrictM="144",t.IndexExchange="10",t.Lkqd="237",t.OneVideo="25",t.Openx="69",t.Pubmatic="76",t.RhythmOne="36",t.Rubicon="52",t.Spotx="165",t.Telaria="202",t.MediaNet="142",t.AdMan="149",t.IronSource="",t.Undertone="677",t.SynacorMedia="",t.AmxRTB="737",t.Smaato="82"}(s||(s={}));const n="cnx_usr_storage",r=["1YNY"]},,function(t,i,e){"use strict";e.d(i,"a",function(){return s});class s{}s.MaxLogOverflow=1e3,s.maxLogOverflowCount={},s.logCount={},s.maxLogSent={},s.sessionId="",s.pageFocus=!1,s.incrementLogCount=t=>{s.logCount[t]?(++s.maxLogOverflowCount[t],++s.logCount[t]):(s.logCount[t]=1,s.maxLogOverflowCount[t]=1)},s.isMaxLog=(t,i)=>!!(s.logCount[t]&&s.logCount[t]>i),s.isMaxLogOverflow=t=>s.maxLogOverflowCount[t]>s.MaxLogOverflow&&(s.maxLogOverflowCount[t]=1,!0),s.setMaxLogSent=t=>{s.maxLogSent[t]=!0},s.isMaxLogSent=t=>!!s.maxLogSent[t]},function(t,i,e){"use strict";e.d(i,"a",function(){return r}),e.d(i,"c",function(){return a}),e.d(i,"b",function(){return h});var s=e(7),n=e(2);const r=t=>Object.keys(t).map(i=>t[i]);function a(t){for(const i in t)t.hasOwnProperty(i)&&"string"==typeof t[i]&&(t[i]=`%22${encodeURIComponent(t[i])}%22`);return JSON.stringify(t).cnx_replaceAll('"',"")}function h(t,i){if(!Object(n.f)(t)||!Object(n.f)(i))return!1;const e=Object.getOwnPropertyNames(t),r=Object.getOwnPropertyNames(i);return e.length===r.length&&e.every(e=>Object(s.i)(t[e],i[e]))}},function(t,i,e){"use strict";e.d(i,"a",function(){return r}),e.d(i,"d",function(){return a}),e.d(i,"b",function(){return h}),e.d(i,"f",function(){return o}),e.d(i,"e",function(){return c}),e.d(i,"c",function(){return l});var s=e(2),n=e(10);function r(t){let i,e;return Object(s.g)(t)&&(i=t.match(n.b))&&(e=parseInt(i[1],10)*n.d+parseInt(i[2],10)*n.e+parseInt(i[3],10)*n.f+parseInt(i[5]||0,10)),isNaN(e)?null:e}function a(t,i){return/^\d+(\.\d+)?%$/g.test(t)?i?i*parseFloat(t.replace("%",""))/100:null:r(t)}function h(t){return Date.now()+t*n.a}function o(t,i=":"){const e=t=>t>=10?t:`0${t}`;return`${e(Math.floor(t/60))}${i}${e(Math.floor(t%60))}`}function c(t){const i=Date.parse(t+" GMT");if(!Object(s.d)(i))return;const e=Math.floor((Date.parse(new Date(Date.now()).toUTCString())-i)/1e3);if(!Object(s.e)(e))return"just now";const n=[{value:1,symbol:"s"},{value:60,symbol:"m"},{value:3599,symbol:"h"},{value:86399,symbol:"d"}];let r;for(r=n.length-1;r>0&&!(e>=n[r].value);r--);return Math.floor(e/n[r].value).toFixed(0)+n[r].symbol+" ago"}function l(t,i){const e=Date.now();return!(e<t||e>i)}},function(t,i,e){"use strict";e.d(i,"a",function(){return s}),e.d(i,"b",function(){return n});const s="https://connatix.com/privacy-policy/",n="v"},function(t,i,e){"use strict";function s(t){for(var e in t)i.hasOwnProperty(e)||(i[e]=t[e])}Object.defineProperty(i,"_",{value:!0}),s(e(150)),s(e(151)),s(e(152)),s(e(153))},function(t,i,e){"use strict";e.d(i,"b",function(){return r}),e.d(i,"a",function(){return a});class s{}s.clientAb0=1,s.clientAb1=1;class n{}var r;n.clientAb0=1,n.clientAb1=1,function(t){t[t.ElementsABService=0]="ElementsABService",t[t.PlayspaceABService=1]="PlayspaceABService"}(r||(r={}));class a{static get clientAb0(){return this.getABValueForKey("clientAb0")}static get clientAb1(){return this.getABValueForKey("clientAb1")}static getABValueForKey(t){switch(this.abServiceType){case r.PlayspaceABService:return n[t];default:return s[t]}}}},function(t,i,e){"use strict";function s(t){for(var e in t)i.hasOwnProperty(e)||(i[e]=t[e])}Object.defineProperty(i,"_",{value:!0}),s(e(75)),s(e(154)),s(e(76)),s(e(77)),s(e(155)),s(e(63)),s(e(78)),s(e(156)),s(e(157))},function(t,i,e){"use strict";e.d(i,"a",function(){return a});var s=e(11),n=e(4),r=e(27);class a{static Li(){const t=a.Ri;return a.Ri++,t}static Bi(t){return a.Di[t]}static Fi(t){t.forEach(t=>{a.Di[t.advertiserLineItemId]&&a.addCustomHistoryLine("duplicate",{id:t.advertiserLineItemId}),a.Di[t.advertiserLineItemId]=a.Li()})}static $i(t){return t.map(t=>({advertiserLineItemId:t.advertiserLineItemId,creativeType:t.creativeType,impressionTimeout:t.impressionTimeSpent,lineItemPriority:t.lineItemPriority,playerSize:t.playerSize,requestCap:t.requestCap,sound:t.sound,viewability:t.viewability}))}static setClientSideAdList(t){a.Ui&&(a.Vi=a.$i(JSON.parse(JSON.stringify(t))),a.Fi(a.Vi))}static setRtbAdList(t){a.Ui&&(a.Ni=a.$i(JSON.parse(JSON.stringify(t))),a.Fi(a.Ni))}static setHeaderBidderAdList(t){a.Ui&&(a.Hi=a.$i(JSON.parse(JSON.stringify(t))),a.Fi(a.Hi))}static setTamAdList(t){a.Ui&&(a.qi=a.$i(JSON.parse(JSON.stringify(t))),a.Fi(a.qi))}static setLineItemStatus(t,i){if(!a.Ui)return;const e=a.Bi(t);a.zi.push({type:"status",id:e,status:s.a[i]})}static setVpaidEvent(t,i){if(a.Ui)try{const e=a.Bi(t);switch(i){case n.b.AdLoaded:case n.b.AdStarted:case n.b.AdError:case n.b.AdSkipped:case n.b.AdStopped:case n.b.AdPaused:case n.b.AdPlaying:case n.b.AdImpression:a.zi.push({type:"vpaid",id:e,event:i})}}catch(t){}}static setViewabilityState(t){a.Ui&&a.zi.push({type:"view",inView:t})}static setFocusState(t){a.Ui&&a.zi.push({type:"focus",inView:t})}static setAdState(t){a.Ui&&a.zi.push({type:"adState",state:r.ProtoAdSlotsEnum[t]})}static enforcerAction(t){a.Ui&&a.zi.push({type:"enforcer",action:t})}static addCustomHistoryLine(t,i){a.Ui&&a.zi.push(Object.assign({type:t},i))}static getJsonString(){return a.Ui?JSON.stringify({clientAdList:a.Vi,rtbAdList:a.Ni,headerBidderAdList:a.Hi,mappedAdList:a.Di,history:a.zi}).substring(0,a.Wi):""}static playerDestroyed(){this.Gi=!0}static isPlayerDestroyed(){return this.Gi}}a.Ui=Date.now()-1581093917537<0,a.Wi=5e4,a.Ri=0,a.Di={},a.Vi=[],a.Ni=[],a.Hi=[],a.qi=[],a.zi=[],a.Gi=!1},function(t,i,e){"use strict";var s;e.d(i,"a",function(){return s}),function(t){t[t.P1=1]="P1",t[t.P2=2]="P2",t[t.P3=3]="P3",t[t.P4=4]="P4",t[t.P5=5]="P5",t[t.P6=6]="P6",t[t.P7=7]="P7",t[t.P8=8]="P8",t[t.P9=9]="P9",t[t.P10=10]="P10"}(s||(s={}))},function(t,i,e){"use strict";e.d(i,"a",function(){return s});class s{constructor(){this.Ji=!1,this.promise=new Promise((t,i)=>{this.Qi=t,this.Xi=i})}Yi(){this.Ji||(this.Ji=!0)}resolve(t){this.Yi(),this.Qi(t)}reject(t){this.Yi(),this.Xi(t)}get isPending(){return!this.Ji}}},function(t,i,e){"use strict";(function(t){var s=i;function n(t,i,e){for(var s=Object.keys(i),n=0;n<s.length;++n)void 0!==t[s[n]]&&e||(t[s[n]]=i[s[n]]);return t}function r(t){function i(t,e){if(!(this instanceof i))return new i(t,e);Object.defineProperty(this,"message",{get:function(){return t}}),Error.captureStackTrace?Error.captureStackTrace(this,i):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),e&&n(this,e)}return(i.prototype=Object.create(Error.prototype)).constructor=i,Object.defineProperty(i.prototype,"name",{get:function(){return t}}),i.prototype.toString=function(){return this.name+": "+this.message},i}s.asPromise=e(137),s.base64=e(138),s.EventEmitter=e(139),s.float=e(140),s.inquire=e(141),s.utf8=e(142),s.pool=e(143),s.LongBits=e(144),s.global="undefined"!=typeof window&&window||void 0!==t&&t||"undefined"!=typeof self&&self||this,s.emptyArray=Object.freeze?Object.freeze([]):[],s.emptyObject=Object.freeze?Object.freeze({}):{},s.isNode=Boolean(s.global.process&&s.global.process.versions&&s.global.process.versions.node),s.isInteger=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},s.isString=function(t){return"string"==typeof t||t instanceof String},s.isObject=function(t){return t&&"object"==typeof t},s.isset=s.isSet=function(t,i){var e=t[i];return!(null==e||!t.hasOwnProperty(i))&&("object"!=typeof e||(Array.isArray(e)?e.length:Object.keys(e).length)>0)},s.Buffer=function(){try{var t=s.inquire("buffer").Buffer;return t.prototype.utf8Write?t:null}catch(t){return null}}(),s.Ki=null,s.Zi=null,s.newBuffer=function(t){return"number"==typeof t?s.Buffer?s.Zi(t):new s.Array(t):s.Buffer?s.Ki(t):"undefined"==typeof Uint8Array?t:new Uint8Array(t)},s.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,s.Long=s.global.dcodeIO&&s.global.dcodeIO.Long||s.global.Long||s.inquire("long"),s.key2Re=/^true|false|0|1$/,s.key32Re=/^-?(?:0|[1-9][0-9]*)$/,s.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,s.longToHash=function(t){return t?s.LongBits.from(t).toHash():s.LongBits.zeroHash},s.longFromHash=function(t,i){var e=s.LongBits.fromHash(t);return s.Long?s.Long.fromBits(e.lo,e.hi,i):e.toNumber(Boolean(i))},s.merge=n,s.lcFirst=function(t){return t.charAt(0).toLowerCase()+t.substring(1)},s.newError=r,s.ProtocolError=r("ProtocolError"),s.oneOfGetter=function(t){for(var i={},e=0;e<t.length;++e)i[t[e]]=1;return function(){for(var t=Object.keys(this),e=t.length-1;e>-1;--e)if(1===i[t[e]]&&void 0!==this[t[e]]&&null!==this[t[e]])return t[e]}},s.oneOfSetter=function(t){return function(i){for(var e=0;e<t.length;++e)t[e]!==i&&delete this[t[e]]}},s.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},s.te=function(){var t=s.Buffer;t?(s.Ki=t.from!==Uint8Array.from&&t.from||function(i,e){return new t(i,e)},s.Zi=t.allocUnsafe||function(i){return new t(i)}):s.Ki=s.Zi=null}}).call(this,e(71))},function(t,i,e){"use strict";Object.defineProperty(i,"_",{value:!0});var s=e(35),n=function(){function t(){}return t.encode=function(t,i){var e;if("string"==typeof t&&(t=parseInt(t,10)),(e=t.toString(2)).length>i||t<0)throw new s.EncodingError(t+" too large to encode into "+i);return e.length<i&&(e="0".repeat(i-e.length)+e),e},t.decode=function(t,i){if(i!==t.length)throw new s.DecodingError("invalid bit length");return parseInt(t,2)},t}();i.IntEncoder=n},function(t,i,e){"use strict";var s=this&&this.ie||function(t){var i="function"==typeof Symbol&&Symbol.iterator,e=i&&t[i],s=0;if(e)return e.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&s>=t.length&&(t=void 0),{value:t&&t[s++],done:!t}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(i,"_",{value:!0});var n=function(){function t(){}return t.prototype.clone=function(){var t=this,i=new this.constructor;return Object.keys(this).forEach(function(e){var s=t.deepClone(t[e]);void 0!==s&&(i[e]=s)}),i},t.prototype.deepClone=function(t){var i,e,n=typeof t;if("number"===n||"string"===n||"boolean"===n)return t;if(null!==t&&"object"===n){if("function"==typeof t.clone)return t.clone();if(t instanceof Date)return new Date(t.getTime());if(void 0!==t[Symbol.iterator]){var r=[];try{for(var a=s(t),h=a.next();!h.done;h=a.next()){var o=h.value;r.push(this.deepClone(o))}}catch(t){i={error:t}}finally{try{h&&!h.done&&(e=a.return)&&e.call(a)}finally{if(i)throw i.error}}return t instanceof Array?r:new t.constructor(r)}var c={};for(var l in t)t.hasOwnProperty(l)&&(c[l]=this.deepClone(t[l]));return c}},t}();i.Cloneable=n},function(t,i,e){"use strict";e.d(i,"a",function(){return d}),e.d(i,"b",function(){return f});var s=e(53),n=e(0),r=e(13),a=e(2),h=e(5);const o=new s.a(n.ProtoAdDomainBlockingResponse,"AdDomainBlockingService"),c=2;let l;const u=new Map;function d(t){l||(l=new Promise(i=>{const e=t.find(t=>t.blockedDomainsRevisionNumber);if(!e)return void i();const{publisherLineItemId:s,blockedDomainsRevisionNumber:a}=e,l=`${r.a.endPoints.base.lineItems}${s}/blockedDomains_${a}.bin`;o.fetchMetadata(l,c).then(t=>{u.set(s,t.domains),i()}).catch(()=>{Object(h.a)({message:"AdDomainBlockingService_fetchBlockedDomains_endpoint_unavailable",level:n.ProtoLoggingLevelEnum.FATAL,throttle:2,sendMaxLog:!1}),i()})}))}function f(t,i){return new Promise(e=>{Object(a.h)(i)?l.then(()=>{u.has(t)&&u.get(t).some(t=>i.includes(t))?e(!0):e(!1)}):e(!1)})}},function(t,i){t.exports='<svg viewBox="0 0 25 25" xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd"><path d="M5 21.453c2.022 1.627 4.6 2.602 7.387 2.602 3.973 0 7.485-1.967 9.622-4.977l-4.596-3.34a3.87 3.87 0 0 0-4.548 0L5 21.453zM22 4.977A11.75 11.75 0 0 0 12.387 0 11.74 11.74 0 0 0 5 2.602l7.9 5.74a3.81 3.81 0 0 0 4.479 0l4.63-3.364zm1.563 11.395c.494-1.3.767-2.712.767-4.186S24.057 9.3 23.563 8l-3.858 2.803a1.71 1.71 0 0 0 0 2.766l3.858 2.803z" fill="#fff"></path><path d="M2.378 5c-.024-.017-.057-.012-.074.01A11.74 11.74 0 0 0 0 12.025a11.74 11.74 0 0 0 2.304 7.004c.017.023.05.028.074.01l8.013-5.822c.81-.59.81-1.797 0-2.386L2.378 5z" fill="#09f"></path></svg>'},function(t,i){t.exports="<cnx class=cnx-ui-progress-label> <cnx-span></cnx-span> </cnx> "},function(t,i,e){"use strict";Object.defineProperty(i,"_",{value:!0});var s=function(){function t(){}return t.encode=function(t){return+t+""},t.decode=function(t){return"1"===t},t}();i.BooleanEncoder=s},function(t,i,e){"use strict";var s;!function(t){t.prebid="prebid",t.bid="bid",t.win="win",t.impression="impression",t.viewableImpression="viewableImpression",t.postbid="postbid",t.initAd="initAd",t.request="request"}(s||(s={}))},function(t,i,e){"use strict";e.d(i,"a",function(){return s});var s,n=e(54),r=e(1),a=e(7);!function(t){const i=["adBanner","banner-search","abc_banner","Banner_Top","ad_container","pub_300x250","pub_300x250m","pub_728x90","text-ad","text_ad","textAd","text-ad-links","text_ads","text-ads","text-ad-links"],e="cnxtestadblock",s=function(){const t=i.join(" ");return`<style>.adBanner{background-color: transparent; height: 1px !important; width: 1px !important; position: absolute !important; left: -10000px !important; top: -1000px !important; display:block !important; }</style><div id="${e}" class="${t}"></div>`},h={src:n.a};t.detectUsingCSS=function(t){try{let i=!1;t.document.body.insertAdjacentHTML("beforeend",s());const n=t.document.getElementById(e);return 0!==n.getBoundingClientRect().height&&0!==n.getBoundingClientRect().width||(i=!0),t.document.body.removeChild(n),i}catch(t){return!1}},t.detectUsingScript=function(){return new Promise(t=>{const i=Object(a.f)(window).topFrame;i.googletag&&t(!1),Object(r.A)(h,i.document.head,i,()=>i.googletag?t(!1):t(!0),()=>t(!0))})}}(s||(s={}))},function(t,i,e){"use strict";var s=e(7),n=e(29),r=e(25),a=e(0),h=e(13),o=e(2),c=e(34),l=e(19);class u{constructor(t){this.ee=t,this.se=!0,this.ne="",this.re=!1,this.ae=[]}static getInstance(t){const i=n.a,e=Object(s.f)(t).topFrame;return e[i]||(e[i]=new u(e)),e[i]}get userId(){if(Object(o.h)(this.he))return this.he.split("_")[0]}set userId(t){this.he=t}get isCcpaApplicable(){return this.se}set isCcpaApplicable(t){this.se=t}get usPrivacyString(){return this.ne}set usPrivacyString(t){this.ne=t}get consentPayload(){return this.ce}set consentPayload(t){this.ce||(this.ce=t)}getScope(){return this.ee}syncDemandPartner(t){if(this.userId){const i={userId:this.userId,demandPartner:parseInt(t.demandPartner,10),demandPartnerUserId:t.demandPartnerUserId};r.a.sendProtoRequest({ProtoRequest:a.ProtoUserSyncRequest,endpoint:h.a.endPoints.api.syncUrls,requestData:i,queryParams:{[c.b]:l.a.version},logError:!0}).then(t=>{}).catch(t=>{})}}registerPlsCall(t){return this.re?(this.ae.push(t),()=>{}):this.userId?(t(),()=>{}):(this.re=!0,t(),()=>{this.re=!1,this.ae.forEach(t=>t()),this.ae=[]})}}var d,f=e(33),p=e(5),b=e(6);!function(t){t.USER_ID="cnx_userId"}(d||(d={}));class v{constructor(t,i){this.le=t,this.ue=i,this.de={[d.USER_ID]:30},this.fe=["Facebook App","Google App","Flipboard App","Instagram App","Pinterest App"],this.pe=!1}be({name:t,value:i}){t===d.USER_ID&&(this.le.userId=this.ve(i))}me(t){let i="";const e=this.de[t.name];if(e){i=`; expires=${new Date(Object(f.b)(e)).toUTCString()}`}this.ue.document.cookie=`${t.name}=${t.value}${i}; path=/`}ge(t,i){if(!Object(b.h)(t))return;const e={cookieList:t,secureMode:i?a.ProtoCookieSecureModeEnum.Unsecure:a.ProtoCookieSecureModeEnum.Auto,browserInfo:this.ye};return r.a.sendProtoRequest({requestData:e,ProtoRequest:a.ProtoCookieSyncRequest,endpoint:h.a.endPoints.api.cookie,withCredentials:!0,queryParams:{[c.b]:l.a.version},logError:!1}).catch(t=>Object(p.a)({message:"UserCookieManager_setThirdPartyCookie",exception:t.message,callStack:t.callStack,level:a.ProtoLoggingLevelEnum.FATAL}))}ve(t){return t.split("_")[0]}we(t){try{const i=t+"=",e=decodeURIComponent(this.ue.document.cookie).split(";");for(let t of e){for(;" "===t.charAt(0);)t=t.substring(1);if(0===t.indexOf(i))return this.ve(t.substring(i.length,t.length))}}catch(t){}return""}getUserId(){return this.le.userId}syncFirstPartyCookie(t){const i={name:t,value:"",timestamp:Object(f.b)(this.de[t])};t===d.USER_ID&&(i.value=this.le.userId),Object(o.h)(i.value)&&this.me(i)}syncThirdPartyCookieList(t){const i=[d.USER_ID],e=[];i.forEach(t=>{t===d.USER_ID&&Object(o.h)(this.le.userId)&&e.push({name:d.USER_ID,value:this.le.userId,timestamp:Object(f.b)(this.de[d.USER_ID])})}),this.ge(e,t)}setBrowserInfo(t,i){this.ye=t,this.pe=this.fe.includes(t.browserType),this.pe&&i&&this.syncThirdPartyCookieList(this.pe)}setUserInformation(t){t&&this.be({name:d.USER_ID,value:t.userId})}fetchCookies(){[d.USER_ID].map(t=>({name:t,value:this.we(t)})).filter(({value:t})=>Object(o.h)(t)).forEach(t=>this.be(t))}get unsecuredCookieSync(){return this.pe}}var m=e(23);const g={[m.a.CmpApi]:{windowPropertyName:"__cmp",framePropertyName:"__cmpLocator",getVendorConsentDataMethodName:"getVendorConsents",getConsentDataMethodName:"getConsentData"},[m.a.TcfApi]:{windowPropertyName:"__tcfapi",framePropertyName:"__tcfapiLocator",getVendorConsentDataMethodName:"getTCData",consentUpdateMethodName:"addEventListener",removeUpdateListenerMethodName:"removeEventListener"}};class y{constructor(t,i){this.xe=t,this.ke=i,this.apiType=m.a.CmpApi,this.Se={},this.ce=null,this.Oe=t=>new Promise((i,e)=>{try{const s="string"==typeof t.data?JSON.parse(t.data):t.data;if("object"==typeof s&&s._e)if(s._e.callId===this.je){const t=s._e.returnValue&&s._e.returnValue.vendorConsents;this.Ae(t).then(()=>i(this.je))}else if(s._e.callId===this.Ie){const t=s._e.returnValue&&s._e.returnValue.consentData;this.Te(t).then(()=>i(this.Ie))}}catch(t){e()}})}isApiOnPage(){return null!==this.xe||null!==this.ke}bindToApi(){return null!==this.xe?new Promise((t,i)=>{this.Ce(this.xe).then(()=>t()).catch(t=>i(t))}):null!==this.ke?this.Pe(this.ke):Promise.reject()}isConsentForVendor(t){return!!this.Se[t]}getConsentPayload(){return this.ce}setInAppConsentData(t){this.Ae(t),this.Te(t.consentString)}hasIvtConsent(){return this.isConsentForVendor(n.c.Connatix)}isConsentForPurposes(t){return!0}Pe(t){this.Ie=Object(s.c)(),this.je=Object(s.c)();const i={};return new Promise(e=>{const s=t=>{this.Oe(t).then(t=>{i[t]=!0,i[this.Ie]&&i[this.je]&&(window.removeEventListener("message",s,!1),e())}).catch(t=>{})};window.addEventListener("message",s,!1);const n=g[m.a.CmpApi].getVendorConsentDataMethodName,r=g[m.a.CmpApi].getConsentDataMethodName;t.postMessage({Me:{command:n,parameter:null,callId:this.je}},"*"),t.postMessage({Me:{command:r,parameter:null,callId:this.Ie}},"*")})}Ce(t){const i=g[m.a.CmpApi].windowPropertyName,e=g[m.a.CmpApi].getVendorConsentDataMethodName,s=g[m.a.CmpApi].getConsentDataMethodName;if(t&&t[i]){const n=new Promise(s=>{t[i](e,null,(t,i)=>{if(i){const{vendorConsents:i}=t;this.Ae(i).then(()=>s())}})}),r=new Promise(e=>{t[i](s,null,(t,i)=>{if(i){const{consentData:i}=t;this.Te(i).then(()=>e())}})});return Promise.all([n,r])}return Promise.reject()}Ae(t){return Object(o.f)(t)?(this.Se=t,Promise.resolve()):Promise.reject()}Te(t){return Object(o.g)(t)?(this.ce=t,Promise.resolve()):Promise.reject()}}var w=e(1),x=e(86),k=e(87);const S=(t,i)=>{const e=g[i].windowPropertyName;return Object(w.s)(t,e)},O=(t,i)=>{const e=g[i].framePropertyName;return Object(w.r)(t,e)},_=(t,i)=>null!==S(t,i)||null!==O(t,i),j=t=>{const i=x.TCString.decode(t),e={},s={};return i.vendorConsents.forEach((t,i)=>e[i]=t),i.purposeConsents.forEach((t,i)=>s[i]=t),{vendorConsents:e,purposeConsents:s,tcString:t}},A=t=>{const i=k.decodeConsentString(t);let e="";const s=i.maxVendorId;for(let t=1;t<=s;t++)e+="0";const n=e.split("");return i.allowedVendorIds.forEach(t=>{n[t-1]="1"}),(t=>{const i={consentString:t};for(let e=0;e<t.length;e++)i[e+1]="1"===t[e];return i})(n.join(""))},I=(t,i,e)=>{let s;try{s=i(t)}catch(t){}if(Object(o.f)(s))return s;try{s=e(t)}catch(t){}return s},T=t=>{var i;return Object(o.h)(null===(i=t)||void 0===i?void 0:i.tcString)},C=t=>{var i;return Object(o.h)(null===(i=t)||void 0===i?void 0:i.consentString)},P=({cmpEncodedString:t,tcfEncodedString:i})=>{if(!Object(o.h)(t)&&!Object(o.h)(i))return null;let e=null;return Object(o.h)(i)&&(e=I(i,j,A)),Object(o.f)(e)?e:Object(o.h)(t)?(e=I(t,A,j),Object(o.f)(e)?e:(Object(p.a)({message:"UserManagerService_getDecodedConsentData",exception:"cmpEncodedString failed to decode",callStack:JSON.stringify({cmpEncodedString:t,tcfEncodedString:i}),level:a.ProtoLoggingLevelEnum.FATAL}),null)):(Object(p.a)({message:"UserManagerService_getDecodedConsentData",exception:"tcfEncodedString failed to decode",callStack:JSON.stringify({tcfEncodedString:i}),level:a.ProtoLoggingLevelEnum.FATAL}),null)},M="useractioncomplete",E="tcloaded";class L{constructor(t,i){this.Ee=t,this.Le=i,this.apiType=m.a.TcfApi,this.Re=t=>new Promise((i,e)=>{try{let s=t.data;if("string"==typeof t.data)try{s=JSON.parse(t.data)}catch(t){s=void 0}if("object"==typeof s&&s.Be&&s.Be.callId===this.De){const t=s.Be.returnValue.tcString;this.Ae(t).then(()=>i(this.De)).catch(t=>e())}}catch(t){e()}})}isApiOnPage(){return null!==this.Ee||null!==this.Le}bindToApi(){return null!==this.Ee?new Promise((t,i)=>{this.Ce(this.Ee).then(()=>t()).catch(t=>i(t))}):null!==this.Le?this.Pe(this.Le):Promise.reject()}isConsentForVendor(t){var i,e;return!(null===(i=this.Fe)||void 0===i||!i.vendorConsents)&&!!(null===(e=this.Fe)||void 0===e?void 0:e.vendorConsents[t])}getConsentPayload(){var t;return null===(t=this.Fe)||void 0===t?void 0:t.tcString}setInAppConsentData(t){this.Fe=Object.assign(Object.assign({},this.Fe),t)}hasIvtConsent(){return!0}isConsentForPurposes(t){var i;return!(null===(i=this.Fe)||void 0===i||!i.purposeConsents)&&t.every(t=>!!this.Fe.purposeConsents[t])}Pe(t){this.De=Object(s.c)();const i={};return new Promise(e=>{const s=t=>{this.Re(t).then(t=>{i[t]=!0,i[this.De]&&(window.removeEventListener("message",s,!1),e())}).catch(t=>{})};window.addEventListener("message",s,!1);const n=g[m.a.TcfApi].getVendorConsentDataMethodName;t.postMessage({$e:{command:n,parameter:null,callId:this.De}},"*")})}Ce(t){const i=g[m.a.TcfApi].windowPropertyName,e=g[m.a.TcfApi].consentUpdateMethodName,s=g[m.a.TcfApi].removeUpdateListenerMethodName;return t&&t[i]?new Promise(t=>{this.Ee[i](e,2,(e,n)=>{if(n&&(e.eventStatus===M||e.eventStatus===E)){const n=e.tcString;this.Ae(n).then(()=>t()),this.Ee[i](s,2,()=>void 0,e.listenerId)}})}):Promise.reject()}Ae(t){const i=P({tcfEncodedString:t});return T(i)?(this.Fe=i,Promise.resolve()):Promise.reject()}}var R=e(39);const B=[R.a.P1,R.a.P2,R.a.P4,R.a.P7,R.a.P8];class D{constructor(t,i,e={}){var s,n;this.Ue=t,this.ue=i;const r=P({cmpEncodedString:null===(s=e.cmp)||void 0===s?void 0:s.consentString,tcfEncodedString:null===(n=e.tcf)||void 0===n?void 0:n.tcString}),h=this.Ve(r);null!==h?(this.Ne(h),(T(r)||C(r))&&this.He.setInAppConsentData(r)):Object(p.a)({message:"UserManagerService_UserConsentApiManager",exception:"failed to find the right api, no consent string and no framework on page was found",callStack:JSON.stringify({_appSettings:e}),level:a.ProtoLoggingLevelEnum.FATAL})}setPageUrl(t){this.qe=t}setAmpUserConsent(t){var i,e;if(!this.isConsentRequired())return;const s=t.consentStringTypeEnum.US_PRIVACY_STRING,n=null===(i=t.consentMetadata)||void 0===i?void 0:i.consentStringType,r=t.encodeConsentString||(null===(e=t.consentMetadata)||void 0===e?void 0:e.additionalConsent);let h;if(!Object(o.h)(r))return void Object(p.a)({level:a.ProtoLoggingLevelEnum.INFO,message:"AMP_no_consent_string_provided",callStack:JSON.stringify(t),exception:this.qe});if(n===s)return void Object(p.a)({message:"UserConsentApiManager_CCPA_encoded_string_from_amp_not_used",level:a.ProtoLoggingLevelEnum.WARNING,callStack:r,exception:`${JSON.stringify(t)}__pageURL_${this.qe}`,throttle:2,sendMaxLog:!1});const c=P({tcfEncodedString:r,cmpEncodedString:r});T(c)?h=new L(null,null):C(c)&&(h=new y(null,null)),h?h?(this.He=h,this.He.setInAppConsentData(c)):Object(p.a)({message:"UserConsentApiManager_amp_userConsentApi_not_found",level:a.ProtoLoggingLevelEnum.WARNING,callStack:r,exception:`${JSON.stringify(t)}__pageURL__${this.qe}`,throttle:2,sendMaxLog:!1}):Object(p.a)({message:"UserConsentApiManager_encoded_string_not_tcf_and_not_cmp",level:a.ProtoLoggingLevelEnum.WARNING,callStack:r,exception:`${JSON.stringify(t)}__pageURL__${this.qe}`,throttle:2,sendMaxLog:!1})}isConsentRequired(){return this.Ue}isConsent(t,i=[]){if(this.isConsentRequired()){return this.He.isConsentForVendor(t)&&this.He.isConsentForPurposes(i)}return!0}isConsentConnatix(){return this.isConsent(n.c.Connatix,B)}getConsentDataPayload(){return this.He.getConsentPayload()}bindToConsentApi(){return this.He.bindToApi()}isConsentApiOnPage(){return this.He.isApiOnPage()}hasIVTConsent(){return this.He.hasIvtConsent()}getConsentApiType(){return this.He.apiType}Ne(t){const i=S(this.ue,t),e=O(this.ue,t);t===m.a.TcfApi?this.He=new L(i,e):this.He=new y(i,e)}Ve(t){if(T(t))return m.a.TcfApi;if(C(t))return m.a.CmpApi;return _(this.ue,m.a.TcfApi)?m.a.TcfApi:_(this.ue,m.a.CmpApi)?m.a.CmpApi:m.a.TcfApi}}var F=e(18);const $="UserThirdPartySyncManager_Pubmatic",U="CookieSync_syncScript_not_properly_loaded",V="CookieSync_param_not_parsed_properly",N=(t,i,e)=>new Promise((s,n)=>{const r=Object(F.b)("p",t),a=Object(F.b)("predirect",t);if(window.PubMaticSync){if(!H(r,a))return void n();q(r,a,i,e),s(!0)}else Object(w.A)({src:"//ads.pubmatic.com/AdServer/js/userSync.js"},window.document.head,window,()=>{H(r,a)?(q(r,a,i,e),s(!0)):n()},()=>{n()},!0,$)}),H=(t,i)=>{if(!window.PubMaticSync)return z(U,"PUBMATIC"),!1;const e=Number.parseInt(t,10);return Object(o.d)(e)?!!Object(o.h)(i)||(z(V,"PUBMATIC","predirect"),!1):(z(V,"PUBMATIC","p"),!1)},q=(t,i,e,s)=>{const n={pubId:Number.parseInt(t,10),url:i};e&&(n.delay=1e3,n.gdpr=1,n.gdprConsent=s),window.PubMaticSync.sync(n)},z=(t,i,e="")=>{Object(p.a)({message:t,callStack:i,exception:e,level:a.ProtoLoggingLevelEnum.FATAL,throttle:1,sendMaxLog:!1})},W="yellowblue.io";class G{constructor(t,i){this.ze=t,this.Ue=i,this.We=[]}replaceuserIdMacros(t,i){let e=t;return e=(e=(e=e.replace("%5BuserId%5D",i)).replace("[userId]",i)).replace("%7bUSER_ID%7d",i)}Ge(t,i){try{if(this.Je(t)){const e=i.document.createElement("iframe");e.setAttribute("style","width:1px;height:1px;border:0px;margin:0px;padding:0px"),e.src=t.url,i.document.body.appendChild(e)}else Object(w.A)({src:t.url},i.document.head,i,null,null,1===Object(s.l)([95,5]),"UserManager_unable_to_insert_sync_url_script");return!0}catch(t){return!1}}Je(t){switch(t.vendorId){case n.c.Rubicon:case n.c.Pubmatic:return!0;default:return t.url.indexOf(W)>-1}}syncUrls(t,i){this.We.forEach(e=>{if(this.ze.isConsent(e.vendorId)&&!e.synced){if(e.vendorId===n.c.Pubmatic)return void N(e.url,this.ze.isConsentRequired(),this.ze.getConsentDataPayload()).then(()=>{e.synced=!0});if(-1!==e.url.indexOf("openx.net"))return e.url=`${e.url.split("r=")[0]}&r=\n                        ${encodeURIComponent(`https://capi.connatix.com/core/us?DemandPartner=8&UserId=${t}&DemandPartnerUserId=`)}`,e.url=this.replaceuserIdMacros(e.url,t),r.a.trackPixel(e.url),void(e.synced=!0);if(e.url.indexOf("pixel.advertising.com")>-1&&(e.url=e.url.replace("gdpr=",`gdpr=${this.ze.isConsentRequired()?1:0}`),e.url=e.url.replace("gdpr_consent=","gdpr_consent=0")),e.url=this.replaceuserIdMacros(e.url,t),this.Ue){e.url=Object(F.e)(e.url,"gdpr","1");const t=this.ze.getConsentDataPayload();e.url=Object(F.e)(e.url,"gdpr_consent",t)}this.Ge(e,i)&&(e.synced=!0)}})}setSyncUrls(t={}){return!(this.We.length>0)&&(this.We=[],Object.keys(t).forEach(i=>{this.We.push({vendorId:i,url:t[i],synced:!1})}),!0)}}var J=e(40);const Q={subdivision:{California:5332921},country:{US:6252001}};class X{constructor(t,i){this.le=t,this.Qe=1,this.Xe="__uspapi",this.Ye="getUSPData",this.Ke(i)}getUsPrivacyString(){if(this.le.usPrivacyString||this.le.isCcpaApplicable)return this.le.usPrivacyString}isCcpaApplicable(){return this.le.isCcpaApplicable}isSellUserAllowed(){return!this.le.isCcpaApplicable||this.Ze()}setGeoLocation(t){this.ts=t,t.subdivisionId!==Q.subdivision.California&&(this.le.isCcpaApplicable=!1)}fetchUsPrivacyString(){return this.es()&&this.ss(),this.isCcpaApplicable()?new Promise(t=>{this.getUsPrivacyString()?t():t(this.ns())}):Promise.resolve()}ns(){return new Promise((t,i)=>{const e=this.le.getScope()[this.Xe];e?e(this.Ye,this.Qe,(e,s)=>{s?(this.Ke(e.uspString),t()):i()}):i()})}Ze(){return!this.le.usPrivacyString||Object(b.g)(this.le.usPrivacyString,n.b)}Ke(t){this.le.usPrivacyString=t}es(){if(!Object(s.l)([95,5]))return!1;const t=new Date(2020,10,16,12,0,0).getTime(),i=new Date(2020,10,17,12,0,0).getTime();return Object(f.c)(t,i)}ss(){const{countryGeoId:t,subdivisionId:i}=this.ts;t===Q.country.US&&Object(p.a)({message:"UserCcpaManager_logCCPA",level:a.ProtoLoggingLevelEnum.INFO,callStack:JSON.stringify(i),exception:this.le.usPrivacyString})}}var Y,K;e.d(i,"a",function(){return Y}),e.d(i,"b",function(){return Z}),function(t){t.CCPA_INFO_RECEIVED="ccpaInfoReceived",t.CONSENT_DATA_UPDATE="consentDataUpdate"}(Y||(Y={})),function(t){t.SYNC_URLS_RECEIVED="thirdPartySyncUrlsReceived",t.USER_INFO_RECEIVED="userInfoReceived"}(K||(K={}));class Z{constructor(t,i,e,s={}){this.rs=i,this.hs=e,this._appSettings=s,this.gdprConsentMode=a.ProtoGdprConsentModeEnum.Unknown,this.cs={},this.ls="",this.us=!1,this.ds=()=>{!this.ze.isConsentRequired()||this.rs?this.resolveEvent(Y.CONSENT_DATA_UPDATE):(this.gdprConsentMode=this.ze.isConsentApiOnPage()||this.hs?a.ProtoGdprConsentModeEnum.NoConsent:a.ProtoGdprConsentModeEnum.NoCmp,this.ze.bindToConsentApi().then(()=>{this.isConsentConnatix()||(this.gdprConsentMode=a.ProtoGdprConsentModeEnum.NoConnatixConsent),this.resolveEvent(Y.CONSENT_DATA_UPDATE)}).catch(t=>{}))},this.fs=()=>{this.isConsentConnatix()&&(this.onEvent([K.USER_INFO_RECEIVED]).then(()=>{this.us&&(this.ps.syncThirdPartyCookieList(),this.ps.unsecuredCookieSync&&this.ps.syncThirdPartyCookieList(this.ps.unsecuredCookieSync),this.ps.syncFirstPartyCookie(d.USER_ID))}),this.onEvent([K.SYNC_URLS_RECEIVED,Y.CONSENT_DATA_UPDATE,Y.CCPA_INFO_RECEIVED]).then(()=>{if(this.isConsentConnatix()&&this.bs.isSellUserAllowed())try{this.vs.syncUrls(this.le.userId,this.le.getScope())}catch(t){Object(p.a)({level:a.ProtoLoggingLevelEnum.WARNING,message:"UserManager_syncUrls",exception:t.message,callStack:t.stack})}}))};try{this.le=u.getInstance(t),this.rs||(this.ps=new v(this.le,t));const{cmp:i,tcf:e}=this._appSettings;this.ze=new D(!!this.ls,t,{cmp:i,tcf:e}),this.vs=new G(this.ze,this.isGDPR()),this.bs=new X(this.le,this._appSettings.usPrivacyString),this.ms()}catch(t){Object(p.a)({callStack:t.stack,exception:t.message,message:"UserManager_constructor",level:a.ProtoLoggingLevelEnum.FATAL})}}ms(){this.ps&&this.ps.fetchCookies(),this.ds(),this.onEvent([Y.CONSENT_DATA_UPDATE]).then(()=>{setTimeout(()=>{try{if(this.rs)return;this.fs()}catch(t){Object(p.a)({callStack:t.stack,exception:t.message,message:"UserManager_consent_data_received",level:a.ProtoLoggingLevelEnum.FATAL})}},0)})}gs(t){return void 0===this.cs[t]&&(this.cs[t]=new J.a,this.cs[t].promise.catch(()=>this.cs[t].reject())),this.cs[t]}resolveEvent(t,i){this.gs(t).resolve(i)}setAmpUserConsent(t){this.ze.setAmpUserConsent(t),this.resolveEvent(Y.CONSENT_DATA_UPDATE)}setPageUrl(t){this.ze&&this.ze.setPageUrl(t)}onEvent(t){const i=t.map(t=>this.gs(t).promise);return Promise.all(i)}isConsent(t,i){return this.ze.isConsent(t,i)}isConsentConnatix(){return this.ze.isConsentConnatix()}getConsentPayload(){return this.ze.getConsentDataPayload()}isConsentRequired(){return this.ze.isConsentRequired()}setThirdPartySyncUrls(t){this.rs||this.vs.setSyncUrls(t)&&this.resolveEvent(K.SYNC_URLS_RECEIVED)}setGeoLocation(t){this.bs.setGeoLocation(t),this.bs.fetchUsPrivacyString().then(()=>{this.resolveEvent(Y.CCPA_INFO_RECEIVED)}).catch(()=>{this.resolveEvent(Y.CCPA_INFO_RECEIVED)})}getUserId(){if(this.isConsentConnatix()&&this.ps)return this.ps.getUserId()}ys(){return this.ps&&this.ps.getUserId()}setUserInformation(t){this.ps&&(this.ps.setUserInformation(t),this.resolveEvent(K.USER_INFO_RECEIVED),!this.rs&&this.isConsentConnatix()&&this.ps.syncFirstPartyCookie(d.USER_ID))}isGDPR(){return!!this.ls}getUsPrivacyString(){return this.bs.getUsPrivacyString()}isCcpaApplicable(){return this.bs.isCcpaApplicable()}isSellUserAllowed(){return this.rs||this.bs.isSellUserAllowed()}getDeviceId(){if(this.isConsentConnatix())return this._appSettings.deviceID}ws(){return this._appSettings.deviceID}getTrackableUser(){return this.rs?this.getDeviceId():this.getUserId()}getForcedTrackableUser(){return this.rs?this.ws():this.ys()}registerPlsCall(t){return this.isConsentConnatix()||(this.us=!0),this.le.registerPlsCall(t)}setBrowserInfo(t){this.ps&&this.ps.setBrowserInfo(t,this.isConsentConnatix())}getGdprConsentApiType(){return this.ze.getConsentApiType()}}},function(t,i,e){"use strict";var s,n;e.d(i,"a",function(){return r}),function(t){t.hidden="hidden",t.msHidden="msHidden",t.webkitHidden="webkitHidden"}(s||(s={})),function(t){t.visibilitychange="visibilitychange",t.msvisibilitychange="msvisibilitychange",t.webkitvisibilitychange="webkitvisibilitychange"}(n||(n={}));class r{constructor(t){this.ks=t,this.Ss=[],this.Os(),this._s()}on(t){this.Ss.push(t),t(this.isDocumentVisible())}off(t){this.Ss=this.Ss.filter(i=>i!==t)}Os(){void 0!==this.ks.getDocumentProperty(s.hidden)?(this.js=s.hidden,this.As=n.visibilitychange):void 0!==this.ks.getDocumentProperty(s.msHidden)?(this.js=s.msHidden,this.As=n.msvisibilitychange):void 0!==this.ks.getDocumentProperty(s.webkitHidden)&&(this.js=s.webkitHidden,this.As=n.webkitvisibilitychange)}_s(){this.ks.addEventListenerOnGlobal(this.As,()=>{this.Ss.forEach(t=>{t(this.isDocumentVisible())})},!0,!1)}isDocumentVisible(){return!this.ks.getDocumentProperty(this.js)}}},function(t,i,e){"use strict";e.d(i,"a",function(){return s}),e.d(i,"b",function(){return r});var s,n=e(0);!function(t){t[t.PreRoll=0]="PreRoll",t[t.MidRoll=1]="MidRoll",t[t.PostRoll=2]="PostRoll",t[t.Standalone=3]="Standalone"}(s||(s={}));const r={[n.ProtoAdSlotsEnum.PreRoll]:s.PreRoll,[n.ProtoAdSlotsEnum.MidRoll]:s.MidRoll,[n.ProtoAdSlotsEnum.PostRoll]:s.PostRoll}},function(t,i,e){"use strict";e.d(i,"a",function(){return o});var s=e(0),n=e(7),r=e(5),a=e(2),h=e(25);class o{constructor(t,i){this.Is=t,this.Ts=i,this.Cs=t=>new Promise((i,e)=>{h.a.sendProtoRequest({ProtoResponse:this.Is,endpoint:t,requestType:"GET",logError:!0}).then(t=>{i(t)}).catch(t=>{e(t)})})}fetchMetadata(t,i=5){return new Promise((e,s)=>{Object(n.k)(()=>this.Cs(t),i).then(i=>{if(Object(a.f)(i))return e(i);const n=new Error("invalid metadata");return this.Ps({url:t,metadata:i,e:n}),s(n)}).catch(i=>{this.Ps({url:t,e:i}),s(i)})})}Ps(t){var i;const e=Object(a.h)(null===(i=t.e)||void 0===i?void 0:i.message)?t.e.message:"";-1===e.indexOf("XhrUtils_XMLHttpRequest_error")&&Object(r.a)({message:"MediaMetadataHandler_fetchMetadata",exception:`${this.Ts}_${e}:${JSON.stringify(t)}`,callStack:t.e&&t.e.stack,level:s.ProtoLoggingLevelEnum.FATAL})}}},function(t,i,e){"use strict";e.d(i,"a",function(){return s});const s="//securepubads.g.doubleclick.net/tag/js/gpt.js"},function(t,i){t.exports='<cnx class="cnx-icon-button cnx-button-settings cnx-context-controller cnx-ui-btn-hoverable"> <cnx class=cnx-btn-container> <cnx class=cnx-settings-icon> <svg markup-inline class=cnx-color-icon xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink viewBox="0 0 22 22"><path d="M18.454 5.847l-2.642 1.05-1.03-.784c-.444-.338-.904-.603-1.39-.8l-1.205-.488-.404-2.786h-1.563l-.404 2.786-1.205.488c-.465.188-.93.46-1.413.817L6.17 6.9 3.546 5.847l-.783 1.34 2.232 1.727-.16 1.266c-.042.33-.062.59-.062.82s.02.49.062.82l.16 1.266-2.233 1.727.783 1.34 2.642-1.05 1.03.784c.444.338.904.603 1.39.8l1.205.488.404 2.786h1.563l.404-2.786 1.205-.488c.465-.188.93-.46 1.413-.817l1.025-.76 2.625 1.043.783-1.34-2.233-1.727.16-1.266c.043-.337.062-.584.062-.82s-.02-.483-.062-.82l-.16-1.266 2.233-1.727-.783-1.34zm.71 6.227l2.32 1.81c.21.164.264.46.132.702l-2.198 3.793c-.132.24-.418.34-.67.24l-2.736-1.096c-.57.427-1.187.8-1.857 1.074l-.418 2.905c-.033.263-.264.46-.538.46H8.802c-.275 0-.506-.197-.538-.46l-.418-2.905c-.67-.274-1.286-.636-1.857-1.074l-2.736 1.096c-.242.088-.538 0-.67-.24L.385 14.584c-.132-.24-.077-.537.132-.702l2.32-1.81A8.67 8.67 0 0 1 2.758 11a8.67 8.67 0 0 1 .077-1.074l-2.32-1.81a.54.54 0 0 1-.132-.702l2.198-3.793c.132-.24.418-.34.67-.24L5.99 4.478c.57-.427 1.187-.8 1.857-1.074L8.264.5c.033-.263.264-.46.538-.46h4.396c.275 0 .506.197.538.46l.418 2.905c.67.274 1.286.636 1.857 1.074l2.736-1.096c.242-.088.538 0 .67.24l2.198 3.793c.132.24.077.537-.132.702l-2.32 1.81A8.52 8.52 0 0 1 19.242 11a8.52 8.52 0 0 1-.077 1.074zM11 14.256A3.26 3.26 0 0 0 14.256 11 3.26 3.26 0 0 0 11 7.744 3.26 3.26 0 0 0 7.744 11 3.26 3.26 0 0 0 11 14.256zm0-2A1.26 1.26 0 0 1 9.744 11 1.26 1.26 0 0 1 11 9.744 1.26 1.26 0 0 1 12.256 11 1.26 1.26 0 0 1 11 12.256z"/></svg> </cnx> <cnx class=cnx-hd-flag> <svg markup-inline xmlns=http://www.w3.org/2000/svg viewBox="0 0 17 11"><g fill=none><rect class=cnx-color-accent width=17 height=11 rx=2 fill=#09F /><path class=cnx-color-icon d="M8 9L6.9 9 6.9 5.9 4.1 5.9 4.1 9 3 9 3 2 4.1 2 4.1 4.9 6.9 4.9 6.9 2 8 2 8 9ZM10 9L10 2 12 2C12.6 2 13.1 2.2 13.6 2.4 14 2.7 14.4 3.1 14.6 3.6 14.9 4.1 15 4.7 15 5.3L15 5.7C15 6.4 14.9 6.9 14.6 7.4 14.4 7.9 14 8.3 13.5 8.6 13.1 8.9 12.5 9 11.9 9L10 9ZM11 3L11 8 12.2 8C12.8 8 13.2 7.8 13.5 7.4 13.8 7 14 6.4 14 5.7L14 5.3C14 4.6 13.8 4 13.5 3.6 13.2 3.2 12.8 3 12.2 3L11 3Z"/></g></svg> </cnx> </cnx> </cnx> '},function(t,i){t.exports='<cnx class="cnx-icon-button cnx-button-caption cnx-ui-btn-hoverable"> <cnx class=cnx-btn-container> <cnx class=cnx-caption-off-icon> <svg markup-inline class=cnx-color-icon xmlns=http://www.w3.org/2000/svg viewBox="0 0 24 24"><path d="M20.556 5H3.444C3.163 5 3 5.15 3 5.25v13.5c0 .1.163.25.444.25h17.11c.275 0 .444-.156.444-.25V5.25c0-.094-.17-.25-.444-.25zm0-2C21.9 3 23 4.013 23 5.25v13.5c0 1.238-1.1 2.25-2.444 2.25H3.444C2.088 21 1 19.988 1 18.75V5.25C1 4.013 2.088 3 3.444 3h17.11zM11 11H9.5v-.5h-2v3h2V13H11v1c0 .55-.45 1-1 1H7c-.55 0-1-.45-1-1v-4c0-.55.45-1 1-1h3c.55 0 1 .45 1 1v1zm7 0h-1.5v-.5h-2v3h2V13H18v1c0 .55-.45 1-1 1h-3c-.55 0-1-.45-1-1v-4c0-.55.45-1 1-1h3c.55 0 1 .45 1 1v1z" fill-rule=evenodd /></svg> </cnx> <cnx class=cnx-caption-on-icon> <svg markup-inline class=cnx-color-icon xmlns=http://www.w3.org/2000/svg viewBox="0 0 24 24"><g fill=none><path d="M20.6 3C21.9 3 23 4 23 5.3L23 18.8C23 20 21.9 21 20.6 21L3.4 21C2.1 21 1 20 1 18.8L1 5.3C1 4 2.1 3 3.4 3L20.6 3Z" class=cnx-color-accent /><path d="M11 11L9.5 11 9.5 10.5 7.5 10.5 7.5 13.5 9.5 13.5 9.5 13 11 13 11 14C11 14.6 10.6 15 10 15L7 15C6.5 15 6 14.6 6 14L6 10C6 9.5 6.5 9 7 9L10 9C10.6 9 11 9.5 11 10L11 11ZM18 11L16.5 11 16.5 10.5 14.5 10.5 14.5 13.5 16.5 13.5 16.5 13 18 13 18 14C18 14.6 17.6 15 17 15L14 15C13.5 15 13 14.6 13 14L13 10C13 9.5 13.5 9 14 9L17 9C17.6 9 18 9.5 18 10L18 11Z" class=cnx-color-icon /></g></svg> </cnx> </cnx> </cnx> '},function(t,i){t.exports='<cnx class="cnx-progress-bar cnx-video-progress"> <cnx class=cnx-progress-rail-container> <cnx class=cnx-progress-rail></cnx> <cnx class="cnx-progress-fill cnx-color-accent"></cnx> <cnx class=cnx-progress-follow></cnx> </cnx> <cnx class="cnx-progress-handle cnx-color-accent"></cnx> <cnx class=cnx-progress-hitarea></cnx> </cnx> '},function(t,i){t.exports='<cnx class=cnx-ui-loader> <svg class=cnx-color-accent version=1.1 viewBox="0 0 79 90" xmlns=http://www.w3.org/2000/svg><polygon points="21 73.322 11 79 11 12 21 17.678" fill=none stroke-linecap=round stroke-linejoin=round /><polygon points="27 70 27 21 38 27.267 38 63.733" fill=transparent stroke-linecap=round stroke-linejoin=round /><polygon points="44 61 44 31 54 36.769 54 55.231" fill=none stroke-linecap=round stroke-linejoin=round /><polygon points="60 51 60 40 70 45.5" fill=none stroke-linecap=round stroke-linejoin=round /></svg> </cnx> '},function(t,i){t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 14" fill-rule="evenodd"><path d="M21.886 14H2.114C.97 14 0 13.008 0 11.842V2.158C0 .992.97 0 2.114 0H21.83C23.03 0 24 .992 24 2.158v9.625C24 13.008 23.03 14 21.886 14z" fill="#ffc800"></path><path d="M14 3h1.49c.866 0 3.51.868 3.51 4 0 3.046-2.328 4-3.51 4H13V3h1zm0 1.006v6.04h1.49C16.7 10.046 18.026 9 18.026 7s-1.322-2.994-2.535-2.994H14zM10.18 9H6.816L6.1 11H5l3.005-7.987L8 3h.963l-.005.013L12.006 11h-1.1l-.726-2zm-.363-1l-1.33-3.665L7.174 8h2.643z" fill="#000"></path></svg>'},function(t,i){t.exports='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 27 20" version="1.1"><path d="M3.07619048,0 C1.37619048,0 0,1.41666667 0,3.08333333 L0,16.8333333 C0,18.5833333 1.37619048,20 2.9952381,20 L27,20 L27,0 L3.07619048,0 Z" fill="#FFC800"></path><path d="M9.61385787,4.28571429 L9.606,4.30471429 L13.9249985,15.7142857 L12.3665146,15.7142857 L11.337,12.8567143 L6.572,12.8567143 L5.55848393,15.7142857 L4,15.7142857 L8.256,4.30471429 L8.25,4.28571429 L9.61385787,4.28571429 Z M15.3333333,15.7142857 L15.3333333,4.28571429 L18.8623641,4.28571429 L18.8623641,4.28571429 C20.0898911,4.28571429 23.8333333,5.52590267 23.8333333,10 C23.8333333,14.3513179 20.5347016,15.7142857 18.8623641,15.7142857 L15.3333333,15.7142857 Z M16.749,14.3507143 L18.8623641,14.3513179 L18.8623641,14.3513179 C20.5749549,14.3513179 22.4529227,12.8571429 22.4529227,10 C22.4529227,7.14285714 20.5795594,5.72298834 18.8623641,5.72298834 L16.749,5.72271429 L16.749,14.3507143 Z M8.936,6.19271429 L7.079,11.4277143 L10.822,11.4277143 L8.936,6.19271429 Z" fill="#000000"></path></svg>'},function(t,i,e){"use strict";t.exports=e(136)},function(t,i,e){"use strict";Object.defineProperty(i,"_",{value:!0});var s=e(37),n=function(){function t(){}var i,e,n,r,a,h,o,c,l,u,d,f,p,b,v,m,g,y;return i=s.Fields.cmpId,e=s.Fields.cmpVersion,n=s.Fields.consentLanguage,r=s.Fields.consentScreen,a=s.Fields.created,h=s.Fields.isServiceSpecific,o=s.Fields.lastUpdated,c=s.Fields.policyVersion,l=s.Fields.publisherCountryCode,u=s.Fields.publisherLegitimateInterests,d=s.Fields.publisherConsents,f=s.Fields.purposeConsents,p=s.Fields.purposeLegitimateInterests,b=s.Fields.purposeOneTreatment,v=s.Fields.specialFeatureOptins,m=s.Fields.useNonStandardStacks,g=s.Fields.vendorListVersion,y=s.Fields.version,t[i]=12,t[e]=12,t[n]=12,t[r]=6,t[a]=36,t[h]=1,t[o]=36,t[c]=6,t[l]=12,t[u]=24,t[d]=24,t[f]=24,t[p]=24,t[b]=1,t[v]=12,t[m]=1,t[g]=12,t[y]=6,t.anyBoolean=1,t.encodingType=1,t.maxId=16,t.numCustomPurposes=6,t.numEntries=12,t.numRestrictions=12,t.purposeId=6,t.restrictionType=2,t.segmentType=3,t.singleOrRange=1,t.vendorId=16,t}();i.BitLength=n},function(t,i,e){"use strict";var s;Object.defineProperty(i,"_",{value:!0}),(s=i.RestrictionType||(i.RestrictionType={}))[s.NOT_ALLOWED=0]="NOT_ALLOWED",s[s.REQUIRE_CONSENT=1]="REQUIRE_CONSENT",s[s.REQUIRE_LI=2]="REQUIRE_LI"},function(t,i,e){"use strict";Object.defineProperty(i,"_",{value:!0});var s=e(47),n=e(35),r=e(37),a=function(){function t(){}return t.encode=function(t,i){for(var e="",n=1;n<=i;n++)e+=s.BooleanEncoder.encode(t.has(n));return e},t.decode=function(t,i){if(t.length!==i)throw new n.DecodingError("bitfield encoding length mismatch");for(var e=new r.Vector,a=1;a<=i;a++)s.BooleanEncoder.decode(t[a-1])&&e.set(a);return e.bitLength=t.length,e},t}();i.FixedVectorEncoder=a},function(t,i){t.exports='<svg class="cnx-color-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 21h3V3h-3v18zM3 21l14-9L3 3v18z" fill-rule="evenodd"></path></svg>'},function(t,i){t.exports='<svg class="cnx-color-icon" xmlns="http://www.w3.org/2000/svg"><path d="M8.6 16.6l4.58-4.6L8.6 7.4 10 6l6 6-6 6-1.4-1.4z"></path></svg>'},function(t,i){t.exports='<svg class="cnx-color-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4.6 3H10v2H5v5H3V4.6A1.58 1.58 0 0 1 4.6 3zM5 14v5h5v2H4.6A1.58 1.58 0 0 1 3 19.4V14h2zM19.4 3A1.58 1.58 0 0 1 21 4.6V10h-2V5h-5V3h5.4zM19 14h2v5.4a1.58 1.58 0 0 1-1.6 1.6H14v-2h5v-5z" fill-rule="evenodd"></path></svg>'},function(t,i){t.exports='<svg class="cnx-color-icon" xmlns="http://www.w3.org/2000/svg"><g stroke-width="3" viewBox="0 0 32 32"><circle class="cnx-svg-circle-stroke" cx="16" cy="17" r="14"></circle></g></svg>'},function(t,i){t.exports='<svg xmlns="http://www.w3.org/2000/svg" class="cnx-color-accent cnx-quote-icon" viewBox="0 0 13 10"><path d="M7 6.9C7 6.2 7.1 5.5 7.3 4.7 7.5 4 7.9 3.4 8.4 2.8 8.8 2.2 9.5 1.7 10.2 1.2 11 0.7 11.9 0.3 13 0L13 1.5C11.8 1.9 10.9 2.3 10.4 2.8 9.8 3.4 9.5 4 9.5 4.7 9.5 4.9 9.6 5.1 9.7 5.2 9.9 5.4 10 5.5 10.2 5.7 10.4 5.8 10.6 5.9 10.9 6 11.1 6.1 11.3 6.3 11.5 6.4 11.7 6.6 11.9 6.8 12 7 12.1 7.3 12.2 7.6 12.2 7.9 12.2 8.6 12 9.1 11.5 9.5 11.1 9.8 10.5 10 9.8 10 9.5 10 9.1 9.9 8.8 9.8 8.4 9.7 8.1 9.5 7.8 9.2 7.6 9 7.4 8.6 7.2 8.2 7.1 7.9 7 7.4 7 6.9ZM0 6.9C0 6.2 0.1 5.5 0.3 4.7 0.5 4 0.9 3.4 1.4 2.8 1.8 2.2 2.5 1.7 3.2 1.2 4 0.7 4.9 0.3 6 0L6 1.5C4.8 1.9 3.9 2.3 3.4 2.8 2.8 3.4 2.5 4 2.5 4.7 2.5 4.9 2.6 5.1 2.7 5.2 2.8 5.4 3 5.5 3.2 5.7 3.4 5.8 3.6 5.9 3.9 6 4.1 6.1 4.3 6.3 4.5 6.4 4.7 6.6 4.9 6.8 5 7 5.1 7.3 5.2 7.6 5.2 7.9 5.2 8.6 5 9.1 4.5 9.5 4.1 9.8 3.5 10 2.8 10 2.4 10 2.1 9.9 1.7 9.8 1.4 9.7 1.1 9.5 0.8 9.2 0.6 9 0.4 8.6 0.2 8.2 0.1 7.9 0 7.4 0 6.9Z"></path></svg>'},function(t,i,e){"use strict";t.exports=u;var s,n=e(41),r=n.LongBits,a=n.base64,h=n.utf8;function o(t,i,e){this.fn=t,this.len=i,this.next=void 0,this.val=e}function c(){}function l(t){this.head=t.head,this.tail=t.tail,this.len=t.len,this.next=t.states}function u(){this.len=0,this.head=new o(c,0,0),this.tail=this.head,this.states=null}function d(t,i,e){i[e]=255&t}function f(t,i){this.len=t,this.next=void 0,this.val=i}function p(t,i,e){for(;t.hi;)i[e++]=127&t.lo|128,t.lo=(t.lo>>>7|t.hi<<25)>>>0,t.hi>>>=7;for(;t.lo>127;)i[e++]=127&t.lo|128,t.lo=t.lo>>>7;i[e++]=t.lo}function b(t,i,e){i[e]=255&t,i[e+1]=t>>>8&255,i[e+2]=t>>>16&255,i[e+3]=t>>>24}u.create=n.Buffer?function(){return(u.create=function(){return new s})()}:function(){return new u},u.alloc=function(t){return new n.Array(t)},n.Array!==Array&&(u.alloc=n.pool(u.alloc,n.Array.prototype.subarray)),u.prototype.Es=function(t,i,e){return this.tail=this.tail.next=new o(t,i,e),this.len+=i,this},f.prototype=Object.create(o.prototype),f.prototype.fn=function(t,i,e){for(;t>127;)i[e++]=127&t|128,t>>>=7;i[e]=t},u.prototype.uint32=function(t){return this.len+=(this.tail=this.tail.next=new f((t>>>=0)<128?1:t<16384?2:t<2097152?3:t<268435456?4:5,t)).len,this},u.prototype.int32=function(t){return t<0?this.Es(p,10,r.fromNumber(t)):this.uint32(t)},u.prototype.sint32=function(t){return this.uint32((t<<1^t>>31)>>>0)},u.prototype.uint64=function(t){var i=r.from(t);return this.Es(p,i.length(),i)},u.prototype.int64=u.prototype.uint64,u.prototype.sint64=function(t){var i=r.from(t).zzEncode();return this.Es(p,i.length(),i)},u.prototype.bool=function(t){return this.Es(d,1,t?1:0)},u.prototype.fixed32=function(t){return this.Es(b,4,t>>>0)},u.prototype.sfixed32=u.prototype.fixed32,u.prototype.fixed64=function(t){var i=r.from(t);return this.Es(b,4,i.lo).Es(b,4,i.hi)},u.prototype.sfixed64=u.prototype.fixed64,u.prototype.float=function(t){return this.Es(n.float.writeFloatLE,4,t)},u.prototype.double=function(t){return this.Es(n.float.writeDoubleLE,8,t)};var v=n.Array.prototype.set?function(t,i,e){i.set(t,e)}:function(t,i,e){for(var s=0;s<t.length;++s)i[e+s]=t[s]};u.prototype.bytes=function(t){var i=t.length>>>0;if(!i)return this.Es(d,1,0);if(n.isString(t)){var e=u.alloc(i=a.length(t));a.decode(t,e,0),t=e}return this.uint32(i).Es(v,i,t)},u.prototype.string=function(t){var i=h.length(t);return i?this.uint32(i).Es(h.write,i,t):this.Es(d,1,0)},u.prototype.fork=function(){return this.states=new l(this),this.head=this.tail=new o(c,0,0),this.len=0,this},u.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new o(c,0,0),this.len=0),this},u.prototype.ldelim=function(){var t=this.head,i=this.tail,e=this.len;return this.reset().uint32(e),e&&(this.tail.next=t.next,this.tail=i,this.len+=e),this},u.prototype.finish=function(){for(var t=this.head.next,i=this.constructor.alloc(this.len),e=0;t;)t.fn(t.val,i,e),e+=t.len,t=t.next;return i},u.te=function(t){s=t}},function(t,i){var e;e=function(){return this}();try{e=e||new Function("return this")()}catch(t){"object"==typeof window&&(e=window)}t.exports=e},function(t,i,e){"use strict";t.exports=o;var s,n=e(41),r=n.LongBits,a=n.utf8;function h(t,i){return RangeError("index out of range: "+t.pos+" + "+(i||1)+" > "+t.len)}function o(t){this.buf=t,this.pos=0,this.len=t.length}var c,l="undefined"!=typeof Uint8Array?function(t){if(t instanceof Uint8Array||Array.isArray(t))return new o(t);throw Error("illegal buffer")}:function(t){if(Array.isArray(t))return new o(t);throw Error("illegal buffer")};function u(){var t=new r(0,0),i=0;if(!(this.len-this.pos>4)){for(;i<3;++i){if(this.pos>=this.len)throw h(this);if(t.lo=(t.lo|(127&this.buf[this.pos])<<7*i)>>>0,this.buf[this.pos++]<128)return t}return t.lo=(t.lo|(127&this.buf[this.pos++])<<7*i)>>>0,t}for(;i<4;++i)if(t.lo=(t.lo|(127&this.buf[this.pos])<<7*i)>>>0,this.buf[this.pos++]<128)return t;if(t.lo=(t.lo|(127&this.buf[this.pos])<<28)>>>0,t.hi=(t.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return t;if(i=0,this.len-this.pos>4){for(;i<5;++i)if(t.hi=(t.hi|(127&this.buf[this.pos])<<7*i+3)>>>0,this.buf[this.pos++]<128)return t}else for(;i<5;++i){if(this.pos>=this.len)throw h(this);if(t.hi=(t.hi|(127&this.buf[this.pos])<<7*i+3)>>>0,this.buf[this.pos++]<128)return t}throw Error("invalid varint encoding")}function d(t,i){return(t[i-4]|t[i-3]<<8|t[i-2]<<16|t[i-1]<<24)>>>0}function f(){if(this.pos+8>this.len)throw h(this,8);return new r(d(this.buf,this.pos+=4),d(this.buf,this.pos+=4))}o.create=n.Buffer?function(t){return(o.create=function(t){return n.Buffer.isBuffer(t)?new s(t):l(t)})(t)}:l,o.prototype.Ls=n.Array.prototype.subarray||n.Array.prototype.slice,o.prototype.uint32=(c=4294967295,function(){if(c=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return c;if(c=(c|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return c;if(c=(c|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return c;if(c=(c|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return c;if(c=(c|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return c;if((this.pos+=5)>this.len)throw this.pos=this.len,h(this,10);return c}),o.prototype.int32=function(){return 0|this.uint32()},o.prototype.sint32=function(){var t=this.uint32();return t>>>1^-(1&t)|0},o.prototype.bool=function(){return 0!==this.uint32()},o.prototype.fixed32=function(){if(this.pos+4>this.len)throw h(this,4);return d(this.buf,this.pos+=4)},o.prototype.sfixed32=function(){if(this.pos+4>this.len)throw h(this,4);return 0|d(this.buf,this.pos+=4)},o.prototype.float=function(){if(this.pos+4>this.len)throw h(this,4);var t=n.float.readFloatLE(this.buf,this.pos);return this.pos+=4,t},o.prototype.double=function(){if(this.pos+8>this.len)throw h(this,4);var t=n.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,t},o.prototype.bytes=function(){var t=this.uint32(),i=this.pos,e=this.pos+t;if(e>this.len)throw h(this,t);return this.pos+=t,Array.isArray(this.buf)?this.buf.slice(i,e):i===e?new this.buf.constructor(0):this.Ls.call(this.buf,i,e)},o.prototype.string=function(){var t=this.bytes();return a.read(t,0,t.length)},o.prototype.skip=function(t){if("number"==typeof t){if(this.pos+t>this.len)throw h(this,t);this.pos+=t}else do{if(this.pos>=this.len)throw h(this)}while(128&this.buf[this.pos++]);return this},o.prototype.skipType=function(t){switch(t){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(t=7&this.uint32());)this.skipType(t);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+t+" at offset "+this.pos)}return this},o.te=function(t){s=t;var i=n.Long?"toLong":"toNumber";n.merge(o.prototype,{int64:function(){return u.call(this)[i](!1)},uint64:function(){return u.call(this)[i](!0)},sint64:function(){return u.call(this).zzDecode()[i](!1)},fixed64:function(){return f.call(this)[i](!0)},sfixed64:function(){return f.call(this)[i](!1)}})}},function(t,i,e){"use strict";function s(t){for(var e in t)i.hasOwnProperty(e)||(i[e]=t[e])}Object.defineProperty(i,"_",{value:!0}),s(e(74)),s(e(62)),s(e(158)),s(e(162)),s(e(79)),s(e(85))},function(t,i,e){"use strict";Object.defineProperty(i,"_",{value:!0});var s=e(35),n=function(){function t(){}return t.encode=function(t){if(!/^[0-1]+$/.test(t))throw new s.EncodingError("Invalid bitField");var i=t.length%this.LCM;t+=i?"0".repeat(this.LCM-i):"";for(var e="",n=0;n<t.length;n+=this.BASIS)e+=this.DICT[parseInt(t.substr(n,this.BASIS),2)];return e},t.decode=function(t){if(!/^[A-Za-z0-9\-_]+$/.test(t))throw new s.DecodingError("Invalidly encoded Base64URL string");for(var i="",e=0;e<t.length;e++){var n=this.REVERSE_DICT.get(t[e]).toString(2);i+="0".repeat(this.BASIS-n.length)+n}return i},t.DICT="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",t.REVERSE_DICT=new Map([["A",0],["B",1],["C",2],["D",3],["E",4],["F",5],["G",6],["H",7],["I",8],["J",9],["K",10],["L",11],["M",12],["N",13],["O",14],["P",15],["Q",16],["R",17],["S",18],["T",19],["U",20],["V",21],["W",22],["X",23],["Y",24],["Z",25],["a",26],["b",27],["c",28],["d",29],["e",30],["f",31],["g",32],["h",33],["i",34],["j",35],["k",36],["l",37],["m",38],["n",39],["o",40],["p",41],["q",42],["r",43],["s",44],["t",45],["u",46],["v",47],["w",48],["x",49],["y",50],["z",51],["0",52],["1",53],["2",54],["3",55],["4",56],["5",57],["6",58],["7",59],["8",60],["9",61],["-",62],["_",63]]),t.BASIS=6,t.LCM=24,t}();i.Base64Url=n},function(t,i,e){"use strict";var s,n=this&&this.Rs||(s=function(t,i){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)i.hasOwnProperty(e)&&(t[e]=i[e])})(t,i)},function(t,i){function e(){this.constructor=t}s(t,i),t.prototype=null===i?Object.create(i):(e.prototype=i.prototype,new e)});Object.defineProperty(i,"_",{value:!0});var r=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.root=null,i}return n(i,t),i.prototype.isEmpty=function(){return!this.root},i.prototype.add=function(t){var i,e={value:t,left:null,right:null};if(this.isEmpty())this.root=e;else for(i=this.root;;)if(t<i.value){if(null===i.left){i.left=e;break}i=i.left}else{if(!(t>i.value))break;if(null===i.right){i.right=e;break}i=i.right}},i.prototype.get=function(){for(var t=[],i=this.root;i;)if(i.left){for(var e=i.left;e.right&&e.right!=i;)e=e.right;e.right==i?(e.right=null,t.push(i.value),i=i.right):(e.right=i,i=i.left)}else t.push(i.value),i=i.right;return t},i.prototype.contains=function(t){for(var i=!1,e=this.root;e;){if(e.value===t){i=!0;break}t>e.value?e=e.right:t<e.value&&(e=e.left)}return i},i.prototype.min=function(t){var i;for(void 0===t&&(t=this.root);t;)t.left?t=t.left:(i=t.value,t=null);return i},i.prototype.max=function(t){var i;for(void 0===t&&(t=this.root);t;)t.right?t=t.right:(i=t.value,t=null);return i},i.prototype.remove=function(t,i){void 0===i&&(i=this.root);for(var e=null,s="left";i;)if(t<i.value)e=i,i=i.left,s="left";else if(t>i.value)e=i,i=i.right,s="right";else{if(i.left||i.right)if(i.left)if(i.right){var n=this.min(i.right);this.remove(n,i.right),i.value=n}else e?e[s]=i.left:this.root=i.left;else e?e[s]=i.right:this.root=i.right;else e?e[s]=null:this.root=null;i=null}},i}(e(43).Cloneable);i.BinarySearchTree=r},function(t,i,e){"use strict";Object.defineProperty(i,"_",{value:!0});var s=function(){function t(){}return t.cmpId="cmpId",t.cmpVersion="cmpVersion",t.consentLanguage="consentLanguage",t.consentScreen="consentScreen",t.created="created",t.supportOOB="supportOOB",t.isServiceSpecific="isServiceSpecific",t.lastUpdated="lastUpdated",t.numCustomPurposes="numCustomPurposes",t.policyVersion="policyVersion",t.publisherCountryCode="publisherCountryCode",t.publisherCustomConsents="publisherCustomConsents",t.publisherCustomLegitimateInterests="publisherCustomLegitimateInterests",t.publisherLegitimateInterests="publisherLegitimateInterests",t.publisherConsents="publisherConsents",t.publisherRestrictions="publisherRestrictions",t.purposeConsents="purposeConsents",t.purposeLegitimateInterests="purposeLegitimateInterests",t.purposeOneTreatment="purposeOneTreatment",t.specialFeatureOptins="specialFeatureOptins",t.useNonStandardStacks="useNonStandardStacks",t.vendorConsents="vendorConsents",t.vendorLegitimateInterests="vendorLegitimateInterests",t.vendorListVersion="vendorListVersion",t.vendorsAllowed="vendorsAllowed",t.vendorsDisclosed="vendorsDisclosed",t.version="version",t}();i.Fields=s},function(t,i,e){"use strict";var s,n=this&&this.Rs||(s=function(t,i){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)i.hasOwnProperty(e)&&(t[e]=i[e])})(t,i)},function(t,i){function e(){this.constructor=t}s(t,i),t.prototype=null===i?Object.create(i):(e.prototype=i.prototype,new e)});Object.defineProperty(i,"_",{value:!0});var r=e(43),a=e(35),h=e(63),o=function(t){function i(i,e){var s=t.call(this)||this;return void 0!==i&&(s.purposeId=i),void 0!==e&&(s.restrictionType=e),s}return n(i,t),i.unHash=function(t){var e=t.split(this.hashSeparator),s=new i;if(2!==e.length)throw new a.TCModelError("hash",t);return s.purposeId=parseInt(e[0],10),s.restrictionType=parseInt(e[1],10),s},Object.defineProperty(i.prototype,"hash",{get:function(){if(!this.isValid())throw new Error("cannot hash invalid PurposeRestriction");return""+this.purposeId+i.hashSeparator+this.restrictionType},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"purposeId",{get:function(){return this.purposeId_},set:function(t){this.purposeId_=t},enumerable:!0,configurable:!0}),i.prototype.isValid=function(){return Number.isInteger(this.purposeId)&&this.purposeId>0&&(this.restrictionType===h.RestrictionType.NOT_ALLOWED||this.restrictionType===h.RestrictionType.REQUIRE_CONSENT||this.restrictionType===h.RestrictionType.REQUIRE_LI)},i.prototype.isSameAs=function(t){return this.purposeId===t.purposeId&&this.restrictionType===t.restrictionType},i.hashSeparator="-",i}(r.Cloneable);i.PurposeRestriction=o},function(t,i,e){"use strict";var s;Object.defineProperty(i,"_",{value:!0}),(s=i.Segment||(i.Segment={})).CORE="core",s.VENDORS_DISCLOSED="vendorsDisclosed",s.VENDORS_ALLOWED="vendorsAllowed",s.PUBLISHER_TC="publisherTC"},function(t,i,e){"use strict";function s(t){for(var e in t)i.hasOwnProperty(e)||(i[e]=t[e])}Object.defineProperty(i,"_",{value:!0}),s(e(47)),s(e(80)),s(e(159)),s(e(64)),s(e(42)),s(e(81)),s(e(82)),s(e(84)),s(e(83))},function(t,i,e){"use strict";Object.defineProperty(i,"_",{value:!0});var s=e(42),n=e(35),r=function(){function t(){}return t.encode=function(t,i){return s.IntEncoder.encode(Math.round(t.getTime()/100),i)},t.decode=function(t,i){if(i!==t.length)throw new n.DecodingError("invalid bit length");var e=new Date;return e.setTime(100*s.IntEncoder.decode(t,i)),e},t}();i.DateEncoder=r},function(t,i,e){"use strict";Object.defineProperty(i,"_",{value:!0});var s=e(42),n=e(35),r=function(){function t(){}return t.encode=function(t,i){var e=(t=t.toUpperCase()).charCodeAt(0)-65,r=t.charCodeAt(1)-65;if(e<0||e>25||r<0||r>25)throw new n.EncodingError("invalid language code: "+t);if(i%2==1)throw new n.EncodingError("numBits must be even, "+i+" is not valid");return i/=2,s.IntEncoder.encode(e,i)+s.IntEncoder.encode(r,i)},t.decode=function(t,i){if(i!==t.length||t.length%2)throw new n.DecodingError("invalid bit length for language");var e=t.length/2,r=s.IntEncoder.decode(t.slice(0,e),e)+65,a=s.IntEncoder.decode(t.slice(e),e)+65;return String.fromCharCode(r)+String.fromCharCode(a)},t}();i.LangEncoder=r},function(t,i,e){"use strict";Object.defineProperty(i,"_",{value:!0});var s=e(62),n=e(47),r=e(35),a=e(42),h=e(37),o=function(){function t(){}return t.encode=function(t){var i=a.IntEncoder.encode(t.numRestrictions,s.BitLength.numRestrictions);return t.isEmpty()||t.getRestrictions().forEach(function(e){i+=a.IntEncoder.encode(e.purposeId,s.BitLength.purposeId),i+=a.IntEncoder.encode(e.restrictionType,s.BitLength.restrictionType);for(var r=t.getVendors(e),h=r.length,o=0,c=0,l="",u=0;u<h;u++){var d=r[u];if(0===c&&(o++,c=d),u===h-1||r[u+1]>d+1){var f=!(d===c);l+=n.BooleanEncoder.encode(f),l+=a.IntEncoder.encode(c,s.BitLength.vendorId),f&&(l+=a.IntEncoder.encode(d,s.BitLength.vendorId)),c=0}}i+=a.IntEncoder.encode(o,s.BitLength.numEntries),i+=l}),i},t.decode=function(t){var i=0,e=new h.PurposeRestrictionVector,o=a.IntEncoder.decode(t.substr(i,s.BitLength.numRestrictions),s.BitLength.numRestrictions);i+=s.BitLength.numRestrictions;for(var c=0;c<o;c++){var l=a.IntEncoder.decode(t.substr(i,s.BitLength.purposeId),s.BitLength.purposeId);i+=s.BitLength.purposeId;var u=a.IntEncoder.decode(t.substr(i,s.BitLength.restrictionType),s.BitLength.restrictionType);i+=s.BitLength.restrictionType;var d=new h.PurposeRestriction(l,u),f=a.IntEncoder.decode(t.substr(i,s.BitLength.numEntries),s.BitLength.numEntries);i+=s.BitLength.numEntries;for(var p=0;p<f;p++){var b=n.BooleanEncoder.decode(t.substr(i,s.BitLength.anyBoolean));i+=s.BitLength.anyBoolean;var v=a.IntEncoder.decode(t.substr(i,s.BitLength.vendorId),s.BitLength.vendorId);if(i+=s.BitLength.vendorId,b){var m=a.IntEncoder.decode(t.substr(i,s.BitLength.vendorId),s.BitLength.vendorId);if(i+=s.BitLength.vendorId,m<v)throw new r.DecodingError("Invalid RangeEntry: endVendorId "+m+" is less than "+v);for(var g=v;g<=m;g++)e.add(g,d)}else e.add(v,d)}}return e.bitLength=i,e},t}();i.PurposeRestrictionVectorEncoder=o},function(t,i,e){"use strict";Object.defineProperty(i,"_",{value:!0});var s=e(37),n=e(73),r=e(42),a=e(47),h=e(64),o=e(84),c=e(35),l=function(){function t(){}return t.encode=function(t){var i,e=[],s=[],h=r.IntEncoder.encode(t.maxId,n.BitLength.maxId),c="",l=n.BitLength.maxId+n.BitLength.encodingType,u=l+t.maxId,d=2*n.BitLength.vendorId+n.BitLength.singleOrRange+n.BitLength.numEntries,f=l+n.BitLength.numEntries;return t.forEach(function(r,h){c+=a.BooleanEncoder.encode(r),(i=t.maxId>d&&f<u)&&r&&(t.has(h+1)?0===s.length&&(s.push(h),f+=n.BitLength.singleOrRange,f+=n.BitLength.vendorId):(s.push(h),f+=n.BitLength.vendorId,e.push(s),s=[]))}),i?(h+=o.VectorEncodingType.RANGE+"",h+=this.buildRangeEncoding(e)):(h+=o.VectorEncodingType.FIELD+"",h+=c),h},t.decode=function(t,i){var e,l=0,u=r.IntEncoder.decode(t.substr(l,n.BitLength.maxId),n.BitLength.maxId);l+=n.BitLength.maxId;var d=r.IntEncoder.decode(t.charAt(l),n.BitLength.encodingType);if(l+=n.BitLength.encodingType,d===o.VectorEncodingType.RANGE){if(e=new s.Vector,1===i){if("1"===t.substr(l,1))throw new c.DecodingError("Unable to decode default consent=1");l++}var f=r.IntEncoder.decode(t.substr(l,n.BitLength.numEntries),n.BitLength.numEntries);l+=n.BitLength.numEntries;for(var p=0;p<f;p++){var b=a.BooleanEncoder.decode(t.charAt(l));l+=n.BitLength.singleOrRange;var v=r.IntEncoder.decode(t.substr(l,n.BitLength.vendorId),n.BitLength.vendorId);if(l+=n.BitLength.vendorId,b){var m=r.IntEncoder.decode(t.substr(l,n.BitLength.vendorId),n.BitLength.vendorId);l+=n.BitLength.vendorId;for(var g=v;g<=m;g++)e.set(g)}else e.set(v)}}else{var y=t.substr(l,u);l+=u,e=h.FixedVectorEncoder.decode(y,u)}return e.bitLength=l,e},t.buildRangeEncoding=function(t){var i=t.length,e=r.IntEncoder.encode(i,n.BitLength.numEntries);return t.forEach(function(t){var i=1===t.length;e+=a.BooleanEncoder.encode(!i),e+=r.IntEncoder.encode(t[0],n.BitLength.vendorId),i||(e+=r.IntEncoder.encode(t[1],n.BitLength.vendorId))}),e},t}();i.VendorVectorEncoder=l},function(t,i,e){"use strict";var s;Object.defineProperty(i,"_",{value:!0}),(s=i.VectorEncodingType||(i.VectorEncodingType={}))[s.FIELD=0]="FIELD",s[s.RANGE=1]="RANGE"},function(t,i,e){"use strict";function s(t){for(var e in t)i.hasOwnProperty(e)||(i[e]=t[e])}Object.defineProperty(i,"_",{value:!0}),s(e(160)),s(e(161))},function(t,i,e){"use strict";Object.defineProperty(i,"_",{value:!0});var s=e(73),n=e(37),r=e(42),a=e(163),h=function(){function t(){}return t.encode=function(t,i){var e,n,r="";return t=s.SemanticPreEncoder.process(t,i),(n=Array.isArray(null===(e=i)||void 0===e?void 0:e.segments)?i.segments:new s.SegmentSequence(t,i)[""+t.version]).forEach(function(i,e){var a="";e<n.length-1&&(a="."),r+=s.SegmentEncoder.encode(t,i)+a}),r},t.decode=function(t,i){var e=t.split("."),h=e.length;i||(i=new a.TCModel);for(var o=0;o<h;o++){var c=e[o],l=s.Base64Url.decode(c.charAt(0)).substr(0,s.BitLength.segmentType),u=n.SegmentIDs.ID_TO_KEY[r.IntEncoder.decode(l,s.BitLength.segmentType).toString()];s.SegmentEncoder.decode(c,i,u)}return i},t}();i.TCString=h},function(t,i,e){"use strict";var s=e(166).decodeConsentString;t.exports={decodeConsentString:s}},function(t,i,e){"use strict";e.d(i,"a",function(){return B});var s=e(0),n=e.n(s),r=e(5),a=e(7),h=e(1),o=e(135),c=e(130),l=e(89),u=e(90),d=e(18),f=e(19),p=e(31),b=e(2),v=e(6),m=e(16),g=e(51),y=e(36),w=e(50),x=e(91),k=e(132),S=e(131),O=e(28),_=e(24),j=e(92),A=e(17),I=e(21),T=e(3),C=e(93),P=e(134),M=e(133),E=e(44),L=e(49);const R="player_instance";class B extends A.a{constructor(t,i,e,s,n,r){super(),this.services=t,this.GLOBAL=i,this.rs=e,this.hs=s,this.Bs=n,this.readyCallback=r,this.Ds={},this.Fs="<cnx-placeholder></cnx-placeholder>",this.$s=100,this.Us=1e3,this.isServerlessMode=!1,this.Vs=!1,this.Ns=[],this.Hs="{{omidVerificationClient}}",this.rs&&this.qs(),this.zs=L.a.detectUsingCSS(this.GLOBAL),this.Ws=Object(h.p)(this.GLOBAL)}Gs(){const t={playerId:this.externalAttributes.playerId,_appSettings:this.externalAttributes._appSettings,settings:{_connatixInternals:this.externalAttributes.settings._connatixInternals,advertising:{},customization:{},rendering:{},plugins:{}}};this.externalAttributes.customParam1&&(t.customParam1=this.externalAttributes.customParam1),this.externalAttributes.customParam2&&(t.customParam2=this.externalAttributes.customParam2),this.externalAttributes.customParam3&&(t.customParam3=this.externalAttributes.customParam3),this.externalAttributes.customParam4&&(t.customParam4=this.externalAttributes.customParam4),this.externalAttributes.customParam5&&(t.customParam5=this.externalAttributes.customParam5),this.externalAttributes.settings.useExternalViewabilityService&&(t.settings.useExternalViewabilityService=this.externalAttributes.settings.useExternalViewabilityService),this.externalAttributes=t}Js(t){const i=this.GLOBAL.frameElement;if(!Object(h.E)(i))return;let e=!0;i&&t&&(e=!1),e?Object(h.v)(i):Object(h.R)(i)}Qs(t,i){try{return this.Ys(t,i)}catch(t){return null}}Ks(t){let i;try{i=eval(t)}catch(e){i=t.replace(/\[(\d+)]/g,":nth-child($1)")}return i}Zs(t,i){const e=this.Qs(t,i);return null===e?new Promise(e=>{setTimeout(()=>{e(this.Zs(t,i))},this.$s)}):Promise.resolve(e)}tn(t,i){const e=this.Ks(t);return Promise.resolve(this.Zs(e,i))}Ys(t,i){let e;return t.split(/(\.cnxEq\(\d+\))/).filter(t=>t).forEach(t=>{e=-1===t.indexOf("cnxEq")?e?e.querySelectorAll(t):Object(h.K)(t,i):this.in(e,t)}),e?(e.hasOwnProperty("length")&&(e=e.length>0?e[0]:null),e):null}in(t,i){const e=/\d+/g.exec(i),s=parseInt(e[0],10);return s>t.length?Object(v.c)(t)[t.length-1]:Object(v.c)(t)[s]}en(){return this.hs?s.ProtoImplementationType.Amp:s.ProtoImplementationType.Web}nn(t,i){const e=Object(a.f)(this.GLOBAL);let s;return s=Object(b.a)(this.externalAttributes.settings.rendering.forceInsertPath)?this.externalAttributes.settings.rendering.forceInsertPath:i.forceInsertPath,new Promise((n,r)=>{let a=Object(h.f)(this.Fs,this.GLOBAL);if(s||t.tag.parentNode===this.GLOBAL.document.head&&(!e.topChildFrame||i.renderInFrame)){let t,s,r;e.topChildFrame&&Object(h.L)(e.topChildFrame.frameElement,T.h.DisplayNone),t=Object(b.h)(this.externalAttributes.settings.rendering.containerSelector)?this.externalAttributes.settings.rendering.containerSelector:i.containerSelector,s=Object(b.a)(this.externalAttributes.settings.rendering.insertPosition)?this.externalAttributes.settings.rendering.insertPosition:i.insertPosition,r=Object(b.a)(this.externalAttributes.settings.rendering.position)?this.externalAttributes.settings.rendering.position:i.position,this.tn(t,e.topFrame).then(t=>{this.rn(t,a,s,r),n({insertContainer:a,insertWindow:e.topFrame})})}else e.topChildFrame&&!i.renderInFrame?(a=Object(h.f)(this.Fs,e.topFrame),e.topChildFrame.frameElement.parentNode.insertBefore(a,e.topChildFrame.frameElement),Object(h.a)(e.topChildFrame.frameElement,T.h.DisplayNone),n({insertContainer:a,insertWindow:e.topFrame})):(t.tag.parentNode.insertBefore(a,t.tag),n({insertContainer:a}))})}an(t,i,e){Object(h.y)(i,t,e)}hn(t,i,e){switch(e){case s.ProtoPlayerInsertMode.BeforeContainer:t.parentElement.insertBefore(i,t);break;case s.ProtoPlayerInsertMode.ReplaceContainer:t.parentElement.insertBefore(i,t),Object(h.M)(t);break;case s.ProtoPlayerInsertMode.HideContainer:t.parentElement.insertBefore(i,t),Object(h.v)(t);break;case s.ProtoPlayerInsertMode.AfterContainer:t.nextElementSibling?t.parentElement.insertBefore(i,t.nextElementSibling):t.parentElement.appendChild(i)}}rn(t,i,e,n){e===s.ProtoPlayerInsertMode.WithinContainer?this.an(t,i,n):this.hn(t,i,e)}cn(t,i=[]){t.lineItems=[...t.lineItems,...i];const e=t.lineItems.length;t.lineItems=Object(v.e)("advertiserLineItemId",t.lineItems),e!==t.lineItems.length&&Object(r.a)({level:s.ProtoLoggingLevelEnum.WARNING,message:"Loader_duplicated_adsources",callStack:"_"})}ln(t,i){const e=t.players[i],{playerModel:n,globalDomUtilsService:a}=this.Ds[i];if(this.zs||this.services.UserManagerService.setThirdPartySyncUrls(t.cookieSyncUrls),this.services.UserManagerService.setGeoLocation(t.geoLocation),p.a.sessionId=e.sessionId,this.un.addPlayerSession(e.playerId,e.sessionId),!n)return void this.registerApiError(m.a.SetupError,"No playlist was provided!");const h=new u.a({browser:t.browser,geoLocation:t.geoLocation,pageUrl:this.pageUrl,playerId:n.playerId,explorationMode:t.explorationMode,bundleID:this.externalAttributes._appSettings.bundleID,appID:this.externalAttributes._appSettings.appID,domainURL:this.externalAttributes._appSettings.domainURL,storeURL:this.externalAttributes._appSettings.storeURL,appCategories:this.externalAttributes._appSettings.appCategories,appIsPaid:this.externalAttributes._appSettings.appIsPaid,appName:this.externalAttributes._appSettings.appName,appPrivacyPolicy:this.externalAttributes._appSettings.appPrivacyPolicy,appVersion:this.externalAttributes._appSettings.appVersion,deviceId:this.externalAttributes._appSettings.deviceID,isRecyclerViewIntegration:this.externalAttributes._appSettings.isRecyclerViewIntegration,appPageURL:this.externalAttributes._appSettings.appPageURL}),o=h.browser.browserType===_.a.InternetExplorer,d=new g.a(a),f=this.getViewabilityService(n,d,o),v=this.zs;this.zs=L.a.detectUsingCSS(n.global),v!==this.zs&&Object(r.a)({message:"Loader_adBlockerDetection_changed_after_new_global",throttle:2,sendMaxLog:!1,level:s.ProtoLoggingLevelEnum.INFO,exception:`${v}`});const y=new l.a(n,t.geoLocation,h.pageUrl,h.pageDomain,this.externalAttributes._appSettings,this.Ws),x={services:{GlobalDomUtilsService:a,ViewabilityService:f,TrackingService:this.dn(n,t,i),ResizeObserver:new c.a(n.global),UserManagerService:this.services.UserManagerService,MacrosService:y,EventsStorageService:this.services.EventsStorageService,PageFocusService:d,InteractionService:new M.a(n.global,h.isMobile)},config:h};this.zs&&x.services.TrackingService.trackSessionAdBlocker(s.ProtoAdBlockDetectionTypeEnum.Banner),x.services.UserManagerService.setPageUrl(x.config.pageUrl);const k=this.en();x.services.TrackingService.setImplementationTypeOnMeta(k),n.externalMacros&&x.services.MacrosService.addExtraMacros(n.externalMacros),x.services.UserManagerService.onEvent([w.a.CCPA_INFO_RECEIVED]).then(()=>{x.services.MacrosService.setUsPrivacyString(x.services.UserManagerService.getUsPrivacyString())}),x.services.UserManagerService.onEvent([w.a.CONSENT_DATA_UPDATE]).then(()=>{x.services.TrackingService.updateMetadataModel({userId:x.services.UserManagerService.getTrackableUser()});const t=x.services.UserManagerService.getConsentPayload();if(x.services.TrackingService.hasGdprConsentPayload=Object(b.h)(t),this.services.UserManagerService.gdprConsentMode===s.ProtoGdprConsentModeEnum.NoConsent||this.rs){const t=n.lineItemSettings.lineItems.filter(t=>Object(b.h)(t.vendorId)).every(t=>this.services.UserManagerService.isConsent(t.vendorId));this.services.UserManagerService.gdprConsentMode=t?s.ProtoGdprConsentModeEnum.AllGood:s.ProtoGdprConsentModeEnum.NotAllDemandConsent}});const S={wasPlayerReloaded:this.un.wasPlayerReloaded(e.playerId),wasPlayerInView:this.un.getSessionInView(e.playerId)};this.renderer=this.getRendererInstance(n,x,this.zs,S,this.externalAttributes._appSettings),this.subscribe(I.c.SessionView,this.renderer,()=>{this.un.addSessionInView(e.playerId)}),this.subscribe(I.c.SessionRendered,this.renderer,()=>{if(this.pn){const t=this.services.UserManagerService.getUserId();new P.a(y,a,this.pn,t).addFraudSensorScript()}});const O=this.renderer.init(),j=Object.assign({configEnums:this.getApiConfigEnums(),configEvents:this.getApiConfigEvents()},this.renderer.getApiMethods());let A=e.customJsCode;if(A){const t=`${R}_${x.config.appId}`;this.GLOBAL[t]=j,A=A.cnx_replaceAll(`"{{${R}}}"`,`window.${t}`)}O?this.registerApiSuccess(j,A):this.registerApiError(m.a.RenderError,"Player size under supported value")}dn(t,i,e){return t.disableTracking?new x.a:new o.a({userManagerService:this.services.UserManagerService,browser:i.browser,geoLocation:i.geoLocation,playerId:t.playerId,userId:this.services.UserManagerService.getTrackableUser(),sessionId:i.players[e].sessionId,pageUrl:this.pageUrl,bundleId:this.externalAttributes._appSettings.bundleID,customParam1:this.externalAttributes.customParam1,customParam2:this.externalAttributes.customParam2,customParam3:this.externalAttributes.customParam3,customParam4:this.externalAttributes.customParam4,customParam5:this.externalAttributes.customParam5,abTestId:i.players[e].abTestId,explorationMode:i.explorationMode})}bn(t,i={useSafeMode:!0}){if(!t)return;const{global:e,useSafeMode:s}=i,n=e||this.GLOBAL;let r;r=s?`\n        (function() {\n            "use strict";\n            try {\n                ${t}\n            }catch(e){\n                console.warn('---CnxCustomApiError---');\n                console.warn(e.message);\n            }\n          })()\n        `:t,Object(h.z)(n.document.head,n,r.trim())}qs(){if(this.Hs.includes("{{omidVerificationClient"))return;const t={useSafeMode:!1,global:window};this.bn(decodeURI(this.Hs),t)}vn(){const{playerId:t,parseDomain:i}=this.mn;return this.gn(t,i).catch(t=>{const i=new Error(t);throw Object(r.a)({callStack:i.stack,level:s.ProtoLoggingLevelEnum.FATAL,exception:i.message,message:"Loader_player_id_call_get_pls"}),this.registerApiError(m.a.SetupError,"player data call error"),this.yn(),i})}wn(t){const{browser:i,userInformation:e}=t;if(this.services.UserManagerService.setUserInformation(e),this.services.UserManagerService.setBrowserInfo(i),e&&e.callFraudSensor){const{lookupId:t,lookupResponseCode:s,publisherAdsTxt:n}=e;this.pn={lookupId:t,lookupResponseCode:s,publisherAdsTxt:n,deviceType:i.device}}y.a.serverAb0=t.serverAb0,y.a.serverAb1=t.serverAb1,Object(v.h)(t.players)?(t.players.length>1&&(this.Gs(),this.Vs=!0),Object.keys(t.players).forEach(i=>{this.xn(t,this.mn,i)})):this.registerApiError(m.a.NoPlayer,`No player available for given player id:${this.mn.playerId}`),this.yn()}yn(){this.kn(),this.Sn()}Sn(){setTimeout(()=>{if(!this.Vs){const t=this.Ns[0];this.readyCallback&&this.readyCallback(t.apiErrorObj,t.apiConfigObj)}this._n()})}_n(){this.Ns.filter(t=>t.apiErrorObj).forEach(()=>{this.services.EventsStorageService.emitRenderError()}),this.Ns.filter(t=>t.customJs).forEach(t=>{this.bn(t.customJs)})}xn(t,i,e){const s=t.players[e],{playerModel:n}=this.Ds[e];this.Js(s.renderInFrame),this.ln(t,e),this.jn(n,this.renderer.playerContainer)}gn(t,i=!1){let e={parseDomain:i,referrer:this.Ws,pageUrl:this.pageUrl,tokens:[t]};e.bundleId=this.externalAttributes._appSettings.bundleID,this.queryParams.cnxLineItemId&&(e.forceLineItemId=this.queryParams.cnxLineItemId),this.queryParams.cnxPlayerId?e.forcePlayerId=this.queryParams.cnxPlayerId:this.externalAttributes.settings._connatixInternals.skipServingRules&&(e.forcePlayerId=t),this.queryParams.cnxExplorationMode&&(e.forceExploration=!0);const{queryJsTargeting:s}=this.externalAttributes.settings;return Object(b.f)(s)&&Object.keys(s).length>0&&(e.queryJsTargeting=Object.keys(s).reduce((t,i)=>Object.assign(Object.assign({},t),{[i]:`${s[i]}`}),{})),e.customParam1=this.externalAttributes.customParam1,e.customParam2=this.externalAttributes.customParam2,e.customParam3=this.externalAttributes.customParam3,e.customParam4=this.externalAttributes.customParam4,e.customParam5=this.externalAttributes.customParam5,e.disableTracking=this.externalAttributes.settings._connatixInternals.disableTracking,e.version=f.a.version,e.es6=f.b,e.userId=this.services.UserManagerService.getForcedTrackableUser(),e.isConsentConnatix=this.services.UserManagerService.isConsentConnatix(),e.clientAb0=y.a.clientAb0,e.clientAb1=y.a.clientAb1,e.implementationType=this.en(),e.reloadedPlayers=this.un.getCookiePlayersSession(),e=Object.assign(Object.assign({},e),this.getSpecificRequestData()),this.mn.playerId?this.getPlayerResponse(e,this.mn.playerId||"serverless"):new Promise((t,i)=>{this.isServerlessMode=!0,t(this.defaultInitFromProto())})}An(){const t=Object(d.b)("cnxVideoPosition",this.pageUrl),i=parseInt(Object(d.b)("cnxStoryPosition",this.pageUrl),10);return{cnxStoryId:Object(d.b)("cnxStoryId",this.pageUrl),cnxLineItemId:Object(d.b)("cnxLineItemId",this.pageUrl),cnxPlayerId:Object(d.b)("cnxPlayerId",this.pageUrl),cnxMediaId:Object(d.b)("cnxMediaId",this.pageUrl),cnxPlaylistId:Object(d.b)("cnxPlaylistId",this.pageUrl),cnxVideoPosition:t?parseInt(t,10):null,cnxExplorationMode:"true"===Object(d.b)("cnxExplorationMode",this.pageUrl),cnxStoryPosition:Object(b.e)(i)?i:null,cnxSkipAdsFlag:"true"===Object(d.b)("cnxSkipAdsFlag",this.pageUrl),cnxReloadTime:parseInt(Object(d.b)("cnxReloadTime",this.pageUrl),10),cnxOverrideLineitems:"true"===Object(d.b)("cnxOverrideLineitems",this.pageUrl),cnxIsSeoTraffic:"true"===Object(d.b)("cnxIsSeoTraffic",this.pageUrl)}}jn(t,i){const e=this.getDelegateHandler();new k.a(this.GLOBAL,this.services.EventsStorageService,e,t,i).start()}In(){const t=this.GLOBAL.OmidSessionClient&&this.GLOBAL.OmidSessionClient[O.j];t?this.Tn=new S.a(t,this.services.EventsStorageService,this.externalAttributes._appSettings.sdkVersion):Object(r.a)({message:"OmidSessionClient not found.",level:s.ProtoLoggingLevelEnum.FATAL})}Cn(t){const i=()=>new Promise((i,e)=>{const s=this.Pn();t.addCssStylesheetToHead(s,()=>i(),t=>e(t))});return Object(a.k)(()=>i()).catch(t=>{throw Object(r.a)({message:"Loader_add_css_link",exception:t,level:s.ProtoLoggingLevelEnum.INFO}),new Error(t)})}updateQueryParams(){this.queryParams=this.An()}loadScriptTag(t,i){let e;if(this.externalAttributes=t,i&&(e=this.GLOBAL.document.getElementById(i)),!e)return Object(r.a)({message:"Loader_no_script_id",exception:`${t.playerId}`,level:s.ProtoLoggingLevelEnum.WARNING}),this.registerApiError(m.a.SetupError,"Could not locate any script tag ids in the page"),!1;const n=Object(b.f)(t.settings.plugins.adobeAnalyticsSettings);return this.Bs&&this.In(),this.mn={parseDomain:n,playerId:t.playerId,tag:e},!0}insertRenderer(){try{this.un=new j.a(this.queryParams.cnxReloadTime),this.Js();const t=()=>{this.vn().then(t=>{const i=[];t.players.forEach((e,n)=>{t.players[n].limitClientSideApiUse&&this.Gs();const a=this.nn(this.mn,e).then(i=>{this.cn(e,t.lineItems);const s=this.getPlayerModel(i,t,n.toString()),r=new C.a(s.global);return Object(E.a)(s.lineItemSettings.lineItems),this.Ds[n]={playerModel:s,globalDomUtilsService:r},this.Cn(r)}).catch(t=>{this.registerApiError(m.a.SetupError,"rendering error"),Object(r.a)({message:"Loader_send_data_to_renderer",exception:t.message,callStack:t.stack,level:s.ProtoLoggingLevelEnum.FATAL})});i.push(a)}),Promise.all(i).then(()=>this.wn(t))})};this.kn=this.services.UserManagerService.registerPlsCall(t)}catch(t){Object(r.a)({message:"Loader_insert_renderer",exception:t.message,callStack:t.stack,level:s.ProtoLoggingLevelEnum.FATAL})}}findPageUrl(t,i){if(t.cnx_page_url)this.pageUrl=t.cnx_page_url;else try{t["cnxAmpAd)"]?this.pageUrl=t.context.sourceUrl||t.context.location.href:this.pageUrl=i||Object(a.e)(Object(a.f)(this.GLOBAL),this.GLOBAL)}catch(t){}if(!this.pageUrl||0===this.pageUrl.length)return new Promise(e=>{setTimeout(()=>{this.findPageUrl(t,i).then(()=>e())},this.Us)});try{return this.pageUrl=Object(d.d)(this.pageUrl),Promise.resolve()}catch(t){return Object(r.a)({message:"Loader_find_page_url",exception:t.message,callStack:t.stack,level:s.ProtoLoggingLevelEnum.FATAL}),Promise.reject()}}registerApiError(t=m.a.SetupError,i=""){this.Ns.push({apiErrorObj:{type:t,message:i}})}registerApiSuccess(t,i){this.Ns.push({apiConfigObj:t,customJs:i})}destroy(){this.renderer&&this.renderer.destroy()}}},function(t,i,e){"use strict";e.d(i,"a",function(){return l});var s,n=e(0),r=e(7),a=e(1),h=e(32),o=e(26),c=e(2);!function(t){t.AppUrl="APP_URL",t.AppBundle="APP_BUNDLE",t.AppName="APP_NAME",t.Uuid="UUID",t.PageUrl="PAGE_URL",t.AdPosition="AD_POSITION",t.VideoTitle="VIDEO_TITLE",t.MediaTitle="MEDIA_TITLE",t.VideoDuration="VIDEO_DURATION",t.ContentLength="CONTENT_LENGTH",t.VideoDescription="VIDEO_DESCRIPTION",t.VideoUrl="VIDEO_URL",t.VideoId="VIDEO_ID",t.VideoTime="VIDEO_TIME",t.DescriptionUrl="DESCRIPTION_URL",t.VideoKeywords="VIDEO_KEYWORDS",t.Autoplay="AUTOPLAY",t.UserAgent="UA",t.Ip="IP",t.CashBuster="CB",t.Width="WIDTH",t.Height="HEIGHT",t.Domain="DOMAIN",t.SourceReferrer="SOURCE_REFERRER",t.Gdpr="GDPR",t.GdprConsent="GDPR_CONSENT",t.Consent="CONSENT",t.Ctd="CTD",t.Publisher="PUBLISHER",t.Random="RAND",t.Site="SITE",t.SubId="SUB_ID",t.Url="URL",t.UserLat="USER_LAT",t.UserLong="USER_LONG",t.UsPrivacyString="US_PRIVACY",t.DoNotTrack="DNT",t.FraudSensorUserId="FS_USER_ID",t.PublisherId="PUBLISHER_ID",t.SessionId="SESSION_ID",t.FraudSensorDeviceType="FS_DEVICE_TYPE",t.FraudSensorLookupId="MGID",t.FraudSensorLookupResponseCode="MGTO",t.FraudSensorMediaType="FS_MEDIA_TYPE",t.CnxSupplierId="CNX_SUPPLIER_ID"}(s||(s={}));class l{constructor(t,i,e,r,a,h){this.Mn=new Map,this.En="[",this.Ln="]",this.Mn.set(s.Autoplay,t.playbackMode===n.ProtoPlayerPlaybackModeEnum.Autoplay),this.Mn.set(s.UserAgent,navigator.userAgent),this.Mn.set(s.UserLong,i.lon),this.Mn.set(s.UserLat,i.lat),this.Mn.set(s.Ip,i.ip),this.Rn(a),this.Bn(h),this.Dn(e),this.Fn(),this.Mn.set(s.Domain,r),this.Mn.set(s.CnxSupplierId,o.e),this.Mn.set(s.SessionId,t.sessionId)}Rn(t){this.Mn.set(s.AppBundle,t.bundleID),this.Mn.set(s.AppName,t.appName),this.Mn.set(s.AppUrl,t.storeURL)}Bn(t){this.Mn.set(s.SourceReferrer,t)}Fn(){const t=Object(a.D)()?1:0;this.Mn.set(s.DoNotTrack,t)}Dn(t){this.Mn.set(s.PageUrl,t),this.Mn.set(s.Url,t),this.Mn.set(s.Publisher,t),this.Mn.set(s.Site,t),this.Mn.set(s.DescriptionUrl,t)}$n(){const t=Object(r.c)();this.Mn.set(s.CashBuster,t),this.Mn.set(s.Random,t),this.Mn.set(s.Ctd,t)}Un(t){return t.split("?")[0]}Vn(t){return t.split("?").slice(1).join("?")}Nn(t,i,e){return 0===t.indexOf(i)&&t.indexOf(e,e.length)===t.length-i.length}Hn(t,i){const e=this.Un(t),s=this.qn(this.Vn(t),i);return`${e}${s?`?${s}`:""}`}qn(t,i,e=!1){let s=t;return s.split("&").forEach(t=>{const n=t.split("=");if(n[1])if(this.Nn(n[1],this.En,this.Ln))s=s.replace(n[1],this.zn(n[1].toLowerCase(),i,e));else if(decodeURIComponent(n[1]).split("=").length>1){const t=this.qn(decodeURIComponent(n[1]),i,!0);s=s.replace(n[1],encodeURIComponent(t))}}),this.Wn(s)}Wn(t){return t.indexOf(this.En)>-1&&(t=t.cnx_replaceAll(this.En,encodeURIComponent(this.En))),t.indexOf(this.Ln)>-1&&(t=t.cnx_replaceAll(this.Ln,encodeURIComponent(this.Ln))),t}zn(t,i,e){let s,n=t;return i.forEach((t,i)=>{for(;n.indexOf(this.En+i.toLowerCase()+this.Ln)>-1;)s=e?t:encodeURIComponent(t),n=n.replace(this.En+i.toLowerCase()+this.Ln,s)}),n}setAdWidth(t){this.Mn.set(s.Width,Math.floor(t))}setAdHeight(t){this.Mn.set(s.Height,Math.floor(t))}setSubId(t){this.Mn.set(s.SubId,t)}setGDPR(t){this.Mn.set(s.Gdpr,t)}setUUID(t){this.Mn.set(s.Uuid,t)}setGDPRConsent(t){this.Mn.set(s.GdprConsent,t)}setConsent(t){this.Mn.set(s.Consent,t)}setVideoId(t){this.Mn.set(s.VideoId,t)}setVideoTime(t){this.Mn.set(s.VideoTime,Math.floor(t))}setVideoUrl(t){this.Mn.set(s.VideoUrl,t)}setVideoDescription(t){this.Mn.set(s.VideoDescription,t)}setVideoDuration(t){this.Mn.set(s.VideoDuration,t),this.Mn.set(s.ContentLength,t)}setVideoTitle(t){let i;this.Mn.set(s.VideoTitle,t),this.Mn.set(s.MediaTitle,t),t&&(i=t.split(" ").join(",")),this.Mn.set(s.VideoKeywords,i)}setAdPosition(t="midRoll"){this.Mn.set(s.AdPosition,t)}setupMacros(t){return this.$n(),this.Hn(t,this.Mn)}addExtraMacros(t){const i=Object(h.a)(s);Object.keys(t).filter(t=>!i.includes(t.toUpperCase())).forEach(i=>{this.Mn.set(i,t[i])})}getExtraMacros(){const t=Object(h.a)(s),i={};return this.Mn.forEach((e,s)=>{t.includes(s)||null==e||(i[s]=Object(c.h)(e)?e:JSON.stringify(e))}),i}setUsPrivacyString(t){const i=t||"";this.Mn.set(s.UsPrivacyString,i)}setUserId(t){this.Mn.set(s.FraudSensorUserId,t)}setPublisherId(t){this.Mn.set(s.PublisherId,t)}setFraudSensorMacros(t){this.Mn.set(s.FraudSensorDeviceType,t.deviceType),this.Mn.set(s.FraudSensorLookupId,t.lookupId),this.Mn.set(s.FraudSensorLookupResponseCode,t.lookupResponseCode),this.Mn.set(s.FraudSensorMediaType,t.mediaType)}destroy(){}}},function(t,i,e){"use strict";e.d(i,"a",function(){return o});var s=e(22),n=e(7),r=e(24),a=e(18),h=e(2);class o{constructor(t){this.Gn=t,this.Jn=100,this.Qn=Object(n.f)(window).topFrame,this.Xn=s.a.indexOf(this.Gn.browser.device)>-1,this.Yn=Object(n.d)(),this.Kn={browserType:this.Zn(),browserVersion:this.Gn.browser.browserVersion},this.tr=this.ir(),this.er=this.pageUrl.substr(0,this.Jn),this.sr=Object(a.a)(this.er)}Zn(){let t;return Object.keys(r.a).forEach(i=>{this.Gn.browser.browserType.toLowerCase().indexOf(r.a[i])>-1&&(t=r.a[i])}),t}ir(){let t,i=0;const e=this.Gn.browser.osCode.split("_"),n=e[0].toLowerCase();return Object.keys(s.b).forEach(i=>{n.indexOf(s.b[i])>-1&&(t=s.b[i])}),e.length>1&&(i=parseFloat(`${e[1]||0}.${e[2]||0}`)),{os:t,osVersion:i}}get device(){return this.Gn.browser.device}get browser(){return this.Kn}get os(){return this.tr}get geoLocation(){return this.Gn.geoLocation}get pageUrl(){return this.Gn.pageUrl||""}get pageUrlTrunc(){return this.er}get pageDomain(){return this.sr}get isMobile(){return this.Xn}get isInApp(){return Object(h.h)(this.Gn.bundleID)}get isInAppAndroid(){return this.isInApp&&this.os.os===s.b.Android}get playerId(){return this.Gn.playerId}get appId(){return this.Yn}get bundleID(){return this.Gn.bundleID}get iOSAppID(){return this.Gn.appID}get domainURL(){return this.Gn.domainURL}get storeURL(){return this.Gn.storeURL}get explorationMode(){return this.Gn.explorationMode}get appName(){return this.Gn.appName}get appCategories(){return this.Gn.appCategories}get appVersion(){return this.Gn.appVersion}get appPrivacyPolicy(){return this.Gn.appPrivacyPolicy}get appIsPaid(){return this.Gn.appIsPaid}get deviceId(){return this.Gn.deviceId}get topWindow(){return this.Qn}get isRecyclerViewIntegration(){return this.Gn.isRecyclerViewIntegration}get appPageURL(){return this.Gn.appPageURL}}},function(t,i,e){"use strict";e.d(i,"a",function(){return s});class s{setNewMedia(){}updateMediaMetadata(){}setMediaStart(){}setContentStart(){}setSessionPlayback(){}setSessionViewability(){}trackSessionRendered(){}trackSessionViewability(){}trackMediaQuartile(){}trackMediaClick(){}setAdStart(){}startBidRequests(){}addPrebid(){}addPostBid(){}addBid(){}trackVideoAdImpression(){}trackVideoAdImpressionViewable(){}trackVideoAdQuartile(){}trackAdClick(){}trackAdOpportunity(){}trackSessionAdBlocker(){}getMetadataModel(){}updateMetadataModel(){}setIsConsentPayload(){}destroy(){}publish(){}setImplementationTypeOnMeta(){}addPlatformCappedLineItemSubscriber(){}removePlatformCappedLineItemSubscriber(){}setImpressionRevenueSubscriber(){}unsubscribeToImpressionRevenue(){}trackHeavyAdIntervention(){}}},function(t,i,e){"use strict";e.d(i,"a",function(){return h});var s=e(7),n=e(5),r=e(0),a=e(10);class h{constructor(t){this.RELOAD_TIME=a.a,this.RELOAD_COOKIES="cnx_player_reload",this.SESSION_IN_VIEW_FLAG="_sessionWasViewed",this.nr={},this.rr={},this.ar={},this.Qn=Object(s.f)(window).topFrame,this.hr(t);try{this.or()}catch(t){Object(n.a)({message:"PlayerReloader_cookie_fetch_failed",level:r.ProtoLoggingLevelEnum.WARNING,exception:t})}}wasPlayerReloaded(t){return!!this.nr[t]}addPlayerSession(t,i){this.rr[t]=i}getCookiePlayersSession(){return this.nr}addSessionInView(t){this.rr[t]+=this.SESSION_IN_VIEW_FLAG}getSessionInView(t){return this.ar[t]}hr(t){setTimeout(()=>{this.cr(),this.Qn.location.reload()},t||this.RELOAD_TIME)}or(){decodeURIComponent(this.Qn.document.cookie).split(";").forEach(t=>{const i=t.split("=");i[0].indexOf(this.RELOAD_COOKIES)>-1&&(this.nr=JSON.parse(i[1]))}),this.lr(),this.ur()}lr(){Object.keys(this.nr).forEach(t=>{const i=this.nr[t].indexOf(this.SESSION_IN_VIEW_FLAG);i>-1&&(this.nr[t]=this.nr[t].substr(0,i),this.ar[t]=!0)})}ur(){this.Qn.document.cookie=`${this.RELOAD_COOKIES}=; expires = Thu, 01 Jan 1970 00:00:00 GMT; path=/`}cr(){Object.keys(this.ar).forEach(t=>{-1===this.rr[t].indexOf(this.SESSION_IN_VIEW_FLAG)&&this.addSessionInView(t)});const t=new Date;let i=t.getTime();i+=a.g*a.f,t.setTime(i),this.Qn.document.cookie=`${this.RELOAD_COOKIES}=${JSON.stringify(this.rr)}; expires=${t.toUTCString()}; path=/`}}},function(t,i,e){"use strict";e.d(i,"a",function(){return u});var s=e(7),n=e(1),r=e(13),a=e(6),h=e(5),o=e(0),c=e(15),l=e(2);class u{constructor(t){this.createElement=(t,i=this.ue)=>i.document.createElement(t),this.ue=t,this.addPreconnect()}initHls(t){return t.cnxRenderWindow=this.ue,new c(t)}addCssString(t,i=""){return Object(n.b)(t,i,this.ue)}addPreconnect(){Object(n.c)(r.a.endPoints.base.video,this.ue),Object(n.c)(r.a.endPoints.base.core,this.ue),Object(n.c)(r.a.endPoints.base.image,this.ue)}getLineHeightPropertyValue(t){return Object(n.l)(t,this.ue).getPropertyValue("line-height")}getFontSizePropertyValue(t){return Object(n.l)(t,this.ue).getPropertyValue("font-size")}getFontWeightPropertyValue(t){return Object(n.l)(t,this.ue).getPropertyValue("font-weight")}getTransformPropertyValue(t){return Object(n.l)(t,this.ue).getPropertyValue("transform")}getPaddingTopPropertyValue(t){return Object(n.l)(t,this.ue).getPropertyValue("padding-top")}getPaddingBottomPropertyValue(t){return Object(n.l)(t,this.ue).getPropertyValue("padding-bottom")}getMarginTopPropertyValue(t){return Object(n.l)(t,this.ue).getPropertyValue("margin-top")}getMarginBottomPropertyValue(t){return Object(n.l)(t,this.ue).getPropertyValue("margin-bottom")}getMarginLeftPropertyValue(t){return Object(n.l)(t,this.ue).getPropertyValue("margin-left")}getMarginRightPropertyValue(t){return Object(n.l)(t,this.ue).getPropertyValue("margin-right")}createElementByString(t,i=this.ue){return Object(n.f)(t,i)}createDocumentFragment(t=this.ue){return t.document.createDocumentFragment()}isHttpsProtocolUsed(){return Object(n.F)(this.ue)}isURLSameDomainToTop(t){return Object(n.G)(t,this.ue)}isDetachedFromDOM(t){let i=t;for(;i.parentNode;)if((i=i.parentNode)===this.ue.document.body)return!1;return!0}querySelector(t,i=this.ue){let e;try{e=i.document.querySelector(t)}catch(t){}return e}addCssStylesheetToHead(t,i,e){const s=this.ue.document;s.getElementById(t.id)?Object(l.b)(i)&&i():Object(n.B)(t,s.head,this.ue,i,e)}getFullscreenKeys(t){return Object(n.o)(t||this.ue.document)}exitFullscreen(t,i){(i||this.ue.document)[t]()}getDocumentProperty(t){return this.ue.document[t]}addEventListenerOnGlobal(t,i,e,s=!1){(e?this.ue.document:this.ue).addEventListener(t,i,s)}removeEventListenerOnGlobal(t,i,e,s=!1){(e?this.ue.document:this.ue).removeEventListener(t,i,s)}trackWithImages(t,i){Object(s.m)(t,this.ue,i)}getElementCoordinates(t){let{top:i,left:e}=t.getBoundingClientRect();const{width:s,height:n}=t.getBoundingClientRect(),r=this.ue.pageYOffset;return{clientX:e+=this.ue.pageXOffset,clientY:i+=r,width:s,height:n}}requestAnimationFrameHelper(t){return Object(n.P)(this.ue,t)}cancelRequestAnimationFrame(t){return Object(n.e)(this.ue,t)}getGlobalLocationProperties(){const t=this.ue.location;return{hostname:t.hostname,pathname:t.pathname,href:t.href,protocol:t.protocol,host:t.host,port:t.port,search:t.search,hash:t.hash}}open(t,i){this.ue.open(t,i)}getComputedTranslateX(t){let i=0;const e=Object(n.l)(t,this.ue).getPropertyValue("transform").match(/^matrix\((.+)\)$/);return Object(a.h)(e)&&(i=parseFloat(e[1].split(", ")[4])),i}getBodyDimensions(){try{const t=Object(s.f)(this.ue).topFrame.document.body;let{offsetWidth:i,offsetHeight:e}=t;const r=Object(n.l)(t,this.ue);return{width:i+=parseInt(r.marginLeft,10)+parseInt(r.marginRight,10),height:e+=parseInt(r.marginTop,10)+parseInt(r.marginBottom,10)}}catch(t){return Object(h.a)({message:"DomUtils_error_getting_body_dimensions",exception:t.message,callStack:t.stack,level:o.ProtoLoggingLevelEnum.FATAL}),{width:0,height:0}}}getViewportWidth(){return Object(s.f)(this.ue).topFrame.innerWidth}getViewportHeight(){return Object(s.f)(this.ue).topFrame.innerHeight}getGlobalClosestTop(){return Object(s.f)(this.ue)}stripHtmlTags(t){return Object(n.T)(t,this.ue)}getComputedStyle(t,i){return Object(n.l)(t,this.ue,i)}getElementById(t){return Object(n.m)(t,this.ue)}getElementsByClassName(t){return Object(n.n)(t,this.ue)}insertScript(t,i,e){this.ue.document.getElementById(t.id)?Object(l.b)(i)&&i():Object(n.A)(t,this.ue.document.head,this.ue,i,null,!0,e)}destroy(){}}},function(t,i){t.exports='<cnx class="cnx-tooltip-holder cnx-color-tt-bg"> <cnx class="cnx-tooltip-text cnx-color-tt-text">TEST</cnx> </cnx> '},function(t,i){t.exports='<cnx class="cnx-up-next-container cnx-hide-on-single-video"> <cnx class=cnx-up-next-box> <cnx class=cnx-up-next-box-image> <img/> </cnx> <cnx class=cnx-up-next-box-gradient></cnx> <cnx class=cnx-up-next-box-text></cnx> <cnx class=cnx-up-next-box-button> <cnx class=cnx-up-next-box-button-text>NEXT</cnx> </cnx> </cnx> </cnx> '},function(t,i){t.exports='<cnx class="cnx-ui-cm cnx-ui-cm-context"> <cnx class=cnx-cm-container></cnx> </cnx> '},function(t,i){t.exports='<cnx class="cnx-ui-cm cnx-ui-cm-settings"> <cnx class=cnx-cm-container></cnx> </cnx> '},function(t,i){t.exports="<cnx class=cnx-captions> <cnx class=cnx-captions-container> <cnx-span class=cnx-captions-text-holder></cnx-span> </cnx> </cnx> "},function(t,i){t.exports='<svg class="cnx-color-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M5 4v16l16-8z" fill-rule="evenodd"></path></svg>'},function(t,i){t.exports='<svg class="cnx-color-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9 21H3V3h6v18zm12 0h-6V3h6v18z" fill-rule="evenodd"></path></svg>'},function(t,i){t.exports='<cnx class=cnx-progress-bar> <cnx class=cnx-progress-rail-container> <cnx class=cnx-progress-rail></cnx> <cnx class="cnx-progress-fill cnx-color-icon"></cnx> </cnx> <cnx class="cnx-progress-handle cnx-color-icon"></cnx> </cnx> '},function(t,i){t.exports='<cnx class="cnx-icon-button cnx-ui-btn-hoverable"> <cnx class=cnx-btn-container> <cnx class=cnx-expand-icon> <svg markup-inline class=cnx-color-icon xmlns=http://www.w3.org/2000/svg viewBox="0 0 24 24"><path d="M4.6 3H10v2H5v5H3V4.6A1.58 1.58 0 0 1 4.6 3zM5 14v5h5v2H4.6A1.58 1.58 0 0 1 3 19.4V14h2zM19.4 3A1.58 1.58 0 0 1 21 4.6V10h-2V5h-5V3h5.4zM19 14h2v5.4a1.58 1.58 0 0 1-1.6 1.6H14v-2h5v-5z" fill-rule=evenodd /></svg> </cnx> <cnx class=cnx-collapse-icon> <svg markup-inline class=cnx-color-icon xmlns=http://www.w3.org/2000/svg viewBox="0 0 24 24" fill-rule=evenodd><path d="M16.6 15a1.58 1.58 0 0 0-1.6 1.6V22h2v-5h5v-2h-5.4zM17 2h-2v5.4A1.58 1.58 0 0 0 16.6 9H22V7h-5V2zM7.4 15A1.58 1.58 0 0 1 9 16.6V22H7v-5H2v-2h5.4zM7 2h2v5.4A1.58 1.58 0 0 1 7.4 9H2V7h5V2z"/></svg> </cnx> </cnx> </cnx> '},function(t,i){t.exports='<cnx class="cnx-ui-cm cnx-ui-cm-quality"> <cnx class=cnx-cm-container></cnx> </cnx> '},function(t,i){t.exports='<svg viewBox="0 0 22 22" class="cnx-color-icon" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M18 5.4L16.6 4 11 9.6 5.4 4 4 5.4 9.6 11 4 16.6 5.4 18l5.6-5.6 5.6 5.6 1.4-1.4-5.6-5.6z"></path></svg>'},function(t,i){t.exports='<svg class="cnx-color-icon" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 22 22"><path d="M11 7c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"></path></svg>'},function(t,i){t.exports='<cnx class="cnx-ui-btn cnx-skip-ad-container"> <cnx class="cnx-icon-button cnx-skip-ad-button"> <cnx class=cnx-skip-ad-text> Skip <cnx-span></cnx-span> </cnx> <cnx class=cnx-skip-ad-icon> <svg markup-inline viewBox="0 0 24 24" class=cnx-color-icon xmlns=http://www.w3.org/2000/svg viewBox="0 0 24 24"><path d="M18 21h3V3h-3v18zM3 21l14-9L3 3v18z" fill-rule=evenodd /></svg> </cnx> <cnx class=cnx-timer-loader> <svg markup-inline viewBox="0 0 28 28" xmlns=http://www.w3.org/2000/svg viewBox="0 0 28 28"><circle class=cnx-svg-circle-stroke cx=14 cy=14 r=13 /></svg> </cnx> </cnx> </cnx> '},function(t,i){t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="2 2 20 20"><path d="M14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3m-2 16H5V5h7V3H5a2 2 0 00-2 2v14a2 2 0 002 2h14a2 2 0 002-2v-7h-2v7z"></path></svg>'},function(t,i){t.exports="<cnx class=cnx-pod-loading-screen-container> <img class=cnx-pod-loading-background /> <cnx class=cnx-pod-loading-info> <cnx class=cnx-pod-open-new-icon> </cnx> <cnx class=cnx-pod-visit-website-text> <cnx-span>Visit Advertiser website</cnx-span> </cnx> <cnx class=cnx-pod-read-more-container> <cnx-span class=cnx-pod-read-more-btn>GO TO PAGE</cnx-span> </cnx> </cnx> <cnx class=cnx-pod-loading-fallback> <cnx class=cnx-pod-loading-spinner></cnx> <cnx-span class=cnx-pod-slot-count-text></cnx-span> </cnx> </cnx>"},function(t,i){t.exports='<svg class="cnx-color-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 3H3c-1.1 0-2 .9-2 2v3h2V5h18v14h-7v2h7c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM1 18v3h3c0-1.66-1.34-3-3-3zm0-4v2c2.76 0 5 2.24 5 5h2c0-3.87-3.13-7-7-7zm0-4v2c4.97 0 9 4.03 9 9h2c0-6.08-4.93-11-11-11z" fill-rule="evenodd"></path></svg>'},function(t,i){t.exports='<svg class="cnx-color-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.9 12.7c.05-.23.1-.46.1-.7s-.04-.47-.1-.7l7.05-4.1c.54.5 1.25.8 2.04.8 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.1.7L8.04 9.8C7.5 9.3 6.8 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.8 0 1.5-.3 2.04-.8l7.12 4.16a2.82 2.82 0 0 0-.08.65c0 1.6 1.3 2.92 2.92 2.92s2.92-1.3 2.92-2.92-1.3-2.92-2.92-2.92z" fill-rule="evenodd"></path></svg>'},function(t,i){t.exports='<cnx class=cnx-icon-button> <cnx class=cnx-btn-container> <cnx class=cnx-unmute-icon> <svg markup-inline class=cnx-color-icon xmlns=http://www.w3.org/2000/svg viewBox="0 0 24 24"><path d="M0 7.913v7.913h4.946l5.935 5.045V1.978L4.946 7.913zm16.815 3.957c.03-2.078-1.12-3.994-2.967-4.946v9.9c1.847-.952 2.997-2.867 2.967-4.945zM13.848 0v2.077a10.39 10.39 0 0 1 0 19.585v2.077a12.05 12.05 0 0 0 8.9-11.87A12.05 12.05 0 0 0 13.848 0z"/></svg> </cnx> <cnx class=cnx-mute-icon> <svg markup-inline class=cnx-color-icon xmlns=http://www.w3.org/2000/svg viewBox="0 0 24 24"><path d="M11 2L8.25 4.25 11 7zM0 7v9h5l6 5v-6.5L3.85 7zm17 4.5c0-1.965-1.2-3.735-3-4.5v3l2.8 2.8a3.73 3.73 0 0 0 .2-1.3zm3.4 7.45l-1.85-1.85-2.65-2.6-1.9-1.95-3-3-4.15-4.1-4.95-5L1.45 0 0 1.45 17.15 18.6 19 20.4l3.55 3.6L24 22.55zM14 23a11.83 11.83 0 0 0 3.65-1.55l-1.25-1.3c-.747.498-1.553.902-2.4 1.2V23zm9-11.5A11.77 11.77 0 0 0 14 0v1.6A10.53 10.53 0 0 1 20 16l1.45 1.45A11.99 11.99 0 0 0 23 11.5z"/></svg> </cnx> </cnx> </cnx> '},function(t,i){t.exports='<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="nonzero"><path d="M22 15.5a6.5 6.5 0 100 13 6.5 6.5 0 000-13z" fill="#FFF"></path><path d="M22 18a4 4 0 110 8 4 4 0 010-8z" fill="#FF4047"></path><path d="M37.598 7.541c7.955 7.972 8.036 20.846.243 28.918l-.243.248-1.77-1.765c6.985-7 7.062-18.302.233-25.397l-.233-.238 1.77-1.766zm-4.722 5.225c4.34 4.926 4.415 12.803.224 17.831l-.224.262L31 29.206c3.515-3.989 3.583-10.465.203-14.55L31 14.42l1.876-1.653z" fill="#FFF"></path><path d="M6.598 7.541c7.955 7.972 8.036 20.846.243 28.918l-.243.248-1.77-1.765c6.985-7 7.062-18.302.233-25.397l-.233-.238 1.77-1.766zm-4.722 5.225c4.34 4.926 4.415 12.803.224 17.831l-.224.262L0 29.206c3.515-3.989 3.583-10.465.203-14.55L0 14.42l1.876-1.653z" fill="#FFF" transform="matrix(-1 0 0 1 12.626 0)"></path></g></svg>'},function(t,i){t.exports='<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><g fill="#FFF" fill-rule="evenodd"><rect class="cnx-live-icon-svg-rectangle" transform="rotate(90 22.06 21.43)" x="20.059" y="15.929"></rect><path d="M37.598 7.541c7.955 7.972 8.036 20.846.243 28.918l-.243.248-1.77-1.765c6.985-7 7.062-18.302.233-25.397l-.233-.238 1.77-1.766zm-4.722 5.225c4.34 4.926 4.415 12.803.224 17.831l-.224.262L31 29.206c3.515-3.989 3.583-10.465.203-14.55L31 14.42l1.876-1.653z" fill-rule="nonzero" opacity=".5"></path><path d="M6.598 7.541c7.955 7.972 8.036 20.846.243 28.918l-.243.248-1.77-1.765c6.985-7 7.062-18.302.233-25.397l-.233-.238 1.77-1.766zm-4.722 5.225c4.34 4.926 4.415 12.803.224 17.831l-.224.262L0 29.206c3.515-3.989 3.583-10.465.203-14.55L0 14.42l1.876-1.653z" fill-rule="nonzero" opacity=".5" transform="matrix(-1 0 0 1 12.626 0)"></path></g></svg>'},function(t,i){t.exports='<cnx class="cnx-live-poster cnx-mod-active"> <cnx class=cnx-live-broadcast> <cnx class=cnx-live-icon> <svg class=cnx-live-icon-starting markup-inline viewBox="0 0 44 44" xmlns=http://www.w3.org/2000/svg><g fill=none fill-rule=nonzero><path d="M22 15.5a6.5 6.5 0 100 13 6.5 6.5 0 000-13z" fill=#FFF /><path d="M22 18a4 4 0 110 8 4 4 0 010-8z" fill=#FF4047 /><path d="M37.598 7.541c7.955 7.972 8.036 20.846.243 28.918l-.243.248-1.77-1.765c6.985-7 7.062-18.302.233-25.397l-.233-.238 1.77-1.766zm-4.722 5.225c4.34 4.926 4.415 12.803.224 17.831l-.224.262L31 29.206c3.515-3.989 3.583-10.465.203-14.55L31 14.42l1.876-1.653z" fill=#FFF /><path d="M6.598 7.541c7.955 7.972 8.036 20.846.243 28.918l-.243.248-1.77-1.765c6.985-7 7.062-18.302.233-25.397l-.233-.238 1.77-1.766zm-4.722 5.225c4.34 4.926 4.415 12.803.224 17.831l-.224.262L0 29.206c3.515-3.989 3.583-10.465.203-14.55L0 14.42l1.876-1.653z" fill=#FFF transform="matrix(-1 0 0 1 12.626 0)"/></g></svg> <svg class=cnx-live-icon-ended markup-inline viewBox="0 0 44 44" xmlns=http://www.w3.org/2000/svg><g fill=#FFF fill-rule=evenodd><rect class=cnx-live-icon-svg-rectangle transform="rotate(90 22.06 21.43)" x=20.059 y=15.929 /><path d="M37.598 7.541c7.955 7.972 8.036 20.846.243 28.918l-.243.248-1.77-1.765c6.985-7 7.062-18.302.233-25.397l-.233-.238 1.77-1.766zm-4.722 5.225c4.34 4.926 4.415 12.803.224 17.831l-.224.262L31 29.206c3.515-3.989 3.583-10.465.203-14.55L31 14.42l1.876-1.653z" fill-rule=nonzero opacity=.5 /><path d="M6.598 7.541c7.955 7.972 8.036 20.846.243 28.918l-.243.248-1.77-1.765c6.985-7 7.062-18.302.233-25.397l-.233-.238 1.77-1.766zm-4.722 5.225c4.34 4.926 4.415 12.803.224 17.831l-.224.262L0 29.206c3.515-3.989 3.583-10.465.203-14.55L0 14.42l1.876-1.653z" fill-rule=nonzero opacity=.5 transform="matrix(-1 0 0 1 12.626 0)"/></g></svg> </cnx> <cnx class=cnx-live-message> <cnx-span></cnx-span> </cnx> </cnx> </cnx> '},function(t,i){t.exports='<cnx class="cnx-ui-live-badge-wrapper cnx-d-md-none"> <cnx class=cnx-ui-live-badge> <svg markup-inline xmlns=http://www.w3.org/2000/svg viewBox="0 0 37 9" fill-rule=nonzero><path d="M15.223 9V7.816H11.35V.47H9.868V9h5.356zm3.7 0V.47h-1.477V9h1.477zm6.555 0L28.55.47h-1.63l-2.168 6.674L22.608.47h-1.623L24.043 9h1.436zm10.6 0V7.816h-4.096V5.2h3.504V4.02h-3.504V1.664h4.055V.47H30.5V9h5.578zM3 2a3 3 0 1 0 0 6 3 3 0 1 0 0-6z" fill=#fff /><path d="M3 3a2 2 0 1 1 0 4 2 2 0 1 1 0-4z" fill=#ff4047 /></svg> </cnx> </cnx> '},function(t,i){t.exports='<cnx class=cnx-progress-bar> <cnx class=cnx-progress-rail-container> <cnx class=cnx-progress-rail></cnx> <cnx class="cnx-progress-fill cnx-color-accent"></cnx> <cnx class=cnx-progress-follow></cnx> </cnx> <cnx class=cnx-progress-hitarea></cnx> </cnx> '},function(t,i){t.exports="<cnx class=cnx-slides-progress-bar> </cnx> "},function(t,i){t.exports='<svg class="cnx-color-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill-rule="evenodd"><path d="M16.6 15a1.58 1.58 0 0 0-1.6 1.6V22h2v-5h5v-2h-5.4zM17 2h-2v5.4A1.58 1.58 0 0 0 16.6 9H22V7h-5V2zM7.4 15A1.58 1.58 0 0 1 9 16.6V22H7v-5H2v-2h5.4zM7 2h2v5.4A1.58 1.58 0 0 1 7.4 9H2V7h5V2z"></path></svg>'},function(t,i){t.exports='<cnx class="cnx-ui-cm cnx-ui-cm-settings"> <cnx class=cnx-cm-container></cnx> </cnx> '},function(t,i){t.exports='<cnx class="cnx-icon-button cnx-ui-btn-hoverable"> <cnx class=cnx-btn-container> <cnx class=cnx-unmute-icon> <svg markup-inline class=cnx-color-icon xmlns=http://www.w3.org/2000/svg viewBox="0 0 24 24"><path d="M0 7.913v7.913h4.946l5.935 5.045V1.978L4.946 7.913zm16.815 3.957c.03-2.078-1.12-3.994-2.967-4.946v9.9c1.847-.952 2.997-2.867 2.967-4.945zM13.848 0v2.077a10.39 10.39 0 0 1 0 19.585v2.077a12.05 12.05 0 0 0 8.9-11.87A12.05 12.05 0 0 0 13.848 0z"/></svg> </cnx> <cnx class=cnx-mute-icon> <svg markup-inline class=cnx-color-icon xmlns=http://www.w3.org/2000/svg viewBox="0 0 24 24"><path d="M11 2L8.25 4.25 11 7zM0 7v9h5l6 5v-6.5L3.85 7zm17 4.5c0-1.965-1.2-3.735-3-4.5v3l2.8 2.8a3.73 3.73 0 0 0 .2-1.3zm3.4 7.45l-1.85-1.85-2.65-2.6-1.9-1.95-3-3-4.15-4.1-4.95-5L1.45 0 0 1.45 17.15 18.6 19 20.4l3.55 3.6L24 22.55zM14 23a11.83 11.83 0 0 0 3.65-1.55l-1.25-1.3c-.747.498-1.553.902-2.4 1.2V23zm9-11.5A11.77 11.77 0 0 0 14 0v1.6A10.53 10.53 0 0 1 20 16l1.45 1.45A11.99 11.99 0 0 0 23 11.5z"/></svg> </cnx> </cnx> </cnx> '},function(t,i){t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M14.2,0A5.8,5.8,0,0,1,20,5.8v8.4A5.8,5.8,0,0,1,14.2,20H5.8A5.8,5.8,0,0,1,0,14.2V5.8A5.8,5.8,0,0,1,5.8,0ZM2,5.6v8.8A3.59,3.59,0,0,0,5.6,18h8.8A3.59,3.59,0,0,0,18,14.4V5.6A3.59,3.59,0,0,0,14.4,2H5.6A3.59,3.59,0,0,0,2,5.6Zm14.5-.8a1.3,1.3,0,1,1-1.3-1.3A1.32,1.32,0,0,1,16.5,4.8ZM15,10a5,5,0,1,1-5-5A5,5,0,0,1,15,10ZM10,7a3,3,0,0,0-3,3,3,3,0,0,0,3,3,3,3,0,0,0,3-3A3,3,0,0,0,10,7Z"></path></svg>'},function(t,i){t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 12"><polygon points="0 5 16.17 5 12.59 1.41 14 0 20 6 14 12 12.59 10.59 16.17 7 0 7 0 5"></polygon></svg>'},function(t,i){t.exports='<cnx class=cnx-ui-click-to-play-btn> <cnx class=cnx-ui-click-to-play-btn-content> <svg markup-inline class="cnx-click-to-play-btn-icon cnx-color-accent" class=cnx-color-icon xmlns=http://www.w3.org/2000/svg viewBox="0 0 24 24"><polygon points="5 1 5 23 23 11.9165764"></polygon></svg> <cnx class=cnx-onion-ring></cnx> <cnx-span class=cnx-click-to-play-btn-text>PLAY</cnx-span> </cnx> </cnx> '},function(t,i){t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 11 11"><path d="M5.55,9.4h0C2.85,6.8,1.15,5,1.15,3.3a2,2,0,0,1,1.9-2.1,2.28,2.28,0,0,1,2,1.4h1a2.17,2.17,0,0,1,2-1.4A2,2,0,0,1,10,3.3c0,1.7-1.8,3.4-4.4,6.1ZM8,0a3.34,3.34,0,0,0-2.5,1.2A3.13,3.13,0,0,0,3.05,0a3.09,3.09,0,0,0-3,3.3c0,2.3,1.9,4.1,4.7,6.9l.8.8.8-.8c2.8-2.8,4.7-4.7,4.7-6.9A3.16,3.16,0,0,0,8,0Z" style="fill:#a0a0a0;opacity:0.8598999977111816"></path></svg>'},function(t,i){t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 11 11"><path style="opacity:0.8598999977111816;fill:#a0a0a0" d="M3.85,11a.58.58,0,0,1-.6-.6V8.8H1.05A1.11,1.11,0,0,1,0,7.7V1.1A1.11,1.11,0,0,1,1.05,0h8.8A1.11,1.11,0,0,1,11,1.1V7.7a1.11,1.11,0,0,1-1.1,1.1H6.45l-2,2a.52.52,0,0,1-.4.2h-.2m.6-3.3V9.4l1.7-1.7H10V1.1H1.15V7.7h3.3M2.25,2.8h6.6V3.9H2.25V2.8m0,2.1h4.9V6H2.25Z"></path></svg>'},function(t,i){t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 12"><path style="opacity:0.8598999977111816;fill:#a0a0a0" d="M6.05,11a5,5,0,0,0,5-5,5,5,0,0,0-5-5,5,5,0,0,0-5,5,5,5,0,0,0,5,5m0-11a5.6,5.6,0,0,1,4.2,1.8A6.37,6.37,0,0,1,12.05,6a6,6,0,0,1-12,0,6,6,0,0,1,6-6m0,3V5.9l3,1.5-.5.6L5.05,6.3V3Z"></path></svg>'},function(t,i){t.exports=" <cnx class=cnx-button-text-label>1 min. story</cnx> "},function(t,i){t.exports='<cnx class="cnx-ui-ps-image-container cnx-ui-ps-image-background"> </cnx>'},function(t,i){t.exports="<cnx class=cnx-ui-ps-video-container></cnx> "},function(t,i,e){"use strict";var s,n=e(5),r=e(0),a=e(1),h=[],o="ResizeObserver loop completed with undelivered notifications.";!function(t){t.BORDER_BOX="border-box",t.CONTENT_BOX="content-box",t.DEVICE_PIXEL_CONTENT_BOX="device-pixel-content-box"}(s||(s={}));var c,l=function(){function t(t,i,e,s){return this.x=t,this.y=i,this.width=e,this.height=s,this.top=this.y,this.left=this.x,this.bottom=this.top+this.height,this.right=this.left+this.width,Object.freeze(this)}return t.prototype.toJSON=function(){var t=this;return{x:t.x,y:t.y,top:t.top,right:t.right,bottom:t.bottom,left:t.left,width:t.width,height:t.height}},t.fromRect=function(i){return new t(i.x,i.y,i.width,i.height)},t}(),u=function(t){return t instanceof SVGElement&&"getBBox"in t},d=function(t){if(u(t)){var i=t.getBBox(),e=i.width,s=i.height;return!e&&!s}var n=t,r=n.offsetWidth,a=n.offsetHeight;return!(r||a||t.getClientRects().length)},f=function(t){var i,e,s=null===(e=null===(i=t)||void 0===i?void 0:i.ownerDocument)||void 0===e?void 0:e.defaultView;return!!(s&&t instanceof s.Element)},p="undefined"!=typeof window?window:{},b=new WeakMap,v=/auto|scroll/,m=/^tb|vertical/,g=/msie|trident/i.test(p.navigator&&p.navigator.userAgent),y=function(t){return parseFloat(t||"0")},w=function(t,i,e){return void 0===t&&(t=0),void 0===i&&(i=0),void 0===e&&(e=!1),Object.freeze({inlineSize:(e?i:t)||0,blockSize:(e?t:i)||0})},x=Object.freeze({devicePixelContentBoxSize:w(),borderBoxSize:w(),contentBoxSize:w(),contentRect:new l(0,0,0,0)}),k=function(t,i){if(void 0===i&&(i=!1),b.has(t)&&!i)return b.get(t);if(d(t))return b.set(t,x),x;var e=getComputedStyle(t),s=u(t)&&t.ownerSVGElement&&t.getBBox(),n=!g&&"border-box"===e.boxSizing,r=m.test(e.writingMode||""),a=!s&&v.test(e.overflowY||""),h=!s&&v.test(e.overflowX||""),o=s?0:y(e.paddingTop),c=s?0:y(e.paddingRight),f=s?0:y(e.paddingBottom),p=s?0:y(e.paddingLeft),k=s?0:y(e.borderTopWidth),S=s?0:y(e.borderRightWidth),O=s?0:y(e.borderBottomWidth),_=p+c,j=o+f,A=(s?0:y(e.borderLeftWidth))+S,I=k+O,T=h?t.offsetHeight-I-t.clientHeight:0,C=a?t.offsetWidth-A-t.clientWidth:0,P=n?_+A:0,M=n?j+I:0,E=s?s.width:y(e.width)-P-C,L=s?s.height:y(e.height)-M-T,R=E+_+C+A,B=L+j+T+I,D=Object.freeze({devicePixelContentBoxSize:w(Math.round(E*devicePixelRatio),Math.round(L*devicePixelRatio),r),borderBoxSize:w(R,B,r),contentBoxSize:w(E,L,r),contentRect:new l(p,o,E,L)});return b.set(t,D),D},S=function(t,i,e){var n=k(t,e),r=n.borderBoxSize,a=n.contentBoxSize,h=n.devicePixelContentBoxSize;switch(i){case s.DEVICE_PIXEL_CONTENT_BOX:return h;case s.BORDER_BOX:return r;default:return a}},O=function(){return function(t){var i=k(t);this.target=t,this.contentRect=i.contentRect,this.borderBoxSize=[i.borderBoxSize],this.contentBoxSize=[i.contentBoxSize],this.devicePixelContentBoxSize=[i.devicePixelContentBoxSize]}}(),_=function(t){if(d(t))return 1/0;for(var i=0,e=t.parentNode;e;)i+=1,e=e.parentNode;return i},j=function(){var t=1/0,i=[];h.forEach(function(e){if(0!==e.activeTargets.length){var s=[];e.activeTargets.forEach(function(i){var e=new O(i.target),n=_(i.target);s.push(e),i.lastReportedSize=S(i.target,i.observedBox),n<t&&(t=n)}),i.push(function(){e.callback.call(e.observer,s,e.observer)}),e.activeTargets.splice(0,e.activeTargets.length)}});for(var e=0,s=i;e<s.length;e++){(0,s[e])()}return t},A=function(t){h.forEach(function(i){i.activeTargets.splice(0,i.activeTargets.length),i.skippedTargets.splice(0,i.skippedTargets.length),i.observationTargets.forEach(function(e){e.isActive()&&(_(e.target)>t?i.activeTargets.push(e):i.skippedTargets.push(e))})})},I=function(){var t,i=0;for(A(i);h.some(function(t){return t.activeTargets.length>0});)i=j(),A(i);return h.some(function(t){return t.skippedTargets.length>0})&&("function"==typeof ErrorEvent?t=new ErrorEvent("error",{message:o}):((t=document.createEvent("Event")).initEvent("error",!1,!1),t.message=o),window.dispatchEvent(t)),i>0},T=[],C=function(t){if(!c){var i=0,e=document.createTextNode("");new MutationObserver(function(){return T.splice(0).forEach(function(t){return t()})}).observe(e,{characterData:!0}),c=function(){e.textContent=""+(i?i--:i++)}}T.push(t),c()},P=0,M={attributes:!0,characterData:!0,childList:!0,subtree:!0},E=["resize","load","transitionend","animationend","animationstart","animationiteration","keyup","keydown","mouseup","mousedown","mouseover","mouseout","blur","focus"],L=function(t){return void 0===t&&(t=0),Date.now()+t},R=!1,B=new(function(){function t(){var t=this;this.stopped=!0,this.listener=function(){return t.schedule()}}return t.prototype.run=function(t){var i=this;if(void 0===t&&(t=250),!R){R=!0;var e,s=L(t);e=function(){var e=!1;try{e=I()}finally{if(R=!1,t=s-L(),!P)return;e?i.run(1e3):t>0?i.run(t):i.start()}},C(function(){requestAnimationFrame(e)})}},t.prototype.schedule=function(){this.stop(),this.run()},t.prototype.observe=function(){var t=this,i=function(){return t.observer&&t.observer.observe(document.body,M)};document.body?i():p.addEventListener("DOMContentLoaded",i)},t.prototype.start=function(){var t=this;this.stopped&&(this.stopped=!1,this.observer=new MutationObserver(this.listener),this.observe(),E.forEach(function(i){return p.addEventListener(i,t.listener,!0)}))},t.prototype.stop=function(){var t=this;this.stopped||(this.observer&&this.observer.disconnect(),E.forEach(function(i){return p.removeEventListener(i,t.listener,!0)}),this.stopped=!0)},t}()),D=function(t){!P&&t>0&&B.start(),!(P+=t)&&B.stop()},F=function(){function t(t,i){this.target=t,this.observedBox=i||s.CONTENT_BOX,this.lastReportedSize={inlineSize:0,blockSize:0}}return t.prototype.isActive=function(){var t,i=S(this.target,this.observedBox,!0);return t=this.target,u(t)||function(t){switch(t.tagName){case"INPUT":if("image"!==t.type)break;case"VIDEO":case"AUDIO":case"EMBED":case"OBJECT":case"CANVAS":case"IFRAME":case"IMG":return!0}return!1}(t)||"inline"!==getComputedStyle(t).display||(this.lastReportedSize=i),this.lastReportedSize.inlineSize!==i.inlineSize||this.lastReportedSize.blockSize!==i.blockSize},t}(),$=function(){return function(t,i){this.activeTargets=[],this.skippedTargets=[],this.observationTargets=[],this.observer=t,this.callback=i}}(),U=new WeakMap,V=function(t,i){for(var e=0;e<t.length;e+=1)if(t[e].target===i)return e;return-1},N=function(){function t(){}return t.connect=function(t,i){var e=new $(t,i);U.set(t,e)},t.observe=function(t,i,e){var s=U.get(t),n=0===s.observationTargets.length;V(s.observationTargets,i)<0&&(n&&h.push(s),s.observationTargets.push(new F(i,e&&e.box)),D(1),B.schedule())},t.unobserve=function(t,i){var e=U.get(t),s=V(e.observationTargets,i),n=1===e.observationTargets.length;s>=0&&(n&&h.splice(h.indexOf(e),1),e.observationTargets.splice(s,1),D(-1))},t.disconnect=function(t){var i=this,e=U.get(t);e.observationTargets.slice().forEach(function(e){return i.unobserve(t,e.target)}),e.activeTargets.splice(0,e.activeTargets.length)},t}(),H=function(){function t(t){if(0===arguments.length)throw new TypeError("Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.");if("function"!=typeof t)throw new TypeError("Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.");N.connect(this,t)}return t.prototype.observe=function(t,i){if(0===arguments.length)throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!f(t))throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element");N.observe(this,t,i)},t.prototype.unobserve=function(t){if(0===arguments.length)throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!f(t))throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element");N.unobserve(this,t)},t.prototype.disconnect=function(){N.disconnect(this)},t.toString=function(){return"function ResizeObserver () { [polyfill code] }"},t}();e.d(i,"a",function(){return q});class q{constructor(t){this.dr=[],this.pr=(t,i)=>{t.forEach(t=>{this.br(t.target).forEach(t=>{t&&(Object(a.i)(t.element),t.callback(t.element))})})};try{const i=t.ResizeObserver||H;this.vr=new i(this.pr)}catch(t){Object(n.a)({message:"ResizeObserver_constructor",callStack:t.stack,exception:t.message,level:r.ProtoLoggingLevelEnum.FATAL})}}on(t,i){this.mr(t,i)||(this.dr.push({element:t,callback:i}),this.vr.observe(t))}off(t,i){const e=this.mr(t,i);if(!e)return;this.vr.unobserve(e.element);const s=this.dr.indexOf(e);s>=0&&this.dr.splice(s,1)}destroy(){if(this.dr)for(;this.dr.length>0;)this.dr.pop();this.vr.disconnect()}br(t){return this.dr.filter(i=>i.element===t)}mr(t,i){return this.dr.find(e=>e.element===t&&e.callback===i)}}},function(t,i,e){"use strict";var s,n,r=e(28),a=e(12),h=e(52);!function(t){t.Minimized="minimized",t.Collapsed="collapsed",t.Normal="normal",t.Expanded="expanded",t.Fullscreen="fullscreen"}(s||(s={})),function(t){t.StateChanged="stateChanged"}(n||(n={}));class o{constructor(t){this.mediator=t}computeState(t){const i=this.gr(t);this.yr&&this.yr.name===i||this.mediator.publish(this,n.StateChanged,{payload:{state:i}}),this.yr={dimensions:t,name:i},this.wr||i!==s.Normal||(this.wr=Object.assign({},this.yr))}setPlayerState(t){this.yr&&this.yr.name===t||this.mediator.publish(this,n.StateChanged,{payload:{state:t}}),this.yr={name:t},this.wr||t!==s.Normal||(this.wr=Object.assign({},this.yr))}get currentState(){return this.yr&&this.yr.name}gr(t){if(!this.wr)return s.Normal;const{width:i,height:e}=this.wr.dimensions,n=i*e,r=t.width*t.height;switch(!0){case n<r:return s.Expanded;case n>r:return s.Collapsed;default:return s.Normal}}}var c=e(17),l=e(5),u=e(0);e.d(i,"a",function(){return d});class d extends c.a{constructor(t,i,e){super(),this.xr=t,this.kr=i,this.Sr=new o(this),this.Or=!1,this._r={[a.a.AdError]:()=>this.jr(),[a.a.PlayError]:()=>this.Ar(),[a.a.RenderError]:()=>this.Ir(),[a.a.AdImpression]:()=>this.Tr(),[a.a.AdComplete]:()=>this.Cr(),[a.a.AdVideoStart]:({adVideoStartMetadata:t})=>this.Pr(t),[a.a.AdVideoFirstQuartile]:()=>this.Mr(),[a.a.AdVideoMidpoint]:()=>this.Er(),[a.a.AdVideoThirdQuartile]:()=>this.Lr(),[a.a.AdVideoComplete]:()=>this.Rr(),[a.a.VolumeChange]:({volume:t})=>this.Br(t),[a.a.AdPause]:()=>this.Dr(),[a.a.AdPlay]:()=>this.Fr(),[a.a.AdSkipped]:()=>this.$r(),[a.a.AdClickThru]:()=>this.Ur(),[a.a.AdInteraction]:()=>this.Vr(),[a.a.AdLoaded]:({adLoadedMetadata:t})=>this.Nr(t),[a.a.AdStateChange]:({adStateChangedMetadata:t})=>this.Hr(t),[a.a.PlayerResized]:({playerDimensionsMetadata:t})=>this.qr(t),[a.a.OnEnterFullscreen]:()=>this.zr(),[a.a.PlayerCollapsed]:()=>this.Wr(),[a.a.PlayerExpanded]:()=>this.Gr(),[a.a.Destroy]:()=>this.unsubscribeAll(this.Sr)},this.Jr=t=>{try{const i=this._r[t.name];if(!i)return;i(t.metadata)}catch(t){Object(l.a)({message:"SessionClientWrapper_omsdk__onEventStorageEvent",exception:t.message,callStack:t.callStack,level:u.ProtoLoggingLevelEnum.WARNING})}};try{const{AdSession:t,AdEvents:i,MediaEvents:s}=this.xr,r=this.Qr(e);this.Xr=new t(r),this.Yr=new i(this.Xr),this.Kr=new s(this.Xr),this.kr.subscribe(this.Jr),this.subscribe(n.StateChanged,this.Sr,({payload:{state:t}})=>{this.Zr(t)}),this.ta()}catch(t){Object(l.a)({message:"SessionClientWrapper_omsdk_classes_init_err",exception:t.message,callStack:t.callStack,level:u.ProtoLoggingLevelEnum.WARNING})}}jr(){this.Xr.error(r.d.Video,a.a.AdError)}Ar(){this.Xr.error(r.d.Video,a.a.PlayError)}Ir(){this.Xr.error(r.d.Generic,a.a.RenderError)}Qr(t){const{Partner:i,Context:e}=this.xr;return new e(new i(r.i,t))}Tr(){this.Or=!0,this.Yr.impressionOccurred();const t=this.Sr.currentState;t!==s.Normal&&this.Zr(t)}Cr(){this.Or=!1}Pr(t){const{duration:i,mediaPlayerVolume:e}=t;this.Kr.start(i,e)}Mr(){this.Kr.firstQuartile()}Er(){this.Kr.midpoint()}Lr(){this.Kr.thirdQuartile()}Rr(){this.Kr.complete()}Br(t){this.Or&&this.Kr.volumeChange(t)}Dr(){this.Kr.pause()}Fr(){this.Kr.resume()}$r(){this.Kr.skipped()}Ur(){this.Kr.adUserInteraction(r.g.Click)}Vr(){this.Kr.adUserInteraction(r.g.InvitationAccept)}Nr(t){const{isSkippable:i,skipOffset:e,isAutoPlay:s}=t,{VastProperties:n}=this.xr,r=new n(i,e,s,this.ia);this.Yr.loaded(r)}Hr({state:t}){this.ia=r.h[h.a[t]]}Zr(t){t&&this.Kr.playerStateChange(t)}ea(t){this.Sr.computeState(t)}sa(t){this.Sr.setPlayerState(t)}qr(t){this.ea(t)}zr(){this.sa(s.Fullscreen)}Wr(){this.sa(s.Minimized)}Gr(){this.sa(s.Normal)}ta(){this.Xr.registerSessionObserver(t=>{t.type===r.b.SessionStart?this.na(t):t.type===r.b.SessionError&&Object(l.a)({message:"SessionClientWrapper_omsdk_session_error",exception:t.type,callStack:JSON.stringify(t),level:u.ProtoLoggingLevelEnum.WARNING,throttle:1,sendMaxLog:!1})})}na(t){t.data.creativeType===r.c.DefinedByJavascript&&this.Xr.setCreativeType(r.c.Video),t.data.impressionType===r.f.DefinedByJavascript&&this.Xr.setImpressionType(r.f.BeginToRender)}}},function(t,i,e){"use strict";var s,n=e(1);class r{constructor(t){this.ra=[],this.aa=t=>{this.ra.push(t)},this.ha=t.subscribe(this.aa)}get cachedEvents(){return this.ra}destroy(){this.ra=null,this.ha()}}!function(t){t.AdobeAnalytics="AdobeAnalytics",t.MoatAnalytics="MoatAnalytics"}(s||(s={}));const a={AdobeAnalytics:{id:"cnx-adobe-analytics-plugin",src:"//cds.connatix.com/p/plugins/connatix.external.measurement.js"},MoatAnalytics:{id:"cnx-moat-analytics-plugin",src:"//cds.connatix.com/p/plugins/connatix.moat.plugin.js"}};var h=e(2),o=e(5),c=e(0),l=e(6),u=e(32),d=e(7),f=e(18),p=e(19);e.d(i,"a",function(){return b});class b{constructor(t,i,e,s,n){this.kr=i,this.oa=e,this.ca=s,this.la=n,this.ua=[],this.da=t=>{try{this.fa(t);const i=this.ua.find(i=>i.name===t.type);let e;if(i&&!i.started){i.started=!0;const t=i.eventsCacheHandler;e=t.cachedEvents,t.destroy()}const{adobeAnalyticsSettings:s,moatAnalyticsSettings:n,_debugLogging:r}=this.ca.apiConfig.settings.plugins,{secondLevelDomain:a,playerId:h}=this.ca,l={cachedEvents:e,adobeAnalyticsSettings:s,moatAnalyticsSettings:n,_debugLogging:r,secondLevelDomain:a,playerId:h,pageName:this.pa,pageUrl:this.qe,version:p.a.version,delegateHandlers:this.oa,playerContainer:this.la,playerWindow:window};t.getInstance().start(this.kr,l)}catch(t){Object(o.a)({callStack:t.stack,exception:t.message,level:c.ProtoLoggingLevelEnum.FATAL,message:"PluginsHandler_initPlugin"})}};const r=Object(d.f)(t);this.ue=r.topFrame,this.qe=Object(d.e)(r,this.ue),this.qe=Object(f.d)(this.qe),this.pa=Object(f.a)(this.qe)}start(){this.ba(),this.va(),this.ue.cnxPlugins.pluginsHandlers.push(this.da)}ba(){let t=[];Array.isArray(this.ue.cnxPlugins)&&this.ue.cnxPlugins.length>0&&(t=this.ue.cnxPlugins).forEach(t=>this.da(t)),Object(h.f)(this.ue.cnxPlugins)||this.ma(t)}va(){const t=this.ga();Object(l.h)(t)&&this.ya(t)}wa(t){const i=this.ue.cnxPlugins.cachedPlugins;if(Object(l.h)(i))return i.find(i=>i.type===t)}fa(t){this.wa(t.type)||this.ue.cnxPlugins.cachedPlugins.push(t)}ma(t){this.ue.cnxPlugins={cachedPlugins:t,pluginsHandlers:[],push:function(t){this.pluginsHandlers.forEach(i=>{i(t)})}}}ya(t){t.forEach(t=>{this.wa(t)||this.ua.push({name:t,started:!1,eventsCacheHandler:new r(this.kr)})}),this.ua.forEach(({name:t})=>this.xa(t))}ka(t){return Object(u.a)(t).every(t=>Object(h.h)(t))}ga(){const t=[];return this.ca.apiConfig.settings.plugins.adobeAnalyticsSettings&&this.ka(this.ca.apiConfig.settings.plugins.adobeAnalyticsSettings)&&t.push(s.AdobeAnalytics),this.ca.moatTrackingEnabled&&t.push(s.MoatAnalytics),t}xa(t){const i=a[t];this.ue.document.getElementById(i.id)||Object(n.A)(i,this.ue.document.head,this.ue,null,null,!0,"PluginsHandler_unable_to_insert_plugin_script")}}},function(t,i,e){"use strict";var s=e(3),n=e(8),r=e(20),a=e(6),h=e(1);const o={MAIN:0,AUXILIARY:1,SECONDARY:2,FOURTH:3,FIFTH:4};function c(t){return t.button===o.MAIN}var l=e(14),u=e(2);e.d(i,"a",function(){return b});const d=25,f=250,p=30;class b{constructor(t,i,e){this.Sa=t,this.Xn=i,this.mediator=null,this.Oa=p,this._a=f,this.ja=d,this.Aa=[],this.Ia={},this.Ta=0,this.Ca=0,this.Pa=!0,this.Ma=null,this.Ea=!1,this.La=!1,this.Ra=!1,this.Ba=!1,this.Da=0,this.Fa=0,this.$a=null,this.Ua=null,this.Va=null,this.Na=!0,this.Ha=t=>{this.Xn?(t.element.addEventListener("touchstart",this.qa),t.element.addEventListener("touchmove",this.za),t.element.addEventListener("touchend",this.Wa),t.element.addEventListener("touchcancel",this.Ga)):(t.element.addEventListener("mousedown",this.Ja),t.element.addEventListener("mouseup",this.Qa))},this.Xa=t=>{this.Xn?(t.element.removeEventListener("touchstart",this.qa),t.element.removeEventListener("touchmove",this.za),t.element.removeEventListener("touchend",this.Wa),t.element.removeEventListener("touchcancel",this.Ga)):(t.element.removeEventListener("mousedown",this.Ja),t.element.removeEventListener("mouseup",this.Qa))},this.qa=t=>{t.stopPropagation();const i=this.Ya(t);this.Va=i,this.La=!1,this.Ka(i,r.c.Hold)&&this.Za(t);const e=this.th(t);this.Ca=e.eventX,this.Ta=e.eventY,this.ih(t,i,r.b.InteractionStart),this.Pa=!0},this.za=t=>{t.stopPropagation();const i=this.Ya(t),e=this.th(t);if(this.Pa&&(Math.abs(e.deltaXFromStart)>this.ja||Math.abs(e.deltaYFromStart)>this.ja)&&(this.Pa=!1),this.Ea||this.Ka(i,r.c.Swipe)){if(null===this.$a&&this.eh(i,e),this.$a===r.a.Y)return;t.preventDefault(),null===this.Ua&&(this.Ua=Object(h.P)(this.Sa,()=>{this.Ua=null,this.sh(e.deltaXFromStart),i.mediator.publish(i.context,n.a[n.a.SwipeMove],{payload:e.deltaXFromStart})}))}},this.Wa=t=>{const i=this.Ya(t);if(this.Va===i){const e=this.th(t);t.cancelable&&this.Ka(i,r.c.Hold)&&Math.abs(e.deltaXFromStart)<this.ja&&Math.abs(e.deltaYFromStart)<this.ja&&t.preventDefault(),this.nh(t,i,e),this.rh(e)===r.a.Y&&Math.abs(e.deltaYFromStart)>=this.ja?this.Na&&i.mediator.publish(i.context,n.a[n.a.Scroll]):!this.Pa||this.Ra||this.La||i.mediator.publish(i.context,n.a[n.a.Click])}this.Va=null},this.Ga=t=>{const i=this.Ya(t);this.nh(t,i),this.Va=null},this.Ja=t=>{if(!c(t))return void this.ah(r.b.InteractionStart,t);const i=this.Ya(t);this.Va=i,t.stopPropagation(),t.preventDefault(),this.Ka(i,r.c.Hold)&&this.Za(t),this.ih(t,i,r.b.InteractionStart)},this.Qa=t=>{if(!c(t)||!this.Va)return this.ah(r.b.Interaction,t),void this.ah(r.b.InteractionEnd,t);const i=this.Ya(t);t.stopPropagation(),t.preventDefault(),this.ih(t,this.Va,r.b.Interaction),this.ih(t,this.Va,r.b.InteractionEnd),(this.Ea||this.Ka(i,r.c.Hold))&&this.hh(t),this.Va===i&&(this.ih(t,i,r.b.Click),i.mediator.publish(i.context,n.a[n.a.Click])),this.Va=null},this.oh=t=>{if(!c(t))return this.ah(r.b.Interaction,t),void this.ah(r.b.InteractionEnd,t);this.Va=null},this.lh=t=>{if(!c(t)||!this.Va)return this.ah(r.b.Interaction,t),void this.ah(r.b.InteractionEnd,t);this.ih(t,this.Va,r.b.Interaction),this.ih(t,this.Va,r.b.InteractionEnd),(this.Ea||this.Ka(this.Va,r.c.Hold))&&this.hh(t),this.Va=null};const{leftTapSizeThreshold:s,holdTriggerDuration:a,scrollThreshold:o}=Object.assign({},e);this.Oa=s||this.Oa,this._a=a||this._a,this.ja=o||this.ja,this.Sa.document.addEventListener("mousedown",this.oh),this.Sa.document.addEventListener("mouseup",this.lh)}register(t,i,e,s={},n=[]){const r={element:t,mediator:i,context:e,callbacks:s||{},allowedSpecialInteractions:n,disabledSpecialInteractions:[]};this.Aa.push(r),this.Ha(r)}unregister(t){const i=this.Aa.find(i=>i.element===t);i&&(this.Aa=this.Aa.filter(i=>i.element!==t),this.Xa(i))}unregisterAll(t){const i=this.Aa.filter(i=>i.mediator===t);i.forEach(this.Xa),this.Aa=Object(a.a)(this.Aa,i)}addGlobalActions(t,i){Object.keys(Object.assign({},i)).forEach(e=>{this.Ia[e]=this.Ia[e]||[],this.Ia[e].push({initiator:t,action:i[e]})})}removeGlobalActions(t){Object.keys(this.Ia).forEach(i=>{this.Ia[i].some(i=>i.initiator===t)&&(this.Ia[i]=this.Ia[i].filter(i=>i.initiator!==t))})}disableSpecialInteractions(t){const i=this.uh(t);i.disabledSpecialInteractions=Object(a.n)(i.allowedSpecialInteractions)}enableSpecialInteractions(t){this.uh(t).disabledSpecialInteractions=[]}getNonInterruptibleInteractions(){return[n.a.HoldStart,n.a.HoldEnd,n.a.SwipeMove,n.a.SwipeEnd,n.a.Scroll]}disableScrollEvent(){this.Na=!1}enableScrollEvent(){this.Na=!0}destroy(){clearTimeout(this.Ma),this.Aa.forEach(this.Xa),this.Sa.document.removeEventListener("mousedown",this.oh),this.Sa.document.removeEventListener("mouseup",this.lh)}dh(t){const i=this.Ya(t),e=i.element.getBoundingClientRect(),s=this.fh(t),n=e.width,r=Object(l.g)(0,n,0,100,s);this.ph(i,this.Oa,r)}ph(t,i,e){e<i?t.mediator.publish(t.context,n.a[n.a.TapLeft]):t.mediator.publish(t.context,n.a[n.a.TapRight])}Za(t){clearTimeout(this.Ma),this.Ea=!1,this.Ra=!1;const i=this.Ya(t);Object(h.a)(i.element,s.h.OnHold),this.Ma=setTimeout(()=>{this.Ea=!0,this.Pa&&(this.Ra=!0,i.mediator.publish(i.context,n.a[n.a.HoldStart]))},this._a)}hh(t){clearTimeout(this.Ma);const i=this.Ya(t);Object(h.L)(i.element,s.h.OnHold),this.Ea?(this.Ea=!1,this.Ra&&(this.Ra=!1,i.mediator.publish(i.context,n.a[n.a.HoldEnd]))):(this.La=!0,this.dh(t))}nh(t,i,e){e=e||this.th(t),t.stopPropagation(),this.ih(t,i,r.b.Interaction),this.ih(t,i,r.b.InteractionEnd),(this.Ea||this.Ba||this.Pa&&this.Ka(i,r.c.Hold))&&this.hh(t),(this.Ba||this.Ka(i,r.c.Swipe))&&this.bh(i,e)}eh(t,i){this.$a=this.rh(i),this.$a===r.a.X&&(this.Ba=!0,this.Ea||(clearTimeout(this.Ma),this.Ma=null,this.Ea=!0,t.mediator.publish(t.context,n.a[n.a.HoldStart])))}bh(t,i){if(this.Ba){const e=this.vh(i);t.mediator.publish(t.context,n.a[n.a.SwipeEnd],{payload:e})}Object(h.e)(this.Sa,this.Ua),this.Ua=null,this.Ba=!1,this.Ca=null,this.Ta=null,this.$a=null,this.Da=0,this.Fa=0}sh(t){this.Fa<this.ja?this.Fa++:(this.Da=t,this.Fa=0)}rh(t){return Math.abs(t.deltaXFromStart)>=Math.abs(t.deltaYFromStart)?r.a.X:r.a.Y}vh(t){return t.deltaXFromStart-this.Da<0?r.d.Left:r.d.Right}th(t){const i=t.changedTouches[0];return{deltaXFromStart:i.clientX-this.Ca,deltaYFromStart:i.clientY-this.Ta,eventX:i.clientX,eventY:i.clientY}}Ya(t){return this.Va||this.uh(t.currentTarget)}uh(t){return this.Aa.find(i=>i.element===t)}fh(t){const i=this.Ya(t);if(this.Xn){return t.changedTouches[0].clientX-i.element.getBoundingClientRect().left}return t.offsetX}Ka(t,i){return t.allowedSpecialInteractions.includes(i)&&!t.disabledSpecialInteractions.includes(i)}ih(t,i,e){const s=i.callbacks[e];Object(u.b)(s)&&s(t),this.ah(e,t)}ah(t,i){var e;null===(e=this.Ia[t])||void 0===e||e.forEach(t=>{t.action(i)})}}},function(t,i,e){"use strict";var s,n=e(2),r=e(0);!function(t){t[t.Desktop=2]="Desktop",t[t.SmartTV=3]="SmartTV",t[t.Smartphone=4]="Smartphone",t[t.Tablet=5]="Tablet",t[t.GameConsole=6]="GameConsole",t[t.Unrecognized=7]="Unrecognized"}(s||(s={}));const a={[r.ProtoDeviceType.Desktop]:s.Desktop,[r.ProtoDeviceType.Smartphone]:s.Smartphone,[r.ProtoDeviceType.Tablet]:s.Tablet,[r.ProtoDeviceType.GameConsole]:s.GameConsole,[r.ProtoDeviceType.SmartTV]:s.SmartTV,[r.ProtoDeviceType.WearableComputer]:s.Unrecognized,[r.ProtoDeviceType.PDA]:s.Unrecognized,[r.ProtoDeviceType.Unrecognized]:s.Unrecognized},h="https://s.srvsynd.com/2/234175/analytics.js?dt=2341751597675869250012&di=[DOMAIN]&ui=[FS_USER_ID]&md=[FS_MEDIA_TYPE]&ap=[APP_BUNDLE]&sr=[CNX_SUPPLIER_ID]&pp=[PUBLISHER_ID]&ti=[SESSION_ID]&de=[FS_DEVICE_TYPE]&to=[MGTO]&pv=[MGID]",o="cnx_fraud_sensor",c="00000000-0000-0000-0000-000000000000",l=2;e.d(i,"a",function(){return u});class u{constructor(t,i,e,s){this.mh=t,this.gh=i,this.pn=e,this.yh(s)}addFraudSensorScript(){if(this.gh.getElementById(o))return;const t={id:o,src:this.mh.setupMacros(h)};this.gh.insertScript(t,null,"FraudSensor_script_error")}yh(t){t=Object(n.h)(t)?t:c;const{lookupId:i,lookupResponseCode:e,publisherAdsTxt:s}=this.pn,r=a[this.pn.deviceType];this.mh.setPublisherId(s),this.mh.setUserId(t),this.mh.setFraudSensorMacros({lookupId:i,lookupResponseCode:e,deviceType:r,mediaType:l})}}},function(t,i,e){"use strict";var s=e(25),n=e(0),r=e(19),a=e(13),h=e(10);class o{constructor(){this.wh=null,this.xh=0}kh(){if(null===this.wh)return;const t=(new Date).getTime();this.xh=t-this.wh}startCountingTime(){this.wh=(new Date).getTime()}stopCountingTime(){this.kh(),this.wh=null}fetchTime(t){this.kh();const i=Math.round(this.xh/h.f);return this.xh=0,null!==this.wh&&this.startCountingTime(),i>t?t:i}}var c=e(17),l=e(2),u=e(36),d=e(34),f=e(7),p=e(6),b=e(31);e(48);e.d(i,"a",function(){return m});const v=500;class m extends c.a{constructor({userId:t,playerId:i,geoLocation:e,browser:s,sessionId:n,pageUrl:a,bundleId:h,Sh:c,userManagerService:l,customParam1:d,customParam2:b,customParam3:v,customParam4:m,customParam5:g,abTestId:y,explorationMode:w}){super(),this.hasGdprConsentPayload=!1,this.Oh={},this._h={},this.jh=!1,this.Ah=!1,this.Ih=!1,this.Th=!1,this.Ch=[],this.Ph=[],this.Mh=[],this.Eh=5e3,this.Lh=!1,this.Sh=!1,this.Rh=[{delay:7,timesRepeatDelay:1},{delay:8,timesRepeatDelay:1},{delay:15,timesRepeatDelay:3},{delay:30,timesRepeatDelay:2},{delay:60,timesRepeatDelay:1},{delay:120,timesRepeatDelay:1},{delay:300,timesRepeatDelay:8},{delay:600,timesRepeatDelay:13},{delay:1800}],this.Bh=0,this.Dh=[];Object(p.g)(i,["47286b3d-90c5-4634-ac87-0061769d15a8","2a9c6007-6213-4187-9b0d-1a6e9d7826f0","dac6e2fc-472a-46e6-8a6b-b5bea57a50bc","112cdb88-91ea-452d-990c-03a7d3118d2c","075127fa-fec9-4ee7-9a4c-bfb4478a4412","2febda63-6ec9-4951-9c07-5939376b8226","55ca7ad7-f311-4854-b29a-a2d590760493","62bbbcda-024e-4769-968a-db84830f65cc","648d8d4d-fa41-496c-8415-26f3ad2d1989","6fdffbf5-b899-44ac-96a6-4eab50497b5b","b6094ff6-54a0-4ddd-b799-66193f8346c7","c81bb1f8-de80-428b-ae42-1ce0e75d3998","ddbadb2c-9e78-442a-b757-a49113a791ed","20d71b12-41ce-45db-8135-1a3cd111b25d","13e4ee65-6bed-40e6-8e41-4ef9087c294b","62d76d13-cd32-4021-a243-98b2444cd14d","b1c78103-4bb7-47ac-9cfe-dcd9b603e8a2","77a7ef56-c608-456d-8ff9-a382d139ff95","5d8eeea7-4ee0-4ad7-9023-97fbc8d97fa7","ed379095-5f46-4c1c-917d-ad063d84eaf1","0527ea2b-cb60-408e-85c1-e500bee128c3","148a0193-55d6-47a1-8a33-2c4ba9c97b5e","27937f13-f008-457b-938c-87c9fe447de8","4c2b6243-5715-4651-a27e-f6052b61af80","10efae62-af17-4d47-a65e-baabc2b60496","65d7cfb4-70a5-480a-95a7-25a713d61695","6e3ef6a1-2ccf-48b3-973c-55244487dc38","13426e00-211b-4c70-981e-d71a622543cf","728b020d-aa32-4009-ad0d-9c1b6b57b3c9","77e6bf0d-befe-4364-9f95-df37d478f297","19e14bfd-d5ef-4f82-8c9d-ea19512d0793","8c175c10-202a-4275-9e10-5ab9b216a61d","9429315c-a644-4fbf-938f-30cd23f2b098","a1bf91f8-98cb-4642-a2ec-2124782bf273","3025741e-c645-46ee-93db-c6b1c5cdb842","c32f1fb1-68d7-41cc-9a33-5f541d5b0cfd","c92ebcd4-b4c1-449e-809a-6744a0cd21d1","d0ad8360-284d-47d3-861d-6be5b09619e1","9b3b0ce6-cae5-43e0-b669-023c76e9127f","bbb6ab44-3b47-44d8-990c-642de4bb12ba","eeb97179-3486-4ca8-968c-c18f49e3be4a","ffc13c6a-6d6b-48dc-9965-d5a5adfea0f1","a8ec4044-50c7-46b1-8e8a-4da98ff95aed","ce2e36d0-8e66-4433-bb3c-47e78ad6f250","079b7e9c-6d8f-4772-b5d7-579c6f5f873b","04f884af-47ec-4754-a913-b38823f701a5","2e7b1501-840a-46f0-a3ae-015008b666d8","2ea0b3ba-66c9-46f4-a4a3-300f1bb36a93","3e1fcf24-0e7a-4aeb-9dce-a98d552dd7c7","5156a44c-a3d9-40ad-a592-b6ffb8019b2a","6b55d261-63c7-4349-804f-3d9bbd7aac85","8d95a3a5-ffa0-4932-8208-e06a8f659b55","a49d8dbb-b91f-41a3-b5a8-8a5b053af776","a585524a-2784-4b2d-924b-d872994cb7a8","225f96d6-6d58-483b-8856-ddffd61bac40","ad5efc62-db13-40f2-a76e-df9b90a2687b","08b46451-1849-433c-9019-85b2aeca87d1","bb5ad3b4-8fcd-4cb8-af70-383839db3712","e68c7376-e6c7-44ff-ad65-775691372f19","f5a3920b-15fc-4b52-8586-16091b9bedde","0c83603a-5d0c-4b62-a613-5f2db36510d3","0f3c7056-05d4-46fe-824c-32df48115369","81329826-a1f3-4f0b-86e1-2c1fb58cac85","a7b4eaad-8dea-41d5-8bd0-c8f13cd84296","c1282781-f75a-46b7-b774-5695e0a74c3d","d47819ae-be18-4054-8ffd-dc86eb6fdb5a"])?this.Oh.trackAllRequests=!0:this.Oh.trackAllRequests=1===Object(f.l)([99,1]),this.Fh=l,this.Oh.userId=t,this.Oh.playerId=i,this.Oh.geo=e,this.Oh.browser=s,this.Oh.version=r.a.version,this.Oh.sessionId=n,this.Oh.clientAb0=u.a.clientAb0,this.Oh.clientAb1=u.a.clientAb1,this.Oh.serverAb0=u.a.serverAb0,this.Oh.serverAb1=u.a.serverAb1,this.Oh.pageUrl=a,this.Oh.bundleId=h,this.Oh.customParam1=d,this.Oh.customParam2=b,this.Oh.customParam3=v,this.Oh.customParam4=m,this.Oh.customParam5=g,this.Oh.abTestId=y,this.$h=new o,this.Uh=new o,this.Vh=w}Nh(t,i=n.ProtoTrackingRequest,e,r=!0){return this.Oh.pageInFocus=b.a.pageFocus,s.a.sendProtoBeaconRequest({endpoint:t,ProtoRequest:i,requestData:Object.assign({trackingRequestMeta:r?this.Oh:void 0},e),logError:!1})}Hh(t,i=n.ProtoTrackingRequest,e,a=!0){this.Oh.pageInFocus=b.a.pageFocus;const h=s.a.sendProtoRequest({endpoint:t,ProtoRequest:i,ProtoResponse:n.ProtoTrackingResponse,requestData:Object.assign({trackingRequestMeta:a?this.Oh:void 0},e),queryParams:{[d.b]:r.a.version},withCredentials:!0,logError:!0});return h.then(t=>{const i=t.platformCappedLineItemIdList;Object(p.h)(i)&&this.Dh.forEach(t=>{t.setPlatformCappedLineItemIdList(i)}),Object(l.e)(t.impressionRevenue)&&this.qh&&this.qh.notifyImpressionRevenue(t.impressionRevenue)}).catch(t=>{}),h}addPlatformCappedLineItemSubscriber(t){this.Dh.push(t)}removePlatformCappedLineItemSubscriber(t){const i=this.Dh.indexOf(t);i>=0&&this.Dh.splice(i,1)}setImpressionRevenueSubscriber(t){this.qh=t}unsubscribeToImpressionRevenue(t){this.qh!==t&&(this.qh=void 0)}zh(t,i,e=n.ProtoMediaTrackingRequest){const s=Object.assign({},i);Object(l.h)(this._h.mediaId)&&(s.mediaGuid=this._h.mediaId),this.Hh(t,e,s)}Wh(){this.Lh||(this.Lh=!0,this.Hh(a.a.endPoints.tracking.playerStart,n.ProtoTrackingRequest))}Gh(t,i,e=n.ProtoMediaTrackingRequest){return this.Hh(t,e,Object.assign({mediaGuid:this._h.mediaId},i))}Jh(t){this.zh(a.a.endPoints.tracking.media_quartile,{baseMeta:this._h,mediaId:this._h.mediaId,quartile:t})}Qh(){this.Xh(this.Ph,this.Ch,this.Mh),this.Ph=[],this.Ch=[],this.Mh=[]}Xh(t,i,e){if(0===t.length&&0===i.length&&0===e.length)return;e.forEach(t=>{t.error&&t.error.length>0&&(t.error=t.error.substring(0,v))});const s={mediaGuid:this._h.mediaId,prebids:t,bids:i,postBids:e,logEveryting:this.Sh,hasGdprConsentPayload:this.hasGdprConsentPayload,gdprConsentMode:this.Fh.gdprConsentMode,useExploration:this.Vh};this.Hh(a.a.endPoints.tracking.bids,n.ProtoBidTrackingsRequest,s)}Yh(t){this.Hh(a.a.endPoints.tracking.ad_click,n.ProtoAdClickTrackingRequest,Object.assign({mediaGuid:this._h.mediaId},t))}Kh(t){this.Nh(a.a.endPoints.tracking.heavy_ad_intervention,n.ProtoHeavyAdTrackingRequest,t)}Zh(){const t=this.Rh[this.Bh];clearTimeout(this.to),this.to=setTimeout(()=>{this.io(t.delay),Object(l.e)(t.timesRepeatDelay)&&t.timesRepeatDelay--,0===t.timesRepeatDelay&&this.Bh++,this.Zh()},1e3*t.delay)}io(t){this.Hh(a.a.endPoints.tracking.session_time,n.ProtoSessionTimeTrackingRequest,{trackingRequestMeta:this.Oh,sessionTime:t,timePlayed:this.$h.fetchTime(t),timePlayedInView:this.Uh.fetchTime(t)})}eo(t){const{sessionId:i}=this.Oh;this.Hh(a.a.endPoints.tracking.adOpportunity,n.ProtoAdOpportunityRequest,{sessionId:i,adBreak:t.adBreakType})}setNewMedia(t){this._h=t}updateMediaMetadata(t){this._h=t}setImplementationTypeOnMeta(t){this.Oh.implementationType=t}setMediaStart(){this.Jh(n.ProtoQuartilesEnum.Start)}setContentStart(){this.Wh()}setSessionPlayback(t){this.Ih!==t&&(this.Ih=t,this.Th&&this.Ih&&this.Uh.startCountingTime(),this.Ih?this.$h.startCountingTime():(this.$h.stopCountingTime(),this.Uh.stopCountingTime()))}setSessionViewability(t){this.Th!==t&&(this.Th=t,this.Th&&this.Ih?this.Uh.startCountingTime():this.Th||this.Uh.stopCountingTime())}trackSessionRendered(t){this.jh||(this.Hh(a.a.endPoints.tracking.session_rendered,n.ProtoTrackingRequest,{hasAdBlocker:t}),this.jh=!0,this.Zh())}trackSessionViewability(){!this.Ah&&this.Lh&&(this.Hh(a.a.endPoints.tracking.session_view),this.Ah=!0)}trackMediaQuartile(t){this.Jh(t)}trackMediaClick(t=n.ProtoMediaClickTypeEnum.Click){const i={type:t,clickUrl:t===n.ProtoMediaClickTypeEnum.UrlClick?this._h.clickUrl:void 0,slideTitle:this._h.slideTitle,slideNumber:this._h.slideNumber,slideMediaType:this._h.slideMediaType};this.zh(a.a.endPoints.tracking.media_click,i,n.ProtoMediaClickTrackingRequest)}setAdStart(){this.Wh()}startBidRequests(){this.so=setInterval(()=>{this.Qh()},this.Eh)}addPrebid(t){this.Ph.push(t)}addPostBid(t){Object(l.g)(t.error)||(t.error=JSON.stringify(t.error)),this.Mh.push(t)}addBid(t){this.Ch.push(t)}trackVideoAdImpression(t){return this.Gh(a.a.endPoints.tracking.ad_impression,t,n.ProtoVideoAdImpressionRequest)}trackVideoAdImpressionViewable(t){return this.Gh(a.a.endPoints.tracking.ad_impression_viewable,t,n.ProtoVideoAdImpressionViewableRequest)}trackVideoAdQuartile(t){this.zh(a.a.endPoints.tracking.ad_quartile,t,n.ProtoVideoAdQuartilesRequest)}trackAdClick(t){this.Yh(t)}trackAdOpportunity(t){this.eo(t)}trackSessionAdBlocker(t){this.Hh(a.a.endPoints.tracking.sessionAdBlocker,n.ProtoSessionAdBlockerRequest,{trackingRequestMeta:this.Oh,adBlockDetectionType:t})}getMetadataModel(){return this.Oh}updateMetadataModel(t){this.Oh=Object.assign(Object.assign({},this.Oh),t)}trackHeavyAdIntervention(t){this.Kh(t)}destroy(){clearInterval(this.to),clearInterval(this.so)}}},function(t,i,e){"use strict";var s=i;function n(){s.Reader.te(s.BufferReader),s.util.te()}s.build="minimal",s.Writer=e(70),s.BufferWriter=e(145),s.Reader=e(72),s.BufferReader=e(146),s.util=e(41),s.rpc=e(147),s.roots=e(149),s.configure=n,s.Writer.te(s.BufferWriter),n()},function(t,i,e){"use strict";t.exports=function(t,i){var e=new Array(arguments.length-1),s=0,n=2,r=!0;for(;n<arguments.length;)e[s++]=arguments[n++];return new Promise(function(n,a){e[s]=function(t){if(r)if(r=!1,t)a(t);else{for(var i=new Array(arguments.length-1),e=0;e<i.length;)i[e++]=arguments[e];n.apply(null,i)}};try{t.apply(i||null,e)}catch(t){r&&(r=!1,a(t))}})}},function(t,i,e){"use strict";var s=i;s.length=function(t){var i=t.length;if(!i)return 0;for(var e=0;--i%4>1&&"="===t.charAt(i);)++e;return Math.ceil(3*t.length)/4-e};for(var n=new Array(64),r=new Array(123),a=0;a<64;)r[n[a]=a<26?a+65:a<52?a+71:a<62?a-4:a-59|43]=a++;s.encode=function(t,i,e){for(var s,r=null,a=[],h=0,o=0;i<e;){var c=t[i++];switch(o){case 0:a[h++]=n[c>>2],s=(3&c)<<4,o=1;break;case 1:a[h++]=n[s|c>>4],s=(15&c)<<2,o=2;break;case 2:a[h++]=n[s|c>>6],a[h++]=n[63&c],o=0}h>8191&&((r||(r=[])).push(String.fromCharCode.apply(String,a)),h=0)}return o&&(a[h++]=n[s],a[h++]=61,1===o&&(a[h++]=61)),r?(h&&r.push(String.fromCharCode.apply(String,a.slice(0,h))),r.join("")):String.fromCharCode.apply(String,a.slice(0,h))};s.decode=function(t,i,e){for(var s,n=e,a=0,h=0;h<t.length;){var o=t.charCodeAt(h++);if(61===o&&a>1)break;if(void 0===(o=r[o]))throw Error("invalid encoding");switch(a){case 0:s=o,a=1;break;case 1:i[e++]=s<<2|(48&o)>>4,s=o,a=2;break;case 2:i[e++]=(15&s)<<4|(60&o)>>2,s=o,a=3;break;case 3:i[e++]=(3&s)<<6|o,a=0}}if(1===a)throw Error("invalid encoding");return e-n},s.test=function(t){return/^(?:[A-Za-z0-9+\/]{4})*(?:[A-Za-z0-9+\/]{2}==|[A-Za-z0-9+\/]{3}=)?$/.test(t)}},function(t,i,e){"use strict";function s(){this.no={}}t.exports=s,s.prototype.on=function(t,i,e){return(this.no[t]||(this.no[t]=[])).push({fn:i,ctx:e||this}),this},s.prototype.off=function(t,i){if(void 0===t)this.no={};else if(void 0===i)this.no[t]=[];else for(var e=this.no[t],s=0;s<e.length;)e[s].fn===i?e.splice(s,1):++s;return this},s.prototype.emit=function(t){var i=this.no[t];if(i){for(var e=[],s=1;s<arguments.length;)e.push(arguments[s++]);for(s=0;s<i.length;)i[s].fn.apply(i[s++].ctx,e)}return this}},function(t,i,e){"use strict";function s(t){return"undefined"!=typeof Float32Array?function(){var i=new Float32Array([-0]),e=new Uint8Array(i.buffer),s=128===e[3];function n(t,s,n){i[0]=t,s[n]=e[0],s[n+1]=e[1],s[n+2]=e[2],s[n+3]=e[3]}function r(t,s,n){i[0]=t,s[n]=e[3],s[n+1]=e[2],s[n+2]=e[1],s[n+3]=e[0]}function a(t,s){return e[0]=t[s],e[1]=t[s+1],e[2]=t[s+2],e[3]=t[s+3],i[0]}function h(t,s){return e[3]=t[s],e[2]=t[s+1],e[1]=t[s+2],e[0]=t[s+3],i[0]}t.writeFloatLE=s?n:r,t.writeFloatBE=s?r:n,t.readFloatLE=s?a:h,t.readFloatBE=s?h:a}():function(){function i(t,i,e,s){var n=i<0?1:0;if(n&&(i=-i),0===i)t(1/i>0?0:2147483648,e,s);else if(isNaN(i))t(2143289344,e,s);else if(i>3.4028234663852886e38)t((n<<31|2139095040)>>>0,e,s);else if(i<1.1754943508222875e-38)t((n<<31|Math.round(i/1.401298464324817e-45))>>>0,e,s);else{var r=Math.floor(Math.log(i)/Math.LN2);t((n<<31|r+127<<23|8388607&Math.round(i*Math.pow(2,-r)*8388608))>>>0,e,s)}}function e(t,i,e){var s=t(i,e),n=2*(s>>31)+1,r=s>>>23&255,a=8388607&s;return 255===r?a?NaN:n*(1/0):0===r?1.401298464324817e-45*n*a:n*Math.pow(2,r-150)*(a+8388608)}t.writeFloatLE=i.bind(null,n),t.writeFloatBE=i.bind(null,r),t.readFloatLE=e.bind(null,a),t.readFloatBE=e.bind(null,h)}(),"undefined"!=typeof Float64Array?function(){var i=new Float64Array([-0]),e=new Uint8Array(i.buffer),s=128===e[7];function n(t,s,n){i[0]=t,s[n]=e[0],s[n+1]=e[1],s[n+2]=e[2],s[n+3]=e[3],s[n+4]=e[4],s[n+5]=e[5],s[n+6]=e[6],s[n+7]=e[7]}function r(t,s,n){i[0]=t,s[n]=e[7],s[n+1]=e[6],s[n+2]=e[5],s[n+3]=e[4],s[n+4]=e[3],s[n+5]=e[2],s[n+6]=e[1],s[n+7]=e[0]}function a(t,s){return e[0]=t[s],e[1]=t[s+1],e[2]=t[s+2],e[3]=t[s+3],e[4]=t[s+4],e[5]=t[s+5],e[6]=t[s+6],e[7]=t[s+7],i[0]}function h(t,s){return e[7]=t[s],e[6]=t[s+1],e[5]=t[s+2],e[4]=t[s+3],e[3]=t[s+4],e[2]=t[s+5],e[1]=t[s+6],e[0]=t[s+7],i[0]}t.writeDoubleLE=s?n:r,t.writeDoubleBE=s?r:n,t.readDoubleLE=s?a:h,t.readDoubleBE=s?h:a}():function(){function i(t,i,e,s,n,r){var a=s<0?1:0;if(a&&(s=-s),0===s)t(0,n,r+i),t(1/s>0?0:2147483648,n,r+e);else if(isNaN(s))t(0,n,r+i),t(2146959360,n,r+e);else if(s>1.7976931348623157e308)t(0,n,r+i),t((a<<31|2146435072)>>>0,n,r+e);else{var h;if(s<2.2250738585072014e-308)t((h=s/5e-324)>>>0,n,r+i),t((a<<31|h/4294967296)>>>0,n,r+e);else{var o=Math.floor(Math.log(s)/Math.LN2);1024===o&&(o=1023),t(4503599627370496*(h=s*Math.pow(2,-o))>>>0,n,r+i),t((a<<31|o+1023<<20|1048576*h&1048575)>>>0,n,r+e)}}}function e(t,i,e,s,n){var r=t(s,n+i),a=t(s,n+e),h=2*(a>>31)+1,o=a>>>20&2047,c=4294967296*(1048575&a)+r;return 2047===o?c?NaN:h*(1/0):0===o?5e-324*h*c:h*Math.pow(2,o-1075)*(c+4503599627370496)}t.writeDoubleLE=i.bind(null,n,0,4),t.writeDoubleBE=i.bind(null,r,4,0),t.readDoubleLE=e.bind(null,a,0,4),t.readDoubleBE=e.bind(null,h,4,0)}(),t}function n(t,i,e){i[e]=255&t,i[e+1]=t>>>8&255,i[e+2]=t>>>16&255,i[e+3]=t>>>24}function r(t,i,e){i[e]=t>>>24,i[e+1]=t>>>16&255,i[e+2]=t>>>8&255,i[e+3]=255&t}function a(t,i){return(t[i]|t[i+1]<<8|t[i+2]<<16|t[i+3]<<24)>>>0}function h(t,i){return(t[i]<<24|t[i+1]<<16|t[i+2]<<8|t[i+3])>>>0}t.exports=s(s)},function(t,i,e){"use strict";function s(t){try{var i=eval("quire".replace(/^/,"re"))(t);if(i&&(i.length||Object.keys(i).length))return i}catch(t){}return null}t.exports=s},function(t,i,e){"use strict";var s=i;s.length=function(t){for(var i=0,e=0,s=0;s<t.length;++s)(e=t.charCodeAt(s))<128?i+=1:e<2048?i+=2:55296==(64512&e)&&56320==(64512&t.charCodeAt(s+1))?(++s,i+=4):i+=3;return i},s.read=function(t,i,e){if(e-i<1)return"";for(var s,n=null,r=[],a=0;i<e;)(s=t[i++])<128?r[a++]=s:s>191&&s<224?r[a++]=(31&s)<<6|63&t[i++]:s>239&&s<365?(s=((7&s)<<18|(63&t[i++])<<12|(63&t[i++])<<6|63&t[i++])-65536,r[a++]=55296+(s>>10),r[a++]=56320+(1023&s)):r[a++]=(15&s)<<12|(63&t[i++])<<6|63&t[i++],a>8191&&((n||(n=[])).push(String.fromCharCode.apply(String,r)),a=0);return n?(a&&n.push(String.fromCharCode.apply(String,r.slice(0,a))),n.join("")):String.fromCharCode.apply(String,r.slice(0,a))},s.write=function(t,i,e){for(var s,n,r=e,a=0;a<t.length;++a)(s=t.charCodeAt(a))<128?i[e++]=s:s<2048?(i[e++]=s>>6|192,i[e++]=63&s|128):55296==(64512&s)&&56320==(64512&(n=t.charCodeAt(a+1)))?(s=65536+((1023&s)<<10)+(1023&n),++a,i[e++]=s>>18|240,i[e++]=s>>12&63|128,i[e++]=s>>6&63|128,i[e++]=63&s|128):(i[e++]=s>>12|224,i[e++]=s>>6&63|128,i[e++]=63&s|128);return e-r}},function(t,i,e){"use strict";t.exports=function(t,i,e){var s=e||8192,n=s>>>1,r=null,a=s;return function(e){if(e<1||e>n)return t(e);a+e>s&&(r=t(s),a=0);var h=i.call(r,a,a+=e);return 7&a&&(a=1+(7|a)),h}}},function(t,i,e){"use strict";t.exports=n;var s=e(41);function n(t,i){this.lo=t>>>0,this.hi=i>>>0}var r=n.zero=new n(0,0);r.toNumber=function(){return 0},r.zzEncode=r.zzDecode=function(){return this},r.length=function(){return 1};var a=n.zeroHash="\0\0\0\0\0\0\0\0";n.fromNumber=function(t){if(0===t)return r;var i=t<0;i&&(t=-t);var e=t>>>0,s=(t-e)/4294967296>>>0;return i&&(s=~s>>>0,e=~e>>>0,++e>4294967295&&(e=0,++s>4294967295&&(s=0))),new n(e,s)},n.from=function(t){if("number"==typeof t)return n.fromNumber(t);if(s.isString(t)){if(!s.Long)return n.fromNumber(parseInt(t,10));t=s.Long.fromString(t)}return t.low||t.high?new n(t.low>>>0,t.high>>>0):r},n.prototype.toNumber=function(t){if(!t&&this.hi>>>31){var i=1+~this.lo>>>0,e=~this.hi>>>0;return i||(e=e+1>>>0),-(i+4294967296*e)}return this.lo+4294967296*this.hi},n.prototype.toLong=function(t){return s.Long?new s.Long(0|this.lo,0|this.hi,Boolean(t)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(t)}};var h=String.prototype.charCodeAt;n.fromHash=function(t){return t===a?r:new n((h.call(t,0)|h.call(t,1)<<8|h.call(t,2)<<16|h.call(t,3)<<24)>>>0,(h.call(t,4)|h.call(t,5)<<8|h.call(t,6)<<16|h.call(t,7)<<24)>>>0)},n.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},n.prototype.zzEncode=function(){var t=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^t)>>>0,this.lo=(this.lo<<1^t)>>>0,this},n.prototype.zzDecode=function(){var t=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^t)>>>0,this.hi=(this.hi>>>1^t)>>>0,this},n.prototype.length=function(){var t=this.lo,i=(this.lo>>>28|this.hi<<4)>>>0,e=this.hi>>>24;return 0===e?0===i?t<16384?t<128?1:2:t<2097152?3:4:i<16384?i<128?5:6:i<2097152?7:8:e<128?9:10}},function(t,i,e){"use strict";t.exports=a;var s=e(70);(a.prototype=Object.create(s.prototype)).constructor=a;var n=e(41),r=n.Buffer;function a(){s.call(this)}a.alloc=function(t){return(a.alloc=n.Zi)(t)};var h=r&&r.prototype instanceof Uint8Array&&"set"===r.prototype.set.name?function(t,i,e){i.set(t,e)}:function(t,i,e){if(t.copy)t.copy(i,e,0,t.length);else for(var s=0;s<t.length;)i[e++]=t[s++]};function o(t,i,e){t.length<40?n.utf8.write(t,i,e):i.utf8Write(t,e)}a.prototype.bytes=function(t){n.isString(t)&&(t=n.Ki(t,"base64"));var i=t.length>>>0;return this.uint32(i),i&&this.Es(h,i,t),this},a.prototype.string=function(t){var i=r.byteLength(t);return this.uint32(i),i&&this.Es(o,i,t),this}},function(t,i,e){"use strict";t.exports=r;var s=e(72);(r.prototype=Object.create(s.prototype)).constructor=r;var n=e(41);function r(t){s.call(this,t)}n.Buffer&&(r.prototype.Ls=n.Buffer.prototype.slice),r.prototype.string=function(){var t=this.uint32();return this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+t,this.len))}},function(t,i,e){"use strict";i.Service=e(148)},function(t,i,e){"use strict";t.exports=n;var s=e(41);function n(t,i,e){if("function"!=typeof t)throw TypeError("rpcImpl must be a function");s.EventEmitter.call(this),this.rpcImpl=t,this.requestDelimited=Boolean(i),this.responseDelimited=Boolean(e)}(n.prototype=Object.create(s.EventEmitter.prototype)).constructor=n,n.prototype.rpcCall=function t(i,e,n,r,a){if(!r)throw TypeError("request must be specified");var h=this;if(!a)return s.asPromise(t,h,i,e,n,r);if(h.rpcImpl)try{return h.rpcImpl(i,e[h.requestDelimited?"encodeDelimited":"encode"](r).finish(),function(t,e){if(t)return h.emit("error",t,i),a(t);if(null!==e){if(!(e instanceof n))try{e=n[h.responseDelimited?"decodeDelimited":"decode"](e)}catch(t){return h.emit("error",t,i),a(t)}return h.emit("data",e,i),a(null,e)}h.end(!0)})}catch(t){return h.emit("error",t,i),void setTimeout(function(){a(t)},0)}else setTimeout(function(){a(Error("already ended"))},0)},n.prototype.end=function(t){return this.rpcImpl&&(t||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},function(t,i,e){"use strict";t.exports={}},function(t,i,e){"use strict";var s,n=this&&this.Rs||(s=function(t,i){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)i.hasOwnProperty(e)&&(t[e]=i[e])})(t,i)},function(t,i){function e(){this.constructor=t}s(t,i),t.prototype=null===i?Object.create(i):(e.prototype=i.prototype,new e)});Object.defineProperty(i,"_",{value:!0});var r=function(t){function i(i){var e=t.call(this,i)||this;return e.name="DecodingError",e}return n(i,t),i}(Error);i.DecodingError=r},function(t,i,e){"use strict";var s,n=this&&this.Rs||(s=function(t,i){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)i.hasOwnProperty(e)&&(t[e]=i[e])})(t,i)},function(t,i){function e(){this.constructor=t}s(t,i),t.prototype=null===i?Object.create(i):(e.prototype=i.prototype,new e)});Object.defineProperty(i,"_",{value:!0});var r=function(t){function i(i){var e=t.call(this,i)||this;return e.name="EncodingError",e}return n(i,t),i}(Error);i.EncodingError=r},function(t,i,e){"use strict";var s,n=this&&this.Rs||(s=function(t,i){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)i.hasOwnProperty(e)&&(t[e]=i[e])})(t,i)},function(t,i){function e(){this.constructor=t}s(t,i),t.prototype=null===i?Object.create(i):(e.prototype=i.prototype,new e)});Object.defineProperty(i,"_",{value:!0});var r=function(t){function i(i){var e=t.call(this,i)||this;return e.name="GVLError",e}return n(i,t),i}(Error);i.GVLError=r},function(t,i,e){"use strict";var s,n=this&&this.Rs||(s=function(t,i){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)i.hasOwnProperty(e)&&(t[e]=i[e])})(t,i)},function(t,i){function e(){this.constructor=t}s(t,i),t.prototype=null===i?Object.create(i):(e.prototype=i.prototype,new e)});Object.defineProperty(i,"_",{value:!0});var r=function(t){function i(i,e,s){void 0===s&&(s="");var n=t.call(this,"invalid value "+e+" passed for "+i+" "+s)||this;return n.name="TCModelError",n}return n(i,t),i}(Error);i.TCModelError=r},function(t,i,e){"use strict";Object.defineProperty(i,"_",{value:!0});var s=function(){function t(){}return t.prototype.has=function(i){return t.langSet.has(i)},t.prototype.forEach=function(i){t.langSet.forEach(i)},Object.defineProperty(t.prototype,"size",{get:function(){return t.langSet.size},enumerable:!0,configurable:!0}),t.langSet=new Set(["BG","CA","CS","DA","DE","EL","EN","ES","ET","FI","FR","HR","HU","IT","LT","LV","MT","NL","NO","PL","PT","RO","RU","SK","SL","SV","ZH"]),t}();i.ConsentLanguages=s},function(t,i,e){"use strict";var s,n=this&&this.Rs||(s=function(t,i){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)i.hasOwnProperty(e)&&(t[e]=i[e])})(t,i)},function(t,i){function e(){this.constructor=t}s(t,i),t.prototype=null===i?Object.create(i):(e.prototype=i.prototype,new e)});Object.defineProperty(i,"_",{value:!0});var r=e(77),a=e(75),h=e(63),o=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.bitLength=0,i.map=new Map,i}return n(i,t),i.prototype.has=function(t){return this.map.has(t)},i.prototype.isOkToHave=function(t,i,e){var s,n=!0;if(null===(s=this.gvl)||void 0===s?void 0:s.vendors){var r=this.gvl.vendors[e];if(r)if(t===h.RestrictionType.NOT_ALLOWED)n=r.legIntPurposes.includes(i)||r.purposes.includes(i);else if(r.flexiblePurposes.length)switch(t){case h.RestrictionType.REQUIRE_CONSENT:n=r.flexiblePurposes.includes(i)&&r.legIntPurposes.includes(i);break;case h.RestrictionType.REQUIRE_LI:n=r.flexiblePurposes.includes(i)&&r.purposes.includes(i)}else n=!1;else n=!1}return n},i.prototype.add=function(t,i){if(this.isOkToHave(i.restrictionType,i.purposeId,t)){var e=i.hash;this.has(e)||(this.map.set(e,new a.BinarySearchTree),this.bitLength=0),this.map.get(e).add(t)}},i.prototype.getVendors=function(t){var i=[];if(t){var e=t.hash;this.has(e)&&(i=this.map.get(e).get())}else{var s=new Set;this.map.forEach(function(t){t.get().forEach(function(t){s.add(t)})}),i=Array.from(s)}return i},i.prototype.getRestrictionType=function(t,i){var e;return this.getRestrictions(t).forEach(function(t){t.purposeId===i&&(void 0===e||e>t.restrictionType)&&(e=t.restrictionType)}),e},i.prototype.vendorHasRestriction=function(t,i){for(var e=!1,s=this.getRestrictions(t),n=0;n<s.length&&!e;n++)e=i.isSameAs(s[n]);return e},i.prototype.getMaxVendorId=function(){var t=0;return this.map.forEach(function(i){t=Math.max(i.max(),t)}),t},i.prototype.getRestrictions=function(t){var i=[];return this.map.forEach(function(e,s){t?e.contains(t)&&i.push(r.PurposeRestriction.unHash(s)):i.push(r.PurposeRestriction.unHash(s))}),i},i.prototype.getPurposes=function(){var t=new Set;return this.map.forEach(function(i,e){t.add(r.PurposeRestriction.unHash(e).purposeId)}),Array.from(t)},i.prototype.remove=function(t,i){var e=i.hash,s=this.map.get(e);s&&(s.remove(t),s.isEmpty()&&(this.map.delete(e),this.bitLength=0))},Object.defineProperty(i.prototype,"gvl",{get:function(){return this.gvl_},set:function(t){var i=this;this.gvl_||(this.gvl_=t,this.map.forEach(function(t,e){var s=r.PurposeRestriction.unHash(e);t.get().forEach(function(e){i.isOkToHave(s.restrictionType,s.purposeId,e)||t.remove(e)})}))},enumerable:!0,configurable:!0}),i.prototype.isEmpty=function(){return 0===this.map.size},Object.defineProperty(i.prototype,"numRestrictions",{get:function(){return this.map.size},enumerable:!0,configurable:!0}),i}(e(43).Cloneable);i.PurposeRestrictionVector=o},function(t,i,e){"use strict";var s;Object.defineProperty(i,"_",{value:!0});var n=e(78),r=function(){function t(){}return t.ID_TO_KEY=[n.Segment.CORE,n.Segment.VENDORS_DISCLOSED,n.Segment.VENDORS_ALLOWED,n.Segment.PUBLISHER_TC],t.KEY_TO_ID=((s={})[n.Segment.CORE]=0,s[n.Segment.VENDORS_DISCLOSED]=1,s[n.Segment.VENDORS_ALLOWED]=2,s[n.Segment.PUBLISHER_TC]=3,s),t}();i.SegmentIDs=r},function(t,i,e){"use strict";var s,n=this&&this.Rs||(s=function(t,i){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)i.hasOwnProperty(e)&&(t[e]=i[e])})(t,i)},function(t,i){function e(){this.constructor=t}s(t,i),t.prototype=null===i?Object.create(i):(e.prototype=i.prototype,new e)}),r=this&&this.ro||function(t,i){var e,s,n,r,a={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return r={next:h(0),throw:h(1),return:h(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function h(r){return function(h){return function(r){if(e)throw new TypeError("Generator is already executing.");for(;a;)try{if(e=1,s&&(n=2&r[0]?s.return:r[0]?s.throw||((n=s.return)&&n.call(s),0):s.next)&&!(n=n.call(s,r[1])).done)return n;switch(s=0,n&&(r=[2&r[0],n.value]),r[0]){case 0:case 1:n=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,s=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(n=(n=a.trys).length>0&&n[n.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!n||r[1]>n[0]&&r[1]<n[3])){a.label=r[1];break}if(6===r[0]&&a.label<n[1]){a.label=n[1],n=r;break}if(n&&a.label<n[2]){a.label=n[2],a.ops.push(r);break}n[2]&&a.ops.pop(),a.trys.pop();continue}r=i.call(t,a)}catch(t){r=[6,t],s=0}finally{e=n=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,h])}}},a=this&&this.ie||function(t){var i="function"==typeof Symbol&&Symbol.iterator,e=i&&t[i],s=0;if(e)return e.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&s>=t.length&&(t=void 0),{value:t&&t[s++],done:!t}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(i,"_",{value:!0});var h=e(43),o=e(35),c=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.bitLength=0,i.maxId_=0,i.set_=new Set,i}return n(i,t),i.prototype[Symbol.iterator]=function(){var t;return r(this,function(i){switch(i.label){case 0:t=1,i.label=1;case 1:return t<=this.maxId?[4,[t,this.has(t)]]:[3,4];case 2:i.sent(),i.label=3;case 3:return t++,[3,1];case 4:return[2]}})},i.prototype.values=function(){return this.set_.values()},Object.defineProperty(i.prototype,"maxId",{get:function(){return this.maxId_},enumerable:!0,configurable:!0}),i.prototype.has=function(t){return this.set_.has(t)},i.prototype.unset=function(t){var i=this;Array.isArray(t)?t.forEach(function(t){return i.unset(t)}):"object"==typeof t?this.unset(Object.keys(t).map(function(t){return+t})):(this.set_.delete(t),this.bitLength=0,t===this.maxId&&(this.maxId_=0,this.set_.forEach(function(t){i.maxId_=Math.max(i.maxId,t)})))},i.prototype.isIntMap=function(t){var i=this,e="object"==typeof t;return e&&Object.keys(t).every(function(e){var s=Number.isInteger(parseInt(e,10));return(s=s&&i.isValidNumber(t[e].id))&&void 0!==t[e].name})},i.prototype.isValidNumber=function(t){return parseInt(t,10)>0},i.prototype.isSet=function(t){var i=!1;return t instanceof Set&&(i=Array.from(t).every(this.isValidNumber)),i},i.prototype.set=function(t){var i=this;if(Array.isArray(t))t.forEach(function(t){return i.set(t)});else if(this.isSet(t))this.set(Array.from(t));else if(this.isIntMap(t))this.set(Object.keys(t).map(function(t){return+t}));else{if(!this.isValidNumber(t))throw new o.TCModelError("set()",t,"must be positive integer array, positive integer, Set<number>, or IntMap");this.set_.add(t),this.maxId_=Math.max(this.maxId,t),this.bitLength=0}},i.prototype.empty=function(){this.set_=new Set},i.prototype.forEach=function(t){var i,e;try{for(var s=a(this),n=s.next();!n.done;n=s.next()){var r=n.value;t(r[1],r[0])}}catch(t){i={error:t}}finally{try{n&&!n.done&&(e=s.return)&&e.call(s)}finally{if(i)throw i.error}}},Object.defineProperty(i.prototype,"size",{get:function(){return this.set_.size},enumerable:!0,configurable:!0}),i.prototype.setAll=function(t){this.set(t)},i}(h.Cloneable);i.Vector=c},function(t,i,e){"use strict";Object.defineProperty(i,"_",{value:!0});var s=e(74),n=e(62),r=e(79),a=e(85),h=e(35),o=e(76),c=e(37),l=function(){function t(){}return t.encode=function(t,i){var e,a=this;try{e=this.fieldSequence[""+t.version][i]}catch(e){throw new h.EncodingError("Unable to encode version: "+t.version+", segment: "+i)}var l="";return i!==c.Segment.CORE&&(l=r.IntEncoder.encode(c.SegmentIDs.KEY_TO_ID[i],n.BitLength.segmentType)),e.forEach(function(e){var s=t[e],c=r.FieldEncoderMap[e],u=n.BitLength[e];void 0===u&&a.isPublisherCustom(e)&&(u=+t[o.Fields.numCustomPurposes]);try{l+=c.encode(s,u)}catch(t){throw new h.EncodingError("Error encoding "+i+"->"+e+": "+t.message)}}),s.Base64Url.encode(l)},t.decode=function(t,i,e){var a=this,l=s.Base64Url.decode(t),u=0;return e===c.Segment.CORE&&(i.version=r.IntEncoder.decode(l.substr(u,n.BitLength[o.Fields.version]),n.BitLength[o.Fields.version])),e!==c.Segment.CORE&&(u+=n.BitLength.segmentType),this.fieldSequence[""+i.version][e].forEach(function(t){var e=r.FieldEncoderMap[t],s=n.BitLength[t];if(void 0===s&&a.isPublisherCustom(t)&&(s=+i[o.Fields.numCustomPurposes]),0!==s){var c=l.substr(u,s);if(e===r.VendorVectorEncoder?i[t]=e.decode(c,i.version):i[t]=e.decode(c,s),Number.isInteger(s))u+=s;else{if(!Number.isInteger(i[t].bitLength))throw new h.DecodingError(t);u+=i[t].bitLength}}}),i},t.isPublisherCustom=function(t){return 0===t.indexOf("publisherCustom")},t.fieldSequence=new a.FieldSequence,t}();i.SegmentEncoder=l},function(t,i,e){"use strict";Object.defineProperty(i,"_",{value:!0});var s=e(37),n=e(47),r=e(80),a=e(64),h=e(42),o=e(81),c=e(82),l=e(83),u=function(){function t(){}var i,e,u,d,f,p,b,v,m,g,y,w,x,k,S,O,_,j,A,I,T,C,P,M,E,L;return i=s.Fields.version,e=s.Fields.created,u=s.Fields.lastUpdated,d=s.Fields.cmpId,f=s.Fields.cmpVersion,p=s.Fields.consentScreen,b=s.Fields.consentLanguage,v=s.Fields.vendorListVersion,m=s.Fields.policyVersion,g=s.Fields.isServiceSpecific,y=s.Fields.useNonStandardStacks,w=s.Fields.specialFeatureOptins,x=s.Fields.purposeConsents,k=s.Fields.purposeLegitimateInterests,S=s.Fields.purposeOneTreatment,O=s.Fields.publisherCountryCode,_=s.Fields.vendorConsents,j=s.Fields.vendorLegitimateInterests,A=s.Fields.publisherRestrictions,I=s.Fields.vendorsDisclosed,T=s.Fields.vendorsAllowed,C=s.Fields.publisherConsents,P=s.Fields.publisherLegitimateInterests,M=s.Fields.numCustomPurposes,E=s.Fields.publisherCustomConsents,L=s.Fields.publisherCustomLegitimateInterests,t[i]=h.IntEncoder,t[e]=r.DateEncoder,t[u]=r.DateEncoder,t[d]=h.IntEncoder,t[f]=h.IntEncoder,t[p]=h.IntEncoder,t[b]=o.LangEncoder,t[v]=h.IntEncoder,t[m]=h.IntEncoder,t[g]=n.BooleanEncoder,t[y]=n.BooleanEncoder,t[w]=a.FixedVectorEncoder,t[x]=a.FixedVectorEncoder,t[k]=a.FixedVectorEncoder,t[S]=n.BooleanEncoder,t[O]=o.LangEncoder,t[_]=l.VendorVectorEncoder,t[j]=l.VendorVectorEncoder,t[A]=c.PurposeRestrictionVectorEncoder,t.segmentType=h.IntEncoder,t[I]=l.VendorVectorEncoder,t[T]=l.VendorVectorEncoder,t[C]=a.FixedVectorEncoder,t[P]=a.FixedVectorEncoder,t[M]=h.IntEncoder,t[E]=a.FixedVectorEncoder,t[L]=a.FixedVectorEncoder,t}();i.FieldEncoderMap=u},function(t,i,e){"use strict";Object.defineProperty(i,"_",{value:!0});var s=e(37);i.FieldSequence=function(){var t,i;this[1]=((t={})[s.Segment.CORE]=[s.Fields.version,s.Fields.created,s.Fields.lastUpdated,s.Fields.cmpId,s.Fields.cmpVersion,s.Fields.consentScreen,s.Fields.consentLanguage,s.Fields.vendorListVersion,s.Fields.purposeConsents,s.Fields.vendorConsents],t),this[2]=((i={})[s.Segment.CORE]=[s.Fields.version,s.Fields.created,s.Fields.lastUpdated,s.Fields.cmpId,s.Fields.cmpVersion,s.Fields.consentScreen,s.Fields.consentLanguage,s.Fields.vendorListVersion,s.Fields.policyVersion,s.Fields.isServiceSpecific,s.Fields.useNonStandardStacks,s.Fields.specialFeatureOptins,s.Fields.purposeConsents,s.Fields.purposeLegitimateInterests,s.Fields.purposeOneTreatment,s.Fields.publisherCountryCode,s.Fields.vendorConsents,s.Fields.vendorLegitimateInterests,s.Fields.publisherRestrictions],i[s.Segment.PUBLISHER_TC]=[s.Fields.publisherConsents,s.Fields.publisherLegitimateInterests,s.Fields.numCustomPurposes,s.Fields.publisherCustomConsents,s.Fields.publisherCustomLegitimateInterests],i[s.Segment.VENDORS_ALLOWED]=[s.Fields.vendorsAllowed],i[s.Segment.VENDORS_DISCLOSED]=[s.Fields.vendorsDisclosed],i)}},function(t,i,e){"use strict";Object.defineProperty(i,"_",{value:!0});var s=e(37);i.SegmentSequence=function(t,i){if(this[1]=[s.Segment.CORE],this[2]=[s.Segment.CORE],2===t.version)if(t.isServiceSpecific)this[2].push(s.Segment.PUBLISHER_TC);else{var e=!(!i||!i.isForVendors);e&&!0!==t[s.Fields.supportOOB]||this[2].push(s.Segment.VENDORS_DISCLOSED),e&&(t[s.Fields.supportOOB]&&t[s.Fields.vendorsAllowed].size>0&&this[2].push(s.Segment.VENDORS_ALLOWED),this[2].push(s.Segment.PUBLISHER_TC))}}},function(t,i,e){"use strict";var s=this&&this.ie||function(t){var i="function"==typeof Symbol&&Symbol.iterator,e=i&&t[i],s=0;if(e)return e.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&s>=t.length&&(t=void 0),{value:t&&t[s++],done:!t}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")},n=this&&this.ao||function(t,i){var e="function"==typeof Symbol&&t[Symbol.iterator];if(!e)return t;var s,n,r=e.call(t),a=[];try{for(;(void 0===i||i-- >0)&&!(s=r.next()).done;)a.push(s.value)}catch(t){n={error:t}}finally{try{s&&!s.done&&(e=r.return)&&e.call(r)}finally{if(n)throw n.error}}return a};Object.defineProperty(i,"_",{value:!0});var r=e(35),a=e(37),h=function(){function t(){}return t.process=function(t,i){var e,s,n=t.gvl;if(!n)throw new r.EncodingError("Unable to encode TCModel without a GVL");if(!n.isReady)throw new r.EncodingError("Unable to encode TCModel tcModel.gvl.readyPromise is not resolved");(t=t.clone()).consentLanguage=n.language.toUpperCase(),(null===(e=i)||void 0===e?void 0:e.version)>0&&(null===(s=i)||void 0===s?void 0:s.version)<=this.processor.length?t.version=i.version:t.version=this.processor.length;var a=t.version-1;if(!this.processor[a])throw new r.EncodingError("Invalid version: "+t.version);return this.processor[a](t,n)},t.processor=[function(t){return t},function(t,i){var e,r,h,o;t.publisherRestrictions.gvl=i,t.purposeLegitimateInterests.unset(1);var c=new Map;c.set("legIntPurposes",t.vendorLegitimateInterests),c.set("purposes",t.vendorConsents);try{for(var l=s(c),u=l.next();!u.done;u=l.next()){var d=n(u.value,2),f=d[0],p=d[1];try{for(var b=(h=void 0,s(p.values())),v=b.next();!v.done;v=b.next()){var m=v.value,g=i.vendors[m];if(!g||g.deletedDate)p.unset(m);else if(0===g[f].length)if(t.isServiceSpecific)if(0===g.flexiblePurposes.length)p.unset(m);else{for(var y=t.publisherRestrictions.getRestrictions(m),w=!1,x=0,k=y.length;x<k&&!w;x++)w=y[x].restrictionType===a.RestrictionType.REQUIRE_CONSENT&&"purposes"===f||y[x].restrictionType===a.RestrictionType.REQUIRE_LI&&"legIntPurposes"===f;w||p.unset(m)}else p.unset(m)}}catch(t){h={error:t}}finally{try{v&&!v.done&&(o=b.return)&&o.call(b)}finally{if(h)throw h.error}}}}catch(t){e={error:t}}finally{try{u&&!u.done&&(r=l.return)&&r.call(l)}finally{if(e)throw e.error}}return t.vendorsDisclosed.set(i.vendors),t}],t}();i.SemanticPreEncoder=h},function(t,i,e){"use strict";var s,n=this&&this.Rs||(s=function(t,i){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)i.hasOwnProperty(e)&&(t[e]=i[e])})(t,i)},function(t,i){function e(){this.constructor=t}s(t,i),t.prototype=null===i?Object.create(i):(e.prototype=i.prototype,new e)});Object.defineProperty(i,"_",{value:!0});var r=e(43),a=e(35),h=e(164),o=e(37),c=function(t){function i(i){var e=t.call(this)||this;return e.isServiceSpecific_=!1,e.supportOOB_=!0,e.useNonStandardStacks_=!1,e.purposeOneTreatment_=!1,e.publisherCountryCode_="AA",e.version_=2,e.consentScreen_=0,e.policyVersion_=2,e.consentLanguage_="EN",e.cmpId_=0,e.cmpVersion_=0,e.vendorListVersion_=0,e.numCustomPurposes_=0,e.specialFeatureOptins=new o.Vector,e.purposeConsents=new o.Vector,e.purposeLegitimateInterests=new o.Vector,e.publisherConsents=new o.Vector,e.publisherLegitimateInterests=new o.Vector,e.publisherCustomConsents=new o.Vector,e.publisherCustomLegitimateInterests=new o.Vector,e.vendorConsents=new o.Vector,e.vendorLegitimateInterests=new o.Vector,e.vendorsDisclosed=new o.Vector,e.vendorsAllowed=new o.Vector,e.publisherRestrictions=new o.PurposeRestrictionVector,i&&(e.gvl=i),e.created=new Date,e.updated(),e}return n(i,t),Object.defineProperty(i.prototype,"gvl",{get:function(){return this.gvl_},set:function(t){h.GVL.isInstanceOf(t)||(t=new h.GVL(t)),this.gvl_=t,this.publisherRestrictions.gvl=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"cmpId",{get:function(){return this.cmpId_},set:function(t){if(!(Number.isInteger(+t)&&t>1))throw new a.TCModelError("cmpId",t);this.cmpId_=+t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"cmpVersion",{get:function(){return this.cmpVersion_},set:function(t){if(!(Number.isInteger(+t)&&t>-1))throw new a.TCModelError("cmpVersion",t);this.cmpVersion_=+t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"consentScreen",{get:function(){return this.consentScreen_},set:function(t){if(!(Number.isInteger(+t)&&t>-1))throw new a.TCModelError("consentScreen",t);this.consentScreen_=+t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"consentLanguage",{get:function(){return this.consentLanguage_},set:function(t){this.consentLanguage_=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"publisherCountryCode",{get:function(){return this.publisherCountryCode_},set:function(t){if(!/^([A-z]){2}$/.test(t))throw new a.TCModelError("publisherCountryCode",t);this.publisherCountryCode_=t.toUpperCase()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"vendorListVersion",{get:function(){return this.gvl?this.gvl.vendorListVersion:this.vendorListVersion_},set:function(t){if((t=+t>>0)<0)throw new a.TCModelError("vendorListVersion",t);this.vendorListVersion_=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"policyVersion",{get:function(){return this.gvl?this.gvl.tcfPolicyVersion:this.policyVersion_},set:function(t){if(this.policyVersion_=parseInt(t,10),this.policyVersion_<0)throw new a.TCModelError("policyVersion",t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"version",{get:function(){return this.version_},set:function(t){this.version_=parseInt(t,10)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"isServiceSpecific",{get:function(){return this.isServiceSpecific_},set:function(t){this.isServiceSpecific_=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"useNonStandardStacks",{get:function(){return this.useNonStandardStacks_},set:function(t){this.useNonStandardStacks_=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"supportOOB",{get:function(){return this.supportOOB_},set:function(t){this.supportOOB_=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"purposeOneTreatment",{get:function(){return this.purposeOneTreatment_},set:function(t){this.purposeOneTreatment_=t},enumerable:!0,configurable:!0}),i.prototype.setAllVendorConsents=function(){this.vendorConsents.set(this.gvl.vendors)},i.prototype.unsetAllVendorConsents=function(){this.vendorConsents.empty()},i.prototype.setAllVendorsDisclosed=function(){this.vendorsDisclosed.set(this.gvl.vendors)},i.prototype.unsetAllVendorsDisclosed=function(){this.vendorsDisclosed.empty()},i.prototype.setAllVendorsAllowed=function(){this.vendorsAllowed.set(this.gvl.vendors)},i.prototype.unsetAllVendorsAllowed=function(){this.vendorsAllowed.empty()},i.prototype.setAllVendorLegitimateInterests=function(){this.vendorLegitimateInterests.set(this.gvl.vendors)},i.prototype.unsetAllVendorLegitimateInterests=function(){this.vendorLegitimateInterests.empty()},i.prototype.setAllPurposeConsents=function(){this.purposeConsents.set(this.gvl.purposes)},i.prototype.unsetAllPurposeConsents=function(){this.purposeConsents.empty()},i.prototype.setAllPurposeLegitimateInterests=function(){this.purposeLegitimateInterests.set(this.gvl.purposes)},i.prototype.unsetAllPurposeLegitimateInterests=function(){this.purposeLegitimateInterests.empty()},i.prototype.setAllSpecialFeatureOptins=function(){this.specialFeatureOptins.set(this.gvl.specialFeatures)},i.prototype.unsetAllSpecialFeatureOptins=function(){this.specialFeatureOptins.empty()},i.prototype.setAll=function(){this.setAllVendorConsents(),this.setAllPurposeLegitimateInterests(),this.setAllSpecialFeatureOptins(),this.setAllPurposeConsents(),this.setAllVendorLegitimateInterests()},i.prototype.unsetAll=function(){this.unsetAllVendorConsents(),this.unsetAllPurposeLegitimateInterests(),this.unsetAllSpecialFeatureOptins(),this.unsetAllPurposeConsents(),this.unsetAllVendorLegitimateInterests()},Object.defineProperty(i.prototype,"numCustomPurposes",{get:function(){var t=this.numCustomPurposes_;if("object"==typeof this.customPurposes){var i=Object.keys(this.customPurposes).sort(function(t,i){return+t-+i});t=parseInt(i.pop(),10)}return t},set:function(t){if(this.numCustomPurposes_=parseInt(t,10),this.numCustomPurposes_<0)throw new a.TCModelError("numCustomPurposes",t)},enumerable:!0,configurable:!0}),i.prototype.updated=function(){this.lastUpdated=new Date},i.consentLanguages=h.GVL.consentLanguages,i}(r.Cloneable);i.TCModel=c},function(t,i,e){"use strict";var s,n=this&&this.Rs||(s=function(t,i){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)i.hasOwnProperty(e)&&(t[e]=i[e])})(t,i)},function(t,i){function e(){this.constructor=t}s(t,i),t.prototype=null===i?Object.create(i):(e.prototype=i.prototype,new e)}),r=this&&this.ho||function(t,i,e,s){return new(e||(e=Promise))(function(n,r){function a(t){try{o(s.next(t))}catch(t){r(t)}}function h(t){try{o(s.throw(t))}catch(t){r(t)}}function o(t){var i;t.done?n(t.value):(i=t.value,i instanceof e?i:new e(function(t){t(i)})).then(a,h)}o((s=s.apply(t,i||[])).next())})},a=this&&this.ro||function(t,i){var e,s,n,r,a={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return r={next:h(0),throw:h(1),return:h(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function h(r){return function(h){return function(r){if(e)throw new TypeError("Generator is already executing.");for(;a;)try{if(e=1,s&&(n=2&r[0]?s.return:r[0]?s.throw||((n=s.return)&&n.call(s),0):s.next)&&!(n=n.call(s,r[1])).done)return n;switch(s=0,n&&(r=[2&r[0],n.value]),r[0]){case 0:case 1:n=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,s=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(n=(n=a.trys).length>0&&n[n.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!n||r[1]>n[0]&&r[1]<n[3])){a.label=r[1];break}if(6===r[0]&&a.label<n[1]){a.label=n[1],n=r;break}if(n&&a.label<n[2]){a.label=n[2],a.ops.push(r);break}n[2]&&a.ops.pop(),a.trys.pop();continue}r=i.call(t,a)}catch(t){r=[6,t],s=0}finally{e=n=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,h])}}};Object.defineProperty(i,"_",{value:!0});var h=e(43),o=e(35),c=e(165),l=e(37),u=function(t){function i(e){var s=t.call(this)||this;s.isReady_=!1,s.isLatest=!1;var n=i.baseUrl;if(s.lang_=i.DEFAULT_LANGUAGE,s.isVendorList(e))s.populate(e),s.readyPromise=Promise.resolve();else{if(!n)throw new o.GVLError("must specify GVL.baseUrl before loading GVL json");if(e>0){var r=e;i.CACHE.has(r)?(s.populate(i.CACHE.get(r)),s.readyPromise=Promise.resolve()):(n+=i.versionedFilename.replace("[VERSION]",r+""),s.readyPromise=s.fetchJson(n))}else i.CACHE.has(i.LATEST_CACHE_KEY)?(s.populate(i.CACHE.get(i.LATEST_CACHE_KEY)),s.readyPromise=Promise.resolve()):(s.isLatest=!0,s.readyPromise=s.fetchJson(n+i.latestFilename))}return s}return n(i,t),Object.defineProperty(i,"baseUrl",{get:function(){return this.baseUrl_},set:function(t){if(/^https?:\/\/vendorlist\.consensu\.org\//.test(t))throw new o.GVLError("Invalid baseUrl!  You may not pull directly from vendorlist.consensu.org and must provide your own cache");t.length>0&&"/"!==t[t.length-1]&&(t+="/"),this.baseUrl_=t},enumerable:!0,configurable:!0}),i.emptyLanguageCache=function(t){var e=!1;return void 0===t&&i.LANGUAGE_CACHE.size>0?(i.LANGUAGE_CACHE=new Map,e=!0):"string"==typeof t&&this.consentLanguages.has(t.toUpperCase())&&(i.LANGUAGE_CACHE.delete(t.toUpperCase()),e=!0),e},i.emptyCache=function(t){var e=!1;return Number.isInteger(t)&&t>=0?(i.CACHE.delete(t),e=!0):void 0===t&&(i.CACHE=new Map,e=!0),e},i.prototype.cacheLanguage=function(){i.LANGUAGE_CACHE.has(this.lang_)||i.LANGUAGE_CACHE.set(this.lang_,{purposes:this.purposes,specialPurposes:this.specialPurposes,features:this.features,specialFeatures:this.specialFeatures,stacks:this.stacks})},i.prototype.fetchJson=function(t){return r(this,void 0,void 0,function(){var i,e;return a(this,function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),i=this.populate,[4,c.Json.fetch(t)];case 1:return i.apply(this,[s.sent()]),[3,3];case 2:throw e=s.sent(),new o.GVLError(e.message);case 3:return[2]}})})},i.prototype.getJson=function(){return JSON.parse(JSON.stringify({gvlSpecificationVersion:this.gvlSpecificationVersion,vendorListVersion:this.vendorListVersion,tcfPolicyVersion:this.tcfPolicyVersion,lastUpdated:this.lastUpdated,purposes:this.purposes,specialPurposes:this.specialPurposes,features:this.features,specialFeatures:this.specialFeatures,stacks:this.stacks,vendors:this.fullVendorList}))},i.prototype.changeLanguage=function(t){return r(this,void 0,void 0,function(){var e,s,n,r,h;return a(this,function(a){switch(a.label){case 0:if(e=t.toUpperCase(),!i.consentLanguages.has(e))return[3,6];if(e===this.lang_)return[3,5];if(this.lang_=e,!i.LANGUAGE_CACHE.has(e))return[3,1];for(n in s=i.LANGUAGE_CACHE.get(e))s.hasOwnProperty(n)&&(this[n]=s[n]);return[3,5];case 1:r=i.baseUrl+i.languageFilename.replace("[LANG]",t),a.label=2;case 2:return a.trys.push([2,4,,5]),[4,this.fetchJson(r)];case 3:return a.sent(),this.cacheLanguage(),[3,5];case 4:throw h=a.sent(),new o.GVLError("unable to load language: "+h.message);case 5:return[3,7];case 6:throw new o.GVLError("unsupported language "+t);case 7:return[2]}})})},Object.defineProperty(i.prototype,"language",{get:function(){return this.lang_},enumerable:!0,configurable:!0}),i.prototype.isVendorList=function(t){return void 0!==t&&void 0!==t.vendors},i.prototype.populate=function(t){this.purposes=t.purposes,this.specialPurposes=t.specialPurposes,this.features=t.features,this.specialFeatures=t.specialFeatures,this.stacks=t.stacks,this.isVendorList(t)&&(this.gvlSpecificationVersion=t.gvlSpecificationVersion,this.tcfPolicyVersion=t.tcfPolicyVersion,this.vendorListVersion=t.vendorListVersion,this.lastUpdated=t.lastUpdated,"string"==typeof this.lastUpdated&&(this.lastUpdated=new Date(this.lastUpdated)),this.vendors_=t.vendors,this.fullVendorList=t.vendors,this.mapVendors(),this.isReady_=!0,this.isLatest&&i.CACHE.set(i.LATEST_CACHE_KEY,this.getJson()),i.CACHE.has(this.vendorListVersion)||i.CACHE.set(this.vendorListVersion,this.getJson())),this.cacheLanguage()},i.prototype.mapVendors=function(t){var i=this;this.byPurposeVendorMap={},this.bySpecialPurposeVendorMap={},this.byFeatureVendorMap={},this.bySpecialFeatureVendorMap={},Object.keys(this.purposes).forEach(function(t){i.byPurposeVendorMap[t]={legInt:new Set,consent:new Set,flexible:new Set}}),Object.keys(this.specialPurposes).forEach(function(t){i.bySpecialPurposeVendorMap[t]=new Set}),Object.keys(this.features).forEach(function(t){i.byFeatureVendorMap[t]=new Set}),Object.keys(this.specialFeatures).forEach(function(t){i.bySpecialFeatureVendorMap[t]=new Set}),Array.isArray(t)||(t=Object.keys(this.fullVendorList).map(function(t){return+t})),this.vendorIds=new Set(t),this.vendors_=t.reduce(function(t,e){var s=i.vendors_[""+e];return s&&void 0===s.deletedDate&&(s.purposes.forEach(function(t){i.byPurposeVendorMap[t+""].consent.add(e)}),s.specialPurposes.forEach(function(t){i.bySpecialPurposeVendorMap[t+""].add(e)}),s.legIntPurposes.forEach(function(t){i.byPurposeVendorMap[t+""].legInt.add(e)}),s.flexiblePurposes&&s.flexiblePurposes.forEach(function(t){i.byPurposeVendorMap[t+""].flexible.add(e)}),s.features.forEach(function(t){i.byFeatureVendorMap[t+""].add(e)}),s.specialFeatures.forEach(function(t){i.bySpecialFeatureVendorMap[t+""].add(e)}),t[e]=s),t},{})},i.prototype.getFilteredVendors=function(t,i,e,s){var n=this,r=t.charAt(0).toUpperCase()+t.slice(1),a={};return("purpose"===t&&e?this["by"+r+"VendorMap"][i+""][e]:this["by"+(s?"Special":"")+r+"VendorMap"][i+""]).forEach(function(t){a[t+""]=n.vendors[t+""]}),a},i.prototype.getVendorsWithConsentPurpose=function(t){return this.getFilteredVendors("purpose",t,"consent")},i.prototype.getVendorsWithLegIntPurpose=function(t){return this.getFilteredVendors("purpose",t,"legInt")},i.prototype.getVendorsWithFlexiblePurpose=function(t){return this.getFilteredVendors("purpose",t,"flexible")},i.prototype.getVendorsWithSpecialPurpose=function(t){return this.getFilteredVendors("purpose",t,void 0,!0)},i.prototype.getVendorsWithFeature=function(t){return this.getFilteredVendors("feature",t)},i.prototype.getVendorsWithSpecialFeature=function(t){return this.getFilteredVendors("feature",t,void 0,!0)},Object.defineProperty(i.prototype,"vendors",{get:function(){return this.vendors_},enumerable:!0,configurable:!0}),i.prototype.narrowVendorsTo=function(t){this.mapVendors(t)},Object.defineProperty(i.prototype,"isReady",{get:function(){return this.isReady_},enumerable:!0,configurable:!0}),i.prototype.clone=function(){return new i(this.getJson())},i.isInstanceOf=function(t){return"object"==typeof t&&"function"==typeof t.narrowVendorsTo},i.LANGUAGE_CACHE=new Map,i.CACHE=new Map,i.LATEST_CACHE_KEY=0,i.DEFAULT_LANGUAGE="EN",i.consentLanguages=new l.ConsentLanguages,i.latestFilename="vendor-list.json",i.versionedFilename="archives/vendor-list-v[VERSION].json",i.languageFilename="purposes-[LANG].json",i}(h.Cloneable);i.GVL=u},function(t,i,e){"use strict";Object.defineProperty(i,"_",{value:!0});var s=function(){function t(){}return t.absCall=function(t,i,e,s){return new Promise(function(n,r){var a=new XMLHttpRequest;a.withCredentials=e,a.addEventListener("load",function(){if(a.readyState==XMLHttpRequest.DONE)if(a.status>=200&&a.status<300){var t=a.response;if("string"==typeof t)try{t=JSON.parse(t)}catch(t){}n(t)}else r(new Error("HTTP Status: "+a.status+" response type: "+a.responseType))}),a.addEventListener("error",function(){r(new Error("error"))}),a.addEventListener("abort",function(){r(new Error("aborted"))}),null===i?a.open("GET",t,!0):a.open("POST",t,!0),a.responseType="json",a.timeout=s,a.ontimeout=function(){r(new Error("Timeout "+s+"ms "+t))},a.send(i)})},t.post=function(t,i,e,s){return void 0===e&&(e=!1),void 0===s&&(s=0),this.absCall(t,JSON.stringify(i),e,s)},t.fetch=function(t,i,e){return void 0===i&&(i=!1),void 0===e&&(e=0),this.absCall(t,null,i,e)},t}();i.Json=s},function(t,i,e){"use strict";var s=e(167),n=s.decodeBitsToIds,r=s.decodeFromBase64;t.exports={decodeConsentString:function(t){var i=r(t),e=i.version,s=i.cmpId,a=i.vendorListVersion,h=i.purposeIdBitString,o=i.maxVendorId,c=i.created,l=i.lastUpdated,u=i.isRange,d=i.defaultConsent,f=i.vendorIdBitString,p=i.vendorRangeList,b=i.cmpVersion,v=i.consentScreen,m=i.consentLanguage,g={version:e,cmpId:s,vendorListVersion:a,allowedPurposeIds:n(h),maxVendorId:o,created:c,lastUpdated:l,cmpVersion:b,consentScreen:v,consentLanguage:m};if(u){var y=p.reduce(function(t,i){for(var e=i.isRange,s=i.startVendorId,n=i.endVendorId,r=e?n:s,a=s;a<=r;a+=1)t[a]=!0;return t},{});g.allowedVendorIds=[];for(var w=1;w<=o;w+=1)(d&&!y[w]||!d&&y[w])&&-1===g.allowedVendorIds.indexOf(w)&&g.allowedVendorIds.push(w)}else g.allowedVendorIds=n(f);return g}}},function(t,i,e){"use strict";var s=e(168),n=e(170),r=n.versionNumBits,a=n.vendorVersionMap;function h(t,i,e){return parseInt(t.substr(i,e),2)}function o(t,i,e){return new Date(100*h(t,i,e))}function c(t){var i=h(t);return String.fromCharCode(i+65).toLowerCase()}function l(t,i,e){var s=t.substr(i,e);return c(s.slice(0,e/2))+c(s.slice(e/2))}function u(t){var i=t.input,e=t.output,s=t.startPosition,n=t.field,r=n.type,a=n.numBits,c=n.decoder,u=n.validator,f=n.listCount;if("function"==typeof u&&!u(e))return{newPosition:s};if("function"==typeof c)return c(i,e,s);var p,b,v="function"==typeof a?a(e):a;switch(r){case"int":return{fieldValue:h(i,s,v)};case"bool":return{fieldValue:(p=i,b=s,1===parseInt(p.substr(b,1),2))};case"date":return{fieldValue:o(i,s,v)};case"bits":return{fieldValue:i.substr(s,v)};case"list":return function(t,i,e,s,n){var r=0;"function"==typeof n?r=n(i):"number"==typeof n&&(r=n);for(var a=e,h=[],o=0;o<r;o+=1){var c=d({input:t,fields:s.fields,startPosition:a});a=c.newPosition,h.push(c.decodedObject)}return{fieldValue:h,newPosition:a}}(i,e,s,n,f);case"language":return{fieldValue:l(i,s,v)};default:throw new Error("ConsentString - Unknown field type "+r+" for decoding")}}function d(t){var i=t.input,e=t.fields,s=t.startPosition,n=void 0===s?0:s;return{decodedObject:e.reduce(function(t,e){var s=e.name,r=e.numBits,a=u({input:i,output:t,startPosition:n,field:e}),h=a.fieldValue,o=a.newPosition;return void 0!==h&&(t[s]=h),void 0!==o?n=o:"number"==typeof r&&(n+=r),t},{}),newPosition:n}}t.exports={decodeBitsToIds:function(t){return t.split("").reduce(function(t,i,e){return"1"===i&&-1===t.indexOf(e+1)&&t.push(e+1),t},[])},decodeFromBase64:function(t,i){for(var e=t;e.length%4!=0;)e+="=";e=e.replace(/-/g,"+").replace(/_/g,"/");for(var n,o,c=s.decode(e),l="",u=0;u<c.length;u+=1){var f=c.charCodeAt(u).toString(2);l+=(n=f,o=8-f.length,function(t){for(var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"0",e="",s=0;s<t;s+=1)e+=i;return e}(Math.max(0,o))+n)}return function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a,e=h(t,0,r);if("number"!=typeof e)throw new Error("ConsentString - Unknown version number in the string to decode");if(!a[e])throw new Error("ConsentString - Unsupported version "+e+" in the string to decode");return d({input:t,fields:i[e].fields}).decodedObject}(l,i)}}},function(t,i,e){(function(t,s){var n;/*! http://mths.be/base64 v0.1.0 by @mathias | MIT license */!function(r){var a=i,h=(t&&t.exports,"object"==typeof s&&s);h.global!==h&&h.window;var o=function(t){this.message=t};(o.prototype=new Error).name="InvalidCharacterError";var c=function(t){throw new o(t)},l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",u=/[\t\n\f\r ]/g,d={encode:function(t){t=String(t),/[^\0-\xFF]/.test(t)&&c("The string to be encoded contains characters outside of the Latin1 range.");for(var i,e,s,n,r=t.length%3,a="",h=-1,o=t.length-r;++h<o;)i=t.charCodeAt(h)<<16,e=t.charCodeAt(++h)<<8,s=t.charCodeAt(++h),a+=l.charAt((n=i+e+s)>>18&63)+l.charAt(n>>12&63)+l.charAt(n>>6&63)+l.charAt(63&n);return 2==r?(i=t.charCodeAt(h)<<8,e=t.charCodeAt(++h),a+=l.charAt((n=i+e)>>10)+l.charAt(n>>4&63)+l.charAt(n<<2&63)+"="):1==r&&(n=t.charCodeAt(h),a+=l.charAt(n>>2)+l.charAt(n<<4&63)+"=="),a},decode:function(t){var i=(t=String(t).replace(u,"")).length;i%4==0&&(i=(t=t.replace(/==?$/,"")).length),(i%4==1||/[^+a-zA-Z0-9\/]/.test(t))&&c("Invalid character: the string to be decoded is not correctly encoded.");for(var e,s,n=0,r="",a=-1;++a<i;)s=l.indexOf(t.charAt(a)),e=n%4?64*e+s:s,n++%4&&(r+=String.fromCharCode(255&e>>(-2*n&6)));return r},version:"0.1.0"};void 0===(n=function(){return d}.call(i,e,i,t))||(t.exports=n)}()}).call(this,e(169)(t),e(71))},function(t,i){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,i,e){"use strict";t.exports={versionNumBits:6,vendorVersionMap:{1:{version:1,metadataFields:["version","created","lastUpdated","cmpId","cmpVersion","consentScreen","vendorListVersion"],fields:[{name:"version",type:"int",numBits:6},{name:"created",type:"date",numBits:36},{name:"lastUpdated",type:"date",numBits:36},{name:"cmpId",type:"int",numBits:12},{name:"cmpVersion",type:"int",numBits:12},{name:"consentScreen",type:"int",numBits:6},{name:"consentLanguage",type:"language",numBits:12},{name:"vendorListVersion",type:"int",numBits:12},{name:"purposeIdBitString",type:"bits",numBits:24},{name:"maxVendorId",type:"int",numBits:16},{name:"isRange",type:"bool",numBits:1},{name:"vendorIdBitString",type:"bits",numBits:function(t){return t.maxVendorId},validator:function(t){return!t.isRange}},{name:"defaultConsent",type:"bool",numBits:1,validator:function(t){return t.isRange}},{name:"numEntries",numBits:12,type:"int",validator:function(t){return t.isRange}},{name:"vendorRangeList",type:"list",listCount:function(t){return t.numEntries},validator:function(t){return t.isRange},fields:[{name:"isRange",type:"bool",numBits:1},{name:"startVendorId",type:"int",numBits:16},{name:"endVendorId",type:"int",numBits:16,validator:function(t){return t.isRange}}]}]}}}},function(t,i){String.prototype.cnx_replaceAll=function(t,i){return this.split(t).join(i)}},function(t,i,e){"use strict";e.r(i);var s,n=e(5),r=e(50),a=(e(171),e(0)),h=e(88),o=e(17),c=e(21),l=e(32),u=e(6),d=e(3),f=e(38);!function(t){t.Deprecation="deprecation",t.Intervention="intervention",t.Crash="crash"}(s||(s={}));const p="HeavyAdIntervention";class b{constructor(t,i,e){this.ue=t,this.oo=i,this.co=e,this.uo=!1,this.do=()=>{"hidden"===this.ue.document.visibilityState&&this.fo()},this.fo=()=>{if(this.uo||!this.po)return;const t=this.po.takeRecords();this.bo(t),this.uo=!0},this.bo=t=>{t.filter(({body:t})=>{var i;return(null===(i=t)||void 0===i?void 0:i.id)===p}).forEach(()=>{this.oo.trackHeavyAdIntervention(this.co)})},this.vo()&&this.ms()}destroy(){this.ue.removeEventListener("pagehide",this.fo),this.ue.removeEventListener("visibilitychange",this.do)}vo(){return!!this.ue.ReportingObserver}ms(){this.po=new this.ue.ReportingObserver(t=>{this.bo(t)},{buffered:!0,types:[s.Intervention]}),this.po.observe(),this.ue.addEventListener("pagehide",this.fo),this.ue.addEventListener("visibilitychange",this.do)}}class v extends o.a{constructor(t,i,e,s,n,r){super(),this.mediator=t,this.playerModel=i,this.app=e,this.zs=s,this.mo=n,this._appSettings=r,this.macroElements={player:[]},this.yo=!1,this.wo={description:"{{description}}",title:"{{title}}",player:"{{player}}"},this.xo=null,this.ko=500,this.createExperience(i,r),this.So=new b(i.global,this.app.services.TrackingService,{heavyAdBlockTypeEnum:a.ProtoHeavyAdBlockTypeEnum.Global}),this.Oo=new b(window,this.app.services.TrackingService,{heavyAdBlockTypeEnum:a.ProtoHeavyAdBlockTypeEnum.Script})}subscribeToEvents(){this.subscribe(c.b.Destroy,this.experience,()=>{this.destroy()}),this.subscribe(c.b.CanStart,this.experience,()=>{this.experience.start()}),this.subscribe(c.c.SessionRendered,this.experience,()=>{this.mo.wasPlayerReloaded||this.app.services.TrackingService.trackSessionRendered(this.zs),this.mediator.publish(this,c.c.SessionRendered)}),this.subscribe(c.c.SessionView,this.experience,()=>{this.mo.wasPlayerInView||(this.app.services.TrackingService.trackSessionViewability(),this.mediator.publish(this,c.c.SessionView))}),Object(l.a)(this.experience.events).forEach(t=>{this.subscribe(t,this.experience,i=>{this.experienceApi.trigger(t,i.payload)})})}updateMacroContent(t,i){t&&t.forEach(t=>{t.textContent=i})}Cn(){this.playerModel.css&&this.app.services.GlobalDomUtilsService.addCssString(this.playerModel.css,`cnx-custom-css-${this.app.config.appId}`)}_o(t){return`<cnx>${t}</cnx>`.replace(/{\{([^}]+)}}/g,"<cnx-span>$&</cnx-span>")}jo(){if(this.experienceContainer=this.Ao(),this.playerModel.html){const t=this.app.services.GlobalDomUtilsService.createElementByString(this._o(this.playerModel.html));this.Io(t);const i=this.macroElements.player[0];if(!i)throw Error("player macro was not found");i.innerHTML="",i.parentNode.insertBefore(this.experienceContainer,i),i.parentNode.removeChild(i),Object(u.c)(t.children).forEach(t=>{this.playerModel.targetContainer.parentNode.insertBefore(t,this.playerModel.targetContainer)})}else this.playerModel.targetContainer.parentNode.insertBefore(this.experienceContainer,this.playerModel.targetContainer);this.playerModel.targetContainer.parentElement.removeChild(this.playerModel.targetContainer)}Ao(){const t=this.app.config.isMobile?d.g.Mobile:d.g.Desktop;return this.app.services.GlobalDomUtilsService.createElementByString(`<cnx class="${d.b.MainContainer} ${t} ${this.To}"></cnx>`)}Io(t){Object(u.c)(t.children).forEach(t=>{t.children.length>0&&this.Io(t),Object.keys(this.wo).forEach(i=>{const e=this.wo[i];t.textContent.indexOf(e)>-1&&this.Co(i,t)})})}Co(t,i){this.macroElements[t]||(this.macroElements[t]=[]),this.macroElements[t].push(i),i.textContent=""}Po(){null!==this.xo&&(clearInterval(this.xo),this.xo=null)}init(){this.Cn(),this.jo();const t=this.app.config.device;return this.isSupportedBreakpoint(t)?(this.subscribeToEvents(),this.experience.Mo(this.playerModel,this.app,this.experienceContainer),this.xo=setInterval(()=>{this.yo?this.Po():this.app.services.GlobalDomUtilsService.isDetachedFromDOM(this.experienceContainer)&&(this.destroy(),Object(n.a)({message:"player_removed_from_DOM",level:a.ProtoLoggingLevelEnum.INFO}))},this.ko),!0):(this.destroy(),!1)}getApiMethods(){return this.experienceApi.getApiMethods()}get playerContainer(){return this.experienceContainer}destroy(){try{f.a.playerDestroyed(),this.yo=!0,this.Po(),this.app.services.TrackingService.destroy(),this.app.services.ResizeObserver.destroy(),this.app.services.ViewabilityService.destroy(),this.app.services.InteractionService.destroy(),this.experienceApi.setDestroyed(),this.unsubscribeAll(this.experience),this.experience&&(this.experience.destroy(),this.experience=null),this.experienceContainer.parentNode&&this.experienceContainer.parentNode.removeChild(this.experienceContainer),this.So.destroy(),this.Oo.destroy()}catch(t){Object(n.a)({callStack:t.stack,level:a.ProtoLoggingLevelEnum.WARNING,message:"Renderer_destroy",exception:t.message})}}}var m,g,y,w=e(4);!function(t){t.EnterStart="enterStart",t.EnterStop="enterStop",t.ExitStart="exitStart",t.ExitStop="exitStop"}(m||(m={})),function(t){t[t.DirectionIn=0]="DirectionIn",t[t.DirectionOut=1]="DirectionOut",t[t.FadeIn=2]="FadeIn"}(g||(g={})),function(t){t.Float="float",t.Embed="embed"}(y||(y={}));const x=400,k=1e3,S=20,O=.5;var _,j=e(1);class A{constructor(t,i,e,s,n,r=0){this.Eo=t,this.Gn=i,this.Lo=e,this.Ro=s,this.ks=n,this.Bo=r,this.Do=0,this.Fo=void 0,this.$o=null,this.Uo=!1,this.Vo=500,this.No=()=>{this.Fo&&this.Ho()},this.qo=()=>{if(this.Gn.width=this.zo.clientWidth,this.Wo(),this.Fo){const t=!1;this.Go(t)}},this.Wo=()=>{this.Jo()?!this.Qo||this.Fo||this.Uo?this.Xo():this.Yo():this.Fo&&this.Ko()},this.Zo=t=>{if(this.tc(t.propertyName))switch(this.transitionState){case g.DirectionIn:this.transitionState=void 0,this.ic();break;case g.DirectionOut:this.transitionState=void 0,this.ec();break;case g.FadeIn:this.transitionState=void 0,this.sc()}},this.nc()}get transitionState(){return this.rc}set transitionState(t){this.rc===g.FadeIn&&this.ac(d.n.FadeInBase,d.n.FadeIn),this.rc=t}hc(...t){Object(j.a)(this.Lo,...t)}ac(...t){Object(j.L)(this.Lo,...t)}Xo(){this.Ro!==a.ProtoDeviceType.Smartphone&&(this.Lo.style.width=`${this.Gn.width}px`);const t=this.Lo.getBoundingClientRect().width;this.Lo.style.height=this.Gn.getHeight(t)}oc(){return Object(u.g)(this.Ro,this.Gn.floatingDeviceMode)}lc(){this.ks.addEventListenerOnGlobal("scroll",this.No)}Ho(){this.zo&&(this.uc(),this.dc<this.Gn.floatingGutterY?this.fc(this.Gn.floatingGutterY):this.fc(this.dc))}pc(){this.zo=this.ks.querySelector(this.Gn.pageElement),this.zo&&(clearInterval(this.$o),this.Gn.width=this.zo.clientWidth,this.Wo(),this.Eo.on(this.zo,this.qo),this.Eo.on(this.ks.getGlobalClosestTop().topFrame.document.body,this.qo))}uc(){switch(this.Gn.appendLocation){case a.ProtoFloatingAppendLocationEnum.Above:this.dc=this.zo.getBoundingClientRect().top-this.Lo.offsetHeight-this.Gn.floatingYAxisPadding;break;case a.ProtoFloatingAppendLocationEnum.Below:this.dc=this.zo.getBoundingClientRect().top+this.zo.offsetHeight+this.Gn.floatingYAxisPadding;break;case a.ProtoFloatingAppendLocationEnum.Within:this.dc=this.zo.getBoundingClientRect().top}}bc(){this.$o=setInterval(()=>{this.pc()},this.Vo),this.pc()}vc(){return this.Gn.floatingPosition===a.ProtoFloatingFixedPositionMode.Element}tc(t){switch(this.transitionState){case g.DirectionIn:case g.DirectionOut:if("right"===t||"left"===t)return!0;break;case g.FadeIn:if("opacity"===t)return!0}return!1}mc(){this.Lo.style.top="",this.Lo.style.bottom="",this.Lo.style.left="",this.Lo.style.right="",this.Lo.style.width="",this.Lo.style.height="",this.Lo.style.transform=""}ec(){this.Fo=!1,this.ac(d.o.MainClass,d.o.TransitionClass,this.Gn.positionClass),this.mc(),this.gc()}yc(){this.Gn.isPositionedTop?(this.Lo.style.top=`${this.Gn.floatingGutterY}px`,this.Lo.style.bottom="auto"):this.Gn.isPositionedBottom&&(this.Lo.style.top="auto",this.Lo.style.bottom=`${this.Gn.floatingGutterY}px`)}fc(t){this.Lo.style.transform=`translateY(${t}px)`}wc(t){t?this.hc(d.o.TransitionClass):this.ac(d.o.TransitionClass)}xc(t,i=!1,e=!1){this.wc(i),e||this.Gn.isPositionedLeft?(this.Lo.style.left=`${t}px`,this.Lo.style.right="auto"):(this.Lo.style.left="auto",this.Lo.style.right=`${t}px`)}Jo(){return Object(j.t)(this.Lo).document.body.getBoundingClientRect().width>=this.Bo}Yo(){if(this.Jo()&&(!this.vc()||this.zo&&(!this.zo||0!==this.zo.clientWidth)))if(this.Fo=!0,this.transitionState=g.DirectionIn,this.hc(d.o.MainClass,this.Gn.positionClass),this.Wo(),this.vc()?(this.Lo.style.top="0px",this.kc(),this.xc(this.Do,!1,!0),this.Ho()):(this.yc(),this.xc(this.Do)),this.Sc(),Object(j.i)(this.Lo),this.zo){const t=!0;this.Go(t)}else this.xc(this.Gn.floatingGutterX,!0)}kc(){this.zo&&(this.ks.getElementCoordinates(this.zo).clientX<this.ks.getBodyDimensions().width/2?(this.Gn.isPositionedLeft=!0,this.Gn.isPositionedRight=!1):(this.Gn.isPositionedLeft=!1,this.Gn.isPositionedRight=!0),this.nc())}nc(){this.vc()&&this.Gn.isPositionedRight?this.Do=this.ks.getBodyDimensions().width+(this.Gn.floatingWidth||k)+S:this.Do=-((this.Gn.floatingWidth||k)+S)}Go(t){let i;this.kc(),i=this.ks.getElementCoordinates(this.zo).clientX,this.Gn.isPositionedLeft?i+=this.Gn.floatingGutterX:i-=this.Gn.floatingGutterX,this.xc(i,t,!0)}Ko(t=!0){let i;t&&(this.transitionState=g.DirectionOut),this.Oc(),i=this.vc(),this.xc(this.Do,t,i),t||this.ec()}_c(){this.Lo.addEventListener("transitionend",this.Zo),this.Eo.on(this.Lo,this.Wo),this.vc()&&(this.bc(),this.lc())}jc(){this.Eo.off(this.Lo,this.Wo),this.Lo.removeEventListener("transitionend",this.Zo),this.zo&&(this.Eo.off(this.zo,this.qo),this.Eo.off(this.ks.getGlobalClosestTop().topFrame.document.body,this.qo),this.ks.removeEventListenerOnGlobal("scroll",this.No),clearInterval(this.$o))}get isInFloating(){return this.Fo}}class I extends A{constructor(t,i,e,s,n,r,h,o=0){super(e,n,s,r,h,o),this.mediator=t,this.Ac=i,this.Ic=!0,this.Tc=!0,this.Cc=!1,this.Qo=!1,this.Pc=t=>{const i=this.Ac.getIsTabInFocus();t&&this.isInFloating&&(this.Qo=!1,this.Ko()),this.Ic&&this.Gn.floatingMode===a.ProtoPlayerFloatingMode.AfterInView&&t&&(this.Ic=!1),!t&&!this.Ic&&this.Tc&&i&&(this.Qo=!0,super.Yo())},this.Xo=()=>{this.isInFloating&&super.Xo()}}Ko(){const t=!this.Cc;super.Ko(t)}Oc(){this.mediator.publish(this,m.ExitStart)}gc(){this.Mc()}Sc(){this.mediator.publish(this,m.EnterStart)}Mc(){this.transitionState=g.FadeIn,this.ac(d.n.FadeIn),this.hc(d.n.FadeInBase),Object(j.i)(this.Lo),this.hc(d.n.FadeIn)}ic(){this.mediator.publish(this,m.EnterStop)}sc(){this.ac(d.n.FadeInBase,d.n.FadeIn),this.mediator.publish(this,m.ExitStop),this.Uo&&super.jc()}Ec(){this.Ac.on(this.Lo.parentElement,this.Pc,{threshold:O})}Lc(){this.Ac.off(this.Lo.parentElement,this.Pc)}start(){this.oc()&&(super._c(),this.Gn.floatingMode===a.ProtoPlayerFloatingMode.OnPageLoad&&(this.Ic=!1),this.Ec(),this.Pc(this.Ac.check({element:this.Lo.parentElement,threshold:O})))}canFloat(){return this.oc()&&this.Gn.floatingMode!==a.ProtoPlayerFloatingMode.Off}destroy(){this.isInFloating?(this.ec(),this.Uo=!0):super.jc(),this.Lc()}get enabled(){return this.Tc}set enabled(t){this.Tc=t}fullscreenStateChange(t){this.Cc=t,t?this.Lc():this.Ec(),this.Pc(t)}}!function(t){t[t.Play=0]="Play",t[t.Pause=1]="Pause",t[t.Replay=2]="Replay",t[t.Volume=3]="Volume",t[t.Mute=4]="Mute",t[t.Unmute=5]="Unmute",t[t.Seek=6]="Seek",t[t.DraggingStart=7]="DraggingStart",t[t.DraggingStopped=8]="DraggingStopped",t[t.SeekingStart=9]="SeekingStart",t[t.SeekingStopped=10]="SeekingStopped",t[t.Expand=11]="Expand",t[t.Collapse=12]="Collapse",t[t.Quality=13]="Quality",t[t.Close=14]="Close",t[t.Next=15]="Next",t[t.Prev=16]="Prev",t[t.Settings=17]="Settings",t[t.CaptionOn=18]="CaptionOn",t[t.CaptionOff=19]="CaptionOff",t[t.CaptionUpdate=20]="CaptionUpdate",t[t.VolumeHoverStart=21]="VolumeHoverStart",t[t.VolumeHoverStopped=22]="VolumeHoverStopped",t[t.OverlayClick=23]="OverlayClick",t[t.UIHideStart=24]="UIHideStart",t[t.UIShowStart=25]="UIShowStart",t[t.UIEndShowHide=26]="UIEndShowHide",t[t.AboutClick=27]="AboutClick",t[t.ContextClick=28]="ContextClick",t[t.SettingsMenu=29]="SettingsMenu",t[t.HoverStart=30]="HoverStart",t[t.HoverEnd=31]="HoverEnd",t[t.StateChanged=32]="StateChanged",t[t.RebindComponent=33]="RebindComponent",t[t.SkipAd=34]="SkipAd",t[t.LogoClicked=35]="LogoClicked",t[t.ContextMenuOpen=36]="ContextMenuOpen",t[t.ContextMenuClose=37]="ContextMenuClose"}(_||(_={}));var T=e(2),C=e(16);class P extends A{constructor(t,i,e,s,n,r,a=0){super(i,s,e,n,r,a),this.mediator=t,this.Qo=!0}Sc(){}ic(){this.mediator.publish(this,m.EnterStop)}Oc(){}gc(){}sc(){}start(){this.oc()&&(super._c(),super.Yo())}}const M={DetachedFromDom:"detachedFromDom",AdSlotResized:"adSlotResized"},E={DetachedFromDom:"detachedFromDom",AdsEnabled:"adsEnabled"};class L{constructor(t,i,e,s){this.Lo=t,this.Rc=s,this.Bc=this.Dc(e,i)}Dc(t,i){return Object.assign({},t[i]||t[a.ProtoDeviceType.Smartphone])}updateWidth(t){const i=this.Fc(t);i!==this.currentBreakpointClass&&(Object(j.L)(this.Lo,this.currentBreakpointClass),Object(j.a)(this.Lo,i),this.currentBreakpointClass=i)}Fc(t){switch(!0){case t>=this.Bc.xxl:return this.Rc.Xxl;case t>=this.Bc.xl:return this.Rc.Xl;case t>=this.Bc.lg:return this.Rc.Lg;case t>=this.Bc.md:return this.Rc.Md;case t>=this.Bc.sm:return this.Rc.Sm;case t>=this.Bc.xs:return this.Rc.Xs;default:return this.Rc.Xxs}}}var R=e(27),B=e(10);const D={TimeElapsed:"timeElapsed",TimeUpdate:"timeUpdate"};class F{constructor(t,i=0,e=1e3){this.mediator=t,this.timerDuration=i,this.$c=e,this.Uc=0,this.Vc=null,this.Nc=!1,this.Hc=()=>{this.qc(),this.mediator.publish(this,D.TimeUpdate),this.zc(),this.Wc=(new Date).getTime()},i||this.disable()}qc(){this.Uc+=(new Date).getTime()-this.Wc}Gc(){this.Nc||(this.zc(),this.Wc=(new Date).getTime(),this.Vc=setInterval(this.Hc,this.$c))}Jc(){clearInterval(this.Vc),this.Vc=null}Qc(){this.disable(),this.mediator.publish(this,D.TimeElapsed),this.Uc=0}zc(){this.Uc/B.f>=this.timerDuration/B.f&&this.Qc()}start(){this.Xc=!0,null===this.Vc&&this.Gc()}stop(){this.Xc=!1,null!==this.Vc&&(this.qc(),this.Jc())}reset(t){t&&(this.timerDuration=t),this.Uc=0,this.Nc=!1,(null!==this.Vc||this.Xc)&&(this.Jc(),this.Gc())}get timeElapsed(){return this.Uc}get timeRemaining(){return this.timerDuration-this.Uc}disable(){this.Nc=!0,this.Jc()}}const $={MidRollCapped:"midRollCapped",TotalAdBreakLengthExpired:"totalAdBreakLengthExpired",EnableAds:"enableAds",DisableAds:"disableAds",ForceStopAdSlot:"ForceStopAdSlot",ForceStopAdPod:"ForceStopAdPod",AdOpportunity:"adOpportunity",AdPodRemainingTime:"AdPodRemainingTime"};var U,V,N=e(26);!function(t){t[t.Unknown=0]="Unknown",t[t.TimeoutBetweenAds=1]="TimeoutBetweenAds"}(U||(U={}));class H extends o.a{constructor(t,i,e,s){super(),this.mediator=t,this.controlData=e,this.app=s,this.Yc=0,this.Kc=0,this.Zc=null,this.currentPlayerAdSlot=R.ProtoAdSlotsEnum.PreRoll,this.tl={stopped:!1,viewability:!1,inImpression:!1,forceDisable:!1,zeroDimension:!1,isAppBackgrounded:!1,inAppRecyclerViewViewability:!1},this.firstAdBreakStarted=!1,this.il=!1,this.viewabilityStateChanged(i),this.onResize(this.controlData.playerDimensions.width,this.controlData.playerDimensions.height),this.controlData.totalAdBreakLength&&(this.el=new F(this,this.controlData.totalAdBreakLength),this.subscribe(D.TimeElapsed,this.el,()=>{this.mediator.publish(this,$.TotalAdBreakLengthExpired)}))}sl(){return this.Kc>=this.controlData.numberOfMidRolls&&-1!==this.controlData.numberOfMidRolls}nl(t){if(t)return t.stop(),this.unsubscribeAll(t),null}rl(){if(this.il){this.il=!1;const t={[a.ProtoAdSlotsEnum.PreRoll]:a.ProtoAdBreakTypeEnum.PreRoll,[a.ProtoAdSlotsEnum.MidRoll]:a.ProtoAdBreakTypeEnum.MidRoll,[a.ProtoAdSlotsEnum.PostRoll]:a.ProtoAdBreakTypeEnum.PostRoll};this.mediator.publish(this,$.AdOpportunity,{payload:{adBreakType:t[this.currentPlayerAdSlot]}})}this.mediator.publish(this,$.EnableAds),this.el&&this.el.start()}canEnableAds(){return this.tl.stopped||this.tl.viewability||this.tl.inImpression||this.tl.forceDisable||this.tl.zeroDimension||this.tl.isAppBackgrounded||this.tl.inAppRecyclerViewViewability?{enableAds:!1,disableReason:U.Unknown}:this.currentPlayerAdSlot===R.ProtoAdSlotsEnum.MidRoll&&this.sl()?{enableAds:!1,disableReason:U.Unknown}:this.currentPlayerAdSlot!==R.ProtoAdSlotsEnum.MidRoll&&this.Yc>0?{enableAds:!1,disableReason:U.Unknown}:{enableAds:!0,disableReason:U.Unknown}}toggleEnableAds(){const t=this.canEnableAds();t.enableAds?this.rl():(this.mediator.publish(this,$.DisableAds,{payload:t.disableReason}),this.el&&!this.tl.inImpression&&this.el.stop())}startAds(){this.tl.stopped=!1,this.toggleEnableAds()}forceRecheck(){this.toggleEnableAds()}onAdImpression(t){this.currentPlayerAdSlot===R.ProtoAdSlotsEnum.MidRoll&&(this.firstAdBreakStarted||(this.firstAdBreakStarted=!0)),this.tl.inImpression=!0,this.toggleEnableAds(),this.al(),this.hl(),this.ol(t.payload.adSkipMode,t.payload.adDuration)&&(this.Zc=setTimeout(()=>{this.mediator.publish(this,$.ForceStopAdSlot)},N.f*B.f))}hl(){this.controlData.maxAdPodDuration&&!this.cl&&(this.cl=new F(this,this.controlData.maxAdPodDuration),this.cl.start(),this.subscribe(D.TimeElapsed,this.cl,()=>{this.mediator.publish(this,$.ForceStopAdPod)}),this.subscribe(D.TimeUpdate,this.cl,()=>{const t=this.cl.timeRemaining;this.mediator.publish(this,$.AdPodRemainingTime,{payload:{remainingTime:t}})}))}al(){this.controlData.maxAdSlotDuration&&!this.ll&&(this.ll=new F(this,this.controlData.maxAdSlotDuration),this.ll.start(),this.subscribe(D.TimeElapsed,this.ll,()=>{this.mediator.publish(this,$.ForceStopAdSlot)}))}ol(t,i){switch(this.controlData.playerAdsSkippability){case a.ProtoPlayerAdSkippability.IfLongerThan31Sec:if((t===a.ProtoAdSkipMode.Never||t===a.ProtoAdSkipMode.IfLongerThan31Sec)&&!i)return!0;if(t===a.ProtoAdSkipMode.Never&&i>N.f)return!0;break;case a.ProtoPlayerAdSkippability.NoRestrictions:if(t===a.ProtoAdSkipMode.IfLongerThan31Sec&&!i)return!0}return!1}onAdFinished(t,i=!1){this.ll=this.nl(this.ll),i||(this.cl=this.nl(this.cl),this.currentPlayerAdSlot===R.ProtoAdSlotsEnum.MidRoll?this.Kc++:this.Yc++),this.sl()&&!i&&this.mediator.publish(this,$.MidRollCapped),t&&(this.il=!0),this.tl.inImpression=!1,i?this.rl():this.toggleEnableAds(),clearTimeout(this.Zc)}onAdPause(){this.cl&&this.cl.stop(),this.ll&&this.ll.stop(),this.el&&this.el.stop()}onAdPlay(){this.cl&&this.cl.start(),this.ll&&this.ll.start(),this.el&&this.el.start()}onStop(){this.currentPlayerAdSlot=null,this.tl.stopped=!0,this.toggleEnableAds()}onAdStateChange(t,i,e){this.controlData.maxAdSlotDuration=i.maxAdSlotDuration,this.controlData.maxAdPodDuration=i.maxAdPodDuration,t===this.currentPlayerAdSlot&&t===R.ProtoAdSlotsEnum.MidRoll||(null===t&&this.ul===R.ProtoAdSlotsEnum.MidRoll||(this.il=!0),t!==R.ProtoAdSlotsEnum.MidRoll&&(this.Yc=0,this.firstAdBreakStarted=!1),this.currentPlayerAdSlot=t,this.ul=t,this.startAds())}contentChanged(){this.Kc=0,this.firstAdBreakStarted=!1,this.toggleEnableAds()}viewabilityStateChanged(t,i=!1,e=!1){this.dl=t,this.controlData.viewabilityPolicy===R.ProtoAdViewabilityPolicy.Strict&&(this.tl.viewability=!t),e||this.toggleEnableAds()}setToggleAdsReason(t){this.tl.isAppBackgrounded=t.isAppBackgrounded,this.tl.inAppRecyclerViewViewability=t.inAppRecyclerViewViewability,this.toggleEnableAds()}disableAdvertising(){this.tl.forceDisable=!0,this.toggleEnableAds()}enableAdvertising(){this.tl.forceDisable=!1,this.toggleEnableAds()}destroy(){this.el&&this.el.disable(),clearTimeout(this.Zc),this.ll=this.nl(this.ll),this.cl=this.nl(this.cl)}get inView(){return this.dl}onResize(t,i){this.tl.zeroDimension=0===t||0===i,this.toggleEnableAds()}}!function(t){t[t.Portrait=0]="Portrait",t[t.Landscape=1]="Landscape"}(V||(V={}));var q=V;const z=1.3;class W{constructor(){this.fl={},this.pl=[]}getImage(t,i,e,s,n="",r=!1){return this.bl=t,this.vl=Object(T.h)(i)?i:"",this.ml=e,this.gl=s,this.yl=n,this.wl=r,this.kl()}kl(){const t=this.Sl();if(t)return t;const i=this.bl+this.yl,e=new Image;return e.src=i,e.alt=this.vl,this.fl[this.bl]=this.fl[this.bl]||{},this.fl[this.bl][this.ml]=this.fl[this.bl][this.ml]||{},this.fl[this.bl][this.ml][this.gl]=this.fl[this.bl][this.ml][this.gl]||{},this.fl[this.bl][this.ml][this.gl][this.yl]=e,e}Sl(){const t=this.Ol();if(t)return t;if(!this.wl)return;this._l();const i=this.jl();if(i)return i;const e=this.Al();return e||void 0}_l(){const t=[];if(!this.fl[this.bl])return void(this.pl=[]);const i=this.fl[this.bl],e=this.ml>this.gl?q.Landscape:q.Portrait;Object.keys(i).forEach(s=>{const n=parseInt(s,10);Object.keys(i[s]).filter(t=>!!i[s][t]).forEach(i=>{const s=parseInt(i,10);if((n>s?q.Landscape:q.Portrait)!==e)return;const r={area:n*s,img:this.Il(this.bl,n,s)};t.push(r)})}),this.pl=[...t]}Il(t,i,e){if(this.fl[t]&&this.fl[t][i]&&this.fl[t][i][e])return this.fl[t][i][e][Object.keys(this.fl[t][i][e])[0]]}Ol(){return this.fl[this.bl]&&this.fl[this.bl][this.ml]&&this.fl[this.bl][this.ml][this.gl]&&this.fl[this.bl][this.ml][this.gl][this.yl]}jl(){if(0===this.pl.length)return;const t=this.ml*this.gl,i=this.pl.filter(({area:i})=>i>t).sort((t,i)=>t.area-i.area);return 0!==i.length?i[0].img:void 0}Al(){if(0===this.pl.length)return;const t=this.ml*this.gl,i=this.pl.filter(({area:i})=>i<t&&t/i<=z).sort((t,i)=>i.area-t.area);return 0!==i.length?i[0].img:void 0}}var G=e(52);const J={Play:"play",Pause:"pause",Mute:"mute",Unmute:"unmute",Canplay:"canplay",Ended:"ended",Timeupdate:"timeupdate",Seeking:"seeking",Seeked:"seeked",Volumechange:"volumechange",Durationchange:"durationchange",Fullscreen:"fullscreen",LoadedData:"loadeddata",LoadedMetadata:"loadedmetadata",Error:"error"};var Q,X,Y;!function(t){t[t.Auto=0]="Auto",t[t.Strict=1]="Strict"}(Q||(Q={})),function(t){t[t.PlayingState=0]="PlayingState",t[t.PausedState=1]="PausedState",t[t.PrerollState=2]="PrerollState",t[t.PostrollState=3]="PostrollState",t[t.StoppedState=4]="StoppedState",t[t.ReplayState=5]="ReplayState",t[t.HiddenState=6]="HiddenState",t[t.BufferingState=7]="BufferingState",t[t.LiveStreamStarting=8]="LiveStreamStarting",t[t.LiveStreamEnded=9]="LiveStreamEnded",t[t.LiveStreamStopped=10]="LiveStreamStopped",t[t.LiveStreamNotSupported=11]="LiveStreamNotSupported"}(X||(X={})),function(t){t.H264="h264",t.Hevc="hevc"}(Y||(Y={}));const K={PlayError:"playError",NewVideo:"newVideo",Buffering:"buffering",Buffered:"buffered",LevelSwitching:"levelSwitching",EndOfStream:"endOfStream",LiveStreamNotPlayable:"liveNotPlayable"},Z={Change:"VideoQualityChanged",CurrentQuality:"CurrentQuality",Loaded:"QualityListLoaded"};var tt;!function(t){t[t.Low144p=144]="Low144p",t[t.Low240p=240]="Low240p",t[t.Medium360p=360]="Medium360p",t[t.Medium480p=480]="Medium480p",t[t.High720p=720]="High720p",t[t.High1080p=1080]="High1080p"}(tt||(tt={}));const it=720,et=5e3;function st(t,i){const e=t.length-1;return{currentIndex:i,nextIndex:i===e?0:i+1,prevIndex:0===i?e:i-1,firstIndex:0,lastIndex:e}}class nt{constructor(t){this.Tl=t,this.Cl={breakType:a.ProtoAdBreakTypeEnum.None,currentPodNumber:0,maxAdSlotDuration:0,maxAdPodDuration:0,totalNumberOfAdSlots:0},this.Pl=null}setNewBreak(t){this.Tl.forEach(i=>{i.types.forEach(e=>{(function(t,i){let e=!1;switch(t){case a.ProtoAdBreakTypeEnum.PreRoll:e=i===a.ProtoAdSlotsEnum.PreRoll;break;case a.ProtoAdBreakTypeEnum.MidRoll:e=i===a.ProtoAdSlotsEnum.MidRoll;break;case a.ProtoAdBreakTypeEnum.PostRoll:e=i===a.ProtoAdSlotsEnum.PostRoll}return e})(e,t)&&(this.Cl.currentPodNumber=i.numberOfAdSlots,this.Cl.maxAdSlotDuration=i.maxAdSlotDuration,this.Cl.maxAdPodDuration=i.maxAdPodDuration,this.Cl.totalNumberOfAdSlots=i.numberOfAdSlots)})})}adStarted(){this.Ml(),0===this.Cl.currentPodNumber&&(this.Cl.currentPodNumber=this.Cl.totalNumberOfAdSlots),this.Cl.currentPodNumber--}endPod(){this.Ml(),this.Cl.currentPodNumber=0}enterPodTimeout(t){this.Ml(),this.Pl=setTimeout(()=>{this.Ml(),t()},et)}isInAdPod(){return this.Cl.currentPodNumber>0}isCurrentBreakInPod(){return this.Cl.totalNumberOfAdSlots>1}getMaxAdSlotDuration(){return this.Cl.maxAdSlotDuration}getMaxAdPodDuration(){return this.Cl.maxAdPodDuration}getMaxAdSlotPossibleDuration(){let t=0;for(let i=0;i<this.Tl.length;i++){if(0===this.Tl[i].maxAdSlotDuration)return 0;t=Math.max(t,this.Tl[i].maxAdSlotDuration)}return t}getCurrentSlotIndex(){return this.Cl.totalNumberOfAdSlots-this.Cl.currentPodNumber}getNextSlotIndex(){const t=this.getCurrentSlotIndex();return this.Cl.totalNumberOfAdSlots>t?t+1:1}getTotalNumberOfSlots(){return this.Cl.totalNumberOfAdSlots}isInPodTimeout(){return!!this.Pl}Ml(){clearTimeout(this.Pl),this.Pl=null}}var rt=e(14),at=e(7),ht=e(49),ot=e(22);const ct=["com.accuweather.android"],lt=.05*B.f;class ut extends o.a{constructor(t,i,e){super(),this.mediator=t,this.zs=i,this._appSettings=e,this.El=.01,this.Ll=.5,this.Rl=2e3,this.Bl=0,this.Dl=!1,this.Fl=!1,this.$l=!1,this.Ul=!1,this.Vl=!1,this.Nl=!1,this.dl=!1,this.ia=a.ProtoAdSlotsEnum.PreRoll,this.Hl=!1,this.ql=!1,this.zl=!1,this.Wl=!1,this.Gl=!1,this.Jl=!1,this.Ql=!1,this.Yl={[w.b.AdRemainingTimeChange]:t=>{var i;this.Gl&&this.app.config.isInAppAndroid&&(null===(i=this.adHandler)||void 0===i||i.pause())},[w.b.AdImpression]:t=>{this.Kl.onAdImpression(t),this.Zl(),this.mediator.publish(this,C.b.AdImpression,t);const{adSourceData:i,customAdData:e}=t.payload;this.tu(i,e)},[w.b.AdStopped]:t=>{this.mediator.publish(this,C.b.AdStopped,t),this.iu(),this.eu(),this.app.services.EventsStorageService.emitAdStopped(),this.dl&&this.su()},[w.b.AdError]:t=>{this.adHandler.inImpression&&this.iu(),this.mediator.publish(this,C.b.AdError,t),this.app.services.EventsStorageService.emitAdError()},[w.b.AdSkipped]:t=>{this.mediator.publish(this,C.b.AdSkipped,t),this.app.services.EventsStorageService.emitAdSkipped();this.floatingModule.enabled=!0,this.iu(!0),this.eu(),this.dl&&this.su()},[w.b.AdPaused]:t=>{this.Kl.onAdPause(),this.app.services.TrackingService.setSessionPlayback(!1),this.app.services.EventsStorageService.emitAdPaused(),this.mediator.publish(this,C.b.AdPause,t)},[w.b.AdPlaying]:t=>{this.Kl.onAdPlay(),this.app.services.TrackingService.setSessionPlayback(!0),this.app.services.EventsStorageService.emitAdPlaying(),this.mediator.publish(this,C.b.AdPlay,t)},[w.b.AdVideoFirstQuartile]:t=>{this.mediator.publish(this,C.b.AdCompleted25,t),this.app.services.EventsStorageService.emitAdVideoFirstQuartile()},[w.b.AdVideoMidpoint]:t=>{this.mediator.publish(this,C.b.AdCompleted50,t),this.app.services.EventsStorageService.emitAdVideoMidpoint()},[w.b.AdVideoThirdQuartile]:t=>{this.mediator.publish(this,C.b.AdCompleted75,t),this.app.services.EventsStorageService.emitAdVideoThirdQuartile()},[w.b.AdVideoComplete]:t=>{this.mediator.publish(this,C.b.AdCompleted100,t),this.app.services.EventsStorageService.emitAdVideoComplete()},[w.b.AdClickThru]:t=>{this.mediator.publish(this,C.b.AdClick,t),this.app.services.EventsStorageService.emitAdClickThru()},[w.b.AdInteraction]:()=>{this.app.services.EventsStorageService.emitAdInteraction()},[w.b.AdUserAcceptInvitation]:()=>{this.app.services.EventsStorageService.emitAdInteraction()},[w.b.AdUserClose]:()=>{this.app.services.EventsStorageService.emitAdInteraction()},[w.b.AdUserMinimize]:()=>{this.app.services.EventsStorageService.emitAdInteraction()},[w.b.AdVideoStart]:t=>{const{adSourceData:i}=t.payload,e={duration:i&&i.length,mediaPlayerVolume:this.getVolume()};this.app.services.EventsStorageService.emitAdVideoStart(e)},[w.b.AdLoaded]:t=>{var i;const{adLoadedData:e}=t.payload;(null===(i=e)||void 0===i?void 0:i.skipOffset)<0&&(e.skipOffset=void 0);const s=this.nu(e);this.app.services.EventsStorageService.emitAdLoaded(s)},[w.b.AdVolumeChange]:()=>{this.app.services.EventsStorageService.emitAdVolumeChange()}},this.ru=t=>i=>{const e=this.Yl[t];e&&e(i)},this.au=t=>{this.ql=t,t&&(this.app.services.ViewabilityService.off(this.$playerContainer,this.au),this.hu())},this.ou=t=>{t&&this.adHandler&&!this.Wl&&setTimeout(()=>{this.adHandler.resumeWithoutUserInteraction()},lt)},this.cu=()=>{!this.Fl&&this.lu()&&(this.mediator.publish(this,c.b.CanStart),this.app.services.ResizeObserver.off(this.$experienceContainer,this.cu))},this.uu=({payload:{playback:t,isFullscreenClose:i}})=>{this.floatingModule&&Object(T.a)(t)&&!i&&(this.floatingModule.enabled=t)},this.du=()=>{this.fu(1)},this.pu=()=>{this.fu(0)},this.bu=t=>{this.uu(t);const{playback:i}=t.payload;Object(T.a)(i)&&(i?(this.app.services.EventsStorageService.emitAdPlay(),this.Wl=!1):(this.app.services.EventsStorageService.emitAdPause(),this.Wl=!0))},this.vu=new W}mu(){}tu(t,i){this.app.services.EventsStorageService.emitAdImpression(t,i)}eu(){this.app.services.EventsStorageService.emitAdComplete()}gu(){}su(){}yu(){}wu(){}xu(){}ku(){}Su(){}Ou(t){const i={state:t};this.app.services.EventsStorageService.emitAdStateChange(i)}_u(){const{clientWidth:t,clientHeight:i}=this.$playerContainer,e={width:t,height:i};this.app.services.EventsStorageService.emitPlayerResized(e)}ju(){this.app.services.EventsStorageService.emitOnEnterFullscreen()}Au(){this.app.services.EventsStorageService.emitOnExitFullscreen()}Iu(){this.app.services.EventsStorageService.emitOnPlayerCollapsed()}Tu(){this.app.services.EventsStorageService.emitOnPlayerExpanded()}Cu(t){this.Pu(t),this.Mu(t),this.Eu(t),this.ia=t,this.Lu(t)}Mu(t){this.adHandler&&this.adHandler.adStateChange(t,this.Ru.getMaxAdSlotDuration())}Eu(t){this.Kl.onAdStateChange(t,{maxAdPodDuration:this.Ru.getMaxAdPodDuration(),maxAdSlotDuration:this.Ru.getMaxAdSlotDuration()})}Pu(t){this.Ru.setNewBreak(t)}Lu(t){this.Ou(G.b[t])}Bu(){this.adHandler&&this.adHandler.contentChanged(),this.Kl.contentChanged()}Du(){this.adHandler=this.Fu(),this.$u(),this.relay(C.b.ImpressionPrice,this.adHandler,this,this.mediator),this.subscribe(c.b.UserInteraction,this.adHandler,this.bu),this.subscribe(M.DetachedFromDom,this.adHandler,()=>{this.app.services.GlobalDomUtilsService.isDetachedFromDOM(this.$experienceContainer)?this.triggerDestroy():(this.unsubscribeAll(this.adHandler),this.adHandler.destroy(),this.adHandler=null,Object(n.a)({level:a.ProtoLoggingLevelEnum.FATAL,message:"only_adHandler_destroyed",sendMaxLog:!1,throttle:1}))});const t=()=>{this.app.services.TrackingService.setAdStart(),this.zl=!0,this.Wl=!1,this.hu(),this.unsubscribe(E.AdsEnabled,this.adHandler,t)};this.subscribe(E.AdsEnabled,this.adHandler,t),this.subscribe(M.AdSlotResized,this.adHandler,({payload:{width:t,height:i}})=>{this.Kl.onResize(t,i)})}$u(){Object.keys(w.b).forEach(t=>{this.subscribe(w.b[t],this.adHandler,i=>{const e=w.b[t];this.ru(e)(i),this.mediator.publish(this,e,i)})})}iu(t=!1){let i=this.Ru.isInAdPod();t&&(i=!1,this.Ru.endPod()),this.Kl.onAdFinished(this.adHandler.inImpression,i),this.Uu(),this.Vu.isCloseButton&&(this.floatingModule&&this.floatingModule.isInFloating?this.Nu(this.Vu.floatingCloseButtonMode):this.Nu(this.Vu.closeButtonMode))}Zl(){this.Ru.adStarted(),this.adHandler.show()}Uu(){this.adHandler.hide()}Hu(t){this.adHandler.enterAdPodLoadingState(),this.Ru.enterPodTimeout(()=>{this.Ru.endPod(),t()})}qu(){Object(j.i)(this.$playerContainer),this.Kl=this.zu(),this.subscribe($.EnableAds,this.Kl,()=>{this.adHandler&&this.adHandler.enableAds()}),this.subscribe($.DisableAds,this.Kl,t=>{this.adHandler&&this.adHandler.disableAds(t.payload)}),this.subscribe($.ForceStopAdSlot,this.Kl,()=>{this.adHandler&&this.adHandler.stopAd("forceStopAdSlot")}),this.subscribe($.ForceStopAdPod,this.Kl,()=>{if(this.adHandler)if(this.adHandler.inImpression)this.Ru.endPod(),this.adHandler.stopAd("forceStopAdPod");else{const t=!0;this.iu(t)}}),this.subscribe($.AdPodRemainingTime,this.Kl,t=>{this.adHandler&&this.adHandler.updatePodRemainingTime(t.payload.remainingTime)}),this.subscribe($.AdOpportunity,this.Kl,t=>{const i=t.payload;this.app.services.TrackingService.trackAdOpportunity(i),this.adHandler&&this.adHandler.newAdOpportunity()})}Wu(){this.app.services.ViewabilityService.on(this.$playerContainer,this.au,{threshold:this.Ll,callbackDelay:this.Rl}),this.app.services.ViewabilityService.on(this.$playerContainer,(t,i)=>this.Pc(t,i),{threshold:this.El}),this.app.services.ViewabilityService.subscribe(C.d.OmidViewabilityThreshold,t=>{this.mediator.publish(this,C.d.OmidViewabilityThreshold,{payload:{threshold:t}})}),this.app.config.os.os===ot.b.Ios&&this.app.services.PageFocusService.on(this.ou)}hu(){this.ql&&this.zl&&this.mediator.publish(this,c.c.SessionView)}Pc(t,i=!1){var e;const{isRecyclerViewIntegration:s}=this.app.config;this.Kl.setToggleAdsReason({isAppBackgrounded:i,inAppRecyclerViewViewability:s&&!t}),this.app.config.isInApp&&(i?(this.Gl=!0,this.Ql?this.Jl=!0:this.Jl=!1,this.Gu=this.getVolume(),this.setVolume(0),null===(e=this.adHandler)||void 0===e||e.disableAds(U.Unknown),this.pause()):(this.Gu&&(this.setVolume(this.Gu),this.Gu=null),this.Gl&&(this.Gl=!1,this.Jl||this.play()))),this.dl=t,this.mediator.publish(this,C.b.IsViewable,{payload:t}),this.Kl.viewabilityStateChanged(this.checkFloatingViewability(t),this.Ru.isInAdPod(),this.Ru.isInPodTimeout()),this.app.services.TrackingService.setSessionViewability(t)}checkFloatingViewability(t){const i=this.app.services.ViewabilityService.getIsTabInFocus();return!(t||!this.floatingModule||!this.floatingModule.isInFloating||!i)||t}qr(){const t=this.$playerContainer.clientWidth,i=this.$playerContainer.clientHeight;this.adHandler?this.resizeAdHandler():this.Kl.onResize(t,i),this.breakPointsHandler.updateWidth(t),setTimeout(()=>{this.mediator.publish(this,C.b.SizeChanged,{payload:{width:t,height:i}}),this.Ju()})}Ju(){this.Hl||this._u()}Qu(){this.app.services.ResizeObserver.on(this.$playerContainer,()=>{this.qr()})}Xu(){this.Hl=!0,this.app.services.InteractionService.disableScrollEvent(),this.ju(),this.adHandler&&this.adHandler.setVastViewMode(w.a.Fullscreen)}Yu(){this.Hl=!1,this.app.services.InteractionService.enableScrollEvent(),this.Au(),this.adHandler&&this.adHandler.setVastViewMode(w.a.Normal)}Ku(){const t=`<cnx class='${d.c}'></cnx>`,i=this.app.services.GlobalDomUtilsService.createElementByString(t);return this.Zu(i),i}Zu(t){Object(j.Q)(t,{"padding-bottom":`${this.td()}%`})}td(){return this.Vu.playerSize.ratioHeight/this.Vu.playerSize.ratioWidth*100}ed(){this.subscribe(m.EnterStart,this.floatingModule,()=>{this.mediator.publish(this,C.c.PlayerFloatChanged,{payload:y.Float})}),this.subscribe(m.ExitStop,this.floatingModule,()=>{this.mediator.publish(this,C.c.PlayerFloatChanged,{payload:y.Embed})}),this.subscribe(m.EnterStop,this.floatingModule,()=>{this.Pc(!0)})}sd(){this.floatingModule=new I(this,this.app.services.ViewabilityService,this.app.services.ResizeObserver,this.$playerContainer,this.Vu.floatingSettings,this.app.config.device,this.app.services.GlobalDomUtilsService,this.nd),this.ed(),this.floatingModule.start()}rd(){const t=new P(this,this.app.services.ResizeObserver,this.$experienceContainer,this.Vu.floatingSettings,this.app.config.device,this.app.services.GlobalDomUtilsService);this.subscribe(m.EnterStop,t,()=>{this.app.services.ViewabilityService.triggerRecheck(this.$playerContainer)}),t.start()}setNewVolume(t){this.adHandler&&this.adHandler.setVolume(t)}hd(){this.od(),this.adHandler&&this.ld(this.adHandler)}ld(t){this.subscribe(c.b.UserInteraction,t,({payload:{volume:t}})=>{t&&this.ud()})}Br(t){this.mediator.publish(this,C.b.VolumeChanged,{payload:t}),this.app.services.EventsStorageService.emitVolumeChange(t)}fu(t){this.getVolume()!==t&&this.setNewVolume(t)}od(){this.Dl=!0,this.$playerContainer.addEventListener("mouseover",this.du),this.$playerContainer.addEventListener("mouseout",this.pu)}ud(){this.Dl&&(this.Dl=!1,this.$playerContainer.removeEventListener("mouseover",this.du),this.$playerContainer.removeEventListener("mouseout",this.pu))}dd(t){switch(t){case a.ProtoPlayerCloseButtonMode.OnHover:case a.ProtoPlayerCloseButtonMode.AlwaysOn:return!0;case a.ProtoPlayerCloseButtonMode.OnHoverAfterFirstAd:return!(!this.adHandler||!this.adHandler.firstAdShown);default:return!1}}Nu(t){this.dd(t)?(Object(j.a)(this.$playerContainer,d.g.CanClose),this.fd(t)):Object(j.L)(this.$playerContainer,d.g.CanClose)}pd(){this.breakPointsHandler=new L(this.$playerContainer,this.app.config.device,this.bd,this.vd),this.breakPointsHandler.updateWidth(this.$playerContainer.clientWidth)}gd(){this.Vu.isCloseButton&&(this.subscribe(_[_.Close],this.adHandler,()=>{this.handleClose()}),this.Nu(this.Vu.closeButtonMode),this.floatingModule&&this.floatingModule.canFloat()&&(this.subscribe(m.EnterStop,this.floatingModule,()=>{this.Nu(this.Vu.floatingCloseButtonMode)}),this.subscribe(m.ExitStart,this.floatingModule,()=>{this.Nu(this.Vu.closeButtonMode)}),this.subscribe(m.ExitStop,this.floatingModule,()=>{this.Nu(this.Vu.closeButtonMode)})))}nu(t){const{skipOffset:i}=t;return{isAutoPlay:this.Vu.playbackMode===a.ProtoPlayerPlaybackModeEnum.Autoplay,skipOffset:i,isSkippable:Object(T.d)(i)}}yd(){this.zl=!0,this.app.services.TrackingService.setContentStart(),this.hu()}lu(){const{clientWidth:t,clientHeight:i}=this.$experienceContainer;return!Object(rt.f)({width:t,height:i})||this.wd()}wd(){return ct.includes(this.app.config.bundleID)}xd(t){try{const{display:i,width:e,height:s,flex:n,maxWidth:r,minWidth:a}=this.app.services.GlobalDomUtilsService.getComputedStyle(t),{width:h,height:o}=t.getBoundingClientRect(),c={display:i,compWidth:e,boundWidth:h,compHeight:s,boundHeight:o,flex:n,maxWidth:r,minWidth:a};return{type:t.nodeName,styles:JSON.stringify(c)}}catch(t){return{err:"BaseExperience_getElementInfo_error"}}}kd(){if(!Object(at.l)([95,5]))return;const t={parent:this.xd(this.$experienceContainer.parentElement),main:this.xd(this.$experienceContainer)};Object(n.a)({message:"BaseExperience_invalid_dimensions",level:a.ProtoLoggingLevelEnum.INFO,exception:JSON.stringify(t)})}Sd(){this.Ru=new nt(this.Vu.adBreaks)}Mo(t,i,e){this.Vu=t,this.app=i,this.$experienceContainer=e,this.mu(),this.app.services.ViewabilityService.setViewableThreshold(this.Bl),this.generateHTML(),this.Sd(),this.app.services.ResizeObserver.on(this.$experienceContainer,this.cu),this.lu()?this.mediator.publish(this,c.b.CanStart):this.kd()}start(){this.Fl=!0,Object(j.a)(this.$experienceContainer,d.b.MainContainerFlex),this.mediator.publish(this,c.c.SessionRendered),this.pd(),this.Qu(),this.Vu.floatingSettings.floatingMode===a.ProtoPlayerFloatingMode.Always?this.rd():(this._u(),this.sd()),this.Wu(),this.Vu.lineItemSettings.lineItems.length>0&&!this.Vu.disableAdvertising&&!this.zs&&this.Du(),this.app.config.isMobile||this.Vu.soundMode!==a.ProtoPlayerSoundMode.Hover||this.hd(),this.Vu.isCloseButton&&this.gd(),this.qu(),this.zs||ht.a.detectUsingScript().then(t=>{t&&(this.app.services.TrackingService.trackSessionAdBlocker(a.ProtoAdBlockDetectionTypeEnum.Network),this.Kl.disableAdvertising())})}play(){this.adHandler&&this.adHandler.inImpression&&this.adHandler.play()}pause(){this.adHandler&&this.adHandler.inImpression&&this.adHandler.pause()}setVolume(t){this.setNewVolume(t),this.ud()}getSize(){return{width:this.$experienceContainer.clientWidth,height:this.$experienceContainer.clientHeight}}setSize(t,i){Object(rt.f)({width:t,height:i})||Object(j.Q)(this.$experienceContainer,{width:`${t}px`,height:`${i}px`})}setCustomMacros(t){this.app.services.MacrosService.addExtraMacros(t)}isViewable(){return this.app.services.ViewabilityService.check({element:this.$playerContainer,threshold:this.El})}setViewableThreshold(t){this.app?this.app.services.ViewabilityService.setViewableThreshold(t):this.Bl=t}setAmpUserConsent(t){this.app.services.UserManagerService.setAmpUserConsent(t)}triggerDestroy(){this.app.services.EventsStorageService.destroy(),this.mediator.publish(this,c.b.Destroy)}disableAdvertising(){this.Kl.disableAdvertising()}enableAdvertising(){this.Kl.enableAdvertising()}destroy(){this.adHandler&&this.adHandler.destroy(),this.Kl&&this.Kl.destroy(),this.floatingModule&&(this.floatingModule.destroy(),this.floatingModule=null)}}var dt=e(13);const ft=140,pt=80;class bt{static getScaledImageUrl(t,i,e,s){if(t&&!Object(rt.f)({width:i,height:e}))return Object(T.e)(s)&&(i=Object(rt.e)(i,s),e=Object(rt.e)(e,s)),`${t}${bt.getScaledImageQueryParams(i,e)}`.trim()}static getScaledImageQueryParams(t,i){return Object(rt.f)({width:t,height:i})?"":`?width=${t}&height=${i}&fit=bounds`}static getSmartCroppedImageUrl(t,i,e){return Object(T.h)(t)||(t=dt.a.endPoints.base.image),Object(rt.f)({width:i,height:e})&&(i=ft,e=pt),`${t}${bt.getSmartCroppedImageQueryParams(i,e)}`}static getSmartCroppedImageQueryParams(t,i){return Object(rt.f)({width:t,height:i})?"":`?crop=${t}:${i},smart&width=${t}&height=${i}&format=jpeg&quality=60&fit=crop`}}class vt{constructor(t){this.context=t}onClick(){}canTransitionToState(t){return!0}enterState(){this.initState(),this.context.currentState=this}}var mt,gt;function yt(t,i,e,s){t.style.top=`${function(t,i,e,s,n){let r=i-s.clientY;const a=s.clientY+s.height-i;n.alignTop&&r>t.offsetHeight?r-=t.offsetHeight:!n.alignTop&&a<t.offsetHeight?r-=t.offsetHeight-a:(r+=e)+t.offsetHeight>s.height&&(r=s.height-t.offsetHeight);return r}(t,i.clientY,i.height,e,s)}px`,t.style.left=`${function(t,i,e,s){const n=s.distanceFromMargin?s.distanceFromMargin:0;let r=Math.ceil(i)-Math.ceil(e.clientX),a=i,h=a+t.offsetWidth;const o=e.clientX+e.width;if(s.alignMiddle){const i=t.offsetWidth/2;r-=Math.ceil(i),a-=i,h-=i}if(s.alignMiddle||s.forceRight)return e.clientX>a?r=0+n:o<h&&(r-=Math.ceil(h)-Math.ceil(o)+n),r;h>o&&(r-=t.offsetWidth);return r}(t,i.clientX,e,s)}px`}!function(t){t[t.PlayButton=0]="PlayButton",t[t.BigPlayButton=1]="BigPlayButton",t[t.VolumeButton=2]="VolumeButton",t[t.VolumeProgress=3]="VolumeProgress",t[t.VolumeControls=4]="VolumeControls",t[t.ExpandButton=5]="ExpandButton",t[t.SettingsButton=6]="SettingsButton",t[t.CaptionButton=7]="CaptionButton",t[t.CaptionComponent=8]="CaptionComponent",t[t.CastButton=9]="CastButton",t[t.ShareButton=10]="ShareButton",t[t.UpNextButton=11]="UpNextButton",t[t.UpNextBox=12]="UpNextBox",t[t.PreviousButton=13]="PreviousButton",t[t.LogoComponent=14]="LogoComponent",t[t.LogoOutstream=15]="LogoOutstream",t[t.MoreButton=16]="MoreButton",t[t.ElapsedTimeLabel=17]="ElapsedTimeLabel",t[t.TotalDurationLabel=18]="TotalDurationLabel",t[t.ProgressBar=19]="ProgressBar",t[t.QualityMenu=20]="QualityMenu",t[t.QueStateOverlay=21]="QueStateOverlay",t[t.Loader=22]="Loader",t[t.ContextMenu=23]="ContextMenu",t[t.ElementsSettingsMenu=24]="ElementsSettingsMenu",t[t.CloseButton=25]="CloseButton",t[t.SkipAdButton=26]="SkipAdButton",t[t.AdLoadingScreen=27]="AdLoadingScreen",t[t.CtaButton=28]="CtaButton",t[t.PlayspaceProgressBar=29]="PlayspaceProgressBar",t[t.PlayspaceSettingsMenu=30]="PlayspaceSettingsMenu",t[t.ClickToPlayButton=31]="ClickToPlayButton",t[t.SlideTitle=32]="SlideTitle",t[t.SkipAd=33]="SkipAd",t[t.TopTitle=34]="TopTitle",t[t.TopLogo=35]="TopLogo",t[t.TopSlideTitle=36]="TopSlideTitle",t[t.TopStoryTitle=37]="TopStoryTitle",t[t.TextLabel=38]="TextLabel",t[t.LivePoster=39]="LivePoster",t[t.LiveIcon=40]="LiveIcon"}(mt||(mt={})),function(t){t[t.Top=1]="Top",t[t.Bottom=2]="Bottom",t[t.Right=4]="Right",t[t.Left=8]="Left",t[t.Middle=16]="Middle"}(gt||(gt={}));class wt extends o.a{constructor(t,i,e,s,n){super(),this.mediator=t,this.ks=i,this.Od=e,this.Xn=n,this._d=i.createElementByString(s)}getContainer(){return this._d}getCoordinates(t){const i=this.ks.getElementCoordinates(this._d);return this.Xn&&t?((t&gt.Top)===gt.Top&&(i.clientY-=this._d.clientHeight),(t&gt.Right)===gt.Right&&(i.clientX+=this._d.clientWidth)):i.clientX+=i.width/2,i}showComponent(t=!1){if(!this._d||!this._d.parentElement)return;const i=Object(j.u)(this._d.parentElement,"cnx-ui-btn")?this._d.parentElement:this._d;t&&Object(j.E)(i)?Object(j.g)(i):Object(j.R)(i)}hideComponent(t=!1){if(!this._d||!this._d.parentElement)return;const i=Object(j.u)(this._d.parentElement,"cnx-ui-btn")?this._d.parentElement:this._d;t&&!Object(j.E)(i)?Object(j.h)(i,()=>Object(j.v)(i)):Object(j.v)(i)}destroy(){this._d.innerHTML="",this._d.style.display="none",this.Od.unregisterAll(this)}}var xt,kt=e(8);class St extends wt{constructor(t,i,e,s,n){super(t,i,e,s,n),this.eventList=[kt.a[kt.a.Scroll],kt.a[kt.a.Click]],this.jd=t=>{this.onInteractionHandler(t)},this.onBeforeClick=t=>{t.stopPropagation()},this.onClick=t=>{this.onInteractionHandler(t),this.onClickHandler(t)}}onInteractionHandler(t){t.stopPropagation()}onClickHandler(t){}initComponent(){const t={interactionstart:this.onBeforeClick,interaction:this.jd,click:this.onClick};this.Od.register(this._d,this,this.Od,t),this.Xn&&(this.subscribe(kt.a[kt.a.Click],this.Od,()=>{this.onClickHandler()}),this.relay(kt.a[kt.a.Scroll],this.Od,this,this.mediator))}destroy(){this.unsubscribeAll(this.Od),super.destroy()}}class Ot extends St{constructor(){super(...arguments),this.onClick=t=>{this.onInteractionHandler(t),this.onClickHandler(),this.addBoomEffect()}}addBoomEffect(){Object(j.a)(this._d,"cnx-boom"),this._d.getClientRects(),Object(j.a)(this._d,"cnx-boom-anim");const t=i=>{"transform"===i.propertyName&&(Object(j.L)(this._d,"cnx-boom"),Object(j.L)(this._d,"cnx-boom-anim"),this._d.removeEventListener("transitionend",t))};this._d.addEventListener("transitionend",t)}initComponent(){super.initComponent(),this._d.appendChild(this.ks.createElementByString('<cnx class="cnx-boom-elem"></cnx>'))}}class _t extends Ot{constructor(){super(...arguments),this.eventList=[_[_.HoverStart],_[_.HoverEnd],...this.eventList],this.onStartHover=()=>{Object(j.a)(this._d,d.h.HoverStart),Object(j.a)(this._d,d.h.HoverEnd),this.mediator.publish(this,_[_.HoverStart])},this.onEndHover=()=>{Object(j.L)(this._d,d.h.HoverEnd),this.mediator.publish(this,_[_.HoverEnd])}}initComponent(){super.initComponent(),this.Xn?(this._d.addEventListener("touchstart",this.onStartHover),this._d.addEventListener("touchend",this.onEndHover),this._d.addEventListener("touchcancel",this.onEndHover)):(this._d.addEventListener("mouseenter",this.onStartHover),this._d.addEventListener("mouseleave",this.onEndHover))}destroy(){this.Xn?(this._d.removeEventListener("touchstart",this.onStartHover),this._d.removeEventListener("touchend",this.onEndHover),this._d.removeEventListener("touchcancel",this.onEndHover)):(this._d.removeEventListener("mouseenter",this.onStartHover),this._d.removeEventListener("mouseleave",this.onEndHover)),super.destroy()}onInteractionHandler(t){this.onEndHoverClick()}onEndHoverClick(){Object(j.L)(this._d,d.h.HoverEnd),Object(j.L)(this._d,d.h.HoverStart)}}!function(t){t[t.Play=0]="Play",t[t.Pause=1]="Pause"}(xt||(xt={}));class jt extends _t{constructor(t,i,e,s,n){super(t,i,e,s,n),this.Id=!1,this.eventList=[_[_.Play],_[_.Pause],_[_.Replay],_[_.StateChanged],...this.eventList],this.Td="Play",this.Cd="Pause",this.setState(xt.Pause)}onClickHandler(){this.Gt===xt.Pause?this.mediator.publish(this,_[_.Pause]):this.Id?this.mediator.publish(this,_[_.Replay]):this.mediator.publish(this,_[_.Play])}Pd(){}toggleReplay(t){this.Id=t}setState(t){this.Gt!==t&&(this.Gt=t,this.Pd(),this.mediator.publish(this,_[_.StateChanged]))}get tooltip(){return this.Gt===xt.Play?this.Td:this.Cd}}class At extends vt{initState(){this.context.$uiContainer.classList.add(d.j.Playing);const t=this.context.getComponent(mt.PlayButton);t&&t.setState(xt.Pause);const i=this.context.getComponent(mt.BigPlayButton);i&&i.setState(xt.Pause)}exitState(){this.context.$uiContainer.classList.remove(d.j.Playing)}}class It extends At{constructor(){super(...arguments),this.Ed=100}Ld(){if(this.elapsedTimeoutId||!this.context.duration)return;const t=Date.now();this.elapsedTimeoutId=setTimeout(()=>{this.context.elapsedTime+=(Date.now()-t)/1e3;const i=this.context.getComponent(mt.ProgressBar);i&&i.setProgress(Object(rt.g)(0,this.context.duration,0,100,this.context.elapsedTime)),this.elapsedTimeoutId=null,this.Ld()},this.Ed)}initState(){super.initState(),this.context.duration&&this.Ld()}exitState(){super.exitState(),this.context.duration&&(clearTimeout(this.elapsedTimeoutId),this.elapsedTimeoutId=null)}}class Tt extends vt{initState(){this.context.$uiContainer.classList.add(d.j.Paused);const t=this.context.getComponent(mt.PlayButton);t&&t.setState(xt.Play);const i=this.context.getComponent(mt.BigPlayButton);i&&i.setState(xt.Play)}exitState(){this.context.$uiContainer.classList.remove(d.j.Paused)}}class Ct extends Tt{initState(){super.initState()}exitState(){super.exitState()}}class Pt{constructor(t,i){this.Rd=t,this.ks=i,this.Bd=/\[\[([0-9]+)]]/g,this.Dd=[],this.Fd=[],this.$d=this.ks.createElementByString(this.Ud(this.Rd))}Vd(t){return`<cnx class="pl_${t}"></cnx>`}Ud(t){return t.replace(this.Bd,(t,i)=>(this.Dd.push(parseInt(i,10)),this.Vd(i)))}Nd(t,i){return this.Fd.some(i=>i.slotName===t)?null:this.Fd.some(t=>t.component===i)?null:this.$d.getElementsByClassName(`pl_${t}`)[0]}getComponentList(){return this.Dd}getRenderedDom(){return this.$d}registerSlot(t,i){const e=this.Nd(t,i);if(null!==e){const s=i.getContainer();return e.parentNode.replaceChild(s,e),this.Fd.push({component:i,slotName:t}),!0}return!1}initComponents(){this.Fd.forEach(t=>t.component.initComponent())}}class Mt extends o.a{constructor(t,i,e){super(),this.globalDomUtilsService=t,this.templateString=i,this.componentFactory=e,this.Hd={},this.qd=new Pt(i,t),this.addComponents()}addComponents(){this.qd.getComponentList().forEach(t=>{const i=this.componentFactory.createComponent(t,this);this.registerComponent(t,i)})}registerComponent(t,i){this.qd.registerSlot(t,i),this.Hd[t]=i,this.zd(i)}zd(t){t.eventList.forEach(i=>{this.subscribe(i,t,e=>{i===_[_.RebindComponent]&&this.rebindComponentEvents(t),this.handleComponentEvent(i,e,t)})})}rebindComponentEvents(t){t&&(this.unsubscribeAll(t),this.zd(t))}getComponent(t){return this.Hd[t]}destroy(){Object.keys(this.Hd).forEach(t=>{this.Hd[t].destroy()})}}class Et extends Mt{constructor(t,i,e,s,n){super(e,s,n),this.mediator=t,this.$container=i,this.componentFactory=n,this.$uiContainer=this.qd.getRenderedDom(),i.appendChild(this.$uiContainer),this.qd.initComponents()}changeState(t){const i=this.Wd[t];i!==this.currentState&&this.currentState.canTransitionToState(i)&&(this.currentState.exitState(i),i.enterState())}hide(){Object(j.a)(this.$uiContainer,d.h.DisplayNone)}show(){Object(j.L)(this.$uiContainer,d.h.DisplayNone)}destroy(){super.destroy(),this.$uiContainer.parentNode.removeChild(this.$uiContainer)}}var Lt,Rt=e(94),Bt=e.n(Rt);class Dt{constructor(t,i){this.Gd=t,this.ks=i,this.Jd=[],this.Qd=12,this.Xd=24,this.Yd=4,this.Kd=!1}Zd(){this.tf=this.ks.getElementCoordinates(this.Gd.parentElement)}if(t,i){t.getElementsByClassName("cnx-tooltip-text")[0].innerHTML=i}ef(t){if(!t||!t.tooltip||this.Kd)return;if(this.Jd.find(i=>i.component===t))return;const i=this.ks.createElementByString(Bt.a);this.if(i,t.tooltip),this.Zd();const e=t.getCoordinates();let s=!1;const{clientY:n,height:r}=e,{clientY:a,height:h}=this.ks.getElementCoordinates(this.Gd);n<=a+h/2-r?e.clientY+=this.Qd:(e.clientY-=this.Xd,s=!0),this.Gd.appendChild(i),yt(i,e,this.tf,{alignMiddle:!0,alignTop:s,forceRight:!0,distanceFromMargin:this.Yd}),Object(j.i)(i),Object(j.a)(i,d.s.OpacityInTransition),this.Jd.push({component:t,domElement:i})}sf(t){if(!t.tooltip)return;const i=this.Jd.find(i=>i.component===t);if(!i)return;const e=i.domElement;this.Gd.removeChild(e),this.Jd=this.Jd.filter(i=>i.component!==t)}nf(t){if(!t.tooltip)return;const i=this.Jd.find(t=>t.component===this.rf);i&&this.if(i.domElement,t.tooltip)}af(){this.rf=null,this.Jd.forEach(t=>this.sf(t.component))}hoverStart(t){this.rf=t,this.ef(t)}hoverEnd(t){this.rf=null,this.sf(t)}stateChanged(t){this.rf===t&&this.nf(t)}disableTooltips(){this.Kd=!0,this.af()}enableTooltips(){this.Kd=!1,this.ef(this.rf)}}!function(t){t[t.expand=0]="expand",t[t.collapse=1]="collapse"}(Lt||(Lt={}));class Ft extends _t{constructor(){super(...arguments),this.eventList=[_[_.Expand],_[_.Collapse],...this.eventList],this.hf="Full Screen",this.cf="Exit Full Screen"}onClickHandler(){switch(this.Gt){case Lt.collapse:this.mediator.publish(this,_[_.Expand]);break;case Lt.expand:this.mediator.publish(this,_[_.Collapse]);break;default:this.mediator.publish(this,_[_.Expand])}}Pd(){this._d&&(this.Gt===Lt.expand?this._d.classList.add(d.h.Active):this._d.classList.remove(d.h.Active))}setState(t){this.Gt!==t&&(this.Gt=t,this.Pd())}get tooltip(){return this.Gt===Lt.expand?this.cf:this.hf}}class $t extends Et{constructor(t,i,e,s,n){super(t,i,e,s,n),this.lf=new Dt(this.$uiContainer,e)}handleComponentEvent(t,i,e){let s=e;switch(i.payload&&i.payload.targetComponent&&(s=i.payload.targetComponent),t){case _[_.HoverStart]:this.lf.hoverStart(s);break;case _[_.HoverEnd]:this.lf.hoverEnd(s);break;case _[_.StateChanged]:this.lf.stateChanged(s)}}updateDuration(t,i){if(!Object(j.u)(this.$uiContainer,d.g.ShowControls))return;const e=this.getComponent(mt.ElapsedTimeLabel),s=this.getComponent(mt.TotalDurationLabel),n=this.getComponent(mt.ProgressBar);if(e&&e.setTime(t),s&&s.setTime(i),n){const e=0,s=i,r=0,a=100;n.setProgress(Object(rt.g)(e,s,r,a,t))}}updateVolume(t){}expand(){this.getComponent(mt.ExpandButton).setState(Lt.expand)}collapse(){this.getComponent(mt.ExpandButton).setState(Lt.collapse)}}class Ut extends _t{constructor(){super(...arguments),this.eventList=[_[_.Settings],...this.eventList],this.uf="Settings"}onClickHandler(){this.mediator.publish(this,_[_.Settings])}toggleHDFlag(t){t?Object(j.a)(this._d,d.h.Active):Object(j.L)(this._d,d.h.Active)}get tooltip(){return this.uf}}var Vt=e(55),Nt=e.n(Vt);class Ht extends _t{constructor(t,i,e,s,n,r=!1,a){super(t,i,e,s,a),this.df=n,this.isActive=r}onClickHandler(){this.isActive=!this.isActive,this.onStateChange()}get isActive(){return this.Gt}set isActive(t){this.Gt=t,this.Gt?Object(j.a)(this._d,this.df):Object(j.L)(this._d,this.df)}}class qt extends Ht{constructor(){super(...arguments),this.eventList=[_[_.CaptionOn],_[_.CaptionOff],_[_.StateChanged],...this.eventList],this.ff="Subtitles On",this.pf="Subtitles Off"}onStateChange(){this.mediator.publish(this,this.isActive?_[_.CaptionOn]:_[_.CaptionOff]),this.mediator.publish(this,_[_.StateChanged])}get tooltip(){return this.isActive?this.pf:this.ff}}var zt=e(56),Wt=e.n(zt),Gt=e(95),Jt=e.n(Gt);class Qt extends St{constructor(){super(...arguments),this.dl=!1,this.eventList=[_[_.Next]]}onClickHandler(){this.mediator.publish(this,_[_.Next])}show(){this.dl=!0,this._d.classList.add("cnx-fade-in-up-next")}hide(){this.dl=!1,this._d.classList.remove("cnx-fade-in-up-next")}isInView(){return this.dl}updateCard(t,i){const e=this._d.getElementsByTagName("img")[0];e.setAttribute("src",t),e.style.display="none",e.onload=()=>{e.style.display="block"},this._d.getElementsByClassName("cnx-up-next-box-text")[0].innerHTML=Object(T.h)(i)?i:""}}class Xt extends wt{constructor(t,i,e,s,n){super(t,i,e,s),this.settings=n,this.eventList=[],this.bf=144,this.vf=36}createLogo(){let t=this.ks.createElement("img");t.onload=()=>{t=this.resizeLogo(t),this._d.appendChild(t)},t.src=this.settings.logoUrl,t.alt=""}resizeLogo(t){const i=t.naturalWidth,e=t.naturalHeight;if(!i||!e)return t;if(this.settings.logoPosition===R.ProtoLogoPositionMode.ControlBar)t.style.setProperty("height",`${this.vf}px`,"important"),t.style.setProperty("width",`${this.vf}px`,"important");else{const s=i/e;this.vf*s>this.bf?(t.style.setProperty("width",`${this.bf}px`,"important"),t.style.setProperty("height","auto","important")):(t.style.setProperty("width","auto","important"),t.style.setProperty("height",`${this.vf}px`,"important"))}return t}initComponent(){try{this.createLogo()}catch(t){Object(n.a)({message:"LogoComponent_createLogo",exception:t.message,callStack:t.stack,level:a.ProtoLoggingLevelEnum.FATAL})}}}var Yt=e(33);class Kt extends wt{constructor(){super(...arguments),this.eventList=[]}initComponent(){this.mf=this._d.getElementsByTagName("cnx-span")[0]}setTime(t){isNaN(t)||"number"!=typeof t?Object(j.a)(this._d,d.h.Invisible):(this.mf.innerHTML=Object(Yt.f)(t),Object(j.L)(this._d,d.h.Invisible))}}var Zt=e(46),ti=e.n(Zt);class ii extends wt{constructor(t,i,e,s,n=!1){super(t,i,e,s,n),this.gf=0,this.yf=null,this.wf=0,this.xf=0,this.kf=100,this.cacheDomElements()}cacheDomElements(){this.Sf=this._d.getElementsByClassName("cnx-progress-fill")[0],this.Of=this._d.getElementsByClassName("cnx-progress-rail")[0]}cacheWidths(){this.gf=this.fixedRailWidth?this.fixedRailWidth:this.Of.getBoundingClientRect().width,this.yf=this.Of.getBoundingClientRect().left}updateUi(t){const i=this.getComputedTranslation(t);this.wf=i,this.Sf.style.transform=`translateX(${i}px)`}isValidTranslation(){return this.wf>=0&&this.wf<=this.gf}getComputedTranslation(t){return t<0?0:t>this.gf?this.gf:t}setProgress(t){this.cacheWidths();const i=this.getComputedTranslation(Object(rt.g)(0,100,0,this.gf,t));this.updateUi(i)}disableTransition(){Object(j.a)(this._d,d.h.NoTransition)}enableTransition(){Object(j.L)(this._d,d.h.NoTransition)}_f(t){this.disableTransition(),this.setProgress(t),Object(j.i)(this.Sf),this.enableTransition()}forceStartState(){this._f(this.xf)}forceEndState(){this._f(this.kf)}initComponent(){this.cacheWidths()}destroy(){super.destroy()}}class ei extends ii{constructor(t,i,e,s,n=!1){super(t,i,e,s,n),this.jf=0,this.Ua=null,this.Af=!1,this.eventList=[_[_.DraggingStart],_[_.DraggingStopped]],this.If=t=>{this.cacheWidths(),this.Tf(this.Cf(t)),this.Xn?this._d.addEventListener(this.Pf,this.Mf):this.ks.addEventListenerOnGlobal(this.Pf,this.Mf),this.onDragStart()},this.Mf=t=>{null===this.Ua&&(this.Af||(this.Af=!0,this.disableTransition()),this.Ua=this.ks.requestAnimationFrameHelper(()=>{const i=this.Ef+(this.Cf(t)-this.Lf);this.isValidTranslation()&&this.Rf(i),this.Ua=null}))},this.Bf=t=>{t.stopPropagation(),this.Xn?this._d.removeEventListener(this.Pf,this.Mf):this.ks.removeEventListenerOnGlobal(this.Pf,this.Mf),this.Af=!1,this.enableTransition(),this.onDragEnd()},this.Pf=n?"touchmove":"mousemove"}cacheDomElements(){super.cacheDomElements(),this.Df=this._d.getElementsByClassName("cnx-progress-handle")[0]}cacheWidths(){super.cacheWidths(),this.jf=this.Df.getBoundingClientRect().width/2}updateUi(t){super.updateUi(t);const i=this.getComputedTranslation(t);this.Df.style.transform=`translateX(${i-this.jf}px)`}onDragEnd(){this.mediator.publish(this,_[_.DraggingStopped])}onDragStart(){this.mediator.publish(this,_[_.DraggingStart])}Cf(t){return this.Xn?t.touches.item(0).clientX:t.clientX}Tf(t){this.Ef=t-this.yf,this.Lf=t,this.Rf(this.Ef)}Rf(t){if(this.isValidTranslation()){const i=this.getComputedTranslation(t),e=0,s=this.gf,n=0,r=100;this.updateUi(i),this.onProgressChange(Object(rt.g)(e,s,n,r,i))}}setProgress(t){super.setProgress(t)}initComponent(){super.initComponent();const t={interactionstart:this.If,interactionend:this.Bf};this.Od.register(this._d,this,this.Od,t)}destroy(){super.destroy()}}class si extends ei{constructor(t,i,e,s,n=!1){super(t,i,e,s,n),this.Ff=!1,this.$f=t=>{Object(j.a)(this._d,d.h.HoverEnd),this.Ff=!0},this.Uf=t=>{const i=this.getComputedTranslation(t.clientX-this.yf);this.Vf.style.transform=`translateX(${i}px)`},this.Nf=t=>{this.Vf.style.transform="translateX(0)",this.Ff=!1,this.Hf()},this.eventList=this.eventList.concat([_[_.Seek],_[_.SeekingStart],_[_.SeekingStopped]])}onProgressChange(t){this.mediator.publish(this,_[_.Seek],{payload:t-.1})}onDragEnd(){super.onDragEnd(),this.mediator.publish(this,_[_.SeekingStopped]),this.Hf()}onDragStart(){super.onDragStart(),this.mediator.publish(this,_[_.SeekingStart])}Hf(){this.Ff||this.Af||Object(j.L)(this._d,d.h.HoverEnd)}initComponent(){super.initComponent(),this._d.addEventListener("mousemove",this.Uf),this._d.addEventListener("mouseenter",this.$f),this._d.addEventListener("mouseleave",this.Nf),this.Vf=this._d.getElementsByClassName("cnx-progress-follow")[0]}hide(){Object(j.v)(this._d)}show(){Object(j.R)(this._d)}destroy(){super.destroy(),this._d.removeEventListener("mousemove",this.Uf),this._d.removeEventListener("mouseenter",this.$f),this._d.removeEventListener("mouseleave",this.Nf)}}var ni=e(57),ri=e.n(ni);class ai extends wt{constructor(){super(...arguments),this.eventList=[]}initComponent(){this.hide()}show(){Object(j.R)(this._d)}hide(){Object(j.v)(this._d)}}var hi,oi=e(96),ci=e.n(oi),li=e(58),ui=e.n(li),di=e(97),fi=e.n(di);!function(t){t[t.SimpleMenuItem=0]="SimpleMenuItem",t[t.ToggleMenuItem=1]="ToggleMenuItem",t[t.SubmenuMenuItem=2]="SubmenuMenuItem"}(hi||(hi={}));class pi extends wt{constructor(t,i,e,s,n,r,a,h){super(t,i,e,s,h),this.eventName=n,this.qf=r,this.zf=a,this.Wf=[],this.eventList=[_[_.RebindComponent],kt.a[kt.a.HoldStart],kt.a[kt.a.HoldEnd],_[_.ContextMenuOpen],_[_.ContextMenuClose]],this.Gf=!1,this.Jf=10,this.Qf=t=>{this.Xf.removeChild(t.target),this.Xf.style.width=`${this._d.clientWidth}px`},this.close=t=>{t&&Object(at.h)(t.target,d.g.ContextController,this.Jf)||!1!==this.isOpen&&(this.Gf&&(this.mediator.publish(this,kt.a[kt.a.HoldEnd]),Object(j.L)(this.zf,d.h.OnHold),this.Gf=!1),this.isOpen=!1,this.mediator.publish(this,_[_.ContextMenuClose]),Object(j.a)(this._d,d.h.Invisible),this.Od.removeGlobalActions(this._d),this.closeAllSubmenuItems())},this.close(),this.cacheCoordinates(),this.eventList.push(this.eventName),this.Xf=this._d.getElementsByClassName(d.k.Container)[0],this.Yf=this.ks.createElementByString(`<cnx class="${d.k.Items}"></cnx>`),this.Xf.appendChild(this.Yf),Object(j.a)(this.Xf,d.g.ContextController)}addNewItemsEvent(t){const i=t.filter(t=>!Object(u.g)(t,this.eventList));i.length>0&&(this.eventList=[...this.eventList,...i],this.mediator.publish(this,_[_.RebindComponent],{payload:this.qf}))}cacheCoordinates(){this.tf=this.ks.getElementCoordinates(this.zf)}positionContextMenu(t){this.cacheCoordinates(),yt(this._d,t,this.tf,{alignMiddle:this.alignMiddle,alignTop:this.alignTop,forceRight:this.forceRight})}Kf(t){switch(t.type){case hi.SimpleMenuItem:this.close();break;case hi.SubmenuMenuItem:this.Zf(t)}}sendEvent(t,i){this.mediator.publish(this,t,i)}Zf(t){const i=this._d.clientWidth;t.isOpen?(t.$menuContainer.addEventListener("transitionend",this.Qf),this.Yf.style.left="0px",t.$menuContainer.style.left="0px"):(t.$menuContainer.removeEventListener("transitionend",this.Qf),this.Xf.style.width=`${2*i}px`,this.Xf.appendChild(t.$menuContainer),Object(j.i)(this.Xf),this.Yf.style.left=`${-i}px`,t.$menuContainer.style.left=`${-i}px`),t.isOpen=!t.isOpen}closeAllSubmenuItems(){this.Wf.forEach(t=>{t.type===hi.SubmenuMenuItem&&t.isOpen&&this.Zf(t)})}buildContextMenu(t){let i=[];this.Yf.innerHTML="",this.Xf.style.width=`${this._d.clientWidth}px`,this.Wf.forEach(t=>this.unsubscribeAll(t)),this.Wf=t,this.Wf.forEach(t=>{i=[...i,...t.eventList],t.eventList.forEach(i=>this.subscribe(i,t,e=>{this.Kf(t),this.sendEvent(i,e)})),t.initComponent(),this.Yf.appendChild(t.getContainer())}),this.addNewItemsEvent(i)}getAnchorCoordinatesTo(t){var i;return null===(i=t)||void 0===i?void 0:i.getCoordinates()}open(t,i=!1){i&&(this.Gf=i,this.mediator.publish(this,kt.a[kt.a.HoldStart]),Object(j.a)(this.zf,d.h.OnHold)),this.isOpen=!0,this.mediator.publish(this,_[_.ContextMenuOpen]),this.positionContextMenu(t);const e={interactionend:this.close};this.Od.addGlobalActions(this._d,e),Object(j.L)(this._d,d.h.Invisible)}}class bi extends St{constructor(t,i,e,s,n){super(t,i,e,bi.getTemplate(n),s),this.mediator=t,this.tp=!1,this.type=hi.SimpleMenuItem,this.eventList=[],this.event=n.activeEvent,this.name=n.name,n.eventList?this.eventList=n.eventList:this.eventList.push(this.event),this.ep=this._d.getElementsByClassName(d.k.ItemTitle)[0],this.sp=this._d.getElementsByClassName(d.k.ItemIcon)[0]}static getTemplate(t){const i=`<cnx class="${d.k.ItemIcon}">${t.icon}</cnx>`,e=`<cnx class="${d.k.ItemExtra}">${t.label}</cnx>`;return`<cnx class="${d.k.ClickOption}">\n                    ${t.icon?i:""}\n                    <cnx class="${d.k.ItemTitle}">${t.name}</cnx>\n                    ${t.label?e:""}\n                </cnx>`}onClickHandler(t){this.mediator.publish(this,this.event)}changeItemName(t){this.ep.innerHTML=t}changeItemIcon(t){this.sp.innerHTML=t}get isActive(){return this.tp}set isActive(t){this.tp=t,this.tp?Object(j.a)(this._d,d.h.Active,d.f.AccentColor):Object(j.L)(this._d,d.h.Active,d.f.AccentColor)}}var vi=e(45),mi=e.n(vi),gi=e(19);class yi extends pi{constructor(){super(...arguments),this.alignMiddle=!1,this.alignTop=!1,this.forceRight=!0}np(){const t=gi.a.version?`V${gi.a.version}`:"dev",i=[new bi(this,this.ks,this.Od,this.Xn,{activeEvent:_[_.AboutClick],name:"About Connatix",icon:mi.a,label:t})];this.buildContextMenu(i)}initComponent(){this.np()}onResize(){this.cacheCoordinates(),this.close()}}class wi extends Ht{constructor(t,i,e,s,n){super(t,i,e,wi.getTemplate(n),d.h.Active,n.defaultState,s),this.mediator=t,this.eventList=[],this.type=hi.ToggleMenuItem,({eventOn:this.rp,eventOff:this.ap}=n),this.eventList.push(this.rp,this.ap)}static getTemplate(t){const i=`<cnx class="${d.k.ItemIcon}">${t.icon}</cnx>`;return`<cnx class="${d.k.ToggleOption} ${t.defaultState?d.h.Active:""}">\n                    ${t.icon?i:""}\n                    <cnx class="${d.k.ItemTitle}">${t.name}</cnx>\n                    <cnx class="${d.k.ItemExtra}">\n                        <cnx class="cnx-cm-toggle-switch">\n                            <cnx class="cnx-cm-slider ${d.f.AccentColor}"></cnx>\n                        </cnx>\n                    </cnx>\n                </cnx>`}onStateChange(){this.mediator.publish(this,this.isActive?this.rp:this.ap)}get tooltip(){return""}}const xi={ContextAbout:"About Connatix",ContextQuality:"Video Settings",ContextCaption:"Closed Caption"};class ki extends pi{constructor(t,i,e,s,n,r,a,h,o,c=!0){super(t,i,e,s,n,r,a,o),this.alignMiddle=!1,this.alignTop=!1,this.forceRight=!1,this.op=[new bi(this,this.ks,this.Od,this.Xn,{activeEvent:_[_.AboutClick],name:xi.ContextAbout,icon:mi.a,label:gi.a.version?`V${gi.a.version}`:"dev"})],this.cp=new wi(this,this.ks,this.Od,this.Xn,{eventOff:_[_.CaptionOff],eventOn:_[_.CaptionOn],defaultState:c,name:xi.ContextCaption,icon:Wt.a}),this.lp=[this.cp],this.up=h}dp(){let t=this.op;this.up===d.t.Lg&&(t=[...this.lp,...this.op]),this.buildContextMenu(t)}initComponent(){this.dp()}onResize(t,i){this.isOpen&&this.positionContextMenu(t),this.up!==i?(this.up=i,this.closeAllSubmenuItems(),this.dp()):this.up=i}toggleCaptionState(t){this.cp.isActive!==t&&(this.cp.isActive=t)}hideCaptionOption(){this.cp.hideComponent()}showCaptionOption(){this.cp.showComponent()}getAnchorCoordinatesTo(t){let i=gt.Right;return this.up!==d.t.Xl&&this.up!==d.t.Xxl&&(i|=gt.Top),t.getCoordinates(i)}}function Si(t){return t.replace(/[-]/g,"&#x2011;")}function Oi(t){try{return Object.keys(t).reduce((i,e)=>Object.assign(Object.assign({},i),{[e]:Object(T.h)(t[e])&&t[e].includes("%%")?void 0:t[e]}),{})}catch(i){return Object(n.a)({message:"sanitizeDfpMacros_error",exception:i.message,callStack:i.stack,level:a.ProtoLoggingLevelEnum.WARNING}),Object.keys(t).reduce((i,e)=>Object.assign(Object.assign({},i),{[e]:Object(T.h)(t[e])&&t[e].indexOf("%%")>-1?void 0:t[e]}),{})}}function _i(t){return/<[a-z\/][\s\S]*>/i.test(t)}class ji extends wt{constructor(){super(...arguments),this.eventList=[]}initComponent(){this.fp=this._d.getElementsByClassName(d.e.CaptionContainer)[0]}updateCaptions(t){var i,e;this.fp.innerHTML=t&&t.text?(i=t.text,e="<br>",i.replace(/(?:\r\n|\r|\n)/g,e)):""}}var Ai=e(98),Ii=e.n(Ai);class Ti extends Xt{constructor(){super(...arguments),this.pp="cnx-logo-height",this.bp="cnx-logo-width"}createLogo(){this._d.onload=()=>{this._d.style.visibility="visible",this.resizeLogo(this._d)},this._d.style.visibility="hidden",this._d.src=this.settings.logoUrl}resizeLogo(t){const i=t.naturalWidth,e=t.naturalHeight;return i&&e?(i>e?Object(j.a)(t,this.bp):Object(j.a)(t,this.pp),t):t}}var Ci=e(99),Pi=e.n(Ci),Mi=e(100),Ei=e.n(Mi);class Li extends ei{constructor(t,i,e,s,n=!1){super(t,i,e,s,n),this.vp=80,this.fixedRailWidth=this.vp,this.eventList.push(_[_.Volume])}onProgressChange(t){this.mediator.publish(this,_[_.Volume],{payload:t})}}var Ri=e(101),Bi=e.n(Ri),Di=e(102),Fi=e.n(Di);function $i(t,i,e){const s=e?Q[Q.Auto]:i.height.toString();t.forEach(t=>t.name.indexOf(s)>-1?t.isActive=!0:t.isActive=!1);const n=t.find(t=>Q[t.event]===Q.Auto);if(e){const e=t.find(t=>t.event===i.height.toString());if(e){const t=`${n.name} (${e.name})`;n.changeItemName(t)}}else n.changeItemName(n.name)}class Ui extends pi{constructor(){super(...arguments),this.alignMiddle=!0,this.alignTop=!0,this.forceRight=!1,this.mp=[],this.gp={height:360,quality:Q.Auto},this.yp=!0}sendEvent(t){this.yp=Q[t]===Q.Auto,this.mediator.publish(this,this.eventName,{payload:{height:this.yp?this.gp.height:parseInt(t,10),quality:this.yp?Q.Auto:Q.Strict}})}initComponent(){}createQualityMenu(t){this.mp=[],this.wp=t,this.wp.forEach(t=>{this.mp.push(new bi(this,this.ks,this.Od,this.Xn,{name:`${t.videoHeight}p`,activeEvent:t.videoHeight.toString(),label:t.isHD?"HD":void 0}))}),this.mp.push(new bi(this,this.ks,this.Od,this.Xn,{name:Q[Q.Auto],activeEvent:Q[Q.Auto]})),$i(this.mp,this.gp,this.yp),this.buildContextMenu(this.mp)}onResize(t){this.cacheCoordinates(),this.isOpen&&this.positionContextMenu(t)}updateQuality(t){Object(u.h)(this.wp)&&(this.yp=t.quality===Q.Auto,this.gp.quality=t.quality,this.gp.height=Object(rt.c)(t.height,this.wp.map(t=>t.videoHeight)),$i(this.mp,this.gp,this.yp))}}var Vi=e(103),Ni=e.n(Vi);class Hi extends wt{constructor(){super(...arguments),this.eventList=[]}initComponent(){this.hide()}show(){Object(j.R)(this._d),Object(j.i)(this._d),Object(j.a)(this._d,d.h.Active)}hide(){Object(j.L)(this._d,d.h.Active),Object(j.v)(this._d)}}class qi extends _t{constructor(t,i,e,s,n,r,a){super(t,i,e,s,n),this.tooltip=a,this.xp=mt[r],this.eventList.push(this.xp)}onClickHandler(){this.mediator.publish(this,this.xp)}}class zi extends St{constructor(t,i,e,s,n,r,a){super(t,i,e,s,n),this.tooltip=a,this.eventList=[],this.xp=mt[r],this.eventList.push(this.xp)}onClickHandler(){this.mediator.publish(this,this.xp)}}class Wi{constructor(t,i,e,s){this.ks=t,this.Od=i,this.Xn=e,this.kp=new Map,Object.keys(s).forEach(t=>this.Sp(mt[t],s[t]))}getButton(t,i){const{isHoverable:e,template:s,tooltip:n}=this.Op(t);return e?new qi(i,this.ks,this.Od,s,this.Xn,t,n):new zi(i,this.ks,this.Od,s,this.Xn,t,n)}isGeneralComponent(t){return this.kp.has(t)}Op(t){return this.kp.get(t)}Sp(t,i){this.kp.set(t,i)}}var Gi=e(104),Ji=e.n(Gi);function Qi(t,i,e=!0){return e?`\n            <cnx class="cnx-icon-button cnx-button-${mt[t].toLowerCase()} cnx-ui-btn-hoverable">\n                <cnx class="cnx-btn-container">\n                    ${i}\n                </cnx>\n            </cnx>\n        `.trim():`<cnx class="cnx-button-${mt[t].toLowerCase()}">${i}</cnx>`}var Xi=e(65),Yi=e.n(Xi),Ki=e(105),Zi=e.n(Ki);var te={[mt[mt.MoreButton]]:{template:Qi(mt.MoreButton,Zi.a),tooltip:"More",isHoverable:!0},[mt[mt.CloseButton]]:{template:Qi(mt.CloseButton,Ji.a),tooltip:"Close",isHoverable:!0},[mt[mt.UpNextButton]]:{template:Qi(mt.UpNextButton,Yi.a),tooltip:"Next",isHoverable:!0},[mt[mt.PreviousButton]]:{template:Qi(mt.PreviousButton,Yi.a),tooltip:"Previous",isHoverable:!0}};class ie extends _t{constructor(){super(...arguments),this.eventList=[_[_.SkipAd],...this.eventList],this._p=-1,this.jp=-1}initComponent(){super.initComponent(),this.hideComponent(),this.Ap=this._d.getElementsByTagName("cnx-span")[0],this.Tp=this._d.querySelectorAll(`.${d.q.Timer} svg`)[0]}setSecondsUntilSkip(t){this._p=Math.ceil(t),this.jp=-1,Object(j.Q)(this.Tp,{"animation-duration":this._p+"s"})}tickDown(t){const i=this._p-Math.floor(t);if(i<0||0===this.jp)return;const e=Object(j.u)(this._d,d.q.InTimer);this.jp=i,0===this.jp?(e&&Object(j.L)(this._d,d.q.InTimer),this.Ap.innerHTML="Ad"):(e||Object(j.a)(this._d,d.q.InTimer),this.Ap.innerHTML=`in ${this.jp}s`)}get tooltip(){}onClickHandler(){0===this.jp&&this.mediator.publish(this,_[_.SkipAd])}}var ee=e(106),se=e.n(ee),ne=e(107),re=e.n(ne),ae=e(24);const he="Loading ad";class oe extends wt{constructor(){super(...arguments),this.eventList=[]}initComponent(){this.Cp=this._d.getElementsByClassName(d.a.BackgroundImg)[0],this.Pp=this._d.getElementsByClassName(d.a.Icon)[0],this.Pp.innerHTML=re.a,this.Mp=this._d.getElementsByClassName(d.a.ButtonContainer)[0];const t=this._d.getElementsByClassName(d.a.Button)[0];this.Ep=this.ks.createElementByString(`<a class="${d.a.Wrapper}" href="#">`),this.Ep.target=ae.c.Blank,this.Ep.appendChild(t),this.Mp.innerHTML="",this.Mp.appendChild(this.Ep),this.Lp=this._d.getElementsByClassName(d.a.InfoContainer)[0],this.Rp=this._d.getElementsByClassName(d.a.FallbackContainer)[0],this.Bp=this._d.getElementsByClassName(d.a.SlotCountText)[0]}setBackgroundImg(t){Object(T.h)(t)?(Object(j.L)(this.Cp,d.h.DisplayNone),this.Cp.src=t):Object(j.a)(this.Cp,d.h.DisplayNone)}setClickUrl(t){if(!Object(T.h)(t))return Object(j.R)(this.Rp),void Object(j.v)(this.Lp);Object(j.R)(this.Lp),Object(j.v)(this.Rp),this.Ep.href=t}setFallbackText(t,i){const e=t||1,s=i||1;this.Bp.innerHTML=`${he} ${e}/${s}`}}var ce,le=e(108),ue=e.n(le);class de{constructor(t,i,e,s={},n={}){this.ks=t,this.Od=i,this._d=e,this.Gn=s,this.Dp={[mt.PlayButton]:t=>this.Fp(!1,t),[mt.BigPlayButton]:t=>this.Fp(!0,t),[mt.VolumeProgress]:t=>new Li(t,this.ks,this.Od,Bi.a),[mt.ExpandButton]:t=>new Ft(t,this.ks,this.Od,Fi.a,this.Gn.isMobile),[mt.QualityMenu]:t=>new Ui(t,this.ks,this.Od,Ni.a,_[_.Quality],mt.QualityMenu,this._d,this.Gn.isMobile),[mt.Loader]:t=>new Hi(t,this.ks,this.Od,ui.a),[mt.SkipAdButton]:t=>new ie(t,this.ks,this.Od,se.a,this.Gn.isMobile),[mt.AdLoadingScreen]:t=>new oe(t,this.ks,this.Od,ue.a)},this.Fp=(t,i)=>new jt(i,this.ks,this.Od,function(t=!1){return`\n    <cnx class="cnx-icon-button cnx-ui-btn-hoverable ${t?"cnx-button-big-play":""}">\n        <cnx class="cnx-btn-container">\n            <cnx class="cnx-play-icon">${Pi.a}</cnx>\n            <cnx class="cnx-pause-icon">${Ei.a}</cnx>\n        </cnx>\n    </cnx>\n`.trim()}(t),this.Gn.isMobile),this.$p=t=>i=>{const e=this.Dp[t];if(e)return e(i)},this.Up=new Wi(this.ks,this.Od,this.Gn.isMobile,Object.assign(Object.assign({},te),n))}createComponent(t,i){const e=this.$p(t)(i);return e||(this.Up.isGeneralComponent(t)?this.Up.getButton(t,i):void 0)}}!function(t){t[t.Mute=0]="Mute",t[t.Unmute=1]="Unmute"}(ce||(ce={}));class fe extends _t{constructor(t,i,e,s,n,r){super(t,i,e,s,r),this.eventList=[_[_.Mute],_[_.Unmute],_[_.StateChanged],...this.eventList],this.Vp="Mute",this.Np="Unmute",this.Gt=n}onClickHandler(){this.Gt===ce.Mute?(this.mediator.publish(this,_[_.Unmute]),this.setState(ce.Unmute)):(this.mediator.publish(this,_[_.Mute]),this.setState(ce.Mute))}Pd(){this.Gt===ce.Mute?Object(j.O)(this._d,"cnx-sound-on","cnx-sound-off"):Object(j.O)(this._d,"cnx-sound-off","cnx-sound-on")}get tooltip(){return this.Gt===ce.Mute?this.Np:this.Vp}initComponent(){super.initComponent(),this.Pd()}setState(t){this.Gt!==t&&(this.Gt=t,this.Pd(),this.mediator.publish(this,_[_.StateChanged]))}setVolume(t){t>0?this.setState(ce.Unmute):this.setState(ce.Mute)}}class pe extends Mt{constructor(t,i,e,s){super(i,e,s),this.mediator=t,this._d=this.qd.getRenderedDom()}getContainer(){return this._d}initComponent(){this.qd.initComponents()}showComponent(){Object(j.R)(this._d)}hideComponent(){Object(j.v)(this._d)}}class be extends pe{constructor(t,i,e,s){super(t,i,e,s),this.Hp=null,this.eventList=[_[_.Volume],_[_.VolumeHoverStart],_[_.VolumeHoverStopped],_[_.DraggingStopped],_[_.DraggingStart],_[_.HoverStart],_[_.HoverEnd],_[_.StateChanged]],this.qp=.2,this.zp=1e3,this.Wp=!1,this.Gp=t=>{clearTimeout(this.Hp),Object(j.a)(this._d,"cnx-mod-hover"),this.mediator.publish(this,_[_.VolumeHoverStart])},this.Jp=()=>{this.Wp||(null!==this.Hp&&clearTimeout(this.Hp),this.Hp=setTimeout(()=>{Object(j.L)(this._d,"cnx-mod-hover"),this.mediator.publish(this,_[_.VolumeHoverStopped])},this.zp))},this.Qp=this.qp,this.Xp=this.getComponent(mt.VolumeButton),this.Yp=this.getComponent(mt.VolumeProgress)}handleComponentEvent(t,i,e){let s;switch(t){case _[_.Volume]:s=i.payload/100,this.Kp(s),this.Zp(i.payload);break;case _[_.Mute]:s=0,this.setVolumeProgress(0);break;case _[_.Unmute]:s=this.Qp,this.setVolumeProgress(100*this.Qp);break;case _[_.DraggingStopped]:this.Wp=!1,this.mediator.publish(this,_[_.DraggingStopped]),this.Jp();break;case _[_.DraggingStart]:this.Wp=!0,this.mediator.publish(this,_[_.DraggingStart]);break;case _[_.HoverStart]:this.mediator.publish(this,_[_.HoverStart],{payload:{targetComponent:e}});break;case _[_.HoverEnd]:this.mediator.publish(this,_[_.HoverEnd],{payload:{targetComponent:e}});break;case _[_.StateChanged]:this.mediator.publish(this,_[_.StateChanged],{payload:{targetComponent:e}})}void 0!==s&&this.tb(s)}Kp(t){t<this.qp?this.Qp=this.qp:this.Qp=t}tb(t){this.mediator.publish(this,_[_.Volume],{payload:t})}Zp(t){0===t?this.Xp.setState(ce.Mute):this.Xp.setState(ce.Unmute)}setVolumeProgress(t){this.Yp.setProgress(t)}initComponent(){super.initComponent(),this._d.addEventListener("mouseenter",this.Gp),this._d.addEventListener("mouseleave",this.Jp)}setVolume(t){const i=100*t;this.Zp(i),this.setVolumeProgress(i)}destroy(){super.destroy(),this._d.removeEventListener("mouseenter",this.Gp),this._d.removeEventListener("mouseleave",this.Jp)}}var ve=`\n    <cnx class="cnx-volume-container">\n        <cnx class="cnx-ui-btn cnx-volume-btn">\n            [[${mt.VolumeButton}]]\n        </cnx>\n        <cnx class="cnx-volume-bar">\n            [[${mt.VolumeProgress}]]\n        </cnx>\n    </cnx>\n`.trim(),me=e(109),ge=e.n(me),ye=e(110),we=e.n(ye);var xe={[mt[mt.ShareButton]]:{template:Qi(mt.ShareButton,we.a),tooltip:"Share",isHoverable:!0},[mt[mt.CastButton]]:{template:Qi(mt.CastButton,ge.a),tooltip:"Cast",isHoverable:!0}},ke=e(111),Se=e.n(ke),Oe=e(112),_e=e.n(Oe),je=e(113),Ae=e.n(je);const Ie=90*B.g,Te="This live stream will start shortly",Ce="This live stream is not currently available. Please check again shortly",Pe="Live stream not supported by browser";class Me extends wt{constructor(){super(...arguments),this.eventList=[],this.ib=null}initComponent(){this.eb=this.ks.createElementByString("<img/>"),this._d.appendChild(this.eb),this.sb=this._d.getElementsByTagName("cnx-span")[0],this.rb=this._d.getElementsByClassName("cnx-live-message")[0],this.ab=this._d.getElementsByClassName("cnx-live-icon")[0]}setPosterSrc(t){Object(T.h)(t)&&(this.eb.src=t)}setPosterAltText(t){this.eb.alt=t}setIconToStarting(){this.ab.innerHTML=`${_e.a}`}setIconToEnded(){this.ab.innerHTML=`${Ae.a}`}setMessageToStarting(){this.hb(Te)}setMessageToEnded(){this.hb(Ce)}setMessageToNotSupported(){this.hb(Pe)}handleDelayedStart(t){Object(T.e)(Date.parse(t))&&(this.ob=new Date(t),this.cb()>0&&(this.lb(),clearInterval(this.ib),this.ib=setInterval(()=>{this.lb()},B.f*B.g)))}showMessage(){Object(j.R)(this.ab),Object(j.R)(this.rb)}hideMessage(){Object(j.v)(this.ab),Object(j.v)(this.rb)}show(){Object(j.R)(this._d),Object(j.a)(this._d,d.h.Active)}hide(){Object(j.L)(this._d,d.h.Active),Object(j.v)(this._d)}destroy(){super.destroy(),clearInterval(this.ib)}lb(){const t=this.cb();if(t>0){const i=this.ub(t);this.hb(`Live in ${i}`)}else this.hb(Te),clearInterval(this.ib),this.ib=null}cb(){return(Math.max(this.ob.getTime(),Date.now())-Date.now())/B.f}ub(t){const i=t>=Ie?Math.round(t/(B.g*B.c)):Math.ceil(t/B.g);return`${i} ${t>=Ie?"hours":`minute${1===i?"":"s"}`}`}hb(t){this.sb.innerHTML=t}}var Ee=e(114),Le=e.n(Ee);class Re extends wt{constructor(){super(...arguments),this.eventList=[]}initComponent(){this.hideComponent()}}var Be,De=e(115),Fe=e.n(De);class $e extends de{constructor(t,i,e,s,n){super(t,i,e,s,xe),this.ks=t,this._d=e,this.Gn=s,this.fb=n,this.pb={[mt.VolumeControls]:t=>new be(t,this.ks,ve,this),[mt.VolumeButton]:t=>new fe(t,this.ks,this.Od,Se.a,ce.Mute,this.Gn.isMobile),[mt.SettingsButton]:t=>new Ut(t,this.ks,this.Od,Nt.a,this.Gn.isMobile),[mt.CaptionButton]:t=>new qt(t,this.ks,this.Od,Wt.a,d.h.Active,this.Gn.closedCaptionDefault,this.Gn.isMobile),[mt.UpNextBox]:t=>new Qt(t,this.ks,this.Od,Jt.a,this.Gn.isMobile),[mt.LogoComponent]:t=>{if(!Object(T.a)(this.Gn.logoUrl)&&!Object(T.a)(this.Gn.logoPosition))throw new Error("custom logo is undefined");return new Xt(t,this.ks,this.Od,'<cnx class="cnx-logo"></cnx>',{logoUrl:this.Gn.logoUrl,logoPosition:this.Gn.logoPosition})},[mt.LogoOutstream]:t=>{if(!Object(T.a)(this.Gn.logoUrl)&&!Object(T.a)(this.Gn.logoPosition))throw new Error("outstream logo undefined");return new Ti(t,this.ks,this.Od,'<img class="cnx-home-screen-logo" />',{logoUrl:this.Gn.logoUrl})},[mt.LivePoster]:t=>new Me(t,this.ks,this.Od,Le.a),[mt.LiveIcon]:t=>new Re(t,this.ks,this.Od,Fe.a),[mt.ElapsedTimeLabel]:t=>new Kt(t,this.ks,this.Od,ti.a),[mt.TotalDurationLabel]:t=>new Kt(t,this.ks,this.Od,ti.a),[mt.ProgressBar]:t=>new si(t,this.ks,this.Od,ri.a,this.Gn.isMobile),[mt.QueStateOverlay]:t=>new ai(t,this.ks,this.Od,ui.a),[mt.ContextMenu]:t=>new yi(t,this.ks,this.Od,ci.a,_[_.ContextClick],mt.ContextMenu,this._d,this.Gn.isMobile),[mt.ElementsSettingsMenu]:t=>new ki(t,this.ks,this.Od,fi.a,_[_.SettingsMenu],mt.ElementsSettingsMenu,this._d,this.fb,this.Gn.isMobile,this.Gn.closedCaptionDefault),[mt.CaptionComponent]:t=>new ji(t,this.ks,this.Od,Ii.a)},this.bb=t=>i=>{const e=this.pb[t];if(e)return e(i)}}createComponent(t,i){return this.bb(t)(i)||super.createComponent(t,i)}}!function(t){t.InPod="cnx-ad-in-pod",t.AdMarkerInPodTextContainer="cnx-ad-marker-pod-right-side-text"}(Be||(Be={}));class Ue extends $t{constructor(t,i,e,s,n,r={},a){super(t,s,i,n,a||new $e(i,e,s,r)),this.mediator=t,this.globalDomUtilsService=i,this.$container=s,this.settings=r,this.Wd={[X.PlayingState]:new It(this),[X.PausedState]:new Ct(this)},this.vb=0,this.Wd[X.PausedState].enterState()}handleComponentEvent(t,i,e){switch(super.handleComponentEvent(t,i,e),t){case _[_.Volume]:this.mediator.publish(this,_[_.Volume],i);break;case _[_.Mute]:this.mediator.publish(this,_[_.Mute]);break;case _[_.Unmute]:this.mediator.publish(this,_[_.Unmute]);break;case mt[mt.CloseButton]:this.mediator.publish(this,_[_.Close]);break;default:this.mediator.publish(this,t,i)}}updateDuration(t){const i=this.getComponent(mt.ProgressBar),e=this.getComponent(mt.TotalDurationLabel);t||!i?(this.elapsedTime=0,this.duration=t,i&&i.setProgress(Object(rt.g)(0,t,0,100,0)),e&&e.setTime(t),this.mb(this.vb)):i.setProgress(100)}updateVolume(t){const i=this.getComponent(mt.VolumeControls),e=this.getComponent(mt.VolumeButton);i&&i.setVolume(t),e&&e.setVolume(t)}get elapsedTime(){return this.vb}set elapsedTime(t){this.vb=t,this.mb(this.vb)}showSkipAdButton(t){const i=this.getComponent(mt.SkipAdButton);i&&(i.showComponent(),i.setSecondsUntilSkip(t))}hideSkipAdButton(){const t=this.getComponent(mt.SkipAdButton);t&&t.hideComponent()}addPodAdMarker(t,i){Object(j.a)(this.$uiContainer,Be.InPod),Object(u.c)(this.$uiContainer.getElementsByClassName(Be.AdMarkerInPodTextContainer)).forEach(e=>{e.innerHTML=`${t}/${i}`})}removeAddPodAdMarker(){Object(j.L)(this.$uiContainer,Be.InPod)}mb(t){const i=this.getComponent(mt.ElapsedTimeLabel);i&&i.setTime(t);const e=this.getComponent(mt.SkipAdButton);e&&e.tickDown(t)}hideAdLoadingScreen(){const t=this.getComponent(mt.AdLoadingScreen);t&&t.hideComponent(),Object(j.L)(this.$container,d.g.PodLoadingScreen)}showAdLoadingScreen(t,i,e,s){const n=this.getComponent(mt.AdLoadingScreen);n&&(n.showComponent(),n.setBackgroundImg(t),n.setClickUrl(i),n.setFallbackText(e,s),Object(j.a)(this.$container,d.g.PodLoadingScreen))}hideAdMarker(){const t=this.$container.getElementsByClassName("cnx-ad-marker")[0];Object(j.v)(t)}hideProgressBar(){this.getComponent(mt.ProgressBar).hideComponent()}}var Ve=e(59),Ne=e.n(Ve),He=e(60),qe=e.n(He);class ze{get template(){return`\n        <cnx class="cnx-ui cnx-ui-ad-content">\n            [[${mt.AdLoadingScreen}]]\n            [[${mt.SkipAdButton}]]\n            <cnx class="cnx-ui-buttons cnx-ad-buttons">\n                <cnx class="cnx-ui-btn cnx-ad-play-button">[[${mt.PlayButton}]]</cnx>\n                <cnx class="cnx-ad-volume-controls">[[${mt.VolumeControls}]]</cnx>\n                <cnx class="cnx-ui-btn cnx-ad-volume-button">[[${mt.VolumeButton}]]</cnx>\n            </cnx>\n            <cnx class="cnx-ad-marker">${Ne.a}</cnx>\n            <cnx class="cnx-ad-marker-pod">\n                ${qe.a}\n                <cnx class="cnx-ad-marker-pod-right-side">\n                    <cnx class="cnx-ad-marker-pod-right-side-text">1/1</cnx>\n                </cnx>\n            </cnx>\n            <cnx class="cnx-ui-progress cnx-ui-bar cnx-ad-progress-bar">\n                <cnx class="cnx-ui-progress-bar">[[${mt.ProgressBar}]]</cnx>\n            </cnx>\n        </cnx>\n        `.trim()}}class We extends o.a{constructor(t,i,e,s,n,r){super(),this.mediator=t,this.ca=i,this.gb=e,this.yb=s,this.wb=n,this.xb=r,this.kb=[],this.firstAdShown=!1,this.Or=!1,this.Sb=0,this.Ob=!0,this._b=!1,this.jb=!1,this.Ab=w.a.Normal,this.Ib=this.getNewAdManager(),this.subscribe(E.AdsEnabled,this.Ib,()=>{this.mediator.publish(this,E.AdsEnabled)})}Tb(t,i,e){this.Ib.initAd(t,i,this.Ab,1,e,[{container:this.Cb,width:t,height:i,type:a.ProtoAdType.Video}])}Pb(){this.Mb.showSkipAdButton(this.ca.skipAdAfter)}Eb(t){const i=this.Ib.getCurrentAdClickTrackingProperties();i&&this.xb.services.TrackingService.trackAdClick(Object.assign(Object.assign({},i),{type:t}))}Lb(t){if(t.payload.adLoadedData.skipOffset&&t.payload.adLoadedData.skipOffset>=0)return!1;const i=this.Ib.getAdDuration();switch(this.ca.adSkippability){case a.ProtoPlayerAdSkippability.IfLongerThan31Sec:if((t.payload.adSkipMode===a.ProtoAdSkipMode.IfLongerThan31Sec||t.payload.adSkipMode===a.ProtoAdSkipMode.Never)&&(i<N.f||!i))return!1;break;case a.ProtoPlayerAdSkippability.NoRestrictions:if(t.payload.adSkipMode===a.ProtoAdSkipMode.Never||t.payload.adSkipMode===a.ProtoAdSkipMode.IfLongerThan31Sec&&(i<N.f||!i))return!1}return!0}Rb(t){this.kb.filter(i=>i!==t).forEach(t=>{Object(j.a)(t,d.h.Hide)})}Bb(){this.kb.forEach(t=>{Object(j.L)(t,d.h.Hide)})}updateFilterConfig(t){this.Ib.updateFilterConfig(t)}Db(){this.jb=!1,this.Mb.hideAdLoadingScreen()}Fb(){this.Mb.hideSkipAdButton()}$b(){let t;Object.keys(w.b).forEach(i=>{this.subscribe(w.b[i],this.Ib,e=>{switch(t=!1,w.b[i]){case w.b.AdLoaded:const s=e;this._b=this.Lb(e),this._b&&(s.payload.adLoadedData.skipOffset=this.ca.skipAdAfter);break;case w.b.AdPaused:this.Mb.changeState(X.PausedState);break;case w.b.AdPlaying:this.Mb.changeState(X.PlayingState);break;case w.b.AdImpression:this.Ub(e);break;case w.b.AdSkipped:this.Eb(a.ProtoAdClickTypeEnum.AdSkipClick),this.Bb(),t=!0;break;case w.b.AdStopped:case w.b.AdError:this.Bb(),t=!0;break;case w.b.AdClickThru:this.Eb(a.ProtoAdClickTypeEnum.AdClickThrough)}this.Ob&&this.mediator.publish(this,w.b[i],e),this.Ob=!0,t&&(this.Or=!1,this.Mb.changeState(X.PausedState)),w.b[i]===w.b.AdImpression&&(this.wb.getTotalNumberOfSlots()>1?this.Mb.addPodAdMarker(this.wb.getCurrentSlotIndex(),this.wb.getTotalNumberOfSlots()):this.Mb.removeAddPodAdMarker())})}),this.subscribe(_[_.Volume],this.Mb,({payload:t})=>{this.setVolume(t),this.Eb(a.ProtoAdClickTypeEnum.VolumeClick)}),this.subscribe(_[_.Play],this.Mb,()=>{this.Eb(a.ProtoAdClickTypeEnum.PlayClick),this.play()}),this.subscribe(_[_.Pause],this.Mb,()=>{this.Eb(a.ProtoAdClickTypeEnum.PauseClick),this.pause()}),this.subscribe(_[_.Close],this.Mb,()=>{this.mediator.publish(this,c.b.UserInteraction,{payload:{playback:!1}}),this.mediator.publish(this,_[_.Close])}),this.subscribe(_[_.Mute],this.Mb,()=>{this.setVolume(0),this.Eb(a.ProtoAdClickTypeEnum.MuteClick)}),this.subscribe(_[_.Unmute],this.Mb,()=>{this.setVolume(1),this.Eb(a.ProtoAdClickTypeEnum.UnmuteClick)}),this.subscribe(E.DetachedFromDom,this.Ib,()=>{this.mediator.publish(this,M.DetachedFromDom)}),this.relay(C.b.ImpressionPrice,this.Ib,this,this.mediator)}Ub(t){this.Fb(),t.payload.adDuration=this.Ib.getAdDuration(),t.payload.adDuration||this.firstAdShown||this.show(),this.firstAdShown=!0,this.Or=!0,this.Mb.updateDuration(t.payload.adDuration),this.Mb.changeState(X.PlayingState),this.Vb=t.payload.clickThroughUrl,this._b&&this.Pb(),this.Rb(t.payload.selectedAdSlot)}Nb(t){this.gb.appendChild(t)}Hb(t=""){return this.xb.services.GlobalDomUtilsService.createElementByString(`<div class= "cnx-ad-container cnx-full-height ${t}"></div>`)}qb(){this.Cb=this.Hb(),this.Nb(this.Cb),this.kb.push(this.Cb)}zb(){const t=(i=this.ca,e=this.xb.config,{logoUrl:i.logoUrl,isMobile:e.isMobile,closeButtonMode:i.closeButtonMode,floatingCloseButtonMode:i.floatingCloseButtonMode,isCloseButton:i.isCloseButton,uiComponentsVisibility:i.uiComponentsVisibility,sharingDestinations:i.sharingDestinations});var i,e;this.Mb=new Ue(this,this.xb.services.GlobalDomUtilsService,this.xb.services.InteractionService,this.gb,(new ze).template,t),this.Mb.hide()}start(t,i,e){try{this.zb(),this.qb(),this.Tb(t,i,e),this.setVolume(e),this.$b()}catch(t){Object(n.a)({callStack:t.stack,level:a.ProtoLoggingLevelEnum.FATAL,exception:t.message,message:"adhandler_start"})}}getVolume(){return this.Sb}hide(){Object(j.L)(this.gb,d.g.Ad,d.g.AdOverlayType),this.Mb.hide()}show(){const t=[d.g.Ad],i=this.Ib.getCurrentAdType();i===a.ProtoAdType.Overlay&&t.push(d.g.AdOverlayType),this.Wb=i,Object(j.a)(this.gb,...t),this.Mb.show(),this.Mb.updateVolume(this.Sb),this.Db()}setVolume(t){this.Sb=t,this.Ib.setAdVolume(t),this.Mb&&this.Mb.updateVolume(t),this.mediator.publish(this,c.b.UserInteraction,{payload:{volume:!0}}),this.mediator.publish(this,_[_.Volume],{payload:{volume:t}})}resizeAd(t,i,e,s=[]){this.setVastViewMode(e);const n=s;n.push({container:this.Cb,width:t,height:i,type:a.ProtoAdType.Video}),this.Ib.resizeAd(t,i,e,n),this.mediator.publish(this,M.AdSlotResized,{payload:{width:t,height:i}})}adStateChange(t,i){this.Ib.onAdStateChange(t,i)}contentChanged(){this.Ib.onContentChange()}get inImpression(){return this.Or}get adInWin(){return this.Ib.adInWin}get inAdPodLoadingState(){return this.jb}resumeWithoutUserInteraction(){this.Ib.resumeAd(!1)}play(){this.Ib.resumeAd(!0),this.mediator.publish(this,c.b.UserInteraction,{payload:{playback:!0}})}pause(){this.Ib.pauseAd(!0),this.mediator.publish(this,c.b.UserInteraction,{payload:{playback:!1}})}stopAd(t){const i=()=>{this.mediator.publish(this,w.b.AdStopped),this.Ob=!1};this.Ib&&this.inImpression?(i(),this.Ib.stopAd(t)):this.inAdPodLoadingState&&i()}skipAd(){this.Ib&&this.inImpression?this.Ib.skipAd():this.jb&&(this.mediator.publish(this,w.b.AdSkipped),this.Db())}userInteraction(t){this.Ib.userInteraction(t)}enableAds(){this.Ib.enableAds()}enterAdPodLoadingState(){this.jb=!0;const{width:t,height:i}=this.Ib.getLastAdSlot(this.Wb);this.Mb.showAdLoadingScreen(bt.getSmartCroppedImageUrl(this.Gb,t,i),this.Vb,this.wb.getNextSlotIndex(),this.wb.getTotalNumberOfSlots())}setAdLoadingBackgroundUrl(t){this.Gb=t}updatePodRemainingTime(t){this.Ib.updatePodRemainingTime(t)}newAdOpportunity(){this.Ib.newAdOpportunity()}disableAds(t){this.Ib.disableAds(t)}setVastViewMode(t){this.Ab=t,this.Ib.setVastViewMode(t)}destroy(){var t,i,e;null===(t=this.Ib)||void 0===t||t.disableAds(U.Unknown),null===(i=this.Mb)||void 0===i||i.destroy(),null===(e=this.Ib)||void 0===e||e.destroy()}}const Ge={OrientationPortrait:"cnx-in-ps-portrait",OrientationLandscape:"cnx-in-ps-landscape"},Je={Container:"cnx-playspace-container",Content:"cnx-playspace-content",Footer:"cnx-playspace-footer",Slider:"cnx-playspace-slider",Slide:"cnx-playspace-slide-container",Overlay:"cnx-ui-click-to-play-overlay",ImageWrapper:"cnx-ui-ps-image-wrapper",ImageBackground:"cnx-ui-ps-image-background",MediaLogo:"cnx-is-media-logo"},Qe={FullSizeSlot:"cnx-ad-full-size-slot",NextSlideBackground:"cnx-ad-next-slide-bg",NextSlideTitle:"cnx-ad-next-slide-title",DurationContainer:"cnx-ui-progress-label-container"},Xe={Main:"cnx-top-title",LogoContainer:"cnx-top-title-logo-container",Logo:"cnx-top-title-logo",LogoPortrait:"cnx-top-title-logo-portrait",LogoLandscape:"cnx-top-title-logo-landscape",LogoAnimation:"cnx-top-title-logo-animation",TitlesContainer:"cnx-top-title-text-container",TopStoryTitle:"cnx-top-title-story-text",TopSlideTitle:"cnx-top-title-slide-text",TextPlaceholder:"cnx-top-title-highlight-text-placeholder",Text:"cnx-top-title-highlight-text",TextOuterContainer:"cnx-top-title-highlight-text-outer-container",TextInnerContainer:"cnx-top-title-highlight-text-inner-container",SlideIn:"cnx-top-title-slide-in",SlideOut:"cnx-top-title-slide-out",SlideDown:"cnx-top-title-slide-down",SlideInitial:"cnx-top-title-slide-initial"},Ye={ProgressBarItemClicked:"progressBarItemClicked",CallToAction:"callToAction",CloseButtonClicked:"closeButtonClicked",GeneralClickInteraction:"generalClickInteraction"},Ke={ChangeSlide:"changeSlide",ContentStart:"contentStart",ContentComplete:"contentComplete",LayoutChanged:"layoutChanged"},Ze=Object.assign(Object.assign({},c.a),{ContentHandlerReady:"contentHandlerReady",NewStory:"newStory",ContentStart:"ContentStart",ContentEnd:"ContentEnd"}),ts={SlideTransitionStart:"slideTransitionStart",SlideChanged:"slideChanged",SlideTransitionEnd:"slideTransitionEnd",SlideTimeUpdate:"slideTimeUpdate",SlideCycleEnd:"slideCycleEnd"},is=Object.assign(Object.assign({},Ke),Ye),es=0,ss=2,ns=100,rs=92,as=61,hs=72;class os{constructor(t){this.Jb=t.inAppAndroid}get template(){return`\n        <cnx class="cnx-ui cnx-ui-ad">\n            [[${mt.SkipAdButton}]]\n            <cnx class="cnx-ad-marker">${Ne.a}</cnx>\n            <cnx class="cnx-ad-marker-pod">\n                ${qe.a}\n                <cnx class="cnx-ad-marker-pod-right-side">\n                    <cnx class="cnx-ad-marker-pod-right-side-text">1/1</cnx>\n                </cnx>\n            </cnx>\n            <cnx class="cnx-ui-progress cnx-ui-bar cnx-ad-progress-bar">\n                <cnx class="cnx-ui-progress-bar">[[${mt.ProgressBar}]]</cnx>\n            </cnx>\n            <cnx class="${Je.Content}">\n                <cnx class="cnx-ui-ratio-container">\n                    <cnx class="cnx-ui-ad-header">\n                        <cnx-span>SPONSORED</cnx-span>\n                    </cnx>\n                    <cnx class="cnx-ui-ad-body">\n                        <cnx class="cnx-ui-ad-slot-container">\n                            <cnx class="cnx-ui-ad-slot"></cnx>\n                            <cnx class="cnx-ui cnx-ui-ad-content">\n                                [[${mt.AdLoadingScreen}]]\n                                <cnx class="cnx-ui-buttons cnx-ad-buttons">\n                                    <cnx class="cnx-ui-btn cnx-ad-play-button">[[${mt.PlayButton}]]</cnx>\n                                    <cnx class="cnx-ad-volume-controls">[[${mt.VolumeControls}]]</cnx>\n                                    <cnx class="cnx-ui-btn cnx-ad-volume-button">[[${mt.VolumeButton}]]</cnx>\n                                    <cnx class="${Qe.DurationContainer} ${d.h.HideOnAdOverlay} ${d.h.HideOnPodLoadingScreen}">\n                                            [[${mt.ElapsedTimeLabel}]]/[[${mt.TotalDurationLabel}]]\n                                    </cnx>\n                                </cnx>\n                            </cnx>\n                        </cnx>\n                        <cnx class="cnx-ui-ad-next-slide-container">\n                            <cnx class="cnx-ui-ad-next-slide">\n                                <cnx class="${Qe.NextSlideBackground}">\n                                    <svg width="${rs}" height="${as}"></svg>\n                                </cnx>\n                                <cnx class="cnx-ad-next-slide-text-container">\n                                    <cnx-span class="cnx-ad-next-slide-label">\n                                        Coming Next\n                                    </cnx-span>\n                                    <cnx class="${Qe.NextSlideTitle}">\n                                    </cnx>\n                                </cnx>\n                            </cnx>\n                        </cnx>\n                    </cnx>\n                </cnx>\n            </cnx>\n            <cnx class="${Je.Footer} cnx-ui-ad-slide-footer ${this.Jb?"cnx-inapp-android":""}">\n                <cnx class="cnx-ui-spacer"></cnx>\n                <cnx class="cnx-skip-ad-container ${d.h.HideOnAdOverlay}">[[${mt.SkipAd}]]</cnx>\n            </cnx>\n        </cnx>\n        `.trim()}}class cs{constructor(t,i,e={}){this.Qb=t,this.ks=i,this.Xb=1.2,this.Yb=16,this.Kb="normal",this.Zb={lines:0,useNativeClamping:!0},this.tv=!1,this.Zb=Object.assign(Object.assign({},this.Zb),e),this.tv=this.ev()}setLines(t){this.Zb.lines=t}getClampedText(t){this.sv=t.trim(),this.nv=this.ks.createElementByString(`<cnx-span style="display:inline-block;width:100%;line-height:inherit;font-family:inherit;font-size:inherit;">${this.sv}</cnx-span>`),this.Qb.appendChild(this.nv);let i=0;try{i=this.rv()}catch(t){Object(n.a)({message:"LineClamp_getMaxLines",exception:t.message,callStack:t.stack,level:a.ProtoLoggingLevelEnum.FATAL})}const e=this.av(this.Zb.lines,i),s=this.hv(e);return Math.ceil(this.nv.getBoundingClientRect().height)-1<=s?(this.ov(),this.sv):this.tv?void Object(j.Q)(this.Qb,{overflow:"hidden",textOverflow:"ellipsis",webkitBoxOrient:"vertical",display:"-webkit-box",webkitLineClamp:e}):this.cv(this.nv.firstChild,s)}ev(){return!!this.Zb.useNativeClamping&&void 0!==this.Qb.style.webkitLineClamp}hv(t){return this.lv(this.Qb)*t+(this.uv(this.nv)+this.uv(this.Qb))+(this.dv(this.nv)+this.dv(this.Qb))}fv(t){if(t.getBoundingClientRect){const{height:i}=t.getBoundingClientRect();if(i>0)return Math.ceil(i)}const i=t.clientHeight;return i&&i>0?Math.ceil(i):t.parentNode?this.fv(t.parentNode):0}rv(){const t=this.fv(this.Qb),i=this.lv(this.Qb),e=this.uv(this.nv)+this.uv(this.Qb),s=this.dv(this.nv)+this.dv(this.Qb),n=Math.floor((t-e-s)/i+.05);return Math.max(n,0)}pv(t){const i=this.ks.getFontSizePropertyValue(t);return i?parseInt(i,10):this.Yb}lv(t){let i=this.ks.getLineHeightPropertyValue(t);return i&&i!==this.Kb||(i=`${this.Xb*this.pv(t)}`),parseInt(i,10)}uv(t){if(!t)return 0;const i=this.ks.getPaddingTopPropertyValue(t);return parseInt(i,10)||0}dv(t){if(!t)return 0;const i=this.ks.getPaddingBottomPropertyValue(t);return parseInt(i,10)||0}av(t,i){return t>0?0===i?t:Math.min(this.Zb.lines,i):i}cv(t,i,e){if(!i)return;void 0===e&&(e=t.nodeValue.split(" "));const s=[...e];if(s.length>1){return s.pop(),this.bv(t,`${s.join(" ")}...`),t.parentNode.offsetHeight>i?this.cv(t,i,s):(this.ov(),`${s.join(" ")}...`)}}bv(t,i){t.nodeValue=i}ov(){this.Qb.innerHTML="",this.nv=null}}class ls extends Ue{constructor(t,i,e,s,n,r,a={},h){super(t,i,e,n,r,a,h),this.mediator=t,this.vv=i,this.Eo=s,this.$container=n,this.Gn=a,this.mv=3,this.gv=this.$uiContainer.getElementsByClassName("cnx-ui-ad-header")[0],this.yv=this.$uiContainer.getElementsByClassName("cnx-ui-ad-body")[0],this.wv=this.$uiContainer.getElementsByClassName("cnx-ui-ad-slot")[0],this.xv=this.$uiContainer.querySelector(`.${Qe.NextSlideTitle}`),this.kv=this.$uiContainer.querySelector(`.${Qe.NextSlideBackground}`),this.Sv=this.$uiContainer.querySelector(`.${Qe.DurationContainer}`),this.Ov=this.$uiContainer.querySelector(`.${Je.Content}`),this._v=new cs(this.xv,this.vv,{useNativeClamping:!1,lines:this.mv}),this.Eo.on(this.yv,()=>{this.jv()})}jv(){if(!this.$nextSlide)return;let t;this.xv.innerHTML="";const i=this.$nextSlide.metadata.title,e=this.$nextSlide.metadata.storyTitle;t=Object(T.h)(e)?this._v.getClampedText(`${e}: ${i}`):this._v.getClampedText(i),this.xv.innerHTML+=`<cnx-span>${t}</cnx-span>`}Av(){this.$nextSlide&&(this.kv.style.backgroundImage=`url("${this.$nextSlide.metadata.imageUrl}")`)}Iv(){this.jv(),this.Av()}addAdSlot(t){this.wv.appendChild(t)}addSecondaryAdSlot(t){this.$uiContainer.appendChild(t)}hide(){Object(j.L)(this.gv,d.h.Show),Object(j.L)(this.yv,d.h.Show),Object(j.i)(this.yv),Object(j.L)(this.yv,d.h.Hide)}show(){Object(j.a)(this.gv,d.h.Show),Object(j.a)(this.yv,d.h.Hide),Object(j.i)(this.yv),Object(j.a)(this.yv,d.h.Show),this.Iv()}get adHeaderHeight(){return this.gv.clientHeight}updateVolume(t){const i=this.getComponent(mt.VolumeControls),e=this.getComponent(mt.VolumeButton);i&&i.setVolume(t),e&&e.setState(t>0?ce.Unmute:ce.Mute)}updateDuration(t){super.updateDuration(t),t?Object(j.R)(this.Sv):Object(j.v)(this.Sv)}setMediaContainerRatio(t){Object(j.J)(this.Ov,t)}}class us extends ii{constructor(){super(...arguments),this.Tv=100,this.eventList=[kt.a[kt.a.Scroll]],this.isEndState=!1,this.Cv=()=>{this.mediator.publish(this,Ye.ProgressBarItemClicked,{payload:this._d})},this.Pv=t=>{t.stopPropagation()}}Mv(){const t=this.ks.getComputedTranslateX(this.Sf),i=this.gf;return Object(rt.g)(0,i,0,100,t)}Ev(t){Object(j.Q)(this.Sf,{transition:`transform ${t}ms linear`})}Lv(){Object(j.Q)(this.Sf,{transition:"none"})}startProgress(t){this.Ev(t),this.setProgress(this.Tv)}pauseProgress(){this.setProgress(this.Mv()),this.Lv()}forceEndState(){this.Lv(),super.forceEndState(),this.isEndState=!0}forceStartState(){this.Lv(),super.forceStartState(),this.isEndState=!1}initComponent(){super.initComponent();const t={click:this.Cv,interactionstart:this.Pv};this.Od.register(this._d,this,this.Od,t),this.Xn&&(this.subscribe(kt.a[kt.a.Click],this.Od,()=>{this.Cv()}),this.relay(kt.a[kt.a.Scroll],this.Od,this,this.mediator))}destroy(){super.destroy()}onResize(t,i){this.setProgress(this.Mv()),this.Lv(),i&&(this.setProgress(this.Tv),this.Ev(t))}}var ds=e(116),fs=e.n(ds);class ps extends wt{constructor(){super(...arguments),this.eventList=[Ye.ProgressBarItemClicked,kt.a[kt.a.Scroll]],this.Rv=[],this.Bv=({payload:t})=>{const i=Object(j.k)(t,this._d);this.mediator.publish(this,Ye.ProgressBarItemClicked,{payload:i})}}Dv(t){const i=this.Rv[t];i.forceStartState(),i.startProgress(this.gt)}startProgress(){if(Object(T.a)(this.Fv)){for(let t=0;t<this.Rv.length;t++)t<this.Fv?this.Rv[t].forceEndState():(t!==this.Fv||this.Rv[t].isEndState)&&this.Rv[t].forceStartState();this.Rv[this.Fv].startProgress(this.gt)}}pauseProgress(){this.Rv[this.Fv]&&this.Rv[this.Fv].pauseProgress()}resetProgress(){Object(T.a)(this.Fv)&&this.Rv.forEach(t=>t.forceStartState())}setSlides(t){if(!t)throw new Error("PlayspaceProgressBar: no slides provided");for(let i=0;i<t;i++){const t=new us(this,this.ks,this.Od,fs.a,this.Xn);this.subscribe(Ye.ProgressBarItemClicked,t,this.Bv),this.relay(kt.a[kt.a.Scroll],t,this,this.mediator),this.Rv.push(t),t.initComponent(),this._d.appendChild(t.getContainer())}}setDuration(t){this.gt=t}setCurrentIndex(t){t===this.Fv&&this.Dv(t),this.Fv=t}initComponent(){}destroy(){super.destroy(),this.Rv.forEach(t=>t.destroy())}resizeProgressBar(t,i){this.Rv.forEach((e,s)=>{s<this.Fv&&e.forceEndState(),s===this.Fv&&e.onResize(t,i)})}}var bs=e(117),vs=e.n(bs),ms=e(66),gs=e.n(ms);class ys extends St{constructor(t,i,e,s,n){super(t,i,e,ys.getTemplate(n),s),this.mediator=t,this.Wf=[],this.tp=!1,this.type=hi.SubmenuMenuItem,this.eventList=[],this.isOpen=!1,this.event=n.event,this.eventList.push(this.event),this.$v=new bi(this,i,e,s,{activeEvent:n.event,name:n.name.toUpperCase(),icon:""}),this.$menuContainer=this.ks.createElementByString(`<cnx class="${d.k.Items}"></cnx>`),this.Uv=this._d.getElementsByClassName(d.k.ItemExtra)[0]}static getTemplate(t){const i=`<cnx class="${d.k.ItemIcon}">${t.icon}</cnx>`;return`<cnx class="${d.k.SubmenuOption}">\n                    ${t.icon?i:""}\n                    <cnx class="${d.k.ItemTitle}">${t.name}</cnx>\n                    <cnx class="${d.k.ItemExtra} ${d.f.AccentColor}">${t.label?t.label:""}${gs.a}</cnx>\n                </cnx>`}onClickHandler(t){this.mediator.publish(this,this.event)}handleItemsEvents(t){this.mediator.publish(this,this.event,{payload:t===this.event?void 0:t})}buildContextMenu(t){this.$menuContainer.innerHTML="",this.Wf.forEach(t=>this.unsubscribeAll(t)),this.Wf=[this.$v,...t],this.Wf.forEach(t=>{t.eventList.forEach(i=>this.subscribe(i,t,()=>this.handleItemsEvents(i))),t.initComponent(),this.$menuContainer.appendChild(t.getContainer())})}changeLabel(t){this.Uv.innerHTML=`${t}${gs.a}`}get isActive(){return this.tp}set isActive(t){this.tp=t,this.tp?Object(j.a)(this._d,d.h.Active):Object(j.L)(this._d,d.h.Active)}}class ws extends ys{constructor(t,i,e,s,n){super(t,i,e,s,{event:_[_.Quality],name:n,icon:Nt.a,options:[]}),this.mediator=t,this.gp={height:360,quality:Q.Auto},this.yp=!0}handleItemsEvents(t){if(t===_[_.Quality])return;this.yp=t===Q[Q.Auto];const i={height:this.yp?this.gp.height:parseInt(t,10),quality:this.yp?Q.Auto:Q.Strict};this.mediator.publish(this,this.event,{payload:i})}Vv(){let t=null;if(this.yp)t=Q[Q.Auto];else{const i=this.Nv.find(t=>t.event===this.gp.height.toString());i&&(t=i.name)}t&&this.changeLabel(t)}updateQuality(t,i=!1){Object(u.h)(this.wp)&&(this.yp=t.quality===Q.Auto,this.gp.quality=t.quality,this.gp.height=Object(rt.c)(t.height,this.wp.map(t=>t.videoHeight)),this.Vv(),$i(this.Nv,this.gp,this.yp),this.isActive=i)}updateAvailableQualities(t){this.Nv=[],this.wp=t,this.Nv=this.wp.map(t=>new bi(this,this.ks,this.Od,this.Xn,{name:`${t.videoHeight}p`,activeEvent:t.videoHeight.toString(),label:t.isHD?"HD":void 0})),this.Nv.push(new bi(this,this.ks,this.Od,this.Xn,{name:Q[Q.Auto],activeEvent:Q[Q.Auto]})),this.Vv(),$i(this.Nv,this.gp,this.yp),this.buildContextMenu(this.Nv)}}var xs=e(67),ks=e.n(xs),Ss=e(118),Os=e.n(Ss);const _s={ContextAbout:"About Connatix",ContextQuality:"Video Settings",ContextExpand:"Full Screen"};class js extends pi{constructor(t,i,e,s,n,r,a,h){super(t,i,e,s,n,r,a,h),this.alignMiddle=!1,this.alignTop=!1,this.forceRight=!1}initComponent(){this.Hv=new bi(this,this.ks,this.Od,this.Xn,{activeEvent:_[_.Expand],eventList:[_[_.Expand],_[_.Collapse]],icon:ks.a,name:_s.ContextExpand}),this.qv=new ws(this,this.ks,this.Od,this.Xn,_s.ContextQuality),this.buildContextMenu([this.qv,this.Hv,new bi(this,this.ks,this.Od,this.Xn,{activeEvent:_[_.AboutClick],name:_s.ContextAbout,icon:mi.a,label:gi.a.version?`V${gi.a.version}`:"dev"})])}setExpand(){this.Hv.event=_[_.Collapse],this.Hv.changeItemIcon(Os.a)}setCollapse(){this.Hv.event=_[_.Expand],this.Hv.changeItemIcon(ks.a)}showExpandButton(){this.Hv.showComponent()}hideExpandButton(){this.Hv.hideComponent()}updateQualityMenu(t){Object(u.h)(t)?(this.qv.updateAvailableQualities(t),this.qv.showComponent()):this.qv.hideComponent()}updateQuality(t,i=!1){this.qv.updateQuality(t,i)}}var As,Is,Ts=e(119),Cs=e.n(Ts),Ps=e(120),Ms=e.n(Ps);!function(t){t[t.VolumeControls=0]="VolumeControls",t[t.PlaybackControls=1]="PlaybackControls",t[t.PlaylistControls=2]="PlaylistControls",t[t.CtaButton=3]="CtaButton",t[t.SlideTitle=4]="SlideTitle",t[t.TopLogo=5]="TopLogo",t[t.TopStoryTitle=6]="TopStoryTitle",t[t.TopSlideTitle=7]="TopSlideTitle",t[t.TextLabel=8]="TextLabel"}(As||(As={})),function(t){t[t.Default=0]="Default",t[t.Description=1]="Description",t[t.Quote=2]="Quote",t[t.Bullet=3]="Bullet",t[t.Cover=4]="Cover",t[t.Instagram=5]="Instagram"}(Is||(Is={}));const Es={TimerLabel:"cnx-cta-btn-timer-label",TimerLoader:"cnx-svg-circle-stroke",TextLabel:"cnx-cta-btn-text",TextContainer:"cnx-cta-btn-content",AlignWithContent:"cnx-cta-align-with-content"},Ls=16;class Rs extends St{constructor(t,i,e,s,n,r,a){super(t,i,e,n.template,r),this.vr=s,this.zv=n,this.Wv=a,this.eventList=[Ye.CallToAction,kt.a[kt.a.Scroll]],this.Gv=!1,this.Jv=!1,this.Qv=!1,this.pr=()=>{this.Xv()},this.Yv=()=>{const t=Math.round(this.Kv.timeRemaining/B.f);this.Zv(t.toString())},this.tm=this._d.querySelector(".cnx-ui-ps-cta")}startProgress(){this.Gv=!0,this.Kv&&(this.Kv.start(),this.Yv())}pauseProgress(){this.Gv=!1,this.Kv&&(this.Kv.stop(),this.Yv())}changeLabel(t){Object(T.h)(t)&&(this.mf.innerHTML=t.substring(0,Ls))}initComponent(){super.initComponent(),this.mf=this._d.querySelector(`.${Es.TextLabel}`),this.Uv=this._d.querySelector(`.${Es.TextContainer}`)}onSlideTimeUpdate(){}onSlideTransitionEnd(){}onSlideTransitionStart(t){if(!Object(u.h)(t))return;const i=t.find(({type:t})=>t===As.CtaButton);if(!i||!i.metadata)return;const{url:e,label:s,duration:n,ctaAlignToContent:r,ctaAlignToFooter:a,title:h}=i.metadata;this.Jv=a,this.im(e,h),this.changeLabel(s);const o=Object(T.e)(n);this.em(o),this.nm(o,n),this.rm(r),this.am()}setFooterElement(t){this.hm=t,this.am()}handleCapabilities(t){this.onSlideTransitionStart(t)}hideComponent(){super.hideComponent(),this.om()}rm(t){t?Object(j.a)(this.tm,Es.AlignWithContent):Object(j.L)(this.tm,Es.AlignWithContent)}onClickHandler(){const t={payload:null};Object(T.h)(this.Et)&&(t.payload=this.Et),this.mediator.publish(this,Ye.CallToAction,t)}am(){this.Qv||this.hm&&this.Jv&&(this.vr.on(this.hm,this.pr),this.Qv=!0)}Xv(){if(!this.hm)return void Object(j.N)(this._d,"bottom");const t=(this.hm.clientHeight-this._d.clientHeight)/2*-1;Object(j.Q)(this._d,{bottom:`${t}px`})}em(t){t?this.cm||this.lm():this.um()}lm(){this.cm=this.ks.createElementByString(this.zv.getTimerTemplate()),Object(j.x)(this.Uv,this.cm),this.dm(this.cm)}dm(t){this.fm=t.querySelector(`.${Es.TimerLabel}`),this.pm=t.querySelector(`.${Es.TimerLoader}`)}um(){Object(j.M)(this.cm),this.cm=null,this.fm=null,this.pm=null}nm(t,i){t?(this.bm(),this.Kv.reset(i*B.f),this.Zv(i.toString()),this.Gv&&this.Kv.start(),this.vm(),Object(j.Q)(this.pm,{"animation-duration":`${i}s`})):this.om()}bm(){this.Kv||(this.Kv=new F(this),this.subscribe(D.TimeUpdate,this.Kv,this.Yv))}om(){this.Kv&&(this.unsubscribe(D.TimeUpdate,this.Kv,this.Yv),this.Kv.disable(),this.Kv=null)}vm(){Object(j.O)(this.pm,Es.TimerLoader,Es.TimerLoader,!0)}Zv(t){this.fm&&Object(T.h)(t)&&(this.fm.innerText=t)}im(t,i){if(this.Et=t,t&&(this.tm.title=i,!this.Wv)){this.tm.href=t;const i=this.ks.isURLSameDomainToTop(t);this.tm.target=i?ae.c.Top:ae.c.Blank,this.tm.rel="nofollow"}}}var Bs=e(68),Ds=e.n(Bs),Fs=e(121),$s=e.n(Fs),Us=e(122),Vs=e.n(Us);class Ns{get template(){return`\n        <cnx class="cnx-ui-ps-cta-placeholder">\n            <a class="cnx-ui-ps-cta">\n                <cnx class="cnx-cta-btn cnx-color-accent">\n                    <cnx class="cnx-cta-btn-container">\n                        <cnx class="cnx-cta-btn-content">\n                            <cnx-span class="cnx-cta-btn-instagram">\n                                ${$s.a}\n                            </cnx-span>\n                            <cnx-span class="cnx-cta-btn-text">\n                                READ MORE\n                            </cnx-span>\n                            <cnx-span class="cnx-cta-btn-arrow">\n                                ${Vs.a}\n                            </cnx-span>\n                        </cnx>\n                    </cnx>\n                </cnx>\n            </a>\n        </cnx>\n        `.trim()}getTimerTemplate(){return`\n            <cnx class="cnx-cta-btn-timer-container">\n                <cnx class="cnx-cta-btn-timer-loader-wrapper">\n                    ${Ds.a}\n                    ${Ds.a}\n                </cnx>\n                <cnx class="cnx-cta-btn-timer-label-wrapper">\n                    <cnx class="${Es.TimerLabel}">\n                    </cnx>\n                </cnx>\n            </cnx>\n        `.trim()}}class Hs extends St{constructor(){super(...arguments),this.eventList=[_[_.Play]]}onClickHandler(){this.mediator.publish(this,_[_.Play])}}var qs,zs=e(123),Ws=e.n(zs);!function(t){t[t.TopLogo=0]="TopLogo",t[t.TopSlideTitle=1]="TopSlideTitle",t[t.TopStoryTitle=2]="TopStoryTitle"}(qs||(qs={}));const Gs={[As.TopLogo]:qs.TopLogo,[As.TopSlideTitle]:qs.TopSlideTitle,[As.TopStoryTitle]:qs.TopStoryTitle},Js={[qs.TopLogo]:As.TopLogo,[qs.TopSlideTitle]:As.TopSlideTitle,[qs.TopStoryTitle]:As.TopStoryTitle},Qs=36,Xs="Top Articles",Ys=[qs.TopLogo,qs.TopStoryTitle,qs.TopSlideTitle];class Ks extends pe{constructor(t,i,e,s){super(t,i,e,s),this.eventList=[_[_.LogoClicked],kt.a[kt.a.Scroll]],this.mm=[],this.gm={},this.ym=this._d.querySelector(`.${Xe.TitlesContainer}`)}triggerLogoAnimation(){const t=this.getComponent(mt.TopLogo);t&&t.triggerLogoAnimation()}onSlideTransitionStart(t){const i=this.wm(t);this.gm=Object.assign({},i),this.xm(t)}onSlideTransitionEnd(){}onSlideTimeUpdate(t,i){}handleComponentEvent(t,i,e){this.mediator.publish(this,t,i)}km(t){return t.map(({type:t})=>Gs[t]).filter(t=>Object(T.a)(t))}wm(t){return t.reduce((t,{type:i,metadata:e})=>{switch(i){case Js[qs.TopStoryTitle]:if(!e.label&&!e.useFallbackLabel)return t;const s=e.label||Xs;return Object.assign(Object.assign({},t),{[qs[qs.TopStoryTitle]]:this.Om(s,e.useTransition)});case Js[qs.TopSlideTitle]:return Object.assign(Object.assign({},t),{[qs[qs.TopSlideTitle]]:this.Om(e.label,e.useTransition)});case Js[qs.TopLogo]:return Object.assign(Object.assign({},t),{[qs[qs.TopLogo]]:Object.assign({},e)});default:return t}},{})}Om(t,i=!1){return{useTransition:i,label:this._m(t)}}_m(t){if(t)return t.length>Qs?`${t.substring(0,Qs)}...`:t}xm(t,i=!1){const e=this.km(t),s=Object(u.a)(Ys,e),n=Object(u.a)(e,this.mm),r=Object(u.b)(e,this.mm);this.mm=e,this.jm(e),Object(j.i)(this.ym),s.forEach(t=>this.Am(t,i)),n.forEach(t=>this.Im(t,i)),r.forEach(t=>this.Tm(t,i))}jm(t){switch(!0){case this.Cm(t):this.Pm();break;case this.Mm(t):this.Em();break;default:this.Lm()}}Cm(t){return t.includes(qs.TopSlideTitle)&&t.includes(qs.TopStoryTitle)}Mm(t){const i=t.includes(qs.TopSlideTitle)&&!t.includes(qs.TopStoryTitle),e=!t.includes(qs.TopSlideTitle)&&t.includes(qs.TopStoryTitle);return i||e}Pm(){Object(j.L)(this.ym,Xe.SlideDown),Object(j.a)(this.ym,Xe.SlideInitial)}Em(){Object(j.L)(this.ym,Xe.SlideInitial),Object(j.a)(this.ym,Xe.SlideDown)}Lm(){Object(j.L)(this.ym,Xe.SlideInitial,Xe.SlideDown)}Am(t,i=!1){const e=this.Rm(t);if(!e)return;const s=this.Bm(t);i&&(s.useTransition=!1),e.hide(s)}Im(t,i=!1){const e=this.Rm(t);if(!e)return;const s=this.Bm(t);i&&(s.useTransition=!1),e.show(s)}Tm(t,i=!1){const e=this.Rm(t);if(!e)return;const s=this.Bm(t);i&&(s.useTransition=!1),e.update(s)}Rm(t){return this.getComponent(mt[qs[t]])}Bm(t){return this.gm[qs[t]]||{}}}var Zs,tn,en;!function(t){t.Wrapper="cnx-ui-ps__wrapper",t.Container="cnx-ui-ps__container",t.Placeholder="cnx-ui-ps__placeholder",t.Text="cnx-ui__span--text",t.Label="cnx-ui__span--label",t.Title="cnx-ui__span--title",t.VerticalLine="cnx-ui-ps__vertical-line",t.Instagram="cnx-ui-ps__slide--instagram",t.Cover="cnx-ui-ps__slide--cover",t.HighlightInner="cnx-top-title-highlight-text-inner-container",t.HighlightText="cnx-ui-ps-highlight-text"}(Zs||(Zs={})),function(t){t.Default="cnx-ui-ps__sliding--default",t.Basic="cnx-ui-ps__sliding--basic",t.Cover="cnx-ui-ps__sliding--cover",t.SlideIn="cnx-title-slide-in",t.SlideOut="cnx-title-slide-out"}(tn||(tn={})),function(t){t.Cover="cnx-ui-ps__title--cover",t.Quote="cnx-ui-ps__title--quote",t.Bullet="cnx-ui-ps__title--bullet",t.Default="cnx-ui-ps__title--default",t.Description="cnx-ui-ps__title--description",t.Instagram="cnx-ui-ps__title--instagram"}(en||(en={}));const sn="em";var nn=e(9);const rn=0,an=!0;class hn{constructor(t,i=rn,e=an){if(this.Dm=t,this.Fm=e,!Object(u.h)(this.Dm))throw new Error("PlaylistManager: list was not supplied");this.setCurrentItem(i)}setCurrentItem(t){this.$m=this.Dm[t]}get currentItem(){return this.$m}goToNextItem(){this.Um().nextIndex===this.Um().firstIndex&&this.Fm?this.setCurrentItem(this.Um().firstIndex):this.setCurrentItem(this.Um().nextIndex)}get listLength(){return this.Dm.length}get previousItem(){return this.Dm[this.Um().prevIndex]}get currentItemIndex(){return this.Um().currentIndex}Um(t=this.Dm.indexOf(this.$m)){return st(this.Dm,t)}}const on=250,cn=15,ln=10,un="cnx-aux",dn="cnx-aux-container",fn="cnx-ui-lines";class pn{constructor(t){this.ks=t}Vm(t,i){const{maxLineWidth:e,maxLines:s,minLines:r}=i,h=[...t],o=[];if(!h.length||!Object(T.e)(e))return o;let c=0,l=-1,u=0;for(;h.length>0;){if(c=0,o[++l]=[],++u>=on){Object(n.a)({message:"Split text base line wrap infinite loop",level:a.ProtoLoggingLevelEnum.INFO,throttle:1,sendMaxLog:!1});break}for(;h[0]&&c+h[0].width<=e;)if(c+=h[0].width,o[l].push(h.shift()),++u>=on){Object(n.a)({message:"Split text base line wrap infinite loop",level:a.ProtoLoggingLevelEnum.INFO,throttle:1,sendMaxLog:!1});break}if(h[0]&&o.length>=s){o[l].push(...h);break}}return o.length<r&&o[0].length>4&&(o[1]=o[0].splice(-2,2)),o[l].length<2&&o.length>1&&o[l].unshift(o[l-1].pop()),o}Nm(t){return t.map(t=>({innerHTML:t.nodeName.toLowerCase()===un?t.innerHTML:t.outerHTML,width:t.getBoundingClientRect().width,height:t.getBoundingClientRect().height}))}getWordsHtml(t){if(!Object(T.h)(t))return"";let i=[];if(_i(t))try{i=function(t){const i=document.createElement("cnx");i.innerHTML=t;const e=[];return Object(u.c)(i.childNodes).forEach(t=>{t.outerHTML?e.push(t.outerHTML):" "===t.nodeValue?e.push(" "):t.nodeValue.split(" ").forEach(t=>e.push(t))}),e}(t.trim())}catch(i){return Object(n.a)({message:"MultilinePadded_getRows_html_split",exception:i.message,level:a.ProtoLoggingLevelEnum.INFO,callStack:i.stack,throttle:1,sendMaxLog:!1}),t}else i=t.trim().split(" ");return i.map(t=>{let i=" ";return _i(t)?i="":" "===t&&(i=""),`<${un}>${t}${i}</${un}>`}).join("")}Hm(t,i){const e=t.querySelectorAll(i),s=t.clientWidth?t.clientWidth:t.getBoundingClientRect().width;Object(u.c)(e).forEach(t=>{const i=Object(u.c)(t.querySelectorAll(un)),e=t.parentElement;if(!i.length||t.nodeType!==Node.ELEMENT_NODE)return;const n=this.ks.getComputedStyle(t),r=parseInt(this.ks.getComputedStyle(t,"before").getPropertyValue("width"),10),a=parseInt(n.getPropertyValue("--max-title-lines"),10),h=parseInt(n.getPropertyValue("--min-title-lines"),10),o=parseInt(n.getPropertyValue("font-size"),10),c={maxLineWidth:r||t.getBoundingClientRect().width-2*ln,maxLines:a||cn,minLines:h||1},l=this.Nm(i),d=this.Vm(l,c),f=this.ks.createElementByString(`<cnx class='${fn}'></cnx>`);f.dataset.split=s.toString(),f.dataset.split+=","+o,d.forEach(i=>{const e=t.cloneNode();Object(j.L)(e,dn);const s=i.map(t=>t.innerHTML.trim());e.innerHTML+=this.qm(s).replace(/\s\s+/g," "),f.dataset.split+=","+i.length,Object(j.d)(e,f)}),this.zm(f).lines!==this.zm(e).lines?t.classList.contains(dn)?this.ks.requestAnimationFrameHelper(()=>{null!==e.parentNode&&Object(j.w)(e,f),Object(j.M)(e)}):this.ks.requestAnimationFrameHelper(()=>{null!==t.parentNode&&Object(j.w)(t,f),Object(j.M)(t)}):Object(j.M)(t)})}brakeLongLines(t,i){const e=t.querySelectorAll(i);if(!e.length)return;const s=t.clientWidth?t.clientWidth:t.getBoundingClientRect().width,n=this.zm(e[0].parentElement);if(isNaN(n.width))return void this.Hm(t,i);if(n.width&&0===Math.abs(n.width-s))return;const r=t.querySelectorAll(`.${fn}[data-split]`);Object(u.c)(r).forEach(t=>{const e=t.querySelectorAll(i),s=e[0].cloneNode(!1),n=Object(u.c)(e).map(t=>t.innerHTML).join("");s.innerHTML=this.getWordsHtml(n),Object(j.a)(s,dn),t.prepend(s)}),this.Hm(t,i)}zm(t){const i=t.dataset.split?t.dataset.split.split(","):[],e=i.shift();return{width:parseInt(e,10),lines:i.join("")}}qm(t){return t.reduce((t,i,e)=>Object(u.g)("<",i)&&_i(i)?t+i:" "===t?t:t+`${i} `,"")}}class bn extends St{constructor(t,i,e,s,n,r){super(t,i,e,r.template,n),this.mediator=t,this.ks=i,this.vr=s,this.Xn=n,this.Wm=r,this.splitTextSelector=`.${Zs.Text}`,this.pr=()=>{this.ks.requestAnimationFrameHelper(()=>{this.Gm.brakeLongLines(this._d,this.splitTextSelector)})},this.Jm=i.createDocumentFragment(),this.Gm=new pn(i)}get $templateFragment(){return this.Jm}Qm(t,i){const e=this.Wm.titleTemplate(t,i);return this.ks.createElementByString(e)}Xm(t,i){const e=this.Wm.labelTemplate(t,i);return this.ks.createElementByString(e)}Ym(t,i){const e=this.Wm.textTemplate(t,i);return this.ks.createElementByString(e)}Km(){const t=this.Wm.placeholderTemplate();return this.ks.createElementByString(t)}Xv(){}Zm(){this.resetAnimation(),Object(j.a)(this._d,tn.SlideIn)}tg(){this.resetAnimation(),Object(j.a)(this._d,tn.SlideOut)}onSlideTransitionStart(t){this.ig(t),this.resetAnimation(),this.render()}onSlideTransitionEnd(){this.Zm()}onSlideTimeUpdate(t,i){}resetAnimation(){const t=[tn.SlideIn,tn.SlideOut];Object(j.L)(this._d,...t)}initComponent(t){super.initComponent(),this.eg=t,this.vr.on(this.eg,this.pr)}render(){Object(j.J)(this._d,this.Jm),Object(j.d)(this._d,this.eg)}setFooterElement(t){return this.hm=t,this.Xv(),this.hm}destroy(){this.vr.off(this.eg,this.pr),Object(j.M)(this._d),this._d=this.ks.createElementByString(this.Wm.template),this.unsubscribeAll(this.Od),this.Od.unregisterAll(this)}}function vn(t,i){return function(t,i){const e=i.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"),s=new RegExp(`<${e}>(.*?)</${e}>`,"g");return t.replace(s,(t,e)=>e.split(" ").map(t=>`<${i}>${t}</${i}>`).join(" "))}(Si(t),i)}const mn={[nn.ProtoPlayspaceColorSchemeEnum.Accent]:d.f.AccentColor,[nn.ProtoPlayspaceColorSchemeEnum.Primary]:d.f.PrimaryColor,[nn.ProtoPlayspaceColorSchemeEnum.Secondary]:d.f.SecondaryColor};class gn extends bn{constructor(t,i,e,s,n,r){super(t,i,e,s,n,r),this.mediator=t,this.ks=i,this.Xn=n,this.Wm=r,this.eventList=[],this.className=en.Description}sg(t){return t/this.ng.listLength*(this.ng.currentItemIndex+1)}rg(t){const i=t.map((t,i)=>{const e=this.sv(t);return Object(j.d)(e,this.$templateFragment),0===i&&Object(j.a)(e,"active"),Object.assign(Object.assign({},t),{shown:!1,element:e})});this.ng=new hn(i)}ag(t){return this.Xm(t.text,mn[t.colorScheme])}sv(t){return this.Ym(this.Gm.getWordsHtml(vn(t.text,sn)),mn[t.colorScheme])}ig(t){const{descriptionChunkList:i,label:e,labelColorScheme:s}=t,n={text:e,colorScheme:s};Object(T.h)(n.text)&&Object(j.d)(this.ag(n),this.$templateFragment),Object(u.h)(i)&&this.rg(i)}hg(){this.ng.currentItem.shown=!0,Object(j.L)(this.ng.currentItem.element,"active"),this.ng.goToNextItem(),this.ks.requestAnimationFrameHelper(()=>{this.resetAnimation(),this.ks.requestAnimationFrameHelper(()=>{Object(j.a)(this.ng.currentItem.element,"active"),this.Zm()})})}onSlideTimeUpdate(t,i){t>=i||t>=this.sg(i)&&!this.ng.currentItem.shown&&this.hg()}}class yn{get template(){return`<cnx class="${d.f.TitleComponent}"></cnx>`}titleTemplate(t,i){return`<cnx class="${Zs.Title} ${i}">${t}</cnx>`}labelTemplate(t,i){return`<cnx class="${Zs.Label} ${i} ">${t}</cnx>`}textTemplate(t,i){return`<cnx class="${Zs.Text} ${i}">${t}</cnx>`}containerTemplate(){return`<cnx class="${Zs.Container}"></cnx>`}placeholderTemplate(){return`<cnx class="${Zs.Placeholder}"></cnx>`}wrapeprTemplate(){return`<cnx class="${Zs.Wrapper}"></cnx>`}}class wn extends yn{get template(){return`<cnx class="${tn.Basic} ${d.f.TitleComponent}"></cnx>`}textTemplate(t,i){return`<cnx class="${Zs.Placeholder}">\n            <cnx class="${Zs.Text} ${i}">${t}</cnx>\n        </cnx>`}}class xn extends yn{get template(){return`<cnx class="${tn.Default} ${d.f.TitleComponent}">\n            <cnx class="${Zs.VerticalLine} ${d.f.AccentColor}"></cnx>\n        </cnx>`.trim()}textTemplate(t){return`<cnx class="${d.m.InheritBodyFontFamily} ${Zs.Text} ${d.f.PrimaryColor} ${Zs.HighlightInner} ${Zs.HighlightText}">${t}</cnx>`.trim()}}const kn=1200;class Sn extends bn{constructor(t,i,e,s,n,r){super(t,i,e,s,n,r),this.mediator=t,this.ks=i,this.Xn=n,this.Wm=r,this.className=en.Default,this.og=!0,this.eventList=[...this.eventList,Ye.CallToAction]}ig(t){const{url:i,label:e}=t;if(i?(this._d.setAttribute("title",i),Object(j.a)(this._d,d.f.TitleLink)):(this._d.removeAttribute("title"),Object(j.L)(this._d,d.f.TitleLink)),Object(T.h)(e)){const t=this.Gm.getWordsHtml(vn(e,sn));Object(j.d)(this.Ym(t),this.$templateFragment)}}onClickHandler(){this.mediator.publish(this,Ye.CallToAction)}onSlideTransitionEnd(){super.onSlideTransitionEnd(),this.og=!0}onSlideTimeUpdate(t,i){this.og&&i-t<kn&&(this.tg(),this.og=!1)}destroy(){super.destroy(),this.unsubscribeAll(this.Od),this.Od.unregisterAll(this)}}const On=3;class _n extends bn{constructor(t,i,e,s,n,r){super(t,i,e,s,n,r),this.mediator=t,this.ks=i,this.Xn=n,this.Wm=r,this.eventList=[],this.className=en.Bullet}rg(t){const i=t.map(t=>{if(!Object(T.h)(t.title))return;const i=this.cg(t);return Object(j.d)(i,this.$templateFragment),Object.assign(Object.assign({},t),{activated:!1,element:i,titleElement:i.firstChild,containerElement:i.querySelector(`.${Zs.Container}`)})});this.ug=new hn(i)}dg(t){const i=t.element.querySelector(`.${Zs.Container}`),e=i.querySelectorAll(`.${Zs.Text}`),s=Object(T.a)(e)?e.length:0,n=Object(T.a)(e[0])?e[0].clientHeight:0;Object(j.Q)(i,{"max-height":`${s*n}px`}),t.activated=!0,Object(j.O)(t.titleElement,d.f.PrimaryColor,d.f.SecondaryColor),Object(j.a)(t.element,"active")}fg(t){const i=t.element.querySelector(`.${Zs.Container}`);Object(j.N)(i,"max-height"),Object(j.O)(t.titleElement,d.f.SecondaryColor,d.f.PrimaryColor),Object(j.L)(t.element,"active")}pg(t){const i=this.Wm.labelTemplate(t);return this.ks.createElementByString(i)}cg(t){const i=this.pg(t.title),e=this.Ym(this.Gm.getWordsHtml(t.description)),s=this.Km();return Object(j.d)([i,e],s),s}ig(t){const{label:i,bulletChunkList:e}=t;Object(T.h)(i)&&Object(j.d)(this.Qm(i),this.$templateFragment),Object(u.h)(e)&&this.rg(e.slice(0,On))}onSlideTimeUpdate(t,i){const e=this.ug;e&&!e.currentItem.activated&&(0===e.currentItemIndex?t>=1e3&&(this.dg(e.currentItem),e.goToNextItem()):(i-1e3)/e.listLength*e.currentItemIndex+1e3<t&&(this.fg(e.previousItem),this.dg(e.currentItem),e.goToNextItem()))}}class jn extends yn{get template(){return`<cnx class="${tn.Basic} ${d.f.TitleComponent}"></cnx>`}titleTemplate(t){return`<cnx class="${Zs.Title} ${d.f.AccentColor}">${t}</cnx>`}labelTemplate(t){return`<cnx class="${Zs.Label} ${d.f.PrimaryColor}">\n            <cnx class="${Zs.VerticalLine} ${d.f.AccentColor}"></cnx>\n            ${t}\n        </cnx>`.trim()}textTemplate(t){return`<cnx class="${Zs.Container}">\n                    <cnx class="${Zs.Text}  ${d.f.SecondaryColor}">${t}</cnx>\n                </cnx>\n        `.trim()}}class An extends bn{constructor(t,i,e,s,n,r){super(t,i,e,s,n,r),this.mediator=t,this.ks=i,this.Xn=n,this.Wm=r,this.eventList=[],this.className=en.Cover,this.splitTextSelector=`.${Zs.Text}, .${Zs.Title}`,this.pr=()=>{this.ks.requestAnimationFrameHelper(()=>{if(this.Gm.brakeLongLines(this._d,this.splitTextSelector),this.hm){const t=this.hm.clientHeight/2*-1;Object(j.Q)(this.labelElement,{bottom:`${t}px`,position:"absolute"})}})}}ig(t){let{coverChunk:{title:i,subtitle:e}}=t;const{label:s}=t;if(Object(T.h)(i)&&(i=vn(i,sn),Object(j.d)(this.Qm(this.Gm.getWordsHtml(i)),this.$templateFragment)),Object(T.h)(e)&&(e=vn(e,sn),Object(j.d)(this.Ym(this.Gm.getWordsHtml(e)),this.$templateFragment)),Object(T.h)(s)){if(this.labelElement=this.Xm(s),this.hm){const t=(this.hm.clientHeight-this._d.clientHeight)/2*-1;Object(j.Q)(this.labelElement,{bottom:`${t}px`,position:"absolute"})}Object(j.d)(this.labelElement,this.$templateFragment)}}}class In extends yn{get template(){return`<cnx class="${tn.Cover} ${d.f.TitleComponent}"></cnx>`}titleTemplate(t){return`<cnx class="${Zs.Placeholder}">\n            <cnx class="${Zs.Title} ${d.f.PrimaryColor}">${t}</cnx>\n        </cnx>`}textTemplate(t){return`<cnx class="${Zs.Placeholder}">\n            <cnx class="${Zs.Text} ${d.f.SecondaryColor}">${t}</cnx>\n        </cnx>`}labelTemplate(t){return`<cnx class="${Zs.Placeholder}">\n            <cnx class="${Zs.Label}">${t}</cnx>\n        </cnx>`}}var Tn=e(69),Cn=e.n(Tn);class Pn extends bn{constructor(t,i,e,s,n,r){super(t,i,e,s,n,r),this.mediator=t,this.ks=i,this.Xn=n,this.Wm=r,this.eventList=[],this.className=en.Quote}ig(t){const{quote:i,source:e}=t;if(Object(T.h)(i)){const t=this.Gm.getWordsHtml(`${Cn.a}${Si(i)}${Cn.a}`);Object(j.d)(this.Ym(t),this.$templateFragment)}Object(T.h)(e)&&Object(j.d)(this.Xm(e),this.$templateFragment)}}class Mn extends yn{get template(){return`\n            <cnx class="${tn.Basic} ${d.f.TitleComponent}"></cnx>\n        `.trim()}textTemplate(t){return`\n        <cnx class="${Zs.Text} ${d.f.PrimaryColor}"> ${t}</cnx>`.trim()}labelTemplate(t){return`<cnx class="${Zs.Label}">${t}</cnx>`.trim()}}class En extends bn{constructor(t,i,e,s,n,r){super(t,i,e,s,n,r),this.mediator=t,this.ks=i,this.Xn=n,this.Wm=r,this.eventList=[],this.className=en.Instagram}ig(t){const{instagramMetadata:{createdDate:i,comments:e,likes:s},label:n}=t;this.bg({createdDate:i,comments:e,likes:s}),Object(T.h)(n)&&Object(j.d)(this.Qm(n),this.$templateFragment)}bg(t){const{createdDate:i,comments:e,likes:s}=t,n=this.ks.createElementByString(this.Wm.instagramMetaTemplate(i,s,e));if(this.vg(e)&&this.vg(s)){const t=n.querySelector(`.${Zs.Instagram}-date cnx-span`);Object(j.a)(t,d.h.Show)}Object(j.d)(n,this.$templateFragment)}vg(t){return!Object(T.h)(t)||"0"===t}}var Ln=e(124),Rn=e.n(Ln),Bn=e(125),Dn=e.n(Bn),Fn=e(126),$n=e.n(Fn);class Un extends yn{get template(){return`<cnx class="${tn.Basic} ${d.f.TitleComponent}"></cnx>`.trim()}instagramMetaTemplate(t,i,e){const s=Object(T.h)(t)?`\n            <cnx-span class="cnx-ui-ps-instagram-title-date ${d.m.InheritBodyFontFamily}">\n                ${$n.a}\n                <cnx-span class="cnx-date-label ${d.m.InheritBodyFontFamily}">Posted </cnx-span>${Object(Yt.e)(t)}\n            </cnx-span>`.trim():"",n=Object(T.h)(i)?`\n            <cnx-span class="cnx-ui-ps-instagram-title-likes ${d.m.InheritBodyFontFamily}">\n                ${Rn.a} ${Object(rt.a)(parseInt(i,10))}\n            </cnx-span>`.trim():"",r=Object(T.h)(e)?`\n            <cnx-span class="cnx-ui-ps-instagram-title-comments ${d.m.InheritBodyFontFamily}">\n                ${Dn.a} ${Object(rt.a)(parseInt(e,10))}\n            </cnx-span>`.trim():"";return`\n            <cnx class="cnx-ui-ps-instagram-title-row ${d.m.InheritBodyFontFamily}">\n                ${s}\n                ${n}\n                ${r}\n            </cnx>\n        `.trim()}titleTemplate(t){return`\n            <cnx class="cnx-ui-ps-instagram-title-row ${Zs.Instagram}-title ${d.m.InheritBodyFontFamily}">\n                ${t}\n            </cnx>\n        `.trim()}}class Vn extends wt{constructor(t,i,e,s,n,r,a){super(t,i,e,s,r),this.mediator=t,this.ks=i,this.vr=n,this.Xn=r,this.Wv=a,this.eventList=[],this.mg=new Map,this.gg()}setFooterElement(t){this.mg.forEach(i=>{i.setFooterElement(t)})}onSlideTransitionStart(t){Object(j.S)(this._d),this._d.removeAttribute("title");const i=t.find(({type:t})=>t===As.SlideTitle),e=t.find(({type:t})=>t===As.CtaButton);if(e&&e.metadata&&e.metadata.url){if(this.yg=e.metadata.url,!this.Wv){this._d.href=this.yg;const t=this.ks.isURLSameDomainToTop(this.yg);this._d.target=t?ae.c.Top:ae.c.Blank}this._d.title=i.metadata.label,e.metadata.title=i.metadata.label}if(!Object(T.f)(i)||!Object(T.f)(i.metadata))return;const s=this.mg.get(i.metadata.titleType);s&&(this.wg(s),this.xg.onSlideTransitionStart(i.metadata))}onSlideTransitionEnd(){this.xg&&this.xg.onSlideTransitionEnd()}onSlideTimeUpdate(t,i){this.xg&&this.xg.onSlideTimeUpdate(t,i)}initComponent(){}wg(t){this.xg?(this.xg.destroy(),Object(j.O)(this._d,this.kg,t.className)):Object(j.a)(this._d,t.className),this.kg=t.className,this._d.innerHTML="",this.xg=t,this.xg.initComponent(this._d)}gg(){this.mg.set(Is.Default,new Sn(this,this.ks,this.Od,this.vr,this.Xn,new xn)),this.mg.set(Is.Description,new gn(this,this.ks,this.Od,this.vr,this.Xn,new wn)),this.mg.set(Is.Quote,new Pn(this,this.ks,this.Od,this.vr,this.Xn,new Mn)),this.mg.set(Is.Bullet,new _n(this,this.ks,this.Od,this.vr,this.Xn,new jn)),this.mg.set(Is.Cover,new An(this,this.ks,this.Od,this.vr,this.Xn,new In)),this.mg.set(Is.Instagram,new En(this,this.ks,this.Od,this.vr,this.Xn,new Un)),this.mg.forEach(t=>{t.eventList.forEach(i=>{this.subscribe(i,t,()=>{const t={payload:null};i===Ye.CallToAction&&(t.payload=this.yg),this.mediator.publish(this,i,t)})})})}destroy(){super.destroy(),this.xg&&this.xg.destroy()}}var Nn={[mt[mt.SkipAd]]:{template:Qi(mt.SkipAd,"Skip Ad",!1),tooltip:"Skip Ad",isHoverable:!1}};class Hn{constructor(t){this.Sg=t}get template(){return`\n            <cnx class="${Xe.Main}">\n                ${this.Og()}\n                <cnx class="${Xe.TitlesContainer}">\n                    [[${mt.TopStoryTitle}]]\n                    [[${mt.TopSlideTitle}]]\n                </cnx>\n            </cnx>\n        `.trim()}Og(){return this.Sg?`[[${mt.TopLogo}]]`:""}}class qn{get template(){return`<a class="${Zs.Wrapper}"></a>`}}const zn=.8,Wn=.8;class Gn extends St{constructor(t,i,e,s,n,r){super(t,i,e,s,n),this.mediator=t,this.Xn=n,this.eventList=[...this.eventList,_[_.LogoClicked]],this.hideComponent(!1),this._g=this._d.querySelector(`.${Xe.Logo}`),this._g.src=`${r}`,this._g.alt="",this._g.onload=()=>{this.jg()}}show(t){this.showComponent(t.useTransition)}hide(t){this.hideComponent(t.useTransition)}update(t){this.showComponent(t.useTransition)}triggerLogoAnimation(){Object(j.a)(this._d,Xe.LogoAnimation)}onClickHandler(){this.mediator.publish(this,_[_.LogoClicked])}jg(){this._g.naturalHeight>this._g.naturalWidth?this._g.naturalWidth>this._g.parentElement.clientWidth&&this._g.naturalWidth/this._g.naturalHeight>=zn?Object(j.a)(this._g,Xe.LogoLandscape):Object(j.a)(this._g,Xe.LogoPortrait):this._g.naturalHeight>this._g.parentElement.clientHeight&&this._g.naturalHeight/this._g.naturalWidth>=Wn?Object(j.a)(this._g,Xe.LogoPortrait):Object(j.a)(this._g,Xe.LogoLandscape)}}class Jn{get template(){return`\n            <cnx class="${Xe.LogoContainer}">\n                <img class="${Xe.Logo}" />\n            </cnx>\n        `.trim()}}class Qn{get template(){return`\n            <cnx class="${Xe.TopSlideTitle} ${d.m.InheritTitleFontFamily}">\n                <cnx class="${Xe.TextPlaceholder}">\n                    <cnx class="${Xe.Text} ${d.f.SecondaryColor}">\n                        <cnx class="${Xe.TextOuterContainer}">\n                            <cnx class="${Xe.TextInnerContainer}"></cnx>\n                        </cnx>\n                    </cnx>\n                </cnx>\n            </cnx>\n        `.trim()}}class Xn{get template(){return`\n            <cnx class="${Xe.TopStoryTitle} ${d.m.InheritTitleFontFamily}">\n                <cnx class="${Xe.TextPlaceholder}">\n                    <cnx class="${Xe.Text} ${d.f.SecondaryColor}">\n                        <cnx class="${Xe.TextOuterContainer}">\n                            <cnx class="${Xe.TextInnerContainer}"></cnx>\n                        </cnx>\n                    </cnx>\n                </cnx>\n            </cnx>\n        `.trim()}}const Yn=600;class Kn extends wt{constructor(t,i,e,s,n){super(t,i,e,s,n),this.mediator=t,this.eventList=[],this.Ag=this._d.querySelector(`.${Xe.TextInnerContainer}`)}show(t){if(!this.Ag)return;const{label:i,useTransition:e}=t;Object(T.h)(i)&&i!==this.ag&&(clearTimeout(this.Ig),this.ag=i,this.Tg(i),this.Zm(e))}initComponent(){}hide(t){const{useTransition:i}=t;clearTimeout(this.Ig),this.tg(i),this.ag=null}update(t){if(!this.Ag)return;const{label:i,useTransition:e}=t;Object(T.h)(i)&&i!==this.ag&&(clearTimeout(this.Ig),this.tg(e),this.ag=i,this.Ig=setTimeout(()=>{this.Tg(i),this.Zm(e)},Yn))}Tg(t){this.Ag.innerHTML=t}Zm(t=!1){if(t){if(Object(j.u)(this._d,Xe.SlideIn))return;this.Cg(),Object(j.L)(this._d,d.h.Hide,d.h.Active),Object(j.i)(this._d),Object(j.O)(this._d,Xe.SlideOut,Xe.SlideIn)}else Object(j.O)(this._d,d.h.Hide,d.h.Active),Object(j.L)(this._d,Xe.SlideIn,Xe.SlideOut)}tg(t=!1){t?(Object(j.L)(this._d,d.h.Hide,d.h.Active),Object(j.O)(this._d,Xe.SlideIn,Xe.SlideOut)):(Object(j.O)(this._d,d.h.Active,d.h.Hide),Object(j.L)(this._d,Xe.SlideIn,Xe.SlideOut))}Cg(){const t=[Xe.SlideIn,Xe.SlideOut];Object(j.L)(this.Ag,...t),Object(j.i)(this.Ag)}}class Zn extends wt{constructor(){super(...arguments),this.eventList=[]}initComponent(){}onSlideTimeUpdate(){}onSlideTransitionEnd(){}onSlideTransitionStart(t){const i=this.Pg(t);i&&this.Mg(i.metadata.label)}Pg(t){return t.find(({type:t,metadata:i})=>t===As.TextLabel&&Object(T.f)(i))}Mg(t){Object(T.h)(t)&&(this._d.innerText=t)}}var tr=e(127),ir=e.n(tr);class er extends de{constructor(t,i,e,s,n){super(t,i,s,n,Nn),this.ks=t,this.Od=i,this.Eo=e,this._d=s,this.Gn=n,this.pb={[mt.VolumeButton]:t=>new fe(t,this.ks,this.Od,Ms.a,ce.Mute,this.Gn.isMobile),[mt.PlayspaceProgressBar]:t=>new ps(t,this.ks,this.Od,vs.a,this.Gn.isMobile),[mt.PlayspaceSettingsMenu]:t=>new js(t,this.ks,this.Od,Cs.a,_[_.SettingsMenu],mt.PlayspaceSettingsMenu,this._d,this.Gn.isMobile),[mt.CtaButton]:t=>new Rs(t,this.ks,this.Od,this.Eo,new Ns,this.Gn.isMobile,this.Gn.disableClickUrl),[mt.ClickToPlayButton]:t=>new Hs(t,this.ks,this.Od,Ws.a,this.Gn.isMobile),[mt.TopTitle]:t=>new Ks(t,this.ks,new Hn(this.Gn.logoUrl).template,this),[mt.TopLogo]:t=>new Gn(t,this.ks,this.Od,(new Jn).template,this.Gn.isMobile,this.Gn.logoUrl),[mt.TopSlideTitle]:t=>new Kn(t,this.ks,this.Od,(new Qn).template,this.Gn.isMobile),[mt.TopStoryTitle]:t=>new Kn(t,this.ks,this.Od,(new Xn).template,this.Gn.isMobile),[mt.SlideTitle]:t=>new Vn(t,this.ks,this.Od,(new qn).template,this.Eo,this.Gn.isMobile,this.Gn.disableClickUrl),[mt.ElapsedTimeLabel]:t=>new Kt(t,this.ks,this.Od,ti.a),[mt.TotalDurationLabel]:t=>new Kt(t,this.ks,this.Od,ti.a),[mt.VolumeControls]:t=>new be(t,this.ks,ve,this),[mt.ProgressBar]:t=>new si(t,this.ks,this.Od,ri.a,this.Gn.isMobile),[mt.TextLabel]:t=>new Zn(t,this.ks,this.Od,ir.a)},this.bb=t=>i=>{const e=this.pb[t];if(e)return e(i)}}createComponent(t,i){return this.bb(t)(i)||super.createComponent(t,i)}}var sr,nr=e(29);!function(t){t.AppNexus="appnexus",t.DistrictM="districtm",t.IndexExchange="ix",t.Lkqd="lkqd",t.OneVideo="oneVideo",t.OpenX="openx",t.Pubmatic="pubmatic",t.RhythmOne="rhythmone",t.Rubicon="rubicon",t.SpotX="spotx",t.Telaria="telaria",t.MediaNet="medianet",t.Adman="adman",t.IronSource="ironsource",t.Undertone="undertone",t.SynacorMedia="synacormedia",t.AmxRTB="amx",t.Smaato="smaato"}(sr||(sr={}));const rr={[sr.Lkqd]:nr.c.Lkqd,[sr.RhythmOne]:nr.c.RhythmOne,[sr.Telaria]:nr.c.Telaria,[sr.IronSource]:nr.c.IronSource,[sr.Undertone]:nr.c.Undertone,[sr.SynacorMedia]:nr.c.SynacorMedia},ar=[sr.AppNexus,sr.DistrictM,sr.IndexExchange,sr.OneVideo,sr.OpenX,sr.Pubmatic,sr.RhythmOne,sr.Rubicon,sr.SpotX,sr.Telaria,sr.MediaNet,sr.Adman,sr.IronSource,sr.Undertone,sr.AmxRTB,sr.Smaato],hr=[sr.AppNexus,sr.DistrictM,sr.IndexExchange,sr.OneVideo,sr.OpenX,sr.Pubmatic,sr.RhythmOne,sr.Rubicon,sr.SpotX,sr.Telaria,sr.MediaNet,sr.Adman,sr.AmxRTB,sr.Smaato],or=[sr.OneVideo,sr.IndexExchange,sr.Rubicon,sr.Pubmatic,sr.SpotX,sr.AppNexus,sr.DistrictM,sr.OpenX,sr.MediaNet,sr.Adman,sr.IronSource,sr.Undertone,sr.SynacorMedia,sr.AmxRTB,sr.Smaato],cr="https://prebid.adnxs.com/pbc/v1/cache",lr=180,ur="//cds.connatix.com/p/plugins/prebid4.36.0.js",dr=["video/mp4","video/webm","application/javascript","video/ogg","video/mpeg"],fr={VAST_1:1,VAST_2:2,VAST_3:3,VAST_1_WRAPPER:4,VAST_2_WRAPPER:5,VAST_3_WRAPPER:6},pr=1,br={VPAID_1:1,VPAID_2:2};class vr{constructor(){this.Eg=Date.now(),this.Rg={advertiser:{}}}addPrebid(t){Object(T.a)(this.Rg.advertiser[t])||this.Bg(t),this.Rg.advertiser[t].prebidData.push({timestamp:Date.now()})}addBid(t,i){Object(T.a)(this.Rg.advertiser[t])||this.Bg(t),this.Rg.advertiser[t].bidsFloorPriceList.push({timestamp:Date.now(),floorPrice:i})}addImpression(t,i){Object(T.a)(this.Rg.advertiser[t])||this.Bg(t),this.Rg.advertiser[t].impressionRevenueList.push({timestamp:Date.now(),obfuscatedPrice:i})}shouldRequestLineItem(t){const i=Date.now();return!(this.Dg(i,3)&&this.Fg(t,i,5)<-.5&&this.$g(t,i,3)>=11.5&&this.Ug(t,i,10,.1)<.35)}Dg(t,i){return t-this.Eg>=i*B.e}Fg(t,i,e){const s=this.Rg.advertiser[t];if(!Object(T.a)(s))return-1;const n=this.Vg(s.impressionRevenueList,i,e).map(t=>t.obfuscatedPrice);let r=0;return Object(u.h)(n)&&(r=n.reduce((t,i)=>t+this.Ng(i))),this.Hg(r)}$g(t,i,e){const s=this.Rg.advertiser[t];if(!Object(T.a)(s))return-1;const n=this.Vg(s.prebidData,i,e).length;return this.Hg(n)}Ug(t,i,e,s){const n=this.Rg.advertiser[t];if(!Object(T.a)(n))return-1;const r=this.Vg(n.impressionRevenueList,i,e).map(t=>t.floorPrice),a=this.qg(r,s);return this.Hg(a)}Vg(t,i,e){const s=i-B.f,n=i-e*B.e,r=[];for(let i=t.length-1;i>=0&&t[i].timestamp>=n;i--)t[i].timestamp<=s&&r.push(t[i]);return r}Hg(t){return 0===t?-1:t}Bg(t){this.Rg.advertiser[t]={prebidData:[],bidsFloorPriceList:[],impressionRevenueList:[]}}Ng(t){return 2*(t+41)}qg(t,i){if(0===t.length)return 0;if(i<=0)return t[0];if(i>=1)return t[t.length-1];const e=((t=t.sort((t,i)=>t-i)).length-1)*i,s=Math.floor(e),n=s+1,r=e%1;return n>=t.length?t[s]:t[s]*(1-r)+t[n]*r}}class mr{constructor(){this.zg=new Set}addPlatformCappedLineItemIdList(t){t.forEach(t=>{this.zg.add(t)})}isLineItemPlatformCapped(t){return this.zg.has(t)}}
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var gr=function(t,i){return(gr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)i.hasOwnProperty(e)&&(t[e]=i[e])})(t,i)};function yr(t,i){function e(){this.constructor=t}gr(t,i),t.prototype=null===i?Object.create(i):(e.prototype=i.prototype,new e)}function wr(t){return"function"==typeof t}var xr=!1,kr={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){t&&(new Error).stack;xr=t},get useDeprecatedSynchronousErrorHandling(){return xr}};function Sr(t){setTimeout(function(){throw t},0)}var Or={closed:!0,next:function(t){},error:function(t){if(kr.useDeprecatedSynchronousErrorHandling)throw t;Sr(t)},complete:function(){}},_r=function(){return Array.isArray||function(t){return t&&"number"==typeof t.length}}();function jr(t){return null!==t&&"object"==typeof t}var Ar=function(){function t(t){return Error.call(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map(function(t,i){return i+1+") "+t.toString()}).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t}(),Ir=function(){function t(t){this.closed=!1,this.Wg=null,this.Gg=null,t&&(this.Jg=!0,this.ha=t)}return t.prototype.unsubscribe=function(){var i;if(!this.closed){var e=this.Wg,s=this.Jg,n=this.ha,r=this.Gg;if(this.closed=!0,this.Wg=null,this.Gg=null,e instanceof t)e.remove(this);else if(null!==e)for(var a=0;a<e.length;++a){e[a].remove(this)}if(wr(n)){s&&(this.ha=void 0);try{n.call(this)}catch(t){i=t instanceof Ar?Tr(t.errors):[t]}}if(_r(r)){a=-1;for(var h=r.length;++a<h;){var o=r[a];if(jr(o))try{o.unsubscribe()}catch(t){i=i||[],t instanceof Ar?i=i.concat(Tr(t.errors)):i.push(t)}}}if(i)throw new Ar(i)}},t.prototype.add=function(i){var e=i;if(!i)return t.EMPTY;switch(typeof i){case"function":e=new t(i);case"object":if(e===this||e.closed||"function"!=typeof e.unsubscribe)return e;if(this.closed)return e.unsubscribe(),e;if(!(e instanceof t)){var s=e;(e=new t).Gg=[s]}break;default:throw new Error("unrecognized teardown "+i+" added to Subscription.")}var n=e.Wg;if(null===n)e.Wg=this;else if(n instanceof t){if(n===this)return e;e.Wg=[n,this]}else{if(-1!==n.indexOf(this))return e;n.push(this)}var r=this.Gg;return null===r?this.Gg=[e]:r.push(e),e},t.prototype.remove=function(t){var i=this.Gg;if(i){var e=i.indexOf(t);-1!==e&&i.splice(e,1)}},t.EMPTY=function(t){return t.closed=!0,t}(new t),t}();function Tr(t){return t.reduce(function(t,i){return t.concat(i instanceof Ar?i.errors:i)},[])}var Cr=function(){return"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()}(),Pr=function(t){function i(e,s,n){var r=t.call(this)||this;switch(r.syncErrorValue=null,r.syncErrorThrown=!1,r.syncErrorThrowable=!1,r.isStopped=!1,arguments.length){case 0:r.destination=Or;break;case 1:if(!e){r.destination=Or;break}if("object"==typeof e){e instanceof i?(r.syncErrorThrowable=e.syncErrorThrowable,r.destination=e,e.add(r)):(r.syncErrorThrowable=!0,r.destination=new Mr(r,e));break}default:r.syncErrorThrowable=!0,r.destination=new Mr(r,e,s,n)}return r}return yr(i,t),i.prototype[Cr]=function(){return this},i.create=function(t,e,s){var n=new i(t,e,s);return n.syncErrorThrowable=!1,n},i.prototype.next=function(t){this.isStopped||this.Qg(t)},i.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this.Xg(t))},i.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this.Yg())},i.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this))},i.prototype.Qg=function(t){this.destination.next(t)},i.prototype.Xg=function(t){this.destination.error(t),this.unsubscribe()},i.prototype.Yg=function(){this.destination.complete(),this.unsubscribe()},i.prototype.Kg=function(){var t=this.Wg;return this.Wg=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this.Wg=t,this},i}(Ir),Mr=function(t){function i(i,e,s,n){var r,a=t.call(this)||this;a.Zg=i;var h=a;return wr(e)?r=e:e&&(r=e.next,s=e.error,n=e.complete,e!==Or&&(wr((h=Object.create(e)).unsubscribe)&&a.add(h.unsubscribe.bind(h)),h.unsubscribe=a.unsubscribe.bind(a))),a.ty=h,a.Qg=r,a.Xg=s,a.Yg=n,a}return yr(i,t),i.prototype.next=function(t){if(!this.isStopped&&this.Qg){var i=this.Zg;kr.useDeprecatedSynchronousErrorHandling&&i.syncErrorThrowable?this.iy(i,this.Qg,t)&&this.unsubscribe():this.ey(this.Qg,t)}},i.prototype.error=function(t){if(!this.isStopped){var i=this.Zg,e=kr.useDeprecatedSynchronousErrorHandling;if(this.Xg)e&&i.syncErrorThrowable?(this.iy(i,this.Xg,t),this.unsubscribe()):(this.ey(this.Xg,t),this.unsubscribe());else if(i.syncErrorThrowable)e?(i.syncErrorValue=t,i.syncErrorThrown=!0):Sr(t),this.unsubscribe();else{if(this.unsubscribe(),e)throw t;Sr(t)}}},i.prototype.complete=function(){var t=this;if(!this.isStopped){var i=this.Zg;if(this.Yg){var e=function(){return t.Yg.call(t.ty)};kr.useDeprecatedSynchronousErrorHandling&&i.syncErrorThrowable?(this.iy(i,e),this.unsubscribe()):(this.ey(e),this.unsubscribe())}else this.unsubscribe()}},i.prototype.ey=function(t,i){try{t.call(this.ty,i)}catch(t){if(this.unsubscribe(),kr.useDeprecatedSynchronousErrorHandling)throw t;Sr(t)}},i.prototype.iy=function(t,i,e){if(!kr.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{i.call(this.ty,e)}catch(i){return kr.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=i,t.syncErrorThrown=!0,!0):(Sr(i),!0)}return!1},i.prototype.ha=function(){var t=this.Zg;this.ty=null,this.Zg=null,t.unsubscribe()},i}(Pr);var Er=function(){return"function"==typeof Symbol&&Symbol.observable||"@@observable"}();function Lr(t){return t}function Rr(t){return 0===t.length?Lr:1===t.length?t[0]:function(i){return t.reduce(function(t,i){return i(t)},i)}}var Br=function(){function t(t){this.sy=!1,t&&(this.ny=t)}return t.prototype.lift=function(i){var e=new t;return e.source=this,e.operator=i,e},t.prototype.subscribe=function(t,i,e){var s=this.operator,n=function(t,i,e){if(t){if(t instanceof Pr)return t;if(t[Cr])return t[Cr]()}return t||i||e?new Pr(t,i,e):new Pr(Or)}(t,i,e);if(s?n.add(s.call(n,this.source)):n.add(this.source||kr.useDeprecatedSynchronousErrorHandling&&!n.syncErrorThrowable?this.ny(n):this.ay(n)),kr.useDeprecatedSynchronousErrorHandling&&n.syncErrorThrowable&&(n.syncErrorThrowable=!1,n.syncErrorThrown))throw n.syncErrorValue;return n},t.prototype.ay=function(t){try{return this.ny(t)}catch(i){kr.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=i),!function(t){for(;t;){var i=t,e=i.closed,s=i.destination,n=i.isStopped;if(e||n)return!1;t=s&&s instanceof Pr?s:null}return!0}(t)?console.warn(i):t.error(i)}},t.prototype.forEach=function(t,i){var e=this;return new(i=Dr(i))(function(i,s){var n;n=e.subscribe(function(i){try{t(i)}catch(t){s(t),n&&n.unsubscribe()}},s,i)})},t.prototype.ny=function(t){var i=this.source;return i&&i.subscribe(t)},t.prototype[Er]=function(){return this},t.prototype.pipe=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];return 0===t.length?this:Rr(t)(this)},t.prototype.toPromise=function(t){var i=this;return new(t=Dr(t))(function(t,e){var s;i.subscribe(function(t){return s=t},function(t){return e(t)},function(){return t(s)})})},t.create=function(i){return new t(i)},t}();function Dr(t){if(t||(t=kr.Promise||Promise),!t)throw new Error("no Promise impl found");return t}var Fr=function(){function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t}(),$r=function(t){function i(i,e){var s=t.call(this)||this;return s.subject=i,s.subscriber=e,s.closed=!1,s}return yr(i,t),i.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var t=this.subject,i=t.observers;if(this.subject=null,i&&0!==i.length&&!t.isStopped&&!t.closed){var e=i.indexOf(this.subscriber);-1!==e&&i.splice(e,1)}}},i}(Ir),Ur=function(t){function i(i){var e=t.call(this,i)||this;return e.destination=i,e}return yr(i,t),i}(Pr),Vr=function(t){function i(){var i=t.call(this)||this;return i.observers=[],i.closed=!1,i.isStopped=!1,i.hasError=!1,i.thrownError=null,i}return yr(i,t),i.prototype[Cr]=function(){return new Ur(this)},i.prototype.lift=function(t){var i=new Nr(this,this);return i.operator=t,i},i.prototype.next=function(t){if(this.closed)throw new Fr;if(!this.isStopped)for(var i=this.observers,e=i.length,s=i.slice(),n=0;n<e;n++)s[n].next(t)},i.prototype.error=function(t){if(this.closed)throw new Fr;this.hasError=!0,this.thrownError=t,this.isStopped=!0;for(var i=this.observers,e=i.length,s=i.slice(),n=0;n<e;n++)s[n].error(t);this.observers.length=0},i.prototype.complete=function(){if(this.closed)throw new Fr;this.isStopped=!0;for(var t=this.observers,i=t.length,e=t.slice(),s=0;s<i;s++)e[s].complete();this.observers.length=0},i.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},i.prototype.ay=function(i){if(this.closed)throw new Fr;return t.prototype.ay.call(this,i)},i.prototype.ny=function(t){if(this.closed)throw new Fr;return this.hasError?(t.error(this.thrownError),Ir.EMPTY):this.isStopped?(t.complete(),Ir.EMPTY):(this.observers.push(t),new $r(this,t))},i.prototype.asObservable=function(){var t=new Br;return t.source=this,t},i.create=function(t,i){return new Nr(t,i)},i}(Br),Nr=function(t){function i(i,e){var s=t.call(this)||this;return s.destination=i,s.source=e,s}return yr(i,t),i.prototype.next=function(t){var i=this.destination;i&&i.next&&i.next(t)},i.prototype.error=function(t){var i=this.destination;i&&i.error&&this.destination.error(t)},i.prototype.complete=function(){var t=this.destination;t&&t.complete&&this.destination.complete()},i.prototype.ny=function(t){return this.source?this.source.subscribe(t):Ir.EMPTY},i}(Vr);class Hr{constructor(){this.hy=new Vr,this.oy=new Vr,this.ly=new Vr,this.uy=new Vr,this.py=new Vr,this.by=new Vr,this.callingLineItems=[],this.bids=[],this.bidsLoading=[],this.bidsReady=[],this.bidStarted=null}get onBid(){return this.hy.asObservable()}get onBidConsumed(){return this.oy.asObservable()}get onBidLoadingConsumed(){return this.ly.asObservable()}get onBidReady(){return this.uy.asObservable()}get onBidStarted(){return this.py.asObservable()}get onBidReadyConsumed(){return this.by.asObservable()}addBid(t){this.bids.push(t),this.hy.next(t)}moveBidToLoading(t){this.bidsLoading.push(t),this.consumeBid(t)}moveBidToReady(t){this.bidsReady.push(t),this.consumeBidLoading(t),this.uy.next(t)}moveBidToStarted(t){this.bidStarted=t,this.consumeBidReady(t),this.py.next(t)}consumeBid(t){Object(u.k)(this.bids,t),this.oy.next(t)}consumeBidLoading(t){Object(u.k)(this.bidsLoading,t),this.ly.next(t)}consumeBidReady(t){Object(u.k)(this.bidsReady,t)}consumeBidStarted(t){this.bidStarted=null,this.by.next(t)}getAllBids(){const t=this.bidStarted?[this.bidStarted]:[];return[...this.bids,...this.bidsReady,...t]}}class qr{constructor(){this.creativeView=[],this.start=[],this.firstQuartile=[],this.midpoint=[],this.thirdQuartile=[],this.impression=[],this.complete=[],this.mute=[],this.unmute=[],this.pause=[],this.rewind=[],this.resume=[],this.fullscreen=[],this.exitFullscreen=[],this.expand=[],this.collapse=[],this.close=[],this.closeLinear=[],this.acceptInvitationLinear=[],this.acceptInvitation=[],this.skip=[],this.progress=[],this.playerExpand=[],this.playerCollapse=[],this.adExpand=[],this.adCollapse=[],this.fullScreen=[],this.canPlayThrough=[],this.stalled=[],this.waiting=[],this.otherAdInteraction=[]}}class zr{constructor(t){this.clickTrackings=[],this.customClicks=[],this.errorUrls=[],this.impressions=[],this.trackingEvents=new qr,t.inLine?this.vy(t.inLine):this.my(t.wrapper)}vy(t){this.gy(t.errors),this.yy(t.impressions),this.wy(t.creatives)}my(t){this.gy(t.errors),this.yy(t.impressions),this.wy(t.creatives)}xy(t){this.ky(t.trackingEvents),this.Sy(t.videoClicks)}Sy(t){t&&(this.Oy(t.clickTrackings),this._y(t.customClicks))}Oy(t){this.clickTrackings.push(...t)}_y(t){this.customClicks.push(...t)}ky(t){t.forEach(t=>{try{this.trackingEvents[t.name].push(t.uri)}catch(i){Object(n.a)({message:"AdManager_VastResponse_tracker",exception:`${t.name}`,callStack:i.stack,level:a.ProtoLoggingLevelEnum.INFO})}})}wy(t){t.forEach(t=>{t.linear&&this.xy(t.linear)})}gy(t){this.errorUrls.push(...t)}yy(t){this.impressions.push(...t)}}const Wr={[a.ProtoTrackerTriggerType.Impression]:"adImpression",[a.ProtoTrackerTriggerType.Complete25Pc]:"adQuartileFirst",[a.ProtoTrackerTriggerType.Complete50Pc]:"adQuartileSecond",[a.ProtoTrackerTriggerType.Complete75Pc]:"adQuartileThird",[a.ProtoTrackerTriggerType.ViewCompletion]:"adQuartileFourth",[a.ProtoTrackerTriggerType.VideoClick]:"adClick",[a.ProtoTrackerTriggerType.Pause]:"adPause",[a.ProtoTrackerTriggerType.Resume]:"adResume",[a.ProtoTrackerTriggerType.Mute]:"adMute",[a.ProtoTrackerTriggerType.Unmute]:"adUnmute"};class Gr{constructor(){this.adError=[],this.adWin=[],this.adImpression=[],this.adStarted=[],this.adVideoStart=[],this.adQuartileFirst=[],this.adQuartileSecond=[],this.adQuartileThird=[],this.adQuartileFourth=[],this.adClick=[],this.adPause=[],this.adResume=[],this.adSkip=[],this.adMute=[],this.adUnmute=[],this.adUserClose=[],this.adUserAcceptInvitation=[],this.adUserMinimize=[]}static track(t,i,e,s){if(!Array.isArray(t))return;const{width:n,height:r}=s.adContainerState.get(e.adType),{adBreakType:h}=s.adBreakState,{mediaDescription:o,mediaDuration:c,mediaId:l,mediaUrl:u,mediaTitle:d}=s.media;t.forEach(t=>{if(t.url)try{const s=i.replace(t.url,e.vendorId,{adMacros:{adWidth:n,adHeight:r,adPostion:h},mediaMacros:{mediaDescription:o,mediaDuration:c,mediaId:l,mediaUrl:u,mediaTitle:d}});switch(t.type){case a.ProtoTrackerType.Image:Object(at.m)([s],window);break;case a.ProtoTrackerType.Javascript:Object(j.A)({src:s},window.document.head,window)}}catch(t){}})}}function Jr(t,i){t.forEach(t=>(function(t,i){(function(t,i){return i[Wr[t]]})(t.trigger,i).push({type:t.type,url:t.url})})(t,i))}function Qr(t){return{type:a.ProtoTrackerType.Image,url:t}}function Xr(t){return t.map(t=>Qr(t))}var Yr;!function(t){t[t.HandlingSdkUrl=0]="HandlingSdkUrl",t[t.NetworkRequestUrl=1]="NetworkRequestUrl",t[t.XmlInvalidString=2]="XmlInvalidString",t[t.XmlParseGeneral=3]="XmlParseGeneral",t[t.XmlInvalidTree=4]="XmlInvalidTree",t[t.XmlInvalidAd=5]="XmlInvalidAd",t[t.XmlAdaptorWrapperLimit=6]="XmlAdaptorWrapperLimit",t[t.HTMLUnknownMimeType=7]="HTMLUnknownMimeType",t[t.ImaAdsManagerInit=8]="ImaAdsManagerInit",t[t.ImaVastEmptyResponse=9]="ImaVastEmptyResponse",t[t.ImaRequestException=10]="ImaRequestException",t[t.ImaTimeout=11]="ImaTimeout",t[t.ImaInvalidResponse=12]="ImaInvalidResponse"}(Yr||(Yr={}));const Kr={[Yr.HandlingSdkUrl]:a.ConnatixNoBidReasonEnum.CsRequestException,[Yr.NetworkRequestUrl]:a.ConnatixNoBidReasonEnum.CsRequestException,[Yr.XmlInvalidString]:a.ConnatixNoBidReasonEnum.CsEmptyResponse,[Yr.XmlParseGeneral]:a.ConnatixNoBidReasonEnum.CsInvalidResponse,[Yr.XmlInvalidTree]:a.ConnatixNoBidReasonEnum.CsInvalidResponse,[Yr.XmlInvalidAd]:a.ConnatixNoBidReasonEnum.CsInvalidResponse,[Yr.XmlAdaptorWrapperLimit]:a.ConnatixNoBidReasonEnum.CsInvalidResponse,[Yr.HTMLUnknownMimeType]:a.ConnatixNoBidReasonEnum.CsInvalidResponse,[Yr.ImaAdsManagerInit]:a.ConnatixNoBidReasonEnum.CsRequestException,[Yr.ImaVastEmptyResponse]:a.ConnatixNoBidReasonEnum.CsInvalidResponse,[Yr.ImaRequestException]:a.ConnatixNoBidReasonEnum.CsRequestException,[Yr.ImaTimeout]:a.ConnatixNoBidReasonEnum.Timeout,[Yr.ImaInvalidResponse]:a.ConnatixNoBidReasonEnum.CsInvalidResponse};var Zr,ta,ia=e(11);!function(t){t.VOLUME_DETECTED="volume_detected",t.MALWARE_DETECTED="malware_detected",t.BADURI_DETECTED="baduri_detected"}(Zr||(Zr={})),function(t){t[t.None=0]="None",t[t.Mute=1]="Mute",t[t.ScrollHijack=2]="ScrollHijack",t[t.MemoryLeak=4]="MemoryLeak",t[t.Malware=8]="Malware",t[t.All=15]="All"}(ta||(ta={}));const ea="2.0";class sa{constructor(){this.jy=new Vr}get onVpaidEvent(){return this.jy.asObservable()}handshakeVersion(t=ea){return"2.0"}}function na(t=[]){t.forEach(t=>t.unsubscribe())}var ra,aa;!function(t){t[t.Win=0]="Win",t[t.AdLoaded=1]="AdLoaded",t[t.AdStarted=2]="AdStarted",t[t.AdImpression=3]="AdImpression"}(ra||(ra={}));class ha{constructor(t){this.Ay=t,this.Iy=new Map,Object(T.a)(this.Ay.settings.bidLifecycle)||(this.Ay.settings.bidLifecycle={})}onTrackingLifecycleEvent(t){switch(this.Iy.set(t,Date.now()),t){case ra.AdLoaded:this.Ty();break;case ra.AdImpression:this.Cy()}}Ty(){this.Ay.settings.bidLifecycle.winToAdLoadedTime=this.Py}Cy(){this.Ay.settings.bidLifecycle.startAdToImpressionTime=this.My}get My(){return this.Iy.get(ra.AdImpression)&&this.Iy.get(ra.AdStarted)?this.Iy.get(ra.AdImpression)-this.Iy.get(ra.AdStarted):0}get Py(){return this.Iy.get(ra.AdLoaded)&&this.Iy.get(ra.Win)?this.Iy.get(ra.AdLoaded)-this.Iy.get(ra.Win):0}}!function(t){t.IMPRESSION_TIMEOUT="IMPRESSION_TIMEOUT",t.VIEWABLE_IMPRESSION_TIMEOUT="VIEWABLE_IMPRESSION_TIMEOUT",t.SKIP_AD_TIMEOUT="SKIP_AD_TIMEOUT",t.STOP_AD_TIMEOUT="STOP_AD_TIMEOUT",t.AD_LOADED_TIMEOUT="AD_LOADED_TIMEOUT"}(aa||(aa={}));const oa=500,ca="cnx-ad-bid-slot-selected",la="Connatix Ad";class ua extends sa{constructor(t){super(),this.settings=t,this.wv=null,this.Ey=null,this.Ly=null,this.Ry=null,this.By=void 0,this.Dy=!1,this.Uo=!1,this.Fy=!1,this.$y=!1,this.Uy=null,this.Gg=[],this.Vy=new Vr,this.Ny=()=>{this.Hy({type:w.b.AdError,payload:{errorMessage:ia.c.Timeout}}),this.qy()},this.zy=()=>{this.Wy(),this.Gy(aa.VIEWABLE_IMPRESSION_TIMEOUT).clearTimeout(),this.settings.viewabilityService.off(this.wv,this.Jy)},this.Jy=t=>{const i=this.Gy(aa.VIEWABLE_IMPRESSION_TIMEOUT);t?i.timeoutHandle.timeoutId||i.setTimeout():i.clearTimeout()},this.Qy=()=>{this.Hy({type:w.b.AdSkipped}),this.qy()},this.Xy=()=>{this.Hy({type:w.b.AdStopped,payload:{shouldTrackPostBid:!0}}),this.qy()},this.Yy=()=>{this.Hy({type:w.b.AdError,payload:{errorMessage:ia.c.TimeoutLoaded}}),this.qy()},this.Gy=t=>{const i=this.Ky[t];return{timeoutHandle:i,setTimeout:()=>{i.timeoutId=setTimeout(()=>{i.callback()},i.timeout)},clearTimeout:()=>{null!==i.timeoutId&&(clearTimeout(i.timeoutId),i.timeoutId=null)}}},this.creativeId=this.settings.externalCreativeId,this.Zy=`cnx-ad-bid-slot-id-${this.settings.requestMetadata.data.cnxBidId}`,this.tw=`cnx-ad-slot-${this.settings.id}`;const{adType:i}=this.settings.adManagerLineItem.protoLineItem;this.Ky={[aa.IMPRESSION_TIMEOUT]:{callback:this.Ny,timeout:25e3,timeoutId:null},[aa.VIEWABLE_IMPRESSION_TIMEOUT]:{callback:this.zy,timeout:i===R.ProtoAdType.Video?N.b:N.a,timeoutId:null},[aa.SKIP_AD_TIMEOUT]:{callback:this.Qy,timeout:500,timeoutId:null},[aa.STOP_AD_TIMEOUT]:{callback:this.Xy,timeout:500,timeoutId:null},[aa.AD_LOADED_TIMEOUT]:{callback:this.Yy,timeout:25e3,timeoutId:null}}}skipAd(){this.Gy(aa.SKIP_AD_TIMEOUT).setTimeout()}stopAd(t){this.Gy(aa.STOP_AD_TIMEOUT).setTimeout()}startAd(){this.$y&&Object(n.a)({message:"AdManager_ABaseBidAdaptor_samebid",exception:"startAd",callStack:`adv:${this.settings.adManagerLineItem.protoLineItem.advertiserLineItemId} bidid: ${this.tw}`,level:a.ProtoLoggingLevelEnum.FATAL}),this.$y=!0,this.Gy(aa.IMPRESSION_TIMEOUT).setTimeout()}initAd(t,i,e,s,r,h,o){this.Fy&&Object(n.a)({message:"AdManager_ABaseBidAdaptor_samebid",exception:"initAd",callStack:`adv:${this.settings.adManagerLineItem.protoLineItem.advertiserLineItemId} bidid: ${this.tw}`,level:a.ProtoLoggingLevelEnum.FATAL}),this.Fy=!0,this.Gy(aa.AD_LOADED_TIMEOUT).setTimeout(),this.iw(o),this.ew=new ha(this),this.ew.onTrackingLifecycleEvent(ra.Win)}setAdVolume(t){this.Ey.volume=t,Object(j.U)(this.Ey,t),t<=0?this.settings.adEnforcer.start(ta.Mute):this.settings.adEnforcer.stop(ta.Mute)}get impressionStarted(){return this.Dy}get creativeId(){return this.By}set creativeId(t){Object(T.h)(this.creativeId)||(this.By=t)}get onAdViewableImpression(){return this.Vy.asObservable()}sw(t){let i;Object(T.d)(t.payload.skipOffset)&&(i=t.payload.skipOffset);const e={type:w.b.AdLoaded,payload:{adLoadedData:{skipOffset:i},adSkipMode:this.settings.adManagerLineItem.protoLineItem.skipMode}};return this.settings.adLoadedPayload=e,e}nw(t){return{type:w.b.AdImpression,payload:{adSkipMode:this.settings.adManagerLineItem.protoLineItem.skipMode,adSourceData:{moatTrackingEnabled:this.settings.adManagerLineItem.protoLineItem.moatTrackingEnabled,creativeId:this.settings.adManagerLineItem.protoLineItem.cnxCreativeId,adId:this.settings.adManagerLineItem.protoLineItem.advertiserLineItemId,length:this.getAdDuration(),adVideoUrl:this.adVideoUrl,name:la},customAdData:{ADVERTISER:this.settings.requestMetadata.data.rtbAdomain,CREATIVE_ID:this.creativeId,CAMPAIGN_ID:this.settings.requestMetadata.data.rtbCampainId}}}}rw(t){return{type:w.b.AdVideoStart,payload:{adSkipMode:this.settings.adManagerLineItem.protoLineItem.skipMode,adSourceData:{moatTrackingEnabled:this.settings.adManagerLineItem.protoLineItem.moatTrackingEnabled,creativeId:this.settings.adManagerLineItem.protoLineItem.cnxCreativeId,adId:this.settings.adManagerLineItem.protoLineItem.advertiserLineItemId,length:this.getAdDuration(),name:la},customAdData:{ADVERTISER:this.settings.requestMetadata.data.rtbAdomain,CREATIVE_ID:this.creativeId,CAMPAIGN_ID:this.settings.requestMetadata.data.rtbCampainId}}}}Hy(t){if(this.aw(t))switch(t.type){case w.b.AdLoaded:this.ew.onTrackingLifecycleEvent(ra.AdLoaded),this.Gy(aa.AD_LOADED_TIMEOUT).clearTimeout(),this.jy.next(this.sw(t));break;case w.b.AdImpression:this.ew.onTrackingLifecycleEvent(ra.AdImpression),this.Gy(aa.IMPRESSION_TIMEOUT).clearTimeout(),this.hw(),Object(j.a)(this.Ly,ca),this.jy.next(this.nw(t)),this.Dy=!0;break;case w.b.AdVideoStart:this.ew.onTrackingLifecycleEvent(ra.AdStarted),this.jy.next(this.rw(t));break;case w.b.AdStopped:case w.b.AdSkipped:case w.b.AdError:this.Uo&&Object(n.a)({message:"AdManager_ABaseBidAdaptor_double_destroy",exception:this.settings.adManagerLineItem.protoLineItem.advertiserLineItemId,level:a.ProtoLoggingLevelEnum.WARNING}),this.jc(),this.jy.next(t);break;default:this.jy.next(t)}else this.Hy({type:w.b.AdError,payload:{errorMessage:ia.c.InvalidVpaidEvent}})}iw(t){this.Ry=this.ow(),this.Ly=this.Ry.slotsContainer,Object(j.a)(this.Ly,this.Zy),this.wv=this.Ry.adSlot,this.wv.id=this.tw,this.Ly.id=this.settings.bidSlotId,this.Ey=this.Ry.videoSlot,this.Ey.volume=t,Object(j.U)(this.Ey,t),this.settings.adEnforcer.registerContainer(this.Ly,this.tw),this.Gg.push(this.settings.adEnforcer.onEnforcerEvent.subscribe(t=>{this.cw(t)})),this.settings.adEnforcer.start(ta.All)}ow(){return this.settings.adSlotContainerRecycler.requestAdSlot(this.settings.adContainer)}jc(){this.Uo=!0,Object(j.L)(this.Ly,ca),Object(j.L)(this.Ly,this.Zy),this.wv.removeAttribute("id"),this.Ly.removeAttribute("id"),na(this.Gg),this.qy(),this.settings.adEnforcer.deregisterContainer(this.Ly),this.settings.viewabilityService.off(this.wv,this.Jy),null!==this.Uy&&clearTimeout(this.Uy),this.lw()}lw(){this.Uy=setTimeout(()=>{this.settings.adSlotContainerRecycler.destroyAdSlot(this.Ry)},oa)}Wy(){const{advertiserLineItemId:t,publisherLineItemId:i}=this.settings.adManagerLineItem.protoLineItem;this.Vy.next({advertiserLineItemId:t,publisherLineItemId:i})}hw(){const t=N.g,i=this.wv;this.settings.viewabilityService.on(i,this.Jy,{threshold:t}),this.Jy(this.settings.viewabilityService.check({threshold:t,element:i}))}qy(){Object.keys(this.Ky).forEach(t=>{this.Gy(t).clearTimeout()})}aw(t){return!(!this.Dy&&(t.type===w.b.AdStopped||t.type===w.b.AdSkipped))}cw(t){if(t.detectedContainer!==this.Ly)return;let i;switch(t.type){case Zr.BADURI_DETECTED:i="AdManager_enforcer_BadUri";break;case Zr.MALWARE_DETECTED:i="AdManager_enforcer_malware",this.Hy({type:w.b.AdError,payload:{errorMessage:ia.c.EnforcementMalware}});break;case Zr.VOLUME_DETECTED:i="AdManager_enforcer_soundBlock",this.Hy({type:w.b.AdError,payload:{errorMessage:ia.c.EnforcementVolume}})}Object(n.a)({message:i,exception:t.message,level:a.ProtoLoggingLevelEnum.WARNING})}uw(t,i,e){var s,r;const h=this.settings.adManagerLineItem.protoLineItem.advertiserLineItemId,o=this.creativeId;Object(n.a)({message:`AdManager_${t}_${i}`,exception:`advertiserLineItemId:${h}_creativeId:${o}_errorMessage:${null===(s=e)||void 0===s?void 0:s.message}`,callStack:null===(r=e)||void 0===r?void 0:r.stack,throttle:5,level:a.ProtoLoggingLevelEnum.WARNING,sendMaxLog:!0})}}var da=e(44);class fa extends sa{constructor(t,i,e,s,n,r,a){super(),this.dw=t,this.tr=i,this.fw=e,this.pw=s,this.vw=n,this.mw=r,this.gw=a,this.yw=new Vr,this.ww=t=>{if(!this.xw(t))return;let i="";try{i=t.getError().getMessage()+"_"+t.getError().getErrorCode()+"_"+t.getError().getVastErrorCode()}catch(t){}this.jy.next({type:w.b.AdError,payload:{errorMessage:ia.c.ImaError+"_"+i}})},this.kw=t=>{const i=this.dw.AdEvent.Type;switch(t.type){case i.CLICK:this.jy.next({type:w.b.AdClickThru,payload:{}});break;case i.LOADED:this.Nr(t);break;case i.IMPRESSION:const e={adsManager:this.vw,adContainer:this.Sw,viewMode:this.Ow(this._w),adTag:this.pw};this.jy.next({type:w.b.AdVideoStart}),this.jy.next({type:w.b.AdImpression,payload:{imaMetadata:e}});break;case i.STARTED:this.jy.next({type:w.b.AdStarted});break;case i.FIRST_QUARTILE:this.jy.next({type:w.b.AdVideoFirstQuartile});break;case i.MIDPOINT:this.jy.next({type:w.b.AdVideoMidpoint});break;case i.THIRD_QUARTILE:this.jy.next({type:w.b.AdVideoThirdQuartile});break;case i.COMPLETE:this.jy.next({type:w.b.AdVideoComplete}),this.jy.next({type:w.b.AdStopped,payload:{shouldTrackPostBid:!0}});break;case i.ALL_ADS_COMPLETED:break;case i.DURATION_CHANGE:this.jy.next({type:w.b.AdDurationChange});break;case i.PAUSED:this.jy.next({type:w.b.AdPaused});break;case i.RESUMED:this.jy.next({type:w.b.AdPlaying});break;case i.LINEAR_CHANGED:this.jy.next({type:w.b.AdLinearChange});break;case i.SKIPPABLE_STATE_CHANGED:this.jy.next({type:w.b.AdSkippableStateChange});break;case i.SKIPPED:this.jy.next({type:w.b.AdSkipped});break;case i.VOLUME_CHANGED:this.jy.next({type:w.b.AdVolumeChange});break;case i.USER_CLOSE:this.jy.next({type:w.b.AdUserClose});break;case i.LOG:this.jy.next({type:w.b.AdLog})}},this.jw()}get onCreativeReceived(){return this.yw.asObservable()}initAd(t,i,e,s,n,r){this.Sw=r.slot,this.Aw=r.videoSlot,this._w=e||w.a.Normal;try{this.vw.setVolume(0),this.vw.init(t,i,this.Ow(this._w))}catch(t){this.jy.next({type:w.b.AdError,payload:{errorMessage:ia.c.ImaManagerInit}})}}startAd(){try{this.vw.start()}catch(t){this.jy.next({type:w.b.AdError,payload:{errorMessage:ia.c.WrapperStartAdError+`_${t.message}`}})}}stopAd(t){this.vw.stop(),this.jy.next({type:w.b.AdStopped,payload:{shouldTrackPostBid:!0}})}resizeAd(t,i,e){this.vw.resize(t,i,this.Ow(e))}pauseAd(){this.vw.pause()}resumeAd(){this.vw.resume(),this.tr===ot.b.Ios&&Object(j.C)(this.Aw)}expandAd(){this.vw.expand()}collapseAd(){this.vw.collapse()}skipAd(){this.vw.skip()}getAdRemainingTime(){return this.vw.getRemainingTime()||0}getAdDuration(){return this.Iw?this.Iw.getDuration():0}getAdVolume(){return this.vw.getVolume()}getAdMediaWidth(){return this.Iw?this.Iw.getVastMediaWidth():0}getAdMediaHeight(){return this.Iw?this.Iw.getVastMediaHeight():0}setAdVolume(t){this.vw.setVolume(t)}getMediaFile(){return this.Iw?this.Iw.getMediaUrl():void 0}jw(){this.fw.addEventListener(this.dw.AdErrorEvent.Type.AD_ERROR,this.ww),this.vw.addEventListener(this.dw.AdErrorEvent.Type.AD_ERROR,this.ww),Object.keys(this.dw.AdEvent.Type).forEach(t=>{this.vw.addEventListener(this.dw.AdEvent.Type[t],this.kw,!1)})}Tw(){this.fw.removeEventListener(this.dw.AdErrorEvent.Type.AD_ERROR,this.ww),this.vw.removeEventListener(this.dw.AdErrorEvent.Type.AD_ERROR,this.ww),Object.keys(this.dw.AdEvent.Type).forEach(t=>{this.vw.removeEventListener(this.dw.AdEvent.Type[t],this.kw,!1)})}Ow(t){return t===w.a.Fullscreen?this.dw.ViewMode.FULLSCREEN:this.dw.ViewMode.NORMAL}xw(t){const i=t.getUserRequestContext();return!i||i.id===this.mw.id}Nr(t){this.Iw=t.getAd(),this.yw.next(this.Iw.getCreativeId());let i=-1,e="";try{i=this.Iw.getSkipTimeOffset();const s=t.getAdData().clickThroughUrl;e=Object(T.h)(s)?s:void 0}catch(t){}Object(da.b)(this.gw,e).then(t=>{t?this.jy.next({type:w.b.AdError,payload:{errorMessage:ia.c.DomainBlocked}}):this.jy.next({type:w.b.AdLoaded,payload:{skipOffset:i}})})}destroy(){try{this.Tw(),setTimeout(()=>{this.vw.destroy()})}catch(t){}}}const pa={ImaObjectNotFound:ia.c.ImaObjectNotFound,ImaScriptFailure:ia.c.ImaScriptFailure},ba="//imasdk.googleapis.com/js/sdkloader/ima3.js";class va{static preloadImaSdk(t){Object(j.I)(ba,t)}static fetchImaSdk(t,i){return new Promise((e,s)=>{const r=va.Cw(t);if(r)return void e(r);const h=i&&1===Object(at.l)([95,5]);Object(j.A)({src:ba},t.document.head,t,()=>{const i=va.Cw(t);i?e(i):(h&&Object(n.a)({message:"AdManager_ImaIntegrator_no_image_object_found_after_loading_script",level:a.ProtoLoggingLevelEnum.FATAL,throttle:2,sendMaxLog:!1}),s(pa.ImaObjectNotFound))},()=>{s(pa.ImaScriptFailure)},h,"AdManager_ImaIntegrator_unable_to_insert_ima_sdk_script")})}static Cw(t){return t.google&&t.google.ima}}class ma extends ua{constructor(t){super(t),this.settings=t,this.Ry=null,this.adMediaType="ima",this.adSourceType=a.ProtoAdsourceTypeEnum.Ima,this.Pw=[],this.Ry=this.settings.imaAdSlotContainer,this.Mw=new fa(this.settings.imaSdk,this.settings.os,this.settings.imaAdsLoader,this.settings.url,this.settings.imaAdsManager,this.settings.requestAdsContext,this.settings.adManagerLineItem.protoLineItem.publisherLineItemId)}initAd(t,i,e,s,n,r,a){try{super.initAd(t,i,e,s,n,r,a),this.settings.adManagerLineItem.protoLineItem.moatTrackingEnabled&&this.Ew(),this.Pw.push(this.Mw.onVpaidEvent.subscribe(t=>{this.Hy(t)}),this.Mw.onCreativeReceived.subscribe(t=>{this.creativeId=t})),this.Mw.initAd(t,i,e,s,n,{slot:this.wv,videoSlot:this.Ey})}catch(t){this.jy.next({type:w.b.AdError,payload:{errorMessage:ia.c.AdaptorInitAdError+`_${t.message}`}})}}startAd(){try{super.startAd(),this.Mw.startAd()}catch(t){this.jy.next({type:w.b.AdError,payload:{errorMessage:ia.c.AdaptorStartAdError+`_${t.message}`}})}}stopAd(t){try{super.stopAd(t),this.Mw.stopAd(t)}catch(t){this.uw("ImaBidAdaptor","stopAd",t)}}resizeAd(t,i,e){try{this.Mw.resizeAd(t,i,e)}catch(t){this.uw("ImaBidAdaptor","resizeAd",t)}}pauseAd(){try{this.Mw.pauseAd()}catch(t){this.uw("ImaBidAdaptor","pauseAd",t)}}resumeAd(){try{this.Mw.resumeAd()}catch(t){this.uw("ImaBidAdaptor","resumeAd",t)}}expandAd(){try{this.Mw.expandAd()}catch(t){this.uw("ImaBidAdaptor","expandAd",t)}}collapseAd(){try{this.Mw.collapseAd()}catch(t){this.uw("ImaBidAdaptor","collapseAd",t)}}skipAd(){try{super.skipAd(),this.Mw.skipAd()}catch(t){this.uw("ImaBidAdaptor","skipAd",t)}}getAdRemainingTime(){try{return this.Mw.getAdRemainingTime()}catch(t){return this.uw("ImaBidAdaptor","getAdRemainingTime",t),0}}getAdDuration(){try{return this.Mw&&this.Mw.getAdDuration()||this.settings.adManagerLineItem.protoLineItem.duration}catch(t){return this.uw("ImaBidAdaptor","getAdDuration",t),0}}getAdVolume(){try{return this.Mw.getAdVolume()}catch(t){return this.uw("ImaBidAdaptor","getAdVolume",t),0}}getAdMediaSize(){return{width:this.Mw.getAdMediaWidth(),height:this.Mw.getAdMediaHeight()}}setAdVolume(t){try{super.setAdVolume(t),this.Mw.setAdVolume(t)}catch(t){this.uw("ImaBidAdaptor","setAdVolume",t)}}get adVideoUrl(){return this.Mw.getMediaFile()}get declaredDurationInSeconds(){return this.Mw.getAdDuration()}nw(t){const i=super.nw(t);return i.payload.adSourceData.imaMetadata=t.payload.imaMetadata,i}ow(){return this.Ry}lw(){this.settings.adSlotContainerRecycler.recycleAdSlot(this.Ry)}Ew(){va.fetchImaSdk(this.settings.globalDomUtilsService.getGlobalClosestTop().topFrame,!1)}jc(){try{super.jc(),na(this.Pw),this.Mw.destroy()}catch(t){this.uw("ImaBidAdaptor","_destroy",t)}}}const ga=25;class ya{constructor(t,i,e,s,n,r,a){this.dw=t,this.fw=i,this.ml=e,this.gl=s,this.pw=n,this.Aw=r,this.qe=a,this.Lw=new Vr,this.Rw=new Vr,this.Bw={id:Object(at.c)()},this.vw=null,this.ww=t=>{if(!this.xw(t))return;switch(t.getError().getErrorCode()){case this.dw.AdError.ErrorCode.VAST_EMPTY_RESPONSE:this.Dw(Yr.ImaVastEmptyResponse);break;case this.dw.AdError.ErrorCode.VAST_WRAPPER_ERROR:case this.dw.AdError.ErrorCode.VAST_MALFORMED_RESPONSE:this.Dw(Yr.ImaInvalidResponse);break;default:this.Dw(Yr.ImaRequestException)}},this.Fw=t=>{this.xw(t)&&(this.vw=t.getAdsManager(this.Aw,{loadVideoTimeout:ga*B.f}),this.$w(),this.Lw.next({imaAdsManager:this.vw,requestAdsContext:this.Bw}))},this.fw.addEventListener(this.dw.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,this.Fw),this.fw.addEventListener(this.dw.AdErrorEvent.Type.AD_ERROR,this.ww)}get onSuccess(){return this.Lw.asObservable()}get onError(){return this.Rw.asObservable()}loadAd(){const t=new this.dw.AdsRequest;t.adTagUrl=this.pw,t.linearAdSlotWidth=t.nonLinearAdSlotWidth=this.ml,t.linearAdSlotHeight=t.nonLinearAdSlotHeight=this.gl,t.pageUrl=this.qe,this.fw.requestAds(t,this.Bw)}Dw(t){this.Rw.next(t)}$w(){this.fw.removeEventListener(this.dw.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,this.Fw),this.fw.removeEventListener(this.dw.AdErrorEvent.Type.AD_ERROR,this.ww)}xw(t){const i=t.getUserRequestContext();return!i||i.id===this.Bw.id}destroy(){var t;try{this.$w(),null===(t=this.vw)||void 0===t||t.destroy()}catch(t){}}}const wa=25e3;class xa{constructor(t){this.settings=t,this.Uw=!1,this.Vw=[],this.metrics={created:(new Date).getTime()}}fetchBid(){this.metrics.fetchStart=(new Date).getTime(),this.Nw=this.settings.adSlotContainerRecycler.requestAdSlotIma(this.settings.adContainer);const t=new Promise((t,i)=>{setTimeout(()=>{i(Yr.ImaTimeout)},wa)}),i=this.Hw(this.Nw);return Promise.race([i,t]).then(t=>(this.metrics.fetchEnd=(new Date).getTime(),this.Uw=!0,this.qw&&na(this.Vw),t)).catch(t=>{throw this.metrics.fetchEnd=(new Date).getTime(),this.Uw=!0,this.qw&&(na(this.Vw),this.qw.destroy(),this.settings.adSlotContainerRecycler.recycleAdSlot(this.Nw)),t})}Hw(t){return t.fetchImaDependencies().then(t=>(this.zw=t,this.Ww(t))).then(t=>this.Gw(t)).catch(t=>{throw Object(T.a)(t)?t:Yr.ImaRequestException})}Ww(t){return this.Uw?Promise.reject():new Promise((i,e)=>{const s=this.Jw();this.qw=new ya(t.imaSdk,t.imaAdsLoader,s.width,s.height,this.settings.url,this.Nw.videoSlot,this.settings.pageUrl),this.Vw.push(this.qw.onSuccess.subscribe(t=>{i(t)}),this.qw.onError.subscribe(t=>{e(t)})),this.qw.loadAd()})}Jw(){return this.settings.callingState.adContainerState.get(this.settings.adManagerLineItem.protoLineItem.adType)}Gw(t){return new ma({id:this.settings.id,adManagerLineItem:this.settings.adManagerLineItem,trackers:this.settings.trackersInformation,url:this.settings.url,requestMetadata:this.settings.requestMetadata,callingState:this.settings.callingState,adContainer:this.settings.adContainer,globalDomUtilsService:this.settings.globalDomUtilsService,viewabilityService:this.settings.viewabilityService,cpm:this.settings.cpm,obfuscatedPrice:this.settings.obfuscatedPrice,adEnforcer:this.settings.adEnforcer,successRate:this.settings.successRate,os:this.settings.os,adSlotContainerRecycler:this.settings.adSlotContainerRecycler,externalCreativeId:this.settings.creativeId,imaSdk:this.zw.imaSdk,imaAdsLoader:this.zw.imaAdsLoader,imaAdsManager:t.imaAdsManager,requestAdsContext:t.requestAdsContext,imaAdSlotContainer:this.Nw,bidSlotId:this.settings.bidSlotId,pageUrl:this.settings.pageUrl})}}function ka(t,i){t.sort((t,i)=>t.width===i.width?t.bitrate-i.bitrate:t.width-i.width);for(let e=0;e<t.length;e++)if(t[e].width>=i)return t[e-1]||t[e];return t[t.length-1]}const Sa=()=>`cnx_bid_slot_${Object(at.c)()}`;var Oa=e(15);const _a=Oa&&Oa.isSupported(),ja=t=>t.canPlayType("application/vnd.apple.mpegurl"),Aa={enableWorker:!1,capLevelToPlayerSize:!0,cnxRenderWindow:window,maxBufferSize:5e6,maxBufferLength:5,maxMaxBufferLength:10,liveBackBufferLength:0};class Ia{constructor(t,i,e){this.Qw=t,this.Xw=i,this.vv=e,this.Yw=(t,i)=>{if(i.fatal)switch(i.type){case Oa.ErrorTypes.NETWORK_ERROR:if(i.details===Oa.ErrorDetails.MANIFEST_PARSING_ERROR||i.details===Oa.ErrorDetails.MANIFEST_LOAD_ERROR)return void this.Kw();this.Zw.startLoad();break;case Oa.ErrorTypes.MEDIA_ERROR:this.Zw.recoverMediaError();break;default:this.Kw()}},this.tx=()=>{this.Zw.off(Oa.Events.MEDIA_ATTACHED,this.tx),this.Zw.loadSource(this.Qw),this.Zw.once(Oa.Events.MANIFEST_PARSED,this.ex)},this.ex=()=>{this.Zw.off(Oa.Events.MANIFEST_PARSED,this.ex),this.sx()}}start(t,i){this.sx=t,this.Kw=i,_a?(this.Zw=this.vv.initHls(Aa),this.nx()):this.Kw()}destroy(){this.Zw&&(this.Zw.destroy(),this.Zw=null)}nx(){this.Zw.on(Oa.Events.ERROR,this.Yw),this.Zw.attachMedia(this.Xw),this.Zw.once(Oa.Events.MEDIA_ATTACHED,this.tx)}}var Ta,Ca,Pa=e(51);class Ma extends sa{constructor(t,i,e,s,r,h,o,c,u=!1){super(),this.ks=t,this.ax=i,this.Aw=e,this.tr=s,this.hx=r,this.ox=h,this.lx=o,this.ux=c,this.px=u,this.bx=!1,this.pageFocus=new Pa.a(this.ks),this.vx=Object(l.a)(J),this.mx=!1,this.gx=!1,this.yx=[{event:w.b.AdVideoStart,position:0},{event:w.b.AdVideoFirstQuartile,position:25},{event:w.b.AdVideoMidpoint,position:50},{event:w.b.AdVideoThirdQuartile,position:75},{event:w.b.AdVideoComplete,position:100}],this.wx=this.yx[0],this.xx=t=>{try{switch(t.type){case J.Pause:this.mx=!1;break;case J.Play:if(!this.mx&&this.px)return void this.Aw.pause();break;case J.Canplay:case J.Durationchange:this.kx();break;case J.Timeupdate:this.Sx();break;case J.Error:this.jy.next({type:w.b.AdError,payload:{errorMessage:ia.c.VastVideoTagEventError}});break;case"click":this.jy.next({type:w.b.AdClickThru,payload:{}})}}catch(t){Object(n.a)({level:a.ProtoLoggingLevelEnum.FATAL,callStack:t.stack,message:"AdManager_VastIntegrator_onVideoEvent",exception:t.message,throttle:10,sendMaxLog:!1})}}}initAd(t,i,e,s,n,r){try{this.Aw=r.videoSlot,this.width=t,this.height=i,this.Ox(this.hx,this.Aw.parentElement),this.resizeAd(t,i,e),this.addVideoEvents(this.Aw),this.ux&&_a?this._x():(this.Aw.setAttribute("src",this.ax),this.Aw.setAttribute("preload","metadata"),this.Aw.load()),this.pageFocus.isDocumentVisible()||this.kx()}catch(t){this.jy.next({type:w.b.AdError,payload:{errorMessage:ia.c.WrapperInitAdError+`_${t.message}`}})}}startAd(){try{Object(j.a)(this.Aw,"cnx-ad-video-slot"),this.mx=!0,this.pageFocus.isDocumentVisible()?this.Aw.play().then(()=>{this.jy.next({type:w.b.AdStarted}),this.jy.next({type:w.b.AdImpression,payload:{}})}).catch(t=>{this.jy.next({type:w.b.AdError,payload:{errorMessage:ia.c.VastPlayPromiseReject}})}):(this.jy.next({type:w.b.AdStarted}),this.jy.next({type:w.b.AdImpression,payload:{}}),this.Aw.play())}catch(t){this.jy.next({type:w.b.AdError,payload:{errorMessage:ia.c.WrapperStartAdError+`_${t.message}`}})}}stopAd(t){this.px&&this.Aw.pause(),"videoComplete"===t&&this.ox?this.jy.next({type:w.b.AdStopped,payload:{shouldTrackPostBid:!1}}):this.jy.next({type:w.b.AdStopped,payload:{shouldTrackPostBid:!0}})}resizeAd(t,i,e){Object(j.Q)(this.Aw,{width:`${t}px`,height:`${i}px`}),this.jy.next({type:w.b.AdSizeChange})}pauseAd(){this.mx=!1,this.lx&&void 0===this.wx&&(this.wx=this.yx[0]),this.Aw.pause(),this.jy.next({type:w.b.AdPaused})}resumeAd(){this.ox&&void 0===this.wx&&(this.wx=this.yx[0]),this.mx=!0,this.Aw.play(),this.tr===ot.b.Ios&&Object(j.C)(this.Aw),this.jy.next({type:w.b.AdPlaying})}expandAd(){}collapseAd(){}skipAd(){this.jy.next({type:w.b.AdSkipped})}getAdRemainingTime(){return this.Aw.duration-this.Aw.currentTime}getAdDuration(){return this.Aw.duration?this.Aw.duration:0}getAdVolume(){return this.Aw.volume}setAdVolume(t){this.Aw.volume=t}getAdMediaWidth(){return this.Aw.videoWidth}getAdMediaHeight(){return this.Aw.videoHeight}destroy(){if(!this.lx&&!this.ox)try{Object(j.L)(this.Aw,"cnx-ad-video-slot"),this.jx(this.Aw),this.Aw.removeAttribute("src"),this.Ax&&(this.Ax.destroy(),this.Ax=null)}catch(t){Object(n.a)({level:a.ProtoLoggingLevelEnum.WARNING,message:"AdManager_VastIntegrator_destroyAd",exception:t.message,callStack:t.stack})}}_x(){this.Ax=new Ia(this.ax,this.Aw,this.ks),this.Ax.start(()=>{this.kx()},()=>{this.jy.next({type:w.b.AdError,payload:{errorMessage:ia.c.CnxMediaSrcNotSupported}})})}Ox(t,i){this.Ix=this.ks.createElement("a"),t&&(this.Ix.href=t,this.Ix.target="_blank"),Object(j.a)(this.Ix,"cnx-ad-slot"),i.appendChild(this.Ix),this.Ix.addEventListener("click",this.xx)}addVideoEvents(t){this.vx.forEach(i=>{t.addEventListener(i,this.xx)}),this.Ix&&this.Ix.addEventListener("click",this.xx)}jx(t){this.vx.forEach(i=>{t.removeEventListener(i,this.xx)}),this.Ix&&this.Ix.removeEventListener("click",this.xx)}kx(){this.bx||(this.bx=!0,this.jy.next({type:w.b.AdLoaded,payload:{}}))}Sx(){this.jy.next({type:w.b.AdRemainingTimeChange});const t=Object(rt.g)(0,this.Aw.duration,0,100,this.Aw.currentTime);if(this.wx&&t>=this.wx.position){this.gx||this.jy.next({type:this.wx.event});const t=this.wx;this.wx=this.yx[this.yx.indexOf(this.wx)+1],t.event===w.b.AdVideoComplete&&(this.stopAd("videoComplete"),this.gx=!0)}}}!function(t){t.errorIframe="Error creating iframe"}(Ta||(Ta={}));class Ea{constructor(t,i,e){this.ks=t,this.oo=i,this.Sa=e}Tx(t,i,e){let s=!1;return n=>{if(n.contentWindow&&!s)return s=!0,this.Cx(n,this.Px(t,i),e)?void 0:(n&&n.parentNode&&n.parentNode.removeChild(n),null)}}Mx(t,i,e,s,n){return this.Ex(t,this.Tx(i,e,s),n)}Ex(t,i,e){const s=this.ks.createElement("iframe",e);return s.allow="autoplay",s.src="javascript:false",s.srcdoc="",s.width="100%",s.height="100%",s.style.position="absolute",s.style.left="0",s.style.top="0",s.style.margin="0px",s.style.padding="0px",s.style.border="0px",s.style.width="100%",s.style.height="100%",s.setAttribute("SCROLLING","NO"),s.onload=()=>{i(s)},t.appendChild(s),i(s),s}Cx(t,i,e){try{const s=t.contentWindow&&t.contentWindow.document;s.open(),s.write(i),e(t)}catch(i){return this.ks.isDetachedFromDOM(t)?Object(n.a)({message:"iframeLoader_(inDom_false)",exception:i.message,callStack:i.stack,level:a.ProtoLoggingLevelEnum.WARNING,sendMaxLog:!1,throttle:1}):Object(n.a)({message:"iframeLoader_(inDom_true)",exception:i.message,level:a.ProtoLoggingLevelEnum.WARNING,logJsonState:!0,sendMaxLog:!1,throttle:1}),!1}return!0}Px(t,i){return Object.keys(i).forEach(function(e){let s;s="object"==typeof s?JSON.stringify(i[e]):i[e],t=t.replace(new RegExp(`{{${e}}}`,"g"),s)}),t}loadIframe(t){const i='<!DOCTYPE html><html lang="en"><head>'+(t.customHead?t.customHead:"")+'<meta charset="UTF-8"></head><body style="margin:0;padding:0">'+(t.customHtml?t.customHtml:"")+'<script type="text/javascript">window.postMessage(\'{"event": "ready", "id": "{{iframeID}}"}\', \'*\');<\/script></body></html>',e="cnx-iframe_"+Object(at.c)();return new Promise((s,n)=>{this.Lx=this.Mx(t.container,i,{iframeID:e},t=>{null===t&&n(Ta.errorIframe);const i=r=>{let a;try{a=JSON.parse(r.data)}catch(t){return}a.id===e&&(t.contentWindow?(t.contentWindow.document.close(),t.contentWindow.removeEventListener("message",i),s({iframe:t})):n("The Iframe is no longer in the DOM"))};t.contentWindow.addEventListener("message",i)},this.Sa);const{advertiserLineItemId:r,heavyAdBlockTypeEnum:a}=t.customReportingLog;this.Rx=new b(this.Lx.contentWindow,this.oo,{advertiserLineItemId:r,heavyAdBlockTypeEnum:a})})}get iframe(){return this.Lx}destroy(){this.Rx.destroy(),this.Lx=null}}class La{constructor(t,i,e,s,n){this.Bx=t,this.ks=i,this.oo=e,this.Yn=s,this.Dx=n,this.Fx={bodyTamplate:`<div class="ad-element" id="cnx-ad-element"></div><script type="text/javascript" src="${this.Bx}"><\/script>'\n        <script type="text/javascript">\n            window.Object.defineProperty(Object.prototype, 'cnxInnerTag', { enumerable: !1, writable: !0, value: '${this.Yn}' });\n            window.Object.defineProperty(Function.prototype, 'cnxInnerTag',\n            { enumerable: !1, writable: !0, value: '${this.Yn}' });\n            cnxtimeouts = [];\n            cnxintervals = [];\n            oldSetTimeout = setTimeout;\n            setTimeout = function (e, t) { var n = oldSetTimeout.apply(null, arguments); return cnxtimeouts.push(n), n };\n            oldSetInterval = setInterval;\n            setInterval = function (e, t) { var n = oldSetInterval.apply(null, arguments); return cnxintervals.push(n), n };\n            clearAll = function () {\n                setTimeout = function () { };\n                setInterval = function () { };\n                for (var e = 0; e < cnxtimeouts.length; e++) {\n                    clearTimeout(cnxtimeouts[e]);\n                }\n                for (e = 0; e < cnxintervals.length; e++) {\n                    clearInterval(cnxintervals[e]);\n                }\n            };\n        <\/script>`,headTamplate:" <style>\n            html,\n            body,\n            .ad-element {\n                width: 100%;\n                height: 100%;\n            }\n            </style>"},this.$x=new Ea(this.ks,this.oo)}Ux(t){return this.$x.loadIframe({customHead:this.Fx.headTamplate,customHtml:this.Fx.bodyTamplate,container:t,customReportingLog:{heavyAdBlockTypeEnum:a.ProtoHeavyAdBlockTypeEnum.VpaidIframe,advertiserLineItemId:this.Dx}})}loadAdUnitIframe(t){return new Promise((i,e)=>{this.Ux(t).then(t=>{t.adContainer=t.iframe.contentWindow.document.querySelector(".ad-element"),i(t)}).catch(t=>{e(t)})})}destroyAdUnit(){var t,i;try{const e=this.$x.iframe.contentWindow.clearAll;e&&e()}catch(e){Object(n.a)({message:"AdManager_VPAIClient_destroyAdUnit",exception:null===(t=e)||void 0===t?void 0:t.message,callStack:null===(i=e)||void 0===i?void 0:i.stack,level:a.ProtoLoggingLevelEnum.WARNING,throttle:2,sendMaxLog:!0})}this.$x.destroy(),this.$x=null}}!function(t){t[t.handshakeVersion=0]="handshakeVersion",t[t.initAd=1]="initAd",t[t.startAd=2]="startAd",t[t.stopAd=3]="stopAd",t[t.skipAd=4]="skipAd",t[t.resizeAd=5]="resizeAd",t[t.pauseAd=6]="pauseAd",t[t.resumeAd=7]="resumeAd",t[t.expandAd=8]="expandAd",t[t.collapseAd=9]="collapseAd",t[t.subscribe=10]="subscribe",t[t.unsubscribe=11]="unsubscribe"}(Ca||(Ca={}));class Ra extends sa{constructor(t,i,e,s,r,h,o){super(),this.ax=t,this.ks=i,this.oo=e,this.Vx=s,this.Dx=r,this.By=h,this.tr=o,this.Nx=[],this.Hx=new Set,this.qx=new Set,this.zx=(t,i,e)=>{const s={url:t,playerHandles:e};this.Wx(w.b.AdClickThru,s)},this.Wx=(t,i)=>{if(this.qx.add(t),!this.Hx.has(t))return t!==w.b.AdImpression||this.qx.has(w.b.AdLoaded)?void this.Gx(t,i):(Object(n.a)({message:"AdManager_AdVpaidWrapper_ImpressionBeforeAdLoaded",exception:`advertiserLineItemId:${this.Dx}_creativeId:${this.By}_vpaidSrc:${this.ax}`,callStack:JSON.stringify(Object(u.d)(this.qx)),throttle:1e3,level:a.ProtoLoggingLevelEnum.WARNING,sendMaxLog:!0}),this.Hx.add(w.b.AdLoaded),void this.Gx(w.b.AdLoaded,i))},this.Gx=(t,i)=>{switch(t){case w.b.AdError:this.jy.next({type:w.b.AdError,payload:{errorMessage:Object(T.g)(i)?i:JSON.stringify(i)}});break;case w.b.AdLoaded:this.jy.next({type:w.b.AdLoaded,payload:{skipOffset:Object(T.f)(i)?i.skipOffset:void 0}});break;case w.b.AdImpression:this.jy.next({type:w.b.AdImpression,payload:{}});break;case w.b.AdClickThru:this.jy.next({type:w.b.AdClickThru,payload:Object(T.f)(i)?i:{}});break;default:this.jy.next({type:w.b[t]})}}}initAd(t,i,e,s,n,r){try{this.ml=t,this.gl=i,this._w=e,this.Jx=s,this.Qx=n,this.Xx=r,this.Yx=new La(this.ax,this.ks,this.oo,this.Vx,this.Dx),this.Kx=this.Yx.loadAdUnitIframe(r.slot).then(t=>{this.Zx(t)}).catch(t=>{this.jy.next({type:w.b.AdError,payload:{errorMessage:ia.c.VpaidOnLoad}})})}catch(t){this.jy.next({type:w.b.AdError,payload:{errorMessage:ia.c.VpaidOnLoad}})}}startAd(){try{this.qx.has(w.b.AdImpression)&&!this.Hx.has(w.b.AdImpression)&&(Object(n.a)({message:"AdManager_AdVpaidWrapper_brokenImpressionHandle",exception:`advertiserLineItemId:${this.Dx}_creativeId:${this.By}_vpaidSrc:${this.ax}`,callStack:JSON.stringify(Object(u.d)(this.qx)),throttle:1e3,level:a.ProtoLoggingLevelEnum.WARNING,sendMaxLog:!0}),this.Hx.add(w.b.AdImpression),this.jy.next({type:w.b.AdImpression,payload:{}})),this.tk.startAd()}catch(t){this.jy.next({type:w.b.AdError,payload:{errorMessage:ia.c.WrapperStartAdError}})}}stopAd(t){var i;null===(i=this.Kx)||void 0===i||i.then(()=>{this.tk?this.tk.stopAd(t):Object(n.a)({message:"stopAd",exception:t,level:a.ProtoLoggingLevelEnum.WARNING})})}resizeAd(t,i,e){this.tk.resizeAd(t,i,e)}pauseAd(){this.tk.pauseAd()}resumeAd(){this.tk.resumeAd(),this.tr===ot.b.Ios&&Object(j.C)(this.Xx.videoSlot)}expandAd(){this.tk.expandAd()}collapseAd(){this.tk.collapseAd()}skipAd(){this.tk.skipAd()}getAdRemainingTime(){return this.tk.getAdRemainingTime()}getAdDuration(){var t;return null===(t=this.tk)||void 0===t?void 0:t.getAdDuration()}getAdVolume(){return this.tk.getAdVolume()}setAdVolume(t){this.tk.setAdVolume(t)}destroy(){var t;this.ik(),this.Nx.length=0,this.tk=null,null===(t=this.Yx)||void 0===t||t.destroyAdUnit()}Zx(t){const i=t.iframe.contentWindow.getVPAIDAd;if("function"==typeof i){const e=i();this.tk=e,this.$u(),this.ek(e)?e.initAd(this.ml,this.gl,this._w,this.Jx,this.Qx,{slot:t.adContainer,videoSlot:this.Xx.videoSlot}):this.jy.next({type:w.b.AdError,payload:{errorMessage:ia.c.VpaidInvalid}})}else this.jy.next({type:w.b.AdError,payload:{errorMessage:ia.c.VpaidGetVpaidAdError}})}$u(){Object.keys(w.b).forEach(t=>{let i=this.Wx.bind(this,w.b[t]);w.b[t]===w.b.AdClickThru&&(i=this.zx),this.Nx.push({handler:i,event:t}),this.tk.subscribe(i,t)})}ik(){this.Nx.forEach(t=>{this.tk.unsubscribe(t.handler,t.event)})}ek(t){return Object.keys(Object(u.f)(Ca)).every(i=>Object(T.b)(t[Ca[i]]))}}const Ba="video/mp4";class Da extends ua{constructor(t){super(t),this.settings=t,this.adSourceType=a.ProtoAdsourceTypeEnum.Unknown,this.sk=[],this.creativeId=t.vastResponse.creativeId}initAd(t,i,e,s,n,r,h){try{super.initAd(t,i,e,s,n,r,h),Object(da.b)(this.settings.adManagerLineItem.protoLineItem.publisherLineItemId,this.settings.vastResponse.clickThrough).then(n=>{if(n)return void this.Hy({type:w.b.AdError,payload:{errorMessage:ia.c.DomainBlocked}});if(this.nk=this.rk(t,this.Ey),null===this.nk)return void this.Hy({type:w.b.AdError,payload:{errorMessage:ia.c.VastUnsupportedMedia}});this.adMediaType=this.nk.type,this.nk.getMediaFileType()===ia.d.Video?(this.ak=new Ma(this.settings.globalDomUtilsService,this.nk.src,this.Ey,this.settings.os,this.settings.vastResponse.clickThrough,this.settings.loopAdWhenFinished),this.adSourceType=a.ProtoAdsourceTypeEnum.VastMedia):(this.ak=new Ra(this.nk.src,this.settings.globalDomUtilsService,this.settings.trackingService,this.tw,this.settings.adManagerLineItem.protoLineItem.advertiserLineItemId,this.creativeId,this.settings.os),this.adSourceType=a.ProtoAdsourceTypeEnum.Vpaid),this.sk.push(this.ak.onVpaidEvent.subscribe(t=>{if(t.type===w.b.AdLoaded&&(t.payload.skipOffset=this.settings.vastResponse.skipoffset),t.type===w.b.AdClickThru){this.hk=t.payload.url;const i=t.payload.url||this.settings.vastResponse.clickThrough;i&&t.payload.playerHandles&&this.settings.globalDomUtilsService.open(i,ae.c.Blank)}this.Hy(t)}));const r={AdParameters:this.settings.vastResponse.adParameters,adParameters:this.settings.vastResponse.adParameters};this.ak.initAd(t,i,e,s,r,{slot:this.wv,videoSlot:this.Ey})}).catch(t=>this.ck(t))}catch(t){this.ck(t)}}startAd(){try{super.startAd(),this.ak.startAd()}catch(t){this.jy.next({type:w.b.AdError,payload:{errorMessage:ia.c.AdaptorStartAdError+`_${t.message}`}})}}stopAd(t){super.stopAd(t),this.ak?this.ak.stopAd(t):Object(n.a)({message:"stopAd",exception:t,level:a.ProtoLoggingLevelEnum.WARNING})}resizeAd(t,i,e){try{this.ak.resizeAd(t,i,e)}catch(t){this.uw("VastBidAdaptor","resizeAd",t)}}pauseAd(){try{this.ak.pauseAd()}catch(t){this.uw("VastBidAdaptor","pauseAd",t)}}resumeAd(){try{this.ak.resumeAd()}catch(t){this.uw("VastBidAdaptor","resumeAd",t)}}expandAd(){try{this.ak.expandAd()}catch(t){this.uw("VastBidAdaptor","expandAd",t)}}collapseAd(){try{this.ak.collapseAd()}catch(t){this.uw("VastBidAdaptor","collapseAd",t)}}skipAd(){try{super.skipAd(),this.ak.skipAd()}catch(t){this.uw("VastBidAdaptor","skipAd",t)}}getAdRemainingTime(){try{return this.ak.getAdRemainingTime()}catch(t){return this.uw("VastBidAdaptor","getAdRemainingTime",t),0}}getAdDuration(){try{return this.ak&&this.ak.getAdDuration()||Math.round(this.settings.vastResponse.duration/B.f)}catch(t){return this.uw("VastBidAdaptor","getAdDuration",t),0}}getAdVolume(){try{return this.ak.getAdVolume()}catch(t){return this.uw("VastBidAdaptor","getAdVolume",t),0}}getAdMediaSize(){let t=0,i=0;return this.ak instanceof Ma?(t=this.ak.getAdMediaWidth(),i=this.ak.getAdMediaHeight()):(t=this.nk.width,i=this.nk.height),{width:t,height:i}}setAdVolume(t){try{super.setAdVolume(t),this.ak.setAdVolume(t)}catch(t){this.uw("VastBidAdaptor","setAdVolume",t)}}get adVideoUrl(){var t;return null===(t=this.nk)||void 0===t?void 0:t.src}get declaredDurationInSeconds(){return this.settings.vastResponse.duration/B.f}rw(t){const i=super.rw(t);return this.lk(i)}nw(t){const i=super.nw(t);return this.lk(i)}jc(){var t;if(!this.settings.loopAdWhenFinished)try{super.jc(),na(this.sk),null===(t=this.ak)||void 0===t||t.destroy()}catch(t){this.uw("VastBidAdaptor","_destroy",t)}}lk(t){var i;return t.payload.adSourceData.name=null===(i=this.settings.vastResponse)||void 0===i?void 0:i.adTitle,t.payload.clickThroughUrl=this.hk||this.settings.vastResponse.clickThrough,t}uk(t,i){return t.filter(t=>t.getMediaFileType()===ia.d.Video&&i.canPlayType(t.type))}rk(t,i){const e=this.uk(this.settings.vastResponse.mediaFiles,i),s=e.filter(t=>t.type===Ba);if(s.length)return ka(s,t);if(e.length)return ka(e,t);const n=this.settings.vastResponse.mediaFiles.filter(t=>t.getMediaFileType()===ia.d.Javascript);return n.length?ka(n,t):null}ck(t){this.jy.next({type:w.b.AdError,payload:{errorMessage:ia.c.AdaptorInitAdError+`_${t.message}`}})}}var Fa,$a;!function(t){function i(t){return/^\s*$/.test(t)?null:/^(?:true|false)$/i.test(t)?"true"===t.toLowerCase():isFinite(t)?parseFloat(t):isFinite(Date.parse(t))?new Date(t):"string"==typeof t?t.trim():t}t.JXONTree=function t(e){let s=0,n="";if(this.keyAttributes||(this.keyAttributes={}),e.hasChildNodes()){for(let i,s,r,a=0;a<e.childNodes.length;a++)((i=e.childNodes.item(a)).nodeType-1|1)===Node.TEXT_NODE?n+=i.nodeType===Node.TEXT_NODE?i.nodeValue.trim():i.nodeValue:1!==i.nodeType||i.prefix||(s=i.nodeName.toLowerCase(),r=new t(i),this.hasOwnProperty(s)?(this[s].constructor!==Array&&(this[s]=[this[s]]),this[s].push(r)):this[s]=r);this.keyValue=n?i(n):null}if(void 0===e.hasAttributes?e.attributes.length>0:e.hasAttributes()){let t;for(;s<e.attributes.length;s++)t=e.attributes.item(s),this.keyAttributes[t.name.toLowerCase()]=i(t.value.trim())}},t.getKeyValue=function(t){if(t&&t.keyValue)return t.keyValue},t.decodeXMLText=function(t){if("string"==typeof t)return t.replace(/&apos;/g,"'").replace(/&quot;/g,'"').replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&amp;/g,"&")}}(Fa||(Fa={}));class Ua{constructor(t){this.dk=["text/javascript","text/javascript1.0","text/javascript1.2","text/javascript1.4","text/jscript","application/javascript","application/x-javascript","text/ecmascript","text/ecmascript1.0","text/ecmascript1.2","text/ecmascript1.4","text/livescript","application/ecmascript","application/x-ecmascript"],this.fk="VPAID",this.delivery=void 0,this.type=void 0,this.width=0,this.height=0,this.codec=void 0,this.id=void 0,this.bitrate=void 0,this.minBitrate=void 0,this.maxBitrate=void 0,this.scalable=void 0,this.maintainAspectRatio=void 0,this.apiFramework=void 0,this.src=void 0,this.delivery=t.keyAttributes.delivery,this.type=t.keyAttributes.type,this.width=t.keyAttributes.width,this.height=t.keyAttributes.height,this.codec=t.keyAttributes.codec,this.id=t.keyAttributes.id,this.bitrate=t.keyAttributes.bitrate,this.minBitrate=t.keyAttributes.minbitrate,this.maxBitrate=t.keyAttributes.maxbitrate,this.scalable=t.keyAttributes.scalable,this.maintainAspectRatio=t.keyAttributes.maintainaspectratio,this.apiFramework=t.keyAttributes.apiframework,this.src=Fa.getKeyValue(t)}isSupported(){return!("application/x-shockwave-flash"===this.type||"video/x-flv"===this.type)}getMediaFileType(){return this.apiFramework===this.fk||Object(u.g)(this.type,this.dk)?ia.d.Javascript:ia.d.Video}}class Va{constructor(t,i){this.name=t.keyAttributes.event,this.uri=Fa.getKeyValue(t),"progress"===this.name&&(this.offset=Object(Yt.d)(t.keyAttributes.offset,i))}}class Na{constructor(t){this.clickThrough=void 0,this.clickTrackings=[],this.customClicks=[],this.clickThrough=Fa.getKeyValue(t.clickthrough),this.clickTrackings=this.pk(Object(u.m)(t.clicktracking)),this.customClicks=this.pk(Object(u.m)(t.customclick))}pk(t){const i=[];return void 0!==t[0]&&t.forEach(t=>{i.push(Fa.getKeyValue(t))}),i}}class Ha{constructor(t){this.duration=void 0,this.mediaFiles=[],this.trackingEvents=[],this.skipoffset=void 0,this.videoClicks=void 0,this.duration=Object(Yt.a)(Fa.getKeyValue(t.duration)),this.skipoffset=Object(Yt.d)(t.keyAttributes.skipoffset,this.duration),t.mediafiles&&(this.mediaFiles=this.bk(Object(u.m)(t.mediafiles.mediafile))),t.trackingevents&&(this.trackingEvents=this.vk(Object(u.m)(t.trackingevents.tracking))),t.videoclicks&&(this.videoClicks=new Na(t.videoclicks)),t.adparameters&&(this.adParameters=Fa.getKeyValue(t.adparameters),t.adparameters["@xmlEncoded"]&&(this.adParameters=Fa.decodeXMLText(this.adParameters)))}vk(t){const i=[];return void 0!==t[0]&&t.forEach(t=>{i.push(new Va(t,this.duration))}),i}bk(t){const i=[];return void 0!==t[0]&&t.forEach(t=>{const e=new Ua(t);e.isSupported()&&i.push(e)}),i}isSupported(){return!0}}class qa{constructor(t){this.id=void 0,this.sequence=void 0,this.adId=void 0,this.linear=void 0,this.id=t.keyAttributes.id,this.sequence=t.keyAttributes.sequence,this.adId=t.keyAttributes.adid,t.linear&&(this.linear=new Ha(t.linear))}isSupported(){return!0}}!function(t){function i(t){const i=[];return void 0!==t[0]&&t.forEach(t=>{i.push(Fa.getKeyValue(t))}),i}t.parseImpressions=function(t){return i(t)},t.parseCretives=function(t){const i=[];return t.forEach(t=>{i.push(new qa(t))}),i},t.parseErrors=function(t){return i(t)}}($a||($a={}));class za{constructor(t){this.description=void 0,this.advertiser=void 0,this.surveys=void 0,this.errors=void 0,this.pricing=void 0,this.extensions=void 0,this.adTitle=Fa.getKeyValue(t.adtitle),this.adSystem=Fa.getKeyValue(t.adsystem),this.impressions=$a.parseImpressions(Object(u.m)(t.impression)),this.creatives=$a.parseCretives(Object(u.m)(t.creatives.creative)),this.description=Fa.getKeyValue(t.description),this.advertiser=Fa.getKeyValue(t.advertiser),this.surveys=Fa.getKeyValue(t.survey),this.errors=$a.parseErrors(Object(u.m)(t.error)),this.pricing=Fa.getKeyValue(t.pricing),this.extensions=Fa.getKeyValue(t.extensions)}isSupported(){return!0}}class Wa{constructor(t){this.adSystem=void 0,this.impressions=[],this.VASTAdTagURI=void 0,this.creatives=[],this.errors=void 0,this.extensions=void 0,this.fallowAdditionalWrappers=void 0,this.allowMultipleAds=void 0,this.fallbackOnNoAd=void 0,this.adSystem=Fa.getKeyValue(t.adSystem),this.impressions=$a.parseImpressions(Object(u.m)(t.impression)),this.VASTAdTagURI=Fa.getKeyValue(t.vastadtaguri),this.creatives=t.creatives.creative?$a.parseCretives(Object(u.m)(t.creatives.creative)):[],this.errors=$a.parseErrors(Object(u.m)(t.error)),this.extensions=t.extensions,this.fallowAdditionalWrappers=!t.keyAttributes.followadditionalwrappers||t.keyAttributes.followadditionalwrappers,this.allowMultipleAds=t.keyAttributes.allowmultipleads,this.fallbackOnNoAd=t.keyAttributes.fallbackonnoad}}class Ga{constructor(t){Array.isArray(t)?this.mk(t):this.gk(t)}isSupported(){return!0}gk(t){this.id=t.keyAttributes.id,this.sequence=t.keyAttributes.sequence,t.inline?this.inLine=new za(t.inline):t.wrapper&&(this.wrapper=new Wa(t.wrapper))}mk(t){const i=t.filter(t=>{const i=this.yk(t).filter(t=>t.linear);return!!Object(u.h)(i)});Object(u.h)(i)&&this.gk(i[0])}yk(t){return t.inline?Object(u.m)(t.inline.creatives.creative):t.wrapper?Object(u.m)(t.wrapper.creatives.creative):[]}}class Ja{constructor(t=2){this.wk=t}parseVastXml(t){try{if(!this.xk(t))return{error:!0,errorReason:Yr.XmlInvalidString};const i=(new DOMParser).parseFromString(t,"application/xml"),e=new Fa.JXONTree(i.documentElement);if(!this.kk(e,this.wk))return{error:!0,errorReason:Yr.XmlInvalidTree};const s=new Ga(e.ad);return this.Sk(s)?{error:!1,result:s}:{error:!0,errorReason:Yr.XmlInvalidAd}}catch(t){return{error:!0,errorReason:Yr.XmlParseGeneral}}}xk(t){return Object(T.h)(t)}kk(t,i){if(!t.ad)return!1;const e=parseInt(t.keyAttributes.version,10);return!(e&&e<i)}Sk(t){const i=t.wrapper,e=t.inLine;if(!e&&!i)return!1;if(i&&!i.VASTAdTagURI)return!1;if(!i){if(![...e.creatives].filter(t=>{var i,e;return null===(e=null===(i=t)||void 0===i?void 0:i.linear)||void 0===e?void 0:e.mediaFiles.length}).length)return!1}return!0}}class Qa{constructor(t){this.mediaFiles=[],this.adTitle=void 0,this.adParameters=void 0,this.clickThrough=void 0,this.creativeId=void 0,t.forEach(t=>{t.inLine?(this.adTitle=t.inLine.adTitle,this.wy(t.inLine.creatives)):t.wrapper&&this.wy(t.wrapper.creatives)})}xy(t){this.duration=t.duration,this.Ok(t.mediaFiles),this._k(t.skipoffset),this.jk(t.adParameters),t.videoClicks&&t.videoClicks.clickThrough&&this.Ox(t.videoClicks.clickThrough)}jk(t){this.adParameters=t}_k(t){this.skipoffset=t}Ok(t){this.mediaFiles=[...this.mediaFiles,...t]}Ox(t){this.clickThrough=t}wy(t){t.forEach(t=>{t.linear&&(this.creativeId=t.id,this.xy(t.linear))})}}const Xa=2,Ya=10;class Ka{constructor(t){this.settings=t,this.metrics={created:(new Date).getTime()},this.settings.vastAdsChain||(this.settings.vastAdsChain=[]),void 0===this.settings.maxWrapperLimit&&(this.settings.maxWrapperLimit=Ya)}fetchBid(){return this.metrics.fetchStart=(new Date).getTime(),this.Ak(this.settings.xml).then(t=>(this.metrics.fetchEnd=(new Date).getTime(),t)).catch(t=>{throw this.metrics.fetchEnd=(new Date).getTime(),t})}Ak(t){return new Promise((i,e)=>{const s=new Ja(Xa).parseVastXml(t);!0!==s.error?(this.Ik(s.result),i(this.Tk(s.result))):e(s.errorReason)})}Tk(t){return new Promise((i,e)=>{if(t.wrapper){this.settings.maxWrapperLimit<=0&&e(Yr.XmlAdaptorWrapperLimit);const s=this.settings.maxWrapperLimit-1;i(new sh({id:this.settings.id,adManagerLineItem:this.settings.adManagerLineItem,trackersInformation:this.settings.trackersInformation,maxWrapperLimit:s,url:t.wrapper.VASTAdTagURI,replaceTrackingMacros:!1,requestMetadata:this.settings.requestMetadata,callingState:this.settings.callingState,adMacroReplacer:this.settings.adMacroReplacer,adContainer:this.settings.adContainer,globalDomUtilsService:this.settings.globalDomUtilsService,viewabilityService:this.settings.viewabilityService,trackingService:this.settings.trackingService,cpm:this.settings.cpm,obfuscatedPrice:this.settings.obfuscatedPrice,adEnforcer:this.settings.adEnforcer,requestWithCredentials:this.settings.requestWithCredentials,successRate:this.settings.successRate,os:this.settings.os,adSlotContainerRecycler:this.settings.adSlotContainerRecycler,creativeId:this.settings.creativeId,bidSlotId:this.settings.bidSlotId,loopAdWhenFinished:this.settings.loopAdWhenFinished,pageUrl:this.settings.pageUrl}).fetchBid())}else{i(new Da({id:this.settings.id,adManagerLineItem:this.settings.adManagerLineItem,trackers:this.settings.trackersInformation,vastResponse:new Qa(this.settings.vastAdsChain),requestMetadata:this.settings.requestMetadata,callingState:this.settings.callingState,adContainer:this.settings.adContainer,globalDomUtilsService:this.settings.globalDomUtilsService,trackingService:this.settings.trackingService,viewabilityService:this.settings.viewabilityService,cpm:this.settings.cpm,obfuscatedPrice:this.settings.obfuscatedPrice,adEnforcer:this.settings.adEnforcer,successRate:this.settings.successRate,os:this.settings.os,adSlotContainerRecycler:this.settings.adSlotContainerRecycler,externalCreativeId:this.settings.creativeId,bidSlotId:this.settings.bidSlotId,loopAdWhenFinished:this.settings.loopAdWhenFinished}))}})}Ik(t){!function(t,i){const e=new zr(t);i.adError.push(...Xr(e.errorUrls)),i.adImpression.push(...Xr(e.impressions)),i.adClick.push(...Xr(e.clickTrackings)),i.adMute.push(...Xr(e.trackingEvents.mute)),i.adPause.push(...Xr(e.trackingEvents.pause)),i.adQuartileFirst.push(...Xr(e.trackingEvents.firstQuartile)),i.adQuartileSecond.push(...Xr(e.trackingEvents.midpoint)),i.adQuartileThird.push(...Xr(e.trackingEvents.thirdQuartile)),i.adQuartileFourth.push(...Xr(e.trackingEvents.complete)),i.adResume.push(...Xr(e.trackingEvents.resume)),i.adSkip.push(...Xr(e.trackingEvents.skip)),i.adStarted.push(...Xr(e.trackingEvents.creativeView)),i.adVideoStart.push(...Xr([...e.trackingEvents.start])),i.adUnmute.push(...i.adUnmute,...Xr(e.trackingEvents.unmute)),i.adUserAcceptInvitation.push(...Xr([...e.trackingEvents.acceptInvitation,...e.trackingEvents.acceptInvitationLinear])),i.adUserClose.push(...Xr(e.trackingEvents.close)),i.adUserMinimize.push(...i.adUserMinimize,...Xr([...e.trackingEvents.collapse,...e.trackingEvents.playerCollapse,...e.trackingEvents.adCollapse]))}(t,this.settings.trackersInformation),this.settings.vastAdsChain.push(t)}}var Za,th=e(25);!function(t){t[t.None=0]="None",t[t.Ima=1]="Ima"}(Za||(Za={}));const ih={[Za.Ima]:".g.doubleclick.net"},eh=!0;class sh{constructor(t){this.settings=t,void 0===this.settings.requestWithCredentials&&(this.settings.requestWithCredentials=eh),this.metrics={created:(new Date).getTime()}}fetchBid(){return this.metrics.fetchStart=(new Date).getTime(),this.Ck(this.settings.url).then(t=>t.fetchBid()).then(t=>(this.metrics.fetchEnd=(new Date).getTime(),t)).catch(t=>{throw this.metrics.fetchEnd=(new Date).getTime(),t})}Pk(t){let i=Za.None;return Object.keys(ih).forEach(e=>{-1!==t.indexOf(ih[e])&&(i=parseInt(e,10))}),i}Ck(t){const i=this.Mk(t);switch(this.Pk(t)){case Za.None:return this.Ek(i);case Za.Ima:return this.Lk(i);default:return Promise.reject(Yr.HandlingSdkUrl)}}Lk(t){return Promise.resolve(new xa({url:t,id:this.settings.id,adManagerLineItem:this.settings.adManagerLineItem,trackersInformation:this.settings.trackersInformation,replaceTrackingMacros:!1,requestMetadata:this.settings.requestMetadata,callingState:this.settings.callingState,adContainer:this.settings.adContainer,globalDomUtilsService:this.settings.globalDomUtilsService,viewabilityService:this.settings.viewabilityService,cpm:this.settings.cpm,obfuscatedPrice:this.settings.obfuscatedPrice,adEnforcer:this.settings.adEnforcer,successRate:this.settings.successRate,os:this.settings.os,adSlotContainerRecycler:this.settings.adSlotContainerRecycler,creativeId:this.settings.creativeId,bidSlotId:this.settings.bidSlotId,pageUrl:this.settings.pageUrl}))}Ek(t){return th.a.fetchXMLRequest(t,this.settings.requestWithCredentials).catch(t=>Promise.reject(Yr.NetworkRequestUrl)).then(t=>new Ka({id:this.settings.id,adManagerLineItem:this.settings.adManagerLineItem,trackersInformation:this.settings.trackersInformation,vastAdsChain:this.settings.vastAdsChain,xml:t,replaceTrackingMacros:!1,requestMetadata:this.settings.requestMetadata,callingState:this.settings.callingState,adMacroReplacer:this.settings.adMacroReplacer,adContainer:this.settings.adContainer,globalDomUtilsService:this.settings.globalDomUtilsService,viewabilityService:this.settings.viewabilityService,trackingService:this.settings.trackingService,cpm:this.settings.cpm,obfuscatedPrice:this.settings.obfuscatedPrice,adEnforcer:this.settings.adEnforcer,requestWithCredentials:this.settings.requestWithCredentials,successRate:this.settings.successRate,os:this.settings.os,adSlotContainerRecycler:this.settings.adSlotContainerRecycler,creativeId:this.settings.creativeId,bidSlotId:this.settings.bidSlotId,loopAdWhenFinished:this.settings.loopAdWhenFinished,pageUrl:this.settings.pageUrl}))}Mk(t){const{width:i,height:e}=this.settings.callingState.adContainerState.get(this.settings.adManagerLineItem.protoLineItem.adType),s={adHeight:e,adWidth:i,adPostion:this.settings.callingState.adBreakState.adBreakType},n={mediaDescription:this.settings.callingState.media.mediaDescription,mediaDuration:this.settings.callingState.media.mediaDuration,mediaId:this.settings.callingState.media.mediaId,mediaTitle:this.settings.callingState.media.mediaTitle,mediaUrl:this.settings.callingState.media.mediaUrl};return this.settings.adMacroReplacer.replace(t,this.settings.adManagerLineItem.protoLineItem.vendorId,{adMacros:s,mediaMacros:n})}}class nh{constructor(t={}){this.data=t,Object(T.h)(this.data.cnxBidId)||(this.data.cnxBidId=Object(at.c)())}}var rh,ah=e(34),hh=e(18);function oh(t,i){return t.find(t=>t.adManagerLineItem.protoLineItem.advertiserLineItemId===i).adManagerLineItem}function ch(t){const i=[];return t.callers.forEach(t=>{const e=t.settings.requestMetadata.data.requestedFloorPriceIndex;void 0===e||Object(u.g)(e,i)||i.push(e)}),t.bids.forEach(t=>{const e=t.settings.requestMetadata.data.requestedFloorPriceIndex;void 0===e||Object(u.g)(e,i)||i.push(e)}),i}function lh(t){return[a.ProtoCreativeTypeEnum.Tam,a.ProtoCreativeTypeEnum.Rtb,a.ProtoCreativeTypeEnum.HeaderBidder].includes(t)}!function(t){t[t.FirstQuartile=0]="FirstQuartile",t[t.SecondQuartile=1]="SecondQuartile",t[t.ThirdQuartile=2]="ThirdQuartile",t[t.FourthQuartile=3]="FourthQuartile"}(rh||(rh={}));class uh{constructor(t,i,e,s,n){this.Rk=t,this.Bk=i,this.Dx=e,this.ks=s,this.oo=n,this.Dk="div-cnx-display",this.Fk=new Vr,this.Rw=new Vr}get onDisplayAd(){return this.Fk.asObservable()}get onError(){return this.Rw.asObservable()}initializeAd(t,i){try{this.wv=t,this.$x=new Ea(this.ks,this.oo);let e="";this.Rk===ia.b.Html&&(e=this.Bk);const s=this.$k(this.wv,i);this.$x.loadIframe({customHead:"<style>html, body {position:relative;width:100%;height:100%}#"+this.Dk+"{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%)}#"+this.Dk+"{border:3px solid white}#"+this.Dk+" iframe{display:block}</style>",customHtml:'<div id="'+this.Dk+'">'+e+"</div>",container:s,customReportingLog:{heavyAdBlockTypeEnum:a.ProtoHeavyAdBlockTypeEnum.OverlayIframe,advertiserLineItemId:this.Dx}}).then(t=>{this.Uk=t.iframe;const i=this.Uk.contentWindow;if(this.Vk=i.document.getElementById(this.Dk),this.Rk===ia.b.Javascript&&Object(j.z)(this.Vk,i,this.Bk),""===this.Uk.contentWindow.document.head.innerHTML){const t="html, body {position:relative;width:100%;height:100%;margin:0;border:0}";this.Nk(t)}Object(j.H)(this.Uk.contentWindow,"AdHtmlWrapper"),this.Fk.next()}).catch(t=>{this.Rw.next(ia.c.DisplayIntegratorIframeLoad)})}catch(t){this.Rw.next(ia.c.WrapperInitAdError)}}getAdMediaWidth(){return this.Vk.clientWidth}getAdMediaHeight(){return this.Vk.clientHeight}destroy(){this.Uk&&this.wv&&Object(j.M)(this.Uk),this.$x&&(this.$x.destroy(),this.$x=null)}$k(t,i){if(!i.width||!i.height)return t;const e=this.ks.createElementByString(`<div class="cnx-iframe-container" style="width: ${i.width}px; height: ${i.height}px"></div>`);return this.wv.appendChild(e),e}Nk(t){const i=this.Uk.contentWindow.document.createElement("style"),e=this.Uk.contentWindow.document.createTextNode(t);i.appendChild(e),this.Uk.contentWindow.document.head.appendChild(i)}}class dh{constructor(t=0,i=1e3,e=1){this.timerDuration=t,this.$c=i,this.Hk=e,this.Uc=0,this.Vc=null,this.Nc=!1,this.Xc=!1,this.Yv=new Vr,this.qk=new Vr,this.zk=new Vr,this.Wk=[{event:rh.FirstQuartile,quartile:1},{event:rh.SecondQuartile,quartile:2},{event:rh.ThirdQuartile,quartile:3},{event:rh.FourthQuartile,quartile:4}],this.Gk=null,this.Hc=()=>{this.qc(),this.Yv.next(),this.zc(),this.Wc=(new Date).getTime()},t||this.disable()}start(){this.Xc=!0,null===this.Vc&&this.Gc()}stop(){this.Xc=!1,null!==this.Vc&&(this.qc(),this.Jc())}reset(t){t&&(this.timerDuration=t),this.Uc=0,this.Nc=!1,this.Gk=null,(null!==this.Vc||this.Xc)&&(this.Jc(),this.Gc())}get timeElapsed(){return this.Uc}get timeRemaining(){return this.timerDuration-this.Uc}disable(){this.Nc=!0,this.Jc()}get onTimeUpdate(){return this.Yv.asObservable()}get onTimeElapsed(){return this.qk.asObservable()}get onQuartile(){return this.zk.asObservable()}qc(){this.Uc+=(new Date).getTime()-this.Wc}Gc(){this.Nc||(this.zc(),this.Wc=(new Date).getTime(),this.Vc=setInterval(this.Hc,this.$c))}Jc(){clearInterval(this.Vc),this.Vc=null}Qc(){this.disable(),this.qk.next(),this.Jk(this.Uc,this.timerDuration,this.Hk),this.Uc=0}zc(){this.Uc/B.f>=this.timerDuration/B.f&&this.Qc()}Jk(t,i,e){const s=Object(rt.h)(t/B.f,e);this.Qk(s,i)}Qk(t,i){const e=Math.floor(Object(rt.g)(0,i,0,4,t));this.Gk<=e&&(this.Wk.forEach(({event:t,quartile:i})=>{i===e&&this.zk.next(t)}),this.Gk++)}}const fh={[rh.FirstQuartile]:w.b.AdVideoFirstQuartile,[rh.SecondQuartile]:w.b.AdVideoMidpoint,[rh.ThirdQuartile]:w.b.AdVideoThirdQuartile,[rh.FourthQuartile]:w.b.AdVideoComplete};class ph extends ua{constructor(t){super(t),this.settings=t,this.adMediaType="displayHtml",this.adSourceType=a.ProtoAdsourceTypeEnum.Unknown,this.Xk="html",this.$c=500,this.Hk=1,this.Yk=[];const i=this.settings.adManagerLineItem.protoLineItem.overlayTime*B.f;this.Kk=new dh(i,this.$c,this.Hk),this.Yk.push(this.Kk.onTimeUpdate.subscribe(()=>{this.Hy({type:w.b.AdRemainingTimeChange})}),this.Kk.onTimeElapsed.subscribe(()=>{this.stopAd("htmlTimerElapsed")}),this.Kk.onQuartile.subscribe(t=>{this.Hy({type:fh[t],payload:{}})}))}get adVideoUrl(){return this.Xk}get declaredDurationInSeconds(){return this.settings.adManagerLineItem.protoLineItem.overlayTime}initAd(t,i,e,s,n,r,a){try{super.initAd(t,i,e,s,n,r,a),this.ml=t,this.gl=i,this.Hy({type:w.b.AdLoaded,payload:{}})}catch(t){this.Hy({type:w.b.AdError,payload:{errorMessage:ia.c.AdaptorInitAdError+`_${t.message}`}})}}startAd(){try{super.startAd(),this.Kk.start(),this.Zk=new uh(this.settings.mime,this.settings.html,this.settings.adManagerLineItem.protoLineItem.advertiserLineItemId,this.settings.globalDomUtilsService,this.settings.trackingService),this.Yk.push(this.Zk.onDisplayAd.subscribe(()=>{this.Hy({type:w.b.AdStarted}),this.Hy({type:w.b.AdVideoStart}),this.Hy({type:w.b.AdImpression,payload:{}})}),this.Zk.onError.subscribe(t=>{this.Hy({type:w.b.AdError,payload:{errorMessage:t}}),this.Kk.stop()})),this.Zk.initializeAd(this.wv,{width:this.ml,height:this.gl})}catch(t){this.Hy({type:w.b.AdError,payload:{errorMessage:ia.c.AdaptorStartAdError+`_${t.message}`}})}}stopAd(t){try{super.stopAd(t),this.Kk.stop(),this.Hy({type:w.b.AdStopped,payload:{shouldTrackPostBid:!0}})}catch(t){this.uw("HtmlBidAdaptor","stopAd",t)}}skipAd(){try{super.skipAd(),this.Hy({type:w.b.AdSkipped})}catch(t){this.uw("HtmlBidAdaptor","skipAd",t)}}pauseAd(){try{this.Kk.stop(),this.Hy({type:w.b.AdPaused})}catch(t){this.uw("HtmlBidAdaptor","pauseAd",t)}}resumeAd(){try{this.Kk.start(),this.Hy({type:w.b.AdPlaying})}catch(t){this.uw("HtmlBidAdaptor","resumeAd",t)}}collapseAd(){}expandAd(){}getAdDuration(){return this.Kk.timerDuration/B.f}getAdRemainingTime(){return this.Kk.timeRemaining/B.f}getAdVolume(){return 0}getAdMediaSize(){return{width:this.Zk.getAdMediaWidth(),height:this.Zk.getAdMediaHeight()}}setAdVolume(t){}resizeAd(t,i,e){this.ml=t,this.gl=i}jc(){var t;try{super.jc(),this.Kk.stop(),na(this.Yk),null===(t=this.Zk)||void 0===t||t.destroy()}catch(t){this.uw("HtmlBidAdaptor","_destroy",t)}}}class bh{constructor(t){this.settings=t,this.metrics={created:(new Date).getTime()}}fetchBid(){if(this.metrics.fetchStart=(new Date).getTime(),!this.tS(this.settings.mime))return Promise.reject(Yr.HTMLUnknownMimeType);const t=new ph({id:this.settings.id,adManagerLineItem:this.settings.adManagerLineItem,trackers:this.settings.trackersInformation,html:this.settings.html,mime:this.settings.mime,minDimensions:this.settings.dimensions,requestMetadata:this.settings.requestMetadata,callingState:this.settings.callingState,globalDomUtilsService:this.settings.globalDomUtilsService,trackingService:this.settings.trackingService,viewabilityService:this.settings.viewabilityService,adContainer:this.settings.adContainer,cpm:this.settings.cpm,obfuscatedPrice:this.settings.obfuscatedPrice,adEnforcer:this.settings.adEnforcer,successRate:this.settings.successRate,os:this.settings.os,adSlotContainerRecycler:this.settings.adSlotContainerRecycler,externalCreativeId:this.settings.creativeId,bidSlotId:this.settings.bidSlotId});return this.metrics.fetchEnd=(new Date).getTime(),Promise.resolve(t)}tS(t){return Object.keys(ia.b).some(i=>ia.b[i]===t)}}const vh="cnxRtbTest";class mh{constructor(t,i,e,s,n,r,a,h){this.iS=t,this.eS=i,this.xb=e,this.sS=s,this.nS=n,this.rS=r,this.aS=a,this.hS=h,this.oS=0,this.cS=new Map}request(t){const{width:i,height:e}=t.callingState.adContainerState.get(a.ProtoAdType.Video),s=this.lS(i,e),r=this.uS(t);return!s||Object.keys(r.lineItems).length<=0?Promise.resolve({bids:[],noBids:[]}):this.dS(r).then(i=>this.fS(i,t)).catch(t=>(Object(n.a)({message:"RtbCallAggregator",exception:t.message,level:a.ProtoLoggingLevelEnum.FATAL,sendMaxLog:!0}),{bids:[],noBids:[]}))}destroy(){}fS(t,i){const e={bids:[],noBids:[]};return t.lineItemResponses.forEach(s=>{const n=oh(i.lineItemRequestDataList,s.id);Object(T.d)(s.cachedFloorPrice)&&this.cS.set(s.id,s.cachedFloorPrice),s.bids.forEach(s=>{const r=this.pS(s,n,t,i.callingState);r&&e.bids.push(r)}),s.noBids.forEach(i=>{e.noBids.push(this.bS(i,n,t))})}),e}bS(t,i,e){return{lineItem:i,requestMetadata:new nh({requestedFloorPrice:t.requestedFloorPrice,requestedFloorPriceIndex:t.floorPriceFactorIndex,rtbRequestNumber:this.oS,syncedUser:t.syncedUser,partnerCustomHeaders:t.partnerCustomHeaders,partnerReason:t.partnerReason,requestTrackingHandledByServer:!0}),reason:t.connatixReason}}pS(t,i,e,s){let n=t;const r=this.vS(n,i),h=new nh({requestedFloorPrice:n.requestedFloorPrice,requestedFloorPriceIndex:n.floorPriceFactorIndex,syncedUser:n.syncedUser,rtbRequestNumber:this.oS,encryptedPrice:n.encryptedPrice,dspId:n.dspId,rtbAdomain:n.adomain,rtbSeatId:n.seatId,rtbCampainId:n.campaignId,cnxBidId:n.cnxBidId,requestTrackingHandledByServer:!0}),o=Sa();switch(i.protoLineItem.adType){case a.ProtoAdType.Video:return new Ka({id:Object(at.c)(),adManagerLineItem:i,replaceTrackingMacros:!0,trackersInformation:r,xml:n.vastTag,bidSlotId:o,requestMetadata:h,callingState:s,adMacroReplacer:this.sS,adContainer:this.nS.get(i.protoLineItem.adType),globalDomUtilsService:this.xb.services.GlobalDomUtilsService,viewabilityService:this.xb.services.ViewabilityService,trackingService:this.xb.services.TrackingService,obfuscatedPrice:n.gtkpbp,adEnforcer:this.aS,creativeId:n.creativeId,successRate:n.successRate,os:this.xb.config.os.os,adSlotContainerRecycler:this.hS,pageUrl:this.xb.config.pageUrl});case a.ProtoAdType.Overlay:return new bh({id:Object(at.c)(),adManagerLineItem:i,dimensions:{width:n.width,height:n.height},html:n.vastTag,mime:n.mime,bidSlotId:o,replaceTrackingMacros:!0,requestMetadata:h,trackersInformation:r,callingState:s,adContainer:this.nS.get(i.protoLineItem.adType),globalDomUtilsService:this.xb.services.GlobalDomUtilsService,viewabilityService:this.xb.services.ViewabilityService,trackingService:this.xb.services.TrackingService,obfuscatedPrice:n.gtkpbp,adEnforcer:this.aS,creativeId:n.creativeId,successRate:n.successRate,os:this.xb.config.os.os,adSlotContainerRecycler:this.hS})}}vS(t,i){const e=new Gr;Jr(i.protoLineItem.trackers,e);const s=[...t.billingNoticeUrlList,t.adQualityCheckUrl].filter(t=>Object(T.h)(t)).map(t=>Qr(t));return e.adImpression.push(...s),Object(T.h)(t.winNoticeUrl)&&e.adWin.push(Qr(t.winNoticeUrl)),e}mS(t,i){if(t.protoLineItem.adType===a.ProtoAdType.Overlay){const e=i.adContainerState.get(a.ProtoAdType.Video),s=i.adContainerState.get(t.protoLineItem.adType);if(e.height!==s.height||e.width!==s.width)return{width:s.width,height:s.height}}return null}gS(t,i){const e={};return t.filter(t=>this.rS.shouldRequestLineItem(t.adManagerLineItem.protoLineItem.advertiserLineItemId)).forEach(t=>{var s,n;const r=t.adManagerLineItem,a=this.mS(r,i),h=this.cS.get(r.protoLineItem.advertiserLineItemId);e[r.protoLineItem.advertiserLineItemId]={availableRequests:t.maxAvailableRequests,gdprConsent:this.xb.services.UserManagerService.isConsent(r.protoLineItem.vendorId),cachedFloorPrice:h||void 0,ignoredFloorPriceFactorIndexes:ch(r),publisherLineItemId:r.protoLineItem.publisherLineItemId,slotHeight:null===(s=a)||void 0===s?void 0:s.height,slotWidth:null===(n=a)||void 0===n?void 0:n.width}}),e}uS(t){const{width:i,height:e,viewability:s}=t.callingState.adContainerState.get(a.ProtoAdType.Video);return{metadata:this.xb.services.TrackingService.getMetadataModel(),gdprCompliant:this.xb.services.UserManagerService.isGDPR(),gdprConsentData:this.xb.services.UserManagerService.getConsentPayload(),soundOn:t.callingState.sound,videoHeight:e,videoWidth:i,testMode:"true"===Object(hh.b)(vh,this.xb.config.pageUrl),explorationMode:this.xb.config.explorationMode,viewability:s,outstream:this.iS,domainURL:this.xb.config.domainURL,isClickToPlay:t.callingState.clickToPlay,appVersion:this.xb.config.appVersion,deviceID:this.xb.services.UserManagerService.getDeviceId(),isCcpaBlockingUserInfo:!this.xb.services.UserManagerService.isSellUserAllowed(),usPrivacyString:this.xb.services.UserManagerService.getUsPrivacyString(),adSkippability:this.eS.adSkippability,skipAdAfter:this.eS.skipAdAfter,gdprConsentMode:this.xb.services.UserManagerService.gdprConsentMode,customMacros:this.xb.services.MacrosService.getExtraMacros(),maxAdDuration:t.maxAdDuration,lineItems:this.gS(t.lineItemRequestDataList,t.callingState)}}dS(t){return this.oS++,th.a.sendProtoRequest({endpoint:dt.a.endPoints.api.rtb,ProtoRequest:a.ProtoRtbRequest,ProtoResponse:a.ProtoRtbResponse,requestData:t,queryParams:{[ah.b]:gi.a.version},logError:!1})}lS(t,i){return 0!==t&&0!==i||(Object(n.a)({message:"AdManager_BidderCaller_dimensions",exception:`width:${t}_height:${i}_destroyed:${f.a.isPlayerDestroyed()}`,throttle:5,level:a.ProtoLoggingLevelEnum.FATAL,sendMaxLog:!0}),!1)}}var gh=e(23),yh=e(39);const wh=[yh.a.P1,yh.a.P2,yh.a.P4,yh.a.P7,yh.a.P8];class xh{constructor(t){this.Fh=t}yS(t,i){let e=[];switch(i){case gh.a.CmpApi:e=ar;break;case gh.a.TcfApi:e=hr}return Object(u.g)(t,e)}wS(t){const i=this.Fh.getGdprConsentApiType();if(this.yS(t,i))return!0;const e=rr[t]||"";return this.Fh.isConsent(e,wh)}xS(t){return!!Object(u.g)(t,or)||!!this.Fh.isSellUserAllowed()}isBidderCallable(t){return this.Fh.isGDPR()?this.wS(t):!this.Fh.isCcpaApplicable()||this.xS(t)}}const kh=(t,i,e,s)=>{const n=(()=>({usePrebidCache:!0,cache:{url:cr},userSync:{iframeEnabled:!0,filterSettings:{iframe:{bidders:"*",filter:"include"}}},ix:{timeout:900}}))();return e&&(n.schain=(t=>({validation:"strict",config:{ver:"1.0",complete:1,nodes:[{asi:t.businessDomain,hp:1,sid:t.supplyChainId?t.supplyChainId:null}]}}))(e)),(t||i)&&(n.consentManagement=((t,i)=>t?{gdpr:{cmpApi:"iab",timeout:2e3,defaultGdprScope:!0,allowAuctionWithoutConsent:!1,rules:[{purpose:"storage",enforcePurpose:!0,enforceVendor:!0},{purpose:"basicAds",enforcePurpose:!0,enforceVendor:!0},{purpose:"measurement",enforcePurpose:!0,enforceVendor:!0}]}}:i?{usp:{cmpApi:"iab",timeout:2e3}}:{})(t,i)),Object(T.h)(s)&&(n.pageUrl=s),n},Sh=[...dr],Oh=[fr.VAST_2_WRAPPER,fr.VAST_2,fr.VAST_3,fr.VAST_3_WRAPPER],_h=[br.VPAID_1,br.VPAID_2],jh=(t,i,e,s,n)=>{const r={code:Object(at.c)(),mediaTypes:{video:{playerSize:[Math.floor(t),Math.floor(i)],context:e?"outstream":"instream",mimes:Sh,protocols:Oh,linearity:pr,api:_h,frameworks:[br.VPAID_1,br.VPAID_2],maxduration:s,minDuration:0}},bids:[]};return Object(T.e)(n)&&(r.floors=(t=>({currency:"USD",schema:{fields:["mediaType"]},values:{video:t}}))(n)),r},Ah={[sr.Telaria]:(t,i)=>{const e=Object.assign({},t);return t.srcPageUrl||(e.srcPageUrl=i.pageUrl),e},[sr.OneVideo]:(t,i)=>{Object(T.h)(t.pubId)||Object(n.a)({message:"AdManager_HeaderBidder_OneVideo_pubId_missing",level:a.ProtoLoggingLevelEnum.FATAL,throttle:2,sendMaxLog:!1});const e=Object.assign(Object.assign({},t),{pubId:t.pubId,video:{playerWidth:Math.floor(i.playerWidth),playerHeight:Math.floor(i.playerHeight),mimes:Sh,protocols:Oh,api:_h},site:{page:i.pageUrl}}),s=i.floorPrice;return Object(T.e)(s)&&(e.bidfloor=s),e},[sr.IndexExchange]:(t,i)=>{const e=t.siteId;if(!Object(T.h)(e))return void Object(n.a)({level:a.ProtoLoggingLevelEnum.FATAL,message:"PrebidJS_IX_adapter_missing_siteId",callStack:i.lineItemId});const s=Object.keys(fr).map(t=>fr[t]),r={siteId:e,size:[Math.floor(i.playerWidth),Math.floor(i.playerHeight)],video:{mimes:dr,minduration:0,maxduration:i.maxDuration,protocols:s}};Object(T.d)(t.minduration)&&(r.video.minduration=t.minduration),Object(T.d)(t.maxduration)&&t.maxduration<=i.maxDuration&&(r.video.maxduration=t.maxduration),Object(T.h)(t.id)&&(r.id=t.id);const h=i.floorPrice;return Object(T.e)(h)&&(r.bidFloor=h,r.bidFloorCur="USD"),r},[sr.Rubicon]:(t,i)=>{const e=Object.assign({},t),s=i.floorPrice;return Object(T.e)(s)&&(e.floor=s),e},[sr.RhythmOne]:(t,i)=>{const e=Object.assign({},t),s=i.floorPrice;return Object(T.e)(s)&&(e.floor=s),e},[sr.Pubmatic]:(t,i)=>{const e=Object.assign({},t),s=i.floorPrice;return Object(T.e)(s)&&(e.kadfloor=String(s)),e},[sr.SpotX]:(t,i)=>{const e=Object.assign({},t),s=i.floorPrice;return Object(T.e)(s)&&(e.price_floor=s),i.isOutstream&&(e.outstream_options={slot:i.bidSlotId}),e},[sr.MediaNet]:(t,i)=>{const e=Object.assign({},t);Object(T.h)(e.cid)||Object(n.a)({level:a.ProtoLoggingLevelEnum.FATAL,message:"PrebidJS_MediaNet_adapter_missing_cid",callStack:i.lineItemId}),Object(T.h)(e.crid)||Object(n.a)({level:a.ProtoLoggingLevelEnum.FATAL,message:"PrebidJS_MediaNet_adapter_missing_crid",callStack:i.lineItemId});const s=i.floorPrice;return Object(T.e)(s)&&(e.bidFloor=s),e.video={api:Object.keys(br).map(t=>br[t]),mimes:Object.keys(dr).map(t=>dr[t]),protocols:Object.keys(fr).map(t=>fr[t]),maxDuration:i.maxDuration,w:i.playerWidth,h:i.playerHeight},e},[sr.Adman]:(t,i)=>{const e=Object.assign({},t);return Object(T.h)(e.placementId)||Object(n.a)({level:a.ProtoLoggingLevelEnum.FATAL,message:"PrebidJS_Adman_adapter_missing_placementId",callStack:i.lineItemId}),e},[sr.IronSource]:(t,i)=>{const e=Object.assign({},t);Object(T.h)(e.isOrg)||Object(n.a)({level:a.ProtoLoggingLevelEnum.FATAL,message:"PrebidJS_IronSource_adapter_missing_isOrg_string",callStack:i.lineItemId});const{floorPrice:s}=i;return Object(T.e)(s)&&(e.floorPrice=s),e},[sr.Undertone]:(t,i)=>{const e=Object.assign({},t);return Object(T.h)(e.placementId)||Object(n.a)({level:a.ProtoLoggingLevelEnum.FATAL,message:"PrebidJS_Undertone_adapter_missing_placementId",callStack:i.lineItemId}),Object(T.d)(e.publisherId)||Object(n.a)({level:a.ProtoLoggingLevelEnum.FATAL,message:"PrebidJS_Undertone_adapter_missing_publisherId",callStack:i.lineItemId}),e},[sr.SynacorMedia]:(t,i)=>{const e=Object.assign({},t);Object(T.h)(e.seatId)||Object(n.a)({level:a.ProtoLoggingLevelEnum.FATAL,message:"PrebidJS_SynacorMedia_adapter_missing_seatId",callStack:i.lineItemId}),Object(T.h)(e.tagId)||Object(n.a)({level:a.ProtoLoggingLevelEnum.FATAL,message:"PrebidJS_SynacorMedia_adapter_missing_tagId",callStack:i.lineItemId});const s=i.floorPrice;return Object(T.e)(s)&&(e.bidfloor=s),e.video={api:Object.keys(br).map(t=>br[t]),mimes:Object.keys(dr).map(t=>dr[t]),protocols:Object.keys(fr).map(t=>fr[t]),maxduration:i.maxDuration},e},[sr.AmxRTB]:(t,i)=>{const e=Object.assign({},t),s=i.floorPrice;return Object(T.e)(s)&&(e.floor=s),e},[sr.Smaato]:(t,i)=>{const e=Object.assign({},t);return Object(T.h)(e.publisherId)||Object(n.a)({level:a.ProtoLoggingLevelEnum.FATAL,message:"PrebidJS_Smaato_adapter_missing_publisherId",callStack:i.lineItemId}),Object(T.h)(e.adspaceId)||Object(n.a)({level:a.ProtoLoggingLevelEnum.FATAL,message:"PrebidJS_Smaato_adapter_missing_adspaceId",callStack:i.lineItemId}),e}},Ih=(t,i)=>{try{const e=JSON.parse(t);return e.length>1&&Object(n.a)({message:"AdManager_AdSourceWrappe_multiple_bidders",level:a.ProtoLoggingLevelEnum.WARNING,callStack:i,exception:t,throttle:1,sendMaxLog:!1}),e[0].bidder}catch(e){Object(n.a)({message:"AdManager_AdSourceWrapper_cannot_get_bidder",level:a.ProtoLoggingLevelEnum.WARNING,callStack:i,exception:t,throttle:2,sendMaxLog:!1})}};class Th{constructor(t,i,e,s,n){this.kS=t,this.qe=i,this.iS=e,this.SS=s,this.OS=n}requestHeaderBidder(t,i,e){return new Promise((s,n)=>{this._S().then(()=>{const n=t.map(t=>this.jS(t,i,e).then(t=>t));Promise.all(n).then(t=>{s(t)})}).catch(t=>{n(a.ConnatixNoBidReasonEnum.NoBid)})})}jS(t,i,e){return new Promise(s=>{let n=[];const r=t.lineItem.floorPrices;if(Object(u.h)(r)){n=this.AS(r,t.ignoredFloorPriceIndexes,t.availableRequests).map(s=>this.IS(t.lineItem,s.floorPrice,s.floorPriceIndex,i,e,r,t.maxAdDuration))}else if(!Object(u.h)(t.ignoredFloorPriceIndexes)&&t.availableRequests>0){const s=0,a=this.IS(t.lineItem,t.lineItem.floorPrice,s,i,e,r,t.maxAdDuration);n.push(a)}Promise.all(n).then(i=>{const e=[],n=[],r=t.lineItem.advertiserLineItemId;i.forEach(t=>{t.reason?n.push(t):e.push(t)}),s({bids:e,noBids:n,lineItemId:r})})})}IS(t,i,e,s,n,r,a){return new Promise(h=>{this.TS(t,i,e,s,n,r,a).then(t=>{h(t)}).catch(t=>{h(t)})})}_S(){return new Promise((t,i)=>{window.pbjs?(this.CS=window.pbjs,t()):Object(j.A)({src:ur},window.document.head,window,()=>{this.CS=window.pbjs,this.PS(),t()},()=>{i(a.ConnatixNoBidReasonEnum.NoBid)},!0,"AdManager_HeaderBidder_unable_to_insert_prebidJs_script")})}PS(){const t=kh(this.SS,this.OS,this.kS,this.qe);window.pbjs.setConfig(t)}TS(t,i,e,s,r,h,o){return new Promise((c,l)=>{const u=jh(s,r,this.iS,o,i);try{const s=t.headerBidderBids;u.bids=JSON.parse(s)}catch(t){return Object(n.a)({message:"AdManager_HeaderBidder_unable_to_parse_header_bidder",exception:t.message,callStack:t.stack,level:a.ProtoLoggingLevelEnum.WARNING}),void l({reason:a.ConnatixNoBidReasonEnum.NoBid,floorPrice:i,floorPriceIndex:e})}const d=Sa();u.bids.forEach(e=>this.MS(e,s,r,i,t.advertiserLineItemId,o,d)),this.CS.que.push(()=>{this.CS.addAdUnits(u);const s={timeout:t.headerBidderTimeout,adUnits:[u],bidsBackHandler:()=>{try{let s;if(!(s=this.CS.getHighestCpmBids(u.code)[0]))return void l({reason:a.ConnatixNoBidReasonEnum.CsEmptyResponse,floorPrice:i,floorPriceIndex:e});if(!this.ES(s))return Object(n.a)({level:a.ProtoLoggingLevelEnum.WARNING,message:"AdManager_HeaderBidder_no_content",exception:JSON.stringify(s)}),void l({reason:a.ConnatixNoBidReasonEnum.CsInvalidResponse,floorPrice:i,floorPriceIndex:e});const r=this.LS(s),o=s.cpm||s.adResponse.ad.cpm,{advertiserLineItemId:f}=t,p={adTag:r,lineItemId:f,floorPrice:i,floorPriceIndex:e,cpm:o,slotId:d};Object(T.e)(i)&&o<i&&Object(n.a)({message:"AdManager_HeaderBidderRequester_cpm_lower_than_floorprice",level:a.ProtoLoggingLevelEnum.WARNING,sendMaxLog:!1,throttle:5,exception:`floorPrices_${h}_index_${e}_cpm_${o}_li_${t.advertiserLineItemId}`,callStack:Ih(t.headerBidderBids,t.advertiserLineItemId)}),c(p)}catch(t){Object(n.a)({level:a.ProtoLoggingLevelEnum.WARNING,message:"AdManager_HeaderBidder_Prebidjs_error",exception:t.message,callStack:t.stack}),l({reason:a.ConnatixNoBidReasonEnum.NoBid,floorPrice:i,floorPriceIndex:e})}}};this.CS.requestBids(s)})})}MS(t,i,e,s,n,r,a){const h=Ah[t.bidder];h&&(t.params=h(t.params,{playerWidth:i,playerHeight:e,maxDuration:r,pageUrl:this.qe,floorPrice:s,lineItemId:n,isOutstream:this.iS,bidSlotId:a}))}ES(t){return t.adserverTargeting&&Object(T.h)(t.adserverTargeting.hb_cache_id)}LS(t){return`${cr}?uuid=${t.adserverTargeting.hb_cache_id}`}AS(t,i,e){const s=[];let n=0;for(let r=0;r<t.length;r++)-1===i.indexOf(r)&&n<e&&(s.push({floorPrice:t[r],floorPriceIndex:r}),n++);return s}}class Ch{constructor(t,i,e,s,n,r,a,h){this.iS=t,this.kS=i,this.xb=e,this.sS=s,this.nS=n,this.aS=r,this.hS=a,this.ox=h,this.RS=new Map,this.BS=new Th(this.kS,this.xb.config.pageUrl,this.iS,this.xb.services.UserManagerService.isGDPR(),this.xb.services.UserManagerService.isCcpaApplicable()),this.DS=new xh(this.xb.services.UserManagerService)}request(t){const{width:i,height:e}=t.callingState.adContainerState.get(a.ProtoAdType.Video),s=this.lS(i,e),n=this.FS(t.lineItemRequestDataList);return Object(u.h)(n)&&s?(t.lineItemRequestDataList=n,this.$S(t).then(i=>Promise.resolve(this.VS(i,t))).catch(()=>Promise.resolve({bids:[],noBids:[]}))):Promise.resolve({bids:[],noBids:[]})}destroy(){}VS(t,i){const e={bids:[],noBids:[]};return t.forEach(t=>{const s=oh(i.lineItemRequestDataList,t.lineItemId);t.bids.forEach(t=>{const n=new Gr,r=new nh({requestedFloorPrice:t.floorPrice,requestedFloorPriceIndex:t.floorPriceIndex,prebidJsBidderName:this.NS(s)});Jr(s.protoLineItem.trackers,n),e.bids.push(new sh({id:Object(at.c)(),adManagerLineItem:s,replaceTrackingMacros:!0,requestMetadata:r,trackersInformation:n,url:t.adTag,callingState:i.callingState,adMacroReplacer:this.sS,adContainer:this.nS.get(s.protoLineItem.adType),globalDomUtilsService:this.xb.services.GlobalDomUtilsService,viewabilityService:this.xb.services.ViewabilityService,trackingService:this.xb.services.TrackingService,cpm:t.cpm,adEnforcer:this.aS,os:this.xb.config.os.os,adSlotContainerRecycler:this.hS,bidSlotId:t.slotId,loopAdWhenFinished:this.ox,pageUrl:this.xb.config.pageUrl}))}),t.noBids.forEach(t=>{const i=new nh({requestedFloorPrice:t.floorPrice,requestedFloorPriceIndex:t.floorPriceIndex});e.noBids.push({lineItem:s,requestMetadata:i,reason:t.reason})})}),e}$S(t){const{width:i,height:e}=t.callingState.adContainerState.get(a.ProtoAdType.Video),s=t.lineItemRequestDataList.map(i=>this.HS(i,t.maxAdDuration));return this.BS.requestHeaderBidder(s,i,e)}HS(t,i){const e=t.adManagerLineItem;return{availableRequests:t.maxAvailableRequests,lineItem:e.protoLineItem,ignoredFloorPriceIndexes:ch(e),maxAdDuration:i}}FS(t){return t.filter(t=>{const i=this.NS(t.adManagerLineItem);return this.qS(i)})}lS(t,i){return 0!==t&&0!==i||(Object(n.a)({message:"AdManager_PrebidAggregator_dimensions",exception:`width:${t}_height:${i}_destroyed:${f.a.isPlayerDestroyed()}`,throttle:5,level:a.ProtoLoggingLevelEnum.FATAL,sendMaxLog:!0}),!1)}qS(t){return this.DS.isBidderCallable(t)}NS(t){const i=this.RS.get(t);return Object(T.h)(i)?i:Ih(t.protoLineItem.headerBidderBids,t.protoLineItem.advertiserLineItemId)||""}}const Ph={libPropertyName:"apstag",mediaType:"video"},Mh="load";class Eh{constructor(t,i){this.xb=t,this.zS=i,this.WS=()=>{this.GS||this.JS(),this.QS&&clearInterval(this.QS),this.GS||Object(n.a)({message:"TamRequester_TAM_lib_not_found_on_page_loaded",level:a.ProtoLoggingLevelEnum.WARNING})};const e=this.xb.config.topWindow;this.XS=Object(at.f)(e).topFrame,this.JS()}requestBids(t){const i=t.map(t=>this.YS(t));return Promise.all(i)}destroy(){this.QS&&clearInterval(this.QS),this.XS.removeEventListener(Mh,this.WS)}YS(t){return this.KS(this.zS,Ph.mediaType).then(i=>this.ZS(t,i)).then(i=>({bids:[i],lineItemId:t.advertiserLineItemId,noBids:[]})).catch(i=>({bids:[],lineItemId:t.advertiserLineItemId,noBids:[{reason:i}]}))}KS(t,i){return new Promise((e,s)=>{this.GS||s(a.ConnatixNoBidReasonEnum.NoLibInPage),this.GS.fetchBids({slots:[{slotID:t,mediaType:i}]},t=>{Object(u.h)(t)?e(t[0]):s(a.ConnatixNoBidReasonEnum.EmptyResponse)})})}ZS(t,i){const e={lineItemId:t.advertiserLineItemId,code:i.amznbid,metadata:this.xb.services.TrackingService.getMetadataModel(),exploration:this.xb.config.explorationMode};return new Promise((t,s)=>{th.a.sendProtoRequest({endpoint:dt.a.endPoints.api.tam,ProtoRequest:a.ProtoCoreTamBidRequest,ProtoResponse:a.ProtoCoreTamBidResponse,requestData:e,queryParams:{[ah.b]:gi.a.version},logError:!0}).then(e=>{Object(T.h)(e.errorMessage)?s(a.ConnatixNoBidReasonEnum.RequestException):e.encryptedBidPrice?t({encryptedPrice:e.encryptedBidPrice,vastTag:`https://aax.amazon-adsystem.com/e/dtb/vast?b=${i.amzniid}&rnd=${Object(at.c)()}&pp=${i.amznbid}`,ofskp:e.ofskp,successRate:e.successRate,slotId:Sa()}):s(a.ConnatixNoBidReasonEnum.InvalidResponse)}).catch(()=>{s(a.ConnatixNoBidReasonEnum.RequestException)})})}JS(){this.XS[Ph.libPropertyName]?this.GS=this.XS[Ph.libPropertyName]:this.QS||"complete"!==this.XS.document.readyState&&(this.XS.addEventListener(Mh,this.WS),this.QS=setInterval(()=>{this.JS()},B.f)),this.GS&&clearInterval(this.QS)}}class Lh{constructor(t,i,e,s,n,r){this.xb=t,this.tO=i,this.sS=e,this.nS=s,this.aS=n,this.hS=r,this.iO=new Eh(this.xb,this.tO)}request(t){const{width:i,height:e}=t.callingState.adContainerState.get(a.ProtoAdType.Video);return this.lS(i,e)?this.eO(t).then(i=>Promise.resolve(this.sO(i,t))).catch(()=>Promise.resolve({bids:[],noBids:[]})):Promise.resolve({bids:[],noBids:[]})}destroy(){this.iO.destroy()}eO(t){const i=t.lineItemRequestDataList.map(t=>t.adManagerLineItem.protoLineItem);return this.iO.requestBids(i)}sO(t,i){const e={bids:[],noBids:[]};return t.forEach(t=>{const s=oh(i.lineItemRequestDataList,t.lineItemId);t.bids.forEach(t=>{const n=new Gr,r=new nh({encryptedPrice:t.encryptedPrice});Jr(s.protoLineItem.trackers,n),e.bids.push(new sh({id:Object(at.c)(),adManagerLineItem:s,replaceTrackingMacros:!0,requestMetadata:r,trackersInformation:n,url:t.vastTag,bidSlotId:t.slotId,callingState:i.callingState,adMacroReplacer:this.sS,adContainer:this.nS.get(s.protoLineItem.adType),globalDomUtilsService:this.xb.services.GlobalDomUtilsService,viewabilityService:this.xb.services.ViewabilityService,trackingService:this.xb.services.TrackingService,adEnforcer:this.aS,requestWithCredentials:!1,successRate:t.successRate,obfuscatedPrice:t.ofskp,os:this.xb.config.os.os,adSlotContainerRecycler:this.hS,pageUrl:this.xb.config.pageUrl}))}),t.noBids.forEach(t=>{e.noBids.push({lineItem:s,requestMetadata:new nh,reason:t.reason})})}),e}lS(t,i){return 0!==t&&0!==i||(Object(n.a)({message:"AdManager_PrebidAggregator_dimensions",exception:`width:${t}_height:${i}_destroyed:${f.a.isPlayerDestroyed()}`,throttle:5,level:a.ProtoLoggingLevelEnum.FATAL,sendMaxLog:!0}),!1)}}const Rh=[[88,31],[120,20],[120,30],[120,60],[120,90],[125,125],[168,28],[168,42],[180,150],[200,200],[200,446],[216,36],[216,54],[220,90],[234,60],[240,133],[250,250],[250,360],[292,30],[300,31],[300,50],[300,75],[300,100],[300,250],[320,50],[320,100],[320,240],[336,280],[400,350],[468,60],[480,320]],Bh="domains";class Dh{constructor(t,i,e){this.nO=t,this.rO=i,this.aO=e,this.Dk=`div-gpt-ad-1589549806211-${Object(at.c)()}`,this.Fk=new Vr,this.Rw=new Vr,this.yw=new Vr}get onCreativeReceived(){return this.yw.asObservable()}get onDisplayAd(){return this.Fk.asObservable()}get onError(){return this.Rw.asObservable()}getAdMediaHeight(){return this.hO?this.hO.clientHeight:0}getAdMediaWidth(){return this.hO?this.hO.clientWidth:0}initializeAd(t,i){try{this.oO=t,this.iw(t);const e=this.cO(i.width,i.height);this.nO.cmd.push(()=>{this.lO=this.nO.defineSlot(this.aO,e,this.Dk).addService(this.nO.pubads()).setTargeting(Bh,this.rO),this.nO.enableServices(),this.uO(this.lO),this.nO.pubads().isInitialLoadDisabled()&&this.nO.pubads().refresh([this.lO]),this.nO.display(this.Dk)})}catch(t){this.Rw.next(ia.c.WrapperInitAdError)}}destroy(){this.nO.cmd.push(()=>{this.nO.destroySlots&&this.lO&&this.nO.destroySlots([this.lO])})}uO(t){this.nO.pubads().addEventListener("slotOnload",i=>{var e,s,r;if(i.slot===t){try{const t=null===(r=null===(s=null===(e=i)||void 0===e?void 0:e.slot)||void 0===s?void 0:s.getResponseInformation())||void 0===r?void 0:r.creativeId;t&&this.yw.next(t.toString())}catch(t){Object(n.a)({message:"AdManager_GptWrapper_creativeId",level:a.ProtoLoggingLevelEnum.WARNING,exception:t.message,callStack:t.stack})}this.Fk.next()}}),this.nO.pubads().addEventListener("slotRenderEnded",t=>{var i;if(t.slot===this.lO){try{this.hO=null===(i=this.oO)||void 0===i?void 0:i.getElementsByTagName("iframe")[0],Object(T.a)(this.lO)&&Object(j.H)(this.hO.contentWindow,"GPTWrapper")}catch(t){}t.isEmpty&&this.Rw.next(ia.c.AdxOverlayNoFill)}})}iw(t){t.id=this.Dk}cO(t,i){return Rh.filter(e=>!Array.isArray(e)||!Object(u.i)(e)||Object(u.h)(e)&&e[0]<=t&&e[1]<=i)}}var Fh=e(54);const $h=500;class Uh extends ua{constructor(t){super(t),this.settings=t,this.adMediaType="displayAdx",this.adSourceType=a.ProtoAdsourceTypeEnum.Unknown,this.Xk="adx",this.dO={[rh.FirstQuartile]:w.b.AdVideoFirstQuartile,[rh.SecondQuartile]:w.b.AdVideoMidpoint,[rh.ThirdQuartile]:w.b.AdVideoThirdQuartile,[rh.FourthQuartile]:w.b.AdVideoComplete},this.fO=[];const i=this.settings.adManagerLineItem.protoLineItem.overlayTime*B.f;this.Kk=new dh(i,$h),this.fO.push(this.Kk.onTimeUpdate.subscribe(()=>{this.Hy({type:w.b.AdRemainingTimeChange})}),this.Kk.onTimeElapsed.subscribe(()=>{this.stopAd("adxTimerElapsed")}),this.Kk.onQuartile.subscribe(t=>{this.Hy({type:this.dO[t],payload:{}})}))}initAd(t,i,e,s,n,r,a){try{super.initAd(t,i,e,s,n,r,a),this.pO={width:t,height:i},this.bO().then(t=>{this.vO=new Dh(t,this.settings.domain,this.settings.adxAdUnitPath),this.fO.push(this.vO.onCreativeReceived.subscribe(t=>{this.creativeId=t})),this.Hy({type:w.b.AdLoaded,payload:{skipOffset:0}})}).catch(t=>{this.Hy({type:w.b.AdError,payload:{errorMessage:ia.c.AdxOverlayGptScriptLoad+`_${t.message}`}})})}catch(t){this.Hy({type:w.b.AdError,payload:{errorMessage:ia.c.AdaptorInitAdError+`_${t.message}`}})}}startAd(){try{super.startAd(),this.fO.push(this.vO.onDisplayAd.subscribe(()=>{this.Hy({type:w.b.AdStarted}),this.Hy({type:w.b.AdVideoStart}),this.Hy({type:w.b.AdImpression,payload:{}}),this.Kk.start()}),this.vO.onError.subscribe(t=>{this.Hy({type:w.b.AdError,payload:{errorMessage:t}}),this.Kk.stop()})),this.vO.initializeAd(this.wv,this.pO)}catch(t){this.Hy({type:w.b.AdError,payload:{errorMessage:ia.c.AdaptorStartAdError+`_${t.exception}`}})}}stopAd(t){try{super.stopAd(t),this.Kk.stop(),this.Hy({type:w.b.AdStopped,payload:{shouldTrackPostBid:!0}})}catch(t){this.uw("AdxBidAdaptor","stopAd",t)}}resizeAd(t,i,e){this.pO&&(this.pO.width=t,this.pO.height=i)}pauseAd(){try{this.Kk.stop(),this.Hy({type:w.b.AdPaused})}catch(t){this.uw("AdxBidAdaptor","pauseAd",t)}}resumeAd(){try{this.Kk.start(),this.Hy({type:w.b.AdPlaying})}catch(t){this.uw("AdxBidAdaptor","resumeAd",t)}}expandAd(){}collapseAd(){}skipAd(){try{super.skipAd(),this.Hy({type:w.b.AdSkipped})}catch(t){this.uw("AdxBidAdaptor","skipAd",t)}}getAdRemainingTime(){return this.Kk.timeRemaining/B.f}getAdDuration(){return this.Kk.timerDuration/B.f}getAdVolume(){return 0}getAdMediaSize(){return{width:this.vO.getAdMediaWidth(),height:this.vO.getAdMediaHeight()}}setAdVolume(t){}get adVideoUrl(){return this.Xk}get declaredDurationInSeconds(){return this.settings.adManagerLineItem.protoLineItem.duration}bO(){const t=Object(at.f)(window).topFrame;if(t.googletag)return Promise.resolve(t.googletag);{const i={cmd:[]};return t.googletag=window.googletag||i,new Promise((i,e)=>{Object(j.A)({src:Fh.a},t.document.head,t,()=>{i(t.googletag)},()=>{e()})})}}jc(){var t;try{super.jc(),this.Kk.stop(),na(this.fO),null===(t=this.vO)||void 0===t||t.destroy()}catch(t){this.uw("AdxBidAdaptor","_destroy",t)}}}const Vh="https://adx.connatix.com";class Nh{constructor(t){this.settings=t,this.metrics={created:(new Date).getTime()}}fetchBid(){this.metrics.fetchStart=(new Date).getTime();const t=new Uh({id:this.settings.id,adManagerLineItem:this.settings.adManagerLineItem,trackers:this.settings.trackersInformation,adxAdUnitPath:this.mO(this.settings.url),requestMetadata:this.settings.requestMetadata,callingState:this.settings.callingState,domain:this.settings.pageDomain,adContainer:this.settings.adContainer,globalDomUtilsService:this.settings.globalDomUtilsService,viewabilityService:this.settings.viewabilityService,cpm:this.settings.cpm,successRate:this.settings.successRate,obfuscatedPrice:this.settings.obfuscatedPrice,adEnforcer:this.settings.adEnforcer,os:this.settings.os,adSlotContainerRecycler:this.settings.adSlotContainerRecycler,bidSlotId:this.settings.bidSlotId});return this.metrics.fetchEnd=(new Date).getTime(),Promise.resolve(t)}mO(t){return t.substr(Vh.length)}}class Hh extends ua{constructor(t){super(t),this.settings=t,this.adMediaType="cnxMedia",this.adSourceType=a.ProtoAdsourceTypeEnum.CnxMedia,this.gO=[]}initAd(t,i,e,s,n,r,a){try{let h;super.initAd(t,i,e,s,n,r,a);let o=!1;if(Object(T.h)(this.settings.externalMediaFile))h=this.settings.externalMediaFile;else if(Object(T.h)(this.settings.externalHlsFile))h=this.settings.externalHlsFile,o=!0;else{if(!Object(u.h)(this.settings.renditions))return void this.Hy({type:w.b.AdError,payload:{errorMessage:ia.c.CnxMediaNoRenditions}});h=this.yO(this.settings.renditions,i,this.settings.mediaId)}this.wO=h,this.xO=new Ma(this.settings.globalDomUtilsService,this.wO,this.Ey,this.settings.os,this.settings.clickUrl,this.settings.loopAdWhenFinished,this.settings.pauseAdWhenFinished,o,this.settings.inApp),this.gO.push(this.xO.onVpaidEvent.subscribe(t=>{this.Hy(t)})),this.xO.initAd(t,i,e,s,n,{slot:this.wv,videoSlot:this.Ey})}catch(t){this.Hy({type:w.b.AdError,payload:{errorMessage:ia.c.AdaptorInitAdError+`_${t.message}`}})}}startAd(){try{super.startAd(),this.xO.startAd()}catch(t){this.Hy({type:w.b.AdError,payload:{errorMessage:ia.c.AdaptorStartAdError+`_${t.message}`}})}}stopAd(t){super.stopAd(t),this.xO?this.xO.stopAd(t):Object(n.a)({message:"stopAd",exception:t,level:a.ProtoLoggingLevelEnum.WARNING})}resizeAd(t,i,e){try{this.xO.resizeAd(t,i,e)}catch(t){this.uw("CnxMediaBidAdaptor","resizeAd",t)}}pauseAd(){try{this.xO.pauseAd()}catch(t){this.uw("CnxMediaBidAdaptor","pauseAd",t)}}resumeAd(){try{this.xO.resumeAd()}catch(t){this.uw("CnxMediaBidAdaptor","resumeAd",t)}}expandAd(){try{this.xO.expandAd()}catch(t){this.uw("CnxMediaBidAdaptor","expandAd",t)}}collapseAd(){try{this.xO.collapseAd()}catch(t){this.uw("CnxMediaBidAdaptor","collapseAd",t)}}skipAd(){try{super.skipAd(),this.xO.skipAd()}catch(t){this.uw("CnxMediaBidAdaptor","skipAd",t)}}getAdRemainingTime(){try{return this.xO.getAdRemainingTime()}catch(t){return this.uw("CnxMediaBidAdaptor","getAdRemainingTime",t),0}}getAdDuration(){try{return this.xO?this.xO.getAdDuration():this.settings.adManagerLineItem.protoLineItem.duration}catch(t){return this.uw("CnxMediaBidAdaptor","getAdDuration",t),0}}getAdVolume(){try{return this.xO.getAdVolume()}catch(t){return this.uw("CnxMediaBidAdaptor","getAdVolume",t),0}}getAdMediaSize(){return{width:this.xO.getAdMediaWidth(),height:this.xO.getAdMediaHeight()}}setAdVolume(t){try{super.setAdVolume(t),this.xO.setAdVolume(t)}catch(t){this.uw("CnxMediaBidAdaptor","setAdVolume",t)}}get adVideoUrl(){return this.wO}get declaredDurationInSeconds(){return this.settings.adManagerLineItem.protoLineItem.duration}jc(){var t;if(!this.settings.pauseAdWhenFinished&&!this.settings.loopAdWhenFinished)try{super.jc(),na(this.gO),null===(t=this.xO)||void 0===t||t.destroy()}catch(t){this.uw("CnxMediaBidAdaptor","_destroy",t)}}yO(t,i,e){let s,n;return n=t.filter(t=>t.codec===Y.H264),s=Object(rt.c)(i,n.map(t=>t.height)),(n=n.filter(t=>t.height===s)).length>0?`${dt.a.endPoints.base.video}${e}/${n[0].file}`:null}}class qh{constructor(t){this.settings=t,this.metrics={created:(new Date).getTime()}}fetchBid(){this.metrics.fetchStart=(new Date).getTime();const t=new Hh({id:this.settings.id,adManagerLineItem:this.settings.adManagerLineItem,trackers:this.settings.trackersInformation,mediaId:this.settings.mediaId,renditions:this.settings.renditions,clickUrl:this.settings.clickUrl,requestMetadata:this.settings.requestMetadata,callingState:this.settings.callingState,globalDomUtilsService:this.settings.globalDomUtilsService,viewabilityService:this.settings.viewabilityService,adContainer:this.settings.adContainer,cpm:this.settings.cpm,obfuscatedPrice:this.settings.obfuscatedPrice,adEnforcer:this.settings.adEnforcer,externalMediaFile:this.settings.adManagerLineItem.protoLineItem.externalMediaFile,externalHlsFile:this.settings.adManagerLineItem.protoLineItem.externalHlsFile,pauseAdWhenFinished:this.settings.pauseAdWhenFinished,loopAdWhenFinished:this.settings.loopAdWhenFinished,inApp:this.settings.inApp,os:this.settings.os,adSlotContainerRecycler:this.settings.adSlotContainerRecycler,bidSlotId:this.settings.bidSlotId});return this.metrics.fetchEnd=(new Date).getTime(),Promise.resolve(t)}}var zh;!function(t){t[t.IDLE=0]="IDLE",t[t.RUNNING=1]="RUNNING",t[t.STOPPING=2]="STOPPING"}(zh||(zh={}));class Wh{constructor(t){this.kO=t,this.Gt=zh.IDLE,this.SO=Promise.resolve()}start(){this.Gt===zh.IDLE?(this.Gt=zh.RUNNING,this.OO()):this.Gt===zh.STOPPING&&(this.Gt=zh.RUNNING,this.OO())}stop(){this.Gt=zh.STOPPING}setPromiseNotifier(t){return this._O=t,this}setIdleNotifier(t){return this.jO=t,this}getState(){return this.Gt}AO(){const t=this.kO();void 0!==t?this.SO=t.then(t=>{this._O&&this._O(t)}).then(()=>{this.Gt===zh.STOPPING&&(this.Gt=zh.IDLE)}):this.Gt=zh.IDLE}OO(){this.Gt===zh.IDLE?this.jO&&this.jO():this.Gt===zh.RUNNING&&(this.AO(),this.SO.then(()=>{this.OO()}))}}class Gh{constructor(t,i=1){this.kO=t,this.IO=i,this.TO=[],this.CO(i)}start(){return this.TO.forEach(t=>{t.start()}),this}stop(){return this.TO.forEach(t=>{t.stop()}),this}setPromiseNotifier(t){return this.TO.forEach(i=>{i.setPromiseNotifier(t)}),this}setAllThreadsIdleNotifier(t){return this.PO=t,this.MO(),this}setNumberOfThreads(t){if(t<=0)return;this.IO=t;const i=t-this.IO;i>0?this.CO(i):i<0&&this.EO(i)}getState(){return this.TO.reduce((t,i)=>(t[i.getState()]++,t),{[zh.IDLE]:0,[zh.RUNNING]:0,[zh.STOPPING]:0})}CO(t){for(let i=0;i<t;i++){const t=new Wh(this.kO).setPromiseNotifier(this._O);this.TO.push(t)}}EO(t){t=Math.min(t,this.TO.length);for(let i=0;i<t;i++)this.TO.pop().stop()}MO(){const t=()=>{this.getState()[zh.IDLE]===this.TO.length&&this.PO()};this.TO.forEach(i=>{i.setIdleNotifier(t)})}}class Jh{constructor(){this.LO=[]}canCall(t,i){return this.LO.every(e=>e.canCall(t,i))}registerRequestForLineItem(t,i){return this.LO.forEach(e=>{e.registerRequestForLineItem(t,i)}),this}registerImpressionForLineItem(t,i){return this.LO.forEach(e=>{e.registerImpressionForLineItem(t,i)}),this}registerCallingValidator(t){return this.LO.push(t),this}registerCallingValidators(t){return t.forEach(t=>{this.registerCallingValidator(t)}),this}destroy(){this.LO.forEach(t=>{t.destroy()})}}e(48);class Qh{constructor(){this.initialized=!1,this.logged=!1,this.startTime=0,this.winIds=[]}}class Xh{constructor(){this.adSlotType=a.ProtoAdBreakTypeEnum[a.ProtoAdBreakTypeEnum.PreRoll],this.timeToFirstBid=-1,this.timeToFirstWin=-1,this.timeToFirstStartAd=-1,this.timeToFirstAdImpression=-1,this.numberOfBids=0,this.numberOfWins=0,this.numberOfPostBids=0,this.indexOfWinThatGaveImpression=-1}}class Yh{constructor(){this.metadata=new Qh,this.metrics=new Xh}}const Kh=new Map;function Zh(t){return Kh.has(t)||Kh.set(t,new Yh),Kh.get(t)}var to;!function(t){function i(t){if(!Kh.has(t))return;if(!Object(at.l)([95,5]))return;const i=Kh.get(t);i.metadata.initialized&&!i.metadata.logged&&(i.metadata.logged=!0,Object(n.a)({message:"Preroll_Problem_Logs",exception:JSON.stringify(i.metrics),level:a.ProtoLoggingLevelEnum.INFO}))}t.initialize=function(t){const i=Zh(t);i.metadata.initialized=!0,i.metadata.startTime=(new Date).getTime()},t.log=i,t.trackBid=function(t){const i=Zh(t);0===i.metrics.numberOfBids&&(i.metrics.timeToFirstBid=(new Date).getTime()-i.metadata.startTime),i.metrics.numberOfBids++},t.trackStartAd=function(t){const i=Zh(t);-1===i.metrics.timeToFirstStartAd&&(i.metrics.timeToFirstStartAd=(new Date).getTime()-i.metadata.startTime)},t.trackAdImpression=function(t,e){const s=Zh(t);-1===s.metrics.timeToFirstAdImpression&&(s.metrics.timeToFirstAdImpression=(new Date).getTime()-s.metadata.startTime),s.metrics.indexOfWinThatGaveImpression=s.metadata.winIds.indexOf(e.settings.id),i(t)},t.trackPostBid=function(t){Zh(t).metrics.numberOfPostBids++},t.trackWin=function(t,i){const e=Zh(t);e.metadata.winIds.push(i.settings.id),0===e.metrics.numberOfWins&&(e.metrics.timeToFirstWin=(new Date).getTime()-e.metadata.startTime),e.metrics.numberOfWins++}}(to||(to={}));const io=4;class eo{constructor(t){this.settings=t,this.RO=new Map,this.Gg=[],this.BO=!1,this.DO=new Vr,this.FO=()=>{const t=this.$O();if(t)return this.UO(t.lineItemList),this.VO(t.lineItemList,t.state).then(()=>{this.NO(t.lineItemList),this.HO()}).catch(()=>{this.NO(t.lineItemList),this.HO()})},this.qO=(t,i)=>{return this.settings.adCallerYo.getWinningYoScore(i.settings.id)-this.settings.adCallerYo.getWinningYoScore(t.settings.id)},this.settings.lineItemList.forEach(t=>{lh(t.protoLineItem.creativeType)?t.protoLineItem.timeBetweenRequests=10:t.protoLineItem.timeBetweenRequests=6}),this.Gg.push(this.settings.lineItemServices.lineItemServicesTimer.onTimer().subscribe(()=>{this.zO()}),this.settings.adBidPool.onBidConsumed.subscribe(()=>{this.zO()}),this.settings.adBidPool.onBidLoadingConsumed.subscribe(()=>{this.zO()}),this.settings.adBidPool.onBidReadyConsumed.subscribe(()=>{this.zO()})),this.WO=(new Jh).registerCallingValidators([this.settings.lineItemServices.requestCapsService,this.settings.lineItemServices.impressionCapsService,this.settings.lineItemServices.timeBetweenRequestsService]),this.GO=new Gh(this.FO,io),this.settings.lineItemList.find(t=>t.protoLineItem.creativeType===a.ProtoCreativeTypeEnum.Rtb)&&this.RO.set(a.ProtoCreativeTypeEnum.Rtb,{auctionPending:!1,caller:new mh(this.settings.isOutstream,this.settings.skipAdSettings,this.settings.app,this.settings.adMacroReplacer,this.settings.adContainerMap,this.settings.adRequestGatekeeper,this.settings.adEnforcer,this.settings.adSlotContainerRecycler)}),this.settings.lineItemList.find(t=>t.protoLineItem.creativeType===a.ProtoCreativeTypeEnum.HeaderBidder)&&this.RO.set(a.ProtoCreativeTypeEnum.HeaderBidder,{auctionPending:!1,caller:new Ch(this.settings.isOutstream,this.settings.schainSettings,this.settings.app,this.settings.adMacroReplacer,this.settings.adContainerMap,this.settings.adEnforcer,this.settings.adSlotContainerRecycler,this.settings.loopAdWhenFinished)}),this.settings.lineItemList.find(t=>t.protoLineItem.creativeType===a.ProtoCreativeTypeEnum.Tam)&&this.RO.set(a.ProtoCreativeTypeEnum.Tam,{auctionPending:!1,caller:new Lh(this.settings.app,this.settings.amazonSlotId,this.settings.adMacroReplacer,this.settings.adContainerMap,this.settings.adEnforcer,this.settings.adSlotContainerRecycler)}),this.GO.setAllThreadsIdleNotifier(()=>{this.settings.lineItemServices.lineItemServicesTimer.start()})}get onFirstAggregatedBatchFinished(){return this.DO.asObservable()}call(t){this.GO.setNumberOfThreads(t.maxParallelCalls),this.JO=t,this.BO=!0,this.zO()}stop(){this.BO=!1,this.GO.stop()}destroy(){this.stop(),this.WO.destroy(),this.RO.forEach(t=>{t.caller.destroy()}),na(this.Gg)}HO(){let t=!0;this.RO.forEach(i=>{i.auctionPending&&(t=!1)}),t&&this.DO.next()}QO(t){return t.filter(t=>!(t.aggregators.size>0)&&(!(!lh(t.protoLineItem.creativeType)&&(t.bids.size>0||t.callers.size>0))&&this.WO.canCall(t,this.XO()))).filter(t=>!this.settings.platformCappedLineItemRepo.isLineItemPlatformCapped(t.protoLineItem.advertiserLineItemId))}zO(){this.BO&&this.GO.start()}$O(){const t=this.QO(this.settings.lineItemList),i=this.settings.adCallerYo.getBestCallable(t,this.JO.stateSettings);if(i&&this.YO(i.lineItemList[0],i.state))return i}YO(t,i){if(lh(t.protoLineItem.creativeType))return!0;const e=this.settings.adBidPool.bids.filter(t=>this.settings.adCallerYo.isBidWinnable(t,i,this.settings.lineItemServices.impressionCapsService,this.settings.platformCappedLineItemRepo)),s=this.settings.adBidPool.callingLineItems,n=[...e.map(t=>this.settings.adCallerYo.getWinningYoScore(t.settings.id)),...s.map(t=>this.settings.adCallerYo.getCallingYoScore(t.protoLineItem.advertiserLineItemId))],r=this.settings.adCallerYo.getCallingYoScore(t.protoLineItem.advertiserLineItemId);for(let t=0;t<n.length;t++)if(r<n[t])return!1;return!0}UO(t){this.settings.adBidPool.callingLineItems=[...this.settings.adBidPool.callingLineItems,...t]}NO(t){this.settings.adBidPool.callingLineItems=this.settings.adBidPool.callingLineItems.filter(i=>!Object(u.g)(i,t))}VO(t,i){return lh(t[0].protoLineItem.creativeType)?this.KO(t,i):this.ZO(t[0],i)}ZO(t,i){this.WO.registerRequestForLineItem(t,this.XO());const e=this.t_(t,i);return this.i_(e),this.e_(e)}KO(t,i){const e=this.RO.get(t[0].protoLineItem.creativeType);t.forEach(t=>t.aggregators.add(e.caller)),e.auctionPending=!0;const s={lineItemRequestDataList:t.map(t=>({adManagerLineItem:t,maxAvailableRequests:this.settings.lineItemServices.requestCapsService.getAvailableRequestsForLineItem(t,this.XO())})),callingState:i,maxAdDuration:i.adBreakState.maxAdDuration};return e.caller.request(s).then(s=>{s.bids.length||s.noBids.length||t.forEach(t=>{this.WO.registerRequestForLineItem(t,this.XO())}),t.forEach(t=>t.aggregators.delete(e.caller)),s.noBids.forEach(t=>{this.WO.registerRequestForLineItem(t.lineItem,this.XO()),this.s_(i,t.lineItem,t.reason,t.requestMetadata)}),s.bids.forEach(t=>this.i_(t)),s.bids.sort(this.qO);const n=s.bids.map(t=>(this.WO.registerRequestForLineItem(t.settings.adManagerLineItem,this.XO()),this.e_(t)));return Promise.all(n)}).catch().then(()=>{e.auctionPending=!1})}e_(t){return t.settings.adManagerLineItem.callers.add(t),t.fetchBid().catch(i=>{t.settings.adManagerLineItem.callers.delete(t),this.settings.adCallerYo.registerPreBid(t.settings.id);const e=Kr[i]?Kr[i]:a.ConnatixNoBidReasonEnum.RequestException;return this.s_(t.settings.callingState,t.settings.adManagerLineItem,e,t.settings.requestMetadata,t.settings.trackersInformation,Date.now()-t.metrics.fetchStart),Promise.reject()}).then(i=>{t.settings.adManagerLineItem.callers.delete(t),this.n_(i,Date.now()-t.metrics.fetchStart)}).catch(t=>{void 0!==t&&Object(n.a)({message:"AdManager_AdCallerController_handleCallAdaptorRequest",exception:t.message,callStack:t.stack,level:a.ProtoLoggingLevelEnum.FATAL,throttle:5,sendMaxLog:!0})})}n_(t,i){const e=t.settings.adManagerLineItem,s=t.settings.requestMetadata;t.settings.requestMetadata.data.requestTrackingHandledByServer||this.settings.trackingService.addBid({advertiserLineItemId:e.protoLineItem.advertiserLineItemId,publisherLineItemId:e.protoLineItem.publisherLineItemId,requestedFloorPrice:s.data.requestedFloorPrice,rtbRequestNumber:s.data.rtbRequestNumber,syncedUser:s.data.syncedUser,prebidJsBidderName:s.data.prebidJsBidderName,customClientPrice:t.settings.cpm,timeSpent:i,dspId:s.data.dspId,encryptedPrice:s.data.encryptedPrice,rtbAdomain:s.data.rtbAdomain,creativeId:t.creativeId,rtbSeatId:s.data.rtbSeatId,cnxBidId:t.settings.requestMetadata.data.cnxBidId}),this.settings.adRequestGatekeeper.addBid(e.protoLineItem.advertiserLineItemId,s.data.requestedFloorPrice),this.settings.adCallerYo.isBidWinnableEverInSession(t,t.settings.callingState)?(to.trackBid(this.settings.app.config.playerId),t.settings.adManagerLineItem.bids.add(t),this.settings.adBidPool.addBid(t)):this.settings.adCallerYo.registerPreBid(t.settings.id)}s_(t,i,e,s,n,r){n&&Gr.track(n.adError,this.settings.adMacroReplacer,i.protoLineItem,t),s.data.requestTrackingHandledByServer||this.settings.trackingService.addPrebid({advertiserLineItemId:i.protoLineItem.advertiserLineItemId,publisherLineItemId:i.protoLineItem.publisherLineItemId,partnerCustomHeaders:s.data.partnerCustomHeaders,partnerReason:s.data.partnerReason,requestedFloorPrice:s.data.requestedFloorPrice,rtbRequestNumber:s.data.rtbRequestNumber,syncedUser:s.data.syncedUser,prebidJsBidderName:s.data.prebidJsBidderName,reason:e,timeSpent:r}),this.settings.adRequestGatekeeper.addPrebid(i.protoLineItem.advertiserLineItemId)}t_(t,i){const e=new Gr;Jr(t.protoLineItem.trackers,e);const s={id:Object(at.c)(),adManagerLineItem:t,replaceTrackingMacros:!0,requestMetadata:new nh,trackersInformation:e,callingState:i,adContainer:this.settings.adContainerMap.get(t.protoLineItem.adType),globalDomUtilsService:this.settings.app.services.GlobalDomUtilsService,viewabilityService:this.settings.app.services.ViewabilityService,cpm:t.protoLineItem.floorPrice||t.protoLineItem.customCpm,adEnforcer:this.settings.adEnforcer,os:this.settings.os,adSlotContainerRecycler:this.settings.adSlotContainerRecycler,bidSlotId:Sa()};switch(t.protoLineItem.creativeType){case a.ProtoCreativeTypeEnum.External:case a.ProtoCreativeTypeEnum.ThirdParty:return t.protoLineItem.adType===a.ProtoAdType.Overlay?new Nh(Object.assign(Object.assign({},s),{url:t.protoLineItem.adTag,pageDomain:this.settings.app.config.pageDomain})):new sh(Object.assign(Object.assign({},s),{url:t.protoLineItem.adTag,adMacroReplacer:this.settings.adMacroReplacer,trackingService:this.settings.trackingService,loopAdWhenFinished:this.settings.loopAdWhenFinished,pageUrl:this.settings.app.config.pageUrl}));case a.ProtoCreativeTypeEnum.MediaFile:return new qh(Object.assign(Object.assign({},s),{clickUrl:t.protoLineItem.mediaCreativeClickUrl,mediaId:t.protoLineItem.mediaCreativeId,renditions:t.protoLineItem.renditions,pauseAdWhenFinished:this.settings.pauseAdWhenFinished,loopAdWhenFinished:this.settings.loopAdWhenFinished,inApp:this.settings.app.config.isInApp}))}}i_(t){const{creativeType:i,floorPrice:e,successRate:s,advertiserLineItemId:n,lineItemPriority:r}=t.settings.adManagerLineItem.protoLineItem;this.settings.adCallerYo.registerBiddingInformation({creativeType:i,floorPrice:e,lineItemId:n,priority:r,bidId:t.settings.id,cpm:t.settings.cpm,obfuscatedPrice:t.settings.obfuscatedPrice,successRate:t.settings.successRate||s})}XO(){return(this.JO.stateSettings.currentState||this.JO.stateSettings.predictedState).adOpportunity.id}}const so="uncategorized";class no{resetCapsBasedOnExternalEvent(t){const i=this.r_.keys();for(const e of i)this.a_(e,t)&&this.h_(e,so)}a_(t,i){return t.protoLineItem.resetCapType===i}o_(t){return this.a_(t,a.ProtoResetCapTypeEnum.TimeCapping)&&this.c_(t)>0}}class ro{constructor(t){this.l_=t,this.u_=new Map}setNumberOfImpressions({value:t,categoryId:i}){Object(T.a)(i)&&this.l_===a.ProtoResetCapTypeEnum.OpportunityCapping||(i=so),this.u_.set(i,t)}getNumberOfImpressions({categoryId:t}){return Object(T.a)(t)&&this.l_===a.ProtoResetCapTypeEnum.OpportunityCapping||(t=so),this.u_.get(t)||0}}class ao extends no{constructor(t=Date.now()){super(),this.d_=t,this.r_=new Map}canCall(t,i){this.f_(t);const e=this.r_.get(t);return void 0===e||(0===t.protoLineItem.impressionCap||e.getNumberOfImpressions({categoryId:i})<t.protoLineItem.impressionCap)}registerImpressionForLineItem(t,i){let e=this.r_.get(t);return void 0===e&&(this.r_.set(t,new ro(t.protoLineItem.resetCapType)),e=this.r_.get(t),this.o_(t)&&(e.nextImpressionCapResetTimestamp=this.p_(this.c_(t)))),e.setNumberOfImpressions({value:e.getNumberOfImpressions({categoryId:i})+1,categoryId:i}),this}registerRequestForLineItem(t,i){return this}destroy(){this.r_.clear()}h_(t,i){this.r_.get(t).setNumberOfImpressions({value:0,categoryId:i})}c_(t){return t.protoLineItem.resetImpressionsCapTime*B.f}f_(t,i=Date.now()){if(!this.o_(t))return;const e=this.r_.get(t);void 0!==e&&this.b_(t,i)&&(e.setNumberOfImpressions({value:0}),e.nextImpressionCapResetTimestamp=this.p_(this.c_(t),i))}b_(t,i){return i>=this.r_.get(t).nextImpressionCapResetTimestamp}p_(t,i=Date.now()){const e=Math.ceil((i-this.d_)/t)*t;return this.d_+e}}class ho{constructor(t){this.l_=t,this.v_=new Map}setNumberOfRequests({value:t,categoryId:i}){Object(T.a)(i)&&this.l_===a.ProtoResetCapTypeEnum.OpportunityCapping||(i=so),this.v_.set(i,t)}getNumberOfRequests({categoryId:t}){return Object(T.a)(t)&&this.l_===a.ProtoResetCapTypeEnum.OpportunityCapping||(t=so),this.v_.get(t)||0}}class oo extends no{constructor(t=Date.now()){super(),this.d_=t,this.allowResetOnTime=!0,this.r_=new Map}canCall(t,i){this.f_(t);const e=this.r_.get(t);return void 0===e||(0===t.protoLineItem.requestCap||e.getNumberOfRequests({categoryId:i})<t.protoLineItem.requestCap)}registerRequestForLineItem(t,i,e=Date.now()){let s=this.r_.get(t);return void 0===s&&(this.r_.set(t,new ho(t.protoLineItem.resetCapType)),s=this.r_.get(t),this.o_(t)&&(s.nextRequestCapResetTimestamp=this.p_(this.c_(t)))),s.setNumberOfRequests({value:s.getNumberOfRequests({categoryId:i})+1,categoryId:i}),this}registerImpressionForLineItem(t){return this}getAvailableRequestsForLineItem(t,i){const e=this.r_.get(t);return void 0===e?t.protoLineItem.requestCap:t.protoLineItem.requestCap-e.getNumberOfRequests({categoryId:i})}restoreOneCapForLineItem(t,i){if(t.protoLineItem.ignoreFilledRequests){const e=this.r_.get(t);if(void 0===e)return;const s=e.getNumberOfRequests({categoryId:i});s>0&&e.setNumberOfRequests({value:s-1,categoryId:i})}}destroy(){this.r_.clear()}h_(t,i){this.r_.get(t).setNumberOfRequests({value:0,categoryId:i})}c_(t){return t.protoLineItem.resetRequestsCapTime*B.f}f_(t,i=Date.now()){if(!this.o_(t))return;const e=this.r_.get(t);void 0!==e&&this.b_(t,i)&&(e.setNumberOfRequests({value:0}),e.nextRequestCapResetTimestamp=this.p_(this.c_(t),i))}b_(t,i){return i>=this.r_.get(t).nextRequestCapResetTimestamp&&this.allowResetOnTime}p_(t,i=Date.now()){const e=Math.ceil((i-this.d_)/t)*t;return this.d_+e}}class co{constructor(){this.r_=new Map}registerRequestForLineItem(t,i,e=Date.now()){let s=this.r_.get(t);return void 0===s&&(this.r_.set(t,{}),s=this.r_.get(t)),s.lastRequestTimestamp=e,this}registerImpressionForLineItem(t){return this}canCall(t,i,e=Date.now()){const s=this.r_.get(t);return void 0===s||(0===t.protoLineItem.timeBetweenRequests||e>=s.lastRequestTimestamp+t.protoLineItem.timeBetweenRequests*B.f)}destroy(){this.r_.clear()}}const lo=500;class uo{constructor(){this.m_=null,this.g_=new Vr}start(){return this.y_(),this}stop(){return this.w_(),this}onTimer(){return this.g_.asObservable()}destroy(){this.w_()}y_(){null===this.m_&&(this.m_=setInterval(()=>{this.g_.next()},lo))}w_(){clearInterval(this.m_),this.m_=null}}class fo extends o.a{constructor(t,i,e,s){super(),this.x_=t,this.k_=i,this.Ac=e,this.S_=s,this.O_=new Vr,this.updateState=t=>{this.x_.forEach((i,e)=>{this.__.set(e,this.j_(i,t))})},this.A_=t=>{this.I_(t)},this.pr=()=>{this.I_()},this.I_=t=>{this.updateState(t),this.O_.next()},this.__=new Map,this.updateState(),this.x_.forEach(t=>{this.k_.on(t,this.pr),this.Ac.on(t,this.A_,{threshold:this.S_})})}get onContainerStateUpdate(){return this.O_.asObservable()}getContainerMap(){return this.x_}getContainerStateMap(){return this.__}destroy(){this.x_.forEach(t=>{this.k_.off(t,this.pr),this.Ac.off(t,this.A_)})}j_(t,i){let e=i;return void 0===e&&(e=this.Ac.check({element:t,threshold:this.S_})),{width:t.clientWidth,height:t.clientHeight,viewability:e}}}const po="cnxpl-vl",bo="cnxpl-rf";class vo{constructor(){this.T_=!0,this.C_=new Vr,this.P_=[],this.M_=t=>{if(this.T_)return;const i=t.target;if(i.volume>0&&(i.volume=0,!i.paused)){const t=i.getAttribute(bo);this.C_.next(t)}t.preventDefault?t.preventDefault():t.returnValue=!1}}get onVolumeDetected(){return this.C_.asObservable()}enforce(t,i){let e=t;Object(T.c)(t)&&(e=t.contentDocument||t.contentWindow.document),this.T_=!1,Object(u.c)(e.getElementsByTagName("video")).forEach(t=>{this.E_(t,i)})}stopEnforce(){this.T_=!0}clearEnforce(t){try{const i=[];this.P_=this.P_.filter(e=>e.getAttribute(bo)!==t||(i.push(e),!1)),i.forEach(t=>{t.removeAttribute(po),t.removeAttribute(bo),t.removeEventListener("volumechange",this.M_)})}catch(t){}}E_(t,i){t&&!t.getAttribute("cnxpl-vl")&&(t.volume=0,t.setAttribute(po,"true"),t.setAttribute(bo,i),t.addEventListener("volumechange",this.M_),this.P_.push(t))}}class mo{constructor(){}L_(t){const i=function(){};t.Element.prototype.scrollIntoView=i,t.Element.prototype.scrollIntoViewIfNeeded=i,t.scroll=i,t.scrollTo=i,t.scrollBy=i}enforce(t){Object(T.c)(t)&&this.L_(t.contentWindow)}stopEnforce(){}clearEnforce(){}}class go{constructor(t){this.R_=t=>t.cnxEnfStorage?t.cnxEnfStorage:null,this.ue=t;try{this.R_(this.ue)||this.B_(this.ue)}catch(t){Object(n.a)({message:"AdManager_EnforcerMemory_bind_enforcement",exception:t.message,callStack:t.stack,level:a.ProtoLoggingLevelEnum.FATAL})}}B_(t){Object(j.z)(t.document.head,t,'!function(){function n(n){window["cnx"+n]||(window["cnx"+n]=window[n],window[n]=function(e){var t="";try{e&&(t=function n(e,t){try{if(!e)return"";if(e.cnxInnerTag)return e.cnxInnerTag;if(t<2){var r=t+1;return n(e.caller,r)}}catch(n){return""}return""}(e))}catch(n){}var r=window["cnx"+n].apply(null,arguments);if(t){var i=window.cnxEnfStorage;i[n][t]=i[n][t]||[],i[n][t].push(r)}return r})}window.cnxEnfStorage={setTimeout:{},setInterval:{},eventListeners:{},errors:[]};var e=window.location.hostname.split("."),t=window.btoa(e[e.length-2]+"."+e[e.length-1]);-1===["dG16LmNvbQ==","YmlsbGJvYXJkLmNvbQ==","aG9sbHl3b29kcmVwb3J0ZXIuY29t","dmliZS5jb20=","aG9yb3Njb3BlLmNvbQ==","YXN0cm9sb2d5LmNvbQ==","YWhvcmFtaXNtby5jb20="].indexOf(t)&&(!function(){const n=window.EventTarget?window.EventTarget.prototype:window.document;n.cnxAddEventListener||(n.cnxAddEventListener=n.addEventListener,n.addEventListener=function(n,e,t){var r=this||window;if(e&&e.cnxInnerTag){var i=window.cnxEnfStorage;i.eventListeners[e.cnxInnerTag]=i.eventListeners[e.cnxInnerTag]||[],i.eventListeners[e.cnxInnerTag].push({element:r,type:n,handler:e,options:t})}try{r.cnxAddEventListener(n,e,t)}catch(n){n.message="adlstn_"+n.message,i.errors.push(n)}})}(),n("setTimeout"),n("setInterval"))}();')}enforce(t,i){if(Object(T.c)(t))try{t.contentWindow.self===top||t.contentWindow.Function.prototype.cnxInnerTag||t.contentWindow.Object.defineProperty(t.contentWindow.Function.prototype,"cnxInnerTag",{enumerable:!1,writable:!0,value:i}),t.contentWindow.self===top||t.contentWindow.Object.prototype.cnxInnerTag||t.contentWindow.Object.defineProperty(t.contentWindow.Object.prototype,"cnxInnerTag",{enumerable:!1,writable:!0,value:i})}catch(t){}}stopEnforce(){}clearEnforce(t){try{const i=this.R_(this.ue);i.eventListeners[t]&&(i.eventListeners[t].forEach(t=>{t.element.removeEventListener(t.type,t.handler,t.options)}),i.eventListeners[t]=[]),i.setInterval[t]&&(i.setInterval[t].forEach(t=>this.ue.clearInterval(t)),i.setInterval[t]=[]),i.setTimeout[t]&&(i.setTimeout[t].forEach(t=>this.ue.clearTimeout(t)),i.setTimeout[t]=[])}catch(t){}}}class yo{constructor(){this.D_=["viralgains","serving-sys.com","commercialadsdistributor"],this.F_=["beachfrontmedia","commercialadsdistributor"],this.U_=["commercialadsdistributor"],this.V_=["pixel.clearstream.tv","pixel.clrstm.com"],this.N_=new Vr,this.H_=new Vr}get onMalwareDetected(){return this.N_.asObservable()}get onBadUriDetected(){return this.H_.asObservable()}enforce(t,i){if(Object(T.c)(t)){this.q_=i;try{this.z_(t),this.W_(t),this.G_(t),this.J_(t)}catch(t){}}}stopEnforce(){}clearEnforce(){}Q_(t,i,e,s){t.every(t=>-1===e.indexOf(t))&&!i.getAttribute("cnx")&&(i.setAttribute("cnx","true"),this.H_.next({referenceId:this.q_,enforcementMessage:`${s}-${i}`}))}z_(t){const i=t.getAttribute("src");i&&(this.D_.forEach(t=>{i.indexOf(t)>-1&&this.N_.next({referenceId:this.q_,enforcementMessage:`malware-${t}`})}),this.Q_(["//","about:blank","about:self","javascript:"],t,i,"iframe"))}W_(t){Object(u.c)(t.contentDocument.getElementsByTagName("script")).forEach(t=>{const i=t.getAttribute("src");i&&(this.F_.forEach(t=>{i.indexOf(t)>-1&&this.N_.next({referenceId:this.q_,enforcementMessage:`malware-${t}`})}),this.Q_(["//"],t,i,"script"))})}G_(t){Object(u.c)(t.contentDocument.getElementsByTagName("a")).forEach(t=>{const i=t.getAttribute("href");i&&this.U_.forEach(t=>{i.indexOf(t)>-1&&this.N_.next({referenceId:this.q_,enforcementMessage:`malware-${t}`})})})}J_(t){Object(u.c)(t.contentDocument.getElementsByTagName("img")).forEach(t=>{const i=t.getAttribute("src");i&&this.V_.forEach(t=>{i.indexOf(t)>-1&&this.N_.next({referenceId:this.q_,enforcementMessage:`malware-${t}`})})})}}class wo{constructor(t,i,e){if(this.X_=e,this.Y_=null,this.K_=new Map,this.Z_=ta.None,this.tj=300,this.Gg=[],this.ij=new Map,this.cw=new Vr,this.K_.set(ta.MemoryLeak,new go(i)),e||this.K_.set(ta.ScrollHijack,new mo),!t){const t=new vo;this.K_.set(ta.Mute,t),this.Gg.push(t.onVolumeDetected.subscribe(t=>{this.ej(Zr.VOLUME_DETECTED,t,"")}))}const s=new yo;this.Gg.push(s.onBadUriDetected.subscribe(t=>{this.ej(Zr.BADURI_DETECTED,t.referenceId,t.enforcementMessage)}),s.onMalwareDetected.subscribe(t=>{this.ej(Zr.MALWARE_DETECTED,t.referenceId,t.enforcementMessage)})),this.K_.set(ta.Malware,s)}get onEnforcerEvent(){return this.cw.asObservable()}registerContainer(t,i){this.ij.get(t)||this.ij.set(t,i)}deregisterContainer(t){this.ij.get(t)&&(this.K_.forEach(i=>{i.clearEnforce(this.ij.get(t))}),this.ij.delete(t),this.ij.size||this.stop(ta.All))}start(t){this.X_&&(t^=ta.ScrollHijack),this.Z_|=t,null===this.Y_&&(this.Y_=setInterval(()=>{try{this.ij.forEach((t,i)=>{this.sj(i,t)})}catch(t){}},this.tj))}stop(t){this.Z_&=~t,this.Z_===ta.None&&(clearInterval(this.Y_),this.Y_=null),this.K_.forEach((i,e)=>{t&e&&i.stopEnforce()})}destroy(){this.stop(ta.All),na(this.Gg),this.ij.forEach((t,i)=>{this.deregisterContainer(i)})}sj(t,i){Object(u.c)(t.getElementsByTagName("iframe")).forEach(t=>{try{this.sj(t,i)}catch(t){}}),this.K_.forEach((e,s)=>{this.Z_&s&&e.enforce(t,i)})}ej(t,i,e){let s;this.ij.forEach((t,e)=>{t===i&&(s=e)}),this.cw.next({message:e,type:t,detectedContainer:s})}}class xo{constructor(t){this.Gn=t,this.nj=!1,this.rj=void 0,this.aj=[],this.Gg=[],this.hj=!1,this.oj=new Vr,this.cj=new Vr,this.lj=[],this.Gg.push(this.Gn.adBidPool.onBidReady.subscribe(()=>{this.uj()}),this.Gn.impressionCapsTimer.onTimer().subscribe(()=>{this.uj()}))}get onAdSelected(){return this.oj.asObservable()}get onAdFinished(){return this.cj.asObservable()}start(t){this.dj=t,this.nj=!0,this.uj()}stop(){this.nj=!1}destroy(){this.stop(),na(this.Gg),this.rj||this.fj()}uj(){if(!this.nj||this.hj)return;const t=this.pj(this.dj);if(!t)return;const i=this.bj(t);this.rj&&this.Gn.removeBidIfHigherYoScore&&i?(this.fj(),this.rj.stopAd("removeStartedBid"),this.vj(t)):this.rj||this.vj(t)}vj(t){this.rj=t,this.lj=[],this.Gn.adBidPool.moveBidToStarted(t),this.oj.next(t),this.mj(t),to.trackStartAd(this.Gn.playerId),t.startAd()}fj(){this.rj&&(na(this.aj),this.aj=[],this.Gn.adBidPool.consumeBidStarted(this.rj),this.rj=void 0,this.lj=[])}gj(t){const i=t.settings.adManagerLineItem;return this.Gn.impressionCapsService.canCall(i,this.dj.adOpportunity.id)}pj(t){const i=this.Gn.adBidPool.bidsReady.filter(t=>this.gj(t));return this.Gn.adImpressionerYo.getBestBid(i,t)}bj(t){return!!this.rj&&this.Gn.adImpressionerYo.getBetterBid(t,this.rj)!==this.rj}yj(t,i){this.hj&&Object(n.a)({message:"AdManager_ABaseBidAdaptor_multipleImpressions",exception:`advertiserLineItemId:${t.settings.adManagerLineItem.protoLineItem.advertiserLineItemId}_creativeId:${t.creativeId}`,callStack:`${t.adMediaType}`,throttle:1e3,level:a.ProtoLoggingLevelEnum.FATAL,sendMaxLog:!0}),this.Gn.adImpressionerYo.registerImpression(t.settings.id,t.settings.adManagerLineItem.protoLineItem.creativeType),to.trackAdImpression(this.Gn.playerId,t),this.hj=!0,this.Gn.adRequestGatekeeper.addImpression(t.settings.adManagerLineItem.protoLineItem.advertiserLineItemId,t.settings.obfuscatedPrice),this.Gn.impressionCapsService.registerImpressionForLineItem(t.settings.adManagerLineItem,this.dj.adOpportunity.id),this.Gn.requestCapsService.restoreOneCapForLineItem(t.settings.adManagerLineItem,this.dj.adOpportunity.id),t.settings.adManagerLineItem.bids.delete(t),this.wj(t,i)}xj(t,i,e,s=!0){this.kj(t,i,e,s),this.Gn.loopAdWhenFinished?t.resumeAd():this.Gn.pauseAdWhenFinished?t.pauseAd():(this.cj.next(t),this.fj(),this.uj())}kj(t,i,e,s=!0){this.hj?this.hj=!1:s&&(this.Gn.adImpressionerYo.registerPostBid(t.settings.id,t.settings.adManagerLineItem.protoLineItem.creativeType,e),this.Sj(t,e,i),t.settings.adManagerLineItem.bids.delete(t))}wj(t,i){var e,s;const n=this.dj.adBreakState,r=Object(T.d)(Object(rt.h)(t.getAdDuration(),2))?Object(rt.h)(t.getAdDuration(),2):0,a=Object(T.d)(Object(rt.h)(t.declaredDurationInSeconds,2))?Object(rt.h)(t.declaredDurationInSeconds,2):0,h=r-a;this.Gn.trackingService.trackVideoAdImpression({adPodSlotPosition:n.adPodSlotIndex,adsourceType:t.adSourceType,advertiserLineItemId:t.settings.adManagerLineItem.protoLineItem.advertiserLineItemId,publisherLineItemId:t.settings.adManagerLineItem.protoLineItem.publisherLineItemId,customClientPrice:t.settings.cpm,encryptedPrice:t.settings.requestMetadata.data.encryptedPrice,prebidJsBidderName:t.settings.requestMetadata.data.prebidJsBidderName,rtbAdomain:t.settings.requestMetadata.data.rtbAdomain,creativeId:t.creativeId,rtbSeatId:t.settings.requestMetadata.data.rtbSeatId,syncedUser:t.settings.requestMetadata.data.syncedUser,timeSpent:i,vastMediaType:t.adMediaType,dspId:t.settings.requestMetadata.data.dspId,cnxBidId:t.settings.requestMetadata.data.cnxBidId,winToAdLoadedTime:null===(e=t.settings.bidLifecycle)||void 0===e?void 0:e.winToAdLoadedTime,startAdToImpressionTime:null===(s=t.settings.bidLifecycle)||void 0===s?void 0:s.startAdToImpressionTime,impressionDuration:h,declaredDuration:a,useExploration:this.Gn.explorationMode})}Sj(t,i,e){var s;const n=this.dj.adBreakState;to.trackPostBid(this.Gn.playerId),this.Gn.trackingService.addPostBid({adPodSlotPosition:n.adPodSlotIndex,adsourceType:t.adSourceType,advertiserLineItemId:t.settings.adManagerLineItem.protoLineItem.advertiserLineItemId,publisherLineItemId:t.settings.adManagerLineItem.protoLineItem.publisherLineItemId,error:i,loaded:!0,prebidJsBidderName:t.settings.requestMetadata.data.prebidJsBidderName,vastMediaType:t.adMediaType,syncedUser:t.settings.requestMetadata.data.syncedUser,rtbSeatId:t.settings.requestMetadata.data.rtbSeatId,rtbAdomain:t.settings.requestMetadata.data.rtbAdomain,creativeId:t.creativeId,timeSpent:e,dspId:t.settings.requestMetadata.data.dspId,cnxBidId:t.settings.requestMetadata.data.cnxBidId,winToAdLoadedTime:null===(s=t.settings.bidLifecycle)||void 0===s?void 0:s.winToAdLoadedTime})}Oj(t,i){this.lj.indexOf(i)>=0&&!(this.Gn.pauseAdWhenFinished||this.Gn.loopAdWhenFinished)?1===Object(at.l)([99,1])&&Object(n.a)({message:"AdManager_AdImpressionerController_handleQuartilesTracking_track_same_quartile_twice",level:a.ProtoLoggingLevelEnum.WARNING,exception:t.settings.adManagerLineItem.protoLineItem.advertiserLineItemId,callStack:t.adMediaType}):(this.lj.push(i),this.Gn.trackingService.trackVideoAdQuartile({advertiserLineItemId:t.settings.adManagerLineItem.protoLineItem.advertiserLineItemId,publisherLineItemId:t.settings.adManagerLineItem.protoLineItem.publisherLineItemId,quartile:i}))}mj(t){const i=Date.now();this.aj.push(t.onVpaidEvent.subscribe(e=>{var s;const r=function(t,i){switch(t){case w.b.AdImpression:return i.adImpression;case w.b.AdClickThru:return i.adClick;case w.b.AdStarted:return i.adStarted;case w.b.AdVideoStart:return i.adVideoStart;case w.b.AdVideoFirstQuartile:return i.adQuartileFirst;case w.b.AdVideoMidpoint:return i.adQuartileSecond;case w.b.AdVideoThirdQuartile:return i.adQuartileThird;case w.b.AdVideoComplete:return i.adQuartileFourth;case w.b.AdPaused:return i.adPause;case w.b.AdPlaying:return i.adResume;case w.b.AdSkipped:return i.adSkip;case w.b.AdUserClose:return i.adUserClose;case w.b.AdUserAcceptInvitation:return i.adUserAcceptInvitation;case w.b.AdUserMinimize:return i.adUserMinimize;case w.b.AdError:return i.adError}}(e.type,t.settings.trackers),h=Date.now()-i;switch(r||e.type!==w.b.AdImpression||(this._j("AdManager_AdImpressionController_tracker_impression_not_found"),Object(n.a)({sendMaxLog:!1,message:"AdManager_AdImpressionController_tracker_impression_not_found",level:a.ProtoLoggingLevelEnum.FATAL})),Gr.track(r,this.Gn.adMacroReplacer,t.settings.adManagerLineItem.protoLineItem,t.settings.callingState),e.type){case w.b.AdError:this.xj(t,h,e.payload.errorMessage);break;case w.b.AdSkipped:this.xj(t,h,ia.c.AdStopped);break;case w.b.AdStopped:this.xj(t,h,ia.c.AdStopped,null===(s=e.payload)||void 0===s?void 0:s.shouldTrackPostBid);break;case w.b.AdImpression:this.yj(t,h);break;case w.b.AdVideoFirstQuartile:this.Oj(t,a.ProtoQuartilesEnum.First);break;case w.b.AdVideoMidpoint:this.Oj(t,a.ProtoQuartilesEnum.Second);break;case w.b.AdVideoThirdQuartile:this.Oj(t,a.ProtoQuartilesEnum.Third);break;case w.b.AdVideoComplete:this.Oj(t,a.ProtoQuartilesEnum.Fourth)}})),this.aj.push(t.onAdViewableImpression.subscribe(t=>{this.Gn.trackingService.trackVideoAdImpressionViewable(t)}))}_j(t,i){var e,s;Object(n.a)({message:t,level:a.ProtoLoggingLevelEnum.FATAL,sendMaxLog:!1,exception:null===(e=i)||void 0===e?void 0:e.message,callStack:null===(s=i)||void 0===s?void 0:s.stack})}}const ko={[a.ProtoAdBreakTypeEnum.PreRoll]:"preRoll",[a.ProtoAdBreakTypeEnum.MidRoll]:"midRoll",[a.ProtoAdBreakTypeEnum.PostRoll]:"postRoll"};class So{constructor(t,i){this.jj=t,this.Fh=i}replace(t,i,e){this.jj.setAdWidth(e.adMacros.adWidth),this.jj.setAdHeight(e.adMacros.adHeight),this.jj.setAdPosition(ko[e.adMacros.adPostion]),e.mediaMacros.mediaDescription&&this.jj.setVideoDescription(e.mediaMacros.mediaDescription),e.mediaMacros.mediaDuration&&this.jj.setVideoDuration(e.mediaMacros.mediaDuration),e.mediaMacros.mediaId&&this.jj.setVideoId(e.mediaMacros.mediaId),e.mediaMacros.mediaTitle&&this.jj.setVideoTitle(e.mediaMacros.mediaTitle),e.mediaMacros.mediaUrl&&this.jj.setVideoUrl(e.mediaMacros.mediaUrl);const s=this.Fh.isConsent(i);this.jj.setGDPR(this.Fh.isConsentRequired()?1:0),this.jj.setConsent(s?1:0),this.jj.setGDPRConsent(this.Fh.getConsentPayload());const n=this.Fh.getTrackableUser(),r=this.Fh.isConsentConnatix()&&s?n:void 0;return this.jj.setUUID(r),this.jj.setupMacros(t)}}const Oo=30*B.f;class _o{constructor(){this.Aj=null}onAdRemoved(){this.Aj=null,this.Ij()}pauseViaUserInteraction(){this.Aj&&(this.Aj.pausedWithUserInteraction=!0)}resumeViaUserInteraction(){this.Aj&&(this.Aj.pausedWithUserInteraction=!1,this.Ij())}Tj(t){this.Aj={currentAd:t,isPaused:!1,pausedWithUserInteraction:!1,remainingTimeForAdToBePaused:Oo,lastAdPausedStartedTimestamp:void 0},this.Ij()}checkPauseAd(t,i){t&&(null===this.Aj&&this.Tj(t),i?this.Cj(t):this.Pj(t))}Pj(t){this.Mj(t)&&(this.Aj.isPaused=!0,this.Aj.lastAdPausedStartedTimestamp=Date.now(),t.pauseAd(),this.Ij(),this.Ej=setTimeout(()=>{t.stopAd("pauseOutOfView"),this.Aj=null,this.Ij()},this.Aj.remainingTimeForAdToBePaused))}Cj(t){t.settings.adManagerLineItem.protoLineItem.pauseAdOutOfView&&t.impressionStarted&&this.Aj.isPaused&&!this.Aj.pausedWithUserInteraction&&(this.Ij(),this.Aj.isPaused=!1,this.Aj.remainingTimeForAdToBePaused=this.Aj.remainingTimeForAdToBePaused-(Date.now()-this.Aj.lastAdPausedStartedTimestamp),t.resumeAd())}Ij(){clearTimeout(this.Ej),this.Ej=void 0}Mj(t){return t.settings.adManagerLineItem.protoLineItem.pauseAdOutOfView&&t.impressionStarted&&!this.Aj.isPaused&&!this.Aj.pausedWithUserInteraction}}function jo(t,i){return function(e){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return e.lift(new Ao(t,i))}}var Ao=function(){function t(t,i){this.project=t,this.thisArg=i}return t.prototype.call=function(t,i){return i.subscribe(new Io(t,this.project,this.thisArg))},t}(),Io=function(t){function i(i,e,s){var n=t.call(this,i)||this;return n.project=e,n.count=0,n.thisArg=s||n,n}return yr(i,t),i.prototype.Qg=function(t){var i;try{i=this.project.call(this.thisArg,t,this.count++)}catch(t){return void this.destination.error(t)}this.destination.next(i)},i}(Pr),To=function(t){return function(i){for(var e=0,s=t.length;e<s&&!i.closed;e++)i.next(t[e]);i.complete()}};function Co(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}var Po=Co(),Mo=function(t){return t&&"number"==typeof t.length&&"function"!=typeof t};function Eo(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}var Lo=function(t){if(t&&"function"==typeof t[Er])return s=t,function(t){var i=s[Er]();if("function"!=typeof i.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return i.subscribe(t)};if(Mo(t))return To(t);if(Eo(t))return e=t,function(t){return e.then(function(i){t.closed||(t.next(i),t.complete())},function(i){return t.error(i)}).then(null,Sr),t};if(t&&"function"==typeof t[Po])return i=t,function(t){for(var e=i[Po]();;){var s=void 0;try{s=e.next()}catch(i){return t.error(i),t}if(s.done){t.complete();break}if(t.next(s.value),t.closed)break}return"function"==typeof e.return&&t.add(function(){e.return&&e.return()}),t};var i,e,s,n=jr(t)?"an invalid object":"'"+t+"'";throw new TypeError("You provided "+n+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.")};function Ro(t,i){return new Br(function(e){var s=new Ir,n=0;return s.add(i.schedule(function(){n!==t.length?(e.next(t[n++]),e.closed||s.add(this.schedule())):e.complete()})),s})}function Bo(t,i){if(null!=t){if(function(t){return t&&"function"==typeof t[Er]}(t))return function(t,i){return new Br(function(e){var s=new Ir;return s.add(i.schedule(function(){var n=t[Er]();s.add(n.subscribe({next:function(t){s.add(i.schedule(function(){return e.next(t)}))},error:function(t){s.add(i.schedule(function(){return e.error(t)}))},complete:function(){s.add(i.schedule(function(){return e.complete()}))}}))})),s})}(t,i);if(Eo(t))return function(t,i){return new Br(function(e){var s=new Ir;return s.add(i.schedule(function(){return t.then(function(t){s.add(i.schedule(function(){e.next(t),s.add(i.schedule(function(){return e.complete()}))}))},function(t){s.add(i.schedule(function(){return e.error(t)}))})})),s})}(t,i);if(Mo(t))return Ro(t,i);if(function(t){return t&&"function"==typeof t[Po]}(t)||"string"==typeof t)return function(t,i){if(!t)throw new Error("Iterable cannot be null");return new Br(function(e){var s,n=new Ir;return n.add(function(){s&&"function"==typeof s.return&&s.return()}),n.add(i.schedule(function(){s=t[Po](),n.add(i.schedule(function(){if(!e.closed){var t,i;try{var n=s.next();t=n.value,i=n.done}catch(t){return void e.error(t)}i?e.complete():(e.next(t),this.schedule())}}))})),n})}(t,i)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}var Do=function(t){function i(i){var e=t.call(this)||this;return e.parent=i,e}return yr(i,t),i.prototype.Qg=function(t){this.parent.notifyNext(t)},i.prototype.Xg=function(t){this.parent.notifyError(t),this.unsubscribe()},i.prototype.Yg=function(){this.parent.notifyComplete(),this.unsubscribe()},i}(Pr),Fo=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return yr(i,t),i.prototype.notifyNext=function(t){this.destination.next(t)},i.prototype.notifyError=function(t){this.destination.error(t)},i.prototype.notifyComplete=function(){this.destination.complete()},i}(Pr);function $o(t,i,e){return void 0===e&&(e=Number.POSITIVE_INFINITY),"function"==typeof i?function(s){return s.pipe($o(function(e,s){return(n=t(e,s),r?Bo(n,r):n instanceof Br?n:new Br(Lo(n))).pipe(jo(function(t,n){return i(e,t,s,n)}));var n,r},e))}:("number"==typeof i&&(e=i),function(i){return i.lift(new Uo(t,e))})}var Uo=function(){function t(t,i){void 0===i&&(i=Number.POSITIVE_INFINITY),this.project=t,this.concurrent=i}return t.prototype.call=function(t,i){return i.subscribe(new Vo(t,this.project,this.concurrent))},t}(),Vo=function(t){function i(i,e,s){void 0===s&&(s=Number.POSITIVE_INFINITY);var n=t.call(this,i)||this;return n.project=e,n.concurrent=s,n.hasCompleted=!1,n.buffer=[],n.active=0,n.index=0,n}return yr(i,t),i.prototype.Qg=function(t){this.active<this.concurrent?this.Lj(t):this.buffer.push(t)},i.prototype.Lj=function(t){var i,e=this.index++;try{i=this.project(t,e)}catch(t){return void this.destination.error(t)}this.active++,this.Rj(i)},i.prototype.Rj=function(t){var i=new Do(this),e=this.destination;e.add(i);var s=function(t,i){if(!i.closed)return t instanceof Br?t.subscribe(i):Lo(t)(i)}(t,i);s!==i&&e.add(s)},i.prototype.Yg=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()},i.prototype.notifyNext=function(t){this.destination.next(t)},i.prototype.notifyComplete=function(){var t=this.buffer;this.active--,t.length>0?this.Qg(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},i}(Fo);function No(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];var e,s=Number.POSITIVE_INFINITY,n=null,r=t[t.length-1];return(e=r)&&"function"==typeof e.schedule?(n=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(s=t.pop())):"number"==typeof r&&(s=t.pop()),null===n&&1===t.length&&t[0]instanceof Br?t[0]:function(t){return void 0===t&&(t=Number.POSITIVE_INFINITY),$o(Lr,t)}(s)(function(t,i){return i?Ro(t,i):new Br(To(t))}(t,n))}function Ho(t,i){return function(e){return e.lift(new qo(t,i))}}var qo=function(){function t(t,i){this.predicate=t,this.thisArg=i}return t.prototype.call=function(t,i){return i.subscribe(new zo(t,this.predicate,this.thisArg))},t}(),zo=function(t){function i(i,e,s){var n=t.call(this,i)||this;return n.predicate=e,n.thisArg=s,n.count=0,n}return yr(i,t),i.prototype.Qg=function(t){var i;try{i=this.predicate.call(this.thisArg,t,this.count++)}catch(t){return void this.destination.error(t)}i&&this.destination.next(t)},i}(Pr);function Wo(t,i){return void 0===i&&(i=!1),function(e){return e.lift(new Go(t,i))}}var Go=function(){function t(t,i){this.predicate=t,this.inclusive=i}return t.prototype.call=function(t,i){return i.subscribe(new Jo(t,this.predicate,this.inclusive))},t}(),Jo=function(t){function i(i,e,s){var n=t.call(this,i)||this;return n.predicate=e,n.inclusive=s,n.index=0,n}return yr(i,t),i.prototype.Qg=function(t){var i,e=this.destination;try{i=this.predicate(t,this.index++)}catch(t){return void e.error(t)}this.nextOrComplete(t,i)},i.prototype.nextOrComplete=function(t,i){var e=this.destination;Boolean(i)?e.next(t):(this.inclusive&&e.next(t),e.complete())},i}(Pr);function Qo(){}function Xo(t,i,e){return function(s){return s.lift(new Yo(t,i,e))}}var Yo=function(){function t(t,i,e){this.nextOrObserver=t,this.error=i,this.complete=e}return t.prototype.call=function(t,i){return i.subscribe(new Ko(t,this.nextOrObserver,this.error,this.complete))},t}(),Ko=function(t){function i(i,e,s,n){var r=t.call(this,i)||this;return r.Bj=Qo,r.Dj=Qo,r.Fj=Qo,r.Dj=s||Qo,r.Fj=n||Qo,wr(e)?(r.ty=r,r.Bj=e):e&&(r.ty=e,r.Bj=e.next||Qo,r.Dj=e.error||Qo,r.Fj=e.complete||Qo),r}return yr(i,t),i.prototype.Qg=function(t){try{this.Bj.call(this.ty,t)}catch(t){return void this.destination.error(t)}this.destination.next(t)},i.prototype.Xg=function(t){try{this.Dj.call(this.ty,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)},i.prototype.Yg=function(){try{this.Fj.call(this.ty)}catch(t){return void this.destination.error(t)}return this.destination.complete()},i}(Pr);class Zo{constructor(t){this.bid=t,this.cancelled=!1,this.$j=new Vr,this.Uj=!1,this.Lw=this.bid.onVpaidEvent.pipe(Ho(t=>t.type===w.b.AdLoaded),Wo(()=>!this.Uj),Xo(()=>{this.Uj=!0})),this.Rw=this.bid.onVpaidEvent.pipe(Ho(t=>t.type===w.b.AdError),jo(t=>t.payload.errorMessage),Wo(()=>!this.Uj),Xo(()=>{this.Uj=!0}))}get onSuccess(){return this.Lw}get onFailure(){return No(this.$j,this.Rw)}loadBid(t,i,e,s,n){this.bid.initAd(t,i,e,s,void 0,void 0,n)}cancelLoad(){this.cancelled=!0,this.Uj=!0,this.bid.stopAd("cancel"),this.$j.next(ia.c.Cancelled)}}const tc=1,ic=500,ec=!0;class sc{constructor(t){this.Gn=t,this.Vj=new Set,this.Nj=new Map,this.Gg=[],this.Tc=!1,this.Hj=null,this.qj=()=>{if(this.zj())return;const t=this.Wj(this.Gn.adBidPool.bids);if(!t)return;if(!this.Gj(t.bid))return;const i=new Zo(t.bid);return this.Vj.add(i),this.Gn.adBidPool.moveBidToLoading(t.bid),this.Jj(t.bid,i,t.state,this.Qj.vastViewMode).catch(e=>{throw this.Vj.delete(i),this.Gn.adBidPool.consumeBidLoading(t.bid),t.bid.settings.adManagerLineItem.bids.delete(t.bid),this.Gn.adWinnerYo.registerPostBid(t.bid.settings.id,t.bid.settings.adManagerLineItem.protoLineItem.creativeType,e),this.Xj(),i}).then(()=>{this.Vj.delete(i),this.Gn.adBidPool.moveBidToReady(t.bid),this.Xj()}).catch(t=>{})},this.GO=new Gh(this.qj,tc),this.Gg.push(this.Gn.adBidPool.onBid.subscribe(t=>{this.Gn.removeLoadingBids?(ec?(null!==this.Hj&&clearTimeout(this.Hj),this.Hj=setTimeout(()=>{this.Hj=null,this.Yj(this.Gn.adBidPool.bids)},ic)):this.Yj([t]),this.Xj()):this.Xj()}),this.Gn.adBidPool.onBidStarted.subscribe(()=>{this.Xj()}),this.Gn.adBidPool.onBidReadyConsumed.subscribe(()=>{this.Xj()}),this.Gn.impressionCapsTimer.onTimer().subscribe(()=>{this.Xj()}))}isLoadingBids(){return this.Vj.size>0}win(t){this.Qj=t,this.GO.setNumberOfThreads(t.maxParallelWins),this.Tc=!0,this.Xj()}stop(){this.Tc=!1,this.GO.stop()}destroy(){this.stop(),na(this.Gg),this.Nj.forEach(t=>t())}Xj(){this.Tc&&this.GO.start()}Gj(t){const i=[...Object(u.d)(this.Vj).map(t=>t.bid),...this.Gn.adBidPool.bidsReady];if(i.length<=0)return!0;const e=this.Wj(i);return!e||this.Gn.adWinnerYo.getWinningYoScore(t.settings.id)>this.Gn.adWinnerYo.getWinningYoScore(e.bid.settings.id)}Kj(t,i){return t!==i&&!!this.Gn.adWinnerYo.isBetterBid(t,i)}Yj(t){if(!this.Gn.removeLoadingBids||!this.Tc||!this.zj())return;const i=this.Wj(t);if(!i)return;const e=Object(u.d)(this.Vj).sort((t,i)=>this.Gn.adWinnerYo.getWinningYoScore(t.bid.settings.id)-this.Gn.adWinnerYo.getWinningYoScore(i.bid.settings.id))[0];e&&!e.cancelled&&this.Kj(i.bid,e.bid)&&e.cancelLoad()}zj(){if(-1===this.Gn.maxNumberOfWins)return!1;return this.Gn.adBidPool.bidsReady.length+this.Vj.size+(this.Gn.adBidPool.bidStarted?1:0)>=this.Gn.maxNumberOfWins}Wj(t){return this.Gn.adWinnerYo.getBestBid(t,this.Qj.stateSettings,this.Gn.impressionCapsService,this.Gn.platformCappedLineItemRepo)}Jj(t,i,e,s){return new Promise((n,r)=>{const a=Date.now(),{width:h,height:o}=e.adContainerState.get(t.settings.adManagerLineItem.protoLineItem.adType);Gr.track(t.settings.trackers.adWin,this.Gn.adMacroReplacer,t.settings.adManagerLineItem.protoLineItem,e),i.onSuccess.subscribe(()=>{n()}),i.onFailure.subscribe(i=>{this.Zj(t,i,Date.now()-a),r(i)}),to.trackWin(this.Gn.playerId,t),i.loadBid(h,o,s,this.Gn.desiredBitRateForWins,e.soundValue)})}Zj(t,i,e){var s,n,r,a,h;const o=(null===(n=null===(s=this.Qj.stateSettings)||void 0===s?void 0:s.currentState)||void 0===n?void 0:n.adBreakState)||(null===(a=null===(r=this.Qj.stateSettings)||void 0===r?void 0:r.predictedState)||void 0===a?void 0:a.adBreakState);Gr.track(t.settings.trackers.adError,this.Gn.adMacroReplacer,t.settings.adManagerLineItem.protoLineItem,t.settings.callingState),to.trackPostBid(this.Gn.playerId),this.Gn.trackingService.addPostBid({adPodSlotPosition:o.adPodSlotIndex,adsourceType:t.adSourceType,advertiserLineItemId:t.settings.adManagerLineItem.protoLineItem.advertiserLineItemId,publisherLineItemId:t.settings.adManagerLineItem.protoLineItem.publisherLineItemId,error:i,loaded:!1,prebidJsBidderName:t.settings.requestMetadata.data.prebidJsBidderName,vastMediaType:t.adMediaType,syncedUser:t.settings.requestMetadata.data.syncedUser,rtbSeatId:t.settings.requestMetadata.data.rtbSeatId,rtbAdomain:t.settings.requestMetadata.data.rtbAdomain,creativeId:t.creativeId,timeSpent:e,dspId:t.settings.requestMetadata.data.dspId,cnxBidId:t.settings.requestMetadata.data.cnxBidId,winToAdLoadedTime:null===(h=t.settings.bidLifecycle)||void 0===h?void 0:h.winToAdLoadedTime})}}var nc;!function(t){function i(t,i){if(Object(u.h)(i.items)&&Array.isArray(t)){const e=Object(u.b)(t,i.items).length;return i.choiceCriteria===a.ProtoChoiceCriteriaEnum.Only?e>0:0===e}const e=Object(u.g)(t,i.items);return i.choiceCriteria===a.ProtoChoiceCriteriaEnum.Only?e:!e}function e(t,i){return t.some(t=>(function(t,i){for(let e=0;e<t.filters.length;e++){const s=t.filters[e],n=i.filter(t=>s.items.includes(t)).length;switch(s.type){case a.ProtoLineItemContextualTargetingEnum.IncludeAny:if(0===n)return!1;break;case a.ProtoLineItemContextualTargetingEnum.IncludeAll:if(n!==s.items.length)return!1;break;case a.ProtoLineItemContextualTargetingEnum.ExcludeAny:if(n>0)return!1;break;case a.ProtoLineItemContextualTargetingEnum.ExcludeAll:if(n===s.items.length)return!1}}return!0})(t,i))}t.isAllowedBySound=function(t,i){return!t.protoLineItem.sound||i.sound},t.isAllowedByViewability=function(t,i){const e=i.adContainerState.get(t.protoLineItem.adType).viewability;return!t.protoLineItem.viewability||e},t.isAllowedByAdBreakType=function(t,i){return!t.protoLineItem.adBreakSettings||t.protoLineItem.adBreakSettings.adBreakTargeting.some(t=>{if(t.adRollType===i.adBreakState.adBreakType)return function(t,i){switch(t){case a.ProtoLineItemAdBreakTypeEnum.All:return!0;case a.ProtoLineItemAdBreakTypeEnum.AdPod:return i;case a.ProtoLineItemAdBreakTypeEnum.SingleAd:return!i}}(t.adBreakTypeEnum,i.adBreakState.isAdPodBreak)})},t.isAllowedByMediaTargeting=function(t,e){return!(t.protoLineItem.mediaIdTargeting&&!i(e.media.mediaId,t.protoLineItem.mediaIdTargeting)||t.protoLineItem.mediaKeywordsTargeting&&!i(e.media.mediaKeywords,t.protoLineItem.mediaKeywordsTargeting)||t.protoLineItem.mediaLanguageTargeting&&!i(e.media.mediaLanguage,t.protoLineItem.mediaLanguageTargeting))},t.isAllowedByContextualTargeting=function(t,i){const{advertiserContextualTargeting:s,publisherContextualTargeting:n}=t.protoLineItem,r=i.media.videoIndexes||[];return!(Object(u.h)(s)&&!e(s,r)||Object(u.h)(n)&&!e(n,r))},t.isAllowedByPlayerSizeTargeting=function(t,i){const{playerSizeTargetings:e}=t.protoLineItem,{width:s}=i.adContainerState.get(t.protoLineItem.adType);return!Object(T.f)(e)||!Object(T.d)(s)||(e.sizeChoiceCriteria===a.ProtoSizeChoiceCriteriaEnum.GreaterThan?!Object(T.d)(e.minWidth)||s>=e.minWidth:e.sizeChoiceCriteria===a.ProtoSizeChoiceCriteriaEnum.SmallerThan?!Object(T.d)(e.maxWidth)||s<=e.maxWidth:e.sizeChoiceCriteria!==a.ProtoSizeChoiceCriteriaEnum.Between||!Object(T.d)(e.maxWidth)||!Object(T.d)(e.minWidth)||s>=e.minWidth&&s<=e.maxWidth)},t.isAllowedByPodTargeting=function(t,i){var e;const s=null===(e=t.protoLineItem.adBreakSettings)||void 0===e?void 0:e.adPodTargeting;if(!s)return!0;if(!i.adBreakState.isAdPodBreak)return!0;const n=i.adBreakState.adPodSlotIndex;let r=!0;switch(s.adSlotTargetingType){case a.ProtoLineItemAdSlotTargetingTypeEnum.Interval:(n<s.adSlotPositions[0]||n>s.adSlotPositions[1])&&(r=!1);break;case a.ProtoLineItemAdSlotTargetingTypeEnum.SpecificSlots:-1===s.adSlotPositions.indexOf(n)&&(r=!1)}return s.targetingType===a.ProtoLineItemTargetingTypeEnum.Except&&(r=!r),r},t.isAllowedRegardingDuration=function(t,i){return!t||0===i||t<=i},t.isAllowedRegardingSkippability=function(t,i,e){switch(e){case a.ProtoPlayerAdSkippability.IfLongerThan31Sec:if(i===a.ProtoAdSkipMode.Never&&t>N.f)return!1;break;case a.ProtoPlayerAdSkippability.Always:if(i===a.ProtoAdSkipMode.IfLongerThan31Sec&&t&&t<N.f)return!1}return!0}}(nc||(nc={}));class rc{constructor(t,i){this.tA=t,this.iA=i}getCallingYoScore(t){return this.tA.getCallingYoScore(t)}getWinningYoScore(t){return this.tA.getWinningYoScore(t)}getImpressionYoScore(t){return this.tA.getImpressionYoScore(t)}registerBiddingInformation(t){this.tA.registerBiddingInformation(t)}registerPreBid(t){this.tA.registerPreBid(t)}registerImpression(t,i){this.tA.registerImpression(t,i)}registerPostBid(t,i,e){this.tA.registerPostBid(t,i,e)}eA(t,i){return nc.isAllowedByViewability(t,i)&&nc.isAllowedBySound(t,i)&&nc.isAllowedByAdBreakType(t,i)&&nc.isAllowedByMediaTargeting(t,i)&&nc.isAllowedByPodTargeting(t,i)&&nc.isAllowedByContextualTargeting(t,i)&&nc.isAllowedByPlayerSizeTargeting(t,i)}sA(t,i){const e=t.getAdDuration(),s=t.settings.adManagerLineItem.protoLineItem.skipMode,n=i.adBreakState.sessionMaxAdDuration;return nc.isAllowedRegardingDuration(e,n)&&nc.isAllowedRegardingSkippability(e,s,this.iA)}nA(t,i){const e=t.getAdDuration(),s=i.adBreakState.remainingAdDuration;return nc.isAllowedRegardingDuration(e,s)}rA(t,i,e,s){return!s.isLineItemPlatformCapped(t.settings.adManagerLineItem.protoLineItem.advertiserLineItemId)&&e.canCall(t.settings.adManagerLineItem,i.adOpportunity.id)&&this.eA(t.settings.adManagerLineItem,i)&&this.sA(t,i)&&this.nA(t,i)}}class ac extends rc{getBestCallable(t,i){return this.aA(t,i.currentState||i.predictedState)}isBidWinnable(t,i,e,s){return this.rA(t,i,e,s)}isBidWinnableEverInSession(t,i){return this.sA(t,i)}aA(t,i){if(!i)return;const e=this.hA(t,i),s=this.oA(e);return s?{state:i,lineItemList:this.cA(s,e)}:void 0}oA(t){let i=t;return t.some(t=>lh(t.protoLineItem.creativeType))&&(i=i.filter(t=>lh(t.protoLineItem.creativeType))),this.lA(i)[0]}lA(t=[]){return t.sort((t,i)=>this.getCallingYoScore(i.protoLineItem.advertiserLineItemId)-this.getCallingYoScore(t.protoLineItem.advertiserLineItemId))}hA(t,i){return t.filter(t=>this.eA(t,i))}cA(t,i){const{creativeType:e}=t.protoLineItem;return lh(e)?this.lA(i.filter(t=>e===t.protoLineItem.creativeType)):[t]}}class hc extends rc{getBestBid(t,i){return this.uA(t,i)}getBetterBid(t,i){return this.getImpressionYoScore(t.settings.id)>this.getImpressionYoScore(i.settings.id)?t:i}uA(t,i){return[...t].sort((t,i)=>this.getImpressionYoScore(i.settings.id)-this.getImpressionYoScore(t.settings.id))[0]}}class oc extends rc{getBestBid(t,i,e,s){const n=t.filter(t=>this.rA(t,i.currentState||i.predictedState,e,s));return this.dA(n,i.currentState||i.predictedState,e,s)}isBetterBid(t,i){return this.getWinningYoScore(t.settings.id)>this.getWinningYoScore(i.settings.id)}dA(t,i,e,s){const n=this.fA(t,i,e,s);if(n)return{state:i,bid:n}}fA(t,i,e,s){return[...t].filter(t=>this.rA(t,i,e,s)).sort((t,i)=>this.getWinningYoScore(i.settings.id)-this.getWinningYoScore(t.settings.id))[0]}}class cc{constructor(t){this.Gn=t,this.pA=new Vr,this.bA=!1,this.vA=!1,this.mA=null,this.gA=!1,this.yA=(t,i)=>{return this.Gn.yoScoreManager.getCallingYoScore(i.protoLineItem.advertiserLineItemId)-this.Gn.yoScoreManager.getCallingYoScore(t.protoLineItem.advertiserLineItemId)},this.bA=t.locked,t.adBidPool.onBid.subscribe(()=>{this.bA||this.wA()})}get onAuctionEnd(){return this.pA.asObservable()}startAuction(t){this.vA=!1,0!==t||this.bA||null!==this.mA?this.wA()||(this.gA=!1,this.xA(),this.mA=setTimeout(()=>{this.gA=!0,this.bA||this.pA.next()},t)):this.pA.next()}lock(){this.bA=!0}unlock(){this.bA=!1,this.vA||(this.gA?this.pA.next():this.wA())}cancel(){this.vA=!0,this.xA()}xA(){clearTimeout(this.mA),this.mA=null}wA(){var t;if(this.vA)return!1;this.Gn.adBidPool.bids.sort((t,i)=>this.Gn.yoScoreManager.getWinningYoScore(i.settings.id)-this.Gn.yoScoreManager.getWinningYoScore(t.settings.id));const i=this.Gn.adBidPool.bids[0];if(!i)return!1;this.Gn.adBidPool.callingLineItems.sort(this.yA);const e=this.Gn.adBidPool.callingLineItems[0],s=this.Gn.yoScoreManager.getWinningYoScore(i.settings.id),n=this.Gn.yoScoreManager.getCallingYoScore(null===(t=e)||void 0===t?void 0:t.protoLineItem.advertiserLineItemId);return(!e||s>=n)&&(this.pA.next(),this.xA(),!0)}}class lc{constructor(t){this.protoLineItem=t,this.allowedSlots=[],this.bids=new Set,this.callers=new Set,this.aggregators=new Set}}const uc="cnx-ad-bid-slot",dc="cnx-ad-slot",fc="cnx-ad-video-slot";class pc{constructor(t,i){this.parentContainer=t,this.vv=i,this.isImaSlot=!1,this.slotsContainer=this.vv.createElementByString(`<div class= "${uc}"></div>`),this.adSlot=this.vv.createElementByString(`<div class="${dc}"></div>`),this.videoSlot=this.vv.createElementByString(`<video class="${dc} ${fc}"></video>`),this.videoSlot.setAttribute("playsinline",""),this.videoSlot.setAttribute("webkit-playsinline",""),this.slotsContainer.appendChild(this.videoSlot),this.slotsContainer.appendChild(this.adSlot),this.parentContainer.appendChild(this.slotsContainer)}destroy(){this.parentContainer.removeChild(this.slotsContainer)}sanitize(){}}class bc extends pc{constructor(){super(...arguments),this.isImaSlot=!0,this.kA=!1,this.SA={imaAdDisplayContainer:void 0,imaAdsLoader:void 0,imaSdk:void 0}}fetchImaDependencies(){return va.fetchImaSdk(window,!0).then(t=>this.OA(t))}destroy(){this.SA.imaAdsLoader&&this.SA.imaAdsLoader.destroy(),this.SA.imaAdDisplayContainer&&this.SA.imaAdDisplayContainer.destroy(),super.destroy()}sanitize(){this.SA.imaAdsLoader.contentComplete(),super.sanitize()}OA(t){if(this.kA)return this.SA;t.settings.setDisableCustomPlaybackForIOS10Plus(!0);const i=this._A(t),e=this.jA(t,i);return this.SA={imaSdk:t,imaAdDisplayContainer:i,imaAdsLoader:e},this.kA=!0,this.SA}_A(t){const i=new t.AdDisplayContainer(this.adSlot,this.videoSlot);return i.initialize(),i}jA(t,i){const e=new t.AdsLoader(i);return e.getSettings().setVpaidMode(t.ImaSdkSettings.VpaidMode.INSECURE),e}}const vc=3;class mc{constructor(t){this.settings=t,this.AA=new Set,this.IA=new Set,this.TA=[10,15,20],this.CA=0,va.preloadImaSdk(window);for(let i=1;i<=vc;i++){const i=new bc(t.slot,this.settings.globalDomUtilsService);i.fetchImaDependencies(),this.AA.add(i)}}requestAdSlot(t){const i=new pc(t,this.settings.globalDomUtilsService);return this.PA(i),this.MA(),i}requestAdSlotIma(t){let i=this.EA();return i||(i=new bc(t,this.settings.globalDomUtilsService)),this.PA(i),this.MA(),i}destroyAdSlot(t){this.IA.delete(t),t.destroy()}recycleAdSlot(t){this.IA.delete(t),this.LA(t)?(t.sanitize(),this.AA.add(t)):this.destroyAdSlot(t)}LA(t){return t.isImaSlot}EA(){let t=null;return this.AA.forEach(i=>{this.LA(i)&&null===t&&(t=i)}),t}PA(t){this.AA.delete(t),this.IA.add(t)}MA(){const t=this.AA.size+this.IA.size;t===this.TA[this.CA]&&(this.RA(this.TA[this.CA]),t===this.TA[this.TA.length-1]&&this.TA.push(this.TA[this.TA.length-1]+20),this.CA++)}RA(t){Object(n.a)({message:"AdSlotContainerRecycler_slotcount",exception:`${t}`,callStack:"",level:a.ProtoLoggingLevelEnum.INFO,throttle:20,sendMaxLog:!0})}}function gc(t){return[t-(t-t%100),t-t%100]}function yc(t,i=!1){if(i)return Math.random();const{successRate:e,cpm:s,priority:n}=t;let r=0===e?Math.random():e;return r=1,1*s+N.h*n}function wc(t){switch(t.creativeType){case a.ProtoCreativeTypeEnum.Tam:case a.ProtoCreativeTypeEnum.Rtb:return(t.obfuscatedPrice+N.d)*N.c;case a.ProtoCreativeTypeEnum.HeaderBidder:return t.cpm;default:return t.floorPrice}}class xc{constructor(t,i){this.BA=i,this.DA=this.FA(t)}registerBiddingInformation(t){const i=wc(t),{priority:e,successRate:s,lineItemId:n,bidId:r}=t;let a=0;a=lh(t.creativeType)?yc({cpm:i,priority:e,successRate:s},this.BA):this.getCallingYoScore(t.lineItemId),this.$A(n,r,a)}registerPreBid(t){this.UA(t)}registerImpression(t,i){this.UA(t),lh(i)||this.VA(t)}registerPostBid(t,i,e){this.UA(t),lh(i)||e===ia.c.Cancelled||this.NA(t)}getCallingYoScore(t){const i=this.HA(t);return i?i.yoScore:0}getWinningYoScore(t){const i=this.qA(t);return i?i.bidMap.get(t):(Object(n.a)({message:"YoScoreManager_getWinningYoScore_error",exception:`bid was not yet registered: ${t}`,level:a.ProtoLoggingLevelEnum.WARNING}),0)}getImpressionYoScore(t){return this.getWinningYoScore(t)}NA(t){const i=this.qA(t);if(!i)return;const e=function(t){const i=gc(t);return i[1]+i[0]*N.i}(i.yoScore);this.zA(i,e)}VA(t){const i=this.qA(t);if(!i)return;const e=function(t){const i=gc(t);return i[1]+i[0]*N.j}(i.yoScore);this.zA(i,e)}zA(t,i){t&&(t.yoScore=i)}$A(t,i,e){const s=this.HA(t);if(!s)return;const n=this.WA(s);!this.BA||s.bidMap.has(i)||-1===n?this.GA(s,i)&&s.bidMap.set(i,e):s.bidMap.set(i,n)}WA(t){const i=[...t.bidMap.values()];return Object(u.h)(i)?i[0]:-1}GA(t,i){return!this.BA||!t.bidMap.has(i)}FA(t){return t.map(t=>{const{floorPrice:i,lineItemPriority:e,successRate:s,advertiserLineItemId:n,creativeType:r}=t;let a;return{lineItemId:n,yoScore:a=lh(r)?Math.random():yc({cpm:i,priority:e,successRate:s},this.BA),bidMap:new Map}})}HA(t){return this.DA.find(i=>i.lineItemId===t)}qA(t){return this.DA.find(i=>i.bidMap.has(t))}UA(t){if(!t)return;const i=this.qA(t);i&&0!==i.bidMap.size&&i.bidMap.delete(t)}}var kc;!function(t){t[t.Default=0]="Default",t[t.Prefetch=1]="Prefetch"}(kc||(kc={}));const Sc=0,Oc=5,_c=10,jc=-1,Ac=1,Ic=!1;class Tc{constructor(t){this.Gn=t,this.JA=!1,this.QA=!1,this.Gg=[],this.XA=null,this.YA=!1,this.jy=new Vr,this.KA=new Vr,this.ZA=!1,this.tI=new mr,this.iI=new _o,this.Gn.app.services.TrackingService.addPlatformCappedLineItemSubscriber(this),this.Gn.app.services.TrackingService.setImpressionRevenueSubscriber(this),this.Gn.app.services.TrackingService.startBidRequests();const i=this.Gn.lineItemList.map(t=>new lc(t)),e=new xc(this.Gn.lineItemList,this.Gn.app.config.explorationMode);this.eI=new uo,this.sI=new ao,this.nI=new oo,this.rI=new co,this.Cb=new fo(this.Gn.adContainerMap,this.Gn.app.services.ResizeObserver,this.Gn.app.services.ViewabilityService,N.g);const s=new mc({globalDomUtilsService:this.Gn.app.services.GlobalDomUtilsService,recycleAdSlots:!0,slot:this.Cb.getContainerMap().get(a.ProtoAdType.Video)});this.aI=new Hr,this.hI=new cc({adBidPool:this.aI,locked:!0,yoScoreManager:e}),this.rS=new vr,this.sS=new So(this.Gn.app.services.MacrosService,this.Gn.app.services.UserManagerService),this.oI=new eo({adBidPool:this.aI,adCallerYo:new ac(e,this.Gn.skipAdsSettings.adSkippability),adContainerMap:this.Cb.getContainerMap(),adMacroReplacer:this.sS,amazonSlotId:this.Gn.amazonTamSlotId,app:this.Gn.app,isOutstream:this.Gn.outstream,lineItemList:i,schainSettings:this.Gn.pbjsSchainSettings,skipAdSettings:this.Gn.skipAdsSettings,trackingService:this.Gn.app.services.TrackingService,lineItemServices:{impressionCapsService:this.sI,lineItemServicesTimer:this.eI,requestCapsService:this.nI,timeBetweenRequestsService:this.rI},adRequestGatekeeper:this.rS,platformCappedLineItemRepo:this.tI,adEnforcer:new wo(this.Gn.app.config.isMobile,Object(j.t)(this.Gn.adContainerMap.get(a.ProtoAdType.Video)),this.Gn.disableScrollHijackEnforcement),pauseAdWhenFinished:this.Gn.pauseAdWhenFinished,loopAdWhenFinished:this.Gn.loopAdWhenFinished,os:this.Gn.app.config.os.os,adSlotContainerRecycler:s}),this.cI=new sc({adBidPool:this.aI,adWinnerYo:new oc(e,this.Gn.skipAdsSettings.adSkippability),desiredBitRateForWins:Ac,maxNumberOfWins:jc,removeLoadingBids:Ic,trackingService:this.Gn.app.services.TrackingService,impressionCapsService:this.sI,impressionCapsTimer:this.eI,platformCappedLineItemRepo:this.tI,adMacroReplacer:this.sS,playerId:this.Gn.app.config.playerId}),this.lI=new xo({adBidPool:this.aI,adImpressionerYo:new hc(e,this.Gn.skipAdsSettings.adSkippability),impressionCapsService:this.sI,impressionCapsTimer:this.eI,requestCapsService:this.nI,playerSkippability:this.Gn.skipAdsSettings.adSkippability,removeBidIfHigherYoScore:Ic,trackingService:this.Gn.app.services.TrackingService,adRequestGatekeeper:this.rS,pauseAdWhenFinished:this.Gn.pauseAdWhenFinished,loopAdWhenFinished:this.Gn.loopAdWhenFinished,adMacroReplacer:this.sS,explorationMode:this.Gn.app.config.explorationMode,playerId:this.Gn.app.config.playerId}),this.Gg.push(this.hI.onAuctionEnd.subscribe(()=>{this.JA=!0,this.uI()}),this.Cb.onContainerStateUpdate.subscribe(()=>{if(this.XA){const{width:t,height:i,viewability:e}=this.dI();this.fI(e),this.XA.resizeAd(t,i,this.pI)}this.QA&&this.bI(),this.JA&&this.uI()}),this.lI.onAdSelected.subscribe(t=>{this.XA=t,this.vI(),t.setAdVolume(this.mI.sound)}),this.lI.onAdFinished.subscribe(t=>{this.gI()}),this.aI.onBidReady.subscribe(t=>{this.ZA&&(this.oI.stop(),this.QA=!1)}));const n=this.oI.onFirstAggregatedBatchFinished.subscribe(()=>{this.hI.unlock(),n.unsubscribe()})}get onVpaidEvent(){return this.jy.asObservable()}get onImpressionRevenueEvent(){return this.KA.asObservable()}setAdVolume(t){this.XA&&(this.yI(t),this.XA.setAdVolume(t))}setAdViewMode(t){if(this.XA){this.pI=t;const{width:i,height:e}=this.dI();this.XA.resizeAd(i,e,t)}}stopAd(t){this.XA&&this.XA.stopAd(t)}pauseAd(t){this.XA&&this.XA.pauseAd(),t&&this.iI.pauseViaUserInteraction()}resumeAd(t){this.XA&&this.XA.resumeAd(),t&&this.iI.resumeViaUserInteraction()}skipAd(){this.XA&&(this.XA.setAdVolume(0),this.XA.skipAd())}getCurrentAdMetadata(){if(this.XA)return{advertiserLineItemId:this.XA.settings.adManagerLineItem.protoLineItem.advertiserLineItemId,publisherLineItemId:this.XA.settings.adManagerLineItem.protoLineItem.publisherLineItemId,adType:this.XA.settings.adManagerLineItem.protoLineItem.adType,duration:this.XA.getAdDuration(),adSkipMode:this.XA.settings.adManagerLineItem.protoLineItem.skipMode,moatTrackingEnabled:this.XA.settings.adManagerLineItem.protoLineItem.moatTrackingEnabled}}enableImpressions(t){this.disablePredict(),this.ZA=!1,this.wI(t),this.mI=t,this.xI||(this.xI=this.mI),this.nI.allowResetOnTime=!0,this.Cb.updateState(),this.kI(t),this.QA=!0,this.bI(),t.adOpportunity&&!t.adOpportunity.startedAuctionWithTimeout?(t.adOpportunity.startAuctionWithTimeout(),this.hI.startAuction(Sc)):this.hI.startAuction(0)}disableImpressions(){this.JA&&(this.hI.cancel(),this.lI.stop(),this.oI.stop(),this.JA=!1,this.QA=!1,this.XA&&!this.YA&&this.Gn.app.config.isInApp&&this.XA.stopAd("inApp_disable"))}enablePredict(t,i){if(!(this.aI.bidsReady.length>0)){switch(this.mI=null,this.ZA=!0,this.xI=t,this.xI.predictType=i,i){case kc.Prefetch:this.nI.allowResetOnTime=!1;break;case kc.Default:this.nI.allowResetOnTime=!0}this.QA=!0,this.bI()}}disablePredict(){this.ZA&&(this.oI.stop(),this.QA=!1)}setPlatformCappedLineItemIdList(t){this.tI.addPlatformCappedLineItemIdList(t)}notifyImpressionRevenue(t){this.KA.next(t)}getAdMediaSize(){if(this.XA){const t=this.XA.getAdMediaSize().width,i=this.XA.getAdMediaSize().height,{widthRatio:e,heightRatio:s}=Object(rt.b)(t,i);return{width:t,height:i,widthRatio:e,heightRatio:s,adType:this.XA.settings.adManagerLineItem.protoLineItem.adType}}}destroy(){this.disableImpressions(),na(this.Gg),this.oI.destroy(),this.cI.destroy(),this.lI.destroy(),this.eI.destroy(),this.XA&&(this.SI(),this.XA.stopAd("adManagerDestroy"),this.gI()),this.Gn.app.services.TrackingService.removePlatformCappedLineItemSubscriber(this),this.Gn.app.services.TrackingService.unsubscribeToImpressionRevenue(this)}isLoadingAds(){return!!this.XA||!!this.cI.isLoadingBids()}uI(){(this.mI||this.xI)&&this.mI&&this.lI.start(this.OI(this.mI))}bI(){this.oI.call(this._I()),this.cI.win(this.jI())}_I(){return{maxParallelCalls:Oc,stateSettings:{currentState:this.OI(this.mI),predictedState:this.AI(this.xI)}}}jI(){return{desiredBitRate:Ac,maxParallelWins:_c,vastViewMode:this.mI?this.mI.vastViewMode:this.xI.vastViewMode,stateSettings:{currentState:this.OI(this.mI),predictedState:this.AI(this.xI)}}}AI(t){if(!t)return;let i;return t.predictType===kc.Prefetch?(i=new Map,this.Cb.getContainerStateMap().forEach((t,e)=>{i.set(e,Object.assign(Object.assign({},t),{viewability:!0}))})):i=this.Cb.getContainerStateMap(),{clickToPlay:t.clickToPlay,media:t.mediaMetada,sound:!!t.sound,soundValue:t.sound,adContainerState:i,adBreakState:t.adBreakState,adOpportunity:t.adOpportunity}}OI(t){if(t)return{clickToPlay:t.clickToPlay,media:t.mediaMetada,sound:!!t.sound,soundValue:t.sound,adContainerState:this.Cb.getContainerStateMap(),adBreakState:t.adBreakState,adOpportunity:t.adOpportunity}}vI(){var t;this.jy.next({type:w.b.AdLoaded,payload:null===(t=this.XA.settings.adLoadedPayload)||void 0===t?void 0:t.payload}),this.II=this.XA.onVpaidEvent.subscribe(t=>{if(t.type===w.b.AdImpression){this.YA=!0;const{viewability:t}=this.dI();this.fI(t)}this.jy.next(t)})}dI(){return this.Cb.getContainerStateMap().get(this.XA.settings.adManagerLineItem.protoLineItem.adType)}SI(){this.II&&(this.II.unsubscribe(),this.II=null)}gI(){this.YA=!1,this.iI.onAdRemoved(),this.XA=null,this.SI()}fI(t){this.iI.checkPauseAd(this.XA,t)}kI(t){const i=[this.sI,this.nI];t.newContent&&i.forEach(t=>{t.resetCapsBasedOnExternalEvent(a.ProtoResetCapTypeEnum.ContentCapping)})}yI(t){const i=this.XA.getAdVolume();let e=null;0===i&&t>0?e=this.XA.settings.trackers.adUnmute:i>0&&0===t&&(e=this.XA.settings.trackers.adMute),e&&Gr.track(e,this.sS,this.XA.settings.adManagerLineItem.protoLineItem,this.OI(this.mI||this.xI))}wI(t){const{playerId:i}=this.Gn.app.config,{adOpportunity:e}=t,{adBreakType:s}=t.adBreakState;e&&s===a.ProtoAdBreakTypeEnum.PreRoll&&to.initialize(i),s!==a.ProtoAdBreakTypeEnum.PreRoll&&to.log(i)}}class Cc{constructor(){this.TI=Object(at.c)(),this.CI=!1}get id(){return this.TI}get startedAuctionWithTimeout(){return this.CI}startAuctionWithTimeout(){this.CI=!0}}const Pc={[a.ProtoAdSlotsEnum.PreRoll]:a.ProtoAdBreakTypeEnum.PreRoll,[a.ProtoAdSlotsEnum.MidRoll]:a.ProtoAdBreakTypeEnum.MidRoll,[a.ProtoAdSlotsEnum.PostRoll]:a.ProtoAdBreakTypeEnum.PostRoll};class Mc extends o.a{constructor(t,i,e,s,n,r=!1,h,o,c,l,u,d,f,p,b){super(),this.mediator=t,this.MI=i,this.EI=e,this.eS=s,this.xb=n,this.LI=r,this.wb=o,this.zS=c,this.RI=u,this.lx=d,this.BI=f,this.Tl=p,this.ox=b,this.Gg=[],this.DI=!1,this.FI=!1,this.nS=new Map,this.$I=!1;let v=a.ProtoAdBreakTypeEnum.MidRoll;this.Tl.forEach(t=>{t.types.some(t=>t===a.ProtoAdBreakTypeEnum.PreRoll)&&(v=a.ProtoAdBreakTypeEnum.PreRoll)});const m=this.UI(this.wb.getMaxAdSlotDuration(),v);this.mI={mediaMetada:{},clickToPlay:!1,adOpportunity:new Cc,newContent:!1,sound:0,vastViewMode:w.a.Normal,adBreakState:m}}get adInWin(){return this.Ib.isLoadingAds()}enableAds(){this.DI=!0,this.VI(),this.mediator.publish(this,E.AdsEnabled)}disableAds(t){this.DI=!1,this.Ib&&(this.Ib.disableImpressions(),this.$I||t!==U.TimeoutBetweenAds||this.Ib.enablePredict(this.mI,kc.Default))}updateFilterConfig(t){this.mI.mediaMetada.mediaId=t.mediaId,this.mI.mediaMetada.mediaLanguage=t.mediaLanguage,this.mI.mediaMetada.mediaKeywords=t.mediaKeywords;const i=Object.assign(this.mI.mediaMetada,t);this.VI({mediaMetada:i})}userInteraction(t){this.VI({clickToPlay:!0})}newAdOpportunity(){this.VI({adOpportunity:this.$I?this.mI.adOpportunity:new Cc}),this.NI()}initAd(t,i,e,s,n,r){r.forEach(t=>{this.nS.set(t.type,t.container),this.nS.get(a.ProtoAdType.Overlay)||this.nS.set(a.ProtoAdType.Overlay,this.nS.get(a.ProtoAdType.Video))}),this.Tb(),this.FI=!0,this.VI({sound:n})}setAdVolume(t){var i;null===(i=this.Ib)||void 0===i||i.setAdVolume(t),this.VI({sound:t})}resizeAd(t,i,e){var s;this.HI!==e&&(this.setVastViewMode(e),null===(s=this.Ib)||void 0===s||s.setAdViewMode(e))}stopAd(t){var i;null===(i=this.Ib)||void 0===i||i.stopAd(t)}pauseAd(t){var i;null===(i=this.Ib)||void 0===i||i.pauseAd(t)}resumeAd(t){var i;null===(i=this.Ib)||void 0===i||i.resumeAd(t)}skipAd(){var t;null===(t=this.Ib)||void 0===t||t.skipAd()}getAdMediaSize(){return this.Ib.getAdMediaSize()}getCurrentAdClickTrackingProperties(){var t;const{publisherLineItemId:i,advertiserLineItemId:e}=null===(t=this.Ib)||void 0===t?void 0:t.getCurrentAdMetadata();return{publisherLineItemId:i,advertiserLineItemId:e}}getAdDuration(){return this.Ib.getCurrentAdMetadata().duration}getCurrentAdType(){return this.Ib.getCurrentAdMetadata().adType}getLastAdSlot(t){const i=this.nS.get(t);return{height:i.clientHeight,width:i.clientWidth}}updatePodRemainingTime(t){if(t<=0)return;const i=this.mI.adBreakState;Math.round(t/B.f)>i.remainingAdDuration||this.VI({adBreakState:this.UI(t,i.adBreakType)})}onAdStateChange(t,i){const e=Pc[t];this.VI({adBreakState:this.UI(i,e)})}onContentChange(){this.VI({newContent:!0})}setVastViewMode(t){this.HI=t,this.qI({vastViewMode:t})}destroy(){na(this.Gg)}VI(t){this.qI(t),this.DI&&this.FI&&(this.Ib.enableImpressions(this.mI),this.zI())}qI(t){Object.assign(this.mI,t),this.mI.adBreakState=this.UI(this.mI.adBreakState.remainingAdDuration,this.mI.adBreakState.adBreakType)}zI(){this.qI({clickToPlay:!1,newContent:!1})}UI(t,i){return{isAdPodBreak:this.wb.isCurrentBreakInPod(),adPodSlotIndex:this.wb.isCurrentBreakInPod()?this.wb.getNextSlotIndex():0,maxAdDuration:Math.round(this.wb.getMaxAdSlotDuration()/B.f||lr),remainingAdDuration:Math.round(t/B.f),sessionMaxAdDuration:Math.round(this.wb.getMaxAdSlotPossibleDuration()/B.f),adBreakType:i}}Tb(){this.Ib=new Tc({adBreakHelper:this.wb,adContainerMap:this.nS,amazonTamSlotId:this.zS,app:this.xb,lineItemList:this.MI.lineItems,outstream:this.LI,pbjsSchainSettings:this.EI,prerollTimeMs:this.RI,skipAdsSettings:this.eS,disableScrollHijackEnforcement:!this.MI.disableScrollHijackEnforcement,pauseAdWhenFinished:this.lx,loopAdWhenFinished:this.ox}),this.Gg.push(this.Ib.onVpaidEvent.subscribe(t=>{switch(t.type){case w.b.AdLoaded:this.WI(t);break;case w.b.AdImpression:this.GI(t);break;case w.b.AdVideoStart:case w.b.AdError:this.mediator.publish(this,t.type,{payload:t.payload});break;default:{const i={payload:{}};this.mediator.publish(this,t.type,i)}}})),this.Ib.onImpressionRevenueEvent.subscribe(t=>{this.mediator.publish(this,C.b.ImpressionPrice,{payload:t})}),this.BI===a.ProtoAdPlaybackMode.ScrollToPlay&&this.JI()}JI(){this.$I=!0,this.Ib.enablePredict(this.mI,kc.Prefetch)}NI(){this.$I=!1}WI(t){const i={payload:{adSkipMode:t.payload.adSkipMode,adLoadedData:{skipOffset:t.payload.adLoadedData.skipOffset}}};this.mediator.publish(this,t.type,i)}GI(t){var i,e;const{adId:s,adVideoUrl:n,creativeId:r,name:a,length:h,imaMetadata:o,moatTrackingEnabled:c}=t.payload.adSourceData,l=this.Ib.getCurrentAdMetadata(),u={payload:{adSkipMode:t.payload.adSkipMode,adSourceData:{moatTrackingEnabled:c,adId:s,length:h,imaMetadata:o,adVideoUrl:n,creativeId:r,name:a},clickThroughUrl:t.payload.clickThroughUrl,customAdData:{ADVERTISER:null===(i=t.payload.customAdData)||void 0===i?void 0:i.ADVERTISER,CAMPAIGN_ID:null===(e=t.payload.customAdData)||void 0===e?void 0:e.CAMPAIGN_ID,CREATIVE_ID:t.payload.customAdData.CREATIVE_ID},adDuration:t.payload.adSourceData.length,selectedAdSlot:this.nS.get(l.adType)}};this.mediator.publish(this,t.type,u)}}class Ec extends We{constructor(t,i,e,s,n,r,a){super(t,i,e,s,n,r),this.QI=a,this.XI=t=>{this.resizeAd(t.offsetWidth,t.offsetHeight,this.Ab)}}getNewAdManager(){const t={adSkippability:this.ca.adSkippability,skipAdAfter:this.ca.skipAdAfter};return new Mc(this,this.ca.lineItemSettings,this.ca.supplyChainSettings,t,this.xb,!1,this.ca.adSkippability,this.wb,this.ca.amazonTamSlotId,this.ca.global,this.ca.preRollBreak,this.ca.pauseAdWhenFinished,this.ca.adPlaybackMode,this.ca.adBreaks,this.ca.loopAdWhenFinished)}Nb(t){this.Mb.addAdSlot(t),this.xb.services.ResizeObserver.on(t,this.XI)}Tb(t,i,e){this.Ib.initAd(t,i,this.Ab,1,e,[{container:this.Cb,width:t,height:i,type:a.ProtoAdType.Video},{container:this.YI,width:this.gb.offsetWidth,height:this.gb.offsetHeight,type:a.ProtoAdType.Overlay}])}KI(){this.YI=this.Hb(Qe.FullSizeSlot),this.Mb.addSecondaryAdSlot(this.YI),this.kb.push(this.YI)}qb(){super.qb(),this.KI()}Rb(t){super.Rb(t),t===this.YI&&Object(j.a)(this.gb,d.g.AdFullSize)}zb(){const t=new er(this.xb.services.GlobalDomUtilsService,this.xb.services.InteractionService,this.xb.services.ResizeObserver,this.gb,{isMobile:this.xb.config.isMobile});this.Mb=new ls(this,this.xb.services.GlobalDomUtilsService,this.xb.services.InteractionService,this.xb.services.ResizeObserver,this.gb,new os({inAppAndroid:this.xb.config.isInAppAndroid}).template,{isMobile:this.xb.config.isMobile},t),this.Mb.hide(),this.Mb.setMediaContainerRatio(this.QI.getContentRatioContainer())}setNextSlide(t){this.Mb.$nextSlide=t}resizeAd(t,i,e){const s=[{container:this.YI,height:this.gb.offsetHeight,width:this.gb.offsetWidth,type:a.ProtoAdType.Overlay}];super.resizeAd(t,i,e,s)}start(t,i,e){super.start(t,i,e)}hide(){Object(j.L)(this.YI,d.g.AdFullSize),this.Mb.hideSkipAdButton(),super.hide()}show(){this.kb.forEach(t=>{this.xb.services.ResizeObserver.off(t,this.XI)}),super.show(),this.Ib.getCurrentAdType()===a.ProtoAdType.Overlay?this.Mb.showSkipAdButton(this.ca.skipAdAfter):this.Mb.hideSkipAdButton(),this.kb.forEach(t=>{this.xb.services.ResizeObserver.on(t,this.XI)})}$b(){super.$b(),this.subscribe(_[_.SkipAd],this.Mb,()=>this.ZI())}ZI(){this.skipAd(),this.userInteraction(!0)}}class Lc{constructor(t,i=es){this.Rv=t,this.setCurrentSlide(i)}Um(t=this.Rv.indexOf(this.tT)){return st(this.Rv,t)}get currentSlide(){return this.tT}getCurrentThumbnailUrlParams(t,i){return this.tT.media.getThumbnailUrlParams(t,i)}getCurrentMetadata(){return this.tT.metadata}setCurrentSlide(t){this.tT=this.Rv[t]}get currentSlideIndex(){return this.Um().currentIndex}get nextSlideIndex(){return this.Um().nextIndex}get prevSlideIndex(){return this.Um().prevIndex}get firstSlideIndex(){return this.Um().firstIndex}get lastSlideIndex(){return this.Um().lastIndex}get slides(){return this.Rv}get nextSlide(){return this.slides[this.nextSlideIndex]}get prevSlide(){return this.slides[this.prevSlideIndex]}getAdjacentSlides(t=this.Um().currentIndex){const i=[];for(let e=0,s=t,n=t;e<ss;e++)s=this.Um(s).nextIndex,n=this.Um(n).prevIndex,i.push(this.Rv[n],this.Rv[s]);return Object(u.n)(i)}}var Rc;!function(t){t[t.Right=0]="Right",t[t.Left=1]="Left"}(Rc||(Rc={}));class Bc extends o.a{constructor(t,i){super(),this.mediator=t,this.iT=i,this.inTransition=!1,this.Fv=0,this.eT=null,this.sT=!1,this.nT=400,this.rT=!0,this.aT=()=>{clearTimeout(this.eT),this.eT=null,this.sT=!1,this.hT(),this.Fv=this.oT(this.cT),this.mediator.publish(this,ts.SlideTransitionEnd),this.lT()},this.uT=t=>{t.stopPropagation(),t.target.parentElement===this.iT&&this.dT()&&(this.eT=setTimeout(()=>{this.sT&&this.fT()},this.nT))},this.pT=t=>{t.stopPropagation(),t.target.parentElement===this.iT&&this.inTransition&&this.sT&&this.dT()&&this.fT()},this.bT=Object(u.c)(this.iT.childNodes),this.iT.addEventListener("transitionstart",this.uT),this.iT.addEventListener("transitionend",this.pT)}destroy(){clearTimeout(this.eT),this.eT=null,this.iT.removeEventListener("transitionend",this.pT),this.iT.removeEventListener("transitionstart",this.uT)}setCurrentSlide(t,i,e=!0){this.cT=t,this.rT||(e=!1),e&&!this.vT(this.cT)&&this.mT()&&this.rT?this.inTransition||(this.Fv<this.oT(this.cT)?this.gT(i):this.gT(Rc.Left)):this.yT()}offsetSlides(t,i){this.inTransition||(Object(j.a)(i,d.r.NextSlide),this.hT(),this.wT(t))}removeNextClass(t){t.forEach(t=>{Object(j.L)(t,d.r.NextSlide)})}cleanLastSlide(t,i){Object(j.N)(t,"transform"),Object(j.L)(i,d.r.NextSlide)}setAnimationAllowed(t){this.rT=t}wT(t){Object(j.Q)(this.xT(),{transform:`translate(${t}px)`})}yT(){Object(j.L)(this.xT(),d.r.CurrentSlide,d.r.SlideLeft,d.r.SlideRight),this.kT(this.oT(this.cT)),Object(j.a)(this.cT,d.r.CurrentSlide),this.aT()}gT(t){this.kT(this.oT(this.cT)),this.ST(),Object(j.a)(this.cT,d.r.NextSlide),t===Rc.Right?(Object(j.a)(this.cT,d.r.CurrentSlide),Object(j.a)(this.xT(),d.r.SlideLeft)):t===Rc.Left&&(Object(j.a)(this.cT,d.r.CurrentSlide),Object(j.a)(this.xT(),d.r.SlideRight)),Object(j.N)(this.xT(),"transform")}vT(t){return t===this.xT()}lT(){this.mediator.publish(this,ts.SlideChanged)}kT(t){this.sT=!0,this.mediator.publish(this,ts.SlideTransitionStart,{payload:{nextIndex:t}})}mT(){return Object(T.a)(this.xT())}oT(t){return Object(j.k)(t,this.iT)}xT(){return this.bT[this.Fv]}ST(){this.OT(),this._T()}hT(){this.jT(),this.AT()}AT(){Object(j.a)(this.iT,d.h.NoTransition)}OT(){Object(j.L)(this.iT,d.h.NoTransition)}jT(){this.inTransition=!1}_T(){this.inTransition=!0}IT(){Object(j.L)(this.xT(),d.r.CurrentSlide,d.r.SlideLeft,d.r.SlideRight),Object(j.O)(this.cT,d.r.NextSlide,d.r.CurrentSlide)}fT(){this.IT(),this.aT()}dT(){return Object(j.u)(this.xT(),d.r.SlideLeft)||Object(j.u)(this.xT(),d.r.SlideRight)}}const Dc=1;class Fc extends o.a{constructor(t,i,e,s,n,r){super(),this.mediator=t,this.vv=i,this.TT=e,this.CT=s,this.PT=n,this.MT=r,this.ET=!1,this.LT=[],this.RT=!1,this.BT=()=>{this.goToNextSlide()},this.DT=()=>{this.mediator.publish(this,ts.SlideTimeUpdate,{payload:{elapsedTime:this.Kk.timeElapsed,duration:this.FT.currentSlide.media.duration}})},this.$T=this.vv.createElementByString(`<cnx class="${Je.Slider}"></cnx>`),this.CT.appendChild(this.$T),this.UT()}VT(){this.TT.on(t=>{this.RT=t,this.NT.setAnimationAllowed(t)})}HT(t=Rc.Right){this.NT.setCurrentSlide(this.FT.currentSlide.$container,t)}qT(){let t;this.FT.currentSlide.load(),(t=this.MT?[...this.FT.slides]:[...this.FT.getAdjacentSlides()]).forEach(t=>t.load())}zT(){this.NT=new Bc(this,this.$T),this.subscribe(ts.SlideTransitionStart,this.NT,({payload:{nextIndex:t}})=>{this.RT&&this.Kk.disable(),this.mediator.publish(this,ts.SlideTransitionStart,{payload:{nextSlide:this.FT.slides[t]}})}),this.subscribe(ts.SlideChanged,this.NT,()=>{this.Kk.reset(this.FT.currentSlide.media.duration),this.FT.slides.forEach(t=>t.media.reset());const t={payload:{index:this.FT.currentSlideIndex}};this.mediator.publish(this,ts.SlideChanged,t),this.ET?this.FT.currentSlide.media.play():this.pause()}),this.subscribe(ts.SlideTransitionEnd,this.NT,()=>{this.mediator.publish(this,ts.SlideTransitionEnd)})}UT(){this.Kk=new F(this,0,ns),this.subscribe(D.TimeElapsed,this.Kk,this.BT),this.subscribe(D.TimeUpdate,this.Kk,this.DT)}WT(t){this.LT=t;const i=this.GT(t),e=t.map(t=>{const e=this.PT.getSlide(t,this,i);return this.subscribe(Ye.CallToAction,e,()=>{this.mediator.publish(this,Ye.CallToAction)}),this.relay(Ye.GeneralClickInteraction,e,this,this.mediator),this.subscribe(_[_.Next],e,()=>{this.mediator.publish(this,_[_.Next])}),e});this.FT=new Lc(e),this.Kk.reset(this.FT.currentSlide.media.duration),this.$T.innerHTML="",this.FT.slides.forEach(t=>{Object(j.d)(t.$container,this.$T),this.relay(Z.Change,t.media,this,this.mediator)})}GT(t){const i=t.map(t=>t.slideDuration).reduce((t,i)=>t+i,0);return Object(T.e)(i)?Math.ceil(i/B.g):Dc}JT(){const t=this.FT.getAdjacentSlides().map(t=>t.$container);this.NT.removeNextClass(t)}QT(t){return(t>0?this.FT.prevSlide:this.FT.nextSlide).$container}getNextSlide(){return this.FT.nextSlide}setCurrentSlide(t,i){this.NT.inTransition||(this.FT.currentSlide&&this.FT.currentSlide.media.pause(),this.FT.setCurrentSlide(t),this.qT(),this.HT(i))}getCurrentSlide(){if(this.FT)return this.FT.currentSlide}getCurrentThumbnailUrlParams(t,i){if(this.FT)return this.FT.getCurrentThumbnailUrlParams(t,i)}getCurrentMetadata(){if(this.FT)return this.FT.getCurrentMetadata()}goToNextSlide(){if(this.FT.currentSlideIndex===this.FT.lastSlideIndex)return this.NT.cleanLastSlide(this.getCurrentSlide().$container,this.getNextSlide().$container),void this.mediator.publish(this,ts.SlideCycleEnd);this.setCurrentSlide(this.FT.nextSlideIndex,Rc.Right)}goToPrevSlide(){this.setCurrentSlide(this.FT.prevSlideIndex,Rc.Left)}resetSlider(){this.setCurrentSlide(this.FT.firstSlideIndex)}setVolume(t){this.FT&&this.FT.slides.forEach(i=>{i.media.type===a.ProtoMediaTypeEnum.Video&&(i.media.volume=t)})}play(){this.ET=!0,this.Kk.start(),this.FT.currentSlide.media.play()}pause(){this.ET=!1,this.Kk.stop(),this.FT.currentSlide.media.pause()}stop(){this.FT.setCurrentSlide(this.FT.firstSlideIndex),this.qT(),this.pause(),this.NT.setCurrentSlide(this.FT.currentSlide.$container,null,!1)}get remainingTime(){return this.Kk.timeRemaining}setQuality(t){this.FT.slides.forEach(i=>{if(i.media.type===a.ProtoMediaTypeEnum.Video){const e={height:i.media.getClosestSourceQuality(t.height).videoHeight,quality:t.quality};i.media.setQuality(e)}})}getQuality(){const{currentSlide:t}=this.FT;if(t.media.type===a.ProtoMediaTypeEnum.Image)return;const{getClosestSourceQuality:i,currentQuality:e}=t.media;return i(e.height).videoHeight}start(t){try{this.WT(t),this.zT(),this.VT()}catch(t){Object(n.a)({message:"SlidesManager_start",exception:t.message,callStack:t.stack,level:a.ProtoLoggingLevelEnum.FATAL})}}offsetSlides(t){if(this.JT(),0===t)return;const i=this.QT(t);this.NT.offsetSlides(t,i)}destroy(){this.Kk.disable(),this.NT&&this.NT.destroy()}get isPlaying(){return this.ET}onPlayerContainerResize(){Object(T.a)(this.FT)&&Object(u.h)(this.FT.slides)&&this.FT.slides.forEach(t=>t.media.onSlideResizeCallback())}get slides(){return Object(T.a)(this.FT)&&Object(u.h)(this.FT.slides)?this.FT.slides:[]}get currentSlideIndex(){return Object(T.a)(this.FT)?this.FT.currentSlideIndex:0}updateCapabilityMetadata(t,i){if(!Object(T.a)(this.FT)||!Object(u.h)(this.FT.slides))return;const e=this.FT.slides[t];e&&e.updateCapabilityMetadata(i)}get slidesMetadata(){return this.LT}}class $c{constructor(t){this.XT=t}get template(){return`\n        <cnx class="cnx-ui cnx-ui-ps">\n            <cnx class="cnx-ui-click-to-play-overlay"></cnx>\n            <cnx class="${Je.Content}">\n                [[${mt.ClickToPlayButton}]]\n                <cnx class="cnx-ui-ratio-container">\n                    <cnx class="cnx-ui-ps-head">\n                    <cnx class="cnx-ui-ps-nav">\n                        ${this.YT()}\n                    </cnx>\n                    <cnx class="cnx-ui-ps-subhead cnx-ui-ps-side-mg">\n                        <cnx class="cnx-ui-ps-branding">\n                            [[${mt.TopTitle}]]\n                        </cnx>\n                        <cnx class="cnx-ui-ps-btns">\n                            <cnx class="cnx-ui-btn ${d.g.ContextController}">[[${mt.MoreButton}]]</cnx>\n                            <cnx class="cnx-ui-btn cnx-close-button">[[${mt.CloseButton}]]</cnx>\n                        </cnx>\n                    </cnx>\n                </cnx>\n                <cnx class="cnx-ui-ps-controls--wrapper cnx-ui-ps-side-mg">\n                    <cnx class="cnx-ui-ps-controls">\n                        <cnx class="cnx-ui-btn cnx-ui-ps-nav-btn">[[${mt.PreviousButton}]]</cnx>\n                        <cnx class="cnx-ui-btn">[[${mt.PlayButton}]]</cnx>\n                        <cnx class="cnx-ui-btn cnx-ui-ps-nav-btn">[[${mt.UpNextButton}]]</cnx>\n                        <cnx class="cnx-ui-btn">[[${mt.VolumeButton}]]</cnx>\n                    </cnx>\n                </cnx>\n                <cnx class="cnx-ui-ps-footer cnx-ui-ps-side-mg"></cnx>\n                [[${mt.PlayspaceSettingsMenu}]]\n                </cnx>\n            </cnx>\n            <cnx class="${Je.Footer}">\n                <cnx class="cnx-ui-ps-content cnx-ui-ps-side-mg">\n                    ${this.KT()}\n                </cnx>\n            </cnx>\n            [[${mt.Loader}]]\n        </cnx>\n        `.trim()}YT(){return this.XT.disableStoryProgressBarRendering?"":`[[${mt.PlayspaceProgressBar}]]`}KT(){return this.XT.disableTitleRendering?"":`[[${mt.SlideTitle}]]`}}class Uc{constructor(t){this.ZT=t}tC(t){return this.ZT.filter(i=>t.instance!==i.instance)}iC(t){return this.ZT.find(({name:i})=>t===i)}eC(t){t.forEach(({instance:t})=>{t.isOpen&&t.close()})}toggleContextMenu(t,i={}){const e=this.iC(t);if(e.instance.isOpen)return e.instance.close(),!1;{const{targetCoordinates:t,holdPause:s}=i,n=t||e.instance.getAnchorCoordinatesTo(e.linkedComponent);return e.instance.open(n,s),this.eC(this.tC(e)),!0}}isAnyContextMenuOpen(){return!!this.ZT.find(({instance:t})=>t.isOpen)}closeContextMenu(t){const i=this.iC(t).instance;i.isOpen&&i.close()}closeAllContextMenus(){this.eC(this.ZT)}}class Vc extends At{enterState(){super.enterState();const t=this.context.getComponent(mt.PlayspaceProgressBar);t&&t.startProgress();const i=this.context.getComponent(mt.CtaButton);i&&i.startProgress(),this.context.interactionService.enableSpecialInteractions(this.context.$container),this.context.autoHideHandler&&this.context.autoHideHandler.startAutoHide()}exitState(){super.exitState(),this.context.autoHideHandler&&this.context.autoHideHandler.showUi()}updateDuration(){const t=this.context.getComponent(mt.PlayspaceProgressBar);t&&t.startProgress()}}class Nc extends Tt{enterState(){super.enterState();const t=this.context.getComponent(mt.PlayspaceProgressBar);t&&t.pauseProgress();const i=this.context.getComponent(mt.CtaButton);i&&i.pauseProgress(),this.context.interactionService.disableSpecialInteractions(this.context.$container)}exitState(){super.exitState()}updateDuration(){}}class Hc extends Nc{enterState(){super.enterState(),this.context.interactionService.disableSpecialInteractions(this.context.$container)}exitState(){super.exitState()}}class qc extends Nc{enterState(){super.enterState(),Object(j.a)(this.context.$uiContainer,d.j.Preroll);const t=this.context.getComponent(mt.Loader);t&&t.show(),this.context.interactionService.disableSpecialInteractions(this.context.$container)}exitState(){super.exitState(),Object(j.L)(this.context.$uiContainer,d.j.Preroll);const t=this.context.getComponent(mt.Loader);t&&t.hide()}}class zc extends Nc{enterState(){super.enterState(),this.context.interactionService.disableSpecialInteractions(this.context.$container)}exitState(){super.exitState()}updateDuration(){const t=this.context.getComponent(mt.PlayspaceProgressBar);t&&t.resetProgress()}}var Wc={[As.PlaybackControls]:[mt.PlayButton],[As.VolumeControls]:[mt.VolumeButton],[As.CtaButton]:[mt.CtaButton],[As.PlaylistControls]:[mt.UpNextButton,mt.PreviousButton],[As.SlideTitle]:[mt.SlideTitle],[As.TextLabel]:[mt.TextLabel]};class Gc{constructor(){this.sC=Object.keys(Wc).reduce((t,i)=>[...t,...Wc[i]],[])}setCapabilityList(t){this.nC=t.map(t=>Wc[t.type]).filter(t=>Array.isArray(t)).reduce((t,i)=>[...t,...i],[])}getComponentList(){return{excludedComponents:Object(u.a)(this.sC,this.nC),includedComponents:Object(u.b)(this.sC,this.nC)}}}const Jc=3e3;class Qc{constructor(t){this._d=t,this.rC=!1}isUIHidden(){return this.rC}startAutoHide(){this.aC=setTimeout(()=>{this.hC()},Jc)}showUi(){clearTimeout(this.aC),this.oC()}resetAutoHideTimer(){clearTimeout(this.aC),this.oC(),this.startAutoHide()}hC(){Object(j.a)(this._d,d.g.HideUI),this.rC=!0}oC(){Object(j.L)(this._d,d.g.HideUI),this.rC=!1}}var Xc=e(20);class Yc extends Et{constructor(t,i,e,s,n,r,a,h,o){super(t,i,e,n,new er(e,o,s,i,r)),this.mediator=t,this.$container=i,this.globalDomUtilsService=e,this.settings=r,this.Yn=a,this.interactionService=o,this.cC=80,this.lC=[mt.SlideTitle,mt.CtaButton,mt.TopTitle,mt.TextLabel],this.Wd={[X.PlayingState]:new Vc(this),[X.PausedState]:new Nc(this),[X.StoppedState]:new Hc(this),[X.HiddenState]:new zc(this),[X.PrerollState]:new qc(this),[X.PostrollState]:new qc(this)},this.uC=new Gc,this.dC=()=>{this.mediator.publish(this,_[_.Play]),this.fC(_[_.Play])},this.hm=this.$container.querySelector(`.${Je.Footer}`),this.pC(),this.bC(),this.vC(),this.mC(),this.Wd[h].enterState(),this.gC(),this.yC(!1),this.wC(),this.Ov=this.$uiContainer.querySelector(`.${Je.Content}`),this.xC=this.$uiContainer.querySelector(`.${Je.Overlay}`),this.interactionService.register(this.xC,this,this.interactionService),this.subscribe(kt.a[kt.a.Click],this.interactionService,()=>{this.dC()})}pC(){const t=this.getComponent(mt.SlideTitle);t&&t.setFooterElement(this.footer)}kC(t,i){const e=this.getComponent(mt.PlayspaceProgressBar);e&&e.resizeProgressBar(t,i)}handleComponentEvent(t,i,e){switch(this.fC(t),t){case _[_.Mute]:this.mediator.publish(this,_[_.Volume],{payload:0});break;case _[_.Unmute]:this.mediator.publish(this,_[_.Volume],{payload:1});break;case mt[mt.CloseButton]:this.mediator.publish(this,_[_.Close]);break;case mt[mt.MoreButton]:const e={holdPause:!0};this.SC.toggleContextMenu(mt.PlayspaceSettingsMenu,e);break;case _[_.AboutClick]:this.globalDomUtilsService.open(ah.a,ae.c.Blank);break;case _[_.Quality]:i.payload&&this.mediator.publish(this,_[_.Quality],{payload:i.payload});break;case mt[mt.UpNextButton]:this.mediator.publish(this,_[_.Next]);break;case mt[mt.PreviousButton]:this.mediator.publish(this,_[_.Prev]);break;case Ye.CallToAction:Object(T.h)(i.payload)?this.mediator.publish(this,Ye.CallToAction,i):this.mediator.publish(this,_[_.Next]);break;default:this.mediator.publish(this,t,i)}}fC(t){switch(t){case Ye.CallToAction:this.mediator.publish(this,Ye.GeneralClickInteraction,{payload:a.ProtoMediaClickTypeEnum.UrlClick});break;case kt.a[kt.a.Scroll]:this.mediator.publish(this,Ye.GeneralClickInteraction,{payload:a.ProtoMediaClickTypeEnum.ScrollClick});break;case mt[mt.VolumeButton]:case mt[mt.VolumeProgress]:case mt[mt.VolumeControls]:this.mediator.publish(this,Ye.GeneralClickInteraction,{payload:a.ProtoMediaClickTypeEnum.VolumeClick});break;case mt[mt.PlayButton]:case mt[mt.BigPlayButton]:case mt[mt.ClickToPlayButton]:case _[_.Play]:this.mediator.publish(this,Ye.GeneralClickInteraction,{payload:a.ProtoMediaClickTypeEnum.PlayClick});break;case _[_.Pause]:this.mediator.publish(this,Ye.GeneralClickInteraction,{payload:a.ProtoMediaClickTypeEnum.PauseClick});break;case _[_.Next]:case mt[mt.UpNextButton]:case mt[mt.UpNextBox]:case kt.a[kt.a.TapRight]:this.mediator.publish(this,Ye.GeneralClickInteraction,{payload:a.ProtoMediaClickTypeEnum.NextClick});break;case _[_.Prev]:case mt[mt.PreviousButton]:case kt.a[kt.a.TapLeft]:this.mediator.publish(this,Ye.GeneralClickInteraction,{payload:a.ProtoMediaClickTypeEnum.PreviousClick});break;case _[_.Mute]:this.mediator.publish(this,Ye.GeneralClickInteraction,{payload:a.ProtoMediaClickTypeEnum.MuteClick});break;case _[_.Unmute]:this.mediator.publish(this,Ye.GeneralClickInteraction,{payload:a.ProtoMediaClickTypeEnum.UnmuteClick});break;case _[_.Close]:case mt[mt.CloseButton]:this.mediator.publish(this,Ye.GeneralClickInteraction,{payload:a.ProtoMediaClickTypeEnum.CloseClick})}}vC(){const t=[],i=this.OC();i&&t.push({instance:i,linkedComponent:this.getComponent(mt.MoreButton),name:mt.PlayspaceSettingsMenu}),this.SC=new Uc(t)}mC(){this.settings.isMobile&&this._C(),this.interactionService.register(this.$container,this,this.interactionService,{},[Xc.c.Hold,Xc.c.Swipe]);const t=this.interactionService.getNonInterruptibleInteractions();Object.keys(kt.a).filter(t=>isNaN(parseInt(t,10))).forEach(i=>{this.subscribe(i,this.interactionService,e=>{const s=!t.includes(kt.a[i]);if(this.autoHideHandler&&s){if(this.autoHideHandler.isUIHidden())return void this.autoHideHandler.resetAutoHideTimer();this.autoHideHandler.resetAutoHideTimer()}this.fC(i),this.mediator.publish(this,i,e)})})}_C(){this.autoHideHandler=new Qc(this.$container)}bC(){const t=`id_${this.Yn}`;this.$container.id=t;const{bodyFontFamily:i,titleFontFamily:e}=this.jC(),s=`\n            #${t} .${d.f.AccentColor} {\n                fill: ${this.settings.accentColorList.background};\n                background-color: ${this.settings.accentColorList.background};\n                color: ${this.settings.accentColorList.foreground};\n                stroke: ${this.settings.accentColorList.background};\n            }\n            #${t} .${d.f.AccentColor} .cnx-cta-btn-arrow svg{\n                fill: ${this.settings.accentColorList.foreground};\n            }\n            @keyframes ${t}-bar {\n                1% {\n                  fill: transparent; transform: scaleY(1)\n                }\n                30% {fill: ${this.settings.accentColorList.background}; transform: scaleY(1.1)}\n                60% {fill: transparent; transform: scaleY(1)}\n                100% {fill: transparent; transform: scaleY(1)}\n            }\n            #${t} .cnx-ui-loader polygon {\n                animation-name: ${t}-bar;\n            }\n            #${t} .${d.f.PrimaryColor} {\n                background: ${this.settings.primaryColorList.background};\n                color: ${this.settings.primaryColorList.foreground};\n            }\n            #${t} .${d.f.SecondaryColor} {\n                background: ${this.settings.secondaryColorList.background};\n                color: ${this.settings.secondaryColorList.foreground};\n            }\n            #${t} .${d.f.TitleComponent}.${d.f.TitleLink}:${this.settings.isMobile?"active":"hover"} .${Zs.Text} {\n                background-color: ${Object(at.j)(this.settings.accentColorList.background,this.cC)}\n            }\n            #${t} .${d.f.SlideProgressBar} .${d.f.ProgressFill}.${d.f.AccentColor} {\n                background-color: ${this.settings.useAccentColorForProgressBar?this.settings.accentColorList.background:d.l.Icons}\n            }\n            #${t} em {\n                color: ${this.settings.accentColorList.background};\n            }\n            #${t} .${d.m.InheritTitleFontFamily} {\n                font-family: ${e} !important;\n            }\n            #${t} .${d.m.InheritBodyFontFamily} {\n                font-family: ${i} !important;\n            }\n        `.trim();this.globalDomUtilsService.addCssString(s)}jC(){const{bodyFontFamily:t,titleFontFamily:i}=this.settings.fontFamilySettings;return Object(T.h)(t)&&Object(T.h)(i)?this.settings.fontFamilySettings:{titleFontFamily:Object(j.q)(this.$container),bodyFontFamily:Object(j.j)(this.$container)}}wC(){this.AC()&&this.hideExpandButton()}AC(){return this.IC()||!this.TC()}IC(){return this.settings.os===ot.b.Ios}TC(){return!0===this.settings.expandButtonEnabled}CC(t={}){const i=this.getComponent(mt.CtaButton);i&&Object(T.h)(t.label)&&i.changeLabel(t.label)}hideExpandButton(){this.OC().hideExpandButton()}showExpandButton(){this.OC().showExpandButton()}OC(){return this.getComponent(mt.PlayspaceSettingsMenu)}gC(t=[]){this.uC.setCapabilityList(t)}yC(t=!0){const{excludedComponents:i,includedComponents:e}=this.uC.getComponentList();i.map(t=>this.getComponent(t)).forEach(i=>i&&i.hideComponent(t)),e.map(t=>this.getComponent(t)).forEach(i=>i&&i.showComponent(t))}updateQualityMenu(t){const i=this.getComponent(mt.PlayspaceSettingsMenu);i&&i.updateQualityMenu(t)}updateQuality(t){const i=this.getComponent(mt.PlayspaceSettingsMenu);i&&i.updateQuality(t)}setTotalSlides(t){const i=this.getComponent(mt.PlayspaceProgressBar);i&&i.setSlides(t)}setDuration(t){const i=this.getComponent(mt.PlayspaceProgressBar);i&&(i.setDuration(t),this.currentState.updateDuration())}setCurrentIndex(t){const i=this.getComponent(mt.PlayspaceProgressBar);i&&i.setCurrentIndex(t)}updateVolume(t){const i=this.getComponent(mt.VolumeButton);i&&i.setState(t>0?ce.Unmute:ce.Mute)}expand(){this.OC().setExpand()}collapse(){this.OC().setCollapse()}onResizeUi(t,i){this.SC.closeAllContextMenus(),this.kC(t,i)}onFirstTimeInView(){const t=this.getComponent(mt.TopTitle);t&&t.triggerLogoAnimation()}hide(){super.hide()}setMediaContainerRatio(t){Object(j.J)(this.Ov,t)}get $mediaContainer(){return this.Ov}onSlideTransitionStart(t){const i=this.getComponent(mt.PlayspaceProgressBar);i&&i.pauseProgress(),this.gC(t),this.yC(),this.lC.forEach(i=>{const e=this.getComponent(i);e&&e.onSlideTransitionStart&&e.onSlideTransitionStart(t)})}onSlideTransitionEnd(){this.lC.forEach(t=>{const i=this.getComponent(t);i&&i.onSlideTransitionEnd&&i.onSlideTransitionEnd()})}onSlideTimeUpdate(t,i){this.lC.forEach(e=>{const s=this.getComponent(e);s&&s.onSlideTimeUpdate&&s.onSlideTimeUpdate(t,i)})}updateCapabilityMetadata(t){switch(t.type){case As.CtaButton:this.CC(t.metadata)}}get footer(){return this.hm}destroy(){this.interactionService.unregisterAll(this),this.unsubscribeAll(this),super.destroy()}}const Kc={StateChanged:"stateChanged",ContentReset:"contentReset",ContentStart:"contentStart",ContentEnd:"contentEnd"};class Zc{constructor(t,i,e,s,n,r,a){this.mediator=t,this.PC=i,this.MC=e,this.EC=s,this.LC=n,this.RC=r,this.BC=a,this.DC=!1,this.FC=!1,this.$C=!1,this.dl=!1,this.UC=!1,this.VC=!0,this.NC=()=>{this.DC=!0,this.HC===X.PlayingState?this.play(!1):this.pause(!1)},this.qC=()=>{switch(this.FC=!0,this.RC){case nn.ProtoEndOfSlideCycleMode.Loop:this.reset();break;case nn.ProtoEndOfSlideCycleMode.Stop:this.stop()}},this.zC=null,this.WC=null,this.BC&&(this.DC=!0)}GC(t){this.zC!==t&&(this.WC=this.zC,this.zC=t,this.mediator.publish(this,Kc.StateChanged,{payload:this.zC}))}JC(t){return this.zC===t}resume(){this.WC&&this.GC(this.WC)}stop(){this.PC.stop(),this.GC(X.StoppedState)}handleSlidesEnd(){this.QC()}XC(){this.GC(X.PrerollState)}QC(){this.mediator.publish(this,Ze.ContentEnd),this.LC?this.GC(X.PostrollState):this.qC()}YC(t){return t===X.PrerollState||t===X.PostrollState}KC(t){return t===X.PrerollState&&this.DC||t===X.PostrollState&&this.FC}setViewabilityState(t){this.dl=t}play(t){if(this.HC=X.PlayingState,!(this.JC(X.PlayingState)||this.JC(X.HiddenState)&&this.$C||this.YC(this.zC)&&!this.KC(this.zC)||this.JC(X.StoppedState)&&!t))if(!this.EC||this.DC){if(this.JC(X.StoppedState))return this.DC=!1,void this.reset();this.MC.setDuration(this.PC.remainingTime),this.PC.play(),this.GC(X.PlayingState),this.VC&&(this.VC=!1,this.mediator.publish(this,Ze.ContentStart))}else this.XC()}reset(){this.mediator.publish(this,Kc.ContentReset),this.zC=null,this.FC=!1,this.VC=!0,this.PC.resetSlider(),this.play(!1)}pause(t){this.HC=X.PausedState,this.JC(X.PausedState)||this.JC(X.HiddenState)||this.YC(this.zC)&&!this.KC(this.zC)||this.JC(X.StoppedState)&&!t||(this.PC.pause(),this.GC(X.PausedState))}pauseToggle(){if(this.JC(X.PausedState)||this.JC(X.PlayingState))return this.JC(X.PausedState)&&this.UC?(this.UC=!1,void this.play(!1)):this.JC(X.PlayingState)?(this.UC=!0,void this.pause(!1)):void 0}hide(){this.PC.pause(),this.$C=!0,this.GC(X.HiddenState)}show(){this.JC(X.HiddenState)&&(this.$C=!1,this.WC!==X.PostrollState?this.WC!==X.PrerollState?this.dl?this.goToNextSlide():this.HC===X.PlayingState?this.play(!1):this.pause(!1):this.NC():this.qC())}setCurrentSlide(t){this.YC(this.zC)&&!this.KC(this.zC)||this.PC.setCurrentSlide(t)}goToNextSlide(){this.YC(this.zC)&&!this.KC(this.zC)||(this.PC.goToNextSlide(),this.JC(X.StoppedState)||this.play(!1))}goToPrevSlide(){this.YC(this.zC)||(this.play(!1),this.PC.goToPrevSlide())}exitRollBreak(){this.zC!==X.PostrollState?this.NC():this.qC()}}class tl extends o.a{constructor(t,i,e,s){super(),this.mediator=t,this.ZC=i,this.vv=e,this.Eo=s,this.tp=!1,this.tP=!1,Object(T.h)(i.imageUrl)||(i.imageUrl=dt.a.endPoints.base.image),this.vu=new W,this.Ov=this.vv.createElementByString(this.iP()),this.eP()}set isLoaded(t){this.tP=t}get isLoaded(){return this.tP}sP(t,i){const e=t>i?q.Landscape:q.Portrait;return{imageUrl:this.nP[e],altText:Object(T.a)(this.ZC.altText)?this.ZC.altText:"",queryParams:this.ZC.mediaContext===nn.ProtoMediaContextEnum.Logo?bt.getScaledImageQueryParams(t,i):bt.getSmartCroppedImageQueryParams(t,i),width:t,height:i}}eP(){const{imageUrl:t,portraitImageUrl:i}=this.ZC;this.nP={[q.Landscape]:t,[q.Portrait]:Object(T.h)(i)?i:t}}get duration(){return this.ZC.slideDuration*B.f}getThumbnailUrlParams(t,i){return this.sP(t,i)}destroy(){}}var il=e(128),el=e.n(il);class sl extends tl{constructor(t,i,e,s){super(t,i,e,s),this.type=a.ProtoMediaTypeEnum.Image,this.rP=t=>{t.preventDefault()},this.aP()}aP(){this.ZC.mediaContext===nn.ProtoMediaContextEnum.Logo&&Object(j.a)(this.Ov,Je.MediaLogo)}hP(){this.oP=this.Ov.clientWidth,this.cP=this.Ov.clientHeight}lP(){this.uP=setTimeout(()=>{const{clientWidth:t,clientHeight:i}=this.Ov.parentElement,{imageUrl:e,altText:s,width:n,height:r,queryParams:a}=this.sP(t,i),h=this.vu.getImage(e,s,n,r,a,!0);this.eb&&this.Ov.removeChild(this.eb),h&&(this.Ov.appendChild(h),this.eb=h,this.dP(this.eb))},0)}fP(){this.eb&&Object(T.h)(this.ZC.imageUrl)&&this.lP()}pP(){return Object(T.a)(this.Ov)&&Object(T.a)(this.oP)&&Object(T.a)(this.cP)}bP(t){return!!this.pP()&&Math.abs(this.oP-this.Ov.clientWidth)>=this.oP/t}vP(t){return!!this.pP()&&Math.abs(this.cP-this.Ov.clientHeight)>=this.cP/t}dP(t){t.addEventListener("mousedown",this.rP)}mP(t){t.removeEventListener("mousedown",this.rP)}iP(){return el.a}reset(){this.isLoaded&&(this.Ov.style.transitionDuration="",this.Ov.style.transform="matrix(1.1, 0, 0, 1.1, 0, 0)")}onSlideResizeCallback(){(this.bP(10)||this.vP(10))&&(this.fP(),this.hP())}play(){this.isLoaded&&(this.Ov.style.transform="",this.Ov.style.transitionDuration=`${this.ZC.slideDuration}s`,Object(j.O)(this.Ov,d.j.Paused,d.j.Playing))}pause(){this.isLoaded&&(this.Ov.style.transitionDuration="",this.Ov.style.transform=this.vv.getTransformPropertyValue(this.Ov),Object(j.O)(this.Ov,d.j.Playing,d.j.Paused))}load(t){this.isLoaded||(this.isLoaded=!0,t.appendChild(this.Ov),this.hP(),this.pause(),this.lP())}destroy(){this.eb&&this.mP(this.eb),clearTimeout(this.uP),super.destroy()}}var nl=e(129),rl=e.n(nl);class al{constructor(t){this.gP=[{id:Y.H264,extension:"mp4",type:"video/mp4"},{id:Y.Hevc,extension:"mp4",type:"video/mp4"}],this.Zb=this.gP.find(i=>i.id===t)}get type(){const t=this.Zb.codecs?`codecs=${this.Zb.codecs}`:"";return`${this.Zb.type}; ${t}`}get id(){return this.Zb.id}}class hl{constructor(t,i,e){this.mediator=t,this.Eo=i,this.yP=e,this.wP={quality:Q.Auto,height:360},this.resizeObserverBinded=!1,this.xP=30,this.Wo=()=>{const t=this.yP.clientHeight;if(this.kP(t)&&this.currentQualitySettings.quality===Q.Auto){const i={height:t,quality:Q.Auto};this.setCurrentQualitySettings(i),this.mediator.publish(this,Z.CurrentQuality,{payload:i})}}}setCurrentQualitySettings(t){this.wP.quality=t.quality,this.wP.height!==t.height&&(this.wP.height=t.height,this.mediator.publish(this,Z.Change))}kP(t){return!this.wP.height||t/this.wP.height*100-100>this.xP}addResizeObserver(){this.resizeObserverBinded=!0,this.Eo.on(this.yP,this.Wo)}removeResizeObserver(){this.resizeObserverBinded=!1,this.Eo.off(this.yP,this.Wo)}setQuality(t){t.quality===Q.Auto?this.resizeObserverBinded||(this.setCurrentQualitySettings({height:t.height,quality:t.quality}),this.addResizeObserver(),this.Wo()):(this.resizeObserverBinded&&this.removeResizeObserver(),this.setCurrentQualitySettings(t)),this.mediator.publish(this,Z.CurrentQuality,{payload:this.wP})}get currentQualitySettings(){return this.wP}destroy(){this.removeResizeObserver()}}const ol={TrackLoaded:"trackLoaded"},cl={height:0,quality:Q.Auto},ll="en",ul="subtitle";class dl extends o.a{constructor(t,i,e){super(),this.mediator=t,this.vv=i,this.Xw=e,this.SP=[],this.OP=()=>{this.mediator.publish(this,ol.TrackLoaded)}}_P(t){this.jP=t,this.AP()}IP(t){this.Xw.innerHTML="",t.forEach(t=>{this.Xw.appendChild(t)})}TP(){return this.SP}AP(){if(this.SP=[],this.jP&&this.jP.subtitle){const t=this.vv.createElement("track");t.src=this.jP.subtitle,t.srclang=ll,t.kind=ul,t.default=!0,t.addEventListener("load",this.OP,!1),t.addEventListener("loaded",this.OP,!1),this.SP.push(t)}}}class fl extends dl{constructor(t,i,e,s,n,r={},a){super(t,i,n),this.Eo=e,this.gb=s,this.CP=a,this.PP=null,this.MP=10.13,this.EP=this.LP(r)}start(){try{this.RP=new hl(this,this.Eo,this.gb),this.BP(),this.setQuality(this.CP)}catch(t){Object(n.a)({message:"Mp4SourceHandler_start",exception:t.message,callStack:t.stack,level:a.ProtoLoggingLevelEnum.FATAL})}}onQualityChanged(){return this.attachMedia()}setSource(t,i=!1){this._P(t),this.DP(this.FP(),i)}setQuality(t){this.RP.setQuality(t)}get currentQualitySettings(){return this.RP.currentQualitySettings}attachMedia(){return new Promise(t=>{this.$P(),t()})}detachMedia(){this.Xw.removeAttribute("src"),this.DP(null)}destroy(){this.RP.destroy()}BP(){this.relay(Z.CurrentQuality,this.RP,this,this.mediator),this.subscribe(Z.Change,this.RP,()=>{this.UP()})}UP(){this.DP(this.FP()),this.mediator.publish(this,Z.Change,{payload:this.RP.currentQualitySettings.height})}VP(t){this.IP(t),this.Xw.load()}FP(){return[...this.NP(),...this.TP()]}NP(){if(!this.Xw||!this.jP)return[];const t=[];return this.jP.getSources(this.RP.currentQualitySettings.height,this.EP).forEach(i=>{const e=this.vv.createElement("source");e.src=i.src,e.type=i.type,t.push(e)}),t}$P(){this.PP&&(this.VP(this.PP),this.PP=null)}DP(t,i=!1){this.PP=t,i&&this.$P()}LP(t){let i;switch(t.os){case ot.b.Ios:i=[Y.Hevc,Y.H264];break;case ot.b.Mac:i=t.osVersion>this.MP&&t.browser===ae.a.Safari?[Y.Hevc,Y.H264]:[Y.H264];break;default:i=[Y.H264]}return i.map(t=>new al(t))}}const pl={UnexpectedError:"unexpectedError",BufferingError:"bufferingError",FragBuffered:"fragBuffered",ManifestLoaded:"manifestLoaded",LevelSwitching:"levelSwitching",StreamEnded:"streamEnded"};var bl;!function(t){t.Http="http",t.Https="https"}(bl||(bl={}));var vl=e(40);const ml={enableWorker:!1,capLevelToPlayerSize:!0,cnxRenderWindow:window,maxBufferSize:5e6,maxBufferLength:5,maxMaxBufferLength:10,liveBackBufferLength:0};class gl extends dl{constructor(t,i,e,s,n,r){super(t,i,e),this.HP=s,this.CP=n,this.qP=r,this.zP=[],this.WP=Q.Auto,this.GP=320,this.JP=!1,this.QP=!1,this.XP=!1,this.tx=()=>{this.Zw.off(Oa.Events.MEDIA_ATTACHED,this.tx);const t=this.YP(this.KP);this.Zw.loadSource(t),this.Zw.once(Oa.Events.MANIFEST_PARSED,this.ex)},this.ex=()=>{this.Zw.off(Oa.Events.MANIFEST_PARSED,this.ex),this.Zw.on(Oa.Events.LEVEL_SWITCHING,this.ZP),this.Zw.on(Oa.Events.LEVEL_SWITCHED,this.tM),this.Zw.on(Oa.Events.FRAG_BUFFERED,this.iM),this.Zw.on(Oa.Events.FRAG_LOADING,this.eM),this.Zw.on(Oa.Events.FRAG_LOADED,this.sM),this.Zw.on(Oa.Events.BUFFER_APPENDING,this.nM),this.Zw.on(Oa.Events.BUFFER_APPENDED,this.rM),this.Zw.on(Oa.Events.BUFFER_EOS,this.aM),this.KP=null,this.hM(),this.oM(),this.cM(),this.lM.resolve()},this.uM=()=>{this.KP=null,this.Xw.removeEventListener(J.LoadedMetadata,this.uM),this.dM.resolve()},this.oM=()=>{const t=this.zP.map(t=>({videoHeight:t.height,isHD:t.height>=it,label:t.level.toString()}));this.mediator.publish(this,pl.ManifestLoaded,{payload:{qualityList:t}})},this.iM=()=>{this.mediator.publish(this,pl.FragBuffered)},this.eM=()=>{this.JP=!0},this.sM=()=>{this.JP=!1},this.nM=()=>{this.QP=!0},this.rM=()=>{this.QP=!1},this.aM=()=>{this.mediator.publish(this,pl.StreamEnded)},this.Yw=(t,i)=>{if(i.details===Oa.ErrorDetails.BUFFER_STALLED_ERROR&&(this.JP||this.QP?this.mediator.publish(this,pl.BufferingError):(this.XP||(this.Zw.recoverMediaError(),this.Xw.play().then(()=>{this.XP=!1}).catch(()=>{this.XP=!1})),this.XP=!0)),i.fatal)switch(i.type){case Oa.ErrorTypes.NETWORK_ERROR:if(i.details===Oa.ErrorDetails.MANIFEST_PARSING_ERROR)return void this.fM("hls_network_error_manifest_parsing_error_FATAL");if(i.details===Oa.ErrorDetails.MANIFEST_LOAD_ERROR)return void this.mediator.publish(this,pl.UnexpectedError);this.Zw.startLoad();break;case Oa.ErrorTypes.MEDIA_ERROR:this.Zw.recoverMediaError();break;default:this.fM("hls_unexpected_error_FATAL",`type_${i.type}_details_${i.details}`)}else i.type===Oa.ErrorTypes.MEDIA_ERROR&&i.details===Oa.ErrorDetails.BUFFER_APPENDING_ERROR&&this.fM("hls_media_error_buffer_appending_error"),i.type===Oa.ErrorTypes.NETWORK_ERROR&&i.details===Oa.ErrorDetails.MANIFEST_PARSING_ERROR&&this.fM("hls_network_error_manifest_parsing_error")},this.pM=()=>{this.fM("hls_video_tag_error",`code_${this.Xw.error.code}_message_${this.Xw.error.message}`)},this.tM=(t,i)=>{this.GP=this.zP.find(t=>t.level===i.level).height,this.mediator.publish(this,Z.Change,{payload:this.currentQualitySettings.height}),this.mediator.publish(this,Z.CurrentQuality,{payload:this.currentQualitySettings})},this.ZP=()=>{this.mediator.publish(this,pl.LevelSwitching)},_a&&(this.Zw=this.vv.initHls(ml),this.qP&&(this.Zw.autoLevelCapping=1)),this.GP=this.CP.height,this.WP=this.CP.quality}start(){}get liveSyncPosition(){if(this.Zw)return this.Zw.liveSyncPosition}setSource(t,i=!1){this.bM=t.id,this._P(t),this.KP=t,i&&this.attachMedia()}attachMedia(){return new Promise(t=>{if(this.Zw?this.Zw.on(Oa.Events.ERROR,this.Yw):this.Xw.addEventListener(J.Error,this.pM),this.KP){const i=this.TP();this.IP(i),this.Zw?this.vM().then(()=>{t()}):this.mM().then(()=>{t()})}else t()})}detachMedia(){this.zP=[],this.Zw?(this.Zw.detachMedia(),this.gM()):(this.Xw.removeAttribute("src"),this.Xw.removeEventListener(J.LoadedMetadata,this.uM),this.Xw.removeEventListener(J.Error,this.pM))}setQuality(t){this.WP=t.quality,this.GP=t.height,this.Zw&&this.cM(),this.mediator.publish(this,Z.Change,{payload:this.currentQualitySettings.height}),this.mediator.publish(this,Z.CurrentQuality,{payload:this.currentQualitySettings})}get currentQualitySettings(){return{quality:this.WP,height:this.GP}}onQualityChanged(){return new Promise(()=>{})}destroy(){this.Zw?(this.gM(),this.Zw.destroy(),this.Zw=null):(this.Xw.removeEventListener(J.LoadedMetadata,this.uM),this.Xw.removeEventListener(J.Error,this.pM))}vM(){return this.lM=new vl.a,this.Zw.attachMedia(this.Xw),this.Zw.once(Oa.Events.MEDIA_ATTACHED,this.tx),this.lM.promise}mM(){return this.dM=new vl.a,this.Xw.src=this.YP(this.KP),this.Xw.addEventListener(J.LoadedMetadata,this.uM),this.dM.promise}gM(){this.Zw.off(Oa.Events.MEDIA_ATTACHED,this.tx),this.Zw.off(Oa.Events.MANIFEST_PARSED,this.ex),this.Zw.off(Oa.Events.ERROR,this.Yw),this.Zw.off(Oa.Events.LEVEL_SWITCHING,this.ZP),this.Zw.off(Oa.Events.LEVEL_SWITCHED,this.tM),this.Zw.off(Oa.Events.FRAG_BUFFERED,this.iM),this.Zw.off(Oa.Events.FRAG_LOADING,this.eM),this.Zw.off(Oa.Events.FRAG_LOADED,this.sM),this.Zw.off(Oa.Events.BUFFER_APPENDING,this.nM),this.Zw.off(Oa.Events.BUFFER_APPENDED,this.rM),this.Zw.off(Oa.Events.BUFFER_EOS,this.aM)}hM(){this.Zw.levels.forEach((t,i)=>{this.qP&&i>1||this.zP.push({level:i,height:t.height})})}fM(t,i){Object(n.a)({message:t,exception:this.bM,level:a.ProtoLoggingLevelEnum.WARNING,callStack:i}),this.mediator.publish(this,pl.UnexpectedError)}cM(){if(this.WP===Q.Auto)this.Zw.currentLevel=-1;else try{this.Zw.currentLevel=this.zP.find(t=>t.height===this.GP).level}catch(t){Object(n.a)({message:"HlsSourceHandler_quality_not_present_in_hls_manifest",exception:t.message,callStack:t.stack,level:a.ProtoLoggingLevelEnum.FATAL})}}YP(t){try{const i=t.getHlsSource(),e=Object(at.g)(i);return e&&e.protocol?i:`${this.HP}:${i}`}catch(t){Object(n.a)({exception:t.message,message:"HlsSourceHandler_undefined_sourceMeta",level:a.ProtoLoggingLevelEnum.FATAL,callStack:t.stack,throttle:5,sendMaxLog:!1})}}}var yl;!function(t){t.Disabled="disabled",t.Hidden="hidden",t.Showing="showing"}(yl||(yl={}));class wl{constructor(t,i,e,s,n){this.mediator=t,this.Xw=i,this.vx=e,this.xb=n,this.yM=!1,this.wM=!1,this.xM=yl.Hidden,this.kM=0,this.mx=!1,this.SM=null,this.OM=t=>{switch(t.type){case J.Play:if(!this.mx&&this.xb.config.isInAppAndroid)return void this.pause();this.yM=!0;break;case J.Timeupdate:this.mediator.publish(this,t.type,{payload:this.yM});break;case J.Error:const i=this.Xw.error?this.Xw.error.message:"";this.mediator.publish(this,K.PlayError,{payload:i});break;case J.LoadedMetadata:this.wM=!0,Object(T.d)(this._M)&&(this.currentTime=this._M,this._M=null),this.mediator.publish(this,t.type);break;default:this.mediator.publish(this,t.type)}},this.play=()=>(this.mx=!0,this.SM=this.Xw.play(),null!==this.SM?(this.kM++,this.SM.then(()=>{this.yM=!0,this.xb.config.os.os===ot.b.Ios&&Object(j.C)(this.Xw),this.kM--,this.jM(),this.SM=null}).catch(t=>{throw this.mediator.publish(this,K.PlayError,{payload:t}),this.yM=!1,this.kM--,this.SM=null,t})):Promise.resolve()),this.pause=()=>{null!==this.SM?this.SM.then(this.AM).catch(this.AM):this.IM()},this.AM=()=>{this.kM>1||this.IM()},this.volume=s,this.BP()}BP(){this.vx.forEach(t=>{this.Xw.addEventListener(t,this.OM)})}jM(){this.Xw.textTracks&&0!==this.Xw.textTracks.length&&Object.keys(this.Xw.textTracks).forEach(t=>{this.Xw.textTracks[t].mode=this.xM})}set poster(t){Object(T.h)(t)&&(this.Xw.poster=t)}get poster(){return this.Xw.poster}IM(){this.Xw.pause(),this.yM=!1,this.mx=!1}get volume(){return this.Gu}set volume(t){this.Gu=t<=1?t:t/100,this.Xw.volume=this.Gu,Object(j.U)(this.Xw,this.Gu)}get currentTime(){return this.Xw.currentTime}set currentTime(t){this.wM?this.Xw.currentTime=t:this._M=t}get duration(){return this.Xw.duration}get playing(){return this.yM}destroy(){this.vx.forEach(t=>{this.Xw.removeEventListener(t,this.OM)})}setTrackModes(t){this.xM=t,this.jM()}setMetaLoaded(t){this.wM=t}setCrossOriginAttribute(){this.Xw.getAttribute("crossorigin")||this.Xw.setAttribute("crossorigin","anonymous")}setPoster(t){this.poster=t.getThumbnailUrl(this.Xw.clientWidth,this.Xw.clientHeight)}getCurrentTrack(){return this.Xw.textTracks&&0!==this.Xw.textTracks.length?this.Xw.textTracks[0]:null}isPlayPending(){return this.kM>0}}class xl extends o.a{constructor(t,i,e,s,r,h,o={},c,l){if(super(),this.mediator=t,this.xb=i,this.vv=e,this.gb=s,this.Eo=r,this.TM=h,this.Zb=o,this.CM=c,this.CP=l,this.PM=!0,this.MM=!1,this.EM=!1,this.LM=()=>{let t;this.currentTrack.activeCues&&this.currentTrack.activeCues.length>0&&(t=this.currentTrack.activeCues[0]),this.mediator.publish(this,_[_.CaptionUpdate],{payload:t})},this.OP=()=>{this.currentTrack&&(this.currentTrack.mode=this.RM?yl.Hidden:yl.Disabled,this.currentTrack.oncuechange=this.LM)},this.BM(),this.DM.appendChild(this.Xw),this.gb.appendChild(this.DM),this.CP=this.CP||cl,this.FM=new fl(this,e,this.Eo,this.gb,this.Xw,this.Zb,this.CP),_a||ja(this.Xw)){const t=this.vv.isHttpsProtocolUsed()?bl.Https:bl.Http,i=Object(T.h)(this.xb.config.bundleID);this.Ax=new gl(this,this.vv,this.Xw,t,this.CP,i),this.$M()}else this.PM=!1,Object(n.a)({message:"Hls_not_supported",level:a.ProtoLoggingLevelEnum.INFO})}start(){try{this.vx=Object(l.a)(J),this.UM=new wl(this,this.Xw,this.vx,this.TM,this.xb),this.VM(),this.NM(),this.HM()}catch(t){Object(n.a)({message:"VideoHandler_start",exception:t.message,callStack:t.stack,level:a.ProtoLoggingLevelEnum.FATAL})}}qM(){const t=this.currentTime;this.setSource(this.zM,!0,this.FM),this.WM.attachMedia().then(()=>{this.UM.play().then(()=>{this.EM=!1,this.GM.resolve(),this.UM.currentTime=t}).catch(t=>{this.GM&&this.GM.isPending&&(this.EM=!1,this.GM.reject(),Object(n.a)({message:"VideoHandler_hls_error_content_player_play",exception:t.message,callStack:t.callStack,level:a.ProtoLoggingLevelEnum.FATAL}))})}).catch(t=>{this.GM&&this.GM.isPending&&(this.EM=!1,this.GM.reject()),Object(n.a)({message:"VideoHandler_hls_error_attach_media",exception:t.message,callStack:t.callStack,level:a.ProtoLoggingLevelEnum.FATAL})})}$M(){this.subscribe(pl.UnexpectedError,this.Ax,()=>{this.EM=!0,this.qM()}),this.subscribe(pl.ManifestLoaded,this.Ax,({payload:t})=>{this.mediator.publish(this,Z.Loaded,{payload:{qualityList:t,videoMeta:this.zM}}),this.UM.setMetaLoaded(!0)}),this.subscribe(pl.BufferingError,this.Ax,()=>{this.mediator.publish(this,K.Buffering)}),this.subscribe(pl.FragBuffered,this.Ax,()=>{this.mediator.publish(this,K.Buffered)}),this.subscribe(pl.StreamEnded,this.Ax,()=>{this.mediator.publish(this,K.EndOfStream)}),this.subscribe(pl.LevelSwitching,this.Ax,()=>{this.mediator.publish(this,K.LevelSwitching)})}VM(){this.JM(this.FM)}NM(){this.Ax&&this.JM(this.Ax)}JM(t){t.start(),this.QM(t)}HM(){this.vx.forEach(t=>{this.subscribe(t,this.UM,i=>{t===J.Canplay&&this.CM&&(this.currentTime=this.CM,this.CM=null),this.mediator.publish(this,t,i)})}),this.relay(K.PlayError,this.UM,this,this.mediator)}QM(t){this.relay([Z.CurrentQuality,K.NewVideo],t,this,this.mediator),this.subscribe(Z.Change,t,({payload:t})=>{this.onQualityChanged(t)}),this.subscribe(ol.TrackLoaded,t,()=>{this.OP()})}get width(){return this.DM.getBoundingClientRect().width}get height(){return this.DM.getBoundingClientRect().height}get currentTime(){return this.UM.currentTime}set currentTime(t){this.UM.currentTime=t}forceCurrentTime(t){this.UM.currentTime=t,this.CM=t}get duration(){return this.UM.duration}get volume(){return this.UM.volume}set volume(t){this.UM.volume=t}get playing(){return this.UM.playing}get isIosFullscreen(){return this.MM}set isIosFullscreen(t){this.MM=t,this.MM&&this.RM?this.XM():this.YM()}get currentQualitySettings(){return this.WM.currentQualitySettings}hide(){Object(j.a)(this.DM,d.d)}show(){Object(j.L)(this.DM,d.d)}setSource(t,i=!1,e){return this.CM=null,new Promise((s,r)=>{try{this.zM=t,this.WM&&this.WM.detachMedia(),e?this.KM(e):Object(T.h)(t.hlsFilePath)&&this.Ax?this.WM=this.Ax:this.KM(this.FM),t&&t.subtitle&&this.UM.setCrossOriginAttribute(),this.UM.setPoster(t),this.UM.setTrackModes(this.RM?yl.Hidden:yl.Disabled),i&&this.UM.setMetaLoaded(!1),this.WM.setSource(t,i),this.mediator.publish(this,K.NewVideo),s()}catch(t){Object(n.a)({message:"VideoHandler_set_video_source",exception:t.message,callStack:t.stack,level:a.ProtoLoggingLevelEnum.FATAL}),r()}})}setQuality(t){this.WM.setQuality(t)}pause(){this.UM.pause()}play(){return this.GM=new vl.a,this.WM.attachMedia().then(()=>{this.UM.play().then(()=>{this.GM.resolve()}).catch(t=>{!this.EM&&this.GM&&this.GM.isPending&&(this.GM.reject(),Object(n.a)({message:"VideoHandler_public_play_content_player_play",exception:t.message,callStack:t.callStack,level:a.ProtoLoggingLevelEnum.FATAL}))})}).catch(t=>{this.GM&&this.GM.isPending&&this.GM.reject(t),Object(n.a)({message:"VideoHandler_public_play_attach_media_error",exception:t.message,callStack:t.callStack,level:a.ProtoLoggingLevelEnum.FATAL})}),this.GM.promise}isPlayPending(){return this.UM.isPlayPending()}showCaptions(){this.RM=!0,this.UM.setTrackModes(yl.Hidden)}hideCaptions(){this.RM=!1,this.UM.setTrackModes(yl.Disabled),this.currentTrack&&this.mediator.publish(this,_[_.CaptionUpdate])}destroy(){this.WM.destroy(),this.DM.parentNode.removeChild(this.DM)}BM(){this.DM=this.vv.createElementByString('<cnx class="cnx-video-wrapper"></cnx>'),this.Xw=this.vv.createElementByString('<video class="cnx-video-tag"></video>'),this.Zb.os===ot.b.Ios&&(this.Xw.setAttribute("playsinline",""),this.Xw.setAttribute("webkit-playsinline",""))}KM(t){this.WM=t,this.WM.setQuality({quality:Q.Auto,height:0})}onQualityChanged(t){const i=this.UM.playing;this.CM=this.currentTime,i&&this.WM.onQualityChanged&&this.WM.onQualityChanged().then(()=>{this.UM.setMetaLoaded(!1),this.UM.play().catch(t=>{Object(n.a)({message:"VideoHandler_quality_changed",exception:t.message,callStack:t.stack,level:a.ProtoLoggingLevelEnum.FATAL})})}),this.mediator.publish(this,Z.Change,{payload:t})}get currentTrack(){return this.UM.getCurrentTrack()}XM(){this.currentTrack&&(this.currentTrack.oncuechange=null,this.mediator.publish(this,_[_.CaptionUpdate]),this.currentTrack.mode=yl.Showing)}YM(){if(this.currentTrack){switch(this.currentTrack.mode){case yl.Showing:case yl.Hidden:this.RM=!0;break;case yl.Disabled:this.RM=!1}this.mediator.publish(this,this.RM?_[_.CaptionOn]:_[_.CaptionOff])}this.OP()}}class kl{constructor(t,i,e){this.TI=t,this.ZM=i,this.tE=[],this.iE=[],this.eE=[],this.sE=[],this.nE=[],this.wp=[],this.rE=e.title,this.vl=e.altText,this.aE=e.description,this.hx=e.clickUrl,this.tE=e.keywordList,this.hE=e.languageId,this.iE=e.trackList,this.oE=e.thumbnail,this.gt=e.duration,this.sE=e.customFields,this.cE=e.hlsFilePath,this.lE=e.sourceItemId,this.nE=e.videoIndexes,Object(u.h)(e.renditionList)&&(this.eE=this.uE(e.renditionList),this.dE(e.renditionList))}uE(t){return t.sort((t,i)=>t.height-i.height)}setAvailableQualities(t){this.wp=t}dE(t){Object(u.e)("height",t).forEach((t,i)=>{this.wp.push({videoHeight:t.height,label:`${t.height}p`,isHD:t.height>=it})})}fE(t,i){return this.eE.find(e=>e.codec===t&&e.height===i)}pE(t,i){let e=`${t}${this.TI}/`;return Object(T.h)(this.ZM)?e+=`${this.ZM}/${i}`:e+=i,e}bE(t,i){const e=Object(rt.c)(t,this.wp.map(t=>t.videoHeight));return this.fE(i,e)}get hlsFilePath(){return this.cE}getAvailableQualities(){return this.wp}getClosestSourceQuality(t){let i;const e=Object(rt.c)(t,this.wp.map(t=>t.videoHeight));return this.wp.forEach(t=>{t.videoHeight===e&&(i=t)}),i}getSources(t,i){const e=[];return i.forEach(i=>{const s=this.bE(t,i.id);Object(u.h)(e)||s&&e.push({src:this.pE(dt.a.endPoints.base.video,s.file),type:i.type})}),e}getHlsSource(){return this.pE(dt.a.endPoints.base.video,this.cE)}getThumbnailUrl(t,i){const e=this.pE(dt.a.endPoints.base.image,this.oE);return bt.getSmartCroppedImageUrl(e,t,i)}get title(){return this.rE}get altText(){return Object(T.a)(this.vl)?this.vl:""}get description(){return this.aE}get clickUrl(){return this.hx}get keywords(){return this.tE}get languageId(){return this.hE}get sourceItemId(){return this.lE}get subtitle(){if(this.iE&&this.iE[0])return this.pE(dt.a.endPoints.base.video,this.iE[0].file)}get spriteSheet(){return this.vE}get duration(){return this.gt}get id(){return this.TI}get customFields(){return this.sE}get videoIndexes(){return this.nE}}class Sl extends kl{constructor(t){super(null,null,t)}getSources(t,i){return i.map(({id:i,type:e})=>{const s=this.bE(t,i);if(s)return{type:e,src:`${s.file}`}}).filter(t=>t)}getThumbnailUrl(t,i){return bt.getSmartCroppedImageUrl(this.oE,t,i)}}class Ol extends tl{constructor(t,i,e,s,n,r=0,h={}){super(t,i,s,n),this.xb=e,this.TM=r,this.Zb=h,this.mE=.1,this.type=a.ProtoMediaTypeEnum.Video,this.gE={[q.Landscape]:{renditionList:[],videoSourceMeta:void 0},[q.Portrait]:{renditionList:[],videoSourceMeta:void 0}},this.yE=null,this.getClosestSourceQuality=t=>(this.wE||this.xE(),this.gE[this.wE].videoSourceMeta.getClosestSourceQuality(t)),this.kE(),this.SE()}kE(){this.ZC.videoRendition.renditions.forEach(({codec:t,height:i,width:e,videoUrl:s})=>{const n={codec:nn.ProtoPlayspaceCodecEnum[t],height:i,file:s};i<e?this.gE[q.Landscape].renditionList.push(n):this.gE[q.Portrait].renditionList.push(n)});const t=this.gE[q.Landscape].renditionList,i=this.gE[q.Portrait].renditionList;Object(u.h)(t)||Object(u.h)(i)?(Object(u.h)(t)||(this.gE[q.Landscape].renditionList=i),Object(u.h)(i)||(this.gE[q.Portrait].renditionList=t)):Object(n.a)({message:"SlideVideo_no_renditions",level:a.ProtoLoggingLevelEnum.FATAL})}SE(){Object.keys(this.gE).forEach(t=>{const i=this.gE[t];i.videoSourceMeta=new Sl({title:this.ZC.title,altText:this.ZC.altText,clickUrl:this.ZC.clickUrl,renditionList:i.renditionList,thumbnail:this.ZC.imageUrl})})}OE(t){this._E=new xl(this,this.xb,this.vv,t,this.Eo,this.TM,this.Zb,this.mE)}jE(){this.subscribe(Z.Change,this._E,({payload:t})=>{const i=this.getClosestSourceQuality(t);this.mediator.publish(this,Z.Change,{payload:i.videoHeight})})}xE(){const{clientHeight:t,clientWidth:i}=this.Ov;this.wE=t<i?q.Landscape:q.Portrait}AE(t){let i;this._E&&(t&&(i=this._E.currentTime),this._E.setSource(this.gE[this.wE].videoSourceMeta,!0).then(()=>{t&&this._E.forceCurrentTime(i),this._E.playing&&this.IE()}))}iP(){return rl.a}IE(){this._E.play().catch(()=>{})}play(){this.isLoaded&&this.IE()}pause(){this.isLoaded&&this._E.pause()}reset(){this.tP&&(this._E.currentTime=this.mE)}load(t){this.isLoaded||(t.appendChild(this.Ov),this.isLoaded=!0,this.OE(this.Ov),this.jE(),this._E.start(),this.xE(),this.AE(),this.yE&&this.setQuality(this.yE),this.pause())}getAvailableQualities(){return this.gE[this.wE].videoSourceMeta.getAvailableQualities()}get currentQuality(){return this._E.currentQualitySettings}get volume(){return this.isLoaded?this._E.volume:this.TM}set volume(t){this.isLoaded?this._E.volume=t:this.TM=t}setQuality(t){this._E?this._E.setQuality(t):this.yE=t}onSlideResizeCallback(){const t=this.wE;this.vv.cancelRequestAnimationFrame(this.TE),this.TE=this.vv.requestAnimationFrameHelper(()=>{if(this.xE(),t!==this.wE){const t=!0;this.AE(t)}})}}class _l{constructor(t){this.XT=t}get template(){return`\n        <cnx class="cnx-ui-ps-slide-wrapper">\n            <cnx class="cnx-ui-ps-slide"></cnx>\n            <cnx class="cnx-ui-ps-slide-bg"></cnx>\n            <cnx class="cnx-ui-ps-cta-wrapper">\n                ${this.CE()}\n            </cnx>\n        </cnx>\n        `.trim()}CE(){return this.XT.disableCTARendering?"":`[[${mt.CtaButton}]]`}}class jl extends At{enterState(){super.enterState();const t=this.context.getComponent(mt.PlayspaceProgressBar);t&&t.startProgress();const i=this.context.getComponent(mt.CtaButton);i&&i.startProgress()}exitState(){super.exitState()}updateDuration(){const t=this.context.getComponent(mt.PlayspaceProgressBar);t&&t.startProgress()}}class Al extends Tt{enterState(){super.enterState();const t=this.context.getComponent(mt.PlayspaceProgressBar);t&&t.pauseProgress();const i=this.context.getComponent(mt.CtaButton);i&&i.pauseProgress()}exitState(){super.exitState()}updateDuration(){}}class Il extends Al{enterState(){super.enterState()}exitState(){super.exitState()}}class Tl extends Al{enterState(){super.enterState()}exitState(){super.exitState()}}class Cl extends Al{enterState(){super.enterState()}exitState(){super.exitState()}}class Pl extends Et{constructor(t,i,e,s,n,r,a,h,o){super(t,i,e,n,new er(e,o,s,i,{isMobile:r})),this.mediator=t,this.$container=i,this.vv=e,this.hm=a,this.sC=[mt.CtaButton],this.uC=new Gc,this.Wd={[X.PlayingState]:new jl(this),[X.PausedState]:new Al(this),[X.StoppedState]:new Il(this),[X.HiddenState]:new Tl(this),[X.PrerollState]:new Cl(this),[X.PostrollState]:new Cl(this)},this.PE(),this.Wd[h].enterState(),this.gC(),this.yC(!1)}PE(){const t=this.getComponent(mt.CtaButton);t&&t.setFooterElement(this.hm)}gC(t=[]){this.uC.setCapabilityList(t)}yC(t=!0){const{excludedComponents:i,includedComponents:e}=this.uC.getComponentList();i.map(t=>this.getComponent(t)).forEach(i=>i&&i.hideComponent(t)),e.map(t=>this.getComponent(t)).forEach(i=>i&&i.showComponent(t))}fC(t){switch(t){case Ye.CallToAction:this.mediator.publish(this,Ye.GeneralClickInteraction,{payload:a.ProtoMediaClickTypeEnum.UrlClick});break;case kt.a[kt.a.Scroll]:this.mediator.publish(this,Ye.GeneralClickInteraction,{payload:a.ProtoMediaClickTypeEnum.ScrollClick})}}handleComponentEvent(t,i,e){this.fC(t),t===Ye.CallToAction?Object(T.h)(i.payload)?this.mediator.publish(this,Ye.CallToAction,i):this.mediator.publish(this,_[_.Next]):this.mediator.publish(this,t,i)}handleCapabilityList(t){this.gC(t),this.yC(),this.sC.forEach(i=>{const e=this.getComponent(i);e&&e.handleCapabilities(t)})}}const Ml="cnx-ui-ps-slide";class El extends o.a{constructor(t,i,e,s,n,r,a,h,o,c){super(),this.mediator=t,this.ZC=i,this.vv=e,this.Od=s,this.Eo=n,this.ME=r,this.Xn=a,this.XT=h,this.hm=o,this.Vu=c,this.EE=[{type:As.TopLogo,metadata:{}}],this._d=this.vv.createElementByString(`<cnx class="${Je.Slide}"></cnx>`),this.LE(),this.RE=this._d.querySelector(`.${Ml}`)}get $container(){return this._d}get slideCapabilityList(){return this.EE}get metadata(){return this.ZC}get media(){return this.ME}load(){this.ME.load(this.RE)}get clickUrl(){return this.ZC.clickUrl}updateCapabilityMetadata(t){if(!Object(u.h)(this.EE))return;const i=this.EE.find(({type:i})=>i===t.type);i&&(i.metadata=Object.assign(Object.assign({},i.metadata),t.metadata))}changeState(t){this.MC.changeState(t)}LE(){this.MC=new Pl(this,this._d,this.vv,this.Eo,this.iP(),this.Xn,this.hm,this.Vu.playbackMode===nn.ProtoPlayerPlaybackModeEnum.ClickToPlay?X.StoppedState:X.PausedState,this.Od),this.subscribe(Ye.CallToAction,this.MC,({payload:t})=>{this.mediator.publish(this,Ye.CallToAction)}),this.relay(Ye.GeneralClickInteraction,this.MC,this,this.mediator),this.subscribe(_[_.Next],this.MC,()=>{this.mediator.publish(this,_[_.Next])})}iP(){return new _l(this.XT).template}BE(t,i){this.EE.push({type:t,metadata:i})}DE(){const t=this.FE(this.ZC);if(!t)return;const i={label:t,useTransition:!0};this.BE(As.TopSlideTitle,i)}FE(t){const i=t.publisherName||t.title,e=this.vv.stripHtmlTags(i).trim();return t.publisherName?`by <em>${e}</em>`:e}onSlideTransitionStart(t){this.MC&&this.MC.handleCapabilityList(t)}}const Ll=4;class Rl extends El{constructor(t,i,e,s,r,h,o,c,l,d){super(t,i,e,s,r,h,o,c,l,d),this.type=nn.ProtoPlayspaceSlideTypeEnum.BulletList,Object(T.f)(i.bulletListMetadata)&&Object(u.h)(this.metadata.bulletListMetadata.items)?(this.$E(),this.onSlideTransitionStart(this.EE)):Object(n.a)({message:"BulletSlide_no_metadata",level:a.ProtoLoggingLevelEnum.FATAL})}$E(){this.UE(),this.DE(),this.VE()}UE(){const{title:t,items:i}=this.ZC.bulletListMetadata;i.length>Ll&&(i.length=Ll);const e=As.SlideTitle,s={bulletChunkList:i,titleType:Is.Bullet};Object(T.h)(t)&&(s.label=t),this.BE(e,s)}VE(){const t={label:this.ZC.storyTitle,useFallbackLabel:!0};this.BE(As.TopStoryTitle,t)}}class Bl extends El{constructor(t,i,e,s,r,h,o,c,l,d){super(t,i,e,s,r,h,o,c,l,d),this.type=nn.ProtoPlayspaceSlideTypeEnum.Description,Object(T.f)(i.descriptionMetadata)&&Object(u.h)(this.metadata.descriptionMetadata.chunkList)?(this.NE(),this.HE(),this.onSlideTransitionStart(this.EE)):Object(n.a)({message:"DescriptionSlide_no_metadata",level:a.ProtoLoggingLevelEnum.FATAL})}NE(){const{chunkList:t,label:i}=this.ZC.descriptionMetadata;let e=!1;const s=t=>Object(T.e)(t);Object(T.f)(i)&&Object(T.h)(i.text)&&(e=!0,i.colorScheme=s(i.colorScheme)?i.colorScheme:nn.ProtoPlayspaceColorSchemeEnum.Primary),Object(u.h)(t)&&t.forEach((t,i)=>{t.colorScheme=0!==i||e?s(t.colorScheme)?t.colorScheme:nn.ProtoPlayspaceColorSchemeEnum.Secondary:s(t.colorScheme)?t.colorScheme:nn.ProtoPlayspaceColorSchemeEnum.Primary})}HE(){this.qE(),this.VE(),this.DE()}qE(){const{chunkList:t,label:i}=this.ZC.descriptionMetadata,e=As.SlideTitle,s={descriptionChunkList:t,titleType:Is.Description};Object(T.f)(i)&&(s.label=i.text,s.labelColorScheme=i.colorScheme),this.BE(e,s)}VE(){const t={label:this.ZC.storyTitle,useFallbackLabel:!0};this.BE(As.TopStoryTitle,t)}}const Dl={[a.ProtoMediaTypeEnum.Image]:"Read more",[a.ProtoMediaTypeEnum.Video]:"Continue video"};class Fl extends El{constructor(t,i,e,s,n,r,a,h,o,c){super(t,i,e,s,n,r,a,h,o,c),this.type=nn.ProtoPlayspaceSlideTypeEnum.Default,this.HE(),this.onSlideTransitionStart(this.EE)}HE(){this.zE(),this.WE(),this.GE(),this.JE(),this.QE(),this.VE(),this.ZC.publisherName&&this.DE()}zE(){const{clickUrl:t,title:i}=this.ZC,e={url:t,label:i,titleType:Is.Default};this.BE(As.SlideTitle,e)}WE(){this.BE(As.PlaybackControls)}GE(){this.BE(As.PlaylistControls)}QE(){const{clickUrl:t,title:i}=this.ZC;if(!Object(T.h)(t))return;const e={url:t,label:this.XE(this.ZC),title:i,ctaAlignToContent:!0};this.BE(As.CtaButton,e)}JE(){this.ZC.mediaType===a.ProtoMediaTypeEnum.Video&&this.BE(As.VolumeControls)}VE(){const t=this.vv.stripHtmlTags(this.ZC.storyTitle).trim();if(!t)return;const i={label:t,useFallbackLabel:!0};this.BE(As.TopStoryTitle,i)}XE(t){const{capabilityList:i,mediaType:e}=t;if(!Object(u.h)(i))return Dl[e];const s=i.find(({type:t})=>t===nn.ProtoPlayspaceSlideCapabilitiesEnum.CtaButton);return s&&s.metadata?s.metadata.label:Dl[e]}}const $l="START";class Ul extends El{constructor(t,i,e,s,n,r,a,h,o,c,l){super(t,i,e,s,n,r,h,o,c,l),this.YE=a,this.type=nn.ProtoPlayspaceSlideTypeEnum.Cover,this.KE(),this.HE(),this.onSlideTransitionStart(this.EE)}KE(){Object(j.a)(this._d,Zs.Cover)}HE(){this.zE(),this.QE()}zE(){const t=As.SlideTitle,i={titleType:Is.Cover,coverChunk:this.ZC.coverMetadata,label:`${this.YE} min. story`};this.BE(t,i)}QE(){const t={label:$l,duration:this.ZC.slideDuration,ctaAlignToContent:!1,ctaAlignToFooter:!0};this.BE(As.CtaButton,t)}}class Vl extends El{constructor(t,i,e,s,r,h,o,c,l,u){super(t,i,e,s,r,h,o,c,l,u),this.type=nn.ProtoPlayspaceSlideTypeEnum.Quote,Object(T.f)(i.quoteMetadata)?(this.HE(),this.onSlideTransitionStart(this.EE)):Object(n.a)({message:"QuoteSlide_no_metadata",level:a.ProtoLoggingLevelEnum.FATAL})}HE(){this.VE(),this.DE(),this.ZE()}VE(){const t={label:this.ZC.storyTitle,useFallbackLabel:!0};this.BE(As.TopStoryTitle,t)}ZE(){const{text:t,source:i}=this.ZC.quoteMetadata,e=As.SlideTitle,s={quote:t,source:i,titleType:Is.Quote};this.BE(e,s)}}const Nl="VISIT POST";class Hl extends El{constructor(t,i,e,s,n,r,a,h,o,c){super(t,i,e,s,n,r,a,h,o,c),this.type=nn.ProtoPlayspaceSlideTypeEnum.Instagram,this.KE(),this.HE(),this.onSlideTransitionStart(this.EE)}KE(){Object(j.a)(this._d,Zs.Instagram)}HE(){this.tL(),this.VE(),this.DE(),this.QE()}tL(){const{createdDate:t,comments:i,likes:e}=this.ZC.instagramMetadata,s={label:this.ZC.title,instagramMetadata:{createdDate:t,comments:i,likes:e},titleType:Is.Instagram};this.BE(As.SlideTitle,s)}VE(){const t={label:this.ZC.storyTitle,useFallbackLabel:!0};this.BE(As.TopStoryTitle,t)}QE(){const{clickUrl:t,title:i}=this.ZC;if(!Object(T.h)(t))return;const e={url:t,label:Nl,title:i,ctaAlignToContent:!1,ctaAlignToFooter:!0};this.BE(As.CtaButton,e)}iL(t){const i=this.metadata.instagramMetadata.handle||t.publisherName,e=this.vv.stripHtmlTags(i).trim();return t.publisherName?`by <em>${e}</em>`:e}DE(){const t=this.iL(this.ZC);if(!t)return;const i={label:t,useTransition:!0};this.BE(As.TopSlideTitle,i)}}class ql{constructor(t,i,e,s,n,r,a,h,o,c){this.xb=t,this.vv=i,this.Od=e,this.Eo=s,this.TM=n,this.Zb=r,this.Xn=a,this.eL=h,this.hm=o,this.Vu=c,this.sL={[nn.ProtoPlayspaceSlideTypeEnum.Description]:Bl,[nn.ProtoPlayspaceSlideTypeEnum.Default]:Fl,[nn.ProtoPlayspaceSlideTypeEnum.Quote]:Vl,[nn.ProtoPlayspaceSlideTypeEnum.BulletList]:Rl,[nn.ProtoPlayspaceSlideTypeEnum.Instagram]:Hl}}getSlide(t,i,e){const s=this.sL[t.type]||Fl,n=this.nL(t,i);switch(t.type){case nn.ProtoPlayspaceSlideTypeEnum.Cover:return new Ul(i,t,this.vv,this.Od,this.Eo,n,e,this.Xn,this.eL,this.hm,this.Vu);default:return new s(i,t,this.vv,this.Od,this.Eo,n,this.Xn,this.eL,this.hm,this.Vu)}}nL(t,i){if(t.mediaType===a.ProtoMediaTypeEnum.Video)return new Ol(i,t,this.xb,this.vv,this.Eo,this.TM,this.Zb);if(t.mediaType===a.ProtoMediaTypeEnum.Image)return new sl(i,t,this.vv,this.Eo);throw new Error("Slide not found")}}var zl=e(53);const Wl="00000000-0000-0000-0000-000000000002",Gl="PlayspaceContentHandler";class Jl extends o.a{constructor(t,i,e,s,n,r,h){super(),this.mediator=t,this.vv=i,this.Eo=e,this.Vu=s,this.xb=n,this.CT=r,this.QI=h,this.rL=new zl.a(nn.ProtoPlayspaceMediaMetadataResponse,Gl),this.aL=0,this.hL=!1,this.oL=t=>{t&&(this.MC.onFirstTimeInView(),this.xb.services.ViewabilityService.off(this.CT,this.oL))},this.cL(),this.LE(),this.lL(),this.uL(),this.volume=this.Vu.soundMode===a.ProtoPlayerSoundMode.On?1:0,this.$b(),this.xb.services.ViewabilityService.on(this.CT,this.oL,{threshold:.5})}dL(t){return new Promise((i,e)=>{this.rL.fetchMetadata(t).then(t=>{if(window.parent.cnx_ps_slide_list&&Object(hh.b)("cnx_ps_slide_list",this.xb.config.pageUrl)&&(t.slides=[...window.parent.cnx_ps_slide_list,...t.slides]),t.slides=this.fL(t.slides),t.slides=this.pL(t.slides),t.slides.length>=2)i(t);else{if(this.hL)return void e({message:"fallbackstory_already_used"});this.hL=!0,this.bL().then(t=>{const e=`${dt.a.endPoints.base.metadata}${t.storyId}/${t.activeVersionId}.bin`;i(this.dL(e))}).catch(t=>{Object(n.a)({level:a.ProtoLoggingLevelEnum.FATAL,message:"PlayspaceContentH_error_getting_default_story"}),e(t)})}}).catch(t=>{e(t)})})}bL(){return new Promise((t,i)=>{th.a.sendProtoRequest({ProtoResponse:nn.ProtoFallbackStoryResponse,endpoint:dt.a.endPoints.api.fallbackstory,logError:!0}).then(i=>{t(i)}).catch(t=>{i(t)})})}fL(t){let i;if(Object(T.h)(this.xb.config.appPageURL)){const{hostname:t,pathname:e}=Object(at.g)(this.xb.config.appPageURL);i=`${t}${e}`}else{const{hostname:t,pathname:e}=this.vv.getGlobalLocationProperties();i=`${t}${e}`}return t.filter(t=>{const e=Object(at.g)(t.clickUrl);return!(e&&e.hostname+e.pathname===i)})}pL(t){return t.filter(t=>t.type!==nn.ProtoPlayspaceSlideTypeEnum.Stock)}lL(){const{browserType:t}=this.xb.config.browser,{os:i,osVersion:e}=this.xb.config.os,s={disableCTARendering:this.Vu.disableCTARendering};this.PC=new Fc(this,this.vv,this.xb.services.PageFocusService,this.MC.$mediaContainer,new ql(this.xb,this.vv,this.xb.services.InteractionService,this.Eo,this.Vu.soundMode===a.ProtoPlayerSoundMode.On?1:0,{browser:t,os:i,osVersion:e},this.xb.config.isMobile,s,this.MC.footer,this.Vu),this.Vu.isSeoTraffic)}cL(){this.vL={logoUrl:this.Vu.logoUrl,isMobile:this.xb.config.isMobile,closeButtonMode:this.Vu.closeButtonMode,floatingCloseButtonMode:this.Vu.floatingCloseButtonMode,isCloseButton:this.Vu.isCloseButton,sharingDestinations:this.Vu.sharingDestinations,os:this.xb.config.os.os,expandButtonEnabled:this.Vu.uiComponentsVisibility.expandButton,primaryColorList:{background:this.Vu.primaryColorList.background||d.l.PrimaryBackground,foreground:this.Vu.primaryColorList.foreground||d.l.PrimaryForeground},secondaryColorList:{background:this.Vu.secondaryColorList.background||d.l.SecondaryBackground,foreground:this.Vu.secondaryColorList.foreground||d.l.SecondaryForeground},accentColorList:{background:this.Vu.accentColorList.background,foreground:this.Vu.accentColorList.foreground||d.l.AccentForeground},useAccentColorForProgressBar:this.Vu.useAccentColorForProgressBar,disableClickUrl:this.Vu.disableClickUrl,fontFamilySettings:this.Vu.fontFamilySettings}}LE(){const t=new $c({disableStoryProgressBarRendering:this.Vu.disableStoryProgressBarRendering,disableTitleRendering:this.Vu.disableTitleRendering});this.MC=new Yc(this,this.CT,this.xb.services.GlobalDomUtilsService,this.xb.services.ResizeObserver,t.template,this.vL,this.xb.config.appId,this.Vu.playbackMode===a.ProtoPlayerPlaybackModeEnum.ClickToPlay?X.StoppedState:X.PausedState,this.xb.services.InteractionService),this.MC.setMediaContainerRatio(this.QI.getContentRatioContainer()),this.MC.show()}$b(){this.subscribe(ts.SlideTransitionStart,this.PC,({payload:{nextSlide:t}})=>{const i=t;let e=[];i.media.type===a.ProtoMediaTypeEnum.Video&&(e=i.media.getAvailableQualities(),this.MC.updateQuality(i.media.currentQuality)),this.MC.updateQualityMenu(e),this.MC.onSlideTransitionStart(i.slideCapabilityList),i.onSlideTransitionStart(i.slideCapabilityList)}),this.subscribe(ts.SlideTransitionEnd,this.PC,()=>{this.MC.onSlideTransitionEnd()}),this.subscribe(ts.SlideTimeUpdate,this.PC,({payload:{elapsedTime:t,duration:i}})=>{this.MC.onSlideTimeUpdate(t,i)}),this.subscribe(ts.SlideChanged,this.PC,({payload:{index:t}})=>{this.MC.setCurrentIndex(t),this.MC.setDuration(this.PC.remainingTime),this.mediator.publish(this,Ke.ChangeSlide)}),this.subscribe(ts.SlideCycleEnd,this.PC,()=>{this.mL.handleSlidesEnd()}),this.subscribe(Z.Change,this.PC,({payload:t})=>{const i=this.PC.getCurrentSlide();i&&i.media.type===a.ProtoMediaTypeEnum.Video&&this.MC.updateQuality(i.media.currentQuality),this.mediator.publish(this,Z.Change,{payload:t})}),this.subscribe(_[_.Play],this.MC,()=>{this.mediator.publish(this,c.b.UserInteraction,{payload:{playback:!0}});this.play(!0)}),this.subscribe(_[_.Pause],this.MC,()=>{this.mediator.publish(this,c.b.UserInteraction,{payload:{playback:!1}});this.pause(!0)}),this.subscribe(_[_.Volume],this.MC,({payload:t})=>{this.volume=t,this.mediator.publish(this,c.b.UserInteraction,{payload:{volume:!0}}),this.mediator.publish(this,_[_.Volume],{payload:{volume:t}})}),this.subscribe(_[_.Close],this.MC,()=>{this.mediator.publish(this,c.b.UserInteraction,{payload:{playback:!1}}),this.mediator.publish(this,_[_.Close])}),this.subscribe(_[_.LogoClicked],this.MC,()=>{this.mediator.publish(this,_[_.LogoClicked])}),this.subscribe(Ye.ProgressBarItemClicked,this.MC,({payload:t})=>{this.mediator.publish(this,c.b.UserInteraction,{payload:{playback:!0}}),this.setSlide(t),this.mediator.publish(this,Ye.ProgressBarItemClicked,{payload:t})}),this.subscribe(Ye.CallToAction,this.PC,()=>{this.mediator.publish(this,Ye.CallToAction)}),this.subscribe(_[_.Expand],this.MC,()=>{this.mediator.publish(this,_[_.Expand])}),this.subscribe(_[_.Collapse],this.MC,()=>{this.mediator.publish(this,_[_.Collapse])}),this.subscribe(kt.a[kt.a.HoldStart],this.MC,()=>{this.mL.pauseToggle()}),this.subscribe(kt.a[kt.a.HoldEnd],this.MC,()=>{this.mL.pauseToggle()}),this.subscribe(kt.a[kt.a.TapLeft],this.MC,()=>{this.gL(),this.goToPrevSlide()}),this.subscribe(kt.a[kt.a.TapRight],this.MC,()=>{this.gL(),this.goToNextSlide()}),this.subscribe(kt.a[kt.a.SwipeEnd],this.MC,({payload:t})=>{t===Xc.d.Left?this.mL.goToNextSlide():this.mL.goToPrevSlide()}),this.subscribe(kt.a[kt.a.SwipeMove],this.MC,({payload:t})=>{this.PC.offsetSlides(t)}),this.subscribe(_[_.Quality],this.MC,({payload:t})=>{this.PC.setQuality(t)}),this.subscribe(_[_.Next],this.MC,()=>{this.gL(),this.goToNextSlide()}),this.subscribe(_[_.Next],this.PC,()=>{this.gL(),this.goToNextSlide()}),this.subscribe(_[_.Prev],this.MC,()=>{this.gL(),this.goToPrevSlide()}),this.relay(Ye.GeneralClickInteraction,this.MC,this,this.mediator),this.relay(Ye.GeneralClickInteraction,this.PC,this,this.mediator)}yL(){if(Object(T.a)(this.Vu.storyMetadata)){const t=this.Vu.storyMetadata;this.wL(t)}else{let{storyId:t,activeVersion:i}=this.Vu;const e=Object(hh.b)("cnx_force_fallback",this.xb.config.pageUrl);e&&(t=Wl,i=e);const s=`${dt.a.endPoints.base.metadata}${t}/${i}.bin`;if(!Object(T.h)(i))return void this.xL();this.dL(s).then(t=>{this.wL(t)}).catch(()=>{this.xL()})}}xL(){this.bL().then(t=>{const i=`${dt.a.endPoints.base.metadata}${t.storyId}/${t.activeVersionId}.bin`;return this.dL(i)}).then(t=>{this.wL(t)})}wL(t){t.slides=t.slides.map(i=>Object.assign(Object.assign({},i),{storyTitle:t.storyTitle,publisherName:this.Vu.publisherName})),this.PC.start(t.slides),this.MC.setTotalSlides(t.slides.length);const i=this.Vu.storyPosition&&this.Vu.storyPosition<t.slides.length?this.Vu.storyPosition:es;this.PC.setCurrentSlide(i),this.mediator.publish(this,Ze.ContentHandlerReady)}uL(){const{preRollBreak:t,postRollBreak:i}=this.Vu,e=Object(T.e)(t),s=Object(T.e)(i);this.mL=new Zc(this,this.PC,this.MC,e,s,this.Vu.endOfSlideCycleMode,null!==this.Vu.storyPosition),this.kL()}kL(){this.subscribe(Kc.StateChanged,this.mL,({payload:t})=>{this.MC.changeState(t);const i=this.PC.getCurrentSlide();i&&i.changeState(t),this.mediator.publish(this,Ze.StateChanged,{payload:t})}),this.subscribe(Kc.ContentReset,this.mL,()=>{this.mediator.publish(this,Ze.NewStory)}),this.relay([Ze.ContentStart,Ze.ContentEnd],this.mL,this,this.mediator)}gL(){this.mediator.publish(this,c.b.UserInteraction,{payload:{playback:!0}})}setViewabilityState(t){this.mL.setViewabilityState(t)}goToNextSlide(){this.mL.goToNextSlide()}goToPrevSlide(){this.mL.goToPrevSlide()}getNextSlide(){return this.PC.getNextSlide()}getCurrentThumbnailUrlParams(t,i){return this.PC.getCurrentThumbnailUrlParams(t,i)}getCurrentMetadata(){return this.PC.getCurrentMetadata()}start(){this.yL()}get volume(){return this.aL}set volume(t){this.aL=t,this.PC.setVolume(t),this.MC.updateVolume(t)}play(t){this.mL.play(t)}pause(t){this.mL.pause(t)}show(){this.mL.show()}hide(){this.mL.hide()}enterFullscreen(){this.MC.expand()}exitFullscreen(){this.MC.collapse()}setSlide(t){this.play(!1),this.mL.setCurrentSlide(t)}onResize(){this.PC.onPlayerContainerResize(),this.MC.onResizeUi(this.PC.remainingTime,this.PC.isPlaying)}get currentSlideIndex(){return this.PC.currentSlideIndex}get slides(){return this.PC.slides}updateCtaLabel(t,i){const e={type:As.CtaButton,metadata:{label:i}};this.PC.updateCapabilityMetadata(t,e),t===this.PC.currentSlideIndex&&this.MC.updateCapabilityMetadata(e)}get slidesMetadata(){return this.PC.slidesMetadata}toggleExpandButton(t){t?this.MC.showExpandButton():this.MC.hideExpandButton()}getQuality(){return this.PC.getQuality()}setQuality(t){const i={height:t,quality:Q.Strict};this.PC.setQuality(i)}stop(){this.mL&&this.mL.stop()}resume(){this.mL&&this.mL.resume()}startContent(){this.mL.exitRollBreak()}destroy(){this.PC&&this.PC.destroy(),this.MC&&this.MC.destroy()}}const Ql={lg:630,md:400,sm:320,xs:0},Xl={[a.ProtoDeviceType.Desktop]:Object.assign({},Ql),[a.ProtoDeviceType.Tablet]:Object.assign({},Ql),[a.ProtoDeviceType.Smartphone]:Object.assign({},Ql)},Yl=288;var Kl,Zl;!function(t){t[t.Play=0]="Play",t[t.Pause=1]="Pause"}(Kl||(Kl={}));class tu{constructor(t,i){switch(this.mediator=t,this.inView=!1,this.SL=!1,this.OL=!1,this._L=()=>{},i){case a.ProtoPlayerPlaybackModeEnum.Autoplay:this.jL(this.AL);break;case a.ProtoPlayerPlaybackModeEnum.ClickToPlay:this.jL(this.IL);break;case a.ProtoPlayerPlaybackModeEnum.ScrollToPlay:this.jL(this.TL)}}jL(t){this._L=()=>{this.SL||t.call(this)}}AL(){!this.OL&&this.inView&&(this.OL=!0,this.mediator.publish(this,Kl[Kl.Play]))}TL(){this.inView?this.mediator.publish(this,Kl[Kl.Play]):this.mediator.publish(this,Kl[Kl.Pause])}IL(){}setViewability(t){this.inView=t,this._L()}setUserPlayback(t){!this.OL&&t&&(this.OL=t),this.SL=!t}}!function(t){t.enter="enterFullscreen",t.exit="exitFullscreen"}(Zl||(Zl={}));class iu{constructor(t,i,e,s){if(this.mediator=t,this.vv=i,this.tr=s,this.CL=!1,this.PL=1e3,this.ML=!0,this.Hl=!1,this.EL=()=>{this.CL&&this.LL()},this.RL=t=>{this.CL?null!==this.fullscreenElement?this.LL():this.BL():this.mediator.publish(this,Zl.exit)},this.BL=()=>{this.Hl=!1,this.DL.reject(),this.CL=!1,clearTimeout(this.FL)},this.yP=s&&s===ot.b.Ios?e.getElementsByTagName("video")[0]:e,!this.yP)throw new Error("element is missing");try{const t=this.$L();if(null==t)return void(this.ML=!1);this.UL=t.keys,this.VL=t.name,this.BP()}catch(t){this.ML=!1,Object(n.a)({message:"Fullscreen init failed",exception:t.message,callStack:t.stack,level:a.ProtoLoggingLevelEnum.FATAL})}}$L(){let t;return t=this.tr===ot.b.Ios?this.vv.getFullscreenKeys(this.yP):this.vv.getFullscreenKeys()}get fullscreenElement(){return this.vv.getDocumentProperty(this.UL.fullscreenElement)}get fullscreenEnabled(){return this.vv.getDocumentProperty(this.UL.fullscreenEnabled)}enterFullScreen(){if(this.ML){this.DL=new vl.a,this.CL=!0,clearTimeout(this.FL),this.FL=setTimeout(this.BL,this.PL);try{this.yP[this.UL.requestFullscreen]()}catch(t){this.BL()}return this.DL.promise}}exitFullScreen(){try{this.vv.exitFullscreen(this.UL.exitFullscreen,this.tr===ot.b.Ios?this.yP:void 0)}catch(t){Object(n.a)({message:"fullscreen_exit",exception:t.message,callStack:t.stack,level:a.ProtoLoggingLevelEnum.WARNING})}this.Hl=!1}BP(){this.VL===ae.d.Moz||this.VL===ae.d.Ms?(this.vv.addEventListenerOnGlobal(this.UL.fullscreenchange,this.RL),this.vv.addEventListenerOnGlobal(this.UL.fullscreenerror,this.BL)):(this.yP.addEventListener(this.UL.fullscreenchange,this.RL),this.yP.addEventListener(this.UL.fullscreenerror,this.BL)),this.tr===ot.b.Ios&&(this.yP.addEventListener("webkitbeginfullscreen",this.EL),this.yP.addEventListener("webkitendfullscreen",this.RL))}NL(){this.VL===ae.d.Moz||this.VL===ae.d.Ms?(this.vv.removeEventListenerOnGlobal(this.UL.fullscreenchange,this.RL),this.vv.removeEventListenerOnGlobal(this.UL.fullscreenerror,this.BL)):(this.yP.removeEventListener(this.UL.fullscreenchange,this.RL),this.yP.removeEventListener(this.UL.fullscreenerror,this.BL)),this.tr===ot.b.Ios&&(this.yP.removeEventListener("webkitbeginfullscreen",this.EL),this.yP.removeEventListener("webkitendfullscreen",this.RL))}LL(){this.Hl=!0,this.mediator.publish(this,Zl.enter),this.DL.resolve(),this.CL=!1,clearTimeout(this.FL)}get isFullscreen(){return this.Hl}destroy(){this.isFullscreen&&this.exitFullScreen(),this.NL(),this.DL&&this.DL.isPending&&this.DL.reject()}}const eu={xl:720,lg:320,md:204,sm:142,xs:0},su={[a.ProtoDeviceType.Desktop]:{xl:468,lg:388,md:248,sm:142,xs:0},[a.ProtoDeviceType.Tablet]:Object.assign({},eu),[a.ProtoDeviceType.Smartphone]:Object.assign({},eu)},nu={xl:720,lg:320,md:204,sm:142,xs:0},ru=(Object.assign({},nu),Object.assign({},nu),176),au=160,hu=144,ou=112,cu={xl:nu.xl+ru,lg:nu.lg+au,md:nu.md+hu,sm:nu.sm+ou},lu=(Object.assign({},cu),Object.assign({},cu),{lg:320,md:204,sm:0}),uu=(Object.assign({},lu),Object.assign({},lu),{xxl:1080,xl:0}),du=(Object.assign({},uu),Object.assign({},uu),Object.assign(Object.assign({},C.b),is));var fu;!function(t){t[t.PlayerOrientationChange=0]="PlayerOrientationChange",t[t.MainOrientationChange=1]="MainOrientationChange"}(fu||(fu={}));class pu{constructor(t,i,e,s){this.mediator=t,this.Gn=i,this.HL=e,this.ks=s,this.qL={current:null,previous:null},this.zL={current:null,previous:null},this.WL=!1}setFloatingModule(t){this.GL=t}start(t){this.la=t,this.JL(this.Gn.orientation),this.QL(this.Gn.orientation)}forceOrientation(t){this.WL=!1,this.setMainOrientation(t),this.setPlayerClassByOrientation(t),this.WL=!0}setPlayerClassByOrientation(t=this.Gn.orientation){this.JL(t),this.qL.previous&&this.qL.current===this.qL.previous||(this.XL(this.HL),this.qL.previous=this.qL.current,this.mediator.publish(this,fu[fu.PlayerOrientationChange],{payload:this.qL.current}))}setMainOrientation(t=this.Gn.orientation){this.QL(t),this.zL.previous&&this.zL.previous===this.zL.current||(this.zL.previous=this.zL.current,this.mediator.publish(this,fu[fu.MainOrientationChange],{payload:this.zL.current}))}get playerOrientation(){return this.qL.current}get mainOrientation(){return this.zL.current}shouldChangeMainOrientation(){return!this.Fo()}JL(t){this.qL.current=this.YL(t)}QL(t){this.zL.current=this.KL(t)}YL(t){if(this.Fo())return nn.ProtoPlayerOrientationEnum.Landscape;if(this.WL)return this.zL.current;switch(t){case nn.ProtoPlayerOrientationEnum.Mixed:return this.ZL();default:return t}}KL(t){if(this.WL)return this.zL.current;switch(t){case nn.ProtoPlayerOrientationEnum.Mixed:return this.ZL();default:return t}}Fo(){return this.GL&&this.GL.isInFloating}ZL(){return this.ks.getViewportWidth()<this.Gn.orientationBreakpoint?nn.ProtoPlayerOrientationEnum.Portrait:nn.ProtoPlayerOrientationEnum.Landscape}XL(t){this.qL.previous?Object(j.O)(this.la,t(this.qL.previous),t(this.qL.current)):Object(j.a)(this.la,t(this.qL.current))}}class bu{constructor(t){this.vv=t,this.tR=[]}createRatioContainer(t){const i=this.iR();return this.tR.push(i),this.setRatio(t),i}setRatio(t){this.eR=t,this.sR()}iR(){return this.vv.createElementByString(`<cnx class='${d.c}'></cnx>`)}sR(){this.tR.forEach(t=>{Object(j.Q)(t,{"padding-bottom":`${this.eR}%`})})}}class vu{constructor(t,i){this.nR={width:1,height:1},this.rR=t,this.aR=i}start(t){this.hR(t)}getComputedPlayspaceRatio(t){return this.oR(t)/this.cR(t)*100}getComputedContentRatio(t){return this.lR(t)/this.uR(t)*100}hR(t){this.dR=t}cR(t){if(t===nn.ProtoPlayerOrientationEnum.Landscape){if(!this.dR.clientWidth)return this.rR.width;const t=this.fR();return this.dR.clientWidth/t}return this.aR.width}oR(t){if(t===nn.ProtoPlayerOrientationEnum.Landscape){if(!this.dR.clientWidth)return this.rR.height;return this.pR()/this.fR()}return this.aR.height}pR(){return this.rR.height/this.rR.width*this.dR.clientWidth+hs}fR(){const t=this.pR();return Object(rt.d)(this.dR.clientWidth,t)}uR(t){return t===nn.ProtoPlayerOrientationEnum.Landscape?this.rR.width:this.nR.width}lR(t){return t===nn.ProtoPlayerOrientationEnum.Landscape?this.rR.height:this.nR.height}}class mu extends o.a{constructor(t,i,e,s,n){super(),this.mediator=t,this.Gn=i,this.vv=n,this.bR(),this.vR=new vu(e,s),this.mR=new bu(n),this.gR=new bu(n)}setFloatingModule(t){this.yR.setFloatingModule(t),this.setRatio()}start(t,i){this.yR.start(t),this.vR.start(i)}getPlayspaceRatioContainer(){return this.mR.createRatioContainer(this.wR())}getContentRatioContainer(){return this.gR.createRatioContainer(this.xR())}setRatio(t=!1){this.yR.setPlayerClassByOrientation(),(t||this.yR.shouldChangeMainOrientation())&&(this.yR.setMainOrientation(),this.mR.setRatio(this.wR())),this.gR.setRatio(this.xR())}getOrientation(){return this.yR.playerOrientation}setOrientation(t){this.yR.forceOrientation(t),this.mR.setRatio(this.wR()),this.gR.setRatio(this.xR())}bR(){this.yR=new pu(this,this.Gn,this.HL,this.vv),this.subscribe(fu[fu.PlayerOrientationChange],this.yR,({payload:t})=>{this.mediator.publish(this,fu[fu.PlayerOrientationChange],{payload:t})}),this.subscribe(fu[fu.MainOrientationChange],this.yR,({payload:t})=>{this.mediator.publish(this,fu[fu.MainOrientationChange],{payload:t})})}wR(){const t=this.yR.mainOrientation;return this.vR.getComputedPlayspaceRatio(t)}xR(){const t=this.yR.playerOrientation;return this.vR.getComputedContentRatio(t)}HL(t){return t===nn.ProtoPlayerOrientationEnum.Portrait?Ge.OrientationPortrait:Ge.OrientationLandscape}}const gu={PlaybackModeEnum:{AutoPlay:a.ProtoPlayerPlaybackModeEnum.Autoplay,ScrollToPlay:a.ProtoPlayerPlaybackModeEnum.ScrollToPlay,ClickToPlay:a.ProtoPlayerPlaybackModeEnum.ClickToPlay},DefaultSoundModeEnum:{On:a.ProtoPlayerSoundMode.On,Off:a.ProtoPlayerSoundMode.Mute,OnHover:a.ProtoPlayerSoundMode.Hover},InsertPositionEnum:{WithinContainer:a.ProtoPlayerInsertMode.WithinContainer,BeforeContainer:a.ProtoPlayerInsertMode.BeforeContainer,AfterContainer:a.ProtoPlayerInsertMode.AfterContainer,ReplaceContainer:a.ProtoPlayerInsertMode.ReplaceContainer,HideContainer:a.ProtoPlayerInsertMode.HideContainer},CloseButtonModeEnum:{Off:a.ProtoPlayerCloseButtonMode.Off,On:a.ProtoPlayerCloseButtonMode.OnHover,OnAfterFirstAd:a.ProtoPlayerCloseButtonMode.OnHoverAfterFirstAd,OnHover:a.ProtoPlayerCloseButtonMode.OnHover,OnHoverAfterFirstAd:a.ProtoPlayerCloseButtonMode.OnHoverAfterFirstAd,AlwaysOn:a.ProtoPlayerCloseButtonMode.AlwaysOn},QualityEnum:tt,LineItemExcludedSlotsEnum:{PreRoll:a.ProtoAdSlotsEnum.PreRoll,MidRoll:a.ProtoAdSlotsEnum.MidRoll,PostRoll:a.ProtoAdSlotsEnum.PostRoll},ErrorTypesEnum:{SetupError:C.a.SetupError,NoPlayer:C.a.NoPlayer},FloatingModeEnum:{Off:a.ProtoPlayerFloatingMode.Off,OnPageLoad:a.ProtoPlayerFloatingMode.OnPageLoad,AfterInView:a.ProtoPlayerFloatingMode.AfterInView,Always:a.ProtoPlayerFloatingMode.Always},FloatingDevicesEnum:{Desktop:a.ProtoDeviceType.Desktop,Smartphone:a.ProtoDeviceType.Smartphone,Tablet:a.ProtoDeviceType.Tablet,Other:a.ProtoDeviceType.GameConsole},FloatingFixedPositionModeEnum:{Page:a.ProtoFloatingFixedPositionMode.Page,Element:a.ProtoFloatingFixedPositionMode.Element},FloatingScrollPositionEnum:{BottomRight:a.ProtoPositionMode.BottomRight,BottomLeft:a.ProtoPositionMode.BottomLeft,TopRight:a.ProtoPositionMode.TopRight,TopLeft:a.ProtoPositionMode.TopLeft},FloatingStatesEnum:{Float:y.Float,Embed:y.Embed},ImplementationTypeEnum:{Amp:a.ProtoImplementationType.Amp,Web:a.ProtoImplementationType.Web}},yu=Object.assign(Object.assign({},gu),{EndOfSlideCycleEnum:{Loop:nn.ProtoEndOfSlideCycleMode.Loop,Stop:nn.ProtoEndOfSlideCycleMode.Stop},LayoutEnum:{Portrait:q.Portrait,Landscape:q.Landscape},OrientationEnum:{Mixed:nn.ProtoPlayerOrientationEnum.Mixed,Portrait:nn.ProtoPlayerOrientationEnum.Portrait,Landscape:nn.ProtoPlayerOrientationEnum.Landscape}});class wu extends H{constructor(t,i,e,s){super(t,i,e,s),this.mediator=t,this.controlData=e,this.kR=0,this.SR=0,this.onStop(),this.tl.slides=!1,this.OR()}_R(){this.controlData.minSlidesBeforeFirstAd&&this.SR<=this.controlData.minSlidesBeforeFirstAd&&(this.tl.slides=!0)}jR(){this.controlData.slidesBetweenAds&&this.kR<=this.controlData.slidesBetweenAds&&(this.tl.slides=!0)}OR(){this.tl.slides=!1,this.firstAdBreakStarted?this.jR():this._R(),this.toggleEnableAds()}canEnableAds(){const t=super.canEnableAds();return t.enableAds&&this.currentPlayerAdSlot===a.ProtoAdSlotsEnum.MidRoll&&this.tl.slides&&this.dl?{enableAds:!1,disableReason:U.TimeoutBetweenAds}:t}contentPlaybackStateChanged(t){}slideChanged(){this.kR++,this.SR++,this.OR()}onAdImpression(t){this.kR=0,super.onAdImpression(t)}onAdFinished(t,i=!1){i||this.OR(),super.onAdFinished(t,i)}contentChanged(){this.OR(),super.contentChanged()}}const xu=1200;class ku{constructor(t,i,e,s,n=xu){this.AR=t,this.IR=i,this.TR=e,this.CR=s,this.PR=n,this.MR=null,this.ER=!1,this.LR=()=>{if(this.xA(),!this.ER&&this.IR&&this.IR.adInWin)return this.ER=!0,void this.RR(this.PR);this.AR.startContent()}}destroy(){this.xA()}changeState(t){switch(t){case X.PrerollState:this.ER=!1,this.RR(this.TR);break;case X.PostrollState:this.ER=!1,this.RR(this.CR);break;default:this.MR&&this.xA()}}xA(){clearTimeout(this.MR),this.MR=null}RR(t){this.xA(),this.MR=setTimeout(this.LR,t)}}const Su=300,Ou=250;class _u extends ut{constructor(){super(...arguments),this.bd=Xl,this.vd=d.p,this.nd=Yl,this.rR={width:16,height:9},this.aR={width:4,height:5},this.events=Object.assign({},du),this.BR=()=>{this.DR(),this.FR(),this.Vu.adPlaybackMode===nn.ProtoAdPlaybackMode.Autoplay&&this.Vu.playbackMode!==nn.ProtoPlayerPlaybackModeEnum.ClickToPlay&&0===this.Vu.preRollBreak&&this.Cu(nn.ProtoAdSlotsEnum.MidRoll),this.mediator.publish(this,du.Ready)},this.$R=()=>{this.UR.enterFullScreen().then(()=>{this.VR()}).catch(t=>{Object(n.a)({message:"PlayspaceExperience_enterFullscreen",level:a.ProtoLoggingLevelEnum.WARNING})})},this.Yu=()=>{this.AR.exitFullscreen(),this.floatingModule&&this.floatingModule.fullscreenStateChange(!1),this.mediator.publish(this,du.FullscreenChanged,{payload:!1}),super.Yu()},this.Xu=()=>{this.mediator.publish(this,du.FullscreenChanged,{payload:!0}),super.Xu()}}mu(){const t={orientation:this.Vu.orientation,orientationBreakpoint:this.Vu.orientationBreakpoint};this.NR=new mu(this,t,this.rR,this.aR,this.app.services.GlobalDomUtilsService),this.subscribe(fu[fu.PlayerOrientationChange],this.NR,({payload:t})=>{this.mediator.publish(this,du.LayoutChanged,{payload:yu.LayoutEnum[nn.ProtoPlayerOrientationEnum[t]]})}),this.subscribe(fu[fu.MainOrientationChange],this.NR,({payload:t})=>{switch(t){case nn.ProtoPlayerOrientationEnum.Landscape:Object(j.N)(this.$experienceContainer,"maxWidth");break;case nn.ProtoPlayerOrientationEnum.Portrait:Object(j.Q)(this.$experienceContainer,{maxWidth:`${Xl[this.app.config.device].lg-1}px`})}})}HR(t){this.NR.setFloatingModule(t)}generateHTML(){this.$playerWrapper=this.app.services.GlobalDomUtilsService.createElementByString(`<cnx class="${d.b.PlayerWrapper}"></cnx>`),this.$playerContainer=this.app.services.GlobalDomUtilsService.createElementByString(`<cnx class="${Je.Container}"></cnx>`),this.NR.start(this.$playerContainer,this.$playerWrapper),this.addPlayerSize(),this.$experienceContainer.appendChild(this.$playerWrapper),this.$playerWrapper.appendChild(this.$playerContainer),this.NR.setRatio(),this.qR()}qR(){this.zR=this.app.services.GlobalDomUtilsService.createElementByString(`<cnx class="${Je.ImageWrapper} ${Je.ImageBackground}"></cnx>`),this.$playerWrapper.appendChild(this.zR)}WR(){return this.AR.getCurrentThumbnailUrlParams(this.$experienceContainer.clientWidth,this.$experienceContainer.clientHeight)}GR(){const t=this.WR();if(!t)return;const{imageUrl:i,altText:e,width:s,height:n,queryParams:r}=t,a=this.vu.getImage(i,e,s,n,r,!0);a&&(a.className=d.b.ImagePlaceholder,this.JR&&this.zR.removeChild(this.JR),this.zR.appendChild(a),this.JR=a,this.adHandler&&this.adHandler.setAdLoadingBackgroundUrl(i))}QR(){this.floatingModule&&this.floatingModule.canFloat()&&this.GR()}XR(t=!1){this.zR&&(t?Object(j.a)(this.zR,Je.MediaLogo):Object(j.L)(this.zR,Je.MediaLogo))}addPlayerSize(){const t=this.NR.getPlayspaceRatioContainer();this.$playerWrapper.appendChild(t),Object(j.a)(this.$playerWrapper,d.i.Responsive)}resizeAdHandler(){if(this.adHandler){const t=this.UR&&this.UR.isFullscreen?w.a.Fullscreen:w.a.Normal;this.adHandler.setVastViewMode(t)}}handleClose(){this.mediator.publish(this,du.CloseButtonClicked),this.Fo()?(this.floatingModule.destroy(),this.pause()):this.UR&&this.UR.isFullscreen?this.UR.exitFullScreen():this.triggerDestroy()}getVolume(){return this.AR.volume}setNewVolume(t){super.setNewVolume(t),this.AR.volume=t,this.Br(t)}destroy(){var t;super.destroy(),null===(t=this.YR)||void 0===t||t.destroy(),this.AR&&this.AR.destroy(),this.UR&&this.UR.destroy()}KR(){this.AR=new Jl(this,this.app.services.GlobalDomUtilsService,this.app.services.ResizeObserver,this.Vu,this.app,this.$playerContainer,this.NR),this.subscribe(Ze.ContentHandlerReady,this.AR,this.BR),this.Vu.isCloseButton&&this.subscribe(_[_.Close],this.AR,()=>this.handleClose()),this.subscribe(_[_.Volume],this.AR,({payload:{volume:t}})=>{this.Br(t),this.adHandler&&this.adHandler.setVolume(t)}),this.subscribe(Ze.StateChanged,this.AR,({payload:t})=>{var i;null===(i=this.YR)||void 0===i||i.changeState(t),this.ZR(t),t===X.PlayingState&&this.yd(),this.tB(t)}),this.subscribe(Ke.ChangeSlide,this.AR,()=>{this.Kl.slideChanged();const t=this.iB();if(this.GR(),this.floatingModule&&this.floatingModule.canFloat()){const i=t&&t.mediaContext===nn.ProtoMediaContextEnum.Logo;this.XR(i)}this.app.services.TrackingService.updateMediaMetadata(this.eB()),this.mediator.publish(this,du.ChangeSlide,{payload:t})}),this.subscribe(Ze.NewStory,this.AR,()=>{this.Bu(),this.DR()}),this.subscribe(Ze.ContentStart,this.AR,()=>{this.app.services.TrackingService.setMediaStart(),this.mediator.publish(this,du.ContentStart,{payload:this.getStoryMetadata()})}),this.subscribe(Ze.ContentEnd,this.AR,()=>{this.app.services.TrackingService.trackMediaQuartile(a.ProtoQuartilesEnum.Fourth),this.mediator.publish(this,du.ContentComplete,{payload:this.getStoryMetadata()})}),this.floatingModule&&this.subscribe(c.b.UserInteraction,this.AR,this.uu),this.subscribe(Ye.ProgressBarItemClicked,this.AR,({payload:t})=>{this.mediator.publish(this,du.ProgressBarItemClicked,{payload:this.sB(t)})}),this.subscribe(_[_.Volume],this.adHandler,({payload:{volume:t}})=>{this.Br(t),this.AR.volume=t}),this.subscribe(Ye.CallToAction,this.AR,()=>{this.mediator.publish(this,du.CallToAction,{payload:this.iB()})}),this.subscribe(_[_.LogoClicked],this.AR,()=>{this.mediator.publish(this,du.BrandingClicked)}),this.subscribe(Z.Change,this.AR,({payload:t})=>{this.yE!==t&&(this.yE=t,this.mediator.publish(this,du.QualityChanged,{payload:t}))}),this.subscribe(Ye.GeneralClickInteraction,this.AR,({payload:t})=>{this.app.services.TrackingService.trackMediaClick(t)}),this.AR.start()}nB(t,i){const{preRollBreak:e,postRollBreak:s}=this.Vu;this.YR=new ku(t,i,e,s)}ZR(t){switch(t){case X.PlayingState:this.Cu(nn.ProtoAdSlotsEnum.MidRoll);break;case X.PrerollState:this.Cu(nn.ProtoAdSlotsEnum.PreRoll);break;case X.PostrollState:this.Cu(nn.ProtoAdSlotsEnum.PostRoll);break;case X.PausedState:this.Vu.adViewabilityPolicy===a.ProtoAdViewabilityPolicy.Default&&!this.rB.inView||this.Kl.onStop();break;case X.StoppedState:this.Kl.onStop()}}tB(t){switch(t){case X.PlayingState:this.app.services.TrackingService.setSessionPlayback(!0),this.mediator.publish(this,du.Play,{payload:this.iB()});break;case X.PausedState:this.mediator.publish(this,du.Pause,{payload:this.iB()}),this.app.services.TrackingService.setSessionPlayback(!1);break;case X.StoppedState:this.mediator.publish(this,du.ContentComplete,{payload:this.getStoryMetadata()}),this.app.services.TrackingService.setSessionPlayback(!1);break;default:this.app.services.TrackingService.setSessionPlayback(!0)}}FR(){this.rB=new tu(this,this.Vu.playbackMode),this.subscribe(Kl[Kl.Play],this.rB,()=>{this.AR.play(!1)}),this.subscribe(Kl[Kl.Pause],this.rB,()=>{this.AR.pause(!1)}),this.subscribe(c.b.UserInteraction,this.AR,({payload:{playback:t}})=>{Object(T.a)(t)&&this.rB.setUserPlayback(t)}),this.rB.setViewability(this.app.services.ViewabilityService.check({element:this.$playerContainer,threshold:this.El}))}aB(){this.adHandler&&(this.adHandler.start(this.$playerContainer.clientWidth,this.$playerContainer.clientHeight,this.Vu.soundMode===nn.ProtoPlayerSoundMode.On?1:0),this.Kl.forceRecheck())}Zl(){this.adHandler.setNextSlide(this.getNextSlide()),super.Zl(),this.AR.hide()}Uu(){this.Ru.isInAdPod()?this.Hu(()=>{this.Kl.onAdFinished(this.adHandler.inImpression,this.Ru.isInAdPod()),super.Uu(),this.AR.show()}):(super.Uu(),this.AR.show())}Fu(){return new Ec(this,this.Vu,this.$playerContainer,this.checkFloatingViewability(this.isViewable()),this.Ru,this.app,this.NR)}zu(){return new wu(this,this.isViewable(),{minSlidesBeforeFirstAd:this.Vu.minSlidesBeforeFirstAd,slidesBetweenAds:this.Vu.slidesBetweenAds,numberOfMidRolls:this.Vu.midRollNumber,viewabilityPolicy:this.Vu.adViewabilityPolicy,maxAdSlotDuration:this.Ru.getMaxAdSlotDuration(),maxAdPodDuration:this.Ru.getMaxAdPodDuration(),playerDimensions:{width:this.$playerContainer.offsetWidth,height:this.$playerContainer.offsetHeight},playerAdsSkippability:this.Vu.adSkippability},this.app)}qr(){super.qr(),this.AR&&this.AR.onResize(),this.NR.setRatio(),this.QR(),this.hB.updateWidth(this.$playerContainer.clientWidth)}Fo(){return this.floatingModule&&this.floatingModule.isInFloating}Pc(t,i=!1){super.Pc(t,i),this.rB&&this.rB.setViewability(t),this.AR&&this.AR.setViewabilityState(t)}oB(){const t=this.app.services.GlobalDomUtilsService.getGlobalClosestTop().topFrame.document.body;this.app.services.ResizeObserver.on(t,()=>{this.NR.setRatio(!0)})}nu(){return{isAutoPlay:this.Vu.playbackMode===nn.ProtoPlayerPlaybackModeEnum.Autoplay,isSkippable:!0,skipOffset:0}}start(){try{super.start(),this.HR(this.floatingModule),this.KR(),this.aB(),this.nB(this.AR,this.adHandler),this.ld(this.AR),this.cB(),this.oB(),this.hB=new L(this.$playerContainer,this.app.config.device,su,d.t),this.lB(this.$playerContainer)}catch(t){Object(n.a)({message:"PlayspaceExperience_start",exception:t.message,callStack:t.stack,level:a.ProtoLoggingLevelEnum.FATAL})}}setSlide(t){this.AR.setSlide(t)}getNextSlide(){return this.AR.getNextSlide()}play(){super.play();this.AR.play(!1)}pause(){super.pause();this.AR.pause(!1)}getStoryId(){return this.Vu.storyId}getStoryPosition(){return this.AR.currentSlideIndex}getStoryTimeline(){return this.AR.slides.map(t=>t.media.duration/B.f)}updateCtaLabel(t,i){Object(T.d)(t)&&Object(T.h)(i)&&this.AR.updateCtaLabel(t,i)}getStoryMetadata(){return this.AR.slidesMetadata.map(({title:t,clickUrl:i,slideDuration:e})=>({title:t,clickUrl:i,duration:e}))}toggleFullscreenButton(t){this.AR.toggleExpandButton(t)}toggleFullscreen(t){Object(T.a)(t)||(t=!this.UR.isFullscreen),this.UR.isFullscreen!==t&&(t?this.$R():this.UR.exitFullScreen())}getQuality(){return this.AR.getQuality()}setQuality(t){this.AR.setQuality(t)}getOrientation(){return this.NR.getOrientation()}setOrientation(t){this.NR.setOrientation(t)}cB(){this.app.config.os.os!==ot.b.Ios&&(this.UR=new iu(this,this.app.services.GlobalDomUtilsService,this.$playerContainer,this.app.config.os.os),this.uB())}uB(){this.subscribe(_[_.Expand],this.AR,this.$R),this.subscribe(_[_.Collapse],this.AR,()=>this.UR.exitFullScreen()),this.subscribe(Zl.exit,this.UR,this.Yu),this.subscribe(Zl.enter,this.UR,this.Xu)}VR(){this.AR.enterFullscreen(),this.floatingModule&&this.floatingModule.fullscreenStateChange(!0)}iB(){return this.AR.getCurrentMetadata()}sB(t){if(!(t<0||this.AR.slidesMetadata.length<t))return this.AR.slidesMetadata[t]}DR(){this.app.services.TrackingService.setNewMedia(this.eB())}eB(){const t=this.AR.getCurrentMetadata(),i=t.title||t.coverMetadata&&t.coverMetadata.title;return{mediaId:this.Vu.storyId,clickUrl:t.clickUrl,slideTitle:i,slideNumber:this.AR.currentSlideIndex+1,slideMediaType:t.mediaType}}lB(t){if(!Object(T.h)(this.Vu.sdkVersion)&&Object(T.h)(this.app.config.bundleID)){const i=this.app.services.GlobalDomUtilsService.querySelector("body");Object(j.Q)(i,{margin:"0"}),t.clientWidth>=Su&&(Object(j.Q)(t,{"min-height":`${Ou}px`}),Object(j.i)(t)),Object(at.l)([95,5])&&Object(n.a)({message:"PlayspaceExperience_start",exception:"IN_APP_RENDER_PLAYER_SIZE",callStack:`width: ${this.$playerContainer.clientWidth}: height: ${this.$playerContainer.clientHeight} `,level:a.ProtoLoggingLevelEnum.INFO})}}fd(){}}class ju{constructor(){this.Gg={}}on(t,i){if(this.Gg[t]=this.Gg[t]||[],!Object(T.b)(i))throw new Error(`${t} event callback is not a function`);return this.Gg[t].push(i),()=>this.Gg[t]=this.Gg[t].filter(t=>t!==i)}once(t,i){const e=this.on(t,t=>{try{i(t)}catch(t){}e()})}remove(t,i){this.Gg[t]&&(this.Gg[t]=this.Gg[t].filter(t=>t!==i))}removeAll(){this.Gg={}}trigger(t,i){this.Gg[t]&&this.Gg[t].forEach(t=>{try{t(i)}catch(t){}})}}class Au{constructor(t){this.experience=t,this.dB=(t,i)=>this.po.on(t,i),this.fB=(t,i)=>{this.po.remove(t,i)},this.pB=()=>{this.po.removeAll()},this.bB=(t,i)=>{this.po.once(t,i)},this.vB=()=>this.experience.isViewable(),this.mB=t=>{this.experience.setViewableThreshold(t)},this.gB=()=>{this.experience.play()},this.yB=()=>{this.experience.pause()},this.wB=()=>this.experience.getVolume(),this.xB=t=>{this.experience.setVolume(t)},this.jc=()=>{this.experience.triggerDestroy()},this.kB=()=>{this.experience.disableAdvertising()},this.SB=()=>{this.experience.enableAdvertising()},this.OB=t=>{this.experience.setCustomMacros(t)},this._B=t=>{this.experience.setAmpUserConsent(t)},this.po=new ju}trigger(t,i){this.po.trigger(t,i)}setDestroyed(){this.trigger(C.b.Removed)}getApiMethods(){return{on:this.dB,remove:this.fB,removeAll:this.pB,once:this.bB,isViewable:this.vB,setViewableThreshold:this.mB,play:this.gB,pause:this.yB,getVolume:this.wB,setVolume:this.xB,disableAdvertising:this.kB,enableAdvertising:this.SB,setMacros:this.OB,setAmpUserConsent:this._B,destroy:this.jc}}}class Iu extends Au{constructor(){super(...arguments),this.jB=()=>this.experience.getStoryPosition(),this.AB=()=>this.experience.getStoryId(),this.IB=()=>this.experience.getStoryTimeline(),this.TB=t=>{this.experience.setSlide(t)},this.CB=(t,i)=>{this.experience.updateCtaLabel(t,i)},this.PB=()=>this.experience.getStoryMetadata(),this.MB=t=>{this.experience.toggleFullscreenButton(t)},this.EB=t=>{this.experience.toggleFullscreen(t)},this.LB=()=>this.experience.getQuality(),this.RB=t=>{this.experience.setQuality(t)},this.BB=()=>{const t=this.experience.getOrientation();return yu.LayoutEnum[nn.ProtoPlayerOrientationEnum[t]]},this.DB=t=>{const i=Object.keys(yu.LayoutEnum).find(i=>yu.LayoutEnum[i]===t);i&&nn.ProtoPlayerOrientationEnum[i]&&this.experience.setOrientation(nn.ProtoPlayerOrientationEnum[i])},this.FB=()=>this.experience.getSize()}getApiMethods(){return Object.assign(Object.assign({},super.getApiMethods()),{getStoryPosition:this.jB,setStoryPosition:this.TB,getStoryId:this.AB,getStoryTimeline:this.IB,setCtaLabel:this.CB,getStoryMetadata:this.PB,toggleFullscreen:this.EB,toggleFullscreenButton:this.MB,getQuality:this.LB,setQuality:this.RB,getLayout:this.BB,setLayout:this.DB,getPlayerSize:this.FB})}}class Tu extends v{constructor(){super(...arguments),this.To="cnx-ps"}createExperience(t,i){this.experience=new _u(this,this.zs,i),this.experienceApi=new Iu(this.experience)}getApiMethods(){return this.experienceApi.getApiMethods()}isSupportedBreakpoint(t){return!(this.experienceContainer.clientWidth<Xl[t].xs)}}var Cu,Pu,Mu=e(31);!function(t){t[t.none=0]="none",t[t.friendly=1]="friendly",t[t.safe=2]="safe"}(Cu||(Cu={}));class Eu{constructor(t,i,e){this.ue=t,this.TT=i,this.$B=[],this.UB=Cu.none,this.VB={intersectionObserver:!1,fallbackImplementation:!1},this.NB=null,this.HB=[0,.01,.1,.2,.5],this.qB=250,this.zB=!1,this.WB=t=>{this.zB=t,this.GB(),f.a.setFocusState(t),Mu.a.pageFocus=t},this.GB=()=>{this.$B.forEach(t=>{const i=this.JB(t.element);this.onViewHandle(t,i)})},this.QB=()=>{null===this.NB&&(this.NB=setTimeout(()=>{this.GB(),clearTimeout(this.NB),this.NB=null},this.qB))},this.XB(e),this.YB(),this.KB()}KB(){this.TT.on(this.WB),Mu.a.pageFocus=this.TT.isDocumentVisible()}XB(t){this.ue.IntersectionObserver&&!t?this.VB.intersectionObserver=!0:this.VB.fallbackImplementation=!0,this.ue.self!==this.ue.top?(this.ZB=this.tD(this.ue),null!==this.ZB?this.UB=Cu.friendly:this.UB=Cu.safe):this.ZB=this.ue.frameElement}tD(t){let i;try{if((i=t.parent)===this.ue.top)return t.frameElement}catch(t){return null}return this.tD(i)}YB(){this.VB.intersectionObserver?this.iD=new this.ue.IntersectionObserver(this.onObserverEnter.bind(this),{root:null,rootMargin:"0px",threshold:this.HB}):(this.ue.addEventListener("scroll",this.QB),this.ue.addEventListener("load",this.GB),this.ue.addEventListener("resize",this.GB))}eD(t){return this.$B.find(i=>i.element===t)}JB(t){if(this.UB===Cu.safe){const i=this.eD(t);return i?i.cachedPercentInView:0}let i=1;const e=t.getBoundingClientRect(),s={bottomRatio:e.bottom/e.height,topRatio:(this.ue.top.innerHeight-e.top)/e.height,leftRatio:(this.ue.top.innerWidth-e.left)/e.width,rightRatio:e.right/e.width};return Object.keys(s).forEach(t=>{s[t]<=0&&(i=0),s[t]>0&&s[t]<1&&(i*=s[t])}),i}onObserverEnter(t){t.forEach(t=>{this.$B.filter(i=>i.element===t.target).forEach(i=>{this.onViewHandle(i,t.intersectionRatio)})})}onViewHandle(t,i){t.cachedPercentInView=i,t.list.forEach(t=>{!t.callbackSent&&t.threshold<=i&&this.zB?(t.callbackSent=!0,t.timeout=Object(at.a)(t.callback,t.callbackDelay,!0)):t.callbackSent&&(t.threshold>i||!this.zB)&&(t.callbackSent=!1,clearTimeout(t.timeout),t.timeout=Object(at.a)(t.callback,0,!1))})}on(t,i,e={}){let s=!1;if(this.VB.fallbackImplementation)if(this.UB===Cu.friendly&&t.ownerDocument.defaultView!==this.ue.top)t=this.ZB;else if(this.UB===Cu.safe)return void Object(at.a)(i,0,!1);let n=this.$B.find(i=>i.element===t);n?s=!0:(n={element:t,list:[],cachedPercentInView:0},this.$B.push(n)),n.list.push({threshold:e.threshold,callbackSent:!1,callbackDelay:e.callbackDelay,timeout:null,callback:i}),this.VB.intersectionObserver?(s&&this.iD.unobserve(t),this.iD.observe(t)):this.VB.fallbackImplementation&&this.GB()}off(t,i){const e=this.$B.find(i=>i.element===t);if(e){let s=e.list.length;for(;s;)s--,e.list[s].callback===i&&e.list.splice(s,1);0===e.list.length&&(this.iD&&this.iD.unobserve(t),this.$B.splice(this.$B.indexOf(e),1))}}check(t={threshold:.1}){if(!t.element)return!1;let i=t.element;return this.UB===Cu.friendly&&(i=this.ZB),this.JB(i)>=t.threshold&&this.zB}triggerRecheck(t){this.VB.fallbackImplementation&&t&&this.$B.forEach(i=>{if(i.element===t){const t=this.JB(i.element);this.onViewHandle(i,t)}})}setViewableThreshold(t){}getIsTabInFocus(){return this.zB}subscribe(t,i){}destroy(){this.ue.removeEventListener("scroll",this.QB),this.ue.removeEventListener("load",this.GB),this.ue.removeEventListener("resize",this.GB),[].slice.call(this.$B).forEach(t=>{[].slice.call(t.list).forEach(i=>{this.off(t.element,i.callback),this.ue.clearTimeout(i.timeout)})}),this.TT.off(this.WB),clearTimeout(this.NB)}}class Lu{constructor(){this.$B=[],this.JB=0,this.sD=!1,this.GB=t=>{this.$B.forEach(i=>{t&&t!==i.element||this.nD(i,this.JB)})}}rD(t){let i=this.$B.find(i=>i.element===t);return i||(i={element:t,list:[],cachedPercentInView:0},this.$B.push(i)),i.list}nD(t,i){t.list.forEach(t=>{!t.callbackSent&&t.threshold<=i?(t.callbackSent=!0,t.timeout=Object(at.a)(t.callback,t.callbackDelay,!0,this.sD)):t.callbackSent&&t.threshold>i&&(t.callbackSent=!1,clearTimeout(t.timeout),t.timeout=Object(at.a)(t.callback,0,!1,this.sD))})}on(t,i,e){this.rD(t).push({threshold:e.threshold,callbackSent:!1,callbackDelay:e.callbackDelay,timeout:null,callback:i}),this.GB()}off(t,i){const e=this.$B.find(i=>i.element===t);if(e){for(let t=e.list.length;t--;)e.list[t].callback===i&&e.list.splice(t,1);0===e.list.length&&this.$B.splice(this.$B.indexOf(e))}}check(t={threshold:.1}){return this.JB>=t.threshold}triggerRecheck(t){this.GB(t)}aD(t){this.sD=t}setViewableThreshold(t){this.JB=t,this.triggerRecheck()}getIsTabInFocus(){return!0}subscribe(t,i){}destroy(){for(let t=this.$B.length;t--;){const i=this.$B[t];for(let t=i.list.length;t--;)clearTimeout(i.list[t].timeout),this.off(i.element,i.list[t].callback)}}}class Ru{constructor(t=0){this.hD=t,this.oD=16,this.cD=9}getHeightByRatio(t){return Math.round(t/this.oD*this.cD)+this.hD}}class Bu{constructor(t,i,e={}){this.floatingMode=Object(T.a)(e.mode)?e.mode:t.floatingMode,Object(u.h)(e.devices)?this.floatingDeviceMode=e.devices:this.floatingDeviceMode=Object(u.h)(t.floatingDeviceMode)?t.floatingDeviceMode:[a.ProtoDeviceType.Desktop],Object(T.a)(e.closeButton)?this.floatingCloseButtonMode=e.closeButton:Object(T.a)(t.floatingCloseButtonMode)?this.floatingCloseButtonMode=t.floatingCloseButtonMode:this.floatingCloseButtonMode=a.ProtoPlayerCloseButtonMode.OnHover,this.floatingPosition=Object(T.a)(e.fixedPosition)?e.fixedPosition:t.floatingFixedPosition,this.floatingScrollPosition=Object(T.a)(e.scrollPosition)?e.scrollPosition:t.floatingScrollPosition,this.floatingWidth=Object(T.a)(e.floatingWidth)?e.floatingWidth:t.floatingWidth||x,this.floatingGutterX=Object(T.a)(e.floatingGutterX)?e.floatingGutterX:t.floatingGutterX,this.floatingGutterY=Object(T.a)(e.floatingGutterY)?e.floatingGutterY:t.floatingGutterY,this.pageElement=t.floatingPageElement,this.appendLocation=t.floatingAppendLocation,this.floatingYAxisPadding=t.floatingYAxisPadding,this.lD=this.floatingScrollPosition===a.ProtoPositionMode.BottomLeft||this.floatingScrollPosition===a.ProtoPositionMode.TopLeft,this.uD=this.floatingScrollPosition===a.ProtoPositionMode.BottomRight||this.floatingScrollPosition===a.ProtoPositionMode.TopRight,this.dD=this.floatingScrollPosition===a.ProtoPositionMode.TopLeft||this.floatingScrollPosition===a.ProtoPositionMode.TopRight,this.fD=this.floatingScrollPosition===a.ProtoPositionMode.BottomRight||this.floatingScrollPosition===a.ProtoPositionMode.BottomLeft,this.pD=new Ru(i)}get isPositionedLeft(){return this.lD}get isPositionedRight(){return this.uD}get isPositionedTop(){return this.dD}get isPositionedBottom(){return this.fD}set isPositionedLeft(t){this.lD=t}set isPositionedRight(t){this.uD=t}set isPositionedBottom(t){this.fD=t}get positionClass(){switch(this.floatingScrollPosition){case a.ProtoPositionMode.BottomLeft:return"bottom-left";case a.ProtoPositionMode.TopLeft:return"top-left";case a.ProtoPositionMode.TopRight:return"top-right";default:return"bottom-right"}}set width(t){this.floatingWidth=t}get width(){return this.floatingWidth}getHeight(t){return`${this.pD.getHeightByRatio(t)}px`}}function Du(t){return Object(T.f)(t)&&"[object RegExp]"!==Object.prototype.toString.call(t)&&"[object Date]"!==Object.prototype.toString.call(t)}function Fu(t){return Du(t)?$u({},t):t}function $u(t,i){return function(t,i){const e={};return Du(t)&&Object.keys(t).forEach(i=>{e[i]=Fu(t[i])}),Object.keys(i).forEach(s=>{Du(i[s])&&t[s]?e[s]=$u(t[s],i[s]):e[s]=Fu(i[s])}),e}(t,i)}!function(t){t[t.Normal=0]="Normal",t[t.Buzzfeed=1]="Buzzfeed"}(Pu||(Pu={}));class Uu{constructor(t,i,e,s,r,h,o,c,l,d,f=0){if(this.global=t,this.targetContainer=i,this.bD=e,this.Ro=s,this.secondLevelDomain=r,this.apiConfig=h,this.supplyChainSettings=c,this.isSeoTraffic=l,this.videoPosition=d,this.sharingDestinations=[],this.disableAdvertising=!1,this.adBreaks=[],this.disableClickUrl=!1,this.moatTrackingEnabled=!1,this.pauseAdWhenFinished=!1,this.loopAdWhenFinished=!1,Object(T.h)(e.initializationSettingsJson))try{const t=JSON.parse(e.initializationSettingsJson);this.apiConfig=$u(this.apiConfig,t)}catch(t){Object(n.a)({message:"invalid_init_json",exception:t.message,callStack:t.callStack,level:a.ProtoLoggingLevelEnum.FATAL})}(this.apiConfig.playerMode===Pu.Buzzfeed||this.apiConfig.settings.pauseAdWhenFinished)&&(this.pauseAdWhenFinished=!0),this.vD(this.bD.lineItems);const p=[];this.soundMode=Object(T.a)(this.apiConfig.settings.defaultSoundMode)?this.apiConfig.settings.defaultSoundMode:e.soundMode,this.playbackMode=Object(T.a)(this.apiConfig.settings.playbackMode)?this.apiConfig.settings.playbackMode:e.playbackMode,this.playbackMode===a.ProtoPlayerPlaybackModeEnum.ClickToPlay||this.soundMode===a.ProtoPlayerSoundMode.Mute||Object(at.b)()||(this.soundMode=a.ProtoPlayerSoundMode.Mute),this.html=e.html,this.css=e.css,this.floatingSettings=new Bu(e,f,this.apiConfig.settings.customization.floating),this.logoUrl=Object(T.h)(this.apiConfig.settings.customization.logoUrl)?this.apiConfig.settings.customization.logoUrl:e.logoUrl;const b=e.amazonTamSlotId;if(Object(T.h)(b)&&(this.amazonTamSlotId=b),Object(T.a)(this.apiConfig.settings.advertising.macros)&&(this.externalMacros=this.apiConfig.settings.advertising.macros),Object(T.a)(this.apiConfig.settings.disableAdvertising)&&(this.disableAdvertising=this.apiConfig.settings.disableAdvertising),this.mD(),this.gD(),Object(u.h)(this.apiConfig.settings.advertising.lineItems)){const t=e.lineItems.filter(t=>t.creativeType===a.ProtoCreativeTypeEnum.External);this.apiConfig.settings.advertising.lineItems.forEach(i=>{if(this.yD(i),o){const t=this.wD(),e=this.xD(i,t);p.push(e)}else t.forEach(t=>{if(i.id===t.advertiserLineItemId&&(i.url||i.headerBidderBids||i.externalMediaFile||i.externalHlsFile)){const e=this.xD(i,t);p.push(e)}})})}!0!==this.apiConfig.settings.advertising.blockConnatixDemand&&p.push(...e.lineItems.filter(t=>t.creativeType!==a.ProtoCreativeTypeEnum.External)),p.forEach(t=>{t.creativeType===a.ProtoCreativeTypeEnum.External&&(t.headerBidderBids&&"[]"!==t.headerBidderBids?t.creativeType=a.ProtoCreativeTypeEnum.HeaderBidder:t.externalMediaFile||t.externalHlsFile?t.creativeType=a.ProtoCreativeTypeEnum.MediaFile:t.creativeType=a.ProtoCreativeTypeEnum.ThirdParty)});const v=this.kD(p),m=Object(T.a)(this.apiConfig.settings.rendering.scrollHijackingProtection)?this.apiConfig.settings.rendering.scrollHijackingProtection:e.scrollHijackingProtection;this.lineItemSettings={lineItems:v,disableScrollHijackEnforcement:m},this.midRollNumber=Object(T.a)(this.apiConfig.settings.advertising.maxNumberOfMidRolls)?this.apiConfig.settings.advertising.maxNumberOfMidRolls:e.midRollNumber,this.adViewabilityPolicy=e.adViewabilityPolicy,this.preRollBreak=(Object(T.a)(this.apiConfig.settings.advertising.preRollBreak)?this.apiConfig.settings.advertising.preRollBreak:e.preRollBreak)*B.f,this.postRollBreak=(Object(T.a)(this.apiConfig.settings.advertising.postRollBreak)?this.apiConfig.settings.advertising.postRollBreak:e.postRollBreak)*B.f,this.playerId=e.playerId,this.floatingCloseButtonMode=this.floatingSettings.floatingCloseButtonMode,e.floatingMode===a.ProtoPlayerFloatingMode.Always?this.closeButtonMode=this.floatingCloseButtonMode:this.closeButtonMode=Object(T.a)(this.apiConfig.settings.customization.closeButtonMode)?this.apiConfig.settings.customization.closeButtonMode:e.closeButtonMode,this.isCloseButton=!!this.closeButtonMode||!!this.floatingCloseButtonMode,this.uiComponentsVisibility={casting:!1,expandButton:Object(T.a)(this.apiConfig.settings.customization.showExpandButton)?this.apiConfig.settings.customization.showExpandButton:e.expandButton},this.sharingDestinations=void 0,this.adPlaybackMode=e.adPlaybackMode,Object(T.a)(this.apiConfig.settings.disableClickUrl)&&(this.disableClickUrl=this.apiConfig.settings.disableClickUrl);const{skipAdAfter:g}=h.settings.advertising.skipAdSettings||{},{adSkippability:y}=h.settings.advertising.skipAdSettings||{};this.skipAdAfter=Object(T.a)(g)?g:e.skipAdAfter,this.adSkippability=Object(T.a)(y)?y:e.adSkippability;const{disableTracking:w}=h.settings._connatixInternals;(w||o||this.isSeoTraffic)&&(this.disableTracking=!0),this.sessionId=this.bD.sessionId,this.moatTrackingEnabled=this.lineItemSettings.lineItems.some(t=>t.moatTrackingEnabled)}SD(t,i){i.adTag=Object(T.a)(t.url)?t.url:i.adTag,i.requestCap=Object(T.a)(t.contentRequestCap)?t.contentRequestCap:i.requestCap,i.impressionCap=Object(T.a)(t.contentImpressionCap)?t.contentImpressionCap:i.impressionCap,i.viewability=Object(T.a)(t.viewability)?t.viewability:i.viewability,i.sound=Object(T.a)(t.sound)?t.sound:i.sound,i.ignoreFilledRequests=Object(T.a)(t.ignoreFilledRequests)?t.ignoreFilledRequests:i.ignoreFilledRequests,i.headerBidderBids=Object(T.a)(t.headerBidderBids)?t.headerBidderBids:i.headerBidderBids,i.headerBidderTimeout=Object(T.a)(t.headerBidderTimeout)?t.headerBidderTimeout:i.headerBidderTimeout,i.resetRequestsCapTime=Object(T.a)(t.resetRequestsCapTime)?t.resetRequestsCapTime:i.resetRequestsCapTime,i.resetImpressionsCapTime=Object(T.a)(t.resetImpressionsCapTime)?t.resetImpressionsCapTime:i.resetImpressionsCapTime,i.resetCapType=Object(T.a)(t.resetCapType)?t.resetCapType:i.resetCapType,i.timeBetweenRequests=Object(T.a)(t.timeBetweenRequests)?t.timeBetweenRequests:i.timeBetweenRequests,i.skipMode=Object(T.a)(t.skipMode)?t.skipMode:i.skipMode,i.floorPrice=Object(T.a)(t.floorPrice)?t.floorPrice:i.floorPrice,i.adBreakSettings=Object(T.a)(t.adBreakSettings)?t.adBreakSettings:i.adBreakSettings,i.pauseAdOutOfView=Object(T.a)(t.pauseAdOutOfView)?t.pauseAdOutOfView:i.pauseAdOutOfView}mD(){this.OD(this.apiConfig.settings.advertising.preRollBreak,a.ProtoAdBreakTypeEnum.PreRoll),this.OD(this.apiConfig.settings.advertising.postRollBreak,a.ProtoAdBreakTypeEnum.PostRoll),this.OD(this.apiConfig.settings.advertising.maxNumberOfMidRolls,a.ProtoAdBreakTypeEnum.MidRoll)}OD(t,i){const e=this._D(this.apiConfig.settings.advertising.adBreaks,i),s=this._D(this.bD.adBreaks,i),n={maxAdPodDuration:0,maxAdSlotDuration:0,numberOfAdSlots:1,types:[i]};e?this.adBreaks.push(e):!Object(T.a)(t)||e||s?!e&&s&&this.adBreaks.push(s):this.adBreaks.push(n)}_D(t,i){if(!t)return;let e;return t.forEach(t=>{t.types.includes(i)&&((e=Object.assign({},t)).types=[i])}),e}kD(t){const{adBreaks:i}=this;let e=t;const s=[];return i.forEach(t=>{t.types.forEach(i=>s.push(Object.assign(Object.assign({},t),{types:[i]})))}),s.forEach(t=>{e=this.removeCompatibleLineItems(t,e)}),t.filter(t=>!e.includes(t))}removeCompatibleLineItems(t,i){const e=t.types[0],s=t.numberOfAdSlots>1?a.ProtoLineItemAdBreakTypeEnum.AdPod:a.ProtoLineItemAdBreakTypeEnum.SingleAd;return i.filter(t=>!t.adBreakSettings.adBreakTargeting.some(t=>t.adRollType===e&&(t.adBreakTypeEnum===a.ProtoLineItemAdBreakTypeEnum.All||t.adBreakTypeEnum===s)))}vD(t){t.forEach(t=>{t.adBreakSettings||this.jD(t),this.yD(t)})}jD(t){t.adBreakSettings={adBreakTargeting:[{adRollType:a.ProtoAdBreakTypeEnum.PreRoll,adBreakTypeEnum:a.ProtoLineItemAdBreakTypeEnum.All},{adRollType:a.ProtoAdBreakTypeEnum.MidRoll,adBreakTypeEnum:a.ProtoLineItemAdBreakTypeEnum.All},{adRollType:a.ProtoAdBreakTypeEnum.PostRoll,adBreakTypeEnum:a.ProtoLineItemAdBreakTypeEnum.All}]}}yD(t){0===t.requestCap&&(t.requestCap=20)}gD(){this.adBreaks.forEach(t=>{t.maxAdSlotDuration*=B.f,t.maxAdPodDuration*=B.f,t.numberOfAdSlots<=1?t.maxAdPodDuration=0:t.maxAdSlotDuration>t.maxAdPodDuration&&(t.maxAdSlotDuration=t.maxAdPodDuration)})}xD(t,i){const e=Object.assign({},i);return this.SD(t,e),Object(T.a)(t.externalMediaFile)&&(e.externalMediaFile=t.externalMediaFile),Object(T.a)(t.externalHlsFile)&&(e.externalHlsFile=t.externalHlsFile),e.customCpm=t.cpm,e}wD(){return a.ProtoLineItem.toObject(a.ProtoLineItem.fromObject({}),{defaults:!0,arrays:!0,objects:!0})}}class Vu extends Uu{constructor(t,i,e,s,n,r,a,h,o,c,l){super(t,i,e,s,n,r,a,h,l,o,hs),this.global=t,this.targetContainer=i,this.bD=e,this.videoPosition=o,this.storyPosition=c,this.fontFamilySettings={},this.primaryColorList={},this.secondaryColorList={},this.accentColorList={},this.disableCTARendering=!1,this.disableStoryProgressBarRendering=!1,this.disableTitleRendering=!1,this.activeVersion=this.bD.activeVersion,this.storyId=this.bD.storyId,this.storyMetadata=this.apiConfig.settings.story,this.sdkVersion=this.apiConfig._appSettings.sdkVersion,this.minSlidesBeforeFirstAd=Object(T.a)(this.apiConfig.settings.advertising.slidesBeforeFirstAd)?this.apiConfig.settings.advertising.slidesBeforeFirstAd:this.bD.minSlidesBeforeFirstAd,this.slidesBetweenAds=Object(T.a)(this.apiConfig.settings.advertising.slidesBetweenAds)?this.apiConfig.settings.advertising.slidesBetweenAds:this.bD.slidesBetweenAds,this.bD.floatingMode===nn.ProtoPlayerFloatingMode.Always?this.orientation=nn.ProtoPlayerOrientationEnum.Landscape:this.orientation=Object(T.a)(this.apiConfig.settings.customization.orientation)?this.apiConfig.settings.customization.orientation:this.bD.orientation,this.orientationBreakpoint=Object(T.a)(this.apiConfig.settings.customization.orientationBreakpoint)?this.apiConfig.settings.customization.orientationBreakpoint:this.bD.orientationBreakpoint,Object(T.f)(this.apiConfig.settings.customization.fontFamilySettings)&&(this.fontFamilySettings=this.apiConfig.settings.customization.fontFamilySettings),this.AD(),this.ID(),this.TD(),this.CD(),this.PD(),this.MD(),this.useAccentColorForProgressBar=Object(T.a)(this.apiConfig.settings.customization.useAccentColorForProgressBar)?this.apiConfig.settings.customization.useAccentColorForProgressBar:this.bD.useAccentColorForProgressBar,this.endOfSlideCycleMode=Object(T.a)(this.apiConfig.settings.endOfSlideCycleMode)?this.apiConfig.settings.endOfSlideCycleMode:this.bD.endOfCycleMode,this.uiComponentsVisibility.expandButton=!1,this.disableCTARendering=Object(T.a)(this.apiConfig.settings.disableCTARendering)&&this.apiConfig.settings.disableCTARendering,this.disableStoryProgressBarRendering=Object(T.a)(this.apiConfig.settings.disableStoryProgressBarRendering)&&this.apiConfig.settings.disableStoryProgressBarRendering,this.disableTitleRendering=Object(T.a)(this.apiConfig.settings.disableTitleRendering)&&this.apiConfig.settings.disableTitleRendering,this.publisherName=Object(T.h)(this.apiConfig.settings.customization.publisherName)?this.apiConfig.settings.customization.publisherName:this.bD.publisherName}AD(){this.apiConfig.settings.customization.primaryColorList&&Object(T.h)(this.apiConfig.settings.customization.primaryColorList.background)?this.primaryColorList.background=this.apiConfig.settings.customization.primaryColorList.background:this.bD.primaryColorList&&Object(T.h)(this.bD.primaryColorList.background)&&(this.primaryColorList.background=this.bD.primaryColorList.background)}ID(){this.apiConfig.settings.customization.primaryColorList&&Object(T.h)(this.apiConfig.settings.customization.primaryColorList.foreground)?this.primaryColorList.foreground=this.apiConfig.settings.customization.primaryColorList.foreground:this.bD.primaryColorList&&Object(T.h)(this.bD.primaryColorList.foreground)&&(this.primaryColorList.foreground=this.bD.primaryColorList.foreground)}TD(){this.apiConfig.settings.customization.secondaryColorList&&Object(T.h)(this.apiConfig.settings.customization.secondaryColorList.background)?this.secondaryColorList.background=this.apiConfig.settings.customization.secondaryColorList.background:this.bD.secondaryColorList&&Object(T.h)(this.bD.secondaryColorList.background)&&(this.secondaryColorList.background=this.bD.secondaryColorList.background)}CD(){this.apiConfig.settings.customization.secondaryColorList&&Object(T.h)(this.apiConfig.settings.customization.secondaryColorList.foreground)?this.secondaryColorList.foreground=this.apiConfig.settings.customization.secondaryColorList.foreground:this.bD.secondaryColorList&&Object(T.h)(this.bD.secondaryColorList.foreground)&&(this.secondaryColorList.foreground=this.bD.secondaryColorList.foreground)}PD(){this.apiConfig.settings.customization.accentColorList&&Object(T.h)(this.apiConfig.settings.customization.accentColorList.background)?this.accentColorList.background=this.apiConfig.settings.customization.accentColorList.background:this.bD.accentColorList&&Object(T.h)(this.bD.accentColorList.background)&&(this.accentColorList.background=this.bD.accentColorList.background)}MD(){this.apiConfig.settings.customization.accentColorList&&Object(T.h)(this.apiConfig.settings.customization.accentColorList.foreground)?this.accentColorList.foreground=this.apiConfig.settings.customization.accentColorList.foreground:this.bD.accentColorList&&Object(T.h)(this.bD.accentColorList.foreground)&&(this.accentColorList.foreground=this.bD.accentColorList.foreground)}}function Nu(t,i){const e=t.toObject({},{defaults:!0,arrays:!0,objects:!0}),s=function(t){return t.toObject({},{defaults:!0,arrays:!0,objects:!0})}(i);return e.players.push(s),e.browser=a.Browser.toObject(a.Browser.fromObject({}),{defaults:!0,arrays:!0,objects:!0}),e.geoLocation=a.GeoLocation.toObject(a.GeoLocation.fromObject({}),{defaults:!0,arrays:!0,objects:!0}),e}var Hu=e(28);class qu extends Lu{constructor(t,i){super(),this.ue=t;try{this.po=new ju,this.ms()}catch(t){Object(n.a)({message:"omid_verification_client_error",exception:t.message,callStack:t.callStack,level:i?a.ProtoLoggingLevelEnum.FATAL:a.ProtoLoggingLevelEnum.INFO})}}subscribe(t,i){return this.po.on(t,i)}ms(){const t=this.ED();if(this.LD=new t,!this.LD.isSupported())throw new Error("omid_not_implemented");this.RD(),this.$b()}ED(){if(!this.ue.OmidVerificationClient)throw new Error("omid_verification_client_not_found");if(!this.ue.OmidVerificationClient[Hu.k])throw new Error("omid_verification_client_wrong_version");return this.ue.OmidVerificationClient[Hu.k]}RD(){this.LD.registerSessionObserver(t=>{t&&t.type===Hu.e.sessionError&&Object(n.a)({message:"omid_verification_client_session_error",exception:t.data.message,level:a.ProtoLoggingLevelEnum.WARNING})})}$b(){this.LD.addEventListener(Hu.e.geometryChange,t=>{try{const{percentageInView:i,reasons:e}=t.data.adView,s=[Hu.a.backgrounded,Hu.a.notFound].some(t=>e.includes(t));this.aD(s);const r=i/100;this.setViewableThreshold(r),this.po.trigger(C.d.OmidViewabilityThreshold,r)}catch(t){Object(n.a)({message:"omid_verification_client_geometry_change_error",exception:t.message,callStack:t.callStack,level:a.ProtoLoggingLevelEnum.FATAL,throttle:1})}})}}const zu={src:dt.a.endPoints.assets.css.playspace,id:"cnx-playspace-css"};class Wu extends h.a{Pn(){return zu}getDelegateHandler(){return{getCurrentVolume:()=>{return this.renderer.getApiMethods().getVolume()}}}getRendererInstance(t,i,e,s,n){return new Tu(this,t,i,e,s,n)}getViewabilityService(t,i,e=!1){return this.externalAttributes.settings.useExternalViewabilityService?new Lu:this.rs?new qu(window,this.Bs):new Eu(t.global,i,e)}getPlayerResponse(t,i){return new Promise((i,e)=>{th.a.sendProtoRequest({ProtoResponse:nn.ProtoPlayspaceResponse,ProtoRequest:nn.ProtoPlayspaceRequest,requestData:t,endpoint:dt.a.endPoints.api.story,withCredentials:!0,queryParams:{[ah.b]:gi.a.version},logError:!0}).then(t=>{window.parent.connatixDummy&&Object(hh.b)("connatixDummy",this.pageUrl)&&(t.players[0]=Object.assign(Object.assign({},t.players[0]),window.parent.connatixDummy)),i(t)}).catch(t=>{this.GLOBAL.cnxDummyResponse?i(this.GLOBAL.cnxDummyResponse):e(t)})})}getPlayerModel(t,i,e){return new Vu(t.insertWindow?t.insertWindow:this.GLOBAL,t.insertContainer,i.players[e],i.browser.device,i.secondLevelDomain,this.externalAttributes,this.isServerlessMode,i.supplyChain,this.queryParams.cnxVideoPosition,this.queryParams.cnxStoryPosition,i.isSeoTraffic||this.queryParams.cnxIsSeoTraffic)}getApiConfigEnums(){return yu}getApiConfigEvents(){return du}getSpecificRequestData(){const t={};return this.queryParams.cnxStoryId?t.forceStoryId=this.queryParams.cnxStoryId:this.externalAttributes.storyId&&(t.forceStoryId=this.externalAttributes.storyId),t}defaultInitFromProto(){return Nu(nn.ProtoPlayspaceResponse,nn.ProtoPlayspace)}Gs(){super.Gs(),this.externalAttributes.settings.story=void 0}}var Gu=e(36),Ju=e(12);class Qu{constructor(t=!1){this._debugLogging=t,this.BD="eventEmitted",this.po=new ju}subscribe(t){return this.po.on(this.BD,t)}unsubscribe(t){this.po.remove(this.BD,t)}emitSessionStart(t){const i={videoMetadata:t};this.DD({metadata:i,name:Ju.a.SessionStart})}emitContentComplete(){this.DD({name:Ju.a.ContentComplete})}emitSessionEnd(){this.DD({name:Ju.a.SessionEnd})}emitPlay(){this.DD({name:Ju.a.Play})}emitPause(){this.DD({name:Ju.a.Pause})}emitAdPlay(){this.DD({name:Ju.a.AdPlay})}emitAdPause(){this.DD({name:Ju.a.AdPause})}emitAdPlaying(){this.DD({name:Ju.a.AdPlaying})}emitAdPaused(){this.DD({name:Ju.a.AdPaused})}emitAdImpression(t,i){const e={adMetadata:t,customAdMetadata:i};this.DD({metadata:e,name:Ju.a.AdImpression})}emitAdComplete(){this.DD({name:Ju.a.AdComplete})}emitAdStopped(){this.DD({name:Ju.a.AdStopped})}emitAdBreakStart(t){const i={adBreakMetadata:t};this.DD({metadata:i,name:Ju.a.AdBreakStart})}emitAdBreakComplete(){this.DD({name:Ju.a.AdBreakComplete})}emitPlayerResized(t){const i={playerDimensionsMetadata:t};this.DD({metadata:i,name:Ju.a.PlayerResized})}emitOnEnterFullscreen(){this.DD({name:Ju.a.OnEnterFullscreen})}emitOnExitFullscreen(){this.DD({name:Ju.a.OnExitFullscreen})}emitOnPlayerCollapsed(){this.DD({name:Ju.a.PlayerCollapsed})}emitOnPlayerExpanded(){this.DD({name:Ju.a.PlayerExpanded})}emitAdError(){this.DD({name:Ju.a.AdError})}emitPlayError(){this.DD({name:Ju.a.PlayError})}emitRenderError(){this.DD({name:Ju.a.RenderError})}emitAdClickThru(){this.DD({name:Ju.a.AdClickThru})}emitAdInteraction(){this.DD({name:Ju.a.AdInteraction})}emitAdVideoStart(t){const i={adVideoStartMetadata:t};this.DD({metadata:i,name:Ju.a.AdVideoStart})}emitAdLoaded(t){const i={adLoadedMetadata:t};this.DD({metadata:i,name:Ju.a.AdLoaded})}emitAdStateChange(t){const i={adStateChangedMetadata:t};this.DD({metadata:i,name:Ju.a.AdStateChange})}emitAdVideoFirstQuartile(){this.DD({name:Ju.a.AdVideoFirstQuartile})}emitAdVideoMidpoint(){this.DD({name:Ju.a.AdVideoMidpoint})}emitAdVideoThirdQuartile(){this.DD({name:Ju.a.AdVideoThirdQuartile})}emitAdVideoComplete(){this.DD({name:Ju.a.AdVideoComplete})}emitVolumeChange(t){this.DD({name:Ju.a.VolumeChange,metadata:{volume:t}})}emitAdVolumeChange(){this.DD({name:Ju.a.AdVolumeChange})}emitAdSkipped(){this.DD({name:Ju.a.AdSkipped})}DD(t){this._debugLogging&&console.log("Connatix Player Elements debugging: ",t),this.po.trigger(this.BD,t)}destroy(){this.DD({name:Ju.a.Destroy}),this.po.removeAll()}}const Xu=window.parent,Yu=[];window.addEventListener("unload",function(t){Yu.forEach(t=>t.destroy())});const Ku=Object(at.f)(Xu).topFrame;Gu.a.abServiceType=Gu.b.PlayspaceABService;const Zu=function(t,i,e){var s,h;const o=Object(T.h)(t._appSettings.bundleID),c=Object(T.h)(t._appSettings.sdkVersion);if(c){const i=parseInt(t._appSettings.sdkVersion.substr(0,1),10);t.settings.useExternalViewabilityService=!(i>=3)}const{cmp:l,tcf:u,usPrivacyString:d,deviceID:f}=t._appSettings,p=((t,i)=>i.AMP_CONTEXT_DATA||t.settings.implementationType===a.ProtoImplementationType.Amp)(t,Xu),b={UserManagerService:new r.b(Xu,o,p,{cmp:l,tcf:u,usPrivacyString:d,deviceID:f}),EventsStorageService:new Qu(t.settings.plugins._debugLogging)},v=new Wu(b,Xu,o,p,c,e);Yu.push(v);const m=function(){Object(at.k)(()=>new Promise((t,i)=>{if(Object(j.m)(zu.id,Ku))return t();Object(j.B)(zu,Ku.document.head,Ku,()=>t(),t=>i(t))})).then(()=>(Object(j.V)(Xu),v.updateQueryParams(),void(v.loadScriptTag(t,i)&&v.insertRenderer()))).catch(t=>Object(n.a)({message:"Loader_add_css_link",exception:t,level:a.ProtoLoggingLevelEnum.INFO}))};o?m():v.findPageUrl(Xu,null===(h=null===(s=t)||void 0===s?void 0:s.settings)||void 0===h?void 0:h.ampUrl).then(()=>m()).catch(t=>{Object(n.a)({message:"Playspace_main_init",exception:t.message,callStack:t.stack,level:a.ProtoLoggingLevelEnum.FATAL}),v.registerApiError()})},td=t=>{var i,e,s,n,r;const a=Object.assign({},t),h=null===(i=a._appSettings)||void 0===i?void 0:i.cmp;(Object(T.h)(null===(e=a._appSettings)||void 0===e?void 0:e.gdprConsentString)||Object(T.h)(null===(s=a._appSettings)||void 0===s?void 0:s.gdprParsedVendorString))&&(a._appSettings.cmp={consentString:Object(T.h)(null===(n=h)||void 0===n?void 0:n.consentString)?h.consentString:a._appSettings.gdprConsentString,parsedVendorConsents:Object(T.h)(null===(r=h)||void 0===r?void 0:r.parsedVendorConsents)?h.parsedVendorConsents:a._appSettings.gdprParsedVendorString});const o=Object.assign({},Oi(Object.assign({},a._appSettings.cmp))),c=Object.assign({},Oi(Object.assign({},a._appSettings.tcf))),{usPrivacyString:l,deviceID:u,appPageURL:d}=Oi({usPrivacyString:a._appSettings.usPrivacyString,deviceID:a._appSettings.deviceID,appPageURL:a._appSettings.appPageURL});return a._appSettings=Object.assign(Object.assign({},a._appSettings),{cmp:o,tcf:c,usPrivacyString:l,deviceID:u,appPageURL:d}),a};!function(){if(-1!==navigator.userAgent.toLowerCase().indexOf("msie"))return;let t=[];Xu.cnxps&&(t=Xu.cnxps.cmd),Xu.cnxps=function(){function t(t){var i,e;t.settings=t.settings||{},t._appSettings=t._appSettings||{},t._appSettings.cmp=t._appSettings.cmp||{},t._appSettings.tcf=t._appSettings.tcf||{},t.settings.customization=t.settings.customization||{},t.settings.rendering=t.settings.rendering||{},t.settings.advertising=t.settings.advertising||{},t.settings._connatixInternals=t.settings._connatixInternals||{},t.settings.plugins=t.settings.plugins||{},t.settings.advertising.skipAdSettings=t.settings.advertising.skipAdSettings||{};return["602660809","com.thomsonreuters.reuters","12345","com.cnx.androidsdkapp"].includes(null===(e=null===(i=t)||void 0===i?void 0:i._appSettings)||void 0===e?void 0:e.bundleID)&&Object(n.a)({level:a.ProtoLoggingLevelEnum.INFO,message:"CNX_REUTERS_APPSETTINGS",exception:JSON.stringify(t._appSettings)}),t=td(t),{render:function(i,e){Zu(t,i,e)}}}return t.cmd={push:function(t){t()}},t.configEnums=yu,t.configEvents=du,t}(),t.forEach(t=>t())}()}]);