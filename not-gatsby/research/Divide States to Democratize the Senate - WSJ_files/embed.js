var Coral=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:false,exports:{}};e[r].call(i.exports,i,i.exports,n);i.l=true;return i.exports}n.m=e;n.c=t;n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:false,enumerable:true,get:r})};n.n=function(e){var t=e&&e.__esModule?function t(){return e["default"]}:function t(){return e};n.d(t,"a",t);return t};n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};n.p="";return n(n.s="multi /usr/src/app/client/coral-embed/src/index")}({"./client/coral-embed/src/Bridge.js":function(e,t,n){"use strict";n.d(t,"a",function(){return x});var r=n("./node_modules/querystringify/index.js");var i=n.n(r);var s=n("./node_modules/@ungap/url-search-params/esm/index.js");var o=n("./node_modules/pym.js/dist/pym.v1.js");var a=n.n(o);var l=n("./node_modules/eventemitter2/lib/eventemitter2.js");var c=n.n(l);var u=n("./client/coral-framework/utils/url.js");var h=n("./client/coral-embed/src/SnackBar.js");var f=n("./client/coral-embed/src/onIntersect.js");var d=n("./client/coral-framework/services/storage.js");var p=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;"value"in r&&(r.writable=true);Object.defineProperty(e,r.key,r)}}return function(t,n,r){n&&e(t.prototype,n);r&&e(t,r);return t}}();var m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function v(e,t){var n={};for(var r in e){if(t.indexOf(r)>=0)continue;if(!Object.prototype.hasOwnProperty.call(e,r))continue;n[r]=e[r]}return n}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}window.location.origin||(window.location.origin=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:""));var y=200;function b(e){return e.match(/\/$/)?e:e+"/"}function w(e,t){var n=e+"embed/stream?";n+=i.a.stringify(t);return n}function _(){try{return document.querySelector('link[rel="canonical"]').href}catch(e){window.console.warn("This page does not include a canonical link tag. Talk has inferred this asset_url from the window object. Query params have been stripped, which may cause a single thread to be present across multiple pages.");return window.location.origin+window.location.pathname}}function k(e){var t=e.asset_id,n=e.asset_url;var r={};var i=new s["a"](window.location.search);var o=i.get("commentId")||i.get("commentID");o&&(r.comment_id=o);t&&(r.asset_id=t);r.asset_url=n||_();return r}function I(){var e=window;var t="inner";if(!("innerWidth"in window)){t="client";e=document.documentElement||document.body}return{width:e[t+"Width"],height:e[t+"Height"]}}function E(e){var t=m({},e);var n=window.location.hash.length&&window.location.hash.substr(1);if(n){var r=i.a.parse(n);r.asset_url&&!t.asset_url&&(t.asset_url=r.asset_url);r.asset_id&&!t.asset_id&&(t.asset_id=r.asset_id)}return t}var x=function(){function e(t,n){var r=this;var i=n.talk,s=n.talkStaticUrl,o=void 0===s?i:s,a=n.events,l=void 0===a?null:a,u=n.snackBarStyles,d=void 0===u?null:u,p=n.onAuthChanged,m=void 0===p?null:p,y=n.lazy,w=void 0!==y&&y,_=n.amp,I=v(n,["talk","talkStaticUrl","events","snackBarStyles","onAuthChanged","lazy","amp"]);g(this,e);this.pym=null;this.element=t;this.amp=_;this.lazy=!_&&w;this.opts=_?E(I):I;this.query=k(this.opts);this.emitter=new c.a({wildcard:true});this.snackBar=_?null:new h["a"](d||{});this.onAuthChanged=m;this.talkBaseUrl=b(i);this.talkStaticUrl=b(o);this.queued=[];l&&l(this.emitter);this.lazy?Object(f["a"])(this.element,function(){return r.load()}):this.load()}p(e,[{key:"ensureRendered",value:function e(){if(null===this.pym)throw new Error("Stream Embed must be rendered first")}},{key:"queueWhenRendered",value:function e(t){null!==this.queued?this.queued.push(t):t()}},{key:"setupPym",value:function e(){var t=this;var n=w(this.talkBaseUrl,this.query);this.pym=new a.a.Parent(this.element.id,n,{title:this.opts.title,id:this.element.id+"_iframe",name:this.element.id+"_iframe"});this.pym.el.firstChild.style.width="1px";this.pym.el.firstChild.style.minWidth="100%";var r=void 0;this.pym.onMessage("height",function(e){if(e!==r){t.pym.el.firstChild.style.height=e+"px";r=e;t.amp&&window.parent.postMessage({sentinel:"amp",type:"embed-size",height:e},"*")}});this.pym.onMessage("getConfig",function(){t.pym.sendMessage("config",JSON.stringify(t.opts))});this.onAuthChanged&&this.pym.onMessage("coral-auth-changed",function(e){t.onAuthChanged(e?JSON.parse(e):null)});this.pym.onMessage("coral-view-all-comments",function(){var e=i.a.parse(location.search);delete e.commentId;delete e.commentID;var t=i.a.stringify(e);window.history.replaceState({},document.title,Object(u["a"])(m({},location,{search:t})))});this.pym.onMessage("coral-view-comment",function(e){var t=i.a.stringify(m({},i.a.parse(location.search),{commentId:e}));window.history.replaceState({},document.title,Object(u["a"])(m({},location,{search:t})))});this.pym.onMessage("getPosition",function(){var e=I(),n=e.height;var r=n+document.body.scrollTop;r>y&&(r-=y);t.pym.sendMessage("position",r)});this.pym.onMessage("navigate",function(e){var t=window.open(e,"_blank");t.opener=null;t.focus()});this.pym.onMessage("event",function(e){var n=JSON.parse(e),r=n.eventName,i=n.value;t.emitter.emit(r,i)})}},{key:"load",value:function e(){var t=this;if(null!==this.pym)throw new Error("Stream Embed already rendered");this.setupPym();this.snackBar&&this.snackBar.attach(window.document.body,this.pym);document.addEventListener("click",this.handleClick.bind(this),true);["local","session"].forEach(function(e){Object(d["a"])(Object(d["b"])(e+"Storage"),t.pym,e+"Storage")});var n=this.queued;this.queued=null;n.forEach(function(e){return e()})}},{key:"handleClick",value:function e(){this.pym.sendMessage("click")}},{key:"enablePluginsDebug",value:function e(){this.pym.sendMessage("enablePluginsDebug")}},{key:"disablePluginsDebug",value:function e(){this.pym.sendMessage("disablePluginsDebug")}},{key:"login",value:function e(t){this.pym.sendMessage("login",t)}},{key:"logout",value:function e(){this.pym.sendMessage("logout")}},{key:"remove",value:function e(){document.removeEventListener("click",this.handleClick.bind(this));this.emitter.removeAllListeners();if(this.snackBar){this.snackBar.remove();this.snackBar=null}this.pym.remove();this.pym=null}}]);return e}()},"./client/coral-embed/src/SnackBar.js":function(e,t,n){"use strict";n.d(t,"a",function(){return l});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;"value"in r&&(r.writable=true);Object.defineProperty(e,r.key,r)}}return function(t,n,r){n&&e(t.prototype,n);r&&e(t,r);return t}}();function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o={position:"fixed",cursor:"default",userSelect:"none",backgroundColor:"#323232",zIndex:3,willChange:"transform, opacity",transition:"transform .35s cubic-bezier(.55,0,.1,1), opacity .35s",pointerEvents:"none",padding:"12px 18px 0",color:"#fff",borderRadius:"4px",maxWidth:"400px",left:"50%",opacity:0,transform:"translate(-50%, 20px)",bottom:"20px",boxSizing:"border-box",fontFamily:'Helvetica, "Helvetica Neue", Verdana, sans-serif',display:"flex"};var a={fontSize:"20px",cursor:"pointer",marginLeft:"10px",position:"relative",top:"-4px"};var l=function(){function e(){var t=this;var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};s(this,e);this.timeout=null;this.el=document.createElement("div");this.el.id="coral-notif";var i=document.createElement("div");i.className="coral-notif-close";for(var l in a)i.style[l]=a[l];i.textContent="Ã—";i.onclick=function(){return t.clear()};this.snackbarText=document.createElement("div");this.snackbarText.className="coral-notif-text";this.snackbarText.style.paddingBottom="12px";this.el.appendChild(this.snackbarText);this.el.appendChild(i);var c=r({},o,n);for(var u in c)this.el.style[u]=c[u]}i(e,[{key:"clear",value:function e(){this.el.style.opacity=0;this.el.style.pointerEvents="none"}},{key:"alert",value:function e(t){var n=this;var r=JSON.parse(t),i=r.type,s=r.text;this.el.style.transform="translate(-50%, 20px)";this.el.style.opacity=0;this.el.className="coral-notif-"+i;this.snackbarText.textContent=s;this.timeout&&clearTimeout(this.timeout);this.timeout=setTimeout(function(){n.el.style.transform="translate(-50%, 0)";n.el.style.opacity=1;n.el.style.pointerEvents="auto";n.timeout=setTimeout(function(){n.el.style.opacity=0;n.el.style.pointerEvents="none"},15e3)},0)}},{key:"attach",value:function e(t,n){t.appendChild(this.el);n.onMessage("coral-clear-notification",this.clear.bind(this));n.onMessage("coral-alert",this.alert.bind(this))}},{key:"remove",value:function e(){this.el.remove()}}]);return e}()},"./client/coral-embed/src/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});n.d(t,"Talk",function(){return u});var r=n("./node_modules/intersection-observer/intersection-observer.js");var i=n.n(r);var s=n("./client/coral-embed/src/Bridge.js");var o=n("./client/coral-embed/src/wrapBridge.js");var a="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function l(e){if(!e)throw new Error("Please provide Coral.Talk.render() the HTMLElement you want to render Talk in.");if("object"!==("undefined"===typeof e?"undefined":a(e)))throw new Error("Coral.Talk.render() expected HTMLElement but got "+e+" ("+("undefined"===typeof e?"undefined":a(e))+")");e.id||(e.id="_"+Math.random())}function c(e){if(!e||"object"!==("undefined"===typeof e?"undefined":a(e))||!e.talk)throw new Error("Coral.Talk.render() expected configuration with at least opts.talk as the Talk Base URL, none found")}var u={render:function e(t,n){l(t);c(n);return Object(o["a"])(new s["a"](t,n))}}},"./client/coral-embed/src/onIntersect.js":function(e,t,n){"use strict";t["a"]=r;function r(e,t){if(!IntersectionObserver){window.console.warn("IntersectionObserver not available, rendering now");t();return}var n=new IntersectionObserver(function(e){if(e[0].isIntersecting){n.disconnect();t()}},{rootMargin:"100px",threshold:1});n.observe(e)}},"./client/coral-embed/src/wrapBridge.js":function(e,t,n){"use strict";t["a"]=function(e){var t=function t(n){return e.queueWhenRendered(n)};var n=function t(n){e.ensureRendered();n()};return{on:function t(n,r){return e.emitter.on(n,r)},off:function t(n,r){return e.emitter.off(n,r)},login:function n(r){return t(function(){return e.login(r)})},logout:function n(){return t(function(){return e.logout()})},remove:function t(){return n(function(){return e.remove()})},enablePluginsDebug:function n(){return t(function(){return e.enablePluginsDebug()})},disablePluginsDebug:function n(){return t(function(){return e.disablePluginsDebug()})}}}},"./client/coral-framework/services/storage.js":function(e,t,n){"use strict";t["b"]=u;t["a"]=f;var r=n("./node_modules/uuid/v4.js");var i=n.n(r);var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;"value"in r&&(r.writable=true);Object.defineProperty(e,r.key,r)}}return function(t,n,r){n&&e(t.prototype,n);r&&e(t,r);return t}}();function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e){var t="__storage_test__";var n=String(Date.now());e.setItem(t,n);var r=n===e.getItem(t);e.removeItem(t);if(!r)throw new Error("Storage access test failed")}var l=function(){function e(){o(this,e);this.storage={}}s(e,[{key:"key",value:function e(t){if(this.length<=t)return;return this.storage[Object.keys(this.storage)[t]]}},{key:"getItem",value:function e(t){return this.storage[t]}},{key:"setItem",value:function e(t,n){this.storage[t]=n;try{a(sessionStorage);sessionStorage.setItem(t,n);void 0}catch(e){void 0}}},{key:"removeItem",value:function e(t){delete this.storage[t];try{a(sessionStorage);sessionStorage.removeItem(t);void 0}catch(e){void 0}}},{key:"length",get:function e(){return Object.keys(this.storage).length}}]);return e}();function c(e){try{var t=window[e];a(t);return t}catch(t){if("sessionStorage"!==e){void 0;return c("sessionStorage")}void 0}return new l}function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"localStorage";return c(e)}function h(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"localStorage";var n={};var r=function r(s,o){var a=i()();return new Promise(function(r,i){n[a]={resolve:r,reject:i};e.sendMessage("pymStorage."+t+".request",JSON.stringify({id:a,method:s,parameters:o}))})};e.onMessage("pymStorage."+t+".response",function(e){var t=JSON.parse(e),r=t.id,i=t.result;n[r].resolve(i);delete n[r]});e.onMessage("pymStorage."+t+".error",function(e){var t=JSON.parse(e),r=t.id,i=t.error;n[r].reject(i);delete n[r]});return{setItem:function e(t,n){return r("setItem",{key:t,value:n})},getItem:function e(t,n){return r("getItem",{key:t,value:n})},removeItem:function e(t){return r("removeItem",{key:t})}}}function f(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"localStorage";var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"talkPymStorage:";t.onMessage("pymStorage."+n+".request",function(i){var s=JSON.parse(i),o=s.id,a=s.method,l=s.parameters;var c=l.key,u=l.value;var h=""+r+c;var f=void 0;var d=function e(r){void 0;t.sendMessage("pymStorage."+n+".error",JSON.stringify({id:o,error:r}))};try{switch(a){case"setItem":f=e.setItem(h,u);break;case"getItem":f=e.getItem(h);break;case"removeItem":f=e.removeItem(h);break;default:d("Unknown method "+a);return}}catch(e){d(e.toString());return}t.sendMessage("pymStorage."+n+".response",JSON.stringify({id:o,result:f}))})}},"./client/coral-framework/utils/url.js":function(e,t,n){"use strict";t["a"]=s;var r=n("./node_modules/url-parse/index.js");var i=n.n(r);function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.location,t=e.protocol,n=e.hostname,r=e.port,i=e.pathname,s=e.search,o=e.hash;s&&"?"!==s[0]?s="?"+s:"?"===s&&(s="");return t+"//"+n+(r?":"+r:"")+i+s+o}function o(e,t){var n=i()(e,true);n.query.commentId=t;n.set("query",n.query);return n.href}},"./node_modules/@ungap/url-search-params/esm/index.js":function(e,t,n){"use strict";
/*! (c) Andrea Giammarchi - ISC */var r=this||{};try{(function(e,t){if(new e("q=%2B").get("q")!==t||new e({q:t}).get("q")!==t||new e([["q",t]]).get("q")!==t||"q=%0A"!==new e("q=\n").toString()||"q=+%26"!==new e({q:" &"}).toString())throw e;r.URLSearchParams=e})(URLSearchParams,"+")}catch(e){(function(e,t,n){var i=e.create;var s=e.defineProperty;var o=/[!'\(\)~]|%20|%00/g;var a=/\+/g;var l={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};var c={append:function(e,t){d(this._ungap,e,t)},delete:function(e){delete this._ungap[e]},get:function(e){return this.has(e)?this._ungap[e][0]:null},getAll:function(e){return this.has(e)?this._ungap[e].slice(0):[]},has:function(e){return e in this._ungap},set:function(e,n){this._ungap[e]=[t(n)]},forEach:function(e,n){var r=this;for(var i in r._ungap)r._ungap[i].forEach(s,i);function s(s){e.call(n,s,t(i),r)}},toJSON:function(){return{}},toString:function(){var e=[];for(var t in this._ungap){var n=m(t);for(var r=0,i=this._ungap[t];r<i.length;r++)e.push(n+"="+m(i[r]))}return e.join("&")}};for(var u in c)s(h.prototype,u,{configurable:true,writable:true,value:c[u]});r.URLSearchParams=h;function h(e){var t=i(null);s(this,"_ungap",{value:t});switch(true){case!e:break;case"string"===typeof e:"?"===e.charAt(0)&&(e=e.slice(1));for(var r=e.split("&"),o=0,a=r.length;o<a;o++){var l=r[o];var c=l.indexOf("=");-1<c?d(t,p(l.slice(0,c)),p(l.slice(c+1))):l.length&&d(t,p(l),"")}break;case n(e):for(var o=0,a=e.length;o<a;o++){var l=e[o];d(t,l[0],l[1])}break;case"forEach"in e:e.forEach(f,t);break;default:for(var u in e)d(t,u,e[u])}}function f(e,t){d(this,t,e)}function d(e,t,r){var i=n(r)?r.join(","):r;t in e?e[t].push(i):e[t]=[i]}function p(e){return decodeURIComponent(e.replace(a," "))}function m(e){return encodeURIComponent(e).replace(o,v)}function v(e){return l[e]}})(Object,String,Array.isArray)}(function(e){var t=false;try{t=!!Symbol.iterator}catch(e){}"forEach"in e||(e.forEach=function e(t,n){var r=this;var i=Object.create(null);this.toString().replace(/=[\s\S]*?(?:&|$)/g,"=").split("=").forEach(function(e){if(!e.length||e in i)return;(i[e]=r.getAll(e)).forEach(function(i){t.call(n,i,e,r)})})});"keys"in e||(e.keys=function e(){return n(this,function(e,t){this.push(t)})});"values"in e||(e.values=function e(){return n(this,function(e,t){this.push(e)})});"entries"in e||(e.entries=function e(){return n(this,function(e,t){this.push([t,e])})});!t||Symbol.iterator in e||(e[Symbol.iterator]=e.entries);"sort"in e||(e.sort=function e(){var t=this.entries(),n=t.next(),r=n.done,i=[],s=Object.create(null),o,a,l;while(!r){l=n.value;a=l[0];i.push(a);a in s||(s[a]=[]);s[a].push(l[1]);n=t.next();r=n.done}i.sort();for(o=0;o<i.length;o++)this.delete(i[o]);for(o=0;o<i.length;o++){a=i[o];this.append(a,s[a].shift())}});function n(e,n){var r=[];e.forEach(n,r);return t?r[Symbol.iterator]():{next:function(){var e=r.shift();return{done:void 0===e,value:e}}}}(function(t){var n=t.defineProperty,r=t.getOwnPropertyDescriptor,i=function(t){function r(n,r){e.append.call(this,n,r);n=this.toString();t.set.call(this._usp,n?"?"+n:"")}function i(n){e.delete.call(this,n);n=this.toString();t.set.call(this._usp,n?"?"+n:"")}function s(n,r){e.set.call(this,n,r);n=this.toString();t.set.call(this._usp,n?"?"+n:"")}return function(e,t){e.append=r;e.delete=i;e.set=s;return n(e,"_usp",{configurable:true,writable:true,value:t})}},s=function(e){return function(t,r){n(t,"_searchParams",{configurable:true,writable:true,value:e(r,t)});return r}},o=function(t){var n=t.append;t.append=e.append;URLSearchParams.call(t,t._usp.search.slice(1));t.append=n},a=function(e,t){if(!(e instanceof t))throw new TypeError("'searchParams' accessed on an object that does not implement interface "+t.name)},l=function(e){var n=e.prototype,l=r(n,"searchParams"),c=r(n,"href"),u=r(n,"search"),h;if(!l&&u&&u.set){h=s(i(u));t.defineProperties(n,{href:{get:function(){return c.get.call(this)},set:function(e){var t=this._searchParams;c.set.call(this,e);t&&o(t)}},search:{get:function(){return u.get.call(this)},set:function(e){var t=this._searchParams;u.set.call(this,e);t&&o(t)}},searchParams:{get:function(){a(this,e);return this._searchParams||h(this,new URLSearchParams(this.search.slice(1)))},set:function(t){a(this,e);h(this,t)}}})}};try{l(HTMLAnchorElement);/^function|object$/.test(typeof URL)&&URL.prototype&&l(URL)}catch(e){}})(Object)})(r.URLSearchParams.prototype,Object);t["a"]=r.URLSearchParams},"./node_modules/eventemitter2/lib/eventemitter2.js":function(e,t,n){(function(r){var i;
/*!
 * EventEmitter2
 * https://github.com/hij1nx/EventEmitter2
 *
 * Copyright (c) 2013 hij1nx
 * Licensed under the MIT license.
 */!function(s){var o=Array.isArray?Array.isArray:function e(t){return"[object Array]"===Object.prototype.toString.call(t)};var a=10;function l(){this._events={};this._conf&&c.call(this,this._conf)}function c(e){if(e){this._conf=e;e.delimiter&&(this.delimiter=e.delimiter);this._maxListeners=e.maxListeners!==s?e.maxListeners:a;e.wildcard&&(this.wildcard=e.wildcard);e.newListener&&(this.newListener=e.newListener);e.verboseMemoryLeak&&(this.verboseMemoryLeak=e.verboseMemoryLeak);this.wildcard&&(this.listenerTree={})}else this._maxListeners=a}function u(e,t){var n="(node) warning: possible EventEmitter memory leak detected. "+e+" listeners added. Use emitter.setMaxListeners() to increase limit.";this.verboseMemoryLeak&&(n+=" Event name: "+t+".");if("undefined"!==typeof r&&r.emitWarning){var i=new Error(n);i.name="MaxListenersExceededWarning";i.emitter=this;i.count=e;r.emitWarning(i)}else{void 0;console.trace&&void 0}}function h(e){this._events={};this.newListener=false;this.verboseMemoryLeak=false;c.call(this,e)}h.EventEmitter2=h;function f(e,t,n,r){if(!n)return[];var i=[],s,o,a,l,c,u,h,d=t.length,p=t[r],m=t[r+1];if(r===d&&n._listeners){if("function"===typeof n._listeners){e&&e.push(n._listeners);return[n]}for(s=0,o=n._listeners.length;s<o;s++)e&&e.push(n._listeners[s]);return[n]}if("*"===p||"**"===p||n[p]){if("*"===p){for(a in n)"_listeners"!==a&&n.hasOwnProperty(a)&&(i=i.concat(f(e,t,n[a],r+1)));return i}if("**"===p){h=r+1===d||r+2===d&&"*"===m;h&&n._listeners&&(i=i.concat(f(e,t,n,d)));for(a in n)if("_listeners"!==a&&n.hasOwnProperty(a))if("*"===a||"**"===a){n[a]._listeners&&!h&&(i=i.concat(f(e,t,n[a],d)));i=i.concat(f(e,t,n[a],r))}else i=a===m?i.concat(f(e,t,n[a],r+2)):i.concat(f(e,t,n[a],r));return i}i=i.concat(f(e,t,n[p],r+1))}l=n["*"];l&&f(e,t,l,r+1);c=n["**"];if(c)if(r<d){c._listeners&&f(e,t,c,d);for(a in c)if("_listeners"!==a&&c.hasOwnProperty(a))if(a===m)f(e,t,c[a],r+2);else if(a===p)f(e,t,c[a],r+1);else{u={};u[a]=c[a];f(e,t,{"**":u},r+1)}}else c._listeners?f(e,t,c,d):c["*"]&&c["*"]._listeners&&f(e,t,c["*"],d);return i}function d(e,t){e="string"===typeof e?e.split(this.delimiter):e.slice();for(var n=0,r=e.length;n+1<r;n++)if("**"===e[n]&&"**"===e[n+1])return;var i=this.listenerTree;var o=e.shift();while(o!==s){i[o]||(i[o]={});i=i[o];if(0===e.length){if(i._listeners){"function"===typeof i._listeners&&(i._listeners=[i._listeners]);i._listeners.push(t);if(!i._listeners.warned&&this._maxListeners>0&&i._listeners.length>this._maxListeners){i._listeners.warned=true;u.call(this,i._listeners.length,o)}}else i._listeners=t;return true}o=e.shift()}return true}h.prototype.delimiter=".";h.prototype.setMaxListeners=function(e){if(e!==s){this._maxListeners=e;this._conf||(this._conf={});this._conf.maxListeners=e}};h.prototype.event="";h.prototype.once=function(e,t){return this._once(e,t,false)};h.prototype.prependOnceListener=function(e,t){return this._once(e,t,true)};h.prototype._once=function(e,t,n){this._many(e,1,t,n);return this};h.prototype.many=function(e,t,n){return this._many(e,t,n,false)};h.prototype.prependMany=function(e,t,n){return this._many(e,t,n,true)};h.prototype._many=function(e,t,n,r){var i=this;if("function"!==typeof n)throw new Error("many only accepts instances of Function");function s(){0===--t&&i.off(e,s);return n.apply(this,arguments)}s._origin=n;this._on(e,s,r);return i};h.prototype.emit=function(){this._events||l.call(this);var e=arguments[0];if("newListener"===e&&!this.newListener&&!this._events.newListener)return false;var t=arguments.length;var n,r,i,s;var o;if(this._all&&this._all.length){o=this._all.slice();if(t>3){n=new Array(t);for(s=0;s<t;s++)n[s]=arguments[s]}for(i=0,r=o.length;i<r;i++){this.event=e;switch(t){case 1:o[i].call(this,e);break;case 2:o[i].call(this,e,arguments[1]);break;case 3:o[i].call(this,e,arguments[1],arguments[2]);break;default:o[i].apply(this,n)}}}if(this.wildcard){o=[];var a="string"===typeof e?e.split(this.delimiter):e.slice();f.call(this,o,a,this.listenerTree,0)}else{o=this._events[e];if("function"===typeof o){this.event=e;switch(t){case 1:o.call(this);break;case 2:o.call(this,arguments[1]);break;case 3:o.call(this,arguments[1],arguments[2]);break;default:n=new Array(t-1);for(s=1;s<t;s++)n[s-1]=arguments[s];o.apply(this,n)}return true}o&&(o=o.slice())}if(o&&o.length){if(t>3){n=new Array(t-1);for(s=1;s<t;s++)n[s-1]=arguments[s]}for(i=0,r=o.length;i<r;i++){this.event=e;switch(t){case 1:o[i].call(this);break;case 2:o[i].call(this,arguments[1]);break;case 3:o[i].call(this,arguments[1],arguments[2]);break;default:o[i].apply(this,n)}}return true}if(!this._all&&"error"===e)throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");return!!this._all};h.prototype.emitAsync=function(){this._events||l.call(this);var e=arguments[0];if("newListener"===e&&!this.newListener&&!this._events.newListener)return Promise.resolve([false]);var t=[];var n=arguments.length;var r,i,s,o;var a;if(this._all){if(n>3){r=new Array(n);for(o=1;o<n;o++)r[o]=arguments[o]}for(s=0,i=this._all.length;s<i;s++){this.event=e;switch(n){case 1:t.push(this._all[s].call(this,e));break;case 2:t.push(this._all[s].call(this,e,arguments[1]));break;case 3:t.push(this._all[s].call(this,e,arguments[1],arguments[2]));break;default:t.push(this._all[s].apply(this,r))}}}if(this.wildcard){a=[];var c="string"===typeof e?e.split(this.delimiter):e.slice();f.call(this,a,c,this.listenerTree,0)}else a=this._events[e];if("function"===typeof a){this.event=e;switch(n){case 1:t.push(a.call(this));break;case 2:t.push(a.call(this,arguments[1]));break;case 3:t.push(a.call(this,arguments[1],arguments[2]));break;default:r=new Array(n-1);for(o=1;o<n;o++)r[o-1]=arguments[o];t.push(a.apply(this,r))}}else if(a&&a.length){a=a.slice();if(n>3){r=new Array(n-1);for(o=1;o<n;o++)r[o-1]=arguments[o]}for(s=0,i=a.length;s<i;s++){this.event=e;switch(n){case 1:t.push(a[s].call(this));break;case 2:t.push(a[s].call(this,arguments[1]));break;case 3:t.push(a[s].call(this,arguments[1],arguments[2]));break;default:t.push(a[s].apply(this,r))}}}else if(!this._all&&"error"===e)return arguments[1]instanceof Error?Promise.reject(arguments[1]):Promise.reject("Uncaught, unspecified 'error' event.");return Promise.all(t)};h.prototype.on=function(e,t){return this._on(e,t,false)};h.prototype.prependListener=function(e,t){return this._on(e,t,true)};h.prototype.onAny=function(e){return this._onAny(e,false)};h.prototype.prependAny=function(e){return this._onAny(e,true)};h.prototype.addListener=h.prototype.on;h.prototype._onAny=function(e,t){if("function"!==typeof e)throw new Error("onAny only accepts instances of Function");this._all||(this._all=[]);t?this._all.unshift(e):this._all.push(e);return this};h.prototype._on=function(e,t,n){if("function"===typeof e){this._onAny(e,t);return this}if("function"!==typeof t)throw new Error("on only accepts instances of Function");this._events||l.call(this);this.emit("newListener",e,t);if(this.wildcard){d.call(this,e,t);return this}if(this._events[e]){"function"===typeof this._events[e]&&(this._events[e]=[this._events[e]]);n?this._events[e].unshift(t):this._events[e].push(t);if(!this._events[e].warned&&this._maxListeners>0&&this._events[e].length>this._maxListeners){this._events[e].warned=true;u.call(this,this._events[e].length,e)}}else this._events[e]=t;return this};h.prototype.off=function(e,t){if("function"!==typeof t)throw new Error("removeListener only takes instances of Function");var n,r=[];if(this.wildcard){var i="string"===typeof e?e.split(this.delimiter):e.slice();r=f.call(this,null,i,this.listenerTree,0)}else{if(!this._events[e])return this;n=this._events[e];r.push({_listeners:n})}for(var a=0;a<r.length;a++){var l=r[a];n=l._listeners;if(o(n)){var c=-1;for(var u=0,h=n.length;u<h;u++)if(n[u]===t||n[u].listener&&n[u].listener===t||n[u]._origin&&n[u]._origin===t){c=u;break}if(c<0)continue;this.wildcard?l._listeners.splice(c,1):this._events[e].splice(c,1);0===n.length&&(this.wildcard?delete l._listeners:delete this._events[e]);this.emit("removeListener",e,t);return this}if(n===t||n.listener&&n.listener===t||n._origin&&n._origin===t){this.wildcard?delete l._listeners:delete this._events[e];this.emit("removeListener",e,t)}}function d(e){if(e===s)return;var t=Object.keys(e);for(var n in t){var r=t[n];var i=e[r];if(i instanceof Function||"object"!==typeof i||null===i)continue;Object.keys(i).length>0&&d(e[r]);0===Object.keys(i).length&&delete e[r]}}d(this.listenerTree);return this};h.prototype.offAny=function(e){var t=0,n=0,r;if(e&&this._all&&this._all.length>0){r=this._all;for(t=0,n=r.length;t<n;t++)if(e===r[t]){r.splice(t,1);this.emit("removeListenerAny",e);return this}}else{r=this._all;for(t=0,n=r.length;t<n;t++)this.emit("removeListenerAny",r[t]);this._all=[]}return this};h.prototype.removeListener=h.prototype.off;h.prototype.removeAllListeners=function(e){if(0===arguments.length){!this._events||l.call(this);return this}if(this.wildcard){var t="string"===typeof e?e.split(this.delimiter):e.slice();var n=f.call(this,null,t,this.listenerTree,0);for(var r=0;r<n.length;r++){var i=n[r];i._listeners=null}}else this._events&&(this._events[e]=null);return this};h.prototype.listeners=function(e){if(this.wildcard){var t=[];var n="string"===typeof e?e.split(this.delimiter):e.slice();f.call(this,t,n,this.listenerTree,0);return t}this._events||l.call(this);this._events[e]||(this._events[e]=[]);o(this._events[e])||(this._events[e]=[this._events[e]]);return this._events[e]};h.prototype.eventNames=function(){return Object.keys(this._events)};h.prototype.listenerCount=function(e){return this.listeners(e).length};h.prototype.listenersAny=function(){return this._all?this._all:[]};true;!(i=function(){return h}.call(t,n,t,e),i!==s&&(e.exports=i))}()}).call(t,n("./node_modules/process/browser.js"))},"./node_modules/intersection-observer/intersection-observer.js":function(e,t){(function(e,t){"use strict";if("IntersectionObserver"in e&&"IntersectionObserverEntry"in e&&"intersectionRatio"in e.IntersectionObserverEntry.prototype){"isIntersecting"in e.IntersectionObserverEntry.prototype||Object.defineProperty(e.IntersectionObserverEntry.prototype,"isIntersecting",{get:function(){return this.intersectionRatio>0}});return}var n=[];function r(e){this.time=e.time;this.target=e.target;this.rootBounds=e.rootBounds;this.boundingClientRect=e.boundingClientRect;this.intersectionRect=e.intersectionRect||h();this.isIntersecting=!!e.intersectionRect;var t=this.boundingClientRect;var n=t.width*t.height;var r=this.intersectionRect;var i=r.width*r.height;this.intersectionRatio=n?Number((i/n).toFixed(4)):this.isIntersecting?1:0}function i(e,t){var n=t||{};if("function"!=typeof e)throw new Error("callback must be a function");if(n.root&&1!=n.root.nodeType)throw new Error("root must be an Element");this._checkForIntersections=o(this._checkForIntersections.bind(this),this.THROTTLE_TIMEOUT);this._callback=e;this._observationTargets=[];this._queuedEntries=[];this._rootMarginValues=this._parseRootMargin(n.rootMargin);this.thresholds=this._initThresholds(n.threshold);this.root=n.root||null;this.rootMargin=this._rootMarginValues.map(function(e){return e.value+e.unit}).join(" ")}i.prototype.THROTTLE_TIMEOUT=100;i.prototype.POLL_INTERVAL=null;i.prototype.USE_MUTATION_OBSERVER=true;i.prototype.observe=function(e){var t=this._observationTargets.some(function(t){return t.element==e});if(t)return;if(!(e&&1==e.nodeType))throw new Error("target must be an Element");this._registerInstance();this._observationTargets.push({element:e,entry:null});this._monitorIntersections();this._checkForIntersections()};i.prototype.unobserve=function(e){this._observationTargets=this._observationTargets.filter(function(t){return t.element!=e});if(!this._observationTargets.length){this._unmonitorIntersections();this._unregisterInstance()}};i.prototype.disconnect=function(){this._observationTargets=[];this._unmonitorIntersections();this._unregisterInstance()};i.prototype.takeRecords=function(){var e=this._queuedEntries.slice();this._queuedEntries=[];return e};i.prototype._initThresholds=function(e){var t=e||[0];Array.isArray(t)||(t=[t]);return t.sort().filter(function(e,t,n){if("number"!=typeof e||isNaN(e)||e<0||e>1)throw new Error("threshold must be a number between 0 and 1 inclusively");return e!==n[t-1]})};i.prototype._parseRootMargin=function(e){var t=e||"0px";var n=t.split(/\s+/).map(function(e){var t=/^(-?\d*\.?\d+)(px|%)$/.exec(e);if(!t)throw new Error("rootMargin must be specified in pixels or percent");return{value:parseFloat(t[1]),unit:t[2]}});n[1]=n[1]||n[0];n[2]=n[2]||n[0];n[3]=n[3]||n[1];return n};i.prototype._monitorIntersections=function(){if(!this._monitoringIntersections){this._monitoringIntersections=true;if(this.POLL_INTERVAL)this._monitoringInterval=setInterval(this._checkForIntersections,this.POLL_INTERVAL);else{a(e,"resize",this._checkForIntersections,true);a(t,"scroll",this._checkForIntersections,true);if(this.USE_MUTATION_OBSERVER&&"MutationObserver"in e){this._domObserver=new MutationObserver(this._checkForIntersections);this._domObserver.observe(t,{attributes:true,childList:true,characterData:true,subtree:true})}}}};i.prototype._unmonitorIntersections=function(){if(this._monitoringIntersections){this._monitoringIntersections=false;clearInterval(this._monitoringInterval);this._monitoringInterval=null;l(e,"resize",this._checkForIntersections,true);l(t,"scroll",this._checkForIntersections,true);if(this._domObserver){this._domObserver.disconnect();this._domObserver=null}}};i.prototype._checkForIntersections=function(){var e=this._rootIsInDom();var t=e?this._getRootRect():h();this._observationTargets.forEach(function(n){var i=n.element;var o=u(i);var a=this._rootContainsTarget(i);var l=n.entry;var c=e&&a&&this._computeTargetAndRootIntersection(i,t);var h=n.entry=new r({time:s(),target:i,boundingClientRect:o,rootBounds:t,intersectionRect:c});l?e&&a?this._hasCrossedThreshold(l,h)&&this._queuedEntries.push(h):l&&l.isIntersecting&&this._queuedEntries.push(h):this._queuedEntries.push(h)},this);this._queuedEntries.length&&this._callback(this.takeRecords(),this)};i.prototype._computeTargetAndRootIntersection=function(n,r){if("none"==e.getComputedStyle(n).display)return;var i=u(n);var s=i;var o=d(n);var a=false;while(!a){var l=null;var h=1==o.nodeType?e.getComputedStyle(o):{};if("none"==h.display)return;if(o==this.root||o==t){a=true;l=r}else o!=t.body&&o!=t.documentElement&&"visible"!=h.overflow&&(l=u(o));if(l){s=c(l,s);if(!s)break}o=d(o)}return s};i.prototype._getRootRect=function(){var e;if(this.root)e=u(this.root);else{var n=t.documentElement;var r=t.body;e={top:0,left:0,right:n.clientWidth||r.clientWidth,width:n.clientWidth||r.clientWidth,bottom:n.clientHeight||r.clientHeight,height:n.clientHeight||r.clientHeight}}return this._expandRectByRootMargin(e)};i.prototype._expandRectByRootMargin=function(e){var t=this._rootMarginValues.map(function(t,n){return"px"==t.unit?t.value:t.value*(n%2?e.width:e.height)/100});var n={top:e.top-t[0],right:e.right+t[1],bottom:e.bottom+t[2],left:e.left-t[3]};n.width=n.right-n.left;n.height=n.bottom-n.top;return n};i.prototype._hasCrossedThreshold=function(e,t){var n=e&&e.isIntersecting?e.intersectionRatio||0:-1;var r=t.isIntersecting?t.intersectionRatio||0:-1;if(n===r)return;for(var i=0;i<this.thresholds.length;i++){var s=this.thresholds[i];if(s==n||s==r||s<n!==s<r)return true}};i.prototype._rootIsInDom=function(){return!this.root||f(t,this.root)};i.prototype._rootContainsTarget=function(e){return f(this.root||t,e)};i.prototype._registerInstance=function(){n.indexOf(this)<0&&n.push(this)};i.prototype._unregisterInstance=function(){var e=n.indexOf(this);-1!=e&&n.splice(e,1)};function s(){return e.performance&&performance.now&&performance.now()}function o(e,t){var n=null;return function(){n||(n=setTimeout(function(){e();n=null},t))}}function a(e,t,n,r){"function"==typeof e.addEventListener?e.addEventListener(t,n,r||false):"function"==typeof e.attachEvent&&e.attachEvent("on"+t,n)}function l(e,t,n,r){"function"==typeof e.removeEventListener?e.removeEventListener(t,n,r||false):"function"==typeof e.detatchEvent&&e.detatchEvent("on"+t,n)}function c(e,t){var n=Math.max(e.top,t.top);var r=Math.min(e.bottom,t.bottom);var i=Math.max(e.left,t.left);var s=Math.min(e.right,t.right);var o=s-i;var a=r-n;return o>=0&&a>=0&&{top:n,bottom:r,left:i,right:s,width:o,height:a}}function u(e){var t;try{t=e.getBoundingClientRect()}catch(e){}if(!t)return h();t.width&&t.height||(t={top:t.top,right:t.right,bottom:t.bottom,left:t.left,width:t.right-t.left,height:t.bottom-t.top});return t}function h(){return{top:0,bottom:0,left:0,right:0,width:0,height:0}}function f(e,t){var n=t;while(n){if(n==e)return true;n=d(n)}return false}function d(e){var t=e.parentNode;if(t&&11==t.nodeType&&t.host)return t.host;return t}e.IntersectionObserver=i;e.IntersectionObserverEntry=r})(window,document)},"./node_modules/process/browser.js":function(e,t){var n=e.exports={};var r;var i;function s(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}(function(){try{r="function"===typeof setTimeout?setTimeout:s}catch(e){r=s}try{i="function"===typeof clearTimeout?clearTimeout:o}catch(e){i=o}})();function a(e){if(r===setTimeout)return setTimeout(e,0);if((r===s||!r)&&setTimeout){r=setTimeout;return setTimeout(e,0)}try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}function l(e){if(i===clearTimeout)return clearTimeout(e);if((i===o||!i)&&clearTimeout){i=clearTimeout;return clearTimeout(e)}try{return i(e)}catch(t){try{return i.call(null,e)}catch(t){return i.call(this,e)}}}var c=[];var u=false;var h;var f=-1;function d(){if(!u||!h)return;u=false;h.length?c=h.concat(c):f=-1;c.length&&p()}function p(){if(u)return;var e=a(d);u=true;var t=c.length;while(t){h=c;c=[];while(++f<t)h&&h[f].run();f=-1;t=c.length}h=null;u=false;l(e)}n.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new m(e,t));1!==c.length||u||a(p)};function m(e,t){this.fun=e;this.array=t}m.prototype.run=function(){this.fun.apply(null,this.array)};n.title="browser";n.browser=true;n.env={};n.argv=[];n.version="";n.versions={};function v(){}n.on=v;n.addListener=v;n.once=v;n.off=v;n.removeListener=v;n.removeAllListeners=v;n.emit=v;n.prependListener=v;n.prependOnceListener=v;n.listeners=function(e){return[]};n.binding=function(e){throw new Error("process.binding is not supported")};n.cwd=function(){return"/"};n.chdir=function(e){throw new Error("process.chdir is not supported")};n.umask=function(){return 0}},"./node_modules/pym.js/dist/pym.v1.js":function(e,t,n){var r,i;/*! pym.js - v1.3.2 - 2018-02-13 */ /*! pym.js - v1.3.2 - 2018-02-13 */
(function(s){true;!(r=s,i="function"===typeof r?r.call(t,n,t,e):r,void 0!==i&&(e.exports=i))})(function(){var e="xPYMx";var t={};var n=function(e){var t=document.createEvent("Event");t.initEvent("pym:"+e,true,true);document.dispatchEvent(t)};var r=function(e){var t=new RegExp("[\\?&]"+e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]")+"=([^&#]*)");var n=t.exec(location.search);if(null===n)return"";return decodeURIComponent(n[1].replace(/\+/g," "))};var i=function(e,t){if("*"!==t.xdomain&&!e.origin.match(new RegExp(t.xdomain+"$")))return;if("string"!==typeof e.data)return;return true};var s=function(e){var t=/^(?:(?:https?|mailto|ftp):|[^&:/?#]*(?:[/?#]|$))/gi;if(!e.match(t))return;return true};var o=function(t,n,r){var i=["pym",t,n,r];return i.join(e)};var a=function(t){var n=["pym",t,"(\\S+)","(.*)"];return new RegExp("^"+n.join(e)+"$")};var l=Date.now||function(){return(new Date).getTime()};var c=function(e,t,n){var r,i,s;var o=null;var a=0;n||(n={});var c=function(){a=false===n.leading?0:l();o=null;s=e.apply(r,i);o||(r=i=null)};return function(){var u=l();a||false!==n.leading||(a=u);var h=t-(u-a);r=this;i=arguments;if(h<=0||h>t){if(o){clearTimeout(o);o=null}a=u;s=e.apply(r,i);o||(r=i=null)}else o||false===n.trailing||(o=setTimeout(c,h));return s}};var u=function(){var e=t.autoInitInstances.length;for(var n=e-1;n>=0;n--){var r=t.autoInitInstances[n];if(r.el.getElementsByTagName("iframe").length&&r.el.getElementsByTagName("iframe")[0].contentWindow)continue;t.autoInitInstances.splice(n,1)}};t.autoInitInstances=[];t.autoInit=function(e){var r=document.querySelectorAll("[data-pym-src]:not([data-pym-auto-initialized])");var i=r.length;u();for(var s=0;s<i;++s){var o=r[s];o.setAttribute("data-pym-auto-initialized","");""===o.id&&(o.id="pym-"+s+"-"+Math.random().toString(36).substr(2,5));var a=o.getAttribute("data-pym-src");var l={xdomain:"string",title:"string",name:"string",id:"string",sandbox:"string",allowfullscreen:"boolean",parenturlparam:"string",parenturlvalue:"string",optionalparams:"boolean",trackscroll:"boolean",scrollwait:"number"};var c={};for(var h in l)if(null!==o.getAttribute("data-pym-"+h))switch(l[h]){case"boolean":c[h]=!("false"===o.getAttribute("data-pym-"+h));break;case"string":c[h]=o.getAttribute("data-pym-"+h);break;case"number":var f=Number(o.getAttribute("data-pym-"+h));isNaN(f)||(c[h]=f);break;default:void 0}var d=new t.Parent(o.id,a,c);t.autoInitInstances.push(d)}e||n("pym-initialized");return t.autoInitInstances};t.Parent=function(e,t,n){this.id=e;this.url=t;this.el=document.getElementById(e);this.iframe=null;this.settings={xdomain:"*",optionalparams:true,parenturlparam:"parentUrl",parenturlvalue:window.location.href,trackscroll:false,scrollwait:100};this.messageRegex=a(this.id);this.messageHandlers={};n=n||{};this._constructIframe=function(){var e=this.el.offsetWidth.toString();this.iframe=document.createElement("iframe");var t="";var n=this.url.indexOf("#");if(n>-1){t=this.url.substring(n,this.url.length);this.url=this.url.substring(0,n)}this.url.indexOf("?")<0?this.url+="?":this.url+="&";this.iframe.src=this.url+"initialWidth="+e+"&childId="+this.id;if(this.settings.optionalparams){this.iframe.src+="&parentTitle="+encodeURIComponent(document.title);this.iframe.src+="&"+this.settings.parenturlparam+"="+encodeURIComponent(this.settings.parenturlvalue)}this.iframe.src+=t;this.iframe.setAttribute("width","100%");this.iframe.setAttribute("scrolling","no");this.iframe.setAttribute("marginheight","0");this.iframe.setAttribute("frameborder","0");this.settings.title&&this.iframe.setAttribute("title",this.settings.title);void 0!==this.settings.allowfullscreen&&false!==this.settings.allowfullscreen&&this.iframe.setAttribute("allowfullscreen","");void 0!==this.settings.sandbox&&"string"===typeof this.settings.sandbox&&this.iframe.setAttribute("sandbox",this.settings.sandbox);this.settings.id&&(document.getElementById(this.settings.id)||this.iframe.setAttribute("id",this.settings.id));this.settings.name&&this.iframe.setAttribute("name",this.settings.name);while(this.el.firstChild)this.el.removeChild(this.el.firstChild);this.el.appendChild(this.iframe);window.addEventListener("resize",this._onResize);this.settings.trackscroll&&window.addEventListener("scroll",this._throttleOnScroll)};this._onResize=function(){this.sendWidth();this.settings.trackscroll&&this.sendViewportAndIFramePosition()}.bind(this);this._onScroll=function(){this.sendViewportAndIFramePosition()}.bind(this);this._fire=function(e,t){if(e in this.messageHandlers)for(var n=0;n<this.messageHandlers[e].length;n++)this.messageHandlers[e][n].call(this,t)};this.remove=function(){window.removeEventListener("message",this._processMessage);window.removeEventListener("resize",this._onResize);this.el.removeChild(this.iframe);u()};this._processMessage=function(e){if(!i(e,this.settings))return;if("string"!==typeof e.data)return;var t=e.data.match(this.messageRegex);if(!t||3!==t.length)return false;var n=t[1];var r=t[2];this._fire(n,r)}.bind(this);this._onHeightMessage=function(e){var t=parseInt(e);this.iframe.setAttribute("height",t+"px")};this._onNavigateToMessage=function(e){if(!s(e))return;document.location.href=e};this._onScrollToChildPosMessage=function(e){var t=document.getElementById(this.id).getBoundingClientRect().top+window.pageYOffset;var n=t+parseInt(e);window.scrollTo(0,n)};this.onMessage=function(e,t){e in this.messageHandlers||(this.messageHandlers[e]=[]);this.messageHandlers[e].push(t)};this.sendMessage=function(e,t){this.el.getElementsByTagName("iframe").length&&(this.el.getElementsByTagName("iframe")[0].contentWindow?this.el.getElementsByTagName("iframe")[0].contentWindow.postMessage(o(this.id,e,t),"*"):this.remove())};this.sendWidth=function(){var e=this.el.offsetWidth.toString();this.sendMessage("width",e)};this.sendViewportAndIFramePosition=function(){var e=this.iframe.getBoundingClientRect();var t=window.innerWidth||document.documentElement.clientWidth;var n=window.innerHeight||document.documentElement.clientHeight;var r=t+" "+n;r+=" "+e.top+" "+e.left;r+=" "+e.bottom+" "+e.right;this.sendMessage("viewport-iframe-position",r)};for(var r in n)this.settings[r]=n[r];this._throttleOnScroll=c(this._onScroll.bind(this),this.settings.scrollwait);this.onMessage("height",this._onHeightMessage);this.onMessage("navigateTo",this._onNavigateToMessage);this.onMessage("scrollToChildPos",this._onScrollToChildPosMessage);this.onMessage("parentPositionInfo",this.sendViewportAndIFramePosition);window.addEventListener("message",this._processMessage,false);this._constructIframe();return this};t.Child=function(t){this.parentWidth=null;this.id=null;this.parentTitle=null;this.parentUrl=null;this.settings={renderCallback:null,xdomain:"*",polling:0,parenturlparam:"parentUrl"};this.timerId=null;this.messageRegex=null;this.messageHandlers={};t=t||{};this.onMessage=function(e,t){e in this.messageHandlers||(this.messageHandlers[e]=[]);this.messageHandlers[e].push(t)};this._fire=function(e,t){if(e in this.messageHandlers)for(var n=0;n<this.messageHandlers[e].length;n++)this.messageHandlers[e][n].call(this,t)};this._processMessage=function(e){if(!i(e,this.settings))return;if("string"!==typeof e.data)return;var t=e.data.match(this.messageRegex);if(!t||3!==t.length)return;var n=t[1];var r=t[2];this._fire(n,r)}.bind(this);this._onWidthMessage=function(e){var t=parseInt(e);if(t!==this.parentWidth){this.parentWidth=t;this.settings.renderCallback&&this.settings.renderCallback(t);this.sendHeight()}};this.sendMessage=function(e,t){window.parent.postMessage(o(this.id,e,t),"*")};this.sendHeight=function(){var e=document.getElementsByTagName("body")[0].offsetHeight.toString();this.sendMessage("height",e);return e}.bind(this);this.getParentPositionInfo=function(){this.sendMessage("parentPositionInfo")};this.scrollParentTo=function(e){this.sendMessage("navigateTo","#"+e)};this.navigateParentTo=function(e){this.sendMessage("navigateTo",e)};this.scrollParentToChildEl=function(e){var t=document.getElementById(e).getBoundingClientRect().top+window.pageYOffset;this.scrollParentToChildPos(t)};this.scrollParentToChildPos=function(e){this.sendMessage("scrollToChildPos",e.toString())};var s=function(e){var t=document.getElementsByTagName("html")[0],r,i=t.className;try{r=window.self!==window.top?"embedded":"not-embedded"}catch(e){r="embedded"}if(i.indexOf(r)<0){t.className=i?i+" "+r:r;e&&e(r);n("marked-embedded")}};this.remove=function(){window.removeEventListener("message",this._processMessage);this.timerId&&clearInterval(this.timerId)};for(var a in t)this.settings[a]=t[a];this.id=r("childId")||t.id;this.messageRegex=new RegExp("^pym"+e+this.id+e+"(\\S+)"+e+"(.*)$");var l=parseInt(r("initialWidth"));this.parentUrl=r(this.settings.parenturlparam);this.parentTitle=r("parentTitle");this.onMessage("width",this._onWidthMessage);window.addEventListener("message",this._processMessage,false);this.settings.renderCallback&&this.settings.renderCallback(l);this.sendHeight();this.settings.polling&&(this.timerId=window.setInterval(this.sendHeight,this.settings.polling));s(t.onMarkedEmbeddedStatus);return this};"undefined"!==typeof document&&t.autoInit(true);return t})},"./node_modules/querystringify/index.js":function(e,t,n){"use strict";var r=Object.prototype.hasOwnProperty;function i(e){return decodeURIComponent(e.replace(/\+/g," "))}function s(e){var t=/([^=?&]+)=?([^&]*)/g,n={},r;while(r=t.exec(e)){var s=i(r[1]),o=i(r[2]);if(s in n)continue;n[s]=o}return n}function o(e,t){t=t||"";var n=[];"string"!==typeof t&&(t="?");for(var i in e)r.call(e,i)&&n.push(encodeURIComponent(i)+"="+encodeURIComponent(e[i]));return n.length?t+n.join("&"):""}t.stringify=o;t.parse=s},"./node_modules/requires-port/index.js":function(e,t,n){"use strict";e.exports=function e(t,n){n=n.split(":")[0];t=+t;if(!t)return false;switch(n){case"http":case"ws":return 80!==t;case"https":case"wss":return 443!==t;case"ftp":return 21!==t;case"gopher":return 70!==t;case"file":return false}return 0!==t}},"./node_modules/url-parse/index.js":function(e,t,n){"use strict";(function(t){var r=n("./node_modules/requires-port/index.js"),i=n("./node_modules/querystringify/index.js"),s=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\S\s]*)/i,o=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//;var a=[["#","hash"],["?","query"],function e(t){return t.replace("\\","/")},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d+)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]];var l={hash:1,query:1};function c(e){var n=t&&t.location||{};e=e||n;var r={},i=typeof e,s;if("blob:"===e.protocol)r=new f(unescape(e.pathname),{});else if("string"===i){r=new f(e,{});for(s in l)delete r[s]}else if("object"===i){for(s in e){if(s in l)continue;r[s]=e[s]}void 0===r.slashes&&(r.slashes=o.test(e.href))}return r}function u(e){var t=s.exec(e);return{protocol:t[1]?t[1].toLowerCase():"",slashes:!!t[2],rest:t[3]}}function h(e,t){var n=(t||"/").split("/").slice(0,-1).concat(e.split("/")),r=n.length,i=n[r-1],s=false,o=0;while(r--)if("."===n[r])n.splice(r,1);else if(".."===n[r]){n.splice(r,1);o++}else if(o){0===r&&(s=true);n.splice(r,1);o--}s&&n.unshift("");"."!==i&&".."!==i||n.push("");return n.join("/")}function f(e,t,n){if(!(this instanceof f))return new f(e,t,n);var s,o,l,d,p,m,v=a.slice(),g=typeof t,y=this,b=0;if("object"!==g&&"string"!==g){n=t;t=null}n&&"function"!==typeof n&&(n=i.parse);t=c(t);o=u(e||"");s=!o.protocol&&!o.slashes;y.slashes=o.slashes||s&&t.slashes;y.protocol=o.protocol||t.protocol||"";e=o.rest;o.slashes||(v[3]=[/(.*)/,"pathname"]);for(;b<v.length;b++){d=v[b];if("function"===typeof d){e=d(e);continue}l=d[0];m=d[1];if(l!==l)y[m]=e;else if("string"===typeof l){if(~(p=e.indexOf(l)))if("number"===typeof d[2]){y[m]=e.slice(0,p);e=e.slice(p+d[2])}else{y[m]=e.slice(p);e=e.slice(0,p)}}else if(p=l.exec(e)){y[m]=p[1];e=e.slice(0,p.index)}y[m]=y[m]||s&&d[3]&&t[m]||"";d[4]&&(y[m]=y[m].toLowerCase())}n&&(y.query=n(y.query));s&&t.slashes&&"/"!==y.pathname.charAt(0)&&(""!==y.pathname||""!==t.pathname)&&(y.pathname=h(y.pathname,t.pathname));if(!r(y.port,y.protocol)){y.host=y.hostname;y.port=""}y.username=y.password="";if(y.auth){d=y.auth.split(":");y.username=d[0]||"";y.password=d[1]||""}y.origin=y.protocol&&y.host&&"file:"!==y.protocol?y.protocol+"//"+y.host:"null";y.href=y.toString()}function d(e,t,n){var s=this;switch(e){case"query":"string"===typeof t&&t.length&&(t=(n||i.parse)(t));s[e]=t;break;case"port":s[e]=t;if(r(t,s.protocol))t&&(s.host=s.hostname+":"+t);else{s.host=s.hostname;s[e]=""}break;case"hostname":s[e]=t;s.port&&(t+=":"+s.port);s.host=t;break;case"host":s[e]=t;if(/:\d+$/.test(t)){t=t.split(":");s.port=t.pop();s.hostname=t.join(":")}else{s.hostname=t;s.port=""}break;case"protocol":s.protocol=t.toLowerCase();s.slashes=!n;break;case"pathname":case"hash":if(t){var o="pathname"===e?"/":"#";s[e]=t.charAt(0)!==o?o+t:t}else s[e]=t;break;default:s[e]=t}for(var l=0;l<a.length;l++){var c=a[l];c[4]&&(s[c[1]]=s[c[1]].toLowerCase())}s.origin=s.protocol&&s.host&&"file:"!==s.protocol?s.protocol+"//"+s.host:"null";s.href=s.toString();return s}function p(e){e&&"function"===typeof e||(e=i.stringify);var t,n=this,r=n.protocol;r&&":"!==r.charAt(r.length-1)&&(r+=":");var s=r+(n.slashes?"//":"");if(n.username){s+=n.username;n.password&&(s+=":"+n.password);s+="@"}s+=n.host+n.pathname;t="object"===typeof n.query?e(n.query):n.query;t&&(s+="?"!==t.charAt(0)?"?"+t:t);n.hash&&(s+=n.hash);return s}f.prototype={set:d,toString:p};f.extractProtocol=u;f.location=c;f.qs=i;e.exports=f}).call(t,n("./node_modules/webpack/buildin/global.js"))},"./node_modules/uuid/lib/bytesToUuid.js":function(e,t){var n=[];for(var r=0;r<256;++r)n[r]=(r+256).toString(16).substr(1);function i(e,t){var r=t||0;var i=n;return i[e[r++]]+i[e[r++]]+i[e[r++]]+i[e[r++]]+"-"+i[e[r++]]+i[e[r++]]+"-"+i[e[r++]]+i[e[r++]]+"-"+i[e[r++]]+i[e[r++]]+"-"+i[e[r++]]+i[e[r++]]+i[e[r++]]+i[e[r++]]+i[e[r++]]+i[e[r++]]}e.exports=i},"./node_modules/uuid/lib/rng-browser.js":function(e,t){var n="undefined"!=typeof crypto&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&msCrypto.getRandomValues.bind(msCrypto);if(n){var r=new Uint8Array(16);e.exports=function e(){n(r);return r}}else{var i=new Array(16);e.exports=function e(){for(var t=0,n;t<16;t++){0===(3&t)&&(n=4294967296*Math.random());i[t]=n>>>((3&t)<<3)&255}return i}}},"./node_modules/uuid/v4.js":function(e,t,n){var r=n("./node_modules/uuid/lib/rng-browser.js");var i=n("./node_modules/uuid/lib/bytesToUuid.js");function s(e,t,n){var s=t&&n||0;if("string"==typeof e){t="binary"===e?new Array(16):null;e=null}e=e||{};var o=e.random||(e.rng||r)();o[6]=15&o[6]|64;o[8]=63&o[8]|128;if(t)for(var a=0;a<16;++a)t[s+a]=o[a];return t||i(o)}e.exports=s},"./node_modules/webpack/buildin/global.js":function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(1,eval)("this")}catch(e){"object"===typeof window&&(n=window)}e.exports=n},"multi /usr/src/app/client/coral-embed/src/index":function(e,t,n){e.exports=n("./client/coral-embed/src/index.js")}});