if (!Function.prototype.bind) {
  Function.prototype.bind = function(oThis) {
    if (typeof this !== 'function') {
      // closest thing possible to the ECMAScript 5
      // internal IsCallable function
      throw new TypeError('Function.prototype.bind - what is trying to be bound is not callable');
    }

    var aArgs   = Array.prototype.slice.call(arguments, 1),
        fToBind = this,
        fNOP    = function() {},
        fBound  = function() {
          return fToBind.apply(this instanceof fNOP
                 ? this
                 : oThis,
                 aArgs.concat(Array.prototype.slice.call(arguments)));
        };

    if (this.prototype) {
      // native functions don't have a prototype
      fNOP.prototype = this.prototype; 
    }
    fBound.prototype = new fNOP();

    return fBound;
  };
};
//     Underscore.js 1.8.3
//     http://underscorejs.org
//     (c) 2009-2015 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
//     Underscore may be freely distributed under the MIT license.

(function() {

  // Baseline setup
  // --------------

  // Establish the root object, `window` in the browser, or `exports` on the server.
  var root = this;

  // Save the previous value of the `_` variable.
  var previousUnderscore = root._;

  // Save bytes in the minified (but not gzipped) version:
  var ArrayProto = Array.prototype, ObjProto = Object.prototype, FuncProto = Function.prototype;

  // Create quick reference variables for speed access to core prototypes.
  var
    push             = ArrayProto.push,
    slice            = ArrayProto.slice,
    toString         = ObjProto.toString,
    hasOwnProperty   = ObjProto.hasOwnProperty;

  // All **ECMAScript 5** native function implementations that we hope to use
  // are declared here.
  var
    nativeIsArray      = Array.isArray,
    nativeKeys         = Object.keys,
    nativeBind         = FuncProto.bind,
    nativeCreate       = Object.create;

  // Naked function reference for surrogate-prototype-swapping.
  var Ctor = function(){};

  // Create a safe reference to the Underscore object for use below.
  var _ = function(obj) {
    if (obj instanceof _) return obj;
    if (!(this instanceof _)) return new _(obj);
    this._wrapped = obj;
  };

  // Export the Underscore object for **Node.js**, with
  // backwards-compatibility for the old `require()` API. If we're in
  // the browser, add `_` as a global object.
  if (typeof exports !== 'undefined') {
    if (typeof module !== 'undefined' && module.exports) {
      exports = module.exports = _;
    }
    exports._ = _;
  } else {
    root._ = _;
  }

  // Current version.
  _.VERSION = '1.8.3';

  // Internal function that returns an efficient (for current engines) version
  // of the passed-in callback, to be repeatedly applied in other Underscore
  // functions.
  var optimizeCb = function(func, context, argCount) {
    if (context === void 0) return func;
    switch (argCount == null ? 3 : argCount) {
      case 1: return function(value) {
        return func.call(context, value);
      };
      case 2: return function(value, other) {
        return func.call(context, value, other);
      };
      case 3: return function(value, index, collection) {
        return func.call(context, value, index, collection);
      };
      case 4: return function(accumulator, value, index, collection) {
        return func.call(context, accumulator, value, index, collection);
      };
    }
    return function() {
      return func.apply(context, arguments);
    };
  };

  // A mostly-internal function to generate callbacks that can be applied
  // to each element in a collection, returning the desired result — either
  // identity, an arbitrary callback, a property matcher, or a property accessor.
  var cb = function(value, context, argCount) {
    if (value == null) return _.identity;
    if (_.isFunction(value)) return optimizeCb(value, context, argCount);
    if (_.isObject(value)) return _.matcher(value);
    return _.property(value);
  };
  _.iteratee = function(value, context) {
    return cb(value, context, Infinity);
  };

  // An internal function for creating assigner functions.
  var createAssigner = function(keysFunc, undefinedOnly) {
    return function(obj) {
      var length = arguments.length;
      if (length < 2 || obj == null) return obj;
      for (var index = 1; index < length; index++) {
        var source = arguments[index],
            keys = keysFunc(source),
            l = keys.length;
        for (var i = 0; i < l; i++) {
          var key = keys[i];
          if (!undefinedOnly || obj[key] === void 0) obj[key] = source[key];
        }
      }
      return obj;
    };
  };

  // An internal function for creating a new object that inherits from another.
  var baseCreate = function(prototype) {
    if (!_.isObject(prototype)) return {};
    if (nativeCreate) return nativeCreate(prototype);
    Ctor.prototype = prototype;
    var result = new Ctor;
    Ctor.prototype = null;
    return result;
  };

  var property = function(key) {
    return function(obj) {
      return obj == null ? void 0 : obj[key];
    };
  };

  // Helper for collection methods to determine whether a collection
  // should be iterated as an array or as an object
  // Related: http://people.mozilla.org/~jorendorff/es6-draft.html#sec-tolength
  // Avoids a very nasty iOS 8 JIT bug on ARM-64. #2094
  var MAX_ARRAY_INDEX = Math.pow(2, 53) - 1;
  var getLength = property('length');
  var isArrayLike = function(collection) {
    var length = getLength(collection);
    return typeof length == 'number' && length >= 0 && length <= MAX_ARRAY_INDEX;
  };

  // Collection Functions
  // --------------------

  // The cornerstone, an `each` implementation, aka `forEach`.
  // Handles raw objects in addition to array-likes. Treats all
  // sparse array-likes as if they were dense.
  _.each = _.forEach = function(obj, iteratee, context) {
    iteratee = optimizeCb(iteratee, context);
    var i, length;
    if (isArrayLike(obj)) {
      for (i = 0, length = obj.length; i < length; i++) {
        iteratee(obj[i], i, obj);
      }
    } else {
      var keys = _.keys(obj);
      for (i = 0, length = keys.length; i < length; i++) {
        iteratee(obj[keys[i]], keys[i], obj);
      }
    }
    return obj;
  };

  // Return the results of applying the iteratee to each element.
  _.map = _.collect = function(obj, iteratee, context) {
    iteratee = cb(iteratee, context);
    var keys = !isArrayLike(obj) && _.keys(obj),
        length = (keys || obj).length,
        results = Array(length);
    for (var index = 0; index < length; index++) {
      var currentKey = keys ? keys[index] : index;
      results[index] = iteratee(obj[currentKey], currentKey, obj);
    }
    return results;
  };

  // Create a reducing function iterating left or right.
  function createReduce(dir) {
    // Optimized iterator function as using arguments.length
    // in the main function will deoptimize the, see #1991.
    function iterator(obj, iteratee, memo, keys, index, length) {
      for (; index >= 0 && index < length; index += dir) {
        var currentKey = keys ? keys[index] : index;
        memo = iteratee(memo, obj[currentKey], currentKey, obj);
      }
      return memo;
    }

    return function(obj, iteratee, memo, context) {
      iteratee = optimizeCb(iteratee, context, 4);
      var keys = !isArrayLike(obj) && _.keys(obj),
          length = (keys || obj).length,
          index = dir > 0 ? 0 : length - 1;
      // Determine the initial value if none is provided.
      if (arguments.length < 3) {
        memo = obj[keys ? keys[index] : index];
        index += dir;
      }
      return iterator(obj, iteratee, memo, keys, index, length);
    };
  }

  // **Reduce** builds up a single result from a list of values, aka `inject`,
  // or `foldl`.
  _.reduce = _.foldl = _.inject = createReduce(1);

  // The right-associative version of reduce, also known as `foldr`.
  _.reduceRight = _.foldr = createReduce(-1);

  // Return the first value which passes a truth test. Aliased as `detect`.
  _.find = _.detect = function(obj, predicate, context) {
    var key;
    if (isArrayLike(obj)) {
      key = _.findIndex(obj, predicate, context);
    } else {
      key = _.findKey(obj, predicate, context);
    }
    if (key !== void 0 && key !== -1) return obj[key];
  };

  // Return all the elements that pass a truth test.
  // Aliased as `select`.
  _.filter = _.select = function(obj, predicate, context) {
    var results = [];
    predicate = cb(predicate, context);
    _.each(obj, function(value, index, list) {
      if (predicate(value, index, list)) results.push(value);
    });
    return results;
  };

  // Return all the elements for which a truth test fails.
  _.reject = function(obj, predicate, context) {
    return _.filter(obj, _.negate(cb(predicate)), context);
  };

  // Determine whether all of the elements match a truth test.
  // Aliased as `all`.
  _.every = _.all = function(obj, predicate, context) {
    predicate = cb(predicate, context);
    var keys = !isArrayLike(obj) && _.keys(obj),
        length = (keys || obj).length;
    for (var index = 0; index < length; index++) {
      var currentKey = keys ? keys[index] : index;
      if (!predicate(obj[currentKey], currentKey, obj)) return false;
    }
    return true;
  };

  // Determine if at least one element in the object matches a truth test.
  // Aliased as `any`.
  _.some = _.any = function(obj, predicate, context) {
    predicate = cb(predicate, context);
    var keys = !isArrayLike(obj) && _.keys(obj),
        length = (keys || obj).length;
    for (var index = 0; index < length; index++) {
      var currentKey = keys ? keys[index] : index;
      if (predicate(obj[currentKey], currentKey, obj)) return true;
    }
    return false;
  };

  // Determine if the array or object contains a given item (using `===`).
  // Aliased as `includes` and `include`.
  _.contains = _.includes = _.include = function(obj, item, fromIndex, guard) {
    if (!isArrayLike(obj)) obj = _.values(obj);
    if (typeof fromIndex != 'number' || guard) fromIndex = 0;
    return _.indexOf(obj, item, fromIndex) >= 0;
  };

  // Invoke a method (with arguments) on every item in a collection.
  _.invoke = function(obj, method) {
    var args = slice.call(arguments, 2);
    var isFunc = _.isFunction(method);
    return _.map(obj, function(value) {
      var func = isFunc ? method : value[method];
      return func == null ? func : func.apply(value, args);
    });
  };

  // Convenience version of a common use case of `map`: fetching a property.
  _.pluck = function(obj, key) {
    return _.map(obj, _.property(key));
  };

  // Convenience version of a common use case of `filter`: selecting only objects
  // containing specific `key:value` pairs.
  _.where = function(obj, attrs) {
    return _.filter(obj, _.matcher(attrs));
  };

  // Convenience version of a common use case of `find`: getting the first object
  // containing specific `key:value` pairs.
  _.findWhere = function(obj, attrs) {
    return _.find(obj, _.matcher(attrs));
  };

  // Return the maximum element (or element-based computation).
  _.max = function(obj, iteratee, context) {
    var result = -Infinity, lastComputed = -Infinity,
        value, computed;
    if (iteratee == null && obj != null) {
      obj = isArrayLike(obj) ? obj : _.values(obj);
      for (var i = 0, length = obj.length; i < length; i++) {
        value = obj[i];
        if (value > result) {
          result = value;
        }
      }
    } else {
      iteratee = cb(iteratee, context);
      _.each(obj, function(value, index, list) {
        computed = iteratee(value, index, list);
        if (computed > lastComputed || computed === -Infinity && result === -Infinity) {
          result = value;
          lastComputed = computed;
        }
      });
    }
    return result;
  };

  // Return the minimum element (or element-based computation).
  _.min = function(obj, iteratee, context) {
    var result = Infinity, lastComputed = Infinity,
        value, computed;
    if (iteratee == null && obj != null) {
      obj = isArrayLike(obj) ? obj : _.values(obj);
      for (var i = 0, length = obj.length; i < length; i++) {
        value = obj[i];
        if (value < result) {
          result = value;
        }
      }
    } else {
      iteratee = cb(iteratee, context);
      _.each(obj, function(value, index, list) {
        computed = iteratee(value, index, list);
        if (computed < lastComputed || computed === Infinity && result === Infinity) {
          result = value;
          lastComputed = computed;
        }
      });
    }
    return result;
  };

  // Shuffle a collection, using the modern version of the
  // [Fisher-Yates shuffle](http://en.wikipedia.org/wiki/Fisher–Yates_shuffle).
  _.shuffle = function(obj) {
    var set = isArrayLike(obj) ? obj : _.values(obj);
    var length = set.length;
    var shuffled = Array(length);
    for (var index = 0, rand; index < length; index++) {
      rand = _.random(0, index);
      if (rand !== index) shuffled[index] = shuffled[rand];
      shuffled[rand] = set[index];
    }
    return shuffled;
  };

  // Sample **n** random values from a collection.
  // If **n** is not specified, returns a single random element.
  // The internal `guard` argument allows it to work with `map`.
  _.sample = function(obj, n, guard) {
    if (n == null || guard) {
      if (!isArrayLike(obj)) obj = _.values(obj);
      return obj[_.random(obj.length - 1)];
    }
    return _.shuffle(obj).slice(0, Math.max(0, n));
  };

  // Sort the object's values by a criterion produced by an iteratee.
  _.sortBy = function(obj, iteratee, context) {
    iteratee = cb(iteratee, context);
    return _.pluck(_.map(obj, function(value, index, list) {
      return {
        value: value,
        index: index,
        criteria: iteratee(value, index, list)
      };
    }).sort(function(left, right) {
      var a = left.criteria;
      var b = right.criteria;
      if (a !== b) {
        if (a > b || a === void 0) return 1;
        if (a < b || b === void 0) return -1;
      }
      return left.index - right.index;
    }), 'value');
  };

  // An internal function used for aggregate "group by" operations.
  var group = function(behavior) {
    return function(obj, iteratee, context) {
      var result = {};
      iteratee = cb(iteratee, context);
      _.each(obj, function(value, index) {
        var key = iteratee(value, index, obj);
        behavior(result, value, key);
      });
      return result;
    };
  };

  // Groups the object's values by a criterion. Pass either a string attribute
  // to group by, or a function that returns the criterion.
  _.groupBy = group(function(result, value, key) {
    if (_.has(result, key)) result[key].push(value); else result[key] = [value];
  });

  // Indexes the object's values by a criterion, similar to `groupBy`, but for
  // when you know that your index values will be unique.
  _.indexBy = group(function(result, value, key) {
    result[key] = value;
  });

  // Counts instances of an object that group by a certain criterion. Pass
  // either a string attribute to count by, or a function that returns the
  // criterion.
  _.countBy = group(function(result, value, key) {
    if (_.has(result, key)) result[key]++; else result[key] = 1;
  });

  // Safely create a real, live array from anything iterable.
  _.toArray = function(obj) {
    if (!obj) return [];
    if (_.isArray(obj)) return slice.call(obj);
    if (isArrayLike(obj)) return _.map(obj, _.identity);
    return _.values(obj);
  };

  // Return the number of elements in an object.
  _.size = function(obj) {
    if (obj == null) return 0;
    return isArrayLike(obj) ? obj.length : _.keys(obj).length;
  };

  // Split a collection into two arrays: one whose elements all satisfy the given
  // predicate, and one whose elements all do not satisfy the predicate.
  _.partition = function(obj, predicate, context) {
    predicate = cb(predicate, context);
    var pass = [], fail = [];
    _.each(obj, function(value, key, obj) {
      (predicate(value, key, obj) ? pass : fail).push(value);
    });
    return [pass, fail];
  };

  // Array Functions
  // ---------------

  // Get the first element of an array. Passing **n** will return the first N
  // values in the array. Aliased as `head` and `take`. The **guard** check
  // allows it to work with `_.map`.
  _.first = _.head = _.take = function(array, n, guard) {
    if (array == null) return void 0;
    if (n == null || guard) return array[0];
    return _.initial(array, array.length - n);
  };

  // Returns everything but the last entry of the array. Especially useful on
  // the arguments object. Passing **n** will return all the values in
  // the array, excluding the last N.
  _.initial = function(array, n, guard) {
    return slice.call(array, 0, Math.max(0, array.length - (n == null || guard ? 1 : n)));
  };

  // Get the last element of an array. Passing **n** will return the last N
  // values in the array.
  _.last = function(array, n, guard) {
    if (array == null) return void 0;
    if (n == null || guard) return array[array.length - 1];
    return _.rest(array, Math.max(0, array.length - n));
  };

  // Returns everything but the first entry of the array. Aliased as `tail` and `drop`.
  // Especially useful on the arguments object. Passing an **n** will return
  // the rest N values in the array.
  _.rest = _.tail = _.drop = function(array, n, guard) {
    return slice.call(array, n == null || guard ? 1 : n);
  };

  // Trim out all falsy values from an array.
  _.compact = function(array) {
    return _.filter(array, _.identity);
  };

  // Internal implementation of a recursive `flatten` function.
  var flatten = function(input, shallow, strict, startIndex) {
    var output = [], idx = 0;
    for (var i = startIndex || 0, length = getLength(input); i < length; i++) {
      var value = input[i];
      if (isArrayLike(value) && (_.isArray(value) || _.isArguments(value))) {
        //flatten current level of array or arguments object
        if (!shallow) value = flatten(value, shallow, strict);
        var j = 0, len = value.length;
        output.length += len;
        while (j < len) {
          output[idx++] = value[j++];
        }
      } else if (!strict) {
        output[idx++] = value;
      }
    }
    return output;
  };

  // Flatten out an array, either recursively (by default), or just one level.
  _.flatten = function(array, shallow) {
    return flatten(array, shallow, false);
  };

  // Return a version of the array that does not contain the specified value(s).
  _.without = function(array) {
    return _.difference(array, slice.call(arguments, 1));
  };

  // Produce a duplicate-free version of the array. If the array has already
  // been sorted, you have the option of using a faster algorithm.
  // Aliased as `unique`.
  _.uniq = _.unique = function(array, isSorted, iteratee, context) {
    if (!_.isBoolean(isSorted)) {
      context = iteratee;
      iteratee = isSorted;
      isSorted = false;
    }
    if (iteratee != null) iteratee = cb(iteratee, context);
    var result = [];
    var seen = [];
    for (var i = 0, length = getLength(array); i < length; i++) {
      var value = array[i],
          computed = iteratee ? iteratee(value, i, array) : value;
      if (isSorted) {
        if (!i || seen !== computed) result.push(value);
        seen = computed;
      } else if (iteratee) {
        if (!_.contains(seen, computed)) {
          seen.push(computed);
          result.push(value);
        }
      } else if (!_.contains(result, value)) {
        result.push(value);
      }
    }
    return result;
  };

  // Produce an array that contains the union: each distinct element from all of
  // the passed-in arrays.
  _.union = function() {
    return _.uniq(flatten(arguments, true, true));
  };

  // Produce an array that contains every item shared between all the
  // passed-in arrays.
  _.intersection = function(array) {
    var result = [];
    var argsLength = arguments.length;
    for (var i = 0, length = getLength(array); i < length; i++) {
      var item = array[i];
      if (_.contains(result, item)) continue;
      for (var j = 1; j < argsLength; j++) {
        if (!_.contains(arguments[j], item)) break;
      }
      if (j === argsLength) result.push(item);
    }
    return result;
  };

  // Take the difference between one array and a number of other arrays.
  // Only the elements present in just the first array will remain.
  _.difference = function(array) {
    var rest = flatten(arguments, true, true, 1);
    return _.filter(array, function(value){
      return !_.contains(rest, value);
    });
  };

  // Zip together multiple lists into a single array -- elements that share
  // an index go together.
  _.zip = function() {
    return _.unzip(arguments);
  };

  // Complement of _.zip. Unzip accepts an array of arrays and groups
  // each array's elements on shared indices
  _.unzip = function(array) {
    var length = array && _.max(array, getLength).length || 0;
    var result = Array(length);

    for (var index = 0; index < length; index++) {
      result[index] = _.pluck(array, index);
    }
    return result;
  };

  // Converts lists into objects. Pass either a single array of `[key, value]`
  // pairs, or two parallel arrays of the same length -- one of keys, and one of
  // the corresponding values.
  _.object = function(list, values) {
    var result = {};
    for (var i = 0, length = getLength(list); i < length; i++) {
      if (values) {
        result[list[i]] = values[i];
      } else {
        result[list[i][0]] = list[i][1];
      }
    }
    return result;
  };

  // Generator function to create the findIndex and findLastIndex functions
  function createPredicateIndexFinder(dir) {
    return function(array, predicate, context) {
      predicate = cb(predicate, context);
      var length = getLength(array);
      var index = dir > 0 ? 0 : length - 1;
      for (; index >= 0 && index < length; index += dir) {
        if (predicate(array[index], index, array)) return index;
      }
      return -1;
    };
  }

  // Returns the first index on an array-like that passes a predicate test
  _.findIndex = createPredicateIndexFinder(1);
  _.findLastIndex = createPredicateIndexFinder(-1);

  // Use a comparator function to figure out the smallest index at which
  // an object should be inserted so as to maintain order. Uses binary search.
  _.sortedIndex = function(array, obj, iteratee, context) {
    iteratee = cb(iteratee, context, 1);
    var value = iteratee(obj);
    var low = 0, high = getLength(array);
    while (low < high) {
      var mid = Math.floor((low + high) / 2);
      if (iteratee(array[mid]) < value) low = mid + 1; else high = mid;
    }
    return low;
  };

  // Generator function to create the indexOf and lastIndexOf functions
  function createIndexFinder(dir, predicateFind, sortedIndex) {
    return function(array, item, idx) {
      var i = 0, length = getLength(array);
      if (typeof idx == 'number') {
        if (dir > 0) {
            i = idx >= 0 ? idx : Math.max(idx + length, i);
        } else {
            length = idx >= 0 ? Math.min(idx + 1, length) : idx + length + 1;
        }
      } else if (sortedIndex && idx && length) {
        idx = sortedIndex(array, item);
        return array[idx] === item ? idx : -1;
      }
      if (item !== item) {
        idx = predicateFind(slice.call(array, i, length), _.isNaN);
        return idx >= 0 ? idx + i : -1;
      }
      for (idx = dir > 0 ? i : length - 1; idx >= 0 && idx < length; idx += dir) {
        if (array[idx] === item) return idx;
      }
      return -1;
    };
  }

  // Return the position of the first occurrence of an item in an array,
  // or -1 if the item is not included in the array.
  // If the array is large and already in sort order, pass `true`
  // for **isSorted** to use binary search.
  _.indexOf = createIndexFinder(1, _.findIndex, _.sortedIndex);
  _.lastIndexOf = createIndexFinder(-1, _.findLastIndex);

  // Generate an integer Array containing an arithmetic progression. A port of
  // the native Python `range()` function. See
  // [the Python documentation](http://docs.python.org/library/functions.html#range).
  _.range = function(start, stop, step) {
    if (stop == null) {
      stop = start || 0;
      start = 0;
    }
    step = step || 1;

    var length = Math.max(Math.ceil((stop - start) / step), 0);
    var range = Array(length);

    for (var idx = 0; idx < length; idx++, start += step) {
      range[idx] = start;
    }

    return range;
  };

  // Function (ahem) Functions
  // ------------------

  // Determines whether to execute a function as a constructor
  // or a normal function with the provided arguments
  var executeBound = function(sourceFunc, boundFunc, context, callingContext, args) {
    if (!(callingContext instanceof boundFunc)) return sourceFunc.apply(context, args);
    var self = baseCreate(sourceFunc.prototype);
    var result = sourceFunc.apply(self, args);
    if (_.isObject(result)) return result;
    return self;
  };

  // Create a function bound to a given object (assigning `this`, and arguments,
  // optionally). Delegates to **ECMAScript 5**'s native `Function.bind` if
  // available.
  _.bind = function(func, context) {
    if (nativeBind && func.bind === nativeBind) return nativeBind.apply(func, slice.call(arguments, 1));
    if (!_.isFunction(func)) throw new TypeError('Bind must be called on a function');
    var args = slice.call(arguments, 2);
    var bound = function() {
      return executeBound(func, bound, context, this, args.concat(slice.call(arguments)));
    };
    return bound;
  };

  // Partially apply a function by creating a version that has had some of its
  // arguments pre-filled, without changing its dynamic `this` context. _ acts
  // as a placeholder, allowing any combination of arguments to be pre-filled.
  _.partial = function(func) {
    var boundArgs = slice.call(arguments, 1);
    var bound = function() {
      var position = 0, length = boundArgs.length;
      var args = Array(length);
      for (var i = 0; i < length; i++) {
        args[i] = boundArgs[i] === _ ? arguments[position++] : boundArgs[i];
      }
      while (position < arguments.length) args.push(arguments[position++]);
      return executeBound(func, bound, this, this, args);
    };
    return bound;
  };

  // Bind a number of an object's methods to that object. Remaining arguments
  // are the method names to be bound. Useful for ensuring that all callbacks
  // defined on an object belong to it.
  _.bindAll = function(obj) {
    var i, length = arguments.length, key;
    if (length <= 1) throw new Error('bindAll must be passed function names');
    for (i = 1; i < length; i++) {
      key = arguments[i];
      obj[key] = _.bind(obj[key], obj);
    }
    return obj;
  };

  // Memoize an expensive function by storing its results.
  _.memoize = function(func, hasher) {
    var memoize = function(key) {
      var cache = memoize.cache;
      var address = '' + (hasher ? hasher.apply(this, arguments) : key);
      if (!_.has(cache, address)) cache[address] = func.apply(this, arguments);
      return cache[address];
    };
    memoize.cache = {};
    return memoize;
  };

  // Delays a function for the given number of milliseconds, and then calls
  // it with the arguments supplied.
  _.delay = function(func, wait) {
    var args = slice.call(arguments, 2);
    return setTimeout(function(){
      return func.apply(null, args);
    }, wait);
  };

  // Defers a function, scheduling it to run after the current call stack has
  // cleared.
  _.defer = _.partial(_.delay, _, 1);

  // Returns a function, that, when invoked, will only be triggered at most once
  // during a given window of time. Normally, the throttled function will run
  // as much as it can, without ever going more than once per `wait` duration;
  // but if you'd like to disable the execution on the leading edge, pass
  // `{leading: false}`. To disable execution on the trailing edge, ditto.
  _.throttle = function(func, wait, options) {
    var context, args, result;
    var timeout = null;
    var previous = 0;
    if (!options) options = {};
    var later = function() {
      previous = options.leading === false ? 0 : _.now();
      timeout = null;
      result = func.apply(context, args);
      if (!timeout) context = args = null;
    };
    return function() {
      var now = _.now();
      if (!previous && options.leading === false) previous = now;
      var remaining = wait - (now - previous);
      context = this;
      args = arguments;
      if (remaining <= 0 || remaining > wait) {
        if (timeout) {
          clearTimeout(timeout);
          timeout = null;
        }
        previous = now;
        result = func.apply(context, args);
        if (!timeout) context = args = null;
      } else if (!timeout && options.trailing !== false) {
        timeout = setTimeout(later, remaining);
      }
      return result;
    };
  };

  // Returns a function, that, as long as it continues to be invoked, will not
  // be triggered. The function will be called after it stops being called for
  // N milliseconds. If `immediate` is passed, trigger the function on the
  // leading edge, instead of the trailing.
  _.debounce = function(func, wait, immediate) {
    var timeout, args, context, timestamp, result;

    var later = function() {
      var last = _.now() - timestamp;

      if (last < wait && last >= 0) {
        timeout = setTimeout(later, wait - last);
      } else {
        timeout = null;
        if (!immediate) {
          result = func.apply(context, args);
          if (!timeout) context = args = null;
        }
      }
    };

    return function() {
      context = this;
      args = arguments;
      timestamp = _.now();
      var callNow = immediate && !timeout;
      if (!timeout) timeout = setTimeout(later, wait);
      if (callNow) {
        result = func.apply(context, args);
        context = args = null;
      }

      return result;
    };
  };

  // Returns the first function passed as an argument to the second,
  // allowing you to adjust arguments, run code before and after, and
  // conditionally execute the original function.
  _.wrap = function(func, wrapper) {
    return _.partial(wrapper, func);
  };

  // Returns a negated version of the passed-in predicate.
  _.negate = function(predicate) {
    return function() {
      return !predicate.apply(this, arguments);
    };
  };

  // Returns a function that is the composition of a list of functions, each
  // consuming the return value of the function that follows.
  _.compose = function() {
    var args = arguments;
    var start = args.length - 1;
    return function() {
      var i = start;
      var result = args[start].apply(this, arguments);
      while (i--) result = args[i].call(this, result);
      return result;
    };
  };

  // Returns a function that will only be executed on and after the Nth call.
  _.after = function(times, func) {
    return function() {
      if (--times < 1) {
        return func.apply(this, arguments);
      }
    };
  };

  // Returns a function that will only be executed up to (but not including) the Nth call.
  _.before = function(times, func) {
    var memo;
    return function() {
      if (--times > 0) {
        memo = func.apply(this, arguments);
      }
      if (times <= 1) func = null;
      return memo;
    };
  };

  // Returns a function that will be executed at most one time, no matter how
  // often you call it. Useful for lazy initialization.
  _.once = _.partial(_.before, 2);

  // Object Functions
  // ----------------

  // Keys in IE < 9 that won't be iterated by `for key in ...` and thus missed.
  var hasEnumBug = !{toString: null}.propertyIsEnumerable('toString');
  var nonEnumerableProps = ['valueOf', 'isPrototypeOf', 'toString',
                      'propertyIsEnumerable', 'hasOwnProperty', 'toLocaleString'];

  function collectNonEnumProps(obj, keys) {
    var nonEnumIdx = nonEnumerableProps.length;
    var constructor = obj.constructor;
    var proto = (_.isFunction(constructor) && constructor.prototype) || ObjProto;

    // Constructor is a special case.
    var prop = 'constructor';
    if (_.has(obj, prop) && !_.contains(keys, prop)) keys.push(prop);

    while (nonEnumIdx--) {
      prop = nonEnumerableProps[nonEnumIdx];
      if (prop in obj && obj[prop] !== proto[prop] && !_.contains(keys, prop)) {
        keys.push(prop);
      }
    }
  }

  // Retrieve the names of an object's own properties.
  // Delegates to **ECMAScript 5**'s native `Object.keys`
  _.keys = function(obj) {
    if (!_.isObject(obj)) return [];
    if (nativeKeys) return nativeKeys(obj);
    var keys = [];
    for (var key in obj) if (_.has(obj, key)) keys.push(key);
    // Ahem, IE < 9.
    if (hasEnumBug) collectNonEnumProps(obj, keys);
    return keys;
  };

  // Retrieve all the property names of an object.
  _.allKeys = function(obj) {
    if (!_.isObject(obj)) return [];
    var keys = [];
    for (var key in obj) keys.push(key);
    // Ahem, IE < 9.
    if (hasEnumBug) collectNonEnumProps(obj, keys);
    return keys;
  };

  // Retrieve the values of an object's properties.
  _.values = function(obj) {
    var keys = _.keys(obj);
    var length = keys.length;
    var values = Array(length);
    for (var i = 0; i < length; i++) {
      values[i] = obj[keys[i]];
    }
    return values;
  };

  // Returns the results of applying the iteratee to each element of the object
  // In contrast to _.map it returns an object
  _.mapObject = function(obj, iteratee, context) {
    iteratee = cb(iteratee, context);
    var keys =  _.keys(obj),
          length = keys.length,
          results = {},
          currentKey;
      for (var index = 0; index < length; index++) {
        currentKey = keys[index];
        results[currentKey] = iteratee(obj[currentKey], currentKey, obj);
      }
      return results;
  };

  // Convert an object into a list of `[key, value]` pairs.
  _.pairs = function(obj) {
    var keys = _.keys(obj);
    var length = keys.length;
    var pairs = Array(length);
    for (var i = 0; i < length; i++) {
      pairs[i] = [keys[i], obj[keys[i]]];
    }
    return pairs;
  };

  // Invert the keys and values of an object. The values must be serializable.
  _.invert = function(obj) {
    var result = {};
    var keys = _.keys(obj);
    for (var i = 0, length = keys.length; i < length; i++) {
      result[obj[keys[i]]] = keys[i];
    }
    return result;
  };

  // Return a sorted list of the function names available on the object.
  // Aliased as `methods`
  _.functions = _.methods = function(obj) {
    var names = [];
    for (var key in obj) {
      if (_.isFunction(obj[key])) names.push(key);
    }
    return names.sort();
  };

  // Extend a given object with all the properties in passed-in object(s).
  _.extend = createAssigner(_.allKeys);

  // Assigns a given object with all the own properties in the passed-in object(s)
  // (https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object/assign)
  _.extendOwn = _.assign = createAssigner(_.keys);

  // Returns the first key on an object that passes a predicate test
  _.findKey = function(obj, predicate, context) {
    predicate = cb(predicate, context);
    var keys = _.keys(obj), key;
    for (var i = 0, length = keys.length; i < length; i++) {
      key = keys[i];
      if (predicate(obj[key], key, obj)) return key;
    }
  };

  // Return a copy of the object only containing the whitelisted properties.
  _.pick = function(object, oiteratee, context) {
    var result = {}, obj = object, iteratee, keys;
    if (obj == null) return result;
    if (_.isFunction(oiteratee)) {
      keys = _.allKeys(obj);
      iteratee = optimizeCb(oiteratee, context);
    } else {
      keys = flatten(arguments, false, false, 1);
      iteratee = function(value, key, obj) { return key in obj; };
      obj = Object(obj);
    }
    for (var i = 0, length = keys.length; i < length; i++) {
      var key = keys[i];
      var value = obj[key];
      if (iteratee(value, key, obj)) result[key] = value;
    }
    return result;
  };

   // Return a copy of the object without the blacklisted properties.
  _.omit = function(obj, iteratee, context) {
    if (_.isFunction(iteratee)) {
      iteratee = _.negate(iteratee);
    } else {
      var keys = _.map(flatten(arguments, false, false, 1), String);
      iteratee = function(value, key) {
        return !_.contains(keys, key);
      };
    }
    return _.pick(obj, iteratee, context);
  };

  // Fill in a given object with default properties.
  _.defaults = createAssigner(_.allKeys, true);

  // Creates an object that inherits from the given prototype object.
  // If additional properties are provided then they will be added to the
  // created object.
  _.create = function(prototype, props) {
    var result = baseCreate(prototype);
    if (props) _.extendOwn(result, props);
    return result;
  };

  // Create a (shallow-cloned) duplicate of an object.
  _.clone = function(obj) {
    if (!_.isObject(obj)) return obj;
    return _.isArray(obj) ? obj.slice() : _.extend({}, obj);
  };

  // Invokes interceptor with the obj, and then returns obj.
  // The primary purpose of this method is to "tap into" a method chain, in
  // order to perform operations on intermediate results within the chain.
  _.tap = function(obj, interceptor) {
    interceptor(obj);
    return obj;
  };

  // Returns whether an object has a given set of `key:value` pairs.
  _.isMatch = function(object, attrs) {
    var keys = _.keys(attrs), length = keys.length;
    if (object == null) return !length;
    var obj = Object(object);
    for (var i = 0; i < length; i++) {
      var key = keys[i];
      if (attrs[key] !== obj[key] || !(key in obj)) return false;
    }
    return true;
  };


  // Internal recursive comparison function for `isEqual`.
  var eq = function(a, b, aStack, bStack) {
    // Identical objects are equal. `0 === -0`, but they aren't identical.
    // See the [Harmony `egal` proposal](http://wiki.ecmascript.org/doku.php?id=harmony:egal).
    if (a === b) return a !== 0 || 1 / a === 1 / b;
    // A strict comparison is necessary because `null == undefined`.
    if (a == null || b == null) return a === b;
    // Unwrap any wrapped objects.
    if (a instanceof _) a = a._wrapped;
    if (b instanceof _) b = b._wrapped;
    // Compare `[[Class]]` names.
    var className = toString.call(a);
    if (className !== toString.call(b)) return false;
    switch (className) {
      // Strings, numbers, regular expressions, dates, and booleans are compared by value.
      case '[object RegExp]':
      // RegExps are coerced to strings for comparison (Note: '' + /a/i === '/a/i')
      case '[object String]':
        // Primitives and their corresponding object wrappers are equivalent; thus, `"5"` is
        // equivalent to `new String("5")`.
        return '' + a === '' + b;
      case '[object Number]':
        // `NaN`s are equivalent, but non-reflexive.
        // Object(NaN) is equivalent to NaN
        if (+a !== +a) return +b !== +b;
        // An `egal` comparison is performed for other numeric values.
        return +a === 0 ? 1 / +a === 1 / b : +a === +b;
      case '[object Date]':
      case '[object Boolean]':
        // Coerce dates and booleans to numeric primitive values. Dates are compared by their
        // millisecond representations. Note that invalid dates with millisecond representations
        // of `NaN` are not equivalent.
        return +a === +b;
    }

    var areArrays = className === '[object Array]';
    if (!areArrays) {
      if (typeof a != 'object' || typeof b != 'object') return false;

      // Objects with different constructors are not equivalent, but `Object`s or `Array`s
      // from different frames are.
      var aCtor = a.constructor, bCtor = b.constructor;
      if (aCtor !== bCtor && !(_.isFunction(aCtor) && aCtor instanceof aCtor &&
                               _.isFunction(bCtor) && bCtor instanceof bCtor)
                          && ('constructor' in a && 'constructor' in b)) {
        return false;
      }
    }
    // Assume equality for cyclic structures. The algorithm for detecting cyclic
    // structures is adapted from ES 5.1 section 15.12.3, abstract operation `JO`.

    // Initializing stack of traversed objects.
    // It's done here since we only need them for objects and arrays comparison.
    aStack = aStack || [];
    bStack = bStack || [];
    var length = aStack.length;
    while (length--) {
      // Linear search. Performance is inversely proportional to the number of
      // unique nested structures.
      if (aStack[length] === a) return bStack[length] === b;
    }

    // Add the first object to the stack of traversed objects.
    aStack.push(a);
    bStack.push(b);

    // Recursively compare objects and arrays.
    if (areArrays) {
      // Compare array lengths to determine if a deep comparison is necessary.
      length = a.length;
      if (length !== b.length) return false;
      // Deep compare the contents, ignoring non-numeric properties.
      while (length--) {
        if (!eq(a[length], b[length], aStack, bStack)) return false;
      }
    } else {
      // Deep compare objects.
      var keys = _.keys(a), key;
      length = keys.length;
      // Ensure that both objects contain the same number of properties before comparing deep equality.
      if (_.keys(b).length !== length) return false;
      while (length--) {
        // Deep compare each member
        key = keys[length];
        if (!(_.has(b, key) && eq(a[key], b[key], aStack, bStack))) return false;
      }
    }
    // Remove the first object from the stack of traversed objects.
    aStack.pop();
    bStack.pop();
    return true;
  };

  // Perform a deep comparison to check if two objects are equal.
  _.isEqual = function(a, b) {
    return eq(a, b);
  };

  // Is a given array, string, or object empty?
  // An "empty" object has no enumerable own-properties.
  _.isEmpty = function(obj) {
    if (obj == null) return true;
    if (isArrayLike(obj) && (_.isArray(obj) || _.isString(obj) || _.isArguments(obj))) return obj.length === 0;
    return _.keys(obj).length === 0;
  };

  // Is a given value a DOM element?
  _.isElement = function(obj) {
    return !!(obj && obj.nodeType === 1);
  };

  // Is a given value an array?
  // Delegates to ECMA5's native Array.isArray
  _.isArray = nativeIsArray || function(obj) {
    return toString.call(obj) === '[object Array]';
  };

  // Is a given variable an object?
  _.isObject = function(obj) {
    var type = typeof obj;
    return type === 'function' || type === 'object' && !!obj;
  };

  // Add some isType methods: isArguments, isFunction, isString, isNumber, isDate, isRegExp, isError.
  _.each(['Arguments', 'Function', 'String', 'Number', 'Date', 'RegExp', 'Error'], function(name) {
    _['is' + name] = function(obj) {
      return toString.call(obj) === '[object ' + name + ']';
    };
  });

  // Define a fallback version of the method in browsers (ahem, IE < 9), where
  // there isn't any inspectable "Arguments" type.
  if (!_.isArguments(arguments)) {
    _.isArguments = function(obj) {
      return _.has(obj, 'callee');
    };
  }

  // Optimize `isFunction` if appropriate. Work around some typeof bugs in old v8,
  // IE 11 (#1621), and in Safari 8 (#1929).
  if (typeof /./ != 'function' && typeof Int8Array != 'object') {
    _.isFunction = function(obj) {
      return typeof obj == 'function' || false;
    };
  }

  // Is a given object a finite number?
  _.isFinite = function(obj) {
    return isFinite(obj) && !isNaN(parseFloat(obj));
  };

  // Is the given value `NaN`? (NaN is the only number which does not equal itself).
  _.isNaN = function(obj) {
    return _.isNumber(obj) && obj !== +obj;
  };

  // Is a given value a boolean?
  _.isBoolean = function(obj) {
    return obj === true || obj === false || toString.call(obj) === '[object Boolean]';
  };

  // Is a given value equal to null?
  _.isNull = function(obj) {
    return obj === null;
  };

  // Is a given variable undefined?
  _.isUndefined = function(obj) {
    return obj === void 0;
  };

  // Shortcut function for checking if an object has a given property directly
  // on itself (in other words, not on a prototype).
  _.has = function(obj, key) {
    return obj != null && hasOwnProperty.call(obj, key);
  };

  // Utility Functions
  // -----------------

  // Run Underscore.js in *noConflict* mode, returning the `_` variable to its
  // previous owner. Returns a reference to the Underscore object.
  _.noConflict = function() {
    root._ = previousUnderscore;
    return this;
  };

  // Keep the identity function around for default iteratees.
  _.identity = function(value) {
    return value;
  };

  // Predicate-generating functions. Often useful outside of Underscore.
  _.constant = function(value) {
    return function() {
      return value;
    };
  };

  _.noop = function(){};

  _.property = property;

  // Generates a function for a given object that returns a given property.
  _.propertyOf = function(obj) {
    return obj == null ? function(){} : function(key) {
      return obj[key];
    };
  };

  // Returns a predicate for checking whether an object has a given set of
  // `key:value` pairs.
  _.matcher = _.matches = function(attrs) {
    attrs = _.extendOwn({}, attrs);
    return function(obj) {
      return _.isMatch(obj, attrs);
    };
  };

  // Run a function **n** times.
  _.times = function(n, iteratee, context) {
    var accum = Array(Math.max(0, n));
    iteratee = optimizeCb(iteratee, context, 1);
    for (var i = 0; i < n; i++) accum[i] = iteratee(i);
    return accum;
  };

  // Return a random integer between min and max (inclusive).
  _.random = function(min, max) {
    if (max == null) {
      max = min;
      min = 0;
    }
    return min + Math.floor(Math.random() * (max - min + 1));
  };

  // A (possibly faster) way to get the current timestamp as an integer.
  _.now = Date.now || function() {
    return new Date().getTime();
  };

   // List of HTML entities for escaping.
  var escapeMap = {
    '&': '&amp;',
    '<': '&lt;',
    '>': '&gt;',
    '"': '&quot;',
    "'": '&#x27;',
    '`': '&#x60;'
  };
  var unescapeMap = _.invert(escapeMap);

  // Functions for escaping and unescaping strings to/from HTML interpolation.
  var createEscaper = function(map) {
    var escaper = function(match) {
      return map[match];
    };
    // Regexes for identifying a key that needs to be escaped
    var source = '(?:' + _.keys(map).join('|') + ')';
    var testRegexp = RegExp(source);
    var replaceRegexp = RegExp(source, 'g');
    return function(string) {
      string = string == null ? '' : '' + string;
      return testRegexp.test(string) ? string.replace(replaceRegexp, escaper) : string;
    };
  };
  _.escape = createEscaper(escapeMap);
  _.unescape = createEscaper(unescapeMap);

  // If the value of the named `property` is a function then invoke it with the
  // `object` as context; otherwise, return it.
  _.result = function(object, property, fallback) {
    var value = object == null ? void 0 : object[property];
    if (value === void 0) {
      value = fallback;
    }
    return _.isFunction(value) ? value.call(object) : value;
  };

  // Generate a unique integer id (unique within the entire client session).
  // Useful for temporary DOM ids.
  var idCounter = 0;
  _.uniqueId = function(prefix) {
    var id = ++idCounter + '';
    return prefix ? prefix + id : id;
  };

  // By default, Underscore uses ERB-style template delimiters, change the
  // following template settings to use alternative delimiters.
  _.templateSettings = {
    evaluate    : /<%([\s\S]+?)%>/g,
    interpolate : /<%=([\s\S]+?)%>/g,
    escape      : /<%-([\s\S]+?)%>/g
  };

  // When customizing `templateSettings`, if you don't want to define an
  // interpolation, evaluation or escaping regex, we need one that is
  // guaranteed not to match.
  var noMatch = /(.)^/;

  // Certain characters need to be escaped so that they can be put into a
  // string literal.
  var escapes = {
    "'":      "'",
    '\\':     '\\',
    '\r':     'r',
    '\n':     'n',
    '\u2028': 'u2028',
    '\u2029': 'u2029'
  };

  var escaper = /\\|'|\r|\n|\u2028|\u2029/g;

  var escapeChar = function(match) {
    return '\\' + escapes[match];
  };

  // JavaScript micro-templating, similar to John Resig's implementation.
  // Underscore templating handles arbitrary delimiters, preserves whitespace,
  // and correctly escapes quotes within interpolated code.
  // NB: `oldSettings` only exists for backwards compatibility.
  _.template = function(text, settings, oldSettings) {
    if (!settings && oldSettings) settings = oldSettings;
    settings = _.defaults({}, settings, _.templateSettings);

    // Combine delimiters into one regular expression via alternation.
    var matcher = RegExp([
      (settings.escape || noMatch).source,
      (settings.interpolate || noMatch).source,
      (settings.evaluate || noMatch).source
    ].join('|') + '|$', 'g');

    // Compile the template source, escaping string literals appropriately.
    var index = 0;
    var source = "__p+='";
    text.replace(matcher, function(match, escape, interpolate, evaluate, offset) {
      source += text.slice(index, offset).replace(escaper, escapeChar);
      index = offset + match.length;

      if (escape) {
        source += "'+\n((__t=(" + escape + "))==null?'':_.escape(__t))+\n'";
      } else if (interpolate) {
        source += "'+\n((__t=(" + interpolate + "))==null?'':__t)+\n'";
      } else if (evaluate) {
        source += "';\n" + evaluate + "\n__p+='";
      }

      // Adobe VMs need the match returned to produce the correct offest.
      return match;
    });
    source += "';\n";

    // If a variable is not specified, place data values in local scope.
    if (!settings.variable) source = 'with(obj||{}){\n' + source + '}\n';

    source = "var __t,__p='',__j=Array.prototype.join," +
      "print=function(){__p+=__j.call(arguments,'');};\n" +
      source + 'return __p;\n';

    try {
      var render = new Function(settings.variable || 'obj', '_', source);
    } catch (e) {
      e.source = source;
      throw e;
    }

    var template = function(data) {
      return render.call(this, data, _);
    };

    // Provide the compiled source as a convenience for precompilation.
    var argument = settings.variable || 'obj';
    template.source = 'function(' + argument + '){\n' + source + '}';

    return template;
  };

  // Add a "chain" function. Start chaining a wrapped Underscore object.
  _.chain = function(obj) {
    var instance = _(obj);
    instance._chain = true;
    return instance;
  };

  // OOP
  // ---------------
  // If Underscore is called as a function, it returns a wrapped object that
  // can be used OO-style. This wrapper holds altered versions of all the
  // underscore functions. Wrapped objects may be chained.

  // Helper function to continue chaining intermediate results.
  var result = function(instance, obj) {
    return instance._chain ? _(obj).chain() : obj;
  };

  // Add your own custom functions to the Underscore object.
  _.mixin = function(obj) {
    _.each(_.functions(obj), function(name) {
      var func = _[name] = obj[name];
      _.prototype[name] = function() {
        var args = [this._wrapped];
        push.apply(args, arguments);
        return result(this, func.apply(_, args));
      };
    });
  };

  // Add all of the Underscore functions to the wrapper object.
  _.mixin(_);

  // Add all mutator Array functions to the wrapper.
  _.each(['pop', 'push', 'reverse', 'shift', 'sort', 'splice', 'unshift'], function(name) {
    var method = ArrayProto[name];
    _.prototype[name] = function() {
      var obj = this._wrapped;
      method.apply(obj, arguments);
      if ((name === 'shift' || name === 'splice') && obj.length === 0) delete obj[0];
      return result(this, obj);
    };
  });

  // Add all accessor Array functions to the wrapper.
  _.each(['concat', 'join', 'slice'], function(name) {
    var method = ArrayProto[name];
    _.prototype[name] = function() {
      return result(this, method.apply(this._wrapped, arguments));
    };
  });

  // Extracts the result from a wrapped and chained object.
  _.prototype.value = function() {
    return this._wrapped;
  };

  // Provide unwrapping proxy for some methods used in engine operations
  // such as arithmetic and JSON stringification.
  _.prototype.valueOf = _.prototype.toJSON = _.prototype.value;

  _.prototype.toString = function() {
    return '' + this._wrapped;
  };

  // AMD registration happens at the end for compatibility with AMD loaders
  // that may not enforce next-turn semantics on modules. Even though general
  // practice for AMD registration is to be anonymous, underscore registers
  // as a named module because, like jQuery, it is a base library that is
  // popular enough to be bundled in a third party lib, but not be part of
  // an AMD load request. Those cases could generate an error when an
  // anonymous define() is called outside of a loader request.
  if (typeof define === 'function' && define.amd) {
    define('underscore', [], function() {
      return _;
    });
  }
}.call(this));
/*! airbrake-js v1.6.7 */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(function(){try{return require("os")}catch(t){}}(),require("cross-fetch")):"function"==typeof define&&define.amd?define(["os","cross-fetch"],e):"object"==typeof exports?exports.Client=e(function(){try{return require("os")}catch(t){}}(),require("cross-fetch")):(t.airbrakeJs=t.airbrakeJs||{},t.airbrakeJs.Client=e(t[void 0],t.fetch))}("undefined"!=typeof self?self:this,function(t,e){return function(t){var e={};function r(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)r.d(n,o,function(e){return t[e]}.bind(null,o));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=4)}([function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(20),o=r(22);e.makeRequester=function(t){return t.request?o.makeRequester(t.request):n.request},e.errors={unauthorized:new Error("airbrake: unauthorized: project id or key are wrong"),ipRateLimited:new Error("airbrake: IP is rate limited")}},function(t,e,r){"use strict";e.a=function(t){var e=this.constructor;return this.then(function(r){return e.resolve(t()).then(function(){return r})},function(r){return e.resolve(t()).then(function(){return e.reject(r)})})}},function(t,e){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(t){"object"==typeof window&&(r=window)}t.exports=r},function(t,e,r){"use strict";(function(t){var n=r(1),o=setTimeout;function i(){}function s(t){if(!(this instanceof s))throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],h(t,this)}function a(t,e){for(;3===t._state;)t=t._value;0!==t._state?(t._handled=!0,s._immediateFn(function(){var r=1===t._state?e.onFulfilled:e.onRejected;if(null!==r){var n;try{n=r(t._value)}catch(t){return void c(e.promise,t)}u(e.promise,n)}else(1===t._state?u:c)(e.promise,t._value)})):t._deferreds.push(e)}function u(t,e){try{if(e===t)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var r=e.then;if(e instanceof s)return t._state=3,t._value=e,void f(t);if("function"==typeof r)return void h((n=r,o=e,function(){n.apply(o,arguments)}),t)}t._state=1,t._value=e,f(t)}catch(e){c(t,e)}var n,o}function c(t,e){t._state=2,t._value=e,f(t)}function f(t){2===t._state&&0===t._deferreds.length&&s._immediateFn(function(){t._handled||s._unhandledRejectionFn(t._value)});for(var e=0,r=t._deferreds.length;e<r;e++)a(t,t._deferreds[e]);t._deferreds=null}function l(t,e,r){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.promise=r}function h(t,e){var r=!1;try{t(function(t){r||(r=!0,u(e,t))},function(t){r||(r=!0,c(e,t))})}catch(t){if(r)return;r=!0,c(e,t)}}s.prototype.catch=function(t){return this.then(null,t)},s.prototype.then=function(t,e){var r=new this.constructor(i);return a(this,new l(t,e,r)),r},s.prototype.finally=n.a,s.all=function(t){return new s(function(e,r){if(!t||void 0===t.length)throw new TypeError("Promise.all accepts an array");var n=Array.prototype.slice.call(t);if(0===n.length)return e([]);var o=n.length;function i(t,s){try{if(s&&("object"==typeof s||"function"==typeof s)){var a=s.then;if("function"==typeof a)return void a.call(s,function(e){i(t,e)},r)}n[t]=s,0==--o&&e(n)}catch(t){r(t)}}for(var s=0;s<n.length;s++)i(s,n[s])})},s.resolve=function(t){return t&&"object"==typeof t&&t.constructor===s?t:new s(function(e){e(t)})},s.reject=function(t){return new s(function(e,r){r(t)})},s.race=function(t){return new s(function(e,r){for(var n=0,o=t.length;n<o;n++)t[n].then(e,r)})},s._immediateFn="function"==typeof t&&function(e){t(e)}||function(t){o(t,0)},s._unhandledRejectionFn=function(t){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",t)},e.a=s}).call(this,r(7).setImmediate)},function(t,e,r){t.exports=r(5)},function(t,e,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};r(6);var i=o(r(9)),s=o(r(10)),a=o(r(13)),u=o(r(14)),c=o(r(15)),f=o(r(16)),l=o(r(18)),h=o(r(19)),p=r(0),d=r(23),m=r(25),v=function(){function t(t){var e=this;if(this.filters=[],this.offline=!1,this.todo=[],this.onClose=[],!t.projectId||!t.projectKey)throw new Error("airbrake: projectId and projectKey are required");this.opts=t,this.opts.host=this.opts.host||"https://api.airbrake.io",this.opts.timeout=this.opts.timeout||1e4,this.opts.keysBlacklist=this.opts.keysBlacklist||[/password/,/secret/],this.url=this.opts.host+"/api/v3/projects/"+this.opts.projectId+"/notices?key="+this.opts.projectKey,this.processor=this.opts.processor||s.default,this.requester=p.makeRequester(this.opts),this.addFilter(c.default),this.addFilter(u.default()),this.addFilter(l.default),this.addFilter(a.default),!this.opts.environment&&"undefined"!=typeof process&&process.env.NODE_ENV&&(this.opts.environment=process.env.NODE_ENV),this.opts.environment&&this.addFilter(function(t){return t.context.environment=e.opts.environment,t}),"object"==typeof window?(this.addFilter(h.default),window.addEventListener&&(this.onOnline=this.onOnline.bind(this),window.addEventListener("online",this.onOnline),this.onOffline=this.onOffline.bind(this),window.addEventListener("offline",this.onOffline),this.onUnhandledrejection=this.onUnhandledrejection.bind(this),window.addEventListener("unhandledrejection",this.onUnhandledrejection),this.onClose.push(function(){window.removeEventListener("online",e.onOnline),window.removeEventListener("offline",e.onOffline),window.removeEventListener("unhandledrejection",e.onUnhandledrejection)}))):this.addFilter(f.default);var r,n=t.instrumentation||{};void 0===typeof n.console&&(n.console=!((r=t.environment)&&r.startsWith&&r.startsWith("dev"))),this.historian=d.Historian.instance(n),this.historian.registerNotifier(this)}return t.prototype.close=function(){for(var t=0,e=this.onClose;t<e.length;t++){(0,e[t])()}this.historian.unregisterNotifier(this)},t.prototype.addFilter=function(t){this.filters.push(t)},t.prototype.notify=function(t){var e=this,r={id:"",errors:[],context:n({severity:"error"},t.context),params:t.params||{},environment:t.environment||{},session:t.session||{}};if("object"==typeof t&&void 0!==t.error||(t={error:t}),!t.error)return r.error=new Error("airbrake: got err="+JSON.stringify(t.error)+", wanted an Error"),Promise.resolve(r);if(this.opts.ignoreWindowError&&t.context&&t.context.windowError)return r.error=new Error("airbrake: window error is ignored"),Promise.resolve(r);if(this.offline)return new Promise(function(n,o){for(e.todo.push({err:t,resolve:n,reject:o});e.todo.length>100;){var i=e.todo.shift();if(void 0===i)break;r.error=new Error("airbrake: offline queue is too large"),i.resolve(r)}});var o=this.historian.getHistory();o.length>0&&(r.context.history=o);var i=this.processor(t.error);r.errors.push(i);for(var s=0,a=this.filters;s<a.length;s++){var u=(0,a[s])(r);if(null===u)return r.error=new Error("airbrake: error is filtered"),Promise.resolve(r);r=u}return r.context||(r.context={}),r.context.language="JavaScript",r.context.notifier={name:"airbrake-js",version:"1.6.7",url:"https://github.com/airbrake/airbrake-js"},this.sendNotice(r)},t.prototype.sendNotice=function(t){var e=i.default(t,{keysBlacklist:this.opts.keysBlacklist});if(this.opts.reporter){if("function"==typeof this.opts.reporter)return this.opts.reporter(t);console.warn("airbrake: options.reporter must be a function")}var r={method:"POST",url:this.url,body:e};return this.requester(r).then(function(e){return t.id=e.json.id,t}).catch(function(e){return t.error=e,t})},t.prototype.wrap=function(t,e){if(void 0===e&&(e=[]),t._airbrake)return t;var r=this,n=function(){var e=Array.prototype.slice.call(arguments),n=r.wrapArguments(e);try{return t.apply(this,n)}catch(t){throw r.notify({error:t,params:{arguments:e}}),this.historian.ignoreNextWindowError(),t}};for(var o in t)t.hasOwnProperty(o)&&(n[o]=t[o]);for(var i=0,s=e;i<s.length;i++){o=s[i];t.hasOwnProperty(o)&&(n[o]=t[o])}return n._airbrake=!0,n.inner=t,n},t.prototype.wrapArguments=function(t){for(var e=0;e<t.length;e++){var r=t[e];"function"==typeof r&&(t[e]=this.wrap(r))}return t},t.prototype.call=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];return this.wrap(t).apply(this,Array.prototype.slice.call(arguments,1))},t.prototype.onerror=function(){this.historian.onerror.apply(this.historian,arguments)},t.prototype.notifyRequest=function(t){this.routes||(this.routes=new m.Routes(this.opts)),this.routes.notifyRequest(t)},t.prototype.onOnline=function(){this.offline=!1;for(var t=function(t){e.notify(t.err).then(function(e){t.resolve(e)})},e=this,r=0,n=this.todo;r<n.length;r++){t(n[r])}this.todo=[]},t.prototype.onOffline=function(){this.offline=!0},t.prototype.onUnhandledrejection=function(t){var e=t.reason||t.detail&&t.detail.reason;if(e){var r=e.message||String(e);r.indexOf&&0===r.indexOf("airbrake: ")||this.notify(e)}},t}();t.exports=v},function(t,e,r){"use strict";r.r(e),function(t){var e=r(3),n=r(1),o=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==t)return t;throw new Error("unable to locate global object")}();"Promise"in o?o.Promise.prototype.finally||(o.Promise.prototype.finally=n.a):o.Promise=e.a}.call(this,r(2))},function(t,e,r){(function(t){var n=void 0!==t&&t||"undefined"!=typeof self&&self||window,o=Function.prototype.apply;function i(t,e){this._id=t,this._clearFn=e}e.setTimeout=function(){return new i(o.call(setTimeout,n,arguments),clearTimeout)},e.setInterval=function(){return new i(o.call(setInterval,n,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},i.prototype.unref=i.prototype.ref=function(){},i.prototype.close=function(){this._clearFn.call(n,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},r(8),e.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==t&&t.setImmediate||this&&this.setImmediate,e.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==t&&t.clearImmediate||this&&this.clearImmediate}).call(this,r(2))},function(t,e,r){(function(t){!function(t,e){"use strict";if(!t.setImmediate){var r,n,o,i,s,a=1,u={},c=!1,f=t.document,l=Object.getPrototypeOf&&Object.getPrototypeOf(t);l=l&&l.setTimeout?l:t,"[object process]"==={}.toString.call(t.process)?r=function(t){process.nextTick(function(){p(t)})}:!function(){if(t.postMessage&&!t.importScripts){var e=!0,r=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=r,e}}()?t.MessageChannel?((o=new MessageChannel).port1.onmessage=function(t){p(t.data)},r=function(t){o.port2.postMessage(t)}):f&&"onreadystatechange"in f.createElement("script")?(n=f.documentElement,r=function(t){var e=f.createElement("script");e.onreadystatechange=function(){p(t),e.onreadystatechange=null,n.removeChild(e),e=null},n.appendChild(e)}):r=function(t){setTimeout(p,0,t)}:(i="setImmediate$"+Math.random()+"$",s=function(e){e.source===t&&"string"==typeof e.data&&0===e.data.indexOf(i)&&p(+e.data.slice(i.length))},t.addEventListener?t.addEventListener("message",s,!1):t.attachEvent("onmessage",s),r=function(e){t.postMessage(i+e,"*")}),l.setImmediate=function(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),n=0;n<e.length;n++)e[n]=arguments[n+1];var o={callback:t,args:e};return u[a]=o,r(a),a++},l.clearImmediate=h}function h(t){delete u[t]}function p(t){if(c)setTimeout(p,0,t);else{var r=u[t];if(r){c=!0;try{!function(t){var r=t.callback,n=t.args;switch(n.length){case 0:r();break;case 1:r(n[0]);break;case 2:r(n[0],n[1]);break;case 3:r(n[0],n[1],n[2]);break;default:r.apply(e,n)}}(r)}finally{h(t),c=!1}}}}}("undefined"==typeof self?void 0===t?this:t:self)}).call(this,r(2))},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=128;function o(t,e){return t>>e||1}e.default=function(t,e){var r=void 0===e?{}:e,n=r.maxLength,o=void 0===n?64e3:n,a=r.keysBlacklist,u=void 0===a?[]:a;if(t.errors)for(var c=0;c<t.errors.length;c++){var f=new i({keysBlacklist:u});t.errors[c]=f.truncate(t.errors[c])}for(var l="",h=["context","params","environment","session"],p=0;p<8;p++){for(var d={level:p,keysBlacklist:u},m=0,v=h;m<v.length;m++)(x=t[b=v[m]])&&(t[b]=s(x,d));if((l=JSON.stringify(t)).length<o)return l}var y={json:l.slice(0,Math.floor(o/2))+"..."};h.push("errors");for(var g=0,w=h;g<w.length;g++){var b,x;(x=t[b=w[g]])&&(l=JSON.stringify(x),y[b]=l.length)}var j=new Error("airbrake: notice exceeds max length and can't be truncated");throw j.params=y,j};var i=function(){function t(t){this.maxStringLength=1024,this.maxObjectLength=n,this.maxArrayLength=n,this.maxDepth=8,this.keys=[],this.keysBlacklist=[],this.seen=[];var e=t.level||0;this.keysBlacklist=t.keysBlacklist||[],this.maxStringLength=o(this.maxStringLength,e),this.maxObjectLength=o(this.maxObjectLength,e),this.maxArrayLength=o(this.maxArrayLength,e),this.maxDepth=o(this.maxDepth,e)}return t.prototype.truncate=function(t,e,r){if(void 0===e&&(e=""),void 0===r&&(r=0),null==t)return t;switch(typeof t){case"boolean":case"number":case"function":return t;case"string":return this.truncateString(t);case"object":break;default:return this.truncateString(String(t))}if(t instanceof String)return this.truncateString(t.toString());if(t instanceof Boolean||t instanceof Number||t instanceof Date||t instanceof RegExp)return t;if(t instanceof Error)return this.truncateString(t.toString());if(this.seen.indexOf(t)>=0)return"[Circular "+this.getPath(t)+"]";var n=function(t){return Object.prototype.toString.apply(t).slice("[object ".length,-1)}(t);if(++r>this.maxDepth)return"[Truncated "+n+"]";switch(this.keys.push(e),this.seen.push(t),n){case"Array":return this.truncateArray(t,r);case"Object":return this.truncateObject(t,r);default:var o=this.maxDepth;this.maxDepth=0;var i=this.truncateObject(t,r);return i.__type=n,this.maxDepth=o,i}},t.prototype.getPath=function(t){for(var e=this.seen.indexOf(t),r=[this.keys[e]],n=e;n>=0;n--){var o=this.seen[n];o&&a(o,r[0])===t&&(t=o,r.unshift(this.keys[n]))}return"~"+r.join(".")},t.prototype.truncateString=function(t){return t.length>this.maxStringLength?t.slice(0,this.maxStringLength)+"...":t},t.prototype.truncateArray=function(t,e){void 0===e&&(e=0);for(var r=0,n=[],o=0;o<t.length;o++){var i=t[o];if(n.push(this.truncate(i,o.toString(),e)),++r>=this.maxArrayLength)break}return n},t.prototype.truncateObject=function(t,e){void 0===e&&(e=0);var r=0,n={};for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o))if(u(o,this.keysBlacklist))n[o]="[Filtered]";else{var i=a(t,o);if(void 0!==i&&"function"!=typeof i&&(n[o]=this.truncate(i,o,e),++r>=this.maxObjectLength))break}return n},t}();function s(t,e){return void 0===e&&(e={}),new i(e).truncate(t)}function a(t,e){try{return t[e]}catch(t){return}}function u(t,e){for(var r=0,n=e;r<n.length;r++){var o=n[r];if(o===t)return!0;if(o instanceof RegExp&&t.match(o))return!0}return!1}e.truncate=s},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(11),o="object"==typeof console&&console.warn;function i(t){try{return n.parse(t)}catch(e){o&&t.stack&&console.warn("ErrorStackParser:",e.toString(),t.stack)}return t.fileName?[t]:[]}e.default=function(t){var e=[];if(!t.noStack){var r=i(t);if(0===r.length)try{throw new Error("fake")}catch(t){(r=i(t)).shift(),r.shift()}for(var n=0,o=r;n<o.length;n++){var s=o[n];e.push({function:s.functionName||"",file:s.fileName||"",line:s.lineNumber||0,column:s.columnNumber||0})}}return{type:t.name?t.name:"",message:t.message?String(t.message):String(t),backtrace:e}}},function(t,e,r){!function(e,n){"use strict";t.exports=n(r(12))}(0,function(t){"use strict";var e=/(^|@)\S+\:\d+/,r=/^\s*at .*(\S+\:\d+|\(native\))/m,n=/^(eval@)?(\[native code\])?$/;return{parse:function(t){if(void 0!==t.stacktrace||void 0!==t["opera#sourceloc"])return this.parseOpera(t);if(t.stack&&t.stack.match(r))return this.parseV8OrIE(t);if(t.stack)return this.parseFFOrSafari(t);throw new Error("Cannot parse given Error object")},extractLocation:function(t){if(-1===t.indexOf(":"))return[t];var e=/(.+?)(?:\:(\d+))?(?:\:(\d+))?$/.exec(t.replace(/[\(\)]/g,""));return[e[1],e[2]||void 0,e[3]||void 0]},parseV8OrIE:function(e){return e.stack.split("\n").filter(function(t){return!!t.match(r)},this).map(function(e){e.indexOf("(eval ")>-1&&(e=e.replace(/eval code/g,"eval").replace(/(\(eval at [^\()]*)|(\)\,.*$)/g,""));var r=e.replace(/^\s+/,"").replace(/\(eval code/g,"(").split(/\s+/).slice(1),n=this.extractLocation(r.pop()),o=r.join(" ")||void 0,i=["eval","<anonymous>"].indexOf(n[0])>-1?void 0:n[0];return new t({functionName:o,fileName:i,lineNumber:n[1],columnNumber:n[2],source:e})},this)},parseFFOrSafari:function(e){return e.stack.split("\n").filter(function(t){return!t.match(n)},this).map(function(e){if(e.indexOf(" > eval")>-1&&(e=e.replace(/ line (\d+)(?: > eval line \d+)* > eval\:\d+\:\d+/g,":$1")),-1===e.indexOf("@")&&-1===e.indexOf(":"))return new t({functionName:e});var r=/((.*".+"[^@]*)?[^@]*)(?:@)/,n=e.match(r),o=n&&n[1]?n[1]:void 0,i=this.extractLocation(e.replace(r,""));return new t({functionName:o,fileName:i[0],lineNumber:i[1],columnNumber:i[2],source:e})},this)},parseOpera:function(t){return!t.stacktrace||t.message.indexOf("\n")>-1&&t.message.split("\n").length>t.stacktrace.split("\n").length?this.parseOpera9(t):t.stack?this.parseOpera11(t):this.parseOpera10(t)},parseOpera9:function(e){for(var r=/Line (\d+).*script (?:in )?(\S+)/i,n=e.message.split("\n"),o=[],i=2,s=n.length;i<s;i+=2){var a=r.exec(n[i]);a&&o.push(new t({fileName:a[2],lineNumber:a[1],source:n[i]}))}return o},parseOpera10:function(e){for(var r=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,n=e.stacktrace.split("\n"),o=[],i=0,s=n.length;i<s;i+=2){var a=r.exec(n[i]);a&&o.push(new t({functionName:a[3]||void 0,fileName:a[2],lineNumber:a[1],source:n[i]}))}return o},parseOpera11:function(r){return r.stack.split("\n").filter(function(t){return!!t.match(e)&&!t.match(/^Error created at/)},this).map(function(e){var r,n=e.split("@"),o=this.extractLocation(n.pop()),i=n.shift()||"",s=i.replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^\)]*\)/g,"")||void 0;i.match(/\(([^\)]*)\)/)&&(r=i.replace(/^[^\(]+\(([^\)]*)\)$/,"$1"));var a=void 0===r||"[arguments not available]"===r?void 0:r.split(",");return new t({functionName:s,args:a,fileName:o[0],lineNumber:o[1],columnNumber:o[2],source:e})},this)}}})},function(t,e,r){!function(e,r){"use strict";t.exports=r()}(0,function(){"use strict";function t(t){return!isNaN(parseFloat(t))&&isFinite(t)}function e(t){return t.charAt(0).toUpperCase()+t.substring(1)}function r(t){return function(){return this[t]}}var n=["isConstructor","isEval","isNative","isToplevel"],o=["columnNumber","lineNumber"],i=["fileName","functionName","source"],s=n.concat(o,i,["args"]);function a(t){if(t instanceof Object)for(var r=0;r<s.length;r++)t.hasOwnProperty(s[r])&&void 0!==t[s[r]]&&this["set"+e(s[r])](t[s[r]])}a.prototype={getArgs:function(){return this.args},setArgs:function(t){if("[object Array]"!==Object.prototype.toString.call(t))throw new TypeError("Args must be an Array");this.args=t},getEvalOrigin:function(){return this.evalOrigin},setEvalOrigin:function(t){if(t instanceof a)this.evalOrigin=t;else{if(!(t instanceof Object))throw new TypeError("Eval Origin must be an Object or StackFrame");this.evalOrigin=new a(t)}},toString:function(){return(this.getFunctionName()||"{anonymous}")+("("+(this.getArgs()||[]).join(",")+")")+(this.getFileName()?"@"+this.getFileName():"")+(t(this.getLineNumber())?":"+this.getLineNumber():"")+(t(this.getColumnNumber())?":"+this.getColumnNumber():"")}};for(var u=0;u<n.length;u++)a.prototype["get"+e(n[u])]=r(n[u]),a.prototype["set"+e(n[u])]=function(t){return function(e){this[t]=Boolean(e)}}(n[u]);for(var c=0;c<o.length;c++)a.prototype["get"+e(o[c])]=r(o[c]),a.prototype["set"+e(o[c])]=function(e){return function(r){if(!t(r))throw new TypeError(e+" must be a Number");this[e]=Number(r)}}(o[c]);for(var f=0;f<i.length;f++)a.prototype["get"+e(i[f])]=r(i[f]),a.prototype["set"+e(i[f])]=function(t){return function(e){this[t]=String(e)}}(i[f]);return a})},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=new RegExp(["^","\\[(\\$.+)\\]","\\s","([\\s\\S]+)","$"].join(""));e.default=function(t){var e=t.errors[0];if(""!==e.type&&"Error"!==e.type)return t;var r=e.message.match(n);return null!==r&&(e.type=r[1],e.message=r[2]),t}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){var t,e;return function(r){var n=JSON.stringify(r.errors);return n===t?null:(e&&clearTimeout(e),t=n,e=setTimeout(function(){t=""},1e3),r)}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=["Script error","Script error.","InvalidAccessError"];e.default=function(t){var e=t.errors[0];return""===e.type&&-1!==n.indexOf(e.message)?null:e.backtrace&&e.backtrace.length>0&&"<anonymous>"===e.backtrace[0].file?null:t}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e;try{e=r(17)}catch(t){}return e&&(t.context.os=e.type()+"/"+e.release(),t.context.architecture=e.arch(),t.context.hostname=e.hostname(),t.params.os={homedir:e.homedir(),uptime:e.uptime(),freemem:e.freemem(),totalmem:e.totalmem(),loadavg:e.loadavg()}),process&&(t.context.platform=process.platform,t.context.rootDirectory||(t.context.rootDirectory=process.cwd()),t.params.process={pid:process.pid,cwd:process.cwd(),execPath:process.execPath,argv:process.argv},["uptime","cpuUsage","memoryUsage"].map(function(e){process[e]&&(t.params.process[e]=process[e]())})),t}},function(e,r){if(void 0===t){var n=new Error("Cannot find module 'undefined'");throw n.code="MODULE_NOT_FOUND",n}e.exports=t},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=new RegExp(["^","Uncaught\\s","(.+?)",":\\s","(.+)","$"].join(""));e.default=function(t){var e=t.errors[0];if(""!==e.type&&"Error"!==e.type)return t;var r=e.message.match(n);return null!==r&&(e.type=r[1],e.message=r[2]),t}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return window.navigator&&window.navigator.userAgent&&(t.context.userAgent=window.navigator.userAgent),window.location&&(t.context.url=String(window.location),t.context.rootDirectory=window.location.protocol+"//"+window.location.host),t}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(21),o=r(0),i=0;e.request=function(t){if(Date.now()/1e3<i)return Promise.reject(o.errors.ipRateLimited);var e={method:t.method,body:t.body};return n(t.url,e).then(function(t){if(401===t.status)throw o.errors.unauthorized;if(429===t.status){var e=t.headers.get("X-RateLimit-Delay");if(!e)throw o.errors.ipRateLimited;var r=parseInt(e,10);throw r>0&&(i=Date.now()/1e3+r),o.errors.ipRateLimited}return 204===t.status?{json:null}:t.status>=200&&t.status<300?t.json().then(function(t){return{json:t}}):t.status>=400&&t.status<500?t.json().then(function(t){throw new Error(t.message)}):t.text().then(function(e){throw new Error("airbrake: fetch: unexpected response: code="+t.status+" body='"+e+"'")})})}},function(t,r){t.exports=e},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(0);e.makeRequester=function(t){return function(e){return function(t,e){return Date.now()/1e3<o?Promise.reject(n.errors.ipRateLimited):new Promise(function(r,i){e({url:t.url,method:t.method,body:t.body,headers:{"content-type":"application/json"},timeout:t.timeout},function(t,e,s){if(t)i(t);else{if(!e.statusCode)return t=new Error("airbrake: request: response statusCode is "+e.statusCode),void i(t);if(401!==e.statusCode)if(429!==e.statusCode)if(204!==e.statusCode)if(e.statusCode>=200&&e.statusCode<300){var a=void 0;try{a=JSON.parse(s)}catch(t){return void i(t)}r(a)}else{if(e.statusCode>=400&&e.statusCode<500){var a=void 0;try{a=JSON.parse(s)}catch(t){return void i(t)}return t=new Error(a.message),void i(t)}s=s.trim(),t=new Error("airbrake: node: unexpected response: code="+e.statusCode+" body='"+s+"'"),i(t)}else r({json:null});else{i(n.errors.ipRateLimited);var u=e.headers["x-ratelimit-delay"];if(!u)return;var c=void 0;if("string"==typeof u)c=u;else{if(!(u instanceof Array))return;c=u[0]}var f=parseInt(c,10);f>0&&(o=Date.now()/1e3+f)}else i(n.errors.unauthorized)}})})}(e,t)}};var o=0},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(24),o=["debug","log","info","warn","error"],i=function(){function t(t){void 0===t&&(t={});var e=this;if(this.historyMaxLen=20,this.notifiers=[],this.errors=[],this.ignoreWindowError=0,this.history=[],this.ignoreNextXHR=0,s(t.console)&&"object"==typeof console&&console.error&&(this.consoleError=console.error),"object"==typeof window){if(s(t.onerror)){var r=this,n=window.onerror;window.onerror=function(){n&&n.apply(this,arguments),r.onerror.apply(r,arguments)}}this.domEvents(),s(t.fetch)&&"function"==typeof fetch&&this.instrumentFetch(),s(t.history)&&"object"==typeof history&&this.location()}"undefined"==typeof window&&"object"==typeof process&&"function"==typeof process.on&&(process.on("uncaughtException",function(t){e.notify(t).then(function(){1===process.listeners("uncaughtException").length&&(e.consoleError&&e.consoleError("uncaught exception",t),process.exit(1))})}),process.on("unhandledRejection",function(t,r){var n=t.message||String(t);n.indexOf&&0===n.indexOf("airbrake: ")||e.notify(t).then(function(){1===process.listeners("unhandledRejection").length&&(e.consoleError&&e.consoleError("unhandled rejection",t),process.exit(1))})})),s(t.console)&&"object"==typeof console&&this.console(),s(t.xhr)&&"undefined"!=typeof XMLHttpRequest&&this.xhr()}return t.instance=function(e){return void 0===e&&(e={}),t._instance||(t._instance=new t(e)),t._instance},t.prototype.registerNotifier=function(t){this.notifiers.push(t);for(var e=0,r=this.errors;e<r.length;e++){var n=r[e];this.notifyNotifiers(n)}this.errors=[]},t.prototype.unregisterNotifier=function(t){var e=this.notifiers.indexOf(t);-1!==e&&this.notifiers.splice(e,1)},t.prototype.notify=function(t){return this.notifiers.length>0?this.notifyNotifiers(t):(this.errors.push(t),this.errors.length>this.historyMaxLen&&(this.errors=this.errors.slice(-this.historyMaxLen)),Promise.resolve(null))},t.prototype.notifyNotifiers=function(t){for(var e=[],r=0,n=this.notifiers;r<n.length;r++){var o=n[r];e.push(o.notify(t))}return Promise.all(e).then(function(t){return t[0]})},t.prototype.onerror=function(t,e,r,n,o){this.ignoreWindowError>0||(o?this.notify({error:o,context:{windowError:!0}}):e&&r&&this.notify({error:{message:t,fileName:e,lineNumber:r,columnNumber:n,noStack:!0},context:{windowError:!0}}))},t.prototype.ignoreNextWindowError=function(){var t=this;this.ignoreWindowError++,setTimeout(function(){return t.ignoreWindowError--})},t.prototype.getHistory=function(){return this.history},t.prototype.pushHistory=function(t){this.isDupState(t)?this.lastState.num?this.lastState.num++:this.lastState.num=2:(t.date||(t.date=new Date),this.history.push(t),this.lastState=t,this.history.length>this.historyMaxLen&&(this.history=this.history.slice(-this.historyMaxLen)))},t.prototype.isDupState=function(t){if(!this.lastState)return!1;for(var e in t)if(t.hasOwnProperty(e)&&"date"!==e&&t[e]!==this.lastState[e])return!1;return!0},t.prototype.domEvents=function(){var t=n.makeEventHandler(this);window.addEventListener&&(window.addEventListener("load",t),window.addEventListener("error",function(e){"error"in e||t(e)},!0)),"object"==typeof document&&document.addEventListener&&(document.addEventListener("DOMContentLoaded",t),document.addEventListener("click",t),document.addEventListener("keypress",t))},t.prototype.console=function(){for(var t=this,e=function(e){if(!(e in console))return"continue";var r=console[e],n=function(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];r.apply(console,n),t.pushHistory({type:"log",severity:e,arguments:n})};n.inner=r,console[e]=n},r=0,n=o;r<n.length;r++){e(n[r])}},t.prototype.unwrapConsole=function(){for(var t=0,e=o;t<e.length;t++){var r=e[t];r in console&&console[r].inner&&(console[r]=console[r].inner)}},t.prototype.instrumentFetch=function(){var t=this,e=window.fetch;window.fetch=function(r,n){var o={type:"xhr",date:new Date};return o.method=n&&n.method?n.method:"GET","string"==typeof r?o.url=r:(o.method=r.method,o.url=r.url),t.ignoreNextXHR++,setTimeout(function(){return t.ignoreNextXHR--}),e.apply(this,arguments).then(function(e){return o.statusCode=e.status,o.duration=(new Date).getTime()-o.date.getTime(),t.pushHistory(o),e}).catch(function(e){throw o.error=e,o.duration=(new Date).getTime()-o.date.getTime(),t.pushHistory(o),e})}},t.prototype.xhr=function(){var t=this,e=XMLHttpRequest.prototype.open;XMLHttpRequest.prototype.open=function(r,n,o,i,s){0===t.ignoreNextXHR&&(this.__state={type:"xhr",method:r,url:n}),e.apply(this,arguments)};var r=XMLHttpRequest.prototype.send;XMLHttpRequest.prototype.send=function(e){var n=this.onreadystatechange;return this.onreadystatechange=function(e){if(4===this.readyState&&this.__state&&t.recordReq(this),n)return n.apply(this,arguments)},this.__state&&(this.__state.date=new Date),r.apply(this,arguments)}},t.prototype.recordReq=function(t){var e=t.__state;e.statusCode=t.status,e.duration=(new Date).getTime()-e.date.getTime(),this.pushHistory(e)},t.prototype.location=function(){this.lastLocation=document.location.pathname;var t=this,e=window.onpopstate;window.onpopstate=function(r){if(t.recordLocation(document.location.pathname),e)return e.apply(this,arguments)};var r=history.pushState;history.pushState=function(e,n,o){o&&t.recordLocation(o.toString()),r.apply(this,arguments)}},t.prototype.recordLocation=function(t){var e=t.indexOf("://");e>=0?(e=(t=t.slice(e+3)).indexOf("/"),t=e>=0?t.slice(e):"/"):"/"!==t.charAt(0)&&(t="/"+t),this.pushHistory({type:"location",from:this.lastLocation,to:t}),this.lastLocation=t},t}();function s(t){return void 0===t||!0===t}e.Historian=i},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=["type","name","src"];function o(t){if(!t)return"";var e=[];if(t.tagName&&e.push(t.tagName.toLowerCase()),t.id&&(e.push("#"),e.push(t.id)),t.classList&&Array.from)e.push("."),e.push(Array.from(t.classList).join("."));else if(t.className){var r=function(t){if(t.split)return t.split(" ").join(".");if(t.baseVal&&t.baseVal.split)return t.baseVal.split(" ").join(".");return console.error("unsupported HTMLElement.className type",typeof t),""}(t.className);""!==r&&(e.push("."),e.push(r))}if(t.getAttribute)for(var o=0,i=n;o<i.length;o++){var s=i[o],a=t.getAttribute(s);a&&e.push("["+s+'="'+a+'"]')}return e.join("")}e.makeEventHandler=function(t){return function(e){var r;try{r=e.target}catch(t){return}if(r){var n={type:e.type};try{n.target=function(t){for(var e=[],r=t;r;){var n=o(r);if(""!==n&&(e.push(n),e.length>10))break;r=r.parentNode}return 0===e.length?String(t):e.reverse().join(" > ")}(r)}catch(t){n.target="<"+String(t)+">"}t.pushHistory(n)}}}},function(t,e,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var o=r(0),i=function(){function t(t){this.m={},this.opts=t,this.url=this.opts.host+"/api/v5/projects/"+this.opts.projectId+"/routes-stats?key="+this.opts.projectKey,this.requester=o.makeRequester(this.opts)}return t.prototype.notifyRequest=function(t){var e=this,r=function(t,e){if(t instanceof Date&&e instanceof Date)return e.getTime()-t.getTime();if("number"==typeof t&&"number"==typeof e)return e-t;throw new Error("unsupported type: "+typeof t)}(t.start,t.end);0===r&&(r=.1);t.start=new Date(6e4*Math.floor(function(t){if(t instanceof Date)return t.getTime();if("number"==typeof t)return t;throw new Error("unsupported type: "+typeof t)}(t.start)/6e4));var n,o={method:t.method,route:t.route,statusCode:t.statusCode,time:t.start},i=JSON.stringify(o);i in this.m?n=this.m[i]:(n={count:0,sum:0,sumsq:0},this.opts.TDigest&&(n.tdigest=new this.opts.TDigest),this.m[i]=n),n.count++,n.sum+=r,n.sumsq+=r*r,n.tdigest&&n.tdigest.push(r),this.timer||(this.timer=setTimeout(function(){e.flush()},15e3))},t.prototype.flush=function(){var t=[];for(var e in this.m)if(this.m.hasOwnProperty(e)){var r=JSON.parse(e),o=n({},r,this.m[e]);o.tdigest&&(o.tdigestCentroids=this.tdigestCentroids(o.tdigest),delete o.tdigest),t.push(o)}this.m={},this.timer=null;var i=JSON.stringify({environment:this.opts.environment,routes:t}),s={method:"POST",url:this.url,body:i};this.requester(s).then(function(t){}).catch(function(t){console.error&&console.error("can not report routes stats",t)})},t.prototype.tdigestCentroids=function(t){var e=[],r=[];return t.centroids.each(function(t){e.push(t.mean),r.push(t.n)}),{mean:e,count:r}},t}();e.Routes=i}])});

(function () {
  if(!window.DailyKos) window.DailyKos = {};

  Errors = window.DailyKos.Errors = {};

  var envName = null;

  try {
    var host = window.location.host;
    if (/dailykos.com/.test(host))       { envName = 'production'; }
    if (/beta|qa|stage|test/.test(host)) { envName = 'staging'; }
    if (/....[1-7]\.com/.test(host))     { envName = 'staging'; }
    if (/dev/.test(host))                { envName = 'development'; }
  } catch(e) { /* meh */ }

  var DKbrake = new airbrakeJs.Client({projectId: 118329, projectKey: '0ba2c27840e86289ed136b5a37d2b6df'});
  var PSbrake  = new airbrakeJs.Client({projectId: 252224, projectKey: 'd5bf33975195f4bc286065915d1f3232'});

  [DKbrake, PSbrake].forEach( function (client) {
    client.addFilter(function(notice) {
    return null;
    // If null is returned, then the notice is ignored

    if (envName === null) {
      return null;
    }

    var ignoredFiles = /chrome-extension:|moz-extension:|safari-extension:|chartbeat.com|facebook.com|facebook.net|taboola.com/;

    for (var i = 0; i < notice.errors.length; i++) {
      if (ignoredFiles.test(notice.errors[i].file)) {
        console.log("Ignored this error:", notice);
        return null;
      }
    }
      notice.context.environment = envName;
      return notice;
    })
  });

  Errors.DKbrake  = DKbrake;

  // So we have less verbose Error wrapping:
  Errors.wrap = function (func) { return DKbrake.wrap(func); };

  function notifyForClient(client) {
    return function (error, component, opts) {
      var DailyKos = window.DailyKos;

      var obj   = _.extend({context: {}}, opts);
      var user  = {};

      // Make sure DailyKos is initialized by seeing if a function is defined:
      if(DailyKos && DailyKos.currentUserId) {
        user['loggedIn']  = DailyKos.isLoggedIn();
        user['userId']    = DailyKos.currentUserId();
        user['nickName']  = DailyKos.currentUserNickname();
      }

      obj.error = error;
      obj.context['component']   = component;
      obj.context['environment'] = envName;
      obj.context['user']        = _.extend(user, obj.context['user']);

      return client.notify(obj);
    }
  }

  // Wrap notify in-case we have an exception:
  Errors.notify = DKbrake.wrap(notifyForClient(DKbrake));
  Errors.PSNotify = PSbrake.wrap(notifyForClient(PSbrake));

})();
/*! jQuery v1.12.0 | (c) jQuery Foundation | jquery.org/license */
!function(a,b){"object"==typeof module&&"object"==typeof module.exports?module.exports=a.document?b(a,!0):function(a){if(!a.document)throw new Error("jQuery requires a window with a document");return b(a)}:b(a)}("undefined"!=typeof window?window:this,function(a,b){var c=[],d=a.document,e=c.slice,f=c.concat,g=c.push,h=c.indexOf,i={},j=i.toString,k=i.hasOwnProperty,l={},m="1.12.0",n=function(a,b){return new n.fn.init(a,b)},o=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,p=/^-ms-/,q=/-([\da-z])/gi,r=function(a,b){return b.toUpperCase()};n.fn=n.prototype={jquery:m,constructor:n,selector:"",length:0,toArray:function(){return e.call(this)},get:function(a){return null!=a?0>a?this[a+this.length]:this[a]:e.call(this)},pushStack:function(a){var b=n.merge(this.constructor(),a);return b.prevObject=this,b.context=this.context,b},each:function(a){return n.each(this,a)},map:function(a){return this.pushStack(n.map(this,function(b,c){return a.call(b,c,b)}))},slice:function(){return this.pushStack(e.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var b=this.length,c=+a+(0>a?b:0);return this.pushStack(c>=0&&b>c?[this[c]]:[])},end:function(){return this.prevObject||this.constructor()},push:g,sort:c.sort,splice:c.splice},n.extend=n.fn.extend=function(){var a,b,c,d,e,f,g=arguments[0]||{},h=1,i=arguments.length,j=!1;for("boolean"==typeof g&&(j=g,g=arguments[h]||{},h++),"object"==typeof g||n.isFunction(g)||(g={}),h===i&&(g=this,h--);i>h;h++)if(null!=(e=arguments[h]))for(d in e)a=g[d],c=e[d],g!==c&&(j&&c&&(n.isPlainObject(c)||(b=n.isArray(c)))?(b?(b=!1,f=a&&n.isArray(a)?a:[]):f=a&&n.isPlainObject(a)?a:{},g[d]=n.extend(j,f,c)):void 0!==c&&(g[d]=c));return g},n.extend({expando:"jQuery"+(m+Math.random()).replace(/\D/g,""),isReady:!0,error:function(a){throw new Error(a)},noop:function(){},isFunction:function(a){return"function"===n.type(a)},isArray:Array.isArray||function(a){return"array"===n.type(a)},isWindow:function(a){return null!=a&&a==a.window},isNumeric:function(a){var b=a&&a.toString();return!n.isArray(a)&&b-parseFloat(b)+1>=0},isEmptyObject:function(a){var b;for(b in a)return!1;return!0},isPlainObject:function(a){var b;if(!a||"object"!==n.type(a)||a.nodeType||n.isWindow(a))return!1;try{if(a.constructor&&!k.call(a,"constructor")&&!k.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(c){return!1}if(!l.ownFirst)for(b in a)return k.call(a,b);for(b in a);return void 0===b||k.call(a,b)},type:function(a){return null==a?a+"":"object"==typeof a||"function"==typeof a?i[j.call(a)]||"object":typeof a},globalEval:function(b){b&&n.trim(b)&&(a.execScript||function(b){a.eval.call(a,b)})(b)},camelCase:function(a){return a.replace(p,"ms-").replace(q,r)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,b){var c,d=0;if(s(a)){for(c=a.length;c>d;d++)if(b.call(a[d],d,a[d])===!1)break}else for(d in a)if(b.call(a[d],d,a[d])===!1)break;return a},trim:function(a){return null==a?"":(a+"").replace(o,"")},makeArray:function(a,b){var c=b||[];return null!=a&&(s(Object(a))?n.merge(c,"string"==typeof a?[a]:a):g.call(c,a)),c},inArray:function(a,b,c){var d;if(b){if(h)return h.call(b,a,c);for(d=b.length,c=c?0>c?Math.max(0,d+c):c:0;d>c;c++)if(c in b&&b[c]===a)return c}return-1},merge:function(a,b){var c=+b.length,d=0,e=a.length;while(c>d)a[e++]=b[d++];if(c!==c)while(void 0!==b[d])a[e++]=b[d++];return a.length=e,a},grep:function(a,b,c){for(var d,e=[],f=0,g=a.length,h=!c;g>f;f++)d=!b(a[f],f),d!==h&&e.push(a[f]);return e},map:function(a,b,c){var d,e,g=0,h=[];if(s(a))for(d=a.length;d>g;g++)e=b(a[g],g,c),null!=e&&h.push(e);else for(g in a)e=b(a[g],g,c),null!=e&&h.push(e);return f.apply([],h)},guid:1,proxy:function(a,b){var c,d,f;return"string"==typeof b&&(f=a[b],b=a,a=f),n.isFunction(a)?(c=e.call(arguments,2),d=function(){return a.apply(b||this,c.concat(e.call(arguments)))},d.guid=a.guid=a.guid||n.guid++,d):void 0},now:function(){return+new Date},support:l}),"function"==typeof Symbol&&(n.fn[Symbol.iterator]=c[Symbol.iterator]),n.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(a,b){i["[object "+b+"]"]=b.toLowerCase()});function s(a){var b=!!a&&"length"in a&&a.length,c=n.type(a);return"function"===c||n.isWindow(a)?!1:"array"===c||0===b||"number"==typeof b&&b>0&&b-1 in a}var t=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u="sizzle"+1*new Date,v=a.document,w=0,x=0,y=ga(),z=ga(),A=ga(),B=function(a,b){return a===b&&(l=!0),0},C=1<<31,D={}.hasOwnProperty,E=[],F=E.pop,G=E.push,H=E.push,I=E.slice,J=function(a,b){for(var c=0,d=a.length;d>c;c++)if(a[c]===b)return c;return-1},K="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",L="[\\x20\\t\\r\\n\\f]",M="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",N="\\["+L+"*("+M+")(?:"+L+"*([*^$|!~]?=)"+L+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+M+"))|)"+L+"*\\]",O=":("+M+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+N+")*)|.*)\\)|)",P=new RegExp(L+"+","g"),Q=new RegExp("^"+L+"+|((?:^|[^\\\\])(?:\\\\.)*)"+L+"+$","g"),R=new RegExp("^"+L+"*,"+L+"*"),S=new RegExp("^"+L+"*([>+~]|"+L+")"+L+"*"),T=new RegExp("="+L+"*([^\\]'\"]*?)"+L+"*\\]","g"),U=new RegExp(O),V=new RegExp("^"+M+"$"),W={ID:new RegExp("^#("+M+")"),CLASS:new RegExp("^\\.("+M+")"),TAG:new RegExp("^("+M+"|[*])"),ATTR:new RegExp("^"+N),PSEUDO:new RegExp("^"+O),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+L+"*(even|odd|(([+-]|)(\\d*)n|)"+L+"*(?:([+-]|)"+L+"*(\\d+)|))"+L+"*\\)|)","i"),bool:new RegExp("^(?:"+K+")$","i"),needsContext:new RegExp("^"+L+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+L+"*((?:-\\d)?\\d*)"+L+"*\\)|)(?=[^-]|$)","i")},X=/^(?:input|select|textarea|button)$/i,Y=/^h\d$/i,Z=/^[^{]+\{\s*\[native \w/,$=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,_=/[+~]/,aa=/'|\\/g,ba=new RegExp("\\\\([\\da-f]{1,6}"+L+"?|("+L+")|.)","ig"),ca=function(a,b,c){var d="0x"+b-65536;return d!==d||c?b:0>d?String.fromCharCode(d+65536):String.fromCharCode(d>>10|55296,1023&d|56320)},da=function(){m()};try{H.apply(E=I.call(v.childNodes),v.childNodes),E[v.childNodes.length].nodeType}catch(ea){H={apply:E.length?function(a,b){G.apply(a,I.call(b))}:function(a,b){var c=a.length,d=0;while(a[c++]=b[d++]);a.length=c-1}}}function fa(a,b,d,e){var f,h,j,k,l,o,r,s,w=b&&b.ownerDocument,x=b?b.nodeType:9;if(d=d||[],"string"!=typeof a||!a||1!==x&&9!==x&&11!==x)return d;if(!e&&((b?b.ownerDocument||b:v)!==n&&m(b),b=b||n,p)){if(11!==x&&(o=$.exec(a)))if(f=o[1]){if(9===x){if(!(j=b.getElementById(f)))return d;if(j.id===f)return d.push(j),d}else if(w&&(j=w.getElementById(f))&&t(b,j)&&j.id===f)return d.push(j),d}else{if(o[2])return H.apply(d,b.getElementsByTagName(a)),d;if((f=o[3])&&c.getElementsByClassName&&b.getElementsByClassName)return H.apply(d,b.getElementsByClassName(f)),d}if(c.qsa&&!A[a+" "]&&(!q||!q.test(a))){if(1!==x)w=b,s=a;else if("object"!==b.nodeName.toLowerCase()){(k=b.getAttribute("id"))?k=k.replace(aa,"\\$&"):b.setAttribute("id",k=u),r=g(a),h=r.length,l=V.test(k)?"#"+k:"[id='"+k+"']";while(h--)r[h]=l+" "+qa(r[h]);s=r.join(","),w=_.test(a)&&oa(b.parentNode)||b}if(s)try{return H.apply(d,w.querySelectorAll(s)),d}catch(y){}finally{k===u&&b.removeAttribute("id")}}}return i(a.replace(Q,"$1"),b,d,e)}function ga(){var a=[];function b(c,e){return a.push(c+" ")>d.cacheLength&&delete b[a.shift()],b[c+" "]=e}return b}function ha(a){return a[u]=!0,a}function ia(a){var b=n.createElement("div");try{return!!a(b)}catch(c){return!1}finally{b.parentNode&&b.parentNode.removeChild(b),b=null}}function ja(a,b){var c=a.split("|"),e=c.length;while(e--)d.attrHandle[c[e]]=b}function ka(a,b){var c=b&&a,d=c&&1===a.nodeType&&1===b.nodeType&&(~b.sourceIndex||C)-(~a.sourceIndex||C);if(d)return d;if(c)while(c=c.nextSibling)if(c===b)return-1;return a?1:-1}function la(a){return function(b){var c=b.nodeName.toLowerCase();return"input"===c&&b.type===a}}function ma(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}function na(a){return ha(function(b){return b=+b,ha(function(c,d){var e,f=a([],c.length,b),g=f.length;while(g--)c[e=f[g]]&&(c[e]=!(d[e]=c[e]))})})}function oa(a){return a&&"undefined"!=typeof a.getElementsByTagName&&a}c=fa.support={},f=fa.isXML=function(a){var b=a&&(a.ownerDocument||a).documentElement;return b?"HTML"!==b.nodeName:!1},m=fa.setDocument=function(a){var b,e,g=a?a.ownerDocument||a:v;return g!==n&&9===g.nodeType&&g.documentElement?(n=g,o=n.documentElement,p=!f(n),(e=n.defaultView)&&e.top!==e&&(e.addEventListener?e.addEventListener("unload",da,!1):e.attachEvent&&e.attachEvent("onunload",da)),c.attributes=ia(function(a){return a.className="i",!a.getAttribute("className")}),c.getElementsByTagName=ia(function(a){return a.appendChild(n.createComment("")),!a.getElementsByTagName("*").length}),c.getElementsByClassName=Z.test(n.getElementsByClassName),c.getById=ia(function(a){return o.appendChild(a).id=u,!n.getElementsByName||!n.getElementsByName(u).length}),c.getById?(d.find.ID=function(a,b){if("undefined"!=typeof b.getElementById&&p){var c=b.getElementById(a);return c?[c]:[]}},d.filter.ID=function(a){var b=a.replace(ba,ca);return function(a){return a.getAttribute("id")===b}}):(delete d.find.ID,d.filter.ID=function(a){var b=a.replace(ba,ca);return function(a){var c="undefined"!=typeof a.getAttributeNode&&a.getAttributeNode("id");return c&&c.value===b}}),d.find.TAG=c.getElementsByTagName?function(a,b){return"undefined"!=typeof b.getElementsByTagName?b.getElementsByTagName(a):c.qsa?b.querySelectorAll(a):void 0}:function(a,b){var c,d=[],e=0,f=b.getElementsByTagName(a);if("*"===a){while(c=f[e++])1===c.nodeType&&d.push(c);return d}return f},d.find.CLASS=c.getElementsByClassName&&function(a,b){return"undefined"!=typeof b.getElementsByClassName&&p?b.getElementsByClassName(a):void 0},r=[],q=[],(c.qsa=Z.test(n.querySelectorAll))&&(ia(function(a){o.appendChild(a).innerHTML="<a id='"+u+"'></a><select id='"+u+"-\r\\' msallowcapture=''><option selected=''></option></select>",a.querySelectorAll("[msallowcapture^='']").length&&q.push("[*^$]="+L+"*(?:''|\"\")"),a.querySelectorAll("[selected]").length||q.push("\\["+L+"*(?:value|"+K+")"),a.querySelectorAll("[id~="+u+"-]").length||q.push("~="),a.querySelectorAll(":checked").length||q.push(":checked"),a.querySelectorAll("a#"+u+"+*").length||q.push(".#.+[+~]")}),ia(function(a){var b=n.createElement("input");b.setAttribute("type","hidden"),a.appendChild(b).setAttribute("name","D"),a.querySelectorAll("[name=d]").length&&q.push("name"+L+"*[*^$|!~]?="),a.querySelectorAll(":enabled").length||q.push(":enabled",":disabled"),a.querySelectorAll("*,:x"),q.push(",.*:")})),(c.matchesSelector=Z.test(s=o.matches||o.webkitMatchesSelector||o.mozMatchesSelector||o.oMatchesSelector||o.msMatchesSelector))&&ia(function(a){c.disconnectedMatch=s.call(a,"div"),s.call(a,"[s!='']:x"),r.push("!=",O)}),q=q.length&&new RegExp(q.join("|")),r=r.length&&new RegExp(r.join("|")),b=Z.test(o.compareDocumentPosition),t=b||Z.test(o.contains)?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!(!d||1!==d.nodeType||!(c.contains?c.contains(d):a.compareDocumentPosition&&16&a.compareDocumentPosition(d)))}:function(a,b){if(b)while(b=b.parentNode)if(b===a)return!0;return!1},B=b?function(a,b){if(a===b)return l=!0,0;var d=!a.compareDocumentPosition-!b.compareDocumentPosition;return d?d:(d=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1,1&d||!c.sortDetached&&b.compareDocumentPosition(a)===d?a===n||a.ownerDocument===v&&t(v,a)?-1:b===n||b.ownerDocument===v&&t(v,b)?1:k?J(k,a)-J(k,b):0:4&d?-1:1)}:function(a,b){if(a===b)return l=!0,0;var c,d=0,e=a.parentNode,f=b.parentNode,g=[a],h=[b];if(!e||!f)return a===n?-1:b===n?1:e?-1:f?1:k?J(k,a)-J(k,b):0;if(e===f)return ka(a,b);c=a;while(c=c.parentNode)g.unshift(c);c=b;while(c=c.parentNode)h.unshift(c);while(g[d]===h[d])d++;return d?ka(g[d],h[d]):g[d]===v?-1:h[d]===v?1:0},n):n},fa.matches=function(a,b){return fa(a,null,null,b)},fa.matchesSelector=function(a,b){if((a.ownerDocument||a)!==n&&m(a),b=b.replace(T,"='$1']"),c.matchesSelector&&p&&!A[b+" "]&&(!r||!r.test(b))&&(!q||!q.test(b)))try{var d=s.call(a,b);if(d||c.disconnectedMatch||a.document&&11!==a.document.nodeType)return d}catch(e){}return fa(b,n,null,[a]).length>0},fa.contains=function(a,b){return(a.ownerDocument||a)!==n&&m(a),t(a,b)},fa.attr=function(a,b){(a.ownerDocument||a)!==n&&m(a);var e=d.attrHandle[b.toLowerCase()],f=e&&D.call(d.attrHandle,b.toLowerCase())?e(a,b,!p):void 0;return void 0!==f?f:c.attributes||!p?a.getAttribute(b):(f=a.getAttributeNode(b))&&f.specified?f.value:null},fa.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)},fa.uniqueSort=function(a){var b,d=[],e=0,f=0;if(l=!c.detectDuplicates,k=!c.sortStable&&a.slice(0),a.sort(B),l){while(b=a[f++])b===a[f]&&(e=d.push(f));while(e--)a.splice(d[e],1)}return k=null,a},e=fa.getText=function(a){var b,c="",d=0,f=a.nodeType;if(f){if(1===f||9===f||11===f){if("string"==typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=e(a)}else if(3===f||4===f)return a.nodeValue}else while(b=a[d++])c+=e(b);return c},d=fa.selectors={cacheLength:50,createPseudo:ha,match:W,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(ba,ca),a[3]=(a[3]||a[4]||a[5]||"").replace(ba,ca),"~="===a[2]&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),"nth"===a[1].slice(0,3)?(a[3]||fa.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&fa.error(a[0]),a},PSEUDO:function(a){var b,c=!a[6]&&a[2];return W.CHILD.test(a[0])?null:(a[3]?a[2]=a[4]||a[5]||"":c&&U.test(c)&&(b=g(c,!0))&&(b=c.indexOf(")",c.length-b)-c.length)&&(a[0]=a[0].slice(0,b),a[2]=c.slice(0,b)),a.slice(0,3))}},filter:{TAG:function(a){var b=a.replace(ba,ca).toLowerCase();return"*"===a?function(){return!0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===b}},CLASS:function(a){var b=y[a+" "];return b||(b=new RegExp("(^|"+L+")"+a+"("+L+"|$)"))&&y(a,function(a){return b.test("string"==typeof a.className&&a.className||"undefined"!=typeof a.getAttribute&&a.getAttribute("class")||"")})},ATTR:function(a,b,c){return function(d){var e=fa.attr(d,a);return null==e?"!="===b:b?(e+="","="===b?e===c:"!="===b?e!==c:"^="===b?c&&0===e.indexOf(c):"*="===b?c&&e.indexOf(c)>-1:"$="===b?c&&e.slice(-c.length)===c:"~="===b?(" "+e.replace(P," ")+" ").indexOf(c)>-1:"|="===b?e===c||e.slice(0,c.length+1)===c+"-":!1):!0}},CHILD:function(a,b,c,d,e){var f="nth"!==a.slice(0,3),g="last"!==a.slice(-4),h="of-type"===b;return 1===d&&0===e?function(a){return!!a.parentNode}:function(b,c,i){var j,k,l,m,n,o,p=f!==g?"nextSibling":"previousSibling",q=b.parentNode,r=h&&b.nodeName.toLowerCase(),s=!i&&!h,t=!1;if(q){if(f){while(p){m=b;while(m=m[p])if(h?m.nodeName.toLowerCase()===r:1===m.nodeType)return!1;o=p="only"===a&&!o&&"nextSibling"}return!0}if(o=[g?q.firstChild:q.lastChild],g&&s){m=q,l=m[u]||(m[u]={}),k=l[m.uniqueID]||(l[m.uniqueID]={}),j=k[a]||[],n=j[0]===w&&j[1],t=n&&j[2],m=n&&q.childNodes[n];while(m=++n&&m&&m[p]||(t=n=0)||o.pop())if(1===m.nodeType&&++t&&m===b){k[a]=[w,n,t];break}}else if(s&&(m=b,l=m[u]||(m[u]={}),k=l[m.uniqueID]||(l[m.uniqueID]={}),j=k[a]||[],n=j[0]===w&&j[1],t=n),t===!1)while(m=++n&&m&&m[p]||(t=n=0)||o.pop())if((h?m.nodeName.toLowerCase()===r:1===m.nodeType)&&++t&&(s&&(l=m[u]||(m[u]={}),k=l[m.uniqueID]||(l[m.uniqueID]={}),k[a]=[w,t]),m===b))break;return t-=e,t===d||t%d===0&&t/d>=0}}},PSEUDO:function(a,b){var c,e=d.pseudos[a]||d.setFilters[a.toLowerCase()]||fa.error("unsupported pseudo: "+a);return e[u]?e(b):e.length>1?(c=[a,a,"",b],d.setFilters.hasOwnProperty(a.toLowerCase())?ha(function(a,c){var d,f=e(a,b),g=f.length;while(g--)d=J(a,f[g]),a[d]=!(c[d]=f[g])}):function(a){return e(a,0,c)}):e}},pseudos:{not:ha(function(a){var b=[],c=[],d=h(a.replace(Q,"$1"));return d[u]?ha(function(a,b,c,e){var f,g=d(a,null,e,[]),h=a.length;while(h--)(f=g[h])&&(a[h]=!(b[h]=f))}):function(a,e,f){return b[0]=a,d(b,null,f,c),b[0]=null,!c.pop()}}),has:ha(function(a){return function(b){return fa(a,b).length>0}}),contains:ha(function(a){return a=a.replace(ba,ca),function(b){return(b.textContent||b.innerText||e(b)).indexOf(a)>-1}}),lang:ha(function(a){return V.test(a||"")||fa.error("unsupported lang: "+a),a=a.replace(ba,ca).toLowerCase(),function(b){var c;do if(c=p?b.lang:b.getAttribute("xml:lang")||b.getAttribute("lang"))return c=c.toLowerCase(),c===a||0===c.indexOf(a+"-");while((b=b.parentNode)&&1===b.nodeType);return!1}}),target:function(b){var c=a.location&&a.location.hash;return c&&c.slice(1)===b.id},root:function(a){return a===o},focus:function(a){return a===n.activeElement&&(!n.hasFocus||n.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:function(a){return a.disabled===!1},disabled:function(a){return a.disabled===!0},checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,a.selected===!0},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeType<6)return!1;return!0},parent:function(a){return!d.pseudos.empty(a)},header:function(a){return Y.test(a.nodeName)},input:function(a){return X.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(b=a.getAttribute("type"))||"text"===b.toLowerCase())},first:na(function(){return[0]}),last:na(function(a,b){return[b-1]}),eq:na(function(a,b,c){return[0>c?c+b:c]}),even:na(function(a,b){for(var c=0;b>c;c+=2)a.push(c);return a}),odd:na(function(a,b){for(var c=1;b>c;c+=2)a.push(c);return a}),lt:na(function(a,b,c){for(var d=0>c?c+b:c;--d>=0;)a.push(d);return a}),gt:na(function(a,b,c){for(var d=0>c?c+b:c;++d<b;)a.push(d);return a})}},d.pseudos.nth=d.pseudos.eq;for(b in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})d.pseudos[b]=la(b);for(b in{submit:!0,reset:!0})d.pseudos[b]=ma(b);function pa(){}pa.prototype=d.filters=d.pseudos,d.setFilters=new pa,g=fa.tokenize=function(a,b){var c,e,f,g,h,i,j,k=z[a+" "];if(k)return b?0:k.slice(0);h=a,i=[],j=d.preFilter;while(h){(!c||(e=R.exec(h)))&&(e&&(h=h.slice(e[0].length)||h),i.push(f=[])),c=!1,(e=S.exec(h))&&(c=e.shift(),f.push({value:c,type:e[0].replace(Q," ")}),h=h.slice(c.length));for(g in d.filter)!(e=W[g].exec(h))||j[g]&&!(e=j[g](e))||(c=e.shift(),f.push({value:c,type:g,matches:e}),h=h.slice(c.length));if(!c)break}return b?h.length:h?fa.error(a):z(a,i).slice(0)};function qa(a){for(var b=0,c=a.length,d="";c>b;b++)d+=a[b].value;return d}function ra(a,b,c){var d=b.dir,e=c&&"parentNode"===d,f=x++;return b.first?function(b,c,f){while(b=b[d])if(1===b.nodeType||e)return a(b,c,f)}:function(b,c,g){var h,i,j,k=[w,f];if(g){while(b=b[d])if((1===b.nodeType||e)&&a(b,c,g))return!0}else while(b=b[d])if(1===b.nodeType||e){if(j=b[u]||(b[u]={}),i=j[b.uniqueID]||(j[b.uniqueID]={}),(h=i[d])&&h[0]===w&&h[1]===f)return k[2]=h[2];if(i[d]=k,k[2]=a(b,c,g))return!0}}}function sa(a){return a.length>1?function(b,c,d){var e=a.length;while(e--)if(!a[e](b,c,d))return!1;return!0}:a[0]}function ta(a,b,c){for(var d=0,e=b.length;e>d;d++)fa(a,b[d],c);return c}function ua(a,b,c,d,e){for(var f,g=[],h=0,i=a.length,j=null!=b;i>h;h++)(f=a[h])&&(!c||c(f,d,e))&&(g.push(f),j&&b.push(h));return g}function va(a,b,c,d,e,f){return d&&!d[u]&&(d=va(d)),e&&!e[u]&&(e=va(e,f)),ha(function(f,g,h,i){var j,k,l,m=[],n=[],o=g.length,p=f||ta(b||"*",h.nodeType?[h]:h,[]),q=!a||!f&&b?p:ua(p,m,a,h,i),r=c?e||(f?a:o||d)?[]:g:q;if(c&&c(q,r,h,i),d){j=ua(r,n),d(j,[],h,i),k=j.length;while(k--)(l=j[k])&&(r[n[k]]=!(q[n[k]]=l))}if(f){if(e||a){if(e){j=[],k=r.length;while(k--)(l=r[k])&&j.push(q[k]=l);e(null,r=[],j,i)}k=r.length;while(k--)(l=r[k])&&(j=e?J(f,l):m[k])>-1&&(f[j]=!(g[j]=l))}}else r=ua(r===g?r.splice(o,r.length):r),e?e(null,g,r,i):H.apply(g,r)})}function wa(a){for(var b,c,e,f=a.length,g=d.relative[a[0].type],h=g||d.relative[" "],i=g?1:0,k=ra(function(a){return a===b},h,!0),l=ra(function(a){return J(b,a)>-1},h,!0),m=[function(a,c,d){var e=!g&&(d||c!==j)||((b=c).nodeType?k(a,c,d):l(a,c,d));return b=null,e}];f>i;i++)if(c=d.relative[a[i].type])m=[ra(sa(m),c)];else{if(c=d.filter[a[i].type].apply(null,a[i].matches),c[u]){for(e=++i;f>e;e++)if(d.relative[a[e].type])break;return va(i>1&&sa(m),i>1&&qa(a.slice(0,i-1).concat({value:" "===a[i-2].type?"*":""})).replace(Q,"$1"),c,e>i&&wa(a.slice(i,e)),f>e&&wa(a=a.slice(e)),f>e&&qa(a))}m.push(c)}return sa(m)}function xa(a,b){var c=b.length>0,e=a.length>0,f=function(f,g,h,i,k){var l,o,q,r=0,s="0",t=f&&[],u=[],v=j,x=f||e&&d.find.TAG("*",k),y=w+=null==v?1:Math.random()||.1,z=x.length;for(k&&(j=g===n||g||k);s!==z&&null!=(l=x[s]);s++){if(e&&l){o=0,g||l.ownerDocument===n||(m(l),h=!p);while(q=a[o++])if(q(l,g||n,h)){i.push(l);break}k&&(w=y)}c&&((l=!q&&l)&&r--,f&&t.push(l))}if(r+=s,c&&s!==r){o=0;while(q=b[o++])q(t,u,g,h);if(f){if(r>0)while(s--)t[s]||u[s]||(u[s]=F.call(i));u=ua(u)}H.apply(i,u),k&&!f&&u.length>0&&r+b.length>1&&fa.uniqueSort(i)}return k&&(w=y,j=v),t};return c?ha(f):f}return h=fa.compile=function(a,b){var c,d=[],e=[],f=A[a+" "];if(!f){b||(b=g(a)),c=b.length;while(c--)f=wa(b[c]),f[u]?d.push(f):e.push(f);f=A(a,xa(e,d)),f.selector=a}return f},i=fa.select=function(a,b,e,f){var i,j,k,l,m,n="function"==typeof a&&a,o=!f&&g(a=n.selector||a);if(e=e||[],1===o.length){if(j=o[0]=o[0].slice(0),j.length>2&&"ID"===(k=j[0]).type&&c.getById&&9===b.nodeType&&p&&d.relative[j[1].type]){if(b=(d.find.ID(k.matches[0].replace(ba,ca),b)||[])[0],!b)return e;n&&(b=b.parentNode),a=a.slice(j.shift().value.length)}i=W.needsContext.test(a)?0:j.length;while(i--){if(k=j[i],d.relative[l=k.type])break;if((m=d.find[l])&&(f=m(k.matches[0].replace(ba,ca),_.test(j[0].type)&&oa(b.parentNode)||b))){if(j.splice(i,1),a=f.length&&qa(j),!a)return H.apply(e,f),e;break}}}return(n||h(a,o))(f,b,!p,e,!b||_.test(a)&&oa(b.parentNode)||b),e},c.sortStable=u.split("").sort(B).join("")===u,c.detectDuplicates=!!l,m(),c.sortDetached=ia(function(a){return 1&a.compareDocumentPosition(n.createElement("div"))}),ia(function(a){return a.innerHTML="<a href='#'></a>","#"===a.firstChild.getAttribute("href")})||ja("type|href|height|width",function(a,b,c){return c?void 0:a.getAttribute(b,"type"===b.toLowerCase()?1:2)}),c.attributes&&ia(function(a){return a.innerHTML="<input/>",a.firstChild.setAttribute("value",""),""===a.firstChild.getAttribute("value")})||ja("value",function(a,b,c){return c||"input"!==a.nodeName.toLowerCase()?void 0:a.defaultValue}),ia(function(a){return null==a.getAttribute("disabled")})||ja(K,function(a,b,c){var d;return c?void 0:a[b]===!0?b.toLowerCase():(d=a.getAttributeNode(b))&&d.specified?d.value:null}),fa}(a);n.find=t,n.expr=t.selectors,n.expr[":"]=n.expr.pseudos,n.uniqueSort=n.unique=t.uniqueSort,n.text=t.getText,n.isXMLDoc=t.isXML,n.contains=t.contains;var u=function(a,b,c){var d=[],e=void 0!==c;while((a=a[b])&&9!==a.nodeType)if(1===a.nodeType){if(e&&n(a).is(c))break;d.push(a)}return d},v=function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c},w=n.expr.match.needsContext,x=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,y=/^.[^:#\[\.,]*$/;function z(a,b,c){if(n.isFunction(b))return n.grep(a,function(a,d){return!!b.call(a,d,a)!==c});if(b.nodeType)return n.grep(a,function(a){return a===b!==c});if("string"==typeof b){if(y.test(b))return n.filter(b,a,c);b=n.filter(b,a)}return n.grep(a,function(a){return n.inArray(a,b)>-1!==c})}n.filter=function(a,b,c){var d=b[0];return c&&(a=":not("+a+")"),1===b.length&&1===d.nodeType?n.find.matchesSelector(d,a)?[d]:[]:n.find.matches(a,n.grep(b,function(a){return 1===a.nodeType}))},n.fn.extend({find:function(a){var b,c=[],d=this,e=d.length;if("string"!=typeof a)return this.pushStack(n(a).filter(function(){for(b=0;e>b;b++)if(n.contains(d[b],this))return!0}));for(b=0;e>b;b++)n.find(a,d[b],c);return c=this.pushStack(e>1?n.unique(c):c),c.selector=this.selector?this.selector+" "+a:a,c},filter:function(a){return this.pushStack(z(this,a||[],!1))},not:function(a){return this.pushStack(z(this,a||[],!0))},is:function(a){return!!z(this,"string"==typeof a&&w.test(a)?n(a):a||[],!1).length}});var A,B=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,C=n.fn.init=function(a,b,c){var e,f;if(!a)return this;if(c=c||A,"string"==typeof a){if(e="<"===a.charAt(0)&&">"===a.charAt(a.length-1)&&a.length>=3?[null,a,null]:B.exec(a),!e||!e[1]&&b)return!b||b.jquery?(b||c).find(a):this.constructor(b).find(a);if(e[1]){if(b=b instanceof n?b[0]:b,n.merge(this,n.parseHTML(e[1],b&&b.nodeType?b.ownerDocument||b:d,!0)),x.test(e[1])&&n.isPlainObject(b))for(e in b)n.isFunction(this[e])?this[e](b[e]):this.attr(e,b[e]);return this}if(f=d.getElementById(e[2]),f&&f.parentNode){if(f.id!==e[2])return A.find(a);this.length=1,this[0]=f}return this.context=d,this.selector=a,this}return a.nodeType?(this.context=this[0]=a,this.length=1,this):n.isFunction(a)?"undefined"!=typeof c.ready?c.ready(a):a(n):(void 0!==a.selector&&(this.selector=a.selector,this.context=a.context),n.makeArray(a,this))};C.prototype=n.fn,A=n(d);var D=/^(?:parents|prev(?:Until|All))/,E={children:!0,contents:!0,next:!0,prev:!0};n.fn.extend({has:function(a){var b,c=n(a,this),d=c.length;return this.filter(function(){for(b=0;d>b;b++)if(n.contains(this,c[b]))return!0})},closest:function(a,b){for(var c,d=0,e=this.length,f=[],g=w.test(a)||"string"!=typeof a?n(a,b||this.context):0;e>d;d++)for(c=this[d];c&&c!==b;c=c.parentNode)if(c.nodeType<11&&(g?g.index(c)>-1:1===c.nodeType&&n.find.matchesSelector(c,a))){f.push(c);break}return this.pushStack(f.length>1?n.uniqueSort(f):f)},index:function(a){return a?"string"==typeof a?n.inArray(this[0],n(a)):n.inArray(a.jquery?a[0]:a,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,b){return this.pushStack(n.uniqueSort(n.merge(this.get(),n(a,b))))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}});function F(a,b){do a=a[b];while(a&&1!==a.nodeType);return a}n.each({parent:function(a){var b=a.parentNode;return b&&11!==b.nodeType?b:null},parents:function(a){return u(a,"parentNode")},parentsUntil:function(a,b,c){return u(a,"parentNode",c)},next:function(a){return F(a,"nextSibling")},prev:function(a){return F(a,"previousSibling")},nextAll:function(a){return u(a,"nextSibling")},prevAll:function(a){return u(a,"previousSibling")},nextUntil:function(a,b,c){return u(a,"nextSibling",c)},prevUntil:function(a,b,c){return u(a,"previousSibling",c)},siblings:function(a){return v((a.parentNode||{}).firstChild,a)},children:function(a){return v(a.firstChild)},contents:function(a){return n.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:n.merge([],a.childNodes)}},function(a,b){n.fn[a]=function(c,d){var e=n.map(this,b,c);return"Until"!==a.slice(-5)&&(d=c),d&&"string"==typeof d&&(e=n.filter(d,e)),this.length>1&&(E[a]||(e=n.uniqueSort(e)),D.test(a)&&(e=e.reverse())),this.pushStack(e)}});var G=/\S+/g;function H(a){var b={};return n.each(a.match(G)||[],function(a,c){b[c]=!0}),b}n.Callbacks=function(a){a="string"==typeof a?H(a):n.extend({},a);var b,c,d,e,f=[],g=[],h=-1,i=function(){for(e=a.once,d=b=!0;g.length;h=-1){c=g.shift();while(++h<f.length)f[h].apply(c[0],c[1])===!1&&a.stopOnFalse&&(h=f.length,c=!1)}a.memory||(c=!1),b=!1,e&&(f=c?[]:"")},j={add:function(){return f&&(c&&!b&&(h=f.length-1,g.push(c)),function d(b){n.each(b,function(b,c){n.isFunction(c)?a.unique&&j.has(c)||f.push(c):c&&c.length&&"string"!==n.type(c)&&d(c)})}(arguments),c&&!b&&i()),this},remove:function(){return n.each(arguments,function(a,b){var c;while((c=n.inArray(b,f,c))>-1)f.splice(c,1),h>=c&&h--}),this},has:function(a){return a?n.inArray(a,f)>-1:f.length>0},empty:function(){return f&&(f=[]),this},disable:function(){return e=g=[],f=c="",this},disabled:function(){return!f},lock:function(){return e=!0,c||j.disable(),this},locked:function(){return!!e},fireWith:function(a,c){return e||(c=c||[],c=[a,c.slice?c.slice():c],g.push(c),b||i()),this},fire:function(){return j.fireWith(this,arguments),this},fired:function(){return!!d}};return j},n.extend({Deferred:function(a){var b=[["resolve","done",n.Callbacks("once memory"),"resolved"],["reject","fail",n.Callbacks("once memory"),"rejected"],["notify","progress",n.Callbacks("memory")]],c="pending",d={state:function(){return c},always:function(){return e.done(arguments).fail(arguments),this},then:function(){var a=arguments;return n.Deferred(function(c){n.each(b,function(b,f){var g=n.isFunction(a[b])&&a[b];e[f[1]](function(){var a=g&&g.apply(this,arguments);a&&n.isFunction(a.promise)?a.promise().progress(c.notify).done(c.resolve).fail(c.reject):c[f[0]+"With"](this===d?c.promise():this,g?[a]:arguments)})}),a=null}).promise()},promise:function(a){return null!=a?n.extend(a,d):d}},e={};return d.pipe=d.then,n.each(b,function(a,f){var g=f[2],h=f[3];d[f[1]]=g.add,h&&g.add(function(){c=h},b[1^a][2].disable,b[2][2].lock),e[f[0]]=function(){return e[f[0]+"With"](this===e?d:this,arguments),this},e[f[0]+"With"]=g.fireWith}),d.promise(e),a&&a.call(e,e),e},when:function(a){var b=0,c=e.call(arguments),d=c.length,f=1!==d||a&&n.isFunction(a.promise)?d:0,g=1===f?a:n.Deferred(),h=function(a,b,c){return function(d){b[a]=this,c[a]=arguments.length>1?e.call(arguments):d,c===i?g.notifyWith(b,c):--f||g.resolveWith(b,c)}},i,j,k;if(d>1)for(i=new Array(d),j=new Array(d),k=new Array(d);d>b;b++)c[b]&&n.isFunction(c[b].promise)?c[b].promise().progress(h(b,j,i)).done(h(b,k,c)).fail(g.reject):--f;return f||g.resolveWith(k,c),g.promise()}});var I;n.fn.ready=function(a){return n.ready.promise().done(a),this},n.extend({isReady:!1,readyWait:1,holdReady:function(a){a?n.readyWait++:n.ready(!0)},ready:function(a){(a===!0?--n.readyWait:n.isReady)||(n.isReady=!0,a!==!0&&--n.readyWait>0||(I.resolveWith(d,[n]),n.fn.triggerHandler&&(n(d).triggerHandler("ready"),n(d).off("ready"))))}});function J(){d.addEventListener?(d.removeEventListener("DOMContentLoaded",K),a.removeEventListener("load",K)):(d.detachEvent("onreadystatechange",K),a.detachEvent("onload",K))}function K(){(d.addEventListener||"load"===a.event.type||"complete"===d.readyState)&&(J(),n.ready())}n.ready.promise=function(b){if(!I)if(I=n.Deferred(),"complete"===d.readyState)a.setTimeout(n.ready);else if(d.addEventListener)d.addEventListener("DOMContentLoaded",K),a.addEventListener("load",K);else{d.attachEvent("onreadystatechange",K),a.attachEvent("onload",K);var c=!1;try{c=null==a.frameElement&&d.documentElement}catch(e){}c&&c.doScroll&&!function f(){if(!n.isReady){try{c.doScroll("left")}catch(b){return a.setTimeout(f,50)}J(),n.ready()}}()}return I.promise(b)},n.ready.promise();var L;for(L in n(l))break;l.ownFirst="0"===L,l.inlineBlockNeedsLayout=!1,n(function(){var a,b,c,e;c=d.getElementsByTagName("body")[0],c&&c.style&&(b=d.createElement("div"),e=d.createElement("div"),e.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",c.appendChild(e).appendChild(b),"undefined"!=typeof b.style.zoom&&(b.style.cssText="display:inline;margin:0;border:0;padding:1px;width:1px;zoom:1",l.inlineBlockNeedsLayout=a=3===b.offsetWidth,a&&(c.style.zoom=1)),c.removeChild(e))}),function(){var a=d.createElement("div");l.deleteExpando=!0;try{delete a.test}catch(b){l.deleteExpando=!1}a=null}();var M=function(a){var b=n.noData[(a.nodeName+" ").toLowerCase()],c=+a.nodeType||1;return 1!==c&&9!==c?!1:!b||b!==!0&&a.getAttribute("classid")===b},N=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,O=/([A-Z])/g;function P(a,b,c){if(void 0===c&&1===a.nodeType){var d="data-"+b.replace(O,"-$1").toLowerCase();if(c=a.getAttribute(d),"string"==typeof c){try{c="true"===c?!0:"false"===c?!1:"null"===c?null:+c+""===c?+c:N.test(c)?n.parseJSON(c):c}catch(e){}n.data(a,b,c)}else c=void 0}return c}function Q(a){var b;for(b in a)if(("data"!==b||!n.isEmptyObject(a[b]))&&"toJSON"!==b)return!1;
return!0}function R(a,b,d,e){if(M(a)){var f,g,h=n.expando,i=a.nodeType,j=i?n.cache:a,k=i?a[h]:a[h]&&h;if(k&&j[k]&&(e||j[k].data)||void 0!==d||"string"!=typeof b)return k||(k=i?a[h]=c.pop()||n.guid++:h),j[k]||(j[k]=i?{}:{toJSON:n.noop}),("object"==typeof b||"function"==typeof b)&&(e?j[k]=n.extend(j[k],b):j[k].data=n.extend(j[k].data,b)),g=j[k],e||(g.data||(g.data={}),g=g.data),void 0!==d&&(g[n.camelCase(b)]=d),"string"==typeof b?(f=g[b],null==f&&(f=g[n.camelCase(b)])):f=g,f}}function S(a,b,c){if(M(a)){var d,e,f=a.nodeType,g=f?n.cache:a,h=f?a[n.expando]:n.expando;if(g[h]){if(b&&(d=c?g[h]:g[h].data)){n.isArray(b)?b=b.concat(n.map(b,n.camelCase)):b in d?b=[b]:(b=n.camelCase(b),b=b in d?[b]:b.split(" ")),e=b.length;while(e--)delete d[b[e]];if(c?!Q(d):!n.isEmptyObject(d))return}(c||(delete g[h].data,Q(g[h])))&&(f?n.cleanData([a],!0):l.deleteExpando||g!=g.window?delete g[h]:g[h]=void 0)}}}n.extend({cache:{},noData:{"applet ":!0,"embed ":!0,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(a){return a=a.nodeType?n.cache[a[n.expando]]:a[n.expando],!!a&&!Q(a)},data:function(a,b,c){return R(a,b,c)},removeData:function(a,b){return S(a,b)},_data:function(a,b,c){return R(a,b,c,!0)},_removeData:function(a,b){return S(a,b,!0)}}),n.fn.extend({data:function(a,b){var c,d,e,f=this[0],g=f&&f.attributes;if(void 0===a){if(this.length&&(e=n.data(f),1===f.nodeType&&!n._data(f,"parsedAttrs"))){c=g.length;while(c--)g[c]&&(d=g[c].name,0===d.indexOf("data-")&&(d=n.camelCase(d.slice(5)),P(f,d,e[d])));n._data(f,"parsedAttrs",!0)}return e}return"object"==typeof a?this.each(function(){n.data(this,a)}):arguments.length>1?this.each(function(){n.data(this,a,b)}):f?P(f,a,n.data(f,a)):void 0},removeData:function(a){return this.each(function(){n.removeData(this,a)})}}),n.extend({queue:function(a,b,c){var d;return a?(b=(b||"fx")+"queue",d=n._data(a,b),c&&(!d||n.isArray(c)?d=n._data(a,b,n.makeArray(c)):d.push(c)),d||[]):void 0},dequeue:function(a,b){b=b||"fx";var c=n.queue(a,b),d=c.length,e=c.shift(),f=n._queueHooks(a,b),g=function(){n.dequeue(a,b)};"inprogress"===e&&(e=c.shift(),d--),e&&("fx"===b&&c.unshift("inprogress"),delete f.stop,e.call(a,g,f)),!d&&f&&f.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return n._data(a,c)||n._data(a,c,{empty:n.Callbacks("once memory").add(function(){n._removeData(a,b+"queue"),n._removeData(a,c)})})}}),n.fn.extend({queue:function(a,b){var c=2;return"string"!=typeof a&&(b=a,a="fx",c--),arguments.length<c?n.queue(this[0],a):void 0===b?this:this.each(function(){var c=n.queue(this,a,b);n._queueHooks(this,a),"fx"===a&&"inprogress"!==c[0]&&n.dequeue(this,a)})},dequeue:function(a){return this.each(function(){n.dequeue(this,a)})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,b){var c,d=1,e=n.Deferred(),f=this,g=this.length,h=function(){--d||e.resolveWith(f,[f])};"string"!=typeof a&&(b=a,a=void 0),a=a||"fx";while(g--)c=n._data(f[g],a+"queueHooks"),c&&c.empty&&(d++,c.empty.add(h));return h(),e.promise(b)}}),function(){var a;l.shrinkWrapBlocks=function(){if(null!=a)return a;a=!1;var b,c,e;return c=d.getElementsByTagName("body")[0],c&&c.style?(b=d.createElement("div"),e=d.createElement("div"),e.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",c.appendChild(e).appendChild(b),"undefined"!=typeof b.style.zoom&&(b.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:1px;width:1px;zoom:1",b.appendChild(d.createElement("div")).style.width="5px",a=3!==b.offsetWidth),c.removeChild(e),a):void 0}}();var T=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,U=new RegExp("^(?:([+-])=|)("+T+")([a-z%]*)$","i"),V=["Top","Right","Bottom","Left"],W=function(a,b){return a=b||a,"none"===n.css(a,"display")||!n.contains(a.ownerDocument,a)};function X(a,b,c,d){var e,f=1,g=20,h=d?function(){return d.cur()}:function(){return n.css(a,b,"")},i=h(),j=c&&c[3]||(n.cssNumber[b]?"":"px"),k=(n.cssNumber[b]||"px"!==j&&+i)&&U.exec(n.css(a,b));if(k&&k[3]!==j){j=j||k[3],c=c||[],k=+i||1;do f=f||".5",k/=f,n.style(a,b,k+j);while(f!==(f=h()/i)&&1!==f&&--g)}return c&&(k=+k||+i||0,e=c[1]?k+(c[1]+1)*c[2]:+c[2],d&&(d.unit=j,d.start=k,d.end=e)),e}var Y=function(a,b,c,d,e,f,g){var h=0,i=a.length,j=null==c;if("object"===n.type(c)){e=!0;for(h in c)Y(a,b,h,c[h],!0,f,g)}else if(void 0!==d&&(e=!0,n.isFunction(d)||(g=!0),j&&(g?(b.call(a,d),b=null):(j=b,b=function(a,b,c){return j.call(n(a),c)})),b))for(;i>h;h++)b(a[h],c,g?d:d.call(a[h],h,b(a[h],c)));return e?a:j?b.call(a):i?b(a[0],c):f},Z=/^(?:checkbox|radio)$/i,$=/<([\w:-]+)/,_=/^$|\/(?:java|ecma)script/i,aa=/^\s+/,ba="abbr|article|aside|audio|bdi|canvas|data|datalist|details|dialog|figcaption|figure|footer|header|hgroup|main|mark|meter|nav|output|picture|progress|section|summary|template|time|video";function ca(a){var b=ba.split("|"),c=a.createDocumentFragment();if(c.createElement)while(b.length)c.createElement(b.pop());return c}!function(){var a=d.createElement("div"),b=d.createDocumentFragment(),c=d.createElement("input");a.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",l.leadingWhitespace=3===a.firstChild.nodeType,l.tbody=!a.getElementsByTagName("tbody").length,l.htmlSerialize=!!a.getElementsByTagName("link").length,l.html5Clone="<:nav></:nav>"!==d.createElement("nav").cloneNode(!0).outerHTML,c.type="checkbox",c.checked=!0,b.appendChild(c),l.appendChecked=c.checked,a.innerHTML="<textarea>x</textarea>",l.noCloneChecked=!!a.cloneNode(!0).lastChild.defaultValue,b.appendChild(a),c=d.createElement("input"),c.setAttribute("type","radio"),c.setAttribute("checked","checked"),c.setAttribute("name","t"),a.appendChild(c),l.checkClone=a.cloneNode(!0).cloneNode(!0).lastChild.checked,l.noCloneEvent=!!a.addEventListener,a[n.expando]=1,l.attributes=!a.getAttribute(n.expando)}();var da={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:l.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]};da.optgroup=da.option,da.tbody=da.tfoot=da.colgroup=da.caption=da.thead,da.th=da.td;function ea(a,b){var c,d,e=0,f="undefined"!=typeof a.getElementsByTagName?a.getElementsByTagName(b||"*"):"undefined"!=typeof a.querySelectorAll?a.querySelectorAll(b||"*"):void 0;if(!f)for(f=[],c=a.childNodes||a;null!=(d=c[e]);e++)!b||n.nodeName(d,b)?f.push(d):n.merge(f,ea(d,b));return void 0===b||b&&n.nodeName(a,b)?n.merge([a],f):f}function fa(a,b){for(var c,d=0;null!=(c=a[d]);d++)n._data(c,"globalEval",!b||n._data(b[d],"globalEval"))}var ga=/<|&#?\w+;/,ha=/<tbody/i;function ia(a){Z.test(a.type)&&(a.defaultChecked=a.checked)}function ja(a,b,c,d,e){for(var f,g,h,i,j,k,m,o=a.length,p=ca(b),q=[],r=0;o>r;r++)if(g=a[r],g||0===g)if("object"===n.type(g))n.merge(q,g.nodeType?[g]:g);else if(ga.test(g)){i=i||p.appendChild(b.createElement("div")),j=($.exec(g)||["",""])[1].toLowerCase(),m=da[j]||da._default,i.innerHTML=m[1]+n.htmlPrefilter(g)+m[2],f=m[0];while(f--)i=i.lastChild;if(!l.leadingWhitespace&&aa.test(g)&&q.push(b.createTextNode(aa.exec(g)[0])),!l.tbody){g="table"!==j||ha.test(g)?"<table>"!==m[1]||ha.test(g)?0:i:i.firstChild,f=g&&g.childNodes.length;while(f--)n.nodeName(k=g.childNodes[f],"tbody")&&!k.childNodes.length&&g.removeChild(k)}n.merge(q,i.childNodes),i.textContent="";while(i.firstChild)i.removeChild(i.firstChild);i=p.lastChild}else q.push(b.createTextNode(g));i&&p.removeChild(i),l.appendChecked||n.grep(ea(q,"input"),ia),r=0;while(g=q[r++])if(d&&n.inArray(g,d)>-1)e&&e.push(g);else if(h=n.contains(g.ownerDocument,g),i=ea(p.appendChild(g),"script"),h&&fa(i),c){f=0;while(g=i[f++])_.test(g.type||"")&&c.push(g)}return i=null,p}!function(){var b,c,e=d.createElement("div");for(b in{submit:!0,change:!0,focusin:!0})c="on"+b,(l[b]=c in a)||(e.setAttribute(c,"t"),l[b]=e.attributes[c].expando===!1);e=null}();var ka=/^(?:input|select|textarea)$/i,la=/^key/,ma=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,na=/^(?:focusinfocus|focusoutblur)$/,oa=/^([^.]*)(?:\.(.+)|)/;function pa(){return!0}function qa(){return!1}function ra(){try{return d.activeElement}catch(a){}}function sa(a,b,c,d,e,f){var g,h;if("object"==typeof b){"string"!=typeof c&&(d=d||c,c=void 0);for(h in b)sa(a,h,c,d,b[h],f);return a}if(null==d&&null==e?(e=c,d=c=void 0):null==e&&("string"==typeof c?(e=d,d=void 0):(e=d,d=c,c=void 0)),e===!1)e=qa;else if(!e)return a;return 1===f&&(g=e,e=function(a){return n().off(a),g.apply(this,arguments)},e.guid=g.guid||(g.guid=n.guid++)),a.each(function(){n.event.add(this,b,e,d,c)})}n.event={global:{},add:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,o,p,q,r=n._data(a);if(r){c.handler&&(i=c,c=i.handler,e=i.selector),c.guid||(c.guid=n.guid++),(g=r.events)||(g=r.events={}),(k=r.handle)||(k=r.handle=function(a){return"undefined"==typeof n||a&&n.event.triggered===a.type?void 0:n.event.dispatch.apply(k.elem,arguments)},k.elem=a),b=(b||"").match(G)||[""],h=b.length;while(h--)f=oa.exec(b[h])||[],o=q=f[1],p=(f[2]||"").split(".").sort(),o&&(j=n.event.special[o]||{},o=(e?j.delegateType:j.bindType)||o,j=n.event.special[o]||{},l=n.extend({type:o,origType:q,data:d,handler:c,guid:c.guid,selector:e,needsContext:e&&n.expr.match.needsContext.test(e),namespace:p.join(".")},i),(m=g[o])||(m=g[o]=[],m.delegateCount=0,j.setup&&j.setup.call(a,d,p,k)!==!1||(a.addEventListener?a.addEventListener(o,k,!1):a.attachEvent&&a.attachEvent("on"+o,k))),j.add&&(j.add.call(a,l),l.handler.guid||(l.handler.guid=c.guid)),e?m.splice(m.delegateCount++,0,l):m.push(l),n.event.global[o]=!0);a=null}},remove:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,o,p,q,r=n.hasData(a)&&n._data(a);if(r&&(k=r.events)){b=(b||"").match(G)||[""],j=b.length;while(j--)if(h=oa.exec(b[j])||[],o=q=h[1],p=(h[2]||"").split(".").sort(),o){l=n.event.special[o]||{},o=(d?l.delegateType:l.bindType)||o,m=k[o]||[],h=h[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),i=f=m.length;while(f--)g=m[f],!e&&q!==g.origType||c&&c.guid!==g.guid||h&&!h.test(g.namespace)||d&&d!==g.selector&&("**"!==d||!g.selector)||(m.splice(f,1),g.selector&&m.delegateCount--,l.remove&&l.remove.call(a,g));i&&!m.length&&(l.teardown&&l.teardown.call(a,p,r.handle)!==!1||n.removeEvent(a,o,r.handle),delete k[o])}else for(o in k)n.event.remove(a,o+b[j],c,d,!0);n.isEmptyObject(k)&&(delete r.handle,n._removeData(a,"events"))}},trigger:function(b,c,e,f){var g,h,i,j,l,m,o,p=[e||d],q=k.call(b,"type")?b.type:b,r=k.call(b,"namespace")?b.namespace.split("."):[];if(i=m=e=e||d,3!==e.nodeType&&8!==e.nodeType&&!na.test(q+n.event.triggered)&&(q.indexOf(".")>-1&&(r=q.split("."),q=r.shift(),r.sort()),h=q.indexOf(":")<0&&"on"+q,b=b[n.expando]?b:new n.Event(q,"object"==typeof b&&b),b.isTrigger=f?2:3,b.namespace=r.join("."),b.rnamespace=b.namespace?new RegExp("(^|\\.)"+r.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,b.result=void 0,b.target||(b.target=e),c=null==c?[b]:n.makeArray(c,[b]),l=n.event.special[q]||{},f||!l.trigger||l.trigger.apply(e,c)!==!1)){if(!f&&!l.noBubble&&!n.isWindow(e)){for(j=l.delegateType||q,na.test(j+q)||(i=i.parentNode);i;i=i.parentNode)p.push(i),m=i;m===(e.ownerDocument||d)&&p.push(m.defaultView||m.parentWindow||a)}o=0;while((i=p[o++])&&!b.isPropagationStopped())b.type=o>1?j:l.bindType||q,g=(n._data(i,"events")||{})[b.type]&&n._data(i,"handle"),g&&g.apply(i,c),g=h&&i[h],g&&g.apply&&M(i)&&(b.result=g.apply(i,c),b.result===!1&&b.preventDefault());if(b.type=q,!f&&!b.isDefaultPrevented()&&(!l._default||l._default.apply(p.pop(),c)===!1)&&M(e)&&h&&e[q]&&!n.isWindow(e)){m=e[h],m&&(e[h]=null),n.event.triggered=q;try{e[q]()}catch(s){}n.event.triggered=void 0,m&&(e[h]=m)}return b.result}},dispatch:function(a){a=n.event.fix(a);var b,c,d,f,g,h=[],i=e.call(arguments),j=(n._data(this,"events")||{})[a.type]||[],k=n.event.special[a.type]||{};if(i[0]=a,a.delegateTarget=this,!k.preDispatch||k.preDispatch.call(this,a)!==!1){h=n.event.handlers.call(this,a,j),b=0;while((f=h[b++])&&!a.isPropagationStopped()){a.currentTarget=f.elem,c=0;while((g=f.handlers[c++])&&!a.isImmediatePropagationStopped())(!a.rnamespace||a.rnamespace.test(g.namespace))&&(a.handleObj=g,a.data=g.data,d=((n.event.special[g.origType]||{}).handle||g.handler).apply(f.elem,i),void 0!==d&&(a.result=d)===!1&&(a.preventDefault(),a.stopPropagation()))}return k.postDispatch&&k.postDispatch.call(this,a),a.result}},handlers:function(a,b){var c,d,e,f,g=[],h=b.delegateCount,i=a.target;if(h&&i.nodeType&&("click"!==a.type||isNaN(a.button)||a.button<1))for(;i!=this;i=i.parentNode||this)if(1===i.nodeType&&(i.disabled!==!0||"click"!==a.type)){for(d=[],c=0;h>c;c++)f=b[c],e=f.selector+" ",void 0===d[e]&&(d[e]=f.needsContext?n(e,this).index(i)>-1:n.find(e,this,null,[i]).length),d[e]&&d.push(f);d.length&&g.push({elem:i,handlers:d})}return h<b.length&&g.push({elem:this,handlers:b.slice(h)}),g},fix:function(a){if(a[n.expando])return a;var b,c,e,f=a.type,g=a,h=this.fixHooks[f];h||(this.fixHooks[f]=h=ma.test(f)?this.mouseHooks:la.test(f)?this.keyHooks:{}),e=h.props?this.props.concat(h.props):this.props,a=new n.Event(g),b=e.length;while(b--)c=e[b],a[c]=g[c];return a.target||(a.target=g.srcElement||d),3===a.target.nodeType&&(a.target=a.target.parentNode),a.metaKey=!!a.metaKey,h.filter?h.filter(a,g):a},props:"altKey bubbles cancelable ctrlKey currentTarget detail eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){return null==a.which&&(a.which=null!=b.charCode?b.charCode:b.keyCode),a}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,b){var c,e,f,g=b.button,h=b.fromElement;return null==a.pageX&&null!=b.clientX&&(e=a.target.ownerDocument||d,f=e.documentElement,c=e.body,a.pageX=b.clientX+(f&&f.scrollLeft||c&&c.scrollLeft||0)-(f&&f.clientLeft||c&&c.clientLeft||0),a.pageY=b.clientY+(f&&f.scrollTop||c&&c.scrollTop||0)-(f&&f.clientTop||c&&c.clientTop||0)),!a.relatedTarget&&h&&(a.relatedTarget=h===a.target?b.toElement:h),a.which||void 0===g||(a.which=1&g?1:2&g?3:4&g?2:0),a}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==ra()&&this.focus)try{return this.focus(),!1}catch(a){}},delegateType:"focusin"},blur:{trigger:function(){return this===ra()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return n.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):void 0},_default:function(a){return n.nodeName(a.target,"a")}},beforeunload:{postDispatch:function(a){void 0!==a.result&&a.originalEvent&&(a.originalEvent.returnValue=a.result)}}},simulate:function(a,b,c){var d=n.extend(new n.Event,c,{type:a,isSimulated:!0});n.event.trigger(d,null,b),d.isDefaultPrevented()&&c.preventDefault()}},n.removeEvent=d.removeEventListener?function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c)}:function(a,b,c){var d="on"+b;a.detachEvent&&("undefined"==typeof a[d]&&(a[d]=null),a.detachEvent(d,c))},n.Event=function(a,b){return this instanceof n.Event?(a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||void 0===a.defaultPrevented&&a.returnValue===!1?pa:qa):this.type=a,b&&n.extend(this,b),this.timeStamp=a&&a.timeStamp||n.now(),void(this[n.expando]=!0)):new n.Event(a,b)},n.Event.prototype={constructor:n.Event,isDefaultPrevented:qa,isPropagationStopped:qa,isImmediatePropagationStopped:qa,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=pa,a&&(a.preventDefault?a.preventDefault():a.returnValue=!1)},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=pa,a&&!this.isSimulated&&(a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0)},stopImmediatePropagation:function(){var a=this.originalEvent;this.isImmediatePropagationStopped=pa,a&&a.stopImmediatePropagation&&a.stopImmediatePropagation(),this.stopPropagation()}},n.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(a,b){n.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,d=this,e=a.relatedTarget,f=a.handleObj;return(!e||e!==d&&!n.contains(d,e))&&(a.type=f.origType,c=f.handler.apply(this,arguments),a.type=b),c}}}),l.submit||(n.event.special.submit={setup:function(){return n.nodeName(this,"form")?!1:void n.event.add(this,"click._submit keypress._submit",function(a){var b=a.target,c=n.nodeName(b,"input")||n.nodeName(b,"button")?n.prop(b,"form"):void 0;c&&!n._data(c,"submit")&&(n.event.add(c,"submit._submit",function(a){a._submitBubble=!0}),n._data(c,"submit",!0))})},postDispatch:function(a){a._submitBubble&&(delete a._submitBubble,this.parentNode&&!a.isTrigger&&n.event.simulate("submit",this.parentNode,a))},teardown:function(){return n.nodeName(this,"form")?!1:void n.event.remove(this,"._submit")}}),l.change||(n.event.special.change={setup:function(){return ka.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(n.event.add(this,"propertychange._change",function(a){"checked"===a.originalEvent.propertyName&&(this._justChanged=!0)}),n.event.add(this,"click._change",function(a){this._justChanged&&!a.isTrigger&&(this._justChanged=!1),n.event.simulate("change",this,a)})),!1):void n.event.add(this,"beforeactivate._change",function(a){var b=a.target;ka.test(b.nodeName)&&!n._data(b,"change")&&(n.event.add(b,"change._change",function(a){!this.parentNode||a.isSimulated||a.isTrigger||n.event.simulate("change",this.parentNode,a)}),n._data(b,"change",!0))})},handle:function(a){var b=a.target;return this!==b||a.isSimulated||a.isTrigger||"radio"!==b.type&&"checkbox"!==b.type?a.handleObj.handler.apply(this,arguments):void 0},teardown:function(){return n.event.remove(this,"._change"),!ka.test(this.nodeName)}}),l.focusin||n.each({focus:"focusin",blur:"focusout"},function(a,b){var c=function(a){n.event.simulate(b,a.target,n.event.fix(a))};n.event.special[b]={setup:function(){var d=this.ownerDocument||this,e=n._data(d,b);e||d.addEventListener(a,c,!0),n._data(d,b,(e||0)+1)},teardown:function(){var d=this.ownerDocument||this,e=n._data(d,b)-1;e?n._data(d,b,e):(d.removeEventListener(a,c,!0),n._removeData(d,b))}}}),n.fn.extend({on:function(a,b,c,d){return sa(this,a,b,c,d)},one:function(a,b,c,d){return sa(this,a,b,c,d,1)},off:function(a,b,c){var d,e;if(a&&a.preventDefault&&a.handleObj)return d=a.handleObj,n(a.delegateTarget).off(d.namespace?d.origType+"."+d.namespace:d.origType,d.selector,d.handler),this;if("object"==typeof a){for(e in a)this.off(e,b,a[e]);return this}return(b===!1||"function"==typeof b)&&(c=b,b=void 0),c===!1&&(c=qa),this.each(function(){n.event.remove(this,a,c,b)})},trigger:function(a,b){return this.each(function(){n.event.trigger(a,b,this)})},triggerHandler:function(a,b){var c=this[0];return c?n.event.trigger(a,b,c,!0):void 0}});var ta=/ jQuery\d+="(?:null|\d+)"/g,ua=new RegExp("<(?:"+ba+")[\\s/>]","i"),va=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,wa=/<script|<style|<link/i,xa=/checked\s*(?:[^=]|=\s*.checked.)/i,ya=/^true\/(.*)/,za=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Aa=ca(d),Ba=Aa.appendChild(d.createElement("div"));function Ca(a,b){return n.nodeName(a,"table")&&n.nodeName(11!==b.nodeType?b:b.firstChild,"tr")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function Da(a){return a.type=(null!==n.find.attr(a,"type"))+"/"+a.type,a}function Ea(a){var b=ya.exec(a.type);return b?a.type=b[1]:a.removeAttribute("type"),a}function Fa(a,b){if(1===b.nodeType&&n.hasData(a)){var c,d,e,f=n._data(a),g=n._data(b,f),h=f.events;if(h){delete g.handle,g.events={};for(c in h)for(d=0,e=h[c].length;e>d;d++)n.event.add(b,c,h[c][d])}g.data&&(g.data=n.extend({},g.data))}}function Ga(a,b){var c,d,e;if(1===b.nodeType){if(c=b.nodeName.toLowerCase(),!l.noCloneEvent&&b[n.expando]){e=n._data(b);for(d in e.events)n.removeEvent(b,d,e.handle);b.removeAttribute(n.expando)}"script"===c&&b.text!==a.text?(Da(b).text=a.text,Ea(b)):"object"===c?(b.parentNode&&(b.outerHTML=a.outerHTML),l.html5Clone&&a.innerHTML&&!n.trim(b.innerHTML)&&(b.innerHTML=a.innerHTML)):"input"===c&&Z.test(a.type)?(b.defaultChecked=b.checked=a.checked,b.value!==a.value&&(b.value=a.value)):"option"===c?b.defaultSelected=b.selected=a.defaultSelected:("input"===c||"textarea"===c)&&(b.defaultValue=a.defaultValue)}}function Ha(a,b,c,d){b=f.apply([],b);var e,g,h,i,j,k,m=0,o=a.length,p=o-1,q=b[0],r=n.isFunction(q);if(r||o>1&&"string"==typeof q&&!l.checkClone&&xa.test(q))return a.each(function(e){var f=a.eq(e);r&&(b[0]=q.call(this,e,f.html())),Ha(f,b,c,d)});if(o&&(k=ja(b,a[0].ownerDocument,!1,a,d),e=k.firstChild,1===k.childNodes.length&&(k=e),e||d)){for(i=n.map(ea(k,"script"),Da),h=i.length;o>m;m++)g=k,m!==p&&(g=n.clone(g,!0,!0),h&&n.merge(i,ea(g,"script"))),c.call(a[m],g,m);if(h)for(j=i[i.length-1].ownerDocument,n.map(i,Ea),m=0;h>m;m++)g=i[m],_.test(g.type||"")&&!n._data(g,"globalEval")&&n.contains(j,g)&&(g.src?n._evalUrl&&n._evalUrl(g.src):n.globalEval((g.text||g.textContent||g.innerHTML||"").replace(za,"")));k=e=null}return a}function Ia(a,b,c){for(var d,e=b?n.filter(b,a):a,f=0;null!=(d=e[f]);f++)c||1!==d.nodeType||n.cleanData(ea(d)),d.parentNode&&(c&&n.contains(d.ownerDocument,d)&&fa(ea(d,"script")),d.parentNode.removeChild(d));return a}n.extend({htmlPrefilter:function(a){return a.replace(va,"<$1></$2>")},clone:function(a,b,c){var d,e,f,g,h,i=n.contains(a.ownerDocument,a);if(l.html5Clone||n.isXMLDoc(a)||!ua.test("<"+a.nodeName+">")?f=a.cloneNode(!0):(Ba.innerHTML=a.outerHTML,Ba.removeChild(f=Ba.firstChild)),!(l.noCloneEvent&&l.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||n.isXMLDoc(a)))for(d=ea(f),h=ea(a),g=0;null!=(e=h[g]);++g)d[g]&&Ga(e,d[g]);if(b)if(c)for(h=h||ea(a),d=d||ea(f),g=0;null!=(e=h[g]);g++)Fa(e,d[g]);else Fa(a,f);return d=ea(f,"script"),d.length>0&&fa(d,!i&&ea(a,"script")),d=h=e=null,f},cleanData:function(a,b){for(var d,e,f,g,h=0,i=n.expando,j=n.cache,k=l.attributes,m=n.event.special;null!=(d=a[h]);h++)if((b||M(d))&&(f=d[i],g=f&&j[f])){if(g.events)for(e in g.events)m[e]?n.event.remove(d,e):n.removeEvent(d,e,g.handle);j[f]&&(delete j[f],k||"undefined"==typeof d.removeAttribute?d[i]=void 0:d.removeAttribute(i),c.push(f))}}}),n.fn.extend({domManip:Ha,detach:function(a){return Ia(this,a,!0)},remove:function(a){return Ia(this,a)},text:function(a){return Y(this,function(a){return void 0===a?n.text(this):this.empty().append((this[0]&&this[0].ownerDocument||d).createTextNode(a))},null,a,arguments.length)},append:function(){return Ha(this,arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=Ca(this,a);b.appendChild(a)}})},prepend:function(){return Ha(this,arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=Ca(this,a);b.insertBefore(a,b.firstChild)}})},before:function(){return Ha(this,arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return Ha(this,arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},empty:function(){for(var a,b=0;null!=(a=this[b]);b++){1===a.nodeType&&n.cleanData(ea(a,!1));while(a.firstChild)a.removeChild(a.firstChild);a.options&&n.nodeName(a,"select")&&(a.options.length=0)}return this},clone:function(a,b){return a=null==a?!1:a,b=null==b?a:b,this.map(function(){return n.clone(this,a,b)})},html:function(a){return Y(this,function(a){var b=this[0]||{},c=0,d=this.length;if(void 0===a)return 1===b.nodeType?b.innerHTML.replace(ta,""):void 0;if("string"==typeof a&&!wa.test(a)&&(l.htmlSerialize||!ua.test(a))&&(l.leadingWhitespace||!aa.test(a))&&!da[($.exec(a)||["",""])[1].toLowerCase()]){a=n.htmlPrefilter(a);try{for(;d>c;c++)b=this[c]||{},1===b.nodeType&&(n.cleanData(ea(b,!1)),b.innerHTML=a);b=0}catch(e){}}b&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(){var a=[];return Ha(this,arguments,function(b){var c=this.parentNode;n.inArray(this,a)<0&&(n.cleanData(ea(this)),c&&c.replaceChild(b,this))},a)}}),n.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){n.fn[a]=function(a){for(var c,d=0,e=[],f=n(a),h=f.length-1;h>=d;d++)c=d===h?this:this.clone(!0),n(f[d])[b](c),g.apply(e,c.get());return this.pushStack(e)}});var Ja,Ka={HTML:"block",BODY:"block"};function La(a,b){var c=n(b.createElement(a)).appendTo(b.body),d=n.css(c[0],"display");return c.detach(),d}function Ma(a){var b=d,c=Ka[a];return c||(c=La(a,b),"none"!==c&&c||(Ja=(Ja||n("<iframe frameborder='0' width='0' height='0'/>")).appendTo(b.documentElement),b=(Ja[0].contentWindow||Ja[0].contentDocument).document,b.write(),b.close(),c=La(a,b),Ja.detach()),Ka[a]=c),c}var Na=/^margin/,Oa=new RegExp("^("+T+")(?!px)[a-z%]+$","i"),Pa=function(a,b,c,d){var e,f,g={};for(f in b)g[f]=a.style[f],a.style[f]=b[f];e=c.apply(a,d||[]);for(f in b)a.style[f]=g[f];return e},Qa=d.documentElement;!function(){var b,c,e,f,g,h,i=d.createElement("div"),j=d.createElement("div");if(j.style){j.style.cssText="float:left;opacity:.5",l.opacity="0.5"===j.style.opacity,l.cssFloat=!!j.style.cssFloat,j.style.backgroundClip="content-box",j.cloneNode(!0).style.backgroundClip="",l.clearCloneStyle="content-box"===j.style.backgroundClip,i=d.createElement("div"),i.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",j.innerHTML="",i.appendChild(j),l.boxSizing=""===j.style.boxSizing||""===j.style.MozBoxSizing||""===j.style.WebkitBoxSizing,n.extend(l,{reliableHiddenOffsets:function(){return null==b&&k(),f},boxSizingReliable:function(){return null==b&&k(),e},pixelMarginRight:function(){return null==b&&k(),c},pixelPosition:function(){return null==b&&k(),b},reliableMarginRight:function(){return null==b&&k(),g},reliableMarginLeft:function(){return null==b&&k(),h}});function k(){var k,l,m=d.documentElement;m.appendChild(i),j.style.cssText="-webkit-box-sizing:border-box;box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",b=e=h=!1,c=g=!0,a.getComputedStyle&&(l=a.getComputedStyle(j),b="1%"!==(l||{}).top,h="2px"===(l||{}).marginLeft,e="4px"===(l||{width:"4px"}).width,j.style.marginRight="50%",c="4px"===(l||{marginRight:"4px"}).marginRight,k=j.appendChild(d.createElement("div")),k.style.cssText=j.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",k.style.marginRight=k.style.width="0",j.style.width="1px",g=!parseFloat((a.getComputedStyle(k)||{}).marginRight),j.removeChild(k)),j.style.display="none",f=0===j.getClientRects().length,f&&(j.style.display="",j.innerHTML="<table><tr><td></td><td>t</td></tr></table>",k=j.getElementsByTagName("td"),k[0].style.cssText="margin:0;border:0;padding:0;display:none",f=0===k[0].offsetHeight,f&&(k[0].style.display="",k[1].style.display="none",f=0===k[0].offsetHeight)),m.removeChild(i)}}}();var Ra,Sa,Ta=/^(top|right|bottom|left)$/;a.getComputedStyle?(Ra=function(b){var c=b.ownerDocument.defaultView;return c.opener||(c=a),c.getComputedStyle(b)},Sa=function(a,b,c){var d,e,f,g,h=a.style;return c=c||Ra(a),g=c?c.getPropertyValue(b)||c[b]:void 0,c&&(""!==g||n.contains(a.ownerDocument,a)||(g=n.style(a,b)),!l.pixelMarginRight()&&Oa.test(g)&&Na.test(b)&&(d=h.width,e=h.minWidth,f=h.maxWidth,h.minWidth=h.maxWidth=h.width=g,g=c.width,h.width=d,h.minWidth=e,h.maxWidth=f)),void 0===g?g:g+""}):Qa.currentStyle&&(Ra=function(a){return a.currentStyle},Sa=function(a,b,c){var d,e,f,g,h=a.style;return c=c||Ra(a),g=c?c[b]:void 0,null==g&&h&&h[b]&&(g=h[b]),Oa.test(g)&&!Ta.test(b)&&(d=h.left,e=a.runtimeStyle,f=e&&e.left,f&&(e.left=a.currentStyle.left),h.left="fontSize"===b?"1em":g,g=h.pixelLeft+"px",h.left=d,f&&(e.left=f)),void 0===g?g:g+""||"auto"});function Ua(a,b){return{get:function(){return a()?void delete this.get:(this.get=b).apply(this,arguments)}}}var Va=/alpha\([^)]*\)/i,Wa=/opacity\s*=\s*([^)]*)/i,Xa=/^(none|table(?!-c[ea]).+)/,Ya=new RegExp("^("+T+")(.*)$","i"),Za={position:"absolute",visibility:"hidden",display:"block"},$a={letterSpacing:"0",fontWeight:"400"},_a=["Webkit","O","Moz","ms"],ab=d.createElement("div").style;function bb(a){if(a in ab)return a;var b=a.charAt(0).toUpperCase()+a.slice(1),c=_a.length;while(c--)if(a=_a[c]+b,a in ab)return a}function cb(a,b){for(var c,d,e,f=[],g=0,h=a.length;h>g;g++)d=a[g],d.style&&(f[g]=n._data(d,"olddisplay"),c=d.style.display,b?(f[g]||"none"!==c||(d.style.display=""),""===d.style.display&&W(d)&&(f[g]=n._data(d,"olddisplay",Ma(d.nodeName)))):(e=W(d),(c&&"none"!==c||!e)&&n._data(d,"olddisplay",e?c:n.css(d,"display"))));for(g=0;h>g;g++)d=a[g],d.style&&(b&&"none"!==d.style.display&&""!==d.style.display||(d.style.display=b?f[g]||"":"none"));return a}function db(a,b,c){var d=Ya.exec(b);return d?Math.max(0,d[1]-(c||0))+(d[2]||"px"):b}function eb(a,b,c,d,e){for(var f=c===(d?"border":"content")?4:"width"===b?1:0,g=0;4>f;f+=2)"margin"===c&&(g+=n.css(a,c+V[f],!0,e)),d?("content"===c&&(g-=n.css(a,"padding"+V[f],!0,e)),"margin"!==c&&(g-=n.css(a,"border"+V[f]+"Width",!0,e))):(g+=n.css(a,"padding"+V[f],!0,e),"padding"!==c&&(g+=n.css(a,"border"+V[f]+"Width",!0,e)));return g}function fb(b,c,e){var f=!0,g="width"===c?b.offsetWidth:b.offsetHeight,h=Ra(b),i=l.boxSizing&&"border-box"===n.css(b,"boxSizing",!1,h);if(d.msFullscreenElement&&a.top!==a&&b.getClientRects().length&&(g=Math.round(100*b.getBoundingClientRect()[c])),0>=g||null==g){if(g=Sa(b,c,h),(0>g||null==g)&&(g=b.style[c]),Oa.test(g))return g;f=i&&(l.boxSizingReliable()||g===b.style[c]),g=parseFloat(g)||0}return g+eb(b,c,e||(i?"border":"content"),f,h)+"px"}n.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=Sa(a,"opacity");return""===c?"1":c}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":l.cssFloat?"cssFloat":"styleFloat"},style:function(a,b,c,d){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var e,f,g,h=n.camelCase(b),i=a.style;if(b=n.cssProps[h]||(n.cssProps[h]=bb(h)||h),g=n.cssHooks[b]||n.cssHooks[h],void 0===c)return g&&"get"in g&&void 0!==(e=g.get(a,!1,d))?e:i[b];if(f=typeof c,"string"===f&&(e=U.exec(c))&&e[1]&&(c=X(a,b,e),f="number"),null!=c&&c===c&&("number"===f&&(c+=e&&e[3]||(n.cssNumber[h]?"":"px")),l.clearCloneStyle||""!==c||0!==b.indexOf("background")||(i[b]="inherit"),!(g&&"set"in g&&void 0===(c=g.set(a,c,d)))))try{i[b]=c}catch(j){}}},css:function(a,b,c,d){var e,f,g,h=n.camelCase(b);return b=n.cssProps[h]||(n.cssProps[h]=bb(h)||h),g=n.cssHooks[b]||n.cssHooks[h],g&&"get"in g&&(f=g.get(a,!0,c)),void 0===f&&(f=Sa(a,b,d)),"normal"===f&&b in $a&&(f=$a[b]),""===c||c?(e=parseFloat(f),c===!0||isFinite(e)?e||0:f):f}}),n.each(["height","width"],function(a,b){n.cssHooks[b]={get:function(a,c,d){return c?Xa.test(n.css(a,"display"))&&0===a.offsetWidth?Pa(a,Za,function(){return fb(a,b,d)}):fb(a,b,d):void 0},set:function(a,c,d){var e=d&&Ra(a);return db(a,c,d?eb(a,b,d,l.boxSizing&&"border-box"===n.css(a,"boxSizing",!1,e),e):0)}}}),l.opacity||(n.cssHooks.opacity={get:function(a,b){return Wa.test((b&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":b?"1":""},set:function(a,b){var c=a.style,d=a.currentStyle,e=n.isNumeric(b)?"alpha(opacity="+100*b+")":"",f=d&&d.filter||c.filter||"";c.zoom=1,(b>=1||""===b)&&""===n.trim(f.replace(Va,""))&&c.removeAttribute&&(c.removeAttribute("filter"),""===b||d&&!d.filter)||(c.filter=Va.test(f)?f.replace(Va,e):f+" "+e)}}),n.cssHooks.marginRight=Ua(l.reliableMarginRight,function(a,b){return b?Pa(a,{display:"inline-block"},Sa,[a,"marginRight"]):void 0}),n.cssHooks.marginLeft=Ua(l.reliableMarginLeft,function(a,b){return b?(parseFloat(Sa(a,"marginLeft"))||(n.contains(a.ownerDocument,a)?a.getBoundingClientRect().left-Pa(a,{
marginLeft:0},function(){return a.getBoundingClientRect().left}):0))+"px":void 0}),n.each({margin:"",padding:"",border:"Width"},function(a,b){n.cssHooks[a+b]={expand:function(c){for(var d=0,e={},f="string"==typeof c?c.split(" "):[c];4>d;d++)e[a+V[d]+b]=f[d]||f[d-2]||f[0];return e}},Na.test(a)||(n.cssHooks[a+b].set=db)}),n.fn.extend({css:function(a,b){return Y(this,function(a,b,c){var d,e,f={},g=0;if(n.isArray(b)){for(d=Ra(a),e=b.length;e>g;g++)f[b[g]]=n.css(a,b[g],!1,d);return f}return void 0!==c?n.style(a,b,c):n.css(a,b)},a,b,arguments.length>1)},show:function(){return cb(this,!0)},hide:function(){return cb(this)},toggle:function(a){return"boolean"==typeof a?a?this.show():this.hide():this.each(function(){W(this)?n(this).show():n(this).hide()})}});function gb(a,b,c,d,e){return new gb.prototype.init(a,b,c,d,e)}n.Tween=gb,gb.prototype={constructor:gb,init:function(a,b,c,d,e,f){this.elem=a,this.prop=c,this.easing=e||n.easing._default,this.options=b,this.start=this.now=this.cur(),this.end=d,this.unit=f||(n.cssNumber[c]?"":"px")},cur:function(){var a=gb.propHooks[this.prop];return a&&a.get?a.get(this):gb.propHooks._default.get(this)},run:function(a){var b,c=gb.propHooks[this.prop];return this.options.duration?this.pos=b=n.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):this.pos=b=a,this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):gb.propHooks._default.set(this),this}},gb.prototype.init.prototype=gb.prototype,gb.propHooks={_default:{get:function(a){var b;return 1!==a.elem.nodeType||null!=a.elem[a.prop]&&null==a.elem.style[a.prop]?a.elem[a.prop]:(b=n.css(a.elem,a.prop,""),b&&"auto"!==b?b:0)},set:function(a){n.fx.step[a.prop]?n.fx.step[a.prop](a):1!==a.elem.nodeType||null==a.elem.style[n.cssProps[a.prop]]&&!n.cssHooks[a.prop]?a.elem[a.prop]=a.now:n.style(a.elem,a.prop,a.now+a.unit)}}},gb.propHooks.scrollTop=gb.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},n.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2},_default:"swing"},n.fx=gb.prototype.init,n.fx.step={};var hb,ib,jb=/^(?:toggle|show|hide)$/,kb=/queueHooks$/;function lb(){return a.setTimeout(function(){hb=void 0}),hb=n.now()}function mb(a,b){var c,d={height:a},e=0;for(b=b?1:0;4>e;e+=2-b)c=V[e],d["margin"+c]=d["padding"+c]=a;return b&&(d.opacity=d.width=a),d}function nb(a,b,c){for(var d,e=(qb.tweeners[b]||[]).concat(qb.tweeners["*"]),f=0,g=e.length;g>f;f++)if(d=e[f].call(c,b,a))return d}function ob(a,b,c){var d,e,f,g,h,i,j,k,m=this,o={},p=a.style,q=a.nodeType&&W(a),r=n._data(a,"fxshow");c.queue||(h=n._queueHooks(a,"fx"),null==h.unqueued&&(h.unqueued=0,i=h.empty.fire,h.empty.fire=function(){h.unqueued||i()}),h.unqueued++,m.always(function(){m.always(function(){h.unqueued--,n.queue(a,"fx").length||h.empty.fire()})})),1===a.nodeType&&("height"in b||"width"in b)&&(c.overflow=[p.overflow,p.overflowX,p.overflowY],j=n.css(a,"display"),k="none"===j?n._data(a,"olddisplay")||Ma(a.nodeName):j,"inline"===k&&"none"===n.css(a,"float")&&(l.inlineBlockNeedsLayout&&"inline"!==Ma(a.nodeName)?p.zoom=1:p.display="inline-block")),c.overflow&&(p.overflow="hidden",l.shrinkWrapBlocks()||m.always(function(){p.overflow=c.overflow[0],p.overflowX=c.overflow[1],p.overflowY=c.overflow[2]}));for(d in b)if(e=b[d],jb.exec(e)){if(delete b[d],f=f||"toggle"===e,e===(q?"hide":"show")){if("show"!==e||!r||void 0===r[d])continue;q=!0}o[d]=r&&r[d]||n.style(a,d)}else j=void 0;if(n.isEmptyObject(o))"inline"===("none"===j?Ma(a.nodeName):j)&&(p.display=j);else{r?"hidden"in r&&(q=r.hidden):r=n._data(a,"fxshow",{}),f&&(r.hidden=!q),q?n(a).show():m.done(function(){n(a).hide()}),m.done(function(){var b;n._removeData(a,"fxshow");for(b in o)n.style(a,b,o[b])});for(d in o)g=nb(q?r[d]:0,d,m),d in r||(r[d]=g.start,q&&(g.end=g.start,g.start="width"===d||"height"===d?1:0))}}function pb(a,b){var c,d,e,f,g;for(c in a)if(d=n.camelCase(c),e=b[d],f=a[c],n.isArray(f)&&(e=f[1],f=a[c]=f[0]),c!==d&&(a[d]=f,delete a[c]),g=n.cssHooks[d],g&&"expand"in g){f=g.expand(f),delete a[d];for(c in f)c in a||(a[c]=f[c],b[c]=e)}else b[d]=e}function qb(a,b,c){var d,e,f=0,g=qb.prefilters.length,h=n.Deferred().always(function(){delete i.elem}),i=function(){if(e)return!1;for(var b=hb||lb(),c=Math.max(0,j.startTime+j.duration-b),d=c/j.duration||0,f=1-d,g=0,i=j.tweens.length;i>g;g++)j.tweens[g].run(f);return h.notifyWith(a,[j,f,c]),1>f&&i?c:(h.resolveWith(a,[j]),!1)},j=h.promise({elem:a,props:n.extend({},b),opts:n.extend(!0,{specialEasing:{},easing:n.easing._default},c),originalProperties:b,originalOptions:c,startTime:hb||lb(),duration:c.duration,tweens:[],createTween:function(b,c){var d=n.Tween(a,j.opts,b,c,j.opts.specialEasing[b]||j.opts.easing);return j.tweens.push(d),d},stop:function(b){var c=0,d=b?j.tweens.length:0;if(e)return this;for(e=!0;d>c;c++)j.tweens[c].run(1);return b?(h.notifyWith(a,[j,1,0]),h.resolveWith(a,[j,b])):h.rejectWith(a,[j,b]),this}}),k=j.props;for(pb(k,j.opts.specialEasing);g>f;f++)if(d=qb.prefilters[f].call(j,a,k,j.opts))return n.isFunction(d.stop)&&(n._queueHooks(j.elem,j.opts.queue).stop=n.proxy(d.stop,d)),d;return n.map(k,nb,j),n.isFunction(j.opts.start)&&j.opts.start.call(a,j),n.fx.timer(n.extend(i,{elem:a,anim:j,queue:j.opts.queue})),j.progress(j.opts.progress).done(j.opts.done,j.opts.complete).fail(j.opts.fail).always(j.opts.always)}n.Animation=n.extend(qb,{tweeners:{"*":[function(a,b){var c=this.createTween(a,b);return X(c.elem,a,U.exec(b),c),c}]},tweener:function(a,b){n.isFunction(a)?(b=a,a=["*"]):a=a.match(G);for(var c,d=0,e=a.length;e>d;d++)c=a[d],qb.tweeners[c]=qb.tweeners[c]||[],qb.tweeners[c].unshift(b)},prefilters:[ob],prefilter:function(a,b){b?qb.prefilters.unshift(a):qb.prefilters.push(a)}}),n.speed=function(a,b,c){var d=a&&"object"==typeof a?n.extend({},a):{complete:c||!c&&b||n.isFunction(a)&&a,duration:a,easing:c&&b||b&&!n.isFunction(b)&&b};return d.duration=n.fx.off?0:"number"==typeof d.duration?d.duration:d.duration in n.fx.speeds?n.fx.speeds[d.duration]:n.fx.speeds._default,(null==d.queue||d.queue===!0)&&(d.queue="fx"),d.old=d.complete,d.complete=function(){n.isFunction(d.old)&&d.old.call(this),d.queue&&n.dequeue(this,d.queue)},d},n.fn.extend({fadeTo:function(a,b,c,d){return this.filter(W).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=n.isEmptyObject(a),f=n.speed(b,c,d),g=function(){var b=qb(this,n.extend({},a),f);(e||n._data(this,"finish"))&&b.stop(!0)};return g.finish=g,e||f.queue===!1?this.each(g):this.queue(f.queue,g)},stop:function(a,b,c){var d=function(a){var b=a.stop;delete a.stop,b(c)};return"string"!=typeof a&&(c=b,b=a,a=void 0),b&&a!==!1&&this.queue(a||"fx",[]),this.each(function(){var b=!0,e=null!=a&&a+"queueHooks",f=n.timers,g=n._data(this);if(e)g[e]&&g[e].stop&&d(g[e]);else for(e in g)g[e]&&g[e].stop&&kb.test(e)&&d(g[e]);for(e=f.length;e--;)f[e].elem!==this||null!=a&&f[e].queue!==a||(f[e].anim.stop(c),b=!1,f.splice(e,1));(b||!c)&&n.dequeue(this,a)})},finish:function(a){return a!==!1&&(a=a||"fx"),this.each(function(){var b,c=n._data(this),d=c[a+"queue"],e=c[a+"queueHooks"],f=n.timers,g=d?d.length:0;for(c.finish=!0,n.queue(this,a,[]),e&&e.stop&&e.stop.call(this,!0),b=f.length;b--;)f[b].elem===this&&f[b].queue===a&&(f[b].anim.stop(!0),f.splice(b,1));for(b=0;g>b;b++)d[b]&&d[b].finish&&d[b].finish.call(this);delete c.finish})}}),n.each(["toggle","show","hide"],function(a,b){var c=n.fn[b];n.fn[b]=function(a,d,e){return null==a||"boolean"==typeof a?c.apply(this,arguments):this.animate(mb(b,!0),a,d,e)}}),n.each({slideDown:mb("show"),slideUp:mb("hide"),slideToggle:mb("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){n.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),n.timers=[],n.fx.tick=function(){var a,b=n.timers,c=0;for(hb=n.now();c<b.length;c++)a=b[c],a()||b[c]!==a||b.splice(c--,1);b.length||n.fx.stop(),hb=void 0},n.fx.timer=function(a){n.timers.push(a),a()?n.fx.start():n.timers.pop()},n.fx.interval=13,n.fx.start=function(){ib||(ib=a.setInterval(n.fx.tick,n.fx.interval))},n.fx.stop=function(){a.clearInterval(ib),ib=null},n.fx.speeds={slow:600,fast:200,_default:400},n.fn.delay=function(b,c){return b=n.fx?n.fx.speeds[b]||b:b,c=c||"fx",this.queue(c,function(c,d){var e=a.setTimeout(c,b);d.stop=function(){a.clearTimeout(e)}})},function(){var a,b=d.createElement("input"),c=d.createElement("div"),e=d.createElement("select"),f=e.appendChild(d.createElement("option"));c=d.createElement("div"),c.setAttribute("className","t"),c.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",a=c.getElementsByTagName("a")[0],b.setAttribute("type","checkbox"),c.appendChild(b),a=c.getElementsByTagName("a")[0],a.style.cssText="top:1px",l.getSetAttribute="t"!==c.className,l.style=/top/.test(a.getAttribute("style")),l.hrefNormalized="/a"===a.getAttribute("href"),l.checkOn=!!b.value,l.optSelected=f.selected,l.enctype=!!d.createElement("form").enctype,e.disabled=!0,l.optDisabled=!f.disabled,b=d.createElement("input"),b.setAttribute("value",""),l.input=""===b.getAttribute("value"),b.value="t",b.setAttribute("type","radio"),l.radioValue="t"===b.value}();var rb=/\r/g;n.fn.extend({val:function(a){var b,c,d,e=this[0];{if(arguments.length)return d=n.isFunction(a),this.each(function(c){var e;1===this.nodeType&&(e=d?a.call(this,c,n(this).val()):a,null==e?e="":"number"==typeof e?e+="":n.isArray(e)&&(e=n.map(e,function(a){return null==a?"":a+""})),b=n.valHooks[this.type]||n.valHooks[this.nodeName.toLowerCase()],b&&"set"in b&&void 0!==b.set(this,e,"value")||(this.value=e))});if(e)return b=n.valHooks[e.type]||n.valHooks[e.nodeName.toLowerCase()],b&&"get"in b&&void 0!==(c=b.get(e,"value"))?c:(c=e.value,"string"==typeof c?c.replace(rb,""):null==c?"":c)}}}),n.extend({valHooks:{option:{get:function(a){var b=n.find.attr(a,"value");return null!=b?b:n.trim(n.text(a))}},select:{get:function(a){for(var b,c,d=a.options,e=a.selectedIndex,f="select-one"===a.type||0>e,g=f?null:[],h=f?e+1:d.length,i=0>e?h:f?e:0;h>i;i++)if(c=d[i],(c.selected||i===e)&&(l.optDisabled?!c.disabled:null===c.getAttribute("disabled"))&&(!c.parentNode.disabled||!n.nodeName(c.parentNode,"optgroup"))){if(b=n(c).val(),f)return b;g.push(b)}return g},set:function(a,b){var c,d,e=a.options,f=n.makeArray(b),g=e.length;while(g--)if(d=e[g],n.inArray(n.valHooks.option.get(d),f)>=0)try{d.selected=c=!0}catch(h){d.scrollHeight}else d.selected=!1;return c||(a.selectedIndex=-1),e}}}}),n.each(["radio","checkbox"],function(){n.valHooks[this]={set:function(a,b){return n.isArray(b)?a.checked=n.inArray(n(a).val(),b)>-1:void 0}},l.checkOn||(n.valHooks[this].get=function(a){return null===a.getAttribute("value")?"on":a.value})});var sb,tb,ub=n.expr.attrHandle,vb=/^(?:checked|selected)$/i,wb=l.getSetAttribute,xb=l.input;n.fn.extend({attr:function(a,b){return Y(this,n.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){n.removeAttr(this,a)})}}),n.extend({attr:function(a,b,c){var d,e,f=a.nodeType;if(3!==f&&8!==f&&2!==f)return"undefined"==typeof a.getAttribute?n.prop(a,b,c):(1===f&&n.isXMLDoc(a)||(b=b.toLowerCase(),e=n.attrHooks[b]||(n.expr.match.bool.test(b)?tb:sb)),void 0!==c?null===c?void n.removeAttr(a,b):e&&"set"in e&&void 0!==(d=e.set(a,c,b))?d:(a.setAttribute(b,c+""),c):e&&"get"in e&&null!==(d=e.get(a,b))?d:(d=n.find.attr(a,b),null==d?void 0:d))},attrHooks:{type:{set:function(a,b){if(!l.radioValue&&"radio"===b&&n.nodeName(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}}},removeAttr:function(a,b){var c,d,e=0,f=b&&b.match(G);if(f&&1===a.nodeType)while(c=f[e++])d=n.propFix[c]||c,n.expr.match.bool.test(c)?xb&&wb||!vb.test(c)?a[d]=!1:a[n.camelCase("default-"+c)]=a[d]=!1:n.attr(a,c,""),a.removeAttribute(wb?c:d)}}),tb={set:function(a,b,c){return b===!1?n.removeAttr(a,c):xb&&wb||!vb.test(c)?a.setAttribute(!wb&&n.propFix[c]||c,c):a[n.camelCase("default-"+c)]=a[c]=!0,c}},n.each(n.expr.match.bool.source.match(/\w+/g),function(a,b){var c=ub[b]||n.find.attr;xb&&wb||!vb.test(b)?ub[b]=function(a,b,d){var e,f;return d||(f=ub[b],ub[b]=e,e=null!=c(a,b,d)?b.toLowerCase():null,ub[b]=f),e}:ub[b]=function(a,b,c){return c?void 0:a[n.camelCase("default-"+b)]?b.toLowerCase():null}}),xb&&wb||(n.attrHooks.value={set:function(a,b,c){return n.nodeName(a,"input")?void(a.defaultValue=b):sb&&sb.set(a,b,c)}}),wb||(sb={set:function(a,b,c){var d=a.getAttributeNode(c);return d||a.setAttributeNode(d=a.ownerDocument.createAttribute(c)),d.value=b+="","value"===c||b===a.getAttribute(c)?b:void 0}},ub.id=ub.name=ub.coords=function(a,b,c){var d;return c?void 0:(d=a.getAttributeNode(b))&&""!==d.value?d.value:null},n.valHooks.button={get:function(a,b){var c=a.getAttributeNode(b);return c&&c.specified?c.value:void 0},set:sb.set},n.attrHooks.contenteditable={set:function(a,b,c){sb.set(a,""===b?!1:b,c)}},n.each(["width","height"],function(a,b){n.attrHooks[b]={set:function(a,c){return""===c?(a.setAttribute(b,"auto"),c):void 0}}})),l.style||(n.attrHooks.style={get:function(a){return a.style.cssText||void 0},set:function(a,b){return a.style.cssText=b+""}});var yb=/^(?:input|select|textarea|button|object)$/i,zb=/^(?:a|area)$/i;n.fn.extend({prop:function(a,b){return Y(this,n.prop,a,b,arguments.length>1)},removeProp:function(a){return a=n.propFix[a]||a,this.each(function(){try{this[a]=void 0,delete this[a]}catch(b){}})}}),n.extend({prop:function(a,b,c){var d,e,f=a.nodeType;if(3!==f&&8!==f&&2!==f)return 1===f&&n.isXMLDoc(a)||(b=n.propFix[b]||b,e=n.propHooks[b]),void 0!==c?e&&"set"in e&&void 0!==(d=e.set(a,c,b))?d:a[b]=c:e&&"get"in e&&null!==(d=e.get(a,b))?d:a[b]},propHooks:{tabIndex:{get:function(a){var b=n.find.attr(a,"tabindex");return b?parseInt(b,10):yb.test(a.nodeName)||zb.test(a.nodeName)&&a.href?0:-1}}},propFix:{"for":"htmlFor","class":"className"}}),l.hrefNormalized||n.each(["href","src"],function(a,b){n.propHooks[b]={get:function(a){return a.getAttribute(b,4)}}}),l.optSelected||(n.propHooks.selected={get:function(a){var b=a.parentNode;return b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex),null}}),n.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){n.propFix[this.toLowerCase()]=this}),l.enctype||(n.propFix.enctype="encoding");var Ab=/[\t\r\n\f]/g;function Bb(a){return n.attr(a,"class")||""}n.fn.extend({addClass:function(a){var b,c,d,e,f,g,h,i=0;if(n.isFunction(a))return this.each(function(b){n(this).addClass(a.call(this,b,Bb(this)))});if("string"==typeof a&&a){b=a.match(G)||[];while(c=this[i++])if(e=Bb(c),d=1===c.nodeType&&(" "+e+" ").replace(Ab," ")){g=0;while(f=b[g++])d.indexOf(" "+f+" ")<0&&(d+=f+" ");h=n.trim(d),e!==h&&n.attr(c,"class",h)}}return this},removeClass:function(a){var b,c,d,e,f,g,h,i=0;if(n.isFunction(a))return this.each(function(b){n(this).removeClass(a.call(this,b,Bb(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof a&&a){b=a.match(G)||[];while(c=this[i++])if(e=Bb(c),d=1===c.nodeType&&(" "+e+" ").replace(Ab," ")){g=0;while(f=b[g++])while(d.indexOf(" "+f+" ")>-1)d=d.replace(" "+f+" "," ");h=n.trim(d),e!==h&&n.attr(c,"class",h)}}return this},toggleClass:function(a,b){var c=typeof a;return"boolean"==typeof b&&"string"===c?b?this.addClass(a):this.removeClass(a):n.isFunction(a)?this.each(function(c){n(this).toggleClass(a.call(this,c,Bb(this),b),b)}):this.each(function(){var b,d,e,f;if("string"===c){d=0,e=n(this),f=a.match(G)||[];while(b=f[d++])e.hasClass(b)?e.removeClass(b):e.addClass(b)}else(void 0===a||"boolean"===c)&&(b=Bb(this),b&&n._data(this,"__className__",b),n.attr(this,"class",b||a===!1?"":n._data(this,"__className__")||""))})},hasClass:function(a){var b,c,d=0;b=" "+a+" ";while(c=this[d++])if(1===c.nodeType&&(" "+Bb(c)+" ").replace(Ab," ").indexOf(b)>-1)return!0;return!1}}),n.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){n.fn[b]=function(a,c){return arguments.length>0?this.on(b,null,a,c):this.trigger(b)}}),n.fn.extend({hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)}});var Cb=a.location,Db=n.now(),Eb=/\?/,Fb=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;n.parseJSON=function(b){if(a.JSON&&a.JSON.parse)return a.JSON.parse(b+"");var c,d=null,e=n.trim(b+"");return e&&!n.trim(e.replace(Fb,function(a,b,e,f){return c&&b&&(d=0),0===d?a:(c=e||b,d+=!f-!e,"")}))?Function("return "+e)():n.error("Invalid JSON: "+b)},n.parseXML=function(b){var c,d;if(!b||"string"!=typeof b)return null;try{a.DOMParser?(d=new a.DOMParser,c=d.parseFromString(b,"text/xml")):(c=new a.ActiveXObject("Microsoft.XMLDOM"),c.async="false",c.loadXML(b))}catch(e){c=void 0}return c&&c.documentElement&&!c.getElementsByTagName("parsererror").length||n.error("Invalid XML: "+b),c};var Gb=/#.*$/,Hb=/([?&])_=[^&]*/,Ib=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Jb=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Kb=/^(?:GET|HEAD)$/,Lb=/^\/\//,Mb=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,Nb={},Ob={},Pb="*/".concat("*"),Qb=Cb.href,Rb=Mb.exec(Qb.toLowerCase())||[];function Sb(a){return function(b,c){"string"!=typeof b&&(c=b,b="*");var d,e=0,f=b.toLowerCase().match(G)||[];if(n.isFunction(c))while(d=f[e++])"+"===d.charAt(0)?(d=d.slice(1)||"*",(a[d]=a[d]||[]).unshift(c)):(a[d]=a[d]||[]).push(c)}}function Tb(a,b,c,d){var e={},f=a===Ob;function g(h){var i;return e[h]=!0,n.each(a[h]||[],function(a,h){var j=h(b,c,d);return"string"!=typeof j||f||e[j]?f?!(i=j):void 0:(b.dataTypes.unshift(j),g(j),!1)}),i}return g(b.dataTypes[0])||!e["*"]&&g("*")}function Ub(a,b){var c,d,e=n.ajaxSettings.flatOptions||{};for(d in b)void 0!==b[d]&&((e[d]?a:c||(c={}))[d]=b[d]);return c&&n.extend(!0,a,c),a}function Vb(a,b,c){var d,e,f,g,h=a.contents,i=a.dataTypes;while("*"===i[0])i.shift(),void 0===e&&(e=a.mimeType||b.getResponseHeader("Content-Type"));if(e)for(g in h)if(h[g]&&h[g].test(e)){i.unshift(g);break}if(i[0]in c)f=i[0];else{for(g in c){if(!i[0]||a.converters[g+" "+i[0]]){f=g;break}d||(d=g)}f=f||d}return f?(f!==i[0]&&i.unshift(f),c[f]):void 0}function Wb(a,b,c,d){var e,f,g,h,i,j={},k=a.dataTypes.slice();if(k[1])for(g in a.converters)j[g.toLowerCase()]=a.converters[g];f=k.shift();while(f)if(a.responseFields[f]&&(c[a.responseFields[f]]=b),!i&&d&&a.dataFilter&&(b=a.dataFilter(b,a.dataType)),i=f,f=k.shift())if("*"===f)f=i;else if("*"!==i&&i!==f){if(g=j[i+" "+f]||j["* "+f],!g)for(e in j)if(h=e.split(" "),h[1]===f&&(g=j[i+" "+h[0]]||j["* "+h[0]])){g===!0?g=j[e]:j[e]!==!0&&(f=h[0],k.unshift(h[1]));break}if(g!==!0)if(g&&a["throws"])b=g(b);else try{b=g(b)}catch(l){return{state:"parsererror",error:g?l:"No conversion from "+i+" to "+f}}}return{state:"success",data:b}}n.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Qb,type:"GET",isLocal:Jb.test(Rb[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Pb,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":n.parseJSON,"text xml":n.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,b){return b?Ub(Ub(a,n.ajaxSettings),b):Ub(n.ajaxSettings,a)},ajaxPrefilter:Sb(Nb),ajaxTransport:Sb(Ob),ajax:function(b,c){"object"==typeof b&&(c=b,b=void 0),c=c||{};var d,e,f,g,h,i,j,k,l=n.ajaxSetup({},c),m=l.context||l,o=l.context&&(m.nodeType||m.jquery)?n(m):n.event,p=n.Deferred(),q=n.Callbacks("once memory"),r=l.statusCode||{},s={},t={},u=0,v="canceled",w={readyState:0,getResponseHeader:function(a){var b;if(2===u){if(!k){k={};while(b=Ib.exec(g))k[b[1].toLowerCase()]=b[2]}b=k[a.toLowerCase()]}return null==b?null:b},getAllResponseHeaders:function(){return 2===u?g:null},setRequestHeader:function(a,b){var c=a.toLowerCase();return u||(a=t[c]=t[c]||a,s[a]=b),this},overrideMimeType:function(a){return u||(l.mimeType=a),this},statusCode:function(a){var b;if(a)if(2>u)for(b in a)r[b]=[r[b],a[b]];else w.always(a[w.status]);return this},abort:function(a){var b=a||v;return j&&j.abort(b),y(0,b),this}};if(p.promise(w).complete=q.add,w.success=w.done,w.error=w.fail,l.url=((b||l.url||Qb)+"").replace(Gb,"").replace(Lb,Rb[1]+"//"),l.type=c.method||c.type||l.method||l.type,l.dataTypes=n.trim(l.dataType||"*").toLowerCase().match(G)||[""],null==l.crossDomain&&(d=Mb.exec(l.url.toLowerCase()),l.crossDomain=!(!d||d[1]===Rb[1]&&d[2]===Rb[2]&&(d[3]||("http:"===d[1]?"80":"443"))===(Rb[3]||("http:"===Rb[1]?"80":"443")))),l.data&&l.processData&&"string"!=typeof l.data&&(l.data=n.param(l.data,l.traditional)),Tb(Nb,l,c,w),2===u)return w;i=n.event&&l.global,i&&0===n.active++&&n.event.trigger("ajaxStart"),l.type=l.type.toUpperCase(),l.hasContent=!Kb.test(l.type),f=l.url,l.hasContent||(l.data&&(f=l.url+=(Eb.test(f)?"&":"?")+l.data,delete l.data),l.cache===!1&&(l.url=Hb.test(f)?f.replace(Hb,"$1_="+Db++):f+(Eb.test(f)?"&":"?")+"_="+Db++)),l.ifModified&&(n.lastModified[f]&&w.setRequestHeader("If-Modified-Since",n.lastModified[f]),n.etag[f]&&w.setRequestHeader("If-None-Match",n.etag[f])),(l.data&&l.hasContent&&l.contentType!==!1||c.contentType)&&w.setRequestHeader("Content-Type",l.contentType),w.setRequestHeader("Accept",l.dataTypes[0]&&l.accepts[l.dataTypes[0]]?l.accepts[l.dataTypes[0]]+("*"!==l.dataTypes[0]?", "+Pb+"; q=0.01":""):l.accepts["*"]);for(e in l.headers)w.setRequestHeader(e,l.headers[e]);if(l.beforeSend&&(l.beforeSend.call(m,w,l)===!1||2===u))return w.abort();v="abort";for(e in{success:1,error:1,complete:1})w[e](l[e]);if(j=Tb(Ob,l,c,w)){if(w.readyState=1,i&&o.trigger("ajaxSend",[w,l]),2===u)return w;l.async&&l.timeout>0&&(h=a.setTimeout(function(){w.abort("timeout")},l.timeout));try{u=1,j.send(s,y)}catch(x){if(!(2>u))throw x;y(-1,x)}}else y(-1,"No Transport");function y(b,c,d,e){var k,s,t,v,x,y=c;2!==u&&(u=2,h&&a.clearTimeout(h),j=void 0,g=e||"",w.readyState=b>0?4:0,k=b>=200&&300>b||304===b,d&&(v=Vb(l,w,d)),v=Wb(l,v,w,k),k?(l.ifModified&&(x=w.getResponseHeader("Last-Modified"),x&&(n.lastModified[f]=x),x=w.getResponseHeader("etag"),x&&(n.etag[f]=x)),204===b||"HEAD"===l.type?y="nocontent":304===b?y="notmodified":(y=v.state,s=v.data,t=v.error,k=!t)):(t=y,(b||!y)&&(y="error",0>b&&(b=0))),w.status=b,w.statusText=(c||y)+"",k?p.resolveWith(m,[s,y,w]):p.rejectWith(m,[w,y,t]),w.statusCode(r),r=void 0,i&&o.trigger(k?"ajaxSuccess":"ajaxError",[w,l,k?s:t]),q.fireWith(m,[w,y]),i&&(o.trigger("ajaxComplete",[w,l]),--n.active||n.event.trigger("ajaxStop")))}return w},getJSON:function(a,b,c){return n.get(a,b,c,"json")},getScript:function(a,b){return n.get(a,void 0,b,"script")}}),n.each(["get","post"],function(a,b){n[b]=function(a,c,d,e){return n.isFunction(c)&&(e=e||d,d=c,c=void 0),n.ajax(n.extend({url:a,type:b,dataType:e,data:c,success:d},n.isPlainObject(a)&&a))}}),n._evalUrl=function(a){return n.ajax({url:a,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,"throws":!0})},n.fn.extend({wrapAll:function(a){if(n.isFunction(a))return this.each(function(b){n(this).wrapAll(a.call(this,b))});if(this[0]){var b=n(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){var a=this;while(a.firstChild&&1===a.firstChild.nodeType)a=a.firstChild;return a}).append(this)}return this},wrapInner:function(a){return n.isFunction(a)?this.each(function(b){n(this).wrapInner(a.call(this,b))}):this.each(function(){var b=n(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=n.isFunction(a);return this.each(function(c){n(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){n.nodeName(this,"body")||n(this).replaceWith(this.childNodes)}).end()}});function Xb(a){return a.style&&a.style.display||n.css(a,"display")}function Yb(a){while(a&&1===a.nodeType){if("none"===Xb(a)||"hidden"===a.type)return!0;a=a.parentNode}return!1}n.expr.filters.hidden=function(a){return l.reliableHiddenOffsets()?a.offsetWidth<=0&&a.offsetHeight<=0&&!a.getClientRects().length:Yb(a)},n.expr.filters.visible=function(a){return!n.expr.filters.hidden(a)};var Zb=/%20/g,$b=/\[\]$/,_b=/\r?\n/g,ac=/^(?:submit|button|image|reset|file)$/i,bc=/^(?:input|select|textarea|keygen)/i;function cc(a,b,c,d){var e;if(n.isArray(b))n.each(b,function(b,e){c||$b.test(a)?d(a,e):cc(a+"["+("object"==typeof e&&null!=e?b:"")+"]",e,c,d)});else if(c||"object"!==n.type(b))d(a,b);else for(e in b)cc(a+"["+e+"]",b[e],c,d)}n.param=function(a,b){var c,d=[],e=function(a,b){b=n.isFunction(b)?b():null==b?"":b,d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};if(void 0===b&&(b=n.ajaxSettings&&n.ajaxSettings.traditional),n.isArray(a)||a.jquery&&!n.isPlainObject(a))n.each(a,function(){e(this.name,this.value)});else for(c in a)cc(c,a[c],b,e);return d.join("&").replace(Zb,"+")},n.fn.extend({serialize:function(){return n.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=n.prop(this,"elements");return a?n.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!n(this).is(":disabled")&&bc.test(this.nodeName)&&!ac.test(a)&&(this.checked||!Z.test(a))}).map(function(a,b){var c=n(this).val();return null==c?null:n.isArray(c)?n.map(c,function(a){return{name:b.name,value:a.replace(_b,"\r\n")}}):{name:b.name,value:c.replace(_b,"\r\n")}}).get()}}),n.ajaxSettings.xhr=void 0!==a.ActiveXObject?function(){return this.isLocal?hc():d.documentMode>8?gc():/^(get|post|head|put|delete|options)$/i.test(this.type)&&gc()||hc()}:gc;var dc=0,ec={},fc=n.ajaxSettings.xhr();a.attachEvent&&a.attachEvent("onunload",function(){for(var a in ec)ec[a](void 0,!0)}),l.cors=!!fc&&"withCredentials"in fc,fc=l.ajax=!!fc,fc&&n.ajaxTransport(function(b){if(!b.crossDomain||l.cors){var c;return{send:function(d,e){var f,g=b.xhr(),h=++dc;if(g.open(b.type,b.url,b.async,b.username,b.password),b.xhrFields)for(f in b.xhrFields)g[f]=b.xhrFields[f];b.mimeType&&g.overrideMimeType&&g.overrideMimeType(b.mimeType),b.crossDomain||d["X-Requested-With"]||(d["X-Requested-With"]="XMLHttpRequest");for(f in d)void 0!==d[f]&&g.setRequestHeader(f,d[f]+"");g.send(b.hasContent&&b.data||null),c=function(a,d){var f,i,j;if(c&&(d||4===g.readyState))if(delete ec[h],c=void 0,g.onreadystatechange=n.noop,d)4!==g.readyState&&g.abort();else{j={},f=g.status,"string"==typeof g.responseText&&(j.text=g.responseText);try{i=g.statusText}catch(k){i=""}f||!b.isLocal||b.crossDomain?1223===f&&(f=204):f=j.text?200:404}j&&e(f,i,j,g.getAllResponseHeaders())},b.async?4===g.readyState?a.setTimeout(c):g.onreadystatechange=ec[h]=c:c()},abort:function(){c&&c(void 0,!0)}}}});function gc(){try{return new a.XMLHttpRequest}catch(b){}}function hc(){try{return new a.ActiveXObject("Microsoft.XMLHTTP")}catch(b){}}n.ajaxPrefilter(function(a){a.crossDomain&&(a.contents.script=!1)}),n.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(a){return n.globalEval(a),a}}}),n.ajaxPrefilter("script",function(a){void 0===a.cache&&(a.cache=!1),a.crossDomain&&(a.type="GET",a.global=!1)}),n.ajaxTransport("script",function(a){if(a.crossDomain){var b,c=d.head||n("head")[0]||d.documentElement;return{send:function(e,f){b=d.createElement("script"),b.async=!0,a.scriptCharset&&(b.charset=a.scriptCharset),b.src=a.url,b.onload=b.onreadystatechange=function(a,c){(c||!b.readyState||/loaded|complete/.test(b.readyState))&&(b.onload=b.onreadystatechange=null,b.parentNode&&b.parentNode.removeChild(b),b=null,c||f(200,"success"))},c.insertBefore(b,c.firstChild)},abort:function(){b&&b.onload(void 0,!0)}}}});var ic=[],jc=/(=)\?(?=&|$)|\?\?/;n.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=ic.pop()||n.expando+"_"+Db++;return this[a]=!0,a}}),n.ajaxPrefilter("json jsonp",function(b,c,d){var e,f,g,h=b.jsonp!==!1&&(jc.test(b.url)?"url":"string"==typeof b.data&&0===(b.contentType||"").indexOf("application/x-www-form-urlencoded")&&jc.test(b.data)&&"data");return h||"jsonp"===b.dataTypes[0]?(e=b.jsonpCallback=n.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,h?b[h]=b[h].replace(jc,"$1"+e):b.jsonp!==!1&&(b.url+=(Eb.test(b.url)?"&":"?")+b.jsonp+"="+e),b.converters["script json"]=function(){return g||n.error(e+" was not called"),g[0]},b.dataTypes[0]="json",f=a[e],a[e]=function(){g=arguments},d.always(function(){void 0===f?n(a).removeProp(e):a[e]=f,b[e]&&(b.jsonpCallback=c.jsonpCallback,ic.push(e)),g&&n.isFunction(f)&&f(g[0]),g=f=void 0}),"script"):void 0}),l.createHTMLDocument=function(){if(!d.implementation.createHTMLDocument)return!1;var a=d.implementation.createHTMLDocument("");return a.body.innerHTML="<form></form><form></form>",2===a.body.childNodes.length}(),n.parseHTML=function(a,b,c){if(!a||"string"!=typeof a)return null;"boolean"==typeof b&&(c=b,b=!1),b=b||(l.createHTMLDocument?d.implementation.createHTMLDocument(""):d);var e=x.exec(a),f=!c&&[];return e?[b.createElement(e[1])]:(e=ja([a],b,f),f&&f.length&&n(f).remove(),n.merge([],e.childNodes))};var kc=n.fn.load;n.fn.load=function(a,b,c){if("string"!=typeof a&&kc)return kc.apply(this,arguments);var d,e,f,g=this,h=a.indexOf(" ");return h>-1&&(d=n.trim(a.slice(h,a.length)),a=a.slice(0,h)),n.isFunction(b)?(c=b,b=void 0):b&&"object"==typeof b&&(e="POST"),g.length>0&&n.ajax({url:a,type:e||"GET",dataType:"html",data:b}).done(function(a){f=arguments,g.html(d?n("<div>").append(n.parseHTML(a)).find(d):a)}).always(c&&function(a,b){g.each(function(){c.apply(g,f||[a.responseText,b,a])})}),this},n.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(a,b){n.fn[b]=function(a){return this.on(b,a)}}),n.expr.filters.animated=function(a){return n.grep(n.timers,function(b){return a===b.elem}).length};function lc(a){return n.isWindow(a)?a:9===a.nodeType?a.defaultView||a.parentWindow:!1}n.offset={setOffset:function(a,b,c){var d,e,f,g,h,i,j,k=n.css(a,"position"),l=n(a),m={};"static"===k&&(a.style.position="relative"),h=l.offset(),f=n.css(a,"top"),i=n.css(a,"left"),j=("absolute"===k||"fixed"===k)&&n.inArray("auto",[f,i])>-1,j?(d=l.position(),g=d.top,e=d.left):(g=parseFloat(f)||0,e=parseFloat(i)||0),n.isFunction(b)&&(b=b.call(a,c,n.extend({},h))),null!=b.top&&(m.top=b.top-h.top+g),null!=b.left&&(m.left=b.left-h.left+e),"using"in b?b.using.call(a,m):l.css(m)}},n.fn.extend({offset:function(a){if(arguments.length)return void 0===a?this:this.each(function(b){n.offset.setOffset(this,a,b)});var b,c,d={top:0,left:0},e=this[0],f=e&&e.ownerDocument;if(f)return b=f.documentElement,n.contains(b,e)?("undefined"!=typeof e.getBoundingClientRect&&(d=e.getBoundingClientRect()),c=lc(f),{top:d.top+(c.pageYOffset||b.scrollTop)-(b.clientTop||0),left:d.left+(c.pageXOffset||b.scrollLeft)-(b.clientLeft||0)}):d},position:function(){if(this[0]){var a,b,c={top:0,left:0},d=this[0];return"fixed"===n.css(d,"position")?b=d.getBoundingClientRect():(a=this.offsetParent(),b=this.offset(),n.nodeName(a[0],"html")||(c=a.offset()),c.top+=n.css(a[0],"borderTopWidth",!0)-a.scrollTop(),c.left+=n.css(a[0],"borderLeftWidth",!0)-a.scrollLeft()),{top:b.top-c.top-n.css(d,"marginTop",!0),left:b.left-c.left-n.css(d,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){var a=this.offsetParent;while(a&&!n.nodeName(a,"html")&&"static"===n.css(a,"position"))a=a.offsetParent;return a||Qa})}}),n.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,b){var c=/Y/.test(b);n.fn[a]=function(d){return Y(this,function(a,d,e){var f=lc(a);return void 0===e?f?b in f?f[b]:f.document.documentElement[d]:a[d]:void(f?f.scrollTo(c?n(f).scrollLeft():e,c?e:n(f).scrollTop()):a[d]=e)},a,d,arguments.length,null)}}),n.each(["top","left"],function(a,b){
n.cssHooks[b]=Ua(l.pixelPosition,function(a,c){return c?(c=Sa(a,b),Oa.test(c)?n(a).position()[b]+"px":c):void 0})}),n.each({Height:"height",Width:"width"},function(a,b){n.each({padding:"inner"+a,content:b,"":"outer"+a},function(c,d){n.fn[d]=function(d,e){var f=arguments.length&&(c||"boolean"!=typeof d),g=c||(d===!0||e===!0?"margin":"border");return Y(this,function(b,c,d){var e;return n.isWindow(b)?b.document.documentElement["client"+a]:9===b.nodeType?(e=b.documentElement,Math.max(b.body["scroll"+a],e["scroll"+a],b.body["offset"+a],e["offset"+a],e["client"+a])):void 0===d?n.css(b,c,g):n.style(b,c,d,g)},b,f?d:void 0,f,null)}})}),n.fn.extend({bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",c)}}),n.fn.size=function(){return this.length},n.fn.andSelf=n.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return n});var mc=a.jQuery,nc=a.$;return n.noConflict=function(b){return a.$===n&&(a.$=nc),b&&a.jQuery===n&&(a.jQuery=mc),n},b||(a.jQuery=a.$=n),n});
(function($, undefined) {

/**
 * Unobtrusive scripting adapter for jQuery
 * https://github.com/rails/jquery-ujs
 *
 * Requires jQuery 1.8.0 or later.
 *
 * Released under the MIT license
 *
 */

  // Cut down on the number of issues from people inadvertently including jquery_ujs twice
  // by detecting and raising an error when it happens.
  'use strict';

  if ( $.rails !== undefined ) {
    $.error('jquery-ujs has already been loaded!');
  }

  // Shorthand to make it a little easier to call public rails functions from within rails.js
  var rails;
  var $document = $(document);

  $.rails = rails = {
    // Link elements bound by jquery-ujs
    linkClickSelector: 'a[data-confirm], a[data-method], a[data-remote]:not([disabled]), a[data-disable-with], a[data-disable]',

    // Button elements bound by jquery-ujs
    buttonClickSelector: 'button[data-remote]:not([form]):not(form button), button[data-confirm]:not([form]):not(form button)',

    // Select elements bound by jquery-ujs
    inputChangeSelector: 'select[data-remote], input[data-remote], textarea[data-remote]',

    // Form elements bound by jquery-ujs
    formSubmitSelector: 'form',

    // Form input elements bound by jquery-ujs
    formInputClickSelector: 'form input[type=submit], form input[type=image], form button[type=submit], form button:not([type]), input[type=submit][form], input[type=image][form], button[type=submit][form], button[form]:not([type])',

    // Form input elements disabled during form submission
    disableSelector: 'input[data-disable-with]:enabled, button[data-disable-with]:enabled, textarea[data-disable-with]:enabled, input[data-disable]:enabled, button[data-disable]:enabled, textarea[data-disable]:enabled',

    // Form input elements re-enabled after form submission
    enableSelector: 'input[data-disable-with]:disabled, button[data-disable-with]:disabled, textarea[data-disable-with]:disabled, input[data-disable]:disabled, button[data-disable]:disabled, textarea[data-disable]:disabled',

    // Form required input elements
    requiredInputSelector: 'input[name][required]:not([disabled]), textarea[name][required]:not([disabled])',

    // Form file input elements
    fileInputSelector: 'input[name][type=file]:not([disabled])',

    // Link onClick disable selector with possible reenable after remote submission
    linkDisableSelector: 'a[data-disable-with], a[data-disable]',

    // Button onClick disable selector with possible reenable after remote submission
    buttonDisableSelector: 'button[data-remote][data-disable-with], button[data-remote][data-disable]',

    // Up-to-date Cross-Site Request Forgery token
    csrfToken: function() {
     return $('meta[name=csrf-token]').attr('content');
    },

    // URL param that must contain the CSRF token
    csrfParam: function() {
     return $('meta[name=csrf-param]').attr('content');
    },

    // Make sure that every Ajax request sends the CSRF token
    CSRFProtection: function(xhr) {
      var token = rails.csrfToken();
      if (token) xhr.setRequestHeader('X-CSRF-Token', token);
    },

    // Make sure that all forms have actual up-to-date tokens (cached forms contain old ones)
    refreshCSRFTokens: function(){
      $('form input[name="' + rails.csrfParam() + '"]').val(rails.csrfToken());
    },

    // Triggers an event on an element and returns false if the event result is false
    fire: function(obj, name, data) {
      var event = $.Event(name);
      obj.trigger(event, data);
      return event.result !== false;
    },

    // Default confirm dialog, may be overridden with custom confirm dialog in $.rails.confirm
    confirm: function(message) {
      return confirm(message);
    },

    // Default ajax function, may be overridden with custom function in $.rails.ajax
    ajax: function(options) {
      return $.ajax(options);
    },

    // Default way to get an element's href. May be overridden at $.rails.href.
    href: function(element) {
      return element[0].href;
    },

    // Checks "data-remote" if true to handle the request through a XHR request.
    isRemote: function(element) {
      return element.data('remote') !== undefined && element.data('remote') !== false;
    },

    // Submits "remote" forms and links with ajax
    handleRemote: function(element) {
      var method, url, data, withCredentials, dataType, options;

      if (rails.fire(element, 'ajax:before')) {
        withCredentials = element.data('with-credentials') || null;
        dataType = element.data('type') || ($.ajaxSettings && $.ajaxSettings.dataType);

        if (element.is('form')) {
          method = element.data('ujs:submit-button-formmethod') || element.attr('method');
          url = element.data('ujs:submit-button-formaction') || element.attr('action');
          data = $(element[0]).serializeArray();
          // memoized value from clicked submit button
          var button = element.data('ujs:submit-button');
          if (button) {
            data.push(button);
            element.data('ujs:submit-button', null);
          }
          element.data('ujs:submit-button-formmethod', null);
          element.data('ujs:submit-button-formaction', null);
        } else if (element.is(rails.inputChangeSelector)) {
          method = element.data('method');
          url = element.data('url');
          data = element.serialize();
          if (element.data('params')) data = data + '&' + element.data('params');
        } else if (element.is(rails.buttonClickSelector)) {
          method = element.data('method') || 'get';
          url = element.data('url');
          data = element.serialize();
          if (element.data('params')) data = data + '&' + element.data('params');
        } else {
          method = element.data('method');
          url = rails.href(element);
          data = element.data('params') || null;
        }

        options = {
          type: method || 'GET', data: data, dataType: dataType,
          // stopping the "ajax:beforeSend" event will cancel the ajax request
          beforeSend: function(xhr, settings) {
            if (settings.dataType === undefined) {
              xhr.setRequestHeader('accept', '*/*;q=0.5, ' + settings.accepts.script);
            }
            if (rails.fire(element, 'ajax:beforeSend', [xhr, settings])) {
              element.trigger('ajax:send', xhr);
            } else {
              return false;
            }
          },
          success: function(data, status, xhr) {
            element.trigger('ajax:success', [data, status, xhr]);
          },
          complete: function(xhr, status) {
            element.trigger('ajax:complete', [xhr, status]);
          },
          error: function(xhr, status, error) {
            element.trigger('ajax:error', [xhr, status, error]);
          },
          crossDomain: rails.isCrossDomain(url)
        };

        // There is no withCredentials for IE6-8 when
        // "Enable native XMLHTTP support" is disabled
        if (withCredentials) {
          options.xhrFields = {
            withCredentials: withCredentials
          };
        }

        // Only pass url to `ajax` options if not blank
        if (url) { options.url = url; }

        return rails.ajax(options);
      } else {
        return false;
      }
    },

    // Determines if the request is a cross domain request.
    isCrossDomain: function(url) {
      var originAnchor = document.createElement('a');
      originAnchor.href = location.href;
      var urlAnchor = document.createElement('a');

      try {
        urlAnchor.href = url;
        // This is a workaround to a IE bug.
        urlAnchor.href = urlAnchor.href;

        // If URL protocol is false or is a string containing a single colon
        // *and* host are false, assume it is not a cross-domain request
        // (should only be the case for IE7 and IE compatibility mode).
        // Otherwise, evaluate protocol and host of the URL against the origin
        // protocol and host.
        return !(((!urlAnchor.protocol || urlAnchor.protocol === ':') && !urlAnchor.host) ||
          (originAnchor.protocol + '//' + originAnchor.host ===
            urlAnchor.protocol + '//' + urlAnchor.host));
      } catch (e) {
        // If there is an error parsing the URL, assume it is crossDomain.
        return true;
      }
    },

    // Handles "data-method" on links such as:
    // <a href="/users/5" data-method="delete" rel="nofollow" data-confirm="Are you sure?">Delete</a>
    handleMethod: function(link) {
      var href = rails.href(link),
        method = link.data('method'),
        target = link.attr('target'),
        csrfToken = rails.csrfToken(),
        csrfParam = rails.csrfParam(),
        form = $('<form method="post" action="' + href + '"></form>'),
        metadataInput = '<input name="_method" value="' + method + '" type="hidden" />';

      if (csrfParam !== undefined && csrfToken !== undefined && !rails.isCrossDomain(href)) {
        metadataInput += '<input name="' + csrfParam + '" value="' + csrfToken + '" type="hidden" />';
      }

      if (target) { form.attr('target', target); }

      form.hide().append(metadataInput).appendTo('body');
      form.submit();
    },

    // Helper function that returns form elements that match the specified CSS selector
    // If form is actually a "form" element this will return associated elements outside the from that have
    // the html form attribute set
    formElements: function(form, selector) {
      return form.is('form') ? $(form[0].elements).filter(selector) : form.find(selector);
    },

    /* Disables form elements:
      - Caches element value in 'ujs:enable-with' data store
      - Replaces element text with value of 'data-disable-with' attribute
      - Sets disabled property to true
    */
    disableFormElements: function(form) {
      rails.formElements(form, rails.disableSelector).each(function() {
        rails.disableFormElement($(this));
      });
    },

    disableFormElement: function(element) {
      var method, replacement;

      method = element.is('button') ? 'html' : 'val';
      replacement = element.data('disable-with');

      if (replacement !== undefined) {
        element.data('ujs:enable-with', element[method]());
        element[method](replacement);
      }

      element.prop('disabled', true);
      element.data('ujs:disabled', true);
    },

    /* Re-enables disabled form elements:
      - Replaces element text with cached value from 'ujs:enable-with' data store (created in `disableFormElements`)
      - Sets disabled property to false
    */
    enableFormElements: function(form) {
      rails.formElements(form, rails.enableSelector).each(function() {
        rails.enableFormElement($(this));
      });
    },

    enableFormElement: function(element) {
      var method = element.is('button') ? 'html' : 'val';
      if (element.data('ujs:enable-with') !== undefined) {
        element[method](element.data('ujs:enable-with'));
        element.removeData('ujs:enable-with'); // clean up cache
      }
      element.prop('disabled', false);
      element.removeData('ujs:disabled');
    },

   /* For 'data-confirm' attribute:
      - Fires `confirm` event
      - Shows the confirmation dialog
      - Fires the `confirm:complete` event

      Returns `true` if no function stops the chain and user chose yes; `false` otherwise.
      Attaching a handler to the element's `confirm` event that returns a `falsy` value cancels the confirmation dialog.
      Attaching a handler to the element's `confirm:complete` event that returns a `falsy` value makes this function
      return false. The `confirm:complete` event is fired whether or not the user answered true or false to the dialog.
   */
    allowAction: function(element) {
      var message = element.data('confirm'),
          answer = false, callback;
      if (!message) { return true; }

      if (rails.fire(element, 'confirm')) {
        try {
          answer = rails.confirm(message);
        } catch (e) {
          (console.error || console.log).call(console, e.stack || e);
        }
        callback = rails.fire(element, 'confirm:complete', [answer]);
      }
      return answer && callback;
    },

    // Helper function which checks for blank inputs in a form that match the specified CSS selector
    blankInputs: function(form, specifiedSelector, nonBlank) {
      var foundInputs = $(),
        input,
        valueToCheck,
        radiosForNameWithNoneSelected,
        radioName,
        selector = specifiedSelector || 'input,textarea',
        requiredInputs = form.find(selector),
        checkedRadioButtonNames = {};

      requiredInputs.each(function() {
        input = $(this);
        if (input.is('input[type=radio]')) {

          // Don't count unchecked required radio as blank if other radio with same name is checked,
          // regardless of whether same-name radio input has required attribute or not. The spec
          // states https://www.w3.org/TR/html5/forms.html#the-required-attribute
          radioName = input.attr('name');

          // Skip if we've already seen the radio with this name.
          if (!checkedRadioButtonNames[radioName]) {

            // If none checked
            if (form.find('input[type=radio]:checked[name="' + radioName + '"]').length === 0) {
              radiosForNameWithNoneSelected = form.find(
                'input[type=radio][name="' + radioName + '"]');
              foundInputs = foundInputs.add(radiosForNameWithNoneSelected);
            }

            // We only need to check each name once.
            checkedRadioButtonNames[radioName] = radioName;
          }
        } else {
          valueToCheck = input.is('input[type=checkbox],input[type=radio]') ? input.is(':checked') : !!input.val();
          if (valueToCheck === nonBlank) {
            foundInputs = foundInputs.add(input);
          }
        }
      });
      return foundInputs.length ? foundInputs : false;
    },

    // Helper function which checks for non-blank inputs in a form that match the specified CSS selector
    nonBlankInputs: function(form, specifiedSelector) {
      return rails.blankInputs(form, specifiedSelector, true); // true specifies nonBlank
    },

    // Helper function, needed to provide consistent behavior in IE
    stopEverything: function(e) {
      $(e.target).trigger('ujs:everythingStopped');
      e.stopImmediatePropagation();
      return false;
    },

    //  Replace element's html with the 'data-disable-with' after storing original html
    //  and prevent clicking on it
    disableElement: function(element) {
      var replacement = element.data('disable-with');

      if (replacement !== undefined) {
        element.data('ujs:enable-with', element.html()); // store enabled state
        element.html(replacement);
      }

      element.bind('click.railsDisable', function(e) { // prevent further clicking
        return rails.stopEverything(e);
      });
      element.data('ujs:disabled', true);
    },

    // Restore element to its original state which was disabled by 'disableElement' above
    enableElement: function(element) {
      if (element.data('ujs:enable-with') !== undefined) {
        element.html(element.data('ujs:enable-with')); // set to old enabled state
        element.removeData('ujs:enable-with'); // clean up cache
      }
      element.unbind('click.railsDisable'); // enable element
      element.removeData('ujs:disabled');
    }
  };

  if (rails.fire($document, 'rails:attachBindings')) {

    $.ajaxPrefilter(function(options, originalOptions, xhr){ if ( !options.crossDomain ) { rails.CSRFProtection(xhr); }});

    // This event works the same as the load event, except that it fires every
    // time the page is loaded.
    //
    // See https://github.com/rails/jquery-ujs/issues/357
    // See https://developer.mozilla.org/en-US/docs/Using_Firefox_1.5_caching
    $(window).on('pageshow.rails', function () {
      $($.rails.enableSelector).each(function () {
        var element = $(this);

        if (element.data('ujs:disabled')) {
          $.rails.enableFormElement(element);
        }
      });

      $($.rails.linkDisableSelector).each(function () {
        var element = $(this);

        if (element.data('ujs:disabled')) {
          $.rails.enableElement(element);
        }
      });
    });

    $document.on('ajax:complete', rails.linkDisableSelector, function() {
        rails.enableElement($(this));
    });

    $document.on('ajax:complete', rails.buttonDisableSelector, function() {
        rails.enableFormElement($(this));
    });

    $document.on('click.rails', rails.linkClickSelector, function(e) {
      var link = $(this), method = link.data('method'), data = link.data('params'), metaClick = e.metaKey || e.ctrlKey;
      if (!rails.allowAction(link)) return rails.stopEverything(e);

      if (!metaClick && link.is(rails.linkDisableSelector)) rails.disableElement(link);

      if (rails.isRemote(link)) {
        if (metaClick && (!method || method === 'GET') && !data) { return true; }

        var handleRemote = rails.handleRemote(link);
        // Response from rails.handleRemote() will either be false or a deferred object promise.
        if (handleRemote === false) {
          rails.enableElement(link);
        } else {
          handleRemote.fail( function() { rails.enableElement(link); } );
        }
        return false;

      } else if (method) {
        rails.handleMethod(link);
        return false;
      }
    });

    $document.on('click.rails', rails.buttonClickSelector, function(e) {
      var button = $(this);

      if (!rails.allowAction(button) || !rails.isRemote(button)) return rails.stopEverything(e);

      if (button.is(rails.buttonDisableSelector)) rails.disableFormElement(button);

      var handleRemote = rails.handleRemote(button);
      // Response from rails.handleRemote() will either be false or a deferred object promise.
      if (handleRemote === false) {
        rails.enableFormElement(button);
      } else {
        handleRemote.fail( function() { rails.enableFormElement(button); } );
      }
      return false;
    });

    $document.on('change.rails', rails.inputChangeSelector, function(e) {
      var link = $(this);
      if (!rails.allowAction(link) || !rails.isRemote(link)) return rails.stopEverything(e);

      rails.handleRemote(link);
      return false;
    });

    $document.on('submit.rails', rails.formSubmitSelector, function(e) {
      var form = $(this),
        remote = rails.isRemote(form),
        blankRequiredInputs,
        nonBlankFileInputs;

      if (!rails.allowAction(form)) return rails.stopEverything(e);

      // Skip other logic when required values are missing or file upload is present
      if (form.attr('novalidate') === undefined) {
        if (form.data('ujs:formnovalidate-button') === undefined) {
          blankRequiredInputs = rails.blankInputs(form, rails.requiredInputSelector, false);
          if (blankRequiredInputs && rails.fire(form, 'ajax:aborted:required', [blankRequiredInputs])) {
            return rails.stopEverything(e);
          }
        } else {
          // Clear the formnovalidate in case the next button click is not on a formnovalidate button
          // Not strictly necessary to do here, since it is also reset on each button click, but just to be certain
          form.data('ujs:formnovalidate-button', undefined);
        }
      }

      if (remote) {
        nonBlankFileInputs = rails.nonBlankInputs(form, rails.fileInputSelector);
        if (nonBlankFileInputs) {
          // Slight timeout so that the submit button gets properly serialized
          // (make it easy for event handler to serialize form without disabled values)
          setTimeout(function(){ rails.disableFormElements(form); }, 13);
          var aborted = rails.fire(form, 'ajax:aborted:file', [nonBlankFileInputs]);

          // Re-enable form elements if event bindings return false (canceling normal form submission)
          if (!aborted) { setTimeout(function(){ rails.enableFormElements(form); }, 13); }

          return aborted;
        }

        rails.handleRemote(form);
        return false;

      } else {
        // Slight timeout so that the submit button gets properly serialized
        setTimeout(function(){ rails.disableFormElements(form); }, 13);
      }
    });

    $document.on('click.rails', rails.formInputClickSelector, function(event) {
      var button = $(this);

      if (!rails.allowAction(button)) return rails.stopEverything(event);

      // Register the pressed submit button
      var name = button.attr('name'),
        data = name ? {name:name, value:button.val()} : null;

      var form = button.closest('form');
      if (form.length === 0) {
        form = $('#' + button.attr('form'));
      }
      form.data('ujs:submit-button', data);

      // Save attributes from button
      form.data('ujs:formnovalidate-button', button.attr('formnovalidate'));
      form.data('ujs:submit-button-formaction', button.attr('formaction'));
      form.data('ujs:submit-button-formmethod', button.attr('formmethod'));
    });

    $document.on('ajax:send.rails', rails.formSubmitSelector, function(event) {
      if (this === event.target) rails.disableFormElements($(this));
    });

    $document.on('ajax:complete.rails', rails.formSubmitSelector, function(event) {
      if (this === event.target) rails.enableFormElements($(this));
    });

    $(function(){
      rails.refreshCSRFTokens();
    });
  }

})( jQuery );
/**
 * jQuery Unveil
 * A very lightweight jQuery plugin to lazy load images
 * http://luis-almeida.github.com/unveil
 *
 * Licensed under the MIT license.
 * Copyright 2013 Luís Almeida
 * https://github.com/luis-almeida
 */

;(function($) {

  $.fn.unveil = function(threshold, callback) {

    var $w = $(window),
        th = threshold || 0,
        retina = window.devicePixelRatio > 1,
        attrib = retina? "data-src-retina" : "data-src",
        images = this,
        loaded;

    this.one("unveil", function() {
      var source = this.getAttribute(attrib);
      source = source || this.getAttribute("data-src");
      if (source) {
        this.setAttribute("src", source);
        if (typeof callback === "function") callback.call(this);
      }
    });

    function unveil() {
      var inview = images.filter(function() {
        var $e = $(this);
        if ($e.is(":hidden")) return;

        var wt = $w.scrollTop(),
            wb = wt + $w.height(),
            et = $e.offset().top,
            eb = et + $e.height();

        return eb >= wt - th && et <= wb + th;
      });

      loaded = inview.trigger("unveil");
      images = images.not(loaded);
    }

    var tUnveil = _.throttle(unveil, 750, {leading: false, trailing: true});

    $w.on("scroll.unveil resize.unveil lookup.unveil", tUnveil);

    tUnveil();

    return this;

  };

})(window.jQuery || window.Zepto);
/*! simpleStorage v0.1.4, Unlicense 2015. https://github.com/andris9/simpleStorage */
// @ts-ignore
!function(a,b){"use strict";"function"==typeof define&&define.amd?define(b):"undefined"!=typeof exports?module.exports=b():a.simpleStorage=b()}(this,function(){"use strict";function a(){window.localStorage.setItem("__simpleStorageInitTest","tmpval"),window.localStorage.removeItem("__simpleStorageInitTest"),d(),g(),b(),"addEventListener"in window&&window.addEventListener("pageshow",function(a){a.persisted&&c()},!1),m=!0}function b(){"addEventListener"in window?window.addEventListener("storage",c,!1):document.attachEvent("onstorage",c)}function c(){try{d()}catch(a){return void(m=!1)}g()}function d(){var a=localStorage.getItem("simpleStorage");try{k=JSON.parse(a)||{}}catch(b){k={}}l=f()}function e(){try{localStorage.setItem("simpleStorage",JSON.stringify(k)),l=f()}catch(a){return a}return!0}function f(){var a=localStorage.getItem("simpleStorage");return a?String(a).length:0}function g(){var a,b,c,d,f,h=1/0,j=0;if(clearTimeout(n),k&&k.__simpleStorage_meta&&k.__simpleStorage_meta.TTL){for(a=+new Date,f=k.__simpleStorage_meta.TTL.keys||[],d=k.__simpleStorage_meta.TTL.expire||{},b=0,c=f.length;c>b;b++){if(!(d[f[b]]<=a)){d[f[b]]<h&&(h=d[f[b]]);break}j++,delete k[f[b]],delete d[f[b]]}h!==1/0&&(n=setTimeout(g,Math.min(h-a,2147483647))),j&&(f.splice(0,j),i(),e())}}function h(a,b){var c,d,e=+new Date,f=!1;if(b=Number(b)||0,0!==b){if(!k.hasOwnProperty(a))return!1;if(k.__simpleStorage_meta||(k.__simpleStorage_meta={}),k.__simpleStorage_meta.TTL||(k.__simpleStorage_meta.TTL={expire:{},keys:[]}),k.__simpleStorage_meta.TTL.expire[a]=e+b,k.__simpleStorage_meta.TTL.expire.hasOwnProperty(a))for(c=0,d=k.__simpleStorage_meta.TTL.keys.length;d>c;c++)k.__simpleStorage_meta.TTL.keys[c]===a&&k.__simpleStorage_meta.TTL.keys.splice(c);for(c=0,d=k.__simpleStorage_meta.TTL.keys.length;d>c;c++)if(k.__simpleStorage_meta.TTL.expire[k.__simpleStorage_meta.TTL.keys[c]]>e+b){k.__simpleStorage_meta.TTL.keys.splice(c,0,a),f=!0;break}f||k.__simpleStorage_meta.TTL.keys.push(a)}else if(k&&k.__simpleStorage_meta&&k.__simpleStorage_meta.TTL){if(k.__simpleStorage_meta.TTL.expire.hasOwnProperty(a))for(delete k.__simpleStorage_meta.TTL.expire[a],c=0,d=k.__simpleStorage_meta.TTL.keys.length;d>c;c++)if(k.__simpleStorage_meta.TTL.keys[c]===a){k.__simpleStorage_meta.TTL.keys.splice(c,1);break}i()}return clearTimeout(n),k&&k.__simpleStorage_meta&&k.__simpleStorage_meta.TTL&&k.__simpleStorage_meta.TTL.keys.length&&(n=setTimeout(g,Math.min(Math.max(k.__simpleStorage_meta.TTL.expire[k.__simpleStorage_meta.TTL.keys[0]]-e,0),2147483647))),!0}function i(){var a,b=!1,c=!1;if(!k||!k.__simpleStorage_meta)return b;k.__simpleStorage_meta.TTL&&!k.__simpleStorage_meta.TTL.keys.length&&(delete k.__simpleStorage_meta.TTL,b=!0);for(a in k.__simpleStorage_meta)if(k.__simpleStorage_meta.hasOwnProperty(a)){c=!0;break}return c||(delete k.__simpleStorage_meta,b=!0),b}var j="0.1.4",k=!1,l=0,m=!1,n=null;try{a()}catch(o){}return{version:j,canUse:function(){return!!m},set:function(a,b,c){if("__simpleStorage_meta"===a)return!1;if(!k)return!1;if("undefined"==typeof b)return this.deleteKey(a);c=c||{};try{b=JSON.parse(JSON.stringify(b))}catch(d){return d}return k[a]=b,h(a,c.TTL||0),e()},get:function(a){return k?k.hasOwnProperty(a)&&"__simpleStorage_meta"!==a&&this.getTTL(a)?k[a]:void 0:!1},deleteKey:function(a){return k&&a in k?(delete k[a],h(a,0),e()):!1},setTTL:function(a,b){return k?(h(a,b),e()):!1},getTTL:function(a){var b;return k&&k.hasOwnProperty(a)?k.__simpleStorage_meta&&k.__simpleStorage_meta.TTL&&k.__simpleStorage_meta.TTL.expire&&k.__simpleStorage_meta.TTL.expire.hasOwnProperty(a)?(b=Math.max(k.__simpleStorage_meta.TTL.expire[a]-+new Date||0,0),b||!1):1/0:!1},flush:function(){if(!k)return!1;k={};try{return localStorage.removeItem("simpleStorage"),!0}catch(a){return a}},index:function(){if(!k)return!1;var a,b=[];for(a in k)k.hasOwnProperty(a)&&"__simpleStorage_meta"!==a&&b.push(a);return b},storageSize:function(){return l}}});
/**
 * jQuery.browser.mobile (http://detectmobilebrowser.com/)
 *
 * jQuery.browser.mobile will be true if the browser is a mobile device
 *
 **/
(function(a){(jQuery.browser=jQuery.browser||{}).mobile=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(a.substr(0,4))})(navigator.userAgent||navigator.vendor||window.opera);
/*
 * jQuery postMessage - v0.5 - 9/11/2009
 * http://benalman.com/projects/jquery-postmessage-plugin/
 * 
 * Copyright (c) 2009 "Cowboy" Ben Alman
 * Dual licensed under the MIT and GPL licenses.
 * http://benalman.com/about/license/
 */
(function($){var g,d,j=1,a,b=this,f=!1,h="postMessage",e="addEventListener",c,i=b[h]&&!$.browser.opera;$[h]=function(k,l,m){if(!l){return}k=typeof k==="string"?k:$.param(k);m=m||parent;if(i){m[h](k,l.replace(/([^:]+:\/\/[^\/]+).*/,"$1"))}else{if(l){m.location=l.replace(/#.*$/,"")+"#"+(+new Date)+(j++)+"&"+k}}};$.receiveMessage=c=function(l,m,k){if(i){if(l){a&&c();a=function(n){if((typeof m==="string"&&n.origin!==m)||($.isFunction(m)&&m(n.origin)===f)){return f}l(n)}}if(b[e]){b[l?e:"removeEventListener"]("message",a,f)}else{b[l?"attachEvent":"detachEvent"]("onmessage",a)}}else{g&&clearInterval(g);g=null;if(l){k=typeof m==="number"?m:typeof k==="number"?k:100;g=setInterval(function(){var o=document.location.hash,n=/^#?\d+&/;if(o!==d&&n.test(o)){d=o;l({data:o.replace(n,"")})}},k)}}}})(jQuery);
/*! Copyright (c) 2013 Brandon Aaron (http://brandon.aaron.sh)
 * Licensed under the MIT License (LICENSE.txt).
 *
 * Version: 3.1.12
 *
 * Requires: jQuery 1.2.2+
 */

(function (factory) {
    if ( typeof define === 'function' && define.amd ) {
        // AMD. Register as an anonymous module.
        define(['jquery'], factory);
    } else if (typeof exports === 'object') {
        // Node/CommonJS style for Browserify
        module.exports = factory;
    } else {
        // Browser globals
        factory(jQuery);
    }
}(function ($) {

    var toFix  = ['wheel', 'mousewheel', 'DOMMouseScroll', 'MozMousePixelScroll'],
        toBind = ( 'onwheel' in document || document.documentMode >= 9 ) ?
                    ['wheel'] : ['mousewheel', 'DomMouseScroll', 'MozMousePixelScroll'],
        slice  = Array.prototype.slice,
        nullLowestDeltaTimeout, lowestDelta;

    if ( $.event.fixHooks ) {
        for ( var i = toFix.length; i; ) {
            $.event.fixHooks[ toFix[--i] ] = $.event.mouseHooks;
        }
    }

    var special = $.event.special.mousewheel = {
        version: '3.1.12',

        setup: function() {
            if ( this.addEventListener ) {
                for ( var i = toBind.length; i; ) {
                    this.addEventListener( toBind[--i], handler, false );
                }
            } else {
                this.onmousewheel = handler;
            }
            // Store the line height and page height for this particular element
            $.data(this, 'mousewheel-line-height', special.getLineHeight(this));
            $.data(this, 'mousewheel-page-height', special.getPageHeight(this));
        },

        teardown: function() {
            if ( this.removeEventListener ) {
                for ( var i = toBind.length; i; ) {
                    this.removeEventListener( toBind[--i], handler, false );
                }
            } else {
                this.onmousewheel = null;
            }
            // Clean up the data we added to the element
            $.removeData(this, 'mousewheel-line-height');
            $.removeData(this, 'mousewheel-page-height');
        },

        getLineHeight: function(elem) {
            var $elem = $(elem),
                $parent = $elem['offsetParent' in $.fn ? 'offsetParent' : 'parent']();
            if (!$parent.length) {
                $parent = $('body');
            }
            return parseInt($parent.css('fontSize'), 10) || parseInt($elem.css('fontSize'), 10) || 16;
        },

        getPageHeight: function(elem) {
            return $(elem).height();
        },

        settings: {
            adjustOldDeltas: true, // see shouldAdjustOldDeltas() below
            normalizeOffset: true  // calls getBoundingClientRect for each event
        }
    };

    $.fn.extend({
        mousewheel: function(fn) {
            return fn ? this.bind('mousewheel', fn) : this.trigger('mousewheel');
        },

        unmousewheel: function(fn) {
            return this.unbind('mousewheel', fn);
        }
    });


    function handler(event) {
        var orgEvent   = event || window.event,
            args       = slice.call(arguments, 1),
            delta      = 0,
            deltaX     = 0,
            deltaY     = 0,
            absDelta   = 0,
            offsetX    = 0,
            offsetY    = 0;
        event = $.event.fix(orgEvent);
        event.type = 'mousewheel';

        // Old school scrollwheel delta
        if ( 'detail'      in orgEvent ) { deltaY = orgEvent.detail * -1;      }
        if ( 'wheelDelta'  in orgEvent ) { deltaY = orgEvent.wheelDelta;       }
        if ( 'wheelDeltaY' in orgEvent ) { deltaY = orgEvent.wheelDeltaY;      }
        if ( 'wheelDeltaX' in orgEvent ) { deltaX = orgEvent.wheelDeltaX * -1; }

        // Firefox < 17 horizontal scrolling related to DOMMouseScroll event
        if ( 'axis' in orgEvent && orgEvent.axis === orgEvent.HORIZONTAL_AXIS ) {
            deltaX = deltaY * -1;
            deltaY = 0;
        }

        // Set delta to be deltaY or deltaX if deltaY is 0 for backwards compatabilitiy
        delta = deltaY === 0 ? deltaX : deltaY;

        // New school wheel delta (wheel event)
        if ( 'deltaY' in orgEvent ) {
            deltaY = orgEvent.deltaY * -1;
            delta  = deltaY;
        }
        if ( 'deltaX' in orgEvent ) {
            deltaX = orgEvent.deltaX;
            if ( deltaY === 0 ) { delta  = deltaX * -1; }
        }

        // No change actually happened, no reason to go any further
        if ( deltaY === 0 && deltaX === 0 ) { return; }

        // Need to convert lines and pages to pixels if we aren't already in pixels
        // There are three delta modes:
        //   * deltaMode 0 is by pixels, nothing to do
        //   * deltaMode 1 is by lines
        //   * deltaMode 2 is by pages
        if ( orgEvent.deltaMode === 1 ) {
            var lineHeight = $.data(this, 'mousewheel-line-height');
            delta  *= lineHeight;
            deltaY *= lineHeight;
            deltaX *= lineHeight;
        } else if ( orgEvent.deltaMode === 2 ) {
            var pageHeight = $.data(this, 'mousewheel-page-height');
            delta  *= pageHeight;
            deltaY *= pageHeight;
            deltaX *= pageHeight;
        }

        // Store lowest absolute delta to normalize the delta values
        absDelta = Math.max( Math.abs(deltaY), Math.abs(deltaX) );

        if ( !lowestDelta || absDelta < lowestDelta ) {
            lowestDelta = absDelta;

            // Adjust older deltas if necessary
            if ( shouldAdjustOldDeltas(orgEvent, absDelta) ) {
                lowestDelta /= 40;
            }
        }

        // Adjust older deltas if necessary
        if ( shouldAdjustOldDeltas(orgEvent, absDelta) ) {
            // Divide all the things by 40!
            delta  /= 40;
            deltaX /= 40;
            deltaY /= 40;
        }

        // Get a whole, normalized value for the deltas
        delta  = Math[ delta  >= 1 ? 'floor' : 'ceil' ](delta  / lowestDelta);
        deltaX = Math[ deltaX >= 1 ? 'floor' : 'ceil' ](deltaX / lowestDelta);
        deltaY = Math[ deltaY >= 1 ? 'floor' : 'ceil' ](deltaY / lowestDelta);

        // Normalise offsetX and offsetY properties
        if ( special.settings.normalizeOffset && this.getBoundingClientRect ) {
            var boundingRect = this.getBoundingClientRect();
            offsetX = event.clientX - boundingRect.left;
            offsetY = event.clientY - boundingRect.top;
        }

        // Add information to the event object
        event.deltaX = deltaX;
        event.deltaY = deltaY;
        event.deltaFactor = lowestDelta;
        event.offsetX = offsetX;
        event.offsetY = offsetY;
        // Go ahead and set deltaMode to 0 since we converted to pixels
        // Although this is a little odd since we overwrite the deltaX/Y
        // properties with normalized deltas.
        event.deltaMode = 0;

        // Add event and delta to the front of the arguments
        args.unshift(event, delta, deltaX, deltaY);

        // Clearout lowestDelta after sometime to better
        // handle multiple device types that give different
        // a different lowestDelta
        // Ex: trackpad = 3 and mouse wheel = 120
        if (nullLowestDeltaTimeout) { clearTimeout(nullLowestDeltaTimeout); }
        nullLowestDeltaTimeout = setTimeout(nullLowestDelta, 200);

        return ($.event.dispatch || $.event.handle).apply(this, args);
    }

    function nullLowestDelta() {
        lowestDelta = null;
    }

    function shouldAdjustOldDeltas(orgEvent, absDelta) {
        // If this is an older event and the delta is divisable by 120,
        // then we are assuming that the browser is treating this as an
        // older mouse wheel event and that we should divide the deltas
        // by 40 to try and get a more usable deltaFactor.
        // Side note, this actually impacts the reported scroll distance
        // in older browsers and can cause scrolling to be slower than native.
        // Turn this off by setting $.event.special.mousewheel.settings.adjustOldDeltas to false.
        return special.settings.adjustOldDeltas && orgEvent.type === 'mousewheel' && absDelta % 120 === 0;
    }

}));
/**
 * menu-aim is a jQuery plugin for dropdown menus that can differentiate
 * between a user trying hover over a dropdown item vs trying to navigate into
 * a submenu's contents.
 *
 * menu-aim assumes that you have are using a menu with submenus that expand
 * to the menu's right. It will fire events when the user's mouse enters a new
 * dropdown item *and* when that item is being intentionally hovered over.
 *
 * __________________________
 * | Monkeys  >|   Gorilla  |
 * | Gorillas >|   Content  |
 * | Chimps   >|   Here     |
 * |___________|____________|
 *
 * In the above example, "Gorillas" is selected and its submenu content is
 * being shown on the right. Imagine that the user's cursor is hovering over
 * "Gorillas." When they move their mouse into the "Gorilla Content" area, they
 * may briefly hover over "Chimps." This shouldn't close the "Gorilla Content"
 * area.
 *
 * This problem is normally solved using timeouts and delays. menu-aim tries to
 * solve this by detecting the direction of the user's mouse movement. This can
 * make for quicker transitions when navigating up and down the menu. The
 * experience is hopefully similar to amazon.com/'s "Shop by Department"
 * dropdown.
 *
 * Use like so:
 *
 *      $("#menu").menuAim({
 *          activate: $.noop,  // fired on row activation
 *          deactivate: $.noop  // fired on row deactivation
 *      });
 *
 *  ...to receive events when a menu's row has been purposefully (de)activated.
 *
 * The following options can be passed to menuAim. All functions execute with
 * the relevant row's HTML element as the execution context ('this'):
 *
 *      .menuAim({
 *          // Function to call when a row is purposefully activated. Use this
 *          // to show a submenu's content for the activated row.
 *          activate: function() {},
 *
 *          // Function to call when a row is deactivated.
 *          deactivate: function() {},
 *
 *          // Function to call when mouse enters a menu row. Entering a row
 *          // does not mean the row has been activated, as the user may be
 *          // mousing over to a submenu.
 *          enter: function() {},
 *
 *          // Function to call when mouse exits a menu row.
 *          exit: function() {},
 *
 *          // Selector for identifying which elements in the menu are rows
 *          // that can trigger the above events. Defaults to "> li".
 *          rowSelector: "> li",
 *
 *          // You may have some menu rows that aren't submenus and therefore
 *          // shouldn't ever need to "activate." If so, filter submenu rows w/
 *          // this selector. Defaults to "*" (all elements).
 *          submenuSelector: "*",
 *
 *          // Direction the submenu opens relative to the main menu. Can be
 *          // left, right, above, or below. Defaults to "right".
 *          submenuDirection: "right"
 *      });
 *
 * https://github.com/kamens/jQuery-menu-aim
 */
(function($) {
    $.fn.menuAim = function(opts) {
        // Initialize menu-aim for all elements in jQuery collection
        this.each(function() {
            init.call(this, opts);
        });

        return this;
    };

    function init(opts) {
        var $menu = $(this),
            activeRow = null,
            mouseLocs = [],
            lastDelayLoc = null,
            timeoutId = null,
            options = $.extend({
                rowSelector: "> li",
                submenuSelector: "*",
                submenuDirection: "right",
                tolerance: 75,  // bigger = more forgivey when entering submenu
                enter: $.noop,
                exit: $.noop,
                activate: $.noop,
                deactivate: $.noop,
                exitMenu: $.noop
            }, opts);

        var MOUSE_LOCS_TRACKED = 3,  // number of past mouse locations to track
            DELAY = 300;  // ms delay when user appears to be entering submenu

        /**
         * Keep track of the last few locations of the mouse.
         */
        var mousemoveDocument = function(e) {
            mouseLocs.push({x: e.pageX, y: e.pageY});

            if (mouseLocs.length > MOUSE_LOCS_TRACKED) {
                mouseLocs.shift();
            }
        };

        /**
         * Cancel possible row activations when leaving the menu entirely
         */
        var mouseleaveMenu = function() {
            if (timeoutId) {
                clearTimeout(timeoutId);
            }

            // If exitMenu is supplied and returns true, deactivate the
            // currently active row on menu exit.
            if (options.exitMenu(this)) {
                if (activeRow) {
                    options.deactivate(activeRow);
                }

                activeRow = null;
            }
        };

        /**
         * Trigger a possible row activation whenever entering a new row.
         */
        var mouseenterRow = function() {
                if (timeoutId) {
                    // Cancel any previous activation delays
                    clearTimeout(timeoutId);
                }

                options.enter(this);
                possiblyActivate(this);
            },
            mouseleaveRow = function() {
                options.exit(this);
            };

        /*
         * Immediately activate a row if the user clicks on it.
         */
        var clickRow = function() {
            activate(this);
        };

        /**
         * Activate a menu row.
         */
        var activate = function(row) {
            if (row == activeRow) {
                return;
            }

            if (activeRow) {
                options.deactivate(activeRow);
            }
            options.activate(row);
            activeRow = row;
        };

        /**
         * Possibly activate a menu row. If mouse movement indicates that we
         * shouldn't activate yet because user may be trying to enter
         * a submenu's content, then delay and check again later.
         */
        var possiblyActivate = function(row) {
            var delay = activationDelay();

            if (delay) {
                timeoutId = setTimeout(function() {
                    possiblyActivate(row);
                }, delay);
            } else {
                activate(row);
            }
        };

        /**
         * Return the amount of time that should be used as a delay before the
         * currently hovered row is activated.
         *
         * Returns 0 if the activation should happen immediately. Otherwise,
         * returns the number of milliseconds that should be delayed before
         * checking again to see if the row should be activated.
         */
        var activationDelay = function() {
            if (!activeRow || !$(activeRow).is(options.submenuSelector)) {
                // If there is no other submenu row already active, then
                // go ahead and activate immediately.
                return 0;
            }

            var offset = $menu.offset(),
                upperLeft = {
                    x: offset.left,
                    y: offset.top - options.tolerance
                },
                upperRight = {
                    x: offset.left + $menu.outerWidth(),
                    y: upperLeft.y
                },
                lowerLeft = {
                    x: offset.left,
                    y: offset.top + $menu.outerHeight() + options.tolerance
                },
                lowerRight = {
                    x: offset.left + $menu.outerWidth(),
                    y: lowerLeft.y
                },
                loc = mouseLocs[mouseLocs.length - 1],
                prevLoc = mouseLocs[0];

            if (!loc) {
                return 0;
            }

            if (!prevLoc) {
                prevLoc = loc;
            }

            if (prevLoc.x < offset.left || prevLoc.x > lowerRight.x ||
                prevLoc.y < offset.top || prevLoc.y > lowerRight.y) {
                // If the previous mouse location was outside of the entire
                // menu's bounds, immediately activate.
                return 0;
            }

            if (lastDelayLoc &&
                loc.x == lastDelayLoc.x && loc.y == lastDelayLoc.y) {
                // If the mouse hasn't moved since the last time we checked
                // for activation status, immediately activate.
                return 0;
            }

            // Detect if the user is moving towards the currently activated
            // submenu.
            //
            // If the mouse is heading relatively clearly towards
            // the submenu's content, we should wait and give the user more
            // time before activating a new row. If the mouse is heading
            // elsewhere, we can immediately activate a new row.
            //
            // We detect this by calculating the slope formed between the
            // current mouse location and the upper/lower right points of
            // the menu. We do the same for the previous mouse location.
            // If the current mouse location's slopes are
            // increasing/decreasing appropriately compared to the
            // previous's, we know the user is moving toward the submenu.
            //
            // Note that since the y-axis increases as the cursor moves
            // down the screen, we are looking for the slope between the
            // cursor and the upper right corner to decrease over time, not
            // increase (somewhat counterintuitively).
            function slope(a, b) {
                return (b.y - a.y) / (b.x - a.x);
            };

            var decreasingCorner = upperRight,
                increasingCorner = lowerRight;

            // Our expectations for decreasing or increasing slope values
            // depends on which direction the submenu opens relative to the
            // main menu. By default, if the menu opens on the right, we
            // expect the slope between the cursor and the upper right
            // corner to decrease over time, as explained above. If the
            // submenu opens in a different direction, we change our slope
            // expectations.
            if (options.submenuDirection == "left") {
                decreasingCorner = lowerLeft;
                increasingCorner = upperLeft;
            } else if (options.submenuDirection == "below") {
                decreasingCorner = lowerRight;
                increasingCorner = lowerLeft;
            } else if (options.submenuDirection == "above") {
                decreasingCorner = upperLeft;
                increasingCorner = upperRight;
            }

            var decreasingSlope = slope(loc, decreasingCorner),
                increasingSlope = slope(loc, increasingCorner),
                prevDecreasingSlope = slope(prevLoc, decreasingCorner),
                prevIncreasingSlope = slope(prevLoc, increasingCorner);

            if (decreasingSlope < prevDecreasingSlope &&
                increasingSlope > prevIncreasingSlope) {
                // Mouse is moving from previous location towards the
                // currently activated submenu. Delay before activating a
                // new menu row, because user may be moving into submenu.
                lastDelayLoc = loc;
                return DELAY;
            }

            lastDelayLoc = null;
            return 0;
        };

        /**
         * Hook up initial menu events
         */
        $menu
            .mouseleave(mouseleaveMenu)
            .find(options.rowSelector)
            .mouseenter(mouseenterRow)
            .mouseleave(mouseleaveRow)
            .click(clickRow);

        $(document).mousemove(mousemoveDocument);

    };
})(jQuery);
/*
 * ScrollToFixed
 * https://github.com/bigspotteddog/ScrollToFixed
 * 
 * Copyright (c) 2011 Joseph Cava-Lynch
 * MIT license
 */
(function($) {
    $.isScrollToFixed = function(el) {
        return !!$(el).data('ScrollToFixed');
    };

    $.ScrollToFixed = function(el, options) {
        // To avoid scope issues, use 'base' instead of 'this' to reference this
        // class from internal events and functions.
        var base = this;

        // Access to jQuery and DOM versions of element.
        base.$el = $(el);
        base.el = el;

        // Add a reverse reference to the DOM object.
        base.$el.data('ScrollToFixed', base);

        // A flag so we know if the scroll has been reset.
        var isReset = false;

        // The element that was given to us to fix if scrolled above the top of
        // the page.
        var target = base.$el;

        var position;
        var originalPosition;
        var originalOffsetTop;
        var originalZIndex;

        // The offset top of the element when resetScroll was called. This is
        // used to determine if we have scrolled past the top of the element.
        var offsetTop = 0;

        // The offset left of the element when resetScroll was called. This is
        // used to move the element left or right relative to the horizontal
        // scroll.
        var offsetLeft = 0;
        var originalOffsetLeft = -1;

        // This last offset used to move the element horizontally. This is used
        // to determine if we need to move the element because we would not want
        // to do that for no reason.
        var lastOffsetLeft = -1;

        // This is the element used to fill the void left by the target element
        // when it goes fixed; otherwise, everything below it moves up the page.
        var spacer = null;

        var spacerClass;

        var className;

        // Capture the original offsets for the target element. This needs to be
        // called whenever the page size changes or when the page is first
        // scrolled. For some reason, calling this before the page is first
        // scrolled causes the element to become fixed too late.
        function resetScroll() {
            // Set the element to it original positioning.
            target.trigger('preUnfixed.ScrollToFixed');
            setUnfixed();
            target.trigger('unfixed.ScrollToFixed');

            // Reset the last offset used to determine if the page has moved
            // horizontally.
            lastOffsetLeft = -1;

            // Capture the offset top of the target element.
            offsetTop = target.offset().top;

            // Capture the offset left of the target element.
            offsetLeft = target.offset().left;

            // If the offsets option is on, alter the left offset.
            if (base.options.offsets) {
                offsetLeft += (target.offset().left - target.position().left);
            }

            if (originalOffsetLeft == -1) {
                originalOffsetLeft = offsetLeft;
            }

            position = target.css('position');

            // Set that this has been called at least once.
            isReset = true;

            if (base.options.bottom != -1) {
                target.trigger('preFixed.ScrollToFixed');
                setFixed();
                target.trigger('fixed.ScrollToFixed');
            }
        }

        function getLimit() {
            var limit = base.options.limit;
            if (!limit) return 0;

            if (typeof(limit) === 'function') {
                return limit.apply(target);
            }
            return limit;
        }

        // Returns whether the target element is fixed or not.
        function isFixed() {
            return position === 'fixed';
        }

        // Returns whether the target element is absolute or not.
        function isAbsolute() {
            return position === 'absolute';
        }

        function isUnfixed() {
            return !(isFixed() || isAbsolute());
        }

        // Sets the target element to fixed. Also, sets the spacer to fill the
        // void left by the target element.
        function setFixed() {
            // Only fix the target element and the spacer if we need to.
            if (!isFixed()) {
                // Set the spacer to fill the height and width of the target
                // element, then display it.
                spacer.css({
                    'display' : target.css('display'),
                    'width' : target.outerWidth(true),
                    'height' : target.outerHeight(true),
                    'float' : target.css('float')
                });

                // Set the target element to fixed and set its width so it does
                // not fill the rest of the page horizontally. Also, set its top
                // to the margin top specified in the options.

                cssOptions={
                    'z-index' : getZIndex(),
                    'position' : 'fixed',
                    'top' : base.options.bottom == -1?getMarginTop():'',
                    'bottom' : base.options.bottom == -1?'':base.options.bottom,
                    'margin-left' : '0px'
                }
                if (!base.options.dontSetWidth){ cssOptions['width']=target.css('width'); };

                target.css(cssOptions);
                
                target.addClass(base.options.baseClassName);
                
                if (base.options.className) {
                    target.addClass(base.options.className);
                }

                if(position != 'fixed') {
                  target.addClass('scroll-to-fixed-fixed');
                  target.removeClass('scroll-to-fixed-absolute');
                }

                position = 'fixed';
            }
        }

        function setAbsolute() {

            var top = getLimit();
            var left = offsetLeft;

            if (base.options.removeOffsets) {
                left = '';
                top = top - offsetTop + getMarginTop();
            }

            cssOptions={
              'z-index' : getZIndex(),
              'position' : 'absolute',
              'top' : top,
              'left' : left,
              'margin-left' : '0px',
              'bottom' : ''
            }
            if (!base.options.dontSetWidth){ cssOptions['width']=target.css('width'); };

            if(position != 'absolute') {
              target.removeClass('scroll-to-fixed-fixed');
              target.addClass('scroll-to-fixed-absolute');
            }
            target.css(cssOptions);

            position = 'absolute';
        }

        // Sets the target element back to unfixed. Also, hides the spacer.
        function setUnfixed() {
            // Only unfix the target element and the spacer if we need to.
            if (!isUnfixed()) {
                lastOffsetLeft = -1;

                // Hide the spacer now that the target element will fill the
                // space.
                spacer.css('display', 'none');

                // Remove the style attributes that were added to the target.
                // This will reverse the target back to the its original style.
                target.css({
                    'z-index' : originalZIndex,
                    'width' : '',
                    'position' : originalPosition,
                    'left' : '',
                    'top' : originalOffsetTop,
                    'margin-left' : ''
                });

                target.removeClass('scroll-to-fixed-fixed');
                target.removeClass('scroll-to-fixed-absolute');

                if (base.options.className) {
                    target.removeClass(base.options.className);
                }

                position = null;
            }
        }

        // Moves the target element left or right relative to the horizontal
        // scroll position.
        function setLeft(x) {
            // Only if the scroll is not what it was last time we did this.
            if (x != lastOffsetLeft) {
                // Move the target element horizontally relative to its original
                // horizontal position.
                target.css('left', offsetLeft - x);

                // Hold the last horizontal position set.
                lastOffsetLeft = x;
            }
        }

        function getMarginTop() {
            var marginTop = base.options.marginTop;
            if (!marginTop) return 0;

            if (typeof(marginTop) === 'function') {
                return marginTop.apply(target);
            }
            return marginTop;
        }
        function getZIndex() {
          var zIndex = base.options.zIndex;

          if (typeof(zIndex) === 'function') {
              return zIndex.apply(target);
          }
          return zIndex;
        }

        // Checks to see if we need to do something based on new scroll position
        // of the page.
        function checkScroll() {
            if (!$.isScrollToFixed(target)) return;
            var wasReset = isReset;

            // If resetScroll has not yet been called, call it. This only
            // happens once.
            if (!isReset) {
                resetScroll();
            } else if (isUnfixed()) {
                // if the offset has changed since the last scroll,
                // we need to get it again.

                // Capture the offset top of the target element.
                offsetTop = target.offset().top;

                // Capture the offset left of the target element.
                offsetLeft = target.offset().left;
            }

            // Grab the current horizontal scroll position.
            var x = $(window).scrollLeft();

            // Grab the current vertical scroll position.
            var y = $(window).scrollTop();

            // Get the limit, if there is one.
            var limit = getLimit();

            // If the vertical scroll position, plus the optional margin, would
            // put the target element at the specified limit, set the target
            // element to absolute.
            if (base.options.minWidth && $(window).width() < base.options.minWidth) {
                if (!isUnfixed() || !wasReset) {
                    postPosition();
                    target.trigger('preUnfixed.ScrollToFixed');
                    setUnfixed();
                    target.trigger('unfixed.ScrollToFixed');
                }
            } else if (base.options.maxWidth && $(window).width() > base.options.maxWidth) {
                if (!isUnfixed() || !wasReset) {
                    postPosition();
                    target.trigger('preUnfixed.ScrollToFixed');
                    setUnfixed();
                    target.trigger('unfixed.ScrollToFixed');
                }
            } else if (base.options.bottom == -1) {
                // If the vertical scroll position, plus the optional margin, would
                // put the target element at the specified limit, set the target
                // element to absolute.
                if (limit > 0 && y >= limit - getMarginTop()) {
                    if (!isAbsolute() || !wasReset) {
                        postPosition();
                        target.trigger('preAbsolute.ScrollToFixed');
                        setAbsolute();
                        target.trigger('unfixed.ScrollToFixed');
                    }
                // If the vertical scroll position, plus the optional margin, would
                // put the target element above the top of the page, set the target
                // element to fixed.
                } else if (y >= offsetTop - getMarginTop()) {
                    if (!isFixed() || !wasReset) {
                        postPosition();
                        target.trigger('preFixed.ScrollToFixed');

                        // Set the target element to fixed.
                        setFixed();

                        // Reset the last offset left because we just went fixed.
                        lastOffsetLeft = -1;

                        target.trigger('fixed.ScrollToFixed');
                    }
                    // If the page has been scrolled horizontally as well, move the
                    // target element accordingly.
                    setLeft(x);
                } else {
                    // Set the target element to unfixed, placing it where it was
                    // before.
                    if (!isUnfixed() || !wasReset) {
                        postPosition();
                        target.trigger('preUnfixed.ScrollToFixed');
                        setUnfixed();
                        target.trigger('unfixed.ScrollToFixed');
                    }
                }
            } else {
                if (limit > 0) {
                    if (y + $(window).height() - target.outerHeight(true) >= limit - (getMarginTop() || -getBottom())) {
                        if (isFixed()) {
                            postPosition();
                            target.trigger('preUnfixed.ScrollToFixed');

                            if (originalPosition === 'absolute') {
                                setAbsolute();
                            } else {
                                setUnfixed();
                            }

                            target.trigger('unfixed.ScrollToFixed');
                        }
                    } else {
                        if (!isFixed()) {
                            postPosition();
                            target.trigger('preFixed.ScrollToFixed');
                            setFixed();
                        }
                        setLeft(x);
                        target.trigger('fixed.ScrollToFixed');
                    }
                } else {
                    setLeft(x);
                }
            }
        }

        function getBottom() {
            if (!base.options.bottom) return 0;
            return base.options.bottom;
        }

        function postPosition() {
            var position = target.css('position');

            if (position == 'absolute') {
                target.trigger('postAbsolute.ScrollToFixed');
            } else if (position == 'fixed') {
                target.trigger('postFixed.ScrollToFixed');
            } else {
                target.trigger('postUnfixed.ScrollToFixed');
            }
        }

        var windowResize = function(event) {
            // Check if the element is visible before updating it's position, which
            // improves behavior with responsive designs where this element is hidden.
            if(target.is(':visible')) {
                isReset = false;
                checkScroll();
            }
        }

        var windowScroll = function(event) {
            (!!window.requestAnimationFrame) ? requestAnimationFrame(checkScroll) : checkScroll();
        }

        // From: http://kangax.github.com/cft/#IS_POSITION_FIXED_SUPPORTED
        var isPositionFixedSupported = function() {
            var container = document.body;

            if (document.createElement && container && container.appendChild && container.removeChild) {
                var el = document.createElement('div');

                if (!el.getBoundingClientRect) return null;

                el.innerHTML = 'x';
                el.style.cssText = 'position:fixed;top:100px;';
                container.appendChild(el);

                var originalHeight = container.style.height,
                originalScrollTop = container.scrollTop;

                container.style.height = '3000px';
                container.scrollTop = 500;

                var elementTop = el.getBoundingClientRect().top;
                container.style.height = originalHeight;

                var isSupported = (elementTop === 100);
                container.removeChild(el);
                container.scrollTop = originalScrollTop;

                return isSupported;
            }

            return null;
        }

        var preventDefault = function(e) {
            e = e || window.event;
            if (e.preventDefault) {
                e.preventDefault();
            }
            e.returnValue = false;
        }

        // Initializes this plugin. Captures the options passed in, turns this
        // off for devices that do not support fixed position, adds the spacer,
        // and binds to the window scroll and resize events.
        base.init = function() {
            // Capture the options for this plugin.
            base.options = $.extend({}, $.ScrollToFixed.defaultOptions, options);

            originalZIndex = target.css('z-index')

            // Turn off this functionality for devices that do not support it.
            // if (!(base.options && base.options.dontCheckForPositionFixedSupport)) {
            //     var fixedSupported = isPositionFixedSupported();
            //     if (!fixedSupported) return;
            // }

            // Put the target element on top of everything that could be below
            // it. This reduces flicker when the target element is transitioning
            // to fixed.
            base.$el.css('z-index', getZIndex());

            // Create a spacer element to fill the void left by the target
            // element when it goes fixed.
            spacer = $('<div />');

            position = target.css('position');
            originalPosition = target.css('position');

            originalOffsetTop = target.css('top');

            // Place the spacer right after the target element.
            if (isUnfixed()) base.$el.after(spacer);

            // Reset the target element offsets when the window is resized, then
            // check to see if we need to fix or unfix the target element.
            $(window).bind('resize.ScrollToFixed', windowResize);

            // When the window scrolls, check to see if we need to fix or unfix
            // the target element.
            $(window).bind('scroll.ScrollToFixed', windowScroll);

            // For touch devices, call checkScroll directlly rather than
            // rAF wrapped windowScroll to animate the element
            if ('ontouchmove' in window) {
              $(window).bind('touchmove.ScrollToFixed', checkScroll);
            }

            if (base.options.preFixed) {
                target.bind('preFixed.ScrollToFixed', base.options.preFixed);
            }
            if (base.options.postFixed) {
                target.bind('postFixed.ScrollToFixed', base.options.postFixed);
            }
            if (base.options.preUnfixed) {
                target.bind('preUnfixed.ScrollToFixed', base.options.preUnfixed);
            }
            if (base.options.postUnfixed) {
                target.bind('postUnfixed.ScrollToFixed', base.options.postUnfixed);
            }
            if (base.options.preAbsolute) {
                target.bind('preAbsolute.ScrollToFixed', base.options.preAbsolute);
            }
            if (base.options.postAbsolute) {
                target.bind('postAbsolute.ScrollToFixed', base.options.postAbsolute);
            }
            if (base.options.fixed) {
                target.bind('fixed.ScrollToFixed', base.options.fixed);
            }
            if (base.options.unfixed) {
                target.bind('unfixed.ScrollToFixed', base.options.unfixed);
            }

            if (base.options.spacerClass) {
                spacer.addClass(base.options.spacerClass);
            }

            target.bind('resize.ScrollToFixed', function() {
                spacer.height(target.height());
            });

            target.bind('scroll.ScrollToFixed', function() {
                target.trigger('preUnfixed.ScrollToFixed');
                setUnfixed();
                target.trigger('unfixed.ScrollToFixed');
                checkScroll();
            });

            target.bind('detach.ScrollToFixed', function(ev) {
                preventDefault(ev);

                target.trigger('preUnfixed.ScrollToFixed');
                setUnfixed();
                target.trigger('unfixed.ScrollToFixed');

                $(window).unbind('resize.ScrollToFixed', windowResize);
                $(window).unbind('scroll.ScrollToFixed', windowScroll);

                target.unbind('.ScrollToFixed');

                //remove spacer from dom
                spacer.remove();

                base.$el.removeData('ScrollToFixed');
            });

            // Reset everything.
            windowResize();
        };

        // Initialize the plugin.
        base.init();
    };

    // Sets the option defaults.
    $.ScrollToFixed.defaultOptions = {
        marginTop : 0,
        limit : 0,
        bottom : -1,
        zIndex : 1000,
        baseClassName: 'scroll-to-fixed-fixed'
    };

    // Returns enhanced elements that will fix to the top of the page when the
    // page is scrolled.
    $.fn.scrollToFixed = function(options) {
        return this.each(function() {
            (new $.ScrollToFixed(this, options));
        });
    };
})(jQuery);
/*
 *	jQuery dotdotdot 1.7.3
 *
 *	Copyright (c) Fred Heusschen
 *	www.frebsite.nl
 *
 *	Plugin website:
 *	dotdotdot.frebsite.nl
 *
 *	Licensed under the MIT license.
 *	http://en.wikipedia.org/wiki/MIT_License
 */
// @ts-ignore
!function(t,e){function n(t,e,n){var r=t.children(),o=!1;t.empty();for(var a=0,d=r.length;d>a;a++){var l=r.eq(a);if(t.append(l),n&&t.append(n),i(t,e)){l.remove(),o=!0;break}n&&n.detach()}return o}function r(e,n,a,d,l){var s=!1,c="a, table, thead, tbody, tfoot, tr, col, colgroup, object, embed, param, ol, ul, dl, blockquote, select, optgroup, option, textarea, script, style",u="script, .dotdotdot-keep";return e.contents().detach().each(function(){var f=this,h=t(f);if("undefined"==typeof f)return!0;if(h.is(u))e.append(h);else{if(s)return!0;e.append(h),!l||h.is(d.after)||h.find(d.after).length||e[e.is(c)?"after":"append"](l),i(a,d)&&(s=3==f.nodeType?o(h,n,a,d,l):r(h,n,a,d,l),s||(h.detach(),s=!0)),s||l&&l.detach()}}),s}function o(e,n,r,o,d){var c=e[0];if(!c)return!1;var f=s(c),h=-1!==f.indexOf(" ")?" ":"　",p="letter"==o.wrap?"":h,g=f.split(p),v=-1,w=-1,b=0,y=g.length-1;for(o.fallbackToLetter&&0==b&&0==y&&(p="",g=f.split(p),y=g.length-1);y>=b&&(0!=b||0!=y);){var m=Math.floor((b+y)/2);if(m==w)break;w=m,l(c,g.slice(0,w+1).join(p)+o.ellipsis),i(r,o)?(y=w,o.fallbackToLetter&&0==b&&0==y&&(p="",g=g[0].split(p),v=-1,w=-1,b=0,y=g.length-1)):(v=w,b=w)}if(-1==v||1==g.length&&0==g[0].length){var x=e.parent();e.detach();var T=d&&d.closest(x).length?d.length:0;x.contents().length>T?c=u(x.contents().eq(-1-T),n):(c=u(x,n,!0),T||x.detach()),c&&(f=a(s(c),o),l(c,f),T&&d&&t(c).parent().append(d))}else f=a(g.slice(0,v+1).join(p),o),l(c,f);return!0}function i(t,e){return t.innerHeight()>e.maxHeight}function a(e,n){for(;t.inArray(e.slice(-1),n.lastCharacter.remove)>-1;)e=e.slice(0,-1);return t.inArray(e.slice(-1),n.lastCharacter.noEllipsis)<0&&(e+=n.ellipsis),e}function d(t){return{width:t.innerWidth(),height:t.innerHeight()}}function l(t,e){t.innerText?t.innerText=e:t.nodeValue?t.nodeValue=e:t.textContent&&(t.textContent=e)}function s(t){return t.innerText?t.innerText:t.nodeValue?t.nodeValue:t.textContent?t.textContent:""}function c(t){do t=t.previousSibling;while(t&&1!==t.nodeType&&3!==t.nodeType);return t}function u(e,n,r){var o,i=e&&e[0];if(i){if(!r){if(3===i.nodeType)return i;if(t.trim(e.text()))return u(e.contents().last(),n)}for(o=c(i);!o;){if(e=e.parent(),e.is(n)||!e.length)return!1;o=c(e[0])}if(o)return u(t(o),n)}return!1}function f(e,n){return e?"string"==typeof e?(e=t(e,n),e.length?e:!1):e.jquery?e:!1:!1}function h(t){for(var e=t.innerHeight(),n=["paddingTop","paddingBottom"],r=0,o=n.length;o>r;r++){var i=parseInt(t.css(n[r]),10);isNaN(i)&&(i=0),e-=i}return e}if(!t.fn.dotdotdot){t.fn.dotdotdot=function(e){if(0==this.length)return t.fn.dotdotdot.debug('No element found for "'+this.selector+'".'),this;if(this.length>1)return this.each(function(){t(this).dotdotdot(e)});var o=this;o.data("dotdotdot")&&o.trigger("destroy.dot"),o.data("dotdotdot-style",o.attr("style")||""),o.css("word-wrap","break-word"),"nowrap"===o.css("white-space")&&o.css("white-space","normal"),o.bind_events=function(){return o.bind("update.dot",function(e,d){e.preventDefault(),e.stopPropagation(),l.maxHeight="number"==typeof l.height?l.height:h(o),l.maxHeight+=l.tolerance,"undefined"!=typeof d&&(("string"==typeof d||"nodeType"in d&&1===d.nodeType)&&(d=t("<div />").append(d).contents()),d instanceof t&&(a=d)),g=o.wrapInner('<div class="dotdotdot" />').children(),g.contents().detach().end().append(a.clone(!0)).find("br").replaceWith("  <br />  ").end().css({height:"auto",width:"auto",border:"none",padding:0,margin:0});var c=!1,u=!1;return s.afterElement&&(c=s.afterElement.clone(!0),c.show(),s.afterElement.detach()),i(g,l)&&(u="children"==l.wrap?n(g,l,c):r(g,o,g,l,c)),g.replaceWith(g.contents()),g=null,t.isFunction(l.callback)&&l.callback.call(o[0],u,a),s.isTruncated=u,u}).bind("isTruncated.dot",function(t,e){return t.preventDefault(),t.stopPropagation(),"function"==typeof e&&e.call(o[0],s.isTruncated),s.isTruncated}).bind("originalContent.dot",function(t,e){return t.preventDefault(),t.stopPropagation(),"function"==typeof e&&e.call(o[0],a),a}).bind("destroy.dot",function(t){t.preventDefault(),t.stopPropagation(),o.unwatch().unbind_events().contents().detach().end().append(a).attr("style",o.data("dotdotdot-style")||"").data("dotdotdot",!1)}),o},o.unbind_events=function(){return o.unbind(".dot"),o},o.watch=function(){if(o.unwatch(),"window"==l.watch){var e=t(window),n=e.width(),r=e.height();e.bind("resize.dot"+s.dotId,function(){n==e.width()&&r==e.height()&&l.windowResizeFix||(n=e.width(),r=e.height(),u&&clearInterval(u),u=setTimeout(function(){o.trigger("update.dot")},100))})}else c=d(o),u=setInterval(function(){if(o.is(":visible")){var t=d(o);(c.width!=t.width||c.height!=t.height)&&(o.trigger("update.dot"),c=t)}},500);return o},o.unwatch=function(){return t(window).unbind("resize.dot"+s.dotId),u&&clearInterval(u),o};var a=o.contents(),l=t.extend(!0,{},t.fn.dotdotdot.defaults,e),s={},c={},u=null,g=null;return l.lastCharacter.remove instanceof Array||(l.lastCharacter.remove=t.fn.dotdotdot.defaultArrays.lastCharacter.remove),l.lastCharacter.noEllipsis instanceof Array||(l.lastCharacter.noEllipsis=t.fn.dotdotdot.defaultArrays.lastCharacter.noEllipsis),s.afterElement=f(l.after,o),s.isTruncated=!1,s.dotId=p++,o.data("dotdotdot",!0).bind_events().trigger("update.dot"),l.watch&&o.watch(),o},t.fn.dotdotdot.defaults={ellipsis:"... ",wrap:"word",fallbackToLetter:!0,lastCharacter:{},tolerance:0,callback:null,after:null,height:null,watch:!1,windowResizeFix:!0},t.fn.dotdotdot.defaultArrays={lastCharacter:{remove:[" ","　",",",";",".","!","?"],noEllipsis:[]}},t.fn.dotdotdot.debug=function(){};var p=1,g=t.fn.html;t.fn.html=function(n){return n!=e&&!t.isFunction(n)&&this.data("dotdotdot")?this.trigger("update",[n]):g.apply(this,arguments)};var v=t.fn.text;t.fn.text=function(n){return n!=e&&!t.isFunction(n)&&this.data("dotdotdot")?(n=t("<div />").text(n).html(),this.trigger("update",[n])):v.apply(this,arguments)}}}(jQuery);
/*!
 * jQuery Browser Plugin 0.1.0
 * https://github.com/gabceb/jquery-browser-plugin
 *
 * Original jquery-browser code Copyright 2005, 2015 jQuery Foundation, Inc. and other contributors
 * http://jquery.org/license
 *
 * Modifications Copyright 2015 Gabriel Cebrian
 * https://github.com/gabceb
 *
 * Released under the MIT license
 *
 * Date: 23-11-2015
 */
// @ts-ignore
!function(a){"function"==typeof define&&define.amd?define(["jquery"],function(b){return a(b)}):"object"==typeof module&&"object"==typeof module.exports?module.exports=a(require("jquery")):a(window.jQuery)}(function(a){"use strict";function b(a){void 0===a&&(a=window.navigator.userAgent),a=a.toLowerCase();var b=/(edge)\/([\w.]+)/.exec(a)||/(opr)[\/]([\w.]+)/.exec(a)||/(chrome)[ \/]([\w.]+)/.exec(a)||/(iemobile)[\/]([\w.]+)/.exec(a)||/(version)(applewebkit)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.exec(a)||/(webkit)[ \/]([\w.]+).*(version)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.exec(a)||/(webkit)[ \/]([\w.]+)/.exec(a)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(a)||/(msie) ([\w.]+)/.exec(a)||a.indexOf("trident")>=0&&/(rv)(?::| )([\w.]+)/.exec(a)||a.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(a)||[],c=/(ipad)/.exec(a)||/(ipod)/.exec(a)||/(windows phone)/.exec(a)||/(iphone)/.exec(a)||/(kindle)/.exec(a)||/(silk)/.exec(a)||/(android)/.exec(a)||/(win)/.exec(a)||/(mac)/.exec(a)||/(linux)/.exec(a)||/(cros)/.exec(a)||/(playbook)/.exec(a)||/(bb)/.exec(a)||/(blackberry)/.exec(a)||[],d={},e={browser:b[5]||b[3]||b[1]||"",version:b[2]||b[4]||"0",versionNumber:b[4]||b[2]||"0",platform:c[0]||""};if(e.browser&&(d[e.browser]=!0,d.version=e.version,d.versionNumber=parseInt(e.versionNumber,10)),e.platform&&(d[e.platform]=!0),(d.android||d.bb||d.blackberry||d.ipad||d.iphone||d.ipod||d.kindle||d.playbook||d.silk||d["windows phone"])&&(d.mobile=!0),(d.cros||d.mac||d.linux||d.win)&&(d.desktop=!0),(d.chrome||d.opr||d.safari)&&(d.webkit=!0),d.rv||d.iemobile){var f="msie";e.browser=f,d[f]=!0}if(d.edge){delete d.edge;var g="msedge";e.browser=g,d[g]=!0}if(d.safari&&d.blackberry){var h="blackberry";e.browser=h,d[h]=!0}if(d.safari&&d.playbook){var i="playbook";e.browser=i,d[i]=!0}if(d.bb){var j="blackberry";e.browser=j,d[j]=!0}if(d.opr){var k="opera";e.browser=k,d[k]=!0}if(d.safari&&d.android){var l="android";e.browser=l,d[l]=!0}if(d.safari&&d.kindle){var m="kindle";e.browser=m,d[m]=!0}if(d.safari&&d.silk){var n="silk";e.browser=n,d[n]=!0}return d.name=e.browser,d.platform=e.platform,d}return window.jQBrowser=b(window.navigator.userAgent),window.jQBrowser.uaMatch=b,a&&(a.browser=window.jQBrowser),window.jQBrowser});
/*yepnope1.5.x|WTFPL*/
// @ts-ignore
(function(a,b,c){function d(a){return"[object Function]"==o.call(a)}function e(a){return"string"==typeof a}function f(){}function g(a){return!a||"loaded"==a||"complete"==a||"uninitialized"==a}function h(){var a=p.shift();q=1,a?a.t?m(function(){("c"==a.t?B.injectCss:B.injectJs)(a.s,0,a.a,a.x,a.e,1)},0):(a(),h()):q=0}function i(a,c,d,e,f,i,j){function k(b){if(!o&&g(l.readyState)&&(u.r=o=1,!q&&h(),l.onload=l.onreadystatechange=null,b)){"img"!=a&&m(function(){t.removeChild(l)},50);for(var d in y[c])y[c].hasOwnProperty(d)&&y[c][d].onload()}}var j=j||B.errorTimeout,l=b.createElement(a),o=0,r=0,u={t:d,s:c,e:f,a:i,x:j};1===y[c]&&(r=1,y[c]=[]),"object"==a?l.data=c:(l.src=c,l.type=a),l.width=l.height="0",l.onerror=l.onload=l.onreadystatechange=function(){k.call(this,r)},p.splice(e,0,u),"img"!=a&&(r||2===y[c]?(t.insertBefore(l,s?null:n),m(k,j)):y[c].push(l))}function j(a,b,c,d,f){return q=0,b=b||"j",e(a)?i("c"==b?v:u,a,b,this.i++,c,d,f):(p.splice(this.i++,0,a),1==p.length&&h()),this}function k(){var a=B;return a.loader={load:j,i:0},a}var l=b.documentElement,m=a.setTimeout,n=b.getElementsByTagName("script")[0],o={}.toString,p=[],q=0,r="MozAppearance"in l.style,s=r&&!!b.createRange().compareNode,t=s?l:n.parentNode,l=a.opera&&"[object Opera]"==o.call(a.opera),l=!!b.attachEvent&&!l,u=r?"object":l?"script":"img",v=l?"script":u,w=Array.isArray||function(a){return"[object Array]"==o.call(a)},x=[],y={},z={timeout:function(a,b){return b.length&&(a.timeout=b[0]),a}},A,B;B=function(a){function b(a){var a=a.split("!"),b=x.length,c=a.pop(),d=a.length,c={url:c,origUrl:c,prefixes:a},e,f,g;for(f=0;f<d;f++)g=a[f].split("="),(e=z[g.shift()])&&(c=e(c,g));for(f=0;f<b;f++)c=x[f](c);return c}function g(a,e,f,g,h){var i=b(a),j=i.autoCallback;i.url.split(".").pop().split("?").shift(),i.bypass||(e&&(e=d(e)?e:e[a]||e[g]||e[a.split("/").pop().split("?")[0]]),i.instead?i.instead(a,e,f,g,h):(y[i.url]?i.noexec=!0:y[i.url]=1,f.load(i.url,i.forceCSS||!i.forceJS&&"css"==i.url.split(".").pop().split("?").shift()?"c":c,i.noexec,i.attrs,i.timeout),(d(e)||d(j))&&f.load(function(){k(),e&&e(i.origUrl,h,g),j&&j(i.origUrl,h,g),y[i.url]=2})))}function h(a,b){function c(a,c){if(a){if(e(a))c||(j=function(){var a=[].slice.call(arguments);k.apply(this,a),l()}),g(a,j,b,0,h);else if(Object(a)===a)for(n in m=function(){var b=0,c;for(c in a)a.hasOwnProperty(c)&&b++;return b}(),a)a.hasOwnProperty(n)&&(!c&&!--m&&(d(j)?j=function(){var a=[].slice.call(arguments);k.apply(this,a),l()}:j[n]=function(a){return function(){var b=[].slice.call(arguments);a&&a.apply(this,b),l()}}(k[n])),g(a[n],j,b,n,h))}else!c&&l()}var h=!!a.test,i=a.load||a.both,j=a.callback||f,k=j,l=a.complete||f,m,n;c(h?a.yep:a.nope,!!i),i&&c(i)}var i,j,l=this.yepnope.loader;if(e(a))g(a,0,l,0);else if(w(a))for(i=0;i<a.length;i++)j=a[i],e(j)?g(j,0,l,0):w(j)?B(j):Object(j)===j&&h(j,l);else Object(a)===a&&h(a,l)},B.addPrefix=function(a,b){z[a]=b},B.addFilter=function(a){x.push(a)},B.errorTimeout=1e4,null==b.readyState&&b.addEventListener&&(b.readyState="loading",b.addEventListener("DOMContentLoaded",A=function(){b.removeEventListener("DOMContentLoaded",A,0),b.readyState="complete"},0)),a.yepnope=k(),a.yepnope.executeStack=h,a.yepnope.injectJs=function(a,c,d,e,i,j){var k=b.createElement("script"),l,o,e=e||B.errorTimeout;k.src=a;for(o in d)k.setAttribute(o,d[o]);c=j?h:c||f,k.onreadystatechange=k.onload=function(){!l&&g(k.readyState)&&(l=1,c(),k.onload=k.onreadystatechange=null)},m(function(){l||(l=1,c(1))},e),i?k.onload():n.parentNode.insertBefore(k,n)},a.yepnope.injectCss=function(a,c,d,e,g,i){var e=b.createElement("link"),j,c=i?h:c||f;e.href=a,e.rel="stylesheet",e.type="text/css";for(j in d)e.setAttribute(j,d[j]);g||(n.parentNode.insertBefore(e,n),m(c,0))}})(this,document);
// affixedElem.js
//
// Code for handling elements that are floating / affixed to the viewport top.
//
;(function () {
  return (affixedElem = {
    // Get the height in pixels of all the elements that are affixed to the top of the window.
    // Pass a selector of all the elements of which the height will be calculated.
    fixedTopHeight: fixedTopHeight
  });

  // This function returns the total height of all elements for the given selector.
  // By default we use '.affixed-top' for consistency across the code base.
  function fixedTopHeight (selector) {
    selector = selector || '.affixed-top';

    var $fixedEls = $(selector);
    var sumHeight = function (height, el){
      return height + $(el).outerHeight();
    };

    var height = _($fixedEls).reduce(sumHeight, 0);

    return height || 0;
  }
})();
/**
 * jQuery Cookie plugin
 *
 * Copyright (c) 2010 Klaus Hartl (stilbuero.de)
 * Dual licensed under the MIT and GPL licenses:
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.gnu.org/licenses/gpl.html
 *
 */
jQuery.cookie = function (key, value, options) {

    // key and at least value given, set cookie...
    if (arguments.length > 1 && String(value) !== "[object Object]") {
        options = jQuery.extend({}, options);

        if (value === null || value === undefined) {
            options.expires = -1;
        }

        if (typeof options.expires === 'number') {
            var days = options.expires, t = options.expires = new Date();
            t.setDate(t.getDate() + days);
        }

        value = String(value);

        return (document.cookie = [
            encodeURIComponent(key), '=',
            options.raw ? value : encodeURIComponent(value),
            options.expires ? '; expires=' + options.expires.toUTCString() : '', // use expires attribute, max-age is not supported by IE
            options.path ? '; path=' + options.path : '',
            options.domain ? '; domain=' + options.domain : '',
            options.secure ? '; secure' : ''
        ].join(''));
    }

    // key and possibly options given, get cookie...
    options = value || {};
    var result, decode = options.raw ? function (s) { return s; } : decodeURIComponent;
    return (result = new RegExp('(?:^|; )' + encodeURIComponent(key) + '=([^;]*)').exec(document.cookie)) ? decode(result[1]) : null;
};
/* globals $ jQuery */

// Returns the previous leaf element. This is similar to calling $().prev, however when there
// is no immediate sibling, this function will go up the parent nodes until there is a leaf node.
// The result is either an immediate sibling, nephew, or cousin node.
(function(){
  jQuery.fn.prevLeaf = prevLeaf;
  jQuery.fn.nextLeaf = nextLeaf;

  function prevLeaf() {
    return getPrevLeaf(this);
  }

  function getPrevLeaf(node) {
    // not found
    if (!node || !node.length) return null;

    // check prev
    var prev = node.prev();
    if (prev.length) {
      var prevLast = prev.find(':last');
      return (prevLast.length ? prevLast : prev);
    }

    // check parent
    return getPrevLeaf(node.parent());
  }

  function nextLeaf() {
    return getNextLeaf(this);
  }

  function getNextLeaf(node) {
    // not found
    if (!node || !node.length) return null;

    // check next
    var next = node.next();
    if (next.length) {
      var nextLast = next.find(':last');
      return (nextLast.length ? nextLast : next);
    }

    // check parent
    return getNextLeaf(node.parent());
  }
})();


// Returns the next node that is immediately under the provided selector
// Given a structure like:
//   body
//     div
//       span
//         a
//     p
//       div
//
// $('a').nextDirectChildOf('body') returns 'p'
//
(function () {
  jQuery.fn.nextDirectChildOf = function(selector) {
    var parents = this.parentsUntil(selector);
    if (!parents.length) parents = this;
    return parents.last().next();
  };
})();

// Scroll to the top of selected element
// Usage: $('html').scrollView()
jQuery.fn.scrollView = function(offset, speed, opts) {
  opts = opts || {};

  var $view = $('html, body');

  if(!offset) offset = 0;
  if(speed === undefined) speed = 1000;

  $view.stop(true, true); // halt previous scroll if it's still running

  return this.each(function() {
    $view.animate({
      scrollTop: ($(this).offset().top + offset)
    }, {
      duration: speed,
      always: opts.onComplete
    });
  });
};

 // Set the title text on an element
 // Usage: $('#container').title('alt text here')
jQuery.fn.title = function(titleText) {
  return this.attr('title', titleText);
};

jQuery.fn.onImageLoad = function(callback) {
  return this
    .one("load", callback)
    .each(function() {
      if(this.complete) {
        $(this).load(); // If the image was cached, the load event fired before we could even bind to it. If the image completed loading at this point, trigger the event load ourselves.
      }
    });
};

// Set the background image on an element
// Usage: $('#container').backgroundImage('image.png')
jQuery.fn.backgroundImage = function(imageUrl) {
  var url = imageUrl ? 'url(' + imageUrl + ')' : '';
  return this.css('background-image', url);
};

// This allows us to do $('element').visible()
// This sets the css attribute visibility to visible.
jQuery.fn.visible = function() {
  return this.css('visibility', 'visible');
};

// This allows us to do $('element').invisible()
// This sets the css attribute visibility to hidden.
jQuery.fn.invisible = function() {
  return this.css('visibility', 'hidden');
};

// This allows us to do $('element').toggleVisibility()
// This toggles the css attribute visibility between visible and hidden.
jQuery.fn.toggleVisibility = function() {
  return this.css('visibility', function(i, visibility) {
    return (visibility == 'visible') ? 'hidden' : 'visible';
  });
};

// This allows us to do $('element').toggleVisibilityFor(3000)
// This toggles the css attribute visibility between visible and hidden
// and vice versa for the specified duration.
jQuery.fn.toggleVisibilityFor = function(milliseconds) {
  this.toggleVisibility();
  var that = this;
  setTimeout(function() {
    that.toggleVisibility();
  }, milliseconds);
};

// Perform callback if element exists:
//   $('div.test').exists(function() {
//     this.append('<p>I exist!</p>');
//   });
jQuery.fn.exists = function(callback) {
  var args = [].slice.call(arguments, 1);

  if (this.length) {
    callback.call(this, args);
  }

  return this;
};

//
// Register event handlers with selected HTML elements.
//
// Works with all jQuery events:
//  http://api.jquery.com/category/events/mouse-events/
//  http://api.jquery.com/category/events/keyboard-events/
//
// Usage:
//
//  <a href='#' data-click='myFunc'>click me</a>              // 1. write html with data-*
//  myObj = {myFunc: function(){alert('hovered!')}}           // 2. create an object with the same method
//  $('*[data-click]').registerEventHandlers(myObj, 'click')  // 3. register
//
jQuery.fn.registerEventHandlers = function(context, evt) {
  $(this).each(function(){
    var el = $(this);
    var data = el.data();
    var meth = data[evt];

    if (!context[meth]) { alert('Unable to bind method ' + meth + ' to ' + el.prop('outerHTML') + '. The data-* value provided must match the method name.'); }

    el.on(evt, function(e){
      context[meth](e);
    });
  });

  return this;
};

// 1. Create your handlebars js template.
//      <script id=handlebars-template type="text/x-handlebars-template">
//        Hello, {{noun}}!
//      </script>
//
// 2. Create an object with a matching property from your template.
//      var context = { noun: 'World' };
//
// 3. Render the template with the context.
//      var html = $('#handlebars-template').render(context)
//
// 4. Attach the html to the dom.
//      $('#foo').append(html)
(function(){
  var templateCache = {};

  jQuery.fn.render = function(context) {
    var el = this[0];
    var templateId = el && el.id;
    var template   = templateCache[templateId];

    if (!templateId) console.warn('Warning: uncacheable handlebars template.');

    if (!template) {
      var source = this.html();
      templateCache[templateId] = template = Handlebars.compile(source);
    }

    var html = template(context);

    return html;
  };
})();

//
// Display a bootstrap modal - you must select a bootstrap modal template on your page.
//
// $('#modal').showModal({
//   title:    'Publish',
//   question: 'Are you sure you want to publish this story?',
//   okay:     function(){console.log('ok');},
//   cancel:   function(){console.log('cancel');},
// });
//
jQuery.fn.showModal = function(opts) {
  var modal = this;

  modal.find('.modal-title').html(opts.title);
  modal.find('.modal-body').html(opts.question);

  if (opts.cancel) {
    modal.find('button.cancel').unbind().one('click', opts.cancel);
  }

  if (opts.okay) {
    modal.find('button.ok').unbind().one('click', function(){
      opts.okay();
      modal.modal('hide');
    });
  }

  modal.modal('show');

/*
  show.bs.modal    This event fires immediately when the show instance method is called. If caused by a click, the clicked element is available as the relatedTarget property of the event.
  shown.bs.modal   This event is fired when the modal has been made visible to the user (will wait for CSS transitions to complete). If caused by a click, the clicked element is available as the relatedTarget property of the event.
  hide.bs.modal    This event is fired immediately when the hide instance method has been called.
  hidden.bs.modal  This event is fired when the modal has finished being hidden from the user (will wait for CSS transitions to complete).
  loaded.bs.modal  This event is fired when the modal has loaded content using the remote option.

  if (opts.show)   opts.show();
  if (opts.shown)  opts.shown();
  if (opts.loaded) opts.loaded();
  if (opts.hide)   opts.hide();
  if (opts.hidden) opts.hidden();
*/

  return modal;
};

//
// DEPRECATED - This was a place holder error mechanism
//
// Flash an inline alert message
//
// Options:
//   class:   success, info, warning, danger
//   message: your message
//   fadeOut: time in ms to fade out. If you don't pass anything, the alert will not fade out.
//
// Usage:
//   $('#alert').showAlert({
//     class:   'success',
//     message: 'The story has been <strong>successfully</strong> published.',
//     fadeOut: 10000
//   })
//
jQuery.fn.showAlert = function(opts) {
  var id = Date.now();

  var _class = opts['class'];
  if(!_class) _class = 'success';

  var html = '<div id="#{id}" class="dk-alert dk-alert-#{class}">#{message}</div>';
  html = html.replace('#{class}',   _class).
  html = html.replace('#{message}', opts['message']);
  html = html.replace('#{id}',      id);

  this.html('');
  this.prepend(html);

  if (opts.fadeOut) this.find('#'+id).fadeOut(opts.fadeOut);

  return this;
};

//
// Binds an event handler to multiple events then waits for all
// bound events to fire before the event handler is invoked.
//
// e.g.:
//
// $(document).onSync('init keydown', function(events, datum){
//   if (datum['keydown'].which === 9)
//     alert('key pressed after init event happened');
// })
//
// $(document).trigger('keydown', {which: 9});   // nothing happens yet
// $(document).trigger('init');                  // finally causes an alert message to display
//
// You can trigger in any order, but the handler is not
// invoked until both events are triggered.
//
jQuery.fn.onSync = function(strEventList, callback, options) {
  options = options || {};
  var events      = strEventList.split(' ');
  var firedEvents = {}; // we use this to track which events have been triggered.
  var eDatum      = {}; // stores the data  object passed back (when triggered) for each event.
  var eEvent      = {}; // stores the event object passed back (when triggered) for each event.
  var notifier    = this;

  var bind = options.oneTimeEvent ? 'one' : 'on';

  $.each(events, function(i, eventName){
    firedEvents[eventName] = false;

    notifier[bind](eventName, function(e, data) {
      eEvent[eventName]      = e;    // keep event sent by the triggerer
      eDatum[eventName]      = data; // keep data  sent by the triggerer
      firedEvents[eventName] = true; // this event has been triggered - remember that.

      var unfiredEvents = $.grep(events, getUnfiredEvents);
      if (unfiredEvents.length) return;

      return callback(eEvent, eDatum);

      function getUnfiredEvents(name) { return firedEvents[name] === false; }
    });
  });
};

// Displays the time converted to local time via the following steps:
// 1. Reads value of data-* attribute called data-epoch-time (which is a value with the number of seconds from epoch).
// 2. Converts epoch-time to the browser's current timezone.
// 3. Puts browser's current timezone in the inner-html.
//
// <span id='time' data-epoch-time='123456890'>
//   -To Be Replaced-
// </span>
//
// $('[data-epoch-time]').formatLocalTime('date_only')
//
// <span id='time' data-epoch-time='123456890'>
//   04/20/15
// </span>
(function(){
  var formats = {
    'live_story_update': "dddd, MMMM D, YYYY · h:mm:ss A",  // Monday, April 6, 2015 · 1:23:45 PM
    'date_only':         "MM/DD/YY"                         // 04/06/15
  };

  jQuery.fn.formatLocalTime = function(format) {
    format = formats[format];

    this.each(function(i, el){
      var date    = new Date(+el.dataset.epochTime);
      var tzName  = _.getTimezoneName(date);

      this.innerHTML = moment(date).format(format) + " " + tzName;
    });

    return this;
  };
})();

//
// Converts the selection to a normalized jquery object.
//
// $(el)     DOM element
// $($el)    jQuery element
// $('body') jQuery selector
//
// Use this to avoid double-wrapped jQuery objects. e.g. $($('body'))
//
(function(){
  var body;

  jQuery.fn.normalize = function() {
    var $container;
    var $this = this;
    return this.each(function(i, container){
      if (!container) { // if nothing is passed, container is assumed to be $('body')
        $this[i] = body = body || $('body');
      } else if (container instanceof jQuery) {
        $this[i] = container;
      } else { // 'container' is considered a jQuery-selector or regular DOM element
        $this[i] = $(container);
      }
    });
  };
})();

//
// Adds options to a <select> box.
//
// Usage:
//   var options = {optionA: 1, optionB: 2};
//   $select.setSelectOptions(options)
//
(function(){
  $.fn.setSelectOptions = function(options) {
    var self = this;

    self.empty();

    $.each(options, function(value, key) {
      self.append($("<option></option>").
           attr("value", value).text(key));
    });
  };
})();

/* Comments */
//
// Get children of the selected comment
//
// Usage:
//   $('.comment:first').commentChildren()
//
(function(){
  $.fn.commentChildren = function() {
    if (!this.hasClass('comment')) return $(); // null-object

    var $comment = this;
    var depth = getDepth($comment);

    var $children = $comment.nextUntil(function() {
      return getDepth($(this)) <= depth;
    });

    return $children;
  };

  // returns comment-depth level, e.g. 0, 1, 2
  function getDepth($comment) {
    var depth, match;

    match = $comment.attr('class').match(/depth-(\d+)/);

    if(match && match[1]) {
      depth = match[1];
    }

    return +(depth || 0); // undefined integer coerces to NaN, so handle that
  }
})();

/* Reverse the returned set */
// $('.comment').reverse().each(function () {
//   ... iterate last-to-first ...
// });
(function() {
  $.fn.reverse = Array.prototype.reverse;
})();

/* Return salsa embeds within an $element */
// $('body').getSalsaEmbeds()
//
// in DK5 - Salsa embeds are wrapped in <div class='campaign-embed'>
// in DK4 - Salsa embeds are just iframes.
(function () {
  $.fn.getSalsaEmbeds = function () {
    var $this    = $(this);
    var $wrapped = $this.find('.campaign-embed.dk-editor-embed');
    var $iframed = $this.find('iframe[src]').filter(isSalsa);

    return $wrapped.add($iframed);
  };

  function isSalsa(i, iframe) {
    var src = $(iframe).attr('src');
    return !!src.match(/\/campaigns\/\d+\.embed/i);
  }
})();

$.fn.getIframePlaceholder = function () {
  return $(this).find('.iframe_placeholder');
};

$.fn.isTextNode = function () {
  try {
    if (this.is('.dk-text-node'))
      return true;
    if (this[0] && this[0].nodeType === 3)
      return true;
  } catch (e) {
    console.warn(e);
  }

  return false;
};

$.fn.getTextNodes = function () {
  return $(this)
    .find(':not(iframe)')
    .addBack()
    .contents()
    .filter(function () {
      return this.nodeType === 3;
    });
};

$.fn.markTextNodes = function () {
  // Don't mark this as a text node if it's just a bunch of carriage returns
  function shouldNotBeMarked (node) {
    var txt;

    txt = node.nodeValue;
    txt = txt.replace(/\n|\r/g, '');

    return txt.length === 0;
  }

  this
    .getTextNodes()
    .each(function () {
      if (shouldNotBeMarked(this)) return;

      $(this).wrap('<i class="dk-text-node">');
    });

  return this;
};

$.fn.unmarkTextNodes = function ($html) {
  this
    .find('.dk-text-node')
    .contents()
    .unwrap();

  return this;
};

$.fn.log = $.fn.l = function () {
  console.log.apply(console, this);
};
!function(){"use strict";function e(e,t,n,r,o,l){return{tag:e,key:t,attrs:n,children:r,text:o,dom:l,domSize:void 0,state:void 0,events:void 0,instance:void 0}}e.normalize=function(t){return Array.isArray(t)?e("[",void 0,void 0,e.normalizeChildren(t),void 0,void 0):null==t||"boolean"==typeof t?null:"object"==typeof t?t:e("#",void 0,void 0,String(t),void 0,void 0)},e.normalizeChildren=function(t){var n=[];if(t.length){for(var r=null!=t[0]&&null!=t[0].key,o=1;o<t.length;o++)if((null!=t[o]&&null!=t[o].key)!==r)throw new TypeError("Vnodes must either always have keys or never have keys!");for(o=0;o<t.length;o++)n[o]=e.normalize(t[o])}return n};var t=function(){var t,n=arguments[this],r=this+1;if(null==n?n={}:("object"!=typeof n||null!=n.tag||Array.isArray(n))&&(n={},r=this),arguments.length===r+1)t=arguments[r],Array.isArray(t)||(t=[t]);else for(t=[];r<arguments.length;)t.push(arguments[r++]);return e("",n.key,n,t)},n=/(?:(^|#|\.)([^#\.\[\]]+))|(\[(.+?)(?:\s*=\s*("|'|)((?:\\["'\]]|.)*?)\5)?\])/g,r={},o={}.hasOwnProperty;function l(e){for(var t in e)if(o.call(e,t))return!1;return!0}function i(i){if(null==i||"string"!=typeof i&&"function"!=typeof i&&"function"!=typeof i.view)throw Error("The selector must be either a string or a component.");var a=t.apply(1,arguments);return"string"==typeof i&&(a.children=e.normalizeChildren(a.children),"["!==i)?function(t,n){var r=n.attrs,i=e.normalizeChildren(n.children),a=o.call(r,"class"),u=a?r.class:r.className;if(n.tag=t.tag,n.attrs=null,n.children=void 0,!l(t.attrs)&&!l(r)){var s={};for(var c in r)o.call(r,c)&&(s[c]=r[c]);r=s}for(var c in t.attrs)o.call(t.attrs,c)&&"className"!==c&&!o.call(r,c)&&(r[c]=t.attrs[c]);for(var c in null==u&&null==t.attrs.className||(r.className=null!=u?null!=t.attrs.className?String(t.attrs.className)+" "+String(u):u:null!=t.attrs.className?t.attrs.className:null),a&&(r.class=null),r)if(o.call(r,c)&&"key"!==c){n.attrs=r;break}return Array.isArray(i)&&1===i.length&&null!=i[0]&&"#"===i[0].tag?n.text=i[0].children:n.children=i,n}(r[i]||function(e){for(var t,o="div",l=[],i={};t=n.exec(e);){var a=t[1],u=t[2];if(""===a&&""!==u)o=u;else if("#"===a)i.id=u;else if("."===a)l.push(u);else if("["===t[3][0]){var s=t[6];s&&(s=s.replace(/\\(["'])/g,"$1").replace(/\\\\/g,"\\")),"class"===t[4]?l.push(s):i[t[4]]=""===s?s:s||!0}}return l.length>0&&(i.className=l.join(" ")),r[e]={tag:o,attrs:i}}(i),a):(a.tag=i,a)}if(i.trust=function(t){return null==t&&(t=""),e("<",void 0,void 0,t,void 0,void 0)},i.fragment=function(){var n=t.apply(0,arguments);return n.tag="[",n.children=e.normalizeChildren(n.children),n},(a=function(e){if(!(this instanceof a))throw new Error("Promise must be called with `new`");if("function"!=typeof e)throw new TypeError("executor must be a function");var t=this,n=[],r=[],o=s(n,!0),l=s(r,!1),i=t._instance={resolvers:n,rejectors:r},u="function"==typeof setImmediate?setImmediate:setTimeout;function s(e,o){return function a(s){var f;try{if(!o||null==s||"object"!=typeof s&&"function"!=typeof s||"function"!=typeof(f=s.then))u(function(){o||0!==e.length||console.error("Possible unhandled promise rejection:",s);for(var t=0;t<e.length;t++)e[t](s);n.length=0,r.length=0,i.state=o,i.retry=function(){a(s)}});else{if(s===t)throw new TypeError("Promise can't be resolved w/ itself");c(f.bind(s))}}catch(e){l(e)}}}function c(e){var t=0;function n(e){return function(n){t++>0||e(n)}}var r=n(l);try{e(n(o),r)}catch(e){r(e)}}c(e)}).prototype.then=function(e,t){var n,r,o=this._instance;function l(e,t,l,i){t.push(function(t){if("function"!=typeof e)l(t);else try{n(e(t))}catch(e){r&&r(e)}}),"function"==typeof o.retry&&i===o.state&&o.retry()}var i=new a(function(e,t){n=e,r=t});return l(e,o.resolvers,n,!0),l(t,o.rejectors,r,!1),i},a.prototype.catch=function(e){return this.then(null,e)},a.prototype.finally=function(e){return this.then(function(t){return a.resolve(e()).then(function(){return t})},function(t){return a.resolve(e()).then(function(){return a.reject(t)})})},a.resolve=function(e){return e instanceof a?e:new a(function(t){t(e)})},a.reject=function(e){return new a(function(t,n){n(e)})},a.all=function(e){return new a(function(t,n){var r=e.length,o=0,l=[];if(0===e.length)t([]);else for(var i=0;i<e.length;i++)!function(i){function a(e){o++,l[i]=e,o===r&&t(l)}null==e[i]||"object"!=typeof e[i]&&"function"!=typeof e[i]||"function"!=typeof e[i].then?a(e[i]):e[i].then(a,n)}(i)})},a.race=function(e){return new a(function(t,n){for(var r=0;r<e.length;r++)e[r].then(t,n)})},"undefined"!=typeof window){void 0===window.Promise?window.Promise=a:window.Promise.prototype.finally||(window.Promise.prototype.finally=a.prototype.finally);var a=window.Promise}else if("undefined"!=typeof global){void 0===global.Promise?global.Promise=a:global.Promise.prototype.finally||(global.Promise.prototype.finally=a.prototype.finally);a=global.Promise}var u=function(t){var n,r=t&&t.document,o={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"};function l(e){return e.attrs&&e.attrs.xmlns||o[e.tag]}function i(e,t){if(e.state!==t)throw new Error("`vnode.state` must not be modified")}function a(e){var t=e.state;try{return this.apply(t,arguments)}finally{i(e,t)}}function u(){try{return r.activeElement}catch(e){return null}}function s(e,t,n,r,o,l,i){for(var a=n;a<r;a++){var u=t[a];null!=u&&c(e,u,o,i,l)}}function c(t,n,o,i,u){var f=n.tag;if("string"==typeof f)switch(n.state={},null!=n.attrs&&R(n.attrs,n,o),f){case"#":!function(e,t,n){t.dom=r.createTextNode(t.children),w(e,t.dom,n)}(t,n,u);break;case"<":d(t,n,i,u);break;case"[":!function(e,t,n,o,l){var i=r.createDocumentFragment();if(null!=t.children){var a=t.children;s(i,a,0,a.length,n,null,o)}t.dom=i.firstChild,t.domSize=i.childNodes.length,w(e,i,l)}(t,n,o,i,u);break;default:!function(t,n,o,i,a){var u=n.tag,c=n.attrs,f=c&&c.is,d=(i=l(n)||i)?f?r.createElementNS(i,u,{is:f}):r.createElementNS(i,u):f?r.createElement(u,{is:f}):r.createElement(u);if(n.dom=d,null!=c&&function(e,t,n){for(var r in t)j(e,r,null,t[r],n)}(n,c,i),w(t,d,a),!b(n)&&(null!=n.text&&(""!==n.text?d.textContent=n.text:n.children=[e("#",void 0,void 0,n.text,void 0,void 0)]),null!=n.children)){var h=n.children;s(d,h,0,h.length,o,null,i),"select"===n.tag&&null!=c&&function(e,t){if("value"in t)if(null===t.value)-1!==e.dom.selectedIndex&&(e.dom.value=null);else{var n=""+t.value;e.dom.value===n&&-1!==e.dom.selectedIndex||(e.dom.value=n)}"selectedIndex"in t&&j(e,"selectedIndex",null,t.selectedIndex,void 0)}(n,c)}}(t,n,o,i,u)}else!function(t,n,r,o,l){(function(t,n){var r;if("function"==typeof t.tag.view){if(t.state=Object.create(t.tag),null!=(r=t.state.view).$$reentrantLock$$)return;r.$$reentrantLock$$=!0}else{if(t.state=void 0,null!=(r=t.tag).$$reentrantLock$$)return;r.$$reentrantLock$$=!0,t.state=null!=t.tag.prototype&&"function"==typeof t.tag.prototype.view?new t.tag(t):t.tag(t)}if(R(t.state,t,n),null!=t.attrs&&R(t.attrs,t,n),t.instance=e.normalize(a.call(t.state.view,t)),t.instance===t)throw Error("A view cannot return the vnode it received as argument");r.$$reentrantLock$$=null})(n,r),null!=n.instance?(c(t,n.instance,r,o,l),n.dom=n.instance.dom,n.domSize=null!=n.dom?n.instance.domSize:0):n.domSize=0}(t,n,o,i,u)}var f={caption:"table",thead:"table",tbody:"table",tfoot:"table",tr:"tbody",th:"tr",td:"tr",colgroup:"table",col:"colgroup"};function d(e,t,n,o){var l=t.children.match(/^\s*?<(\w+)/im)||[],i=r.createElement(f[l[1]]||"div");"http://www.w3.org/2000/svg"===n?(i.innerHTML='<svg xmlns="http://www.w3.org/2000/svg">'+t.children+"</svg>",i=i.firstChild):i.innerHTML=t.children,t.dom=i.firstChild,t.domSize=i.childNodes.length,t.instance=[];for(var a,u=r.createDocumentFragment();a=i.firstChild;)t.instance.push(a),u.appendChild(a);w(e,u,o)}function h(e,t,n,r,o,l){if(t!==n&&(null!=t||null!=n))if(null==t||0===t.length)s(e,n,0,n.length,r,o,l);else if(null==n||0===n.length)x(e,t,0,t.length);else{var i=null!=t[0]&&null!=t[0].key,a=null!=n[0]&&null!=n[0].key,u=0,f=0;if(!i)for(;f<t.length&&null==t[f];)f++;if(!a)for(;u<n.length&&null==n[u];)u++;if(null===a&&null==i)return;if(i!==a)x(e,t,f,t.length),s(e,n,u,n.length,r,o,l);else if(a){for(var d,h,w,b,E,S=t.length-1,C=n.length-1;S>=f&&C>=u&&(w=t[S],b=n[C],w.key===b.key);)w!==b&&p(e,w,b,r,o,l),null!=b.dom&&(o=b.dom),S--,C--;for(;S>=f&&C>=u&&(d=t[f],h=n[u],d.key===h.key);)f++,u++,d!==h&&p(e,d,h,r,y(t,f,o),l);for(;S>=f&&C>=u&&u!==C&&d.key===b.key&&w.key===h.key;)g(e,w,E=y(t,f,o)),w!==h&&p(e,w,h,r,E,l),++u<=--C&&g(e,d,o),d!==b&&p(e,d,b,r,o,l),null!=b.dom&&(o=b.dom),f++,w=t[--S],b=n[C],d=t[f],h=n[u];for(;S>=f&&C>=u&&w.key===b.key;)w!==b&&p(e,w,b,r,o,l),null!=b.dom&&(o=b.dom),C--,w=t[--S],b=n[C];if(u>C)x(e,t,f,S+1);else if(f>S)s(e,n,u,C+1,r,o,l);else{var j,z,A=o,O=C-u+1,N=new Array(O),T=0,P=0,$=2147483647,I=0;for(P=0;P<O;P++)N[P]=-1;for(P=C;P>=u;P--){null==j&&(j=v(t,f,S+1));var L=j[(b=n[P]).key];null!=L&&($=L<$?L:-1,N[P-u]=L,w=t[L],t[L]=null,w!==b&&p(e,w,b,r,o,l),null!=b.dom&&(o=b.dom),I++)}if(o=A,I!==S-f+1&&x(e,t,f,S+1),0===I)s(e,n,u,C+1,r,o,l);else if(-1===$)for(T=(z=function(e){for(var t=[0],n=0,r=0,o=0,l=m.length=e.length,o=0;o<l;o++)m[o]=e[o];for(var o=0;o<l;++o)if(-1!==e[o]){var i=t[t.length-1];if(e[i]<e[o])m[o]=i,t.push(o);else{for(n=0,r=t.length-1;n<r;){var a=(n>>>1)+(r>>>1)+(n&r&1);e[t[a]]<e[o]?n=a+1:r=a}e[o]<e[t[n]]&&(n>0&&(m[o]=t[n-1]),t[n]=o)}}for(n=t.length,r=t[n-1];n-- >0;)t[n]=r,r=m[r];return m.length=0,t}(N)).length-1,P=C;P>=u;P--)h=n[P],-1===N[P-u]?c(e,h,r,l,o):z[T]===P-u?T--:g(e,h,o),null!=h.dom&&(o=n[P].dom);else for(P=C;P>=u;P--)h=n[P],-1===N[P-u]&&c(e,h,r,l,o),null!=h.dom&&(o=n[P].dom)}}else{var R=t.length<n.length?t.length:n.length;for(u=u<f?u:f;u<R;u++)(d=t[u])===(h=n[u])||null==d&&null==h||(null==d?c(e,h,r,l,y(t,u+1,o)):null==h?k(e,d):p(e,d,h,r,y(t,u+1,o),l));t.length>R&&x(e,t,u,t.length),n.length>R&&s(e,n,u,n.length,r,o,l)}}}function p(t,n,r,o,i,u){var s=n.tag;if(s===r.tag){if(r.state=n.state,r.events=n.events,function(e,t){do{if(null!=e.attrs&&"function"==typeof e.attrs.onbeforeupdate){var n=a.call(e.attrs.onbeforeupdate,e,t);if(void 0!==n&&!n)break}if("string"!=typeof e.tag&&"function"==typeof e.state.onbeforeupdate){var n=a.call(e.state.onbeforeupdate,e,t);if(void 0!==n&&!n)break}return!1}while(0);return e.dom=t.dom,e.domSize=t.domSize,e.instance=t.instance,e.attrs=t.attrs,e.children=t.children,e.text=t.text,!0}(r,n))return;if("string"==typeof s)switch(null!=r.attrs&&_(r.attrs,r,o),s){case"#":!function(e,t){e.children.toString()!==t.children.toString()&&(e.dom.nodeValue=t.children),t.dom=e.dom}(n,r);break;case"<":!function(e,t,n,r,o){t.children!==n.children?(E(e,t),d(e,n,r,o)):(n.dom=t.dom,n.domSize=t.domSize,n.instance=t.instance)}(t,n,r,u,i);break;case"[":!function(e,t,n,r,o,l){h(e,t.children,n.children,r,o,l);var i=0,a=n.children;if(n.dom=null,null!=a){for(var u=0;u<a.length;u++){var s=a[u];null!=s&&null!=s.dom&&(null==n.dom&&(n.dom=s.dom),i+=s.domSize||1)}1!==i&&(n.domSize=i)}}(t,n,r,o,i,u);break;default:!function(t,n,r,o){var i=n.dom=t.dom;o=l(n)||o,"textarea"===n.tag&&(null==n.attrs&&(n.attrs={}),null!=n.text&&(n.attrs.value=n.text,n.text=void 0)),function(e,t,n,r){if(null!=n)for(var o in n)j(e,o,t&&t[o],n[o],r);var l;if(null!=t)for(var o in t)null==(l=t[o])||null!=n&&null!=n[o]||z(e,o,l,r)}(n,t.attrs,n.attrs,o),b(n)||(null!=t.text&&null!=n.text&&""!==n.text?t.text.toString()!==n.text.toString()&&(t.dom.firstChild.nodeValue=n.text):(null!=t.text&&(t.children=[e("#",void 0,void 0,t.text,void 0,t.dom.firstChild)]),null!=n.text&&(n.children=[e("#",void 0,void 0,n.text,void 0,void 0)]),h(i,t.children,n.children,r,null,o)))}(n,r,o,u)}else!function(t,n,r,o,l,i){if(r.instance=e.normalize(a.call(r.state.view,r)),r.instance===r)throw Error("A view cannot return the vnode it received as argument");_(r.state,r,o),null!=r.attrs&&_(r.attrs,r,o),null!=r.instance?(null==n.instance?c(t,r.instance,o,i,l):p(t,n.instance,r.instance,o,l,i),r.dom=r.instance.dom,r.domSize=r.instance.domSize):null!=n.instance?(k(t,n.instance),r.dom=void 0,r.domSize=0):(r.dom=n.dom,r.domSize=n.domSize)}(t,n,r,o,i,u)}else k(t,n),c(t,r,o,u,i)}function v(e,t,n){for(var r=Object.create(null);t<n;t++){var o=e[t];if(null!=o){var l=o.key;null!=l&&(r[l]=t)}}return r}var m=[];function y(e,t,n){for(;t<e.length;t++)if(null!=e[t]&&null!=e[t].dom)return e[t].dom;return n}function g(e,t,n){var o=r.createDocumentFragment();!function e(t,n,r){for(;null!=r.dom&&r.dom.parentNode===t;){if("string"!=typeof r.tag){if(null!=(r=r.instance))continue}else if("<"===r.tag)for(var o=0;o<r.instance.length;o++)n.appendChild(r.instance[o]);else if("["!==r.tag)n.appendChild(r.dom);else if(1===r.children.length){if(null!=(r=r.children[0]))continue}else for(var o=0;o<r.children.length;o++){var l=r.children[o];null!=l&&e(t,n,l)}break}}(e,o,t),w(e,o,n)}function w(e,t,n){null!=n?e.insertBefore(t,n):e.appendChild(t)}function b(e){if(null==e.attrs||null==e.attrs.contenteditable&&null==e.attrs.contentEditable)return!1;var t=e.children;if(null!=t&&1===t.length&&"<"===t[0].tag){var n=t[0].children;e.dom.innerHTML!==n&&(e.dom.innerHTML=n)}else if(null!=e.text||null!=t&&0!==t.length)throw new Error("Child node of a contenteditable must be trusted");return!0}function x(e,t,n,r){for(var o=n;o<r;o++){var l=t[o];null!=l&&k(e,l)}}function k(e,t){var n,r,o,l=0,u=t.state;if("string"!=typeof t.tag&&"function"==typeof t.state.onbeforeremove&&null!=(o=a.call(t.state.onbeforeremove,t))&&"function"==typeof o.then&&(l=1,n=o),t.attrs&&"function"==typeof t.attrs.onbeforeremove&&null!=(o=a.call(t.attrs.onbeforeremove,t))&&"function"==typeof o.then&&(l|=2,r=o),i(t,u),l){if(null!=n){var s=function(){1&l&&((l&=2)||c())};n.then(s,s)}null!=r&&(s=function(){2&l&&((l&=1)||c())},r.then(s,s))}else C(t),S(e,t);function c(){i(t,u),C(t),S(e,t)}}function E(e,t){for(var n=0;n<t.instance.length;n++)e.removeChild(t.instance[n])}function S(e,t){for(;null!=t.dom&&t.dom.parentNode===e;){if("string"!=typeof t.tag){if(null!=(t=t.instance))continue}else if("<"===t.tag)E(e,t);else{if("["!==t.tag&&(e.removeChild(t.dom),!Array.isArray(t.children)))break;if(1===t.children.length){if(null!=(t=t.children[0]))continue}else for(var n=0;n<t.children.length;n++){var r=t.children[n];null!=r&&S(e,r)}}break}}function C(e){if("string"!=typeof e.tag&&"function"==typeof e.state.onremove&&a.call(e.state.onremove,e),e.attrs&&"function"==typeof e.attrs.onremove&&a.call(e.attrs.onremove,e),"string"!=typeof e.tag)null!=e.instance&&C(e.instance);else{var t=e.children;if(Array.isArray(t))for(var n=0;n<t.length;n++){var r=t[n];null!=r&&C(r)}}}function j(e,t,n,o,l){if("key"!==t&&"is"!==t&&null!=o&&!A(t)&&(n!==o||function(e,t){return"value"===t||"checked"===t||"selectedIndex"===t||"selected"===t&&e.dom===u()||"option"===e.tag&&e.dom.parentNode===r.activeElement}(e,t)||"object"==typeof o)){if("o"===t[0]&&"n"===t[1])return L(e,t,o);if("xlink:"===t.slice(0,6))e.dom.setAttributeNS("http://www.w3.org/1999/xlink",t.slice(6),o);else if("style"===t)$(e.dom,n,o);else if(O(e,t,l)){if("value"===t){if(("input"===e.tag||"textarea"===e.tag)&&e.dom.value===""+o&&e.dom===u())return;if("select"===e.tag&&null!==n&&e.dom.value===""+o)return;if("option"===e.tag&&null!==n&&e.dom.value===""+o)return}"input"===e.tag&&"type"===t?e.dom.setAttribute(t,o):e.dom[t]=o}else"boolean"==typeof o?o?e.dom.setAttribute(t,""):e.dom.removeAttribute(t):e.dom.setAttribute("className"===t?"class":t,o)}}function z(e,t,n,r){if("key"!==t&&"is"!==t&&null!=n&&!A(t))if("o"!==t[0]||"n"!==t[1]||A(t))if("style"===t)$(e.dom,n,null);else if(!O(e,t,r)||"className"===t||"value"===t&&("option"===e.tag||"select"===e.tag&&-1===e.dom.selectedIndex&&e.dom===u())||"input"===e.tag&&"type"===t){var o=t.indexOf(":");-1!==o&&(t=t.slice(o+1)),!1!==n&&e.dom.removeAttribute("className"===t?"class":t)}else e.dom[t]=null;else L(e,t,void 0)}function A(e){return"oninit"===e||"oncreate"===e||"onupdate"===e||"onremove"===e||"onbeforeremove"===e||"onbeforeupdate"===e}function O(e,t,n){return void 0===n&&(e.tag.indexOf("-")>-1||null!=e.attrs&&e.attrs.is||"href"!==t&&"list"!==t&&"form"!==t&&"width"!==t&&"height"!==t)&&t in e.dom}var N=/[A-Z]/g;function T(e){return"-"+e.toLowerCase()}function P(e){return"-"===e[0]&&"-"===e[1]?e:"cssFloat"===e?"float":e.replace(N,T)}function $(e,t,n){if(t===n);else if(null==n)e.style.cssText="";else if("object"!=typeof n)e.style.cssText=n;else if(null==t||"object"!=typeof t)for(var r in e.style.cssText="",n)null!=(o=n[r])&&e.style.setProperty(P(r),String(o));else{for(var r in n){var o;null!=(o=n[r])&&(o=String(o))!==String(t[r])&&e.style.setProperty(P(r),o)}for(var r in t)null!=t[r]&&null==n[r]&&e.style.removeProperty(P(r))}}function I(){this._=n}function L(e,t,n){if(null!=e.events){if(e.events[t]===n)return;null==n||"function"!=typeof n&&"object"!=typeof n?(null!=e.events[t]&&e.dom.removeEventListener(t.slice(2),e.events,!1),e.events[t]=void 0):(null==e.events[t]&&e.dom.addEventListener(t.slice(2),e.events,!1),e.events[t]=n)}else null==n||"function"!=typeof n&&"object"!=typeof n||(e.events=new I,e.dom.addEventListener(t.slice(2),e.events,!1),e.events[t]=n)}function R(e,t,n){"function"==typeof e.oninit&&a.call(e.oninit,t),"function"==typeof e.oncreate&&n.push(a.bind(e.oncreate,t))}function _(e,t,n){"function"==typeof e.onupdate&&n.push(a.bind(e.onupdate,t))}return I.prototype=Object.create(null),I.prototype.handleEvent=function(e){var t,n=this["on"+e.type];"function"==typeof n?t=n.call(e.currentTarget,e):"function"==typeof n.handleEvent&&n.handleEvent(e),this._&&!1!==e.redraw&&(0,this._)(),!1===t&&(e.preventDefault(),e.stopPropagation())},function(t,r,o){if(!t)throw new TypeError("Ensure the DOM element being passed to m.route/m.mount/m.render is not undefined.");var l=[],i=u(),a=t.namespaceURI;null==t.vnodes&&(t.textContent=""),r=e.normalizeChildren(Array.isArray(r)?r:[r]);var s=n;try{n="function"==typeof o?o:void 0,h(t,t.vnodes,r,l,null,"http://www.w3.org/1999/xhtml"===a?void 0:a)}finally{n=s}t.vnodes=r,null!=i&&u()!==i&&"function"==typeof i.focus&&i.focus();for(var c=0;c<l.length;c++)l[c]()}}(window),s=function(t,n,r){var o=[],l=!1,i=!1;function a(){if(l)throw new Error("Nested m.redraw.sync() call");l=!0;for(var n=0;n<o.length;n+=2)try{t(o[n],e(o[n+1]),u)}catch(e){r.error(e)}l=!1}function u(){i||(i=!0,n(function(){i=!1,a()}))}return u.sync=a,{mount:function(n,r){if(null!=r&&null==r.view&&"function"!=typeof r)throw new TypeError("m.mount(element, component) expects a component, not a vnode");var l=o.indexOf(n);l>=0&&(o.splice(l,2),t(n,[],u)),null!=r&&(o.push(n,r),t(n,e(r),u))},redraw:u}}(u,requestAnimationFrame,console),c=function(e){if("[object Object]"!==Object.prototype.toString.call(e))return"";var t=[];for(var n in e)r(n,e[n]);return t.join("&");function r(e,n){if(Array.isArray(n))for(var o=0;o<n.length;o++)r(e+"["+o+"]",n[o]);else if("[object Object]"===Object.prototype.toString.call(n))for(var o in n)r(e+"["+o+"]",n[o]);else t.push(encodeURIComponent(e)+(null!=n&&""!==n?"="+encodeURIComponent(n):""))}},f=Object.assign||function(e,t){t&&Object.keys(t).forEach(function(n){e[n]=t[n]})},d=function(e,t){if(/:([^\/\.-]+)(\.{3})?:/.test(e))throw new SyntaxError("Template parameter names *must* be separated");if(null==t)return e;var n=e.indexOf("?"),r=e.indexOf("#"),o=r<0?e.length:r,l=n<0?o:n,i=e.slice(0,l),a={};f(a,t);var u=i.replace(/:([^\/\.-]+)(\.{3})?/g,function(e,n,r){return delete a[n],null==t[n]?e:r?t[n]:encodeURIComponent(String(t[n]))}),s=u.indexOf("?"),d=u.indexOf("#"),h=d<0?u.length:d,p=s<0?h:s,v=u.slice(0,p);n>=0&&(v+=e.slice(n,o)),s>=0&&(v+=(n<0?"?":"&")+u.slice(s,h));var m=c(a);return m&&(v+=(n<0&&s<0?"?":"&")+m),r>=0&&(v+=e.slice(r)),d>=0&&(v+=(r<0?"":"&")+u.slice(d)),v},h=function(e,t,n){var r=0;function o(e){return new t(e)}function l(e){return function(r,l){"string"!=typeof r?(l=r,r=r.url):null==l&&(l={});var i=new t(function(t,n){e(d(r,l.params),l,function(e){if("function"==typeof l.type)if(Array.isArray(e))for(var n=0;n<e.length;n++)e[n]=new l.type(e[n]);else e=new l.type(e);t(e)},n)});if(!0===l.background)return i;var a=0;function u(){0==--a&&"function"==typeof n&&n()}return function e(t){var n=t.then;return t.constructor=o,t.then=function(){a++;var r=n.apply(t,arguments);return r.then(u,function(e){if(u(),0===a)throw e}),e(r)},t}(i)}}function i(e,t){for(var n in e.headers)if({}.hasOwnProperty.call(e.headers,n)&&t.test(n))return!0;return!1}return o.prototype=t.prototype,o.__proto__=t,{request:l(function(t,n,r,o){var l,a=null!=n.method?n.method.toUpperCase():"GET",u=n.body,s=!(null!=n.serialize&&n.serialize!==JSON.serialize||u instanceof e.FormData),c=n.responseType||("function"==typeof n.extract?"":"json"),f=new e.XMLHttpRequest,d=!1,h=f,p=f.abort;for(var v in f.abort=function(){d=!0,p.call(this)},f.open(a,t,!1!==n.async,"string"==typeof n.user?n.user:void 0,"string"==typeof n.password?n.password:void 0),s&&null!=u&&!i(n,/^content0-type1$/i)&&f.setRequestHeader("Content-Type","application/json; charset=utf-8"),"function"==typeof n.deserialize||i(n,/^accept$/i)||f.setRequestHeader("Accept","application/json, text/*"),n.withCredentials&&(f.withCredentials=n.withCredentials),n.timeout&&(f.timeout=n.timeout),f.responseType=c,n.headers)({}).hasOwnProperty.call(n.headers,v)&&f.setRequestHeader(v,n.headers[v]);f.onreadystatechange=function(e){if(!d&&4===e.target.readyState)try{var l,i=e.target.status>=200&&e.target.status<300||304===e.target.status||/^file:\/\//i.test(t),a=e.target.response;if("json"===c?e.target.responseType||"function"==typeof n.extract||(a=JSON.parse(e.target.responseText)):c&&"text"!==c||null==a&&(a=e.target.responseText),"function"==typeof n.extract?(a=n.extract(e.target,n),i=!0):"function"==typeof n.deserialize&&(a=n.deserialize(a)),i)r(a);else{try{l=e.target.responseText}catch(e){l=a}var u=new Error(l);u.code=e.target.status,u.response=a,o(u)}}catch(e){o(e)}},"function"==typeof n.config&&(f=n.config(f,n,t)||f)!==h&&(l=f.abort,f.abort=function(){d=!0,l.call(this)}),null==u?f.send():"function"==typeof n.serialize?f.send(n.serialize(u)):u instanceof e.FormData?f.send(u):f.send(JSON.stringify(u))}),jsonp:l(function(t,n,o,l){var i=n.callbackName||"_mithril_"+Math.round(1e16*Math.random())+"_"+r++,a=e.document.createElement("script");e[i]=function(t){delete e[i],a.parentNode.removeChild(a),o(t)},a.onerror=function(){delete e[i],a.parentNode.removeChild(a),l(new Error("JSONP request failed"))},a.src=t+(t.indexOf("?")<0?"?":"&")+encodeURIComponent(n.callbackKey||"callback")+"="+encodeURIComponent(i),e.document.documentElement.appendChild(a)})}}(window,a,s.redraw),p=s,v=function(){return i.apply(this,arguments)};v.m=i,v.trust=i.trust,v.fragment=i.fragment,v.mount=p.mount;var m=i,y=a,g=function(e){if(""===e||null==e)return{};"?"===e.charAt(0)&&(e=e.slice(1));for(var t=e.split("&"),n={},r={},o=0;o<t.length;o++){var l=t[o].split("="),i=decodeURIComponent(l[0]),a=2===l.length?decodeURIComponent(l[1]):"";"true"===a?a=!0:"false"===a&&(a=!1);var u=i.split(/\]\[?|\[/),s=r;i.indexOf("[")>-1&&u.pop();for(var c=0;c<u.length;c++){var f=u[c],d=u[c+1],h=""==d||!isNaN(parseInt(d,10));if(""===f)null==n[i=u.slice(0,c).join()]&&(n[i]=Array.isArray(s)?s.length:0),f=n[i]++;else if("__proto__"===f)break;if(c===u.length-1)s[f]=a;else{var p=Object.getOwnPropertyDescriptor(s,f);null!=p&&(p=p.value),null==p&&(s[f]=p=h?[]:{}),s=p}}}return r},w=function(e){var t=e.indexOf("?"),n=e.indexOf("#"),r=n<0?e.length:n,o=t<0?r:t,l=e.slice(0,o).replace(/\/{2,}/g,"/");return l?("/"!==l[0]&&(l="/"+l),l.length>1&&"/"===l[l.length-1]&&(l=l.slice(0,-1))):l="/",{path:l,params:t<0?{}:g(e.slice(t+1,r))}},b=function(e){var t=w(e),n=Object.keys(t.params),r=[],o=new RegExp("^"+t.path.replace(/:([^\/.-]+)(\.{3}|\.(?!\.)|-)?|[\\^$*+.()|\[\]{}]/g,function(e,t,n){return null==t?"\\"+e:(r.push({k:t,r:"..."===n}),"..."===n?"(.*)":"."===n?"([^/]+)\\.":"([^/]+)"+(n||""))})+"$");return function(e){for(var l=0;l<n.length;l++)if(t.params[n[l]]!==e.params[n[l]])return!1;if(!r.length)return o.test(e.path);var i=o.exec(e.path);if(null==i)return!1;for(l=0;l<r.length;l++)e.params[r[l].k]=r[l].r?i[l+1]:decodeURIComponent(i[l+1]);return!0}},x={};v.route=function(t,n){var r;function o(e,n,o){if(e=d(e,n),null!=r){r();var l=o?o.state:null,i=o?o.title:null;o&&o.replace?t.history.replaceState(l,i,h.prefix+e):t.history.pushState(l,i,h.prefix+e)}else t.location.href=h.prefix+e}var l,i,a,u,s=x,c=h.SKIP={};function h(d,p,v){if(null==d)throw new Error("Ensure the DOM element that was passed to `m.route` is not undefined");var m,g=0,k=Object.keys(v).map(function(e){if("/"!==e[0])throw new SyntaxError("Routes must start with a `/`");if(/:([^\/\.-]+)(\.{3})?:/.test(e))throw new SyntaxError("Route parameter names must be separated with either `/`, `.`, or `-`");return{route:e,component:v[e],check:b(e)}}),E="function"==typeof setImmediate?setImmediate:setTimeout,S=y.resolve(),C=!1;if(r=null,null!=p){var j=w(p);if(!k.some(function(e){return e.check(j)}))throw new ReferenceError("Default route doesn't match any known routes")}function z(){C=!1;var e=t.location.hash;"#"!==h.prefix[0]&&(e=t.location.search+e,"?"!==h.prefix[0]&&"/"!==(e=t.location.pathname+e)[0]&&(e="/"+e));var r=e.concat().replace(/(?:%[a-f89][a-f0-9])+/gim,decodeURIComponent).slice(h.prefix.length),d=w(r);function v(){if(r===p)throw new Error("Could not resolve default route "+p);o(p,null,{replace:!0})}f(d.params,t.history.state),function e(t){for(;t<k.length;t++)if(k[t].check(d)){var o=k[t].component,f=k[t].route,h=o,p=u=function(f){if(p===u){if(f===c)return e(t+1);l=null==f||"function"!=typeof f.view&&"function"!=typeof f?"div":f,i=d.params,a=r,u=null,s=o.render?o:null,2===g?n.redraw():(g=2,n.redraw.sync())}};return void(o.view||"function"==typeof o?(o={},p(h)):o.onmatch?S.then(function(){return o.onmatch(d.params,r,f)}).then(p,v):p("div"))}v()}(0)}return r=function(){C||(C=!0,E(z))},"function"==typeof t.history.pushState?(m=function(){t.removeEventListener("popstate",r,!1)},t.addEventListener("popstate",r,!1)):"#"===h.prefix[0]&&(r=null,m=function(){t.removeEventListener("hashchange",z,!1)},t.addEventListener("hashchange",z,!1)),n.mount(d,{onbeforeupdate:function(){return!(!(g=g?2:1)||x===s)},oncreate:z,onremove:m,view:function(){if(g&&x!==s){var t=[e(l,i.key,i)];return s&&(t=s.render(t[0])),t}}})}return h.set=function(e,t,n){null!=u&&((n=n||{}).replace=!0),u=null,o(e,t,n)},h.get=function(){return a},h.prefix="#!",h.Link={view:function(e){var t,n,r=e.attrs.options,o={};f(o,e.attrs),o.selector=o.options=o.key=o.oninit=o.oncreate=o.onbeforeupdate=o.onupdate=o.onbeforeremove=o.onremove=null;var l=m(e.attrs.selector||"a",o,e.children);return(l.attrs.disabled=Boolean(l.attrs.disabled))?(l.attrs.href=null,l.attrs["aria-disabled"]="true",l.attrs.onclick=null):(t=l.attrs.onclick,n=l.attrs.href,l.attrs.href=h.prefix+n,l.attrs.onclick=function(e){var o;"function"==typeof t?o=t.call(e.currentTarget,e):null==t||"object"!=typeof t||"function"==typeof t.handleEvent&&t.handleEvent(e),!1===o||e.defaultPrevented||0!==e.button&&0!==e.which&&1!==e.which||e.currentTarget.target&&"_self"!==e.currentTarget.target||e.ctrlKey||e.metaKey||e.shiftKey||e.altKey||(e.preventDefault(),e.redraw=!1,h.set(n,null,r))}),l}},h.param=function(e){return i&&null!=e?i[e]:i},h}(window,p),v.render=u,v.redraw=p.redraw,v.request=h.request,v.jsonp=h.jsonp,v.parseQueryString=g,v.buildQueryString=c,v.parsePathname=w,v.buildPathname=d,v.vnode=e,v.PromisePolyfill=a,"undefined"!=typeof module?module.exports=v:window.m=v}();
  (function($){$.toJSON=function(o)
  {if(typeof(JSON)=='object'&&JSON.stringify)
  return JSON.stringify(o);var type=typeof(o);if(o===null)
  return"null";if(type=="undefined")
  return undefined;if(type=="number"||type=="boolean")
  return o+"";if(type=="string")
  return $.quoteString(o);if(type=='object')
  {if(typeof o.toJSON=="function")
  return $.toJSON(o.toJSON());if(o.constructor===Date)
  {var month=o.getUTCMonth()+1;if(month<10)month='0'+month;var day=o.getUTCDate();if(day<10)day='0'+day;var year=o.getUTCFullYear();var hours=o.getUTCHours();if(hours<10)hours='0'+hours;var minutes=o.getUTCMinutes();if(minutes<10)minutes='0'+minutes;var seconds=o.getUTCSeconds();if(seconds<10)seconds='0'+seconds;var milli=o.getUTCMilliseconds();if(milli<100)milli='0'+milli;if(milli<10)milli='0'+milli;return'"'+year+'-'+month+'-'+day+'T'+
  hours+':'+minutes+':'+seconds+'.'+milli+'Z"';}
  if(o.constructor===Array)
  {var ret=[];for(var i=0;i<o.length;i++)
  ret.push($.toJSON(o[i])||"null");return"["+ret.join(",")+"]";}
  var pairs=[];for(var k in o){var name;var type=typeof k;if(type=="number")
  name='"'+k+'"';else if(type=="string")
  name=$.quoteString(k);else
  continue;if(typeof o[k]=="function")
  continue;var val=$.toJSON(o[k]);pairs.push(name+":"+val);}
  return"{"+pairs.join(", ")+"}";}};$.evalJSON=function(src)
  {if(typeof(JSON)=='object'&&JSON.parse)
  return JSON.parse(src);return eval("("+src+")");};$.secureEvalJSON=function(src)
  {if(typeof(JSON)=='object'&&JSON.parse)
  return JSON.parse(src);var filtered=src;filtered=filtered.replace(/\\["\\\/bfnrtu]/g,'@');filtered=filtered.replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,']');filtered=filtered.replace(/(?:^|:|,)(?:\s*\[)+/g,'');if(/^[\],:{}\s]*$/.test(filtered))
  return eval("("+src+")");else
  throw new SyntaxError("Error parsing JSON, source is not valid.");};$.quoteString=function(string)
  {if(string.match(_escapeable))
  {return'"'+string.replace(_escapeable,function(a)
  {var c=_meta[a];if(typeof c==='string')return c;c=a.charCodeAt();return'\\u00'+Math.floor(c/16).toString(16)+(c%16).toString(16);})+'"';}
  return'"'+string+'"';};var _escapeable=/["\\\x00-\x1f\x7f-\x9f]/g;var _meta={'\b':'\\b','\t':'\\t','\n':'\\n','\f':'\\f','\r':'\\r','"':'\\"','\\':'\\\\'};})(jQuery);
// Helpers for tagit.js
//
// Shared code for the tag-editor within the:
//   story-editor
//   image library
//   story-page sidebar
//
(function(){
  if (!window.DailyKos) DailyKos = {};
  if (!DailyKos.TagEditor)  DailyKos.TagEditor = {};

   DailyKos.TagEditor = {
    preprocessTag:             preprocessTag,
    onTagExists:               onTagExists,
    disableSpaceKey:           disableSpaceKey
  };

return;

  function preprocessTag(text) {
    if (DailyKos.TagEditor.initializing) return text;

    var text = sanitizeTag(text);

    return text;
  }

  function onTagExists(e, data) {
    DailyKos.Modal.showError("The tag you entered already exists.", "Sorry, tag not added!");
  }

  // Provide the class selector for the tag container.
  // Any inputs within will have their space keys ignored.
  function disableSpaceKey(containerSelector) {
    var SPACE_KEY = 32;
    var disableKey = function(e) { if (e.keyCode === SPACE_KEY) e.preventDefault(); };
    $(containerSelector).on('keydown', 'input.ui-autocomplete-input', disableKey);
  }

  // Remove everything except: letters, numbers, commas, ampersands, dashes, and non-trailing periods
  function sanitizeTag(text) {
    return text.replace(/([^a-zA-Z,\d\-\&\.]|\.$)/g, '');
  }
})();
// This rips off from the twemoji_rails plugin, so we can skip using twemoji entirely:
//
// This file is responsible for replacing :poop: (shortcode) with the 💩 unicode character.
// By default, twemoji_rails has a replacer function that swaps emoji unicode with the emoji <img>.
// We swap out the twemoji_rails.replacer function with one that replaces :poop: with 💩 the unicode character.
//
// If you're here, we assume you support emoji-natively. We're going to swap
// your shortcodes with unicode by switching out twemoji_rails.parse with a
// function that replaces shortcodes with 💩 unicode instead of <img> tags.
//
(function(){
  var twemoji_custom;

  window.twemoji_custom = twemoji_custom = {
    parse: function (text) {
      return text.replace(/:([\-\+]?\w+):/g, this.replacer);
    },
    // replace shortcode with the emoji unicode
    replacer: function (shortcode, shortname, offset, string) {
      return twemoji_custom.map[shortname] || shortcode;
    },
    map: {
      "100": "💯",
      "1234": "🔢",
      "+1": "👍",
      "-1": "👎",
      "8ball": "🎱",
      "a": "🅰",
      "ab": "🆎",
      "abc": "🔤",
      "abcd": "🔡",
      "accept": "🉑",
      "aerial_tramway": "🚡",
      "airplane": "✈️",
      "alarm_clock": "⏰",
      "alien": "👽",
      "ambulance": "🚑",
      "anchor": "⚓️",
      "angel": "👼",
      "anger": "💢",
      "angry": "😠",
      "anguished": "😟",
      "ant": "🐜",
      "apple": "🍎",
      "aquarius": "♒️",
      "aries": "♈️",
      "arrow_backward": "◀️",
      "arrow_double_down": "⏬",
      "arrow_double_up": "⏫",
      "arrow_down": "⬇️",
      "arrow_down_small": "🔽",
      "arrow_forward": "▶️",
      "arrow_heading_down": "⤵️",
      "arrow_heading_up": "⤴️",
      "arrow_left": "⬅️",
      "arrow_lower_left": "↙️",
      "arrow_lower_right": "↘️",
      "arrow_right": "➡️",
      "arrow_right_hook": "↪️",
      "arrow_up": "⬆️",
      "arrow_up_down": "↕️",
      "arrow_up_small": "🔼",
      "arrow_upper_left": "↖️",
      "arrow_upper_right": "↗️",
      "arrows_clockwise": "🔃",
      "arrows_counterclockwise": "🔄",
      "art": "🎨",
      "articulated_lorry": "🚛",
      "astonished": "😲",
      "atm": "🏧",
      "b": "🅱",
      "baby": "👶",
      "baby_bottle": "🍼",
      "baby_chick": "🐤",
      "baby_symbol": "🚼",
      "baggage_claim": "🛄",
      "balloon": "🎈",
      "ballot_box_with_check": "☑️",
      "bamboo": "🎍",
      "banana": "🍌",
      "bangbang": "‼️",
      "bank": "🏦",
      "bar_chart": "📊",
      "barber": "💈",
      "baseball": "⚾️",
      "basketball": "🏀",
      "bath": "🛀",
      "bathtub": "🛁",
      "battery": "🔋",
      "bear": "🐻",
      "bee": "🐝",
      "beer": "🍺",
      "beers": "🍻",
      "beetle": "🐞",
      "beginner": "🔰",
      "bell": "🔔",
      "bento": "🍱",
      "bicyclist": "🚴",
      "bike": "🚲",
      "bikini": "👙",
      "bird": "🐦",
      "birthday": "🎂",
      "black_circle": "⚫",
      "black_joker": "🃏",
      "black_nib": "✒️",
      "black_square": "⬛️",
      "black_square_button": "🔲",
      "blossom": "🌼",
      "blowfish": "🐡",
      "blue_book": "📘",
      "blue_car": "🚙",
      "blue_heart": "💙",
      "blush": "😊",
      "boar": "🐗",
      "boat": "⛵️",
      "bomb": "💣",
      "book": "📖",
      "bookmark": "🔖",
      "bookmark_tabs": "📑",
      "books": "📚",
      "boom": "💥",
      "boot": "👢",
      "bouquet": "💐",
      "bow": "🙇",
      "bowling": "🎳",
      "boy": "👦",
      "bread": "🍞",
      "bride_with_veil": "👰",
      "bridge_at_night": "🌉",
      "briefcase": "💼",
      "broken_heart": "💔",
      "bug": "🐛",
      "bulb": "💡",
      "bullettrain_front": "🚆",
      "bullettrain_side": "🚅",
      "bus": "🚌",
      "busstop": "🚏",
      "bust_in_silhouette": "👤",
      "busts_in_silhouette": "👥",
      "cactus": "🌵",
      "cake": "🍰",
      "calendar": "📆",
      "calling": "📲",
      "camel": "🐫",
      "camera": "📷",
      "cancer": "♋️",
      "candy": "🍬",
      "capital_abcd": "🔠",
      "capricorn": "♑️",
      "car": "🚗",
      "card_index": "📇",
      "carousel_horse": "🎠",
      "cat": "🐱",
      "cat2": "🐈",
      "cd": "💿",
      "chart": "💹",
      "chart_with_downwards_trend": "📉",
      "chart_with_upwards_trend": "📈",
      "checkered_flag": "🏁",
      "cherries": "🍒",
      "cherry_blossom": "🌸",
      "chestnut": "🌰",
      "chicken": "🐔",
      "children_crossing": "🚸",
      "chocolate_bar": "🍫",
      "christmas_tree": "🎄",
      "church": "⛪️",
      "cinema": "🎦",
      "circus_tent": "🎪",
      "city_sunrise": "🌇",
      "city_sunset": "🌆",
      "cl": "🆑",
      "clap": "👏",
      "clapper": "🎬",
      "clipboard": "📋",
      "clock1": "🕐",
      "clock10": "🕙",
      "clock1030": "🕥",
      "clock11": "🕚",
      "clock1130": "🕦",
      "clock12": "🕛",
      "clock1230": "🕧",
      "clock130": "🕜",
      "clock2": "🕑",
      "clock230": "🕝",
      "clock3": "🕒",
      "clock330": "🕞",
      "clock4": "🕓",
      "clock430": "🕟",
      "clock5": "🕔",
      "clock530": "🕠",
      "clock6": "🕕",
      "clock630": "🕡",
      "clock7": "🕖",
      "clock730": "🕢",
      "clock8": "🕗",
      "clock830": "🕣",
      "clock9": "🕘",
      "clock930": "🕤",
      "closed_book": "📕",
      "closed_lock_with_key": "🔐",
      "closed_umbrella": "🌂",
      "cloud": "☁️",
      "clubs": "♣️",
      "cn": "🇨🇳",
      "cocktail": "🍸",
      "coffee": "☕️",
      "cold_sweat": "😰",
      "collision": "💥",
      "computer": "💻",
      "confetti_ball": "🎊",
      "confounded": "😖",
      "confused": "😕",
      "congratulations": "㊗️",
      "construction": "🚧",
      "construction_worker": "👷",
      "convenience_store": "🏪",
      "cookie": "🍪",
      "cool": "🆒",
      "cop": "👮",
      "copyright": "©",
      "corn": "🌽",
      "couple": "👫",
      "couple_with_heart": "💑",
      "couplekiss": "💏",
      "cow": "🐮",
      "cow2": "🐄",
      "credit_card": "💳",
      "crocodile": "🐊",
      "crossed_flags": "🎌",
      "crown": "👑",
      "cry": "😢",
      "crying_cat_face": "😿",
      "crystal_ball": "🔮",
      "cupid": "💘",
      "curly_loop": "➰",
      "currency_exchange": "💱",
      "curry": "🍛",
      "custard": "🍮",
      "customs": "🛃",
      "cyclone": "🌀",
      "dancer": "💃",
      "dancers": "👯",
      "dango": "🍡",
      "dart": "🎯",
      "dash": "💨",
      "date": "📅",
      "de": "🇩🇪",
      "deciduous_tree": "🌳",
      "department_store": "🏬",
      "diamond_shape_with_a_dot_inside": "💠",
      "diamonds": "♦️",
      "disappointed": "😞",
      "disappointed_relieved": "😥",
      "dizzy": "💫",
      "dizzy_face": "😵",
      "do_not_litter": "🚯",
      "dog": "🐶",
      "dog2": "🐕",
      "dollar": "💵",
      "dolls": "🎎",
      "dolphin": "🐬",
      "donut": "🍩",
      "door": "🚪",
      "doughnut": "🍩",
      "dragon": "🐉",
      "dragon_face": "🐲",
      "dress": "👗",
      "dromedary_camel": "🐪",
      "droplet": "💧",
      "dvd": "📀",
      "e-mail": "📧",
      "ear": "👂",
      "ear_of_rice": "🌾",
      "earth_africa": "🌍",
      "earth_americas": "🌎",
      "earth_asia": "🌏",
      "egg": "🍳",
      "eggplant": "🍆",
      "eight": "8️⃣",
      "eight_pointed_black_star": "✴️",
      "eight_spoked_asterisk": "✳️",
      "electric_plug": "🔌",
      "elephant": "🐘",
      "email": "📩",
      "end": "🔚",
      "envelope": "✉️",
      "es": "🇪🇸",
      "euro": "💶",
      "european_castle": "🏰",
      "european_post_office": "🏤",
      "evergreen_tree": "🌲",
      "exclamation": "❗️",
      "expressionless": "😑",
      "eyeglasses": "👓",
      "eyes": "👀",
      "facepunch": "👊",
      "factory": "🏭",
      "fallen_leaf": "🍂",
      "family": "👪",
      "fast_forward": "⏩",
      "fax": "📠",
      "fearful": "😨",
      "feet": "👣",
      "ferris_wheel": "🎡",
      "file_folder": "📁",
      "fire": "🔥",
      "fire_engine": "🚒",
      "fireworks": "🎆",
      "first_quarter_moon": "🌓",
      "first_quarter_moon_with_face": "🌛",
      "fish": "🐟",
      "fish_cake": "🍥",
      "fishing_pole_and_fish": "🎣",
      "fist": "✊",
      "five": "5️⃣",
      "flags": "🎏",
      "flashlight": "🔦",
      "floppy_disk": "💾",
      "flower_playing_cards": "🎴",
      "flushed": "😳",
      "foggy": "🌁",
      "football": "🏈",
      "fork_and_knife": "🍴",
      "fountain": "⛲️",
      "four": "4️⃣",
      "four_leaf_clover": "🍀",
      "fr": "🇫🇷",
      "free": "🆓",
      "fried_shrimp": "🍤",
      "fries": "🍟",
      "frog": "🐸",
      "frowning": "😦",
      "fuelpump": "⛽️",
      "full_moon": "🌕",
      "full_moon_with_face": "🌝",
      "game_die": "🎲",
      "gb": "🇬🇧",
      "gem": "💎",
      "gemini": "♊️",
      "ghost": "👻",
      "gift": "🎁",
      "gift_heart": "💝",
      "girl": "👧",
      "globe_with_meridians": "🌐",
      "goat": "🐐",
      "golf": "⛳️",
      "grapes": "🍇",
      "green_apple": "🍏",
      "green_book": "📗",
      "green_heart": "💚",
      "grey_exclamation": "❕",
      "grey_question": "❔",
      "grimacing": "😬",
      "grin": "😁",
      "grinning": "😀",
      "guardsman": "💂",
      "guitar": "🎸",
      "gun": "🔫",
      "haircut": "💇",
      "hamburger": "🍔",
      "hammer": "🔨",
      "hamster": "🐹",
      "hand": "✋",
      "handbag": "👜",
      "hankey": "💩",
      "hash": "#️⃣",
      "hatched_chick": "🐥",
      "hatching_chick": "🐣",
      "headphones": "🎧",
      "hear_no_evil": "🙉",
      "heart": "❤️",
      "heart_decoration": "💟",
      "heart_eyes": "😍",
      "heart_eyes_cat": "😻",
      "heartbeat": "💓",
      "heartpulse": "💗",
      "hearts": "♥️",
      "heavy_check_mark": "✔️",
      "heavy_division_sign": "➗",
      "heavy_dollar_sign": "💲",
      "heavy_exclamation_mark": "❗️",
      "heavy_minus_sign": "➖",
      "heavy_multiplication_x": "✖️",
      "heavy_plus_sign": "➕",
      "helicopter": "🚁",
      "herb": "🌿",
      "hibiscus": "🌺",
      "high_brightness": "🔆",
      "high_heel": "👠",
      "hocho": "🔪",
      "honey_pot": "🍯",
      "honeybee": "🐝",
      "horse": "🐴",
      "horse_racing": "🏇",
      "hospital": "🏥",
      "hotel": "🏨",
      "hotsprings": "♨️",
      "hourglass": "⌛️",
      "hourglass_flowing_sand": "⏳",
      "house": "🏠",
      "house_with_garden": "🏡",
      "hushed": "😧",
      "ice_cream": "🍨",
      "icecream": "🍦",
      "id": "🆔",
      "ideograph_advantage": "🉐",
      "imp": "👿",
      "inbox_tray": "📥",
      "incoming_envelope": "📨",
      "information_desk_person": "💁",
      "information_source": "ℹ️",
      "innocent": "😇",
      "interrobang": "⁉️",
      "iphone": "📱",
      "it": "🇮🇹",
      "izakaya_lantern": "🏮",
      "jack_o_lantern": "🎃",
      "japan": "🗾",
      "japanese_castle": "🏯",
      "japanese_goblin": "👺",
      "japanese_ogre": "👹",
      "jeans": "👖",
      "joy": "😂",
      "joy_cat": "😹",
      "jp": "🇯🇵",
      "key": "🔑",
      "keycap_ten": "🔟",
      "kimono": "👘",
      "kiss": "💋",
      "kissing": "😗",
      "kissing_cat": "😽",
      "kissing_closed_eyes": "😚",
      "kissing_face": "😚",
      "kissing_heart": "😘",
      "kissing_smiling_eyes": "😙",
      "koala": "🐨",
      "koko": "🈁",
      "kr": "🇰🇷",
      "large_blue_circle": "🔵",
      "large_blue_diamond": "🔷",
      "large_orange_diamond": "🔶",
      "last_quarter_moon": "🌗",
      "last_quarter_moon_with_face": "🌜",
      "laughing": "😆",
      "leaves": "🍃",
      "ledger": "📒",
      "left_luggage": "🛅",
      "left_right_arrow": "↔️",
      "leftwards_arrow_with_hook": "↩️",
      "lemon": "🍋",
      "leo": "♌️",
      "leopard": "🐆",
      "libra": "♎️",
      "light_rail": "🚈",
      "link": "🔗",
      "lips": "👄",
      "lipstick": "💄",
      "lock": "🔒",
      "lock_with_ink_pen": "🔏",
      "lollipop": "🍭",
      "loop": "➿",
      "loudspeaker": "📢",
      "love_hotel": "🏩",
      "love_letter": "💌",
      "low_brightness": "🔅",
      "m": "ⓜ",
      "mag": "🔍",
      "mag_right": "🔎",
      "mahjong": "🀄️",
      "mailbox": "📫",
      "mailbox_closed": "📪",
      "mailbox_with_mail": "📬",
      "mailbox_with_no_mail": "📭",
      "man": "👨",
      "man_with_gua_pi_mao": "👲",
      "man_with_turban": "👳",
      "mans_shoe": "👞",
      "maple_leaf": "🍁",
      "mask": "😷",
      "massage": "💆",
      "meat_on_bone": "🍖",
      "mega": "📣",
      "melon": "🍈",
      "memo": "📝",
      "mens": "🚹",
      "metro": "🚇",
      "microphone": "🎤",
      "microscope": "🔬",
      "milky_way": "🌌",
      "minibus": "🚐",
      "minidisc": "💽",
      "mobile_phone_off": "📴",
      "money_with_wings": "💸",
      "moneybag": "💰",
      "monkey": "🐒",
      "monkey_face": "🐵",
      "monorail": "🚝",
      "moon": "🌙",
      "mortar_board": "🎓",
      "mount_fuji": "🗻",
      "mountain_bicyclist": "🚵",
      "mountain_cableway": "🚠",
      "mountain_railway": "🚞",
      "mouse": "🐭",
      "mouse2": "🐁",
      "movie_camera": "🎥",
      "moyai": "🗿",
      "muscle": "💪",
      "mushroom": "🍄",
      "musical_keyboard": "🎹",
      "musical_note": "🎵",
      "musical_score": "🎼",
      "mute": "🔇",
      "nail_care": "💅",
      "name_badge": "📛",
      "necktie": "👔",
      "negative_squared_cross_mark": "❎",
      "neutral_face": "😐",
      "new": "🆕",
      "new_moon": "🌑",
      "new_moon_with_face": "🌚",
      "newspaper": "📰",
      "ng": "🆖",
      "nine": "9️⃣",
      "no_bell": "🔕",
      "no_bicycles": "🚳",
      "no_entry": "⛔️",
      "no_entry_sign": "🚫",
      "no_good": "🙅",
      "no_mobile_phones": "📵",
      "no_mouth": "😶",
      "no_pedestrians": "🚷",
      "no_smoking": "🚭",
      "non-potable_water": "🚱",
      "nose": "👃",
      "notebook": "📓",
      "notebook_with_decorative_cover": "📔",
      "notes": "🎶",
      "nut_and_bolt": "🔩",
      "o": "⭕️",
      "o2": "🅾",
      "ocean": "🌊",
      "octopus": "🐙",
      "oden": "🍢",
      "office": "🏢",
      "ok": "🆗",
      "ok_hand": "👌",
      "ok_woman": "🙆",
      "older_man": "👴",
      "older_woman": "👵",
      "on": "🔛",
      "oncoming_automobile": "🚘",
      "oncoming_bus": "🚍",
      "oncoming_police_car": "🚔",
      "oncoming_taxi": "🚖",
      "one": "1️⃣",
      "open_file_folder": "📂",
      "open_hands": "👐",
      "open_mouth": "😮",
      "ophiuchus": "⛎",
      "orange_book": "📙",
      "outbox_tray": "📤",
      "ox": "🐂",
      "page_facing_up": "📄",
      "page_with_curl": "📃",
      "pager": "📟",
      "palm_tree": "🌴",
      "panda_face": "🐼",
      "paperclip": "📎",
      "parking": "🅿️",
      "part_alternation_mark": "〽️",
      "partly_sunny": "⛅️",
      "passport_control": "🛂",
      "paw_prints": "🐾",
      "peach": "🍑",
      "pear": "🍐",
      "pencil": "📝",
      "pencil2": "✏️",
      "penguin": "🐧",
      "pensive": "😔",
      "performing_arts": "🎭",
      "persevere": "😣",
      "person_frowning": "🙍",
      "person_with_blond_hair": "👱",
      "person_with_pouting_face": "🙎",
      "phone": "☎️",
      "pig": "🐷",
      "pig2": "🐖",
      "pig_nose": "🐽",
      "pill": "💊",
      "pineapple": "🍍",
      "pisces": "♓️",
      "pizza": "🍕",
      "plus1": "👍",
      "point_down": "👇",
      "point_left": "👈",
      "point_right": "👉",
      "point_up": "☝️",
      "point_up_2": "👆",
      "police_car": "🚓",
      "poodle": "🐩",
      "poop": "💩",
      "post_office": "🏣",
      "postal_horn": "📯",
      "postbox": "📮",
      "potable_water": "🚰",
      "pouch": "👝",
      "poultry_leg": "🍗",
      "pound": "💷",
      "pouting_cat": "😾",
      "pray": "🙏",
      "princess": "👸",
      "punch": "👊",
      "purple_heart": "💜",
      "purse": "👛",
      "pushpin": "📌",
      "put_litter_in_its_place": "🚮",
      "question": "❓",
      "rabbit": "🐰",
      "rabbit2": "🐇",
      "racehorse": "🐎",
      "radio": "📻",
      "radio_button": "🔘",
      "rage": "😡",
      "railway_car": "🚋",
      "rainbow": "🌈",
      "raised_hand": "✋",
      "raised_hands": "🙌",
      "raising_hand": "🙋",
      "ram": "🐏",
      "ramen": "🍜",
      "rat": "🐀",
      "recycle": "♻️",
      "red_car": "🚗",
      "red_circle": "🔴",
      "registered": "®",
      "relaxed": "☺️",
      "relieved": "😌",
      "repeat": "🔁",
      "repeat_one": "🔂",
      "restroom": "🚻",
      "revolving_hearts": "💞",
      "rewind": "⏪",
      "ribbon": "🎀",
      "rice": "🍚",
      "rice_ball": "🍙",
      "rice_cracker": "🍘",
      "rice_scene": "🎑",
      "ring": "💍",
      "rocket": "🚀",
      "roller_coaster": "🎢",
      "rooster": "🐓",
      "rose": "🌹",
      "rotating_light": "🚨",
      "round_pushpin": "📍",
      "rowboat": "🚣",
      "ru": "🇷🇺",
      "rugby_football": "🏉",
      "runner": "🏃",
      "running": "🏃",
      "running_shirt_with_sash": "🎽",
      "sa": "🈂",
      "sagittarius": "♐️",
      "sailboat": "⛵️",
      "sake": "🍶",
      "sandal": "👡",
      "santa": "🎅",
      "satellite": "📡",
      "satisfied": "😆",
      "saxophone": "🎷",
      "school": "🏫",
      "school_satchel": "🎒",
      "scissors": "✂️",
      "scorpius": "♏️",
      "scream": "😱",
      "scream_cat": "🙀",
      "scroll": "📜",
      "seat": "💺",
      "secret": "㊙️",
      "see_no_evil": "🙈",
      "seedling": "🌱",
      "seven": "7️⃣",
      "shaved_ice": "🍧",
      "sheep": "🐑",
      "shell": "🐚",
      "ship": "🚢",
      "shirt": "👕",
      "shit": "💩",
      "shoe": "👟",
      "shower": "🚿",
      "signal_strength": "📶",
      "six": "6️⃣",
      "six_pointed_star": "🔯",
      "ski": "🎿",
      "skull": "💀",
      "sleeping": "😴",
      "sleepy": "😪",
      "slot_machine": "🎰",
      "small_blue_diamond": "🔹",
      "small_orange_diamond": "🔸",
      "small_red_triangle": "🔺",
      "small_red_triangle_down": "🔻",
      "smile": "😄",
      "smile_cat": "😸",
      "smiley": "😃",
      "smiley_cat": "😺",
      "smiling_imp": "😈",
      "smirk": "😏",
      "smirk_cat": "😼",
      "smoking": "🚬",
      "snail": "🐌",
      "snake": "🐍",
      "snowboarder": "🏂",
      "snowflake": "❄️",
      "snowman": "⛄️",
      "sob": "😭",
      "soccer": "⚽️",
      "soon": "🔜",
      "sos": "🆘",
      "sound": "🔉",
      "space_invader": "👾",
      "spades": "♠️",
      "spaghetti": "🍝",
      "sparkler": "🎇",
      "sparkles": "✨",
      "sparkling_heart": "💖",
      "speak_no_evil": "🙊",
      "speaker": "🔈",
      "speech_balloon": "💬",
      "speedboat": "🚤",
      "star": "⭐️",
      "star2": "🌟",
      "stars": "🌠",
      "station": "🚉",
      "statue_of_liberty": "🗽",
      "steam_locomotive": "🚂",
      "stew": "🍲",
      "straight_ruler": "📏",
      "strawberry": "🍓",
      "stuck_out_tongue": "😛",
      "stuck_out_tongue_closed_eyes": "😝",
      "stuck_out_tongue_winking_eye": "😜",
      "sun_with_face": "🌞",
      "sunflower": "🌻",
      "sunglasses": "😎",
      "sunny": "☀️",
      "sunrise": "🌅",
      "sunrise_over_mountains": "🌄",
      "surfer": "🏄",
      "sushi": "🍣",
      "suspension_railway": "🚟",
      "sweat": "😓",
      "sweat_drops": "💦",
      "sweat_smile": "😅",
      "sweet_potato": "🍠",
      "swimmer": "🏊",
      "symbols": "🔣",
      "syringe": "💉",
      "tada": "🎉",
      "tanabata_tree": "🎋",
      "tangerine": "🍊",
      "taurus": "♉️",
      "taxi": "🚕",
      "tea": "🍵",
      "telephone": "☎️",
      "telephone_receiver": "📞",
      "telescope": "🔭",
      "tennis": "🎾",
      "tent": "⛺️",
      "thought_balloon": "💭",
      "three": "3️⃣",
      "thumbsdown": "👎",
      "thumbsup": "👍",
      "ticket": "🎫",
      "tiger": "🐯",
      "tiger2": "🐅",
      "tired_face": "😫",
      "tm": "™",
      "toilet": "🚽",
      "tokyo_tower": "🗼",
      "tomato": "🍅",
      "tongue": "👅",
      "top": "🔝",
      "tophat": "🎩",
      "tractor": "🚜",
      "traffic_light": "🚥",
      "train": "🚋",
      "train2": "🚆",
      "tram": "🚊",
      "triangular_flag_on_post": "🚩",
      "triangular_ruler": "📐",
      "trident": "🔱",
      "triumph": "😤",
      "trolleybus": "🚎",
      "trophy": "🏆",
      "tropical_drink": "🍹",
      "tropical_fish": "🐠",
      "truck": "🚚",
      "trumpet": "🎺",
      "tshirt": "👕",
      "tulip": "🌷",
      "turtle": "🐢",
      "tv": "📺",
      "twisted_rightwards_arrows": "🔀",
      "two": "2️⃣",
      "two_hearts": "💕",
      "two_men_holding_hands": "👬",
      "two_women_holding_hands": "👭",
      "u5272": "🈹",
      "u5408": "🈴",
      "u55b6": "🈺",
      "u6307": "🈯️",
      "u6708": "🈷",
      "u6709": "🈶",
      "u6e80": "🈵",
      "u7121": "🈚️",
      "u7533": "🈸",
      "u7981": "🈲",
      "u7a7a": "🈳",
      "uk": "🇬🇧",
      "umbrella": "☔️",
      "unamused": "😒",
      "underage": "🔞",
      "unlock": "🔓",
      "up": "🆙",
      "us": "🇺🇸",
      "v": "✌️",
      "vertical_traffic_light": "🚦",
      "vhs": "📼",
      "vibration_mode": "📳",
      "video_camera": "📹",
      "video_game": "🎮",
      "violin": "🎻",
      "virgo": "♍️",
      "volcano": "🌋",
      "vs": "🆚",
      "walking": "🚶",
      "waning_crescent_moon": "🌘",
      "waning_gibbous_moon": "🌖",
      "warning": "⚠️",
      "watch": "⌚️",
      "water_buffalo": "🐃",
      "watermelon": "🍉",
      "wave": "👋",
      "wavy_dash": "〰",
      "waxing_crescent_moon": "🌒",
      "waxing_gibbous_moon": "🌔",
      "wc": "🚾",
      "weary": "😩",
      "wedding": "💒",
      "whale": "🐳",
      "whale2": "🐋",
      "wheelchair": "♿️",
      "white_check_mark": "✅",
      "white_circle": "⚪",
      "white_flower": "💮",
      "white_large_square": "◻️",
      "white_square_button": "🔳",
      "wind_chime": "🎐",
      "wine_glass": "🍷",
      "wink": "😉",
      "wolf": "🐺",
      "woman": "👩",
      "womans_clothes": "👚",
      "womans_hat": "👒",
      "womens": "🚺",
      "worried": "😟",
      "wrench": "🔧",
      "x": "❌",
      "yellow_heart": "💛",
      "yen": "💴",
      "yum": "😋",
      "zap": "⚡️",
      "zero": "0️⃣",
      "zzz": "💤"
    }
  }


})();
//
// Create a well-defined API for events.
//
// Calling `events` with a string list:
//   _.events(['storyDataLoaded']);
//
// Gives you two (2) things:
//
// 1) a way to bind to events using `_.on`
//   _.on.storyDataLoaded(function(data){ ... });
//
// 2) a way to trigger events using a `_.trigger`
//   _.trigger.storyDataLoaded(data);
//
// Instead of binding/trigger events directly off window / document / btn.click(...)
// and then having a hard time remembering where the binding happens,
// use this to build a well-defined API and invoke those functions.
//
// To log events set DailyKos.debug=true
//
// Supports late binding:
//   _.events(['load']);
//   _.trigger.load();
//
//   /* late */
//   _.on.load(function(){
//     alert('loaded');
//   });

_.mixin({
  events: function(events) {
    var $emitter = $({});
    var trigger  = _.namespace('_.trigger');
    var on       = _.namespace('_.on');
    var eventData = {};

    if (_.isArray(events))
      _(events).each(createEvent);
    else
      createEvent(events);

    function createEvent (evt) {
      if (on[evt]) console.error('namespace collision on event:' + evt);

      on[evt] = function(callback) {
        $emitter.on(evt, callback);

        // event triggered before bind
        if (eventData[evt] !== undefined) {
          callback(evt, eventData[evt]);
        }
      };

      trigger[evt] = function(data) {
        // if (DailyKos.debug) console.log('Triggering event: ' + evt + ' | data: ' + data);
        $emitter.trigger(evt, data);
        eventData[evt] = data || null;
      };
    }
  }
});
/*
 * Define custom Underscore.js functions here.
 *
 * For details, see: http://underscorejs.org/#mixin
 */


/*
  Add a before / after callback for the provided function.

  The callbacks themselves are passed the same arguments as functionName.

  For Example, to add a before and after callback function to context.functionName(arg1, arg2, arg3)

    _(context).callback('functionName',
      before: function(arg1, arg2, arg3){

      },
      after:  function(arg1, arg2, arg3){

      },
      wrap: function(originalFn) {
        try {
          return originalFn();
        } catch(e) {
          alert('Oops!')
        }
      }
    )
*/
_.mixin({
  isDev: function () {
    
      return false;
    
  },
  replaceAll: function(fullString, oldToken, newToken) {
    return fullString.replace(new RegExp(oldToken, 'g'), newToken);
  },
  // parser = _.parseUrl("https://www.dailykos.com:8080/pathname/?search=test#hash")
  // parser.protocol; // "http:"
  // parser.host;     // "www.dailykos.com:8080"
  // parser.hostname; // "www.dailykos.com"
  // parser.port;     // "8080"
  // parser.pathname; // "/pathname/"
  // parser.hash;     // "#hash"
  // parser.search;   // "?search=test"
  parseUrl: function(url) {
    var parser = document.createElement('a');
    parser.href = url;
    return parser;
  },
  // Given 'http://www.google.com?foo=1&bar=2'
  // Return {foo: '1', bar: '2'}
  parseQueryString: function (url) {
    if (!url) return {};
    var qs     =  url.split('?')[1];
    var params = qs.split('&');

    var obj = {};

    _(params).each(function (param) {
      var kv = param.split('=');
      var k  = kv[0], v = kv[1];

      obj[k] = v;
    });

    return obj;
  },

  // 'reply' => 'replies'
  pluralize: function(count, word) {
    if (count === 1) return word;
    word  = word.replace(/(.*)y$/, '$1ie');
    word += 's';
    return word;
  },

  titleize: function(str) {
    return str.toLowerCase().replace(/(?:^|\s|-)\S/g, function(c) {
      return c.toUpperCase();
    });
  },

  callback: function(context, functor, cb) {
    var before = cb.before;
    var after  = cb.after;
    var wrap   = cb.wrap;

    var originalFunc = context[functor];

    context[functor] = function() {
      var _arguments = arguments;
      var main       = function(){ return originalFunc.apply(context, _arguments); };

      if (before) before.apply(context, _arguments);

      var result = wrap ? wrap(main) : main();

      if (after) after.apply(context, _arguments);

      return result;
    };
  },

  sleep: function(milliseconds, maxMilliseconds) {
    var now       = new Date().getTime();
    var waitUntil = now + milliseconds;

    while(true) {
      if (new Date().getTime() > waitUntil) return;
    }
  },

  //
  // Polls the ready() function with a timeout factor until it returns true,
  // at which point it will then execute your main function.
  //
  // func  - the main function you want to execute
  // ready - evaluated to determine "readiness". when this returns true, the main func will run, then terminate.
  // retryCount - (optional) number of times to retry
  // retryWait  - (optional) number of milliseconds to sleep
  //
  retryUntilReady: function(func, ready, retryCount, retryWait){
    retryCount = (typeof retryCount === 'undefined') ? 100 : retryCount; // number of retries remaining
    retryWait  = (typeof retryWait  === 'undefined') ? 100 : retryWait;  // milliseconds to wait between retries

    if (retryCount <= 0) {
      console.log('retryUntilReady has exhausted all retries:');
      console.log(new Error().stack);
      return;
    }

    if (ready()) {
      return func();
    }

    setTimeout(function(){
      _.retryUntilReady(func, ready, retryCount - 1, retryWait);
    }, retryWait);
  },

  // _.getTimezoneName(new Date());
  // returns: ["(PST)", "PST"]
  getTimezoneName: function(date){
    date = date.toString();                   // "Mon Apr 20 2015 17:50:01 GMT-0700 (PDT)"
    var parentheses = /\(([^)]+)\)/;          // Search and match parentheses
    var matches = parentheses.exec(date);     // ["(PDT)", "PDT"]
    return matches[0] || "";                  // Some browsers won't have the tzName, so return empty string
  },

  // Build an object namespace.
  // _.namespace('DailyKos.Stories.Data') creates DailyKos.Stories.Data (no clobber)
  namespace: function(namespaceString, properties) {
    var parts = namespaceString.split('.'),
        parent = window,
        currentPart = '';

    for(var i = 0, length = parts.length; i < length; i++) {
      currentPart = parts[i];
      parent[currentPart] = parent[currentPart] || {};
      parent = parent[currentPart];
    }

    if (properties)
      _(parent).extend(properties);

    return parent;
  },

  // Returns false if an enumerable OBJECT contains no values (no enumerable own-properties).
  // For strings and array-like objects _.isEmpty checks if the length property is 0.
  isNotEmpty: function(obj){
    return !_.isEmpty(obj);
  },

  debug: function(){
    return window.location.hash.indexOf('dk_debug')  > -1 ||
           document.domain.indexOf('dailykos.local') > -1;
  }
});
// viewPort.js
//
//   Determines whether a DOM element is in your viewport.
//   Returns true if element is currently inside viewport
//   based on the window height, scroll position, offsets,
//   and occluding fixed-positioned elements.
//
// Usage:
//
//   Check if $el is inside browser window:
//
//     var viewport = viewPort(); // get viewport object
//     viewport.contains($el);    // check if element is inside viewport
//     -> true
//
//   Set px offsets due to occluding fixed position elements,
//   which are taken into consideration when checking viewability:
//
//     var viewport = viewPort({
//       offsetTop:  45,          // ignore top 45px (navbar)
//       offsetBot:  20           // ignore bot 20px (footer)
//     });
//
//     viewport.contains($el);
//     -> true
//
//   Provide elements that are used to calculate viewport offsets,
//   which are taken into consideration when checking viewability:
//
//     var viewport = viewPort({
//       elTop: '#navbar'
//       elBot: '#footer'
//     });
//
//     viewport.contains($el);
//     -> true

viewPort = function (opts) {
  var self;
  var viewportTop,
      viewportBot,
      offsetTop,
      offsetBot;

  init(opts || {});

  return ({contains: contains});

  function init (opts) {
    self = opts;
    var t_calcViewportBounds = _.throttle(calcViewportBounds, 500);
    $(calcViewportBounds);
    $(window).resize(t_calcViewportBounds);
  }

  function contains (el) {
    if (el instanceof $) el = el[0];

    var rect = el.getBoundingClientRect();
    var top  = rect.top;
    var bot  = rect.bottom;

    return (viewportTop < top && top < viewportBot) || // does viewport contain el?
           (viewportTop < bot && bot < viewportBot) ||
           (top < viewportTop && viewportTop < bot);   // does el contain viewport?
  }

  function calcViewportBounds () {
    offsetTop   = self.elTop ? $(self.elTop).outerHeight() : 0;
    offsetBot   = self.elBot ? $(self.elBot).outerHeight() : 0;

    offsetTop  += self.offsetTop || 0;
    offsetBot  += self.offsetBot || 0;

    viewportTop = offsetTop;
    viewportBot = getViewportHeight() - offsetBot;
  }

  function getViewportHeight () {
    return window.innerHeight || document.documentElement.clientHeight;
  }
};
// Setup module namespace;

_.namespace('DailyKos');

window.DK = DailyKos;
/* globals $ _ */

  _('DK.Text').namespace({
    //
    // General Matchers
    //
    isHTML: function (str) {
      return /<[a-z][\s\S]*>/i.test(str);
    },

    // The following should return true
    // ftp://google.com
    // mailto://google@mail.com
    // http://google.com
    // google.com/search
    isValidUrl: function (str) {
      var urlReg = /[-a-zA-Z0-9@:%._\+~#=]{1,256}\.[a-z]{2,7}/;
      return urlReg.test(str);
    },

    //
    // Embed Matchers
    //
    isFacebookEmbedUrl: function(str) {
      return str && str.match(/facebook.com\/.+\/video.+/);
    },

    isGoogleEmbedUrl: function(str) {
      return str && str.match(/\/\/docs.google.com/i);
    },

    isHuffPoEmbedUrl: function(str) {
      return str && str.match(/\/\/elections\.huffingtonpost\.com/i);
    },

    isSalsaEmbedUrl: function(str) {
      return str && str.match(/\/campaigns\/\d+\.embed/);
    },

    isVideoEmbed: function (str) {
      var $ph   = $(str),
          data  = $ph.data(),
          iframeSrc;

      if(data && !_.isEmpty(data)) {
        iframeSrc = data.src;
      } else if(typeof(str) == 'string') {
        iframeSrc = str;
      }

      return iframeSrc && iframeSrc.match(/youtube|vimeo|\.cnn\.(io|com)\/\S+video/); // shortcut!
    },

    isElectionsEmbed: function (str) {
      return str && str.match(/elections\.dailykos\.com|staging\.dailykoselections\.com/);
    },

    isCiviqsEmbed: function (str) {
      return str && str.match(/civiqs\.com/);
    }
  });



(function() {
  if (typeof window['CKEDITOR_BASEPATH'] === "undefined" || window['CKEDITOR_BASEPATH'] === null) {
    window['CKEDITOR_BASEPATH'] = "/assets/ckeditor/";
  }

  // Just assume the JS file is being minified and contains a trailing hash (eg, application-<hash>.js):
  if(! window['CKEDITOR_CBUSTER']) {
    var scriptHash  = '';

    try {
      var cScriptSrc, fileName;

      if(document.currentScript) {
        cScriptSrc  = document.currentScript.src,
        fileName    = cScriptSrc.split("/").pop();
      } else {
        fileName    = $('script[src*="dk5-application"]').attr('src');
      }

      fileName = fileName.split(".js").shift();
      fileName = fileName.split("-").pop();

      if(fileName) { scriptHash = fileName; }
    } catch(e) {
      console.error(e);
    }

    window['CKEDITOR_CBUSTER'] = scriptHash;
  }

}).call(this);
/*
Copyright (c) 2003-2016, CKSource - Frederico Knabben. All rights reserved.
For licensing, see LICENSE.md or http://ckeditor.com/license
*/
(function(){if(window.CKEDITOR&&window.CKEDITOR.dom)return;window.CKEDITOR||(window.CKEDITOR=function(){var a=/(^|.*[\\\/])ckeditor\.js(?:\?.*|;.*)?$/i,d={timestamp:"G6DE"+(window['CKEDITOR_CBUSTER'] || ''),version:"4.5.10",revision:"b47abaf",rnd:Math.floor(900*Math.random())+100,_:{pending:[],basePathSrcPattern:a},status:"unloaded",basePath:function(){var b=window.CKEDITOR_BASEPATH||"";if(!b)for(var c=document.getElementsByTagName("script"),d=0;d<c.length;d++){var l=c[d].src.match(a);if(l){b=l[1];break}}-1==b.indexOf(":/")&&"//"!=b.slice(0,2)&&(b=0===b.indexOf("/")?location.href.match(/^.*?:\/\/[^\/]*/)[0]+
b:location.href.match(/^[^\?]*\/(?:)/)[0]+b);if(!b)throw'The CKEditor installation path could not be automatically detected. Please set the global variable "CKEDITOR_BASEPATH" before creating editor instances.';return b}(),getUrl:function(a){-1==a.indexOf(":/")&&0!==a.indexOf("/")&&(a=this.basePath+a);this.timestamp&&"/"!=a.charAt(a.length-1)&&!/[&?]t=/.test(a)&&(a+=(0<=a.indexOf("?")?"\x26":"?")+"t\x3d"+this.timestamp);return a},domReady:function(){function a(){try{document.addEventListener?(document.removeEventListener("DOMContentLoaded",
a,!1),b()):document.attachEvent&&"complete"===document.readyState&&(document.detachEvent("onreadystatechange",a),b())}catch(c){}}function b(){for(var a;a=c.shift();)a()}var c=[];return function(b){function d(){try{document.documentElement.doScroll("left")}catch(f){setTimeout(d,1);return}a()}c.push(b);"complete"===document.readyState&&setTimeout(a,1);if(1==c.length)if(document.addEventListener)document.addEventListener("DOMContentLoaded",a,!1),window.addEventListener("load",a,!1);else if(document.attachEvent){document.attachEvent("onreadystatechange",
a);window.attachEvent("onload",a);b=!1;try{b=!window.frameElement}catch(v){}document.documentElement.doScroll&&b&&d()}}}()},b=window.CKEDITOR_GETURL;if(b){var c=d.getUrl;d.getUrl=function(a){return b.call(d,a)||c.call(d,a)}}return d}());
CKEDITOR.event||(CKEDITOR.event=function(){},CKEDITOR.event.implementOn=function(a){var d=CKEDITOR.event.prototype,b;for(b in d)null==a[b]&&(a[b]=d[b])},CKEDITOR.event.prototype=function(){function a(a){var e=d(this);return e[a]||(e[a]=new b(a))}var d=function(a){a=a.getPrivate&&a.getPrivate()||a._||(a._={});return a.events||(a.events={})},b=function(a){this.name=a;this.listeners=[]};b.prototype={getListenerIndex:function(a){for(var b=0,d=this.listeners;b<d.length;b++)if(d[b].fn==a)return b;return-1}};
return{define:function(b,d){var g=a.call(this,b);CKEDITOR.tools.extend(g,d,!0)},on:function(b,d,g,k,l){function q(a,f,y,l){a={name:b,sender:this,editor:a,data:f,listenerData:k,stop:y,cancel:l,removeListener:v};return!1===d.call(g,a)?!1:a.data}function v(){y.removeListener(b,d)}var f=a.call(this,b);if(0>f.getListenerIndex(d)){f=f.listeners;g||(g=this);isNaN(l)&&(l=10);var y=this;q.fn=d;q.priority=l;for(var A=f.length-1;0<=A;A--)if(f[A].priority<=l)return f.splice(A+1,0,q),{removeListener:v};f.unshift(q)}return{removeListener:v}},
once:function(){var a=Array.prototype.slice.call(arguments),b=a[1];a[1]=function(a){a.removeListener();return b.apply(this,arguments)};return this.on.apply(this,a)},capture:function(){CKEDITOR.event.useCapture=1;var a=this.on.apply(this,arguments);CKEDITOR.event.useCapture=0;return a},fire:function(){var a=0,b=function(){a=1},g=0,k=function(){g=1};return function(l,q,v){var f=d(this)[l];l=a;var y=g;a=g=0;if(f){var A=f.listeners;if(A.length)for(var A=A.slice(0),r,D=0;D<A.length;D++){if(f.errorProof)try{r=
A[D].call(this,v,q,b,k)}catch(n){}else r=A[D].call(this,v,q,b,k);!1===r?g=1:"undefined"!=typeof r&&(q=r);if(a||g)break}}q=g?!1:"undefined"==typeof q?!0:q;a=l;g=y;return q}}(),fireOnce:function(a,b,g){b=this.fire(a,b,g);delete d(this)[a];return b},removeListener:function(a,b){var g=d(this)[a];if(g){var k=g.getListenerIndex(b);0<=k&&g.listeners.splice(k,1)}},removeAllListeners:function(){var a=d(this),b;for(b in a)delete a[b]},hasListeners:function(a){return(a=d(this)[a])&&0<a.listeners.length}}}());
CKEDITOR.editor||(CKEDITOR.editor=function(){CKEDITOR._.pending.push([this,arguments]);CKEDITOR.event.call(this)},CKEDITOR.editor.prototype.fire=function(a,d){a in{instanceReady:1,loaded:1}&&(this[a]=!0);return CKEDITOR.event.prototype.fire.call(this,a,d,this)},CKEDITOR.editor.prototype.fireOnce=function(a,d){a in{instanceReady:1,loaded:1}&&(this[a]=!0);return CKEDITOR.event.prototype.fireOnce.call(this,a,d,this)},CKEDITOR.event.implementOn(CKEDITOR.editor.prototype));
CKEDITOR.env||(CKEDITOR.env=function(){var a=navigator.userAgent.toLowerCase(),d=a.match(/edge[ \/](\d+.?\d*)/),b=-1<a.indexOf("trident/"),b=!(!d&&!b),b={ie:b,edge:!!d,webkit:!b&&-1<a.indexOf(" applewebkit/"),air:-1<a.indexOf(" adobeair/"),mac:-1<a.indexOf("macintosh"),quirks:"BackCompat"==document.compatMode&&(!document.documentMode||10>document.documentMode),mobile:-1<a.indexOf("mobile"),iOS:/(ipad|iphone|ipod)/.test(a),isCustomDomain:function(){if(!this.ie)return!1;var a=document.domain,b=window.location.hostname;
return a!=b&&a!="["+b+"]"},secure:"https:"==location.protocol};b.gecko="Gecko"==navigator.product&&!b.webkit&&!b.ie;b.webkit&&(-1<a.indexOf("chrome")?b.chrome=!0:b.safari=!0);var c=0;b.ie&&(c=d?parseFloat(d[1]):b.quirks||!document.documentMode?parseFloat(a.match(/msie (\d+)/)[1]):document.documentMode,b.ie9Compat=9==c,b.ie8Compat=8==c,b.ie7Compat=7==c,b.ie6Compat=7>c||b.quirks);b.gecko&&(d=a.match(/rv:([\d\.]+)/))&&(d=d[1].split("."),c=1E4*d[0]+100*(d[1]||0)+1*(d[2]||0));b.air&&(c=parseFloat(a.match(/ adobeair\/(\d+)/)[1]));
b.webkit&&(c=parseFloat(a.match(/ applewebkit\/(\d+)/)[1]));b.version=c;b.isCompatible=!(b.ie&&7>c)&&!(b.gecko&&4E4>c)&&!(b.webkit&&534>c);b.hidpi=2<=window.devicePixelRatio;b.needsBrFiller=b.gecko||b.webkit||b.ie&&10<c;b.needsNbspFiller=b.ie&&11>c;b.cssClass="cke_browser_"+(b.ie?"ie":b.gecko?"gecko":b.webkit?"webkit":"unknown");b.quirks&&(b.cssClass+=" cke_browser_quirks");b.ie&&(b.cssClass+=" cke_browser_ie"+(b.quirks?"6 cke_browser_iequirks":b.version));b.air&&(b.cssClass+=" cke_browser_air");
b.iOS&&(b.cssClass+=" cke_browser_ios");b.hidpi&&(b.cssClass+=" cke_hidpi");return b}());
"unloaded"==CKEDITOR.status&&function(){CKEDITOR.event.implementOn(CKEDITOR);CKEDITOR.loadFullCore=function(){if("basic_ready"!=CKEDITOR.status)CKEDITOR.loadFullCore._load=1;else{delete CKEDITOR.loadFullCore;var a=document.createElement("script");a.type="text/javascript";a.src=CKEDITOR.basePath+"ckeditor.js";document.getElementsByTagName("head")[0].appendChild(a)}};CKEDITOR.loadFullCoreTimeout=0;CKEDITOR.add=function(a){(this._.pending||(this._.pending=[])).push(a)};(function(){CKEDITOR.domReady(function(){var a=
CKEDITOR.loadFullCore,d=CKEDITOR.loadFullCoreTimeout;a&&(CKEDITOR.status="basic_ready",a&&a._load?a():d&&setTimeout(function(){CKEDITOR.loadFullCore&&CKEDITOR.loadFullCore()},1E3*d))})})();CKEDITOR.status="basic_loaded"}();"use strict";CKEDITOR.VERBOSITY_WARN=1;CKEDITOR.VERBOSITY_ERROR=2;CKEDITOR.verbosity=CKEDITOR.VERBOSITY_WARN|CKEDITOR.VERBOSITY_ERROR;CKEDITOR.warn=function(a,d){CKEDITOR.verbosity&CKEDITOR.VERBOSITY_WARN&&CKEDITOR.fire("log",{type:"warn",errorCode:a,additionalData:d})};
CKEDITOR.error=function(a,d){CKEDITOR.verbosity&CKEDITOR.VERBOSITY_ERROR&&CKEDITOR.fire("log",{type:"error",errorCode:a,additionalData:d})};
CKEDITOR.on("log",function(a){if(window.console&&window.console.log){var d=console[a.data.type]?a.data.type:"log",b=a.data.errorCode;if(a=a.data.additionalData)console[d]("[CKEDITOR] Error code: "+b+".",a);else console[d]("[CKEDITOR] Error code: "+b+".");console[d]("[CKEDITOR] For more information about this error go to http://docs.ckeditor.com/#!/guide/dev_errors-section-"+b)}},null,null,999);CKEDITOR.dom={};
(function(){var a=[],d=CKEDITOR.env.gecko?"-moz-":CKEDITOR.env.webkit?"-webkit-":CKEDITOR.env.ie?"-ms-":"",b=/&/g,c=/>/g,e=/</g,g=/"/g,k=/&(lt|gt|amp|quot|nbsp|shy|#\d{1,5});/g,l={lt:"\x3c",gt:"\x3e",amp:"\x26",quot:'"',nbsp:" ",shy:"­"},q=function(a,f){return"#"==f[0]?String.fromCharCode(parseInt(f.slice(1),10)):l[f]};CKEDITOR.on("reset",function(){a=[]});CKEDITOR.tools={arrayCompare:function(a,f){if(!a&&!f)return!0;if(!a||!f||a.length!=f.length)return!1;for(var b=0;b<a.length;b++)if(a[b]!=f[b])return!1;
return!0},getIndex:function(a,f){for(var b=0;b<a.length;++b)if(f(a[b]))return b;return-1},clone:function(a){var f;if(a&&a instanceof Array){f=[];for(var b=0;b<a.length;b++)f[b]=CKEDITOR.tools.clone(a[b]);return f}if(null===a||"object"!=typeof a||a instanceof String||a instanceof Number||a instanceof Boolean||a instanceof Date||a instanceof RegExp||a.nodeType||a.window===a)return a;f=new a.constructor;for(b in a)f[b]=CKEDITOR.tools.clone(a[b]);return f},capitalize:function(a,f){return a.charAt(0).toUpperCase()+
(f?a.slice(1):a.slice(1).toLowerCase())},extend:function(a){var f=arguments.length,b,c;"boolean"==typeof(b=arguments[f-1])?f--:"boolean"==typeof(b=arguments[f-2])&&(c=arguments[f-1],f-=2);for(var l=1;l<f;l++){var d=arguments[l],n;for(n in d)if(!0===b||null==a[n])if(!c||n in c)a[n]=d[n]}return a},prototypedCopy:function(a){var f=function(){};f.prototype=a;return new f},copy:function(a){var f={},b;for(b in a)f[b]=a[b];return f},isArray:function(a){return"[object Array]"==Object.prototype.toString.call(a)},
isEmpty:function(a){for(var f in a)if(a.hasOwnProperty(f))return!1;return!0},cssVendorPrefix:function(a,f,b){if(b)return d+a+":"+f+";"+a+":"+f;b={};b[a]=f;b[d+a]=f;return b},cssStyleToDomStyle:function(){var a=document.createElement("div").style,f="undefined"!=typeof a.cssFloat?"cssFloat":"undefined"!=typeof a.styleFloat?"styleFloat":"float";return function(a){return"float"==a?f:a.replace(/-./g,function(a){return a.substr(1).toUpperCase()})}}(),buildStyleHtml:function(a){a=[].concat(a);for(var f,
b=[],c=0;c<a.length;c++)if(f=a[c])/@import|[{}]/.test(f)?b.push("\x3cstyle\x3e"+f+"\x3c/style\x3e"):b.push('\x3clink type\x3d"text/css" rel\x3dstylesheet href\x3d"'+f+'"\x3e');return b.join("")},htmlEncode:function(a){return void 0===a||null===a?"":String(a).replace(b,"\x26amp;").replace(c,"\x26gt;").replace(e,"\x26lt;")},htmlDecode:function(a){return a.replace(k,q)},htmlEncodeAttr:function(a){return CKEDITOR.tools.htmlEncode(a).replace(g,"\x26quot;")},htmlDecodeAttr:function(a){return CKEDITOR.tools.htmlDecode(a)},
transformPlainTextToHtml:function(a,f){var b=f==CKEDITOR.ENTER_BR,c=this.htmlEncode(a.replace(/\r\n/g,"\n")),c=c.replace(/\t/g,"\x26nbsp;\x26nbsp; \x26nbsp;"),l=f==CKEDITOR.ENTER_P?"p":"div";if(!b){var d=/\n{2}/g;if(d.test(c))var n="\x3c"+l+"\x3e",q="\x3c/"+l+"\x3e",c=n+c.replace(d,function(){return q+n})+q}c=c.replace(/\n/g,"\x3cbr\x3e");b||(c=c.replace(new RegExp("\x3cbr\x3e(?\x3d\x3c/"+l+"\x3e)"),function(a){return CKEDITOR.tools.repeat(a,2)}));c=c.replace(/^ | $/g,"\x26nbsp;");return c=c.replace(/(>|\s) /g,
function(a,f){return f+"\x26nbsp;"}).replace(/ (?=<)/g,"\x26nbsp;")},getNextNumber:function(){var a=0;return function(){return++a}}(),getNextId:function(){return"cke_"+this.getNextNumber()},getUniqueId:function(){for(var a="e",f=0;8>f;f++)a+=Math.floor(65536*(1+Math.random())).toString(16).substring(1);return a},override:function(a,f){var b=f(a);b.prototype=a.prototype;return b},setTimeout:function(a,f,b,c,l){l||(l=window);b||(b=l);return l.setTimeout(function(){c?a.apply(b,[].concat(c)):a.apply(b)},
f||0)},trim:function(){var a=/(?:^[ \t\n\r]+)|(?:[ \t\n\r]+$)/g;return function(f){return f.replace(a,"")}}(),ltrim:function(){var a=/^[ \t\n\r]+/g;return function(f){return f.replace(a,"")}}(),rtrim:function(){var a=/[ \t\n\r]+$/g;return function(f){return f.replace(a,"")}}(),indexOf:function(a,f){if("function"==typeof f)for(var b=0,c=a.length;b<c;b++){if(f(a[b]))return b}else{if(a.indexOf)return a.indexOf(f);b=0;for(c=a.length;b<c;b++)if(a[b]===f)return b}return-1},search:function(a,f){var b=CKEDITOR.tools.indexOf(a,
f);return 0<=b?a[b]:null},bind:function(a,f){return function(){return a.apply(f,arguments)}},createClass:function(a){var f=a.$,b=a.base,c=a.privates||a._,l=a.proto;a=a.statics;!f&&(f=function(){b&&this.base.apply(this,arguments)});if(c)var d=f,f=function(){var a=this._||(this._={}),f;for(f in c){var b=c[f];a[f]="function"==typeof b?CKEDITOR.tools.bind(b,this):b}d.apply(this,arguments)};b&&(f.prototype=this.prototypedCopy(b.prototype),f.prototype.constructor=f,f.base=b,f.baseProto=b.prototype,f.prototype.base=
function(){this.base=b.prototype.base;b.apply(this,arguments);this.base=arguments.callee});l&&this.extend(f.prototype,l,!0);a&&this.extend(f,a,!0);return f},addFunction:function(b,f){return a.push(function(){return b.apply(f||this,arguments)})-1},removeFunction:function(b){a[b]=null},callFunction:function(b){var f=a[b];return f&&f.apply(window,Array.prototype.slice.call(arguments,1))},cssLength:function(){var a=/^-?\d+\.?\d*px$/,f;return function(b){f=CKEDITOR.tools.trim(b+"")+"px";return a.test(f)?
f:b||""}}(),convertToPx:function(){var a;return function(f){a||(a=CKEDITOR.dom.element.createFromHtml('\x3cdiv style\x3d"position:absolute;left:-9999px;top:-9999px;margin:0px;padding:0px;border:0px;"\x3e\x3c/div\x3e',CKEDITOR.document),CKEDITOR.document.getBody().append(a));return/%$/.test(f)?f:(a.setStyle("width",f),a.$.clientWidth)}}(),repeat:function(a,f){return Array(f+1).join(a)},tryThese:function(){for(var a,f=0,b=arguments.length;f<b;f++){var c=arguments[f];try{a=c();break}catch(l){}}return a},
genKey:function(){return Array.prototype.slice.call(arguments).join("-")},defer:function(a){return function(){var b=arguments,c=this;window.setTimeout(function(){a.apply(c,b)},0)}},normalizeCssText:function(a,b){var c=[],l,d=CKEDITOR.tools.parseCssText(a,!0,b);for(l in d)c.push(l+":"+d[l]);c.sort();return c.length?c.join(";")+";":""},convertRgbToHex:function(a){return a.replace(/(?:rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\))/gi,function(a,b,c,l){a=[b,c,l];for(b=0;3>b;b++)a[b]=("0"+parseInt(a[b],10).toString(16)).slice(-2);
return"#"+a.join("")})},normalizeHex:function(a){return a.replace(/#(([0-9a-f]{3}){1,2})($|;|\s+)/gi,function(a,b,c,l){a=b.toLowerCase();3==a.length&&(a=a.split(""),a=[a[0],a[0],a[1],a[1],a[2],a[2]].join(""));return"#"+a+l})},parseCssText:function(a,b,c){var l={};c&&(a=(new CKEDITOR.dom.element("span")).setAttribute("style",a).getAttribute("style")||"");a&&(a=CKEDITOR.tools.normalizeHex(CKEDITOR.tools.convertRgbToHex(a)));if(!a||";"==a)return l;a.replace(/&quot;/g,'"').replace(/\s*([^:;\s]+)\s*:\s*([^;]+)\s*(?=;|$)/g,
function(a,c,d){b&&(c=c.toLowerCase(),"font-family"==c&&(d=d.replace(/\s*,\s*/g,",")),d=CKEDITOR.tools.trim(d));l[c]=d});return l},writeCssText:function(a,b){var c,l=[];for(c in a)l.push(c+":"+a[c]);b&&l.sort();return l.join("; ")},objectCompare:function(a,b,c){var l;if(!a&&!b)return!0;if(!a||!b)return!1;for(l in a)if(a[l]!=b[l])return!1;if(!c)for(l in b)if(a[l]!=b[l])return!1;return!0},objectKeys:function(a){var b=[],c;for(c in a)b.push(c);return b},convertArrayToObject:function(a,b){var c={};1==
arguments.length&&(b=!0);for(var l=0,d=a.length;l<d;++l)c[a[l]]=b;return c},fixDomain:function(){for(var a;;)try{a=window.parent.document.domain;break}catch(b){a=a?a.replace(/.+?(?:\.|$)/,""):document.domain;if(!a)break;document.domain=a}return!!a},eventsBuffer:function(a,b,c){function l(){q=(new Date).getTime();d=!1;c?b.call(c):b()}var d,q=0;return{input:function(){if(!d){var b=(new Date).getTime()-q;b<a?d=setTimeout(l,a-b):l()}},reset:function(){d&&clearTimeout(d);d=q=0}}},enableHtml5Elements:function(a,
b){for(var c="abbr article aside audio bdi canvas data datalist details figcaption figure footer header hgroup main mark meter nav output progress section summary time video".split(" "),l=c.length,d;l--;)d=a.createElement(c[l]),b&&a.appendChild(d)},checkIfAnyArrayItemMatches:function(a,b){for(var c=0,l=a.length;c<l;++c)if(a[c].match(b))return!0;return!1},checkIfAnyObjectPropertyMatches:function(a,b){for(var c in a)if(c.match(b))return!0;return!1},transparentImageData:"data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw\x3d\x3d",
getCookie:function(a){a=a.toLowerCase();for(var b=document.cookie.split(";"),c,l,d=0;d<b.length;d++)if(c=b[d].split("\x3d"),l=decodeURIComponent(CKEDITOR.tools.trim(c[0]).toLowerCase()),l===a)return decodeURIComponent(1<c.length?c[1]:"");return null},setCookie:function(a,b){document.cookie=encodeURIComponent(a)+"\x3d"+encodeURIComponent(b)+";path\x3d/"},getCsrfToken:function(){var a=CKEDITOR.tools.getCookie("ckCsrfToken");if(!a||40!=a.length){var a=[],b="";if(window.crypto&&window.crypto.getRandomValues)a=
new Uint8Array(40),window.crypto.getRandomValues(a);else for(var c=0;40>c;c++)a.push(Math.floor(256*Math.random()));for(c=0;c<a.length;c++)var l="abcdefghijklmnopqrstuvwxyz0123456789".charAt(a[c]%36),b=b+(.5<Math.random()?l.toUpperCase():l);a=b;CKEDITOR.tools.setCookie("ckCsrfToken",a)}return a},escapeCss:function(a){return a?window.CSS&&CSS.escape?CSS.escape(a):isNaN(parseInt(a.charAt(0),10))?a:"\\3"+a.charAt(0)+" "+a.substring(1,a.length):""}}})();
CKEDITOR.dtd=function(){var a=CKEDITOR.tools.extend,d=function(a,b){for(var c=CKEDITOR.tools.clone(a),l=1;l<arguments.length;l++){b=arguments[l];for(var d in b)delete c[d]}return c},b={},c={},e={address:1,article:1,aside:1,blockquote:1,details:1,div:1,dl:1,fieldset:1,figure:1,footer:1,form:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,header:1,hgroup:1,hr:1,main:1,menu:1,nav:1,ol:1,p:1,pre:1,section:1,table:1,ul:1},g={command:1,link:1,meta:1,noscript:1,script:1,style:1},k={},l={"#":1},q={center:1,dir:1,noframes:1};
a(b,{a:1,abbr:1,area:1,audio:1,b:1,bdi:1,bdo:1,br:1,button:1,canvas:1,cite:1,code:1,command:1,datalist:1,del:1,dfn:1,em:1,embed:1,i:1,iframe:1,img:1,input:1,ins:1,kbd:1,keygen:1,label:1,map:1,mark:1,meter:1,noscript:1,object:1,output:1,progress:1,q:1,ruby:1,s:1,samp:1,script:1,select:1,small:1,span:1,strong:1,sub:1,sup:1,textarea:1,time:1,u:1,"var":1,video:1,wbr:1},l,{acronym:1,applet:1,basefont:1,big:1,font:1,isindex:1,strike:1,style:1,tt:1});a(c,e,b,q);d={a:d(b,{a:1,button:1}),abbr:b,address:c,
area:k,article:c,aside:c,audio:a({source:1,track:1},c),b:b,base:k,bdi:b,bdo:b,blockquote:c,body:c,br:k,button:d(b,{a:1,button:1}),canvas:b,caption:c,cite:b,code:b,col:k,colgroup:{col:1},command:k,datalist:a({option:1},b),dd:c,del:b,details:a({summary:1},c),dfn:b,div:c,dl:{dt:1,dd:1},dt:c,em:b,embed:k,fieldset:a({legend:1},c),figcaption:c,figure:a({figcaption:1},c),footer:c,form:c,h1:b,h2:b,h3:b,h4:b,h5:b,h6:b,head:a({title:1,base:1},g),header:c,hgroup:{h1:1,h2:1,h3:1,h4:1,h5:1,h6:1},hr:k,html:a({head:1,
body:1},c,g),i:b,iframe:l,img:k,input:k,ins:b,kbd:b,keygen:k,label:b,legend:b,li:c,link:k,main:c,map:c,mark:b,menu:a({li:1},c),meta:k,meter:d(b,{meter:1}),nav:c,noscript:a({link:1,meta:1,style:1},b),object:a({param:1},b),ol:{li:1},optgroup:{option:1},option:l,output:b,p:b,param:k,pre:b,progress:d(b,{progress:1}),q:b,rp:b,rt:b,ruby:a({rp:1,rt:1},b),s:b,samp:b,script:l,section:c,select:{optgroup:1,option:1},small:b,source:k,span:b,strong:b,style:l,sub:b,summary:a({h1:1,h2:1,h3:1,h4:1,h5:1,h6:1},b),
sup:b,table:{caption:1,colgroup:1,thead:1,tfoot:1,tbody:1,tr:1},tbody:{tr:1},td:c,textarea:l,tfoot:{tr:1},th:c,thead:{tr:1},time:d(b,{time:1}),title:l,tr:{th:1,td:1},track:k,u:b,ul:{li:1},"var":b,video:a({source:1,track:1},c),wbr:k,acronym:b,applet:a({param:1},c),basefont:k,big:b,center:c,dialog:k,dir:{li:1},font:b,isindex:k,noframes:c,strike:b,tt:b};a(d,{$block:a({audio:1,dd:1,dt:1,figcaption:1,li:1,video:1},e,q),$blockLimit:{article:1,aside:1,audio:1,body:1,caption:1,details:1,dir:1,div:1,dl:1,
fieldset:1,figcaption:1,figure:1,footer:1,form:1,header:1,hgroup:1,main:1,menu:1,nav:1,ol:1,section:1,table:1,td:1,th:1,tr:1,ul:1,video:1},$cdata:{script:1,style:1},$editable:{address:1,article:1,aside:1,blockquote:1,body:1,details:1,div:1,fieldset:1,figcaption:1,footer:1,form:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,header:1,hgroup:1,main:1,nav:1,p:1,pre:1,section:1},$empty:{area:1,base:1,basefont:1,br:1,col:1,command:1,dialog:1,embed:1,hr:1,img:1,input:1,isindex:1,keygen:1,link:1,meta:1,param:1,source:1,
track:1,wbr:1},$inline:b,$list:{dl:1,ol:1,ul:1},$listItem:{dd:1,dt:1,li:1},$nonBodyContent:a({body:1,head:1,html:1},d.head),$nonEditable:{applet:1,audio:1,button:1,embed:1,iframe:1,map:1,object:1,option:1,param:1,script:1,textarea:1,video:1},$object:{applet:1,audio:1,button:1,hr:1,iframe:1,img:1,input:1,object:1,select:1,table:1,textarea:1,video:1},$removeEmpty:{abbr:1,acronym:1,b:1,bdi:1,bdo:1,big:1,cite:1,code:1,del:1,dfn:1,em:1,font:1,i:1,ins:1,label:1,kbd:1,mark:1,meter:1,output:1,q:1,ruby:1,
s:1,samp:1,small:1,span:1,strike:1,strong:1,sub:1,sup:1,time:1,tt:1,u:1,"var":1},$tabIndex:{a:1,area:1,button:1,input:1,object:1,select:1,textarea:1},$tableContent:{caption:1,col:1,colgroup:1,tbody:1,td:1,tfoot:1,th:1,thead:1,tr:1},$transparent:{a:1,audio:1,canvas:1,del:1,ins:1,map:1,noscript:1,object:1,video:1},$intermediate:{caption:1,colgroup:1,dd:1,dt:1,figcaption:1,legend:1,li:1,optgroup:1,option:1,rp:1,rt:1,summary:1,tbody:1,td:1,tfoot:1,th:1,thead:1,tr:1}});return d}();
CKEDITOR.dom.event=function(a){this.$=a};
CKEDITOR.dom.event.prototype={getKey:function(){return this.$.keyCode||this.$.which},getKeystroke:function(){var a=this.getKey();if(this.$.ctrlKey||this.$.metaKey)a+=CKEDITOR.CTRL;this.$.shiftKey&&(a+=CKEDITOR.SHIFT);this.$.altKey&&(a+=CKEDITOR.ALT);return a},preventDefault:function(a){var d=this.$;d.preventDefault?d.preventDefault():d.returnValue=!1;a&&this.stopPropagation()},stopPropagation:function(){var a=this.$;a.stopPropagation?a.stopPropagation():a.cancelBubble=!0},getTarget:function(){var a=
this.$.target||this.$.srcElement;return a?new CKEDITOR.dom.node(a):null},getPhase:function(){return this.$.eventPhase||2},getPageOffset:function(){var a=this.getTarget().getDocument().$;return{x:this.$.pageX||this.$.clientX+(a.documentElement.scrollLeft||a.body.scrollLeft),y:this.$.pageY||this.$.clientY+(a.documentElement.scrollTop||a.body.scrollTop)}}};CKEDITOR.CTRL=1114112;CKEDITOR.SHIFT=2228224;CKEDITOR.ALT=4456448;CKEDITOR.EVENT_PHASE_CAPTURING=1;CKEDITOR.EVENT_PHASE_AT_TARGET=2;
CKEDITOR.EVENT_PHASE_BUBBLING=3;CKEDITOR.dom.domObject=function(a){a&&(this.$=a)};
CKEDITOR.dom.domObject.prototype=function(){var a=function(a,b){return function(c){"undefined"!=typeof CKEDITOR&&a.fire(b,new CKEDITOR.dom.event(c))}};return{getPrivate:function(){var a;(a=this.getCustomData("_"))||this.setCustomData("_",a={});return a},on:function(d){var b=this.getCustomData("_cke_nativeListeners");b||(b={},this.setCustomData("_cke_nativeListeners",b));b[d]||(b=b[d]=a(this,d),this.$.addEventListener?this.$.addEventListener(d,b,!!CKEDITOR.event.useCapture):this.$.attachEvent&&this.$.attachEvent("on"+
d,b));return CKEDITOR.event.prototype.on.apply(this,arguments)},removeListener:function(a){CKEDITOR.event.prototype.removeListener.apply(this,arguments);if(!this.hasListeners(a)){var b=this.getCustomData("_cke_nativeListeners"),c=b&&b[a];c&&(this.$.removeEventListener?this.$.removeEventListener(a,c,!1):this.$.detachEvent&&this.$.detachEvent("on"+a,c),delete b[a])}},removeAllListeners:function(){var a=this.getCustomData("_cke_nativeListeners"),b;for(b in a){var c=a[b];this.$.detachEvent?this.$.detachEvent("on"+
b,c):this.$.removeEventListener&&this.$.removeEventListener(b,c,!1);delete a[b]}CKEDITOR.event.prototype.removeAllListeners.call(this)}}}();
(function(a){var d={};CKEDITOR.on("reset",function(){d={}});a.equals=function(a){try{return a&&a.$===this.$}catch(c){return!1}};a.setCustomData=function(a,c){var e=this.getUniqueId();(d[e]||(d[e]={}))[a]=c;return this};a.getCustomData=function(a){var c=this.$["data-cke-expando"];return(c=c&&d[c])&&a in c?c[a]:null};a.removeCustomData=function(a){var c=this.$["data-cke-expando"],c=c&&d[c],e,g;c&&(e=c[a],g=a in c,delete c[a]);return g?e:null};a.clearCustomData=function(){this.removeAllListeners();var a=
this.$["data-cke-expando"];a&&delete d[a]};a.getUniqueId=function(){return this.$["data-cke-expando"]||(this.$["data-cke-expando"]=CKEDITOR.tools.getNextNumber())};CKEDITOR.event.implementOn(a)})(CKEDITOR.dom.domObject.prototype);
CKEDITOR.dom.node=function(a){return a?new CKEDITOR.dom[a.nodeType==CKEDITOR.NODE_DOCUMENT?"document":a.nodeType==CKEDITOR.NODE_ELEMENT?"element":a.nodeType==CKEDITOR.NODE_TEXT?"text":a.nodeType==CKEDITOR.NODE_COMMENT?"comment":a.nodeType==CKEDITOR.NODE_DOCUMENT_FRAGMENT?"documentFragment":"domObject"](a):this};CKEDITOR.dom.node.prototype=new CKEDITOR.dom.domObject;CKEDITOR.NODE_ELEMENT=1;CKEDITOR.NODE_DOCUMENT=9;CKEDITOR.NODE_TEXT=3;CKEDITOR.NODE_COMMENT=8;CKEDITOR.NODE_DOCUMENT_FRAGMENT=11;
CKEDITOR.POSITION_IDENTICAL=0;CKEDITOR.POSITION_DISCONNECTED=1;CKEDITOR.POSITION_FOLLOWING=2;CKEDITOR.POSITION_PRECEDING=4;CKEDITOR.POSITION_IS_CONTAINED=8;CKEDITOR.POSITION_CONTAINS=16;
CKEDITOR.tools.extend(CKEDITOR.dom.node.prototype,{appendTo:function(a,d){a.append(this,d);return a},clone:function(a,d){function b(c){c["data-cke-expando"]&&(c["data-cke-expando"]=!1);if(c.nodeType==CKEDITOR.NODE_ELEMENT||c.nodeType==CKEDITOR.NODE_DOCUMENT_FRAGMENT)if(d||c.nodeType!=CKEDITOR.NODE_ELEMENT||c.removeAttribute("id",!1),a){c=c.childNodes;for(var e=0;e<c.length;e++)b(c[e])}}function c(b){if(b.type==CKEDITOR.NODE_ELEMENT||b.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT){if(b.type!=CKEDITOR.NODE_DOCUMENT_FRAGMENT){var d=
b.getName();":"==d[0]&&b.renameNode(d.substring(1))}if(a)for(d=0;d<b.getChildCount();d++)c(b.getChild(d))}}var e=this.$.cloneNode(a);b(e);e=new CKEDITOR.dom.node(e);CKEDITOR.env.ie&&9>CKEDITOR.env.version&&(this.type==CKEDITOR.NODE_ELEMENT||this.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT)&&c(e);return e},hasPrevious:function(){return!!this.$.previousSibling},hasNext:function(){return!!this.$.nextSibling},insertAfter:function(a){a.$.parentNode.insertBefore(this.$,a.$.nextSibling);return a},insertBefore:function(a){a.$.parentNode.insertBefore(this.$,
a.$);return a},insertBeforeMe:function(a){this.$.parentNode.insertBefore(a.$,this.$);return a},getAddress:function(a){for(var d=[],b=this.getDocument().$.documentElement,c=this.$;c&&c!=b;){var e=c.parentNode;e&&d.unshift(this.getIndex.call({$:c},a));c=e}return d},getDocument:function(){return new CKEDITOR.dom.document(this.$.ownerDocument||this.$.parentNode.ownerDocument)},getIndex:function(a){function d(a,c){var q=c?a.nextSibling:a.previousSibling;return q&&q.nodeType==CKEDITOR.NODE_TEXT?b(q)?d(q,
c):q:null}function b(a){return!a.nodeValue||a.nodeValue==CKEDITOR.dom.selection.FILLING_CHAR_SEQUENCE}var c=this.$,e=-1,g;if(!this.$.parentNode||a&&c.nodeType==CKEDITOR.NODE_TEXT&&b(c)&&!d(c)&&!d(c,!0))return-1;do a&&c!=this.$&&c.nodeType==CKEDITOR.NODE_TEXT&&(g||b(c))||(e++,g=c.nodeType==CKEDITOR.NODE_TEXT);while(c=c.previousSibling);return e},getNextSourceNode:function(a,d,b){if(b&&!b.call){var c=b;b=function(a){return!a.equals(c)}}a=!a&&this.getFirst&&this.getFirst();var e;if(!a){if(this.type==
CKEDITOR.NODE_ELEMENT&&b&&!1===b(this,!0))return null;a=this.getNext()}for(;!a&&(e=(e||this).getParent());){if(b&&!1===b(e,!0))return null;a=e.getNext()}return!a||b&&!1===b(a)?null:d&&d!=a.type?a.getNextSourceNode(!1,d,b):a},getPreviousSourceNode:function(a,d,b){if(b&&!b.call){var c=b;b=function(a){return!a.equals(c)}}a=!a&&this.getLast&&this.getLast();var e;if(!a){if(this.type==CKEDITOR.NODE_ELEMENT&&b&&!1===b(this,!0))return null;a=this.getPrevious()}for(;!a&&(e=(e||this).getParent());){if(b&&!1===
b(e,!0))return null;a=e.getPrevious()}return!a||b&&!1===b(a)?null:d&&a.type!=d?a.getPreviousSourceNode(!1,d,b):a},getPrevious:function(a){var d=this.$,b;do b=(d=d.previousSibling)&&10!=d.nodeType&&new CKEDITOR.dom.node(d);while(b&&a&&!a(b));return b},getNext:function(a){var d=this.$,b;do b=(d=d.nextSibling)&&new CKEDITOR.dom.node(d);while(b&&a&&!a(b));return b},getParent:function(a){var d=this.$.parentNode;return d&&(d.nodeType==CKEDITOR.NODE_ELEMENT||a&&d.nodeType==CKEDITOR.NODE_DOCUMENT_FRAGMENT)?
new CKEDITOR.dom.node(d):null},getParents:function(a){var d=this,b=[];do b[a?"push":"unshift"](d);while(d=d.getParent());return b},getCommonAncestor:function(a){if(a.equals(this))return this;if(a.contains&&a.contains(this))return a;var d=this.contains?this:this.getParent();do if(d.contains(a))return d;while(d=d.getParent());return null},getPosition:function(a){var d=this.$,b=a.$;if(d.compareDocumentPosition)return d.compareDocumentPosition(b);if(d==b)return CKEDITOR.POSITION_IDENTICAL;if(this.type==
CKEDITOR.NODE_ELEMENT&&a.type==CKEDITOR.NODE_ELEMENT){if(d.contains){if(d.contains(b))return CKEDITOR.POSITION_CONTAINS+CKEDITOR.POSITION_PRECEDING;if(b.contains(d))return CKEDITOR.POSITION_IS_CONTAINED+CKEDITOR.POSITION_FOLLOWING}if("sourceIndex"in d)return 0>d.sourceIndex||0>b.sourceIndex?CKEDITOR.POSITION_DISCONNECTED:d.sourceIndex<b.sourceIndex?CKEDITOR.POSITION_PRECEDING:CKEDITOR.POSITION_FOLLOWING}d=this.getAddress();a=a.getAddress();for(var b=Math.min(d.length,a.length),c=0;c<b;c++)if(d[c]!=
a[c])return d[c]<a[c]?CKEDITOR.POSITION_PRECEDING:CKEDITOR.POSITION_FOLLOWING;return d.length<a.length?CKEDITOR.POSITION_CONTAINS+CKEDITOR.POSITION_PRECEDING:CKEDITOR.POSITION_IS_CONTAINED+CKEDITOR.POSITION_FOLLOWING},getAscendant:function(a,d){var b=this.$,c,e;d||(b=b.parentNode);"function"==typeof a?(e=!0,c=a):(e=!1,c=function(b){b="string"==typeof b.nodeName?b.nodeName.toLowerCase():"";return"string"==typeof a?b==a:b in a});for(;b;){if(c(e?new CKEDITOR.dom.node(b):b))return new CKEDITOR.dom.node(b);
try{b=b.parentNode}catch(g){b=null}}return null},hasAscendant:function(a,d){var b=this.$;d||(b=b.parentNode);for(;b;){if(b.nodeName&&b.nodeName.toLowerCase()==a)return!0;b=b.parentNode}return!1},move:function(a,d){a.append(this.remove(),d)},remove:function(a){var d=this.$,b=d.parentNode;if(b){if(a)for(;a=d.firstChild;)b.insertBefore(d.removeChild(a),d);b.removeChild(d)}return this},replace:function(a){this.insertBefore(a);a.remove()},trim:function(){this.ltrim();this.rtrim()},ltrim:function(){for(var a;this.getFirst&&
(a=this.getFirst());){if(a.type==CKEDITOR.NODE_TEXT){var d=CKEDITOR.tools.ltrim(a.getText()),b=a.getLength();if(d)d.length<b&&(a.split(b-d.length),this.$.removeChild(this.$.firstChild));else{a.remove();continue}}break}},rtrim:function(){for(var a;this.getLast&&(a=this.getLast());){if(a.type==CKEDITOR.NODE_TEXT){var d=CKEDITOR.tools.rtrim(a.getText()),b=a.getLength();if(d)d.length<b&&(a.split(d.length),this.$.lastChild.parentNode.removeChild(this.$.lastChild));else{a.remove();continue}}break}CKEDITOR.env.needsBrFiller&&
(a=this.$.lastChild)&&1==a.type&&"br"==a.nodeName.toLowerCase()&&a.parentNode.removeChild(a)},isReadOnly:function(a){var d=this;this.type!=CKEDITOR.NODE_ELEMENT&&(d=this.getParent());CKEDITOR.env.edge&&d&&d.is("textarea","input")&&(a=!0);if(!a&&d&&"undefined"!=typeof d.$.isContentEditable)return!(d.$.isContentEditable||d.data("cke-editable"));for(;d;){if(d.data("cke-editable"))return!1;if(d.hasAttribute("contenteditable"))return"false"==d.getAttribute("contenteditable");d=d.getParent()}return!0}});
CKEDITOR.dom.window=function(a){CKEDITOR.dom.domObject.call(this,a)};CKEDITOR.dom.window.prototype=new CKEDITOR.dom.domObject;
CKEDITOR.tools.extend(CKEDITOR.dom.window.prototype,{focus:function(){this.$.focus()},getViewPaneSize:function(){var a=this.$.document,d="CSS1Compat"==a.compatMode;return{width:(d?a.documentElement.clientWidth:a.body.clientWidth)||0,height:(d?a.documentElement.clientHeight:a.body.clientHeight)||0}},getScrollPosition:function(){var a=this.$;if("pageXOffset"in a)return{x:a.pageXOffset||0,y:a.pageYOffset||0};a=a.document;return{x:a.documentElement.scrollLeft||a.body.scrollLeft||0,y:a.documentElement.scrollTop||
a.body.scrollTop||0}},getFrame:function(){var a=this.$.frameElement;return a?new CKEDITOR.dom.element.get(a):null}});CKEDITOR.dom.document=function(a){CKEDITOR.dom.domObject.call(this,a)};CKEDITOR.dom.document.prototype=new CKEDITOR.dom.domObject;
CKEDITOR.tools.extend(CKEDITOR.dom.document.prototype,{type:CKEDITOR.NODE_DOCUMENT,appendStyleSheet:function(a){if(this.$.createStyleSheet)this.$.createStyleSheet(a);else{var d=new CKEDITOR.dom.element("link");d.setAttributes({rel:"stylesheet",type:"text/css",href:a});this.getHead().append(d)}},appendStyleText:function(a){if(this.$.createStyleSheet){var d=this.$.createStyleSheet("");d.cssText=a}else{var b=new CKEDITOR.dom.element("style",this);b.append(new CKEDITOR.dom.text(a,this));this.getHead().append(b)}return d||
b.$.sheet},createElement:function(a,d){var b=new CKEDITOR.dom.element(a,this);d&&(d.attributes&&b.setAttributes(d.attributes),d.styles&&b.setStyles(d.styles));return b},createText:function(a){return new CKEDITOR.dom.text(a,this)},focus:function(){this.getWindow().focus()},getActive:function(){var a;try{a=this.$.activeElement}catch(d){return null}return new CKEDITOR.dom.element(a)},getById:function(a){return(a=this.$.getElementById(a))?new CKEDITOR.dom.element(a):null},getByAddress:function(a,d){for(var b=
this.$.documentElement,c=0;b&&c<a.length;c++){var e=a[c];if(d)for(var g=-1,k=0;k<b.childNodes.length;k++){var l=b.childNodes[k];if(!0!==d||3!=l.nodeType||!l.previousSibling||3!=l.previousSibling.nodeType)if(g++,g==e){b=l;break}}else b=b.childNodes[e]}return b?new CKEDITOR.dom.node(b):null},getElementsByTag:function(a,d){CKEDITOR.env.ie&&8>=document.documentMode||!d||(a=d+":"+a);return new CKEDITOR.dom.nodeList(this.$.getElementsByTagName(a))},getHead:function(){var a=this.$.getElementsByTagName("head")[0];
return a=a?new CKEDITOR.dom.element(a):this.getDocumentElement().append(new CKEDITOR.dom.element("head"),!0)},getBody:function(){return new CKEDITOR.dom.element(this.$.body)},getDocumentElement:function(){return new CKEDITOR.dom.element(this.$.documentElement)},getWindow:function(){return new CKEDITOR.dom.window(this.$.parentWindow||this.$.defaultView)},write:function(a){this.$.open("text/html","replace");CKEDITOR.env.ie&&(a=a.replace(/(?:^\s*<!DOCTYPE[^>]*?>)|^/i,'$\x26\n\x3cscript data-cke-temp\x3d"1"\x3e('+
CKEDITOR.tools.fixDomain+")();\x3c/script\x3e"));this.$.write(a);this.$.close()},find:function(a){return new CKEDITOR.dom.nodeList(this.$.querySelectorAll(a))},findOne:function(a){return(a=this.$.querySelector(a))?new CKEDITOR.dom.element(a):null},_getHtml5ShivFrag:function(){var a=this.getCustomData("html5ShivFrag");a||(a=this.$.createDocumentFragment(),CKEDITOR.tools.enableHtml5Elements(a,!0),this.setCustomData("html5ShivFrag",a));return a}});CKEDITOR.dom.nodeList=function(a){this.$=a};
CKEDITOR.dom.nodeList.prototype={count:function(){return this.$.length},getItem:function(a){return 0>a||a>=this.$.length?null:(a=this.$[a])?new CKEDITOR.dom.node(a):null}};CKEDITOR.dom.element=function(a,d){"string"==typeof a&&(a=(d?d.$:document).createElement(a));CKEDITOR.dom.domObject.call(this,a)};CKEDITOR.dom.element.get=function(a){return(a="string"==typeof a?document.getElementById(a)||document.getElementsByName(a)[0]:a)&&(a.$?a:new CKEDITOR.dom.element(a))};CKEDITOR.dom.element.prototype=new CKEDITOR.dom.node;
CKEDITOR.dom.element.createFromHtml=function(a,d){var b=new CKEDITOR.dom.element("div",d);b.setHtml(a);return b.getFirst().remove()};CKEDITOR.dom.element.setMarker=function(a,d,b,c){var e=d.getCustomData("list_marker_id")||d.setCustomData("list_marker_id",CKEDITOR.tools.getNextNumber()).getCustomData("list_marker_id"),g=d.getCustomData("list_marker_names")||d.setCustomData("list_marker_names",{}).getCustomData("list_marker_names");a[e]=d;g[b]=1;return d.setCustomData(b,c)};
CKEDITOR.dom.element.clearAllMarkers=function(a){for(var d in a)CKEDITOR.dom.element.clearMarkers(a,a[d],1)};CKEDITOR.dom.element.clearMarkers=function(a,d,b){var c=d.getCustomData("list_marker_names"),e=d.getCustomData("list_marker_id"),g;for(g in c)d.removeCustomData(g);d.removeCustomData("list_marker_names");b&&(d.removeCustomData("list_marker_id"),delete a[e])};
(function(){function a(a,b){return-1<(" "+a+" ").replace(g," ").indexOf(" "+b+" ")}function d(a){var b=!0;a.$.id||(a.$.id="cke_tmp_"+CKEDITOR.tools.getNextNumber(),b=!1);return function(){b||a.removeAttribute("id")}}function b(a,b){var c=CKEDITOR.tools.escapeCss(a.$.id);return"#"+c+" "+b.split(/,\s*/).join(", #"+c+" ")}function c(a){for(var b=0,c=0,f=k[a].length;c<f;c++)b+=parseInt(this.getComputedStyle(k[a][c])||0,10)||0;return b}var e=document.createElement("_").classList,e="undefined"!==typeof e&&
null!==String(e.add).match(/\[Native code\]/gi),g=/[\n\t\r]/g;CKEDITOR.tools.extend(CKEDITOR.dom.element.prototype,{type:CKEDITOR.NODE_ELEMENT,addClass:e?function(a){this.$.classList.add(a);return this}:function(b){var c=this.$.className;c&&(a(c,b)||(c+=" "+b));this.$.className=c||b;return this},removeClass:e?function(a){var b=this.$;b.classList.remove(a);b.className||b.removeAttribute("class");return this}:function(b){var c=this.getAttribute("class");c&&a(c,b)&&((c=c.replace(new RegExp("(?:^|\\s+)"+
b+"(?\x3d\\s|$)"),"").replace(/^\s+/,""))?this.setAttribute("class",c):this.removeAttribute("class"));return this},hasClass:function(b){return a(this.$.className,b)},append:function(a,b){"string"==typeof a&&(a=this.getDocument().createElement(a));b?this.$.insertBefore(a.$,this.$.firstChild):this.$.appendChild(a.$);return a},appendHtml:function(a){if(this.$.childNodes.length){var b=new CKEDITOR.dom.element("div",this.getDocument());b.setHtml(a);b.moveChildren(this)}else this.setHtml(a)},appendText:function(a){null!=
this.$.text&&CKEDITOR.env.ie&&9>CKEDITOR.env.version?this.$.text+=a:this.append(new CKEDITOR.dom.text(a))},appendBogus:function(a){if(a||CKEDITOR.env.needsBrFiller){for(a=this.getLast();a&&a.type==CKEDITOR.NODE_TEXT&&!CKEDITOR.tools.rtrim(a.getText());)a=a.getPrevious();a&&a.is&&a.is("br")||(a=this.getDocument().createElement("br"),CKEDITOR.env.gecko&&a.setAttribute("type","_moz"),this.append(a))}},breakParent:function(a,b){var c=new CKEDITOR.dom.range(this.getDocument());c.setStartAfter(this);c.setEndAfter(a);
var f=c.extractContents(!1,b||!1),d;c.insertNode(this.remove());if(CKEDITOR.env.ie&&!CKEDITOR.env.edge){for(c=new CKEDITOR.dom.element("div");d=f.getFirst();)d.$.style.backgroundColor&&(d.$.style.backgroundColor=d.$.style.backgroundColor),c.append(d);c.insertAfter(this);c.remove(!0)}else f.insertAfterNode(this)},contains:document.compareDocumentPosition?function(a){return!!(this.$.compareDocumentPosition(a.$)&16)}:function(a){var b=this.$;return a.type!=CKEDITOR.NODE_ELEMENT?b.contains(a.getParent().$):
b!=a.$&&b.contains(a.$)},focus:function(){function a(){try{this.$.focus()}catch(b){}}return function(b){b?CKEDITOR.tools.setTimeout(a,100,this):a.call(this)}}(),getHtml:function(){var a=this.$.innerHTML;return CKEDITOR.env.ie?a.replace(/<\?[^>]*>/g,""):a},getOuterHtml:function(){if(this.$.outerHTML)return this.$.outerHTML.replace(/<\?[^>]*>/,"");var a=this.$.ownerDocument.createElement("div");a.appendChild(this.$.cloneNode(!0));return a.innerHTML},getClientRect:function(){var a=CKEDITOR.tools.extend({},
this.$.getBoundingClientRect());!a.width&&(a.width=a.right-a.left);!a.height&&(a.height=a.bottom-a.top);return a},setHtml:CKEDITOR.env.ie&&9>CKEDITOR.env.version?function(a){try{var b=this.$;if(this.getParent())return b.innerHTML=a;var c=this.getDocument()._getHtml5ShivFrag();c.appendChild(b);b.innerHTML=a;c.removeChild(b);return a}catch(f){this.$.innerHTML="";b=new CKEDITOR.dom.element("body",this.getDocument());b.$.innerHTML=a;for(b=b.getChildren();b.count();)this.append(b.getItem(0));return a}}:
function(a){return this.$.innerHTML=a},setText:function(){var a=document.createElement("p");a.innerHTML="x";a=a.textContent;return function(b){this.$[a?"textContent":"innerText"]=b}}(),getAttribute:function(){var a=function(a){return this.$.getAttribute(a,2)};return CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.quirks)?function(a){switch(a){case "class":a="className";break;case "http-equiv":a="httpEquiv";break;case "name":return this.$.name;case "tabindex":return a=this.$.getAttribute(a,
2),0!==a&&0===this.$.tabIndex&&(a=null),a;case "checked":return a=this.$.attributes.getNamedItem(a),(a.specified?a.nodeValue:this.$.checked)?"checked":null;case "hspace":case "value":return this.$[a];case "style":return this.$.style.cssText;case "contenteditable":case "contentEditable":return this.$.attributes.getNamedItem("contentEditable").specified?this.$.getAttribute("contentEditable"):null}return this.$.getAttribute(a,2)}:a}(),getAttributes:function(a){var b={},c=this.$.attributes,f;a=CKEDITOR.tools.isArray(a)?
a:[];for(f=0;f<c.length;f++)-1===CKEDITOR.tools.indexOf(a,c[f].name)&&(b[c[f].name]=c[f].value);return b},getChildren:function(){return new CKEDITOR.dom.nodeList(this.$.childNodes)},getComputedStyle:document.defaultView&&document.defaultView.getComputedStyle?function(a){var b=this.getWindow().$.getComputedStyle(this.$,null);return b?b.getPropertyValue(a):""}:function(a){return this.$.currentStyle[CKEDITOR.tools.cssStyleToDomStyle(a)]},getDtd:function(){var a=CKEDITOR.dtd[this.getName()];this.getDtd=
function(){return a};return a},getElementsByTag:CKEDITOR.dom.document.prototype.getElementsByTag,getTabIndex:function(){var a=this.$.tabIndex;return 0!==a||CKEDITOR.dtd.$tabIndex[this.getName()]||0===parseInt(this.getAttribute("tabindex"),10)?a:-1},getText:function(){return this.$.textContent||this.$.innerText||""},getWindow:function(){return this.getDocument().getWindow()},getId:function(){return this.$.id||null},getNameAtt:function(){return this.$.name||null},getName:function(){var a=this.$.nodeName.toLowerCase();
if(CKEDITOR.env.ie&&8>=document.documentMode){var b=this.$.scopeName;"HTML"!=b&&(a=b.toLowerCase()+":"+a)}this.getName=function(){return a};return this.getName()},getValue:function(){return this.$.value},getFirst:function(a){var b=this.$.firstChild;(b=b&&new CKEDITOR.dom.node(b))&&a&&!a(b)&&(b=b.getNext(a));return b},getLast:function(a){var b=this.$.lastChild;(b=b&&new CKEDITOR.dom.node(b))&&a&&!a(b)&&(b=b.getPrevious(a));return b},getStyle:function(a){return this.$.style[CKEDITOR.tools.cssStyleToDomStyle(a)]},
is:function(){var a=this.getName();if("object"==typeof arguments[0])return!!arguments[0][a];for(var b=0;b<arguments.length;b++)if(arguments[b]==a)return!0;return!1},isEditable:function(a){var b=this.getName();return this.isReadOnly()||"none"==this.getComputedStyle("display")||"hidden"==this.getComputedStyle("visibility")||CKEDITOR.dtd.$nonEditable[b]||CKEDITOR.dtd.$empty[b]||this.is("a")&&(this.data("cke-saved-name")||this.hasAttribute("name"))&&!this.getChildCount()?!1:!1!==a?(a=CKEDITOR.dtd[b]||
CKEDITOR.dtd.span,!(!a||!a["#"])):!0},isIdentical:function(a){var b=this.clone(0,1);a=a.clone(0,1);b.removeAttributes(["_moz_dirty","data-cke-expando","data-cke-saved-href","data-cke-saved-name"]);a.removeAttributes(["_moz_dirty","data-cke-expando","data-cke-saved-href","data-cke-saved-name"]);if(b.$.isEqualNode)return b.$.style.cssText=CKEDITOR.tools.normalizeCssText(b.$.style.cssText),a.$.style.cssText=CKEDITOR.tools.normalizeCssText(a.$.style.cssText),b.$.isEqualNode(a.$);b=b.getOuterHtml();a=
a.getOuterHtml();if(CKEDITOR.env.ie&&9>CKEDITOR.env.version&&this.is("a")){var c=this.getParent();c.type==CKEDITOR.NODE_ELEMENT&&(c=c.clone(),c.setHtml(b),b=c.getHtml(),c.setHtml(a),a=c.getHtml())}return b==a},isVisible:function(){var a=(this.$.offsetHeight||this.$.offsetWidth)&&"hidden"!=this.getComputedStyle("visibility"),b,c;a&&CKEDITOR.env.webkit&&(b=this.getWindow(),!b.equals(CKEDITOR.document.getWindow())&&(c=b.$.frameElement)&&(a=(new CKEDITOR.dom.element(c)).isVisible()));return!!a},isEmptyInlineRemoveable:function(){if(!CKEDITOR.dtd.$removeEmpty[this.getName()])return!1;
for(var a=this.getChildren(),b=0,c=a.count();b<c;b++){var f=a.getItem(b);if(f.type!=CKEDITOR.NODE_ELEMENT||!f.data("cke-bookmark"))if(f.type==CKEDITOR.NODE_ELEMENT&&!f.isEmptyInlineRemoveable()||f.type==CKEDITOR.NODE_TEXT&&CKEDITOR.tools.trim(f.getText()))return!1}return!0},hasAttributes:CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.quirks)?function(){for(var a=this.$.attributes,b=0;b<a.length;b++){var c=a[b];switch(c.nodeName){case "class":if(this.getAttribute("class"))return!0;case "data-cke-expando":continue;
default:if(c.specified)return!0}}return!1}:function(){var a=this.$.attributes,b=a.length,c={"data-cke-expando":1,_moz_dirty:1};return 0<b&&(2<b||!c[a[0].nodeName]||2==b&&!c[a[1].nodeName])},hasAttribute:function(){function a(b){var c=this.$.attributes.getNamedItem(b);if("input"==this.getName())switch(b){case "class":return 0<this.$.className.length;case "checked":return!!this.$.checked;case "value":return b=this.getAttribute("type"),"checkbox"==b||"radio"==b?"on"!=this.$.value:!!this.$.value}return c?
c.specified:!1}return CKEDITOR.env.ie?8>CKEDITOR.env.version?function(b){return"name"==b?!!this.$.name:a.call(this,b)}:a:function(a){return!!this.$.attributes.getNamedItem(a)}}(),hide:function(){this.setStyle("display","none")},moveChildren:function(a,b){var c=this.$;a=a.$;if(c!=a){var f;if(b)for(;f=c.lastChild;)a.insertBefore(c.removeChild(f),a.firstChild);else for(;f=c.firstChild;)a.appendChild(c.removeChild(f))}},mergeSiblings:function(){function a(b,c,f){if(c&&c.type==CKEDITOR.NODE_ELEMENT){for(var d=
[];c.data("cke-bookmark")||c.isEmptyInlineRemoveable();)if(d.push(c),c=f?c.getNext():c.getPrevious(),!c||c.type!=CKEDITOR.NODE_ELEMENT)return;if(b.isIdentical(c)){for(var l=f?b.getLast():b.getFirst();d.length;)d.shift().move(b,!f);c.moveChildren(b,!f);c.remove();l&&l.type==CKEDITOR.NODE_ELEMENT&&l.mergeSiblings()}}}return function(b){if(!1===b||CKEDITOR.dtd.$removeEmpty[this.getName()]||this.is("a"))a(this,this.getNext(),!0),a(this,this.getPrevious())}}(),show:function(){this.setStyles({display:"",
visibility:""})},setAttribute:function(){var a=function(a,b){this.$.setAttribute(a,b);return this};return CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.quirks)?function(b,c){"class"==b?this.$.className=c:"style"==b?this.$.style.cssText=c:"tabindex"==b?this.$.tabIndex=c:"checked"==b?this.$.checked=c:"contenteditable"==b?a.call(this,"contentEditable",c):a.apply(this,arguments);return this}:CKEDITOR.env.ie8Compat&&CKEDITOR.env.secure?function(b,c){if("src"==b&&c.match(/^http:\/\//))try{a.apply(this,
arguments)}catch(f){}else a.apply(this,arguments);return this}:a}(),setAttributes:function(a){for(var b in a)this.setAttribute(b,a[b]);return this},setValue:function(a){this.$.value=a;return this},removeAttribute:function(){var a=function(a){this.$.removeAttribute(a)};return CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.quirks)?function(a){"class"==a?a="className":"tabindex"==a?a="tabIndex":"contenteditable"==a&&(a="contentEditable");this.$.removeAttribute(a)}:a}(),removeAttributes:function(a){if(CKEDITOR.tools.isArray(a))for(var b=
0;b<a.length;b++)this.removeAttribute(a[b]);else for(b in a=a||this.getAttributes(),a)a.hasOwnProperty(b)&&this.removeAttribute(b)},removeStyle:function(a){var b=this.$.style;if(b.removeProperty||"border"!=a&&"margin"!=a&&"padding"!=a)b.removeProperty?b.removeProperty(a):b.removeAttribute(CKEDITOR.tools.cssStyleToDomStyle(a)),this.$.style.cssText||this.removeAttribute("style");else{var c=["top","left","right","bottom"],f;"border"==a&&(f=["color","style","width"]);for(var b=[],d=0;d<c.length;d++)if(f)for(var e=
0;e<f.length;e++)b.push([a,c[d],f[e]].join("-"));else b.push([a,c[d]].join("-"));for(a=0;a<b.length;a++)this.removeStyle(b[a])}},setStyle:function(a,b){this.$.style[CKEDITOR.tools.cssStyleToDomStyle(a)]=b;return this},setStyles:function(a){for(var b in a)this.setStyle(b,a[b]);return this},setOpacity:function(a){CKEDITOR.env.ie&&9>CKEDITOR.env.version?(a=Math.round(100*a),this.setStyle("filter",100<=a?"":"progid:DXImageTransform.Microsoft.Alpha(opacity\x3d"+a+")")):this.setStyle("opacity",a)},unselectable:function(){this.setStyles(CKEDITOR.tools.cssVendorPrefix("user-select",
"none"));if(CKEDITOR.env.ie){this.setAttribute("unselectable","on");for(var a,b=this.getElementsByTag("*"),c=0,f=b.count();c<f;c++)a=b.getItem(c),a.setAttribute("unselectable","on")}},getPositionedAncestor:function(){for(var a=this;"html"!=a.getName();){if("static"!=a.getComputedStyle("position"))return a;a=a.getParent()}return null},getDocumentPosition:function(a){var b=0,c=0,f=this.getDocument(),d=f.getBody(),e="BackCompat"==f.$.compatMode;if(document.documentElement.getBoundingClientRect&&(CKEDITOR.env.ie?
8!==CKEDITOR.env.version:1)){var r=this.$.getBoundingClientRect(),g=f.$.documentElement,n=g.clientTop||d.$.clientTop||0,w=g.clientLeft||d.$.clientLeft||0,k=!0;CKEDITOR.env.ie&&(k=f.getDocumentElement().contains(this),f=f.getBody().contains(this),k=e&&f||!e&&k);k&&(CKEDITOR.env.webkit||CKEDITOR.env.ie&&12<=CKEDITOR.env.version?(b=d.$.scrollLeft||g.scrollLeft,c=d.$.scrollTop||g.scrollTop):(c=e?d.$:g,b=c.scrollLeft,c=c.scrollTop),b=r.left+b-w,c=r.top+c-n)}else for(n=this,w=null;n&&"body"!=n.getName()&&
"html"!=n.getName();){b+=n.$.offsetLeft-n.$.scrollLeft;c+=n.$.offsetTop-n.$.scrollTop;n.equals(this)||(b+=n.$.clientLeft||0,c+=n.$.clientTop||0);for(;w&&!w.equals(n);)b-=w.$.scrollLeft,c-=w.$.scrollTop,w=w.getParent();w=n;n=(r=n.$.offsetParent)?new CKEDITOR.dom.element(r):null}a&&(r=this.getWindow(),n=a.getWindow(),!r.equals(n)&&r.$.frameElement&&(a=(new CKEDITOR.dom.element(r.$.frameElement)).getDocumentPosition(a),b+=a.x,c+=a.y));document.documentElement.getBoundingClientRect||!CKEDITOR.env.gecko||
e||(b+=this.$.clientLeft?1:0,c+=this.$.clientTop?1:0);return{x:b,y:c}},scrollIntoView:function(a){var b=this.getParent();if(b){do if((b.$.clientWidth&&b.$.clientWidth<b.$.scrollWidth||b.$.clientHeight&&b.$.clientHeight<b.$.scrollHeight)&&!b.is("body")&&this.scrollIntoParent(b,a,1),b.is("html")){var c=b.getWindow();try{var f=c.$.frameElement;f&&(b=new CKEDITOR.dom.element(f))}catch(d){}}while(b=b.getParent())}},scrollIntoParent:function(a,b,c){var f,d,e,r;function g(b,c){/body|html/.test(a.getName())?
a.getWindow().$.scrollBy(b,c):(a.$.scrollLeft+=b,a.$.scrollTop+=c)}function n(a,b){var c={x:0,y:0};if(!a.is(k?"body":"html")){var f=a.$.getBoundingClientRect();c.x=f.left;c.y=f.top}f=a.getWindow();f.equals(b)||(f=n(CKEDITOR.dom.element.get(f.$.frameElement),b),c.x+=f.x,c.y+=f.y);return c}function w(a,b){return parseInt(a.getComputedStyle("margin-"+b)||0,10)||0}!a&&(a=this.getWindow());e=a.getDocument();var k="BackCompat"==e.$.compatMode;a instanceof CKEDITOR.dom.window&&(a=k?e.getBody():e.getDocumentElement());
e=a.getWindow();d=n(this,e);var u=n(a,e),t=this.$.offsetHeight;f=this.$.offsetWidth;var h=a.$.clientHeight,p=a.$.clientWidth;e=d.x-w(this,"left")-u.x||0;r=d.y-w(this,"top")-u.y||0;f=d.x+f+w(this,"right")-(u.x+p)||0;d=d.y+t+w(this,"bottom")-(u.y+h)||0;(0>r||0<d)&&g(0,!0===b?r:!1===b?d:0>r?r:d);c&&(0>e||0<f)&&g(0>e?e:f,0)},setState:function(a,b,c){b=b||"cke";switch(a){case CKEDITOR.TRISTATE_ON:this.addClass(b+"_on");this.removeClass(b+"_off");this.removeClass(b+"_disabled");c&&this.setAttribute("aria-pressed",
!0);c&&this.removeAttribute("aria-disabled");break;case CKEDITOR.TRISTATE_DISABLED:this.addClass(b+"_disabled");this.removeClass(b+"_off");this.removeClass(b+"_on");c&&this.setAttribute("aria-disabled",!0);c&&this.removeAttribute("aria-pressed");break;default:this.addClass(b+"_off"),this.removeClass(b+"_on"),this.removeClass(b+"_disabled"),c&&this.removeAttribute("aria-pressed"),c&&this.removeAttribute("aria-disabled")}},getFrameDocument:function(){var a=this.$;try{a.contentWindow.document}catch(b){a.src=
a.src}return a&&new CKEDITOR.dom.document(a.contentWindow.document)},copyAttributes:function(a,b){var c=this.$.attributes;b=b||{};for(var f=0;f<c.length;f++){var d=c[f],e=d.nodeName.toLowerCase(),r;if(!(e in b))if("checked"==e&&(r=this.getAttribute(e)))a.setAttribute(e,r);else if(!CKEDITOR.env.ie||this.hasAttribute(e))r=this.getAttribute(e),null===r&&(r=d.nodeValue),a.setAttribute(e,r)}""!==this.$.style.cssText&&(a.$.style.cssText=this.$.style.cssText)},renameNode:function(a){if(this.getName()!=a){var b=
this.getDocument();a=new CKEDITOR.dom.element(a,b);this.copyAttributes(a);this.moveChildren(a);this.getParent(!0)&&this.$.parentNode.replaceChild(a.$,this.$);a.$["data-cke-expando"]=this.$["data-cke-expando"];this.$=a.$;delete this.getName}},getChild:function(){function a(b,c){var f=b.childNodes;if(0<=c&&c<f.length)return f[c]}return function(b){var c=this.$;if(b.slice)for(b=b.slice();0<b.length&&c;)c=a(c,b.shift());else c=a(c,b);return c?new CKEDITOR.dom.node(c):null}}(),getChildCount:function(){return this.$.childNodes.length},
disableContextMenu:function(){function a(b){return b.type==CKEDITOR.NODE_ELEMENT&&b.hasClass("cke_enable_context_menu")}this.on("contextmenu",function(b){b.data.getTarget().getAscendant(a,!0)||b.data.preventDefault()})},getDirection:function(a){return a?this.getComputedStyle("direction")||this.getDirection()||this.getParent()&&this.getParent().getDirection(1)||this.getDocument().$.dir||"ltr":this.getStyle("direction")||this.getAttribute("dir")},data:function(a,b){a="data-"+a;if(void 0===b)return this.getAttribute(a);
!1===b?this.removeAttribute(a):this.setAttribute(a,b);return null},getEditor:function(){var a=CKEDITOR.instances,b,c;for(b in a)if(c=a[b],c.element.equals(this)&&c.elementMode!=CKEDITOR.ELEMENT_MODE_APPENDTO)return c;return null},find:function(a){var c=d(this);a=new CKEDITOR.dom.nodeList(this.$.querySelectorAll(b(this,a)));c();return a},findOne:function(a){var c=d(this);a=this.$.querySelector(b(this,a));c();return a?new CKEDITOR.dom.element(a):null},forEach:function(a,b,c){if(!(c||b&&this.type!=b))var f=
a(this);if(!1!==f){c=this.getChildren();for(var d=0;d<c.count();d++)f=c.getItem(d),f.type==CKEDITOR.NODE_ELEMENT?f.forEach(a,b):b&&f.type!=b||a(f)}}});var k={width:["border-left-width","border-right-width","padding-left","padding-right"],height:["border-top-width","border-bottom-width","padding-top","padding-bottom"]};CKEDITOR.dom.element.prototype.setSize=function(a,b,d){"number"==typeof b&&(!d||CKEDITOR.env.ie&&CKEDITOR.env.quirks||(b-=c.call(this,a)),this.setStyle(a,b+"px"))};CKEDITOR.dom.element.prototype.getSize=
function(a,b){var d=Math.max(this.$["offset"+CKEDITOR.tools.capitalize(a)],this.$["client"+CKEDITOR.tools.capitalize(a)])||0;b&&(d-=c.call(this,a));return d}})();CKEDITOR.dom.documentFragment=function(a){a=a||CKEDITOR.document;this.$=a.type==CKEDITOR.NODE_DOCUMENT?a.$.createDocumentFragment():a};
CKEDITOR.tools.extend(CKEDITOR.dom.documentFragment.prototype,CKEDITOR.dom.element.prototype,{type:CKEDITOR.NODE_DOCUMENT_FRAGMENT,insertAfterNode:function(a){a=a.$;a.parentNode.insertBefore(this.$,a.nextSibling)},getHtml:function(){var a=new CKEDITOR.dom.element("div");this.clone(1,1).appendTo(a);return a.getHtml().replace(/\s*data-cke-expando=".*?"/g,"")}},!0,{append:1,appendBogus:1,clone:1,getFirst:1,getHtml:1,getLast:1,getParent:1,getNext:1,getPrevious:1,appendTo:1,moveChildren:1,insertBefore:1,
insertAfterNode:1,replace:1,trim:1,type:1,ltrim:1,rtrim:1,getDocument:1,getChildCount:1,getChild:1,getChildren:1});
(function(){function a(a,b){var c=this.range;if(this._.end)return null;if(!this._.start){this._.start=1;if(c.collapsed)return this.end(),null;c.optimize()}var f,d=c.startContainer;f=c.endContainer;var e=c.startOffset,y=c.endOffset,t,h=this.guard,p=this.type,m=a?"getPreviousSourceNode":"getNextSourceNode";if(!a&&!this._.guardLTR){var x=f.type==CKEDITOR.NODE_ELEMENT?f:f.getParent(),z=f.type==CKEDITOR.NODE_ELEMENT?f.getChild(y):f.getNext();this._.guardLTR=function(a,b){return(!b||!x.equals(a))&&(!z||
!a.equals(z))&&(a.type!=CKEDITOR.NODE_ELEMENT||!b||!a.equals(c.root))}}if(a&&!this._.guardRTL){var F=d.type==CKEDITOR.NODE_ELEMENT?d:d.getParent(),g=d.type==CKEDITOR.NODE_ELEMENT?e?d.getChild(e-1):null:d.getPrevious();this._.guardRTL=function(a,b){return(!b||!F.equals(a))&&(!g||!a.equals(g))&&(a.type!=CKEDITOR.NODE_ELEMENT||!b||!a.equals(c.root))}}var k=a?this._.guardRTL:this._.guardLTR;t=h?function(a,b){return!1===k(a,b)?!1:h(a,b)}:k;this.current?f=this.current[m](!1,p,t):(a?f.type==CKEDITOR.NODE_ELEMENT&&
(f=0<y?f.getChild(y-1):!1===t(f,!0)?null:f.getPreviousSourceNode(!0,p,t)):(f=d,f.type==CKEDITOR.NODE_ELEMENT&&((f=f.getChild(e))||(f=!1===t(d,!0)?null:d.getNextSourceNode(!0,p,t)))),f&&!1===t(f)&&(f=null));for(;f&&!this._.end;){this.current=f;if(!this.evaluator||!1!==this.evaluator(f)){if(!b)return f}else if(b&&this.evaluator)return!1;f=f[m](!1,p,t)}this.end();return this.current=null}function d(b){for(var c,f=null;c=a.call(this,b);)f=c;return f}CKEDITOR.dom.walker=CKEDITOR.tools.createClass({$:function(a){this.range=
a;this._={}},proto:{end:function(){this._.end=1},next:function(){return a.call(this)},previous:function(){return a.call(this,1)},checkForward:function(){return!1!==a.call(this,0,1)},checkBackward:function(){return!1!==a.call(this,1,1)},lastForward:function(){return d.call(this)},lastBackward:function(){return d.call(this,1)},reset:function(){delete this.current;this._={}}}});var b={block:1,"list-item":1,table:1,"table-row-group":1,"table-header-group":1,"table-footer-group":1,"table-row":1,"table-column-group":1,
"table-column":1,"table-cell":1,"table-caption":1},c={absolute:1,fixed:1};CKEDITOR.dom.element.prototype.isBlockBoundary=function(a){return"none"!=this.getComputedStyle("float")||this.getComputedStyle("position")in c||!b[this.getComputedStyle("display")]?!!(this.is(CKEDITOR.dtd.$block)||a&&this.is(a)):!0};CKEDITOR.dom.walker.blockBoundary=function(a){return function(b){return!(b.type==CKEDITOR.NODE_ELEMENT&&b.isBlockBoundary(a))}};CKEDITOR.dom.walker.listItemBoundary=function(){return this.blockBoundary({br:1})};
CKEDITOR.dom.walker.bookmark=function(a,b){function c(a){return a&&a.getName&&"span"==a.getName()&&a.data("cke-bookmark")}return function(f){var d,e;d=f&&f.type!=CKEDITOR.NODE_ELEMENT&&(e=f.getParent())&&c(e);d=a?d:d||c(f);return!!(b^d)}};CKEDITOR.dom.walker.whitespaces=function(a){return function(b){var c;b&&b.type==CKEDITOR.NODE_TEXT&&(c=!CKEDITOR.tools.trim(b.getText())||CKEDITOR.env.webkit&&b.getText()==CKEDITOR.dom.selection.FILLING_CHAR_SEQUENCE);return!!(a^c)}};CKEDITOR.dom.walker.invisible=
function(a){var b=CKEDITOR.dom.walker.whitespaces(),c=CKEDITOR.env.webkit?1:0;return function(f){b(f)?f=1:(f.type==CKEDITOR.NODE_TEXT&&(f=f.getParent()),f=f.$.offsetWidth<=c);return!!(a^f)}};CKEDITOR.dom.walker.nodeType=function(a,b){return function(c){return!!(b^c.type==a)}};CKEDITOR.dom.walker.bogus=function(a){function b(a){return!g(a)&&!k(a)}return function(c){var f=CKEDITOR.env.needsBrFiller?c.is&&c.is("br"):c.getText&&e.test(c.getText());f&&(f=c.getParent(),c=c.getNext(b),f=f.isBlockBoundary()&&
(!c||c.type==CKEDITOR.NODE_ELEMENT&&c.isBlockBoundary()));return!!(a^f)}};CKEDITOR.dom.walker.temp=function(a){return function(b){b.type!=CKEDITOR.NODE_ELEMENT&&(b=b.getParent());b=b&&b.hasAttribute("data-cke-temp");return!!(a^b)}};var e=/^[\t\r\n ]*(?:&nbsp;|\xa0)$/,g=CKEDITOR.dom.walker.whitespaces(),k=CKEDITOR.dom.walker.bookmark(),l=CKEDITOR.dom.walker.temp(),q=function(a){return k(a)||g(a)||a.type==CKEDITOR.NODE_ELEMENT&&a.is(CKEDITOR.dtd.$inline)&&!a.is(CKEDITOR.dtd.$empty)};CKEDITOR.dom.walker.ignored=
function(a){return function(b){b=g(b)||k(b)||l(b);return!!(a^b)}};var v=CKEDITOR.dom.walker.ignored();CKEDITOR.dom.walker.empty=function(a){return function(b){for(var c=0,f=b.getChildCount();c<f;++c)if(!v(b.getChild(c)))return!!a;return!a}};var f=CKEDITOR.dom.walker.empty(),y=CKEDITOR.dom.walker.validEmptyBlockContainers=CKEDITOR.tools.extend(function(a){var b={},c;for(c in a)CKEDITOR.dtd[c]["#"]&&(b[c]=1);return b}(CKEDITOR.dtd.$block),{caption:1,td:1,th:1});CKEDITOR.dom.walker.editable=function(a){return function(b){b=
v(b)?!1:b.type==CKEDITOR.NODE_TEXT||b.type==CKEDITOR.NODE_ELEMENT&&(b.is(CKEDITOR.dtd.$inline)||b.is("hr")||"false"==b.getAttribute("contenteditable")||!CKEDITOR.env.needsBrFiller&&b.is(y)&&f(b))?!0:!1;return!!(a^b)}};CKEDITOR.dom.element.prototype.getBogus=function(){var a=this;do a=a.getPreviousSourceNode();while(q(a));return a&&(CKEDITOR.env.needsBrFiller?a.is&&a.is("br"):a.getText&&e.test(a.getText()))?a:!1}})();
CKEDITOR.dom.range=function(a){this.endOffset=this.endContainer=this.startOffset=this.startContainer=null;this.collapsed=!0;var d=a instanceof CKEDITOR.dom.document;this.document=d?a:a.getDocument();this.root=d?a.getBody():a};
(function(){function a(a){a.collapsed=a.startContainer&&a.endContainer&&a.startContainer.equals(a.endContainer)&&a.startOffset==a.endOffset}function d(a,b,c,d,e){function n(a,b,c,f){var d=c?a.getPrevious():a.getNext();if(f&&l)return d;h||f?b.append(a.clone(!0,e),c):(a.remove(),t&&b.append(a));return d}function g(){var a,b,c,f=Math.min(N.length,C.length);for(a=0;a<f;a++)if(b=N[a],c=C[a],!b.equals(c))return a;return a-1}function k(){var b=I-1,c=E&&v&&!p.equals(m);b<G-1||b<K-1||c?(c?a.moveToPosition(m,
CKEDITOR.POSITION_BEFORE_START):K==b+1&&B?a.moveToPosition(C[b],CKEDITOR.POSITION_BEFORE_END):a.moveToPosition(C[b+1],CKEDITOR.POSITION_BEFORE_START),d&&(b=N[b+1])&&b.type==CKEDITOR.NODE_ELEMENT&&(c=CKEDITOR.dom.element.createFromHtml('\x3cspan data-cke-bookmark\x3d"1" style\x3d"display:none"\x3e\x26nbsp;\x3c/span\x3e',a.document),c.insertAfter(b),b.mergeSiblings(!1),a.moveToBookmark({startNode:c}))):a.collapse(!0)}a.optimizeBookmark();var l=0===b,t=1==b,h=2==b;b=h||t;var p=a.startContainer,m=a.endContainer,
x=a.startOffset,z=a.endOffset,F,B,E,v,q,O;if(h&&m.type==CKEDITOR.NODE_TEXT&&p.equals(m))p=a.document.createText(p.substring(x,z)),c.append(p);else{m.type==CKEDITOR.NODE_TEXT?h?O=!0:m=m.split(z):0<m.getChildCount()?z>=m.getChildCount()?(m=m.getChild(z-1),B=!0):m=m.getChild(z):v=B=!0;p.type==CKEDITOR.NODE_TEXT?h?q=!0:p.split(x):0<p.getChildCount()?0===x?(p=p.getChild(x),F=!0):p=p.getChild(x-1):E=F=!0;for(var N=p.getParents(),C=m.getParents(),I=g(),G=N.length-1,K=C.length-1,J=c,L,Z,U,fa=-1,Q=I;Q<=G;Q++){Z=
N[Q];U=Z.getNext();for(Q!=G||Z.equals(C[Q])&&G<K?b&&(L=J.append(Z.clone(0,e))):F?n(Z,J,!1,E):q&&J.append(a.document.createText(Z.substring(x)));U;){if(U.equals(C[Q])){fa=Q;break}U=n(U,J)}J=L}J=c;for(Q=I;Q<=K;Q++)if(c=C[Q],U=c.getPrevious(),c.equals(N[Q]))b&&(J=J.getChild(0));else{Q!=K||c.equals(N[Q])&&K<G?b&&(L=J.append(c.clone(0,e))):B?n(c,J,!1,v):O&&J.append(a.document.createText(c.substring(0,z)));if(Q>fa)for(;U;)U=n(U,J,!0);J=L}h||k()}}function b(){var a=!1,b=CKEDITOR.dom.walker.whitespaces(),
c=CKEDITOR.dom.walker.bookmark(!0),d=CKEDITOR.dom.walker.bogus();return function(e){return c(e)||b(e)?!0:d(e)&&!a?a=!0:e.type==CKEDITOR.NODE_TEXT&&(e.hasAscendant("pre")||CKEDITOR.tools.trim(e.getText()).length)||e.type==CKEDITOR.NODE_ELEMENT&&!e.is(g)?!1:!0}}function c(a){var b=CKEDITOR.dom.walker.whitespaces(),c=CKEDITOR.dom.walker.bookmark(1);return function(d){return c(d)||b(d)?!0:!a&&k(d)||d.type==CKEDITOR.NODE_ELEMENT&&d.is(CKEDITOR.dtd.$removeEmpty)}}function e(a){return function(){var b;return this[a?
"getPreviousNode":"getNextNode"](function(a){!b&&v(a)&&(b=a);return q(a)&&!(k(a)&&a.equals(b))})}}var g={abbr:1,acronym:1,b:1,bdo:1,big:1,cite:1,code:1,del:1,dfn:1,em:1,font:1,i:1,ins:1,label:1,kbd:1,q:1,samp:1,small:1,span:1,strike:1,strong:1,sub:1,sup:1,tt:1,u:1,"var":1},k=CKEDITOR.dom.walker.bogus(),l=/^[\t\r\n ]*(?:&nbsp;|\xa0)$/,q=CKEDITOR.dom.walker.editable(),v=CKEDITOR.dom.walker.ignored(!0);CKEDITOR.dom.range.prototype={clone:function(){var a=new CKEDITOR.dom.range(this.root);a._setStartContainer(this.startContainer);
a.startOffset=this.startOffset;a._setEndContainer(this.endContainer);a.endOffset=this.endOffset;a.collapsed=this.collapsed;return a},collapse:function(a){a?(this._setEndContainer(this.startContainer),this.endOffset=this.startOffset):(this._setStartContainer(this.endContainer),this.startOffset=this.endOffset);this.collapsed=!0},cloneContents:function(a){var b=new CKEDITOR.dom.documentFragment(this.document);this.collapsed||d(this,2,b,!1,"undefined"==typeof a?!0:a);return b},deleteContents:function(a){this.collapsed||
d(this,0,null,a)},extractContents:function(a,b){var c=new CKEDITOR.dom.documentFragment(this.document);this.collapsed||d(this,1,c,a,"undefined"==typeof b?!0:b);return c},createBookmark:function(a){var b,c,d,e,n=this.collapsed;b=this.document.createElement("span");b.data("cke-bookmark",1);b.setStyle("display","none");b.setHtml("\x26nbsp;");a&&(d="cke_bm_"+CKEDITOR.tools.getNextNumber(),b.setAttribute("id",d+(n?"C":"S")));n||(c=b.clone(),c.setHtml("\x26nbsp;"),a&&c.setAttribute("id",d+"E"),e=this.clone(),
e.collapse(),e.insertNode(c));e=this.clone();e.collapse(!0);e.insertNode(b);c?(this.setStartAfter(b),this.setEndBefore(c)):this.moveToPosition(b,CKEDITOR.POSITION_AFTER_END);return{startNode:a?d+(n?"C":"S"):b,endNode:a?d+"E":c,serializable:a,collapsed:n}},createBookmark2:function(){function a(b){var f=b.container,d=b.offset,e;e=f;var g=d;e=e.type!=CKEDITOR.NODE_ELEMENT||0===g||g==e.getChildCount()?0:e.getChild(g-1).type==CKEDITOR.NODE_TEXT&&e.getChild(g).type==CKEDITOR.NODE_TEXT;e&&(f=f.getChild(d-
1),d=f.getLength());if(f.type==CKEDITOR.NODE_ELEMENT&&0<d){a:{for(e=f;d--;)if(g=e.getChild(d).getIndex(!0),0<=g){d=g;break a}d=-1}d+=1}if(f.type==CKEDITOR.NODE_TEXT){e=f;for(g=0;(e=e.getPrevious())&&e.type==CKEDITOR.NODE_TEXT;)g+=e.getText().replace(CKEDITOR.dom.selection.FILLING_CHAR_SEQUENCE,"").length;e=g;f.getText()?d+=e:(g=f.getPrevious(c),e?(d=e,f=g?g.getNext():f.getParent().getFirst()):(f=f.getParent(),d=g?g.getIndex(!0)+1:0))}b.container=f;b.offset=d}function b(a,c){var f=c.getCustomData("cke-fillingChar");
if(f){var d=a.container;f.equals(d)&&(a.offset-=CKEDITOR.dom.selection.FILLING_CHAR_SEQUENCE.length,0>=a.offset&&(a.offset=d.getIndex(),a.container=d.getParent()))}}var c=CKEDITOR.dom.walker.nodeType(CKEDITOR.NODE_TEXT,!0);return function(c){var d=this.collapsed,e={container:this.startContainer,offset:this.startOffset},g={container:this.endContainer,offset:this.endOffset};c&&(a(e),b(e,this.root),d||(a(g),b(g,this.root)));return{start:e.container.getAddress(c),end:d?null:g.container.getAddress(c),
startOffset:e.offset,endOffset:g.offset,normalized:c,collapsed:d,is2:!0}}}(),moveToBookmark:function(a){if(a.is2){var b=this.document.getByAddress(a.start,a.normalized),c=a.startOffset,d=a.end&&this.document.getByAddress(a.end,a.normalized);a=a.endOffset;this.setStart(b,c);d?this.setEnd(d,a):this.collapse(!0)}else b=(c=a.serializable)?this.document.getById(a.startNode):a.startNode,a=c?this.document.getById(a.endNode):a.endNode,this.setStartBefore(b),b.remove(),a?(this.setEndBefore(a),a.remove()):
this.collapse(!0)},getBoundaryNodes:function(){var a=this.startContainer,b=this.endContainer,c=this.startOffset,d=this.endOffset,e;if(a.type==CKEDITOR.NODE_ELEMENT)if(e=a.getChildCount(),e>c)a=a.getChild(c);else if(1>e)a=a.getPreviousSourceNode();else{for(a=a.$;a.lastChild;)a=a.lastChild;a=new CKEDITOR.dom.node(a);a=a.getNextSourceNode()||a}if(b.type==CKEDITOR.NODE_ELEMENT)if(e=b.getChildCount(),e>d)b=b.getChild(d).getPreviousSourceNode(!0);else if(1>e)b=b.getPreviousSourceNode();else{for(b=b.$;b.lastChild;)b=
b.lastChild;b=new CKEDITOR.dom.node(b)}a.getPosition(b)&CKEDITOR.POSITION_FOLLOWING&&(a=b);return{startNode:a,endNode:b}},getCommonAncestor:function(a,b){var c=this.startContainer,d=this.endContainer,c=c.equals(d)?a&&c.type==CKEDITOR.NODE_ELEMENT&&this.startOffset==this.endOffset-1?c.getChild(this.startOffset):c:c.getCommonAncestor(d);return b&&!c.is?c.getParent():c},optimize:function(){var a=this.startContainer,b=this.startOffset;a.type!=CKEDITOR.NODE_ELEMENT&&(b?b>=a.getLength()&&this.setStartAfter(a):
this.setStartBefore(a));a=this.endContainer;b=this.endOffset;a.type!=CKEDITOR.NODE_ELEMENT&&(b?b>=a.getLength()&&this.setEndAfter(a):this.setEndBefore(a))},optimizeBookmark:function(){var a=this.startContainer,b=this.endContainer;a.is&&a.is("span")&&a.data("cke-bookmark")&&this.setStartAt(a,CKEDITOR.POSITION_BEFORE_START);b&&b.is&&b.is("span")&&b.data("cke-bookmark")&&this.setEndAt(b,CKEDITOR.POSITION_AFTER_END)},trim:function(a,b){var c=this.startContainer,d=this.startOffset,e=this.collapsed;if((!a||
e)&&c&&c.type==CKEDITOR.NODE_TEXT){if(d)if(d>=c.getLength())d=c.getIndex()+1,c=c.getParent();else{var n=c.split(d),d=c.getIndex()+1,c=c.getParent();this.startContainer.equals(this.endContainer)?this.setEnd(n,this.endOffset-this.startOffset):c.equals(this.endContainer)&&(this.endOffset+=1)}else d=c.getIndex(),c=c.getParent();this.setStart(c,d);if(e){this.collapse(!0);return}}c=this.endContainer;d=this.endOffset;b||e||!c||c.type!=CKEDITOR.NODE_TEXT||(d?(d>=c.getLength()||c.split(d),d=c.getIndex()+1):
d=c.getIndex(),c=c.getParent(),this.setEnd(c,d))},enlarge:function(a,b){function c(a){return a&&a.type==CKEDITOR.NODE_ELEMENT&&a.hasAttribute("contenteditable")?null:a}var d=new RegExp(/[^\s\ufeff]/);switch(a){case CKEDITOR.ENLARGE_INLINE:var e=1;case CKEDITOR.ENLARGE_ELEMENT:var n=function(a,b){var c=new CKEDITOR.dom.range(k);c.setStart(a,b);c.setEndAt(k,CKEDITOR.POSITION_BEFORE_END);var c=new CKEDITOR.dom.walker(c),f;for(c.guard=function(a){return!(a.type==CKEDITOR.NODE_ELEMENT&&a.isBlockBoundary())};f=
c.next();){if(f.type!=CKEDITOR.NODE_TEXT)return!1;F=f!=a?f.getText():f.substring(b);if(d.test(F))return!1}return!0};if(this.collapsed)break;var g=this.getCommonAncestor(),k=this.root,l,t,h,p,m,x=!1,z,F;z=this.startContainer;var B=this.startOffset;z.type==CKEDITOR.NODE_TEXT?(B&&(z=!CKEDITOR.tools.trim(z.substring(0,B)).length&&z,x=!!z),z&&((p=z.getPrevious())||(h=z.getParent()))):(B&&(p=z.getChild(B-1)||z.getLast()),p||(h=z));for(h=c(h);h||p;){if(h&&!p){!m&&h.equals(g)&&(m=!0);if(e?h.isBlockBoundary():
!k.contains(h))break;x&&"inline"==h.getComputedStyle("display")||(x=!1,m?l=h:this.setStartBefore(h));p=h.getPrevious()}for(;p;)if(z=!1,p.type==CKEDITOR.NODE_COMMENT)p=p.getPrevious();else{if(p.type==CKEDITOR.NODE_TEXT)F=p.getText(),d.test(F)&&(p=null),z=/[\s\ufeff]$/.test(F);else if((p.$.offsetWidth>(CKEDITOR.env.webkit?1:0)||b&&p.is("br"))&&!p.data("cke-bookmark"))if(x&&CKEDITOR.dtd.$removeEmpty[p.getName()]){F=p.getText();if(d.test(F))p=null;else for(var B=p.$.getElementsByTagName("*"),E=0,v;v=
B[E++];)if(!CKEDITOR.dtd.$removeEmpty[v.nodeName.toLowerCase()]){p=null;break}p&&(z=!!F.length)}else p=null;z&&(x?m?l=h:h&&this.setStartBefore(h):x=!0);if(p){z=p.getPrevious();if(!h&&!z){h=p;p=null;break}p=z}else h=null}h&&(h=c(h.getParent()))}z=this.endContainer;B=this.endOffset;h=p=null;m=x=!1;z.type==CKEDITOR.NODE_TEXT?CKEDITOR.tools.trim(z.substring(B)).length?x=!0:(x=!z.getLength(),B==z.getLength()?(p=z.getNext())||(h=z.getParent()):n(z,B)&&(h=z.getParent())):(p=z.getChild(B))||(h=z);for(;h||
p;){if(h&&!p){!m&&h.equals(g)&&(m=!0);if(e?h.isBlockBoundary():!k.contains(h))break;x&&"inline"==h.getComputedStyle("display")||(x=!1,m?t=h:h&&this.setEndAfter(h));p=h.getNext()}for(;p;){z=!1;if(p.type==CKEDITOR.NODE_TEXT)F=p.getText(),n(p,0)||(p=null),z=/^[\s\ufeff]/.test(F);else if(p.type==CKEDITOR.NODE_ELEMENT){if((0<p.$.offsetWidth||b&&p.is("br"))&&!p.data("cke-bookmark"))if(x&&CKEDITOR.dtd.$removeEmpty[p.getName()]){F=p.getText();if(d.test(F))p=null;else for(B=p.$.getElementsByTagName("*"),E=
0;v=B[E++];)if(!CKEDITOR.dtd.$removeEmpty[v.nodeName.toLowerCase()]){p=null;break}p&&(z=!!F.length)}else p=null}else z=1;z&&x&&(m?t=h:this.setEndAfter(h));if(p){z=p.getNext();if(!h&&!z){h=p;p=null;break}p=z}else h=null}h&&(h=c(h.getParent()))}l&&t&&(g=l.contains(t)?t:l,this.setStartBefore(g),this.setEndAfter(g));break;case CKEDITOR.ENLARGE_BLOCK_CONTENTS:case CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS:h=new CKEDITOR.dom.range(this.root);k=this.root;h.setStartAt(k,CKEDITOR.POSITION_AFTER_START);h.setEnd(this.startContainer,
this.startOffset);h=new CKEDITOR.dom.walker(h);var q,O,N=CKEDITOR.dom.walker.blockBoundary(a==CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS?{br:1}:null),C=null,I=function(a){if(a.type==CKEDITOR.NODE_ELEMENT&&"false"==a.getAttribute("contenteditable"))if(C){if(C.equals(a)){C=null;return}}else C=a;else if(C)return;var b=N(a);b||(q=a);return b},e=function(a){var b=I(a);!b&&a.is&&a.is("br")&&(O=a);return b};h.guard=I;h=h.lastBackward();q=q||k;this.setStartAt(q,!q.is("br")&&(!h&&this.checkStartOfBlock()||h&&q.contains(h))?
CKEDITOR.POSITION_AFTER_START:CKEDITOR.POSITION_AFTER_END);if(a==CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS){h=this.clone();h=new CKEDITOR.dom.walker(h);var G=CKEDITOR.dom.walker.whitespaces(),K=CKEDITOR.dom.walker.bookmark();h.evaluator=function(a){return!G(a)&&!K(a)};if((h=h.previous())&&h.type==CKEDITOR.NODE_ELEMENT&&h.is("br"))break}h=this.clone();h.collapse();h.setEndAt(k,CKEDITOR.POSITION_BEFORE_END);h=new CKEDITOR.dom.walker(h);h.guard=a==CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS?e:I;q=C=O=null;h=h.lastForward();
q=q||k;this.setEndAt(q,!h&&this.checkEndOfBlock()||h&&q.contains(h)?CKEDITOR.POSITION_BEFORE_END:CKEDITOR.POSITION_BEFORE_START);O&&this.setEndAfter(O)}},shrink:function(a,b,c){if(!this.collapsed){a=a||CKEDITOR.SHRINK_TEXT;var d=this.clone(),e=this.startContainer,n=this.endContainer,g=this.startOffset,k=this.endOffset,l=1,t=1;e&&e.type==CKEDITOR.NODE_TEXT&&(g?g>=e.getLength()?d.setStartAfter(e):(d.setStartBefore(e),l=0):d.setStartBefore(e));n&&n.type==CKEDITOR.NODE_TEXT&&(k?k>=n.getLength()?d.setEndAfter(n):
(d.setEndAfter(n),t=0):d.setEndBefore(n));var d=new CKEDITOR.dom.walker(d),h=CKEDITOR.dom.walker.bookmark();d.evaluator=function(b){return b.type==(a==CKEDITOR.SHRINK_ELEMENT?CKEDITOR.NODE_ELEMENT:CKEDITOR.NODE_TEXT)};var p;d.guard=function(b,d){if(h(b))return!0;if(a==CKEDITOR.SHRINK_ELEMENT&&b.type==CKEDITOR.NODE_TEXT||d&&b.equals(p)||!1===c&&b.type==CKEDITOR.NODE_ELEMENT&&b.isBlockBoundary()||b.type==CKEDITOR.NODE_ELEMENT&&b.hasAttribute("contenteditable"))return!1;d||b.type!=CKEDITOR.NODE_ELEMENT||
(p=b);return!0};l&&(e=d[a==CKEDITOR.SHRINK_ELEMENT?"lastForward":"next"]())&&this.setStartAt(e,b?CKEDITOR.POSITION_AFTER_START:CKEDITOR.POSITION_BEFORE_START);t&&(d.reset(),(d=d[a==CKEDITOR.SHRINK_ELEMENT?"lastBackward":"previous"]())&&this.setEndAt(d,b?CKEDITOR.POSITION_BEFORE_END:CKEDITOR.POSITION_AFTER_END));return!(!l&&!t)}},insertNode:function(a){this.optimizeBookmark();this.trim(!1,!0);var b=this.startContainer,c=b.getChild(this.startOffset);c?a.insertBefore(c):b.append(a);a.getParent()&&a.getParent().equals(this.endContainer)&&
this.endOffset++;this.setStartBefore(a)},moveToPosition:function(a,b){this.setStartAt(a,b);this.collapse(!0)},moveToRange:function(a){this.setStart(a.startContainer,a.startOffset);this.setEnd(a.endContainer,a.endOffset)},selectNodeContents:function(a){this.setStart(a,0);this.setEnd(a,a.type==CKEDITOR.NODE_TEXT?a.getLength():a.getChildCount())},setStart:function(b,c){b.type==CKEDITOR.NODE_ELEMENT&&CKEDITOR.dtd.$empty[b.getName()]&&(c=b.getIndex(),b=b.getParent());this._setStartContainer(b);this.startOffset=
c;this.endContainer||(this._setEndContainer(b),this.endOffset=c);a(this)},setEnd:function(b,c){b.type==CKEDITOR.NODE_ELEMENT&&CKEDITOR.dtd.$empty[b.getName()]&&(c=b.getIndex()+1,b=b.getParent());this._setEndContainer(b);this.endOffset=c;this.startContainer||(this._setStartContainer(b),this.startOffset=c);a(this)},setStartAfter:function(a){this.setStart(a.getParent(),a.getIndex()+1)},setStartBefore:function(a){this.setStart(a.getParent(),a.getIndex())},setEndAfter:function(a){this.setEnd(a.getParent(),
a.getIndex()+1)},setEndBefore:function(a){this.setEnd(a.getParent(),a.getIndex())},setStartAt:function(b,c){switch(c){case CKEDITOR.POSITION_AFTER_START:this.setStart(b,0);break;case CKEDITOR.POSITION_BEFORE_END:b.type==CKEDITOR.NODE_TEXT?this.setStart(b,b.getLength()):this.setStart(b,b.getChildCount());break;case CKEDITOR.POSITION_BEFORE_START:this.setStartBefore(b);break;case CKEDITOR.POSITION_AFTER_END:this.setStartAfter(b)}a(this)},setEndAt:function(b,c){switch(c){case CKEDITOR.POSITION_AFTER_START:this.setEnd(b,
0);break;case CKEDITOR.POSITION_BEFORE_END:b.type==CKEDITOR.NODE_TEXT?this.setEnd(b,b.getLength()):this.setEnd(b,b.getChildCount());break;case CKEDITOR.POSITION_BEFORE_START:this.setEndBefore(b);break;case CKEDITOR.POSITION_AFTER_END:this.setEndAfter(b)}a(this)},fixBlock:function(a,b){var c=this.createBookmark(),d=this.document.createElement(b);this.collapse(a);this.enlarge(CKEDITOR.ENLARGE_BLOCK_CONTENTS);this.extractContents().appendTo(d);d.trim();this.insertNode(d);var e=d.getBogus();e&&e.remove();
d.appendBogus();this.moveToBookmark(c);return d},splitBlock:function(a,b){var c=new CKEDITOR.dom.elementPath(this.startContainer,this.root),d=new CKEDITOR.dom.elementPath(this.endContainer,this.root),e=c.block,n=d.block,g=null;if(!c.blockLimit.equals(d.blockLimit))return null;"br"!=a&&(e||(e=this.fixBlock(!0,a),n=(new CKEDITOR.dom.elementPath(this.endContainer,this.root)).block),n||(n=this.fixBlock(!1,a)));c=e&&this.checkStartOfBlock();d=n&&this.checkEndOfBlock();this.deleteContents();e&&e.equals(n)&&
(d?(g=new CKEDITOR.dom.elementPath(this.startContainer,this.root),this.moveToPosition(n,CKEDITOR.POSITION_AFTER_END),n=null):c?(g=new CKEDITOR.dom.elementPath(this.startContainer,this.root),this.moveToPosition(e,CKEDITOR.POSITION_BEFORE_START),e=null):(n=this.splitElement(e,b||!1),e.is("ul","ol")||e.appendBogus()));return{previousBlock:e,nextBlock:n,wasStartOfBlock:c,wasEndOfBlock:d,elementPath:g}},splitElement:function(a,b){if(!this.collapsed)return null;this.setEndAt(a,CKEDITOR.POSITION_BEFORE_END);
var c=this.extractContents(!1,b||!1),d=a.clone(!1,b||!1);c.appendTo(d);d.insertAfter(a);this.moveToPosition(a,CKEDITOR.POSITION_AFTER_END);return d},removeEmptyBlocksAtEnd:function(){function a(d){return function(a){return b(a)||c(a)||a.type==CKEDITOR.NODE_ELEMENT&&a.isEmptyInlineRemoveable()||d.is("table")&&a.is("caption")?!1:!0}}var b=CKEDITOR.dom.walker.whitespaces(),c=CKEDITOR.dom.walker.bookmark(!1);return function(b){for(var c=this.createBookmark(),d=this[b?"endPath":"startPath"](),e=d.block||
d.blockLimit,g;e&&!e.equals(d.root)&&!e.getFirst(a(e));)g=e.getParent(),this[b?"setEndAt":"setStartAt"](e,CKEDITOR.POSITION_AFTER_END),e.remove(1),e=g;this.moveToBookmark(c)}}(),startPath:function(){return new CKEDITOR.dom.elementPath(this.startContainer,this.root)},endPath:function(){return new CKEDITOR.dom.elementPath(this.endContainer,this.root)},checkBoundaryOfElement:function(a,b){var d=b==CKEDITOR.START,e=this.clone();e.collapse(d);e[d?"setStartAt":"setEndAt"](a,d?CKEDITOR.POSITION_AFTER_START:
CKEDITOR.POSITION_BEFORE_END);e=new CKEDITOR.dom.walker(e);e.evaluator=c(d);return e[d?"checkBackward":"checkForward"]()},checkStartOfBlock:function(){var a=this.startContainer,c=this.startOffset;CKEDITOR.env.ie&&c&&a.type==CKEDITOR.NODE_TEXT&&(a=CKEDITOR.tools.ltrim(a.substring(0,c)),l.test(a)&&this.trim(0,1));this.trim();a=new CKEDITOR.dom.elementPath(this.startContainer,this.root);c=this.clone();c.collapse(!0);c.setStartAt(a.block||a.blockLimit,CKEDITOR.POSITION_AFTER_START);a=new CKEDITOR.dom.walker(c);
a.evaluator=b();return a.checkBackward()},checkEndOfBlock:function(){var a=this.endContainer,c=this.endOffset;CKEDITOR.env.ie&&a.type==CKEDITOR.NODE_TEXT&&(a=CKEDITOR.tools.rtrim(a.substring(c)),l.test(a)&&this.trim(1,0));this.trim();a=new CKEDITOR.dom.elementPath(this.endContainer,this.root);c=this.clone();c.collapse(!1);c.setEndAt(a.block||a.blockLimit,CKEDITOR.POSITION_BEFORE_END);a=new CKEDITOR.dom.walker(c);a.evaluator=b();return a.checkForward()},getPreviousNode:function(a,b,c){var d=this.clone();
d.collapse(1);d.setStartAt(c||this.root,CKEDITOR.POSITION_AFTER_START);c=new CKEDITOR.dom.walker(d);c.evaluator=a;c.guard=b;return c.previous()},getNextNode:function(a,b,c){var d=this.clone();d.collapse();d.setEndAt(c||this.root,CKEDITOR.POSITION_BEFORE_END);c=new CKEDITOR.dom.walker(d);c.evaluator=a;c.guard=b;return c.next()},checkReadOnly:function(){function a(b,c){for(;b;){if(b.type==CKEDITOR.NODE_ELEMENT){if("false"==b.getAttribute("contentEditable")&&!b.data("cke-editable"))return 0;if(b.is("html")||
"true"==b.getAttribute("contentEditable")&&(b.contains(c)||b.equals(c)))break}b=b.getParent()}return 1}return function(){var b=this.startContainer,c=this.endContainer;return!(a(b,c)&&a(c,b))}}(),moveToElementEditablePosition:function(a,b){if(a.type==CKEDITOR.NODE_ELEMENT&&!a.isEditable(!1))return this.moveToPosition(a,b?CKEDITOR.POSITION_AFTER_END:CKEDITOR.POSITION_BEFORE_START),!0;for(var c=0;a;){if(a.type==CKEDITOR.NODE_TEXT){b&&this.endContainer&&this.checkEndOfBlock()&&l.test(a.getText())?this.moveToPosition(a,
CKEDITOR.POSITION_BEFORE_START):this.moveToPosition(a,b?CKEDITOR.POSITION_AFTER_END:CKEDITOR.POSITION_BEFORE_START);c=1;break}if(a.type==CKEDITOR.NODE_ELEMENT)if(a.isEditable())this.moveToPosition(a,b?CKEDITOR.POSITION_BEFORE_END:CKEDITOR.POSITION_AFTER_START),c=1;else if(b&&a.is("br")&&this.endContainer&&this.checkEndOfBlock())this.moveToPosition(a,CKEDITOR.POSITION_BEFORE_START);else if("false"==a.getAttribute("contenteditable")&&a.is(CKEDITOR.dtd.$block))return this.setStartBefore(a),this.setEndAfter(a),
!0;var d=a,e=c,n=void 0;d.type==CKEDITOR.NODE_ELEMENT&&d.isEditable(!1)&&(n=d[b?"getLast":"getFirst"](v));e||n||(n=d[b?"getPrevious":"getNext"](v));a=n}return!!c},moveToClosestEditablePosition:function(a,b){var c,d=0,e,n,g=[CKEDITOR.POSITION_AFTER_END,CKEDITOR.POSITION_BEFORE_START];a?(c=new CKEDITOR.dom.range(this.root),c.moveToPosition(a,g[b?0:1])):c=this.clone();if(a&&!a.is(CKEDITOR.dtd.$block))d=1;else if(e=c[b?"getNextEditableNode":"getPreviousEditableNode"]())d=1,(n=e.type==CKEDITOR.NODE_ELEMENT)&&
e.is(CKEDITOR.dtd.$block)&&"false"==e.getAttribute("contenteditable")?(c.setStartAt(e,CKEDITOR.POSITION_BEFORE_START),c.setEndAt(e,CKEDITOR.POSITION_AFTER_END)):!CKEDITOR.env.needsBrFiller&&n&&e.is(CKEDITOR.dom.walker.validEmptyBlockContainers)?(c.setEnd(e,0),c.collapse()):c.moveToPosition(e,g[b?1:0]);d&&this.moveToRange(c);return!!d},moveToElementEditStart:function(a){return this.moveToElementEditablePosition(a)},moveToElementEditEnd:function(a){return this.moveToElementEditablePosition(a,!0)},getEnclosedNode:function(){var a=
this.clone();a.optimize();if(a.startContainer.type!=CKEDITOR.NODE_ELEMENT||a.endContainer.type!=CKEDITOR.NODE_ELEMENT)return null;var a=new CKEDITOR.dom.walker(a),b=CKEDITOR.dom.walker.bookmark(!1,!0),c=CKEDITOR.dom.walker.whitespaces(!0);a.evaluator=function(a){return c(a)&&b(a)};var d=a.next();a.reset();return d&&d.equals(a.previous())?d:null},getTouchedStartNode:function(){var a=this.startContainer;return this.collapsed||a.type!=CKEDITOR.NODE_ELEMENT?a:a.getChild(this.startOffset)||a},getTouchedEndNode:function(){var a=
this.endContainer;return this.collapsed||a.type!=CKEDITOR.NODE_ELEMENT?a:a.getChild(this.endOffset-1)||a},getNextEditableNode:e(),getPreviousEditableNode:e(1),scrollIntoView:function(){var a=new CKEDITOR.dom.element.createFromHtml("\x3cspan\x3e\x26nbsp;\x3c/span\x3e",this.document),b,c,d,e=this.clone();e.optimize();(d=e.startContainer.type==CKEDITOR.NODE_TEXT)?(c=e.startContainer.getText(),b=e.startContainer.split(e.startOffset),a.insertAfter(e.startContainer)):e.insertNode(a);a.scrollIntoView();
d&&(e.startContainer.setText(c),b.remove());a.remove()},_setStartContainer:function(a){this.startContainer=a},_setEndContainer:function(a){this.endContainer=a}}})();CKEDITOR.POSITION_AFTER_START=1;CKEDITOR.POSITION_BEFORE_END=2;CKEDITOR.POSITION_BEFORE_START=3;CKEDITOR.POSITION_AFTER_END=4;CKEDITOR.ENLARGE_ELEMENT=1;CKEDITOR.ENLARGE_BLOCK_CONTENTS=2;CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS=3;CKEDITOR.ENLARGE_INLINE=4;CKEDITOR.START=1;CKEDITOR.END=2;CKEDITOR.SHRINK_ELEMENT=1;CKEDITOR.SHRINK_TEXT=2;"use strict";
(function(){function a(a){1>arguments.length||(this.range=a,this.forceBrBreak=0,this.enlargeBr=1,this.enforceRealBlocks=0,this._||(this._={}))}function d(a){var b=[];a.forEach(function(a){if("true"==a.getAttribute("contenteditable"))return b.push(a),!1},CKEDITOR.NODE_ELEMENT,!0);return b}function b(a,c,e,g){a:{null==g&&(g=d(e));for(var k;k=g.shift();)if(k.getDtd().p){g={element:k,remaining:g};break a}g=null}if(!g)return 0;if((k=CKEDITOR.filter.instances[g.element.data("cke-filter")])&&!k.check(c))return b(a,
c,e,g.remaining);c=new CKEDITOR.dom.range(g.element);c.selectNodeContents(g.element);c=c.createIterator();c.enlargeBr=a.enlargeBr;c.enforceRealBlocks=a.enforceRealBlocks;c.activeFilter=c.filter=k;a._.nestedEditable={element:g.element,container:e,remaining:g.remaining,iterator:c};return 1}function c(a,b,c){if(!b)return!1;a=a.clone();a.collapse(!c);return a.checkBoundaryOfElement(b,c?CKEDITOR.START:CKEDITOR.END)}var e=/^[\r\n\t ]+$/,g=CKEDITOR.dom.walker.bookmark(!1,!0),k=CKEDITOR.dom.walker.whitespaces(!0),
l=function(a){return g(a)&&k(a)},q={dd:1,dt:1,li:1};a.prototype={getNextParagraph:function(a){var d,k,A,r,D;a=a||"p";if(this._.nestedEditable){if(d=this._.nestedEditable.iterator.getNextParagraph(a))return this.activeFilter=this._.nestedEditable.iterator.activeFilter,d;this.activeFilter=this.filter;if(b(this,a,this._.nestedEditable.container,this._.nestedEditable.remaining))return this.activeFilter=this._.nestedEditable.iterator.activeFilter,this._.nestedEditable.iterator.getNextParagraph(a);this._.nestedEditable=
null}if(!this.range.root.getDtd()[a])return null;if(!this._.started){var n=this.range.clone();k=n.startPath();var w=n.endPath(),H=!n.collapsed&&c(n,k.block),u=!n.collapsed&&c(n,w.block,1);n.shrink(CKEDITOR.SHRINK_ELEMENT,!0);H&&n.setStartAt(k.block,CKEDITOR.POSITION_BEFORE_END);u&&n.setEndAt(w.block,CKEDITOR.POSITION_AFTER_START);k=n.endContainer.hasAscendant("pre",!0)||n.startContainer.hasAscendant("pre",!0);n.enlarge(this.forceBrBreak&&!k||!this.enlargeBr?CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS:CKEDITOR.ENLARGE_BLOCK_CONTENTS);
n.collapsed||(k=new CKEDITOR.dom.walker(n.clone()),w=CKEDITOR.dom.walker.bookmark(!0,!0),k.evaluator=w,this._.nextNode=k.next(),k=new CKEDITOR.dom.walker(n.clone()),k.evaluator=w,k=k.previous(),this._.lastNode=k.getNextSourceNode(!0,null,n.root),this._.lastNode&&this._.lastNode.type==CKEDITOR.NODE_TEXT&&!CKEDITOR.tools.trim(this._.lastNode.getText())&&this._.lastNode.getParent().isBlockBoundary()&&(w=this.range.clone(),w.moveToPosition(this._.lastNode,CKEDITOR.POSITION_AFTER_END),w.checkEndOfBlock()&&
(w=new CKEDITOR.dom.elementPath(w.endContainer,w.root),this._.lastNode=(w.block||w.blockLimit).getNextSourceNode(!0))),this._.lastNode&&n.root.contains(this._.lastNode)||(this._.lastNode=this._.docEndMarker=n.document.createText(""),this._.lastNode.insertAfter(k)),n=null);this._.started=1;k=n}w=this._.nextNode;n=this._.lastNode;for(this._.nextNode=null;w;){var H=0,u=w.hasAscendant("pre"),t=w.type!=CKEDITOR.NODE_ELEMENT,h=0;if(t)w.type==CKEDITOR.NODE_TEXT&&e.test(w.getText())&&(t=0);else{var p=w.getName();
if(CKEDITOR.dtd.$block[p]&&"false"==w.getAttribute("contenteditable")){d=w;b(this,a,d);break}else if(w.isBlockBoundary(this.forceBrBreak&&!u&&{br:1})){if("br"==p)t=1;else if(!k&&!w.getChildCount()&&"hr"!=p){d=w;A=w.equals(n);break}k&&(k.setEndAt(w,CKEDITOR.POSITION_BEFORE_START),"br"!=p&&(this._.nextNode=w));H=1}else{if(w.getFirst()){k||(k=this.range.clone(),k.setStartAt(w,CKEDITOR.POSITION_BEFORE_START));w=w.getFirst();continue}t=1}}t&&!k&&(k=this.range.clone(),k.setStartAt(w,CKEDITOR.POSITION_BEFORE_START));
A=(!H||t)&&w.equals(n);if(k&&!H)for(;!w.getNext(l)&&!A;){p=w.getParent();if(p.isBlockBoundary(this.forceBrBreak&&!u&&{br:1})){H=1;t=0;A||p.equals(n);k.setEndAt(p,CKEDITOR.POSITION_BEFORE_END);break}w=p;t=1;A=w.equals(n);h=1}t&&k.setEndAt(w,CKEDITOR.POSITION_AFTER_END);w=this._getNextSourceNode(w,h,n);if((A=!w)||H&&k)break}if(!d){if(!k)return this._.docEndMarker&&this._.docEndMarker.remove(),this._.nextNode=null;d=new CKEDITOR.dom.elementPath(k.startContainer,k.root);w=d.blockLimit;H={div:1,th:1,td:1};
d=d.block;!d&&w&&!this.enforceRealBlocks&&H[w.getName()]&&k.checkStartOfBlock()&&k.checkEndOfBlock()&&!w.equals(k.root)?d=w:!d||this.enforceRealBlocks&&d.is(q)?(d=this.range.document.createElement(a),k.extractContents().appendTo(d),d.trim(),k.insertNode(d),r=D=!0):"li"!=d.getName()?k.checkStartOfBlock()&&k.checkEndOfBlock()||(d=d.clone(!1),k.extractContents().appendTo(d),d.trim(),D=k.splitBlock(),r=!D.wasStartOfBlock,D=!D.wasEndOfBlock,k.insertNode(d)):A||(this._.nextNode=d.equals(n)?null:this._getNextSourceNode(k.getBoundaryNodes().endNode,
1,n))}r&&(r=d.getPrevious())&&r.type==CKEDITOR.NODE_ELEMENT&&("br"==r.getName()?r.remove():r.getLast()&&"br"==r.getLast().$.nodeName.toLowerCase()&&r.getLast().remove());D&&(r=d.getLast())&&r.type==CKEDITOR.NODE_ELEMENT&&"br"==r.getName()&&(!CKEDITOR.env.needsBrFiller||r.getPrevious(g)||r.getNext(g))&&r.remove();this._.nextNode||(this._.nextNode=A||d.equals(n)||!n?null:this._getNextSourceNode(d,1,n));return d},_getNextSourceNode:function(a,b,c){function d(a){return!(a.equals(c)||a.equals(e))}var e=
this.range.root;for(a=a.getNextSourceNode(b,null,d);!g(a);)a=a.getNextSourceNode(b,null,d);return a}};CKEDITOR.dom.range.prototype.createIterator=function(){return new a(this)}})();
CKEDITOR.command=function(a,d){this.uiItems=[];this.exec=function(b){if(this.state==CKEDITOR.TRISTATE_DISABLED||!this.checkAllowed())return!1;this.editorFocus&&a.focus();return!1===this.fire("exec")?!0:!1!==d.exec.call(this,a,b)};this.refresh=function(a,b){if(!this.readOnly&&a.readOnly)return!0;if(this.context&&!b.isContextFor(this.context)||!this.checkAllowed(!0))return this.disable(),!0;this.startDisabled||this.enable();this.modes&&!this.modes[a.mode]&&this.disable();return!1===this.fire("refresh",
{editor:a,path:b})?!0:d.refresh&&!1!==d.refresh.apply(this,arguments)};var b;this.checkAllowed=function(c){return c||"boolean"!=typeof b?b=a.activeFilter.checkFeature(this):b};CKEDITOR.tools.extend(this,d,{modes:{wysiwyg:1},editorFocus:1,contextSensitive:!!d.context,state:CKEDITOR.TRISTATE_DISABLED});CKEDITOR.event.call(this)};
CKEDITOR.command.prototype={enable:function(){this.state==CKEDITOR.TRISTATE_DISABLED&&this.checkAllowed()&&this.setState(this.preserveState&&"undefined"!=typeof this.previousState?this.previousState:CKEDITOR.TRISTATE_OFF)},disable:function(){this.setState(CKEDITOR.TRISTATE_DISABLED)},setState:function(a){if(this.state==a||a!=CKEDITOR.TRISTATE_DISABLED&&!this.checkAllowed())return!1;this.previousState=this.state;this.state=a;this.fire("state");return!0},toggleState:function(){this.state==CKEDITOR.TRISTATE_OFF?
this.setState(CKEDITOR.TRISTATE_ON):this.state==CKEDITOR.TRISTATE_ON&&this.setState(CKEDITOR.TRISTATE_OFF)}};CKEDITOR.event.implementOn(CKEDITOR.command.prototype);CKEDITOR.ENTER_P=1;CKEDITOR.ENTER_BR=2;CKEDITOR.ENTER_DIV=3;
CKEDITOR.config={customConfig:"config.js",autoUpdateElement:!0,language:"",defaultLanguage:"en",contentsLangDirection:"",enterMode:CKEDITOR.ENTER_P,forceEnterMode:!1,shiftEnterMode:CKEDITOR.ENTER_BR,docType:"\x3c!DOCTYPE html\x3e",bodyId:"",bodyClass:"",fullPage:!1,height:200,contentsCss:CKEDITOR.getUrl("contents.css"),extraPlugins:"",removePlugins:"",protectedSource:[],tabIndex:0,width:"",baseFloatZIndex:1E4,blockedKeystrokes:[CKEDITOR.CTRL+66,CKEDITOR.CTRL+73,CKEDITOR.CTRL+85]};
(function(){function a(a,b,c,d,e){var h,p;a=[];for(h in b){p=b[h];p="boolean"==typeof p?{}:"function"==typeof p?{match:p}:E(p);"$"!=h.charAt(0)&&(p.elements=h);c&&(p.featureName=c.toLowerCase());var m=p;m.elements=k(m.elements,/\s+/)||null;m.propertiesOnly=m.propertiesOnly||!0===m.elements;var f=/\s*,\s*/,n=void 0;for(n in O){m[n]=k(m[n],f)||null;var G=m,t=N[n],g=k(m[N[n]],f),x=m[n],F=[],C=!0,K=void 0;g?C=!1:g={};for(K in x)"!"==K.charAt(0)&&(K=K.slice(1),F.push(K),g[K]=!0,C=!1);for(;K=F.pop();)x[K]=
x["!"+K],delete x["!"+K];G[t]=(C?!1:g)||null}m.match=m.match||null;d.push(p);a.push(p)}b=e.elements;e=e.generic;var z;c=0;for(d=a.length;c<d;++c){h=E(a[c]);p=!0===h.classes||!0===h.styles||!0===h.attributes;m=h;n=t=f=void 0;for(f in O)m[f]=H(m[f]);G=!0;for(n in N){f=N[n];t=m[f];g=[];x=void 0;for(x in t)-1<x.indexOf("*")?g.push(new RegExp("^"+x.replace(/\*/g,".*")+"$")):g.push(x);t=g;t.length&&(m[f]=t,G=!1)}m.nothingRequired=G;m.noProperties=!(m.attributes||m.classes||m.styles);if(!0===h.elements||
null===h.elements)e[p?"unshift":"push"](h);else for(z in m=h.elements,delete h.elements,m)if(b[z])b[z][p?"unshift":"push"](h);else b[z]=[h]}}function d(a,c,d,h){if(!a.match||a.match(c))if(h||l(a,c))if(a.propertiesOnly||(d.valid=!0),d.allAttributes||(d.allAttributes=b(a.attributes,c.attributes,d.validAttributes)),d.allStyles||(d.allStyles=b(a.styles,c.styles,d.validStyles)),!d.allClasses){a=a.classes;c=c.classes;h=d.validClasses;if(a)if(!0===a)a=!0;else{for(var p=0,e=c.length,m;p<e;++p)m=c[p],h[m]||
(h[m]=a(m));a=!1}else a=!1;d.allClasses=a}}function b(a,b,c){if(!a)return!1;if(!0===a)return!0;for(var d in b)c[d]||(c[d]=a(d));return!1}function c(a,b,c){if(!a.match||a.match(b)){if(a.noProperties)return!1;c.hadInvalidAttribute=e(a.attributes,b.attributes)||c.hadInvalidAttribute;c.hadInvalidStyle=e(a.styles,b.styles)||c.hadInvalidStyle;a=a.classes;b=b.classes;if(a){for(var d=!1,h=!0===a,p=b.length;p--;)if(h||a(b[p]))b.splice(p,1),d=!0;a=d}else a=!1;c.hadInvalidClass=a||c.hadInvalidClass}}function e(a,
b){if(!a)return!1;var c=!1,d=!0===a,h;for(h in b)if(d||a(h))delete b[h],c=!0;return c}function g(a,b,c){if(a.disabled||a.customConfig&&!c||!b)return!1;a._.cachedChecks={};return!0}function k(a,b){if(!a)return!1;if(!0===a)return a;if("string"==typeof a)return a=Y(a),"*"==a?!0:CKEDITOR.tools.convertArrayToObject(a.split(b));if(CKEDITOR.tools.isArray(a))return a.length?CKEDITOR.tools.convertArrayToObject(a):!1;var c={},d=0,h;for(h in a)c[h]=a[h],d++;return d?c:!1}function l(a,b){if(a.nothingRequired)return!0;
var c,d,h,p;if(h=a.requiredClasses)for(p=b.classes,c=0;c<h.length;++c)if(d=h[c],"string"==typeof d){if(-1==CKEDITOR.tools.indexOf(p,d))return!1}else if(!CKEDITOR.tools.checkIfAnyArrayItemMatches(p,d))return!1;return q(b.styles,a.requiredStyles)&&q(b.attributes,a.requiredAttributes)}function q(a,b){if(!b)return!0;for(var c=0,d;c<b.length;++c)if(d=b[c],"string"==typeof d){if(!(d in a))return!1}else if(!CKEDITOR.tools.checkIfAnyObjectPropertyMatches(a,d))return!1;return!0}function v(a){if(!a)return{};
a=a.split(/\s*,\s*/).sort();for(var b={};a.length;)b[a.shift()]="cke-test";return b}function f(a){var b,c,d,h,p={},e=1;for(a=Y(a);b=a.match(C);)(c=b[2])?(d=y(c,"styles"),h=y(c,"attrs"),c=y(c,"classes")):d=h=c=null,p["$"+e++]={elements:b[1],classes:c,styles:d,attributes:h},a=a.slice(b[0].length);return p}function y(a,b){var c=a.match(I[b]);return c?Y(c[1]):null}function A(a){var b=a.styleBackup=a.attributes.style,c=a.classBackup=a.attributes["class"];a.styles||(a.styles=CKEDITOR.tools.parseCssText(b||
"",1));a.classes||(a.classes=c?c.split(/\s+/):[])}function r(a,b,h,e){var m=0,f;e.toHtml&&(b.name=b.name.replace(G,"$1"));if(e.doCallbacks&&a.elementCallbacks){a:{f=a.elementCallbacks;for(var g=0,t=f.length,x;g<t;++g)if(x=f[g](b)){f=x;break a}f=void 0}if(f)return f}if(e.doTransform&&(f=a._.transformations[b.name])){A(b);for(g=0;g<f.length;++g)p(a,b,f[g]);n(b)}if(e.doFilter){a:{g=b.name;t=a._;a=t.allowedRules.elements[g];f=t.allowedRules.generic;g=t.disallowedRules.elements[g];t=t.disallowedRules.generic;
x=e.skipRequired;var F={valid:!1,validAttributes:{},validClasses:{},validStyles:{},allAttributes:!1,allClasses:!1,allStyles:!1,hadInvalidAttribute:!1,hadInvalidClass:!1,hadInvalidStyle:!1},k,C;if(a||f){A(b);if(g)for(k=0,C=g.length;k<C;++k)if(!1===c(g[k],b,F)){a=null;break a}if(t)for(k=0,C=t.length;k<C;++k)c(t[k],b,F);if(a)for(k=0,C=a.length;k<C;++k)d(a[k],b,F,x);if(f)for(k=0,C=f.length;k<C;++k)d(f[k],b,F,x);a=F}else a=null}if(!a||!a.valid)return h.push(b),1;C=a.validAttributes;var z=a.validStyles;
f=a.validClasses;var g=b.attributes,l=b.styles,t=b.classes;x=b.classBackup;var J=b.styleBackup,B,I,E=[],F=[],q=/^data-cke-/;k=!1;delete g.style;delete g["class"];delete b.classBackup;delete b.styleBackup;if(!a.allAttributes)for(B in g)C[B]||(q.test(B)?B==(I=B.replace(/^data-cke-saved-/,""))||C[I]||(delete g[B],k=!0):(delete g[B],k=!0));if(!a.allStyles||a.hadInvalidStyle){for(B in l)a.allStyles||z[B]?E.push(B+":"+l[B]):k=!0;E.length&&(g.style=E.sort().join("; "))}else J&&(g.style=J);if(!a.allClasses||
a.hadInvalidClass){for(B=0;B<t.length;++B)(a.allClasses||f[t[B]])&&F.push(t[B]);F.length&&(g["class"]=F.sort().join(" "));x&&F.length<x.split(/\s+/).length&&(k=!0)}else x&&(g["class"]=x);k&&(m=1);if(!e.skipFinalValidation&&!w(b))return h.push(b),1}e.toHtml&&(b.name=b.name.replace(K,"cke:$1"));return m}function D(a){var b=[],c;for(c in a)-1<c.indexOf("*")&&b.push(c.replace(/\*/g,".*"));return b.length?new RegExp("^(?:"+b.join("|")+")$"):null}function n(a){var b=a.attributes,c;delete b.style;delete b["class"];
if(c=CKEDITOR.tools.writeCssText(a.styles,!0))b.style=c;a.classes.length&&(b["class"]=a.classes.sort().join(" "))}function w(a){switch(a.name){case "a":if(!(a.children.length||a.attributes.name||a.attributes.id))return!1;break;case "img":if(!a.attributes.src)return!1}return!0}function H(a){if(!a)return!1;if(!0===a)return!0;var b=D(a);return function(c){return c in a||b&&c.match(b)}}function u(){return new CKEDITOR.htmlParser.element("br")}function t(a){return a.type==CKEDITOR.NODE_ELEMENT&&("br"==
a.name||B.$block[a.name])}function h(a,b,c){var d=a.name;if(B.$empty[d]||!a.children.length)"hr"==d&&"br"==b?a.replaceWith(u()):(a.parent&&c.push({check:"it",el:a.parent}),a.remove());else if(B.$block[d]||"tr"==d)if("br"==b)a.previous&&!t(a.previous)&&(b=u(),b.insertBefore(a)),a.next&&!t(a.next)&&(b=u(),b.insertAfter(a)),a.replaceWithChildren();else{var d=a.children,h;b:{h=B[b];for(var p=0,e=d.length,m;p<e;++p)if(m=d[p],m.type==CKEDITOR.NODE_ELEMENT&&!h[m.name]){h=!1;break b}h=!0}if(h)a.name=b,a.attributes=
{},c.push({check:"parent-down",el:a});else{h=a.parent;for(var p=h.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT||"body"==h.name,f,g,e=d.length;0<e;)m=d[--e],p&&(m.type==CKEDITOR.NODE_TEXT||m.type==CKEDITOR.NODE_ELEMENT&&B.$inline[m.name])?(f||(f=new CKEDITOR.htmlParser.element(b),f.insertAfter(a),c.push({check:"parent-down",el:f})),f.add(m,0)):(f=null,g=B[h.name]||B.span,m.insertAfter(a),h.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT||m.type!=CKEDITOR.NODE_ELEMENT||g[m.name]||c.push({check:"el-up",el:m}));a.remove()}}else d in
{style:1,script:1}?a.remove():(a.parent&&c.push({check:"it",el:a.parent}),a.replaceWithChildren())}function p(a,b,c){var d,h;for(d=0;d<c.length;++d)if(h=c[d],!(h.check&&!a.check(h.check,!1)||h.left&&!h.left(b))){h.right(b,J);break}}function m(a,b){var c=b.getDefinition(),d=c.attributes,h=c.styles,p,e,m,f;if(a.name!=c.element)return!1;for(p in d)if("class"==p)for(c=d[p].split(/\s+/),m=a.classes.join("|");f=c.pop();){if(-1==m.indexOf(f))return!1}else if(a.attributes[p]!=d[p])return!1;for(e in h)if(a.styles[e]!=
h[e])return!1;return!0}function x(a,b){var c,d;"string"==typeof a?c=a:a instanceof CKEDITOR.style?d=a:(c=a[0],d=a[1]);return[{element:c,left:d,right:function(a,c){c.transform(a,b)}}]}function z(a){return function(b){return m(b,a)}}function F(a){return function(b,c){c[a](b)}}var B=CKEDITOR.dtd,E=CKEDITOR.tools.copy,Y=CKEDITOR.tools.trim,P=["","p","br","div"];CKEDITOR.FILTER_SKIP_TREE=2;CKEDITOR.filter=function(a){this.allowedContent=[];this.disallowedContent=[];this.elementCallbacks=null;this.disabled=
!1;this.editor=null;this.id=CKEDITOR.tools.getNextNumber();this._={allowedRules:{elements:{},generic:[]},disallowedRules:{elements:{},generic:[]},transformations:{},cachedTests:{}};CKEDITOR.filter.instances[this.id]=this;if(a instanceof CKEDITOR.editor){a=this.editor=a;this.customConfig=!0;var b=a.config.allowedContent;!0===b?this.disabled=!0:(b||(this.customConfig=!1),this.allow(b,"config",1),this.allow(a.config.extraAllowedContent,"extra",1),this.allow(P[a.enterMode]+" "+P[a.shiftEnterMode],"default",
1),this.disallow(a.config.disallowedContent))}else this.customConfig=!1,this.allow(a,"default",1)};CKEDITOR.filter.instances={};CKEDITOR.filter.prototype={allow:function(b,c,d){if(!g(this,b,d))return!1;var h,p;if("string"==typeof b)b=f(b);else if(b instanceof CKEDITOR.style){if(b.toAllowedContentRules)return this.allow(b.toAllowedContentRules(this.editor),c,d);h=b.getDefinition();b={};d=h.attributes;b[h.element]=h={styles:h.styles,requiredStyles:h.styles&&CKEDITOR.tools.objectKeys(h.styles)};d&&(d=
E(d),h.classes=d["class"]?d["class"].split(/\s+/):null,h.requiredClasses=h.classes,delete d["class"],h.attributes=d,h.requiredAttributes=d&&CKEDITOR.tools.objectKeys(d))}else if(CKEDITOR.tools.isArray(b)){for(h=0;h<b.length;++h)p=this.allow(b[h],c,d);return p}a(this,b,c,this.allowedContent,this._.allowedRules);return!0},applyTo:function(a,b,c,d){if(this.disabled)return!1;var p=this,e=[],m=this.editor&&this.editor.config.protectedSource,f,g=!1,n={doFilter:!c,doTransform:!0,doCallbacks:!0,toHtml:b};
a.forEach(function(a){if(a.type==CKEDITOR.NODE_ELEMENT){if("off"==a.attributes["data-cke-filter"])return!1;if(!b||"span"!=a.name||!~CKEDITOR.tools.objectKeys(a.attributes).join("|").indexOf("data-cke-"))if(f=r(p,a,e,n),f&1)g=!0;else if(f&2)return!1}else if(a.type==CKEDITOR.NODE_COMMENT&&a.value.match(/^\{cke_protected\}(?!\{C\})/)){var c;a:{var d=decodeURIComponent(a.value.replace(/^\{cke_protected\}/,""));c=[];var h,t,x;if(m)for(t=0;t<m.length;++t)if((x=d.match(m[t]))&&x[0].length==d.length){c=!0;
break a}d=CKEDITOR.htmlParser.fragment.fromHtml(d);1==d.children.length&&(h=d.children[0]).type==CKEDITOR.NODE_ELEMENT&&r(p,h,c,n);c=!c.length}c||e.push(a)}},null,!0);e.length&&(g=!0);var t;a=[];d=P[d||(this.editor?this.editor.enterMode:CKEDITOR.ENTER_P)];for(var x;c=e.pop();)c.type==CKEDITOR.NODE_ELEMENT?h(c,d,a):c.remove();for(;t=a.pop();)if(c=t.el,c.parent)switch(x=B[c.parent.name]||B.span,t.check){case "it":B.$removeEmpty[c.name]&&!c.children.length?h(c,d,a):w(c)||h(c,d,a);break;case "el-up":c.parent.type==
CKEDITOR.NODE_DOCUMENT_FRAGMENT||x[c.name]||h(c,d,a);break;case "parent-down":c.parent.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT||x[c.name]||h(c.parent,d,a)}return g},checkFeature:function(a){if(this.disabled||!a)return!0;a.toFeature&&(a=a.toFeature(this.editor));return!a.requiredContent||this.check(a.requiredContent)},disable:function(){this.disabled=!0},disallow:function(b){if(!g(this,b,!0))return!1;"string"==typeof b&&(b=f(b));a(this,b,null,this.disallowedContent,this._.disallowedRules);return!0},
addContentForms:function(a){if(!this.disabled&&a){var b,c,d=[],h;for(b=0;b<a.length&&!h;++b)c=a[b],("string"==typeof c||c instanceof CKEDITOR.style)&&this.check(c)&&(h=c);if(h){for(b=0;b<a.length;++b)d.push(x(a[b],h));this.addTransformations(d)}}},addElementCallback:function(a){this.elementCallbacks||(this.elementCallbacks=[]);this.elementCallbacks.push(a)},addFeature:function(a){if(this.disabled||!a)return!0;a.toFeature&&(a=a.toFeature(this.editor));this.allow(a.allowedContent,a.name);this.addTransformations(a.contentTransformations);
this.addContentForms(a.contentForms);return a.requiredContent&&(this.customConfig||this.disallowedContent.length)?this.check(a.requiredContent):!0},addTransformations:function(a){var b,c;if(!this.disabled&&a){var d=this._.transformations,h;for(h=0;h<a.length;++h){b=a[h];var p=void 0,e=void 0,m=void 0,f=void 0,g=void 0,t=void 0;c=[];for(e=0;e<b.length;++e)m=b[e],"string"==typeof m?(m=m.split(/\s*:\s*/),f=m[0],g=null,t=m[1]):(f=m.check,g=m.left,t=m.right),p||(p=m,p=p.element?p.element:f?f.match(/^([a-z0-9]+)/i)[0]:
p.left.getDefinition().element),g instanceof CKEDITOR.style&&(g=z(g)),c.push({check:f==p?null:f,left:g,right:"string"==typeof t?F(t):t});b=p;d[b]||(d[b]=[]);d[b].push(c)}}},check:function(a,b,c){if(this.disabled)return!0;if(CKEDITOR.tools.isArray(a)){for(var d=a.length;d--;)if(this.check(a[d],b,c))return!0;return!1}var h,e;if("string"==typeof a){e=a+"\x3c"+(!1===b?"0":"1")+(c?"1":"0")+"\x3e";if(e in this._.cachedChecks)return this._.cachedChecks[e];d=f(a).$1;h=d.styles;var m=d.classes;d.name=d.elements;
d.classes=m=m?m.split(/\s*,\s*/):[];d.styles=v(h);d.attributes=v(d.attributes);d.children=[];m.length&&(d.attributes["class"]=m.join(" "));h&&(d.attributes.style=CKEDITOR.tools.writeCssText(d.styles));h=d}else d=a.getDefinition(),h=d.styles,m=d.attributes||{},h&&!CKEDITOR.tools.isEmpty(h)?(h=E(h),m.style=CKEDITOR.tools.writeCssText(h,!0)):h={},h={name:d.element,attributes:m,classes:m["class"]?m["class"].split(/\s+/):[],styles:h,children:[]};var m=CKEDITOR.tools.clone(h),g=[],t;if(!1!==b&&(t=this._.transformations[h.name])){for(d=
0;d<t.length;++d)p(this,h,t[d]);n(h)}r(this,m,g,{doFilter:!0,doTransform:!1!==b,skipRequired:!c,skipFinalValidation:!c});b=0<g.length?!1:CKEDITOR.tools.objectCompare(h.attributes,m.attributes,!0)?!0:!1;"string"==typeof a&&(this._.cachedChecks[e]=b);return b},getAllowedEnterMode:function(){var a=["p","div","br"],b={p:CKEDITOR.ENTER_P,div:CKEDITOR.ENTER_DIV,br:CKEDITOR.ENTER_BR};return function(c,d){var h=a.slice(),p;if(this.check(P[c]))return c;for(d||(h=h.reverse());p=h.pop();)if(this.check(p))return b[p];
return CKEDITOR.ENTER_BR}}(),destroy:function(){delete CKEDITOR.filter.instances[this.id];delete this._;delete this.allowedContent;delete this.disallowedContent}};var O={styles:1,attributes:1,classes:1},N={styles:"requiredStyles",attributes:"requiredAttributes",classes:"requiredClasses"},C=/^([a-z0-9\-*\s]+)((?:\s*\{[!\w\-,\s\*]+\}\s*|\s*\[[!\w\-,\s\*]+\]\s*|\s*\([!\w\-,\s\*]+\)\s*){0,3})(?:;\s*|$)/i,I={styles:/{([^}]+)}/,attrs:/\[([^\]]+)\]/,classes:/\(([^\)]+)\)/},G=/^cke:(object|embed|param)$/,
K=/^(object|embed|param)$/,J;J=CKEDITOR.filter.transformationsTools={sizeToStyle:function(a){this.lengthToStyle(a,"width");this.lengthToStyle(a,"height")},sizeToAttribute:function(a){this.lengthToAttribute(a,"width");this.lengthToAttribute(a,"height")},lengthToStyle:function(a,b,c){c=c||b;if(!(c in a.styles)){var d=a.attributes[b];d&&(/^\d+$/.test(d)&&(d+="px"),a.styles[c]=d)}delete a.attributes[b]},lengthToAttribute:function(a,b,c){c=c||b;if(!(c in a.attributes)){var d=a.styles[b],h=d&&d.match(/^(\d+)(?:\.\d*)?px$/);
h?a.attributes[c]=h[1]:"cke-test"==d&&(a.attributes[c]="cke-test")}delete a.styles[b]},alignmentToStyle:function(a){if(!("float"in a.styles)){var b=a.attributes.align;if("left"==b||"right"==b)a.styles["float"]=b}delete a.attributes.align},alignmentToAttribute:function(a){if(!("align"in a.attributes)){var b=a.styles["float"];if("left"==b||"right"==b)a.attributes.align=b}delete a.styles["float"]},matchesStyle:m,transform:function(a,b){if("string"==typeof b)a.name=b;else{var c=b.getDefinition(),d=c.styles,
h=c.attributes,p,e,m,f;a.name=c.element;for(p in h)if("class"==p)for(c=a.classes.join("|"),m=h[p].split(/\s+/);f=m.pop();)-1==c.indexOf(f)&&a.classes.push(f);else a.attributes[p]=h[p];for(e in d)a.styles[e]=d[e]}}}})();
(function(){CKEDITOR.focusManager=function(a){if(a.focusManager)return a.focusManager;this.hasFocus=!1;this.currentActive=null;this._={editor:a};return this};CKEDITOR.focusManager._={blurDelay:200};CKEDITOR.focusManager.prototype={focus:function(a){this._.timer&&clearTimeout(this._.timer);a&&(this.currentActive=a);this.hasFocus||this._.locked||((a=CKEDITOR.currentInstance)&&a.focusManager.blur(1),this.hasFocus=!0,(a=this._.editor.container)&&a.addClass("cke_focus"),this._.editor.fire("focus"))},lock:function(){this._.locked=
1},unlock:function(){delete this._.locked},blur:function(a){function d(){if(this.hasFocus){this.hasFocus=!1;var a=this._.editor.container;a&&a.removeClass("cke_focus");this._.editor.fire("blur")}}if(!this._.locked){this._.timer&&clearTimeout(this._.timer);var b=CKEDITOR.focusManager._.blurDelay;a||!b?d.call(this):this._.timer=CKEDITOR.tools.setTimeout(function(){delete this._.timer;d.call(this)},b,this)}},add:function(a,d){var b=a.getCustomData("focusmanager");if(!b||b!=this){b&&b.remove(a);var b=
"focus",c="blur";d&&(CKEDITOR.env.ie?(b="focusin",c="focusout"):CKEDITOR.event.useCapture=1);var e={blur:function(){a.equals(this.currentActive)&&this.blur()},focus:function(){this.focus(a)}};a.on(b,e.focus,this);a.on(c,e.blur,this);d&&(CKEDITOR.event.useCapture=0);a.setCustomData("focusmanager",this);a.setCustomData("focusmanager_handlers",e)}},remove:function(a){a.removeCustomData("focusmanager");var d=a.removeCustomData("focusmanager_handlers");a.removeListener("blur",d.blur);a.removeListener("focus",
d.focus)}}})();CKEDITOR.keystrokeHandler=function(a){if(a.keystrokeHandler)return a.keystrokeHandler;this.keystrokes={};this.blockedKeystrokes={};this._={editor:a};return this};
(function(){var a,d=function(b){b=b.data;var d=b.getKeystroke(),g=this.keystrokes[d],k=this._.editor;a=!1===k.fire("key",{keyCode:d,domEvent:b});a||(g&&(a=!1!==k.execCommand(g,{from:"keystrokeHandler"})),a||(a=!!this.blockedKeystrokes[d]));a&&b.preventDefault(!0);return!a},b=function(b){a&&(a=!1,b.data.preventDefault(!0))};CKEDITOR.keystrokeHandler.prototype={attach:function(a){a.on("keydown",d,this);if(CKEDITOR.env.gecko&&CKEDITOR.env.mac)a.on("keypress",b,this)}}})();
(function(){CKEDITOR.lang={languages:{af:1,ar:1,bg:1,bn:1,bs:1,ca:1,cs:1,cy:1,da:1,de:1,"de-ch":1,el:1,"en-au":1,"en-ca":1,"en-gb":1,en:1,eo:1,es:1,et:1,eu:1,fa:1,fi:1,fo:1,"fr-ca":1,fr:1,gl:1,gu:1,he:1,hi:1,hr:1,hu:1,id:1,is:1,it:1,ja:1,ka:1,km:1,ko:1,ku:1,lt:1,lv:1,mk:1,mn:1,ms:1,nb:1,nl:1,no:1,pl:1,"pt-br":1,pt:1,ro:1,ru:1,si:1,sk:1,sl:1,sq:1,"sr-latn":1,sr:1,sv:1,th:1,tr:1,tt:1,ug:1,uk:1,vi:1,"zh-cn":1,zh:1},rtl:{ar:1,fa:1,he:1,ku:1,ug:1},load:function(a,d,b){a&&CKEDITOR.lang.languages[a]||(a=
this.detect(d,a));var c=this;d=function(){c[a].dir=c.rtl[a]?"rtl":"ltr";b(a,c[a])};this[a]?d():CKEDITOR.scriptLoader.load(CKEDITOR.getUrl("lang/"+a+".js"),d,this)},detect:function(a,d){var b=this.languages;d=d||navigator.userLanguage||navigator.language||a;var c=d.toLowerCase().match(/([a-z]+)(?:-([a-z]+))?/),e=c[1],c=c[2];b[e+"-"+c]?e=e+"-"+c:b[e]||(e=null);CKEDITOR.lang.detect=e?function(){return e}:function(a){return a};return e||a}}})();
CKEDITOR.scriptLoader=function(){var a={},d={};return{load:function(b,c,e,g){var k="string"==typeof b;k&&(b=[b]);e||(e=CKEDITOR);var l=b.length,q=[],v=[],f=function(a){c&&(k?c.call(e,a):c.call(e,q,v))};if(0===l)f(!0);else{var y=function(a,b){(b?q:v).push(a);0>=--l&&(g&&CKEDITOR.document.getDocumentElement().removeStyle("cursor"),f(b))},A=function(b,c){a[b]=1;var e=d[b];delete d[b];for(var f=0;f<e.length;f++)e[f](b,c)},r=function(b){if(a[b])y(b,!0);else{var e=d[b]||(d[b]=[]);e.push(y);if(!(1<e.length)){var f=
new CKEDITOR.dom.element("script");f.setAttributes({type:"text/javascript",src:b});c&&(CKEDITOR.env.ie&&8>=CKEDITOR.env.version?f.$.onreadystatechange=function(){if("loaded"==f.$.readyState||"complete"==f.$.readyState)f.$.onreadystatechange=null,A(b,!0)}:(f.$.onload=function(){setTimeout(function(){A(b,!0)},0)},f.$.onerror=function(){A(b,!1)}));f.appendTo(CKEDITOR.document.getHead())}}};g&&CKEDITOR.document.getDocumentElement().setStyle("cursor","wait");for(var D=0;D<l;D++)r(b[D])}},queue:function(){function a(){var b;
(b=c[0])&&this.load(b.scriptUrl,b.callback,CKEDITOR,0)}var c=[];return function(d,g){var k=this;c.push({scriptUrl:d,callback:function(){g&&g.apply(this,arguments);c.shift();a.call(k)}});1==c.length&&a.call(this)}}()}}();CKEDITOR.resourceManager=function(a,d){this.basePath=a;this.fileName=d;this.registered={};this.loaded={};this.externals={};this._={waitingList:{}}};
CKEDITOR.resourceManager.prototype={add:function(a,d){if(this.registered[a])throw Error('[CKEDITOR.resourceManager.add] The resource name "'+a+'" is already registered.');var b=this.registered[a]=d||{};b.name=a;b.path=this.getPath(a);CKEDITOR.fire(a+CKEDITOR.tools.capitalize(this.fileName)+"Ready",b);return this.get(a)},get:function(a){return this.registered[a]||null},getPath:function(a){var d=this.externals[a];return CKEDITOR.getUrl(d&&d.dir||this.basePath+a+"/")},getFilePath:function(a){var d=this.externals[a];
return CKEDITOR.getUrl(this.getPath(a)+(d?d.file:this.fileName+".js"))},addExternal:function(a,d,b){a=a.split(",");for(var c=0;c<a.length;c++){var e=a[c];b||(d=d.replace(/[^\/]+$/,function(a){b=a;return""}));this.externals[e]={dir:d,file:b||this.fileName+".js"}}},load:function(a,d,b){CKEDITOR.tools.isArray(a)||(a=a?[a]:[]);for(var c=this.loaded,e=this.registered,g=[],k={},l={},q=0;q<a.length;q++){var v=a[q];if(v)if(c[v]||e[v])l[v]=this.get(v);else{var f=this.getFilePath(v);g.push(f);f in k||(k[f]=
[]);k[f].push(v)}}CKEDITOR.scriptLoader.load(g,function(a,e){if(e.length)throw Error('[CKEDITOR.resourceManager.load] Resource name "'+k[e[0]].join(",")+'" was not found at "'+e[0]+'".');for(var f=0;f<a.length;f++)for(var g=k[a[f]],n=0;n<g.length;n++){var w=g[n];l[w]=this.get(w);c[w]=1}d.call(b,l)},this)}};CKEDITOR.plugins=new CKEDITOR.resourceManager("plugins/","plugin");
CKEDITOR.plugins.load=CKEDITOR.tools.override(CKEDITOR.plugins.load,function(a){var d={};return function(b,c,e){var g={},k=function(b){a.call(this,b,function(a){CKEDITOR.tools.extend(g,a);var b=[],f;for(f in a){var l=a[f],A=l&&l.requires;if(!d[f]){if(l.icons)for(var r=l.icons.split(","),D=r.length;D--;)CKEDITOR.skin.addIcon(r[D],l.path+"icons/"+(CKEDITOR.env.hidpi&&l.hidpi?"hidpi/":"")+r[D]+".png");d[f]=1}if(A)for(A.split&&(A=A.split(",")),l=0;l<A.length;l++)g[A[l]]||b.push(A[l])}if(b.length)k.call(this,
b);else{for(f in g)l=g[f],l.onLoad&&!l.onLoad._called&&(!1===l.onLoad()&&delete g[f],l.onLoad._called=1);c&&c.call(e||window,g)}},this)};k.call(this,b)}});CKEDITOR.plugins.setLang=function(a,d,b){var c=this.get(a);a=c.langEntries||(c.langEntries={});c=c.lang||(c.lang=[]);c.split&&(c=c.split(","));-1==CKEDITOR.tools.indexOf(c,d)&&c.push(d);a[d]=b};CKEDITOR.ui=function(a){if(a.ui)return a.ui;this.items={};this.instances={};this.editor=a;this._={handlers:{}};return this};
CKEDITOR.ui.prototype={add:function(a,d,b){b.name=a.toLowerCase();var c=this.items[a]={type:d,command:b.command||null,args:Array.prototype.slice.call(arguments,2)};CKEDITOR.tools.extend(c,b)},get:function(a){return this.instances[a]},create:function(a){var d=this.items[a],b=d&&this._.handlers[d.type],c=d&&d.command&&this.editor.getCommand(d.command),b=b&&b.create.apply(this,d.args);this.instances[a]=b;c&&c.uiItems.push(b);b&&!b.type&&(b.type=d.type);return b},addHandler:function(a,d){this._.handlers[a]=
d},space:function(a){return CKEDITOR.document.getById(this.spaceId(a))},spaceId:function(a){return this.editor.id+"_"+a}};CKEDITOR.event.implementOn(CKEDITOR.ui);
(function(){function a(a,e,f){CKEDITOR.event.call(this);a=a&&CKEDITOR.tools.clone(a);if(void 0!==e){if(!(e instanceof CKEDITOR.dom.element))throw Error("Expect element of type CKEDITOR.dom.element.");if(!f)throw Error("One of the element modes must be specified.");if(CKEDITOR.env.ie&&CKEDITOR.env.quirks&&f==CKEDITOR.ELEMENT_MODE_INLINE)throw Error("Inline element mode is not supported on IE quirks.");if(!b(e,f))throw Error('The specified element mode is not supported on element: "'+e.getName()+'".');
this.element=e;this.elementMode=f;this.name=this.elementMode!=CKEDITOR.ELEMENT_MODE_APPENDTO&&(e.getId()||e.getNameAtt())}else this.elementMode=CKEDITOR.ELEMENT_MODE_NONE;this._={};this.commands={};this.templates={};this.name=this.name||d();this.id=CKEDITOR.tools.getNextId();this.status="unloaded";this.config=CKEDITOR.tools.prototypedCopy(CKEDITOR.config);this.ui=new CKEDITOR.ui(this);this.focusManager=new CKEDITOR.focusManager(this);this.keystrokeHandler=new CKEDITOR.keystrokeHandler(this);this.on("readOnly",
c);this.on("selectionChange",function(a){g(this,a.data.path)});this.on("activeFilterChange",function(){g(this,this.elementPath(),!0)});this.on("mode",c);this.on("instanceReady",function(){this.config.startupFocus&&this.focus()});CKEDITOR.fire("instanceCreated",null,this);CKEDITOR.add(this);CKEDITOR.tools.setTimeout(function(){"destroyed"!==this.status?l(this,a):CKEDITOR.warn("editor-incorrect-destroy")},0,this)}function d(){do var a="editor"+ ++r;while(CKEDITOR.instances[a]);return a}function b(a,
b){return b==CKEDITOR.ELEMENT_MODE_INLINE?a.is(CKEDITOR.dtd.$editable)||a.is("textarea"):b==CKEDITOR.ELEMENT_MODE_REPLACE?!a.is(CKEDITOR.dtd.$nonBodyContent):1}function c(){var a=this.commands,b;for(b in a)e(this,a[b])}function e(a,b){b[b.startDisabled?"disable":a.readOnly&&!b.readOnly?"disable":b.modes[a.mode]?"enable":"disable"]()}function g(a,b,c){if(b){var d,e,h=a.commands;for(e in h)d=h[e],(c||d.contextSensitive)&&d.refresh(a,b)}}function k(a){var b=a.config.customConfig;if(!b)return!1;var b=
CKEDITOR.getUrl(b),c=D[b]||(D[b]={});c.fn?(c.fn.call(a,a.config),CKEDITOR.getUrl(a.config.customConfig)!=b&&k(a)||a.fireOnce("customConfigLoaded")):CKEDITOR.scriptLoader.queue(b,function(){c.fn=CKEDITOR.editorConfig?CKEDITOR.editorConfig:function(){};k(a)});return!0}function l(a,b){a.on("customConfigLoaded",function(){if(b){if(b.on)for(var c in b.on)a.on(c,b.on[c]);CKEDITOR.tools.extend(a.config,b,!0);delete a.config.on}c=a.config;a.readOnly=c.readOnly?!0:a.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?
a.element.is("textarea")?a.element.hasAttribute("disabled")||a.element.hasAttribute("readonly"):a.element.isReadOnly():a.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE?a.element.hasAttribute("disabled")||a.element.hasAttribute("readonly"):!1;a.blockless=a.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?!(a.element.is("textarea")||CKEDITOR.dtd[a.element.getName()].p):!1;a.tabIndex=c.tabIndex||a.element&&a.element.getAttribute("tabindex")||0;a.activeEnterMode=a.enterMode=a.blockless?CKEDITOR.ENTER_BR:c.enterMode;
a.activeShiftEnterMode=a.shiftEnterMode=a.blockless?CKEDITOR.ENTER_BR:c.shiftEnterMode;c.skin&&(CKEDITOR.skinName=c.skin);a.fireOnce("configLoaded");a.dataProcessor=new CKEDITOR.htmlDataProcessor(a);a.filter=a.activeFilter=new CKEDITOR.filter(a);q(a)});b&&null!=b.customConfig&&(a.config.customConfig=b.customConfig);k(a)||a.fireOnce("customConfigLoaded")}function q(a){CKEDITOR.skin.loadPart("editor",function(){v(a)})}function v(a){CKEDITOR.lang.load(a.config.language,a.config.defaultLanguage,function(b,
c){var d=a.config.title;a.langCode=b;a.lang=CKEDITOR.tools.prototypedCopy(c);a.title="string"==typeof d||!1===d?d:[a.lang.editor,a.name].join(", ");a.config.contentsLangDirection||(a.config.contentsLangDirection=a.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?a.element.getDirection(1):a.lang.dir);a.fire("langLoaded");f(a)})}function f(a){a.getStylesSet(function(b){a.once("loaded",function(){a.fire("stylesSet",{styles:b})},null,null,1);y(a)})}function y(a){var b=a.config,c=b.plugins,d=b.extraPlugins,e=
b.removePlugins;if(d)var h=new RegExp("(?:^|,)(?:"+d.replace(/\s*,\s*/g,"|")+")(?\x3d,|$)","g"),c=c.replace(h,""),c=c+(","+d);if(e)var p=new RegExp("(?:^|,)(?:"+e.replace(/\s*,\s*/g,"|")+")(?\x3d,|$)","g"),c=c.replace(p,"");CKEDITOR.env.air&&(c+=",adobeair");CKEDITOR.plugins.load(c.split(","),function(c){var d=[],h=[],e=[];a.plugins=c;for(var f in c){var g=c[f],t=g.lang,k=null,l=g.requires,q;CKEDITOR.tools.isArray(l)&&(l=l.join(","));if(l&&(q=l.match(p)))for(;l=q.pop();)CKEDITOR.error("editor-plugin-required",
{plugin:l.replace(",",""),requiredBy:f});t&&!a.lang[f]&&(t.split&&(t=t.split(",")),0<=CKEDITOR.tools.indexOf(t,a.langCode)?k=a.langCode:(k=a.langCode.replace(/-.*/,""),k=k!=a.langCode&&0<=CKEDITOR.tools.indexOf(t,k)?k:0<=CKEDITOR.tools.indexOf(t,"en")?"en":t[0]),g.langEntries&&g.langEntries[k]?(a.lang[f]=g.langEntries[k],k=null):e.push(CKEDITOR.getUrl(g.path+"lang/"+k+".js")));h.push(k);d.push(g)}CKEDITOR.scriptLoader.load(e,function(){for(var c=["beforeInit","init","afterInit"],e=0;e<c.length;e++)for(var p=
0;p<d.length;p++){var m=d[p];0===e&&h[p]&&m.lang&&m.langEntries&&(a.lang[m.name]=m.langEntries[h[p]]);if(m[c[e]])m[c[e]](a)}a.fireOnce("pluginsLoaded");b.keystrokes&&a.setKeystroke(a.config.keystrokes);for(p=0;p<a.config.blockedKeystrokes.length;p++)a.keystrokeHandler.blockedKeystrokes[a.config.blockedKeystrokes[p]]=1;a.status="loaded";a.fireOnce("loaded");CKEDITOR.fire("instanceLoaded",null,a)})})}function A(){var a=this.element;if(a&&this.elementMode!=CKEDITOR.ELEMENT_MODE_APPENDTO){var b=this.getData();
this.config.htmlEncodeOutput&&(b=CKEDITOR.tools.htmlEncode(b));a.is("textarea")?a.setValue(b):a.setHtml(b);return!0}return!1}a.prototype=CKEDITOR.editor.prototype;CKEDITOR.editor=a;var r=0,D={};CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{addCommand:function(a,b){b.name=a.toLowerCase();var c=new CKEDITOR.command(this,b);this.mode&&e(this,c);return this.commands[a]=c},_attachToForm:function(){function a(b){c.updateElement();c._.required&&!d.getValue()&&!1===c.fire("required")&&b.data.preventDefault()}
function b(a){return!!(a&&a.call&&a.apply)}var c=this,d=c.element,e=new CKEDITOR.dom.element(d.$.form);d.is("textarea")&&e&&(e.on("submit",a),b(e.$.submit)&&(e.$.submit=CKEDITOR.tools.override(e.$.submit,function(b){return function(){a();b.apply?b.apply(this):b()}})),c.on("destroy",function(){e.removeListener("submit",a)}))},destroy:function(a){this.fire("beforeDestroy");!a&&A.call(this);this.editable(null);this.filter&&(this.filter.destroy(),delete this.filter);delete this.activeFilter;this.status=
"destroyed";this.fire("destroy");this.removeAllListeners();CKEDITOR.remove(this);CKEDITOR.fire("instanceDestroyed",null,this)},elementPath:function(a){if(!a){a=this.getSelection();if(!a)return null;a=a.getStartElement()}return a?new CKEDITOR.dom.elementPath(a,this.editable()):null},createRange:function(){var a=this.editable();return a?new CKEDITOR.dom.range(a):null},execCommand:function(a,b){var c=this.getCommand(a),d={name:a,commandData:b,command:c};return c&&c.state!=CKEDITOR.TRISTATE_DISABLED&&
!1!==this.fire("beforeCommandExec",d)&&(d.returnValue=c.exec(d.commandData),!c.async&&!1!==this.fire("afterCommandExec",d))?d.returnValue:!1},getCommand:function(a){return this.commands[a]},getData:function(a){!a&&this.fire("beforeGetData");var b=this._.data;"string"!=typeof b&&(b=(b=this.element)&&this.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE?b.is("textarea")?b.getValue():b.getHtml():"");b={dataValue:b};!a&&this.fire("getData",b);return b.dataValue},getSnapshot:function(){var a=this.fire("getSnapshot");
"string"!=typeof a&&(a=(a=this.element)&&this.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE?a.is("textarea")?a.getValue():a.getHtml():"");return a},loadSnapshot:function(a){this.fire("loadSnapshot",a)},setData:function(a,b,c){var d=!0,e=b;b&&"object"==typeof b&&(c=b.internal,e=b.callback,d=!b.noSnapshot);!c&&d&&this.fire("saveSnapshot");if(e||!c)this.once("dataReady",function(a){!c&&d&&this.fire("saveSnapshot");e&&e.call(a.editor)});a={dataValue:a};!c&&this.fire("setData",a);this._.data=a.dataValue;
!c&&this.fire("afterSetData",a)},setReadOnly:function(a){a=null==a||a;this.readOnly!=a&&(this.readOnly=a,this.keystrokeHandler.blockedKeystrokes[8]=+a,this.editable().setReadOnly(a),this.fire("readOnly"))},insertHtml:function(a,b,c){this.fire("insertHtml",{dataValue:a,mode:b,range:c})},insertText:function(a){this.fire("insertText",a)},insertElement:function(a){this.fire("insertElement",a)},getSelectedHtml:function(a){var b=this.editable(),c=this.getSelection(),c=c&&c.getRanges();if(!b||!c||0===c.length)return null;
for(var d=new CKEDITOR.dom.documentFragment,e,h,p,m=0;m<c.length;m++){var f=c[m],g=f.startContainer;g.getName&&"tr"==g.getName()?(e||(e=g.getAscendant("table").clone(),e.append(g.getAscendant("tbody").clone()),d.append(e),e=e.findOne("tbody")),h&&h.equals(g)||(h=g,p=g.clone(),e.append(p)),p.append(f.cloneContents())):d.append(f.cloneContents())}b=e?d:b.getHtmlFromRange(c[0]);return a?b.getHtml():b},extractSelectedHtml:function(a,b){var c=this.editable(),d=this.getSelection().getRanges();if(!c||0===
d.length)return null;d=d[0];c=c.extractHtmlFromRange(d,b);b||this.getSelection().selectRanges([d]);return a?c.getHtml():c},focus:function(){this.fire("beforeFocus")},checkDirty:function(){return"ready"==this.status&&this._.previousValue!==this.getSnapshot()},resetDirty:function(){this._.previousValue=this.getSnapshot()},updateElement:function(){return A.call(this)},setKeystroke:function(){for(var a=this.keystrokeHandler.keystrokes,b=CKEDITOR.tools.isArray(arguments[0])?arguments[0]:[[].slice.call(arguments,
0)],c,d,e=b.length;e--;)c=b[e],d=0,CKEDITOR.tools.isArray(c)&&(d=c[1],c=c[0]),d?a[c]=d:delete a[c]},addFeature:function(a){return this.filter.addFeature(a)},setActiveFilter:function(a){a||(a=this.filter);this.activeFilter!==a&&(this.activeFilter=a,this.fire("activeFilterChange"),a===this.filter?this.setActiveEnterMode(null,null):this.setActiveEnterMode(a.getAllowedEnterMode(this.enterMode),a.getAllowedEnterMode(this.shiftEnterMode,!0)))},setActiveEnterMode:function(a,b){a=a?this.blockless?CKEDITOR.ENTER_BR:
a:this.enterMode;b=b?this.blockless?CKEDITOR.ENTER_BR:b:this.shiftEnterMode;if(this.activeEnterMode!=a||this.activeShiftEnterMode!=b)this.activeEnterMode=a,this.activeShiftEnterMode=b,this.fire("activeEnterModeChange")},showNotification:function(a){alert(a)}})})();CKEDITOR.ELEMENT_MODE_NONE=0;CKEDITOR.ELEMENT_MODE_REPLACE=1;CKEDITOR.ELEMENT_MODE_APPENDTO=2;CKEDITOR.ELEMENT_MODE_INLINE=3;CKEDITOR.htmlParser=function(){this._={htmlPartsRegex:/<(?:(?:\/([^>]+)>)|(?:!--([\S|\s]*?)--\x3e)|(?:([^\/\s>]+)((?:\s+[\w\-:.]+(?:\s*=\s*?(?:(?:"[^"]*")|(?:'[^']*')|[^\s"'\/>]+))?)*)[\S\s]*?(\/?)>))/g}};
(function(){var a=/([\w\-:.]+)(?:(?:\s*=\s*(?:(?:"([^"]*)")|(?:'([^']*)')|([^\s>]+)))|(?=\s|$))/g,d={checked:1,compact:1,declare:1,defer:1,disabled:1,ismap:1,multiple:1,nohref:1,noresize:1,noshade:1,nowrap:1,readonly:1,selected:1};CKEDITOR.htmlParser.prototype={onTagOpen:function(){},onTagClose:function(){},onText:function(){},onCDATA:function(){},onComment:function(){},parse:function(b){for(var c,e,g=0,k;c=this._.htmlPartsRegex.exec(b);){e=c.index;if(e>g)if(g=b.substring(g,e),k)k.push(g);else this.onText(g);
g=this._.htmlPartsRegex.lastIndex;if(e=c[1])if(e=e.toLowerCase(),k&&CKEDITOR.dtd.$cdata[e]&&(this.onCDATA(k.join("")),k=null),!k){this.onTagClose(e);continue}if(k)k.push(c[0]);else if(e=c[3]){if(e=e.toLowerCase(),!/="/.test(e)){var l={},q,v=c[4];c=!!c[5];if(v)for(;q=a.exec(v);){var f=q[1].toLowerCase();q=q[2]||q[3]||q[4]||"";l[f]=!q&&d[f]?f:CKEDITOR.tools.htmlDecodeAttr(q)}this.onTagOpen(e,l,c);!k&&CKEDITOR.dtd.$cdata[e]&&(k=[])}}else if(e=c[2])this.onComment(e)}if(b.length>g)this.onText(b.substring(g,
b.length))}}})();
CKEDITOR.htmlParser.basicWriter=CKEDITOR.tools.createClass({$:function(){this._={output:[]}},proto:{openTag:function(a){this._.output.push("\x3c",a)},openTagClose:function(a,d){d?this._.output.push(" /\x3e"):this._.output.push("\x3e")},attribute:function(a,d){"string"==typeof d&&(d=CKEDITOR.tools.htmlEncodeAttr(d));this._.output.push(" ",a,'\x3d"',d,'"')},closeTag:function(a){this._.output.push("\x3c/",a,"\x3e")},text:function(a){this._.output.push(a)},comment:function(a){this._.output.push("\x3c!--",a,
"--\x3e")},write:function(a){this._.output.push(a)},reset:function(){this._.output=[];this._.indent=!1},getHtml:function(a){var d=this._.output.join("");a&&this.reset();return d}}});"use strict";
(function(){CKEDITOR.htmlParser.node=function(){};CKEDITOR.htmlParser.node.prototype={remove:function(){var a=this.parent.children,d=CKEDITOR.tools.indexOf(a,this),b=this.previous,c=this.next;b&&(b.next=c);c&&(c.previous=b);a.splice(d,1);this.parent=null},replaceWith:function(a){var d=this.parent.children,b=CKEDITOR.tools.indexOf(d,this),c=a.previous=this.previous,e=a.next=this.next;c&&(c.next=a);e&&(e.previous=a);d[b]=a;a.parent=this.parent;this.parent=null},insertAfter:function(a){var d=a.parent.children,
b=CKEDITOR.tools.indexOf(d,a),c=a.next;d.splice(b+1,0,this);this.next=a.next;this.previous=a;a.next=this;c&&(c.previous=this);this.parent=a.parent},insertBefore:function(a){var d=a.parent.children,b=CKEDITOR.tools.indexOf(d,a);d.splice(b,0,this);this.next=a;(this.previous=a.previous)&&(a.previous.next=this);a.previous=this;this.parent=a.parent},getAscendant:function(a){var d="function"==typeof a?a:"string"==typeof a?function(b){return b.name==a}:function(b){return b.name in a},b=this.parent;for(;b&&
b.type==CKEDITOR.NODE_ELEMENT;){if(d(b))return b;b=b.parent}return null},wrapWith:function(a){this.replaceWith(a);a.add(this);return a},getIndex:function(){return CKEDITOR.tools.indexOf(this.parent.children,this)},getFilterContext:function(a){return a||{}}}})();"use strict";CKEDITOR.htmlParser.comment=function(a){this.value=a;this._={isBlockLike:!1}};
CKEDITOR.htmlParser.comment.prototype=CKEDITOR.tools.extend(new CKEDITOR.htmlParser.node,{type:CKEDITOR.NODE_COMMENT,filter:function(a,d){var b=this.value;if(!(b=a.onComment(d,b,this)))return this.remove(),!1;if("string"!=typeof b)return this.replaceWith(b),!1;this.value=b;return!0},writeHtml:function(a,d){d&&this.filter(d);a.comment(this.value)}});"use strict";
(function(){CKEDITOR.htmlParser.text=function(a){this.value=a;this._={isBlockLike:!1}};CKEDITOR.htmlParser.text.prototype=CKEDITOR.tools.extend(new CKEDITOR.htmlParser.node,{type:CKEDITOR.NODE_TEXT,filter:function(a,d){if(!(this.value=a.onText(d,this.value,this)))return this.remove(),!1},writeHtml:function(a,d){d&&this.filter(d);a.text(this.value)}})})();"use strict";
(function(){CKEDITOR.htmlParser.cdata=function(a){this.value=a};CKEDITOR.htmlParser.cdata.prototype=CKEDITOR.tools.extend(new CKEDITOR.htmlParser.node,{type:CKEDITOR.NODE_TEXT,filter:function(){},writeHtml:function(a){a.write(this.value)}})})();"use strict";CKEDITOR.htmlParser.fragment=function(){this.children=[];this.parent=null;this._={isBlockLike:!0,hasInlineStarted:!1}};
(function(){function a(a){return a.attributes["data-cke-survive"]?!1:"a"==a.name&&a.attributes.href||CKEDITOR.dtd.$removeEmpty[a.name]}var d=CKEDITOR.tools.extend({table:1,ul:1,ol:1,dl:1},CKEDITOR.dtd.table,CKEDITOR.dtd.ul,CKEDITOR.dtd.ol,CKEDITOR.dtd.dl),b={ol:1,ul:1},c=CKEDITOR.tools.extend({},{html:1},CKEDITOR.dtd.html,CKEDITOR.dtd.body,CKEDITOR.dtd.head,{style:1,script:1}),e={ul:"li",ol:"li",dl:"dd",table:"tbody",tbody:"tr",thead:"tr",tfoot:"tr",tr:"td"};CKEDITOR.htmlParser.fragment.fromHtml=
function(g,k,l){function q(a){var b;if(0<w.length)for(var c=0;c<w.length;c++){var d=w[c],h=d.name,e=CKEDITOR.dtd[h],f=u.name&&CKEDITOR.dtd[u.name];f&&!f[h]||a&&e&&!e[a]&&CKEDITOR.dtd[a]?h==u.name&&(y(u,u.parent,1),c--):(b||(v(),b=1),d=d.clone(),d.parent=u,u=d,w.splice(c,1),c--)}}function v(){for(;H.length;)y(H.shift(),u)}function f(a){if(a._.isBlockLike&&"pre"!=a.name&&"textarea"!=a.name){var b=a.children.length,c=a.children[b-1],d;c&&c.type==CKEDITOR.NODE_TEXT&&((d=CKEDITOR.tools.rtrim(c.value))?
c.value=d:a.children.length=b-1)}}function y(b,c,d){c=c||u||n;var e=u;void 0===b.previous&&(A(c,b)&&(u=c,D.onTagOpen(l,{}),b.returnPoint=c=u),f(b),a(b)&&!b.children.length||c.add(b),"pre"==b.name&&(h=!1),"textarea"==b.name&&(t=!1));b.returnPoint?(u=b.returnPoint,delete b.returnPoint):u=d?c:e}function A(a,b){if((a==n||"body"==a.name)&&l&&(!a.name||CKEDITOR.dtd[a.name][l])){var c,d;return(c=b.attributes&&(d=b.attributes["data-cke-real-element-type"])?d:b.name)&&c in CKEDITOR.dtd.$inline&&!(c in CKEDITOR.dtd.head)&&
!b.isOrphan||b.type==CKEDITOR.NODE_TEXT}}function r(a,b){return a in CKEDITOR.dtd.$listItem||a in CKEDITOR.dtd.$tableContent?a==b||"dt"==a&&"dd"==b||"dd"==a&&"dt"==b:!1}var D=new CKEDITOR.htmlParser,n=k instanceof CKEDITOR.htmlParser.element?k:"string"==typeof k?new CKEDITOR.htmlParser.element(k):new CKEDITOR.htmlParser.fragment,w=[],H=[],u=n,t="textarea"==n.name,h="pre"==n.name;D.onTagOpen=function(e,m,f,g){m=new CKEDITOR.htmlParser.element(e,m);m.isUnknown&&f&&(m.isEmpty=!0);m.isOptionalClose=g;
if(a(m))w.push(m);else{if("pre"==e)h=!0;else{if("br"==e&&h){u.add(new CKEDITOR.htmlParser.text("\n"));return}"textarea"==e&&(t=!0)}if("br"==e)H.push(m);else{for(;!(g=(f=u.name)?CKEDITOR.dtd[f]||(u._.isBlockLike?CKEDITOR.dtd.div:CKEDITOR.dtd.span):c,m.isUnknown||u.isUnknown||g[e]);)if(u.isOptionalClose)D.onTagClose(f);else if(e in b&&f in b)f=u.children,(f=f[f.length-1])&&"li"==f.name||y(f=new CKEDITOR.htmlParser.element("li"),u),!m.returnPoint&&(m.returnPoint=u),u=f;else if(e in CKEDITOR.dtd.$listItem&&
!r(e,f))D.onTagOpen("li"==e?"ul":"dl",{},0,1);else if(f in d&&!r(e,f))!m.returnPoint&&(m.returnPoint=u),u=u.parent;else if(f in CKEDITOR.dtd.$inline&&w.unshift(u),u.parent)y(u,u.parent,1);else{m.isOrphan=1;break}q(e);v();m.parent=u;m.isEmpty?y(m):u=m}}};D.onTagClose=function(a){for(var b=w.length-1;0<=b;b--)if(a==w[b].name){w.splice(b,1);return}for(var c=[],d=[],h=u;h!=n&&h.name!=a;)h._.isBlockLike||d.unshift(h),c.push(h),h=h.returnPoint||h.parent;if(h!=n){for(b=0;b<c.length;b++){var e=c[b];y(e,e.parent)}u=
h;h._.isBlockLike&&v();y(h,h.parent);h==u&&(u=u.parent);w=w.concat(d)}"body"==a&&(l=!1)};D.onText=function(a){if(!(u._.hasInlineStarted&&!H.length||h||t)&&(a=CKEDITOR.tools.ltrim(a),0===a.length))return;var b=u.name,f=b?CKEDITOR.dtd[b]||(u._.isBlockLike?CKEDITOR.dtd.div:CKEDITOR.dtd.span):c;if(!t&&!f["#"]&&b in d)D.onTagOpen(e[b]||""),D.onText(a);else{v();q();h||t||(a=a.replace(/[\t\r\n ]{2,}|[\t\r\n]/g," "));a=new CKEDITOR.htmlParser.text(a);if(A(u,a))this.onTagOpen(l,{},0,1);u.add(a)}};D.onCDATA=
function(a){u.add(new CKEDITOR.htmlParser.cdata(a))};D.onComment=function(a){v();q();u.add(new CKEDITOR.htmlParser.comment(a))};D.parse(g);for(v();u!=n;)y(u,u.parent,1);f(n);return n};CKEDITOR.htmlParser.fragment.prototype={type:CKEDITOR.NODE_DOCUMENT_FRAGMENT,add:function(a,b){isNaN(b)&&(b=this.children.length);var c=0<b?this.children[b-1]:null;if(c){if(a._.isBlockLike&&c.type==CKEDITOR.NODE_TEXT&&(c.value=CKEDITOR.tools.rtrim(c.value),0===c.value.length)){this.children.pop();this.add(a);return}c.next=
a}a.previous=c;a.parent=this;this.children.splice(b,0,a);this._.hasInlineStarted||(this._.hasInlineStarted=a.type==CKEDITOR.NODE_TEXT||a.type==CKEDITOR.NODE_ELEMENT&&!a._.isBlockLike)},filter:function(a,b){b=this.getFilterContext(b);a.onRoot(b,this);this.filterChildren(a,!1,b)},filterChildren:function(a,b,c){if(this.childrenFilteredBy!=a.id){c=this.getFilterContext(c);if(b&&!this.parent)a.onRoot(c,this);this.childrenFilteredBy=a.id;for(b=0;b<this.children.length;b++)!1===this.children[b].filter(a,
c)&&b--}},writeHtml:function(a,b){b&&this.filter(b);this.writeChildrenHtml(a)},writeChildrenHtml:function(a,b,c){var d=this.getFilterContext();if(c&&!this.parent&&b)b.onRoot(d,this);b&&this.filterChildren(b,!1,d);b=0;c=this.children;for(d=c.length;b<d;b++)c[b].writeHtml(a)},forEach:function(a,b,c){if(!(c||b&&this.type!=b))var d=a(this);if(!1!==d){c=this.children;for(var e=0;e<c.length;e++)d=c[e],d.type==CKEDITOR.NODE_ELEMENT?d.forEach(a,b):b&&d.type!=b||a(d)}},getFilterContext:function(a){return a||
{}}}})();"use strict";
(function(){function a(){this.rules=[]}function d(b,c,d,g){var k,l;for(k in c)(l=b[k])||(l=b[k]=new a),l.add(c[k],d,g)}CKEDITOR.htmlParser.filter=CKEDITOR.tools.createClass({$:function(b){this.id=CKEDITOR.tools.getNextNumber();this.elementNameRules=new a;this.attributeNameRules=new a;this.elementsRules={};this.attributesRules={};this.textRules=new a;this.commentRules=new a;this.rootRules=new a;b&&this.addRules(b,10)},proto:{addRules:function(a,c){var e;"number"==typeof c?e=c:c&&"priority"in c&&(e=
c.priority);"number"!=typeof e&&(e=10);"object"!=typeof c&&(c={});a.elementNames&&this.elementNameRules.addMany(a.elementNames,e,c);a.attributeNames&&this.attributeNameRules.addMany(a.attributeNames,e,c);a.elements&&d(this.elementsRules,a.elements,e,c);a.attributes&&d(this.attributesRules,a.attributes,e,c);a.text&&this.textRules.add(a.text,e,c);a.comment&&this.commentRules.add(a.comment,e,c);a.root&&this.rootRules.add(a.root,e,c)},applyTo:function(a){a.filter(this)},onElementName:function(a,c){return this.elementNameRules.execOnName(a,
c)},onAttributeName:function(a,c){return this.attributeNameRules.execOnName(a,c)},onText:function(a,c,d){return this.textRules.exec(a,c,d)},onComment:function(a,c,d){return this.commentRules.exec(a,c,d)},onRoot:function(a,c){return this.rootRules.exec(a,c)},onElement:function(a,c){for(var d=[this.elementsRules["^"],this.elementsRules[c.name],this.elementsRules.$],g,k=0;3>k;k++)if(g=d[k]){g=g.exec(a,c,this);if(!1===g)return null;if(g&&g!=c)return this.onNode(a,g);if(c.parent&&!c.name)break}return c},
onNode:function(a,c){var d=c.type;return d==CKEDITOR.NODE_ELEMENT?this.onElement(a,c):d==CKEDITOR.NODE_TEXT?new CKEDITOR.htmlParser.text(this.onText(a,c.value)):d==CKEDITOR.NODE_COMMENT?new CKEDITOR.htmlParser.comment(this.onComment(a,c.value)):null},onAttribute:function(a,c,d,g){return(d=this.attributesRules[d])?d.exec(a,g,c,this):g}}});CKEDITOR.htmlParser.filterRulesGroup=a;a.prototype={add:function(a,c,d){this.rules.splice(this.findIndex(c),0,{value:a,priority:c,options:d})},addMany:function(a,
c,d){for(var g=[this.findIndex(c),0],k=0,l=a.length;k<l;k++)g.push({value:a[k],priority:c,options:d});this.rules.splice.apply(this.rules,g)},findIndex:function(a){for(var c=this.rules,d=c.length-1;0<=d&&a<c[d].priority;)d--;return d+1},exec:function(a,c){var d=c instanceof CKEDITOR.htmlParser.node||c instanceof CKEDITOR.htmlParser.fragment,g=Array.prototype.slice.call(arguments,1),k=this.rules,l=k.length,q,v,f,y;for(y=0;y<l;y++)if(d&&(q=c.type,v=c.name),f=k[y],!(a.nonEditable&&!f.options.applyToAll||
a.nestedEditable&&f.options.excludeNestedEditable)){f=f.value.apply(null,g);if(!1===f||d&&f&&(f.name!=v||f.type!=q))return f;null!=f&&(g[0]=c=f)}return c},execOnName:function(a,c){for(var d=0,g=this.rules,k=g.length,l;c&&d<k;d++)l=g[d],a.nonEditable&&!l.options.applyToAll||a.nestedEditable&&l.options.excludeNestedEditable||(c=c.replace(l.value[0],l.value[1]));return c}}})();
(function(){function a(a,d){function f(a){return a||CKEDITOR.env.needsNbspFiller?new CKEDITOR.htmlParser.text(" "):new CKEDITOR.htmlParser.element("br",{"data-cke-bogus":1})}function m(a,d){return function(h){if(h.type!=CKEDITOR.NODE_DOCUMENT_FRAGMENT){var e=[],m=b(h),t,G;if(m)for(p(m,1)&&e.push(m);m;)g(m)&&(t=c(m))&&p(t)&&((G=c(t))&&!g(G)?e.push(t):(f(x).insertAfter(t),t.remove())),m=m.previous;for(m=0;m<e.length;m++)e[m].remove();if(e=!a||!1!==("function"==typeof d?d(h):d))x||CKEDITOR.env.needsBrFiller||
h.type!=CKEDITOR.NODE_DOCUMENT_FRAGMENT?x||CKEDITOR.env.needsBrFiller||!(7<document.documentMode||h.name in CKEDITOR.dtd.tr||h.name in CKEDITOR.dtd.$listItem)?(e=b(h),e=!e||"form"==h.name&&"input"==e.name):e=!1:e=!1;e&&h.add(f(a))}}}function p(a,b){if((!x||CKEDITOR.env.needsBrFiller)&&a.type==CKEDITOR.NODE_ELEMENT&&"br"==a.name&&!a.attributes["data-cke-eol"])return!0;var c;return a.type==CKEDITOR.NODE_TEXT&&(c=a.value.match(w))&&(c.index&&((new CKEDITOR.htmlParser.text(a.value.substring(0,c.index))).insertBefore(a),
a.value=c[0]),!CKEDITOR.env.needsBrFiller&&x&&(!b||a.parent.name in F)||!x&&((c=a.previous)&&"br"==c.name||!c||g(c)))?!0:!1}var t={elements:{}},x="html"==d,F=CKEDITOR.tools.extend({},h),C;for(C in F)"#"in u[C]||delete F[C];for(C in F)t.elements[C]=m(x,a.config.fillEmptyBlocks);t.root=m(x,!1);t.elements.br=function(a){return function(b){if(b.parent.type!=CKEDITOR.NODE_DOCUMENT_FRAGMENT){var d=b.attributes;if("data-cke-bogus"in d||"data-cke-eol"in d)delete d["data-cke-bogus"];else{for(d=b.next;d&&e(d);)d=
d.next;var h=c(b);!d&&g(b.parent)?k(b.parent,f(a)):g(d)&&h&&!g(h)&&f(a).insertBefore(d)}}}}(x);return t}function d(a,b){return a!=CKEDITOR.ENTER_BR&&!1!==b?a==CKEDITOR.ENTER_DIV?"div":"p":!1}function b(a){for(a=a.children[a.children.length-1];a&&e(a);)a=a.previous;return a}function c(a){for(a=a.previous;a&&e(a);)a=a.previous;return a}function e(a){return a.type==CKEDITOR.NODE_TEXT&&!CKEDITOR.tools.trim(a.value)||a.type==CKEDITOR.NODE_ELEMENT&&a.attributes["data-cke-bookmark"]}function g(a){return a&&
(a.type==CKEDITOR.NODE_ELEMENT&&a.name in h||a.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT)}function k(a,b){var c=a.children[a.children.length-1];a.children.push(b);b.parent=a;c&&(c.next=b,b.previous=c)}function l(a){a=a.attributes;"false"!=a.contenteditable&&(a["data-cke-editable"]=a.contenteditable?"true":1);a.contenteditable="false"}function q(a){a=a.attributes;switch(a["data-cke-editable"]){case "true":a.contenteditable="true";break;case "1":delete a.contenteditable}}function v(a){return a.replace(F,
function(a,b,c){return"\x3c"+b+c.replace(B,function(a,b){return E.test(b)&&-1==c.indexOf("data-cke-saved-"+b)?" data-cke-saved-"+a+" data-cke-"+CKEDITOR.rnd+"-"+a:a})+"\x3e"})}function f(a,b){return a.replace(b,function(a,b,c){0===a.indexOf("\x3ctextarea")&&(a=b+r(c).replace(/</g,"\x26lt;").replace(/>/g,"\x26gt;")+"\x3c/textarea\x3e");return"\x3ccke:encoded\x3e"+encodeURIComponent(a)+"\x3c/cke:encoded\x3e"})}function y(a){return a.replace(O,function(a,b){return decodeURIComponent(b)})}function A(a){return a.replace(/\x3c!--(?!{cke_protected})[\s\S]+?--\x3e/g,
function(a){return"\x3c!--"+H+"{C}"+encodeURIComponent(a).replace(/--/g,"%2D%2D")+"--\x3e"})}function r(a){return a.replace(/\x3c!--\{cke_protected\}\{C\}([\s\S]+?)--\x3e/g,function(a,b){return decodeURIComponent(b)})}function D(a,b){var c=b._.dataStore;return a.replace(/\x3c!--\{cke_protected\}([\s\S]+?)--\x3e/g,function(a,b){return decodeURIComponent(b)}).replace(/\{cke_protected_(\d+)\}/g,function(a,b){return c&&c[b]||""})}function n(a,b){var c=[],d=b.config.protectedSource,h=b._.dataStore||(b._.dataStore=
{id:1}),e=/<\!--\{cke_temp(comment)?\}(\d*?)--\x3e/g,d=[/<script[\s\S]*?(<\/script>|$)/gi,/<noscript[\s\S]*?<\/noscript>/gi,/<meta[\s\S]*?\/?>/gi].concat(d);a=a.replace(/\x3c!--[\s\S]*?--\x3e/g,function(a){return"\x3c!--{cke_tempcomment}"+(c.push(a)-1)+"--\x3e"});for(var m=0;m<d.length;m++)a=a.replace(d[m],function(a){a=a.replace(e,function(a,b,d){return c[d]});return/cke_temp(comment)?/.test(a)?a:"\x3c!--{cke_temp}"+(c.push(a)-1)+"--\x3e"});a=a.replace(e,function(a,b,d){return"\x3c!--"+H+(b?"{C}":
"")+encodeURIComponent(c[d]).replace(/--/g,"%2D%2D")+"--\x3e"});a=a.replace(/<\w+(?:\s+(?:(?:[^\s=>]+\s*=\s*(?:[^'"\s>]+|'[^']*'|"[^"]*"))|[^\s=\/>]+))+\s*\/?>/g,function(a){return a.replace(/\x3c!--\{cke_protected\}([^>]*)--\x3e/g,function(a,b){h[h.id]=decodeURIComponent(b);return"{cke_protected_"+h.id++ +"}"})});return a=a.replace(/<(title|iframe|textarea)([^>]*)>([\s\S]*?)<\/\1>/g,function(a,c,d,h){return"\x3c"+c+d+"\x3e"+D(r(h),b)+"\x3c/"+c+"\x3e"})}CKEDITOR.htmlDataProcessor=function(b){var c,
h,e=this;this.editor=b;this.dataFilter=c=new CKEDITOR.htmlParser.filter;this.htmlFilter=h=new CKEDITOR.htmlParser.filter;this.writer=new CKEDITOR.htmlParser.basicWriter;c.addRules(p);c.addRules(m,{applyToAll:!0});c.addRules(a(b,"data"),{applyToAll:!0});h.addRules(x);h.addRules(z,{applyToAll:!0});h.addRules(a(b,"html"),{applyToAll:!0});b.on("toHtml",function(a){a=a.data;var c=a.dataValue,h,c=n(c,b),c=f(c,P),c=v(c),c=f(c,Y),c=c.replace(N,"$1cke:$2"),c=c.replace(I,"\x3ccke:$1$2\x3e\x3c/cke:$1\x3e"),
c=c.replace(/(<pre\b[^>]*>)(\r\n|\n)/g,"$1$2$2"),c=c.replace(/([^a-z0-9<\-])(on\w{3,})(?!>)/gi,"$1data-cke-"+CKEDITOR.rnd+"-$2");h=a.context||b.editable().getName();var e;CKEDITOR.env.ie&&9>CKEDITOR.env.version&&"pre"==h&&(h="div",c="\x3cpre\x3e"+c+"\x3c/pre\x3e",e=1);h=b.document.createElement(h);h.setHtml("a"+c);c=h.getHtml().substr(1);c=c.replace(new RegExp("data-cke-"+CKEDITOR.rnd+"-","ig"),"");e&&(c=c.replace(/^<pre>|<\/pre>$/gi,""));c=c.replace(C,"$1$2");c=y(c);c=r(c);h=!1===a.fixForBody?!1:
d(a.enterMode,b.config.autoParagraph);c=CKEDITOR.htmlParser.fragment.fromHtml(c,a.context,h);h&&(e=c,!e.children.length&&CKEDITOR.dtd[e.name][h]&&(h=new CKEDITOR.htmlParser.element(h),e.add(h)));a.dataValue=c},null,null,5);b.on("toHtml",function(a){a.data.filter.applyTo(a.data.dataValue,!0,a.data.dontFilter,a.data.enterMode)&&b.fire("dataFiltered")},null,null,6);b.on("toHtml",function(a){a.data.dataValue.filterChildren(e.dataFilter,!0)},null,null,10);b.on("toHtml",function(a){a=a.data;var b=a.dataValue,
c=new CKEDITOR.htmlParser.basicWriter;b.writeChildrenHtml(c);b=c.getHtml(!0);a.dataValue=A(b)},null,null,15);b.on("toDataFormat",function(a){var c=a.data.dataValue;a.data.enterMode!=CKEDITOR.ENTER_BR&&(c=c.replace(/^<br *\/?>/i,""));a.data.dataValue=CKEDITOR.htmlParser.fragment.fromHtml(c,a.data.context,d(a.data.enterMode,b.config.autoParagraph))},null,null,5);b.on("toDataFormat",function(a){a.data.dataValue.filterChildren(e.htmlFilter,!0)},null,null,10);b.on("toDataFormat",function(a){a.data.filter.applyTo(a.data.dataValue,
!1,!0)},null,null,11);b.on("toDataFormat",function(a){var c=a.data.dataValue,d=e.writer;d.reset();c.writeChildrenHtml(d);c=d.getHtml(!0);c=r(c);c=D(c,b);a.data.dataValue=c},null,null,15)};CKEDITOR.htmlDataProcessor.prototype={toHtml:function(a,b,c,d){var h=this.editor,e,m,f,p;b&&"object"==typeof b?(e=b.context,c=b.fixForBody,d=b.dontFilter,m=b.filter,f=b.enterMode,p=b.protectedWhitespaces):e=b;e||null===e||(e=h.editable().getName());return h.fire("toHtml",{dataValue:a,context:e,fixForBody:c,dontFilter:d,
filter:m||h.filter,enterMode:f||h.enterMode,protectedWhitespaces:p}).dataValue},toDataFormat:function(a,b){var c,d,h;b&&(c=b.context,d=b.filter,h=b.enterMode);c||null===c||(c=this.editor.editable().getName());return this.editor.fire("toDataFormat",{dataValue:a,filter:d||this.editor.filter,context:c,enterMode:h||this.editor.enterMode}).dataValue}};var w=/(?:&nbsp;|\xa0)$/,H="{cke_protected}",u=CKEDITOR.dtd,t="caption colgroup col thead tfoot tbody".split(" "),h=CKEDITOR.tools.extend({},u.$blockLimit,
u.$block),p={elements:{input:l,textarea:l}},m={attributeNames:[[/^on/,"data-cke-pa-on"],[/^data-cke-expando$/,""]]},x={elements:{embed:function(a){var b=a.parent;if(b&&"object"==b.name){var c=b.attributes.width,b=b.attributes.height;c&&(a.attributes.width=c);b&&(a.attributes.height=b)}},a:function(a){var b=a.attributes;if(!(a.children.length||b.name||b.id||a.attributes["data-cke-saved-name"]))return!1}}},z={elementNames:[[/^cke:/,""],[/^\?xml:namespace$/,""]],attributeNames:[[/^data-cke-(saved|pa)-/,
""],[/^data-cke-.*/,""],["hidefocus",""]],elements:{$:function(a){var b=a.attributes;if(b){if(b["data-cke-temp"])return!1;for(var c=["name","href","src"],d,h=0;h<c.length;h++)d="data-cke-saved-"+c[h],d in b&&delete b[c[h]]}return a},table:function(a){a.children.slice(0).sort(function(a,b){var c,d;a.type==CKEDITOR.NODE_ELEMENT&&b.type==a.type&&(c=CKEDITOR.tools.indexOf(t,a.name),d=CKEDITOR.tools.indexOf(t,b.name));-1<c&&-1<d&&c!=d||(c=a.parent?a.getIndex():-1,d=b.parent?b.getIndex():-1);return c>d?
1:-1})},param:function(a){a.children=[];a.isEmpty=!0;return a},span:function(a){"Apple-style-span"==a.attributes["class"]&&delete a.name},html:function(a){delete a.attributes.contenteditable;delete a.attributes["class"]},body:function(a){delete a.attributes.spellcheck;delete a.attributes.contenteditable},style:function(a){var b=a.children[0];b&&b.value&&(b.value=CKEDITOR.tools.trim(b.value));a.attributes.type||(a.attributes.type="text/css")},title:function(a){var b=a.children[0];!b&&k(a,b=new CKEDITOR.htmlParser.text);
b.value=a.attributes["data-cke-title"]||""},input:q,textarea:q},attributes:{"class":function(a){return CKEDITOR.tools.ltrim(a.replace(/(?:^|\s+)cke_[^\s]*/g,""))||!1}}};CKEDITOR.env.ie&&(z.attributes.style=function(a){return a.replace(/(^|;)([^\:]+)/g,function(a){return a.toLowerCase()})});var F=/<(a|area|img|input|source)\b([^>]*)>/gi,B=/([\w-:]+)\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|(?:[^ "'>]+))/gi,E=/^(href|src|name)$/i,Y=/(?:<style(?=[ >])[^>]*>[\s\S]*?<\/style>)|(?:<(:?link|meta|base)[^>]*>)/gi,
P=/(<textarea(?=[ >])[^>]*>)([\s\S]*?)(?:<\/textarea>)/gi,O=/<cke:encoded>([^<]*)<\/cke:encoded>/gi,N=/(<\/?)((?:object|embed|param|html|body|head|title)[^>]*>)/gi,C=/(<\/?)cke:((?:html|body|head|title)[^>]*>)/gi,I=/<cke:(param|embed)([^>]*?)\/?>(?!\s*<\/cke:\1)/gi})();"use strict";
CKEDITOR.htmlParser.element=function(a,d){this.name=a;this.attributes=d||{};this.children=[];var b=a||"",c=b.match(/^cke:(.*)/);c&&(b=c[1]);b=!!(CKEDITOR.dtd.$nonBodyContent[b]||CKEDITOR.dtd.$block[b]||CKEDITOR.dtd.$listItem[b]||CKEDITOR.dtd.$tableContent[b]||CKEDITOR.dtd.$nonEditable[b]||"br"==b);this.isEmpty=!!CKEDITOR.dtd.$empty[a];this.isUnknown=!CKEDITOR.dtd[a];this._={isBlockLike:b,hasInlineStarted:this.isEmpty||!b}};
CKEDITOR.htmlParser.cssStyle=function(a){var d={};((a instanceof CKEDITOR.htmlParser.element?a.attributes.style:a)||"").replace(/&quot;/g,'"').replace(/\s*([^ :;]+)\s*:\s*([^;]+)\s*(?=;|$)/g,function(a,c,e){"font-family"==c&&(e=e.replace(/["']/g,""));d[c.toLowerCase()]=e});return{rules:d,populate:function(a){var c=this.toString();c&&(a instanceof CKEDITOR.dom.element?a.setAttribute("style",c):a instanceof CKEDITOR.htmlParser.element?a.attributes.style=c:a.style=c)},toString:function(){var a=[],c;
for(c in d)d[c]&&a.push(c,":",d[c],";");return a.join("")}}};
(function(){function a(a){return function(b){return b.type==CKEDITOR.NODE_ELEMENT&&("string"==typeof a?b.name==a:b.name in a)}}var d=function(a,b){a=a[0];b=b[0];return a<b?-1:a>b?1:0},b=CKEDITOR.htmlParser.fragment.prototype;CKEDITOR.htmlParser.element.prototype=CKEDITOR.tools.extend(new CKEDITOR.htmlParser.node,{type:CKEDITOR.NODE_ELEMENT,add:b.add,clone:function(){return new CKEDITOR.htmlParser.element(this.name,this.attributes)},filter:function(a,b){var d=this,k,l;b=d.getFilterContext(b);if(b.off)return!0;
if(!d.parent)a.onRoot(b,d);for(;;){k=d.name;if(!(l=a.onElementName(b,k)))return this.remove(),!1;d.name=l;if(!(d=a.onElement(b,d)))return this.remove(),!1;if(d!==this)return this.replaceWith(d),!1;if(d.name==k)break;if(d.type!=CKEDITOR.NODE_ELEMENT)return this.replaceWith(d),!1;if(!d.name)return this.replaceWithChildren(),!1}k=d.attributes;var q,v;for(q in k){for(l=k[q];;)if(v=a.onAttributeName(b,q))if(v!=q)delete k[q],q=v;else break;else{delete k[q];break}v&&(!1===(l=a.onAttribute(b,d,v,l))?delete k[v]:
k[v]=l)}d.isEmpty||this.filterChildren(a,!1,b);return!0},filterChildren:b.filterChildren,writeHtml:function(a,b){b&&this.filter(b);var g=this.name,k=[],l=this.attributes,q,v;a.openTag(g,l);for(q in l)k.push([q,l[q]]);a.sortAttributes&&k.sort(d);q=0;for(v=k.length;q<v;q++)l=k[q],a.attribute(l[0],l[1]);a.openTagClose(g,this.isEmpty);this.writeChildrenHtml(a);this.isEmpty||a.closeTag(g)},writeChildrenHtml:b.writeChildrenHtml,replaceWithChildren:function(){for(var a=this.children,b=a.length;b;)a[--b].insertAfter(this);
this.remove()},forEach:b.forEach,getFirst:function(b){if(!b)return this.children.length?this.children[0]:null;"function"!=typeof b&&(b=a(b));for(var d=0,g=this.children.length;d<g;++d)if(b(this.children[d]))return this.children[d];return null},getHtml:function(){var a=new CKEDITOR.htmlParser.basicWriter;this.writeChildrenHtml(a);return a.getHtml()},setHtml:function(a){a=this.children=CKEDITOR.htmlParser.fragment.fromHtml(a).children;for(var b=0,d=a.length;b<d;++b)a[b].parent=this},getOuterHtml:function(){var a=
new CKEDITOR.htmlParser.basicWriter;this.writeHtml(a);return a.getHtml()},split:function(a){for(var b=this.children.splice(a,this.children.length-a),d=this.clone(),k=0;k<b.length;++k)b[k].parent=d;d.children=b;b[0]&&(b[0].previous=null);0<a&&(this.children[a-1].next=null);this.parent.add(d,this.getIndex()+1);return d},addClass:function(a){if(!this.hasClass(a)){var b=this.attributes["class"]||"";this.attributes["class"]=b+(b?" ":"")+a}},removeClass:function(a){var b=this.attributes["class"];b&&((b=
CKEDITOR.tools.trim(b.replace(new RegExp("(?:\\s+|^)"+a+"(?:\\s+|$)")," ")))?this.attributes["class"]=b:delete this.attributes["class"])},hasClass:function(a){var b=this.attributes["class"];return b?(new RegExp("(?:^|\\s)"+a+"(?\x3d\\s|$)")).test(b):!1},getFilterContext:function(a){var b=[];a||(a={off:!1,nonEditable:!1,nestedEditable:!1});a.off||"off"!=this.attributes["data-cke-processor"]||b.push("off",!0);a.nonEditable||"false"!=this.attributes.contenteditable?a.nonEditable&&!a.nestedEditable&&
"true"==this.attributes.contenteditable&&b.push("nestedEditable",!0):b.push("nonEditable",!0);if(b.length){a=CKEDITOR.tools.copy(a);for(var d=0;d<b.length;d+=2)a[b[d]]=b[d+1]}return a}},!0)})();
(function(){var a={},d=/{([^}]+)}/g,b=/([\\'])/g,c=/\n/g,e=/\r/g;CKEDITOR.template=function(g){if(a[g])this.output=a[g];else{var k=g.replace(b,"\\$1").replace(c,"\\n").replace(e,"\\r").replace(d,function(a,b){return"',data['"+b+"']\x3d\x3dundefined?'{"+b+"}':data['"+b+"'],'"});this.output=a[g]=Function("data","buffer","return buffer?buffer.push('"+k+"'):['"+k+"'].join('');")}}})();delete CKEDITOR.loadFullCore;CKEDITOR.instances={};CKEDITOR.document=new CKEDITOR.dom.document(document);
CKEDITOR.add=function(a){CKEDITOR.instances[a.name]=a;a.on("focus",function(){CKEDITOR.currentInstance!=a&&(CKEDITOR.currentInstance=a,CKEDITOR.fire("currentInstance"))});a.on("blur",function(){CKEDITOR.currentInstance==a&&(CKEDITOR.currentInstance=null,CKEDITOR.fire("currentInstance"))});CKEDITOR.fire("instance",null,a)};CKEDITOR.remove=function(a){delete CKEDITOR.instances[a.name]};
(function(){var a={};CKEDITOR.addTemplate=function(d,b){var c=a[d];if(c)return c;c={name:d,source:b};CKEDITOR.fire("template",c);return a[d]=new CKEDITOR.template(c.source)};CKEDITOR.getTemplate=function(d){return a[d]}})();(function(){var a=[];CKEDITOR.addCss=function(d){a.push(d)};CKEDITOR.getCss=function(){return a.join("\n")}})();CKEDITOR.on("instanceDestroyed",function(){CKEDITOR.tools.isEmpty(this.instances)&&CKEDITOR.fire("reset")});CKEDITOR.TRISTATE_ON=1;CKEDITOR.TRISTATE_OFF=2;
CKEDITOR.TRISTATE_DISABLED=0;
(function(){CKEDITOR.inline=function(a,d){if(!CKEDITOR.env.isCompatible)return null;a=CKEDITOR.dom.element.get(a);if(a.getEditor())throw'The editor instance "'+a.getEditor().name+'" is already attached to the provided element.';var b=new CKEDITOR.editor(d,a,CKEDITOR.ELEMENT_MODE_INLINE),c=a.is("textarea")?a:null;c?(b.setData(c.getValue(),null,!0),a=CKEDITOR.dom.element.createFromHtml('\x3cdiv contenteditable\x3d"'+!!b.readOnly+'" class\x3d"cke_textarea_inline"\x3e'+c.getValue()+"\x3c/div\x3e",CKEDITOR.document),
a.insertAfter(c),c.hide(),c.$.form&&b._attachToForm()):b.setData(a.getHtml(),null,!0);b.on("loaded",function(){b.fire("uiReady");b.editable(a);b.container=a;b.ui.contentsElement=a;b.setData(b.getData(1));b.resetDirty();b.fire("contentDom");b.mode="wysiwyg";b.fire("mode");b.status="ready";b.fireOnce("instanceReady");CKEDITOR.fire("instanceReady",null,b)},null,null,1E4);b.on("destroy",function(){c&&(b.container.clearCustomData(),b.container.remove(),c.show());b.element.clearCustomData();delete b.element});
return b};CKEDITOR.inlineAll=function(){var a,d,b;for(b in CKEDITOR.dtd.$editable)for(var c=CKEDITOR.document.getElementsByTag(b),e=0,g=c.count();e<g;e++)a=c.getItem(e),"true"==a.getAttribute("contenteditable")&&(d={element:a,config:{}},!1!==CKEDITOR.fire("inline",d)&&CKEDITOR.inline(a,d.config))};CKEDITOR.domReady(function(){!CKEDITOR.disableAutoInline&&CKEDITOR.inlineAll()})})();CKEDITOR.replaceClass="ckeditor";
(function(){function a(a,e,g,k){if(!CKEDITOR.env.isCompatible)return null;a=CKEDITOR.dom.element.get(a);if(a.getEditor())throw'The editor instance "'+a.getEditor().name+'" is already attached to the provided element.';var l=new CKEDITOR.editor(e,a,k);k==CKEDITOR.ELEMENT_MODE_REPLACE&&(a.setStyle("visibility","hidden"),l._.required=a.hasAttribute("required"),a.removeAttribute("required"));g&&l.setData(g,null,!0);l.on("loaded",function(){b(l);k==CKEDITOR.ELEMENT_MODE_REPLACE&&l.config.autoUpdateElement&&
a.$.form&&l._attachToForm();l.setMode(l.config.startupMode,function(){l.resetDirty();l.status="ready";l.fireOnce("instanceReady");CKEDITOR.fire("instanceReady",null,l)})});l.on("destroy",d);return l}function d(){var a=this.container,b=this.element;a&&(a.clearCustomData(),a.remove());b&&(b.clearCustomData(),this.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE&&(b.show(),this._.required&&b.setAttribute("required","required")),delete this.element)}function b(a){var b=a.name,d=a.element,k=a.elementMode,l=
a.fire("uiSpace",{space:"top",html:""}).html,q=a.fire("uiSpace",{space:"bottom",html:""}).html,v=new CKEDITOR.template('\x3c{outerEl} id\x3d"cke_{name}" class\x3d"{id} cke cke_reset cke_chrome cke_editor_{name} cke_{langDir} '+CKEDITOR.env.cssClass+'"  dir\x3d"{langDir}" lang\x3d"{langCode}" role\x3d"application"'+(a.title?' aria-labelledby\x3d"cke_{name}_arialbl"':"")+"\x3e"+(a.title?'\x3cspan id\x3d"cke_{name}_arialbl" class\x3d"cke_voice_label"\x3e{voiceLabel}\x3c/span\x3e':"")+'\x3c{outerEl} class\x3d"cke_inner cke_reset" role\x3d"presentation"\x3e{topHtml}\x3c{outerEl} id\x3d"{contentId}" class\x3d"cke_contents cke_reset" role\x3d"presentation"\x3e\x3c/{outerEl}\x3e{bottomHtml}\x3c/{outerEl}\x3e\x3c/{outerEl}\x3e'),
b=CKEDITOR.dom.element.createFromHtml(v.output({id:a.id,name:b,langDir:a.lang.dir,langCode:a.langCode,voiceLabel:a.title,topHtml:l?'\x3cspan id\x3d"'+a.ui.spaceId("top")+'" class\x3d"cke_top cke_reset_all" role\x3d"presentation" style\x3d"height:auto"\x3e'+l+"\x3c/span\x3e":"",contentId:a.ui.spaceId("contents"),bottomHtml:q?'\x3cspan id\x3d"'+a.ui.spaceId("bottom")+'" class\x3d"cke_bottom cke_reset_all" role\x3d"presentation"\x3e'+q+"\x3c/span\x3e":"",outerEl:CKEDITOR.env.ie?"span":"div"}));k==CKEDITOR.ELEMENT_MODE_REPLACE?
(d.hide(),b.insertAfter(d)):d.append(b);a.container=b;a.ui.contentsElement=a.ui.space("contents");l&&a.ui.space("top").unselectable();q&&a.ui.space("bottom").unselectable();d=a.config.width;k=a.config.height;d&&b.setStyle("width",CKEDITOR.tools.cssLength(d));k&&a.ui.space("contents").setStyle("height",CKEDITOR.tools.cssLength(k));b.disableContextMenu();CKEDITOR.env.webkit&&b.on("focus",function(){a.focus()});a.fireOnce("uiReady")}CKEDITOR.replace=function(b,d){return a(b,d,null,CKEDITOR.ELEMENT_MODE_REPLACE)};
CKEDITOR.appendTo=function(b,d,g){return a(b,d,g,CKEDITOR.ELEMENT_MODE_APPENDTO)};CKEDITOR.replaceAll=function(){for(var a=document.getElementsByTagName("textarea"),b=0;b<a.length;b++){var d=null,k=a[b];if(k.name||k.id){if("string"==typeof arguments[0]){if(!(new RegExp("(?:^|\\s)"+arguments[0]+"(?:$|\\s)")).test(k.className))continue}else if("function"==typeof arguments[0]&&(d={},!1===arguments[0](k,d)))continue;this.replace(k,d)}}};CKEDITOR.editor.prototype.addMode=function(a,b){(this._.modes||(this._.modes=
{}))[a]=b};CKEDITOR.editor.prototype.setMode=function(a,b){var d=this,k=this._.modes;if(a!=d.mode&&k&&k[a]){d.fire("beforeSetMode",a);if(d.mode){var l=d.checkDirty(),k=d._.previousModeData,q,v=0;d.fire("beforeModeUnload");d.editable(0);d._.previousMode=d.mode;d._.previousModeData=q=d.getData(1);"source"==d.mode&&k==q&&(d.fire("lockSnapshot",{forceUpdate:!0}),v=1);d.ui.space("contents").setHtml("");d.mode=""}else d._.previousModeData=d.getData(1);this._.modes[a](function(){d.mode=a;void 0!==l&&!l&&
d.resetDirty();v?d.fire("unlockSnapshot"):"wysiwyg"==a&&d.fire("saveSnapshot");setTimeout(function(){d.fire("mode");b&&b.call(d)},0)})}};CKEDITOR.editor.prototype.resize=function(a,b,d,k){var l=this.container,q=this.ui.space("contents"),v=CKEDITOR.env.webkit&&this.document&&this.document.getWindow().$.frameElement;k=k?this.container.getFirst(function(a){return a.type==CKEDITOR.NODE_ELEMENT&&a.hasClass("cke_inner")}):l;k.setSize("width",a,!0);v&&(v.style.width="1%");var f=(k.$.offsetHeight||0)-(q.$.clientHeight||
0),l=Math.max(b-(d?0:f),0);b=d?b+f:b;q.setStyle("height",l+"px");v&&(v.style.width="100%");this.fire("resize",{outerHeight:b,contentsHeight:l,outerWidth:a||k.getSize("width")})};CKEDITOR.editor.prototype.getResizable=function(a){return a?this.ui.space("contents"):this.container};CKEDITOR.domReady(function(){CKEDITOR.replaceClass&&CKEDITOR.replaceAll(CKEDITOR.replaceClass)})})();CKEDITOR.config.startupMode="wysiwyg";
(function(){function a(a){var b=a.editor,e=a.data.path,m=e.blockLimit,f=a.data.selection,g=f.getRanges()[0],F;if(CKEDITOR.env.gecko||CKEDITOR.env.ie&&CKEDITOR.env.needsBrFiller)if(f=d(f,e))f.appendBogus(),F=CKEDITOR.env.ie;k(b,e.block,m)&&g.collapsed&&!g.getCommonAncestor().isReadOnly()&&(e=g.clone(),e.enlarge(CKEDITOR.ENLARGE_BLOCK_CONTENTS),m=new CKEDITOR.dom.walker(e),m.guard=function(a){return!c(a)||a.type==CKEDITOR.NODE_COMMENT||a.isReadOnly()},!m.checkForward()||e.checkStartOfBlock()&&e.checkEndOfBlock())&&
(b=g.fixBlock(!0,b.activeEnterMode==CKEDITOR.ENTER_DIV?"div":"p"),CKEDITOR.env.needsBrFiller||(b=b.getFirst(c))&&b.type==CKEDITOR.NODE_TEXT&&CKEDITOR.tools.trim(b.getText()).match(/^(?:&nbsp;|\xa0)$/)&&b.remove(),F=1,a.cancel());F&&g.select()}function d(a,b){if(a.isFake)return 0;var d=b.block||b.blockLimit,e=d&&d.getLast(c);if(!(!d||!d.isBlockBoundary()||e&&e.type==CKEDITOR.NODE_ELEMENT&&e.isBlockBoundary()||d.is("pre")||d.getBogus()))return d}function b(a){var b=a.data.getTarget();b.is("input")&&
(b=b.getAttribute("type"),"submit"!=b&&"reset"!=b||a.data.preventDefault())}function c(a){return f(a)&&y(a)}function e(a,b){return function(c){var d=c.data.$.toElement||c.data.$.fromElement||c.data.$.relatedTarget;(d=d&&d.nodeType==CKEDITOR.NODE_ELEMENT?new CKEDITOR.dom.element(d):null)&&(b.equals(d)||b.contains(d))||a.call(this,c)}}function g(a){function b(a){return function(b,h){h&&b.type==CKEDITOR.NODE_ELEMENT&&b.is(f)&&(d=b);if(!(h||!c(b)||a&&r(b)))return!1}}var d,e=a.getRanges()[0];a=a.root;
var f={table:1,ul:1,ol:1,dl:1};if(e.startPath().contains(f)){var g=e.clone();g.collapse(1);g.setStartAt(a,CKEDITOR.POSITION_AFTER_START);a=new CKEDITOR.dom.walker(g);a.guard=b();a.checkBackward();if(d)return g=e.clone(),g.collapse(),g.setEndAt(d,CKEDITOR.POSITION_AFTER_END),a=new CKEDITOR.dom.walker(g),a.guard=b(!0),d=!1,a.checkForward(),d}return null}function k(a,b,c){return!1!==a.config.autoParagraph&&a.activeEnterMode!=CKEDITOR.ENTER_BR&&(a.editable().equals(c)&&!b||b&&"true"==b.getAttribute("contenteditable"))}
function l(a){return a.activeEnterMode!=CKEDITOR.ENTER_BR&&!1!==a.config.autoParagraph?a.activeEnterMode==CKEDITOR.ENTER_DIV?"div":"p":!1}function q(a){var b=a.editor;b.getSelection().scrollIntoView();setTimeout(function(){b.fire("saveSnapshot")},0)}function v(a,b,c){var d=a.getCommonAncestor(b);for(b=a=c?b:a;(a=a.getParent())&&!d.equals(a)&&1==a.getChildCount();)b=a;b.remove()}var f,y,A,r,D,n,w,H,u;CKEDITOR.editable=CKEDITOR.tools.createClass({base:CKEDITOR.dom.element,$:function(a,b){this.base(b.$||
b);this.editor=a;this.status="unloaded";this.hasFocus=!1;this.setup()},proto:{focus:function(){var a;if(CKEDITOR.env.webkit&&!this.hasFocus&&(a=this.editor._.previousActive||this.getDocument().getActive(),this.contains(a))){a.focus();return}try{this.$[CKEDITOR.env.ie&&this.getDocument().equals(CKEDITOR.document)?"setActive":"focus"]()}catch(b){if(!CKEDITOR.env.ie)throw b;}CKEDITOR.env.safari&&!this.isInline()&&(a=CKEDITOR.document.getActive(),a.equals(this.getWindow().getFrame())||this.getWindow().focus())},
on:function(a,b){var c=Array.prototype.slice.call(arguments,0);CKEDITOR.env.ie&&/^focus|blur$/.exec(a)&&(a="focus"==a?"focusin":"focusout",b=e(b,this),c[0]=a,c[1]=b);return CKEDITOR.dom.element.prototype.on.apply(this,c)},attachListener:function(a){!this._.listeners&&(this._.listeners=[]);var b=Array.prototype.slice.call(arguments,1),b=a.on.apply(a,b);this._.listeners.push(b);return b},clearListeners:function(){var a=this._.listeners;try{for(;a.length;)a.pop().removeListener()}catch(b){}},restoreAttrs:function(){var a=
this._.attrChanges,b,c;for(c in a)a.hasOwnProperty(c)&&(b=a[c],null!==b?this.setAttribute(c,b):this.removeAttribute(c))},attachClass:function(a){var b=this.getCustomData("classes");this.hasClass(a)||(!b&&(b=[]),b.push(a),this.setCustomData("classes",b),this.addClass(a))},changeAttr:function(a,b){var c=this.getAttribute(a);b!==c&&(!this._.attrChanges&&(this._.attrChanges={}),a in this._.attrChanges||(this._.attrChanges[a]=c),this.setAttribute(a,b))},insertText:function(a){this.editor.focus();this.insertHtml(this.transformPlainTextToHtml(a),
"text")},transformPlainTextToHtml:function(a){var b=this.editor.getSelection().getStartElement().hasAscendant("pre",!0)?CKEDITOR.ENTER_BR:this.editor.activeEnterMode;return CKEDITOR.tools.transformPlainTextToHtml(a,b)},insertHtml:function(a,b,c){var d=this.editor;d.focus();d.fire("saveSnapshot");c||(c=d.getSelection().getRanges()[0]);n(this,b||"html",a,c);c.select();q(this);this.editor.fire("afterInsertHtml",{})},insertHtmlIntoRange:function(a,b,c){n(this,c||"html",a,b);this.editor.fire("afterInsertHtml",
{intoRange:b})},insertElement:function(a,b){var d=this.editor;d.focus();d.fire("saveSnapshot");var e=d.activeEnterMode,d=d.getSelection(),f=a.getName(),f=CKEDITOR.dtd.$block[f];b||(b=d.getRanges()[0]);this.insertElementIntoRange(a,b)&&(b.moveToPosition(a,CKEDITOR.POSITION_AFTER_END),f&&((f=a.getNext(function(a){return c(a)&&!r(a)}))&&f.type==CKEDITOR.NODE_ELEMENT&&f.is(CKEDITOR.dtd.$block)?f.getDtd()["#"]?b.moveToElementEditStart(f):b.moveToElementEditEnd(a):f||e==CKEDITOR.ENTER_BR||(f=b.fixBlock(!0,
e==CKEDITOR.ENTER_DIV?"div":"p"),b.moveToElementEditStart(f))));d.selectRanges([b]);q(this)},insertElementIntoSelection:function(a){this.insertElement(a)},insertElementIntoRange:function(a,b){var c=this.editor,d=c.config.enterMode,e=a.getName(),f=CKEDITOR.dtd.$block[e];if(b.checkReadOnly())return!1;b.deleteContents(1);b.startContainer.type==CKEDITOR.NODE_ELEMENT&&b.startContainer.is({tr:1,table:1,tbody:1,thead:1,tfoot:1})&&w(b);var g,k;if(f)for(;(g=b.getCommonAncestor(0,1))&&(k=CKEDITOR.dtd[g.getName()])&&
(!k||!k[e]);)g.getName()in CKEDITOR.dtd.span?b.splitElement(g):b.checkStartOfBlock()&&b.checkEndOfBlock()?(b.setStartBefore(g),b.collapse(!0),g.remove()):b.splitBlock(d==CKEDITOR.ENTER_DIV?"div":"p",c.editable());b.insertNode(a);return!0},setData:function(a,b){b||(a=this.editor.dataProcessor.toHtml(a));this.setHtml(a);this.fixInitialSelection();"unloaded"==this.status&&(this.status="ready");this.editor.fire("dataReady")},getData:function(a){var b=this.getHtml();a||(b=this.editor.dataProcessor.toDataFormat(b));
return b},setReadOnly:function(a){this.setAttribute("contenteditable",!a)},detach:function(){this.removeClass("cke_editable");this.status="detached";var a=this.editor;this._.detach();delete a.document;delete a.window},isInline:function(){return this.getDocument().equals(CKEDITOR.document)},fixInitialSelection:function(){function a(){var b=c.getDocument().$,d=b.getSelection(),h;a:if(d.anchorNode&&d.anchorNode==c.$)h=!0;else{if(CKEDITOR.env.webkit&&(h=c.getDocument().getActive())&&h.equals(c)&&!d.anchorNode){h=
!0;break a}h=void 0}h&&(h=new CKEDITOR.dom.range(c),h.moveToElementEditStart(c),b=b.createRange(),b.setStart(h.startContainer.$,h.startOffset),b.collapse(!0),d.removeAllRanges(),d.addRange(b))}function b(){var a=c.getDocument().$,d=a.selection,h=c.getDocument().getActive();"None"==d.type&&h.equals(c)&&(d=new CKEDITOR.dom.range(c),a=a.body.createTextRange(),d.moveToElementEditStart(c),d=d.startContainer,d.type!=CKEDITOR.NODE_ELEMENT&&(d=d.getParent()),a.moveToElementText(d.$),a.collapse(!0),a.select())}
var c=this;if(CKEDITOR.env.ie&&(9>CKEDITOR.env.version||CKEDITOR.env.quirks))this.hasFocus&&(this.focus(),b());else if(this.hasFocus)this.focus(),a();else this.once("focus",function(){a()},null,null,-999)},getHtmlFromRange:function(a){if(a.collapsed)return new CKEDITOR.dom.documentFragment(a.document);a={doc:this.getDocument(),range:a.clone()};H.eol.detect(a,this);H.bogus.exclude(a);H.cell.shrink(a);a.fragment=a.range.cloneContents();H.tree.rebuild(a,this);H.eol.fix(a,this);return new CKEDITOR.dom.documentFragment(a.fragment.$)},
extractHtmlFromRange:function(a,b){var c=u,d={range:a,doc:a.document},e=this.getHtmlFromRange(a);if(a.collapsed)return a.optimize(),e;a.enlarge(CKEDITOR.ENLARGE_INLINE,1);c.table.detectPurge(d);d.bookmark=a.createBookmark();delete d.range;var f=this.editor.createRange();f.moveToPosition(d.bookmark.startNode,CKEDITOR.POSITION_BEFORE_START);d.targetBookmark=f.createBookmark();c.list.detectMerge(d,this);c.table.detectRanges(d,this);c.block.detectMerge(d,this);d.tableContentsRanges?(c.table.deleteRanges(d),
a.moveToBookmark(d.bookmark),d.range=a):(a.moveToBookmark(d.bookmark),d.range=a,a.extractContents(c.detectExtractMerge(d)));a.moveToBookmark(d.targetBookmark);a.optimize();c.fixUneditableRangePosition(a);c.list.merge(d,this);c.table.purge(d,this);c.block.merge(d,this);if(b){c=a.startPath();if(d=a.checkStartOfBlock()&&a.checkEndOfBlock()&&c.block&&!a.root.equals(c.block)){a:{var d=c.block.getElementsByTag("span"),f=0,g;if(d)for(;g=d.getItem(f++);)if(!y(g)){d=!0;break a}d=!1}d=!d}d&&(a.moveToPosition(c.block,
CKEDITOR.POSITION_BEFORE_START),c.block.remove())}else c.autoParagraph(this.editor,a),A(a.startContainer)&&a.startContainer.appendBogus();a.startContainer.mergeSiblings();return e},setup:function(){var a=this.editor;this.attachListener(a,"beforeGetData",function(){var b=this.getData();this.is("textarea")||!1!==a.config.ignoreEmptyParagraph&&(b=b.replace(D,function(a,b){return b}));a.setData(b,null,1)},this);this.attachListener(a,"getSnapshot",function(a){a.data=this.getData(1)},this);this.attachListener(a,
"afterSetData",function(){this.setData(a.getData(1))},this);this.attachListener(a,"loadSnapshot",function(a){this.setData(a.data,1)},this);this.attachListener(a,"beforeFocus",function(){var b=a.getSelection();(b=b&&b.getNative())&&"Control"==b.type||this.focus()},this);this.attachListener(a,"insertHtml",function(a){this.insertHtml(a.data.dataValue,a.data.mode,a.data.range)},this);this.attachListener(a,"insertElement",function(a){this.insertElement(a.data)},this);this.attachListener(a,"insertText",
function(a){this.insertText(a.data)},this);this.setReadOnly(a.readOnly);this.attachClass("cke_editable");a.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?this.attachClass("cke_editable_inline"):a.elementMode!=CKEDITOR.ELEMENT_MODE_REPLACE&&a.elementMode!=CKEDITOR.ELEMENT_MODE_APPENDTO||this.attachClass("cke_editable_themed");this.attachClass("cke_contents_"+a.config.contentsLangDirection);a.keystrokeHandler.blockedKeystrokes[8]=+a.readOnly;a.keystrokeHandler.attach(this);this.on("blur",function(){this.hasFocus=
!1},null,null,-1);this.on("focus",function(){this.hasFocus=!0},null,null,-1);a.focusManager.add(this);this.equals(CKEDITOR.document.getActive())&&(this.hasFocus=!0,a.once("contentDom",function(){a.focusManager.focus(this)},this));this.isInline()&&this.changeAttr("tabindex",a.tabIndex);if(!this.is("textarea")){a.document=this.getDocument();a.window=this.getWindow();var d=a.document;this.changeAttr("spellcheck",!a.config.disableNativeSpellChecker);var e=a.config.contentsLangDirection;this.getDirection(1)!=
e&&this.changeAttr("dir",e);var m=CKEDITOR.getCss();if(m){var e=d.getHead(),k=e.getCustomData("stylesheet");k?m!=k.getText()&&(CKEDITOR.env.ie&&9>CKEDITOR.env.version?k.$.styleSheet.cssText=m:k.setText(m)):(m=d.appendStyleText(m),m=new CKEDITOR.dom.element(m.ownerNode||m.owningElement),e.setCustomData("stylesheet",m),m.data("cke-temp",1))}e=d.getCustomData("stylesheet_ref")||0;d.setCustomData("stylesheet_ref",e+1);this.setCustomData("cke_includeReadonly",!a.config.disableReadonlyStyling);this.attachListener(this,
"click",function(a){a=a.data;var b=(new CKEDITOR.dom.elementPath(a.getTarget(),this)).contains("a");b&&2!=a.$.button&&b.isReadOnly()&&a.preventDefault()});var l={8:1,46:1};this.attachListener(a,"key",function(b){if(a.readOnly)return!0;var c=b.data.domEvent.getKey(),d;if(c in l){b=a.getSelection();var h,e=b.getRanges()[0],m=e.startPath(),p,k,x,c=8==c;CKEDITOR.env.ie&&11>CKEDITOR.env.version&&(h=b.getSelectedElement())||(h=g(b))?(a.fire("saveSnapshot"),e.moveToPosition(h,CKEDITOR.POSITION_BEFORE_START),
h.remove(),e.select(),a.fire("saveSnapshot"),d=1):e.collapsed&&((p=m.block)&&(x=p[c?"getPrevious":"getNext"](f))&&x.type==CKEDITOR.NODE_ELEMENT&&x.is("table")&&e[c?"checkStartOfBlock":"checkEndOfBlock"]()?(a.fire("saveSnapshot"),e[c?"checkEndOfBlock":"checkStartOfBlock"]()&&p.remove(),e["moveToElementEdit"+(c?"End":"Start")](x),e.select(),a.fire("saveSnapshot"),d=1):m.blockLimit&&m.blockLimit.is("td")&&(k=m.blockLimit.getAscendant("table"))&&e.checkBoundaryOfElement(k,c?CKEDITOR.START:CKEDITOR.END)&&
(x=k[c?"getPrevious":"getNext"](f))?(a.fire("saveSnapshot"),e["moveToElementEdit"+(c?"End":"Start")](x),e.checkStartOfBlock()&&e.checkEndOfBlock()?x.remove():e.select(),a.fire("saveSnapshot"),d=1):(k=m.contains(["td","th","caption"]))&&e.checkBoundaryOfElement(k,c?CKEDITOR.START:CKEDITOR.END)&&(d=1))}return!d});a.blockless&&CKEDITOR.env.ie&&CKEDITOR.env.needsBrFiller&&this.attachListener(this,"keyup",function(b){b.data.getKeystroke()in l&&!this.getFirst(c)&&(this.appendBogus(),b=a.createRange(),b.moveToPosition(this,
CKEDITOR.POSITION_AFTER_START),b.select())});this.attachListener(this,"dblclick",function(b){if(a.readOnly)return!1;b={element:b.data.getTarget()};a.fire("doubleclick",b)});CKEDITOR.env.ie&&this.attachListener(this,"click",b);CKEDITOR.env.ie&&!CKEDITOR.env.edge||this.attachListener(this,"mousedown",function(b){var c=b.data.getTarget();c.is("img","hr","input","textarea","select")&&!c.isReadOnly()&&(a.getSelection().selectElement(c),c.is("input","textarea","select")&&b.data.preventDefault())});CKEDITOR.env.edge&&
this.attachListener(this,"mouseup",function(b){(b=b.data.getTarget())&&b.is("img")&&a.getSelection().selectElement(b)});CKEDITOR.env.gecko&&this.attachListener(this,"mouseup",function(b){if(2==b.data.$.button&&(b=b.data.getTarget(),!b.getOuterHtml().replace(D,""))){var c=a.createRange();c.moveToElementEditStart(b);c.select(!0)}});CKEDITOR.env.webkit&&(this.attachListener(this,"click",function(a){a.data.getTarget().is("input","select")&&a.data.preventDefault()}),this.attachListener(this,"mouseup",
function(a){a.data.getTarget().is("input","textarea")&&a.data.preventDefault()}));CKEDITOR.env.webkit&&this.attachListener(a,"key",function(b){if(a.readOnly)return!0;b=b.data.domEvent.getKey();if(b in l){var c=8==b,d=a.getSelection().getRanges()[0];b=d.startPath();if(d.collapsed)a:{var h=b.block;if(h&&d[c?"checkStartOfBlock":"checkEndOfBlock"]()&&d.moveToClosestEditablePosition(h,!c)&&d.collapsed){if(d.startContainer.type==CKEDITOR.NODE_ELEMENT){var e=d.startContainer.getChild(d.startOffset-(c?1:
0));if(e&&e.type==CKEDITOR.NODE_ELEMENT&&e.is("hr")){a.fire("saveSnapshot");e.remove();b=!0;break a}}d=d.startPath().block;if(!d||d&&d.contains(h))b=void 0;else{a.fire("saveSnapshot");var f;(f=(c?d:h).getBogus())&&f.remove();f=a.getSelection();e=f.createBookmarks();(c?h:d).moveChildren(c?d:h,!1);b.lastElement.mergeSiblings();v(h,d,!c);f.selectBookmarks(e);b=!0}}else b=!1}else c=d,f=b.block,d=c.endPath().block,f&&d&&!f.equals(d)?(a.fire("saveSnapshot"),(h=f.getBogus())&&h.remove(),c.enlarge(CKEDITOR.ENLARGE_INLINE),
c.deleteContents(),d.getParent()&&(d.moveChildren(f,!1),b.lastElement.mergeSiblings(),v(f,d,!0)),c=a.getSelection().getRanges()[0],c.collapse(1),c.optimize(),""===c.startContainer.getHtml()&&c.startContainer.appendBogus(),c.select(),b=!0):b=!1;if(!b)return;a.getSelection().scrollIntoView();a.fire("saveSnapshot");return!1}},this,null,100)}}},_:{detach:function(){this.editor.setData(this.editor.getData(),0,1);this.clearListeners();this.restoreAttrs();var a;if(a=this.removeCustomData("classes"))for(;a.length;)this.removeClass(a.pop());
if(!this.is("textarea")){a=this.getDocument();var b=a.getHead();if(b.getCustomData("stylesheet")){var c=a.getCustomData("stylesheet_ref");--c?a.setCustomData("stylesheet_ref",c):(a.removeCustomData("stylesheet_ref"),b.removeCustomData("stylesheet").remove())}}this.editor.fire("contentDomUnload");delete this.editor}}});CKEDITOR.editor.prototype.editable=function(a){var b=this._.editable;if(b&&a)return 0;arguments.length&&(b=this._.editable=a?a instanceof CKEDITOR.editable?a:new CKEDITOR.editable(this,
a):(b&&b.detach(),null));return b};CKEDITOR.on("instanceLoaded",function(b){var c=b.editor;c.on("insertElement",function(a){a=a.data;a.type==CKEDITOR.NODE_ELEMENT&&(a.is("input")||a.is("textarea"))&&("false"!=a.getAttribute("contentEditable")&&a.data("cke-editable",a.hasAttribute("contenteditable")?"true":"1"),a.setAttribute("contentEditable",!1))});c.on("selectionChange",function(b){if(!c.readOnly){var d=c.getSelection();d&&!d.isLocked&&(d=c.checkDirty(),c.fire("lockSnapshot"),a(b),c.fire("unlockSnapshot"),
!d&&c.resetDirty())}})});CKEDITOR.on("instanceCreated",function(a){var b=a.editor;b.on("mode",function(){var a=b.editable();if(a&&a.isInline()){var c=b.title;a.changeAttr("role","textbox");a.changeAttr("aria-label",c);c&&a.changeAttr("title",c);var d=b.fire("ariaEditorHelpLabel",{}).label;if(d&&(c=this.ui.space(this.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?"top":"contents"))){var e=CKEDITOR.tools.getNextId(),d=CKEDITOR.dom.element.createFromHtml('\x3cspan id\x3d"'+e+'" class\x3d"cke_voice_label"\x3e'+
d+"\x3c/span\x3e");c.append(d);a.changeAttr("aria-describedby",e)}}})});CKEDITOR.addCss(".cke_editable{cursor:text}.cke_editable img,.cke_editable input,.cke_editable textarea{cursor:default}");f=CKEDITOR.dom.walker.whitespaces(!0);y=CKEDITOR.dom.walker.bookmark(!1,!0);A=CKEDITOR.dom.walker.empty();r=CKEDITOR.dom.walker.bogus();D=/(^|<body\b[^>]*>)\s*<(p|div|address|h\d|center|pre)[^>]*>\s*(?:<br[^>]*>|&nbsp;|\u00A0|&#160;)?\s*(:?<\/\2>)?\s*(?=$|<\/body>)/gi;n=function(){function a(b){return b.type==
CKEDITOR.NODE_ELEMENT}function b(c,d){var e,f,m,p,g=[],k=d.range.startContainer;e=d.range.startPath();for(var k=B[k.getName()],x=0,l=c.getChildren(),F=l.count(),z=-1,n=-1,q=0,v=e.contains(B.$list);x<F;++x)e=l.getItem(x),a(e)?(m=e.getName(),v&&m in CKEDITOR.dtd.$list?g=g.concat(b(e,d)):(p=!!k[m],"br"!=m||!e.data("cke-eol")||x&&x!=F-1||(q=(f=x?g[x-1].node:l.getItem(x+1))&&(!a(f)||!f.is("br")),f=f&&a(f)&&B.$block[f.getName()]),-1!=z||p||(z=x),p||(n=x),g.push({isElement:1,isLineBreak:q,isBlock:e.isBlockBoundary(),
hasBlockSibling:f,node:e,name:m,allowed:p}),f=q=0)):g.push({isElement:0,node:e,allowed:1});-1<z&&(g[z].firstNotAllowed=1);-1<n&&(g[n].lastNotAllowed=1);return g}function d(b,c){var e=[],h=b.getChildren(),f=h.count(),m,g=0,k=B[c],x=!b.is(B.$inline)||b.is("br");for(x&&e.push(" ");g<f;g++)m=h.getItem(g),a(m)&&!m.is(k)?e=e.concat(d(m,c)):e.push(m);x&&e.push(" ");return e}function e(b){return a(b.startContainer)&&b.startContainer.getChild(b.startOffset-1)}function f(b){return b&&a(b)&&(b.is(B.$removeEmpty)||
b.is("a")&&!b.isBlockBoundary())}function g(b,c,d,e){var h=b.clone(),f,m;h.setEndAt(c,CKEDITOR.POSITION_BEFORE_END);(f=(new CKEDITOR.dom.walker(h)).next())&&a(f)&&n[f.getName()]&&(m=f.getPrevious())&&a(m)&&!m.getParent().equals(b.startContainer)&&d.contains(m)&&e.contains(f)&&f.isIdentical(m)&&(f.moveChildren(m),f.remove(),g(b,c,d,e))}function F(b,c){function d(b,c){if(c.isBlock&&c.isElement&&!c.node.is("br")&&a(b)&&b.is("br"))return b.remove(),1}var e=c.endContainer.getChild(c.endOffset),h=c.endContainer.getChild(c.endOffset-
1);e&&d(e,b[b.length-1]);h&&d(h,b[0])&&(c.setEnd(c.endContainer,c.endOffset-1),c.collapse())}var B=CKEDITOR.dtd,n={p:1,div:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,ul:1,ol:1,li:1,pre:1,dl:1,blockquote:1},q={p:1,div:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1},v=CKEDITOR.tools.extend({},B.$inline);delete v.br;return function(n,E,C,I){var G=n.editor,K=!1;"unfiltered_html"==E&&(E="html",K=!0);if(!I.checkReadOnly()){var J=(new CKEDITOR.dom.elementPath(I.startContainer,I.root)).blockLimit||I.root;n={type:E,dontFilter:K,editable:n,
editor:G,range:I,blockLimit:J,mergeCandidates:[],zombies:[]};E=n.range;I=n.mergeCandidates;var L,r;"text"==n.type&&E.shrink(CKEDITOR.SHRINK_ELEMENT,!0,!1)&&(L=CKEDITOR.dom.element.createFromHtml("\x3cspan\x3e\x26nbsp;\x3c/span\x3e",E.document),E.insertNode(L),E.setStartAfter(L));K=new CKEDITOR.dom.elementPath(E.startContainer);n.endPath=J=new CKEDITOR.dom.elementPath(E.endContainer);if(!E.collapsed){var G=J.block||J.blockLimit,w=E.getCommonAncestor();G&&!G.equals(w)&&!G.contains(w)&&E.checkEndOfBlock()&&
n.zombies.push(G);E.deleteContents()}for(;(r=e(E))&&a(r)&&r.isBlockBoundary()&&K.contains(r);)E.moveToPosition(r,CKEDITOR.POSITION_BEFORE_END);g(E,n.blockLimit,K,J);L&&(E.setEndBefore(L),E.collapse(),L.remove());L=E.startPath();if(G=L.contains(f,!1,1))E.splitElement(G),n.inlineStylesRoot=G,n.inlineStylesPeak=L.lastElement;L=E.createBookmark();(G=L.startNode.getPrevious(c))&&a(G)&&f(G)&&I.push(G);(G=L.startNode.getNext(c))&&a(G)&&f(G)&&I.push(G);for(G=L.startNode;(G=G.getParent())&&f(G);)I.push(G);
E.moveToBookmark(L);if(L=C){L=n.range;if("text"==n.type&&n.inlineStylesRoot){r=n.inlineStylesPeak;E=r.getDocument().createText("{cke-peak}");for(I=n.inlineStylesRoot.getParent();!r.equals(I);)E=E.appendTo(r.clone()),r=r.getParent();C=E.getOuterHtml().split("{cke-peak}").join(C)}r=n.blockLimit.getName();if(/^\s+|\s+$/.test(C)&&"span"in CKEDITOR.dtd[r]){var A='\x3cspan data-cke-marker\x3d"1"\x3e\x26nbsp;\x3c/span\x3e';C=A+C+A}C=n.editor.dataProcessor.toHtml(C,{context:null,fixForBody:!1,protectedWhitespaces:!!A,
dontFilter:n.dontFilter,filter:n.editor.activeFilter,enterMode:n.editor.activeEnterMode});r=L.document.createElement("body");r.setHtml(C);A&&(r.getFirst().remove(),r.getLast().remove());if((A=L.startPath().block)&&(1!=A.getChildCount()||!A.getBogus()))a:{var y;if(1==r.getChildCount()&&a(y=r.getFirst())&&y.is(q)&&!y.hasAttribute("contenteditable")){A=y.getElementsByTag("*");L=0;for(I=A.count();L<I;L++)if(E=A.getItem(L),!E.is(v))break a;y.moveChildren(y.getParent(1));y.remove()}}n.dataWrapper=r;L=C}if(L){y=
n.range;L=y.document;var u;r=n.blockLimit;I=0;var D,A=[],M,H;C=G=0;var R,W;E=y.startContainer;var K=n.endPath.elements[0],X,J=K.getPosition(E),w=!!K.getCommonAncestor(E)&&J!=CKEDITOR.POSITION_IDENTICAL&&!(J&CKEDITOR.POSITION_CONTAINS+CKEDITOR.POSITION_IS_CONTAINED);E=b(n.dataWrapper,n);for(F(E,y);I<E.length;I++){J=E[I];if(u=J.isLineBreak){u=y;R=r;var T=void 0,aa=void 0;J.hasBlockSibling?u=1:(T=u.startContainer.getAscendant(B.$block,1))&&T.is({div:1,p:1})?(aa=T.getPosition(R),aa==CKEDITOR.POSITION_IDENTICAL||
aa==CKEDITOR.POSITION_CONTAINS?u=0:(R=u.splitElement(T),u.moveToPosition(R,CKEDITOR.POSITION_AFTER_START),u=1)):u=0}if(u)C=0<I;else{u=y.startPath();!J.isBlock&&k(n.editor,u.block,u.blockLimit)&&(H=l(n.editor))&&(H=L.createElement(H),H.appendBogus(),y.insertNode(H),CKEDITOR.env.needsBrFiller&&(D=H.getBogus())&&D.remove(),y.moveToPosition(H,CKEDITOR.POSITION_BEFORE_END));if((u=y.startPath().block)&&!u.equals(M)){if(D=u.getBogus())D.remove(),A.push(u);M=u}J.firstNotAllowed&&(G=1);if(G&&J.isElement){u=
y.startContainer;for(R=null;u&&!B[u.getName()][J.name];){if(u.equals(r)){u=null;break}R=u;u=u.getParent()}if(u)R&&(W=y.splitElement(R),n.zombies.push(W),n.zombies.push(R));else{R=r.getName();X=!I;u=I==E.length-1;R=d(J.node,R);for(var T=[],aa=R.length,ba=0,da=void 0,ea=0,ga=-1;ba<aa;ba++)da=R[ba]," "==da?(ea||X&&!ba||(T.push(new CKEDITOR.dom.text(" ")),ga=T.length),ea=1):(T.push(da),ea=0);u&&ga==T.length&&T.pop();X=T}}if(X){for(;u=X.pop();)y.insertNode(u);X=0}else y.insertNode(J.node);J.lastNotAllowed&&
I<E.length-1&&((W=w?K:W)&&y.setEndAt(W,CKEDITOR.POSITION_AFTER_START),G=0);y.collapse()}}1!=E.length?D=!1:(D=E[0],D=D.isElement&&"false"==D.node.getAttribute("contenteditable"));D&&(C=!0,u=E[0].node,y.setStartAt(u,CKEDITOR.POSITION_BEFORE_START),y.setEndAt(u,CKEDITOR.POSITION_AFTER_END));n.dontMoveCaret=C;n.bogusNeededBlocks=A}D=n.range;var S;W=n.bogusNeededBlocks;for(X=D.createBookmark();M=n.zombies.pop();)M.getParent()&&(H=D.clone(),H.moveToElementEditStart(M),H.removeEmptyBlocksAtEnd());if(W)for(;M=
W.pop();)CKEDITOR.env.needsBrFiller?M.appendBogus():M.append(D.document.createText(" "));for(;M=n.mergeCandidates.pop();)M.mergeSiblings();D.moveToBookmark(X);if(!n.dontMoveCaret){for(M=e(D);M&&a(M)&&!M.is(B.$empty);){if(M.isBlockBoundary())D.moveToPosition(M,CKEDITOR.POSITION_BEFORE_END);else{if(f(M)&&M.getHtml().match(/(\s|&nbsp;)$/g)){S=null;break}S=D.clone();S.moveToPosition(M,CKEDITOR.POSITION_BEFORE_END)}M=M.getLast(c)}S&&D.moveToRange(S)}}}}();w=function(){function a(b){b=new CKEDITOR.dom.walker(b);
b.guard=function(a,b){if(b)return!1;if(a.type==CKEDITOR.NODE_ELEMENT)return a.is(CKEDITOR.dtd.$tableContent)};b.evaluator=function(a){return a.type==CKEDITOR.NODE_ELEMENT};return b}function b(a,c,d){c=a.getDocument().createElement(c);a.append(c,d);return c}function c(a){var b=a.count(),d;for(b;0<b--;)d=a.getItem(b),CKEDITOR.tools.trim(d.getHtml())||(d.appendBogus(),CKEDITOR.env.ie&&9>CKEDITOR.env.version&&d.getChildCount()&&d.getFirst().remove())}return function(d){var e=d.startContainer,f=e.getAscendant("table",
1),g=!1;c(f.getElementsByTag("td"));c(f.getElementsByTag("th"));f=d.clone();f.setStart(e,0);f=a(f).lastBackward();f||(f=d.clone(),f.setEndAt(e,CKEDITOR.POSITION_BEFORE_END),f=a(f).lastForward(),g=!0);f||(f=e);f.is("table")?(d.setStartAt(f,CKEDITOR.POSITION_BEFORE_START),d.collapse(!0),f.remove()):(f.is({tbody:1,thead:1,tfoot:1})&&(f=b(f,"tr",g)),f.is("tr")&&(f=b(f,f.getParent().is("thead")?"th":"td",g)),(e=f.getBogus())&&e.remove(),d.moveToPosition(f,g?CKEDITOR.POSITION_AFTER_START:CKEDITOR.POSITION_BEFORE_END))}}();
H={eol:{detect:function(a,b){var c=a.range,d=c.clone(),e=c.clone(),f=new CKEDITOR.dom.elementPath(c.startContainer,b),g=new CKEDITOR.dom.elementPath(c.endContainer,b);d.collapse(1);e.collapse();f.block&&d.checkBoundaryOfElement(f.block,CKEDITOR.END)&&(c.setStartAfter(f.block),a.prependEolBr=1);g.block&&e.checkBoundaryOfElement(g.block,CKEDITOR.START)&&(c.setEndBefore(g.block),a.appendEolBr=1)},fix:function(a,b){var c=b.getDocument(),d;a.appendEolBr&&(d=this.createEolBr(c),a.fragment.append(d));!a.prependEolBr||
d&&!d.getPrevious()||a.fragment.append(this.createEolBr(c),1)},createEolBr:function(a){return a.createElement("br",{attributes:{"data-cke-eol":1}})}},bogus:{exclude:function(a){var b=a.range.getBoundaryNodes(),c=b.startNode,b=b.endNode;!b||!r(b)||c&&c.equals(b)||a.range.setEndBefore(b)}},tree:{rebuild:function(a,b){var c=a.range,d=c.getCommonAncestor(),e=new CKEDITOR.dom.elementPath(d,b),f=new CKEDITOR.dom.elementPath(c.startContainer,b),c=new CKEDITOR.dom.elementPath(c.endContainer,b),g;d.type==
CKEDITOR.NODE_TEXT&&(d=d.getParent());if(e.blockLimit.is({tr:1,table:1})){var k=e.contains("table").getParent();g=function(a){return!a.equals(k)}}else if(e.block&&e.block.is(CKEDITOR.dtd.$listItem)&&(f=f.contains(CKEDITOR.dtd.$list),c=c.contains(CKEDITOR.dtd.$list),!f.equals(c))){var l=e.contains(CKEDITOR.dtd.$list).getParent();g=function(a){return!a.equals(l)}}g||(g=function(a){return!a.equals(e.block)&&!a.equals(e.blockLimit)});this.rebuildFragment(a,b,d,g)},rebuildFragment:function(a,b,c,d){for(var e;c&&
!c.equals(b)&&d(c);)e=c.clone(0,1),a.fragment.appendTo(e),a.fragment=e,c=c.getParent()}},cell:{shrink:function(a){a=a.range;var b=a.startContainer,c=a.endContainer,d=a.startOffset,e=a.endOffset;b.type==CKEDITOR.NODE_ELEMENT&&b.equals(c)&&b.is("tr")&&++d==e&&a.shrink(CKEDITOR.SHRINK_TEXT)}}};u=function(){function a(b,c){var d=b.getParent();if(d.is(CKEDITOR.dtd.$inline))b[c?"insertBefore":"insertAfter"](d)}function b(c,d,e){a(d);a(e,1);for(var f;f=e.getNext();)f.insertAfter(d),d=f;A(c)&&c.remove()}
function c(a,b){var d=new CKEDITOR.dom.range(a);d.setStartAfter(b.startNode);d.setEndBefore(b.endNode);return d}return{list:{detectMerge:function(a,b){var d=c(b,a.bookmark),e=d.startPath(),f=d.endPath(),h=e.contains(CKEDITOR.dtd.$list),g=f.contains(CKEDITOR.dtd.$list);a.mergeList=h&&g&&h.getParent().equals(g.getParent())&&!h.equals(g);a.mergeListItems=e.block&&f.block&&e.block.is(CKEDITOR.dtd.$listItem)&&f.block.is(CKEDITOR.dtd.$listItem);if(a.mergeList||a.mergeListItems)d=d.clone(),d.setStartBefore(a.bookmark.startNode),
d.setEndAfter(a.bookmark.endNode),a.mergeListBookmark=d.createBookmark()},merge:function(a,c){if(a.mergeListBookmark){var d=a.mergeListBookmark.startNode,e=a.mergeListBookmark.endNode,f=new CKEDITOR.dom.elementPath(d,c),g=new CKEDITOR.dom.elementPath(e,c);if(a.mergeList){var p=f.contains(CKEDITOR.dtd.$list),k=g.contains(CKEDITOR.dtd.$list);p.equals(k)||(k.moveChildren(p),k.remove())}a.mergeListItems&&(f=f.contains(CKEDITOR.dtd.$listItem),g=g.contains(CKEDITOR.dtd.$listItem),f.equals(g)||b(g,d,e));
d.remove();e.remove()}}},block:{detectMerge:function(a,b){if(!a.tableContentsRanges&&!a.mergeListBookmark){var c=new CKEDITOR.dom.range(b);c.setStartBefore(a.bookmark.startNode);c.setEndAfter(a.bookmark.endNode);a.mergeBlockBookmark=c.createBookmark()}},merge:function(a,c){if(a.mergeBlockBookmark&&!a.purgeTableBookmark){var d=a.mergeBlockBookmark.startNode,e=a.mergeBlockBookmark.endNode,f=new CKEDITOR.dom.elementPath(d,c),g=new CKEDITOR.dom.elementPath(e,c),f=f.block,g=g.block;f&&g&&!f.equals(g)&&
b(g,d,e);d.remove();e.remove()}}},table:function(){function a(c){var e=[],f,h=new CKEDITOR.dom.walker(c),g=c.startPath().contains(d),m=c.endPath().contains(d),p={};h.guard=function(a,h){if(a.type==CKEDITOR.NODE_ELEMENT){var k="visited_"+(h?"out":"in");if(a.getCustomData(k))return;CKEDITOR.dom.element.setMarker(p,a,k,1)}if(h&&g&&a.equals(g))f=c.clone(),f.setEndAt(g,CKEDITOR.POSITION_BEFORE_END),e.push(f);else if(!h&&m&&a.equals(m))f=c.clone(),f.setStartAt(m,CKEDITOR.POSITION_AFTER_START),e.push(f);
else{if(k=!h)k=a.type==CKEDITOR.NODE_ELEMENT&&a.is(d)&&(!g||b(a,g))&&(!m||b(a,m));k&&(f=c.clone(),f.selectNodeContents(a),e.push(f))}};h.lastForward();CKEDITOR.dom.element.clearAllMarkers(p);return e}function b(a,c){var d=CKEDITOR.POSITION_CONTAINS+CKEDITOR.POSITION_IS_CONTAINED,e=a.getPosition(c);return e===CKEDITOR.POSITION_IDENTICAL?!1:0===(e&d)}var d={td:1,th:1,caption:1};return{detectPurge:function(a){var b=a.range,c=b.clone();c.enlarge(CKEDITOR.ENLARGE_ELEMENT);var c=new CKEDITOR.dom.walker(c),
e=0;c.evaluator=function(a){a.type==CKEDITOR.NODE_ELEMENT&&a.is(d)&&++e};c.checkForward();if(1<e){var c=b.startPath().contains("table"),f=b.endPath().contains("table");c&&f&&b.checkBoundaryOfElement(c,CKEDITOR.START)&&b.checkBoundaryOfElement(f,CKEDITOR.END)&&(b=a.range.clone(),b.setStartBefore(c),b.setEndAfter(f),a.purgeTableBookmark=b.createBookmark())}},detectRanges:function(e,f){var h=c(f,e.bookmark),g=h.clone(),k,l,n=h.getCommonAncestor();n.is(CKEDITOR.dtd.$tableContent)&&!n.is(d)&&(n=n.getAscendant("table",
!0));l=n;n=new CKEDITOR.dom.elementPath(h.startContainer,l);l=new CKEDITOR.dom.elementPath(h.endContainer,l);n=n.contains("table");l=l.contains("table");if(n||l)n&&l&&b(n,l)?(e.tableSurroundingRange=g,g.setStartAt(n,CKEDITOR.POSITION_AFTER_END),g.setEndAt(l,CKEDITOR.POSITION_BEFORE_START),g=h.clone(),g.setEndAt(n,CKEDITOR.POSITION_AFTER_END),k=h.clone(),k.setStartAt(l,CKEDITOR.POSITION_BEFORE_START),k=a(g).concat(a(k))):n?l||(e.tableSurroundingRange=g,g.setStartAt(n,CKEDITOR.POSITION_AFTER_END),h.setEndAt(n,
CKEDITOR.POSITION_AFTER_END)):(e.tableSurroundingRange=g,g.setEndAt(l,CKEDITOR.POSITION_BEFORE_START),h.setStartAt(l,CKEDITOR.POSITION_AFTER_START)),e.tableContentsRanges=k?k:a(h)},deleteRanges:function(a){for(var b;b=a.tableContentsRanges.pop();)b.extractContents(),A(b.startContainer)&&b.startContainer.appendBogus();a.tableSurroundingRange&&a.tableSurroundingRange.extractContents()},purge:function(a){if(a.purgeTableBookmark){var b=a.doc,c=a.range.clone(),b=b.createElement("p");b.insertBefore(a.purgeTableBookmark.startNode);
c.moveToBookmark(a.purgeTableBookmark);c.deleteContents();a.range.moveToPosition(b,CKEDITOR.POSITION_AFTER_START)}}}}(),detectExtractMerge:function(a){return!(a.range.startPath().contains(CKEDITOR.dtd.$listItem)&&a.range.endPath().contains(CKEDITOR.dtd.$listItem))},fixUneditableRangePosition:function(a){a.startContainer.getDtd()["#"]||a.moveToClosestEditablePosition(null,!0)},autoParagraph:function(a,b){var c=b.startPath(),d;k(a,c.block,c.blockLimit)&&(d=l(a))&&(d=b.document.createElement(d),d.appendBogus(),
b.insertNode(d),b.moveToPosition(d,CKEDITOR.POSITION_AFTER_START))}}}()})();
(function(){function a(){var a=this._.fakeSelection,b;a&&(b=this.getSelection(1),b&&b.isHidden()||(a.reset(),a=0));if(!a&&(a=b||this.getSelection(1),!a||a.getType()==CKEDITOR.SELECTION_NONE))return;this.fire("selectionCheck",a);b=this.elementPath();b.compare(this._.selectionPreviousPath)||(CKEDITOR.env.webkit&&(this._.previousActive=this.document.getActive()),this._.selectionPreviousPath=b,this.fire("selectionChange",{selection:a,path:b}))}function d(){A=!0;y||(b.call(this),y=CKEDITOR.tools.setTimeout(b,
200,this))}function b(){y=null;A&&(CKEDITOR.tools.setTimeout(a,0,this),A=!1)}function c(a){return r(a)||a.type==CKEDITOR.NODE_ELEMENT&&!a.is(CKEDITOR.dtd.$empty)?!0:!1}function e(a){function b(c,d){return c&&c.type!=CKEDITOR.NODE_TEXT?a.clone()["moveToElementEdit"+(d?"End":"Start")](c):!1}if(!(a.root instanceof CKEDITOR.editable))return!1;var d=a.startContainer,e=a.getPreviousNode(c,null,d),f=a.getNextNode(c,null,d);return b(e)||b(f,1)||!(e||f||d.type==CKEDITOR.NODE_ELEMENT&&d.isBlockBoundary()&&
d.getBogus())?!0:!1}function g(a){k(a,!1);var b=a.getDocument().createText(u);a.setCustomData("cke-fillingChar",b);return b}function k(a,b){var c=a&&a.removeCustomData("cke-fillingChar");if(c){if(!1!==b){var d=a.getDocument().getSelection().getNative(),e=d&&"None"!=d.type&&d.getRangeAt(0),f=u.length;if(c.getLength()>f&&e&&e.intersectsNode(c.$)){var g=[{node:d.anchorNode,offset:d.anchorOffset},{node:d.focusNode,offset:d.focusOffset}];d.anchorNode==c.$&&d.anchorOffset>f&&(g[0].offset-=f);d.focusNode==
c.$&&d.focusOffset>f&&(g[1].offset-=f)}}c.setText(l(c.getText(),1));g&&(c=a.getDocument().$,d=c.getSelection(),c=c.createRange(),c.setStart(g[0].node,g[0].offset),c.collapse(!0),d.removeAllRanges(),d.addRange(c),d.extend(g[1].node,g[1].offset))}}function l(a,b){return b?a.replace(t,function(a,b){return b?" ":""}):a.replace(u,"")}function q(a,b){var c=CKEDITOR.dom.element.createFromHtml('\x3cdiv data-cke-hidden-sel\x3d"1" data-cke-temp\x3d"1" style\x3d"'+(CKEDITOR.env.ie?"display:none":"position:fixed;top:0;left:-1000px")+
'"\x3e'+(b||"\x26nbsp;")+"\x3c/div\x3e",a.document);a.fire("lockSnapshot");a.editable().append(c);var d=a.getSelection(1),e=a.createRange(),f=d.root.on("selectionchange",function(a){a.cancel()},null,null,0);e.setStartAt(c,CKEDITOR.POSITION_AFTER_START);e.setEndAt(c,CKEDITOR.POSITION_BEFORE_END);d.selectRanges([e]);f.removeListener();a.fire("unlockSnapshot");a._.hiddenSelectionContainer=c}function v(a){var b={37:1,39:1,8:1,46:1};return function(c){var d=c.data.getKeystroke();if(b[d]){var e=a.getSelection().getRanges(),
f=e[0];1==e.length&&f.collapsed&&(d=f[38>d?"getPreviousEditableNode":"getNextEditableNode"]())&&d.type==CKEDITOR.NODE_ELEMENT&&"false"==d.getAttribute("contenteditable")&&(a.getSelection().fake(d),c.data.preventDefault(),c.cancel())}}}function f(a){for(var b=0;b<a.length;b++){var c=a[b];c.getCommonAncestor().isReadOnly()&&a.splice(b,1);if(!c.collapsed){if(c.startContainer.isReadOnly())for(var d=c.startContainer,e;d&&!((e=d.type==CKEDITOR.NODE_ELEMENT)&&d.is("body")||!d.isReadOnly());)e&&"false"==
d.getAttribute("contentEditable")&&c.setStartAfter(d),d=d.getParent();d=c.startContainer;e=c.endContainer;var f=c.startOffset,g=c.endOffset,k=c.clone();d&&d.type==CKEDITOR.NODE_TEXT&&(f>=d.getLength()?k.setStartAfter(d):k.setStartBefore(d));e&&e.type==CKEDITOR.NODE_TEXT&&(g?k.setEndAfter(e):k.setEndBefore(e));d=new CKEDITOR.dom.walker(k);d.evaluator=function(d){if(d.type==CKEDITOR.NODE_ELEMENT&&d.isReadOnly()){var e=c.clone();c.setEndBefore(d);c.collapsed&&a.splice(b--,1);d.getPosition(k.endContainer)&
CKEDITOR.POSITION_CONTAINS||(e.setStartAfter(d),e.collapsed||a.splice(b+1,0,e));return!0}return!1};d.next()}}return a}var y,A,r=CKEDITOR.dom.walker.invisible(1),D=function(){function a(b){return function(a){var c=a.editor.createRange();c.moveToClosestEditablePosition(a.selected,b)&&a.editor.getSelection().selectRanges([c]);return!1}}function b(a){return function(b){var c=b.editor,d=c.createRange(),e;(e=d.moveToClosestEditablePosition(b.selected,a))||(e=d.moveToClosestEditablePosition(b.selected,!a));
e&&c.getSelection().selectRanges([d]);c.fire("saveSnapshot");b.selected.remove();e||(d.moveToElementEditablePosition(c.editable()),c.getSelection().selectRanges([d]));c.fire("saveSnapshot");return!1}}var c=a(),d=a(1);return{37:c,38:c,39:d,40:d,8:b(),46:b(1)}}();CKEDITOR.on("instanceCreated",function(b){function c(){var a=e.getSelection();a&&a.removeAllRanges()}var e=b.editor;e.on("contentDom",function(){function b(){C=new CKEDITOR.dom.selection(e.getSelection());C.lock()}function c(){h.removeListener("mouseup",
c);l.removeListener("mouseup",c);var a=CKEDITOR.document.$.selection,b=a.createRange();"None"!=a.type&&b.parentElement().ownerDocument==f.$&&b.select()}var f=e.document,h=CKEDITOR.document,g=e.editable(),p=f.getBody(),l=f.getDocumentElement(),q=g.isInline(),r,C;CKEDITOR.env.gecko&&g.attachListener(g,"focus",function(a){a.removeListener();0!==r&&(a=e.getSelection().getNative())&&a.isCollapsed&&a.anchorNode==g.$&&(a=e.createRange(),a.moveToElementEditStart(g),a.select())},null,null,-2);g.attachListener(g,
CKEDITOR.env.webkit?"DOMFocusIn":"focus",function(){r&&CKEDITOR.env.webkit&&(r=e._.previousActive&&e._.previousActive.equals(f.getActive()));e.unlockSelection(r);r=0},null,null,-1);g.attachListener(g,"mousedown",function(){r=0});if(CKEDITOR.env.ie||q)n?g.attachListener(g,"beforedeactivate",b,null,null,-1):g.attachListener(e,"selectionCheck",b,null,null,-1),g.attachListener(g,CKEDITOR.env.webkit?"DOMFocusOut":"blur",function(){e.lockSelection(C);r=1},null,null,-1),g.attachListener(g,"mousedown",function(){r=
0});if(CKEDITOR.env.ie&&!q){var I;g.attachListener(g,"mousedown",function(a){2==a.data.$.button&&((a=e.document.getSelection())&&a.getType()!=CKEDITOR.SELECTION_NONE||(I=e.window.getScrollPosition()))});g.attachListener(g,"mouseup",function(a){2==a.data.$.button&&I&&(e.document.$.documentElement.scrollLeft=I.x,e.document.$.documentElement.scrollTop=I.y);I=null});if("BackCompat"!=f.$.compatMode){if(CKEDITOR.env.ie7Compat||CKEDITOR.env.ie6Compat)l.on("mousedown",function(a){function b(a){a=a.data.$;
if(d){var c=p.$.createTextRange();try{c.moveToPoint(a.clientX,a.clientY)}catch(e){}d.setEndPoint(0>f.compareEndPoints("StartToStart",c)?"EndToEnd":"StartToStart",c);d.select()}}function c(){l.removeListener("mousemove",b);h.removeListener("mouseup",c);l.removeListener("mouseup",c);d.select()}a=a.data;if(a.getTarget().is("html")&&a.$.y<l.$.clientHeight&&a.$.x<l.$.clientWidth){var d=p.$.createTextRange();try{d.moveToPoint(a.$.clientX,a.$.clientY)}catch(e){}var f=d.duplicate();l.on("mousemove",b);h.on("mouseup",
c);l.on("mouseup",c)}});if(7<CKEDITOR.env.version&&11>CKEDITOR.env.version)l.on("mousedown",function(a){a.data.getTarget().is("html")&&(h.on("mouseup",c),l.on("mouseup",c))})}}g.attachListener(g,"selectionchange",a,e);g.attachListener(g,"keyup",d,e);g.attachListener(g,CKEDITOR.env.webkit?"DOMFocusIn":"focus",function(){e.forceNextSelectionCheck();e.selectionChange(1)});if(q&&(CKEDITOR.env.webkit||CKEDITOR.env.gecko)){var G;g.attachListener(g,"mousedown",function(){G=1});g.attachListener(f.getDocumentElement(),
"mouseup",function(){G&&d.call(e);G=0})}else g.attachListener(CKEDITOR.env.ie?g:f.getDocumentElement(),"mouseup",d,e);CKEDITOR.env.webkit&&g.attachListener(f,"keydown",function(a){switch(a.data.getKey()){case 13:case 33:case 34:case 35:case 36:case 37:case 39:case 8:case 45:case 46:k(g)}},null,null,-1);g.attachListener(g,"keydown",v(e),null,null,-1)});e.on("setData",function(){e.unlockSelection();CKEDITOR.env.webkit&&c()});e.on("contentDomUnload",function(){e.unlockSelection()});if(CKEDITOR.env.ie9Compat)e.on("beforeDestroy",
c,null,null,9);e.on("dataReady",function(){delete e._.fakeSelection;delete e._.hiddenSelectionContainer;e.selectionChange(1)});e.on("loadSnapshot",function(){var a=CKEDITOR.dom.walker.nodeType(CKEDITOR.NODE_ELEMENT),b=e.editable().getLast(a);b&&b.hasAttribute("data-cke-hidden-sel")&&(b.remove(),CKEDITOR.env.gecko&&(a=e.editable().getFirst(a))&&a.is("br")&&a.getAttribute("_moz_editor_bogus_node")&&a.remove())},null,null,100);e.on("key",function(a){if("wysiwyg"==e.mode){var b=e.getSelection();if(b.isFake){var c=
D[a.data.keyCode];if(c)return c({editor:e,selected:b.getSelectedElement(),selection:b,keyEvent:a})}}})});if(CKEDITOR.env.webkit)CKEDITOR.on("instanceReady",function(a){var b=a.editor;b.on("selectionChange",function(){var a=b.editable(),c=a.getCustomData("cke-fillingChar");c&&(c.getCustomData("ready")?k(a):c.setCustomData("ready",1))},null,null,-1);b.on("beforeSetMode",function(){k(b.editable())},null,null,-1);b.on("getSnapshot",function(a){a.data&&(a.data=l(a.data))},b,null,20);b.on("toDataFormat",
function(a){a.data.dataValue=l(a.data.dataValue)},null,null,0)});CKEDITOR.editor.prototype.selectionChange=function(b){(b?a:d).call(this)};CKEDITOR.editor.prototype.getSelection=function(a){return!this._.savedSelection&&!this._.fakeSelection||a?(a=this.editable())&&"wysiwyg"==this.mode?new CKEDITOR.dom.selection(a):null:this._.savedSelection||this._.fakeSelection};CKEDITOR.editor.prototype.lockSelection=function(a){a=a||this.getSelection(1);return a.getType()!=CKEDITOR.SELECTION_NONE?(!a.isLocked&&
a.lock(),this._.savedSelection=a,!0):!1};CKEDITOR.editor.prototype.unlockSelection=function(a){var b=this._.savedSelection;return b?(b.unlock(a),delete this._.savedSelection,!0):!1};CKEDITOR.editor.prototype.forceNextSelectionCheck=function(){delete this._.selectionPreviousPath};CKEDITOR.dom.document.prototype.getSelection=function(){return new CKEDITOR.dom.selection(this)};CKEDITOR.dom.range.prototype.select=function(){var a=this.root instanceof CKEDITOR.editable?this.root.editor.getSelection():
new CKEDITOR.dom.selection(this.root);a.selectRanges([this]);return a};CKEDITOR.SELECTION_NONE=1;CKEDITOR.SELECTION_TEXT=2;CKEDITOR.SELECTION_ELEMENT=3;var n="function"!=typeof window.getSelection,w=1;CKEDITOR.dom.selection=function(a){if(a instanceof CKEDITOR.dom.selection){var b=a;a=a.root}var c=a instanceof CKEDITOR.dom.element;this.rev=b?b.rev:w++;this.document=a instanceof CKEDITOR.dom.document?a:a.getDocument();this.root=c?a:this.document.getBody();this.isLocked=0;this._={cache:{}};if(b)return CKEDITOR.tools.extend(this._.cache,
b._.cache),this.isFake=b.isFake,this.isLocked=b.isLocked,this;a=this.getNative();var d,e;if(a)if(a.getRangeAt)d=(e=a.rangeCount&&a.getRangeAt(0))&&new CKEDITOR.dom.node(e.commonAncestorContainer);else{try{e=a.createRange()}catch(f){}d=e&&CKEDITOR.dom.element.get(e.item&&e.item(0)||e.parentElement())}if(!d||d.type!=CKEDITOR.NODE_ELEMENT&&d.type!=CKEDITOR.NODE_TEXT||!this.root.equals(d)&&!this.root.contains(d))this._.cache.type=CKEDITOR.SELECTION_NONE,this._.cache.startElement=null,this._.cache.selectedElement=
null,this._.cache.selectedText="",this._.cache.ranges=new CKEDITOR.dom.rangeList;return this};var H={img:1,hr:1,li:1,table:1,tr:1,td:1,th:1,embed:1,object:1,ol:1,ul:1,a:1,input:1,form:1,select:1,textarea:1,button:1,fieldset:1,thead:1,tfoot:1},u=CKEDITOR.tools.repeat("​",7),t=new RegExp(u+"( )?","g");CKEDITOR.tools.extend(CKEDITOR.dom.selection,{_removeFillingCharSequenceString:l,_createFillingCharSequenceNode:g,FILLING_CHAR_SEQUENCE:u});CKEDITOR.dom.selection.prototype={getNative:function(){return void 0!==
this._.cache.nativeSel?this._.cache.nativeSel:this._.cache.nativeSel=n?this.document.$.selection:this.document.getWindow().$.getSelection()},getType:n?function(){var a=this._.cache;if(a.type)return a.type;var b=CKEDITOR.SELECTION_NONE;try{var c=this.getNative(),d=c.type;"Text"==d&&(b=CKEDITOR.SELECTION_TEXT);"Control"==d&&(b=CKEDITOR.SELECTION_ELEMENT);c.createRange().parentElement()&&(b=CKEDITOR.SELECTION_TEXT)}catch(e){}return a.type=b}:function(){var a=this._.cache;if(a.type)return a.type;var b=
CKEDITOR.SELECTION_TEXT,c=this.getNative();if(!c||!c.rangeCount)b=CKEDITOR.SELECTION_NONE;else if(1==c.rangeCount){var c=c.getRangeAt(0),d=c.startContainer;d==c.endContainer&&1==d.nodeType&&1==c.endOffset-c.startOffset&&H[d.childNodes[c.startOffset].nodeName.toLowerCase()]&&(b=CKEDITOR.SELECTION_ELEMENT)}return a.type=b},getRanges:function(){var a=n?function(){function a(b){return(new CKEDITOR.dom.node(b)).getIndex()}var b=function(b,c){b=b.duplicate();b.collapse(c);var d=b.parentElement();if(!d.hasChildNodes())return{container:d,
offset:0};for(var e=d.children,f,h,g=b.duplicate(),k=0,l=e.length-1,C=-1,m,n;k<=l;)if(C=Math.floor((k+l)/2),f=e[C],g.moveToElementText(f),m=g.compareEndPoints("StartToStart",b),0<m)l=C-1;else if(0>m)k=C+1;else return{container:d,offset:a(f)};if(-1==C||C==e.length-1&&0>m){g.moveToElementText(d);g.setEndPoint("StartToStart",b);g=g.text.replace(/(\r\n|\r)/g,"\n").length;e=d.childNodes;if(!g)return f=e[e.length-1],f.nodeType!=CKEDITOR.NODE_TEXT?{container:d,offset:e.length}:{container:f,offset:f.nodeValue.length};
for(d=e.length;0<g&&0<d;)h=e[--d],h.nodeType==CKEDITOR.NODE_TEXT&&(n=h,g-=h.nodeValue.length);return{container:n,offset:-g}}g.collapse(0<m?!0:!1);g.setEndPoint(0<m?"StartToStart":"EndToStart",b);g=g.text.replace(/(\r\n|\r)/g,"\n").length;if(!g)return{container:d,offset:a(f)+(0<m?0:1)};for(;0<g;)try{h=f[0<m?"previousSibling":"nextSibling"],h.nodeType==CKEDITOR.NODE_TEXT&&(g-=h.nodeValue.length,n=h),f=h}catch(K){return{container:d,offset:a(f)}}return{container:n,offset:0<m?-g:n.nodeValue.length+g}};
return function(){var a=this.getNative(),c=a&&a.createRange(),d=this.getType();if(!a)return[];if(d==CKEDITOR.SELECTION_TEXT)return a=new CKEDITOR.dom.range(this.root),d=b(c,!0),a.setStart(new CKEDITOR.dom.node(d.container),d.offset),d=b(c),a.setEnd(new CKEDITOR.dom.node(d.container),d.offset),a.endContainer.getPosition(a.startContainer)&CKEDITOR.POSITION_PRECEDING&&a.endOffset<=a.startContainer.getIndex()&&a.collapse(),[a];if(d==CKEDITOR.SELECTION_ELEMENT){for(var d=[],e=0;e<c.length;e++){for(var f=
c.item(e),h=f.parentNode,g=0,a=new CKEDITOR.dom.range(this.root);g<h.childNodes.length&&h.childNodes[g]!=f;g++);a.setStart(new CKEDITOR.dom.node(h),g);a.setEnd(new CKEDITOR.dom.node(h),g+1);d.push(a)}return d}return[]}}():function(){var a=[],b,c=this.getNative();if(!c)return a;for(var d=0;d<c.rangeCount;d++){var e=c.getRangeAt(d);b=new CKEDITOR.dom.range(this.root);b.setStart(new CKEDITOR.dom.node(e.startContainer),e.startOffset);b.setEnd(new CKEDITOR.dom.node(e.endContainer),e.endOffset);a.push(b)}return a};
return function(b){var c=this._.cache,d=c.ranges;d||(c.ranges=d=new CKEDITOR.dom.rangeList(a.call(this)));return b?f(new CKEDITOR.dom.rangeList(d.slice())):d}}(),getStartElement:function(){var a=this._.cache;if(void 0!==a.startElement)return a.startElement;var b;switch(this.getType()){case CKEDITOR.SELECTION_ELEMENT:return this.getSelectedElement();case CKEDITOR.SELECTION_TEXT:var c=this.getRanges()[0];if(c){if(c.collapsed)b=c.startContainer,b.type!=CKEDITOR.NODE_ELEMENT&&(b=b.getParent());else{for(c.optimize();b=
c.startContainer,c.startOffset==(b.getChildCount?b.getChildCount():b.getLength())&&!b.isBlockBoundary();)c.setStartAfter(b);b=c.startContainer;if(b.type!=CKEDITOR.NODE_ELEMENT)return b.getParent();if((b=b.getChild(c.startOffset))&&b.type==CKEDITOR.NODE_ELEMENT)for(c=b.getFirst();c&&c.type==CKEDITOR.NODE_ELEMENT;)b=c,c=c.getFirst();else b=c.startContainer}b=b.$}}return a.startElement=b?new CKEDITOR.dom.element(b):null},getSelectedElement:function(){var a=this._.cache;if(void 0!==a.selectedElement)return a.selectedElement;
var b=this,c=CKEDITOR.tools.tryThese(function(){return b.getNative().createRange().item(0)},function(){for(var a=b.getRanges()[0].clone(),c,d,e=2;e&&!((c=a.getEnclosedNode())&&c.type==CKEDITOR.NODE_ELEMENT&&H[c.getName()]&&(d=c));e--)a.shrink(CKEDITOR.SHRINK_ELEMENT);return d&&d.$});return a.selectedElement=c?new CKEDITOR.dom.element(c):null},getSelectedText:function(){var a=this._.cache;if(void 0!==a.selectedText)return a.selectedText;var b=this.getNative(),b=n?"Control"==b.type?"":b.createRange().text:
b.toString();return a.selectedText=b},lock:function(){this.getRanges();this.getStartElement();this.getSelectedElement();this.getSelectedText();this._.cache.nativeSel=null;this.isLocked=1},unlock:function(a){if(this.isLocked){if(a)var b=this.getSelectedElement(),c=!b&&this.getRanges(),d=this.isFake;this.isLocked=0;this.reset();a&&(a=b||c[0]&&c[0].getCommonAncestor())&&a.getAscendant("body",1)&&(d?this.fake(b):b?this.selectElement(b):this.selectRanges(c))}},reset:function(){this._.cache={};this.isFake=
0;var a=this.root.editor;if(a&&a._.fakeSelection)if(this.rev==a._.fakeSelection.rev){delete a._.fakeSelection;var b=a._.hiddenSelectionContainer;if(b){var c=a.checkDirty();a.fire("lockSnapshot");b.remove();a.fire("unlockSnapshot");!c&&a.resetDirty()}delete a._.hiddenSelectionContainer}else CKEDITOR.warn("selection-fake-reset");this.rev=w++},selectElement:function(a){var b=new CKEDITOR.dom.range(this.root);b.setStartBefore(a);b.setEndAfter(a);this.selectRanges([b])},selectRanges:function(a){var b=
this.root.editor,b=b&&b._.hiddenSelectionContainer;this.reset();if(b)for(var b=this.root,c,d=0;d<a.length;++d)c=a[d],c.endContainer.equals(b)&&(c.endOffset=Math.min(c.endOffset,b.getChildCount()));if(a.length)if(this.isLocked){var f=CKEDITOR.document.getActive();this.unlock();this.selectRanges(a);this.lock();f&&!f.equals(this.root)&&f.focus()}else{var l;a:{var q,v;if(1==a.length&&!(v=a[0]).collapsed&&(l=v.getEnclosedNode())&&l.type==CKEDITOR.NODE_ELEMENT&&(v=v.clone(),v.shrink(CKEDITOR.SHRINK_ELEMENT,
!0),(q=v.getEnclosedNode())&&q.type==CKEDITOR.NODE_ELEMENT&&(l=q),"false"==l.getAttribute("contenteditable")))break a;l=void 0}if(l)this.fake(l);else{if(n){v=CKEDITOR.dom.walker.whitespaces(!0);q=/\ufeff|\u00a0/;b={table:1,tbody:1,tr:1};1<a.length&&(l=a[a.length-1],a[0].setEnd(l.endContainer,l.endOffset));l=a[0];a=l.collapsed;var r,u,t;if((c=l.getEnclosedNode())&&c.type==CKEDITOR.NODE_ELEMENT&&c.getName()in H&&(!c.is("a")||!c.getText()))try{t=c.$.createControlRange();t.addElement(c.$);t.select();
return}catch(y){}if(l.startContainer.type==CKEDITOR.NODE_ELEMENT&&l.startContainer.getName()in b||l.endContainer.type==CKEDITOR.NODE_ELEMENT&&l.endContainer.getName()in b)l.shrink(CKEDITOR.NODE_ELEMENT,!0),a=l.collapsed;t=l.createBookmark();b=t.startNode;a||(f=t.endNode);t=l.document.$.body.createTextRange();t.moveToElementText(b.$);t.moveStart("character",1);f?(q=l.document.$.body.createTextRange(),q.moveToElementText(f.$),t.setEndPoint("EndToEnd",q),t.moveEnd("character",-1)):(r=b.getNext(v),u=
b.hasAscendant("pre"),r=!(r&&r.getText&&r.getText().match(q))&&(u||!b.hasPrevious()||b.getPrevious().is&&b.getPrevious().is("br")),u=l.document.createElement("span"),u.setHtml("\x26#65279;"),u.insertBefore(b),r&&l.document.createText("﻿").insertBefore(b));l.setStartBefore(b);b.remove();a?(r?(t.moveStart("character",-1),t.select(),l.document.$.selection.clear()):t.select(),l.moveToPosition(u,CKEDITOR.POSITION_BEFORE_START),u.remove()):(l.setEndBefore(f),f.remove(),t.select())}else{f=this.getNative();
if(!f)return;this.removeAllRanges();for(t=0;t<a.length;t++){if(t<a.length-1&&(r=a[t],u=a[t+1],q=r.clone(),q.setStart(r.endContainer,r.endOffset),q.setEnd(u.startContainer,u.startOffset),!q.collapsed&&(q.shrink(CKEDITOR.NODE_ELEMENT,!0),l=q.getCommonAncestor(),q=q.getEnclosedNode(),l.isReadOnly()||q&&q.isReadOnly()))){u.setStart(r.startContainer,r.startOffset);a.splice(t--,1);continue}l=a[t];u=this.document.$.createRange();l.collapsed&&CKEDITOR.env.webkit&&e(l)&&(q=g(this.root),l.insertNode(q),(r=
q.getNext())&&!q.getPrevious()&&r.type==CKEDITOR.NODE_ELEMENT&&"br"==r.getName()?(k(this.root),l.moveToPosition(r,CKEDITOR.POSITION_BEFORE_START)):l.moveToPosition(q,CKEDITOR.POSITION_AFTER_END));u.setStart(l.startContainer.$,l.startOffset);try{u.setEnd(l.endContainer.$,l.endOffset)}catch(C){if(0<=C.toString().indexOf("NS_ERROR_ILLEGAL_VALUE"))l.collapse(1),u.setEnd(l.endContainer.$,l.endOffset);else throw C;}f.addRange(u)}}this.reset();this.root.fire("selectionchange")}}},fake:function(a,b){var c=
this.root.editor;void 0===b&&a.hasAttribute("aria-label")&&(b=a.getAttribute("aria-label"));this.reset();q(c,b);var d=this._.cache,e=new CKEDITOR.dom.range(this.root);e.setStartBefore(a);e.setEndAfter(a);d.ranges=new CKEDITOR.dom.rangeList(e);d.selectedElement=d.startElement=a;d.type=CKEDITOR.SELECTION_ELEMENT;d.selectedText=d.nativeSel=null;this.isFake=1;this.rev=w++;c._.fakeSelection=this;this.root.fire("selectionchange")},isHidden:function(){var a=this.getCommonAncestor();a&&a.type==CKEDITOR.NODE_TEXT&&
(a=a.getParent());return!(!a||!a.data("cke-hidden-sel"))},createBookmarks:function(a){a=this.getRanges().createBookmarks(a);this.isFake&&(a.isFake=1);return a},createBookmarks2:function(a){a=this.getRanges().createBookmarks2(a);this.isFake&&(a.isFake=1);return a},selectBookmarks:function(a){for(var b=[],c,d=0;d<a.length;d++){var e=new CKEDITOR.dom.range(this.root);e.moveToBookmark(a[d]);b.push(e)}a.isFake&&(c=b[0].getEnclosedNode(),c&&c.type==CKEDITOR.NODE_ELEMENT||(CKEDITOR.warn("selection-not-fake"),
a.isFake=0));a.isFake?this.fake(c):this.selectRanges(b);return this},getCommonAncestor:function(){var a=this.getRanges();return a.length?a[0].startContainer.getCommonAncestor(a[a.length-1].endContainer):null},scrollIntoView:function(){this.type!=CKEDITOR.SELECTION_NONE&&this.getRanges()[0].scrollIntoView()},removeAllRanges:function(){if(this.getType()!=CKEDITOR.SELECTION_NONE){var a=this.getNative();try{a&&a[n?"empty":"removeAllRanges"]()}catch(b){}this.reset()}}}})();"use strict";
CKEDITOR.STYLE_BLOCK=1;CKEDITOR.STYLE_INLINE=2;CKEDITOR.STYLE_OBJECT=3;
(function(){function a(a,b){for(var c,d;(a=a.getParent())&&!a.equals(b);)if(a.getAttribute("data-nostyle"))c=a;else if(!d){var e=a.getAttribute("contentEditable");"false"==e?c=a:"true"==e&&(d=1)}return c}function d(a,b,c,d){return(a.getPosition(b)|d)==d&&(!c.childRule||c.childRule(a))}function b(c){var f=c.document;if(c.collapsed)f=H(this,f),c.insertNode(f),c.moveToPosition(f,CKEDITOR.POSITION_BEFORE_END);else{var g=this.element,h=this._.definition,k,l=h.ignoreReadonly,n=l||h.includeReadonly;null==
n&&(n=c.root.getCustomData("cke_includeReadonly"));var m=CKEDITOR.dtd[g];m||(k=!0,m=CKEDITOR.dtd.span);c.enlarge(CKEDITOR.ENLARGE_INLINE,1);c.trim();var p=c.createBookmark(),q=p.startNode,v=p.endNode,r=q,t;if(!l){var u=c.getCommonAncestor(),l=a(q,u),u=a(v,u);l&&(r=l.getNextSourceNode(!0));u&&(v=u)}for(r.getPosition(v)==CKEDITOR.POSITION_FOLLOWING&&(r=0);r;){l=!1;if(r.equals(v))r=null,l=!0;else{var y=r.type==CKEDITOR.NODE_ELEMENT?r.getName():null,u=y&&"false"==r.getAttribute("contentEditable"),w=y&&
r.getAttribute("data-nostyle");if(y&&r.data("cke-bookmark")){r=r.getNextSourceNode(!0);continue}if(u&&n&&CKEDITOR.dtd.$block[y])for(var A=r,x=e(A),z=void 0,B=x.length,E=0,A=B&&new CKEDITOR.dom.range(A.getDocument());E<B;++E){var z=x[E],F=CKEDITOR.filter.instances[z.data("cke-filter")];if(F?F.check(this):1)A.selectNodeContents(z),b.call(this,A)}x=y?!m[y]||w?0:u&&!n?0:d(r,v,h,O):1;if(x)if(z=r.getParent(),x=h,B=g,E=k,!z||!(z.getDtd()||CKEDITOR.dtd.span)[B]&&!E||x.parentRule&&!x.parentRule(z))l=!0;else{if(t||
y&&CKEDITOR.dtd.$removeEmpty[y]&&(r.getPosition(v)|O)!=O||(t=c.clone(),t.setStartBefore(r)),y=r.type,y==CKEDITOR.NODE_TEXT||u||y==CKEDITOR.NODE_ELEMENT&&!r.getChildCount()){for(var y=r,P;(l=!y.getNext(Y))&&(P=y.getParent(),m[P.getName()])&&d(P,q,h,N);)y=P;t.setEndAfter(y)}}else l=!0;r=r.getNextSourceNode(w||u)}if(l&&t&&!t.collapsed){for(var l=H(this,f),u=l.hasAttributes(),w=t.getCommonAncestor(),y={},x={},z={},B={},S,V,ca;l&&w;){if(w.getName()==g){for(S in h.attributes)!B[S]&&(ca=w.getAttribute(V))&&
(l.getAttribute(S)==ca?x[S]=1:B[S]=1);for(V in h.styles)!z[V]&&(ca=w.getStyle(V))&&(l.getStyle(V)==ca?y[V]=1:z[V]=1)}w=w.getParent()}for(S in x)l.removeAttribute(S);for(V in y)l.removeStyle(V);u&&!l.hasAttributes()&&(l=null);l?(t.extractContents().appendTo(l),t.insertNode(l),D.call(this,l),l.mergeSiblings(),CKEDITOR.env.ie||l.$.normalize()):(l=new CKEDITOR.dom.element("span"),t.extractContents().appendTo(l),t.insertNode(l),D.call(this,l),l.remove(!0));t=null}}c.moveToBookmark(p);c.shrink(CKEDITOR.SHRINK_TEXT);
c.shrink(CKEDITOR.NODE_ELEMENT,!0)}}function c(a){function b(){for(var a=new CKEDITOR.dom.elementPath(d.getParent()),c=new CKEDITOR.dom.elementPath(m.getParent()),e=null,f=null,g=0;g<a.elements.length;g++){var h=a.elements[g];if(h==a.block||h==a.blockLimit)break;p.checkElementRemovable(h,!0)&&(e=h)}for(g=0;g<c.elements.length;g++){h=c.elements[g];if(h==c.block||h==c.blockLimit)break;p.checkElementRemovable(h,!0)&&(f=h)}f&&m.breakParent(f);e&&d.breakParent(e)}a.enlarge(CKEDITOR.ENLARGE_INLINE,1);var c=
a.createBookmark(),d=c.startNode;if(a.collapsed){for(var e=new CKEDITOR.dom.elementPath(d.getParent(),a.root),f,g=0,k;g<e.elements.length&&(k=e.elements[g])&&k!=e.block&&k!=e.blockLimit;g++)if(this.checkElementRemovable(k)){var l;a.collapsed&&(a.checkBoundaryOfElement(k,CKEDITOR.END)||(l=a.checkBoundaryOfElement(k,CKEDITOR.START)))?(f=k,f.match=l?"start":"end"):(k.mergeSiblings(),k.is(this.element)?r.call(this,k):n(k,h(this)[k.getName()]))}if(f){k=d;for(g=0;;g++){l=e.elements[g];if(l.equals(f))break;
else if(l.match)continue;else l=l.clone();l.append(k);k=l}k["start"==f.match?"insertBefore":"insertAfter"](f)}}else{var m=c.endNode,p=this;b();for(e=d;!e.equals(m);)f=e.getNextSourceNode(),e.type==CKEDITOR.NODE_ELEMENT&&this.checkElementRemovable(e)&&(e.getName()==this.element?r.call(this,e):n(e,h(this)[e.getName()]),f.type==CKEDITOR.NODE_ELEMENT&&f.contains(d)&&(b(),f=d.getNext())),e=f}a.moveToBookmark(c);a.shrink(CKEDITOR.NODE_ELEMENT,!0)}function e(a){var b=[];a.forEach(function(a){if("true"==
a.getAttribute("contenteditable"))return b.push(a),!1},CKEDITOR.NODE_ELEMENT,!0);return b}function g(a){var b=a.getEnclosedNode()||a.getCommonAncestor(!1,!0);(a=(new CKEDITOR.dom.elementPath(b,a.root)).contains(this.element,1))&&!a.isReadOnly()&&u(a,this)}function k(a){var b=a.getCommonAncestor(!0,!0);if(a=(new CKEDITOR.dom.elementPath(b,a.root)).contains(this.element,1)){var b=this._.definition,c=b.attributes;if(c)for(var d in c)a.removeAttribute(d,c[d]);if(b.styles)for(var e in b.styles)b.styles.hasOwnProperty(e)&&
a.removeStyle(e)}}function l(a){var b=a.createBookmark(!0),c=a.createIterator();c.enforceRealBlocks=!0;this._.enterMode&&(c.enlargeBr=this._.enterMode!=CKEDITOR.ENTER_BR);for(var d,e=a.document,f;d=c.getNextParagraph();)!d.isReadOnly()&&(c.activeFilter?c.activeFilter.check(this):1)&&(f=H(this,e,d),v(d,f));a.moveToBookmark(b)}function q(a){var b=a.createBookmark(1),c=a.createIterator();c.enforceRealBlocks=!0;c.enlargeBr=this._.enterMode!=CKEDITOR.ENTER_BR;for(var d,e;d=c.getNextParagraph();)this.checkElementRemovable(d)&&
(d.is("pre")?((e=this._.enterMode==CKEDITOR.ENTER_BR?null:a.document.createElement(this._.enterMode==CKEDITOR.ENTER_P?"p":"div"))&&d.copyAttributes(e),v(d,e)):r.call(this,d));a.moveToBookmark(b)}function v(a,b){var c=!b;c&&(b=a.getDocument().createElement("div"),a.copyAttributes(b));var d=b&&b.is("pre"),e=a.is("pre"),g=!d&&e;if(d&&!e){e=b;(g=a.getBogus())&&g.remove();g=a.getHtml();g=y(g,/(?:^[ \t\n\r]+)|(?:[ \t\n\r]+$)/g,"");g=g.replace(/[ \t\r\n]*(<br[^>]*>)[ \t\r\n]*/gi,"$1");g=g.replace(/([ \t\n\r]+|&nbsp;)/g,
" ");g=g.replace(/<br\b[^>]*>/gi,"\n");if(CKEDITOR.env.ie){var h=a.getDocument().createElement("div");h.append(e);e.$.outerHTML="\x3cpre\x3e"+g+"\x3c/pre\x3e";e.copyAttributes(h.getFirst());e=h.getFirst().remove()}else e.setHtml(g);b=e}else g?b=A(c?[a.getHtml()]:f(a),b):a.moveChildren(b);b.replace(a);if(d){var c=b,k;(k=c.getPrevious(P))&&k.type==CKEDITOR.NODE_ELEMENT&&k.is("pre")&&(d=y(k.getHtml(),/\n$/,"")+"\n\n"+y(c.getHtml(),/^\n/,""),CKEDITOR.env.ie?c.$.outerHTML="\x3cpre\x3e"+d+"\x3c/pre\x3e":
c.setHtml(d),k.remove())}else c&&w(b)}function f(a){var b=[];y(a.getOuterHtml(),/(\S\s*)\n(?:\s|(<span[^>]+data-cke-bookmark.*?\/span>))*\n(?!$)/gi,function(a,b,c){return b+"\x3c/pre\x3e"+c+"\x3cpre\x3e"}).replace(/<pre\b.*?>([\s\S]*?)<\/pre>/gi,function(a,c){b.push(c)});return b}function y(a,b,c){var d="",e="";a=a.replace(/(^<span[^>]+data-cke-bookmark.*?\/span>)|(<span[^>]+data-cke-bookmark.*?\/span>$)/gi,function(a,b,c){b&&(d=b);c&&(e=c);return""});return d+a.replace(b,c)+e}function A(a,b){var c;
1<a.length&&(c=new CKEDITOR.dom.documentFragment(b.getDocument()));for(var d=0;d<a.length;d++){var e=a[d],e=e.replace(/(\r\n|\r)/g,"\n"),e=y(e,/^[ \t]*\n/,""),e=y(e,/\n$/,""),e=y(e,/^[ \t]+|[ \t]+$/g,function(a,b){return 1==a.length?"\x26nbsp;":b?" "+CKEDITOR.tools.repeat("\x26nbsp;",a.length-1):CKEDITOR.tools.repeat("\x26nbsp;",a.length-1)+" "}),e=e.replace(/\n/g,"\x3cbr\x3e"),e=e.replace(/[ \t]{2,}/g,function(a){return CKEDITOR.tools.repeat("\x26nbsp;",a.length-1)+" "});if(c){var f=b.clone();f.setHtml(e);
c.append(f)}else b.setHtml(e)}return c||b}function r(a,b){var c=this._.definition,d=c.attributes,c=c.styles,e=h(this)[a.getName()],f=CKEDITOR.tools.isEmpty(d)&&CKEDITOR.tools.isEmpty(c),g;for(g in d)if("class"!=g&&!this._.definition.fullMatch||a.getAttribute(g)==p(g,d[g]))b&&"data-"==g.slice(0,5)||(f=a.hasAttribute(g),a.removeAttribute(g));for(var k in c)this._.definition.fullMatch&&a.getStyle(k)!=p(k,c[k],!0)||(f=f||!!a.getStyle(k),a.removeStyle(k));n(a,e,z[a.getName()]);f&&(this._.definition.alwaysRemoveElement?
w(a,1):!CKEDITOR.dtd.$block[a.getName()]||this._.enterMode==CKEDITOR.ENTER_BR&&!a.hasAttributes()?w(a):a.renameNode(this._.enterMode==CKEDITOR.ENTER_P?"p":"div"))}function D(a){for(var b=h(this),c=a.getElementsByTag(this.element),d,e=c.count();0<=--e;)d=c.getItem(e),d.isReadOnly()||r.call(this,d,!0);for(var f in b)if(f!=this.element)for(c=a.getElementsByTag(f),e=c.count()-1;0<=e;e--)d=c.getItem(e),d.isReadOnly()||n(d,b[f])}function n(a,b,c){if(b=b&&b.attributes)for(var d=0;d<b.length;d++){var e=b[d][0],
f;if(f=a.getAttribute(e)){var g=b[d][1];(null===g||g.test&&g.test(f)||"string"==typeof g&&f==g)&&a.removeAttribute(e)}}c||w(a)}function w(a,b){if(!a.hasAttributes()||b)if(CKEDITOR.dtd.$block[a.getName()]){var c=a.getPrevious(P),d=a.getNext(P);!c||c.type!=CKEDITOR.NODE_TEXT&&c.isBlockBoundary({br:1})||a.append("br",1);!d||d.type!=CKEDITOR.NODE_TEXT&&d.isBlockBoundary({br:1})||a.append("br");a.remove(!0)}else c=a.getFirst(),d=a.getLast(),a.remove(!0),c&&(c.type==CKEDITOR.NODE_ELEMENT&&c.mergeSiblings(),
d&&!c.equals(d)&&d.type==CKEDITOR.NODE_ELEMENT&&d.mergeSiblings())}function H(a,b,c){var d;d=a.element;"*"==d&&(d="span");d=new CKEDITOR.dom.element(d,b);c&&c.copyAttributes(d);d=u(d,a);b.getCustomData("doc_processing_style")&&d.hasAttribute("id")?d.removeAttribute("id"):b.setCustomData("doc_processing_style",1);return d}function u(a,b){var c=b._.definition,d=c.attributes,c=CKEDITOR.style.getStyleText(c);if(d)for(var e in d)a.setAttribute(e,d[e]);c&&a.setAttribute("style",c);return a}function t(a,
b){for(var c in a)a[c]=a[c].replace(E,function(a,c){return b[c]})}function h(a){if(a._.overrides)return a._.overrides;var b=a._.overrides={},c=a._.definition.overrides;if(c){CKEDITOR.tools.isArray(c)||(c=[c]);for(var d=0;d<c.length;d++){var e=c[d],f,g;"string"==typeof e?f=e.toLowerCase():(f=e.element?e.element.toLowerCase():a.element,g=e.attributes);e=b[f]||(b[f]={});if(g){var e=e.attributes=e.attributes||[],h;for(h in g)e.push([h.toLowerCase(),g[h]])}}}return b}function p(a,b,c){var d=new CKEDITOR.dom.element("span");
d[c?"setStyle":"setAttribute"](a,b);return d[c?"getStyle":"getAttribute"](a)}function m(a,b){function c(a,b){return"font-family"==b.toLowerCase()?a.replace(/["']/g,""):a}"string"==typeof a&&(a=CKEDITOR.tools.parseCssText(a));"string"==typeof b&&(b=CKEDITOR.tools.parseCssText(b,!0));for(var d in a)if(!(d in b)||c(b[d],d)!=c(a[d],d)&&"inherit"!=a[d]&&"inherit"!=b[d])return!1;return!0}function x(a,b,c){var d=a.document,e=a.getRanges();b=b?this.removeFromRange:this.applyToRange;for(var f,g=e.createIterator();f=
g.getNextRange();)b.call(this,f,c);a.selectRanges(e);d.removeCustomData("doc_processing_style")}var z={address:1,div:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,p:1,pre:1,section:1,header:1,footer:1,nav:1,article:1,aside:1,figure:1,dialog:1,hgroup:1,time:1,meter:1,menu:1,command:1,keygen:1,output:1,progress:1,details:1,datagrid:1,datalist:1},F={a:1,blockquote:1,embed:1,hr:1,img:1,li:1,object:1,ol:1,table:1,td:1,tr:1,th:1,ul:1,dl:1,dt:1,dd:1,form:1,audio:1,video:1},B=/\s*(?:;\s*|$)/,E=/#\((.+?)\)/g,Y=CKEDITOR.dom.walker.bookmark(0,
1),P=CKEDITOR.dom.walker.whitespaces(1);CKEDITOR.style=function(a,b){if("string"==typeof a.type)return new CKEDITOR.style.customHandlers[a.type](a);var c=a.attributes;c&&c.style&&(a.styles=CKEDITOR.tools.extend({},a.styles,CKEDITOR.tools.parseCssText(c.style)),delete c.style);b&&(a=CKEDITOR.tools.clone(a),t(a.attributes,b),t(a.styles,b));c=this.element=a.element?"string"==typeof a.element?a.element.toLowerCase():a.element:"*";this.type=a.type||(z[c]?CKEDITOR.STYLE_BLOCK:F[c]?CKEDITOR.STYLE_OBJECT:
CKEDITOR.STYLE_INLINE);"object"==typeof this.element&&(this.type=CKEDITOR.STYLE_OBJECT);this._={definition:a}};CKEDITOR.style.prototype={apply:function(a){if(a instanceof CKEDITOR.dom.document)return x.call(this,a.getSelection());if(this.checkApplicable(a.elementPath(),a)){var b=this._.enterMode;b||(this._.enterMode=a.activeEnterMode);x.call(this,a.getSelection(),0,a);this._.enterMode=b}},remove:function(a){if(a instanceof CKEDITOR.dom.document)return x.call(this,a.getSelection(),1);if(this.checkApplicable(a.elementPath(),
a)){var b=this._.enterMode;b||(this._.enterMode=a.activeEnterMode);x.call(this,a.getSelection(),1,a);this._.enterMode=b}},applyToRange:function(a){this.applyToRange=this.type==CKEDITOR.STYLE_INLINE?b:this.type==CKEDITOR.STYLE_BLOCK?l:this.type==CKEDITOR.STYLE_OBJECT?g:null;return this.applyToRange(a)},removeFromRange:function(a){this.removeFromRange=this.type==CKEDITOR.STYLE_INLINE?c:this.type==CKEDITOR.STYLE_BLOCK?q:this.type==CKEDITOR.STYLE_OBJECT?k:null;return this.removeFromRange(a)},applyToObject:function(a){u(a,
this)},checkActive:function(a,b){switch(this.type){case CKEDITOR.STYLE_BLOCK:return this.checkElementRemovable(a.block||a.blockLimit,!0,b);case CKEDITOR.STYLE_OBJECT:case CKEDITOR.STYLE_INLINE:for(var c=a.elements,d=0,e;d<c.length;d++)if(e=c[d],this.type!=CKEDITOR.STYLE_INLINE||e!=a.block&&e!=a.blockLimit){if(this.type==CKEDITOR.STYLE_OBJECT){var f=e.getName();if(!("string"==typeof this.element?f==this.element:f in this.element))continue}if(this.checkElementRemovable(e,!0,b))return!0}}return!1},checkApplicable:function(a,
b,c){b&&b instanceof CKEDITOR.filter&&(c=b);if(c&&!c.check(this))return!1;switch(this.type){case CKEDITOR.STYLE_OBJECT:return!!a.contains(this.element);case CKEDITOR.STYLE_BLOCK:return!!a.blockLimit.getDtd()[this.element]}return!0},checkElementMatch:function(a,b){var c=this._.definition;if(!a||!c.ignoreReadonly&&a.isReadOnly())return!1;var d=a.getName();if("string"==typeof this.element?d==this.element:d in this.element){if(!b&&!a.hasAttributes())return!0;if(d=c._AC)c=d;else{var d={},e=0,f=c.attributes;
if(f)for(var g in f)e++,d[g]=f[g];if(g=CKEDITOR.style.getStyleText(c))d.style||e++,d.style=g;d._length=e;c=c._AC=d}if(c._length){for(var h in c)if("_length"!=h)if(d=a.getAttribute(h)||"","style"==h?m(c[h],d):c[h]==d){if(!b)return!0}else if(b)return!1;if(b)return!0}else return!0}return!1},checkElementRemovable:function(a,b,c){if(this.checkElementMatch(a,b,c))return!0;if(b=h(this)[a.getName()]){var d;if(!(b=b.attributes))return!0;for(c=0;c<b.length;c++)if(d=b[c][0],d=a.getAttribute(d)){var e=b[c][1];
if(null===e)return!0;if("string"==typeof e){if(d==e)return!0}else if(e.test(d))return!0}}return!1},buildPreview:function(a){var b=this._.definition,c=[],d=b.element;"bdo"==d&&(d="span");var c=["\x3c",d],e=b.attributes;if(e)for(var f in e)c.push(" ",f,'\x3d"',e[f],'"');(e=CKEDITOR.style.getStyleText(b))&&c.push(' style\x3d"',e,'"');c.push("\x3e",a||b.name,"\x3c/",d,"\x3e");return c.join("")},getDefinition:function(){return this._.definition}};CKEDITOR.style.getStyleText=function(a){var b=a._ST;if(b)return b;
var b=a.styles,c=a.attributes&&a.attributes.style||"",d="";c.length&&(c=c.replace(B,";"));for(var e in b){var f=b[e],g=(e+":"+f).replace(B,";");"inherit"==f?d+=g:c+=g}c.length&&(c=CKEDITOR.tools.normalizeCssText(c,!0));return a._ST=c+d};CKEDITOR.style.customHandlers={};CKEDITOR.style.addCustomHandler=function(a){var b=function(a){this._={definition:a};this.setup&&this.setup(a)};b.prototype=CKEDITOR.tools.extend(CKEDITOR.tools.prototypedCopy(CKEDITOR.style.prototype),{assignedTo:CKEDITOR.STYLE_OBJECT},
a,!0);return this.customHandlers[a.type]=b};var O=CKEDITOR.POSITION_PRECEDING|CKEDITOR.POSITION_IDENTICAL|CKEDITOR.POSITION_IS_CONTAINED,N=CKEDITOR.POSITION_FOLLOWING|CKEDITOR.POSITION_IDENTICAL|CKEDITOR.POSITION_IS_CONTAINED})();CKEDITOR.styleCommand=function(a,d){this.requiredContent=this.allowedContent=this.style=a;CKEDITOR.tools.extend(this,d,!0)};
CKEDITOR.styleCommand.prototype.exec=function(a){a.focus();this.state==CKEDITOR.TRISTATE_OFF?a.applyStyle(this.style):this.state==CKEDITOR.TRISTATE_ON&&a.removeStyle(this.style)};CKEDITOR.stylesSet=new CKEDITOR.resourceManager("","stylesSet");CKEDITOR.addStylesSet=CKEDITOR.tools.bind(CKEDITOR.stylesSet.add,CKEDITOR.stylesSet);CKEDITOR.loadStylesSet=function(a,d,b){CKEDITOR.stylesSet.addExternal(a,d,"");CKEDITOR.stylesSet.load(a,b)};
CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{attachStyleStateChange:function(a,d){var b=this._.styleStateChangeCallbacks;b||(b=this._.styleStateChangeCallbacks=[],this.on("selectionChange",function(a){for(var d=0;d<b.length;d++){var g=b[d],k=g.style.checkActive(a.data.path,this)?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF;g.fn.call(this,k)}}));b.push({style:a,fn:d})},applyStyle:function(a){a.apply(this)},removeStyle:function(a){a.remove(this)},getStylesSet:function(a){if(this._.stylesDefinitions)a(this._.stylesDefinitions);
else{var d=this,b=d.config.stylesCombo_stylesSet||d.config.stylesSet;if(!1===b)a(null);else if(b instanceof Array)d._.stylesDefinitions=b,a(b);else{b||(b="default");var b=b.split(":"),c=b[0];CKEDITOR.stylesSet.addExternal(c,b[1]?b.slice(1).join(":"):CKEDITOR.getUrl("styles.js"),"");CKEDITOR.stylesSet.load(c,function(b){d._.stylesDefinitions=b[c];a(d._.stylesDefinitions)})}}}});
CKEDITOR.dom.comment=function(a,d){"string"==typeof a&&(a=(d?d.$:document).createComment(a));CKEDITOR.dom.domObject.call(this,a)};CKEDITOR.dom.comment.prototype=new CKEDITOR.dom.node;CKEDITOR.tools.extend(CKEDITOR.dom.comment.prototype,{type:CKEDITOR.NODE_COMMENT,getOuterHtml:function(){return"\x3c!--"+this.$.nodeValue+"--\x3e"}});"use strict";
(function(){var a={},d={},b;for(b in CKEDITOR.dtd.$blockLimit)b in CKEDITOR.dtd.$list||(a[b]=1);for(b in CKEDITOR.dtd.$block)b in CKEDITOR.dtd.$blockLimit||b in CKEDITOR.dtd.$empty||(d[b]=1);CKEDITOR.dom.elementPath=function(b,e){var g=null,k=null,l=[],q=b,v;e=e||b.getDocument().getBody();do if(q.type==CKEDITOR.NODE_ELEMENT){l.push(q);if(!this.lastElement&&(this.lastElement=q,q.is(CKEDITOR.dtd.$object)||"false"==q.getAttribute("contenteditable")))continue;if(q.equals(e))break;if(!k&&(v=q.getName(),
"true"==q.getAttribute("contenteditable")?k=q:!g&&d[v]&&(g=q),a[v])){if(v=!g&&"div"==v){a:{v=q.getChildren();for(var f=0,y=v.count();f<y;f++){var A=v.getItem(f);if(A.type==CKEDITOR.NODE_ELEMENT&&CKEDITOR.dtd.$block[A.getName()]){v=!0;break a}}v=!1}v=!v}v?g=q:k=q}}while(q=q.getParent());k||(k=e);this.block=g;this.blockLimit=k;this.root=e;this.elements=l}})();
CKEDITOR.dom.elementPath.prototype={compare:function(a){var d=this.elements;a=a&&a.elements;if(!a||d.length!=a.length)return!1;for(var b=0;b<d.length;b++)if(!d[b].equals(a[b]))return!1;return!0},contains:function(a,d,b){var c;"string"==typeof a&&(c=function(b){return b.getName()==a});a instanceof CKEDITOR.dom.element?c=function(b){return b.equals(a)}:CKEDITOR.tools.isArray(a)?c=function(b){return-1<CKEDITOR.tools.indexOf(a,b.getName())}:"function"==typeof a?c=a:"object"==typeof a&&(c=function(b){return b.getName()in
a});var e=this.elements,g=e.length;d&&g--;b&&(e=Array.prototype.slice.call(e,0),e.reverse());for(d=0;d<g;d++)if(c(e[d]))return e[d];return null},isContextFor:function(a){var d;return a in CKEDITOR.dtd.$block?(d=this.contains(CKEDITOR.dtd.$intermediate)||this.root.equals(this.block)&&this.block||this.blockLimit,!!d.getDtd()[a]):!0},direction:function(){return(this.block||this.blockLimit||this.root).getDirection(1)}};
CKEDITOR.dom.text=function(a,d){"string"==typeof a&&(a=(d?d.$:document).createTextNode(a));this.$=a};CKEDITOR.dom.text.prototype=new CKEDITOR.dom.node;
CKEDITOR.tools.extend(CKEDITOR.dom.text.prototype,{type:CKEDITOR.NODE_TEXT,getLength:function(){return this.$.nodeValue.length},getText:function(){return this.$.nodeValue},setText:function(a){this.$.nodeValue=a},split:function(a){var d=this.$.parentNode,b=d.childNodes.length,c=this.getLength(),e=this.getDocument(),g=new CKEDITOR.dom.text(this.$.splitText(a),e);d.childNodes.length==b&&(a>=c?(g=e.createText(""),g.insertAfter(this)):(a=e.createText(""),a.insertAfter(g),a.remove()));return g},substring:function(a,
d){return"number"!=typeof d?this.$.nodeValue.substr(a):this.$.nodeValue.substring(a,d)}});
(function(){function a(a,c,d){var g=a.serializable,k=c[d?"endContainer":"startContainer"],l=d?"endOffset":"startOffset",q=g?c.document.getById(a.startNode):a.startNode;a=g?c.document.getById(a.endNode):a.endNode;k.equals(q.getPrevious())?(c.startOffset=c.startOffset-k.getLength()-a.getPrevious().getLength(),k=a.getNext()):k.equals(a.getPrevious())&&(c.startOffset-=k.getLength(),k=a.getNext());k.equals(q.getParent())&&c[l]++;k.equals(a.getParent())&&c[l]++;c[d?"endContainer":"startContainer"]=k;return c}
CKEDITOR.dom.rangeList=function(a){if(a instanceof CKEDITOR.dom.rangeList)return a;a?a instanceof CKEDITOR.dom.range&&(a=[a]):a=[];return CKEDITOR.tools.extend(a,d)};var d={createIterator:function(){var a=this,c=CKEDITOR.dom.walker.bookmark(),d=[],g;return{getNextRange:function(k){g=void 0===g?0:g+1;var l=a[g];if(l&&1<a.length){if(!g)for(var q=a.length-1;0<=q;q--)d.unshift(a[q].createBookmark(!0));if(k)for(var v=0;a[g+v+1];){var f=l.document;k=0;q=f.getById(d[v].endNode);for(f=f.getById(d[v+1].startNode);;){q=
q.getNextSourceNode(!1);if(f.equals(q))k=1;else if(c(q)||q.type==CKEDITOR.NODE_ELEMENT&&q.isBlockBoundary())continue;break}if(!k)break;v++}for(l.moveToBookmark(d.shift());v--;)q=a[++g],q.moveToBookmark(d.shift()),l.setEnd(q.endContainer,q.endOffset)}return l}}},createBookmarks:function(b){for(var c=[],d,g=0;g<this.length;g++){c.push(d=this[g].createBookmark(b,!0));for(var k=g+1;k<this.length;k++)this[k]=a(d,this[k]),this[k]=a(d,this[k],!0)}return c},createBookmarks2:function(a){for(var c=[],d=0;d<
this.length;d++)c.push(this[d].createBookmark2(a));return c},moveToBookmarks:function(a){for(var c=0;c<this.length;c++)this[c].moveToBookmark(a[c])}}})();
(function(){function a(){return CKEDITOR.getUrl(CKEDITOR.skinName.split(",")[1]||"skins/"+CKEDITOR.skinName.split(",")[0]+"/")}function d(b){var c=CKEDITOR.skin["ua_"+b],d=CKEDITOR.env;if(c)for(var c=c.split(",").sort(function(a,b){return a>b?-1:1}),e=0,g;e<c.length;e++)if(g=c[e],d.ie&&(g.replace(/^ie/,"")==d.version||d.quirks&&"iequirks"==g)&&(g="ie"),d[g]){b+="_"+c[e];break}return CKEDITOR.getUrl(a()+b+".css")}function b(a,b){g[a]||(CKEDITOR.document.appendStyleSheet(d(a)),g[a]=1);b&&b()}function c(a){var b=
a.getById(k);b||(b=a.getHead().append("style"),b.setAttribute("id",k),b.setAttribute("type","text/css"));return b}function e(a,b,c){var d,e,g;if(CKEDITOR.env.webkit)for(b=b.split("}").slice(0,-1),e=0;e<b.length;e++)b[e]=b[e].split("{");for(var k=0;k<a.length;k++)if(CKEDITOR.env.webkit)for(e=0;e<b.length;e++){g=b[e][1];for(d=0;d<c.length;d++)g=g.replace(c[d][0],c[d][1]);a[k].$.sheet.addRule(b[e][0],g)}else{g=b;for(d=0;d<c.length;d++)g=g.replace(c[d][0],c[d][1]);CKEDITOR.env.ie&&11>CKEDITOR.env.version?
a[k].$.styleSheet.cssText+=g:a[k].$.innerHTML+=g}}var g={};CKEDITOR.skin={path:a,loadPart:function(c,d){CKEDITOR.skin.name!=CKEDITOR.skinName.split(",")[0]?CKEDITOR.scriptLoader.load(CKEDITOR.getUrl(a()+"skin.js"),function(){b(c,d)}):b(c,d)},getPath:function(a){return CKEDITOR.getUrl(d(a))},icons:{},addIcon:function(a,b,c,d){a=a.toLowerCase();this.icons[a]||(this.icons[a]={path:b,offset:c||0,bgsize:d||"16px"})},getIconStyle:function(a,b,c,d,e){var g;a&&(a=a.toLowerCase(),b&&(g=this.icons[a+"-rtl"]),
g||(g=this.icons[a]));a=c||g&&g.path||"";d=d||g&&g.offset;e=e||g&&g.bgsize||"16px";a&&(a=a.replace(/'/g,"\\'"));return a&&"background-image:url('"+CKEDITOR.getUrl(a)+"');background-position:0 "+d+"px;background-size:"+e+";"}};CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{getUiColor:function(){return this.uiColor},setUiColor:function(a){var b=c(CKEDITOR.document);return(this.setUiColor=function(a){this.uiColor=a;var c=CKEDITOR.skin.chameleon,d="",g="";"function"==typeof c&&(d=c(this,"editor"),g=
c(this,"panel"));a=[[q,a]];e([b],d,a);e(l,g,a)}).call(this,a)}});var k="cke_ui_color",l=[],q=/\$color/g;CKEDITOR.on("instanceLoaded",function(a){if(!CKEDITOR.env.ie||!CKEDITOR.env.quirks){var b=a.editor;a=function(a){a=(a.data[0]||a.data).element.getElementsByTag("iframe").getItem(0).getFrameDocument();if(!a.getById("cke_ui_color")){a=c(a);l.push(a);var d=b.getUiColor();d&&e([a],CKEDITOR.skin.chameleon(b,"panel"),[[q,d]])}};b.on("panelShow",a);b.on("menuShow",a);b.config.uiColor&&b.setUiColor(b.config.uiColor)}})})();
(function(){if(CKEDITOR.env.webkit)CKEDITOR.env.hc=!1;else{var a=CKEDITOR.dom.element.createFromHtml('\x3cdiv style\x3d"width:0;height:0;position:absolute;left:-10000px;border:1px solid;border-color:red blue"\x3e\x3c/div\x3e',CKEDITOR.document);a.appendTo(CKEDITOR.document.getHead());try{var d=a.getComputedStyle("border-top-color"),b=a.getComputedStyle("border-right-color");CKEDITOR.env.hc=!(!d||d!=b)}catch(c){CKEDITOR.env.hc=!1}a.remove()}CKEDITOR.env.hc&&(CKEDITOR.env.cssClass+=" cke_hc");CKEDITOR.document.appendStyleText(".cke{visibility:hidden;}");
CKEDITOR.status="loaded";CKEDITOR.fireOnce("loaded");if(a=CKEDITOR._.pending)for(delete CKEDITOR._.pending,d=0;d<a.length;d++)CKEDITOR.editor.prototype.constructor.apply(a[d][0],a[d][1]),CKEDITOR.add(a[d][0])})();/*
 Copyright (c) 2003-2016, CKSource - Frederico Knabben. All rights reserved.
 For licensing, see LICENSE.md or http://ckeditor.com/license
*/
CKEDITOR.skin.name="moono";CKEDITOR.skin.ua_editor="ie,iequirks,ie7,ie8,gecko";CKEDITOR.skin.ua_dialog="ie,iequirks,ie7,ie8";
CKEDITOR.skin.chameleon=function(){var b=function(){return function(b,e){for(var a=b.match(/[^#]./g),c=0;3>c;c++){var f=c,d;d=parseInt(a[c],16);d=("0"+(0>e?0|d*(1+e):0|d+(255-d)*e).toString(16)).slice(-2);a[f]=d}return"#"+a.join("")}}(),c=function(){var b=new CKEDITOR.template("background:#{to};background-image:linear-gradient(to bottom,{from},{to});filter:progid:DXImageTransform.Microsoft.gradient(gradientType\x3d0,startColorstr\x3d'{from}',endColorstr\x3d'{to}');");return function(c,a){return b.output({from:c,
to:a})}}(),f={editor:new CKEDITOR.template("{id}.cke_chrome [border-color:{defaultBorder};] {id} .cke_top [ {defaultGradient}border-bottom-color:{defaultBorder};] {id} .cke_bottom [{defaultGradient}border-top-color:{defaultBorder};] {id} .cke_resizer [border-right-color:{ckeResizer}] {id} .cke_dialog_title [{defaultGradient}border-bottom-color:{defaultBorder};] {id} .cke_dialog_footer [{defaultGradient}outline-color:{defaultBorder};border-top-color:{defaultBorder};] {id} .cke_dialog_tab [{lightGradient}border-color:{defaultBorder};] {id} .cke_dialog_tab:hover [{mediumGradient}] {id} .cke_dialog_contents [border-top-color:{defaultBorder};] {id} .cke_dialog_tab_selected, {id} .cke_dialog_tab_selected:hover [background:{dialogTabSelected};border-bottom-color:{dialogTabSelectedBorder};] {id} .cke_dialog_body [background:{dialogBody};border-color:{defaultBorder};] {id} .cke_toolgroup [{lightGradient}border-color:{defaultBorder};] {id} a.cke_button_off:hover, {id} a.cke_button_off:focus, {id} a.cke_button_off:active [{mediumGradient}] {id} .cke_button_on [{ckeButtonOn}] {id} .cke_toolbar_separator [background-color: {ckeToolbarSeparator};] {id} .cke_combo_button [border-color:{defaultBorder};{lightGradient}] {id} a.cke_combo_button:hover, {id} a.cke_combo_button:focus, {id} .cke_combo_on a.cke_combo_button [border-color:{defaultBorder};{mediumGradient}] {id} .cke_path_item [color:{elementsPathColor};] {id} a.cke_path_item:hover, {id} a.cke_path_item:focus, {id} a.cke_path_item:active [background-color:{elementsPathBg};] {id}.cke_panel [border-color:{defaultBorder};] "),
panel:new CKEDITOR.template(".cke_panel_grouptitle [{lightGradient}border-color:{defaultBorder};] .cke_menubutton_icon [background-color:{menubuttonIcon};] .cke_menubutton:hover .cke_menubutton_icon, .cke_menubutton:focus .cke_menubutton_icon, .cke_menubutton:active .cke_menubutton_icon [background-color:{menubuttonIconHover};] .cke_menuseparator [background-color:{menubuttonIcon};] a:hover.cke_colorbox, a:focus.cke_colorbox, a:active.cke_colorbox [border-color:{defaultBorder};] a:hover.cke_colorauto, a:hover.cke_colormore, a:focus.cke_colorauto, a:focus.cke_colormore, a:active.cke_colorauto, a:active.cke_colormore [background-color:{ckeColorauto};border-color:{defaultBorder};] ")};
return function(g,e){var a=g.uiColor,a={id:"."+g.id,defaultBorder:b(a,-.1),defaultGradient:c(b(a,.9),a),lightGradient:c(b(a,1),b(a,.7)),mediumGradient:c(b(a,.8),b(a,.5)),ckeButtonOn:c(b(a,.6),b(a,.7)),ckeResizer:b(a,-.4),ckeToolbarSeparator:b(a,.5),ckeColorauto:b(a,.8),dialogBody:b(a,.7),dialogTabSelected:c("#FFFFFF","#FFFFFF"),dialogTabSelectedBorder:"#FFF",elementsPathColor:b(a,-.6),elementsPathBg:a,menubuttonIcon:b(a,.5),menubuttonIconHover:b(a,.3)};return f[e].output(a).replace(/\[/g,"{").replace(/\]/g,
"}")}}();CKEDITOR.plugins.add("dialogui",{onLoad:function(){var h=function(b){this._||(this._={});this._["default"]=this._.initValue=b["default"]||"";this._.required=b.required||!1;for(var a=[this._],d=1;d<arguments.length;d++)a.push(arguments[d]);a.push(!0);CKEDITOR.tools.extend.apply(CKEDITOR.tools,a);return this._},v={build:function(b,a,d){return new CKEDITOR.ui.dialog.textInput(b,a,d)}},n={build:function(b,a,d){return new CKEDITOR.ui.dialog[a.type](b,a,d)}},q={isChanged:function(){return this.getValue()!=
this.getInitValue()},reset:function(b){this.setValue(this.getInitValue(),b)},setInitValue:function(){this._.initValue=this.getValue()},resetInitValue:function(){this._.initValue=this._["default"]},getInitValue:function(){return this._.initValue}},r=CKEDITOR.tools.extend({},CKEDITOR.ui.dialog.uiElement.prototype.eventProcessors,{onChange:function(b,a){this._.domOnChangeRegistered||(b.on("load",function(){this.getInputElement().on("change",function(){b.parts.dialog.isVisible()&&this.fire("change",{value:this.getValue()})},
this)},this),this._.domOnChangeRegistered=!0);this.on("change",a)}},!0),x=/^on([A-Z]\w+)/,t=function(b){for(var a in b)(x.test(a)||"title"==a||"type"==a)&&delete b[a];return b},w=function(b){b=b.data.getKeystroke();b==CKEDITOR.SHIFT+CKEDITOR.ALT+36?this.setDirectionMarker("ltr"):b==CKEDITOR.SHIFT+CKEDITOR.ALT+35&&this.setDirectionMarker("rtl")};CKEDITOR.tools.extend(CKEDITOR.ui.dialog,{labeledElement:function(b,a,d,f){if(!(4>arguments.length)){var c=h.call(this,a);c.labelId=CKEDITOR.tools.getNextId()+
"_label";this._.children=[];var e={role:a.role||"presentation"};a.includeLabel&&(e["aria-labelledby"]=c.labelId);CKEDITOR.ui.dialog.uiElement.call(this,b,a,d,"div",null,e,function(){var e=[],g=a.required?" cke_required":"";"horizontal"!=a.labelLayout?e.push('\x3clabel class\x3d"cke_dialog_ui_labeled_label'+g+'" ',' id\x3d"'+c.labelId+'"',c.inputId?' for\x3d"'+c.inputId+'"':"",(a.labelStyle?' style\x3d"'+a.labelStyle+'"':"")+"\x3e",a.label,"\x3c/label\x3e",'\x3cdiv class\x3d"cke_dialog_ui_labeled_content"',
a.controlStyle?' style\x3d"'+a.controlStyle+'"':"",' role\x3d"presentation"\x3e',f.call(this,b,a),"\x3c/div\x3e"):(g={type:"hbox",widths:a.widths,padding:0,children:[{type:"html",html:'\x3clabel class\x3d"cke_dialog_ui_labeled_label'+g+'" id\x3d"'+c.labelId+'" for\x3d"'+c.inputId+'"'+(a.labelStyle?' style\x3d"'+a.labelStyle+'"':"")+"\x3e"+CKEDITOR.tools.htmlEncode(a.label)+"\x3c/label\x3e"},{type:"html",html:'\x3cspan class\x3d"cke_dialog_ui_labeled_content"'+(a.controlStyle?' style\x3d"'+a.controlStyle+
'"':"")+"\x3e"+f.call(this,b,a)+"\x3c/span\x3e"}]},CKEDITOR.dialog._.uiElementBuilders.hbox.build(b,g,e));return e.join("")})}},textInput:function(b,a,d){if(!(3>arguments.length)){h.call(this,a);var f=this._.inputId=CKEDITOR.tools.getNextId()+"_textInput",c={"class":"cke_dialog_ui_input_"+a.type,id:f,type:a.type};a.validate&&(this.validate=a.validate);a.maxLength&&(c.maxlength=a.maxLength);a.size&&(c.size=a.size);a.inputStyle&&(c.style=a.inputStyle);var e=this,m=!1;b.on("load",function(){e.getInputElement().on("keydown",
function(a){13==a.data.getKeystroke()&&(m=!0)});e.getInputElement().on("keyup",function(a){13==a.data.getKeystroke()&&m&&(b.getButton("ok")&&setTimeout(function(){b.getButton("ok").click()},0),m=!1);e.bidi&&w.call(e,a)},null,null,1E3)});CKEDITOR.ui.dialog.labeledElement.call(this,b,a,d,function(){var b=['\x3cdiv class\x3d"cke_dialog_ui_input_',a.type,'" role\x3d"presentation"'];a.width&&b.push('style\x3d"width:'+a.width+'" ');b.push("\x3e\x3cinput ");c["aria-labelledby"]=this._.labelId;this._.required&&
(c["aria-required"]=this._.required);for(var e in c)b.push(e+'\x3d"'+c[e]+'" ');b.push(" /\x3e\x3c/div\x3e");return b.join("")})}},textarea:function(b,a,d){if(!(3>arguments.length)){h.call(this,a);var f=this,c=this._.inputId=CKEDITOR.tools.getNextId()+"_textarea",e={};a.validate&&(this.validate=a.validate);e.rows=a.rows||5;e.cols=a.cols||20;e["class"]="cke_dialog_ui_input_textarea "+(a["class"]||"");"undefined"!=typeof a.inputStyle&&(e.style=a.inputStyle);a.dir&&(e.dir=a.dir);if(f.bidi)b.on("load",
function(){f.getInputElement().on("keyup",w)},f);CKEDITOR.ui.dialog.labeledElement.call(this,b,a,d,function(){e["aria-labelledby"]=this._.labelId;this._.required&&(e["aria-required"]=this._.required);var a=['\x3cdiv class\x3d"cke_dialog_ui_input_textarea" role\x3d"presentation"\x3e\x3ctextarea id\x3d"',c,'" '],b;for(b in e)a.push(b+'\x3d"'+CKEDITOR.tools.htmlEncode(e[b])+'" ');a.push("\x3e",CKEDITOR.tools.htmlEncode(f._["default"]),"\x3c/textarea\x3e\x3c/div\x3e");return a.join("")})}},checkbox:function(b,
a,d){if(!(3>arguments.length)){var f=h.call(this,a,{"default":!!a["default"]});a.validate&&(this.validate=a.validate);CKEDITOR.ui.dialog.uiElement.call(this,b,a,d,"span",null,null,function(){var c=CKEDITOR.tools.extend({},a,{id:a.id?a.id+"_checkbox":CKEDITOR.tools.getNextId()+"_checkbox"},!0),e=[],d=CKEDITOR.tools.getNextId()+"_label",g={"class":"cke_dialog_ui_checkbox_input",type:"checkbox","aria-labelledby":d};t(c);a["default"]&&(g.checked="checked");"undefined"!=typeof c.inputStyle&&(c.style=c.inputStyle);
f.checkbox=new CKEDITOR.ui.dialog.uiElement(b,c,e,"input",null,g);e.push(' \x3clabel id\x3d"',d,'" for\x3d"',g.id,'"'+(a.labelStyle?' style\x3d"'+a.labelStyle+'"':"")+"\x3e",CKEDITOR.tools.htmlEncode(a.label),"\x3c/label\x3e");return e.join("")})}},radio:function(b,a,d){if(!(3>arguments.length)){h.call(this,a);this._["default"]||(this._["default"]=this._.initValue=a.items[0][1]);a.validate&&(this.validate=a.validate);var f=[],c=this;a.role="radiogroup";a.includeLabel=!0;CKEDITOR.ui.dialog.labeledElement.call(this,
b,a,d,function(){for(var e=[],d=[],g=(a.id?a.id:CKEDITOR.tools.getNextId())+"_radio",k=0;k<a.items.length;k++){var l=a.items[k],h=void 0!==l[2]?l[2]:l[0],n=void 0!==l[1]?l[1]:l[0],p=CKEDITOR.tools.getNextId()+"_radio_input",q=p+"_label",p=CKEDITOR.tools.extend({},a,{id:p,title:null,type:null},!0),h=CKEDITOR.tools.extend({},p,{title:h},!0),r={type:"radio","class":"cke_dialog_ui_radio_input",name:g,value:n,"aria-labelledby":q},u=[];c._["default"]==n&&(r.checked="checked");t(p);t(h);"undefined"!=typeof p.inputStyle&&
(p.style=p.inputStyle);p.keyboardFocusable=!0;f.push(new CKEDITOR.ui.dialog.uiElement(b,p,u,"input",null,r));u.push(" ");new CKEDITOR.ui.dialog.uiElement(b,h,u,"label",null,{id:q,"for":r.id},l[0]);e.push(u.join(""))}new CKEDITOR.ui.dialog.hbox(b,f,e,d);return d.join("")});this._.children=f}},button:function(b,a,d){if(arguments.length){"function"==typeof a&&(a=a(b.getParentEditor()));h.call(this,a,{disabled:a.disabled||!1});CKEDITOR.event.implementOn(this);var f=this;b.on("load",function(){var a=this.getElement();
(function(){a.on("click",function(a){f.click();a.data.preventDefault()});a.on("keydown",function(a){a.data.getKeystroke()in{32:1}&&(f.click(),a.data.preventDefault())})})();a.unselectable()},this);var c=CKEDITOR.tools.extend({},a);delete c.style;var e=CKEDITOR.tools.getNextId()+"_label";CKEDITOR.ui.dialog.uiElement.call(this,b,c,d,"a",null,{style:a.style,href:"javascript:void(0)",title:a.label,hidefocus:"true","class":a["class"],role:"button","aria-labelledby":e},'\x3cspan id\x3d"'+e+'" class\x3d"cke_dialog_ui_button"\x3e'+
CKEDITOR.tools.htmlEncode(a.label)+"\x3c/span\x3e")}},select:function(b,a,d){if(!(3>arguments.length)){var f=h.call(this,a);a.validate&&(this.validate=a.validate);f.inputId=CKEDITOR.tools.getNextId()+"_select";CKEDITOR.ui.dialog.labeledElement.call(this,b,a,d,function(){var c=CKEDITOR.tools.extend({},a,{id:a.id?a.id+"_select":CKEDITOR.tools.getNextId()+"_select"},!0),e=[],d=[],g={id:f.inputId,"class":"cke_dialog_ui_input_select","aria-labelledby":this._.labelId};e.push('\x3cdiv class\x3d"cke_dialog_ui_input_',
a.type,'" role\x3d"presentation"');a.width&&e.push('style\x3d"width:'+a.width+'" ');e.push("\x3e");void 0!==a.size&&(g.size=a.size);void 0!==a.multiple&&(g.multiple=a.multiple);t(c);for(var k=0,l;k<a.items.length&&(l=a.items[k]);k++)d.push('\x3coption value\x3d"',CKEDITOR.tools.htmlEncode(void 0!==l[1]?l[1]:l[0]).replace(/"/g,"\x26quot;"),'" /\x3e ',CKEDITOR.tools.htmlEncode(l[0]));"undefined"!=typeof c.inputStyle&&(c.style=c.inputStyle);f.select=new CKEDITOR.ui.dialog.uiElement(b,c,e,"select",null,
g,d.join(""));e.push("\x3c/div\x3e");return e.join("")})}},file:function(b,a,d){if(!(3>arguments.length)){void 0===a["default"]&&(a["default"]="");var f=CKEDITOR.tools.extend(h.call(this,a),{definition:a,buttons:[]});a.validate&&(this.validate=a.validate);b.on("load",function(){CKEDITOR.document.getById(f.frameId).getParent().addClass("cke_dialog_ui_input_file")});CKEDITOR.ui.dialog.labeledElement.call(this,b,a,d,function(){f.frameId=CKEDITOR.tools.getNextId()+"_fileInput";var b=['\x3ciframe frameborder\x3d"0" allowtransparency\x3d"0" class\x3d"cke_dialog_ui_input_file" role\x3d"presentation" id\x3d"',
f.frameId,'" title\x3d"',a.label,'" src\x3d"javascript:void('];b.push(CKEDITOR.env.ie?"(function(){"+encodeURIComponent("document.open();("+CKEDITOR.tools.fixDomain+")();document.close();")+"})()":"0");b.push(')"\x3e\x3c/iframe\x3e');return b.join("")})}},fileButton:function(b,a,d){var f=this;if(!(3>arguments.length)){h.call(this,a);a.validate&&(this.validate=a.validate);var c=CKEDITOR.tools.extend({},a),e=c.onClick;c.className=(c.className?c.className+" ":"")+"cke_dialog_ui_button";c.onClick=function(c){var d=
a["for"];e&&!1===e.call(this,c)||(b.getContentElement(d[0],d[1]).submit(),this.disable())};b.on("load",function(){b.getContentElement(a["for"][0],a["for"][1])._.buttons.push(f)});CKEDITOR.ui.dialog.button.call(this,b,c,d)}},html:function(){var b=/^\s*<[\w:]+\s+([^>]*)?>/,a=/^(\s*<[\w:]+(?:\s+[^>]*)?)((?:.|\r|\n)+)$/,d=/\/$/;return function(f,c,e){if(!(3>arguments.length)){var m=[],g=c.html;"\x3c"!=g.charAt(0)&&(g="\x3cspan\x3e"+g+"\x3c/span\x3e");var k=c.focus;if(k){var l=this.focus;this.focus=function(){("function"==
typeof k?k:l).call(this);this.fire("focus")};c.isFocusable&&(this.isFocusable=this.isFocusable);this.keyboardFocusable=!0}CKEDITOR.ui.dialog.uiElement.call(this,f,c,m,"span",null,null,"");m=m.join("").match(b);g=g.match(a)||["","",""];d.test(g[1])&&(g[1]=g[1].slice(0,-1),g[2]="/"+g[2]);e.push([g[1]," ",m[1]||"",g[2]].join(""))}}}(),fieldset:function(b,a,d,f,c){var e=c.label;this._={children:a};CKEDITOR.ui.dialog.uiElement.call(this,b,c,f,"fieldset",null,null,function(){var a=[];e&&a.push("\x3clegend"+
(c.labelStyle?' style\x3d"'+c.labelStyle+'"':"")+"\x3e"+e+"\x3c/legend\x3e");for(var b=0;b<d.length;b++)a.push(d[b]);return a.join("")})}},!0);CKEDITOR.ui.dialog.html.prototype=new CKEDITOR.ui.dialog.uiElement;CKEDITOR.ui.dialog.labeledElement.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{setLabel:function(b){var a=CKEDITOR.document.getById(this._.labelId);1>a.getChildCount()?(new CKEDITOR.dom.text(b,CKEDITOR.document)).appendTo(a):a.getChild(0).$.nodeValue=b;return this},getLabel:function(){var b=
CKEDITOR.document.getById(this._.labelId);return!b||1>b.getChildCount()?"":b.getChild(0).getText()},eventProcessors:r},!0);CKEDITOR.ui.dialog.button.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{click:function(){return this._.disabled?!1:this.fire("click",{dialog:this._.dialog})},enable:function(){this._.disabled=!1;var b=this.getElement();b&&b.removeClass("cke_disabled")},disable:function(){this._.disabled=!0;this.getElement().addClass("cke_disabled")},isVisible:function(){return this.getElement().getFirst().isVisible()},
isEnabled:function(){return!this._.disabled},eventProcessors:CKEDITOR.tools.extend({},CKEDITOR.ui.dialog.uiElement.prototype.eventProcessors,{onClick:function(b,a){this.on("click",function(){a.apply(this,arguments)})}},!0),accessKeyUp:function(){this.click()},accessKeyDown:function(){this.focus()},keyboardFocusable:!0},!0);CKEDITOR.ui.dialog.textInput.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.labeledElement,{getInputElement:function(){return CKEDITOR.document.getById(this._.inputId)},
focus:function(){var b=this.selectParentTab();setTimeout(function(){var a=b.getInputElement();a&&a.$.focus()},0)},select:function(){var b=this.selectParentTab();setTimeout(function(){var a=b.getInputElement();a&&(a.$.focus(),a.$.select())},0)},accessKeyUp:function(){this.select()},setValue:function(b){if(this.bidi){var a=b&&b.charAt(0);(a="‪"==a?"ltr":"‫"==a?"rtl":null)&&(b=b.slice(1));this.setDirectionMarker(a)}b||(b="");return CKEDITOR.ui.dialog.uiElement.prototype.setValue.apply(this,arguments)},
getValue:function(){var b=CKEDITOR.ui.dialog.uiElement.prototype.getValue.call(this);if(this.bidi&&b){var a=this.getDirectionMarker();a&&(b=("ltr"==a?"‪":"‫")+b)}return b},setDirectionMarker:function(b){var a=this.getInputElement();b?a.setAttributes({dir:b,"data-cke-dir-marker":b}):this.getDirectionMarker()&&a.removeAttributes(["dir","data-cke-dir-marker"])},getDirectionMarker:function(){return this.getInputElement().data("cke-dir-marker")},keyboardFocusable:!0},q,!0);CKEDITOR.ui.dialog.textarea.prototype=
new CKEDITOR.ui.dialog.textInput;CKEDITOR.ui.dialog.select.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.labeledElement,{getInputElement:function(){return this._.select.getElement()},add:function(b,a,d){var f=new CKEDITOR.dom.element("option",this.getDialog().getParentEditor().document),c=this.getInputElement().$;f.$.text=b;f.$.value=void 0===a||null===a?b:a;void 0===d||null===d?CKEDITOR.env.ie?c.add(f.$):c.add(f.$,null):c.add(f.$,d);return this},remove:function(b){this.getInputElement().$.remove(b);
return this},clear:function(){for(var b=this.getInputElement().$;0<b.length;)b.remove(0);return this},keyboardFocusable:!0},q,!0);CKEDITOR.ui.dialog.checkbox.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{getInputElement:function(){return this._.checkbox.getElement()},setValue:function(b,a){this.getInputElement().$.checked=b;!a&&this.fire("change",{value:b})},getValue:function(){return this.getInputElement().$.checked},accessKeyUp:function(){this.setValue(!this.getValue())},eventProcessors:{onChange:function(b,
a){if(!CKEDITOR.env.ie||8<CKEDITOR.env.version)return r.onChange.apply(this,arguments);b.on("load",function(){var a=this._.checkbox.getElement();a.on("propertychange",function(b){b=b.data.$;"checked"==b.propertyName&&this.fire("change",{value:a.$.checked})},this)},this);this.on("change",a);return null}},keyboardFocusable:!0},q,!0);CKEDITOR.ui.dialog.radio.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{setValue:function(b,a){for(var d=this._.children,f,c=0;c<d.length&&(f=d[c]);c++)f.getElement().$.checked=
f.getValue()==b;!a&&this.fire("change",{value:b})},getValue:function(){for(var b=this._.children,a=0;a<b.length;a++)if(b[a].getElement().$.checked)return b[a].getValue();return null},accessKeyUp:function(){var b=this._.children,a;for(a=0;a<b.length;a++)if(b[a].getElement().$.checked){b[a].getElement().focus();return}b[0].getElement().focus()},eventProcessors:{onChange:function(b,a){if(!CKEDITOR.env.ie||8<CKEDITOR.env.version)return r.onChange.apply(this,arguments);b.on("load",function(){for(var a=
this._.children,b=this,c=0;c<a.length;c++)a[c].getElement().on("propertychange",function(a){a=a.data.$;"checked"==a.propertyName&&this.$.checked&&b.fire("change",{value:this.getAttribute("value")})})},this);this.on("change",a);return null}}},q,!0);CKEDITOR.ui.dialog.file.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.labeledElement,q,{getInputElement:function(){var b=CKEDITOR.document.getById(this._.frameId).getFrameDocument();return 0<b.$.forms.length?new CKEDITOR.dom.element(b.$.forms[0].elements[0]):
this.getElement()},submit:function(){this.getInputElement().getParent().$.submit();return this},getAction:function(){return this.getInputElement().getParent().$.action},registerEvents:function(b){var a=/^on([A-Z]\w+)/,d,f=function(a,b,c,d){a.on("formLoaded",function(){a.getInputElement().on(c,d,a)})},c;for(c in b)if(d=c.match(a))this.eventProcessors[c]?this.eventProcessors[c].call(this,this._.dialog,b[c]):f(this,this._.dialog,d[1].toLowerCase(),b[c]);return this},reset:function(){function b(){d.$.open();
var b="";f.size&&(b=f.size-(CKEDITOR.env.ie?7:0));var h=a.frameId+"_input";d.$.write(['\x3chtml dir\x3d"'+g+'" lang\x3d"'+k+'"\x3e\x3chead\x3e\x3ctitle\x3e\x3c/title\x3e\x3c/head\x3e\x3cbody style\x3d"margin: 0; overflow: hidden; background: transparent;"\x3e','\x3cform enctype\x3d"multipart/form-data" method\x3d"POST" dir\x3d"'+g+'" lang\x3d"'+k+'" action\x3d"',CKEDITOR.tools.htmlEncode(f.action),'"\x3e\x3clabel id\x3d"',a.labelId,'" for\x3d"',h,'" style\x3d"display:none"\x3e',CKEDITOR.tools.htmlEncode(f.label),
'\x3c/label\x3e\x3cinput style\x3d"width:100%" id\x3d"',h,'" aria-labelledby\x3d"',a.labelId,'" type\x3d"file" name\x3d"',CKEDITOR.tools.htmlEncode(f.id||"cke_upload"),'" size\x3d"',CKEDITOR.tools.htmlEncode(0<b?b:""),'" /\x3e\x3c/form\x3e\x3c/body\x3e\x3c/html\x3e\x3cscript\x3e',CKEDITOR.env.ie?"("+CKEDITOR.tools.fixDomain+")();":"","window.parent.CKEDITOR.tools.callFunction("+e+");","window.onbeforeunload \x3d function() {window.parent.CKEDITOR.tools.callFunction("+m+")}","\x3c/script\x3e"].join(""));
d.$.close();for(b=0;b<c.length;b++)c[b].enable()}var a=this._,d=CKEDITOR.document.getById(a.frameId).getFrameDocument(),f=a.definition,c=a.buttons,e=this.formLoadedNumber,m=this.formUnloadNumber,g=a.dialog._.editor.lang.dir,k=a.dialog._.editor.langCode;e||(e=this.formLoadedNumber=CKEDITOR.tools.addFunction(function(){this.fire("formLoaded")},this),m=this.formUnloadNumber=CKEDITOR.tools.addFunction(function(){this.getInputElement().clearCustomData()},this),this.getDialog()._.editor.on("destroy",function(){CKEDITOR.tools.removeFunction(e);
CKEDITOR.tools.removeFunction(m)}));CKEDITOR.env.gecko?setTimeout(b,500):b()},getValue:function(){return this.getInputElement().$.value||""},setInitValue:function(){this._.initValue=""},eventProcessors:{onChange:function(b,a){this._.domOnChangeRegistered||(this.on("formLoaded",function(){this.getInputElement().on("change",function(){this.fire("change",{value:this.getValue()})},this)},this),this._.domOnChangeRegistered=!0);this.on("change",a)}},keyboardFocusable:!0},!0);CKEDITOR.ui.dialog.fileButton.prototype=
new CKEDITOR.ui.dialog.button;CKEDITOR.ui.dialog.fieldset.prototype=CKEDITOR.tools.clone(CKEDITOR.ui.dialog.hbox.prototype);CKEDITOR.dialog.addUIElement("text",v);CKEDITOR.dialog.addUIElement("password",v);CKEDITOR.dialog.addUIElement("textarea",n);CKEDITOR.dialog.addUIElement("checkbox",n);CKEDITOR.dialog.addUIElement("radio",n);CKEDITOR.dialog.addUIElement("button",n);CKEDITOR.dialog.addUIElement("select",n);CKEDITOR.dialog.addUIElement("file",n);CKEDITOR.dialog.addUIElement("fileButton",n);CKEDITOR.dialog.addUIElement("html",
n);CKEDITOR.dialog.addUIElement("fieldset",{build:function(b,a,d){for(var f=a.children,c,e=[],h=[],g=0;g<f.length&&(c=f[g]);g++){var k=[];e.push(k);h.push(CKEDITOR.dialog._.uiElementBuilders[c.type].build(b,c,k))}return new CKEDITOR.ui.dialog[a.type](b,h,e,d,a)}})}});CKEDITOR.DIALOG_RESIZE_NONE=0;CKEDITOR.DIALOG_RESIZE_WIDTH=1;CKEDITOR.DIALOG_RESIZE_HEIGHT=2;CKEDITOR.DIALOG_RESIZE_BOTH=3;CKEDITOR.DIALOG_STATE_IDLE=1;CKEDITOR.DIALOG_STATE_BUSY=2;
(function(){function x(){for(var a=this._.tabIdList.length,b=CKEDITOR.tools.indexOf(this._.tabIdList,this._.currentTabId)+a,c=b-1;c>b-a;c--)if(this._.tabs[this._.tabIdList[c%a]][0].$.offsetHeight)return this._.tabIdList[c%a];return null}function A(){for(var a=this._.tabIdList.length,b=CKEDITOR.tools.indexOf(this._.tabIdList,this._.currentTabId),c=b+1;c<b+a;c++)if(this._.tabs[this._.tabIdList[c%a]][0].$.offsetHeight)return this._.tabIdList[c%a];return null}function K(a,b){for(var c=a.$.getElementsByTagName("input"),
d=0,e=c.length;d<e;d++){var f=new CKEDITOR.dom.element(c[d]);"text"==f.getAttribute("type").toLowerCase()&&(b?(f.setAttribute("value",f.getCustomData("fake_value")||""),f.removeCustomData("fake_value")):(f.setCustomData("fake_value",f.getAttribute("value")),f.setAttribute("value","")))}}function T(a,b){var c=this.getInputElement();c&&(a?c.removeAttribute("aria-invalid"):c.setAttribute("aria-invalid",!0));a||(this.select?this.select():this.focus());b&&alert(b);this.fire("validated",{valid:a,msg:b})}
function U(){var a=this.getInputElement();a&&a.removeAttribute("aria-invalid")}function V(a){var b=CKEDITOR.dom.element.createFromHtml(CKEDITOR.addTemplate("dialog",W).output({id:CKEDITOR.tools.getNextNumber(),editorId:a.id,langDir:a.lang.dir,langCode:a.langCode,editorDialogClass:"cke_editor_"+a.name.replace(/\./g,"\\.")+"_dialog",closeTitle:a.lang.common.close,hidpi:CKEDITOR.env.hidpi?"cke_hidpi":""})),c=b.getChild([0,0,0,0,0]),d=c.getChild(0),e=c.getChild(1);a.plugins.clipboard&&CKEDITOR.plugins.clipboard.preventDefaultDropOnElement(c);
!CKEDITOR.env.ie||CKEDITOR.env.quirks||CKEDITOR.env.edge||(a="javascript:void(function(){"+encodeURIComponent("document.open();("+CKEDITOR.tools.fixDomain+")();document.close();")+"}())",CKEDITOR.dom.element.createFromHtml('\x3ciframe frameBorder\x3d"0" class\x3d"cke_iframe_shim" src\x3d"'+a+'" tabIndex\x3d"-1"\x3e\x3c/iframe\x3e').appendTo(c.getParent()));d.unselectable();e.unselectable();return{element:b,parts:{dialog:b.getChild(0),title:d,close:e,tabs:c.getChild(2),contents:c.getChild([3,0,0,0]),
footer:c.getChild([3,0,1,0])}}}function L(a,b,c){this.element=b;this.focusIndex=c;this.tabIndex=0;this.isFocusable=function(){return!b.getAttribute("disabled")&&b.isVisible()};this.focus=function(){a._.currentFocusIndex=this.focusIndex;this.element.focus()};b.on("keydown",function(a){a.data.getKeystroke()in{32:1,13:1}&&this.fire("click")});b.on("focus",function(){this.fire("mouseover")});b.on("blur",function(){this.fire("mouseout")})}function X(a){function b(){a.layout()}var c=CKEDITOR.document.getWindow();
c.on("resize",b);a.on("hide",function(){c.removeListener("resize",b)})}function M(a,b){this._={dialog:a};CKEDITOR.tools.extend(this,b)}function Y(a){function b(b){var c=a.getSize(),k=CKEDITOR.document.getWindow().getViewPaneSize(),q=b.data.$.screenX,n=b.data.$.screenY,r=q-d.x,l=n-d.y;d={x:q,y:n};e.x+=r;e.y+=l;a.move(e.x+h[3]<g?-h[3]:e.x-h[1]>k.width-c.width-g?k.width-c.width+("rtl"==f.lang.dir?0:h[1]):e.x,e.y+h[0]<g?-h[0]:e.y-h[2]>k.height-c.height-g?k.height-c.height+h[2]:e.y,1);b.data.preventDefault()}
function c(){CKEDITOR.document.removeListener("mousemove",b);CKEDITOR.document.removeListener("mouseup",c);if(CKEDITOR.env.ie6Compat){var a=u.getChild(0).getFrameDocument();a.removeListener("mousemove",b);a.removeListener("mouseup",c)}}var d=null,e=null,f=a.getParentEditor(),g=f.config.dialog_magnetDistance,h=CKEDITOR.skin.margins||[0,0,0,0];"undefined"==typeof g&&(g=20);a.parts.title.on("mousedown",function(g){d={x:g.data.$.screenX,y:g.data.$.screenY};CKEDITOR.document.on("mousemove",b);CKEDITOR.document.on("mouseup",
c);e=a.getPosition();if(CKEDITOR.env.ie6Compat){var f=u.getChild(0).getFrameDocument();f.on("mousemove",b);f.on("mouseup",c)}g.data.preventDefault()},a)}function Z(a){function b(b){var c="rtl"==f.lang.dir,n=k.width,q=k.height,G=n+(b.data.$.screenX-m.x)*(c?-1:1)*(a._.moved?1:2),H=q+(b.data.$.screenY-m.y)*(a._.moved?1:2),B=a._.element.getFirst(),B=c&&B.getComputedStyle("right"),C=a.getPosition();C.y+H>p.height&&(H=p.height-C.y);(c?B:C.x)+G>p.width&&(G=p.width-(c?B:C.x));if(e==CKEDITOR.DIALOG_RESIZE_WIDTH||
e==CKEDITOR.DIALOG_RESIZE_BOTH)n=Math.max(d.minWidth||0,G-g);if(e==CKEDITOR.DIALOG_RESIZE_HEIGHT||e==CKEDITOR.DIALOG_RESIZE_BOTH)q=Math.max(d.minHeight||0,H-h);a.resize(n,q);a._.moved||a.layout();b.data.preventDefault()}function c(){CKEDITOR.document.removeListener("mouseup",c);CKEDITOR.document.removeListener("mousemove",b);q&&(q.remove(),q=null);if(CKEDITOR.env.ie6Compat){var a=u.getChild(0).getFrameDocument();a.removeListener("mouseup",c);a.removeListener("mousemove",b)}}var d=a.definition,e=d.resizable;
if(e!=CKEDITOR.DIALOG_RESIZE_NONE){var f=a.getParentEditor(),g,h,p,m,k,q,n=CKEDITOR.tools.addFunction(function(e){k=a.getSize();var d=a.parts.contents;d.$.getElementsByTagName("iframe").length&&(q=CKEDITOR.dom.element.createFromHtml('\x3cdiv class\x3d"cke_dialog_resize_cover" style\x3d"height: 100%; position: absolute; width: 100%;"\x3e\x3c/div\x3e'),d.append(q));h=k.height-a.parts.contents.getSize("height",!(CKEDITOR.env.gecko||CKEDITOR.env.ie&&CKEDITOR.env.quirks));g=k.width-a.parts.contents.getSize("width",
1);m={x:e.screenX,y:e.screenY};p=CKEDITOR.document.getWindow().getViewPaneSize();CKEDITOR.document.on("mousemove",b);CKEDITOR.document.on("mouseup",c);CKEDITOR.env.ie6Compat&&(d=u.getChild(0).getFrameDocument(),d.on("mousemove",b),d.on("mouseup",c));e.preventDefault&&e.preventDefault()});a.on("load",function(){var b="";e==CKEDITOR.DIALOG_RESIZE_WIDTH?b=" cke_resizer_horizontal":e==CKEDITOR.DIALOG_RESIZE_HEIGHT&&(b=" cke_resizer_vertical");b=CKEDITOR.dom.element.createFromHtml('\x3cdiv class\x3d"cke_resizer'+
b+" cke_resizer_"+f.lang.dir+'" title\x3d"'+CKEDITOR.tools.htmlEncode(f.lang.common.resize)+'" onmousedown\x3d"CKEDITOR.tools.callFunction('+n+', event )"\x3e'+("ltr"==f.lang.dir?"◢":"◣")+"\x3c/div\x3e");a.parts.footer.append(b,1)});f.on("destroy",function(){CKEDITOR.tools.removeFunction(n)})}}function I(a){a.data.preventDefault(1)}function N(a){var b=CKEDITOR.document.getWindow(),c=a.config,d=c.dialog_backgroundCoverColor||"white",e=c.dialog_backgroundCoverOpacity,f=c.baseFloatZIndex,c=CKEDITOR.tools.genKey(d,
e,f),g=z[c];g?g.show():(f=['\x3cdiv tabIndex\x3d"-1" style\x3d"position: ',CKEDITOR.env.ie6Compat?"absolute":"fixed","; z-index: ",f,"; top: 0px; left: 0px; ",CKEDITOR.env.ie6Compat?"":"background-color: "+d,'" class\x3d"cke_dialog_background_cover"\x3e'],CKEDITOR.env.ie6Compat&&(d="\x3chtml\x3e\x3cbody style\x3d\\'background-color:"+d+";\\'\x3e\x3c/body\x3e\x3c/html\x3e",f.push('\x3ciframe hidefocus\x3d"true" frameborder\x3d"0" id\x3d"cke_dialog_background_iframe" src\x3d"javascript:'),f.push("void((function(){"+
encodeURIComponent("document.open();("+CKEDITOR.tools.fixDomain+")();document.write( '"+d+"' );document.close();")+"})())"),f.push('" style\x3d"position:absolute;left:0;top:0;width:100%;height: 100%;filter: progid:DXImageTransform.Microsoft.Alpha(opacity\x3d0)"\x3e\x3c/iframe\x3e')),f.push("\x3c/div\x3e"),g=CKEDITOR.dom.element.createFromHtml(f.join("")),g.setOpacity(void 0!==e?e:.5),g.on("keydown",I),g.on("keypress",I),g.on("keyup",I),g.appendTo(CKEDITOR.document.getBody()),z[c]=g);a.focusManager.add(g);
u=g;a=function(){var a=b.getViewPaneSize();g.setStyles({width:a.width+"px",height:a.height+"px"})};var h=function(){var a=b.getScrollPosition(),c=CKEDITOR.dialog._.currentTop;g.setStyles({left:a.x+"px",top:a.y+"px"});if(c){do a=c.getPosition(),c.move(a.x,a.y);while(c=c._.parentDialog)}};J=a;b.on("resize",a);a();CKEDITOR.env.mac&&CKEDITOR.env.webkit||g.focus();if(CKEDITOR.env.ie6Compat){var p=function(){h();arguments.callee.prevScrollHandler.apply(this,arguments)};b.$.setTimeout(function(){p.prevScrollHandler=
window.onscroll||function(){};window.onscroll=p},0);h()}}function O(a){u&&(a.focusManager.remove(u),a=CKEDITOR.document.getWindow(),u.hide(),a.removeListener("resize",J),CKEDITOR.env.ie6Compat&&a.$.setTimeout(function(){window.onscroll=window.onscroll&&window.onscroll.prevScrollHandler||null},0),J=null)}var v=CKEDITOR.tools.cssLength,W='\x3cdiv class\x3d"cke_reset_all {editorId} {editorDialogClass} {hidpi}" dir\x3d"{langDir}" lang\x3d"{langCode}" role\x3d"dialog" aria-labelledby\x3d"cke_dialog_title_{id}"\x3e\x3ctable class\x3d"cke_dialog '+
CKEDITOR.env.cssClass+' cke_{langDir}" style\x3d"position:absolute" role\x3d"presentation"\x3e\x3ctr\x3e\x3ctd role\x3d"presentation"\x3e\x3cdiv class\x3d"cke_dialog_body" role\x3d"presentation"\x3e\x3cdiv id\x3d"cke_dialog_title_{id}" class\x3d"cke_dialog_title" role\x3d"presentation"\x3e\x3c/div\x3e\x3ca id\x3d"cke_dialog_close_button_{id}" class\x3d"cke_dialog_close_button" href\x3d"javascript:void(0)" title\x3d"{closeTitle}" role\x3d"button"\x3e\x3cspan class\x3d"cke_label"\x3eX\x3c/span\x3e\x3c/a\x3e\x3cdiv id\x3d"cke_dialog_tabs_{id}" class\x3d"cke_dialog_tabs" role\x3d"tablist"\x3e\x3c/div\x3e\x3ctable class\x3d"cke_dialog_contents" role\x3d"presentation"\x3e\x3ctr\x3e\x3ctd id\x3d"cke_dialog_contents_{id}" class\x3d"cke_dialog_contents_body" role\x3d"presentation"\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd id\x3d"cke_dialog_footer_{id}" class\x3d"cke_dialog_footer" role\x3d"presentation"\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e\x3c/div\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e\x3c/div\x3e';
CKEDITOR.dialog=function(a,b){function c(){var a=l._.focusList;a.sort(function(a,b){return a.tabIndex!=b.tabIndex?b.tabIndex-a.tabIndex:a.focusIndex-b.focusIndex});for(var b=a.length,c=0;c<b;c++)a[c].focusIndex=c}function d(a){var b=l._.focusList;a=a||0;if(!(1>b.length)){var c=l._.currentFocusIndex;l._.tabBarMode&&0>a&&(c=0);try{b[c].getInputElement().$.blur()}catch(e){}var d=c,g=1<l._.pageCount;do{d+=a;if(g&&!l._.tabBarMode&&(d==b.length||-1==d)){l._.tabBarMode=!0;l._.tabs[l._.currentTabId][0].focus();
l._.currentFocusIndex=-1;return}d=(d+b.length)%b.length;if(d==c)break}while(a&&!b[d].isFocusable());b[d].focus();"text"==b[d].type&&b[d].select()}}function e(b){if(l==CKEDITOR.dialog._.currentTop){var c=b.data.getKeystroke(),e="rtl"==a.lang.dir,g=[37,38,39,40];q=n=0;if(9==c||c==CKEDITOR.SHIFT+9)d(c==CKEDITOR.SHIFT+9?-1:1),q=1;else if(c==CKEDITOR.ALT+121&&!l._.tabBarMode&&1<l.getPageCount())l._.tabBarMode=!0,l._.tabs[l._.currentTabId][0].focus(),l._.currentFocusIndex=-1,q=1;else if(-1!=CKEDITOR.tools.indexOf(g,
c)&&l._.tabBarMode)c=-1!=CKEDITOR.tools.indexOf([e?39:37,38],c)?x.call(l):A.call(l),l.selectPage(c),l._.tabs[c][0].focus(),q=1;else if(13!=c&&32!=c||!l._.tabBarMode)if(13==c)c=b.data.getTarget(),c.is("a","button","select","textarea")||c.is("input")&&"button"==c.$.type||((c=this.getButton("ok"))&&CKEDITOR.tools.setTimeout(c.click,0,c),q=1),n=1;else if(27==c)(c=this.getButton("cancel"))?CKEDITOR.tools.setTimeout(c.click,0,c):!1!==this.fire("cancel",{hide:!0}).hide&&this.hide(),n=1;else return;else this.selectPage(this._.currentTabId),
this._.tabBarMode=!1,this._.currentFocusIndex=-1,d(1),q=1;f(b)}}function f(a){q?a.data.preventDefault(1):n&&a.data.stopPropagation()}var g=CKEDITOR.dialog._.dialogDefinitions[b],h=CKEDITOR.tools.clone(aa),p=a.config.dialog_buttonsOrder||"OS",m=a.lang.dir,k={},q,n;("OS"==p&&CKEDITOR.env.mac||"rtl"==p&&"ltr"==m||"ltr"==p&&"rtl"==m)&&h.buttons.reverse();g=CKEDITOR.tools.extend(g(a),h);g=CKEDITOR.tools.clone(g);g=new P(this,g);h=V(a);this._={editor:a,element:h.element,name:b,contentSize:{width:0,height:0},
size:{width:0,height:0},contents:{},buttons:{},accessKeyMap:{},tabs:{},tabIdList:[],currentTabId:null,currentTabIndex:null,pageCount:0,lastTab:null,tabBarMode:!1,focusList:[],currentFocusIndex:0,hasFocus:!1};this.parts=h.parts;CKEDITOR.tools.setTimeout(function(){a.fire("ariaWidget",this.parts.contents)},0,this);h={position:CKEDITOR.env.ie6Compat?"absolute":"fixed",top:0,visibility:"hidden"};h["rtl"==m?"right":"left"]=0;this.parts.dialog.setStyles(h);CKEDITOR.event.call(this);this.definition=g=CKEDITOR.fire("dialogDefinition",
{name:b,definition:g},a).definition;if(!("removeDialogTabs"in a._)&&a.config.removeDialogTabs){h=a.config.removeDialogTabs.split(";");for(m=0;m<h.length;m++)if(p=h[m].split(":"),2==p.length){var r=p[0];k[r]||(k[r]=[]);k[r].push(p[1])}a._.removeDialogTabs=k}if(a._.removeDialogTabs&&(k=a._.removeDialogTabs[b]))for(m=0;m<k.length;m++)g.removeContents(k[m]);if(g.onLoad)this.on("load",g.onLoad);if(g.onShow)this.on("show",g.onShow);if(g.onHide)this.on("hide",g.onHide);if(g.onOk)this.on("ok",function(b){a.fire("saveSnapshot");
setTimeout(function(){a.fire("saveSnapshot")},0);!1===g.onOk.call(this,b)&&(b.data.hide=!1)});this.state=CKEDITOR.DIALOG_STATE_IDLE;if(g.onCancel)this.on("cancel",function(a){!1===g.onCancel.call(this,a)&&(a.data.hide=!1)});var l=this,t=function(a){var b=l._.contents,c=!1,d;for(d in b)for(var e in b[d])if(c=a.call(this,b[d][e]))return};this.on("ok",function(a){t(function(b){if(b.validate){var c=b.validate(this),d="string"==typeof c||!1===c;d&&(a.data.hide=!1,a.stop());T.call(b,!d,"string"==typeof c?
c:void 0);return d}})},this,null,0);this.on("cancel",function(b){t(function(c){if(c.isChanged())return a.config.dialog_noConfirmCancel||confirm(a.lang.common.confirmCancel)||(b.data.hide=!1),!0})},this,null,0);this.parts.close.on("click",function(a){!1!==this.fire("cancel",{hide:!0}).hide&&this.hide();a.data.preventDefault()},this);this.changeFocus=d;var y=this._.element;a.focusManager.add(y,1);this.on("show",function(){y.on("keydown",e,this);if(CKEDITOR.env.gecko)y.on("keypress",f,this)});this.on("hide",
function(){y.removeListener("keydown",e);CKEDITOR.env.gecko&&y.removeListener("keypress",f);t(function(a){U.apply(a)})});this.on("iframeAdded",function(a){(new CKEDITOR.dom.document(a.data.iframe.$.contentWindow.document)).on("keydown",e,this,null,0)});this.on("show",function(){c();var b=1<l._.pageCount;a.config.dialog_startupFocusTab&&b?(l._.tabBarMode=!0,l._.tabs[l._.currentTabId][0].focus(),l._.currentFocusIndex=-1):this._.hasFocus||(this._.currentFocusIndex=b?-1:this._.focusList.length-1,g.onFocus?
(b=g.onFocus.call(this))&&b.focus():d(1))},this,null,4294967295);if(CKEDITOR.env.ie6Compat)this.on("load",function(){var a=this.getElement(),b=a.getFirst();b.remove();b.appendTo(a)},this);Y(this);Z(this);(new CKEDITOR.dom.text(g.title,CKEDITOR.document)).appendTo(this.parts.title);for(m=0;m<g.contents.length;m++)(k=g.contents[m])&&this.addPage(k);this.parts.tabs.on("click",function(a){var b=a.data.getTarget();b.hasClass("cke_dialog_tab")&&(b=b.$.id,this.selectPage(b.substring(4,b.lastIndexOf("_"))),
this._.tabBarMode&&(this._.tabBarMode=!1,this._.currentFocusIndex=-1,d(1)),a.data.preventDefault())},this);m=[];k=CKEDITOR.dialog._.uiElementBuilders.hbox.build(this,{type:"hbox",className:"cke_dialog_footer_buttons",widths:[],children:g.buttons},m).getChild();this.parts.footer.setHtml(m.join(""));for(m=0;m<k.length;m++)this._.buttons[k[m].id]=k[m]};CKEDITOR.dialog.prototype={destroy:function(){this.hide();this._.element.remove()},resize:function(){return function(a,b){this._.contentSize&&this._.contentSize.width==
a&&this._.contentSize.height==b||(CKEDITOR.dialog.fire("resize",{dialog:this,width:a,height:b},this._.editor),this.fire("resize",{width:a,height:b},this._.editor),this.parts.contents.setStyles({width:a+"px",height:b+"px"}),"rtl"==this._.editor.lang.dir&&this._.position&&(this._.position.x=CKEDITOR.document.getWindow().getViewPaneSize().width-this._.contentSize.width-parseInt(this._.element.getFirst().getStyle("right"),10)),this._.contentSize={width:a,height:b})}}(),getSize:function(){var a=this._.element.getFirst();
return{width:a.$.offsetWidth||0,height:a.$.offsetHeight||0}},move:function(a,b,c){var d=this._.element.getFirst(),e="rtl"==this._.editor.lang.dir,f="fixed"==d.getComputedStyle("position");CKEDITOR.env.ie&&d.setStyle("zoom","100%");f&&this._.position&&this._.position.x==a&&this._.position.y==b||(this._.position={x:a,y:b},f||(f=CKEDITOR.document.getWindow().getScrollPosition(),a+=f.x,b+=f.y),e&&(f=this.getSize(),a=CKEDITOR.document.getWindow().getViewPaneSize().width-f.width-a),b={top:(0<b?b:0)+"px"},
b[e?"right":"left"]=(0<a?a:0)+"px",d.setStyles(b),c&&(this._.moved=1))},getPosition:function(){return CKEDITOR.tools.extend({},this._.position)},show:function(){var a=this._.element,b=this.definition;a.getParent()&&a.getParent().equals(CKEDITOR.document.getBody())?a.setStyle("display","block"):a.appendTo(CKEDITOR.document.getBody());this.resize(this._.contentSize&&this._.contentSize.width||b.width||b.minWidth,this._.contentSize&&this._.contentSize.height||b.height||b.minHeight);this.reset();this.selectPage(this.definition.contents[0].id);
null===CKEDITOR.dialog._.currentZIndex&&(CKEDITOR.dialog._.currentZIndex=this._.editor.config.baseFloatZIndex);this._.element.getFirst().setStyle("z-index",CKEDITOR.dialog._.currentZIndex+=10);null===CKEDITOR.dialog._.currentTop?(CKEDITOR.dialog._.currentTop=this,this._.parentDialog=null,N(this._.editor)):(this._.parentDialog=CKEDITOR.dialog._.currentTop,this._.parentDialog.getElement().getFirst().$.style.zIndex-=Math.floor(this._.editor.config.baseFloatZIndex/2),CKEDITOR.dialog._.currentTop=this);
a.on("keydown",Q);a.on("keyup",R);this._.hasFocus=!1;for(var c in b.contents)if(b.contents[c]){var a=b.contents[c],d=this._.tabs[a.id],e=a.requiredContent,f=0;if(d){for(var g in this._.contents[a.id]){var h=this._.contents[a.id][g];"hbox"!=h.type&&"vbox"!=h.type&&h.getInputElement()&&(h.requiredContent&&!this._.editor.activeFilter.check(h.requiredContent)?h.disable():(h.enable(),f++))}!f||e&&!this._.editor.activeFilter.check(e)?d[0].addClass("cke_dialog_tab_disabled"):d[0].removeClass("cke_dialog_tab_disabled")}}CKEDITOR.tools.setTimeout(function(){this.layout();
X(this);this.parts.dialog.setStyle("visibility","");this.fireOnce("load",{});CKEDITOR.ui.fire("ready",this);this.fire("show",{});this._.editor.fire("dialogShow",this);this._.parentDialog||this._.editor.focusManager.lock();this.foreach(function(a){a.setInitValue&&a.setInitValue()})},100,this)},layout:function(){var a=this.parts.dialog,b=this.getSize(),c=CKEDITOR.document.getWindow().getViewPaneSize(),d=(c.width-b.width)/2,e=(c.height-b.height)/2;CKEDITOR.env.ie6Compat||(b.height+(0<e?e:0)>c.height||
b.width+(0<d?d:0)>c.width?a.setStyle("position","absolute"):a.setStyle("position","fixed"));this.move(this._.moved?this._.position.x:d,this._.moved?this._.position.y:e)},foreach:function(a){for(var b in this._.contents)for(var c in this._.contents[b])a.call(this,this._.contents[b][c]);return this},reset:function(){var a=function(a){a.reset&&a.reset(1)};return function(){this.foreach(a);return this}}(),setupContent:function(){var a=arguments;this.foreach(function(b){b.setup&&b.setup.apply(b,a)})},
commitContent:function(){var a=arguments;this.foreach(function(b){CKEDITOR.env.ie&&this._.currentFocusIndex==b.focusIndex&&b.getInputElement().$.blur();b.commit&&b.commit.apply(b,a)})},hide:function(){if(this.parts.dialog.isVisible()){this.fire("hide",{});this._.editor.fire("dialogHide",this);this.selectPage(this._.tabIdList[0]);var a=this._.element;a.setStyle("display","none");this.parts.dialog.setStyle("visibility","hidden");for(ba(this);CKEDITOR.dialog._.currentTop!=this;)CKEDITOR.dialog._.currentTop.hide();
if(this._.parentDialog){var b=this._.parentDialog.getElement().getFirst();b.setStyle("z-index",parseInt(b.$.style.zIndex,10)+Math.floor(this._.editor.config.baseFloatZIndex/2))}else O(this._.editor);if(CKEDITOR.dialog._.currentTop=this._.parentDialog)CKEDITOR.dialog._.currentZIndex-=10;else{CKEDITOR.dialog._.currentZIndex=null;a.removeListener("keydown",Q);a.removeListener("keyup",R);var c=this._.editor;c.focus();setTimeout(function(){c.focusManager.unlock();CKEDITOR.env.iOS&&c.window.focus()},0)}delete this._.parentDialog;
this.foreach(function(a){a.resetInitValue&&a.resetInitValue()});this.setState(CKEDITOR.DIALOG_STATE_IDLE)}},addPage:function(a){if(!a.requiredContent||this._.editor.filter.check(a.requiredContent)){for(var b=[],c=a.label?' title\x3d"'+CKEDITOR.tools.htmlEncode(a.label)+'"':"",d=CKEDITOR.dialog._.uiElementBuilders.vbox.build(this,{type:"vbox",className:"cke_dialog_page_contents",children:a.elements,expand:!!a.expand,padding:a.padding,style:a.style||"width: 100%;"},b),e=this._.contents[a.id]={},f=d.getChild(),
g=0;d=f.shift();)d.notAllowed||"hbox"==d.type||"vbox"==d.type||g++,e[d.id]=d,"function"==typeof d.getChild&&f.push.apply(f,d.getChild());g||(a.hidden=!0);b=CKEDITOR.dom.element.createFromHtml(b.join(""));b.setAttribute("role","tabpanel");d=CKEDITOR.env;e="cke_"+a.id+"_"+CKEDITOR.tools.getNextNumber();c=CKEDITOR.dom.element.createFromHtml(['\x3ca class\x3d"cke_dialog_tab"',0<this._.pageCount?" cke_last":"cke_first",c,a.hidden?' style\x3d"display:none"':"",' id\x3d"',e,'"',d.gecko&&!d.hc?"":' href\x3d"javascript:void(0)"',
' tabIndex\x3d"-1" hidefocus\x3d"true" role\x3d"tab"\x3e',a.label,"\x3c/a\x3e"].join(""));b.setAttribute("aria-labelledby",e);this._.tabs[a.id]=[c,b];this._.tabIdList.push(a.id);!a.hidden&&this._.pageCount++;this._.lastTab=c;this.updateStyle();b.setAttribute("name",a.id);b.appendTo(this.parts.contents);c.unselectable();this.parts.tabs.append(c);a.accessKey&&(S(this,this,"CTRL+"+a.accessKey,ca,da),this._.accessKeyMap["CTRL+"+a.accessKey]=a.id)}},selectPage:function(a){if(this._.currentTabId!=a&&!this._.tabs[a][0].hasClass("cke_dialog_tab_disabled")&&
!1!==this.fire("selectPage",{page:a,currentPage:this._.currentTabId})){for(var b in this._.tabs){var c=this._.tabs[b][0],d=this._.tabs[b][1];b!=a&&(c.removeClass("cke_dialog_tab_selected"),d.hide());d.setAttribute("aria-hidden",b!=a)}var e=this._.tabs[a];e[0].addClass("cke_dialog_tab_selected");CKEDITOR.env.ie6Compat||CKEDITOR.env.ie7Compat?(K(e[1]),e[1].show(),setTimeout(function(){K(e[1],1)},0)):e[1].show();this._.currentTabId=a;this._.currentTabIndex=CKEDITOR.tools.indexOf(this._.tabIdList,a)}},
updateStyle:function(){this.parts.dialog[(1===this._.pageCount?"add":"remove")+"Class"]("cke_single_page")},hidePage:function(a){var b=this._.tabs[a]&&this._.tabs[a][0];b&&1!=this._.pageCount&&b.isVisible()&&(a==this._.currentTabId&&this.selectPage(x.call(this)),b.hide(),this._.pageCount--,this.updateStyle())},showPage:function(a){if(a=this._.tabs[a]&&this._.tabs[a][0])a.show(),this._.pageCount++,this.updateStyle()},getElement:function(){return this._.element},getName:function(){return this._.name},
getContentElement:function(a,b){var c=this._.contents[a];return c&&c[b]},getValueOf:function(a,b){return this.getContentElement(a,b).getValue()},setValueOf:function(a,b,c){return this.getContentElement(a,b).setValue(c)},getButton:function(a){return this._.buttons[a]},click:function(a){return this._.buttons[a].click()},disableButton:function(a){return this._.buttons[a].disable()},enableButton:function(a){return this._.buttons[a].enable()},getPageCount:function(){return this._.pageCount},getParentEditor:function(){return this._.editor},
getSelectedElement:function(){return this.getParentEditor().getSelection().getSelectedElement()},addFocusable:function(a,b){if("undefined"==typeof b)b=this._.focusList.length,this._.focusList.push(new L(this,a,b));else{this._.focusList.splice(b,0,new L(this,a,b));for(var c=b+1;c<this._.focusList.length;c++)this._.focusList[c].focusIndex++}},setState:function(a){if(this.state!=a){this.state=a;if(a==CKEDITOR.DIALOG_STATE_BUSY){if(!this.parts.spinner){var b=this.getParentEditor().lang.dir,c={attributes:{"class":"cke_dialog_spinner"},
styles:{"float":"rtl"==b?"right":"left"}};c.styles["margin-"+("rtl"==b?"left":"right")]="8px";this.parts.spinner=CKEDITOR.document.createElement("div",c);this.parts.spinner.setHtml("\x26#8987;");this.parts.spinner.appendTo(this.parts.title,1)}this.parts.spinner.show();this.getButton("ok").disable()}else a==CKEDITOR.DIALOG_STATE_IDLE&&(this.parts.spinner&&this.parts.spinner.hide(),this.getButton("ok").enable());this.fire("state",a)}}};CKEDITOR.tools.extend(CKEDITOR.dialog,{add:function(a,b){this._.dialogDefinitions[a]&&
"function"!=typeof b||(this._.dialogDefinitions[a]=b)},exists:function(a){return!!this._.dialogDefinitions[a]},getCurrent:function(){return CKEDITOR.dialog._.currentTop},isTabEnabled:function(a,b,c){a=a.config.removeDialogTabs;return!(a&&a.match(new RegExp("(?:^|;)"+b+":"+c+"(?:$|;)","i")))},okButton:function(){var a=function(a,c){c=c||{};return CKEDITOR.tools.extend({id:"ok",type:"button",label:a.lang.common.ok,"class":"cke_dialog_ui_button_ok",onClick:function(a){a=a.data.dialog;!1!==a.fire("ok",
{hide:!0}).hide&&a.hide()}},c,!0)};a.type="button";a.override=function(b){return CKEDITOR.tools.extend(function(c){return a(c,b)},{type:"button"},!0)};return a}(),cancelButton:function(){var a=function(a,c){c=c||{};return CKEDITOR.tools.extend({id:"cancel",type:"button",label:a.lang.common.cancel,"class":"cke_dialog_ui_button_cancel",onClick:function(a){a=a.data.dialog;!1!==a.fire("cancel",{hide:!0}).hide&&a.hide()}},c,!0)};a.type="button";a.override=function(b){return CKEDITOR.tools.extend(function(c){return a(c,
b)},{type:"button"},!0)};return a}(),addUIElement:function(a,b){this._.uiElementBuilders[a]=b}});CKEDITOR.dialog._={uiElementBuilders:{},dialogDefinitions:{},currentTop:null,currentZIndex:null};CKEDITOR.event.implementOn(CKEDITOR.dialog);CKEDITOR.event.implementOn(CKEDITOR.dialog.prototype);var aa={resizable:CKEDITOR.DIALOG_RESIZE_BOTH,minWidth:600,minHeight:400,buttons:[CKEDITOR.dialog.okButton,CKEDITOR.dialog.cancelButton]},D=function(a,b,c){for(var d=0,e;e=a[d];d++)if(e.id==b||c&&e[c]&&(e=D(e[c],
b,c)))return e;return null},E=function(a,b,c,d,e){if(c){for(var f=0,g;g=a[f];f++){if(g.id==c)return a.splice(f,0,b),b;if(d&&g[d]&&(g=E(g[d],b,c,d,!0)))return g}if(e)return null}a.push(b);return b},F=function(a,b,c){for(var d=0,e;e=a[d];d++){if(e.id==b)return a.splice(d,1);if(c&&e[c]&&(e=F(e[c],b,c)))return e}return null},P=function(a,b){this.dialog=a;for(var c=b.contents,d=0,e;e=c[d];d++)c[d]=e&&new M(a,e);CKEDITOR.tools.extend(this,b)};P.prototype={getContents:function(a){return D(this.contents,
a)},getButton:function(a){return D(this.buttons,a)},addContents:function(a,b){return E(this.contents,a,b)},addButton:function(a,b){return E(this.buttons,a,b)},removeContents:function(a){F(this.contents,a)},removeButton:function(a){F(this.buttons,a)}};M.prototype={get:function(a){return D(this.elements,a,"children")},add:function(a,b){return E(this.elements,a,b,"children")},remove:function(a){F(this.elements,a,"children")}};var J,z={},u,w={},Q=function(a){var b=a.data.$.ctrlKey||a.data.$.metaKey,c=
a.data.$.altKey,d=a.data.$.shiftKey,e=String.fromCharCode(a.data.$.keyCode);(b=w[(b?"CTRL+":"")+(c?"ALT+":"")+(d?"SHIFT+":"")+e])&&b.length&&(b=b[b.length-1],b.keydown&&b.keydown.call(b.uiElement,b.dialog,b.key),a.data.preventDefault())},R=function(a){var b=a.data.$.ctrlKey||a.data.$.metaKey,c=a.data.$.altKey,d=a.data.$.shiftKey,e=String.fromCharCode(a.data.$.keyCode);(b=w[(b?"CTRL+":"")+(c?"ALT+":"")+(d?"SHIFT+":"")+e])&&b.length&&(b=b[b.length-1],b.keyup&&(b.keyup.call(b.uiElement,b.dialog,b.key),
a.data.preventDefault()))},S=function(a,b,c,d,e){(w[c]||(w[c]=[])).push({uiElement:a,dialog:b,key:c,keyup:e||a.accessKeyUp,keydown:d||a.accessKeyDown})},ba=function(a){for(var b in w){for(var c=w[b],d=c.length-1;0<=d;d--)c[d].dialog!=a&&c[d].uiElement!=a||c.splice(d,1);0===c.length&&delete w[b]}},da=function(a,b){a._.accessKeyMap[b]&&a.selectPage(a._.accessKeyMap[b])},ca=function(){};(function(){CKEDITOR.ui.dialog={uiElement:function(a,b,c,d,e,f,g){if(!(4>arguments.length)){var h=(d.call?d(b):d)||
"div",p=["\x3c",h," "],m=(e&&e.call?e(b):e)||{},k=(f&&f.call?f(b):f)||{},q=(g&&g.call?g.call(this,a,b):g)||"",n=this.domId=k.id||CKEDITOR.tools.getNextId()+"_uiElement";b.requiredContent&&!a.getParentEditor().filter.check(b.requiredContent)&&(m.display="none",this.notAllowed=!0);k.id=n;var r={};b.type&&(r["cke_dialog_ui_"+b.type]=1);b.className&&(r[b.className]=1);b.disabled&&(r.cke_disabled=1);for(var l=k["class"]&&k["class"].split?k["class"].split(" "):[],n=0;n<l.length;n++)l[n]&&(r[l[n]]=1);l=
[];for(n in r)l.push(n);k["class"]=l.join(" ");b.title&&(k.title=b.title);r=(b.style||"").split(";");b.align&&(l=b.align,m["margin-left"]="left"==l?0:"auto",m["margin-right"]="right"==l?0:"auto");for(n in m)r.push(n+":"+m[n]);b.hidden&&r.push("display:none");for(n=r.length-1;0<=n;n--)""===r[n]&&r.splice(n,1);0<r.length&&(k.style=(k.style?k.style+"; ":"")+r.join("; "));for(n in k)p.push(n+'\x3d"'+CKEDITOR.tools.htmlEncode(k[n])+'" ');p.push("\x3e",q,"\x3c/",h,"\x3e");c.push(p.join(""));(this._||(this._=
{})).dialog=a;"boolean"==typeof b.isChanged&&(this.isChanged=function(){return b.isChanged});"function"==typeof b.isChanged&&(this.isChanged=b.isChanged);"function"==typeof b.setValue&&(this.setValue=CKEDITOR.tools.override(this.setValue,function(a){return function(c){a.call(this,b.setValue.call(this,c))}}));"function"==typeof b.getValue&&(this.getValue=CKEDITOR.tools.override(this.getValue,function(a){return function(){return b.getValue.call(this,a.call(this))}}));CKEDITOR.event.implementOn(this);
this.registerEvents(b);this.accessKeyUp&&this.accessKeyDown&&b.accessKey&&S(this,a,"CTRL+"+b.accessKey);var t=this;a.on("load",function(){var b=t.getInputElement();if(b){var c=t.type in{checkbox:1,ratio:1}&&CKEDITOR.env.ie&&8>CKEDITOR.env.version?"cke_dialog_ui_focused":"";b.on("focus",function(){a._.tabBarMode=!1;a._.hasFocus=!0;t.fire("focus");c&&this.addClass(c)});b.on("blur",function(){t.fire("blur");c&&this.removeClass(c)})}});CKEDITOR.tools.extend(this,b);this.keyboardFocusable&&(this.tabIndex=
b.tabIndex||0,this.focusIndex=a._.focusList.push(this)-1,this.on("focus",function(){a._.currentFocusIndex=t.focusIndex}))}},hbox:function(a,b,c,d,e){if(!(4>arguments.length)){this._||(this._={});var f=this._.children=b,g=e&&e.widths||null,h=e&&e.height||null,p,m={role:"presentation"};e&&e.align&&(m.align=e.align);CKEDITOR.ui.dialog.uiElement.call(this,a,e||{type:"hbox"},d,"table",{},m,function(){var a=['\x3ctbody\x3e\x3ctr class\x3d"cke_dialog_ui_hbox"\x3e'];for(p=0;p<c.length;p++){var b="cke_dialog_ui_hbox_child",
d=[];0===p&&(b="cke_dialog_ui_hbox_first");p==c.length-1&&(b="cke_dialog_ui_hbox_last");a.push('\x3ctd class\x3d"',b,'" role\x3d"presentation" ');g?g[p]&&d.push("width:"+v(g[p])):d.push("width:"+Math.floor(100/c.length)+"%");h&&d.push("height:"+v(h));e&&void 0!==e.padding&&d.push("padding:"+v(e.padding));CKEDITOR.env.ie&&CKEDITOR.env.quirks&&f[p].align&&d.push("text-align:"+f[p].align);0<d.length&&a.push('style\x3d"'+d.join("; ")+'" ');a.push("\x3e",c[p],"\x3c/td\x3e")}a.push("\x3c/tr\x3e\x3c/tbody\x3e");
return a.join("")})}},vbox:function(a,b,c,d,e){if(!(3>arguments.length)){this._||(this._={});var f=this._.children=b,g=e&&e.width||null,h=e&&e.heights||null;CKEDITOR.ui.dialog.uiElement.call(this,a,e||{type:"vbox"},d,"div",null,{role:"presentation"},function(){var b=['\x3ctable role\x3d"presentation" cellspacing\x3d"0" border\x3d"0" '];b.push('style\x3d"');e&&e.expand&&b.push("height:100%;");b.push("width:"+v(g||"100%"),";");CKEDITOR.env.webkit&&b.push("float:none;");b.push('"');b.push('align\x3d"',
CKEDITOR.tools.htmlEncode(e&&e.align||("ltr"==a.getParentEditor().lang.dir?"left":"right")),'" ');b.push("\x3e\x3ctbody\x3e");for(var d=0;d<c.length;d++){var k=[];b.push('\x3ctr\x3e\x3ctd role\x3d"presentation" ');g&&k.push("width:"+v(g||"100%"));h?k.push("height:"+v(h[d])):e&&e.expand&&k.push("height:"+Math.floor(100/c.length)+"%");e&&void 0!==e.padding&&k.push("padding:"+v(e.padding));CKEDITOR.env.ie&&CKEDITOR.env.quirks&&f[d].align&&k.push("text-align:"+f[d].align);0<k.length&&b.push('style\x3d"',
k.join("; "),'" ');b.push(' class\x3d"cke_dialog_ui_vbox_child"\x3e',c[d],"\x3c/td\x3e\x3c/tr\x3e")}b.push("\x3c/tbody\x3e\x3c/table\x3e");return b.join("")})}}}})();CKEDITOR.ui.dialog.uiElement.prototype={getElement:function(){return CKEDITOR.document.getById(this.domId)},getInputElement:function(){return this.getElement()},getDialog:function(){return this._.dialog},setValue:function(a,b){this.getInputElement().setValue(a);!b&&this.fire("change",{value:a});return this},getValue:function(){return this.getInputElement().getValue()},
isChanged:function(){return!1},selectParentTab:function(){for(var a=this.getInputElement();(a=a.getParent())&&-1==a.$.className.search("cke_dialog_page_contents"););if(!a)return this;a=a.getAttribute("name");this._.dialog._.currentTabId!=a&&this._.dialog.selectPage(a);return this},focus:function(){this.selectParentTab().getInputElement().focus();return this},registerEvents:function(a){var b=/^on([A-Z]\w+)/,c,d=function(a,b,c,d){b.on("load",function(){a.getInputElement().on(c,d,a)})},e;for(e in a)if(c=
e.match(b))this.eventProcessors[e]?this.eventProcessors[e].call(this,this._.dialog,a[e]):d(this,this._.dialog,c[1].toLowerCase(),a[e]);return this},eventProcessors:{onLoad:function(a,b){a.on("load",b,this)},onShow:function(a,b){a.on("show",b,this)},onHide:function(a,b){a.on("hide",b,this)}},accessKeyDown:function(){this.focus()},accessKeyUp:function(){},disable:function(){var a=this.getElement();this.getInputElement().setAttribute("disabled","true");a.addClass("cke_disabled")},enable:function(){var a=
this.getElement();this.getInputElement().removeAttribute("disabled");a.removeClass("cke_disabled")},isEnabled:function(){return!this.getElement().hasClass("cke_disabled")},isVisible:function(){return this.getInputElement().isVisible()},isFocusable:function(){return this.isEnabled()&&this.isVisible()?!0:!1}};CKEDITOR.ui.dialog.hbox.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{getChild:function(a){if(1>arguments.length)return this._.children.concat();a.splice||(a=[a]);return 2>
a.length?this._.children[a[0]]:this._.children[a[0]]&&this._.children[a[0]].getChild?this._.children[a[0]].getChild(a.slice(1,a.length)):null}},!0);CKEDITOR.ui.dialog.vbox.prototype=new CKEDITOR.ui.dialog.hbox;(function(){var a={build:function(a,c,d){for(var e=c.children,f,g=[],h=[],p=0;p<e.length&&(f=e[p]);p++){var m=[];g.push(m);h.push(CKEDITOR.dialog._.uiElementBuilders[f.type].build(a,f,m))}return new CKEDITOR.ui.dialog[c.type](a,h,g,d,c)}};CKEDITOR.dialog.addUIElement("hbox",a);CKEDITOR.dialog.addUIElement("vbox",
a)})();CKEDITOR.dialogCommand=function(a,b){this.dialogName=a;CKEDITOR.tools.extend(this,b,!0)};CKEDITOR.dialogCommand.prototype={exec:function(a){a.openDialog(this.dialogName)},canUndo:!1,editorFocus:1};(function(){var a=/^([a]|[^a])+$/,b=/^\d*$/,c=/^\d*(?:\.\d+)?$/,d=/^(((\d*(\.\d+))|(\d*))(px|\%)?)?$/,e=/^(((\d*(\.\d+))|(\d*))(px|em|ex|in|cm|mm|pt|pc|\%)?)?$/i,f=/^(\s*[\w-]+\s*:\s*[^:;]+(?:;|$))*$/;CKEDITOR.VALIDATE_OR=1;CKEDITOR.VALIDATE_AND=2;CKEDITOR.dialog.validate={functions:function(){var a=
arguments;return function(){var b=this&&this.getValue?this.getValue():a[0],c,d=CKEDITOR.VALIDATE_AND,e=[],f;for(f=0;f<a.length;f++)if("function"==typeof a[f])e.push(a[f]);else break;f<a.length&&"string"==typeof a[f]&&(c=a[f],f++);f<a.length&&"number"==typeof a[f]&&(d=a[f]);var n=d==CKEDITOR.VALIDATE_AND?!0:!1;for(f=0;f<e.length;f++)n=d==CKEDITOR.VALIDATE_AND?n&&e[f](b):n||e[f](b);return n?!0:c}},regex:function(a,b){return function(c){c=this&&this.getValue?this.getValue():c;return a.test(c)?!0:b}},
notEmpty:function(b){return this.regex(a,b)},integer:function(a){return this.regex(b,a)},number:function(a){return this.regex(c,a)},cssLength:function(a){return this.functions(function(a){return e.test(CKEDITOR.tools.trim(a))},a)},htmlLength:function(a){return this.functions(function(a){return d.test(CKEDITOR.tools.trim(a))},a)},inlineStyle:function(a){return this.functions(function(a){return f.test(CKEDITOR.tools.trim(a))},a)},equals:function(a,b){return this.functions(function(b){return b==a},b)},
notEqual:function(a,b){return this.functions(function(b){return b!=a},b)}};CKEDITOR.on("instanceDestroyed",function(a){if(CKEDITOR.tools.isEmpty(CKEDITOR.instances)){for(var b;b=CKEDITOR.dialog._.currentTop;)b.hide();for(var c in z)z[c].remove();z={}}a=a.editor._.storedDialogs;for(var d in a)a[d].destroy()})})();CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{openDialog:function(a,b){var c=null,d=CKEDITOR.dialog._.dialogDefinitions[a];null===CKEDITOR.dialog._.currentTop&&N(this);if("function"==typeof d)c=
this._.storedDialogs||(this._.storedDialogs={}),c=c[a]||(c[a]=new CKEDITOR.dialog(this,a)),b&&b.call(c,c),c.show();else{if("failed"==d)throw O(this),Error('[CKEDITOR.dialog.openDialog] Dialog "'+a+'" failed when loading definition.');"string"==typeof d&&CKEDITOR.scriptLoader.load(CKEDITOR.getUrl(d),function(){"function"!=typeof CKEDITOR.dialog._.dialogDefinitions[a]&&(CKEDITOR.dialog._.dialogDefinitions[a]="failed");this.openDialog(a,b)},this,0,1)}CKEDITOR.skin.loadPart("dialog");return c}})})();
CKEDITOR.plugins.add("dialog",{requires:"dialogui",init:function(x){x.on("doubleclick",function(A){A.data.dialog&&x.openDialog(A.data.dialog)},null,null,999)}});CKEDITOR.plugins.add("about",{requires:"dialog",init:function(a){var b=a.addCommand("about",new CKEDITOR.dialogCommand("about"));b.modes={wysiwyg:1,source:1};b.canUndo=!1;b.readOnly=1;a.ui.addButton&&a.ui.addButton("About",{label:a.lang.about.title,command:"about",toolbar:"about"});CKEDITOR.dialog.add("about",this.path+"dialogs/about.js")}});(function(){CKEDITOR.plugins.add("a11yhelp",{requires:"dialog",availableLangs:{af:1,ar:1,bg:1,ca:1,cs:1,cy:1,da:1,de:1,"de-ch":1,el:1,en:1,"en-gb":1,eo:1,es:1,et:1,eu:1,fa:1,fi:1,fo:1,fr:1,"fr-ca":1,gl:1,gu:1,he:1,hi:1,hr:1,hu:1,id:1,it:1,ja:1,km:1,ko:1,ku:1,lt:1,lv:1,mk:1,mn:1,nb:1,nl:1,no:1,pl:1,pt:1,"pt-br":1,ro:1,ru:1,si:1,sk:1,sl:1,sq:1,sr:1,"sr-latn":1,sv:1,th:1,tr:1,tt:1,ug:1,uk:1,vi:1,zh:1,"zh-cn":1},init:function(b){var c=this;b.addCommand("a11yHelp",{exec:function(){var a=b.langCode,a=c.availableLangs[a]?
a:c.availableLangs[a.replace(/-.*/,"")]?a.replace(/-.*/,""):"en";CKEDITOR.scriptLoader.load(CKEDITOR.getUrl(c.path+"dialogs/lang/"+a+".js"),function(){b.lang.a11yhelp=c.langEntries[a];b.openDialog("a11yHelp")})},modes:{wysiwyg:1,source:1},readOnly:1,canUndo:!1});b.setKeystroke(CKEDITOR.ALT+48,"a11yHelp");CKEDITOR.dialog.add("a11yHelp",this.path+"dialogs/a11yhelp.js");b.on("ariaEditorHelpLabel",function(a){a.data.label=b.lang.common.editorHelp})}})})();(function(){function f(c){var a=this.att;c=c&&c.hasAttribute(a)&&c.getAttribute(a)||"";void 0!==c&&this.setValue(c)}function g(){for(var c,a=0;a<arguments.length;a++)if(arguments[a]instanceof CKEDITOR.dom.element){c=arguments[a];break}if(c){var a=this.att,b=this.getValue();b?c.setAttribute(a,b):c.removeAttribute(a,b)}}var k={id:1,dir:1,classes:1,styles:1};CKEDITOR.plugins.add("dialogadvtab",{requires:"dialog",allowedContent:function(c){c||(c=k);var a=[];c.id&&a.push("id");c.dir&&a.push("dir");var b=
"";a.length&&(b+="["+a.join(",")+"]");c.classes&&(b+="(*)");c.styles&&(b+="{*}");return b},createAdvancedTab:function(c,a,b){a||(a=k);var d=c.lang.common,h={id:"advanced",label:d.advancedTab,title:d.advancedTab,elements:[{type:"vbox",padding:1,children:[]}]},e=[];if(a.id||a.dir)a.id&&e.push({id:"advId",att:"id",type:"text",requiredContent:b?b+"[id]":null,label:d.id,setup:f,commit:g}),a.dir&&e.push({id:"advLangDir",att:"dir",type:"select",requiredContent:b?b+"[dir]":null,label:d.langDir,"default":"",
style:"width:100%",items:[[d.notSet,""],[d.langDirLTR,"ltr"],[d.langDirRTL,"rtl"]],setup:f,commit:g}),h.elements[0].children.push({type:"hbox",widths:["50%","50%"],children:[].concat(e)});if(a.styles||a.classes)e=[],a.styles&&e.push({id:"advStyles",att:"style",type:"text",requiredContent:b?b+"{cke-xyz}":null,label:d.styles,"default":"",validate:CKEDITOR.dialog.validate.inlineStyle(d.invalidInlineStyle),onChange:function(){},getStyle:function(a,c){var b=this.getValue().match(new RegExp("(?:^|;)\\s*"+
a+"\\s*:\\s*([^;]*)","i"));return b?b[1]:c},updateStyle:function(a,b){var d=this.getValue(),e=c.document.createElement("span");e.setAttribute("style",d);e.setStyle(a,b);d=CKEDITOR.tools.normalizeCssText(e.getAttribute("style"));this.setValue(d,1)},setup:f,commit:g}),a.classes&&e.push({type:"hbox",widths:["45%","55%"],children:[{id:"advCSSClasses",att:"class",type:"text",requiredContent:b?b+"(cke-xyz)":null,label:d.cssClasses,"default":"",setup:f,commit:g}]}),h.elements[0].children.push({type:"hbox",
widths:["50%","50%"],children:[].concat(e)});return h}})})();CKEDITOR.plugins.add("basicstyles",{init:function(c){var e=0,d=function(g,d,b,a){if(a){a=new CKEDITOR.style(a);var f=h[b];f.unshift(a);c.attachStyleStateChange(a,function(a){!c.readOnly&&c.getCommand(b).setState(a)});c.addCommand(b,new CKEDITOR.styleCommand(a,{contentForms:f}));c.ui.addButton&&c.ui.addButton(g,{label:d,command:b,toolbar:"basicstyles,"+(e+=10)})}},h={bold:["strong","b",["span",function(a){a=a.styles["font-weight"];return"bold"==a||700<=+a}]],italic:["em","i",["span",function(a){return"italic"==
a.styles["font-style"]}]],underline:["u",["span",function(a){return"underline"==a.styles["text-decoration"]}]],strike:["s","strike",["span",function(a){return"line-through"==a.styles["text-decoration"]}]],subscript:["sub"],superscript:["sup"]},b=c.config,a=c.lang.basicstyles;d("Bold",a.bold,"bold",b.coreStyles_bold);d("Italic",a.italic,"italic",b.coreStyles_italic);d("Underline",a.underline,"underline",b.coreStyles_underline);d("Strike",a.strike,"strike",b.coreStyles_strike);d("Subscript",a.subscript,
"subscript",b.coreStyles_subscript);d("Superscript",a.superscript,"superscript",b.coreStyles_superscript);c.setKeystroke([[CKEDITOR.CTRL+66,"bold"],[CKEDITOR.CTRL+73,"italic"],[CKEDITOR.CTRL+85,"underline"]])}});CKEDITOR.config.coreStyles_bold={element:"strong",overrides:"b"};CKEDITOR.config.coreStyles_italic={element:"em",overrides:"i"};CKEDITOR.config.coreStyles_underline={element:"u"};CKEDITOR.config.coreStyles_strike={element:"s",overrides:"strike"};CKEDITOR.config.coreStyles_subscript={element:"sub"};
CKEDITOR.config.coreStyles_superscript={element:"sup"};(function(){function q(a,f,d,b){if(!a.isReadOnly()&&!a.equals(d.editable())){CKEDITOR.dom.element.setMarker(b,a,"bidi_processed",1);b=a;for(var c=d.editable();(b=b.getParent())&&!b.equals(c);)if(b.getCustomData("bidi_processed")){a.removeStyle("direction");a.removeAttribute("dir");return}b="useComputedState"in d.config?d.config.useComputedState:1;(b?a.getComputedStyle("direction"):a.getStyle("direction")||a.hasAttribute("dir"))!=f&&(a.removeStyle("direction"),b?(a.removeAttribute("dir"),f!=a.getComputedStyle("direction")&&
a.setAttribute("dir",f)):a.setAttribute("dir",f),d.forceNextSelectionCheck())}}function v(a,f,d){var b=a.getCommonAncestor(!1,!0);a=a.clone();a.enlarge(d==CKEDITOR.ENTER_BR?CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS:CKEDITOR.ENLARGE_BLOCK_CONTENTS);if(a.checkBoundaryOfElement(b,CKEDITOR.START)&&a.checkBoundaryOfElement(b,CKEDITOR.END)){for(var c;b&&b.type==CKEDITOR.NODE_ELEMENT&&(c=b.getParent())&&1==c.getChildCount()&&!(b.getName()in f);)b=c;return b.type==CKEDITOR.NODE_ELEMENT&&b.getName()in f&&b}}function p(a){return{context:"p",
allowedContent:{"h1 h2 h3 h4 h5 h6 table ul ol blockquote div tr p div li td":{propertiesOnly:!0,attributes:"dir"}},requiredContent:"p[dir]",refresh:function(a,d){var b=a.config.useComputedState,c,b=void 0===b||b;if(!b){c=d.lastElement;for(var h=a.editable();c&&!(c.getName()in u||c.equals(h));){var e=c.getParent();if(!e)break;c=e}}c=c||d.block||d.blockLimit;c.equals(a.editable())&&(h=a.getSelection().getRanges()[0].getEnclosedNode())&&h.type==CKEDITOR.NODE_ELEMENT&&(c=h);c&&(b=b?c.getComputedStyle("direction"):
c.getStyle("direction")||c.getAttribute("dir"),a.getCommand("bidirtl").setState("rtl"==b?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF),a.getCommand("bidiltr").setState("ltr"==b?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF));b=(d.block||d.blockLimit||a.editable()).getDirection(1);b!=(a._.selDir||a.lang.dir)&&(a._.selDir=b,a.fire("contentDirChanged",b))},exec:function(f){var d=f.getSelection(),b=f.config.enterMode,c=d.getRanges();if(c&&c.length){for(var h={},e=d.createBookmarks(),c=c.createIterator(),g,
l=0;g=c.getNextRange(1);){var k=g.getEnclosedNode();k&&(!k||k.type==CKEDITOR.NODE_ELEMENT&&k.getName()in r)||(k=v(g,t,b));k&&q(k,a,f,h);var m=new CKEDITOR.dom.walker(g),n=e[l].startNode,p=e[l++].endNode;m.evaluator=function(a){var c=b==CKEDITOR.ENTER_P?"p":"div",d;if(d=(a?a.type==CKEDITOR.NODE_ELEMENT:!1)&&a.getName()in t){if(c=a.is(c))c=(c=a.getParent())?c.type==CKEDITOR.NODE_ELEMENT:!1;d=!(c&&a.getParent().is("blockquote"))}return!!(d&&a.getPosition(n)&CKEDITOR.POSITION_FOLLOWING&&(a.getPosition(p)&
CKEDITOR.POSITION_PRECEDING+CKEDITOR.POSITION_CONTAINS)==CKEDITOR.POSITION_PRECEDING)};for(;k=m.next();)q(k,a,f,h);g=g.createIterator();for(g.enlargeBr=b!=CKEDITOR.ENTER_BR;k=g.getNextParagraph(b==CKEDITOR.ENTER_P?"p":"div");)q(k,a,f,h)}CKEDITOR.dom.element.clearAllMarkers(h);f.forceNextSelectionCheck();d.selectBookmarks(e);f.focus()}}}}function w(a){var f=a==l.setAttribute,d=a==l.removeAttribute,b=/\bdirection\s*:\s*(.*?)\s*(:?$|;)/;return function(c,h){if(!this.isReadOnly()){var e;if(e=c==(f||d?
"dir":"direction")||"style"==c&&(d||b.test(h))){a:{e=this;for(var g=e.getDocument().getBody().getParent();e;){if(e.equals(g)){e=!1;break a}e=e.getParent()}e=!0}e=!e}if(e&&(e=this.getDirection(1),g=a.apply(this,arguments),e!=this.getDirection(1)))return this.getDocument().fire("dirChanged",this),g}return a.apply(this,arguments)}}var t={table:1,ul:1,ol:1,blockquote:1,div:1},r={},u={};CKEDITOR.tools.extend(r,t,{tr:1,p:1,div:1,li:1});CKEDITOR.tools.extend(u,r,{td:1});CKEDITOR.plugins.add("bidi",{init:function(a){function f(b,
c,d,e,f){a.addCommand(d,new CKEDITOR.command(a,e));a.ui.addButton&&a.ui.addButton(b,{label:c,command:d,toolbar:"bidi,"+f})}if(!a.blockless){var d=a.lang.bidi;f("BidiLtr",d.ltr,"bidiltr",p("ltr"),10);f("BidiRtl",d.rtl,"bidirtl",p("rtl"),20);a.on("contentDom",function(){a.document.on("dirChanged",function(b){a.fire("dirChanged",{node:b.data,dir:b.data.getDirection(1)})})});a.on("contentDirChanged",function(b){b=(a.lang.dir!=b.data?"add":"remove")+"Class";var c=a.ui.space(a.config.toolbarLocation);if(c)c[b]("cke_mixed_dir_content")})}}});
for(var l=CKEDITOR.dom.element.prototype,n=["setStyle","removeStyle","setAttribute","removeAttribute"],m=0;m<n.length;m++)l[n[m]]=CKEDITOR.tools.override(l[n[m]],w)})();(function(){var m={exec:function(g){var a=g.getCommand("blockquote").state,k=g.getSelection(),c=k&&k.getRanges()[0];if(c){var h=k.createBookmarks();if(CKEDITOR.env.ie){var e=h[0].startNode,b=h[0].endNode,d;if(e&&"blockquote"==e.getParent().getName())for(d=e;d=d.getNext();)if(d.type==CKEDITOR.NODE_ELEMENT&&d.isBlockBoundary()){e.move(d,!0);break}if(b&&"blockquote"==b.getParent().getName())for(d=b;d=d.getPrevious();)if(d.type==CKEDITOR.NODE_ELEMENT&&d.isBlockBoundary()){b.move(d);break}}var f=c.createIterator();
f.enlargeBr=g.config.enterMode!=CKEDITOR.ENTER_BR;if(a==CKEDITOR.TRISTATE_OFF){for(e=[];a=f.getNextParagraph();)e.push(a);1>e.length&&(a=g.document.createElement(g.config.enterMode==CKEDITOR.ENTER_P?"p":"div"),b=h.shift(),c.insertNode(a),a.append(new CKEDITOR.dom.text("﻿",g.document)),c.moveToBookmark(b),c.selectNodeContents(a),c.collapse(!0),b=c.createBookmark(),e.push(a),h.unshift(b));d=e[0].getParent();c=[];for(b=0;b<e.length;b++)a=e[b],d=d.getCommonAncestor(a.getParent());for(a={table:1,tbody:1,
tr:1,ol:1,ul:1};a[d.getName()];)d=d.getParent();for(b=null;0<e.length;){for(a=e.shift();!a.getParent().equals(d);)a=a.getParent();a.equals(b)||c.push(a);b=a}for(;0<c.length;)if(a=c.shift(),"blockquote"==a.getName()){for(b=new CKEDITOR.dom.documentFragment(g.document);a.getFirst();)b.append(a.getFirst().remove()),e.push(b.getLast());b.replace(a)}else e.push(a);c=g.document.createElement("blockquote");for(c.insertBefore(e[0]);0<e.length;)a=e.shift(),c.append(a)}else if(a==CKEDITOR.TRISTATE_ON){b=[];
for(d={};a=f.getNextParagraph();){for(e=c=null;a.getParent();){if("blockquote"==a.getParent().getName()){c=a.getParent();e=a;break}a=a.getParent()}c&&e&&!e.getCustomData("blockquote_moveout")&&(b.push(e),CKEDITOR.dom.element.setMarker(d,e,"blockquote_moveout",!0))}CKEDITOR.dom.element.clearAllMarkers(d);a=[];e=[];for(d={};0<b.length;)f=b.shift(),c=f.getParent(),f.getPrevious()?f.getNext()?(f.breakParent(f.getParent()),e.push(f.getNext())):f.remove().insertAfter(c):f.remove().insertBefore(c),c.getCustomData("blockquote_processed")||
(e.push(c),CKEDITOR.dom.element.setMarker(d,c,"blockquote_processed",!0)),a.push(f);CKEDITOR.dom.element.clearAllMarkers(d);for(b=e.length-1;0<=b;b--){c=e[b];a:{d=c;for(var f=0,m=d.getChildCount(),l=void 0;f<m&&(l=d.getChild(f));f++)if(l.type==CKEDITOR.NODE_ELEMENT&&l.isBlockBoundary()){d=!1;break a}d=!0}d&&c.remove()}if(g.config.enterMode==CKEDITOR.ENTER_BR)for(c=!0;a.length;)if(f=a.shift(),"div"==f.getName()){b=new CKEDITOR.dom.documentFragment(g.document);!c||!f.getPrevious()||f.getPrevious().type==
CKEDITOR.NODE_ELEMENT&&f.getPrevious().isBlockBoundary()||b.append(g.document.createElement("br"));for(c=f.getNext()&&!(f.getNext().type==CKEDITOR.NODE_ELEMENT&&f.getNext().isBlockBoundary());f.getFirst();)f.getFirst().remove().appendTo(b);c&&b.append(g.document.createElement("br"));b.replace(f);c=!1}}k.selectBookmarks(h);g.focus()}},refresh:function(g,a){this.setState(g.elementPath(a.block||a.blockLimit).contains("blockquote",1)?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF)},context:"blockquote",allowedContent:"blockquote",
requiredContent:"blockquote"};CKEDITOR.plugins.add("blockquote",{init:function(g){g.blockless||(g.addCommand("blockquote",m),g.ui.addButton&&g.ui.addButton("Blockquote",{label:g.lang.blockquote.toolbar,command:"blockquote",toolbar:"blocks,10"}))}})})();(function(){function r(b,a,c){a.type||(a.type="auto");if(c&&!1===b.fire("beforePaste",a)||!a.dataValue&&a.dataTransfer.isEmpty())return!1;a.dataValue||(a.dataValue="");if(CKEDITOR.env.gecko&&"drop"==a.method&&b.toolbox)b.once("afterPaste",function(){b.toolbox.focus()});return b.fire("paste",a)}function y(b){function a(){var a=b.editable();if(CKEDITOR.plugins.clipboard.isCustomCopyCutSupported){var d=function(a){b.readOnly&&"cut"==a.name||n.initPasteDataTransfer(a,b);a.data.preventDefault()};a.on("copy",
d);a.on("cut",d);a.on("cut",function(){b.readOnly||b.extractSelectedHtml()},null,null,999)}a.on(n.mainPasteEvent,function(b){"beforepaste"==n.mainPasteEvent&&p||k(b)});"beforepaste"==n.mainPasteEvent&&(a.on("paste",function(a){v||(e(),a.data.preventDefault(),k(a),f("paste")||b.openDialog("paste"))}),a.on("contextmenu",g,null,null,0),a.on("beforepaste",function(b){!b.data||b.data.$.ctrlKey||b.data.$.shiftKey||g()},null,null,0));a.on("beforecut",function(){!p&&h(b)});var c;a.attachListener(CKEDITOR.env.ie?
a:b.document.getDocumentElement(),"mouseup",function(){c=setTimeout(function(){t()},0)});b.on("destroy",function(){clearTimeout(c)});a.on("keyup",t)}function c(a){return{type:a,canUndo:"cut"==a,startDisabled:!0,exec:function(){"cut"==this.type&&h();var a;var d=this.type;if(CKEDITOR.env.ie)a=f(d);else try{a=b.document.$.execCommand(d,!1,null)}catch(c){a=!1}a||b.showNotification(b.lang.clipboard[this.type+"Error"]);return a}}}function d(){return{canUndo:!1,async:!0,exec:function(b,a){var d=this,c=function(a,
c){a&&r(b,a,!!c);b.fire("afterCommandExec",{name:"paste",command:d,returnValue:!!a})};"string"==typeof a?c({dataValue:a,method:"paste",dataTransfer:n.initPasteDataTransfer()},1):b.getClipboardData(c)}}}function e(){v=1;setTimeout(function(){v=0},100)}function g(){p=1;setTimeout(function(){p=0},10)}function f(a){var d=b.document,c=d.getBody(),e=!1,f=function(){e=!0};c.on(a,f);7<CKEDITOR.env.version?d.$.execCommand(a):d.$.selection.createRange().execCommand(a);c.removeListener(a,f);return e}function h(){if(CKEDITOR.env.ie&&
!CKEDITOR.env.quirks){var a=b.getSelection(),d,c,e;a.getType()==CKEDITOR.SELECTION_ELEMENT&&(d=a.getSelectedElement())&&(c=a.getRanges()[0],e=b.document.createText(""),e.insertBefore(d),c.setStartBefore(e),c.setEndAfter(d),a.selectRanges([c]),setTimeout(function(){d.getParent()&&(e.remove(),a.selectElement(d))},0))}}function l(a,d){var c=b.document,e=b.editable(),f=function(b){b.cancel()},q;if(!c.getById("cke_pastebin")){var g=b.getSelection(),h=g.createBookmarks();CKEDITOR.env.ie&&g.root.fire("selectionchange");
var m=new CKEDITOR.dom.element(!CKEDITOR.env.webkit&&!e.is("body")||CKEDITOR.env.ie?"div":"body",c);m.setAttributes({id:"cke_pastebin","data-cke-temp":"1"});var k=0,c=c.getWindow();CKEDITOR.env.webkit?(e.append(m),m.addClass("cke_editable"),e.is("body")||(k="static"!=e.getComputedStyle("position")?e:CKEDITOR.dom.element.get(e.$.offsetParent),k=k.getDocumentPosition().y)):e.getAscendant(CKEDITOR.env.ie?"body":"html",1).append(m);m.setStyles({position:"absolute",top:c.getScrollPosition().y-k+10+"px",
width:"1px",height:Math.max(1,c.getViewPaneSize().height-20)+"px",overflow:"hidden",margin:0,padding:0});CKEDITOR.env.safari&&m.setStyles(CKEDITOR.tools.cssVendorPrefix("user-select","text"));(k=m.getParent().isReadOnly())?(m.setOpacity(0),m.setAttribute("contenteditable",!0)):m.setStyle("ltr"==b.config.contentsLangDirection?"left":"right","-10000px");b.on("selectionChange",f,null,null,0);if(CKEDITOR.env.webkit||CKEDITOR.env.gecko)q=e.once("blur",f,null,null,-100);k&&m.focus();k=new CKEDITOR.dom.range(m);
k.selectNodeContents(m);var t=k.select();CKEDITOR.env.ie&&(q=e.once("blur",function(){b.lockSelection(t)}));var l=CKEDITOR.document.getWindow().getScrollPosition().y;setTimeout(function(){CKEDITOR.env.webkit&&(CKEDITOR.document.getBody().$.scrollTop=l);q&&q.removeListener();CKEDITOR.env.ie&&e.focus();g.selectBookmarks(h);m.remove();var a;CKEDITOR.env.webkit&&(a=m.getFirst())&&a.is&&a.hasClass("Apple-style-span")&&(m=a);b.removeListener("selectionChange",f);d(m.getHtml())},0)}}function z(){if("paste"==
n.mainPasteEvent)return b.fire("beforePaste",{type:"auto",method:"paste"}),!1;b.focus();e();var a=b.focusManager;a.lock();if(b.editable().fire(n.mainPasteEvent)&&!f("paste"))return a.unlock(),!1;a.unlock();return!0}function q(a){if("wysiwyg"==b.mode)switch(a.data.keyCode){case CKEDITOR.CTRL+86:case CKEDITOR.SHIFT+45:a=b.editable();e();"paste"==n.mainPasteEvent&&a.fire("beforepaste");break;case CKEDITOR.CTRL+88:case CKEDITOR.SHIFT+46:b.fire("saveSnapshot"),setTimeout(function(){b.fire("saveSnapshot")},
50)}}function k(a){var d={type:"auto",method:"paste",dataTransfer:n.initPasteDataTransfer(a)};d.dataTransfer.cacheData();var c=!1!==b.fire("beforePaste",d);c&&n.canClipboardApiBeTrusted(d.dataTransfer,b)?(a.data.preventDefault(),setTimeout(function(){r(b,d)},0)):l(a,function(a){d.dataValue=a.replace(/<span[^>]+data-cke-bookmark[^<]*?<\/span>/ig,"");c&&r(b,d)})}function t(){if("wysiwyg"==b.mode){var a=u("paste");b.getCommand("cut").setState(u("cut"));b.getCommand("copy").setState(u("copy"));b.getCommand("paste").setState(a);
b.fire("pasteState",a)}}function u(a){if(w&&a in{paste:1,cut:1})return CKEDITOR.TRISTATE_DISABLED;if("paste"==a)return CKEDITOR.TRISTATE_OFF;a=b.getSelection();var d=a.getRanges();return a.getType()==CKEDITOR.SELECTION_NONE||1==d.length&&d[0].collapsed?CKEDITOR.TRISTATE_DISABLED:CKEDITOR.TRISTATE_OFF}var n=CKEDITOR.plugins.clipboard,p=0,v=0,w=0;(function(){b.on("key",q);b.on("contentDom",a);b.on("selectionChange",function(b){w=b.data.selection.getRanges()[0].checkReadOnly();t()});b.contextMenu&&b.contextMenu.addListener(function(b,
a){w=a.getRanges()[0].checkReadOnly();return{cut:u("cut"),copy:u("copy"),paste:u("paste")}})})();(function(){function a(d,c,e,f,q){var g=b.lang.clipboard[c];b.addCommand(c,e);b.ui.addButton&&b.ui.addButton(d,{label:g,command:c,toolbar:"clipboard,"+f});b.addMenuItems&&b.addMenuItem(c,{label:g,command:c,group:"clipboard",order:q})}a("Cut","cut",c("cut"),10,1);a("Copy","copy",c("copy"),20,4);a("Paste","paste",d(),30,8)})();b.getClipboardData=function(a,d){function c(a){a.removeListener();a.cancel();
d(a.data)}function e(a){a.removeListener();a.cancel();k=!0;d({type:g,dataValue:a.data.dataValue,dataTransfer:a.data.dataTransfer,method:"paste"})}function f(){this.customTitle=a&&a.title}var q=!1,g="auto",k=!1;d||(d=a,a=null);b.on("paste",c,null,null,0);b.on("beforePaste",function(a){a.removeListener();q=!0;g=a.data.type},null,null,1E3);!1===z()&&(b.removeListener("paste",c),q&&b.fire("pasteDialog",f)?(b.on("pasteDialogCommit",e),b.on("dialogHide",function(a){a.removeListener();a.data.removeListener("pasteDialogCommit",
e);setTimeout(function(){k||d(null)},10)})):d(null))}}function A(b){if(CKEDITOR.env.webkit){if(!b.match(/^[^<]*$/g)&&!b.match(/^(<div><br( ?\/)?><\/div>|<div>[^<]*<\/div>)*$/gi))return"html"}else if(CKEDITOR.env.ie){if(!b.match(/^([^<]|<br( ?\/)?>)*$/gi)&&!b.match(/^(<p>([^<]|<br( ?\/)?>)*<\/p>|(\r\n))*$/gi))return"html"}else if(CKEDITOR.env.gecko){if(!b.match(/^([^<]|<br( ?\/)?>)*$/gi))return"html"}else return"html";return"htmlifiedtext"}function B(b,a){function c(a){return CKEDITOR.tools.repeat("\x3c/p\x3e\x3cp\x3e",
~~(a/2))+(1==a%2?"\x3cbr\x3e":"")}a=a.replace(/\s+/g," ").replace(/> +</g,"\x3e\x3c").replace(/<br ?\/>/gi,"\x3cbr\x3e");a=a.replace(/<\/?[A-Z]+>/g,function(a){return a.toLowerCase()});if(a.match(/^[^<]$/))return a;CKEDITOR.env.webkit&&-1<a.indexOf("\x3cdiv\x3e")&&(a=a.replace(/^(<div>(<br>|)<\/div>)(?!$|(<div>(<br>|)<\/div>))/g,"\x3cbr\x3e").replace(/^(<div>(<br>|)<\/div>){2}(?!$)/g,"\x3cdiv\x3e\x3c/div\x3e"),a.match(/<div>(<br>|)<\/div>/)&&(a="\x3cp\x3e"+a.replace(/(<div>(<br>|)<\/div>)+/g,function(a){return c(a.split("\x3c/div\x3e\x3cdiv\x3e").length+
1)})+"\x3c/p\x3e"),a=a.replace(/<\/div><div>/g,"\x3cbr\x3e"),a=a.replace(/<\/?div>/g,""));CKEDITOR.env.gecko&&b.enterMode!=CKEDITOR.ENTER_BR&&(CKEDITOR.env.gecko&&(a=a.replace(/^<br><br>$/,"\x3cbr\x3e")),-1<a.indexOf("\x3cbr\x3e\x3cbr\x3e")&&(a="\x3cp\x3e"+a.replace(/(<br>){2,}/g,function(a){return c(a.length/4)})+"\x3c/p\x3e"));return C(b,a)}function D(){function b(){var a={},b;for(b in CKEDITOR.dtd)"$"!=b.charAt(0)&&"div"!=b&&"span"!=b&&(a[b]=1);return a}var a={};return{get:function(c){return"plain-text"==
c?a.plainText||(a.plainText=new CKEDITOR.filter("br")):"semantic-content"==c?((c=a.semanticContent)||(c=new CKEDITOR.filter,c.allow({$1:{elements:b(),attributes:!0,styles:!1,classes:!1}}),c=a.semanticContent=c),c):c?new CKEDITOR.filter(c):null}}}function x(b,a,c){a=CKEDITOR.htmlParser.fragment.fromHtml(a);var d=new CKEDITOR.htmlParser.basicWriter;c.applyTo(a,!0,!1,b.activeEnterMode);a.writeHtml(d);return d.getHtml()}function C(b,a){b.enterMode==CKEDITOR.ENTER_BR?a=a.replace(/(<\/p><p>)+/g,function(a){return CKEDITOR.tools.repeat("\x3cbr\x3e",
a.length/7*2)}).replace(/<\/?p>/g,""):b.enterMode==CKEDITOR.ENTER_DIV&&(a=a.replace(/<(\/)?p>/g,"\x3c$1div\x3e"));return a}function E(b){b.data.preventDefault();b.data.$.dataTransfer.dropEffect="none"}function F(b){var a=CKEDITOR.plugins.clipboard;b.on("contentDom",function(){function c(a,d,c){d.select();r(b,{dataTransfer:c,method:"drop"},1);c.sourceEditor.fire("saveSnapshot");c.sourceEditor.editable().extractHtmlFromRange(a);c.sourceEditor.getSelection().selectRanges([a]);c.sourceEditor.fire("saveSnapshot")}
function d(d,c){d.select();r(b,{dataTransfer:c,method:"drop"},1);a.resetDragDataTransfer()}function e(a,d,c){var e={$:a.data.$,target:a.data.getTarget()};d&&(e.dragRange=d);c&&(e.dropRange=c);!1===b.fire(a.name,e)&&a.data.preventDefault()}function g(a){a.type!=CKEDITOR.NODE_ELEMENT&&(a=a.getParent());return a.getChildCount()}var f=b.editable(),h=CKEDITOR.plugins.clipboard.getDropTarget(b),l=b.ui.space("top"),p=b.ui.space("bottom");a.preventDefaultDropOnElement(l);a.preventDefaultDropOnElement(p);
f.attachListener(h,"dragstart",e);f.attachListener(b,"dragstart",a.resetDragDataTransfer,a,null,1);f.attachListener(b,"dragstart",function(d){a.initDragDataTransfer(d,b)},null,null,2);f.attachListener(b,"dragstart",function(){var d=a.dragRange=b.getSelection().getRanges()[0];CKEDITOR.env.ie&&10>CKEDITOR.env.version&&(a.dragStartContainerChildCount=d?g(d.startContainer):null,a.dragEndContainerChildCount=d?g(d.endContainer):null)},null,null,100);f.attachListener(h,"dragend",e);f.attachListener(b,"dragend",
a.initDragDataTransfer,a,null,1);f.attachListener(b,"dragend",a.resetDragDataTransfer,a,null,100);f.attachListener(h,"dragover",function(a){var b=a.data.getTarget();b&&b.is&&b.is("html")?a.data.preventDefault():CKEDITOR.env.ie&&CKEDITOR.plugins.clipboard.isFileApiSupported&&a.data.$.dataTransfer.types.contains("Files")&&a.data.preventDefault()});f.attachListener(h,"drop",function(d){if(!d.data.$.defaultPrevented){d.data.preventDefault();var c=d.data.getTarget();if(!c.isReadOnly()||c.type==CKEDITOR.NODE_ELEMENT&&
c.is("html")){var c=a.getRangeAtDropPosition(d,b),f=a.dragRange;c&&e(d,f,c)}}},null,null,9999);f.attachListener(b,"drop",a.initDragDataTransfer,a,null,1);f.attachListener(b,"drop",function(e){if(e=e.data){var f=e.dropRange,g=e.dragRange,h=e.dataTransfer;h.getTransferType(b)==CKEDITOR.DATA_TRANSFER_INTERNAL?setTimeout(function(){a.internalDrop(g,f,h,b)},0):h.getTransferType(b)==CKEDITOR.DATA_TRANSFER_CROSS_EDITORS?c(g,f,h):d(f,h)}},null,null,9999)})}CKEDITOR.plugins.add("clipboard",{requires:"dialog",
init:function(b){var a,c=D();b.config.forcePasteAsPlainText?a="plain-text":b.config.pasteFilter?a=b.config.pasteFilter:!CKEDITOR.env.webkit||"pasteFilter"in b.config||(a="semantic-content");b.pasteFilter=c.get(a);y(b);F(b);CKEDITOR.dialog.add("paste",CKEDITOR.getUrl(this.path+"dialogs/paste.js"));b.on("paste",function(a){a.data.dataTransfer||(a.data.dataTransfer=new CKEDITOR.plugins.clipboard.dataTransfer);if(!a.data.dataValue){var c=a.data.dataTransfer,g=c.getData("text/html");if(g)a.data.dataValue=
g,a.data.type="html";else if(g=c.getData("text/plain"))a.data.dataValue=b.editable().transformPlainTextToHtml(g),a.data.type="text"}},null,null,1);b.on("paste",function(a){var b=a.data.dataValue,c=CKEDITOR.dtd.$block;-1<b.indexOf("Apple-")&&(b=b.replace(/<span class="Apple-converted-space">&nbsp;<\/span>/gi," "),"html"!=a.data.type&&(b=b.replace(/<span class="Apple-tab-span"[^>]*>([^<]*)<\/span>/gi,function(a,b){return b.replace(/\t/g,"\x26nbsp;\x26nbsp; \x26nbsp;")})),-1<b.indexOf('\x3cbr class\x3d"Apple-interchange-newline"\x3e')&&
(a.data.startsWithEOL=1,a.data.preSniffing="html",b=b.replace(/<br class="Apple-interchange-newline">/,"")),b=b.replace(/(<[^>]+) class="Apple-[^"]*"/gi,"$1"));if(b.match(/^<[^<]+cke_(editable|contents)/i)){var f,h,l=new CKEDITOR.dom.element("div");for(l.setHtml(b);1==l.getChildCount()&&(f=l.getFirst())&&f.type==CKEDITOR.NODE_ELEMENT&&(f.hasClass("cke_editable")||f.hasClass("cke_contents"));)l=h=f;h&&(b=h.getHtml().replace(/<br>$/i,""))}CKEDITOR.env.ie?b=b.replace(/^&nbsp;(?: |\r\n)?<(\w+)/g,function(b,
f){return f.toLowerCase()in c?(a.data.preSniffing="html","\x3c"+f):b}):CKEDITOR.env.webkit?b=b.replace(/<\/(\w+)><div><br><\/div>$/,function(b,f){return f in c?(a.data.endsWithEOL=1,"\x3c/"+f+"\x3e"):b}):CKEDITOR.env.gecko&&(b=b.replace(/(\s)<br>$/,"$1"));a.data.dataValue=b},null,null,3);b.on("paste",function(a){a=a.data;var e=a.type,g=a.dataValue,f,h=b.config.clipboard_defaultContentType||"html",l=a.dataTransfer.getTransferType(b);f="html"==e||"html"==a.preSniffing?"html":A(g);"htmlifiedtext"==f&&
(g=B(b.config,g));"text"==e&&"html"==f?g=x(b,g,c.get("plain-text")):l==CKEDITOR.DATA_TRANSFER_EXTERNAL&&b.pasteFilter&&!a.dontFilter&&(g=x(b,g,b.pasteFilter));a.startsWithEOL&&(g='\x3cbr data-cke-eol\x3d"1"\x3e'+g);a.endsWithEOL&&(g+='\x3cbr data-cke-eol\x3d"1"\x3e');"auto"==e&&(e="html"==f||"html"==h?"html":"text");a.type=e;a.dataValue=g;delete a.preSniffing;delete a.startsWithEOL;delete a.endsWithEOL},null,null,6);b.on("paste",function(a){a=a.data;a.dataValue&&(b.insertHtml(a.dataValue,a.type,a.range),
setTimeout(function(){b.fire("afterPaste")},0))},null,null,1E3);b.on("pasteDialog",function(a){setTimeout(function(){b.openDialog("paste",a.data)},0)})}});CKEDITOR.plugins.clipboard={isCustomCopyCutSupported:!CKEDITOR.env.ie&&!CKEDITOR.env.iOS,isCustomDataTypesSupported:!CKEDITOR.env.ie,isFileApiSupported:!CKEDITOR.env.ie||9<CKEDITOR.env.version,mainPasteEvent:CKEDITOR.env.ie&&!CKEDITOR.env.edge?"beforepaste":"paste",canClipboardApiBeTrusted:function(b,a){return b.getTransferType(a)!=CKEDITOR.DATA_TRANSFER_EXTERNAL||
CKEDITOR.env.chrome&&!b.isEmpty()||CKEDITOR.env.gecko&&(b.getData("text/html")||b.getFilesCount())?!0:!1},getDropTarget:function(b){var a=b.editable();return CKEDITOR.env.ie&&9>CKEDITOR.env.version||a.isInline()?a:b.document},fixSplitNodesAfterDrop:function(b,a,c,d){function e(b,c,d){var e=b;e.type==CKEDITOR.NODE_TEXT&&(e=b.getParent());if(e.equals(c)&&d!=c.getChildCount())return b=a.startContainer.getChild(a.startOffset-1),c=a.startContainer.getChild(a.startOffset),b&&b.type==CKEDITOR.NODE_TEXT&&
c&&c.type==CKEDITOR.NODE_TEXT&&(d=b.getLength(),b.setText(b.getText()+c.getText()),c.remove(),a.setStart(b,d),a.collapse(!0)),!0}var g=a.startContainer;"number"==typeof d&&"number"==typeof c&&g.type==CKEDITOR.NODE_ELEMENT&&(e(b.startContainer,g,c)||e(b.endContainer,g,d))},isDropRangeAffectedByDragRange:function(b,a){var c=a.startContainer,d=a.endOffset;return b.endContainer.equals(c)&&b.endOffset<=d||b.startContainer.getParent().equals(c)&&b.startContainer.getIndex()<d||b.endContainer.getParent().equals(c)&&
b.endContainer.getIndex()<d?!0:!1},internalDrop:function(b,a,c,d){var e=CKEDITOR.plugins.clipboard,g=d.editable(),f,h;d.fire("saveSnapshot");d.fire("lockSnapshot",{dontUpdate:1});CKEDITOR.env.ie&&10>CKEDITOR.env.version&&this.fixSplitNodesAfterDrop(b,a,e.dragStartContainerChildCount,e.dragEndContainerChildCount);(h=this.isDropRangeAffectedByDragRange(b,a))||(f=b.createBookmark(!1));e=a.clone().createBookmark(!1);h&&(f=b.createBookmark(!1));b=f.startNode;a=f.endNode;h=e.startNode;a&&b.getPosition(h)&
CKEDITOR.POSITION_PRECEDING&&a.getPosition(h)&CKEDITOR.POSITION_FOLLOWING&&h.insertBefore(b);b=d.createRange();b.moveToBookmark(f);g.extractHtmlFromRange(b,1);a=d.createRange();a.moveToBookmark(e);r(d,{dataTransfer:c,method:"drop",range:a},1);d.fire("unlockSnapshot")},getRangeAtDropPosition:function(b,a){var c=b.data.$,d=c.clientX,e=c.clientY,g=a.getSelection(!0).getRanges()[0],f=a.createRange();if(b.data.testRange)return b.data.testRange;if(document.caretRangeFromPoint)c=a.document.$.caretRangeFromPoint(d,
e),f.setStart(CKEDITOR.dom.node(c.startContainer),c.startOffset),f.collapse(!0);else if(c.rangeParent)f.setStart(CKEDITOR.dom.node(c.rangeParent),c.rangeOffset),f.collapse(!0);else{if(CKEDITOR.env.ie&&8<CKEDITOR.env.version&&g&&a.editable().hasFocus)return g;if(document.body.createTextRange){a.focus();c=a.document.getBody().$.createTextRange();try{for(var h=!1,l=0;20>l&&!h;l++){if(!h)try{c.moveToPoint(d,e-l),h=!0}catch(p){}if(!h)try{c.moveToPoint(d,e+l),h=!0}catch(q){}}if(h){var k="cke-temp-"+(new Date).getTime();
c.pasteHTML('\x3cspan id\x3d"'+k+'"\x3e​\x3c/span\x3e');var t=a.document.getById(k);f.moveToPosition(t,CKEDITOR.POSITION_BEFORE_START);t.remove()}else{var u=a.document.$.elementFromPoint(d,e),n=new CKEDITOR.dom.element(u),r;if(n.equals(a.editable())||"html"==n.getName())return g&&g.startContainer&&!g.startContainer.equals(a.editable())?g:null;r=n.getClientRect();d<r.left?f.setStartAt(n,CKEDITOR.POSITION_AFTER_START):f.setStartAt(n,CKEDITOR.POSITION_BEFORE_END);f.collapse(!0)}}catch(v){return null}}else return null}return f},
initDragDataTransfer:function(b,a){var c=b.data.$?b.data.$.dataTransfer:null,d=new this.dataTransfer(c,a);c?this.dragData&&d.id==this.dragData.id?d=this.dragData:this.dragData=d:this.dragData?d=this.dragData:this.dragData=d;b.data.dataTransfer=d},resetDragDataTransfer:function(){this.dragData=null},initPasteDataTransfer:function(b,a){if(this.isCustomCopyCutSupported&&b&&b.data&&b.data.$){var c=new this.dataTransfer(b.data.$.clipboardData,a);this.copyCutData&&c.id==this.copyCutData.id?(c=this.copyCutData,
c.$=b.data.$.clipboardData):this.copyCutData=c;return c}return new this.dataTransfer(null,a)},preventDefaultDropOnElement:function(b){b&&b.on("dragover",E)}};var p=CKEDITOR.plugins.clipboard.isCustomDataTypesSupported?"cke/id":"Text";CKEDITOR.plugins.clipboard.dataTransfer=function(b,a){b&&(this.$=b);this._={metaRegExp:/^<meta.*?>/i,bodyRegExp:/<body(?:[\s\S]*?)>([\s\S]*)<\/body>/i,fragmentRegExp:/\x3c!--(?:Start|End)Fragment--\x3e/g,data:{},files:[],normalizeType:function(a){a=a.toLowerCase();return"text"==
a||"text/plain"==a?"Text":"url"==a?"URL":a}};this.id=this.getData(p);this.id||(this.id="Text"==p?"":"cke-"+CKEDITOR.tools.getUniqueId());if("Text"!=p)try{this.$.setData(p,this.id)}catch(c){}a&&(this.sourceEditor=a,this.setData("text/html",a.getSelectedHtml(1)),"Text"==p||this.getData("text/plain")||this.setData("text/plain",a.getSelection().getSelectedText()))};CKEDITOR.DATA_TRANSFER_INTERNAL=1;CKEDITOR.DATA_TRANSFER_CROSS_EDITORS=2;CKEDITOR.DATA_TRANSFER_EXTERNAL=3;CKEDITOR.plugins.clipboard.dataTransfer.prototype=
{getData:function(b){b=this._.normalizeType(b);var a=this._.data[b];if(void 0===a||null===a||""===a)try{a=this.$.getData(b)}catch(c){}if(void 0===a||null===a||""===a)a="";"text/html"==b?(a=a.replace(this._.metaRegExp,""),(b=this._.bodyRegExp.exec(a))&&b.length&&(a=b[1],a=a.replace(this._.fragmentRegExp,""))):"Text"==b&&CKEDITOR.env.gecko&&this.getFilesCount()&&"file://"==a.substring(0,7)&&(a="");return a},setData:function(b,a){b=this._.normalizeType(b);this._.data[b]=a;if(CKEDITOR.plugins.clipboard.isCustomDataTypesSupported||
"URL"==b||"Text"==b){"Text"==p&&"Text"==b&&(this.id=a);try{this.$.setData(b,a)}catch(c){}}},getTransferType:function(b){return this.sourceEditor?this.sourceEditor==b?CKEDITOR.DATA_TRANSFER_INTERNAL:CKEDITOR.DATA_TRANSFER_CROSS_EDITORS:CKEDITOR.DATA_TRANSFER_EXTERNAL},cacheData:function(){function b(b){b=a._.normalizeType(b);var c=a.getData(b);c&&(a._.data[b]=c)}if(this.$){var a=this,c,d;if(CKEDITOR.plugins.clipboard.isCustomDataTypesSupported){if(this.$.types)for(c=0;c<this.$.types.length;c++)b(this.$.types[c])}else b("Text"),
b("URL");d=this._getImageFromClipboard();if(this.$&&this.$.files||d){this._.files=[];for(c=0;c<this.$.files.length;c++)this._.files.push(this.$.files[c]);0===this._.files.length&&d&&this._.files.push(d)}}},getFilesCount:function(){return this._.files.length?this._.files.length:this.$&&this.$.files&&this.$.files.length?this.$.files.length:this._getImageFromClipboard()?1:0},getFile:function(b){return this._.files.length?this._.files[b]:this.$&&this.$.files&&this.$.files.length?this.$.files[b]:0===b?
this._getImageFromClipboard():void 0},isEmpty:function(){var b={},a;if(this.getFilesCount())return!1;for(a in this._.data)b[a]=1;if(this.$)if(CKEDITOR.plugins.clipboard.isCustomDataTypesSupported){if(this.$.types)for(var c=0;c<this.$.types.length;c++)b[this.$.types[c]]=1}else b.Text=1,b.URL=1;"Text"!=p&&(b[p]=0);for(a in b)if(b[a]&&""!==this.getData(a))return!1;return!0},_getImageFromClipboard:function(){var b;if(this.$&&this.$.items&&this.$.items[0])try{if((b=this.$.items[0].getAsFile())&&b.type)return b}catch(a){}}}})();(function(){var c='\x3ca id\x3d"{id}" class\x3d"cke_button cke_button__{name} cke_button_{state} {cls}"'+(CKEDITOR.env.gecko&&!CKEDITOR.env.hc?"":" href\x3d\"javascript:void('{titleJs}')\"")+' title\x3d"{title}" tabindex\x3d"-1" hidefocus\x3d"true" role\x3d"button" aria-labelledby\x3d"{id}_label" aria-haspopup\x3d"{hasArrow}" aria-disabled\x3d"{ariaDisabled}"';CKEDITOR.env.gecko&&CKEDITOR.env.mac&&(c+=' onkeypress\x3d"return false;"');CKEDITOR.env.gecko&&(c+=' onblur\x3d"this.style.cssText \x3d this.style.cssText;"');
var c=c+(' onkeydown\x3d"return CKEDITOR.tools.callFunction({keydownFn},event);" onfocus\x3d"return CKEDITOR.tools.callFunction({focusFn},event);" '+(CKEDITOR.env.ie?'onclick\x3d"return false;" onmouseup':"onclick")+'\x3d"CKEDITOR.tools.callFunction({clickFn},this);return false;"\x3e\x3cspan class\x3d"cke_button_icon cke_button__{iconName}_icon" style\x3d"{style}"'),c=c+'\x3e\x26nbsp;\x3c/span\x3e\x3cspan id\x3d"{id}_label" class\x3d"cke_button_label cke_button__{name}_label" aria-hidden\x3d"false"\x3e{label}\x3c/span\x3e{arrowHtml}\x3c/a\x3e',
r=CKEDITOR.addTemplate("buttonArrow",'\x3cspan class\x3d"cke_button_arrow"\x3e'+(CKEDITOR.env.hc?"\x26#9660;":"")+"\x3c/span\x3e"),t=CKEDITOR.addTemplate("button",c);CKEDITOR.plugins.add("button",{beforeInit:function(a){a.ui.addHandler(CKEDITOR.UI_BUTTON,CKEDITOR.ui.button.handler)}});CKEDITOR.UI_BUTTON="button";CKEDITOR.ui.button=function(a){CKEDITOR.tools.extend(this,a,{title:a.label,click:a.click||function(b){b.execCommand(a.command)}});this._={}};CKEDITOR.ui.button.handler={create:function(a){return new CKEDITOR.ui.button(a)}};
CKEDITOR.ui.button.prototype={render:function(a,b){function c(){var e=a.mode;e&&(e=this.modes[e]?void 0!==k[e]?k[e]:CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,e=a.readOnly&&!this.readOnly?CKEDITOR.TRISTATE_DISABLED:e,this.setState(e),this.refresh&&this.refresh())}var l=CKEDITOR.env,m=this._.id=CKEDITOR.tools.getNextId(),f="",g=this.command,n;this._.editor=a;var d={id:m,button:this,editor:a,focus:function(){CKEDITOR.document.getById(m).focus()},execute:function(){this.button.click(a)},attach:function(a){this.button.attach(a)}},
u=CKEDITOR.tools.addFunction(function(a){if(d.onkey)return a=new CKEDITOR.dom.event(a),!1!==d.onkey(d,a.getKeystroke())}),v=CKEDITOR.tools.addFunction(function(a){var b;d.onfocus&&(b=!1!==d.onfocus(d,new CKEDITOR.dom.event(a)));return b}),p=0;d.clickFn=n=CKEDITOR.tools.addFunction(function(){p&&(a.unlockSelection(1),p=0);d.execute();l.iOS&&a.focus()});if(this.modes){var k={};a.on("beforeModeUnload",function(){a.mode&&this._.state!=CKEDITOR.TRISTATE_DISABLED&&(k[a.mode]=this._.state)},this);a.on("activeFilterChange",
c,this);a.on("mode",c,this);!this.readOnly&&a.on("readOnly",c,this)}else g&&(g=a.getCommand(g))&&(g.on("state",function(){this.setState(g.state)},this),f+=g.state==CKEDITOR.TRISTATE_ON?"on":g.state==CKEDITOR.TRISTATE_DISABLED?"disabled":"off");if(this.directional)a.on("contentDirChanged",function(b){var c=CKEDITOR.document.getById(this._.id),d=c.getFirst();b=b.data;b!=a.lang.dir?c.addClass("cke_"+b):c.removeClass("cke_ltr").removeClass("cke_rtl");d.setAttribute("style",CKEDITOR.skin.getIconStyle(h,
"rtl"==b,this.icon,this.iconOffset))},this);g||(f+="off");var q=this.name||this.command,h=q;this.icon&&!/\./.test(this.icon)&&(h=this.icon,this.icon=null);f={id:m,name:q,iconName:h,label:this.label,cls:this.className||"",state:f,ariaDisabled:"disabled"==f?"true":"false",title:this.title,titleJs:l.gecko&&!l.hc?"":(this.title||"").replace("'",""),hasArrow:this.hasArrow?"true":"false",keydownFn:u,focusFn:v,clickFn:n,style:CKEDITOR.skin.getIconStyle(h,"rtl"==a.lang.dir,this.icon,this.iconOffset),arrowHtml:this.hasArrow?
r.output():""};t.output(f,b);if(this.onRender)this.onRender();return d},setState:function(a){if(this._.state==a)return!1;this._.state=a;var b=CKEDITOR.document.getById(this._.id);return b?(b.setState(a,"cke_button"),a==CKEDITOR.TRISTATE_DISABLED?b.setAttribute("aria-disabled",!0):b.removeAttribute("aria-disabled"),this.hasArrow?(a=a==CKEDITOR.TRISTATE_ON?this._.editor.lang.button.selectedLabel.replace(/%1/g,this.label):this.label,CKEDITOR.document.getById(this._.id+"_label").setText(a)):a==CKEDITOR.TRISTATE_ON?
b.setAttribute("aria-pressed",!0):b.removeAttribute("aria-pressed"),!0):!1},getState:function(){return this._.state},toFeature:function(a){if(this._.feature)return this._.feature;var b=this;this.allowedContent||this.requiredContent||!this.command||(b=a.getCommand(this.command)||b);return this._.feature=b}};CKEDITOR.ui.prototype.addButton=function(a,b){this.add(a,CKEDITOR.UI_BUTTON,b)}})();CKEDITOR.plugins.add("panelbutton",{requires:"button",onLoad:function(){function e(c){var a=this._;a.state!=CKEDITOR.TRISTATE_DISABLED&&(this.createPanel(c),a.on?a.panel.hide():a.panel.showBlock(this._.id,this.document.getById(this._.id),4))}CKEDITOR.ui.panelButton=CKEDITOR.tools.createClass({base:CKEDITOR.ui.button,$:function(c){var a=c.panel||{};delete c.panel;this.base(c);this.document=a.parent&&a.parent.getDocument()||CKEDITOR.document;a.block={attributes:a.attributes};this.hasArrow=a.toolbarRelated=
!0;this.click=e;this._={panelDefinition:a}},statics:{handler:{create:function(c){return new CKEDITOR.ui.panelButton(c)}}},proto:{createPanel:function(c){var a=this._;if(!a.panel){var f=this._.panelDefinition,e=this._.panelDefinition.block,g=f.parent||CKEDITOR.document.getBody(),d=this._.panel=new CKEDITOR.ui.floatPanel(c,g,f),f=d.addBlock(a.id,e),b=this;d.onShow=function(){b.className&&this.element.addClass(b.className+"_panel");b.setState(CKEDITOR.TRISTATE_ON);a.on=1;b.editorFocus&&c.focus();if(b.onOpen)b.onOpen()};
d.onHide=function(d){b.className&&this.element.getFirst().removeClass(b.className+"_panel");b.setState(b.modes&&b.modes[c.mode]?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED);a.on=0;if(!d&&b.onClose)b.onClose()};d.onEscape=function(){d.hide(1);b.document.getById(a.id).focus()};if(this.onBlock)this.onBlock(d,f);f.onHide=function(){a.on=0;b.setState(CKEDITOR.TRISTATE_OFF)}}}}})},beforeInit:function(e){e.ui.addHandler(CKEDITOR.UI_PANELBUTTON,CKEDITOR.ui.panelButton.handler)}});
CKEDITOR.UI_PANELBUTTON="panelbutton";(function(){CKEDITOR.plugins.add("panel",{beforeInit:function(a){a.ui.addHandler(CKEDITOR.UI_PANEL,CKEDITOR.ui.panel.handler)}});CKEDITOR.UI_PANEL="panel";CKEDITOR.ui.panel=function(a,b){b&&CKEDITOR.tools.extend(this,b);CKEDITOR.tools.extend(this,{className:"",css:[]});this.id=CKEDITOR.tools.getNextId();this.document=a;this.isFramed=this.forceIFrame||this.css.length;this._={blocks:{}}};CKEDITOR.ui.panel.handler={create:function(a){return new CKEDITOR.ui.panel(a)}};var f=CKEDITOR.addTemplate("panel",
'\x3cdiv lang\x3d"{langCode}" id\x3d"{id}" dir\x3d{dir} class\x3d"cke cke_reset_all {editorId} cke_panel cke_panel {cls} cke_{dir}" style\x3d"z-index:{z-index}" role\x3d"presentation"\x3e{frame}\x3c/div\x3e'),g=CKEDITOR.addTemplate("panel-frame",'\x3ciframe id\x3d"{id}" class\x3d"cke_panel_frame" role\x3d"presentation" frameborder\x3d"0" src\x3d"{src}"\x3e\x3c/iframe\x3e'),h=CKEDITOR.addTemplate("panel-frame-inner",'\x3c!DOCTYPE html\x3e\x3chtml class\x3d"cke_panel_container {env}" dir\x3d"{dir}" lang\x3d"{langCode}"\x3e\x3chead\x3e{css}\x3c/head\x3e\x3cbody class\x3d"cke_{dir}" style\x3d"margin:0;padding:0" onload\x3d"{onload}"\x3e\x3c/body\x3e\x3c/html\x3e');
CKEDITOR.ui.panel.prototype={render:function(a,b){this.getHolderElement=function(){var a=this._.holder;if(!a){if(this.isFramed){var a=this.document.getById(this.id+"_frame"),b=a.getParent(),a=a.getFrameDocument();CKEDITOR.env.iOS&&b.setStyles({overflow:"scroll","-webkit-overflow-scrolling":"touch"});b=CKEDITOR.tools.addFunction(CKEDITOR.tools.bind(function(){this.isLoaded=!0;if(this.onLoad)this.onLoad()},this));a.write(h.output(CKEDITOR.tools.extend({css:CKEDITOR.tools.buildStyleHtml(this.css),onload:"window.parent.CKEDITOR.tools.callFunction("+
b+");"},d)));a.getWindow().$.CKEDITOR=CKEDITOR;a.on("keydown",function(a){var b=a.data.getKeystroke(),c=this.document.getById(this.id).getAttribute("dir");this._.onKeyDown&&!1===this._.onKeyDown(b)?a.data.preventDefault():(27==b||b==("rtl"==c?39:37))&&this.onEscape&&!1===this.onEscape(b)&&a.data.preventDefault()},this);a=a.getBody();a.unselectable();CKEDITOR.env.air&&CKEDITOR.tools.callFunction(b)}else a=this.document.getById(this.id);this._.holder=a}return a};var d={editorId:a.id,id:this.id,langCode:a.langCode,
dir:a.lang.dir,cls:this.className,frame:"",env:CKEDITOR.env.cssClass,"z-index":a.config.baseFloatZIndex+1};if(this.isFramed){var e=CKEDITOR.env.air?"javascript:void(0)":CKEDITOR.env.ie?"javascript:void(function(){"+encodeURIComponent("document.open();("+CKEDITOR.tools.fixDomain+")();document.close();")+"}())":"";d.frame=g.output({id:this.id+"_frame",src:e})}e=f.output(d);b&&b.push(e);return e},addBlock:function(a,b){b=this._.blocks[a]=b instanceof CKEDITOR.ui.panel.block?b:new CKEDITOR.ui.panel.block(this.getHolderElement(),
b);this._.currentBlock||this.showBlock(a);return b},getBlock:function(a){return this._.blocks[a]},showBlock:function(a){a=this._.blocks[a];var b=this._.currentBlock,d=!this.forceIFrame||CKEDITOR.env.ie?this._.holder:this.document.getById(this.id+"_frame");b&&b.hide();this._.currentBlock=a;CKEDITOR.fire("ariaWidget",d);a._.focusIndex=-1;this._.onKeyDown=a.onKeyDown&&CKEDITOR.tools.bind(a.onKeyDown,a);a.show();return a},destroy:function(){this.element&&this.element.remove()}};CKEDITOR.ui.panel.block=
CKEDITOR.tools.createClass({$:function(a,b){this.element=a.append(a.getDocument().createElement("div",{attributes:{tabindex:-1,"class":"cke_panel_block"},styles:{display:"none"}}));b&&CKEDITOR.tools.extend(this,b);this.element.setAttributes({role:this.attributes.role||"presentation","aria-label":this.attributes["aria-label"],title:this.attributes.title||this.attributes["aria-label"]});this.keys={};this._.focusIndex=-1;this.element.disableContextMenu()},_:{markItem:function(a){-1!=a&&(a=this.element.getElementsByTag("a").getItem(this._.focusIndex=
a),CKEDITOR.env.webkit&&a.getDocument().getWindow().focus(),a.focus(),this.onMark&&this.onMark(a))}},proto:{show:function(){this.element.setStyle("display","")},hide:function(){this.onHide&&!0===this.onHide.call(this)||this.element.setStyle("display","none")},onKeyDown:function(a,b){var d=this.keys[a];switch(d){case "next":for(var e=this._.focusIndex,d=this.element.getElementsByTag("a"),c;c=d.getItem(++e);)if(c.getAttribute("_cke_focus")&&c.$.offsetWidth){this._.focusIndex=e;c.focus();break}return c||
b?!1:(this._.focusIndex=-1,this.onKeyDown(a,1));case "prev":e=this._.focusIndex;for(d=this.element.getElementsByTag("a");0<e&&(c=d.getItem(--e));){if(c.getAttribute("_cke_focus")&&c.$.offsetWidth){this._.focusIndex=e;c.focus();break}c=null}return c||b?!1:(this._.focusIndex=d.count(),this.onKeyDown(a,1));case "click":case "mouseup":return e=this._.focusIndex,(c=0<=e&&this.element.getElementsByTag("a").getItem(e))&&(c.$[d]?c.$[d]():c.$["on"+d]()),!1}return!0}}})})();CKEDITOR.plugins.add("floatpanel",{requires:"panel"});
(function(){function v(a,b,c,l,h){h=CKEDITOR.tools.genKey(b.getUniqueId(),c.getUniqueId(),a.lang.dir,a.uiColor||"",l.css||"",h||"");var g=f[h];g||(g=f[h]=new CKEDITOR.ui.panel(b,l),g.element=c.append(CKEDITOR.dom.element.createFromHtml(g.render(a),b)),g.element.setStyles({display:"none",position:"absolute"}));return g}var f={};CKEDITOR.ui.floatPanel=CKEDITOR.tools.createClass({$:function(a,b,c,l){function h(){e.hide()}c.forceIFrame=1;c.toolbarRelated&&a.elementMode==CKEDITOR.ELEMENT_MODE_INLINE&&
(b=CKEDITOR.document.getById("cke_"+a.name));var g=b.getDocument();l=v(a,g,b,c,l||0);var m=l.element,p=m.getFirst(),e=this;m.disableContextMenu();this.element=m;this._={editor:a,panel:l,parentElement:b,definition:c,document:g,iframe:p,children:[],dir:a.lang.dir,showBlockParams:null};a.on("mode",h);a.on("resize",h);g.getWindow().on("resize",function(){this.reposition()},this)},proto:{addBlock:function(a,b){return this._.panel.addBlock(a,b)},addListBlock:function(a,b){return this._.panel.addListBlock(a,
b)},getBlock:function(a){return this._.panel.getBlock(a)},showBlock:function(a,b,c,l,h,g){var m=this._.panel,p=m.showBlock(a);this._.showBlockParams=[].slice.call(arguments);this.allowBlur(!1);var e=this._.editor.editable();this._.returnFocus=e.hasFocus?e:new CKEDITOR.dom.element(CKEDITOR.document.$.activeElement);this._.hideTimeout=0;var k=this.element,e=this._.iframe,e=CKEDITOR.env.ie&&!CKEDITOR.env.edge?e:new CKEDITOR.dom.window(e.$.contentWindow),f=k.getDocument(),r=this._.parentElement.getPositionedAncestor(),
t=b.getDocumentPosition(f),f=r?r.getDocumentPosition(f):{x:0,y:0},q="rtl"==this._.dir,d=t.x+(l||0)-f.x,n=t.y+(h||0)-f.y;!q||1!=c&&4!=c?q||2!=c&&3!=c||(d+=b.$.offsetWidth-1):d+=b.$.offsetWidth;if(3==c||4==c)n+=b.$.offsetHeight-1;this._.panel._.offsetParentId=b.getId();k.setStyles({top:n+"px",left:0,display:""});k.setOpacity(0);k.getFirst().removeStyle("width");this._.editor.focusManager.add(e);this._.blurSet||(CKEDITOR.event.useCapture=!0,e.on("blur",function(a){function u(){delete this._.returnFocus;
this.hide()}this.allowBlur()&&a.data.getPhase()==CKEDITOR.EVENT_PHASE_AT_TARGET&&this.visible&&!this._.activeChild&&(CKEDITOR.env.iOS?this._.hideTimeout||(this._.hideTimeout=CKEDITOR.tools.setTimeout(u,0,this)):u.call(this))},this),e.on("focus",function(){this._.focused=!0;this.hideChild();this.allowBlur(!0)},this),CKEDITOR.env.iOS&&(e.on("touchstart",function(){clearTimeout(this._.hideTimeout)},this),e.on("touchend",function(){this._.hideTimeout=0;this.focus()},this)),CKEDITOR.event.useCapture=!1,
this._.blurSet=1);m.onEscape=CKEDITOR.tools.bind(function(a){if(this.onEscape&&!1===this.onEscape(a))return!1},this);CKEDITOR.tools.setTimeout(function(){var a=CKEDITOR.tools.bind(function(){var a=k;a.removeStyle("width");if(p.autoSize){var b=p.element.getDocument(),b=(CKEDITOR.env.webkit||CKEDITOR.env.edge?p.element:b.getBody()).$.scrollWidth;CKEDITOR.env.ie&&CKEDITOR.env.quirks&&0<b&&(b+=(a.$.offsetWidth||0)-(a.$.clientWidth||0)+3);a.setStyle("width",b+10+"px");b=p.element.$.scrollHeight;CKEDITOR.env.ie&&
CKEDITOR.env.quirks&&0<b&&(b+=(a.$.offsetHeight||0)-(a.$.clientHeight||0)+3);a.setStyle("height",b+"px");m._.currentBlock.element.setStyle("display","none").removeStyle("display")}else a.removeStyle("height");q&&(d-=k.$.offsetWidth);k.setStyle("left",d+"px");var b=m.element.getWindow(),a=k.$.getBoundingClientRect(),b=b.getViewPaneSize(),c=a.width||a.right-a.left,e=a.height||a.bottom-a.top,l=q?a.right:b.width-a.left,h=q?b.width-a.right:a.left;q?l<c&&(d=h>c?d+c:b.width>c?d-a.left:d-a.right+b.width):
l<c&&(d=h>c?d-c:b.width>c?d-a.right+b.width:d-a.left);c=a.top;b.height-a.top<e&&(n=c>e?n-e:b.height>e?n-a.bottom+b.height:n-a.top);CKEDITOR.env.ie&&(b=a=new CKEDITOR.dom.element(k.$.offsetParent),"html"==b.getName()&&(b=b.getDocument().getBody()),"rtl"==b.getComputedStyle("direction")&&(d=CKEDITOR.env.ie8Compat?d-2*k.getDocument().getDocumentElement().$.scrollLeft:d-(a.$.scrollWidth-a.$.clientWidth)));var a=k.getFirst(),f;(f=a.getCustomData("activePanel"))&&f.onHide&&f.onHide.call(this,1);a.setCustomData("activePanel",
this);k.setStyles({top:n+"px",left:d+"px"});k.setOpacity(1);g&&g()},this);m.isLoaded?a():m.onLoad=a;CKEDITOR.tools.setTimeout(function(){var a=CKEDITOR.env.webkit&&CKEDITOR.document.getWindow().getScrollPosition().y;this.focus();p.element.focus();CKEDITOR.env.webkit&&(CKEDITOR.document.getBody().$.scrollTop=a);this.allowBlur(!0);this._.editor.fire("panelShow",this)},0,this)},CKEDITOR.env.air?200:0,this);this.visible=1;this.onShow&&this.onShow.call(this)},reposition:function(){var a=this._.showBlockParams;
this.visible&&this._.showBlockParams&&(this.hide(),this.showBlock.apply(this,a))},focus:function(){if(CKEDITOR.env.webkit){var a=CKEDITOR.document.getActive();a&&!a.equals(this._.iframe)&&a.$.blur()}(this._.lastFocused||this._.iframe.getFrameDocument().getWindow()).focus()},blur:function(){var a=this._.iframe.getFrameDocument().getActive();a&&a.is("a")&&(this._.lastFocused=a)},hide:function(a){if(this.visible&&(!this.onHide||!0!==this.onHide.call(this))){this.hideChild();CKEDITOR.env.gecko&&this._.iframe.getFrameDocument().$.activeElement.blur();
this.element.setStyle("display","none");this.visible=0;this.element.getFirst().removeCustomData("activePanel");if(a=a&&this._.returnFocus)CKEDITOR.env.webkit&&a.type&&a.getWindow().$.focus(),a.focus();delete this._.lastFocused;this._.showBlockParams=null;this._.editor.fire("panelHide",this)}},allowBlur:function(a){var b=this._.panel;void 0!==a&&(b.allowBlur=a);return b.allowBlur},showAsChild:function(a,b,c,f,h,g){if(this._.activeChild!=a||a._.panel._.offsetParentId!=c.getId())this.hideChild(),a.onHide=
CKEDITOR.tools.bind(function(){CKEDITOR.tools.setTimeout(function(){this._.focused||this.hide()},0,this)},this),this._.activeChild=a,this._.focused=!1,a.showBlock(b,c,f,h,g),this.blur(),(CKEDITOR.env.ie7Compat||CKEDITOR.env.ie6Compat)&&setTimeout(function(){a.element.getChild(0).$.style.cssText+=""},100)},hideChild:function(a){var b=this._.activeChild;b&&(delete b.onHide,delete this._.activeChild,b.hide(),a&&this.focus())}}});CKEDITOR.on("instanceDestroyed",function(){var a=CKEDITOR.tools.isEmpty(CKEDITOR.instances),
b;for(b in f){var c=f[b];a?c.destroy():c.element.hide()}a&&(f={})})})();CKEDITOR.plugins.add("colorbutton",{requires:"panelbutton,floatpanel",init:function(c){function r(p,h,e,f){var l=new CKEDITOR.style(k["colorButton_"+h+"Style"]),m=CKEDITOR.tools.getNextId()+"_colorBox";c.ui.add(p,CKEDITOR.UI_PANELBUTTON,{label:e,title:e,modes:{wysiwyg:1},editorFocus:0,toolbar:"colors,"+f,allowedContent:l,requiredContent:l,panel:{css:CKEDITOR.skin.getPath("editor"),attributes:{role:"listbox","aria-label":g.panelTitle}},onBlock:function(a,b){b.autoSize=!0;b.element.addClass("cke_colorblock");
b.element.setHtml(u(a,h,m));b.element.getDocument().getBody().setStyle("overflow","hidden");CKEDITOR.ui.fire("ready",this);var d=b.keys,e="rtl"==c.lang.dir;d[e?37:39]="next";d[40]="next";d[9]="next";d[e?39:37]="prev";d[38]="prev";d[CKEDITOR.SHIFT+9]="prev";d[32]="click"},refresh:function(){c.activeFilter.check(l)||this.setState(CKEDITOR.TRISTATE_DISABLED)},onOpen:function(){var a=c.getSelection(),a=a&&a.getStartElement(),a=c.elementPath(a),b;if(a){a=a.block||a.blockLimit||c.document.getBody();do b=
a&&a.getComputedStyle("back"==h?"background-color":"color")||"transparent";while("back"==h&&"transparent"==b&&a&&(a=a.getParent()));b&&"transparent"!=b||(b="#ffffff");!1!==k.colorButton_enableAutomatic&&this._.panel._.iframe.getFrameDocument().getById(m).setStyle("background-color",b);return b}}})}function u(p,h,e){var f=[],l=k.colorButton_colors.split(","),m=c.plugins.colordialog&&!1!==k.colorButton_enableMore,a=l.length+(m?2:1),b=CKEDITOR.tools.addFunction(function(a,b){function d(a){this.removeListener("ok",
d);this.removeListener("cancel",d);"ok"==a.name&&e(this.getContentElement("picker","selectedColor").getValue(),b)}var e=arguments.callee;if("?"==a)c.openDialog("colordialog",function(){this.on("ok",d);this.on("cancel",d)});else{c.focus();p.hide();c.fire("saveSnapshot");c.removeStyle(new CKEDITOR.style(k["colorButton_"+b+"Style"],{color:"inherit"}));if(a){var f=k["colorButton_"+b+"Style"];f.childRule="back"==b?function(a){return t(a)}:function(a){return!(a.is("a")||a.getElementsByTag("a").count())||
t(a)};c.applyStyle(new CKEDITOR.style(f,{color:a}))}c.fire("saveSnapshot")}});!1!==k.colorButton_enableAutomatic&&f.push('\x3ca class\x3d"cke_colorauto" _cke_focus\x3d1 hidefocus\x3dtrue title\x3d"',g.auto,'" onclick\x3d"CKEDITOR.tools.callFunction(',b,",null,'",h,"');return false;\" href\x3d\"javascript:void('",g.auto,'\')" role\x3d"option" aria-posinset\x3d"1" aria-setsize\x3d"',a,'"\x3e\x3ctable role\x3d"presentation" cellspacing\x3d0 cellpadding\x3d0 width\x3d"100%"\x3e\x3ctr\x3e\x3ctd\x3e\x3cspan class\x3d"cke_colorbox" id\x3d"',
e,'"\x3e\x3c/span\x3e\x3c/td\x3e\x3ctd colspan\x3d7 align\x3dcenter\x3e',g.auto,"\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e\x3c/a\x3e");f.push('\x3ctable role\x3d"presentation" cellspacing\x3d0 cellpadding\x3d0 width\x3d"100%"\x3e');for(e=0;e<l.length;e++){0===e%8&&f.push("\x3c/tr\x3e\x3ctr\x3e");var d=l[e].split("/"),n=d[0],q=d[1]||n;d[1]||(n="#"+n.replace(/^(.)(.)(.)$/,"$1$1$2$2$3$3"));d=c.lang.colorbutton.colors[q]||q;f.push('\x3ctd\x3e\x3ca class\x3d"cke_colorbox" _cke_focus\x3d1 hidefocus\x3dtrue title\x3d"',
d,'" onclick\x3d"CKEDITOR.tools.callFunction(',b,",'",n,"','",h,"'); return false;\" href\x3d\"javascript:void('",d,'\')" role\x3d"option" aria-posinset\x3d"',e+2,'" aria-setsize\x3d"',a,'"\x3e\x3cspan class\x3d"cke_colorbox" style\x3d"background-color:#',q,'"\x3e\x3c/span\x3e\x3c/a\x3e\x3c/td\x3e')}m&&f.push('\x3c/tr\x3e\x3ctr\x3e\x3ctd colspan\x3d8 align\x3dcenter\x3e\x3ca class\x3d"cke_colormore" _cke_focus\x3d1 hidefocus\x3dtrue title\x3d"',g.more,'" onclick\x3d"CKEDITOR.tools.callFunction(',
b,",'?','",h,"');return false;\" href\x3d\"javascript:void('",g.more,"')\"",' role\x3d"option" aria-posinset\x3d"',a,'" aria-setsize\x3d"',a,'"\x3e',g.more,"\x3c/a\x3e\x3c/td\x3e");f.push("\x3c/tr\x3e\x3c/table\x3e");return f.join("")}function t(c){return"false"==c.getAttribute("contentEditable")||c.getAttribute("data-nostyle")}var k=c.config,g=c.lang.colorbutton;CKEDITOR.env.hc||(r("TextColor","fore",g.textColorTitle,10),r("BGColor","back",g.bgColorTitle,20))}});
CKEDITOR.config.colorButton_colors="000,800000,8B4513,2F4F4F,008080,000080,4B0082,696969,B22222,A52A2A,DAA520,006400,40E0D0,0000CD,800080,808080,F00,FF8C00,FFD700,008000,0FF,00F,EE82EE,A9A9A9,FFA07A,FFA500,FFFF00,00FF00,AFEEEE,ADD8E6,DDA0DD,D3D3D3,FFF0F5,FAEBD7,FFFFE0,F0FFF0,F0FFFF,F0F8FF,E6E6FA,FFF";CKEDITOR.config.colorButton_foreStyle={element:"span",styles:{color:"#(color)"},overrides:[{element:"font",attributes:{color:null}}]};CKEDITOR.config.colorButton_backStyle={element:"span",styles:{"background-color":"#(color)"}};CKEDITOR.plugins.colordialog={requires:"dialog",init:function(b){var c=new CKEDITOR.dialogCommand("colordialog");c.editorFocus=!1;b.addCommand("colordialog",c);CKEDITOR.dialog.add("colordialog",this.path+"dialogs/colordialog.js");b.getColorFromDialog=function(c,f){var d=function(a){this.removeListener("ok",d);this.removeListener("cancel",d);a="ok"==a.name?this.getValueOf("picker","selectedColor"):null;c.call(f,a)},e=function(a){a.on("ok",d);a.on("cancel",d)};b.execCommand("colordialog");if(b._.storedDialogs&&
b._.storedDialogs.colordialog)e(b._.storedDialogs.colordialog);else CKEDITOR.on("dialogDefinition",function(a){if("colordialog"==a.data.name){var b=a.data.definition;a.removeListener();b.onLoad=CKEDITOR.tools.override(b.onLoad,function(a){return function(){e(this);b.onLoad=a;"function"==typeof a&&a.call(this)}})}})}}};CKEDITOR.plugins.add("colordialog",CKEDITOR.plugins.colordialog);(function(){CKEDITOR.plugins.add("templates",{requires:"dialog",init:function(a){CKEDITOR.dialog.add("templates",CKEDITOR.getUrl(this.path+"dialogs/templates.js"));a.addCommand("templates",new CKEDITOR.dialogCommand("templates"));a.ui.addButton&&a.ui.addButton("Templates",{label:a.lang.templates.button,command:"templates",toolbar:"doctools,10"})}});var c={},f={};CKEDITOR.addTemplates=function(a,d){c[a]=d};CKEDITOR.getTemplates=function(a){return c[a]};CKEDITOR.loadTemplates=function(a,d){for(var e=
[],b=0,c=a.length;b<c;b++)f[a[b]]||(e.push(a[b]),f[a[b]]=1);e.length?CKEDITOR.scriptLoader.load(e,d):setTimeout(d,0)}})();CKEDITOR.config.templates_files=[CKEDITOR.getUrl("plugins/templates/templates/default.js")];CKEDITOR.config.templates_replaceContent=!0;CKEDITOR.plugins.add("menu",{requires:"floatpanel",beforeInit:function(g){for(var h=g.config.menu_groups.split(","),p=g._.menuGroups={},n=g._.menuItems={},a=0;a<h.length;a++)p[h[a]]=a+1;g.addMenuGroup=function(b,a){p[b]=a||100};g.addMenuItem=function(a,c){p[c.group]&&(n[a]=new CKEDITOR.menuItem(this,a,c))};g.addMenuItems=function(a){for(var c in a)this.addMenuItem(c,a[c])};g.getMenuItem=function(a){return n[a]};g.removeMenuItem=function(a){delete n[a]}}});
(function(){function g(a){a.sort(function(a,c){return a.group<c.group?-1:a.group>c.group?1:a.order<c.order?-1:a.order>c.order?1:0})}var h='\x3cspan class\x3d"cke_menuitem"\x3e\x3ca id\x3d"{id}" class\x3d"cke_menubutton cke_menubutton__{name} cke_menubutton_{state} {cls}" href\x3d"{href}" title\x3d"{title}" tabindex\x3d"-1"_cke_focus\x3d1 hidefocus\x3d"true" role\x3d"{role}" aria-haspopup\x3d"{hasPopup}" aria-disabled\x3d"{disabled}" {ariaChecked}';CKEDITOR.env.gecko&&CKEDITOR.env.mac&&(h+=' onkeypress\x3d"return false;"');
CKEDITOR.env.gecko&&(h+=' onblur\x3d"this.style.cssText \x3d this.style.cssText;"');var h=h+(' onmouseover\x3d"CKEDITOR.tools.callFunction({hoverFn},{index});" onmouseout\x3d"CKEDITOR.tools.callFunction({moveOutFn},{index});" '+(CKEDITOR.env.ie?'onclick\x3d"return false;" onmouseup':"onclick")+'\x3d"CKEDITOR.tools.callFunction({clickFn},{index}); return false;"\x3e'),p=CKEDITOR.addTemplate("menuItem",h+'\x3cspan class\x3d"cke_menubutton_inner"\x3e\x3cspan class\x3d"cke_menubutton_icon"\x3e\x3cspan class\x3d"cke_button_icon cke_button__{iconName}_icon" style\x3d"{iconStyle}"\x3e\x3c/span\x3e\x3c/span\x3e\x3cspan class\x3d"cke_menubutton_label"\x3e{label}\x3c/span\x3e{arrowHtml}\x3c/span\x3e\x3c/a\x3e\x3c/span\x3e'),
n=CKEDITOR.addTemplate("menuArrow",'\x3cspan class\x3d"cke_menuarrow"\x3e\x3cspan\x3e{label}\x3c/span\x3e\x3c/span\x3e');CKEDITOR.menu=CKEDITOR.tools.createClass({$:function(a,b){b=this._.definition=b||{};this.id=CKEDITOR.tools.getNextId();this.editor=a;this.items=[];this._.listeners=[];this._.level=b.level||1;var c=CKEDITOR.tools.extend({},b.panel,{css:[CKEDITOR.skin.getPath("editor")],level:this._.level-1,block:{}}),m=c.block.attributes=c.attributes||{};!m.role&&(m.role="menu");this._.panelDefinition=
c},_:{onShow:function(){var a=this.editor.getSelection(),b=a&&a.getStartElement(),c=this.editor.elementPath(),m=this._.listeners;this.removeAll();for(var e=0;e<m.length;e++){var l=m[e](b,a,c);if(l)for(var k in l){var f=this.editor.getMenuItem(k);!f||f.command&&!this.editor.getCommand(f.command).state||(f.state=l[k],this.add(f))}}},onClick:function(a){this.hide();if(a.onClick)a.onClick();else a.command&&this.editor.execCommand(a.command)},onEscape:function(a){var b=this.parent;b?b._.panel.hideChild(1):
27==a&&this.hide(1);return!1},onHide:function(){this.onHide&&this.onHide()},showSubMenu:function(a){var b=this._.subMenu,c=this.items[a];if(c=c.getItems&&c.getItems()){b?b.removeAll():(b=this._.subMenu=new CKEDITOR.menu(this.editor,CKEDITOR.tools.extend({},this._.definition,{level:this._.level+1},!0)),b.parent=this,b._.onClick=CKEDITOR.tools.bind(this._.onClick,this));for(var m in c){var e=this.editor.getMenuItem(m);e&&(e.state=c[m],b.add(e))}var l=this._.panel.getBlock(this.id).element.getDocument().getById(this.id+
String(a));setTimeout(function(){b.show(l,2)},0)}else this._.panel.hideChild(1)}},proto:{add:function(a){a.order||(a.order=this.items.length);this.items.push(a)},removeAll:function(){this.items=[]},show:function(a,b,c,m){if(!this.parent&&(this._.onShow(),!this.items.length))return;b=b||("rtl"==this.editor.lang.dir?2:1);var e=this.items,l=this.editor,k=this._.panel,f=this._.element;if(!k){k=this._.panel=new CKEDITOR.ui.floatPanel(this.editor,CKEDITOR.document.getBody(),this._.panelDefinition,this._.level);
k.onEscape=CKEDITOR.tools.bind(function(a){if(!1===this._.onEscape(a))return!1},this);k.onShow=function(){k._.panel.getHolderElement().getParent().addClass("cke").addClass("cke_reset_all")};k.onHide=CKEDITOR.tools.bind(function(){this._.onHide&&this._.onHide()},this);f=k.addBlock(this.id,this._.panelDefinition.block);f.autoSize=!0;var d=f.keys;d[40]="next";d[9]="next";d[38]="prev";d[CKEDITOR.SHIFT+9]="prev";d["rtl"==l.lang.dir?37:39]=CKEDITOR.env.ie?"mouseup":"click";d[32]=CKEDITOR.env.ie?"mouseup":
"click";CKEDITOR.env.ie&&(d[13]="mouseup");f=this._.element=f.element;d=f.getDocument();d.getBody().setStyle("overflow","hidden");d.getElementsByTag("html").getItem(0).setStyle("overflow","hidden");this._.itemOverFn=CKEDITOR.tools.addFunction(function(a){clearTimeout(this._.showSubTimeout);this._.showSubTimeout=CKEDITOR.tools.setTimeout(this._.showSubMenu,l.config.menu_subMenuDelay||400,this,[a])},this);this._.itemOutFn=CKEDITOR.tools.addFunction(function(){clearTimeout(this._.showSubTimeout)},this);
this._.itemClickFn=CKEDITOR.tools.addFunction(function(a){var b=this.items[a];if(b.state==CKEDITOR.TRISTATE_DISABLED)this.hide(1);else if(b.getItems)this._.showSubMenu(a);else this._.onClick(b)},this)}g(e);for(var d=l.elementPath(),d=['\x3cdiv class\x3d"cke_menu'+(d&&d.direction()!=l.lang.dir?" cke_mixed_dir_content":"")+'" role\x3d"presentation"\x3e'],h=e.length,p=h&&e[0].group,n=0;n<h;n++){var q=e[n];p!=q.group&&(d.push('\x3cdiv class\x3d"cke_menuseparator" role\x3d"separator"\x3e\x3c/div\x3e'),
p=q.group);q.render(this,n,d)}d.push("\x3c/div\x3e");f.setHtml(d.join(""));CKEDITOR.ui.fire("ready",this);this.parent?this.parent._.panel.showAsChild(k,this.id,a,b,c,m):k.showBlock(this.id,a,b,c,m);l.fire("menuShow",[k])},addListener:function(a){this._.listeners.push(a)},hide:function(a){this._.onHide&&this._.onHide();this._.panel&&this._.panel.hide(a)}}});CKEDITOR.menuItem=CKEDITOR.tools.createClass({$:function(a,b,c){CKEDITOR.tools.extend(this,c,{order:0,className:"cke_menubutton__"+b});this.group=
a._.menuGroups[this.group];this.editor=a;this.name=b},proto:{render:function(a,b,c){var h=a.id+String(b),e="undefined"==typeof this.state?CKEDITOR.TRISTATE_OFF:this.state,l="",k=e==CKEDITOR.TRISTATE_ON?"on":e==CKEDITOR.TRISTATE_DISABLED?"disabled":"off";this.role in{menuitemcheckbox:1,menuitemradio:1}&&(l=' aria-checked\x3d"'+(e==CKEDITOR.TRISTATE_ON?"true":"false")+'"');var f=this.getItems,d="\x26#"+("rtl"==this.editor.lang.dir?"9668":"9658")+";",g=this.name;this.icon&&!/\./.test(this.icon)&&(g=
this.icon);a={id:h,name:this.name,iconName:g,label:this.label,cls:this.className||"",state:k,hasPopup:f?"true":"false",disabled:e==CKEDITOR.TRISTATE_DISABLED,title:this.label,href:"javascript:void('"+(this.label||"").replace("'")+"')",hoverFn:a._.itemOverFn,moveOutFn:a._.itemOutFn,clickFn:a._.itemClickFn,index:b,iconStyle:CKEDITOR.skin.getIconStyle(g,"rtl"==this.editor.lang.dir,g==this.icon?null:this.icon,this.iconOffset),arrowHtml:f?n.output({label:d}):"",role:this.role?this.role:"menuitem",ariaChecked:l};
p.output(a,c)}}})})();CKEDITOR.config.menu_groups="clipboard,form,tablecell,tablecellproperties,tablerow,tablecolumn,table,anchor,link,image,flash,checkbox,radio,textfield,hiddenfield,imagebutton,button,select,textarea,div";CKEDITOR.plugins.add("contextmenu",{requires:"menu",onLoad:function(){CKEDITOR.plugins.contextMenu=CKEDITOR.tools.createClass({base:CKEDITOR.menu,$:function(a){this.base.call(this,a,{panel:{className:"cke_menu_panel",attributes:{"aria-label":a.lang.contextmenu.options}}})},proto:{addTarget:function(a,e){a.on("contextmenu",function(a){a=a.data;var c=CKEDITOR.env.webkit?f:CKEDITOR.env.mac?a.$.metaKey:a.$.ctrlKey;if($(a.$.target).closest('table').length && (!e||!c)){a.preventDefault();if(CKEDITOR.env.mac&&CKEDITOR.env.webkit){var c=this.editor,
b=(new CKEDITOR.dom.elementPath(a.getTarget(),c.editable())).contains(function(a){return a.hasAttribute("contenteditable")},!0);b&&"false"==b.getAttribute("contenteditable")&&c.getSelection().fake(b)}var b=a.getTarget().getDocument(),d=a.getTarget().getDocument().getDocumentElement(),c=!b.equals(CKEDITOR.document),b=b.getWindow().getScrollPosition(),g=c?a.$.clientX:a.$.pageX||b.x+a.$.clientX,h=c?a.$.clientY:a.$.pageY||b.y+a.$.clientY;CKEDITOR.tools.setTimeout(function(){this.open(d,null,g,h)},CKEDITOR.env.ie?
200:0,this)}},this);if(CKEDITOR.env.webkit){var f,d=function(){f=0};a.on("keydown",function(a){f=CKEDITOR.env.mac?a.data.$.metaKey:a.data.$.ctrlKey});a.on("keyup",d);a.on("contextmenu",d)}},open:function(a,e,f,d){this.editor.focus();a=a||CKEDITOR.document.getDocumentElement();this.editor.selectionChange(1);this.show(a,e,f,d)}}})},beforeInit:function(a){var e=a.contextMenu=new CKEDITOR.plugins.contextMenu(a);a.on("contentDom",function(){e.addTarget(a.editable(),!1!==a.config.browserContextMenuOnCtrl)});
a.addCommand("contextMenu",{exec:function(){a.contextMenu.open(a.document.getBody())}});a.setKeystroke(CKEDITOR.SHIFT+121,"contextMenu");a.setKeystroke(CKEDITOR.CTRL+CKEDITOR.SHIFT+121,"contextMenu")}});(function(){CKEDITOR.plugins.add("div",{requires:"dialog",init:function(a){if(!a.blockless){var c=a.lang.div,b="div(*)";CKEDITOR.dialog.isTabEnabled(a,"editdiv","advanced")&&(b+=";div[dir,id,lang,title]{*}");a.addCommand("creatediv",new CKEDITOR.dialogCommand("creatediv",{allowedContent:b,requiredContent:"div",contextSensitive:!0,refresh:function(a,c){this.setState("div"in(a.config.div_wrapTable?c.root:c.blockLimit).getDtd()?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED)}}));a.addCommand("editdiv",
new CKEDITOR.dialogCommand("editdiv",{requiredContent:"div"}));a.addCommand("removediv",{requiredContent:"div",exec:function(a){function c(b){(b=CKEDITOR.plugins.div.getSurroundDiv(a,b))&&!b.data("cke-div-added")&&(f.push(b),b.data("cke-div-added"))}for(var b=a.getSelection(),g=b&&b.getRanges(),e,h=b.createBookmarks(),f=[],d=0;d<g.length;d++)e=g[d],e.collapsed?c(b.getStartElement()):(e=new CKEDITOR.dom.walker(e),e.evaluator=c,e.lastForward());for(d=0;d<f.length;d++)f[d].remove(!0);b.selectBookmarks(h)}});
a.ui.addButton&&a.ui.addButton("CreateDiv",{label:c.toolbar,command:"creatediv",toolbar:"blocks,50"});a.addMenuItems&&(a.addMenuItems({editdiv:{label:c.edit,command:"editdiv",group:"div",order:1},removediv:{label:c.remove,command:"removediv",group:"div",order:5}}),a.contextMenu&&a.contextMenu.addListener(function(b){return!b||b.isReadOnly()?null:CKEDITOR.plugins.div.getSurroundDiv(a)?{editdiv:CKEDITOR.TRISTATE_OFF,removediv:CKEDITOR.TRISTATE_OFF}:null}));CKEDITOR.dialog.add("creatediv",this.path+
"dialogs/div.js");CKEDITOR.dialog.add("editdiv",this.path+"dialogs/div.js")}}});CKEDITOR.plugins.div={getSurroundDiv:function(a,c){var b=a.elementPath(c);return a.elementPath(b.blockLimit).contains(function(a){return a.is("div")&&!a.isReadOnly()},1)}}})();CKEDITOR.plugins.add("resize",{init:function(b){function f(d){var e=c.width,m=c.height,f=e+(d.data.$.screenX-n.x)*("rtl"==g?-1:1);d=m+(d.data.$.screenY-n.y);h&&(e=Math.max(a.resize_minWidth,Math.min(f,a.resize_maxWidth)));p&&(m=Math.max(a.resize_minHeight,Math.min(d,a.resize_maxHeight)));b.resize(h?e:null,m)}function k(){CKEDITOR.document.removeListener("mousemove",f);CKEDITOR.document.removeListener("mouseup",k);b.document&&(b.document.removeListener("mousemove",f),b.document.removeListener("mouseup",
k))}var a=b.config,r=b.ui.spaceId("resizer"),g=b.element?b.element.getDirection(1):"ltr";!a.resize_dir&&(a.resize_dir="vertical");void 0===a.resize_maxWidth&&(a.resize_maxWidth=3E3);void 0===a.resize_maxHeight&&(a.resize_maxHeight=3E3);void 0===a.resize_minWidth&&(a.resize_minWidth=750);void 0===a.resize_minHeight&&(a.resize_minHeight=250);if(!1!==a.resize_enabled){var l=null,n,c,h=("both"==a.resize_dir||"horizontal"==a.resize_dir)&&a.resize_minWidth!=a.resize_maxWidth,p=("both"==a.resize_dir||"vertical"==
a.resize_dir)&&a.resize_minHeight!=a.resize_maxHeight,q=CKEDITOR.tools.addFunction(function(d){l||(l=b.getResizable());c={width:l.$.offsetWidth||0,height:l.$.offsetHeight||0};n={x:d.screenX,y:d.screenY};a.resize_minWidth>c.width&&(a.resize_minWidth=c.width);a.resize_minHeight>c.height&&(a.resize_minHeight=c.height);CKEDITOR.document.on("mousemove",f);CKEDITOR.document.on("mouseup",k);b.document&&(b.document.on("mousemove",f),b.document.on("mouseup",k));d.preventDefault&&d.preventDefault()});b.on("destroy",
function(){CKEDITOR.tools.removeFunction(q)});b.on("uiSpace",function(a){if("bottom"==a.data.space){var e="";h&&!p&&(e=" cke_resizer_horizontal");!h&&p&&(e=" cke_resizer_vertical");var c='\x3cspan id\x3d"'+r+'" class\x3d"cke_resizer'+e+" cke_resizer_"+g+'" title\x3d"'+CKEDITOR.tools.htmlEncode(b.lang.common.resize)+'" onmousedown\x3d"CKEDITOR.tools.callFunction('+q+', event)"\x3e'+("ltr"==g?"◢":"◣")+"\x3c/span\x3e";"ltr"==g&&"ltr"==e?a.data.html+=c:a.data.html=c+a.data.html}},b,null,100);b.on("maximize",
function(a){b.ui.space("resizer")[a.data==CKEDITOR.TRISTATE_ON?"hide":"show"]()})}}});(function(){function B(a){function d(){for(var b=g(),e=CKEDITOR.tools.clone(a.config.toolbarGroups)||q(a),f=0;f<e.length;f++){var l=e[f];if("/"!=l){"string"==typeof l&&(l=e[f]={name:l});var m,d=l.groups;if(d)for(var h=0;h<d.length;h++)m=d[h],(m=b[m])&&c(l,m);(m=b[l.name])&&c(l,m)}}return e}function g(){var b={},c,f,e;for(c in a.ui.items)f=a.ui.items[c],e=f.toolbar||"others",e=e.split(","),f=e[0],e=parseInt(e[1]||-1,10),b[f]||(b[f]=[]),b[f].push({name:c,order:e});for(f in b)b[f]=b[f].sort(function(b,
a){return b.order==a.order?0:0>a.order?-1:0>b.order?1:b.order<a.order?-1:1});return b}function c(c,e){if(e.length){c.items?c.items.push(a.ui.create("-")):c.items=[];for(var f;f=e.shift();)f="string"==typeof f?f:f.name,b&&-1!=CKEDITOR.tools.indexOf(b,f)||(f=a.ui.create(f))&&a.addFeature(f)&&c.items.push(f)}}function h(b){var a=[],e,d,h;for(e=0;e<b.length;++e)d=b[e],h={},"/"==d?a.push(d):CKEDITOR.tools.isArray(d)?(c(h,CKEDITOR.tools.clone(d)),a.push(h)):d.items&&(c(h,CKEDITOR.tools.clone(d.items)),
h.name=d.name,a.push(h));return a}var b=a.config.removeButtons,b=b&&b.split(","),e=a.config.toolbar;"string"==typeof e&&(e=a.config["toolbar_"+e]);return a.toolbar=e?h(e):d()}function q(a){return a._.toolbarGroups||(a._.toolbarGroups=[{name:"document",groups:["mode","document","doctools"]},{name:"clipboard",groups:["clipboard","undo"]},{name:"editing",groups:["find","selection","spellchecker"]},{name:"forms"},"/",{name:"basicstyles",groups:["basicstyles","cleanup"]},{name:"paragraph",groups:["list",
"indent","blocks","align","bidi"]},{name:"links"},{name:"insert"},"/",{name:"styles"},{name:"colors"},{name:"tools"},{name:"others"},{name:"about"}])}var y=function(){this.toolbars=[];this.focusCommandExecuted=!1};y.prototype.focus=function(){for(var a=0,d;d=this.toolbars[a++];)for(var g=0,c;c=d.items[g++];)if(c.focus){c.focus();return}};var C={modes:{wysiwyg:1,source:1},readOnly:1,exec:function(a){a.toolbox&&(a.toolbox.focusCommandExecuted=!0,CKEDITOR.env.ie||CKEDITOR.env.air?setTimeout(function(){a.toolbox.focus()},
100):a.toolbox.focus())}};CKEDITOR.plugins.add("toolbar",{requires:"button",init:function(a){var d,g=function(c,h){var b,e="rtl"==a.lang.dir,k=a.config.toolbarGroupCycling,r=e?37:39,e=e?39:37,k=void 0===k||k;switch(h){case 9:case CKEDITOR.SHIFT+9:for(;!b||!b.items.length;)if(b=9==h?(b?b.next:c.toolbar.next)||a.toolbox.toolbars[0]:(b?b.previous:c.toolbar.previous)||a.toolbox.toolbars[a.toolbox.toolbars.length-1],b.items.length)for(c=b.items[d?b.items.length-1:0];c&&!c.focus;)(c=d?c.previous:c.next)||
(b=0);c&&c.focus();return!1;case r:b=c;do b=b.next,!b&&k&&(b=c.toolbar.items[0]);while(b&&!b.focus);b?b.focus():g(c,9);return!1;case 40:return c.button&&c.button.hasArrow?(a.once("panelShow",function(b){b.data._.panel._.currentBlock.onKeyDown(40)}),c.execute()):g(c,40==h?r:e),!1;case e:case 38:b=c;do b=b.previous,!b&&k&&(b=c.toolbar.items[c.toolbar.items.length-1]);while(b&&!b.focus);b?b.focus():(d=1,g(c,CKEDITOR.SHIFT+9),d=0);return!1;case 27:return a.focus(),!1;case 13:case 32:return c.execute(),
!1}return!0};a.on("uiSpace",function(c){if(c.data.space==a.config.toolbarLocation){c.removeListener();a.toolbox=new y;var d=CKEDITOR.tools.getNextId(),b=['\x3cspan id\x3d"',d,'" class\x3d"cke_voice_label"\x3e',a.lang.toolbar.toolbars,"\x3c/span\x3e",'\x3cspan id\x3d"'+a.ui.spaceId("toolbox")+'" class\x3d"cke_toolbox" role\x3d"group" aria-labelledby\x3d"',d,'" onmousedown\x3d"return false;"\x3e'],d=!1!==a.config.toolbarStartupExpanded,e,k;a.config.toolbarCanCollapse&&a.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE&&
b.push('\x3cspan class\x3d"cke_toolbox_main"'+(d?"\x3e":' style\x3d"display:none"\x3e'));for(var r=a.toolbox.toolbars,f=B(a),l=0;l<f.length;l++){var m,n=0,v,p=f[l],w;if(p)if(e&&(b.push("\x3c/span\x3e"),k=e=0),"/"===p)b.push('\x3cspan class\x3d"cke_toolbar_break"\x3e\x3c/span\x3e');else{w=p.items||p;for(var x=0;x<w.length;x++){var t=w[x],q;if(t){var z=function(c){c=c.render(a,b);u=n.items.push(c)-1;0<u&&(c.previous=n.items[u-1],c.previous.next=c);c.toolbar=n;c.onkey=g;c.onfocus=function(){a.toolbox.focusCommandExecuted||
a.focus()}};if(t.type==CKEDITOR.UI_SEPARATOR)k=e&&t;else{q=!1!==t.canGroup;if(!n){m=CKEDITOR.tools.getNextId();n={id:m,items:[]};v=p.name&&(a.lang.toolbar.toolbarGroups[p.name]||p.name);b.push('\x3cspan id\x3d"',m,'" class\x3d"cke_toolbar"',v?' aria-labelledby\x3d"'+m+'_label"':"",' role\x3d"toolbar"\x3e');v&&b.push('\x3cspan id\x3d"',m,'_label" class\x3d"cke_voice_label"\x3e',v,"\x3c/span\x3e");b.push('\x3cspan class\x3d"cke_toolbar_start"\x3e\x3c/span\x3e');var u=r.push(n)-1;0<u&&(n.previous=r[u-
1],n.previous.next=n)}q?e||(b.push('\x3cspan class\x3d"cke_toolgroup" role\x3d"presentation"\x3e'),e=1):e&&(b.push("\x3c/span\x3e"),e=0);k&&(z(k),k=0);z(t)}}}e&&(b.push("\x3c/span\x3e"),k=e=0);n&&b.push('\x3cspan class\x3d"cke_toolbar_end"\x3e\x3c/span\x3e\x3c/span\x3e')}}a.config.toolbarCanCollapse&&b.push("\x3c/span\x3e");if(a.config.toolbarCanCollapse&&a.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE){var A=CKEDITOR.tools.addFunction(function(){a.execCommand("toolbarCollapse")});a.on("destroy",function(){CKEDITOR.tools.removeFunction(A)});
a.addCommand("toolbarCollapse",{readOnly:1,exec:function(b){var a=b.ui.space("toolbar_collapser"),c=a.getPrevious(),e=b.ui.space("contents"),d=c.getParent(),f=parseInt(e.$.style.height,10),h=d.$.offsetHeight,g=a.hasClass("cke_toolbox_collapser_min");g?(c.show(),a.removeClass("cke_toolbox_collapser_min"),a.setAttribute("title",b.lang.toolbar.toolbarCollapse)):(c.hide(),a.addClass("cke_toolbox_collapser_min"),a.setAttribute("title",b.lang.toolbar.toolbarExpand));a.getFirst().setText(g?"▲":"◀");e.setStyle("height",
f-(d.$.offsetHeight-h)+"px");b.fire("resize",{outerHeight:b.container.$.offsetHeight,contentsHeight:e.$.offsetHeight,outerWidth:b.container.$.offsetWidth})},modes:{wysiwyg:1,source:1}});a.setKeystroke(CKEDITOR.ALT+(CKEDITOR.env.ie||CKEDITOR.env.webkit?189:109),"toolbarCollapse");b.push('\x3ca title\x3d"'+(d?a.lang.toolbar.toolbarCollapse:a.lang.toolbar.toolbarExpand)+'" id\x3d"'+a.ui.spaceId("toolbar_collapser")+'" tabIndex\x3d"-1" class\x3d"cke_toolbox_collapser');d||b.push(" cke_toolbox_collapser_min");
b.push('" onclick\x3d"CKEDITOR.tools.callFunction('+A+')"\x3e','\x3cspan class\x3d"cke_arrow"\x3e\x26#9650;\x3c/span\x3e',"\x3c/a\x3e")}b.push("\x3c/span\x3e");c.data.html+=b.join("")}});a.on("destroy",function(){if(this.toolbox){var a,d=0,b,e,g;for(a=this.toolbox.toolbars;d<a.length;d++)for(e=a[d].items,b=0;b<e.length;b++)g=e[b],g.clickFn&&CKEDITOR.tools.removeFunction(g.clickFn),g.keyDownFn&&CKEDITOR.tools.removeFunction(g.keyDownFn)}});a.on("uiReady",function(){var c=a.ui.space("toolbox");c&&a.focusManager.add(c,
1)});a.addCommand("toolbarFocus",C);a.setKeystroke(CKEDITOR.ALT+121,"toolbarFocus");a.ui.add("-",CKEDITOR.UI_SEPARATOR,{});a.ui.addHandler(CKEDITOR.UI_SEPARATOR,{create:function(){return{render:function(a,d){d.push('\x3cspan class\x3d"cke_toolbar_separator" role\x3d"separator"\x3e\x3c/span\x3e');return{}}}}})}});CKEDITOR.ui.prototype.addToolbarGroup=function(a,d,g){var c=q(this.editor),h=0===d,b={name:a};if(g){if(g=CKEDITOR.tools.search(c,function(a){return a.name==g})){!g.groups&&(g.groups=[]);if(d&&
(d=CKEDITOR.tools.indexOf(g.groups,d),0<=d)){g.groups.splice(d+1,0,a);return}h?g.groups.splice(0,0,a):g.groups.push(a);return}d=null}d&&(d=CKEDITOR.tools.indexOf(c,function(a){return a.name==d}));h?c.splice(0,0,a):"number"==typeof d?c.splice(d+1,0,b):c.push(a)}})();CKEDITOR.UI_SEPARATOR="separator";CKEDITOR.config.toolbarLocation="top";(function(){function q(a,d){function l(c){c=k.list[c];if(c.equals(a.editable())||"true"==c.getAttribute("contenteditable")){var e=a.createRange();e.selectNodeContents(c);e.select()}else a.getSelection().selectElement(c);a.focus()}function m(){n&&n.setHtml('\x3cspan class\x3d"cke_path_empty"\x3e\x26nbsp;\x3c/span\x3e');delete k.list}var p=a.ui.spaceId("path"),n,k=a._.elementsPath,q=k.idBase;d.html+='\x3cspan id\x3d"'+p+'_label" class\x3d"cke_voice_label"\x3e'+a.lang.elementspath.eleLabel+'\x3c/span\x3e\x3cspan id\x3d"'+
p+'" class\x3d"cke_path" role\x3d"group" aria-labelledby\x3d"'+p+'_label"\x3e\x3cspan class\x3d"cke_path_empty"\x3e\x26nbsp;\x3c/span\x3e\x3c/span\x3e';a.on("uiReady",function(){var c=a.ui.space("path");c&&a.focusManager.add(c,1)});k.onClick=l;var v=CKEDITOR.tools.addFunction(l),w=CKEDITOR.tools.addFunction(function(c,e){var g=k.idBase,b;e=new CKEDITOR.dom.event(e);b="rtl"==a.lang.dir;switch(e.getKeystroke()){case b?39:37:case 9:return(b=CKEDITOR.document.getById(g+(c+1)))||(b=CKEDITOR.document.getById(g+
"0")),b.focus(),!1;case b?37:39:case CKEDITOR.SHIFT+9:return(b=CKEDITOR.document.getById(g+(c-1)))||(b=CKEDITOR.document.getById(g+(k.list.length-1))),b.focus(),!1;case 27:return a.focus(),!1;case 13:case 32:return l(c),!1}return!0});a.on("selectionChange",function(){for(var c=[],e=k.list=[],g=[],b=k.filters,d=!0,l=a.elementPath().elements,f,u=l.length;u--;){var h=l[u],r=0;f=h.data("cke-display-name")?h.data("cke-display-name"):h.data("cke-real-element-type")?h.data("cke-real-element-type"):h.getName();
(d=h.hasAttribute("contenteditable")?"true"==h.getAttribute("contenteditable"):d)||h.hasAttribute("contenteditable")||(r=1);for(var t=0;t<b.length;t++){var m=b[t](h,f);if(!1===m){r=1;break}f=m||f}r||(e.unshift(h),g.unshift(f))}e=e.length;for(b=0;b<e;b++)f=g[b],d=a.lang.elementspath.eleTitle.replace(/%1/,f),f=x.output({id:q+b,label:d,text:f,jsTitle:"javascript:void('"+f+"')",index:b,keyDownFn:w,clickFn:v}),c.unshift(f);n||(n=CKEDITOR.document.getById(p));g=n;g.setHtml(c.join("")+'\x3cspan class\x3d"cke_path_empty"\x3e\x26nbsp;\x3c/span\x3e');
a.fire("elementsPathUpdate",{space:g})});a.on("readOnly",m);a.on("contentDomUnload",m);a.addCommand("elementsPathFocus",y.toolbarFocus);a.setKeystroke(CKEDITOR.ALT+122,"elementsPathFocus")}var y={toolbarFocus:{editorFocus:!1,readOnly:1,exec:function(a){(a=CKEDITOR.document.getById(a._.elementsPath.idBase+"0"))&&a.focus(CKEDITOR.env.ie||CKEDITOR.env.air)}}},d="";CKEDITOR.env.gecko&&CKEDITOR.env.mac&&(d+=' onkeypress\x3d"return false;"');CKEDITOR.env.gecko&&(d+=' onblur\x3d"this.style.cssText \x3d this.style.cssText;"');
var x=CKEDITOR.addTemplate("pathItem",'\x3ca id\x3d"{id}" href\x3d"{jsTitle}" tabindex\x3d"-1" class\x3d"cke_path_item" title\x3d"{label}"'+d+' hidefocus\x3d"true"  onkeydown\x3d"return CKEDITOR.tools.callFunction({keyDownFn},{index}, event );" onclick\x3d"CKEDITOR.tools.callFunction({clickFn},{index}); return false;" role\x3d"button" aria-label\x3d"{label}"\x3e{text}\x3c/a\x3e');CKEDITOR.plugins.add("elementspath",{init:function(a){a._.elementsPath={idBase:"cke_elementspath_"+CKEDITOR.tools.getNextNumber()+
"_",filters:[]};a.on("uiSpace",function(d){"bottom"==d.data.space&&q(a,d.data)})}})})();(function(){function q(b,d,a){a=b.config.forceEnterMode||a;"wysiwyg"==b.mode&&(d||(d=b.activeEnterMode),b.elementPath().isContextFor("p")||(d=CKEDITOR.ENTER_BR,a=1),b.fire("saveSnapshot"),d==CKEDITOR.ENTER_BR?t(b,d,null,a):u(b,d,null,a),b.fire("saveSnapshot"))}function v(b){b=b.getSelection().getRanges(!0);for(var d=b.length-1;0<d;d--)b[d].deleteContents();return b[0]}function y(b){var d=b.startContainer.getAscendant(function(a){return a.type==CKEDITOR.NODE_ELEMENT&&"true"==a.getAttribute("contenteditable")},
!0);if(b.root.equals(d))return b;d=new CKEDITOR.dom.range(d);d.moveToRange(b);return d}CKEDITOR.plugins.add("enterkey",{init:function(b){b.addCommand("enter",{modes:{wysiwyg:1},editorFocus:!1,exec:function(b){q(b)}});b.addCommand("shiftEnter",{modes:{wysiwyg:1},editorFocus:!1,exec:function(b){q(b,b.activeShiftEnterMode,1)}});b.setKeystroke([[13,"enter"],[CKEDITOR.SHIFT+13,"shiftEnter"]])}});var z=CKEDITOR.dom.walker.whitespaces(),A=CKEDITOR.dom.walker.bookmark();CKEDITOR.plugins.enterkey={enterBlock:function(b,
d,a,h){if(a=a||v(b)){a=y(a);var f=a.document,k=a.checkStartOfBlock(),m=a.checkEndOfBlock(),l=b.elementPath(a.startContainer),c=l.block,n=d==CKEDITOR.ENTER_DIV?"div":"p",e;if(k&&m){if(c&&(c.is("li")||c.getParent().is("li"))){c.is("li")||(c=c.getParent());a=c.getParent();e=a.getParent();h=!c.hasPrevious();var p=!c.hasNext(),n=b.getSelection(),g=n.createBookmarks(),k=c.getDirection(1),m=c.getAttribute("class"),r=c.getAttribute("style"),q=e.getDirection(1)!=k;b=b.enterMode!=CKEDITOR.ENTER_BR||q||r||m;
if(e.is("li"))h||p?(h&&p&&a.remove(),c[p?"insertAfter":"insertBefore"](e)):c.breakParent(e);else{if(b)if(l.block.is("li")?(e=f.createElement(d==CKEDITOR.ENTER_P?"p":"div"),q&&e.setAttribute("dir",k),r&&e.setAttribute("style",r),m&&e.setAttribute("class",m),c.moveChildren(e)):e=l.block,h||p)e[h?"insertBefore":"insertAfter"](a);else c.breakParent(a),e.insertAfter(a);else if(c.appendBogus(!0),h||p)for(;f=c[h?"getFirst":"getLast"]();)f[h?"insertBefore":"insertAfter"](a);else for(c.breakParent(a);f=c.getLast();)f.insertAfter(a);
c.remove()}n.selectBookmarks(g);return}if(c&&c.getParent().is("blockquote")){c.breakParent(c.getParent());c.getPrevious().getFirst(CKEDITOR.dom.walker.invisible(1))||c.getPrevious().remove();c.getNext().getFirst(CKEDITOR.dom.walker.invisible(1))||c.getNext().remove();a.moveToElementEditStart(c);a.select();return}}else if(c&&c.is("pre")&&!m){t(b,d,a,h);return}if(k=a.splitBlock(n)){d=k.previousBlock;c=k.nextBlock;l=k.wasStartOfBlock;b=k.wasEndOfBlock;c?(g=c.getParent(),g.is("li")&&(c.breakParent(g),
c.move(c.getNext(),1))):d&&(g=d.getParent())&&g.is("li")&&(d.breakParent(g),g=d.getNext(),a.moveToElementEditStart(g),d.move(d.getPrevious()));if(l||b){if(d){if(d.is("li")||!w.test(d.getName())&&!d.is("pre"))e=d.clone()}else c&&(e=c.clone());e?h&&!e.is("li")&&e.renameNode(n):g&&g.is("li")?e=g:(e=f.createElement(n),d&&(p=d.getDirection())&&e.setAttribute("dir",p));if(f=k.elementPath)for(h=0,n=f.elements.length;h<n;h++){g=f.elements[h];if(g.equals(f.block)||g.equals(f.blockLimit))break;CKEDITOR.dtd.$removeEmpty[g.getName()]&&
(g=g.clone(),e.moveChildren(g),e.append(g))}e.appendBogus();e.getParent()||a.insertNode(e);e.is("li")&&e.removeAttribute("value");!CKEDITOR.env.ie||!l||b&&d.getChildCount()||(a.moveToElementEditStart(b?d:e),a.select());a.moveToElementEditStart(l&&!b?c:e)}else c.is("li")&&(e=a.clone(),e.selectNodeContents(c),e=new CKEDITOR.dom.walker(e),e.evaluator=function(a){return!(A(a)||z(a)||a.type==CKEDITOR.NODE_ELEMENT&&a.getName()in CKEDITOR.dtd.$inline&&!(a.getName()in CKEDITOR.dtd.$empty))},(g=e.next())&&
g.type==CKEDITOR.NODE_ELEMENT&&g.is("ul","ol")&&(CKEDITOR.env.needsBrFiller?f.createElement("br"):f.createText(" ")).insertBefore(g)),c&&a.moveToElementEditStart(c);a.select();a.scrollIntoView()}}},enterBr:function(b,d,a,h){if(a=a||v(b)){var f=a.document,k=a.checkEndOfBlock(),m=new CKEDITOR.dom.elementPath(b.getSelection().getStartElement()),l=m.block,c=l&&m.block.getName();h||"li"!=c?(!h&&k&&w.test(c)?(k=l.getDirection())?(f=f.createElement("div"),f.setAttribute("dir",k),f.insertAfter(l),a.setStart(f,
0)):(f.createElement("br").insertAfter(l),CKEDITOR.env.gecko&&f.createText("").insertAfter(l),a.setStartAt(l.getNext(),CKEDITOR.env.ie?CKEDITOR.POSITION_BEFORE_START:CKEDITOR.POSITION_AFTER_START)):(b="pre"==c&&CKEDITOR.env.ie&&8>CKEDITOR.env.version?f.createText("\r"):f.createElement("br"),a.deleteContents(),a.insertNode(b),CKEDITOR.env.needsBrFiller?(f.createText("﻿").insertAfter(b),k&&(l||m.blockLimit).appendBogus(),b.getNext().$.nodeValue="",a.setStartAt(b.getNext(),CKEDITOR.POSITION_AFTER_START)):
a.setStartAt(b,CKEDITOR.POSITION_AFTER_END)),a.collapse(!0),a.select(),a.scrollIntoView()):u(b,d,a,h)}}};var x=CKEDITOR.plugins.enterkey,t=x.enterBr,u=x.enterBlock,w=/^h[1-6]$/})();(function(){function k(b,f){var g={},c=[],e={nbsp:" ",shy:"­",gt:"\x3e",lt:"\x3c",amp:"\x26",apos:"'",quot:'"'};b=b.replace(/\b(nbsp|shy|gt|lt|amp|apos|quot)(?:,|$)/g,function(b,a){var d=f?"\x26"+a+";":e[a];g[d]=f?e[a]:"\x26"+a+";";c.push(d);return""});if(!f&&b){b=b.split(",");var a=document.createElement("div"),d;a.innerHTML="\x26"+b.join(";\x26")+";";d=a.innerHTML;a=null;for(a=0;a<d.length;a++){var h=d.charAt(a);g[h]="\x26"+b[a]+";";c.push(h)}}g.regex=c.join(f?"|":"");return g}CKEDITOR.plugins.add("entities",
{afterInit:function(b){function f(a){return h[a]}function g(b){return"force"!=c.entities_processNumerical&&a[b]?a[b]:"\x26#"+b.charCodeAt(0)+";"}var c=b.config;if(b=(b=b.dataProcessor)&&b.htmlFilter){var e=[];!1!==c.basicEntities&&e.push("nbsp,gt,lt,amp");c.entities&&(e.length&&e.push("quot,iexcl,cent,pound,curren,yen,brvbar,sect,uml,copy,ordf,laquo,not,shy,reg,macr,deg,plusmn,sup2,sup3,acute,micro,para,middot,cedil,sup1,ordm,raquo,frac14,frac12,frac34,iquest,times,divide,fnof,bull,hellip,prime,Prime,oline,frasl,weierp,image,real,trade,alefsym,larr,uarr,rarr,darr,harr,crarr,lArr,uArr,rArr,dArr,hArr,forall,part,exist,empty,nabla,isin,notin,ni,prod,sum,minus,lowast,radic,prop,infin,ang,and,or,cap,cup,int,there4,sim,cong,asymp,ne,equiv,le,ge,sub,sup,nsub,sube,supe,oplus,otimes,perp,sdot,lceil,rceil,lfloor,rfloor,lang,rang,loz,spades,clubs,hearts,diams,circ,tilde,ensp,emsp,thinsp,zwnj,zwj,lrm,rlm,ndash,mdash,lsquo,rsquo,sbquo,ldquo,rdquo,bdquo,dagger,Dagger,permil,lsaquo,rsaquo,euro"),
c.entities_latin&&e.push("Agrave,Aacute,Acirc,Atilde,Auml,Aring,AElig,Ccedil,Egrave,Eacute,Ecirc,Euml,Igrave,Iacute,Icirc,Iuml,ETH,Ntilde,Ograve,Oacute,Ocirc,Otilde,Ouml,Oslash,Ugrave,Uacute,Ucirc,Uuml,Yacute,THORN,szlig,agrave,aacute,acirc,atilde,auml,aring,aelig,ccedil,egrave,eacute,ecirc,euml,igrave,iacute,icirc,iuml,eth,ntilde,ograve,oacute,ocirc,otilde,ouml,oslash,ugrave,uacute,ucirc,uuml,yacute,thorn,yuml,OElig,oelig,Scaron,scaron,Yuml"),c.entities_greek&&e.push("Alpha,Beta,Gamma,Delta,Epsilon,Zeta,Eta,Theta,Iota,Kappa,Lambda,Mu,Nu,Xi,Omicron,Pi,Rho,Sigma,Tau,Upsilon,Phi,Chi,Psi,Omega,alpha,beta,gamma,delta,epsilon,zeta,eta,theta,iota,kappa,lambda,mu,nu,xi,omicron,pi,rho,sigmaf,sigma,tau,upsilon,phi,chi,psi,omega,thetasym,upsih,piv"),
c.entities_additional&&e.push(c.entities_additional));var a=k(e.join(",")),d=a.regex?"["+a.regex+"]":"a^";delete a.regex;c.entities&&c.entities_processNumerical&&(d="[^ -~]|"+d);var d=new RegExp(d,"g"),h=k("nbsp,gt,lt,amp,shy",!0),l=new RegExp(h.regex,"g");b.addRules({text:function(a){return a.replace(l,f).replace(d,g)}},{applyToAll:!0,excludeNestedEditable:!0})}}})})();CKEDITOR.config.basicEntities=!0;CKEDITOR.config.entities=!0;CKEDITOR.config.entities_latin=!0;CKEDITOR.config.entities_greek=!0;
CKEDITOR.config.entities_additional="#39";CKEDITOR.plugins.add("popup");
CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{popup:function(e,a,b,d){a=a||"80%";b=b||"70%";"string"==typeof a&&1<a.length&&"%"==a.substr(a.length-1,1)&&(a=parseInt(window.screen.width*parseInt(a,10)/100,10));"string"==typeof b&&1<b.length&&"%"==b.substr(b.length-1,1)&&(b=parseInt(window.screen.height*parseInt(b,10)/100,10));640>a&&(a=640);420>b&&(b=420);var f=parseInt((window.screen.height-b)/2,10),g=parseInt((window.screen.width-a)/2,10);d=(d||"location\x3dno,menubar\x3dno,toolbar\x3dno,dependent\x3dyes,minimizable\x3dno,modal\x3dyes,alwaysRaised\x3dyes,resizable\x3dyes,scrollbars\x3dyes")+",width\x3d"+
a+",height\x3d"+b+",top\x3d"+f+",left\x3d"+g;var c=window.open("",null,d,!0);if(!c)return!1;try{-1==navigator.userAgent.toLowerCase().indexOf(" chrome/")&&(c.moveTo(g,f),c.resizeTo(a,b)),c.focus(),c.location.href=e}catch(h){window.open(e,null,d,!0)}return!0}});(function(){function g(a,c){var d=[];if(c)for(var b in c)d.push(b+"\x3d"+encodeURIComponent(c[b]));else return a;return a+(-1!=a.indexOf("?")?"\x26":"?")+d.join("\x26")}function k(a){a+="";return a.charAt(0).toUpperCase()+a.substr(1)}function m(){var a=this.getDialog(),c=a.getParentEditor();c._.filebrowserSe=this;var d=c.config["filebrowser"+k(a.getName())+"WindowWidth"]||c.config.filebrowserWindowWidth||"80%",a=c.config["filebrowser"+k(a.getName())+"WindowHeight"]||c.config.filebrowserWindowHeight||
"70%",b=this.filebrowser.params||{};b.CKEditor=c.name;b.CKEditorFuncNum=c._.filebrowserFn;b.langCode||(b.langCode=c.langCode);b=g(this.filebrowser.url,b);c.popup(b,d,a,c.config.filebrowserWindowFeatures||c.config.fileBrowserWindowFeatures)}function n(){var a=this.getDialog();a.getParentEditor()._.filebrowserSe=this;return a.getContentElement(this["for"][0],this["for"][1]).getInputElement().$.value&&a.getContentElement(this["for"][0],this["for"][1]).getAction()?!0:!1}function p(a,c,d){var b=d.params||
{};b.CKEditor=a.name;b.CKEditorFuncNum=a._.filebrowserFn;b.langCode||(b.langCode=a.langCode);c.action=g(d.url,b);c.filebrowser=d}function l(a,c,d,b){if(b&&b.length)for(var e,g=b.length;g--;)if(e=b[g],"hbox"!=e.type&&"vbox"!=e.type&&"fieldset"!=e.type||l(a,c,d,e.children),e.filebrowser)if("string"==typeof e.filebrowser&&(e.filebrowser={action:"fileButton"==e.type?"QuickUpload":"Browse",target:e.filebrowser}),"Browse"==e.filebrowser.action){var f=e.filebrowser.url;void 0===f&&(f=a.config["filebrowser"+
k(c)+"BrowseUrl"],void 0===f&&(f=a.config.filebrowserBrowseUrl));f&&(e.onClick=m,e.filebrowser.url=f,e.hidden=!1)}else if("QuickUpload"==e.filebrowser.action&&e["for"]&&(f=e.filebrowser.url,void 0===f&&(f=a.config["filebrowser"+k(c)+"UploadUrl"],void 0===f&&(f=a.config.filebrowserUploadUrl)),f)){var h=e.onClick;e.onClick=function(a){var b=a.sender;if(h&&!1===h.call(b,a))return!1;if(n.call(b,a)){a=b.getDialog().getContentElement(this["for"][0],this["for"][1]).getInputElement();if(b=new CKEDITOR.dom.element(a.$.form))(a=
b.$.elements.ckCsrfToken)?a=new CKEDITOR.dom.element(a):(a=new CKEDITOR.dom.element("input"),a.setAttributes({name:"ckCsrfToken",type:"hidden"}),b.append(a)),a.setAttribute("value",CKEDITOR.tools.getCsrfToken());return!0}return!1};e.filebrowser.url=f;e.hidden=!1;p(a,d.getContents(e["for"][0]).get(e["for"][1]),e.filebrowser)}}function h(a,c,d){if(-1!==d.indexOf(";")){d=d.split(";");for(var b=0;b<d.length;b++)if(h(a,c,d[b]))return!0;return!1}return(a=a.getContents(c).get(d).filebrowser)&&a.url}function q(a,
c){var d=this._.filebrowserSe.getDialog(),b=this._.filebrowserSe["for"],e=this._.filebrowserSe.filebrowser.onSelect;b&&d.getContentElement(b[0],b[1]).reset();if("function"!=typeof c||!1!==c.call(this._.filebrowserSe))if(!e||!1!==e.call(this._.filebrowserSe,a,c))if("string"==typeof c&&c&&alert(c),a&&(b=this._.filebrowserSe,d=b.getDialog(),b=b.filebrowser.target||null))if(b=b.split(":"),e=d.getContentElement(b[0],b[1]))e.setValue(a),d.selectPage(b[0])}CKEDITOR.plugins.add("filebrowser",{requires:"popup",
init:function(a){a._.filebrowserFn=CKEDITOR.tools.addFunction(q,a);a.on("destroy",function(){CKEDITOR.tools.removeFunction(this._.filebrowserFn)})}});CKEDITOR.on("dialogDefinition",function(a){if(a.editor.plugins.filebrowser)for(var c=a.data.definition,d,b=0;b<c.contents.length;++b)if(d=c.contents[b])l(a.editor,a.data.name,c,d.elements),d.hidden&&d.filebrowser&&(d.hidden=!h(c,d.id,d.filebrowser))})})();CKEDITOR.plugins.add("find",{requires:"dialog",init:function(a){var b=a.addCommand("find",new CKEDITOR.dialogCommand("find"));b.canUndo=!1;b.readOnly=1;a.addCommand("replace",new CKEDITOR.dialogCommand("replace")).canUndo=!1;a.ui.addButton&&(a.ui.addButton("Find",{label:a.lang.find.find,command:"find",toolbar:"find,10"}),a.ui.addButton("Replace",{label:a.lang.find.replace,command:"replace",toolbar:"find,20"}));CKEDITOR.dialog.add("find",this.path+"dialogs/find.js");CKEDITOR.dialog.add("replace",this.path+
"dialogs/find.js")}});CKEDITOR.config.find_highlight={element:"span",styles:{"background-color":"#004",color:"#fff"}};(function(){function g(a,b){var c=l.exec(a),d=l.exec(b);if(c){if(!c[2]&&"px"==d[2])return d[1];if("px"==c[2]&&!d[2])return d[1]+"px"}return b}var k=CKEDITOR.htmlParser.cssStyle,h=CKEDITOR.tools.cssLength,l=/^((?:\d*(?:\.\d+))|(?:\d+))(.*)?$/i,m={elements:{$:function(a){var b=a.attributes;if((b=(b=(b=b&&b["data-cke-realelement"])&&new CKEDITOR.htmlParser.fragment.fromHtml(decodeURIComponent(b)))&&b.children[0])&&a.attributes["data-cke-resizable"]){var c=(new k(a)).rules;a=b.attributes;var d=c.width,
c=c.height;d&&(a.width=g(a.width,d));c&&(a.height=g(a.height,c))}return b}}};CKEDITOR.plugins.add("fakeobjects",{init:function(a){a.filter.allow("img[!data-cke-realelement,src,alt,title](*){*}","fakeobjects")},afterInit:function(a){(a=(a=a.dataProcessor)&&a.htmlFilter)&&a.addRules(m,{applyToAll:!0})}});CKEDITOR.editor.prototype.createFakeElement=function(a,b,c,d){var e=this.lang.fakeobjects,e=e[c]||e.unknown;b={"class":b,"data-cke-realelement":encodeURIComponent(a.getOuterHtml()),"data-cke-real-node-type":a.type,
alt:e,title:e,align:a.getAttribute("align")||""};CKEDITOR.env.hc||(b.src=CKEDITOR.tools.transparentImageData);c&&(b["data-cke-real-element-type"]=c);d&&(b["data-cke-resizable"]=d,c=new k,d=a.getAttribute("width"),a=a.getAttribute("height"),d&&(c.rules.width=h(d)),a&&(c.rules.height=h(a)),c.populate(b));return this.document.createElement("img",{attributes:b})};CKEDITOR.editor.prototype.createFakeParserElement=function(a,b,c,d){var e=this.lang.fakeobjects,e=e[c]||e.unknown,f;f=new CKEDITOR.htmlParser.basicWriter;
a.writeHtml(f);f=f.getHtml();b={"class":b,"data-cke-realelement":encodeURIComponent(f),"data-cke-real-node-type":a.type,alt:e,title:e,align:a.attributes.align||""};CKEDITOR.env.hc||(b.src=CKEDITOR.tools.transparentImageData);c&&(b["data-cke-real-element-type"]=c);d&&(b["data-cke-resizable"]=d,d=a.attributes,a=new k,c=d.width,d=d.height,void 0!==c&&(a.rules.width=h(c)),void 0!==d&&(a.rules.height=h(d)),a.populate(b));return new CKEDITOR.htmlParser.element("img",b)};CKEDITOR.editor.prototype.restoreRealElement=
function(a){if(a.data("cke-real-node-type")!=CKEDITOR.NODE_ELEMENT)return null;var b=CKEDITOR.dom.element.createFromHtml(decodeURIComponent(a.data("cke-realelement")),this.document);if(a.data("cke-resizable")){var c=a.getStyle("width");a=a.getStyle("height");c&&b.setAttribute("width",g(b.getAttribute("width"),c));a&&b.setAttribute("height",g(b.getAttribute("height"),a))}return b}})();(function(){function d(a){a=a.attributes;return"application/x-shockwave-flash"==a.type||f.test(a.src||"")}function e(a,b){return a.createFakeParserElement(b,"cke_flash","flash",!0)}var f=/\.swf(?:$|\?)/i;CKEDITOR.plugins.add("flash",{requires:"dialog,fakeobjects",onLoad:function(){CKEDITOR.addCss("img.cke_flash{background-image: url("+CKEDITOR.getUrl(this.path+"images/placeholder.png")+");background-position: center center;background-repeat: no-repeat;border: 1px solid #a9a9a9;width: 80px;height: 80px;}")},
init:function(a){var b="object[classid,codebase,height,hspace,vspace,width];param[name,value];embed[height,hspace,pluginspage,src,type,vspace,width]";CKEDITOR.dialog.isTabEnabled(a,"flash","properties")&&(b+=";object[align]; embed[allowscriptaccess,quality,scale,wmode]");CKEDITOR.dialog.isTabEnabled(a,"flash","advanced")&&(b+=";object[id]{*}; embed[bgcolor]{*}(*)");a.addCommand("flash",new CKEDITOR.dialogCommand("flash",{allowedContent:b,requiredContent:"embed"}));a.ui.addButton&&a.ui.addButton("Flash",
{label:a.lang.common.flash,command:"flash",toolbar:"insert,20"});CKEDITOR.dialog.add("flash",this.path+"dialogs/flash.js");a.addMenuItems&&a.addMenuItems({flash:{label:a.lang.flash.properties,command:"flash",group:"flash"}});a.on("doubleclick",function(a){var b=a.data.element;b.is("img")&&"flash"==b.data("cke-real-element-type")&&(a.data.dialog="flash")});a.contextMenu&&a.contextMenu.addListener(function(a){if(a&&a.is("img")&&!a.isReadOnly()&&"flash"==a.data("cke-real-element-type"))return{flash:CKEDITOR.TRISTATE_OFF}})},
afterInit:function(a){var b=a.dataProcessor;(b=b&&b.dataFilter)&&b.addRules({elements:{"cke:object":function(b){var c=b.attributes;if(!(c.classid&&String(c.classid).toLowerCase()||d(b))){for(c=0;c<b.children.length;c++)if("cke:embed"==b.children[c].name){if(!d(b.children[c]))break;return e(a,b)}return null}return e(a,b)},"cke:embed":function(b){return d(b)?e(a,b):null}}},5)}})})();CKEDITOR.tools.extend(CKEDITOR.config,{flashEmbedTagOnly:!1,flashAddEmbedTag:!0,flashConvertOnEdit:!1});(function(){function k(a){var l=a.config,p=a.fire("uiSpace",{space:"top",html:""}).html,t=function(){function f(a,c,e){b.setStyle(c,w(e));b.setStyle("position",a)}function e(a){var b=k.getDocumentPosition();switch(a){case "top":f("absolute","top",b.y-q-r);break;case "pin":f("fixed","top",x);break;case "bottom":f("absolute","top",b.y+(c.height||c.bottom-c.top)+r)}m=a}var m,k,n,c,h,q,v,p=l.floatSpaceDockedOffsetX||0,r=l.floatSpaceDockedOffsetY||0,u=l.floatSpacePinnedOffsetX||0,x=l.floatSpacePinnedOffsetY||
0;return function(d){if(k=a.editable()){var f=d&&"focus"==d.name;f&&b.show();a.fire("floatingSpaceLayout",{show:f});b.removeStyle("left");b.removeStyle("right");n=b.getClientRect();c=k.getClientRect();h=g.getViewPaneSize();q=n.height;v="pageXOffset"in g.$?g.$.pageXOffset:CKEDITOR.document.$.documentElement.scrollLeft;m?(q+r<=c.top?e("top"):q+r>h.height-c.bottom?e("pin"):e("bottom"),d=h.width/2,d=l.floatSpacePreferRight?"right":0<c.left&&c.right<h.width&&c.width>n.width?"rtl"==l.contentsLangDirection?
"right":"left":d-c.left>c.right-d?"left":"right",n.width>h.width?(d="left",f=0):(f="left"==d?0<c.left?c.left:0:c.right<h.width?h.width-c.right:0,f+n.width>h.width&&(d="left"==d?"right":"left",f=0)),b.setStyle(d,w(("pin"==m?u:p)+f+("pin"==m?0:"left"==d?v:-v)))):(m="pin",e("pin"),t(d))}}}();if(p){var k=new CKEDITOR.template('\x3cdiv id\x3d"cke_{name}" class\x3d"cke {id} cke_reset_all cke_chrome cke_editor_{name} cke_float cke_{langDir} '+CKEDITOR.env.cssClass+'" dir\x3d"{langDir}" title\x3d"'+(CKEDITOR.env.gecko?
" ":"")+'" lang\x3d"{langCode}" role\x3d"application" style\x3d"{style}"'+(a.title?' aria-labelledby\x3d"cke_{name}_arialbl"':" ")+"\x3e"+(a.title?'\x3cspan id\x3d"cke_{name}_arialbl" class\x3d"cke_voice_label"\x3e{voiceLabel}\x3c/span\x3e':" ")+'\x3cdiv class\x3d"cke_inner"\x3e\x3cdiv id\x3d"{topId}" class\x3d"cke_top" role\x3d"presentation"\x3e{content}\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e'),b=CKEDITOR.document.getBody().append(CKEDITOR.dom.element.createFromHtml(k.output({content:p,id:a.id,langDir:a.lang.dir,
langCode:a.langCode,name:a.name,style:"display:none;z-index:"+(l.baseFloatZIndex-1),topId:a.ui.spaceId("top"),voiceLabel:a.title}))),u=CKEDITOR.tools.eventsBuffer(500,t),e=CKEDITOR.tools.eventsBuffer(100,t);b.unselectable();b.on("mousedown",function(a){a=a.data;a.getTarget().hasAscendant("a",1)||a.preventDefault()});a.on("focus",function(b){t(b);a.on("change",u.input);g.on("scroll",e.input);g.on("resize",e.input)});a.on("blur",function(){b.hide();a.removeListener("change",u.input);g.removeListener("scroll",
e.input);g.removeListener("resize",e.input)});a.on("destroy",function(){g.removeListener("scroll",e.input);g.removeListener("resize",e.input);b.clearCustomData();b.remove()});a.focusManager.hasFocus&&b.show();a.focusManager.add(b,1)}}var g=CKEDITOR.document.getWindow(),w=CKEDITOR.tools.cssLength;CKEDITOR.plugins.add("floatingspace",{init:function(a){a.on("loaded",function(){k(this)},null,null,20)}})})();CKEDITOR.plugins.add("listblock",{requires:"panel",onLoad:function(){var f=CKEDITOR.addTemplate("panel-list",'\x3cul role\x3d"presentation" class\x3d"cke_panel_list"\x3e{items}\x3c/ul\x3e'),g=CKEDITOR.addTemplate("panel-list-item",'\x3cli id\x3d"{id}" class\x3d"cke_panel_listItem" role\x3dpresentation\x3e\x3ca id\x3d"{id}_option" _cke_focus\x3d1 hidefocus\x3dtrue title\x3d"{title}" href\x3d"javascript:void(\'{val}\')"  {onclick}\x3d"CKEDITOR.tools.callFunction({clickFn},\'{val}\'); return false;" role\x3d"option"\x3e{text}\x3c/a\x3e\x3c/li\x3e'),
h=CKEDITOR.addTemplate("panel-list-group",'\x3ch1 id\x3d"{id}" class\x3d"cke_panel_grouptitle" role\x3d"presentation" \x3e{label}\x3c/h1\x3e'),k=/\'/g;CKEDITOR.ui.panel.prototype.addListBlock=function(a,b){return this.addBlock(a,new CKEDITOR.ui.listBlock(this.getHolderElement(),b))};CKEDITOR.ui.listBlock=CKEDITOR.tools.createClass({base:CKEDITOR.ui.panel.block,$:function(a,b){b=b||{};var c=b.attributes||(b.attributes={});(this.multiSelect=!!b.multiSelect)&&(c["aria-multiselectable"]=!0);!c.role&&
(c.role="listbox");this.base.apply(this,arguments);this.element.setAttribute("role",c.role);c=this.keys;c[40]="next";c[9]="next";c[38]="prev";c[CKEDITOR.SHIFT+9]="prev";c[32]=CKEDITOR.env.ie?"mouseup":"click";CKEDITOR.env.ie&&(c[13]="mouseup");this._.pendingHtml=[];this._.pendingList=[];this._.items={};this._.groups={}},_:{close:function(){if(this._.started){var a=f.output({items:this._.pendingList.join("")});this._.pendingList=[];this._.pendingHtml.push(a);delete this._.started}},getClick:function(){this._.click||
(this._.click=CKEDITOR.tools.addFunction(function(a){var b=this.toggle(a);if(this.onClick)this.onClick(a,b)},this));return this._.click}},proto:{add:function(a,b,c){var d=CKEDITOR.tools.getNextId();this._.started||(this._.started=1,this._.size=this._.size||0);this._.items[a]=d;var e;e=CKEDITOR.tools.htmlEncodeAttr(a).replace(k,"\\'");a={id:d,val:e,onclick:CKEDITOR.env.ie?'onclick\x3d"return false;" onmouseup':"onclick",clickFn:this._.getClick(),title:CKEDITOR.tools.htmlEncodeAttr(c||a),text:b||a};
this._.pendingList.push(g.output(a))},startGroup:function(a){this._.close();var b=CKEDITOR.tools.getNextId();this._.groups[a]=b;this._.pendingHtml.push(h.output({id:b,label:a}))},commit:function(){this._.close();this.element.appendHtml(this._.pendingHtml.join(""));delete this._.size;this._.pendingHtml=[]},toggle:function(a){var b=this.isMarked(a);b?this.unmark(a):this.mark(a);return!b},hideGroup:function(a){var b=(a=this.element.getDocument().getById(this._.groups[a]))&&a.getNext();a&&(a.setStyle("display",
"none"),b&&"ul"==b.getName()&&b.setStyle("display","none"))},hideItem:function(a){this.element.getDocument().getById(this._.items[a]).setStyle("display","none")},showAll:function(){var a=this._.items,b=this._.groups,c=this.element.getDocument(),d;for(d in a)c.getById(a[d]).setStyle("display","");for(var e in b)a=c.getById(b[e]),d=a.getNext(),a.setStyle("display",""),d&&"ul"==d.getName()&&d.setStyle("display","")},mark:function(a){this.multiSelect||this.unmarkAll();a=this._.items[a];var b=this.element.getDocument().getById(a);
b.addClass("cke_selected");this.element.getDocument().getById(a+"_option").setAttribute("aria-selected",!0);this.onMark&&this.onMark(b)},unmark:function(a){var b=this.element.getDocument();a=this._.items[a];var c=b.getById(a);c.removeClass("cke_selected");b.getById(a+"_option").removeAttribute("aria-selected");this.onUnmark&&this.onUnmark(c)},unmarkAll:function(){var a=this._.items,b=this.element.getDocument(),c;for(c in a){var d=a[c];b.getById(d).removeClass("cke_selected");b.getById(d+"_option").removeAttribute("aria-selected")}this.onUnmark&&
this.onUnmark()},isMarked:function(a){return this.element.getDocument().getById(this._.items[a]).hasClass("cke_selected")},focus:function(a){this._.focusIndex=-1;var b=this.element.getElementsByTag("a"),c,d=-1;if(a)for(c=this.element.getDocument().getById(this._.items[a]).getFirst();a=b.getItem(++d);){if(a.equals(c)){this._.focusIndex=d;break}}else this.element.focus();c&&setTimeout(function(){c.focus()},0)}}})}});CKEDITOR.plugins.add("richcombo",{requires:"floatpanel,listblock,button",beforeInit:function(d){d.ui.addHandler(CKEDITOR.UI_RICHCOMBO,CKEDITOR.ui.richCombo.handler)}});
(function(){var d='\x3cspan id\x3d"{id}" class\x3d"cke_combo cke_combo__{name} {cls}" role\x3d"presentation"\x3e\x3cspan id\x3d"{id}_label" class\x3d"cke_combo_label"\x3e{label}\x3c/span\x3e\x3ca class\x3d"cke_combo_button" title\x3d"{title}" tabindex\x3d"-1"'+(CKEDITOR.env.gecko&&!CKEDITOR.env.hc?"":" href\x3d\"javascript:void('{titleJs}')\"")+' hidefocus\x3d"true" role\x3d"button" aria-labelledby\x3d"{id}_label" aria-haspopup\x3d"true"';CKEDITOR.env.gecko&&CKEDITOR.env.mac&&(d+=' onkeypress\x3d"return false;"');
CKEDITOR.env.gecko&&(d+=' onblur\x3d"this.style.cssText \x3d this.style.cssText;"');var d=d+(' onkeydown\x3d"return CKEDITOR.tools.callFunction({keydownFn},event,this);" onfocus\x3d"return CKEDITOR.tools.callFunction({focusFn},event);" '+(CKEDITOR.env.ie?'onclick\x3d"return false;" onmouseup':"onclick")+'\x3d"CKEDITOR.tools.callFunction({clickFn},this);return false;"\x3e\x3cspan id\x3d"{id}_text" class\x3d"cke_combo_text cke_combo_inlinelabel"\x3e{label}\x3c/span\x3e\x3cspan class\x3d"cke_combo_open"\x3e\x3cspan class\x3d"cke_combo_arrow"\x3e'+
(CKEDITOR.env.hc?"\x26#9660;":CKEDITOR.env.air?"\x26nbsp;":"")+"\x3c/span\x3e\x3c/span\x3e\x3c/a\x3e\x3c/span\x3e"),k=CKEDITOR.addTemplate("combo",d);CKEDITOR.UI_RICHCOMBO="richcombo";CKEDITOR.ui.richCombo=CKEDITOR.tools.createClass({$:function(a){CKEDITOR.tools.extend(this,a,{canGroup:!1,title:a.label,modes:{wysiwyg:1},editorFocus:1});a=this.panel||{};delete this.panel;this.id=CKEDITOR.tools.getNextNumber();this.document=a.parent&&a.parent.getDocument()||CKEDITOR.document;a.className="cke_combopanel";
a.block={multiSelect:a.multiSelect,attributes:a.attributes};a.toolbarRelated=!0;this._={panelDefinition:a,items:{}}},proto:{renderHtml:function(a){var b=[];this.render(a,b);return b.join("")},render:function(a,b){function g(){if(this.getState()!=CKEDITOR.TRISTATE_ON){var c=this.modes[a.mode]?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED;a.readOnly&&!this.readOnly&&(c=CKEDITOR.TRISTATE_DISABLED);this.setState(c);this.setValue("");c!=CKEDITOR.TRISTATE_DISABLED&&this.refresh&&this.refresh()}}var d=
CKEDITOR.env,h="cke_"+this.id,e=CKEDITOR.tools.addFunction(function(b){l&&(a.unlockSelection(1),l=0);c.execute(b)},this),f=this,c={id:h,combo:this,focus:function(){CKEDITOR.document.getById(h).getChild(1).focus()},execute:function(c){var b=f._;if(b.state!=CKEDITOR.TRISTATE_DISABLED)if(f.createPanel(a),b.on)b.panel.hide();else{f.commit();var d=f.getValue();d?b.list.mark(d):b.list.unmarkAll();b.panel.showBlock(f.id,new CKEDITOR.dom.element(c),4)}},clickFn:e};a.on("activeFilterChange",g,this);a.on("mode",
g,this);a.on("selectionChange",g,this);!this.readOnly&&a.on("readOnly",g,this);var m=CKEDITOR.tools.addFunction(function(b,d){b=new CKEDITOR.dom.event(b);var g=b.getKeystroke();if(40==g)a.once("panelShow",function(a){a.data._.panel._.currentBlock.onKeyDown(40)});switch(g){case 13:case 32:case 40:CKEDITOR.tools.callFunction(e,d);break;default:c.onkey(c,g)}b.preventDefault()}),n=CKEDITOR.tools.addFunction(function(){c.onfocus&&c.onfocus()}),l=0;c.keyDownFn=m;d={id:h,name:this.name||this.command,label:this.label,
title:this.title,cls:this.className||"",titleJs:d.gecko&&!d.hc?"":(this.title||"").replace("'",""),keydownFn:m,focusFn:n,clickFn:e};k.output(d,b);if(this.onRender)this.onRender();return c},createPanel:function(a){if(!this._.panel){var b=this._.panelDefinition,d=this._.panelDefinition.block,k=b.parent||CKEDITOR.document.getBody(),h="cke_combopanel__"+this.name,e=new CKEDITOR.ui.floatPanel(a,k,b),f=e.addListBlock(this.id,d),c=this;e.onShow=function(){this.element.addClass(h);c.setState(CKEDITOR.TRISTATE_ON);
c._.on=1;c.editorFocus&&!a.focusManager.hasFocus&&a.focus();if(c.onOpen)c.onOpen();a.once("panelShow",function(){f.focus(!f.multiSelect&&c.getValue())})};e.onHide=function(b){this.element.removeClass(h);c.setState(c.modes&&c.modes[a.mode]?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED);c._.on=0;if(!b&&c.onClose)c.onClose()};e.onEscape=function(){e.hide(1)};f.onClick=function(a,b){c.onClick&&c.onClick.call(c,a,b);e.hide()};this._.panel=e;this._.list=f;e.getBlock(this.id).onHide=function(){c._.on=
0;c.setState(CKEDITOR.TRISTATE_OFF)};this.init&&this.init()}},setValue:function(a,b){this._.value=a;var d=this.document.getById("cke_"+this.id+"_text");d&&(a||b?d.removeClass("cke_combo_inlinelabel"):(b=this.label,d.addClass("cke_combo_inlinelabel")),d.setText("undefined"!=typeof b?b:a))},getValue:function(){return this._.value||""},unmarkAll:function(){this._.list.unmarkAll()},mark:function(a){this._.list.mark(a)},hideItem:function(a){this._.list.hideItem(a)},hideGroup:function(a){this._.list.hideGroup(a)},
showAll:function(){this._.list.showAll()},add:function(a,b,d){this._.items[a]=d||a;this._.list.add(a,b,d)},startGroup:function(a){this._.list.startGroup(a)},commit:function(){this._.committed||(this._.list.commit(),this._.committed=1,CKEDITOR.ui.fire("ready",this));this._.committed=1},setState:function(a){if(this._.state!=a){var b=this.document.getById("cke_"+this.id);b.setState(a,"cke_combo");a==CKEDITOR.TRISTATE_DISABLED?b.setAttribute("aria-disabled",!0):b.removeAttribute("aria-disabled");this._.state=
a}},getState:function(){return this._.state},enable:function(){this._.state==CKEDITOR.TRISTATE_DISABLED&&this.setState(this._.lastState)},disable:function(){this._.state!=CKEDITOR.TRISTATE_DISABLED&&(this._.lastState=this._.state,this.setState(CKEDITOR.TRISTATE_DISABLED))}},statics:{handler:{create:function(a){return new CKEDITOR.ui.richCombo(a)}}}});CKEDITOR.ui.prototype.addRichCombo=function(a,b){this.add(a,CKEDITOR.UI_RICHCOMBO,b)}})();(function(){function l(a,b,c,f,p,l,t,v){var w=a.config,q=new CKEDITOR.style(t),k=p.split(";");p=[];for(var m={},d=0;d<k.length;d++){var h=k[d];if(h){var h=h.split("/"),u={},n=k[d]=h[0];u[c]=p[d]=h[1]||n;m[n]=new CKEDITOR.style(t,u);m[n]._.definition.name=n}else k.splice(d--,1)}a.ui.addRichCombo(b,{label:f.label,title:f.panelTitle,toolbar:"styles,"+v,allowedContent:q,requiredContent:q,panel:{css:[CKEDITOR.skin.getPath("editor")].concat(w.contentsCss),multiSelect:!1,attributes:{"aria-label":f.panelTitle}},
init:function(){this.startGroup(f.panelTitle);for(var a=0;a<k.length;a++){var b=k[a];this.add(b,m[b].buildPreview(),b)}},onClick:function(b){a.focus();a.fire("saveSnapshot");var c=this.getValue(),f=m[b];if(c&&b!=c){var k=m[c],e=a.getSelection().getRanges()[0];if(e.collapsed){var d=a.elementPath(),g=d.contains(function(a){return k.checkElementRemovable(a)});if(g){var h=e.checkBoundaryOfElement(g,CKEDITOR.START),l=e.checkBoundaryOfElement(g,CKEDITOR.END);if(h&&l){for(h=e.createBookmark();d=g.getFirst();)d.insertBefore(g);
g.remove();e.moveToBookmark(h)}else h?e.moveToPosition(g,CKEDITOR.POSITION_BEFORE_START):l?e.moveToPosition(g,CKEDITOR.POSITION_AFTER_END):(e.splitElement(g),e.moveToPosition(g,CKEDITOR.POSITION_AFTER_END),r(e,d.elements.slice(),g));a.getSelection().selectRanges([e])}}else a.removeStyle(k)}a[c==b?"removeStyle":"applyStyle"](f);a.fire("saveSnapshot")},onRender:function(){a.on("selectionChange",function(b){var c=this.getValue();b=b.data.path.elements;for(var d=0,f;d<b.length;d++){f=b[d];for(var e in m)if(m[e].checkElementMatch(f,
!0,a)){e!=c&&this.setValue(e);return}}this.setValue("",l)},this)},refresh:function(){a.activeFilter.check(q)||this.setState(CKEDITOR.TRISTATE_DISABLED)}})}function r(a,b,c){var f=b.pop();if(f){if(c)return r(a,b,f.equals(c)?null:c);c=f.clone();a.insertNode(c);a.moveToPosition(c,CKEDITOR.POSITION_AFTER_START);r(a,b)}}CKEDITOR.plugins.add("font",{requires:"richcombo",init:function(a){var b=a.config;l(a,"Font","family",a.lang.font,b.font_names,b.font_defaultLabel,b.font_style,30);l(a,"FontSize","size",
a.lang.font.fontSize,b.fontSize_sizes,b.fontSize_defaultLabel,b.fontSize_style,40)}})})();CKEDITOR.config.font_names="Arial/Arial, Helvetica, sans-serif;Comic Sans MS/Comic Sans MS, cursive;Courier New/Courier New, Courier, monospace;Georgia/Georgia, serif;Lucida Sans Unicode/Lucida Sans Unicode, Lucida Grande, sans-serif;Tahoma/Tahoma, Geneva, sans-serif;Times New Roman/Times New Roman, Times, serif;Trebuchet MS/Trebuchet MS, Helvetica, sans-serif;Verdana/Verdana, Geneva, sans-serif";
CKEDITOR.config.font_defaultLabel="";CKEDITOR.config.font_style={element:"span",styles:{"font-family":"#(family)"},overrides:[{element:"font",attributes:{face:null}}]};CKEDITOR.config.fontSize_sizes="8/8px;9/9px;10/10px;11/11px;12/12px;14/14px;16/16px;18/18px;20/20px;22/22px;24/24px;26/26px;28/28px;36/36px;48/48px;72/72px";CKEDITOR.config.fontSize_defaultLabel="";CKEDITOR.config.fontSize_style={element:"span",styles:{"font-size":"#(size)"},overrides:[{element:"font",attributes:{size:null}}]};CKEDITOR.plugins.add("forms",{requires:"dialog,fakeobjects",onLoad:function(){CKEDITOR.addCss(".cke_editable form{border: 1px dotted #FF0000;padding: 2px;}\n");CKEDITOR.addCss("img.cke_hidden{background-image: url("+CKEDITOR.getUrl(this.path+"images/hiddenfield.gif")+");background-position: center center;background-repeat: no-repeat;border: 1px solid #a9a9a9;width: 16px !important;height: 16px !important;}")},init:function(a){var b=a.lang,g=0,h={email:1,password:1,search:1,tel:1,text:1,url:1},l={checkbox:"input[type,name,checked,required]",
radio:"input[type,name,checked,required]",textfield:"input[type,name,value,size,maxlength,required]",textarea:"textarea[cols,rows,name,required]",select:"select[name,size,multiple,required]; option[value,selected]",button:"input[type,name,value]",form:"form[action,name,id,enctype,target,method]",hiddenfield:"input[type,name,value]",imagebutton:"input[type,alt,src]{width,height,border,border-width,border-style,margin,float}"},m={checkbox:"input",radio:"input",textfield:"input",textarea:"textarea",
select:"select",button:"input",form:"form",hiddenfield:"input",imagebutton:"input"},e=function(d,c,e){var h={allowedContent:l[c],requiredContent:m[c]};"form"==c&&(h.context="form");a.addCommand(c,new CKEDITOR.dialogCommand(c,h));a.ui.addButton&&a.ui.addButton(d,{label:b.common[d.charAt(0).toLowerCase()+d.slice(1)],command:c,toolbar:"forms,"+(g+=10)});CKEDITOR.dialog.add(c,e)},f=this.path+"dialogs/";!a.blockless&&e("Form","form",f+"form.js");e("Checkbox","checkbox",f+"checkbox.js");e("Radio","radio",
f+"radio.js");e("TextField","textfield",f+"textfield.js");e("Textarea","textarea",f+"textarea.js");e("Select","select",f+"select.js");e("Button","button",f+"button.js");var k=a.plugins.image;k&&!a.plugins.image2&&e("ImageButton","imagebutton",CKEDITOR.plugins.getPath("image")+"dialogs/image.js");e("HiddenField","hiddenfield",f+"hiddenfield.js");a.addMenuItems&&(e={checkbox:{label:b.forms.checkboxAndRadio.checkboxTitle,command:"checkbox",group:"checkbox"},radio:{label:b.forms.checkboxAndRadio.radioTitle,
command:"radio",group:"radio"},textfield:{label:b.forms.textfield.title,command:"textfield",group:"textfield"},hiddenfield:{label:b.forms.hidden.title,command:"hiddenfield",group:"hiddenfield"},button:{label:b.forms.button.title,command:"button",group:"button"},select:{label:b.forms.select.title,command:"select",group:"select"},textarea:{label:b.forms.textarea.title,command:"textarea",group:"textarea"}},k&&(e.imagebutton={label:b.image.titleButton,command:"imagebutton",group:"imagebutton"}),!a.blockless&&
(e.form={label:b.forms.form.menu,command:"form",group:"form"}),a.addMenuItems(e));a.contextMenu&&(!a.blockless&&a.contextMenu.addListener(function(d,c,a){if((d=a.contains("form",1))&&!d.isReadOnly())return{form:CKEDITOR.TRISTATE_OFF}}),a.contextMenu.addListener(function(d){if(d&&!d.isReadOnly()){var c=d.getName();if("select"==c)return{select:CKEDITOR.TRISTATE_OFF};if("textarea"==c)return{textarea:CKEDITOR.TRISTATE_OFF};if("input"==c){var a=d.getAttribute("type")||"text";switch(a){case "button":case "submit":case "reset":return{button:CKEDITOR.TRISTATE_OFF};
case "checkbox":return{checkbox:CKEDITOR.TRISTATE_OFF};case "radio":return{radio:CKEDITOR.TRISTATE_OFF};case "image":return k?{imagebutton:CKEDITOR.TRISTATE_OFF}:null}if(h[a])return{textfield:CKEDITOR.TRISTATE_OFF}}if("img"==c&&"hiddenfield"==d.data("cke-real-element-type"))return{hiddenfield:CKEDITOR.TRISTATE_OFF}}}));a.on("doubleclick",function(d){var c=d.data.element;if(!a.blockless&&c.is("form"))d.data.dialog="form";else if(c.is("select"))d.data.dialog="select";else if(c.is("textarea"))d.data.dialog=
"textarea";else if(c.is("img")&&"hiddenfield"==c.data("cke-real-element-type"))d.data.dialog="hiddenfield";else if(c.is("input")){c=c.getAttribute("type")||"text";switch(c){case "button":case "submit":case "reset":d.data.dialog="button";break;case "checkbox":d.data.dialog="checkbox";break;case "radio":d.data.dialog="radio";break;case "image":d.data.dialog="imagebutton"}h[c]&&(d.data.dialog="textfield")}})},afterInit:function(a){var b=a.dataProcessor,g=b&&b.htmlFilter,b=b&&b.dataFilter;CKEDITOR.env.ie&&
g&&g.addRules({elements:{input:function(a){a=a.attributes;var b=a.type;b||(a.type="text");"checkbox"!=b&&"radio"!=b||"on"!=a.value||delete a.value}}},{applyToAll:!0});b&&b.addRules({elements:{input:function(b){if("hidden"==b.attributes.type)return a.createFakeParserElement(b,"cke_hidden","hiddenfield")}}},{applyToAll:!0})}});CKEDITOR.plugins.add("format",{requires:"richcombo",init:function(a){if(!a.blockless){for(var f=a.config,c=a.lang.format,l=f.format_tags.split(";"),d={},m=0,n=[],g=0;g<l.length;g++){var h=l[g],k=new CKEDITOR.style(f["format_"+h]);if(!a.filter.customConfig||a.filter.check(k))m++,d[h]=k,d[h]._.enterMode=a.config.enterMode,n.push(k)}0!==m&&a.ui.addRichCombo("Format",{label:c.label,title:c.panelTitle,toolbar:"styles,20",allowedContent:n,panel:{css:[CKEDITOR.skin.getPath("editor")].concat(f.contentsCss),
multiSelect:!1,attributes:{"aria-label":c.panelTitle}},init:function(){this.startGroup(c.panelTitle);for(var a in d){var e=c["tag_"+a];this.add(a,d[a].buildPreview(e),e)}},onClick:function(b){a.focus();a.fire("saveSnapshot");b=d[b];var e=a.elementPath();a[b.checkActive(e,a)?"removeStyle":"applyStyle"](b);setTimeout(function(){a.fire("saveSnapshot")},0)},onRender:function(){a.on("selectionChange",function(b){var e=this.getValue();b=b.data.path;this.refresh();for(var c in d)if(d[c].checkActive(b,a)){c!=
e&&this.setValue(c,a.lang.format["tag_"+c]);return}this.setValue("")},this)},onOpen:function(){this.showAll();for(var b in d)a.activeFilter.check(d[b])||this.hideItem(b)},refresh:function(){var b=a.elementPath();if(b){if(b.isContextFor("p"))for(var c in d)if(a.activeFilter.check(d[c]))return;this.setState(CKEDITOR.TRISTATE_DISABLED)}}})}}});CKEDITOR.config.format_tags="p;h1;h2;h3;h4;h5;h6;pre;address;div";CKEDITOR.config.format_p={element:"p"};CKEDITOR.config.format_div={element:"div"};
CKEDITOR.config.format_pre={element:"pre"};CKEDITOR.config.format_address={element:"address"};CKEDITOR.config.format_h1={element:"h1"};CKEDITOR.config.format_h2={element:"h2"};CKEDITOR.config.format_h3={element:"h3"};CKEDITOR.config.format_h4={element:"h4"};CKEDITOR.config.format_h5={element:"h5"};CKEDITOR.config.format_h6={element:"h6"};(function(){var b={canUndo:!1,exec:function(a){var b=a.document.createElement("hr");a.insertElement(b)},allowedContent:"hr",requiredContent:"hr"};CKEDITOR.plugins.add("horizontalrule",{init:function(a){a.blockless||(a.addCommand("horizontalrule",b),a.ui.addButton&&a.ui.addButton("HorizontalRule",{label:a.lang.horizontalrule.toolbar,command:"horizontalrule",toolbar:"insert,40"}))}})})();CKEDITOR.plugins.add("htmlwriter",{init:function(b){var a=new CKEDITOR.htmlWriter;a.forceSimpleAmpersand=b.config.forceSimpleAmpersand;a.indentationChars=b.config.dataIndentationChars||"\t";b.dataProcessor.writer=a}});
CKEDITOR.htmlWriter=CKEDITOR.tools.createClass({base:CKEDITOR.htmlParser.basicWriter,$:function(){this.base();this.indentationChars="\t";this.selfClosingEnd=" /\x3e";this.lineBreakChars="\n";this.sortAttributes=1;this._.indent=0;this._.indentation="";this._.inPre=0;this._.rules={};var b=CKEDITOR.dtd,a;for(a in CKEDITOR.tools.extend({},b.$nonBodyContent,b.$block,b.$listItem,b.$tableContent))this.setRules(a,{indent:!b[a]["#"],breakBeforeOpen:1,breakBeforeClose:!b[a]["#"],breakAfterClose:1,needsSpace:a in
b.$block&&!(a in{li:1,dt:1,dd:1})});this.setRules("br",{breakAfterOpen:1});this.setRules("title",{indent:0,breakAfterOpen:0});this.setRules("style",{indent:0,breakBeforeClose:1});this.setRules("pre",{breakAfterOpen:1,indent:0})},proto:{openTag:function(b){var a=this._.rules[b];this._.afterCloser&&a&&a.needsSpace&&this._.needsSpace&&this._.output.push("\n");this._.indent?this.indentation():a&&a.breakBeforeOpen&&(this.lineBreak(),this.indentation());this._.output.push("\x3c",b);this._.afterCloser=0},
openTagClose:function(b,a){var c=this._.rules[b];a?(this._.output.push(this.selfClosingEnd),c&&c.breakAfterClose&&(this._.needsSpace=c.needsSpace)):(this._.output.push("\x3e"),c&&c.indent&&(this._.indentation+=this.indentationChars));c&&c.breakAfterOpen&&this.lineBreak();"pre"==b&&(this._.inPre=1)},attribute:function(b,a){"string"==typeof a&&(this.forceSimpleAmpersand&&(a=a.replace(/&amp;/g,"\x26")),a=CKEDITOR.tools.htmlEncodeAttr(a));this._.output.push(" ",b,'\x3d"',a,'"')},closeTag:function(b){var a=
this._.rules[b];a&&a.indent&&(this._.indentation=this._.indentation.substr(this.indentationChars.length));this._.indent?this.indentation():a&&a.breakBeforeClose&&(this.lineBreak(),this.indentation());this._.output.push("\x3c/",b,"\x3e");"pre"==b&&(this._.inPre=0);a&&a.breakAfterClose&&(this.lineBreak(),this._.needsSpace=a.needsSpace);this._.afterCloser=1},text:function(b){this._.indent&&(this.indentation(),!this._.inPre&&(b=CKEDITOR.tools.ltrim(b)));this._.output.push(b)},comment:function(b){this._.indent&&
this.indentation();this._.output.push("\x3c!--",b,"--\x3e")},lineBreak:function(){!this._.inPre&&0<this._.output.length&&this._.output.push(this.lineBreakChars);this._.indent=1},indentation:function(){!this._.inPre&&this._.indentation&&this._.output.push(this._.indentation);this._.indent=0},reset:function(){this._.output=[];this._.indent=0;this._.indentation="";this._.afterCloser=0;this._.inPre=0;this._.needsSpace=0},setRules:function(b,a){var c=this._.rules[b];c?CKEDITOR.tools.extend(c,a,!0):this._.rules[b]=
a}}});(function(){CKEDITOR.plugins.add("iframe",{requires:"dialog,fakeobjects",onLoad:function(){CKEDITOR.addCss("img.cke_iframe{background-image: url("+CKEDITOR.getUrl(this.path+"images/placeholder.png")+");background-position: center center;background-repeat: no-repeat;border: 1px solid #a9a9a9;width: 80px;height: 80px;}")},init:function(a){var b=a.lang.iframe,c="iframe[align,longdesc,frameborder,height,name,scrolling,src,title,width]";a.plugins.dialogadvtab&&(c+=";iframe"+a.plugins.dialogadvtab.allowedContent({id:1,
classes:1,styles:1}));CKEDITOR.dialog.add("iframe",this.path+"dialogs/iframe.js");a.addCommand("iframe",new CKEDITOR.dialogCommand("iframe",{allowedContent:c,requiredContent:"iframe"}));a.ui.addButton&&a.ui.addButton("Iframe",{label:b.toolbar,command:"iframe",toolbar:"insert,80"});a.on("doubleclick",function(a){var b=a.data.element;b.is("img")&&"iframe"==b.data("cke-real-element-type")&&(a.data.dialog="iframe")});a.addMenuItems&&a.addMenuItems({iframe:{label:b.title,command:"iframe",group:"image"}});
a.contextMenu&&a.contextMenu.addListener(function(a){if(a&&a.is("img")&&"iframe"==a.data("cke-real-element-type"))return{iframe:CKEDITOR.TRISTATE_OFF}})},afterInit:function(a){var b=a.dataProcessor;(b=b&&b.dataFilter)&&b.addRules({elements:{iframe:function(b){return a.createFakeParserElement(b,"cke_iframe","iframe",!0)}}})}})})();(function(){function m(a){function f(a){var b=!1;g.attachListener(g,"keydown",function(){var d=c.getBody().getElementsByTag(a);if(!b){for(var e=0;e<d.count();e++)d.getItem(e).setCustomData("retain",!0);b=!0}},null,null,1);g.attachListener(g,"keyup",function(){var d=c.getElementsByTag(a);b&&(1!=d.count()||d.getItem(0).getCustomData("retain")||d.getItem(0).remove(1),b=!1)})}var b=this.editor,c=a.document,d=c.body,e=c.getElementById("cke_actscrpt");e&&e.parentNode.removeChild(e);(e=c.getElementById("cke_shimscrpt"))&&
e.parentNode.removeChild(e);(e=c.getElementById("cke_basetagscrpt"))&&e.parentNode.removeChild(e);d.contentEditable=!0;CKEDITOR.env.ie&&(d.hideFocus=!0,d.disabled=!0,d.removeAttribute("disabled"));delete this._.isLoadingData;this.$=d;c=new CKEDITOR.dom.document(c);this.setup();this.fixInitialSelection();var g=this;CKEDITOR.env.ie&&!CKEDITOR.env.edge&&c.getDocumentElement().addClass(c.$.compatMode);CKEDITOR.env.ie&&!CKEDITOR.env.edge&&b.enterMode!=CKEDITOR.ENTER_P?f("p"):CKEDITOR.env.edge&&b.enterMode!=
CKEDITOR.ENTER_DIV&&f("div");if(CKEDITOR.env.webkit||CKEDITOR.env.ie&&10<CKEDITOR.env.version)c.getDocumentElement().on("mousedown",function(a){a.data.getTarget().is("html")&&setTimeout(function(){b.editable().focus()})});n(b);try{b.document.$.execCommand("2D-position",!1,!0)}catch(h){}(CKEDITOR.env.gecko||CKEDITOR.env.ie&&"CSS1Compat"==b.document.$.compatMode)&&this.attachListener(this,"keydown",function(a){var c=a.data.getKeystroke();if(33==c||34==c)if(CKEDITOR.env.ie)setTimeout(function(){b.getSelection().scrollIntoView()},
0);else if(b.window.$.innerHeight>this.$.offsetHeight){var d=b.createRange();d[33==c?"moveToElementEditStart":"moveToElementEditEnd"](this);d.select();a.data.preventDefault()}});CKEDITOR.env.ie&&this.attachListener(c,"blur",function(){try{c.$.selection.empty()}catch(a){}});CKEDITOR.env.iOS&&this.attachListener(c,"touchend",function(){a.focus()});d=b.document.getElementsByTag("title").getItem(0);d.data("cke-title",d.getText());CKEDITOR.env.ie&&(b.document.$.title=this._.docTitle);CKEDITOR.tools.setTimeout(function(){"unloaded"==
this.status&&(this.status="ready");b.fire("contentDom");this._.isPendingFocus&&(b.focus(),this._.isPendingFocus=!1);setTimeout(function(){b.fire("dataReady")},0)},0,this)}function n(a){function f(){var c;a.editable().attachListener(a,"selectionChange",function(){var d=a.getSelection().getSelectedElement();d&&(c&&(c.detachEvent("onresizestart",b),c=null),d.$.attachEvent("onresizestart",b),c=d.$)})}function b(a){a.returnValue=!1}if(CKEDITOR.env.gecko)try{var c=a.document.$;c.execCommand("enableObjectResizing",
!1,!a.config.disableObjectResizing);c.execCommand("enableInlineTableEditing",!1,!a.config.disableNativeTableHandles)}catch(d){}else CKEDITOR.env.ie&&11>CKEDITOR.env.version&&a.config.disableObjectResizing&&f(a)}function p(){var a=[];if(8<=CKEDITOR.document.$.documentMode){a.push("html.CSS1Compat [contenteditable\x3dfalse]{min-height:0 !important}");var f=[],b;for(b in CKEDITOR.dtd.$removeEmpty)f.push("html.CSS1Compat "+b+"[contenteditable\x3dfalse]");a.push(f.join(",")+"{display:inline-block}")}else CKEDITOR.env.gecko&&
(a.push("html{height:100% !important}"),a.push("img:-moz-broken{-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}"));a.push("html{cursor:text;*cursor:auto}");a.push("img,input,textarea{cursor:default}");return a.join("\n")}CKEDITOR.plugins.add("wysiwygarea",{init:function(a){a.config.fullPage&&a.addFeature({allowedContent:"html head title; style [media,type]; body (*)[id]; meta link [*]",requiredContent:"body"});a.addMode("wysiwyg",function(f){function b(b){b&&b.removeListener();a.editable(new l(a,
d.$.contentWindow.document.body));a.setData(a.getData(1),f)}var c="document.open();"+(CKEDITOR.env.ie?"("+CKEDITOR.tools.fixDomain+")();":"")+"document.close();",c=CKEDITOR.env.air?"javascript:void(0)":CKEDITOR.env.ie&&!CKEDITOR.env.edge?"javascript:void(function(){"+encodeURIComponent(c)+"}())":"",d=CKEDITOR.dom.element.createFromHtml('\x3ciframe src\x3d"'+c+'" frameBorder\x3d"0"\x3e\x3c/iframe\x3e');d.setStyles({width:"100%",height:"100%"});d.addClass("cke_wysiwyg_frame").addClass("cke_reset");
c=a.ui.space("contents");c.append(d);var e=CKEDITOR.env.ie&&!CKEDITOR.env.edge||CKEDITOR.env.gecko;if(e)d.on("load",b);var g=a.title,h=a.fire("ariaEditorHelpLabel",{}).label;g&&(CKEDITOR.env.ie&&h&&(g+=", "+h),d.setAttribute("title",g));if(h){var g=CKEDITOR.tools.getNextId(),k=CKEDITOR.dom.element.createFromHtml('\x3cspan id\x3d"'+g+'" class\x3d"cke_voice_label"\x3e'+h+"\x3c/span\x3e");c.append(k,1);d.setAttribute("aria-describedby",g)}a.on("beforeModeUnload",function(a){a.removeListener();k&&k.remove()});
d.setAttributes({tabIndex:a.tabIndex,allowTransparency:"true"});!e&&b();a.fire("ariaWidget",d)})}});CKEDITOR.editor.prototype.addContentsCss=function(a){var f=this.config,b=f.contentsCss;CKEDITOR.tools.isArray(b)||(f.contentsCss=b?[b]:[]);f.contentsCss.push(a)};var l=CKEDITOR.tools.createClass({$:function(){this.base.apply(this,arguments);this._.frameLoadedHandler=CKEDITOR.tools.addFunction(function(a){CKEDITOR.tools.setTimeout(m,0,this,a)},this);this._.docTitle=this.getWindow().getFrame().getAttribute("title")},
base:CKEDITOR.editable,proto:{setData:function(a,f){var b=this.editor;if(f)this.setHtml(a),this.fixInitialSelection(),b.fire("dataReady");else{this._.isLoadingData=!0;b._.dataStore={id:1};var c=b.config,d=c.fullPage,e=c.docType,g=CKEDITOR.tools.buildStyleHtml(p()).replace(/<style>/,'\x3cstyle data-cke-temp\x3d"1"\x3e');d||(g+=CKEDITOR.tools.buildStyleHtml(b.config.contentsCss));var h=c.baseHref?'\x3cbase href\x3d"'+c.baseHref+'" data-cke-temp\x3d"1" /\x3e':"";d&&(a=a.replace(/<!DOCTYPE[^>]*>/i,function(a){b.docType=
e=a;return""}).replace(/<\?xml\s[^\?]*\?>/i,function(a){b.xmlDeclaration=a;return""}));a=b.dataProcessor.toHtml(a);d?(/<body[\s|>]/.test(a)||(a="\x3cbody\x3e"+a),/<html[\s|>]/.test(a)||(a="\x3chtml\x3e"+a+"\x3c/html\x3e"),/<head[\s|>]/.test(a)?/<title[\s|>]/.test(a)||(a=a.replace(/<head[^>]*>/,"$\x26\x3ctitle\x3e\x3c/title\x3e")):a=a.replace(/<html[^>]*>/,"$\x26\x3chead\x3e\x3ctitle\x3e\x3c/title\x3e\x3c/head\x3e"),h&&(a=a.replace(/<head[^>]*?>/,"$\x26"+h)),a=a.replace(/<\/head\s*>/,g+"$\x26"),a=
e+a):a=c.docType+'\x3chtml dir\x3d"'+c.contentsLangDirection+'" lang\x3d"'+(c.contentsLanguage||b.langCode)+'"\x3e\x3chead\x3e\x3ctitle\x3e'+this._.docTitle+"\x3c/title\x3e"+h+g+"\x3c/head\x3e\x3cbody"+(c.bodyId?' id\x3d"'+c.bodyId+'"':"")+(c.bodyClass?' class\x3d"'+c.bodyClass+'"':"")+"\x3e"+a+"\x3c/body\x3e\x3c/html\x3e";CKEDITOR.env.gecko&&(a=a.replace(/<body/,'\x3cbody contenteditable\x3d"true" '),2E4>CKEDITOR.env.version&&(a=a.replace(/<body[^>]*>/,"$\x26\x3c!-- cke-content-start --\x3e")));
c='\x3cscript id\x3d"cke_actscrpt" type\x3d"text/javascript"'+(CKEDITOR.env.ie?' defer\x3d"defer" ':"")+"\x3evar wasLoaded\x3d0;function onload(){if(!wasLoaded)window.parent.CKEDITOR.tools.callFunction("+this._.frameLoadedHandler+",window);wasLoaded\x3d1;}"+(CKEDITOR.env.ie?"onload();":'document.addEventListener("DOMContentLoaded", onload, false );')+"\x3c/script\x3e";CKEDITOR.env.ie&&9>CKEDITOR.env.version&&(c+='\x3cscript id\x3d"cke_shimscrpt"\x3ewindow.parent.CKEDITOR.tools.enableHtml5Elements(document)\x3c/script\x3e');
h&&CKEDITOR.env.ie&&10>CKEDITOR.env.version&&(c+='\x3cscript id\x3d"cke_basetagscrpt"\x3evar baseTag \x3d document.querySelector( "base" );baseTag.href \x3d baseTag.href;\x3c/script\x3e');a=a.replace(/(?=\s*<\/(:?head)>)/,c);this.clearCustomData();this.clearListeners();b.fire("contentDomUnload");var k=this.getDocument();try{k.write(a)}catch(l){setTimeout(function(){k.write(a)},0)}}},getData:function(a){if(a)return this.getHtml();a=this.editor;var f=a.config,b=f.fullPage,c=b&&a.docType,d=b&&a.xmlDeclaration,
e=this.getDocument(),b=b?e.getDocumentElement().getOuterHtml():e.getBody().getHtml();CKEDITOR.env.gecko&&f.enterMode!=CKEDITOR.ENTER_BR&&(b=b.replace(/<br>(?=\s*(:?$|<\/body>))/,""));b=a.dataProcessor.toDataFormat(b);d&&(b=d+"\n"+b);c&&(b=c+"\n"+b);return b},focus:function(){this._.isLoadingData?this._.isPendingFocus=!0:l.baseProto.focus.call(this)},detach:function(){var a=this.editor,f=a.document,b;try{b=a.window.getFrame()}catch(c){}l.baseProto.detach.call(this);this.clearCustomData();f.getDocumentElement().clearCustomData();
CKEDITOR.tools.removeFunction(this._.frameLoadedHandler);b&&b.getParent()?(b.clearCustomData(),(a=b.removeCustomData("onResize"))&&a.removeListener(),b.remove()):CKEDITOR.warn("editor-destroy-iframe")}}})})();CKEDITOR.config.disableObjectResizing=!1;CKEDITOR.config.disableNativeTableHandles=!0;CKEDITOR.config.disableNativeSpellChecker=!0;(function(){function e(b,a){a||(a=b.getSelection().getSelectedElement());if(a&&a.is("img")&&!a.data("cke-realelement")&&!a.isReadOnly())return a}function f(b){var a=b.getStyle("float");if("inherit"==a||"none"==a)a=0;a||(a=b.getAttribute("align"));return a}CKEDITOR.plugins.add("image",{requires:"dialog",init:function(b){if(!b.plugins.image2){CKEDITOR.dialog.add("image",this.path+"dialogs/image.js");var a="img[alt,!src]{border-style,border-width,float,height,margin,margin-bottom,margin-left,margin-right,margin-top,width}";
CKEDITOR.dialog.isTabEnabled(b,"image","advanced")&&(a="img[alt,dir,id,lang,longdesc,!src,title]{*}(*)");b.addCommand("image",new CKEDITOR.dialogCommand("image",{allowedContent:a,requiredContent:"img[alt,src]",contentTransformations:[["img{width}: sizeToStyle","img[width]: sizeToAttribute"],["img{float}: alignmentToStyle","img[align]: alignmentToAttribute"]]}));b.ui.addButton&&b.ui.addButton("Image",{label:b.lang.common.image,command:"image",toolbar:"insert,10"});b.on("doubleclick",function(b){var a=
b.data.element;!a.is("img")||a.data("cke-realelement")||a.isReadOnly()||(b.data.dialog="image")});b.addMenuItems&&b.addMenuItems({image:{label:b.lang.image.menu,command:"image",group:"image"}});b.contextMenu&&b.contextMenu.addListener(function(a){if(e(b,a))return{image:CKEDITOR.TRISTATE_OFF}})}},afterInit:function(b){function a(a){var d=b.getCommand("justify"+a);if(d){if("left"==a||"right"==a)d.on("exec",function(d){var c=e(b),g;c&&(g=f(c),g==a?(c.removeStyle("float"),a==f(c)&&c.removeAttribute("align")):
c.setStyle("float",a),d.cancel())});d.on("refresh",function(d){var c=e(b);c&&(c=f(c),this.setState(c==a?CKEDITOR.TRISTATE_ON:"right"==a||"left"==a?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED),d.cancel())})}}b.plugins.image2||(a("left"),a("right"),a("center"),a("block"))}})})();CKEDITOR.config.image_removeLinkByEmptyURL=!0;(function(){function m(a,b){var e,f;b.on("refresh",function(a){var b=[k],c;for(c in a.data.states)b.push(a.data.states[c]);this.setState(CKEDITOR.tools.search(b,p)?p:k)},b,null,100);b.on("exec",function(b){e=a.getSelection();f=e.createBookmarks(1);b.data||(b.data={});b.data.done=!1},b,null,0);b.on("exec",function(){a.forceNextSelectionCheck();e.selectBookmarks(f)},b,null,100)}var k=CKEDITOR.TRISTATE_DISABLED,p=CKEDITOR.TRISTATE_OFF;CKEDITOR.plugins.add("indent",{init:function(a){var b=CKEDITOR.plugins.indent.genericDefinition;
m(a,a.addCommand("indent",new b(!0)));m(a,a.addCommand("outdent",new b));a.ui.addButton&&(a.ui.addButton("Indent",{label:a.lang.indent.indent,command:"indent",directional:!0,toolbar:"indent,20"}),a.ui.addButton("Outdent",{label:a.lang.indent.outdent,command:"outdent",directional:!0,toolbar:"indent,10"}));a.on("dirChanged",function(b){var f=a.createRange(),l=b.data.node;f.setStartBefore(l);f.setEndAfter(l);for(var n=new CKEDITOR.dom.walker(f),c;c=n.next();)if(c.type==CKEDITOR.NODE_ELEMENT)if(!c.equals(l)&&
c.getDirection())f.setStartAfter(c),n=new CKEDITOR.dom.walker(f);else{var d=a.config.indentClasses;if(d)for(var g="ltr"==b.data.dir?["_rtl",""]:["","_rtl"],h=0;h<d.length;h++)c.hasClass(d[h]+g[0])&&(c.removeClass(d[h]+g[0]),c.addClass(d[h]+g[1]));d=c.getStyle("margin-right");g=c.getStyle("margin-left");d?c.setStyle("margin-left",d):c.removeStyle("margin-left");g?c.setStyle("margin-right",g):c.removeStyle("margin-right")}})}});CKEDITOR.plugins.indent={genericDefinition:function(a){this.isIndent=!!a;
this.startDisabled=!this.isIndent},specificDefinition:function(a,b,e){this.name=b;this.editor=a;this.jobs={};this.enterBr=a.config.enterMode==CKEDITOR.ENTER_BR;this.isIndent=!!e;this.relatedGlobal=e?"indent":"outdent";this.indentKey=e?9:CKEDITOR.SHIFT+9;this.database={}},registerCommands:function(a,b){a.on("pluginsLoaded",function(){for(var a in b)(function(a,b){var e=a.getCommand(b.relatedGlobal),c;for(c in b.jobs)e.on("exec",function(d){d.data.done||(a.fire("lockSnapshot"),b.execJob(a,c)&&(d.data.done=
!0),a.fire("unlockSnapshot"),CKEDITOR.dom.element.clearAllMarkers(b.database))},this,null,c),e.on("refresh",function(d){d.data.states||(d.data.states={});d.data.states[b.name+"@"+c]=b.refreshJob(a,c,d.data.path)},this,null,c);a.addFeature(b)})(this,b[a])})}};CKEDITOR.plugins.indent.genericDefinition.prototype={context:"p",exec:function(){}};CKEDITOR.plugins.indent.specificDefinition.prototype={execJob:function(a,b){var e=this.jobs[b];if(e.state!=k)return e.exec.call(this,a)},refreshJob:function(a,
b,e){b=this.jobs[b];a.activeFilter.checkFeature(this)?b.state=b.refresh.call(this,a,e):b.state=k;return b.state},getContext:function(a){return a.contains(this.context)}}})();(function(){function f(b,c,a){if(!b.getCustomData("indent_processed")){var d=this.editor,l=this.isIndent;if(c){d=b.$.className.match(this.classNameRegex);a=0;d&&(d=d[1],a=CKEDITOR.tools.indexOf(c,d)+1);if(0>(a+=l?1:-1))return;a=Math.min(a,c.length);a=Math.max(a,0);b.$.className=CKEDITOR.tools.ltrim(b.$.className.replace(this.classNameRegex,""));0<a&&b.addClass(c[a-1])}else{c=m(b,a);a=parseInt(b.getStyle(c),10);var g=d.config.indentOffset||40;isNaN(a)&&(a=0);a+=(l?1:-1)*g;if(0>a)return;a=Math.max(a,
0);a=Math.ceil(a/g)*g;b.setStyle(c,a?a+(d.config.indentUnit||"px"):"");""===b.getAttribute("style")&&b.removeAttribute("style")}CKEDITOR.dom.element.setMarker(this.database,b,"indent_processed",1)}}function m(b,c){return"ltr"==(c||b.getComputedStyle("direction"))?"margin-left":"margin-right"}var h=CKEDITOR.dtd.$listItem,p=CKEDITOR.dtd.$list,k=CKEDITOR.TRISTATE_DISABLED,n=CKEDITOR.TRISTATE_OFF;CKEDITOR.plugins.add("indentblock",{requires:"indent",init:function(b){function c(){a.specificDefinition.apply(this,
arguments);this.allowedContent={"div h1 h2 h3 h4 h5 h6 ol p pre ul":{propertiesOnly:!0,styles:d?null:"margin-left,margin-right",classes:d||null}};this.enterBr&&(this.allowedContent.div=!0);this.requiredContent=(this.enterBr?"div":"p")+(d?"("+d.join(",")+")":"{margin-left}");this.jobs={20:{refresh:function(a,b){var e=b.block||b.blockLimit;if(!e.is(h))var c=e.getAscendant(h),e=c&&b.contains(c)||e;e.is(h)&&(e=e.getParent());if(this.enterBr||this.getContext(b)){if(d){var c=d,e=e.$.className.match(this.classNameRegex),
f=this.isIndent,c=e?f?e[1]!=c.slice(-1):!0:f;return c?n:k}return this.isIndent?n:e?CKEDITOR[0>=(parseInt(e.getStyle(m(e)),10)||0)?"TRISTATE_DISABLED":"TRISTATE_OFF"]:k}return k},exec:function(a){var b=a.getSelection(),b=b&&b.getRanges()[0],c;if(c=a.elementPath().contains(p))f.call(this,c,d);else for(b=b.createIterator(),a=a.config.enterMode,b.enforceRealBlocks=!0,b.enlargeBr=a!=CKEDITOR.ENTER_BR;c=b.getNextParagraph(a==CKEDITOR.ENTER_P?"p":"div");)c.isReadOnly()||f.call(this,c,d);return!0}}}}var a=
CKEDITOR.plugins.indent,d=b.config.indentClasses;a.registerCommands(b,{indentblock:new c(b,"indentblock",!0),outdentblock:new c(b,"outdentblock")});CKEDITOR.tools.extend(c.prototype,a.specificDefinition.prototype,{context:{div:1,dl:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,ul:1,ol:1,p:1,pre:1,table:1},classNameRegex:d?new RegExp("(?:^|\\s+)("+d.join("|")+")(?\x3d$|\\s)"):null})}})})();(function(){function w(c){function f(b){for(var e=d.startContainer,a=d.endContainer;e&&!e.getParent().equals(b);)e=e.getParent();for(;a&&!a.getParent().equals(b);)a=a.getParent();if(!e||!a)return!1;for(var g=e,e=[],k=!1;!k;)g.equals(a)&&(k=!0),e.push(g),g=g.getNext();if(1>e.length)return!1;g=b.getParents(!0);for(a=0;a<g.length;a++)if(g[a].getName&&p[g[a].getName()]){b=g[a];break}for(var g=l.isIndent?1:-1,a=e[0],e=e[e.length-1],k=CKEDITOR.plugins.list.listToArray(b,q),n=k[e.getCustomData("listarray_index")].indent,
a=a.getCustomData("listarray_index");a<=e.getCustomData("listarray_index");a++)if(k[a].indent+=g,0<g){var h=k[a].parent;k[a].parent=new CKEDITOR.dom.element(h.getName(),h.getDocument())}for(a=e.getCustomData("listarray_index")+1;a<k.length&&k[a].indent>n;a++)k[a].indent+=g;e=CKEDITOR.plugins.list.arrayToList(k,q,null,c.config.enterMode,b.getDirection());if(!l.isIndent){var f;if((f=b.getParent())&&f.is("li"))for(var g=e.listNode.getChildren(),r=[],m,a=g.count()-1;0<=a;a--)(m=g.getItem(a))&&m.is&&m.is("li")&&
r.push(m)}e&&e.listNode.replace(b);if(r&&r.length)for(a=0;a<r.length;a++){for(m=b=r[a];(m=m.getNext())&&m.is&&m.getName()in p;)CKEDITOR.env.needsNbspFiller&&!b.getFirst(x)&&b.append(d.document.createText(" ")),b.append(m);b.insertAfter(f)}e&&c.fire("contentDomInvalidated");return!0}for(var l=this,q=this.database,p=this.context,n=c.getSelection(),n=(n&&n.getRanges()).createIterator(),d;d=n.getNextRange();){for(var b=d.getCommonAncestor();b&&(b.type!=CKEDITOR.NODE_ELEMENT||!p[b.getName()]);){if(c.editable().equals(b)){b=
!1;break}b=b.getParent()}b||(b=d.startPath().contains(p))&&d.setEndAt(b,CKEDITOR.POSITION_BEFORE_END);if(!b){var h=d.getEnclosedNode();h&&h.type==CKEDITOR.NODE_ELEMENT&&h.getName()in p&&(d.setStartAt(h,CKEDITOR.POSITION_AFTER_START),d.setEndAt(h,CKEDITOR.POSITION_BEFORE_END),b=h)}b&&d.startContainer.type==CKEDITOR.NODE_ELEMENT&&d.startContainer.getName()in p&&(h=new CKEDITOR.dom.walker(d),h.evaluator=t,d.startContainer=h.next());b&&d.endContainer.type==CKEDITOR.NODE_ELEMENT&&d.endContainer.getName()in
p&&(h=new CKEDITOR.dom.walker(d),h.evaluator=t,d.endContainer=h.previous());if(b)return f(b)}return 0}function t(c){return c.type==CKEDITOR.NODE_ELEMENT&&c.is("li")}function x(c){return y(c)&&z(c)}var y=CKEDITOR.dom.walker.whitespaces(!0),z=CKEDITOR.dom.walker.bookmark(!1,!0),u=CKEDITOR.TRISTATE_DISABLED,v=CKEDITOR.TRISTATE_OFF;CKEDITOR.plugins.add("indentlist",{requires:"indent",init:function(c){function f(c){l.specificDefinition.apply(this,arguments);this.requiredContent=["ul","ol"];c.on("key",
function(f){if("wysiwyg"==c.mode&&f.data.keyCode==this.indentKey){var n=this.getContext(c.elementPath());!n||this.isIndent&&CKEDITOR.plugins.indentList.firstItemInPath(this.context,c.elementPath(),n)||(c.execCommand(this.relatedGlobal),f.cancel())}},this);this.jobs[this.isIndent?10:30]={refresh:this.isIndent?function(c,f){var d=this.getContext(f),b=CKEDITOR.plugins.indentList.firstItemInPath(this.context,f,d);return d&&this.isIndent&&!b?v:u}:function(c,f){return!this.getContext(f)||this.isIndent?
u:v},exec:CKEDITOR.tools.bind(w,this)}}var l=CKEDITOR.plugins.indent;l.registerCommands(c,{indentlist:new f(c,"indentlist",!0),outdentlist:new f(c,"outdentlist")});CKEDITOR.tools.extend(f.prototype,l.specificDefinition.prototype,{context:{ol:1,ul:1}})}});CKEDITOR.plugins.indentList={};CKEDITOR.plugins.indentList.firstItemInPath=function(c,f,l){var q=f.contains(t);l||(l=f.contains(c));return l&&q&&q.equals(l.getFirst(t))}})();CKEDITOR.plugins.add("smiley",{requires:"dialog",init:function(a){a.config.smiley_path=a.config.smiley_path||this.path+"images/";a.addCommand("smiley",new CKEDITOR.dialogCommand("smiley",{allowedContent:"img[alt,height,!src,title,width]",requiredContent:"img"}));a.ui.addButton&&a.ui.addButton("Smiley",{label:a.lang.smiley.toolbar,command:"smiley",toolbar:"insert,50"});CKEDITOR.dialog.add("smiley",this.path+"dialogs/smiley.js")}});CKEDITOR.config.smiley_images="regular_smile.png sad_smile.png wink_smile.png teeth_smile.png confused_smile.png tongue_smile.png embarrassed_smile.png omg_smile.png whatchutalkingabout_smile.png angry_smile.png angel_smile.png shades_smile.png devil_smile.png cry_smile.png lightbulb.png thumbs_down.png thumbs_up.png heart.png broken_heart.png kiss.png envelope.png".split(" ");
CKEDITOR.config.smiley_descriptions="smiley;sad;wink;laugh;frown;cheeky;blush;surprise;indecision;angry;angel;cool;devil;crying;enlightened;no;yes;heart;broken heart;kiss;mail".split(";");(function(){function n(a,c){c=void 0===c||c;var b;if(c)b=a.getComputedStyle("text-align");else{for(;!a.hasAttribute||!a.hasAttribute("align")&&!a.getStyle("text-align");){b=a.getParent();if(!b)break;a=b}b=a.getStyle("text-align")||a.getAttribute("align")||""}b&&(b=b.replace(/(?:-(?:moz|webkit)-)?(?:start|auto)/i,""));!b&&c&&(b="rtl"==a.getComputedStyle("direction")?"right":"left");return b}function g(a,c,b){this.editor=a;this.name=c;this.value=b;this.context="p";c=a.config.justifyClasses;var h=a.config.enterMode==
CKEDITOR.ENTER_P?"p":"div";if(c){switch(b){case "left":this.cssClassName=c[0];break;case "center":this.cssClassName=c[1];break;case "right":this.cssClassName=c[2];break;case "justify":this.cssClassName=c[3]}this.cssClassRegex=new RegExp("(?:^|\\s+)(?:"+c.join("|")+")(?\x3d$|\\s)");this.requiredContent=h+"("+this.cssClassName+")"}else this.requiredContent=h+"{text-align}";this.allowedContent={"caption div h1 h2 h3 h4 h5 h6 p pre td th li":{propertiesOnly:!0,styles:this.cssClassName?null:"text-align",
classes:this.cssClassName||null}};a.config.enterMode==CKEDITOR.ENTER_BR&&(this.allowedContent.div=!0)}function l(a){var c=a.editor,b=c.createRange();b.setStartBefore(a.data.node);b.setEndAfter(a.data.node);for(var h=new CKEDITOR.dom.walker(b),d;d=h.next();)if(d.type==CKEDITOR.NODE_ELEMENT)if(!d.equals(a.data.node)&&d.getDirection())b.setStartAfter(d),h=new CKEDITOR.dom.walker(b);else{var e=c.config.justifyClasses;e&&(d.hasClass(e[0])?(d.removeClass(e[0]),d.addClass(e[2])):d.hasClass(e[2])&&(d.removeClass(e[2]),
d.addClass(e[0])));e=d.getStyle("text-align");"left"==e?d.setStyle("text-align","right"):"right"==e&&d.setStyle("text-align","left")}}g.prototype={exec:function(a){var c=a.getSelection(),b=a.config.enterMode;if(c){for(var h=c.createBookmarks(),d=c.getRanges(),e=this.cssClassName,g,f,k=a.config.useComputedState,k=void 0===k||k,m=d.length-1;0<=m;m--)for(g=d[m].createIterator(),g.enlargeBr=b!=CKEDITOR.ENTER_BR;f=g.getNextParagraph(b==CKEDITOR.ENTER_P?"p":"div");)if(!f.isReadOnly()){f.removeAttribute("align");
f.removeStyle("text-align");var l=e&&(f.$.className=CKEDITOR.tools.ltrim(f.$.className.replace(this.cssClassRegex,""))),p=this.state==CKEDITOR.TRISTATE_OFF&&(!k||n(f,!0)!=this.value);e?p?f.addClass(e):l||f.removeAttribute("class"):p&&f.setStyle("text-align",this.value)}a.focus();a.forceNextSelectionCheck();c.selectBookmarks(h)}},refresh:function(a,c){var b=c.block||c.blockLimit;this.setState("body"!=b.getName()&&n(b,this.editor.config.useComputedState)==this.value?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF)}};
CKEDITOR.plugins.add("justify",{init:function(a){if(!a.blockless){var c=new g(a,"justifyleft","left"),b=new g(a,"justifycenter","center"),h=new g(a,"justifyright","right"),d=new g(a,"justifyblock","justify");a.addCommand("justifyleft",c);a.addCommand("justifycenter",b);a.addCommand("justifyright",h);a.addCommand("justifyblock",d);a.ui.addButton&&(a.ui.addButton("JustifyLeft",{label:a.lang.justify.left,command:"justifyleft",toolbar:"align,10"}),a.ui.addButton("JustifyCenter",{label:a.lang.justify.center,
command:"justifycenter",toolbar:"align,20"}),a.ui.addButton("JustifyRight",{label:a.lang.justify.right,command:"justifyright",toolbar:"align,30"}),a.ui.addButton("JustifyBlock",{label:a.lang.justify.block,command:"justifyblock",toolbar:"align,40"}));a.on("dirChanged",l)}}})})();CKEDITOR.plugins.add("menubutton",{requires:"button,menu",onLoad:function(){var d=function(c){var a=this._,b=a.menu;a.state!==CKEDITOR.TRISTATE_DISABLED&&(a.on&&b?b.hide():(a.previousState=a.state,b||(b=a.menu=new CKEDITOR.menu(c,{panel:{className:"cke_menu_panel",attributes:{"aria-label":c.lang.common.options}}}),b.onHide=CKEDITOR.tools.bind(function(){var b=this.command?c.getCommand(this.command).modes:this.modes;this.setState(!b||b[c.mode]?a.previousState:CKEDITOR.TRISTATE_DISABLED);a.on=0},this),
this.onMenu&&b.addListener(this.onMenu)),this.setState(CKEDITOR.TRISTATE_ON),a.on=1,setTimeout(function(){b.show(CKEDITOR.document.getById(a.id),4)},0)))};CKEDITOR.ui.menuButton=CKEDITOR.tools.createClass({base:CKEDITOR.ui.button,$:function(c){delete c.panel;this.base(c);this.hasArrow=!0;this.click=d},statics:{handler:{create:function(c){return new CKEDITOR.ui.menuButton(c)}}}})},beforeInit:function(d){d.ui.addHandler(CKEDITOR.UI_MENUBUTTON,CKEDITOR.ui.menuButton.handler)}});
CKEDITOR.UI_MENUBUTTON="menubutton";(function(){CKEDITOR.plugins.add("language",{requires:"menubutton",init:function(a){var b=a.config.language_list||["ar:Arabic:rtl","fr:French","es:Spanish"],c=this,d=a.lang.language,e={},g,h,k,f;a.addCommand("language",{allowedContent:"span[!lang,!dir]",requiredContent:"span[lang,dir]",contextSensitive:!0,exec:function(a,b){var c=e["language_"+b];if(c)a[c.style.checkActive(a.elementPath(),a)?"removeStyle":"applyStyle"](c.style)},refresh:function(a){this.setState(c.getCurrentLangElement(a)?CKEDITOR.TRISTATE_ON:
CKEDITOR.TRISTATE_OFF)}});for(f=0;f<b.length;f++)g=b[f].split(":"),h=g[0],k="language_"+h,e[k]={label:g[1],langId:h,group:"language",order:f,ltr:"rtl"!=(""+g[2]).toLowerCase(),onClick:function(){a.execCommand("language",this.langId)},role:"menuitemcheckbox"},e[k].style=new CKEDITOR.style({element:"span",attributes:{lang:h,dir:e[k].ltr?"ltr":"rtl"}});e.language_remove={label:d.remove,group:"language_remove",state:CKEDITOR.TRISTATE_DISABLED,order:e.length,onClick:function(){var b=c.getCurrentLangElement(a);
b&&a.execCommand("language",b.getAttribute("lang"))}};a.addMenuGroup("language",1);a.addMenuGroup("language_remove");a.addMenuItems(e);a.ui.add("Language",CKEDITOR.UI_MENUBUTTON,{label:d.button,allowedContent:"span[!lang,!dir]",requiredContent:"span[lang,dir]",toolbar:"bidi,30",command:"language",onMenu:function(){var b={},d=c.getCurrentLangElement(a),f;for(f in e)b[f]=CKEDITOR.TRISTATE_OFF;b.language_remove=d?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED;d&&(b["language_"+d.getAttribute("lang")]=
CKEDITOR.TRISTATE_ON);return b}})},getCurrentLangElement:function(a){var b=a.elementPath();a=b&&b.elements;var c;if(b)for(var d=0;d<a.length;d++)b=a[d],!c&&"span"==b.getName()&&b.hasAttribute("dir")&&b.hasAttribute("lang")&&(c=b);return c}})})();(function(){function p(c){return c.replace(/'/g,"\\$\x26")}function q(c){for(var b,a=c.length,f=[],e=0;e<a;e++)b=c.charCodeAt(e),f.push(b);return"String.fromCharCode("+f.join(",")+")"}function r(c,b){var a=c.plugins.link,f=a.compiledProtectionFunction.params,e,d;d=[a.compiledProtectionFunction.name,"("];for(var g=0;g<f.length;g++)a=f[g].toLowerCase(),e=b[a],0<g&&d.push(","),d.push("'",e?p(encodeURIComponent(b[a])):"","'");d.push(")");return d.join("")}function n(c){c=c.config.emailProtection||"";
var b;c&&"encode"!=c&&(b={},c.replace(/^([^(]+)\(([^)]+)\)$/,function(a,c,e){b.name=c;b.params=[];e.replace(/[^,\s]+/g,function(a){b.params.push(a)})}));return b}CKEDITOR.plugins.add("link",{requires:"dialog,fakeobjects",onLoad:function(){function c(b){return a.replace(/%1/g,"rtl"==b?"right":"left").replace(/%2/g,"cke_contents_"+b)}var b="background:url("+CKEDITOR.getUrl(this.path+"images"+(CKEDITOR.env.hidpi?"/hidpi":"")+"/anchor.png")+") no-repeat %1 center;border:1px dotted #00f;background-size:16px;",
a=".%2 a.cke_anchor,.%2 a.cke_anchor_empty,.cke_editable.%2 a[name],.cke_editable.%2 a[data-cke-saved-name]{"+b+"padding-%1:18px;cursor:auto;}.%2 img.cke_anchor{"+b+"width:16px;min-height:15px;height:1.15em;vertical-align:text-bottom;}";CKEDITOR.addCss(c("ltr")+c("rtl"))},init:function(c){var b="a[!href]";CKEDITOR.dialog.isTabEnabled(c,"link","advanced")&&(b=b.replace("]",",accesskey,charset,dir,id,lang,name,rel,tabindex,title,type]{*}(*)"));CKEDITOR.dialog.isTabEnabled(c,"link","target")&&(b=b.replace("]",
",target,onclick]"));c.addCommand("link",new CKEDITOR.dialogCommand("link",{allowedContent:b,requiredContent:"a[href]"}));c.addCommand("anchor",new CKEDITOR.dialogCommand("anchor",{allowedContent:"a[!name,id]",requiredContent:"a[name]"}));c.addCommand("unlink",new CKEDITOR.unlinkCommand);c.addCommand("removeAnchor",new CKEDITOR.removeAnchorCommand);c.setKeystroke(CKEDITOR.CTRL+76,"link");c.ui.addButton&&(c.ui.addButton("Link",{label:c.lang.link.toolbar,command:"link",toolbar:"links,10"}),c.ui.addButton("Unlink",
{label:c.lang.link.unlink,command:"unlink",toolbar:"links,20"}),c.ui.addButton("Anchor",{label:c.lang.link.anchor.toolbar,command:"anchor",toolbar:"links,30"}));CKEDITOR.dialog.add("link",this.path+"dialogs/link.js");CKEDITOR.dialog.add("anchor",this.path+"dialogs/anchor.js");c.on("doubleclick",function(a){var b=CKEDITOR.plugins.link.getSelectedLink(c)||a.data.element;b.isReadOnly()||(b.is("a")?(a.data.dialog=!b.getAttribute("name")||b.getAttribute("href")&&b.getChildCount()?"link":"anchor",a.data.link=
b):CKEDITOR.plugins.link.tryRestoreFakeAnchor(c,b)&&(a.data.dialog="anchor"))},null,null,0);c.on("doubleclick",function(a){a.data.dialog in{link:1,anchor:1}&&a.data.link&&c.getSelection().selectElement(a.data.link)},null,null,20);c.addMenuItems&&c.addMenuItems({anchor:{label:c.lang.link.anchor.menu,command:"anchor",group:"anchor",order:1},removeAnchor:{label:c.lang.link.anchor.remove,command:"removeAnchor",group:"anchor",order:5},link:{label:c.lang.link.menu,command:"link",group:"link",order:1},unlink:{label:c.lang.link.unlink,
command:"unlink",group:"link",order:5}});c.contextMenu&&c.contextMenu.addListener(function(a){if(!a||a.isReadOnly())return null;a=CKEDITOR.plugins.link.tryRestoreFakeAnchor(c,a);if(!a&&!(a=CKEDITOR.plugins.link.getSelectedLink(c)))return null;var b={};a.getAttribute("href")&&a.getChildCount()&&(b={link:CKEDITOR.TRISTATE_OFF,unlink:CKEDITOR.TRISTATE_OFF});a&&a.hasAttribute("name")&&(b.anchor=b.removeAnchor=CKEDITOR.TRISTATE_OFF);return b});this.compiledProtectionFunction=n(c)},afterInit:function(c){c.dataProcessor.dataFilter.addRules({elements:{a:function(a){return a.attributes.name?
a.children.length?null:c.createFakeParserElement(a,"cke_anchor","anchor"):null}}});var b=c._.elementsPath&&c._.elementsPath.filters;b&&b.push(function(a,b){if("a"==b&&(CKEDITOR.plugins.link.tryRestoreFakeAnchor(c,a)||a.getAttribute("name")&&(!a.getAttribute("href")||!a.getChildCount())))return"anchor"})}});var t=/^javascript:/,u=/^mailto:([^?]+)(?:\?(.+))?$/,v=/subject=([^;?:@&=$,\/]*)/i,w=/body=([^;?:@&=$,\/]*)/i,x=/^#(.*)$/,y=/^((?:http|https|ftp|news):\/\/)?(.*)$/,z=/^(_(?:self|top|parent|blank))$/,
A=/^javascript:void\(location\.href='mailto:'\+String\.fromCharCode\(([^)]+)\)(?:\+'(.*)')?\)$/,B=/^javascript:([^(]+)\(([^)]+)\)$/,C=/\s*window.open\(\s*this\.href\s*,\s*(?:'([^']*)'|null)\s*,\s*'([^']*)'\s*\)\s*;\s*return\s*false;*\s*/,D=/(?:^|,)([^=]+)=(\d+|yes|no)/gi,m={id:"advId",dir:"advLangDir",accessKey:"advAccessKey",name:"advName",lang:"advLangCode",tabindex:"advTabIndex",title:"advTitle",type:"advContentType","class":"advCSSClasses",charset:"advCharset",style:"advStyles",rel:"advRel"};
CKEDITOR.plugins.link={getSelectedLink:function(c){var b=c.getSelection(),a=b.getSelectedElement();return a&&a.is("a")?a:(b=b.getRanges()[0])?(b.shrink(CKEDITOR.SHRINK_TEXT),c.elementPath(b.getCommonAncestor()).contains("a",1)):null},getEditorAnchors:function(c){for(var b=c.editable(),a=b.isInline()&&!c.plugins.divarea?c.document:b,b=a.getElementsByTag("a"),a=a.getElementsByTag("img"),f=[],e=0,d;d=b.getItem(e++);)(d.data("cke-saved-name")||d.hasAttribute("name"))&&f.push({name:d.data("cke-saved-name")||
d.getAttribute("name"),id:d.getAttribute("id")});for(e=0;d=a.getItem(e++);)(d=this.tryRestoreFakeAnchor(c,d))&&f.push({name:d.getAttribute("name"),id:d.getAttribute("id")});return f},fakeAnchor:!0,tryRestoreFakeAnchor:function(c,b){if(b&&b.data("cke-real-element-type")&&"anchor"==b.data("cke-real-element-type")){var a=c.restoreRealElement(b);if(a.data("cke-saved-name"))return a}},parseLinkAttributes:function(c,b){var a=b&&(b.data("cke-saved-href")||b.getAttribute("href"))||"",f=c.plugins.link.compiledProtectionFunction,
e=c.config.emailProtection,d,g={};a.match(t)&&("encode"==e?a=a.replace(A,function(a,b,c){c=c||"";return"mailto:"+String.fromCharCode.apply(String,b.split(","))+c.replace(/\\'/g,"'")}):e&&a.replace(B,function(a,b,c){if(b==f.name){g.type="email";a=g.email={};b=/(^')|('$)/g;c=c.match(/[^,\s]+/g);for(var d=c.length,e,h,k=0;k<d;k++)e=decodeURIComponent,h=c[k].replace(b,"").replace(/\\'/g,"'"),h=e(h),e=f.params[k].toLowerCase(),a[e]=h;a.address=[a.name,a.domain].join("@")}}));if(!g.type)if(e=a.match(x))g.type=
"anchor",g.anchor={},g.anchor.name=g.anchor.id=e[1];else if(e=a.match(u)){d=a.match(v);a=a.match(w);g.type="email";var k=g.email={};k.address=e[1];d&&(k.subject=decodeURIComponent(d[1]));a&&(k.body=decodeURIComponent(a[1]))}else a&&(d=a.match(y))&&(g.type="url",g.url={},g.url.protocol=d[1],g.url.url=d[2]);if(b){if(a=b.getAttribute("target"))g.target={type:a.match(z)?a:"frame",name:a};else if(a=(a=b.data("cke-pa-onclick")||b.getAttribute("onclick"))&&a.match(C))for(g.target={type:"popup",name:a[1]};e=
D.exec(a[2]);)"yes"!=e[2]&&"1"!=e[2]||e[1]in{height:1,width:1,top:1,left:1}?isFinite(e[2])&&(g.target[e[1]]=e[2]):g.target[e[1]]=!0;var a={},h;for(h in m)(e=b.getAttribute(h))&&(a[m[h]]=e);if(h=b.data("cke-saved-name")||a.advName)a.advName=h;CKEDITOR.tools.isEmpty(a)||(g.advanced=a)}return g},getLinkAttributes:function(c,b){var a=c.config.emailProtection||"",f={};switch(b.type){case "url":var a=b.url&&void 0!==b.url.protocol?b.url.protocol:"http://",e=b.url&&CKEDITOR.tools.trim(b.url.url)||"";f["data-cke-saved-href"]=
0===e.indexOf("/")?e:a+e;break;case "anchor":a=b.anchor&&b.anchor.id;f["data-cke-saved-href"]="#"+(b.anchor&&b.anchor.name||a||"");break;case "email":var d=b.email,e=d.address;switch(a){case "":case "encode":var g=encodeURIComponent(d.subject||""),k=encodeURIComponent(d.body||""),d=[];g&&d.push("subject\x3d"+g);k&&d.push("body\x3d"+k);d=d.length?"?"+d.join("\x26"):"";"encode"==a?(a=["javascript:void(location.href\x3d'mailto:'+",q(e)],d&&a.push("+'",p(d),"'"),a.push(")")):a=["mailto:",e,d];break;default:a=
e.split("@",2),d.name=a[0],d.domain=a[1],a=["javascript:",r(c,d)]}f["data-cke-saved-href"]=a.join("")}if(b.target)if("popup"==b.target.type){for(var a=["window.open(this.href, '",b.target.name||"","', '"],h="resizable status location toolbar menubar fullscreen scrollbars dependent".split(" "),e=h.length,g=function(a){b.target[a]&&h.push(a+"\x3d"+b.target[a])},d=0;d<e;d++)h[d]+=b.target[h[d]]?"\x3dyes":"\x3dno";g("width");g("left");g("height");g("top");a.push(h.join(","),"'); return false;");f["data-cke-pa-onclick"]=
a.join("")}else"notSet"!=b.target.type&&b.target.name&&(f.target=b.target.name);if(b.advanced){for(var l in m)(a=b.advanced[m[l]])&&(f[l]=a);f.name&&(f["data-cke-saved-name"]=f.name)}f["data-cke-saved-href"]&&(f.href=f["data-cke-saved-href"]);l={target:1,onclick:1,"data-cke-pa-onclick":1,"data-cke-saved-name":1};b.advanced&&CKEDITOR.tools.extend(l,m);for(var n in f)delete l[n];return{set:f,removed:CKEDITOR.tools.objectKeys(l)}}};CKEDITOR.unlinkCommand=function(){};CKEDITOR.unlinkCommand.prototype=
{exec:function(c){var b=new CKEDITOR.style({element:"a",type:CKEDITOR.STYLE_INLINE,alwaysRemoveElement:1});c.removeStyle(b)},refresh:function(c,b){var a=b.lastElement&&b.lastElement.getAscendant("a",!0);a&&"a"==a.getName()&&a.getAttribute("href")&&a.getChildCount()?this.setState(CKEDITOR.TRISTATE_OFF):this.setState(CKEDITOR.TRISTATE_DISABLED)},contextSensitive:1,startDisabled:1,requiredContent:"a[href]"};CKEDITOR.removeAnchorCommand=function(){};CKEDITOR.removeAnchorCommand.prototype={exec:function(c){var b=
c.getSelection(),a=b.createBookmarks(),f;if(b&&(f=b.getSelectedElement())&&(f.getChildCount()?f.is("a"):CKEDITOR.plugins.link.tryRestoreFakeAnchor(c,f)))f.remove(1);else if(f=CKEDITOR.plugins.link.getSelectedLink(c))f.hasAttribute("href")?(f.removeAttributes({name:1,"data-cke-saved-name":1}),f.removeClass("cke_anchor")):f.remove(1);b.selectBookmarks(a)},requiredContent:"a[name]"};CKEDITOR.tools.extend(CKEDITOR.config,{linkShowAdvancedTab:!0,linkShowTargetTab:!0})})();(function(){function I(b,m,e){function c(c){if(!(!(a=d[c?"getFirst":"getLast"]())||a.is&&a.isBlockBoundary()||!(p=m.root[c?"getPrevious":"getNext"](CKEDITOR.dom.walker.invisible(!0)))||p.is&&p.isBlockBoundary({br:1})))b.document.createElement("br")[c?"insertBefore":"insertAfter"](a)}for(var f=CKEDITOR.plugins.list.listToArray(m.root,e),g=[],k=0;k<m.contents.length;k++){var h=m.contents[k];(h=h.getAscendant("li",!0))&&!h.getCustomData("list_item_processed")&&(g.push(h),CKEDITOR.dom.element.setMarker(e,
h,"list_item_processed",!0))}h=null;for(k=0;k<g.length;k++)h=g[k].getCustomData("listarray_index"),f[h].indent=-1;for(k=h+1;k<f.length;k++)if(f[k].indent>f[k-1].indent+1){g=f[k-1].indent+1-f[k].indent;for(h=f[k].indent;f[k]&&f[k].indent>=h;)f[k].indent+=g,k++;k--}var d=CKEDITOR.plugins.list.arrayToList(f,e,null,b.config.enterMode,m.root.getAttribute("dir")).listNode,a,p;c(!0);c();d.replace(m.root);b.fire("contentDomInvalidated")}function B(b,m){this.name=b;this.context=this.type=m;this.allowedContent=
m+" li";this.requiredContent=m}function E(b,m,e,c){for(var f,g;f=b[c?"getLast":"getFirst"](J);)(g=f.getDirection(1))!==m.getDirection(1)&&f.setAttribute("dir",g),f.remove(),e?f[c?"insertBefore":"insertAfter"](e):m.append(f,c)}function F(b){function m(e){var c=b[e?"getPrevious":"getNext"](u);c&&c.type==CKEDITOR.NODE_ELEMENT&&c.is(b.getName())&&(E(b,c,null,!e),b.remove(),b=c)}m();m(1)}function G(b){return b.type==CKEDITOR.NODE_ELEMENT&&(b.getName()in CKEDITOR.dtd.$block||b.getName()in CKEDITOR.dtd.$listItem)&&
CKEDITOR.dtd[b.getName()]["#"]}function C(b,m,e){b.fire("saveSnapshot");e.enlarge(CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS);var c=e.extractContents();m.trim(!1,!0);var f=m.createBookmark(),g=new CKEDITOR.dom.elementPath(m.startContainer),k=g.block,g=g.lastElement.getAscendant("li",1)||k,h=new CKEDITOR.dom.elementPath(e.startContainer),d=h.contains(CKEDITOR.dtd.$listItem),h=h.contains(CKEDITOR.dtd.$list);k?(k=k.getBogus())&&k.remove():h&&(k=h.getPrevious(u))&&z(k)&&k.remove();(k=c.getLast())&&k.type==CKEDITOR.NODE_ELEMENT&&
k.is("br")&&k.remove();(k=m.startContainer.getChild(m.startOffset))?c.insertBefore(k):m.startContainer.append(c);d&&(c=A(d))&&(g.contains(d)?(E(c,d.getParent(),d),c.remove()):g.append(c));for(;e.checkStartOfBlock()&&e.checkEndOfBlock();){h=e.startPath();c=h.block;if(!c)break;c.is("li")&&(g=c.getParent(),c.equals(g.getLast(u))&&c.equals(g.getFirst(u))&&(c=g));e.moveToPosition(c,CKEDITOR.POSITION_BEFORE_START);c.remove()}e=e.clone();c=b.editable();e.setEndAt(c,CKEDITOR.POSITION_BEFORE_END);e=new CKEDITOR.dom.walker(e);
e.evaluator=function(a){return u(a)&&!z(a)};(e=e.next())&&e.type==CKEDITOR.NODE_ELEMENT&&e.getName()in CKEDITOR.dtd.$list&&F(e);m.moveToBookmark(f);m.select();b.fire("saveSnapshot")}function A(b){return(b=b.getLast(u))&&b.type==CKEDITOR.NODE_ELEMENT&&b.getName()in v?b:null}var v={ol:1,ul:1},K=CKEDITOR.dom.walker.whitespaces(),H=CKEDITOR.dom.walker.bookmark(),u=function(b){return!(K(b)||H(b))},z=CKEDITOR.dom.walker.bogus();CKEDITOR.plugins.list={listToArray:function(b,m,e,c,f){if(!v[b.getName()])return[];
c||(c=0);e||(e=[]);for(var g=0,k=b.getChildCount();g<k;g++){var h=b.getChild(g);h.type==CKEDITOR.NODE_ELEMENT&&h.getName()in CKEDITOR.dtd.$list&&CKEDITOR.plugins.list.listToArray(h,m,e,c+1);if("li"==h.$.nodeName.toLowerCase()){var d={parent:b,indent:c,element:h,contents:[]};f?d.grandparent=f:(d.grandparent=b.getParent(),d.grandparent&&"li"==d.grandparent.$.nodeName.toLowerCase()&&(d.grandparent=d.grandparent.getParent()));m&&CKEDITOR.dom.element.setMarker(m,h,"listarray_index",e.length);e.push(d);
for(var a=0,p=h.getChildCount(),l;a<p;a++)l=h.getChild(a),l.type==CKEDITOR.NODE_ELEMENT&&v[l.getName()]?CKEDITOR.plugins.list.listToArray(l,m,e,c+1,d.grandparent):d.contents.push(l)}}return e},arrayToList:function(b,m,e,c,f){e||(e=0);if(!b||b.length<e+1)return null;for(var g,k=b[e].parent.getDocument(),h=new CKEDITOR.dom.documentFragment(k),d=null,a=e,p=Math.max(b[e].indent,0),l=null,q,n,t=c==CKEDITOR.ENTER_P?"p":"div";;){var r=b[a];g=r.grandparent;q=r.element.getDirection(1);if(r.indent==p){d&&b[a].parent.getName()==
d.getName()||(d=b[a].parent.clone(!1,1),f&&d.setAttribute("dir",f),h.append(d));l=d.append(r.element.clone(0,1));q!=d.getDirection(1)&&l.setAttribute("dir",q);for(g=0;g<r.contents.length;g++)l.append(r.contents[g].clone(1,1));a++}else if(r.indent==Math.max(p,0)+1)r=b[a-1].element.getDirection(1),a=CKEDITOR.plugins.list.arrayToList(b,null,a,c,r!=q?q:null),!l.getChildCount()&&CKEDITOR.env.needsNbspFiller&&7>=k.$.documentMode&&l.append(k.createText(" ")),l.append(a.listNode),a=a.nextIndex;else if(-1==
r.indent&&!e&&g){v[g.getName()]?(l=r.element.clone(!1,!0),q!=g.getDirection(1)&&l.setAttribute("dir",q)):l=new CKEDITOR.dom.documentFragment(k);var d=g.getDirection(1)!=q,y=r.element,D=y.getAttribute("class"),z=y.getAttribute("style"),A=l.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT&&(c!=CKEDITOR.ENTER_BR||d||z||D),w,B=r.contents.length,x;for(g=0;g<B;g++)if(w=r.contents[g],H(w)&&1<B)A?x=w.clone(1,1):l.append(w.clone(1,1));else if(w.type==CKEDITOR.NODE_ELEMENT&&w.isBlockBoundary()){d&&!w.getDirection()&&
w.setAttribute("dir",q);n=w;var C=y.getAttribute("style");C&&n.setAttribute("style",C.replace(/([^;])$/,"$1;")+(n.getAttribute("style")||""));D&&w.addClass(D);n=null;x&&(l.append(x),x=null);l.append(w.clone(1,1))}else A?(n||(n=k.createElement(t),l.append(n),d&&n.setAttribute("dir",q)),z&&n.setAttribute("style",z),D&&n.setAttribute("class",D),x&&(n.append(x),x=null),n.append(w.clone(1,1))):l.append(w.clone(1,1));x&&((n||l).append(x),x=null);l.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT&&a!=b.length-1&&(CKEDITOR.env.needsBrFiller&&
(q=l.getLast())&&q.type==CKEDITOR.NODE_ELEMENT&&q.is("br")&&q.remove(),(q=l.getLast(u))&&q.type==CKEDITOR.NODE_ELEMENT&&q.is(CKEDITOR.dtd.$block)||l.append(k.createElement("br")));q=l.$.nodeName.toLowerCase();"div"!=q&&"p"!=q||l.appendBogus();h.append(l);d=null;a++}else return null;n=null;if(b.length<=a||Math.max(b[a].indent,0)<p)break}if(m)for(b=h.getFirst();b;){if(b.type==CKEDITOR.NODE_ELEMENT&&(CKEDITOR.dom.element.clearMarkers(m,b),b.getName()in CKEDITOR.dtd.$listItem&&(e=b,k=f=c=void 0,c=e.getDirection()))){for(f=
e.getParent();f&&!(k=f.getDirection());)f=f.getParent();c==k&&e.removeAttribute("dir")}b=b.getNextSourceNode()}return{listNode:h,nextIndex:a}}};var L=/^h[1-6]$/,J=CKEDITOR.dom.walker.nodeType(CKEDITOR.NODE_ELEMENT);B.prototype={exec:function(b){this.refresh(b,b.elementPath());var m=b.config,e=b.getSelection(),c=e&&e.getRanges();if(this.state==CKEDITOR.TRISTATE_OFF){var f=b.editable();if(f.getFirst(u)){var g=1==c.length&&c[0];(m=g&&g.getEnclosedNode())&&m.is&&this.type==m.getName()&&this.setState(CKEDITOR.TRISTATE_ON)}else m.enterMode==
CKEDITOR.ENTER_BR?f.appendBogus():c[0].fixBlock(1,m.enterMode==CKEDITOR.ENTER_P?"p":"div"),e.selectRanges(c)}for(var m=e.createBookmarks(!0),f=[],k={},c=c.createIterator(),h=0;(g=c.getNextRange())&&++h;){var d=g.getBoundaryNodes(),a=d.startNode,p=d.endNode;a.type==CKEDITOR.NODE_ELEMENT&&"td"==a.getName()&&g.setStartAt(d.startNode,CKEDITOR.POSITION_AFTER_START);p.type==CKEDITOR.NODE_ELEMENT&&"td"==p.getName()&&g.setEndAt(d.endNode,CKEDITOR.POSITION_BEFORE_END);g=g.createIterator();for(g.forceBrBreak=
this.state==CKEDITOR.TRISTATE_OFF;d=g.getNextParagraph();)if(!d.getCustomData("list_block")){CKEDITOR.dom.element.setMarker(k,d,"list_block",1);for(var l=b.elementPath(d),a=l.elements,p=0,l=l.blockLimit,q,n=a.length-1;0<=n&&(q=a[n]);n--)if(v[q.getName()]&&l.contains(q)){l.removeCustomData("list_group_object_"+h);(a=q.getCustomData("list_group_object"))?a.contents.push(d):(a={root:q,contents:[d]},f.push(a),CKEDITOR.dom.element.setMarker(k,q,"list_group_object",a));p=1;break}p||(p=l,p.getCustomData("list_group_object_"+
h)?p.getCustomData("list_group_object_"+h).contents.push(d):(a={root:p,contents:[d]},CKEDITOR.dom.element.setMarker(k,p,"list_group_object_"+h,a),f.push(a)))}}for(q=[];0<f.length;)if(a=f.shift(),this.state==CKEDITOR.TRISTATE_OFF)if(v[a.root.getName()]){c=b;h=a;a=k;g=q;p=CKEDITOR.plugins.list.listToArray(h.root,a);l=[];for(d=0;d<h.contents.length;d++)n=h.contents[d],(n=n.getAscendant("li",!0))&&!n.getCustomData("list_item_processed")&&(l.push(n),CKEDITOR.dom.element.setMarker(a,n,"list_item_processed",
!0));for(var n=h.root.getDocument(),t=void 0,r=void 0,d=0;d<l.length;d++){var y=l[d].getCustomData("listarray_index"),t=p[y].parent;t.is(this.type)||(r=n.createElement(this.type),t.copyAttributes(r,{start:1,type:1}),r.removeStyle("list-style-type"),p[y].parent=r)}a=CKEDITOR.plugins.list.arrayToList(p,a,null,c.config.enterMode);p=void 0;l=a.listNode.getChildCount();for(d=0;d<l&&(p=a.listNode.getChild(d));d++)p.getName()==this.type&&g.push(p);a.listNode.replace(h.root);c.fire("contentDomInvalidated")}else{p=
b;g=a;d=q;l=g.contents;c=g.root.getDocument();h=[];1==l.length&&l[0].equals(g.root)&&(a=c.createElement("div"),l[0].moveChildren&&l[0].moveChildren(a),l[0].append(a),l[0]=a);g=g.contents[0].getParent();for(n=0;n<l.length;n++)g=g.getCommonAncestor(l[n].getParent());t=p.config.useComputedState;p=a=void 0;t=void 0===t||t;for(n=0;n<l.length;n++)for(r=l[n];y=r.getParent();){if(y.equals(g)){h.push(r);!p&&r.getDirection()&&(p=1);r=r.getDirection(t);null!==a&&(a=a&&a!=r?null:r);break}r=y}if(!(1>h.length)){l=
h[h.length-1].getNext();n=c.createElement(this.type);d.push(n);for(t=d=void 0;h.length;)d=h.shift(),t=c.createElement("li"),r=d,r.is("pre")||L.test(r.getName())||"false"==r.getAttribute("contenteditable")?d.appendTo(t):(d.copyAttributes(t),a&&d.getDirection()&&(t.removeStyle("direction"),t.removeAttribute("dir")),d.moveChildren(t),d.remove()),t.appendTo(n);a&&p&&n.setAttribute("dir",a);l?n.insertBefore(l):n.appendTo(g)}}else this.state==CKEDITOR.TRISTATE_ON&&v[a.root.getName()]&&I.call(this,b,a,k);
for(n=0;n<q.length;n++)F(q[n]);CKEDITOR.dom.element.clearAllMarkers(k);e.selectBookmarks(m);b.focus()},refresh:function(b,m){var e=m.contains(v,1),c=m.blockLimit||m.root;e&&c.contains(e)?this.setState(e.is(this.type)?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF):this.setState(CKEDITOR.TRISTATE_OFF)}};CKEDITOR.plugins.add("list",{requires:"indentlist",init:function(b){b.blockless||(b.addCommand("numberedlist",new B("numberedlist","ol")),b.addCommand("bulletedlist",new B("bulletedlist","ul")),b.ui.addButton&&
(b.ui.addButton("NumberedList",{label:b.lang.list.numberedlist,command:"numberedlist",directional:!0,toolbar:"list,10"}),b.ui.addButton("BulletedList",{label:b.lang.list.bulletedlist,command:"bulletedlist",directional:!0,toolbar:"list,20"})),b.on("key",function(m){var e=m.data.domEvent.getKey(),c;if("wysiwyg"==b.mode&&e in{8:1,46:1}){var f=b.getSelection().getRanges()[0],g=f&&f.startPath();if(f&&f.collapsed){var k=8==e,h=b.editable(),d=new CKEDITOR.dom.walker(f.clone());d.evaluator=function(a){return u(a)&&
!z(a)};d.guard=function(a,b){return!(b&&a.type==CKEDITOR.NODE_ELEMENT&&a.is("table"))};e=f.clone();if(k){var a;(a=g.contains(v))&&f.checkBoundaryOfElement(a,CKEDITOR.START)&&(a=a.getParent())&&a.is("li")&&(a=A(a))?(c=a,a=a.getPrevious(u),e.moveToPosition(a&&z(a)?a:c,CKEDITOR.POSITION_BEFORE_START)):(d.range.setStartAt(h,CKEDITOR.POSITION_AFTER_START),d.range.setEnd(f.startContainer,f.startOffset),(a=d.previous())&&a.type==CKEDITOR.NODE_ELEMENT&&(a.getName()in v||a.is("li"))&&(a.is("li")||(d.range.selectNodeContents(a),
d.reset(),d.evaluator=G,a=d.previous()),c=a,e.moveToElementEditEnd(c),e.moveToPosition(e.endPath().block,CKEDITOR.POSITION_BEFORE_END)));if(c)C(b,e,f),m.cancel();else{var p=g.contains(v);p&&f.checkBoundaryOfElement(p,CKEDITOR.START)&&(c=p.getFirst(u),f.checkBoundaryOfElement(c,CKEDITOR.START)&&(a=p.getPrevious(u),A(c)?a&&(f.moveToElementEditEnd(a),f.select()):b.execCommand("outdent"),m.cancel()))}}else if(c=g.contains("li")){if(d.range.setEndAt(h,CKEDITOR.POSITION_BEFORE_END),k=(h=c.getLast(u))&&
G(h)?h:c,g=0,(a=d.next())&&a.type==CKEDITOR.NODE_ELEMENT&&a.getName()in v&&a.equals(h)?(g=1,a=d.next()):f.checkBoundaryOfElement(k,CKEDITOR.END)&&(g=2),g&&a){f=f.clone();f.moveToElementEditStart(a);if(1==g&&(e.optimize(),!e.startContainer.equals(c))){for(c=e.startContainer;c.is(CKEDITOR.dtd.$inline);)p=c,c=c.getParent();p&&e.moveToPosition(p,CKEDITOR.POSITION_AFTER_END)}2==g&&(e.moveToPosition(e.endPath().block,CKEDITOR.POSITION_BEFORE_END),f.endPath().block&&f.moveToPosition(f.endPath().block,CKEDITOR.POSITION_AFTER_START));
C(b,e,f);m.cancel()}}else d.range.setEndAt(h,CKEDITOR.POSITION_BEFORE_END),(a=d.next())&&a.type==CKEDITOR.NODE_ELEMENT&&a.is(v)&&(a=a.getFirst(u),g.block&&f.checkStartOfBlock()&&f.checkEndOfBlock()?(g.block.remove(),f.moveToElementEditStart(a),f.select()):A(a)?(f.moveToElementEditStart(a),f.select()):(f=f.clone(),f.moveToElementEditStart(a),C(b,e,f)),m.cancel());setTimeout(function(){b.selectionChange(1)})}}}))}})})();(function(){CKEDITOR.plugins.liststyle={requires:"dialog,contextmenu",init:function(a){if(!a.blockless){var b;b=new CKEDITOR.dialogCommand("numberedListStyle",{requiredContent:"ol",allowedContent:"ol{list-style-type}[start]"});b=a.addCommand("numberedListStyle",b);a.addFeature(b);CKEDITOR.dialog.add("numberedListStyle",this.path+"dialogs/liststyle.js");b=new CKEDITOR.dialogCommand("bulletedListStyle",{requiredContent:"ul",allowedContent:"ul{list-style-type}"});b=a.addCommand("bulletedListStyle",b);
a.addFeature(b);CKEDITOR.dialog.add("bulletedListStyle",this.path+"dialogs/liststyle.js");a.addMenuGroup("list",108);a.addMenuItems({numberedlist:{label:a.lang.liststyle.numberedTitle,group:"list",command:"numberedListStyle"},bulletedlist:{label:a.lang.liststyle.bulletedTitle,group:"list",command:"bulletedListStyle"}});a.contextMenu.addListener(function(a){if(!a||a.isReadOnly())return null;for(;a;){var b=a.getName();if("ol"==b)return{numberedlist:CKEDITOR.TRISTATE_OFF};if("ul"==b)return{bulletedlist:CKEDITOR.TRISTATE_OFF};
a=a.getParent()}return null})}}};CKEDITOR.plugins.add("liststyle",CKEDITOR.plugins.liststyle)})();(function(){function V(a,c,d){return n(c)&&n(d)&&d.equals(c.getNext(function(a){return!(E(a)||F(a)||u(a))}))}function z(a){this.upper=a[0];this.lower=a[1];this.set.apply(this,a.slice(2))}function O(a){var c=a.element;if(c&&n(c)&&(c=c.getAscendant(a.triggers,!0))&&a.editable.contains(c)){var d=P(c);if("true"==d.getAttribute("contenteditable"))return c;if(d.is(a.triggers))return d}return null}function ka(a,c,d){r(a,c);r(a,d);a=c.size.bottom;d=d.size.top;return a&&d?0|(a+d)/2:a||d}function w(a,c,d){return c=
c[d?"getPrevious":"getNext"](function(b){return b&&b.type==CKEDITOR.NODE_TEXT&&!E(b)||n(b)&&!u(b)&&!A(a,b)})}function q(a,c,d){return a>c&&a<d}function P(a,c){if(a.data("cke-editable"))return null;for(c||(a=a.getParent());a&&!a.data("cke-editable");){if(a.hasAttribute("contenteditable"))return a;a=a.getParent()}return null}function la(a){var c=a.doc,d=G('\x3cspan contenteditable\x3d"false" style\x3d"'+Q+"position:absolute;border-top:1px dashed "+a.boxColor+'"\x3e\x3c/span\x3e',c),b=CKEDITOR.getUrl(this.path+
"images/"+(t.hidpi?"hidpi/":"")+"icon"+(a.rtl?"-rtl":"")+".png");v(d,{attach:function(){this.wrap.getParent()||this.wrap.appendTo(a.editable,!0);return this},lineChildren:[v(G('\x3cspan title\x3d"'+a.editor.lang.magicline.title+'" contenteditable\x3d"false"\x3e\x26#8629;\x3c/span\x3e',c),{base:Q+"height:17px;width:17px;"+(a.rtl?"left":"right")+":17px;background:url("+b+") center no-repeat "+a.boxColor+";cursor:pointer;"+(t.hc?"font-size: 15px;line-height:14px;border:1px solid #fff;text-align:center;":
"")+(t.hidpi?"background-size: 9px 10px;":""),looks:["top:-8px; border-radius: 2px;","top:-17px; border-radius: 2px 2px 0px 0px;","top:-1px; border-radius: 0px 0px 2px 2px;"]}),v(G(W,c),{base:X+"left:0px;border-left-color:"+a.boxColor+";",looks:["border-width:8px 0 8px 8px;top:-8px","border-width:8px 0 0 8px;top:-8px","border-width:0 0 8px 8px;top:0px"]}),v(G(W,c),{base:X+"right:0px;border-right-color:"+a.boxColor+";",looks:["border-width:8px 8px 8px 0;top:-8px","border-width:8px 8px 0 0;top:-8px",
"border-width:0 8px 8px 0;top:0px"]})],detach:function(){this.wrap.getParent()&&this.wrap.remove();return this},mouseNear:function(){r(a,this);var b=a.holdDistance,c=this.size;return c&&q(a.mouse.y,c.top-b,c.bottom+b)&&q(a.mouse.x,c.left-b,c.right+b)?!0:!1},place:function(){var b=a.view,c=a.editable,d=a.trigger,h=d.upper,g=d.lower,l=h||g,p=l.getParent(),m={};this.trigger=d;h&&r(a,h,!0);g&&r(a,g,!0);r(a,p,!0);a.inInlineMode&&H(a,!0);p.equals(c)?(m.left=b.scroll.x,m.right=-b.scroll.x,m.width=""):(m.left=
l.size.left-l.size.margin.left+b.scroll.x-(a.inInlineMode?b.editable.left+b.editable.border.left:0),m.width=l.size.outerWidth+l.size.margin.left+l.size.margin.right+b.scroll.x,m.right="");h&&g?m.top=h.size.margin.bottom===g.size.margin.top?0|h.size.bottom+h.size.margin.bottom/2:h.size.margin.bottom<g.size.margin.top?h.size.bottom+h.size.margin.bottom:h.size.bottom+h.size.margin.bottom-g.size.margin.top:h?g||(m.top=h.size.bottom+h.size.margin.bottom):m.top=g.size.top-g.size.margin.top;d.is(C)||q(m.top,
b.scroll.y-15,b.scroll.y+5)?(m.top=a.inInlineMode?0:b.scroll.y,this.look(C)):d.is(D)||q(m.top,b.pane.bottom-5,b.pane.bottom+15)?(m.top=a.inInlineMode?b.editable.height+b.editable.padding.top+b.editable.padding.bottom:b.pane.bottom-1,this.look(D)):(a.inInlineMode&&(m.top-=b.editable.top+b.editable.border.top),this.look(x));a.inInlineMode&&(m.top--,m.top+=b.editable.scroll.top,m.left+=b.editable.scroll.left);for(var n in m)m[n]=CKEDITOR.tools.cssLength(m[n]);this.setStyles(m)},look:function(a){if(this.oldLook!=
a){for(var b=this.lineChildren.length,c;b--;)(c=this.lineChildren[b]).setAttribute("style",c.base+c.looks[0|a/2]);this.oldLook=a}},wrap:new R("span",a.doc)});for(c=d.lineChildren.length;c--;)d.lineChildren[c].appendTo(d);d.look(x);d.appendTo(d.wrap);d.unselectable();d.lineChildren[0].on("mouseup",function(b){d.detach();S(a,function(b){var c=a.line.trigger;b[c.is(I)?"insertBefore":"insertAfter"](c.is(I)?c.lower:c.upper)},!0);a.editor.focus();t.ie||a.enterMode==CKEDITOR.ENTER_BR||a.hotNode.scrollIntoView();
b.data.preventDefault(!0)});d.on("mousedown",function(a){a.data.preventDefault(!0)});a.line=d}function S(a,c,d){var b=new CKEDITOR.dom.range(a.doc),e=a.editor,f;t.ie&&a.enterMode==CKEDITOR.ENTER_BR?f=a.doc.createText(J):(f=(f=P(a.element,!0))&&f.data("cke-enter-mode")||a.enterMode,f=new R(K[f],a.doc),f.is("br")||a.doc.createText(J).appendTo(f));d&&e.fire("saveSnapshot");c(f);b.moveToPosition(f,CKEDITOR.POSITION_AFTER_START);e.getSelection().selectRanges([b]);a.hotNode=f;d&&e.fire("saveSnapshot")}
function Y(a,c){return{canUndo:!0,modes:{wysiwyg:1},exec:function(){function d(b){var d=t.ie&&9>t.version?" ":J,f=a.hotNode&&a.hotNode.getText()==d&&a.element.equals(a.hotNode)&&a.lastCmdDirection===!!c;S(a,function(d){f&&a.hotNode&&a.hotNode.remove();d[c?"insertAfter":"insertBefore"](b);d.setAttributes({"data-cke-magicline-hot":1,"data-cke-magicline-dir":!!c});a.lastCmdDirection=!!c});t.ie||a.enterMode==CKEDITOR.ENTER_BR||a.hotNode.scrollIntoView();a.line.detach()}return function(b){b=b.getSelection().getStartElement();
var e;b=b.getAscendant(Z,1);if(!aa(a,b)&&b&&!b.equals(a.editable)&&!b.contains(a.editable)){(e=P(b))&&"false"==e.getAttribute("contenteditable")&&(b=e);a.element=b;e=w(a,b,!c);var f;n(e)&&e.is(a.triggers)&&e.is(ma)&&(!w(a,e,!c)||(f=w(a,e,!c))&&n(f)&&f.is(a.triggers))?d(e):(f=O(a,b),n(f)&&(w(a,f,!c)?(b=w(a,f,!c))&&n(b)&&b.is(a.triggers)&&d(f):d(f)))}}}()}}function A(a,c){if(!c||c.type!=CKEDITOR.NODE_ELEMENT||!c.$)return!1;var d=a.line;return d.wrap.equals(c)||d.wrap.contains(c)}function n(a){return a&&
a.type==CKEDITOR.NODE_ELEMENT&&a.$}function u(a){if(!n(a))return!1;var c;(c=ba(a))||(n(a)?(c={left:1,right:1,center:1},c=!(!c[a.getComputedStyle("float")]&&!c[a.getAttribute("align")])):c=!1);return c}function ba(a){return!!{absolute:1,fixed:1}[a.getComputedStyle("position")]}function L(a,c){return n(c)?c.is(a.triggers):null}function aa(a,c){if(!c)return!1;for(var d=c.getParents(1),b=d.length;b--;)for(var e=a.tabuList.length;e--;)if(d[b].hasAttribute(a.tabuList[e]))return!0;return!1}function na(a,
c,d){c=c[d?"getLast":"getFirst"](function(b){return a.isRelevant(b)&&!b.is(oa)});if(!c)return!1;r(a,c);return d?c.size.top>a.mouse.y:c.size.bottom<a.mouse.y}function ca(a){var c=a.editable,d=a.mouse,b=a.view,e=a.triggerOffset;H(a);var f=d.y>(a.inInlineMode?b.editable.top+b.editable.height/2:Math.min(b.editable.height,b.pane.height)/2),c=c[f?"getLast":"getFirst"](function(a){return!(E(a)||F(a))});if(!c)return null;A(a,c)&&(c=a.line.wrap[f?"getPrevious":"getNext"](function(a){return!(E(a)||F(a))}));
if(!n(c)||u(c)||!L(a,c))return null;r(a,c);return!f&&0<=c.size.top&&q(d.y,0,c.size.top+e)?(a=a.inInlineMode||0===b.scroll.y?C:x,new z([null,c,I,M,a])):f&&c.size.bottom<=b.pane.height&&q(d.y,c.size.bottom-e,b.pane.height)?(a=a.inInlineMode||q(c.size.bottom,b.pane.height-e,b.pane.height)?D:x,new z([c,null,da,M,a])):null}function ea(a){var c=a.mouse,d=a.view,b=a.triggerOffset,e=O(a);if(!e)return null;r(a,e);var b=Math.min(b,0|e.size.outerHeight/2),f=[],k,h;if(q(c.y,e.size.top-1,e.size.top+b))h=!1;else if(q(c.y,
e.size.bottom-b,e.size.bottom+1))h=!0;else return null;if(u(e)||na(a,e,h)||e.getParent().is(fa))return null;var g=w(a,e,!h);if(g){if(g&&g.type==CKEDITOR.NODE_TEXT)return null;if(n(g)){if(u(g)||!L(a,g)||g.getParent().is(fa))return null;f=[g,e][h?"reverse":"concat"]().concat([T,M])}}else e.equals(a.editable[h?"getLast":"getFirst"](a.isRelevant))?(H(a),h&&q(c.y,e.size.bottom-b,d.pane.height)&&q(e.size.bottom,d.pane.height-b,d.pane.height)?k=D:q(c.y,0,e.size.top+b)&&(k=C)):k=x,f=[null,e][h?"reverse":
"concat"]().concat([h?da:I,M,k,e.equals(a.editable[h?"getLast":"getFirst"](a.isRelevant))?h?D:C:x]);return 0 in f?new z(f):null}function U(a,c,d,b){for(var e=c.getDocumentPosition(),f={},k={},h={},g={},l=y.length;l--;)f[y[l]]=parseInt(c.getComputedStyle.call(c,"border-"+y[l]+"-width"),10)||0,h[y[l]]=parseInt(c.getComputedStyle.call(c,"padding-"+y[l]),10)||0,k[y[l]]=parseInt(c.getComputedStyle.call(c,"margin-"+y[l]),10)||0;d&&!b||N(a,b);g.top=e.y-(d?0:a.view.scroll.y);g.left=e.x-(d?0:a.view.scroll.x);
g.outerWidth=c.$.offsetWidth;g.outerHeight=c.$.offsetHeight;g.height=g.outerHeight-(h.top+h.bottom+f.top+f.bottom);g.width=g.outerWidth-(h.left+h.right+f.left+f.right);g.bottom=g.top+g.outerHeight;g.right=g.left+g.outerWidth;a.inInlineMode&&(g.scroll={top:c.$.scrollTop,left:c.$.scrollLeft});return v({border:f,padding:h,margin:k,ignoreScroll:d},g,!0)}function r(a,c,d){if(!n(c))return c.size=null;if(!c.size)c.size={};else if(c.size.ignoreScroll==d&&c.size.date>new Date-ga)return null;return v(c.size,
U(a,c,d),{date:+new Date},!0)}function H(a,c){a.view.editable=U(a,a.editable,c,!0)}function N(a,c){a.view||(a.view={});var d=a.view;if(!(!c&&d&&d.date>new Date-ga)){var b=a.win,d=b.getScrollPosition(),b=b.getViewPaneSize();v(a.view,{scroll:{x:d.x,y:d.y,width:a.doc.$.documentElement.scrollWidth-b.width,height:a.doc.$.documentElement.scrollHeight-b.height},pane:{width:b.width,height:b.height,bottom:b.height+d.y},date:+new Date},!0)}}function pa(a,c,d,b){for(var e=b,f=b,k=0,h=!1,g=!1,l=a.view.pane.height,
p=a.mouse;p.y+k<l&&0<p.y-k;){h||(h=c(e,b));g||(g=c(f,b));!h&&0<p.y-k&&(e=d(a,{x:p.x,y:p.y-k}));!g&&p.y+k<l&&(f=d(a,{x:p.x,y:p.y+k}));if(h&&g)break;k+=2}return new z([e,f,null,null])}CKEDITOR.plugins.add("magicline",{init:function(a){var c=a.config,d=c.magicline_triggerOffset||30,b={editor:a,enterMode:c.enterMode,triggerOffset:d,holdDistance:0|d*(c.magicline_holdDistance||.5),boxColor:c.magicline_color||"#ff0000",rtl:"rtl"==c.contentsLangDirection,tabuList:["data-cke-hidden-sel"].concat(c.magicline_tabuList||
[]),triggers:c.magicline_everywhere?Z:{table:1,hr:1,div:1,ul:1,ol:1,dl:1,form:1,blockquote:1}},e,f,k;b.isRelevant=function(a){return n(a)&&!A(b,a)&&!u(a)};a.on("contentDom",function(){var d=a.editable(),g=a.document,l=a.window;v(b,{editable:d,inInlineMode:d.isInline(),doc:g,win:l,hotNode:null},!0);b.boundary=b.inInlineMode?b.editable:b.doc.getDocumentElement();d.is(B.$inline)||(b.inInlineMode&&!ba(d)&&d.setStyles({position:"relative",top:null,left:null}),la.call(this,b),N(b),d.attachListener(a,"beforeUndoImage",
function(){b.line.detach()}),d.attachListener(a,"beforeGetData",function(){b.line.wrap.getParent()&&(b.line.detach(),a.once("getData",function(){b.line.attach()},null,null,1E3))},null,null,0),d.attachListener(b.inInlineMode?g:g.getWindow().getFrame(),"mouseout",function(c){if("wysiwyg"==a.mode)if(b.inInlineMode){var d=c.data.$.clientX;c=c.data.$.clientY;N(b);H(b,!0);var e=b.view.editable,f=b.view.scroll;d>e.left-f.x&&d<e.right-f.x&&c>e.top-f.y&&c<e.bottom-f.y||(clearTimeout(k),k=null,b.line.detach())}else clearTimeout(k),
k=null,b.line.detach()}),d.attachListener(d,"keyup",function(){b.hiddenMode=0}),d.attachListener(d,"keydown",function(c){if("wysiwyg"==a.mode)switch(c.data.getKeystroke()){case 2228240:case 16:b.hiddenMode=1,b.line.detach()}}),d.attachListener(b.inInlineMode?d:g,"mousemove",function(c){f=!0;if("wysiwyg"==a.mode&&!a.readOnly&&!k){var d={x:c.data.$.clientX,y:c.data.$.clientY};k=setTimeout(function(){b.mouse=d;k=b.trigger=null;N(b);f&&!b.hiddenMode&&a.focusManager.hasFocus&&!b.line.mouseNear()&&(b.element=
ha(b,!0))&&((b.trigger=ca(b)||ea(b)||ia(b))&&!aa(b,b.trigger.upper||b.trigger.lower)?b.line.attach().place():(b.trigger=null,b.line.detach()),f=!1)},30)}}),d.attachListener(l,"scroll",function(){"wysiwyg"==a.mode&&(b.line.detach(),t.webkit&&(b.hiddenMode=1,clearTimeout(e),e=setTimeout(function(){b.mouseDown||(b.hiddenMode=0)},50)))}),d.attachListener(ja?g:l,"mousedown",function(){"wysiwyg"==a.mode&&(b.line.detach(),b.hiddenMode=1,b.mouseDown=1)}),d.attachListener(ja?g:l,"mouseup",function(){b.hiddenMode=
0;b.mouseDown=0}),a.addCommand("accessPreviousSpace",Y(b)),a.addCommand("accessNextSpace",Y(b,!0)),a.setKeystroke([[c.magicline_keystrokePrevious,"accessPreviousSpace"],[c.magicline_keystrokeNext,"accessNextSpace"]]),a.on("loadSnapshot",function(){var c,d,e,f;for(f in{p:1,br:1,div:1})for(c=a.document.getElementsByTag(f),e=c.count();e--;)if((d=c.getItem(e)).data("cke-magicline-hot")){b.hotNode=d;b.lastCmdDirection="true"===d.data("cke-magicline-dir")?!0:!1;return}}),this.backdoor={accessFocusSpace:S,
boxTrigger:z,isLine:A,getAscendantTrigger:O,getNonEmptyNeighbour:w,getSize:U,that:b,triggerEdge:ea,triggerEditable:ca,triggerExpand:ia})},this)}});var v=CKEDITOR.tools.extend,R=CKEDITOR.dom.element,G=R.createFromHtml,t=CKEDITOR.env,ja=CKEDITOR.env.ie&&9>CKEDITOR.env.version,B=CKEDITOR.dtd,K={},I=128,da=64,T=32,M=16,C=4,D=2,x=1,J=" ",fa=B.$listItem,oa=B.$tableContent,ma=v({},B.$nonEditable,B.$empty),Z=B.$block,ga=100,Q="width:0px;height:0px;padding:0px;margin:0px;display:block;z-index:9999;color:#fff;position:absolute;font-size: 0px;line-height:0px;",
X=Q+"border-color:transparent;display:block;border-style:solid;",W="\x3cspan\x3e"+J+"\x3c/span\x3e";K[CKEDITOR.ENTER_BR]="br";K[CKEDITOR.ENTER_P]="p";K[CKEDITOR.ENTER_DIV]="div";z.prototype={set:function(a,c,d){this.properties=a+c+(d||x);return this},is:function(a){return(this.properties&a)==a}};var ha=function(){function a(a,d){var b=a.$.elementFromPoint(d.x,d.y);return b&&b.nodeType?new CKEDITOR.dom.element(b):null}return function(c,d,b){if(!c.mouse)return null;var e=c.doc,f=c.line.wrap;b=b||c.mouse;
var k=a(e,b);d&&A(c,k)&&(f.hide(),k=a(e,b),f.show());return!k||k.type!=CKEDITOR.NODE_ELEMENT||!k.$||t.ie&&9>t.version&&!c.boundary.equals(k)&&!c.boundary.contains(k)?null:k}}(),E=CKEDITOR.dom.walker.whitespaces(),F=CKEDITOR.dom.walker.nodeType(CKEDITOR.NODE_COMMENT),ia=function(){function a(a){var b=a.element,e,f,k;if(!n(b)||b.contains(a.editable)||b.isReadOnly())return null;k=pa(a,function(a,b){return!b.equals(a)},function(a,b){return ha(a,!0,b)},b);e=k.upper;f=k.lower;if(V(a,e,f))return k.set(T,
8);if(e&&b.contains(e))for(;!e.getParent().equals(b);)e=e.getParent();else e=b.getFirst(function(b){return c(a,b)});if(f&&b.contains(f))for(;!f.getParent().equals(b);)f=f.getParent();else f=b.getLast(function(b){return c(a,b)});if(!e||!f)return null;r(a,e);r(a,f);if(!q(a.mouse.y,e.size.top,f.size.bottom))return null;for(var b=Number.MAX_VALUE,h,g,l,p;f&&!f.equals(e)&&(g=e.getNext(a.isRelevant));)h=Math.abs(ka(a,e,g)-a.mouse.y),h<b&&(b=h,l=e,p=g),e=g,r(a,e);if(!l||!p||!q(a.mouse.y,l.size.top,p.size.bottom))return null;
k.upper=l;k.lower=p;return k.set(T,8)}function c(a,b){return!(b&&b.type==CKEDITOR.NODE_TEXT||F(b)||u(b)||A(a,b)||b.type==CKEDITOR.NODE_ELEMENT&&b.$&&b.is("br"))}return function(c){var b=a(c),e;if(e=b){e=b.upper;var f=b.lower;e=!e||!f||u(f)||u(e)||f.equals(e)||e.equals(f)||f.contains(e)||e.contains(f)?!1:L(c,e)&&L(c,f)&&V(c,e,f)?!0:!1}return e?b:null}}(),y=["top","left","right","bottom"]})();CKEDITOR.config.magicline_keystrokePrevious=CKEDITOR.CTRL+CKEDITOR.SHIFT+51;
CKEDITOR.config.magicline_keystrokeNext=CKEDITOR.CTRL+CKEDITOR.SHIFT+52;(function(){function n(a){if(!a||a.type!=CKEDITOR.NODE_ELEMENT||"form"!=a.getName())return[];for(var e=[],f=["style","className"],b=0;b<f.length;b++){var c=a.$.elements.namedItem(f[b]);c&&(c=new CKEDITOR.dom.element(c),e.push([c,c.nextSibling]),c.remove())}return e}function t(a,e){if(a&&a.type==CKEDITOR.NODE_ELEMENT&&"form"==a.getName()&&0<e.length)for(var f=e.length-1;0<=f;f--){var b=e[f][0],c=e[f][1];c?b.insertBefore(c):b.appendTo(a)}}function r(a,e){var f=n(a),b={},c=a.$;e||(b["class"]=c.className||
"",c.className="");b.inline=c.style.cssText||"";e||(c.style.cssText="position: static; overflow: visible");t(f);return b}function u(a,e){var f=n(a),b=a.$;"class"in e&&(b.className=e["class"]);"inline"in e&&(b.style.cssText=e.inline);t(f)}function v(a){if(!a.editable().isInline()){var e=CKEDITOR.instances,f;for(f in e){var b=e[f];"wysiwyg"!=b.mode||b.readOnly||(b=b.document.getBody(),b.setAttribute("contentEditable",!1),b.setAttribute("contentEditable",!0))}a.editable().hasFocus&&(a.toolbox.focus(),
a.focus())}}CKEDITOR.plugins.add("maximize",{init:function(a){function e(){var b=c.getViewPaneSize();a.resize(b.width,b.height,null,!0)}if(a.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE){var f=a.lang,b=CKEDITOR.document,c=b.getWindow(),l,m,p,n=CKEDITOR.TRISTATE_OFF;a.addCommand("maximize",{modes:{wysiwyg:!CKEDITOR.env.iOS,source:!CKEDITOR.env.iOS},readOnly:1,editorFocus:!1,exec:function(){var h=a.container.getFirst(function(a){return a.type==CKEDITOR.NODE_ELEMENT&&a.hasClass("cke_inner")}),g=a.ui.space("contents");
if("wysiwyg"==a.mode){var d=a.getSelection();l=d&&d.getRanges();m=c.getScrollPosition()}else{var k=a.editable().$;l=!CKEDITOR.env.ie&&[k.selectionStart,k.selectionEnd];m=[k.scrollLeft,k.scrollTop]}if(this.state==CKEDITOR.TRISTATE_OFF){c.on("resize",e);p=c.getScrollPosition();for(d=a.container;d=d.getParent();)d.setCustomData("maximize_saved_styles",r(d)),d.setStyle("z-index",a.config.baseFloatZIndex-5);g.setCustomData("maximize_saved_styles",r(g,!0));h.setCustomData("maximize_saved_styles",r(h,!0));
g={overflow:CKEDITOR.env.webkit?"":"hidden",width:0,height:0};b.getDocumentElement().setStyles(g);!CKEDITOR.env.gecko&&b.getDocumentElement().setStyle("position","fixed");CKEDITOR.env.gecko&&CKEDITOR.env.quirks||b.getBody().setStyles(g);CKEDITOR.env.ie?setTimeout(function(){c.$.scrollTo(0,0)},0):c.$.scrollTo(0,0);h.setStyle("position",CKEDITOR.env.gecko&&CKEDITOR.env.quirks?"fixed":"absolute");h.$.offsetLeft;h.setStyles({"z-index":a.config.baseFloatZIndex-5,left:"0px",top:"0px"});h.addClass("cke_maximized");
e();g=h.getDocumentPosition();h.setStyles({left:-1*g.x+"px",top:-1*g.y+"px"});CKEDITOR.env.gecko&&v(a)}else if(this.state==CKEDITOR.TRISTATE_ON){c.removeListener("resize",e);for(var d=[g,h],q=0;q<d.length;q++)u(d[q],d[q].getCustomData("maximize_saved_styles")),d[q].removeCustomData("maximize_saved_styles");for(d=a.container;d=d.getParent();)u(d,d.getCustomData("maximize_saved_styles")),d.removeCustomData("maximize_saved_styles");CKEDITOR.env.ie?setTimeout(function(){c.$.scrollTo(p.x,p.y)},0):c.$.scrollTo(p.x,
p.y);h.removeClass("cke_maximized");CKEDITOR.env.webkit&&(h.setStyle("display","inline"),setTimeout(function(){h.setStyle("display","block")},0));a.fire("resize",{outerHeight:a.container.$.offsetHeight,contentsHeight:g.$.offsetHeight,outerWidth:a.container.$.offsetWidth})}this.toggleState();if(d=this.uiItems[0])g=this.state==CKEDITOR.TRISTATE_OFF?f.maximize.maximize:f.maximize.minimize,d=CKEDITOR.document.getById(d._.id),d.getChild(1).setHtml(g),d.setAttribute("title",g),d.setAttribute("href",'javascript:void("'+
g+'");');"wysiwyg"==a.mode?l?(CKEDITOR.env.gecko&&v(a),a.getSelection().selectRanges(l),(k=a.getSelection().getStartElement())&&k.scrollIntoView(!0)):c.$.scrollTo(m.x,m.y):(l&&(k.selectionStart=l[0],k.selectionEnd=l[1]),k.scrollLeft=m[0],k.scrollTop=m[1]);l=m=null;n=this.state;a.fire("maximize",this.state)},canUndo:!1});a.ui.addButton&&a.ui.addButton("Maximize",{label:f.maximize.maximize,command:"maximize",toolbar:"tools,10"});a.on("mode",function(){var b=a.getCommand("maximize");b.setState(b.state==
CKEDITOR.TRISTATE_DISABLED?CKEDITOR.TRISTATE_DISABLED:n)},null,null,100)}}})})();CKEDITOR.plugins.add("newpage",{init:function(a){a.addCommand("newpage",{modes:{wysiwyg:1,source:1},exec:function(b){var a=this;b.setData(b.config.newpage_html||"",function(){b.focus();setTimeout(function(){b.fire("afterCommandExec",{name:"newpage",command:a});b.selectionChange()},200)})},async:!0});a.ui.addButton&&a.ui.addButton("NewPage",{label:a.lang.newpage.toolbar,command:"newpage",toolbar:"document,20"})}});(function(){function e(a){return{"aria-label":a,"class":"cke_pagebreak",contenteditable:"false","data-cke-display-name":"pagebreak","data-cke-pagebreak":1,style:"page-break-after: always",title:a}}CKEDITOR.plugins.add("pagebreak",{requires:"fakeobjects",onLoad:function(){var a=("background:url("+CKEDITOR.getUrl(this.path+"images/pagebreak.gif")+") no-repeat center center;clear:both;width:100%;border-top:#999 1px dotted;border-bottom:#999 1px dotted;padding:0;height:7px;cursor:default;").replace(/;/g,
" !important;");CKEDITOR.addCss("div.cke_pagebreak{"+a+"}")},init:function(a){a.blockless||(a.addCommand("pagebreak",CKEDITOR.plugins.pagebreakCmd),a.ui.addButton&&a.ui.addButton("PageBreak",{label:a.lang.pagebreak.toolbar,command:"pagebreak",toolbar:"insert,70"}),CKEDITOR.env.webkit&&a.on("contentDom",function(){a.document.on("click",function(b){b=b.data.getTarget();b.is("div")&&b.hasClass("cke_pagebreak")&&a.getSelection().selectElement(b)})}))},afterInit:function(a){function b(f){CKEDITOR.tools.extend(f.attributes,
e(a.lang.pagebreak.alt),!0);f.children.length=0}var c=a.dataProcessor,g=c&&c.dataFilter,c=c&&c.htmlFilter,h=/page-break-after\s*:\s*always/i,k=/display\s*:\s*none/i;c&&c.addRules({attributes:{"class":function(a,b){var c=a.replace("cke_pagebreak","");if(c!=a){var d=CKEDITOR.htmlParser.fragment.fromHtml('\x3cspan style\x3d"display: none;"\x3e\x26nbsp;\x3c/span\x3e').children[0];b.children.length=0;b.add(d);d=b.attributes;delete d["aria-label"];delete d.contenteditable;delete d.title}return c}}},{applyToAll:!0,
priority:5});g&&g.addRules({elements:{div:function(a){if(a.attributes["data-cke-pagebreak"])b(a);else if(h.test(a.attributes.style)){var c=a.children[0];c&&"span"==c.name&&k.test(c.attributes.style)&&b(a)}}}})}});CKEDITOR.plugins.pagebreakCmd={exec:function(a){var b=a.document.createElement("div",{attributes:e(a.lang.pagebreak.alt)});a.insertElement(b)},context:"div",allowedContent:{div:{styles:"!page-break-after"},span:{match:function(a){return(a=a.parent)&&"div"==a.name&&a.styles&&a.styles["page-break-after"]},
styles:"display"}},requiredContent:"div{page-break-after}"}})();(function(){var c={canUndo:!1,async:!0,exec:function(a){a.getClipboardData({title:a.lang.pastetext.title},function(b){b&&a.fire("paste",{type:"text",dataValue:b.dataValue,method:"paste",dataTransfer:CKEDITOR.plugins.clipboard.initPasteDataTransfer()});a.fire("afterCommandExec",{name:"pastetext",command:c,returnValue:!!b})})}};CKEDITOR.plugins.add("pastetext",{requires:"clipboard",init:function(a){a.addCommand("pastetext",c);a.ui.addButton&&a.ui.addButton("PasteText",{label:a.lang.pastetext.button,
command:"pastetext",toolbar:"clipboard,40"});if(a.config.forcePasteAsPlainText)a.on("beforePaste",function(a){"html"!=a.data.type&&(a.data.type="text")});a.on("pasteState",function(b){a.getCommand("pastetext").setState(b.data)})}})})();(function(){function h(a,d,f){var b=CKEDITOR.cleanWord;b?f():(a=CKEDITOR.getUrl(a.config.pasteFromWordCleanupFile||d+"filter/default.js"),CKEDITOR.scriptLoader.load(a,f,null,!0));return!b}function k(a){a.data.type="html"}CKEDITOR.plugins.add("pastefromword",{requires:"clipboard",init:function(a){var d=0,f=this.path;a.addCommand("pastefromword",{canUndo:!1,async:!0,exec:function(a){var e=this;d=1;a.once("beforePaste",k);a.getClipboardData({title:a.lang.pastefromword.title},function(c){c&&a.fire("paste",
{type:"html",dataValue:c.dataValue,method:"paste",dataTransfer:CKEDITOR.plugins.clipboard.initPasteDataTransfer()});a.fire("afterCommandExec",{name:"pastefromword",command:e,returnValue:!!c})})}});a.ui.addButton&&a.ui.addButton("PasteFromWord",{label:a.lang.pastefromword.toolbar,command:"pastefromword",toolbar:"clipboard,50"});a.on("pasteState",function(b){a.getCommand("pastefromword").setState(b.data)});a.on("paste",function(b){var e=b.data,c=e.dataValue;if(c&&(d||/(class=\"?Mso|style=\"[^\"]*\bmso\-|w:WordDocument)/.test(c))){e.dontFilter=
!0;var g=h(a,f,function(){if(g)a.fire("paste",e);else if(!a.config.pasteFromWordPromptCleanup||d||confirm(a.lang.pastefromword.confirmCleanup))e.dataValue=CKEDITOR.cleanWord(c,a);d=0});g&&b.cancel()}},null,null,3)}})})();(function(){var h,k={modes:{wysiwyg:1,source:1},canUndo:!1,readOnly:1,exec:function(a){var g,b=a.config,f=b.baseHref?'\x3cbase href\x3d"'+b.baseHref+'"/\x3e':"";if(b.fullPage)g=a.getData().replace(/<head>/,"$\x26"+f).replace(/[^>]*(?=<\/title>)/,"$\x26 \x26mdash; "+a.lang.preview.preview);else{var b="\x3cbody ",d=a.document&&a.document.getBody();d&&(d.getAttribute("id")&&(b+='id\x3d"'+d.getAttribute("id")+'" '),d.getAttribute("class")&&(b+='class\x3d"'+d.getAttribute("class")+'" '));b+="\x3e";g=a.config.docType+
'\x3chtml dir\x3d"'+a.config.contentsLangDirection+'"\x3e\x3chead\x3e'+f+"\x3ctitle\x3e"+a.lang.preview.preview+"\x3c/title\x3e"+CKEDITOR.tools.buildStyleHtml(a.config.contentsCss)+"\x3c/head\x3e"+b+a.getData()+"\x3c/body\x3e\x3c/html\x3e"}f=640;b=420;d=80;try{var c=window.screen,f=Math.round(.8*c.width),b=Math.round(.7*c.height),d=Math.round(.1*c.width)}catch(k){}if(!1===a.fire("contentPreview",a={dataValue:g}))return!1;var c="",e;CKEDITOR.env.ie&&(window._cke_htmlToLoad=a.dataValue,e="javascript:void( (function(){document.open();"+
("("+CKEDITOR.tools.fixDomain+")();").replace(/\/\/.*?\n/g,"").replace(/parent\./g,"window.opener.")+"document.write( window.opener._cke_htmlToLoad );document.close();window.opener._cke_htmlToLoad \x3d null;})() )",c="");CKEDITOR.env.gecko&&(window._cke_htmlToLoad=a.dataValue,c=CKEDITOR.getUrl(h+"preview.html"));c=window.open(c,null,"toolbar\x3dyes,location\x3dno,status\x3dyes,menubar\x3dyes,scrollbars\x3dyes,resizable\x3dyes,width\x3d"+f+",height\x3d"+b+",left\x3d"+d);CKEDITOR.env.ie&&c&&(c.location=
e);CKEDITOR.env.ie||CKEDITOR.env.gecko||(e=c.document,e.open(),e.write(a.dataValue),e.close());return!0}};CKEDITOR.plugins.add("preview",{init:function(a){a.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE&&(h=this.path,a.addCommand("preview",k),a.ui.addButton&&a.ui.addButton("Preview",{label:a.lang.preview.preview,command:"preview",toolbar:"document,40"}))}})})();CKEDITOR.plugins.add("print",{init:function(a){a.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE&&(a.addCommand("print",CKEDITOR.plugins.print),a.ui.addButton&&a.ui.addButton("Print",{label:a.lang.print.toolbar,command:"print",toolbar:"document,50"}))}});CKEDITOR.plugins.print={exec:function(a){CKEDITOR.env.gecko?a.window.$.print():a.document.$.execCommand("Print")},canUndo:!1,readOnly:1,modes:{wysiwyg:1}};CKEDITOR.plugins.add("removeformat",{init:function(a){a.addCommand("removeFormat",CKEDITOR.plugins.removeformat.commands.removeformat);a.ui.addButton&&a.ui.addButton("RemoveFormat",{label:a.lang.removeformat.toolbar,command:"removeFormat",toolbar:"cleanup,10"})}});
CKEDITOR.plugins.removeformat={commands:{removeformat:{exec:function(a){for(var h=a._.removeFormatRegex||(a._.removeFormatRegex=new RegExp("^(?:"+a.config.removeFormatTags.replace(/,/g,"|")+")$","i")),e=a._.removeAttributes||(a._.removeAttributes=a.config.removeFormatAttributes.split(",")),f=CKEDITOR.plugins.removeformat.filter,m=a.getSelection().getRanges(),n=m.createIterator(),p=function(a){return a.type==CKEDITOR.NODE_ELEMENT},c;c=n.getNextRange();){c.collapsed||c.enlarge(CKEDITOR.ENLARGE_ELEMENT);
var l=c.createBookmark(),b=l.startNode,d=l.endNode,k=function(b){for(var c=a.elementPath(b),e=c.elements,d=1,g;(g=e[d])&&!g.equals(c.block)&&!g.equals(c.blockLimit);d++)h.test(g.getName())&&f(a,g)&&b.breakParent(g)};k(b);if(d)for(k(d),b=b.getNextSourceNode(!0,CKEDITOR.NODE_ELEMENT);b&&!b.equals(d);)if(b.isReadOnly()){if(b.getPosition(d)&CKEDITOR.POSITION_CONTAINS)break;b=b.getNext(p)}else k=b.getNextSourceNode(!1,CKEDITOR.NODE_ELEMENT),"img"==b.getName()&&b.data("cke-realelement")||!f(a,b)||(h.test(b.getName())?
b.remove(1):(b.removeAttributes(e),a.fire("removeFormatCleanup",b))),b=k;c.moveToBookmark(l)}a.forceNextSelectionCheck();a.getSelection().selectRanges(m)}}},filter:function(a,h){for(var e=a._.removeFormatFilters||[],f=0;f<e.length;f++)if(!1===e[f](h))return!1;return!0}};CKEDITOR.editor.prototype.addRemoveFormatFilter=function(a){this._.removeFormatFilters||(this._.removeFormatFilters=[]);this._.removeFormatFilters.push(a)};CKEDITOR.config.removeFormatTags="b,big,cite,code,del,dfn,em,font,i,ins,kbd,q,s,samp,small,span,strike,strong,sub,sup,tt,u,var";
CKEDITOR.config.removeFormatAttributes="class,style,lang,width,height,align,hspace,valign";(function(){var b={readOnly:1,exec:function(a){if(a.fire("save")&&(a=a.element.$.form))try{a.submit()}catch(b){a.submit.click&&a.submit.click()}}};CKEDITOR.plugins.add("save",{init:function(a){a.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE&&(a.addCommand("save",b).modes={wysiwyg:!!a.element.$.form},a.ui.addButton&&a.ui.addButton("Save",{label:a.lang.save.toolbar,command:"save",toolbar:"document,10"}))}})})();(function(){CKEDITOR.plugins.add("selectall",{init:function(b){b.addCommand("selectAll",{modes:{wysiwyg:1,source:1},exec:function(a){var b=a.editable();if(b.is("textarea"))a=b.$,CKEDITOR.env.ie?a.createTextRange().execCommand("SelectAll"):(a.selectionStart=0,a.selectionEnd=a.value.length),a.focus();else{if(b.is("body"))a.document.$.execCommand("SelectAll",!1,null);else{var c=a.createRange();c.selectNodeContents(b);c.select()}a.forceNextSelectionCheck();a.selectionChange()}},canUndo:!1});b.ui.addButton&&
b.ui.addButton("SelectAll",{label:b.lang.selectall.toolbar,command:"selectAll",toolbar:"selection,10"})}})})();(function(){var k={readOnly:1,preserveState:!0,editorFocus:!1,exec:function(a){this.toggleState();this.refresh(a)},refresh:function(a){if(a.document){var c=this.state!=CKEDITOR.TRISTATE_ON||a.elementMode==CKEDITOR.ELEMENT_MODE_INLINE&&!a.focusManager.hasFocus?"removeClass":"attachClass";a.editable()[c]("cke_show_blocks")}}};CKEDITOR.plugins.add("showblocks",{onLoad:function(){var a="p div pre address blockquote h1 h2 h3 h4 h5 h6".split(" "),c,b,e,f,k=CKEDITOR.getUrl(this.path),l=!(CKEDITOR.env.ie&&
9>CKEDITOR.env.version),g=l?":not([contenteditable\x3dfalse]):not(.cke_show_blocks_off)":"",d,h;for(c=b=e=f="";d=a.pop();)h=a.length?",":"",c+=".cke_show_blocks "+d+g+h,e+=".cke_show_blocks.cke_contents_ltr "+d+g+h,f+=".cke_show_blocks.cke_contents_rtl "+d+g+h,b+=".cke_show_blocks "+d+g+"{background-image:url("+CKEDITOR.getUrl(k+"images/block_"+d+".png")+")}";CKEDITOR.addCss((c+"{background-repeat:no-repeat;border:1px dotted gray;padding-top:8px}").concat(b,e+"{background-position:top left;padding-left:8px}",
f+"{background-position:top right;padding-right:8px}"));l||CKEDITOR.addCss(".cke_show_blocks [contenteditable\x3dfalse],.cke_show_blocks .cke_show_blocks_off{border:none;padding-top:0;background-image:none}.cke_show_blocks.cke_contents_rtl [contenteditable\x3dfalse],.cke_show_blocks.cke_contents_rtl .cke_show_blocks_off{padding-right:0}.cke_show_blocks.cke_contents_ltr [contenteditable\x3dfalse],.cke_show_blocks.cke_contents_ltr .cke_show_blocks_off{padding-left:0}")},init:function(a){function c(){b.refresh(a)}
if(!a.blockless){var b=a.addCommand("showblocks",k);b.canUndo=!1;a.config.startupOutlineBlocks&&b.setState(CKEDITOR.TRISTATE_ON);a.ui.addButton&&a.ui.addButton("ShowBlocks",{label:a.lang.showblocks.toolbar,command:"showblocks",toolbar:"tools,20"});a.on("mode",function(){b.state!=CKEDITOR.TRISTATE_DISABLED&&b.refresh(a)});a.elementMode==CKEDITOR.ELEMENT_MODE_INLINE&&(a.on("focus",c),a.on("blur",c));a.on("contentDom",function(){b.state!=CKEDITOR.TRISTATE_DISABLED&&b.refresh(a)})}}})})();(function(){var f={preserveState:!0,editorFocus:!1,readOnly:1,exec:function(a){this.toggleState();this.refresh(a)},refresh:function(a){if(a.document){var b=this.state==CKEDITOR.TRISTATE_ON?"attachClass":"removeClass";a.editable()[b]("cke_show_borders")}}};CKEDITOR.plugins.add("showborders",{modes:{wysiwyg:1},onLoad:function(){var a;a=(CKEDITOR.env.ie6Compat?[".%1 table.%2,",".%1 table.%2 td, .%1 table.%2 th","{","border : #d3d3d3 1px dotted","}"]:".%1 table.%2,;.%1 table.%2 \x3e tr \x3e td, .%1 table.%2 \x3e tr \x3e th,;.%1 table.%2 \x3e tbody \x3e tr \x3e td, .%1 table.%2 \x3e tbody \x3e tr \x3e th,;.%1 table.%2 \x3e thead \x3e tr \x3e td, .%1 table.%2 \x3e thead \x3e tr \x3e th,;.%1 table.%2 \x3e tfoot \x3e tr \x3e td, .%1 table.%2 \x3e tfoot \x3e tr \x3e th;{;border : #d3d3d3 1px dotted;}".split(";")).join("").replace(/%2/g,
"cke_show_border").replace(/%1/g,"cke_show_borders ");CKEDITOR.addCss(a)},init:function(a){var b=a.addCommand("showborders",f);b.canUndo=!1;!1!==a.config.startupShowBorders&&b.setState(CKEDITOR.TRISTATE_ON);a.on("mode",function(){b.state!=CKEDITOR.TRISTATE_DISABLED&&b.refresh(a)},null,null,100);a.on("contentDom",function(){b.state!=CKEDITOR.TRISTATE_DISABLED&&b.refresh(a)});a.on("removeFormatCleanup",function(d){d=d.data;a.getCommand("showborders").state==CKEDITOR.TRISTATE_ON&&d.is("table")&&(!d.hasAttribute("border")||
0>=parseInt(d.getAttribute("border"),10))&&d.addClass("cke_show_border")})},afterInit:function(a){var b=a.dataProcessor;a=b&&b.dataFilter;b=b&&b.htmlFilter;a&&a.addRules({elements:{table:function(a){a=a.attributes;var b=a["class"],c=parseInt(a.border,10);c&&!(0>=c)||b&&-1!=b.indexOf("cke_show_border")||(a["class"]=(b||"")+" cke_show_border")}}});b&&b.addRules({elements:{table:function(a){a=a.attributes;var b=a["class"];b&&(a["class"]=b.replace("cke_show_border","").replace(/\s{2}/," ").replace(/^\s+|\s+$/,
""))}}})}});CKEDITOR.on("dialogDefinition",function(a){var b=a.data.name;if("table"==b||"tableProperties"==b)if(a=a.data.definition,b=a.getContents("info").get("txtBorder"),b.commit=CKEDITOR.tools.override(b.commit,function(a){return function(b,c){a.apply(this,arguments);var e=parseInt(this.getValue(),10);c[!e||0>=e?"addClass":"removeClass"]("cke_show_border")}}),a=(a=a.getContents("advanced"))&&a.get("advCSSClasses"))a.setup=CKEDITOR.tools.override(a.setup,function(a){return function(){a.apply(this,
arguments);this.setValue(this.getValue().replace(/cke_show_border/,""))}}),a.commit=CKEDITOR.tools.override(a.commit,function(a){return function(b,c){a.apply(this,arguments);parseInt(c.getAttribute("border"),10)||c.addClass("cke_show_border")}})})})();(function(){CKEDITOR.plugins.add("sourcearea",{init:function(a){function d(){var a=e&&this.equals(CKEDITOR.document.getActive());this.hide();this.setStyle("height",this.getParent().$.clientHeight+"px");this.setStyle("width",this.getParent().$.clientWidth+"px");this.show();a&&this.focus()}if(a.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE){var f=CKEDITOR.plugins.sourcearea;a.addMode("source",function(e){var b=a.ui.space("contents").getDocument().createElement("textarea");b.setStyles(CKEDITOR.tools.extend({width:CKEDITOR.env.ie7Compat?
"99%":"100%",height:"100%",resize:"none",outline:"none","text-align":"left"},CKEDITOR.tools.cssVendorPrefix("tab-size",a.config.sourceAreaTabSize||4)));b.setAttribute("dir","ltr");b.addClass("cke_source").addClass("cke_reset").addClass("cke_enable_context_menu");a.ui.space("contents").append(b);b=a.editable(new c(a,b));b.setData(a.getData(1));CKEDITOR.env.ie&&(b.attachListener(a,"resize",d,b),b.attachListener(CKEDITOR.document.getWindow(),"resize",d,b),CKEDITOR.tools.setTimeout(d,0,b));a.fire("ariaWidget",
this);e()});a.addCommand("source",f.commands.source);a.ui.addButton&&a.ui.addButton("Source",{label:a.lang.sourcearea.toolbar,command:"source",toolbar:"mode,10"});a.on("mode",function(){a.getCommand("source").setState("source"==a.mode?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF)});var e=CKEDITOR.env.ie&&9==CKEDITOR.env.version}}});var c=CKEDITOR.tools.createClass({base:CKEDITOR.editable,proto:{setData:function(a){this.setValue(a);this.status="ready";this.editor.fire("dataReady")},getData:function(){return this.getValue()},
insertHtml:function(){},insertElement:function(){},insertText:function(){},setReadOnly:function(a){this[(a?"set":"remove")+"Attribute"]("readOnly","readonly")},detach:function(){c.baseProto.detach.call(this);this.clearCustomData();this.remove()}}})})();
CKEDITOR.plugins.sourcearea={commands:{source:{modes:{wysiwyg:1,source:1},editorFocus:!1,readOnly:1,exec:function(c){"wysiwyg"==c.mode&&c.fire("saveSnapshot");c.getCommand("source").setState(CKEDITOR.TRISTATE_DISABLED);c.setMode("source"==c.mode?"wysiwyg":"source")},canUndo:!1}}};CKEDITOR.plugins.add("specialchar",{availableLangs:{af:1,ar:1,bg:1,ca:1,cs:1,cy:1,da:1,de:1,"de-ch":1,el:1,en:1,"en-gb":1,eo:1,es:1,et:1,eu:1,fa:1,fi:1,fr:1,"fr-ca":1,gl:1,he:1,hr:1,hu:1,id:1,it:1,ja:1,km:1,ko:1,ku:1,lt:1,lv:1,nb:1,nl:1,no:1,pl:1,pt:1,"pt-br":1,ru:1,si:1,sk:1,sl:1,sq:1,sv:1,th:1,tr:1,tt:1,ug:1,uk:1,vi:1,zh:1,"zh-cn":1},requires:"dialog",init:function(a){var c=this;CKEDITOR.dialog.add("specialchar",this.path+"dialogs/specialchar.js");a.addCommand("specialchar",{exec:function(){var b=
a.langCode,b=c.availableLangs[b]?b:c.availableLangs[b.replace(/-.*/,"")]?b.replace(/-.*/,""):"en";CKEDITOR.scriptLoader.load(CKEDITOR.getUrl(c.path+"dialogs/lang/"+b+".js"),function(){CKEDITOR.tools.extend(a.lang.specialchar,c.langEntries[b]);a.openDialog("specialchar")})},modes:{wysiwyg:1},canUndo:!1});a.ui.addButton&&a.ui.addButton("SpecialChar",{label:a.lang.specialchar.toolbar,command:"specialchar",toolbar:"insert,50"})}});CKEDITOR.config.specialChars="! \x26quot; # $ % \x26amp; ' ( ) * + - . / 0 1 2 3 4 5 6 7 8 9 : ; \x26lt; \x3d \x26gt; ? @ A B C D E F G H I J K L M N O P Q R S T U V W X Y Z [ ] ^ _ ` a b c d e f g h i j k l m n o p q r s t u v w x y z { | } ~ \x26euro; \x26lsquo; \x26rsquo; \x26ldquo; \x26rdquo; \x26ndash; \x26mdash; \x26iexcl; \x26cent; \x26pound; \x26curren; \x26yen; \x26brvbar; \x26sect; \x26uml; \x26copy; \x26ordf; \x26laquo; \x26not; \x26reg; \x26macr; \x26deg; \x26sup2; \x26sup3; \x26acute; \x26micro; \x26para; \x26middot; \x26cedil; \x26sup1; \x26ordm; \x26raquo; \x26frac14; \x26frac12; \x26frac34; \x26iquest; \x26Agrave; \x26Aacute; \x26Acirc; \x26Atilde; \x26Auml; \x26Aring; \x26AElig; \x26Ccedil; \x26Egrave; \x26Eacute; \x26Ecirc; \x26Euml; \x26Igrave; \x26Iacute; \x26Icirc; \x26Iuml; \x26ETH; \x26Ntilde; \x26Ograve; \x26Oacute; \x26Ocirc; \x26Otilde; \x26Ouml; \x26times; \x26Oslash; \x26Ugrave; \x26Uacute; \x26Ucirc; \x26Uuml; \x26Yacute; \x26THORN; \x26szlig; \x26agrave; \x26aacute; \x26acirc; \x26atilde; \x26auml; \x26aring; \x26aelig; \x26ccedil; \x26egrave; \x26eacute; \x26ecirc; \x26euml; \x26igrave; \x26iacute; \x26icirc; \x26iuml; \x26eth; \x26ntilde; \x26ograve; \x26oacute; \x26ocirc; \x26otilde; \x26ouml; \x26divide; \x26oslash; \x26ugrave; \x26uacute; \x26ucirc; \x26uuml; \x26yacute; \x26thorn; \x26yuml; \x26OElig; \x26oelig; \x26#372; \x26#374 \x26#373 \x26#375; \x26sbquo; \x26#8219; \x26bdquo; \x26hellip; \x26trade; \x26#9658; \x26bull; \x26rarr; \x26rArr; \x26hArr; \x26diams; \x26asymp;".split(" ");CKEDITOR.plugins.add("scayt",{requires:"menubutton,dialog",tabToOpen:null,dialogName:"scaytDialog",init:function(a){var c=this,d=CKEDITOR.plugins.scayt;this.bindEvents(a);this.parseConfig(a);this.addRule(a);CKEDITOR.dialog.add(this.dialogName,CKEDITOR.getUrl(this.path+"dialogs/options.js"));this.addMenuItems(a);var b=a.lang.scayt,e=CKEDITOR.env;a.ui.add("Scayt",CKEDITOR.UI_MENUBUTTON,{label:b.text_title,title:a.plugins.wsc?a.lang.wsc.title:b.text_title,modes:{wysiwyg:!(e.ie&&(8>e.version||e.quirks))},
toolbar:"spellchecker,20",refresh:function(){var b=a.ui.instances.Scayt.getState();a.scayt&&(b=d.state.scayt[a.name]?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF);a.fire("scaytButtonState",b)},onRender:function(){var b=this;a.on("scaytButtonState",function(a){void 0!==typeof a.data&&b.setState(a.data)})},onMenu:function(){var b=a.scayt;a.getMenuItem("scaytToggle").label=a.lang.scayt[b&&d.state.scayt[a.name]?"btn_disable":"btn_enable"];b={scaytToggle:CKEDITOR.TRISTATE_OFF,scaytOptions:b?CKEDITOR.TRISTATE_OFF:
CKEDITOR.TRISTATE_DISABLED,scaytLangs:b?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,scaytDict:b?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,scaytAbout:b?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,WSC:a.plugins.wsc?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED};a.config.scayt_uiTabs[0]||delete b.scaytOptions;a.config.scayt_uiTabs[1]||delete b.scaytLangs;a.config.scayt_uiTabs[2]||delete b.scaytDict;return b}});a.contextMenu&&a.addMenuItems&&(a.contextMenu.addListener(function(b,d){var e=
a.scayt,k,l;e&&(l=e.getSelectionNode())&&(k=c.menuGenerator(a,l),e.showBanner("."+a.contextMenu._.definition.panel.className.split(" ").join(" .")));return k}),a.contextMenu._.onHide=CKEDITOR.tools.override(a.contextMenu._.onHide,function(b){return function(){var d=a.scayt;d&&d.hideBanner();return b.apply(this)}}))},addMenuItems:function(a){var c=this,d=CKEDITOR.plugins.scayt;a.addMenuGroup("scaytButton");for(var b=a.config.scayt_contextMenuItemsOrder.split("|"),e=0;e<b.length;e++)b[e]="scayt_"+b[e];
if((b=["grayt_description","grayt_suggest","grayt_control"].concat(b))&&b.length)for(e=0;e<b.length;e++)a.addMenuGroup(b[e],e-10);a.addCommand("scaytToggle",{exec:function(a){var b=a.scayt;d.state.scayt[a.name]=!d.state.scayt[a.name];!0===d.state.scayt[a.name]?b||d.createScayt(a):b&&d.destroy(a)}});a.addCommand("scaytAbout",{exec:function(a){a.scayt.tabToOpen="about";a.lockSelection();a.openDialog(c.dialogName)}});a.addCommand("scaytOptions",{exec:function(a){a.scayt.tabToOpen="options";a.lockSelection();
a.openDialog(c.dialogName)}});a.addCommand("scaytLangs",{exec:function(a){a.scayt.tabToOpen="langs";a.lockSelection();a.openDialog(c.dialogName)}});a.addCommand("scaytDict",{exec:function(a){a.scayt.tabToOpen="dictionaries";a.lockSelection();a.openDialog(c.dialogName)}});b={scaytToggle:{label:a.lang.scayt.btn_enable,group:"scaytButton",command:"scaytToggle"},scaytAbout:{label:a.lang.scayt.btn_about,group:"scaytButton",command:"scaytAbout"},scaytOptions:{label:a.lang.scayt.btn_options,group:"scaytButton",
command:"scaytOptions"},scaytLangs:{label:a.lang.scayt.btn_langs,group:"scaytButton",command:"scaytLangs"},scaytDict:{label:a.lang.scayt.btn_dictionaries,group:"scaytButton",command:"scaytDict"}};a.plugins.wsc&&(b.WSC={label:a.lang.wsc.toolbar,group:"scaytButton",onClick:function(){var b=CKEDITOR.plugins.scayt,d=a.scayt,c=a.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?a.container.getText():a.document.getBody().getText();(c=c.replace(/\s/g,""))?(d&&b.state.scayt[a.name]&&d.setMarkupPaused&&d.setMarkupPaused(!0),
a.lockSelection(),a.execCommand("checkspell")):alert("Nothing to check!")}});a.addMenuItems(b)},bindEvents:function(a){var c=CKEDITOR.plugins.scayt,d=a.elementMode==CKEDITOR.ELEMENT_MODE_INLINE,b=function(){c.destroy(a)},e=function(){!c.state.scayt[a.name]||a.readOnly||a.scayt||c.createScayt(a)},f=function(){var b=a.editable();b.attachListener(b,"focus",function(b){CKEDITOR.plugins.scayt&&!a.scayt&&setTimeout(e,0);b=CKEDITOR.plugins.scayt&&CKEDITOR.plugins.scayt.state.scayt[a.name]&&a.scayt;var c,
h;if((d||b)&&a._.savedSelection){b=a._.savedSelection.getSelectedElement();b=!b&&a._.savedSelection.getRanges();for(var f=0;f<b.length;f++)h=b[f],"string"===typeof h.startContainer.$.nodeValue&&(c=h.startContainer.getText().length,(c<h.startOffset||c<h.endOffset)&&a.unlockSelection(!1))}},this,null,-10)},g=function(){d?a.config.scayt_inlineModeImmediateMarkup?e():(a.on("blur",function(){setTimeout(b,0)}),a.on("focus",e),a.focusManager.hasFocus&&e()):e();f();var c=a.editable();c.attachListener(c,"mousedown",
function(b){b=b.data.getTarget();var d=a.widgets&&a.widgets.getByElement(b);d&&(d.wrapper=b.getAscendant(function(a){return a.hasAttribute("data-cke-widget-wrapper")},!0))},this,null,-10)};a.on("contentDom",g);a.on("beforeCommandExec",function(b){var d=a.scayt,e=null,f=!1,g=!0;b.data.name in c.options.disablingCommandExec&&"wysiwyg"==a.mode?d&&(c.destroy(a),a.fire("scaytButtonState",CKEDITOR.TRISTATE_DISABLED)):"bold"!==b.data.name&&"italic"!==b.data.name&&"underline"!==b.data.name&&"strike"!==b.data.name&&
"subscript"!==b.data.name&&"superscript"!==b.data.name&&"enter"!==b.data.name&&"cut"!==b.data.name&&"language"!==b.data.name||!d||("cut"===b.data.name&&(g=!1,f=!0),"language"===b.data.name&&(e=(e=a.plugins.language.getCurrentLangElement(a))&&e.$,f=!0),a.fire("reloadMarkupScayt",{removeOptions:{removeInside:g,forceBookmark:f,selectionNode:e},timeout:0}))});a.on("beforeSetMode",function(b){if("source"==b.data){if(b=a.scayt)c.destroy(a),a.fire("scaytButtonState",CKEDITOR.TRISTATE_DISABLED);a.document&&
a.document.getBody().removeAttribute("_jquid")}});a.on("afterCommandExec",function(b){"wysiwyg"!=a.mode||"undo"!=b.data.name&&"redo"!=b.data.name||setTimeout(function(){var b=a.scayt,d=b&&b.getScaytLangList();d&&d.ltr&&d.rtl&&b.fire("startSpellCheck, startGrammarCheck")},250)});a.on("readOnly",function(b){var d;b&&(d=a.scayt,!0===b.editor.readOnly?d&&d.fire("removeMarkupInDocument",{}):d?d.fire("startSpellCheck, startGrammarCheck"):"wysiwyg"==b.editor.mode&&!0===c.state.scayt[b.editor.name]&&(c.createScayt(a),
b.editor.fire("scaytButtonState",CKEDITOR.TRISTATE_ON)))});a.on("beforeDestroy",b);a.on("setData",function(){b();(a.elementMode==CKEDITOR.ELEMENT_MODE_INLINE||a.plugins.divarea)&&g()},this,null,50);a.on("reloadMarkupScayt",function(b){var d=b.data&&b.data.removeOptions;setTimeout(function(){var b=a.scayt,c=b&&b.getScaytLangList();c&&c.ltr&&c.rtl&&(a.document.fire("keydown",new CKEDITOR.dom.event({keyCode:37})),b.removeMarkupInSelectionNode(d),b.fire("startSpellCheck, startGrammarCheck"))},b.data&&
b.data.timeout||0)});a.on("insertElement",function(){a.fire("reloadMarkupScayt",{removeOptions:{forceBookmark:!0}})},this,null,50);a.on("insertHtml",function(){a.fire("reloadMarkupScayt")},this,null,50);a.on("insertText",function(){a.fire("reloadMarkupScayt")},this,null,50);a.on("scaytDialogShown",function(b){b.data.selectPage(a.scayt.tabToOpen)})},parseConfig:function(a){var c=CKEDITOR.plugins.scayt;c.replaceOldOptionsNames(a.config);"boolean"!==typeof a.config.scayt_autoStartup&&(a.config.scayt_autoStartup=
!1);c.state.scayt[a.name]=a.config.scayt_autoStartup;"boolean"!==typeof a.config.grayt_autoStartup&&(a.config.grayt_autoStartup=!1);"boolean"!==typeof a.config.scayt_inlineModeImmediateMarkup&&(a.config.scayt_inlineModeImmediateMarkup=!1);c.state.grayt[a.name]=a.config.grayt_autoStartup;a.config.scayt_contextCommands||(a.config.scayt_contextCommands="ignore|ignoreall|add");a.config.scayt_contextMenuItemsOrder||(a.config.scayt_contextMenuItemsOrder="suggest|moresuggest|control");a.config.scayt_sLang||
(a.config.scayt_sLang="en_US");if(void 0===a.config.scayt_maxSuggestions||"number"!=typeof a.config.scayt_maxSuggestions||0>a.config.scayt_maxSuggestions)a.config.scayt_maxSuggestions=5;if(void 0===a.config.scayt_minWordLength||"number"!=typeof a.config.scayt_minWordLength||1>a.config.scayt_minWordLength)a.config.scayt_minWordLength=4;if(void 0===a.config.scayt_customDictionaryIds||"string"!==typeof a.config.scayt_customDictionaryIds)a.config.scayt_customDictionaryIds="";if(void 0===a.config.scayt_userDictionaryName||
"string"!==typeof a.config.scayt_userDictionaryName)a.config.scayt_userDictionaryName=null;if("string"===typeof a.config.scayt_uiTabs&&3===a.config.scayt_uiTabs.split(",").length){var d=[],b=[];a.config.scayt_uiTabs=a.config.scayt_uiTabs.split(",");CKEDITOR.tools.search(a.config.scayt_uiTabs,function(a){1===Number(a)||0===Number(a)?(b.push(!0),d.push(Number(a))):b.push(!1)});null===CKEDITOR.tools.search(b,!1)?a.config.scayt_uiTabs=d:a.config.scayt_uiTabs=[1,1,1]}else a.config.scayt_uiTabs=[1,1,1];
"string"!=typeof a.config.scayt_serviceProtocol&&(a.config.scayt_serviceProtocol=null);"string"!=typeof a.config.scayt_serviceHost&&(a.config.scayt_serviceHost=null);"string"!=typeof a.config.scayt_servicePort&&(a.config.scayt_servicePort=null);"string"!=typeof a.config.scayt_servicePath&&(a.config.scayt_servicePath=null);a.config.scayt_moreSuggestions||(a.config.scayt_moreSuggestions="on");"string"!==typeof a.config.scayt_customerId&&(a.config.scayt_customerId="1:WvF0D4-UtPqN1-43nkD4-NKvUm2-daQqk3-LmNiI-z7Ysb4-mwry24-T8YrS3-Q2tpq2");
"string"!==typeof a.config.scayt_srcUrl&&(c=document.location.protocol,c=-1!=c.search(/https?:/)?c:"http:",a.config.scayt_srcUrl=c+"//svc.webspellchecker.net/spellcheck31/lf/scayt3/ckscayt/ckscayt.js");"boolean"!==typeof CKEDITOR.config.scayt_handleCheckDirty&&(CKEDITOR.config.scayt_handleCheckDirty=!0);"boolean"!==typeof CKEDITOR.config.scayt_handleUndoRedo&&(CKEDITOR.config.scayt_handleUndoRedo=!0);CKEDITOR.config.scayt_handleUndoRedo=CKEDITOR.plugins.undo?CKEDITOR.config.scayt_handleUndoRedo:!1;
"boolean"!==typeof a.config.scayt_multiLanguageMode&&(a.config.scayt_multiLanguageMode=!1);"object"!==typeof a.config.scayt_multiLanguageStyles&&(a.config.scayt_multiLanguageStyles={});a.config.scayt_ignoreAllCapsWords&&"boolean"!==typeof a.config.scayt_ignoreAllCapsWords&&(a.config.scayt_ignoreAllCapsWords=!1);a.config.scayt_ignoreDomainNames&&"boolean"!==typeof a.config.scayt_ignoreDomainNames&&(a.config.scayt_ignoreDomainNames=!1);a.config.scayt_ignoreWordsWithMixedCases&&"boolean"!==typeof a.config.scayt_ignoreWordsWithMixedCases&&
(a.config.scayt_ignoreWordsWithMixedCases=!1);a.config.scayt_ignoreWordsWithNumbers&&"boolean"!==typeof a.config.scayt_ignoreWordsWithNumbers&&(a.config.scayt_ignoreWordsWithNumbers=!1);if(a.config.scayt_disableOptionsStorage){var c=CKEDITOR.tools.isArray(a.config.scayt_disableOptionsStorage)?a.config.scayt_disableOptionsStorage:"string"===typeof a.config.scayt_disableOptionsStorage?[a.config.scayt_disableOptionsStorage]:void 0,e="all options lang ignore-all-caps-words ignore-domain-names ignore-words-with-mixed-cases ignore-words-with-numbers".split(" "),
f=["lang","ignore-all-caps-words","ignore-domain-names","ignore-words-with-mixed-cases","ignore-words-with-numbers"],g=CKEDITOR.tools.search,h=CKEDITOR.tools.indexOf;a.config.scayt_disableOptionsStorage=function(a){for(var b=[],d=0;d<a.length;d++){var c=a[d],m=!!g(a,"options");if(!g(e,c)||m&&g(f,function(a){if("lang"===a)return!1}))return;g(f,c)&&f.splice(h(f,c),1);if("all"===c||m&&g(a,"lang"))return[];"options"===c&&(f=["lang"])}return b=b.concat(f)}(c)}},addRule:function(a){var c=CKEDITOR.plugins.scayt,
d=a.dataProcessor,b=d&&d.htmlFilter,e=a._.elementsPath&&a._.elementsPath.filters,d=d&&d.dataFilter,f=a.addRemoveFormatFilter,g=function(b){if(a.scayt&&(b.hasAttribute(c.options.data_attribute_name)||b.hasAttribute(c.options.problem_grammar_data_attribute)))return!1},h=function(b){var d=!0;a.scayt&&(b.hasAttribute(c.options.data_attribute_name)||b.hasAttribute(c.options.problem_grammar_data_attribute))&&(d=!1);return d};e&&e.push(g);d&&d.addRules({elements:{span:function(a){var b=a.hasClass(c.options.misspelled_word_class)&&
a.attributes[c.options.data_attribute_name],d=a.hasClass(c.options.problem_grammar_class)&&a.attributes[c.options.problem_grammar_data_attribute];c&&(b||d)&&delete a.name;return a}}});b&&b.addRules({elements:{span:function(a){var b=a.hasClass(c.options.misspelled_word_class)&&a.attributes[c.options.data_attribute_name],d=a.hasClass(c.options.problem_grammar_class)&&a.attributes[c.options.problem_grammar_data_attribute];c&&(b||d)&&delete a.name;return a}}});f&&f.call(a,h)},scaytMenuDefinition:function(a){var c=
this;a=a.scayt;return{scayt:{scayt_ignore:{label:a.getLocal("btn_ignore"),group:"scayt_control",order:1,exec:function(a){a.scayt.ignoreWord()}},scayt_ignoreall:{label:a.getLocal("btn_ignoreAll"),group:"scayt_control",order:2,exec:function(a){a.scayt.ignoreAllWords()}},scayt_add:{label:a.getLocal("btn_addWord"),group:"scayt_control",order:3,exec:function(a){var b=a.scayt;setTimeout(function(){b.addWordToUserDictionary()},10)}},scayt_option:{label:a.getLocal("btn_options"),group:"scayt_control",order:4,
exec:function(a){a.scayt.tabToOpen="options";a.lockSelection();a.openDialog(c.dialogName)},verification:function(a){return 1==a.config.scayt_uiTabs[0]?!0:!1}},scayt_language:{label:a.getLocal("btn_langs"),group:"scayt_control",order:5,exec:function(a){a.scayt.tabToOpen="langs";a.lockSelection();a.openDialog(c.dialogName)},verification:function(a){return 1==a.config.scayt_uiTabs[1]?!0:!1}},scayt_dictionary:{label:a.getLocal("btn_dictionaries"),group:"scayt_control",order:6,exec:function(a){a.scayt.tabToOpen=
"dictionaries";a.lockSelection();a.openDialog(c.dialogName)},verification:function(a){return 1==a.config.scayt_uiTabs[2]?!0:!1}},scayt_about:{label:a.getLocal("btn_about"),group:"scayt_control",order:7,exec:function(a){a.scayt.tabToOpen="about";a.lockSelection();a.openDialog(c.dialogName)}}},grayt:{grayt_problemdescription:{label:"Grammar problem description",group:"grayt_description",order:1,state:CKEDITOR.TRISTATE_DISABLED,exec:function(a){}},grayt_ignore:{label:a.getLocal("btn_ignore"),group:"grayt_control",
order:2,exec:function(a){a.scayt.ignorePhrase()}}}}},buildSuggestionMenuItems:function(a,c,d){var b={},e={},f=d?"word":"phrase",g=d?"startGrammarCheck":"startSpellCheck",h=a.scayt;if(0<c.length&&"no_any_suggestions"!==c[0])if(d)for(d=0;d<c.length;d++){var k="scayt_suggest_"+CKEDITOR.plugins.scayt.suggestions[d].replace(" ","_");a.addCommand(k,this.createCommand(CKEDITOR.plugins.scayt.suggestions[d],f,g));d<a.config.scayt_maxSuggestions?(a.addMenuItem(k,{label:c[d],command:k,group:"scayt_suggest",
order:d+1}),b[k]=CKEDITOR.TRISTATE_OFF):(a.addMenuItem(k,{label:c[d],command:k,group:"scayt_moresuggest",order:d+1}),e[k]=CKEDITOR.TRISTATE_OFF,"on"===a.config.scayt_moreSuggestions&&(a.addMenuItem("scayt_moresuggest",{label:h.getLocal("btn_moreSuggestions"),group:"scayt_moresuggest",order:10,getItems:function(){return e}}),b.scayt_moresuggest=CKEDITOR.TRISTATE_OFF))}else for(d=0;d<c.length;d++)k="grayt_suggest_"+CKEDITOR.plugins.scayt.suggestions[d].replace(" ","_"),a.addCommand(k,this.createCommand(CKEDITOR.plugins.scayt.suggestions[d],
f,g)),a.addMenuItem(k,{label:c[d],command:k,group:"grayt_suggest",order:d+1}),b[k]=CKEDITOR.TRISTATE_OFF;else b.no_scayt_suggest=CKEDITOR.TRISTATE_DISABLED,a.addCommand("no_scayt_suggest",{exec:function(){}}),a.addMenuItem("no_scayt_suggest",{label:h.getLocal("btn_noSuggestions")||"no_scayt_suggest",command:"no_scayt_suggest",group:"scayt_suggest",order:0});return b},menuGenerator:function(a,c){var d=a.scayt,b=this.scaytMenuDefinition(a),e={},f=a.config.scayt_contextCommands.split("|"),g=c.getAttribute(d.getLangAttribute())||
d.getLang(),h,k;h=d.isScaytNode(c);k=d.isGraytNode(c);h?(b=b.scayt,e=c.getAttribute(d.getScaytNodeAttributeName()),d.fire("getSuggestionsList",{lang:g,word:e}),e=this.buildSuggestionMenuItems(a,CKEDITOR.plugins.scayt.suggestions,h)):k&&(b=b.grayt,e=c.getAttribute(d.getGraytNodeAttributeName()),k=d.getProblemDescriptionText(e,g),b.grayt_problemdescription&&k&&(b.grayt_problemdescription.label=k),d.fire("getGrammarSuggestionsList",{lang:g,phrase:e}),e=this.buildSuggestionMenuItems(a,CKEDITOR.plugins.scayt.suggestions,
h));if(h&&"off"==a.config.scayt_contextCommands)return e;for(var l in b)h&&-1==CKEDITOR.tools.indexOf(f,l.replace("scayt_",""))&&"all"!=a.config.scayt_contextCommands||(e[l]="undefined"!=typeof b[l].state?b[l].state:CKEDITOR.TRISTATE_OFF,"function"!==typeof b[l].verification||b[l].verification(a)||delete e[l],a.addCommand(l,{exec:b[l].exec}),a.addMenuItem(l,{label:a.lang.scayt[b[l].label]||b[l].label,command:l,group:b[l].group,order:b[l].order}));return e},createCommand:function(a,c,d){return{exec:function(b){b=
b.scayt;var e={};e[c]=a;b.replaceSelectionNode(e);"startGrammarCheck"===d&&b.removeMarkupInSelectionNode({grammarOnly:!0});b.fire(d)}}}});
CKEDITOR.plugins.scayt={state:{scayt:{},grayt:{}},suggestions:[],loadingHelper:{loadOrder:[]},isLoading:!1,options:{disablingCommandExec:{source:!0,newpage:!0,templates:!0},data_attribute_name:"data-scayt-word",misspelled_word_class:"scayt-misspell-word",problem_grammar_data_attribute:"data-grayt-phrase",problem_grammar_class:"gramm-problem"},backCompatibilityMap:{scayt_service_protocol:"scayt_serviceProtocol",scayt_service_host:"scayt_serviceHost",scayt_service_port:"scayt_servicePort",scayt_service_path:"scayt_servicePath",
scayt_customerid:"scayt_customerId"},replaceOldOptionsNames:function(a){for(var c in a)c in this.backCompatibilityMap&&(a[this.backCompatibilityMap[c]]=a[c],delete a[c])},createScayt:function(a){var c=this,d=CKEDITOR.plugins.scayt;this.loadScaytLibrary(a,function(a){var e=a.window&&a.window.getFrame()||a.editable();e?(e={lang:a.config.scayt_sLang,container:e.$,customDictionary:a.config.scayt_customDictionaryIds,userDictionaryName:a.config.scayt_userDictionaryName,localization:a.langCode,customer_id:a.config.scayt_customerId,
debug:a.config.scayt_debug,data_attribute_name:c.options.data_attribute_name,misspelled_word_class:c.options.misspelled_word_class,problem_grammar_data_attribute:c.options.problem_grammar_data_attribute,problem_grammar_class:c.options.problem_grammar_class,"options-to-restore":a.config.scayt_disableOptionsStorage,focused:a.editable().hasFocus,ignoreElementsRegex:a.config.scayt_elementsToIgnore,minWordLength:a.config.scayt_minWordLength,multiLanguageMode:a.config.scayt_multiLanguageMode,multiLanguageStyles:a.config.scayt_multiLanguageStyles,
graytAutoStartup:d.state.grayt[a.name]},a.config.scayt_serviceProtocol&&(e.service_protocol=a.config.scayt_serviceProtocol),a.config.scayt_serviceHost&&(e.service_host=a.config.scayt_serviceHost),a.config.scayt_servicePort&&(e.service_port=a.config.scayt_servicePort),a.config.scayt_servicePath&&(e.service_path=a.config.scayt_servicePath),"boolean"===typeof a.config.scayt_ignoreAllCapsWords&&(e["ignore-all-caps-words"]=a.config.scayt_ignoreAllCapsWords),"boolean"===typeof a.config.scayt_ignoreDomainNames&&
(e["ignore-domain-names"]=a.config.scayt_ignoreDomainNames),"boolean"===typeof a.config.scayt_ignoreWordsWithMixedCases&&(e["ignore-words-with-mixed-cases"]=a.config.scayt_ignoreWordsWithMixedCases),"boolean"===typeof a.config.scayt_ignoreWordsWithNumbers&&(e["ignore-words-with-numbers"]=a.config.scayt_ignoreWordsWithNumbers),e=new SCAYT.CKSCAYT(e,function(){},function(){}),e.subscribe("suggestionListSend",function(a){for(var b={},d=[],c=0;c<a.suggestionList.length;c++)b["word_"+a.suggestionList[c]]||
(b["word_"+a.suggestionList[c]]=a.suggestionList[c],d.push(a.suggestionList[c]));CKEDITOR.plugins.scayt.suggestions=d}),e.subscribe("selectionIsChanged",function(d){a.getSelection().isLocked&&a.lockSelection()}),e.subscribe("graytStateChanged",function(c){d.state.grayt[a.name]=c.state}),a.scayt=e,a.fire("scaytButtonState",a.readOnly?CKEDITOR.TRISTATE_DISABLED:CKEDITOR.TRISTATE_ON)):d.state.scayt[a.name]=!1})},destroy:function(a){a.scayt&&a.scayt.destroy();delete a.scayt;a.fire("scaytButtonState",
CKEDITOR.TRISTATE_OFF)},loadScaytLibrary:function(a,c){var d=this,b,e;this.loadingHelper[a.name]||("undefined"===typeof window.SCAYT||"function"!==typeof window.SCAYT.CKSCAYT?(this.loadingHelper[a.name]=c,this.loadingHelper.loadOrder.push(a.name),b=new Date,b=b.getTime(),e=a.config.scayt_srcUrl,e+=0<=e.indexOf("?")?"":"?"+b,this.loadingHelper.ckscaytLoading||(CKEDITOR.scriptLoader.load(e,function(a){if(a){CKEDITOR.fireOnce("scaytReady");for(var b=0;b<d.loadingHelper.loadOrder.length;b++){a=d.loadingHelper.loadOrder[b];
if("function"===typeof d.loadingHelper[a])d.loadingHelper[a](CKEDITOR.instances[a]);delete d.loadingHelper[a]}d.loadingHelper.loadOrder=[]}}),this.loadingHelper.ckscaytLoading=!0)):window.SCAYT&&"function"===typeof window.SCAYT.CKSCAYT&&(CKEDITOR.fireOnce("scaytReady"),a.scayt||"function"===typeof c&&c(a)))}};
CKEDITOR.on("dialogDefinition",function(a){var c=a.data.name;a=a.data.definition.dialog;if("scaytDialog"===c)a.on("cancel",function(a){return!1},this,null,-1);if("checkspell"===c)a.on("cancel",function(a){a=a.sender&&a.sender.getParentEditor();var b=CKEDITOR.plugins.scayt,c=a.scayt;c&&b.state.scayt[a.name]&&c.setMarkupPaused&&c.setMarkupPaused(!1);a.unlockSelection()},this,null,-2);if("link"===c)a.on("ok",function(a){var b=a.sender&&a.sender.getParentEditor();b&&setTimeout(function(){b.fire("reloadMarkupScayt",
{removeOptions:{removeInside:!0,forceBookmark:!0},timeout:0})},0)})});
CKEDITOR.on("scaytReady",function(){if(!0===CKEDITOR.config.scayt_handleCheckDirty){var a=CKEDITOR.editor.prototype;a.checkDirty=CKEDITOR.tools.override(a.checkDirty,function(a){return function(){var b=null,c=this.scayt;if(CKEDITOR.plugins.scayt&&CKEDITOR.plugins.scayt.state.scayt[this.name]&&this.scayt){if(b="ready"==this.status)var f=c.removeMarkupFromString(this.getSnapshot()),c=c.removeMarkupFromString(this._.previousValue),b=b&&c!==f}else b=a.call(this);return b}});a.resetDirty=CKEDITOR.tools.override(a.resetDirty,
function(a){return function(){var b=this.scayt;CKEDITOR.plugins.scayt&&CKEDITOR.plugins.scayt.state.scayt[this.name]&&this.scayt?this._.previousValue=b.removeMarkupFromString(this.getSnapshot()):a.call(this)}})}if(!0===CKEDITOR.config.scayt_handleUndoRedo){var a=CKEDITOR.plugins.undo.Image.prototype,c="function"==typeof a.equalsContent?"equalsContent":"equals";a[c]=CKEDITOR.tools.override(a[c],function(a){return function(b){var c=b.editor.scayt,f=this.contents,g=b.contents,h=null;CKEDITOR.plugins.scayt&&
CKEDITOR.plugins.scayt.state.scayt[b.editor.name]&&b.editor.scayt&&(this.contents=c.removeMarkupFromString(f)||"",b.contents=c.removeMarkupFromString(g)||"");h=a.apply(this,arguments);this.contents=f;b.contents=g;return h}})}});(function(){CKEDITOR.plugins.add("stylescombo",{requires:"richcombo",init:function(c){var l=c.config,g=c.lang.stylescombo,f={},k=[],m=[];c.on("stylesSet",function(b){if(b=b.data.styles){for(var a,h,d,e=0,n=b.length;e<n;e++)(a=b[e],c.blockless&&a.element in CKEDITOR.dtd.$block||(h=a.name,a=new CKEDITOR.style(a),c.filter.customConfig&&!c.filter.check(a)))||(a._name=h,a._.enterMode=l.enterMode,a._.type=d=a.assignedTo||a.type,a._.weight=e+1E3*(d==CKEDITOR.STYLE_OBJECT?1:d==CKEDITOR.STYLE_BLOCK?2:3),f[h]=
a,k.push(a),m.push(a));k.sort(function(a,b){return a._.weight-b._.weight})}});c.ui.addRichCombo("Styles",{label:g.label,title:g.panelTitle,toolbar:"styles,10",allowedContent:m,panel:{css:[CKEDITOR.skin.getPath("editor")].concat(l.contentsCss),multiSelect:!0,attributes:{"aria-label":g.panelTitle}},init:function(){var b,a,c,d,e,f;e=0;for(f=k.length;e<f;e++)b=k[e],a=b._name,d=b._.type,d!=c&&(this.startGroup(g["panelTitle"+String(d)]),c=d),this.add(a,b.type==CKEDITOR.STYLE_OBJECT?a:b.buildPreview(),a);
this.commit()},onClick:function(b){c.focus();c.fire("saveSnapshot");b=f[b];var a=c.elementPath();c[b.checkActive(a,c)?"removeStyle":"applyStyle"](b);c.fire("saveSnapshot")},onRender:function(){c.on("selectionChange",function(b){var a=this.getValue();b=b.data.path.elements;for(var h=0,d=b.length,e;h<d;h++){e=b[h];for(var g in f)if(f[g].checkElementRemovable(e,!0,c)){g!=a&&this.setValue(g);return}}this.setValue("")},this)},onOpen:function(){var b=c.getSelection().getSelectedElement(),b=c.elementPath(b),
a=[0,0,0,0];this.showAll();this.unmarkAll();for(var h in f){var d=f[h],e=d._.type;d.checkApplicable(b,c,c.activeFilter)?a[e]++:this.hideItem(h);d.checkActive(b,c)&&this.mark(h)}a[CKEDITOR.STYLE_BLOCK]||this.hideGroup(g["panelTitle"+String(CKEDITOR.STYLE_BLOCK)]);a[CKEDITOR.STYLE_INLINE]||this.hideGroup(g["panelTitle"+String(CKEDITOR.STYLE_INLINE)]);a[CKEDITOR.STYLE_OBJECT]||this.hideGroup(g["panelTitle"+String(CKEDITOR.STYLE_OBJECT)])},refresh:function(){var b=c.elementPath();if(b){for(var a in f)if(f[a].checkApplicable(b,
c,c.activeFilter))return;this.setState(CKEDITOR.TRISTATE_DISABLED)}},reset:function(){f={};k=[]}})}})})();(function(){function k(c){return{editorFocus:!1,canUndo:!1,modes:{wysiwyg:1},exec:function(d){if(d.editable().hasFocus){var e=d.getSelection(),b;if(b=(new CKEDITOR.dom.elementPath(e.getCommonAncestor(),e.root)).contains({td:1,th:1},1)){var e=d.createRange(),a=CKEDITOR.tools.tryThese(function(){var a=b.getParent().$.cells[b.$.cellIndex+(c?-1:1)];a.parentNode.parentNode;return a},function(){var a=b.getParent(),a=a.getAscendant("table").$.rows[a.$.rowIndex+(c?-1:1)];return a.cells[c?a.cells.length-1:
0]});if(a||c)if(a)a=new CKEDITOR.dom.element(a),e.moveToElementEditStart(a),e.checkStartOfBlock()&&e.checkEndOfBlock()||e.selectNodeContents(a);else return!0;else{for(var f=b.getAscendant("table").$,a=b.getParent().$.cells,f=new CKEDITOR.dom.element(f.insertRow(-1),d.document),g=0,h=a.length;g<h;g++)f.append((new CKEDITOR.dom.element(a[g],d.document)).clone(!1,!1)).appendBogus();e.moveToElementEditStart(f)}e.select(!0);return!0}}return!1}}}var h={editorFocus:!1,modes:{wysiwyg:1,source:1}},g={exec:function(c){c.container.focusNext(!0,
c.tabIndex)}},f={exec:function(c){c.container.focusPrevious(!0,c.tabIndex)}};CKEDITOR.plugins.add("tab",{init:function(c){for(var d=!1!==c.config.enableTabKeyTools,e=c.config.tabSpaces||0,b="";e--;)b+=" ";if(b)c.on("key",function(a){9==a.data.keyCode&&(c.insertText(b),a.cancel())});if(d)c.on("key",function(a){(9==a.data.keyCode&&c.execCommand("selectNextCell")||a.data.keyCode==CKEDITOR.SHIFT+9&&c.execCommand("selectPreviousCell"))&&a.cancel()});c.addCommand("blur",CKEDITOR.tools.extend(g,h));c.addCommand("blurBack",
CKEDITOR.tools.extend(f,h));c.addCommand("selectNextCell",k());c.addCommand("selectPreviousCell",k(!0))}})})();
CKEDITOR.dom.element.prototype.focusNext=function(k,h){var g=void 0===h?this.getTabIndex():h,f,c,d,e,b,a;if(0>=g)for(b=this.getNextSourceNode(k,CKEDITOR.NODE_ELEMENT);b;){if(b.isVisible()&&0===b.getTabIndex()){d=b;break}b=b.getNextSourceNode(!1,CKEDITOR.NODE_ELEMENT)}else for(b=this.getDocument().getBody().getFirst();b=b.getNextSourceNode(!1,CKEDITOR.NODE_ELEMENT);){if(!f)if(!c&&b.equals(this)){if(c=!0,k){if(!(b=b.getNextSourceNode(!0,CKEDITOR.NODE_ELEMENT)))break;f=1}}else c&&!this.contains(b)&&
(f=1);if(b.isVisible()&&!(0>(a=b.getTabIndex()))){if(f&&a==g){d=b;break}a>g&&(!d||!e||a<e)?(d=b,e=a):d||0!==a||(d=b,e=a)}}d&&d.focus()};
CKEDITOR.dom.element.prototype.focusPrevious=function(k,h){for(var g=void 0===h?this.getTabIndex():h,f,c,d,e=0,b,a=this.getDocument().getBody().getLast();a=a.getPreviousSourceNode(!1,CKEDITOR.NODE_ELEMENT);){if(!f)if(!c&&a.equals(this)){if(c=!0,k){if(!(a=a.getPreviousSourceNode(!0,CKEDITOR.NODE_ELEMENT)))break;f=1}}else c&&!this.contains(a)&&(f=1);if(a.isVisible()&&!(0>(b=a.getTabIndex())))if(0>=g){if(f&&0===b){d=a;break}b>e&&(d=a,e=b)}else{if(f&&b==g){d=a;break}b<g&&(!d||b>e)&&(d=a,e=b)}}d&&d.focus()};CKEDITOR.plugins.add("table",{requires:"dialog",init:function(a){function e(a){return CKEDITOR.tools.extend(a||{},{contextSensitive:1,refresh:function(a,f){this.setState(f.contains("table",1)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED)}})}if(!a.blockless){var c=a.lang.table;a.addCommand("table",new CKEDITOR.dialogCommand("table",{context:"table",allowedContent:"table{width,height}[align,border,cellpadding,cellspacing,summary];caption tbody thead tfoot;th td tr[scope];"+(a.plugins.dialogadvtab?
"table"+a.plugins.dialogadvtab.allowedContent():""),requiredContent:"table",contentTransformations:[["table{width}: sizeToStyle","table[width]: sizeToAttribute"]]}));a.addCommand("tableProperties",new CKEDITOR.dialogCommand("tableProperties",e()));a.addCommand("tableDelete",e({exec:function(a){var b=a.elementPath().contains("table",1);if(b){var d=b.getParent(),c=a.editable();1!=d.getChildCount()||d.is("td","th")||d.equals(c)||(b=d);a=a.createRange();a.moveToPosition(b,CKEDITOR.POSITION_BEFORE_START);
b.remove();a.select()}}}));a.ui.addButton&&a.ui.addButton("Table",{label:c.toolbar,command:"table",toolbar:"insert,30"});CKEDITOR.dialog.add("table",this.path+"dialogs/table.js");CKEDITOR.dialog.add("tableProperties",this.path+"dialogs/table.js");a.addMenuItems&&a.addMenuItems({table:{label:c.menu,command:"tableProperties",group:"table",order:5},tabledelete:{label:c.deleteTable,command:"tableDelete",group:"table",order:1}});a.on("doubleclick",function(a){a.data.element.is("table")&&(a.data.dialog=
"tableProperties")});a.contextMenu&&a.contextMenu.addListener(function(){return{tabledelete:CKEDITOR.TRISTATE_OFF,table:CKEDITOR.TRISTATE_OFF}})}}});(function(){function t(e){function d(a){0<b.length||a.type!=CKEDITOR.NODE_ELEMENT||!C.test(a.getName())||a.getCustomData("selected_cell")||(CKEDITOR.dom.element.setMarker(c,a,"selected_cell",!0),b.push(a))}e=e.getRanges();for(var b=[],c={},a=0;a<e.length;a++){var f=e[a];if(f.collapsed)f=f.getCommonAncestor(),(f=f.getAscendant("td",!0)||f.getAscendant("th",!0))&&b.push(f);else{var f=new CKEDITOR.dom.walker(f),g;for(f.guard=d;g=f.next();)g.type==CKEDITOR.NODE_ELEMENT&&g.is(CKEDITOR.dtd.table)||(g=g.getAscendant("td",
!0)||g.getAscendant("th",!0))&&!g.getCustomData("selected_cell")&&(CKEDITOR.dom.element.setMarker(c,g,"selected_cell",!0),b.push(g))}}CKEDITOR.dom.element.clearAllMarkers(c);return b}function p(e,d){for(var b=t(e),c=b[0],a=c.getAscendant("table"),c=c.getDocument(),f=b[0].getParent(),g=f.$.rowIndex,b=b[b.length-1],h=b.getParent().$.rowIndex+b.$.rowSpan-1,b=new CKEDITOR.dom.element(a.$.rows[h]),g=d?g:h,f=d?f:b,b=CKEDITOR.tools.buildTableMap(a),a=b[g],g=d?b[g-1]:b[g+1],b=b[0].length,c=c.createElement("tr"),
h=0;a[h]&&h<b;h++){var k;1<a[h].rowSpan&&g&&a[h]==g[h]?(k=a[h],k.rowSpan+=1):(k=(new CKEDITOR.dom.element(a[h])).clone(),k.removeAttribute("rowSpan"),k.appendBogus(),c.append(k),k=k.$);h+=k.colSpan-1}d?c.insertBefore(f):c.insertAfter(f)}function u(e){if(e instanceof CKEDITOR.dom.selection){var d=t(e),b=d[0].getAscendant("table"),c=CKEDITOR.tools.buildTableMap(b);e=d[0].getParent().$.rowIndex;for(var d=d[d.length-1],a=d.getParent().$.rowIndex+d.$.rowSpan-1,d=[],f=e;f<=a;f++){for(var g=c[f],h=new CKEDITOR.dom.element(b.$.rows[f]),
k=0;k<g.length;k++){var l=new CKEDITOR.dom.element(g[k]),n=l.getParent().$.rowIndex;1==l.$.rowSpan?l.remove():(--l.$.rowSpan,n==f&&(n=c[f+1],n[k-1]?l.insertAfter(new CKEDITOR.dom.element(n[k-1])):(new CKEDITOR.dom.element(b.$.rows[f+1])).append(l,1)));k+=l.$.colSpan-1}d.push(h)}c=b.$.rows;b=new CKEDITOR.dom.element(c[a+1]||(0<e?c[e-1]:null)||b.$.parentNode);for(f=d.length;0<=f;f--)u(d[f]);return b}e instanceof CKEDITOR.dom.element&&(b=e.getAscendant("table"),1==b.$.rows.length?b.remove():e.remove());
return null}function v(e,d){for(var b=d?Infinity:0,c=0;c<e.length;c++){var a;a=e[c];for(var f=d,g=a.getParent().$.cells,h=0,k=0;k<g.length;k++){var l=g[k],h=h+(f?1:l.colSpan);if(l==a.$)break}a=h-1;if(d?a<b:a>b)b=a}return b}function m(e,d){for(var b=t(e),c=b[0].getAscendant("table"),a=v(b,1),b=v(b),a=d?a:b,f=CKEDITOR.tools.buildTableMap(c),c=[],b=[],g=f.length,h=0;h<g;h++)c.push(f[h][a]),b.push(d?f[h][a-1]:f[h][a+1]);for(h=0;h<g;h++)c[h]&&(1<c[h].colSpan&&b[h]==c[h]?(a=c[h],a.colSpan+=1):(a=(new CKEDITOR.dom.element(c[h])).clone(),
a.removeAttribute("colSpan"),a.appendBogus(),a[d?"insertBefore":"insertAfter"].call(a,new CKEDITOR.dom.element(c[h])),a=a.$),h+=a.rowSpan-1)}function y(e,d){var b=e.getStartElement();if(b=b.getAscendant("td",1)||b.getAscendant("th",1)){var c=b.clone();c.appendBogus();d?c.insertBefore(b):c.insertAfter(b)}}function x(e){if(e instanceof CKEDITOR.dom.selection){e=t(e);var d=e[0]&&e[0].getAscendant("table"),b;a:{var c=0;b=e.length-1;for(var a={},f,g;f=e[c++];)CKEDITOR.dom.element.setMarker(a,f,"delete_cell",
!0);for(c=0;f=e[c++];)if((g=f.getPrevious())&&!g.getCustomData("delete_cell")||(g=f.getNext())&&!g.getCustomData("delete_cell")){CKEDITOR.dom.element.clearAllMarkers(a);b=g;break a}CKEDITOR.dom.element.clearAllMarkers(a);g=e[0].getParent();(g=g.getPrevious())?b=g.getLast():(g=e[b].getParent(),b=(g=g.getNext())?g.getChild(0):null)}for(g=e.length-1;0<=g;g--)x(e[g]);b?q(b,!0):d&&d.remove()}else e instanceof CKEDITOR.dom.element&&(d=e.getParent(),1==d.getChildCount()?d.remove():e.remove())}function q(e,
d){var b=e.getDocument(),c=CKEDITOR.document;CKEDITOR.env.ie&&10==CKEDITOR.env.version&&(c.focus(),b.focus());b=new CKEDITOR.dom.range(b);b["moveToElementEdit"+(d?"End":"Start")](e)||(b.selectNodeContents(e),b.collapse(d?!1:!0));b.select(!0)}function z(e,d,b){e=e[d];if("undefined"==typeof b)return e;for(d=0;e&&d<e.length;d++){if(b.is&&e[d]==b.$)return d;if(d==b)return new CKEDITOR.dom.element(e[d])}return b.is?-1:null}function w(e,d,b){var c=t(e),a;if((d?1!=c.length:2>c.length)||(a=e.getCommonAncestor())&&
a.type==CKEDITOR.NODE_ELEMENT&&a.is("table"))return!1;var f;e=c[0];a=e.getAscendant("table");var g=CKEDITOR.tools.buildTableMap(a),h=g.length,k=g[0].length,l=e.getParent().$.rowIndex,n=z(g,l,e);if(d){var r;try{var q=parseInt(e.getAttribute("rowspan"),10)||1;f=parseInt(e.getAttribute("colspan"),10)||1;r=g["up"==d?l-q:"down"==d?l+q:l]["left"==d?n-f:"right"==d?n+f:n]}catch(D){return!1}if(!r||e.$==r)return!1;c["up"==d||"left"==d?"unshift":"push"](new CKEDITOR.dom.element(r))}d=e.getDocument();var p=l,
q=r=0,u=!b&&new CKEDITOR.dom.documentFragment(d),w=0;for(d=0;d<c.length;d++){f=c[d];var m=f.getParent(),x=f.getFirst(),v=f.$.colSpan,y=f.$.rowSpan,m=m.$.rowIndex,A=z(g,m,f),w=w+v*y,q=Math.max(q,A-n+v);r=Math.max(r,m-l+y);b||(v=f,(y=v.getBogus())&&y.remove(),v.trim(),f.getChildren().count()&&(m==p||!x||x.isBlockBoundary&&x.isBlockBoundary({br:1})||(p=u.getLast(CKEDITOR.dom.walker.whitespaces(!0)),!p||p.is&&p.is("br")||u.append("br")),f.moveChildren(u)),d?f.remove():f.setHtml(""));p=m}if(b)return r*
q==w;u.moveChildren(e);e.appendBogus();q>=k?e.removeAttribute("rowSpan"):e.$.rowSpan=r;r>=h?e.removeAttribute("colSpan"):e.$.colSpan=q;b=new CKEDITOR.dom.nodeList(a.$.rows);c=b.count();for(d=c-1;0<=d;d--)a=b.getItem(d),a.$.cells.length||(a.remove(),c++);return e}function A(e,d){var b=t(e);if(1<b.length)return!1;if(d)return!0;var b=b[0],c=b.getParent(),a=c.getAscendant("table"),f=CKEDITOR.tools.buildTableMap(a),g=c.$.rowIndex,h=z(f,g,b),k=b.$.rowSpan,l;if(1<k){l=Math.ceil(k/2);for(var k=Math.floor(k/
2),c=g+l,a=new CKEDITOR.dom.element(a.$.rows[c]),f=z(f,c),n,c=b.clone(),g=0;g<f.length;g++)if(n=f[g],n.parentNode==a.$&&g>h){c.insertBefore(new CKEDITOR.dom.element(n));break}else n=null;n||a.append(c)}else for(k=l=1,a=c.clone(),a.insertAfter(c),a.append(c=b.clone()),n=z(f,g),h=0;h<n.length;h++)n[h].rowSpan++;c.appendBogus();b.$.rowSpan=l;c.$.rowSpan=k;1==l&&b.removeAttribute("rowSpan");1==k&&c.removeAttribute("rowSpan");return c}function B(e,d){var b=t(e);if(1<b.length)return!1;if(d)return!0;var b=
b[0],c=b.getParent(),a=c.getAscendant("table"),a=CKEDITOR.tools.buildTableMap(a),f=z(a,c.$.rowIndex,b),g=b.$.colSpan;if(1<g)c=Math.ceil(g/2),g=Math.floor(g/2);else{for(var g=c=1,h=[],k=0;k<a.length;k++){var l=a[k];h.push(l[f]);1<l[f].rowSpan&&(k+=l[f].rowSpan-1)}for(a=0;a<h.length;a++)h[a].colSpan++}a=b.clone();a.insertAfter(b);a.appendBogus();b.$.colSpan=c;a.$.colSpan=g;1==c&&b.removeAttribute("colSpan");1==g&&a.removeAttribute("colSpan");return a}var C=/^(?:td|th)$/;CKEDITOR.plugins.tabletools=
{requires:"table,dialog,contextmenu",init:function(e){function d(a){return CKEDITOR.tools.extend(a||{},{contextSensitive:1,refresh:function(a,b){this.setState(b.contains({td:1,th:1},1)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED)}})}function b(a,b){var c=e.addCommand(a,b);e.addFeature(c)}var c=e.lang.table;b("cellProperties",new CKEDITOR.dialogCommand("cellProperties",d({allowedContent:"td th{width,height,border-color,background-color,white-space,vertical-align,text-align}[colspan,rowspan]",
requiredContent:"table"})));CKEDITOR.dialog.add("cellProperties",this.path+"dialogs/tableCell.js");b("rowDelete",d({requiredContent:"table",exec:function(a){a=a.getSelection();q(u(a))}}));b("rowInsertBefore",d({requiredContent:"table",exec:function(a){a=a.getSelection();p(a,!0)}}));b("rowInsertAfter",d({requiredContent:"table",exec:function(a){a=a.getSelection();p(a)}}));b("columnDelete",d({requiredContent:"table",exec:function(a){a=a.getSelection();a=t(a);var b=a[0],c=a[a.length-1];a=b.getAscendant("table");
for(var d=CKEDITOR.tools.buildTableMap(a),e,l,n=[],r=0,p=d.length;r<p;r++)for(var m=0,u=d[r].length;m<u;m++)d[r][m]==b.$&&(e=m),d[r][m]==c.$&&(l=m);for(r=e;r<=l;r++)for(m=0;m<d.length;m++)c=d[m],b=new CKEDITOR.dom.element(a.$.rows[m]),c=new CKEDITOR.dom.element(c[r]),c.$&&(1==c.$.colSpan?c.remove():--c.$.colSpan,m+=c.$.rowSpan-1,b.$.cells.length||n.push(b));l=a.$.rows[0]&&a.$.rows[0].cells;e=new CKEDITOR.dom.element(l[e]||(e?l[e-1]:a.$.parentNode));n.length==p&&a.remove();e&&q(e,!0)}}));b("columnInsertBefore",
d({requiredContent:"table",exec:function(a){a=a.getSelection();m(a,!0)}}));b("columnInsertAfter",d({requiredContent:"table",exec:function(a){a=a.getSelection();m(a)}}));b("cellDelete",d({requiredContent:"table",exec:function(a){a=a.getSelection();x(a)}}));b("cellMerge",d({allowedContent:"td[colspan,rowspan]",requiredContent:"td[colspan,rowspan]",exec:function(a){q(w(a.getSelection()),!0)}}));b("cellMergeRight",d({allowedContent:"td[colspan]",requiredContent:"td[colspan]",exec:function(a){q(w(a.getSelection(),
"right"),!0)}}));b("cellMergeDown",d({allowedContent:"td[rowspan]",requiredContent:"td[rowspan]",exec:function(a){q(w(a.getSelection(),"down"),!0)}}));b("cellVerticalSplit",d({allowedContent:"td[rowspan]",requiredContent:"td[rowspan]",exec:function(a){q(B(a.getSelection()))}}));b("cellHorizontalSplit",d({allowedContent:"td[colspan]",requiredContent:"td[colspan]",exec:function(a){q(A(a.getSelection()))}}));b("cellInsertBefore",d({requiredContent:"table",exec:function(a){a=a.getSelection();y(a,!0)}}));
b("cellInsertAfter",d({requiredContent:"table",exec:function(a){a=a.getSelection();y(a)}}));e.addMenuItems&&e.addMenuItems({tablecell:{label:c.cell.menu,group:"tablecell",order:1,getItems:function(){var a=e.getSelection(),b=t(a);return{tablecell_insertBefore:CKEDITOR.TRISTATE_OFF,tablecell_insertAfter:CKEDITOR.TRISTATE_OFF,tablecell_delete:CKEDITOR.TRISTATE_OFF,tablecell_merge:w(a,null,!0)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,tablecell_merge_right:w(a,"right",!0)?CKEDITOR.TRISTATE_OFF:
CKEDITOR.TRISTATE_DISABLED,tablecell_merge_down:w(a,"down",!0)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,tablecell_split_vertical:B(a,!0)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,tablecell_split_horizontal:A(a,!0)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,tablecell_properties:0<b.length?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED}}},tablecell_insertBefore:{label:c.cell.insertBefore,group:"tablecell",command:"cellInsertBefore",order:5},tablecell_insertAfter:{label:c.cell.insertAfter,
group:"tablecell",command:"cellInsertAfter",order:10},tablecell_delete:{label:c.cell.deleteCell,group:"tablecell",command:"cellDelete",order:15},tablecell_merge:{label:c.cell.merge,group:"tablecell",command:"cellMerge",order:16},tablecell_merge_right:{label:c.cell.mergeRight,group:"tablecell",command:"cellMergeRight",order:17},tablecell_merge_down:{label:c.cell.mergeDown,group:"tablecell",command:"cellMergeDown",order:18},tablecell_split_horizontal:{label:c.cell.splitHorizontal,group:"tablecell",
command:"cellHorizontalSplit",order:19},tablecell_split_vertical:{label:c.cell.splitVertical,group:"tablecell",command:"cellVerticalSplit",order:20},tablecell_properties:{label:c.cell.title,group:"tablecellproperties",command:"cellProperties",order:21},tablerow:{label:c.row.menu,group:"tablerow",order:1,getItems:function(){return{tablerow_insertBefore:CKEDITOR.TRISTATE_OFF,tablerow_insertAfter:CKEDITOR.TRISTATE_OFF,tablerow_delete:CKEDITOR.TRISTATE_OFF}}},tablerow_insertBefore:{label:c.row.insertBefore,
group:"tablerow",command:"rowInsertBefore",order:5},tablerow_insertAfter:{label:c.row.insertAfter,group:"tablerow",command:"rowInsertAfter",order:10},tablerow_delete:{label:c.row.deleteRow,group:"tablerow",command:"rowDelete",order:15},tablecolumn:{label:c.column.menu,group:"tablecolumn",order:1,getItems:function(){return{tablecolumn_insertBefore:CKEDITOR.TRISTATE_OFF,tablecolumn_insertAfter:CKEDITOR.TRISTATE_OFF,tablecolumn_delete:CKEDITOR.TRISTATE_OFF}}},tablecolumn_insertBefore:{label:c.column.insertBefore,
group:"tablecolumn",command:"columnInsertBefore",order:5},tablecolumn_insertAfter:{label:c.column.insertAfter,group:"tablecolumn",command:"columnInsertAfter",order:10},tablecolumn_delete:{label:c.column.deleteColumn,group:"tablecolumn",command:"columnDelete",order:15}});e.contextMenu&&e.contextMenu.addListener(function(a,b,c){return(a=c.contains({td:1,th:1},1))&&!a.isReadOnly()?{tablecell:CKEDITOR.TRISTATE_OFF,tablerow:CKEDITOR.TRISTATE_OFF,tablecolumn:CKEDITOR.TRISTATE_OFF}:null})},getSelectedCells:t};
CKEDITOR.plugins.add("tabletools",CKEDITOR.plugins.tabletools)})();CKEDITOR.tools.buildTableMap=function(t){t=t.$.rows;for(var p=-1,u=[],v=0;v<t.length;v++){p++;!u[p]&&(u[p]=[]);for(var m=-1,y=0;y<t[v].cells.length;y++){var x=t[v].cells[y];for(m++;u[p][m];)m++;for(var q=isNaN(x.colSpan)?1:x.colSpan,x=isNaN(x.rowSpan)?1:x.rowSpan,z=0;z<x;z++){u[p+z]||(u[p+z]=[]);for(var w=0;w<q;w++)u[p+z][m+w]=t[v].cells[y]}m+=q-1}}return u};(function(){var g=[CKEDITOR.CTRL+90,CKEDITOR.CTRL+89,CKEDITOR.CTRL+CKEDITOR.SHIFT+90],n={8:1,46:1};CKEDITOR.plugins.add("undo",{init:function(a){function b(a){d.enabled&&!1!==a.data.command.canUndo&&d.save()}function c(){d.enabled=a.readOnly?!1:"wysiwyg"==a.mode;d.onChange()}var d=a.undoManager=new e(a),l=d.editingHandler=new k(d),f=a.addCommand("undo",{exec:function(){d.undo()&&(a.selectionChange(),this.fire("afterUndo"))},startDisabled:!0,canUndo:!1}),h=a.addCommand("redo",{exec:function(){d.redo()&&
(a.selectionChange(),this.fire("afterRedo"))},startDisabled:!0,canUndo:!1});a.setKeystroke([[g[0],"undo"],[g[1],"redo"],[g[2],"redo"]]);d.onChange=function(){f.setState(d.undoable()?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED);h.setState(d.redoable()?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED)};a.on("beforeCommandExec",b);a.on("afterCommandExec",b);a.on("saveSnapshot",function(a){d.save(a.data&&a.data.contentOnly)});a.on("contentDom",l.attachListeners,l);a.on("instanceReady",function(){a.fire("saveSnapshot")});
a.on("beforeModeUnload",function(){"wysiwyg"==a.mode&&d.save(!0)});a.on("mode",c);a.on("readOnly",c);a.ui.addButton&&(a.ui.addButton("Undo",{label:a.lang.undo.undo,command:"undo",toolbar:"undo,10"}),a.ui.addButton("Redo",{label:a.lang.undo.redo,command:"redo",toolbar:"undo,20"}));a.resetUndo=function(){d.reset();a.fire("saveSnapshot")};a.on("updateSnapshot",function(){d.currentImage&&d.update()});a.on("lockSnapshot",function(a){a=a.data;d.lock(a&&a.dontUpdate,a&&a.forceUpdate)});a.on("unlockSnapshot",
d.unlock,d)}});CKEDITOR.plugins.undo={};var e=CKEDITOR.plugins.undo.UndoManager=function(a){this.strokesRecorded=[0,0];this.locked=null;this.previousKeyGroup=-1;this.limit=a.config.undoStackSize||20;this.strokesLimit=25;this.editor=a;this.reset()};e.prototype={type:function(a,b){var c=e.getKeyGroup(a),d=this.strokesRecorded[c]+1;b=b||d>=this.strokesLimit;this.typing||(this.hasUndo=this.typing=!0,this.hasRedo=!1,this.onChange());b?(d=0,this.editor.fire("saveSnapshot")):this.editor.fire("change");this.strokesRecorded[c]=
d;this.previousKeyGroup=c},keyGroupChanged:function(a){return e.getKeyGroup(a)!=this.previousKeyGroup},reset:function(){this.snapshots=[];this.index=-1;this.currentImage=null;this.hasRedo=this.hasUndo=!1;this.locked=null;this.resetType()},resetType:function(){this.strokesRecorded=[0,0];this.typing=!1;this.previousKeyGroup=-1},refreshState:function(){this.hasUndo=!!this.getNextImage(!0);this.hasRedo=!!this.getNextImage(!1);this.resetType();this.onChange()},save:function(a,b,c){var d=this.editor;if(this.locked||
"ready"!=d.status||"wysiwyg"!=d.mode)return!1;var e=d.editable();if(!e||"ready"!=e.status)return!1;e=this.snapshots;b||(b=new f(d));if(!1===b.contents)return!1;if(this.currentImage)if(b.equalsContent(this.currentImage)){if(a||b.equalsSelection(this.currentImage))return!1}else!1!==c&&d.fire("change");e.splice(this.index+1,e.length-this.index-1);e.length==this.limit&&e.shift();this.index=e.push(b)-1;this.currentImage=b;!1!==c&&this.refreshState();return!0},restoreImage:function(a){var b=this.editor,
c;a.bookmarks&&(b.focus(),c=b.getSelection());this.locked={level:999};this.editor.loadSnapshot(a.contents);a.bookmarks?c.selectBookmarks(a.bookmarks):CKEDITOR.env.ie&&(c=this.editor.document.getBody().$.createTextRange(),c.collapse(!0),c.select());this.locked=null;this.index=a.index;this.currentImage=this.snapshots[this.index];this.update();this.refreshState();b.fire("change")},getNextImage:function(a){var b=this.snapshots,c=this.currentImage,d;if(c)if(a)for(d=this.index-1;0<=d;d--){if(a=b[d],!c.equalsContent(a))return a.index=
d,a}else for(d=this.index+1;d<b.length;d++)if(a=b[d],!c.equalsContent(a))return a.index=d,a;return null},redoable:function(){return this.enabled&&this.hasRedo},undoable:function(){return this.enabled&&this.hasUndo},undo:function(){if(this.undoable()){this.save(!0);var a=this.getNextImage(!0);if(a)return this.restoreImage(a),!0}return!1},redo:function(){if(this.redoable()&&(this.save(!0),this.redoable())){var a=this.getNextImage(!1);if(a)return this.restoreImage(a),!0}return!1},update:function(a){if(!this.locked){a||
(a=new f(this.editor));for(var b=this.index,c=this.snapshots;0<b&&this.currentImage.equalsContent(c[b-1]);)--b;c.splice(b,this.index-b+1,a);this.index=b;this.currentImage=a}},updateSelection:function(a){if(!this.snapshots.length)return!1;var b=this.snapshots,c=b[b.length-1];return c.equalsContent(a)&&!c.equalsSelection(a)?(this.currentImage=b[b.length-1]=a,!0):!1},lock:function(a,b){if(this.locked)this.locked.level++;else if(a)this.locked={level:1};else{var c=null;if(b)c=!0;else{var d=new f(this.editor,
!0);this.currentImage&&this.currentImage.equalsContent(d)&&(c=d)}this.locked={update:c,level:1}}},unlock:function(){if(this.locked&&!--this.locked.level){var a=this.locked.update;this.locked=null;if(!0===a)this.update();else if(a){var b=new f(this.editor,!0);a.equalsContent(b)||this.update()}}}};e.navigationKeyCodes={37:1,38:1,39:1,40:1,36:1,35:1,33:1,34:1};e.keyGroups={PRINTABLE:0,FUNCTIONAL:1};e.isNavigationKey=function(a){return!!e.navigationKeyCodes[a]};e.getKeyGroup=function(a){var b=e.keyGroups;
return n[a]?b.FUNCTIONAL:b.PRINTABLE};e.getOppositeKeyGroup=function(a){var b=e.keyGroups;return a==b.FUNCTIONAL?b.PRINTABLE:b.FUNCTIONAL};e.ieFunctionalKeysBug=function(a){return CKEDITOR.env.ie&&e.getKeyGroup(a)==e.keyGroups.FUNCTIONAL};var f=CKEDITOR.plugins.undo.Image=function(a,b){this.editor=a;a.fire("beforeUndoImage");var c=a.getSnapshot();CKEDITOR.env.ie&&c&&(c=c.replace(/\s+data-cke-expando=".*?"/g,""));this.contents=c;b||(this.bookmarks=(c=c&&a.getSelection())&&c.createBookmarks2(!0));a.fire("afterUndoImage")},
h=/\b(?:href|src|name)="[^"]*?"/gi;f.prototype={equalsContent:function(a){var b=this.contents;a=a.contents;CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.quirks)&&(b=b.replace(h,""),a=a.replace(h,""));return b!=a?!1:!0},equalsSelection:function(a){var b=this.bookmarks;a=a.bookmarks;if(b||a){if(!b||!a||b.length!=a.length)return!1;for(var c=0;c<b.length;c++){var d=b[c],e=a[c];if(d.startOffset!=e.startOffset||d.endOffset!=e.endOffset||!CKEDITOR.tools.arrayCompare(d.start,e.start)||!CKEDITOR.tools.arrayCompare(d.end,
e.end))return!1}}return!0}};var k=CKEDITOR.plugins.undo.NativeEditingHandler=function(a){this.undoManager=a;this.ignoreInputEvent=!1;this.keyEventsStack=new m;this.lastKeydownImage=null};k.prototype={onKeydown:function(a){var b=a.data.getKey();if(229!==b)if(-1<CKEDITOR.tools.indexOf(g,a.data.getKeystroke()))a.data.preventDefault();else if(this.keyEventsStack.cleanUp(a),a=this.undoManager,this.keyEventsStack.getLast(b)||this.keyEventsStack.push(b),this.lastKeydownImage=new f(a.editor),e.isNavigationKey(b)||
this.undoManager.keyGroupChanged(b))if(a.strokesRecorded[0]||a.strokesRecorded[1])a.save(!1,this.lastKeydownImage,!1),a.resetType()},onInput:function(){if(this.ignoreInputEvent)this.ignoreInputEvent=!1;else{var a=this.keyEventsStack.getLast();a||(a=this.keyEventsStack.push(0));this.keyEventsStack.increment(a.keyCode);this.keyEventsStack.getTotalInputs()>=this.undoManager.strokesLimit&&(this.undoManager.type(a.keyCode,!0),this.keyEventsStack.resetInputs())}},onKeyup:function(a){var b=this.undoManager;
a=a.data.getKey();var c=this.keyEventsStack.getTotalInputs();this.keyEventsStack.remove(a);if(!(e.ieFunctionalKeysBug(a)&&this.lastKeydownImage&&this.lastKeydownImage.equalsContent(new f(b.editor,!0))))if(0<c)b.type(a);else if(e.isNavigationKey(a))this.onNavigationKey(!0)},onNavigationKey:function(a){var b=this.undoManager;!a&&b.save(!0,null,!1)||b.updateSelection(new f(b.editor));b.resetType()},ignoreInputEventListener:function(){this.ignoreInputEvent=!0},attachListeners:function(){var a=this.undoManager.editor,
b=a.editable(),c=this;b.attachListener(b,"keydown",function(a){c.onKeydown(a);if(e.ieFunctionalKeysBug(a.data.getKey()))c.onInput()},null,null,999);b.attachListener(b,CKEDITOR.env.ie?"keypress":"input",c.onInput,c,null,999);b.attachListener(b,"keyup",c.onKeyup,c,null,999);b.attachListener(b,"paste",c.ignoreInputEventListener,c,null,999);b.attachListener(b,"drop",c.ignoreInputEventListener,c,null,999);b.attachListener(b.isInline()?b:a.document.getDocumentElement(),"click",function(){c.onNavigationKey()},
null,null,999);b.attachListener(this.undoManager.editor,"blur",function(){c.keyEventsStack.remove(9)},null,null,999)}};var m=CKEDITOR.plugins.undo.KeyEventsStack=function(){this.stack=[]};m.prototype={push:function(a){a=this.stack.push({keyCode:a,inputs:0});return this.stack[a-1]},getLastIndex:function(a){if("number"!=typeof a)return this.stack.length-1;for(var b=this.stack.length;b--;)if(this.stack[b].keyCode==a)return b;return-1},getLast:function(a){a=this.getLastIndex(a);return-1!=a?this.stack[a]:
null},increment:function(a){this.getLast(a).inputs++},remove:function(a){a=this.getLastIndex(a);-1!=a&&this.stack.splice(a,1)},resetInputs:function(a){if("number"==typeof a)this.getLast(a).inputs=0;else for(a=this.stack.length;a--;)this.stack[a].inputs=0},getTotalInputs:function(){for(var a=this.stack.length,b=0;a--;)b+=this.stack[a].inputs;return b},cleanUp:function(a){a=a.data.$;a.ctrlKey||a.metaKey||this.remove(17);a.shiftKey||this.remove(16);a.altKey||this.remove(18)}}})();CKEDITOR.plugins.add("wsc",{requires:"dialog",parseApi:function(a){a.config.wsc_onFinish="function"===typeof a.config.wsc_onFinish?a.config.wsc_onFinish:function(){};a.config.wsc_onClose="function"===typeof a.config.wsc_onClose?a.config.wsc_onClose:function(){}},parseConfig:function(a){a.config.wsc_customerId=a.config.wsc_customerId||CKEDITOR.config.wsc_customerId||"1:ua3xw1-2XyGJ3-GWruD3-6OFNT1-oXcuB1-nR6Bp4-hgQHc-EcYng3-sdRXG3-NOfFk";a.config.wsc_customDictionaryIds=a.config.wsc_customDictionaryIds||
CKEDITOR.config.wsc_customDictionaryIds||"";a.config.wsc_userDictionaryName=a.config.wsc_userDictionaryName||CKEDITOR.config.wsc_userDictionaryName||"";a.config.wsc_customLoaderScript=a.config.wsc_customLoaderScript||CKEDITOR.config.wsc_customLoaderScript;CKEDITOR.config.wsc_cmd=a.config.wsc_cmd||CKEDITOR.config.wsc_cmd||"spell";CKEDITOR.config.wsc_version="v4.3.0-master-d769233";CKEDITOR.config.wsc_removeGlobalVariable=!0},init:function(a){var b=CKEDITOR.env;this.parseConfig(a);this.parseApi(a);
a.addCommand("checkspell",new CKEDITOR.dialogCommand("checkspell")).modes={wysiwyg:!CKEDITOR.env.opera&&!CKEDITOR.env.air&&document.domain==window.location.hostname&&!(b.ie&&(8>b.version||b.quirks))};"undefined"==typeof a.plugins.scayt&&a.ui.addButton&&a.ui.addButton("SpellChecker",{label:a.lang.wsc.toolbar,click:function(a){var b=a.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?a.container.getText():a.document.getBody().getText();(b=b.replace(/\s/g,""))?a.execCommand("checkspell"):alert("Nothing to check!")},
toolbar:"spellchecker,10"});CKEDITOR.dialog.add("checkspell",this.path+(CKEDITOR.env.ie&&7>=CKEDITOR.env.version?"dialogs/wsc_ie.js":window.postMessage?"dialogs/wsc.js":"dialogs/wsc_ie.js"))}});CKEDITOR.config.plugins='dialogui,dialog,about,a11yhelp,dialogadvtab,basicstyles,bidi,blockquote,clipboard,button,panelbutton,panel,floatpanel,colorbutton,colordialog,templates,menu,contextmenu,div,resize,toolbar,elementspath,enterkey,entities,popup,filebrowser,find,fakeobjects,flash,floatingspace,listblock,richcombo,font,forms,format,horizontalrule,htmlwriter,iframe,wysiwygarea,image,indent,indentblock,indentlist,smiley,justify,menubutton,language,link,list,liststyle,magicline,maximize,newpage,pagebreak,pastetext,pastefromword,preview,print,removeformat,save,selectall,showblocks,showborders,sourcearea,specialchar,scayt,stylescombo,tab,table,tabletools,undo,wsc';CKEDITOR.config.skin='moono';(function() {var setIcons = function(icons, strip) {var path = CKEDITOR.getUrl( 'plugins/' + strip );icons = icons.split( ',' );for ( var i = 0; i < icons.length; i++ )CKEDITOR.skin.icons[ icons[ i ] ] = { path: path, offset: -icons[ ++i ], bgsize : icons[ ++i ] };};if (CKEDITOR.env.hidpi) setIcons('about,0,,bold,24,,italic,48,,strike,72,,subscript,96,,superscript,120,,underline,144,,bidiltr,168,,bidirtl,192,,blockquote,216,,copy-rtl,240,,copy,264,,cut-rtl,288,,cut,312,,paste-rtl,336,,paste,360,,bgcolor,384,,textcolor,408,,templates-rtl,432,,templates,456,,creatediv,480,,find-rtl,504,,find,528,,replace,552,,flash,576,,button,600,,checkbox,624,,form,648,,hiddenfield,672,,imagebutton,696,,radio,720,,select-rtl,744,,select,768,,textarea-rtl,792,,textarea,816,,textfield-rtl,840,,textfield,864,,horizontalrule,888,,iframe,912,,image,936,,indent-rtl,960,,indent,984,,outdent-rtl,1008,,outdent,1032,,smiley,1056,,justifyblock,1080,,justifycenter,1104,,justifyleft,1128,,justifyright,1152,,language,1176,,anchor-rtl,1200,,anchor,1224,,link,1248,,unlink,1272,,bulletedlist-rtl,1296,,bulletedlist,1320,,numberedlist-rtl,1344,,numberedlist,1368,,maximize,1392,,newpage-rtl,1416,,newpage,1440,,pagebreak-rtl,1464,,pagebreak,1488,,pastetext-rtl,1512,,pastetext,1536,,pastefromword-rtl,1560,,pastefromword,1584,,preview-rtl,1608,,preview,1632,,print,1656,,removeformat,1680,,save,1704,,selectall,1728,,showblocks-rtl,1752,,showblocks,1776,,source-rtl,1800,,source,1824,,specialchar,1848,,scayt,1872,,table,1896,,redo-rtl,1920,,redo,1944,,undo-rtl,1968,,undo,1992,,spellchecker,2016,','icons_hidpi.png');else setIcons('about,0,auto,bold,24,auto,italic,48,auto,strike,72,auto,subscript,96,auto,superscript,120,auto,underline,144,auto,bidiltr,168,auto,bidirtl,192,auto,blockquote,216,auto,copy-rtl,240,auto,copy,264,auto,cut-rtl,288,auto,cut,312,auto,paste-rtl,336,auto,paste,360,auto,bgcolor,384,auto,textcolor,408,auto,templates-rtl,432,auto,templates,456,auto,creatediv,480,auto,find-rtl,504,auto,find,528,auto,replace,552,auto,flash,576,auto,button,600,auto,checkbox,624,auto,form,648,auto,hiddenfield,672,auto,imagebutton,696,auto,radio,720,auto,select-rtl,744,auto,select,768,auto,textarea-rtl,792,auto,textarea,816,auto,textfield-rtl,840,auto,textfield,864,auto,horizontalrule,888,auto,iframe,912,auto,image,936,auto,indent-rtl,960,auto,indent,984,auto,outdent-rtl,1008,auto,outdent,1032,auto,smiley,1056,auto,justifyblock,1080,auto,justifycenter,1104,auto,justifyleft,1128,auto,justifyright,1152,auto,language,1176,auto,anchor-rtl,1200,auto,anchor,1224,auto,link,1248,auto,unlink,1272,auto,bulletedlist-rtl,1296,auto,bulletedlist,1320,auto,numberedlist-rtl,1344,auto,numberedlist,1368,auto,maximize,1392,auto,newpage-rtl,1416,auto,newpage,1440,auto,pagebreak-rtl,1464,auto,pagebreak,1488,auto,pastetext-rtl,1512,auto,pastetext,1536,auto,pastefromword-rtl,1560,auto,pastefromword,1584,auto,preview-rtl,1608,auto,preview,1632,auto,print,1656,auto,removeformat,1680,auto,save,1704,auto,selectall,1728,auto,showblocks-rtl,1752,auto,showblocks,1776,auto,source-rtl,1800,auto,source,1824,auto,specialchar,1848,auto,scayt,1872,auto,table,1896,auto,redo-rtl,1920,auto,redo,1944,auto,undo-rtl,1968,auto,undo,1992,auto,spellchecker,2016,auto','icons.png');})();CKEDITOR.lang.languages={"af":1,"sq":1,"ar":1,"eu":1,"bn":1,"bs":1,"bg":1,"ca":1,"zh-cn":1,"zh":1,"hr":1,"cs":1,"da":1,"nl":1,"en":1,"en-au":1,"en-ca":1,"en-gb":1,"eo":1,"et":1,"fo":1,"fi":1,"fr":1,"fr-ca":1,"gl":1,"ka":1,"de":1,"de-ch":1,"el":1,"gu":1,"he":1,"hi":1,"hu":1,"is":1,"id":1,"it":1,"ja":1,"km":1,"ko":1,"ku":1,"lv":1,"lt":1,"mk":1,"ms":1,"mn":1,"no":1,"nb":1,"fa":1,"pl":1,"pt-br":1,"pt":1,"ro":1,"ru":1,"sr":1,"sr-latn":1,"si":1,"sk":1,"sl":1,"es":1,"sv":1,"tt":1,"th":1,"tr":1,"ug":1,"uk":1,"vi":1,"cy":1};}());
// http://docs.ckeditor.com/#!/guide/dev_allowed_content_rules

_.namespace('DK.CKE');

(function () {

  // Whitelist
  DK.CKE.allowedContent = {
    '*': {
      'styles':
        'indent-*,text-align'
    },

    'a': {
      'classes':
        'live-update-link',
      'attributes':
        'href,target,name'
    },

    'blockquote': {
      'classes':
        'twitter-tweet,instagram-media',
      'attributes':
        'data-instgrm-captioned, data-instgrm-version, data-instgrm-permalink'
    },

    'div': {
      'classes':
        'dk-editor-embed,embed-responsive,facebook-embed-responsive,embed-responsive-16by9,embed-responsive-4by3,table-wrapper,campaign-embed,sr-only,center-block,cke_widget_element,remove-embed-content,cke_widget_wrapper,cke_widget_block,align-left,align-center,align-right,align-justify,live-update-wrapper,live-update-content, table-widget-wrapper',
      'attributes':
        'data*,dir,lang'
    },

    'span': {
      'classes':
        'cke_image_resizer,sr-only,live-update-user,timestamp',
      'attributes':
        'data*,title'
    },

    'hr': {
      'classes':
        '*'
    },

    'figure': {
      'classes':
        'image-captioned,width-sm,width-md,width-lg,cke_widget_element,align-left,align-center,align-right,align-justify',
      'attributes':
        'data*',
      'styles':
        'float,display'
    },

    'figcaption': {
      'classes':
        'cke_widget_editable,align-left,align-center,align-right,align-justify',
      'attributes':
        'data*,display-name',
      'styles':
        'float,display'
    },

    'iframe': {
      'classes':
        'dk-embed-google-doc-style-*,dk-embed-google-sheet-style-*,dk-embed-google-presentation-style-*,dk-embed-huffpollster',
      'attributes':
        'frameborder,height'
    },

    'img': {
      'classes':
        'dk-pagebreak,align-left,align-center,align-right,align-justify',
      'attributes':
        '!src,alt,title,width,height',
      'styles':
        'float,display'
    },

    'h2 h3 h4 p': {
      'classes':
        'AlignLeft,AlignCenter,AlignRight,AlignJustify',
      'styles':
        'text-align'
    },

    'table': {
      'classes':
        'dk5-table,basic-table',
      'attributes':
        'width,height,dir,cellspacing,cellpadding,align',
      'styles':
        'border,text-align'
    },

    'time': {
      'classes': '*',
      'attributes': '*'
    },

    'footer': {
      'classes': '*',
      'attributes': '*'
    },

    'tr th td': {
      'classes':
        'AlignLeft,AlignCenter,AlignRight,AlignJustify',
      'attributes':
        'valign,dir,colspan,rowspan,align',
      'styles':
        'width,height,padding,border,border-color,background-color,background,font-weight,font-size,color,cell-spacing,cell-padding,text-align,vertical-align'
    },

    'option p img div h1 h2 h3 h4 input form span a select textarea ul li label strong': {
      'match': actionNetworkElements,
      'classes':
        '*',
      'attributes':
        '*',
      'styles':
        '*'
    },

    's u strong em del ins caption br tbody thead tfoot sub sup tt ol ul li pre':
      true
  };


  // Blacklist
  DK.CKE.disallowedContent = {

  };


  // Match Helpers
  function actionNetworkElements (el) {
    if (!el.getAscendant) return;

    return isActionEmbed(el) || el.getAscendant(isActionEmbed);
  }

  function isActionEmbed (el) {
    if (!el)                  return;
    if (!el.attributes)       return;
    if (!el.attributes.class) return;

    return el.attributes.class.match(/dk-action-embed|dk-editor-embed|can_embed/i);
  }

})();
// Unminified CKEditor Adapter for jQuery.
// https://github.com/ckeditor/ckeditor-dev/blob/cc24dbe429e8c720aef24a269fc1cba23fe783a7/adapters/jquery.js

/**
 * @license Copyright (c) 2003-2015, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or http://ckeditor.com/license
 */

/**
 * @fileOverview Defines the {@link CKEDITOR_Adapters.jQuery jQuery Adapter}.
 */

/**
 * @class CKEDITOR_Adapters.jQuery
 * @singleton
 *
 * The jQuery Adapter allows for easy use of basic CKEditor functions and access to the internal API.
 * To find more information about the jQuery Adapter, go to the [jQuery Adapter section](#!/guide/dev_jquery)
 * of the Developer's Guide or see the "Create Editors with jQuery" sample.
 *
 * @aside guide dev_jquery
 */

( function( $ ) {
  /**
   * Allows CKEditor to override `jQuery.fn.val()`. When set to `true`, the `val()` function
   * used on textarea elements replaced with CKEditor uses the CKEditor API.
   *
   * This configuration option is global and is executed during the loading of the jQuery Adapter.
   * It cannot be customized across editor instances.
   *
   *    <script>
   *      CKEDITOR.config.jqueryOverrideVal = true;
   *    </script>
   *
   *    <!-- Important: The jQuery Adapter is loaded *after* setting jqueryOverrideVal. -->
   *    <script src="/ckeditor/adapters/jquery.js"></script>
   *
   *    <script>
   *      $( 'textarea' ).ckeditor();
   *      // ...
   *      $( 'textarea' ).val( 'New content' );
   *    </script>
   *
   * @cfg {Boolean} [jqueryOverrideVal=true]
   * @member CKEDITOR.config
   */
  CKEDITOR.config.jqueryOverrideVal = typeof CKEDITOR.config.jqueryOverrideVal == 'undefined'  ?
        true
      :
        CKEDITOR.config.jqueryOverrideVal;

  if ( typeof $ == 'undefined' )
    return;

  // jQuery object methods.
  $.extend( $.fn, {
    /**
     * Returns an existing CKEditor instance for the first matched element.
     * Allows to easily use the internal API. Does not return a jQuery object.
     *
     * Raises an exception if the editor does not exist or is not ready yet.
     *
     * @returns CKEDITOR.editor
     * @deprecated Use {@link #editor editor property} instead.
     */
    ckeditorGet: function() {
      var instance = this.eq( 0 ).data( 'ckeditorInstance' );

      if ( !instance )
        throw 'CKEditor is not initialized yet, use ckeditor() with a callback.';

      return instance;
    },

    /**
     * A jQuery function which triggers the creation of CKEditor with `<textarea>` and
     * {@link CKEDITOR.dtd#$editable editable} elements.
     * Every `<textarea>` element will be converted to a classic (`iframe`-based) editor,
     * while any other supported element will be converted to an inline editor.
     * This method binds the callback to the `instanceReady` event of all instances.
     * If the editor has already been created, the callback is fired straightaway.
     * You can also create multiple editors at once by using `$( '.className' ).ckeditor();`.
     *
     * **Note**: jQuery chaining and mixed parameter order is allowed.
     *
     * @param {Function} callback
     * Function to be run on the editor instance. Callback takes the source element as a parameter.
     *
     *    $( 'textarea' ).ckeditor( function( textarea ) {
     *      // Callback function code.
     *    } );
     *
     * @param {Object} config
     * Configuration options for new instance(s) if not already created.
     *
     *    $( 'textarea' ).ckeditor( {
     *      uiColor: '#9AB8F3'
     *    } );
     *
     * @returns jQuery.fn
     */
    ckeditor: function( callback, config ) {
      if ( !CKEDITOR.env.isCompatible )
        throw new Error( 'The environment is incompatible.' );

      // Reverse the order of arguments if the first one isn't a function.
      if ( !$.isFunction( callback ) ) {
        var tmp = config;
        config = callback;
        callback = tmp;
      }

      // An array of instanceReady callback promises.
      var promises = [];

      config = config || {};

      // Iterate over the collection.
      this.each( function() {
        var $element = $( this ),
          editor = $element.data( 'ckeditorInstance' ),
          instanceLock = $element.data( '_ckeditorInstanceLock' ),
          element = this,
          dfd = new $.Deferred();

        promises.push( dfd.promise() );

        if ( editor && !instanceLock ) {
          if ( callback )
            callback.apply( editor, [ this ] );

          dfd.resolve();
        } else if ( !instanceLock ) {
          // CREATE NEW INSTANCE

          // Handle config.autoUpdateElement inside this plugin if desired.
          if ( config.autoUpdateElement || ( typeof config.autoUpdateElement == 'undefined' && CKEDITOR.config.autoUpdateElement ) ) {
            config.autoUpdateElementJquery = true;
          }

          // Always disable config.autoUpdateElement.
          config.autoUpdateElement = false;
          $element.data( '_ckeditorInstanceLock', true );

          // Set instance reference in element's data.
          if ( $( this ).is( 'textarea' ) )
            editor = CKEDITOR.replace( element, config );
          else
            editor = CKEDITOR.inline( element, config );

          $element.data( 'ckeditorInstance', editor );

          // Register callback.
          editor.on( 'instanceReady', function( evt ) {
            var editor = evt.editor;

            setTimeout( function() {
              // Delay bit more if editor is still not ready.
              if ( !editor.element ) {
                setTimeout( arguments.callee, 100 );
                return;
              }

              // Remove this listener. Triggered when new instance is ready.
              evt.removeListener();

              /**
               * Forwards the CKEditor {@link CKEDITOR.editor#event-dataReady dataReady event} as a jQuery event.
               *
               * @event dataReady
               * @param {CKEDITOR.editor} editor Editor instance.
               */
              editor.on( 'dataReady', function() {
                $element.trigger( 'dataReady.ckeditor', [ editor ] );
              } );

              /**
               * Forwards the CKEditor {@link CKEDITOR.editor#event-setData setData event} as a jQuery event.
               *
               * @event setData
               * @param {CKEDITOR.editor} editor Editor instance.
               * @param data
               * @param {String} data.dataValue The data that will be used.
               */
              editor.on( 'setData', function( evt ) {
                $element.trigger( 'setData.ckeditor', [ editor, evt.data ] );
              } );

              /**
               * Forwards the CKEditor {@link CKEDITOR.editor#event-getData getData event} as a jQuery event.
               *
               * @event getData
               * @param {CKEDITOR.editor} editor Editor instance.
               * @param data
               * @param {String} data.dataValue The data that will be returned.
               */
              editor.on( 'getData', function( evt ) {
                $element.trigger( 'getData.ckeditor', [ editor, evt.data ] );
              }, 999 );

              /**
               * Forwards the CKEditor {@link CKEDITOR.editor#event-destroy destroy event} as a jQuery event.
               *
               * @event destroy
               * @param {CKEDITOR.editor} editor Editor instance.
               */
              editor.on( 'destroy', function() {
                $element.trigger( 'destroy.ckeditor', [ editor ] );
              } );

              // Overwrite save button to call jQuery submit instead of javascript submit.
              // Otherwise jQuery.forms does not work properly
              editor.on( 'save', function() {
                $( element.form ).submit();
                return false;
              }, null, null, 20 );

              // Integrate with form submit.
              if ( editor.config.autoUpdateElementJquery && $element.is( 'textarea' ) && $( element.form ).length ) {
                var onSubmit = function() {
                  $element.ckeditor( function() {
                    editor.updateElement();
                  } );
                };

                // Bind to submit event.
                $( element.form ).submit( onSubmit );

                // Bind to form-pre-serialize from jQuery Forms plugin.
                $( element.form ).bind( 'form-pre-serialize', onSubmit );

                // Unbind when editor destroyed.
                $element.bind( 'destroy.ckeditor', function() {
                  $( element.form ).unbind( 'submit', onSubmit );
                  $( element.form ).unbind( 'form-pre-serialize', onSubmit );
                } );
              }

              // Garbage collect on destroy.
              editor.on( 'destroy', function() {
                $element.removeData( 'ckeditorInstance' );
              } );

              // Remove lock.
              $element.removeData( '_ckeditorInstanceLock' );

              /**
               * Forwards the CKEditor {@link CKEDITOR.editor#event-instanceReady instanceReady event} as a jQuery event.
               *
               * @event instanceReady
               * @param {CKEDITOR.editor} editor Editor instance.
               */
              $element.trigger( 'instanceReady.ckeditor', [ editor ] );

              // Run given (first) code.
              if ( callback )
                callback.apply( editor, [ element ] );

              dfd.resolve();
            }, 0 );
          }, null, null, 9999 );
        } else {
          // Editor is already during creation process, bind our code to the event.
          editor.once( 'instanceReady', function() {
            setTimeout( function() {
              // Delay bit more if editor is still not ready.
              if ( !editor.element ) {
                setTimeout( arguments.callee, 100 );
                return;
              }

              // Run given code.
              if ( editor.element.$ == element && callback )
                callback.apply( editor, [ element ] );

              dfd.resolve();
            }, 0 );
          }, null, null, 9999 );
        }
      } );

      /**
       * The [jQuery Promise object]((http://api.jquery.com/promise/)) that handles the asynchronous constructor.
       * This promise will be resolved after **all** of the constructors.
       *
       * @property {Function} promise
       */
      var dfd = new $.Deferred();

      this.promise = dfd.promise();

      $.when.apply( this, promises ).then( function() {
        dfd.resolve();
      } );

      /**
       * Existing CKEditor instance. Allows to easily use the internal API.
       *
       * **Note**: This is not a jQuery object.
       *
       *    var editor = $( 'textarea' ).ckeditor().editor;
       *
       * @property {CKEDITOR.editor} editor
       */
      this.editor = this.eq( 0 ).data( 'ckeditorInstance' );

      return this;
    }
  } );

  /**
   * Overwritten jQuery `val()` method for `<textarea>` elements that have bound CKEditor instances.
   * This method gets or sets editor content by using the {@link CKEDITOR.editor#method-getData editor.getData()}
   * or {@link CKEDITOR.editor#method-setData editor.setData()} methods. To handle
   * the {@link CKEDITOR.editor#method-setData editor.setData()} callback (as `setData` is asynchronous),
   * `val( 'some data' )` will return a [jQuery Promise object](http://api.jquery.com/promise/).
   *
   * @method val
   * @returns String|Number|Array|jQuery.fn|function(jQuery Promise)
   */
  if ( CKEDITOR.config.jqueryOverrideVal ) {
    $.fn.val = CKEDITOR.tools.override( $.fn.val, function( oldValMethod ) {
      return function( value ) {
        // Setter, i.e. .val( "some data" );
        if ( arguments.length ) {
          var _this = this,
            promises = [], //use promise to handle setData callback

            result = this.each( function() {
              var $elem = $( this ),
                editor = $elem.data( 'ckeditorInstance' );

              // Handle .val for CKEditor.
              if ( $elem.is( 'textarea' ) && editor ) {
                var dfd = new $.Deferred();

                editor.setData( value, function() {
                  dfd.resolve();
                } );

                promises.push( dfd.promise() );
                return true;
                // Call default .val function for rest of elements
              } else {
                return oldValMethod.call( $elem, value );
              }
            } );

          // If there is no promise return default result (jQuery object of chaining).
          if ( !promises.length )
            return result;
          // Create one promise which will be resolved when all of promises will be done.
          else {
            var dfd = new $.Deferred();

            $.when.apply( this, promises ).done( function() {
              dfd.resolveWith( _this );
            } );

            return dfd.promise();
          }
        }
        // Getter .val();
        else {
          var $elem = $( this ).eq( 0 ),
            editor = $elem.data( 'ckeditorInstance' );

          if ( $elem.is( 'textarea' ) && editor )
            return editor.getData();
          else
            return oldValMethod.call( $elem );
        }
      };
    } );
  }
} )( window.jQuery );
(function(){function k(b,a){s[b]||(typeof console!=="undefined"&&typeof console.warn=="function"&&console.warn("[WARNING] "+b+" is deprecated and will be removed in version 1.0. Instead, use `"+a+"`."),s[b]=!0)}function t(b){b.localize=i.localize.bind(i);b.timezone=i.timezone.bind(i);b.utc=i.utc.bind(i)}function r(b,a,e){a&&a.days&&(e=a,a=void 0);e&&k("`"+g+"(format, [date], [locale])`","var s = "+g+".localize(locale); s(format, [date])");return(e?i.localize(e):i)(b,a)}function u(b,a,e){e?k("`"+g+
".strftime(format, [date], [locale])`","var s = "+g+".localize(locale); s(format, [date])"):k("`"+g+".strftime(format, [date])`",g+"(format, [date])");return(e?i.localize(e):i)(b,a)}function p(b,a,e){function g(b,c,h,a){for(var d="",f=null,e=!1,i=b.length,j=!1,o=0;o<i;o++){var n=b.charCodeAt(o);if(e===!0)if(n===45)f="";else if(n===95)f=" ";else if(n===48)f="0";else if(n===58)j&&typeof console!=="undefined"&&typeof console.warn=="function"&&console.warn("[WARNING] detected use of unsupported %:: or %::: modifiers to strftime"),
j=!0;else{switch(n){case 65:d+=h.days[c.getDay()];break;case 66:d+=h.months[c.getMonth()];break;case 67:d+=l(Math.floor(c.getFullYear()/100),f);break;case 68:d+=g(h.formats.D,c,h,a);break;case 70:d+=g(h.formats.F,c,h,a);break;case 72:d+=l(c.getHours(),f);break;case 73:d+=l(v(c.getHours()),f);break;case 76:d+=Math.floor(a%1E3)>99?Math.floor(a%1E3):Math.floor(a%1E3)>9?"0"+Math.floor(a%1E3):"00"+Math.floor(a%1E3);break;case 77:d+=l(c.getMinutes(),f);break;case 80:d+=c.getHours()<12?h.am:h.pm;break;case 82:d+=
g(h.formats.R,c,h,a);break;case 83:d+=l(c.getSeconds(),f);break;case 84:d+=g(h.formats.T,c,h,a);break;case 85:d+=l(w(c,"sunday"),f);break;case 87:d+=l(w(c,"monday"),f);break;case 88:d+=g(h.formats.X,c,h,a);break;case 89:d+=c.getFullYear();break;case 90:k&&m===0?d+="GMT":(f=c.toString().match(/\(([\w\s]+)\)/),d+=f&&f[1]||"");break;case 97:d+=h.shortDays[c.getDay()];break;case 98:d+=h.shortMonths[c.getMonth()];break;case 99:d+=g(h.formats.c,c,h,a);break;case 100:d+=l(c.getDate(),f);break;case 101:d+=
l(c.getDate(),f==null?" ":f);break;case 104:d+=h.shortMonths[c.getMonth()];break;case 106:f=new Date(c.getFullYear(),0,1);f=Math.ceil((c.getTime()-f.getTime())/864E5);d+=f>99?f:f>9?"0"+f:"00"+f;break;case 107:d+=l(c.getHours(),f==null?" ":f);break;case 108:d+=l(v(c.getHours()),f==null?" ":f);break;case 109:d+=l(c.getMonth()+1,f);break;case 110:d+="\n";break;case 111:d+=String(c.getDate())+A(c.getDate());break;case 112:d+=c.getHours()<12?h.AM:h.PM;break;case 114:d+=g(h.formats.r,c,h,a);break;case 115:d+=
Math.floor(a/1E3);break;case 116:d+="\t";break;case 117:f=c.getDay();d+=f===0?7:f;break;case 118:d+=g(h.formats.v,c,h,a);break;case 119:d+=c.getDay();break;case 120:d+=g(h.formats.x,c,h,a);break;case 121:d+=(""+c.getFullYear()).slice(2);break;case 122:k&&m===0?d+=j?"+00:00":"+0000":(f=m!==0?m/6E4:-c.getTimezoneOffset(),e=j?":":"",n=Math.abs(f%60),d+=(f<0?"-":"+")+l(Math.floor(Math.abs(f/60)))+e+l(n));break;default:d+=b[o]}f=null;e=!1}else n===37?e=!0:d+=b[o]}return d}var i=b||x,m=a||0,k=e||!1,j=0,
q,b=function(b,c){var a;c?(a=c.getTime(),k&&(c=new Date(c.getTime()+(c.getTimezoneOffset()||0)*6E4+m))):(a=Date.now(),a>j?(j=a,q=new Date(j),a=j,k&&(q=new Date(j+(q.getTimezoneOffset()||0)*6E4+m))):a=j,c=q);return g(b,c,i,a)};b.localize=function(a){return new p(a||i,m,k)};b.timezone=function(a){var c=m,b=k,e=typeof a;if(e==="number"||e==="string")b=!0,e==="string"?(c=a[0]==="-"?-1:1,e=parseInt(a.slice(1,3),10),a=parseInt(a.slice(3,5),10),c=c*(60*e+a)*6E4):e==="number"&&(c=a*6E4);return new p(i,c,
b)};b.utc=function(){return new p(i,m,!0)};return b}function l(b,a){if(a===""||b>9)return b;a==null&&(a="0");return a+b}function v(b){if(b===0)return 12;else if(b>12)return b-12;return b}function w(b,a){var a=a||"sunday",e=b.getDay();a==="monday"&&(e===0?e=6:e--);var g=Date.UTC(b.getFullYear(),0,1),i=Date.UTC(b.getFullYear(),b.getMonth(),b.getDate());return Math.floor((Math.floor((i-g)/864E5)+7-e)/7)}function A(b){var a=b%10;b%=100;if(b>=11&&b<=13||a===0||a>=4)return"th";switch(a){case 1:return"st";
case 2:return"nd";case 3:return"rd"}}var x={days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],AM:"AM",PM:"PM",am:"am",pm:"pm",formats:{D:"%m/%d/%y",F:"%Y-%m-%d",R:"%H:%M",T:"%H:%M:%S",X:"%T",c:"%a %b %d %X %Y",r:"%I:%M:%S %p",
v:"%e-%b-%Y",x:"%D"}},i=new p(x,0,!1),y=typeof module!=="undefined",j;y?(j=module.exports=r,j.strftime=u):(j=function(){return this||(0,eval)("this")}(),j.strftime=r);var g=y?"require('strftime')":"strftime",s={};j.strftimeTZ=function(b,a,e,j){if((typeof e=="number"||typeof e=="string")&&j==null)j=e,e=void 0;e?k("`"+g+".strftimeTZ(format, date, locale, tz)`","var s = "+g+".localize(locale).timezone(tz); s(format, [date])` or `var s = "+g+".localize(locale); s.timezone(tz)(format, [date])"):k("`"+
g+".strftimeTZ(format, date, tz)`","var s = "+g+".timezone(tz); s(format, [date])` or `"+g+".timezone(tz)(format, [date])");return(e?i.localize(e):i).timezone(j)(b,a)};j.strftimeUTC=function(b,a,e){e?k("`"+g+".strftimeUTC(format, date, locale)`","var s = "+g+".localize(locale).utc(); s(format, [date])"):k("`"+g+".strftimeUTC(format, [date])`","var s = "+g+".utc(); s(format, [date])");return(e?z.localize(e):z)(b,a)};j.localizedStrftime=function(b){k("`"+g+".localizedStrftime(locale)`",g+".localize(locale)");
return i.localize(b)};t(r);t(u);var z=i.utc();if(typeof Date.now!=="function")Date.now=function(){return+new Date}})();




(function($) {
  if(!window.DailyKos) window.DailyKos = {};

  var isTouchScreen = 'ontouchstart' in document.documentElement;

  var userNickname,
      userEmail,
      userId,
      userAvatar,
      isLoggedIn,
      userRoles,
      showsAds,
      followingUsers = [],
      followingTags = [],
      isAdminUser,
      isModerator,
      isDKOfficial,
      isTrusted,
      isDonor,
      isSubscriber,
      isPrismOfficial,
      canComment,
      canHideShowAds,
      canSubscribe,
      userBlogs,
      userBlogPerms,
      canRecStory,
      canRecComment,
      canFlagComment,
      canQueueToRescue,
      canRepublish,
      canPostToBlog,
      canHotlist,
      canBuyLifetimeSubscription,
      hideRatesRemaining,
      canEvadeImageWhitelist,
      canEvadeIframeWhitelist,
      preferAutoRefresh,
      preferHiddenComments,
      preferHiddenCommentsUntilIHide,
      preferFoldedComments,
      canViewCommentFlagData,
      canZeroRateComments,
      preferCommentNotifications,
      warnings,
      notifications,
      progressiveRollout,
      helpScoutSignature;

  var self = window.DailyKos;

  $.extend(window.DailyKos, {
    isTouchScreen: isTouchScreen,

    currentUserNickname: function() { return userNickname; },
    currentUserEmail:    function() { return userEmail; },
    currentUserRoles:    function() { return userRoles.join(', '); },
    currentUserId:       function() { return userId; },

    hasSignedInCookie:  function () { return !!$.cookie('dk4_logged_in'); },
    showsAds:           function () {
      if (! self.hasSignedInCookie()) return true;
      return !!showsAds;
    },
    helpScoutSignature: function() { return helpScoutSignature },
    isAdmin:          function() { return !!isLoggedIn && !!isAdmin; },
    isModerator:      function() { return !!isLoggedIn && !!isModerator; },
    isDKOfficial:     function() { return !!isLoggedIn && !!isDKOfficial; },
    isTrusted:        function() { return !!isLoggedIn && !!isTrusted; },
    isDonor:          function() { return !!isLoggedIn && !!isDonor; },
    isSubscriber:     function() { return !!isLoggedIn && !!isSubscriber; },
    isPrismOfficial:  function() { return !!isLoggedIn && !!isPrismOfficial; },
    isLoggedIn:       function() { return !!isLoggedIn },
    followedUsers:    function() { return followingUsers; },
    setFollowedUsers: function(list) { return followingUsers = list; },
    followedTags:     function() { return followingTags; },
    setFollowedTags:  function(list) { return followingTags = list; },
    canComment:       function() { return !!canComment },
    canHideShowAds:   function() { return !!canHideShowAds},
    canRecStory:      function() { return !!canRecStory },
    canSubscribe:     function() { return !!canSubscribe },
    canFlagComment:   function() { return !!canFlagComment },
    hideRatesRemaing: function() { return hideRatesRemaining },
    canQueueToRescue:         function() { return !!canQueueToRescue },
    canRepublish:             function() { return !!canRepublish },
    canHotlist:               function() { return !!canHotlist },
    canBuyLifetimeSubscription: function() { return !!canBuyLifetimeSubscription },
    canEvadeImageWhitelist:   function() { return !!canEvadeImageWhitelist },
    canEvadeIframeWhitelist:  function() { return !!canEvadeIframeWhitelist },
    progressiveRollout: function() {
      if(!userId) { return false; }

      return progressiveRollout >= (userId % 100);
    },
    preferCommentNotifications: function() {
      // Remove the following two lines when comment notification rollout is over
      if(canViewCommentFlagData) { return !!preferCommentNotifications; }
      if(!this.progressiveRollout())  { return false; }

      return !!preferCommentNotifications;
    },
    preferAutoRefresh:        function(val){
      if (val !== undefined) preferAutoRefresh = val;
      return preferAutoRefresh;
    },
    preferHiddenComments:     function() { return !!isLoggedIn && !!preferHiddenComments; },
    preferHiddenCommentsUntilIHide: function() { return !!isLoggedIn && !!preferHiddenCommentsUntilIHide; },
    preferFoldedComments:     function(val) {
      if (val !== undefined) preferFoldedComments = val;
      return !!isLoggedIn && !!preferFoldedComments;
    },
    canViewCommentFlagData:   function () { return !!canViewCommentFlagData },
    canZeroRateComments:      function() { return !!isLoggedIn && !!canZeroRateComments; },
    userAvatar: function() { return userAvatar },
    userBlogs:  function() { return userBlogs  },
    userBlogPerms:  function() { return userBlogPerms },
    decrementHrs:     function() {
      hideRatesRemaining = hideRatesRemaining - 1;
      return hideRatesRemaining;
    },
    canRecComment:  function(authorId) {
      if(!canRecComment)      return false; // Must be allowed to recommend comments
      if(authorId == userId)  return false; // Can't recommend your own comments

      return true;
    },
    canFlagComment: function(authorId) {
      if(!canFlagComment)     return false; // Must be allowed to recommend comments
      if(authorId == userId)  return false; // Can't recommend your own comments

      return true;
    },
    canManageQueue: function() {
      if (!userBlogPerms) { return false; }

      var frontPageBlog = userBlogPerms.find(function (blog) {
        return blog.blog_id === 1;
      });
      if (!frontPageBlog) { return false; }

      return frontPageBlog.permissions.some(function (perm) {
        return ['blog_admin', 'blog_queue', 'blog_post', 'blog_member'].includes(perm);
      });
    },
    warnings: function() {
      return warnings;
    },
    notifications: function() {
      return notifications;
    },
    setUser: function(attrs) {
      userNickname            = attrs['nickname'] || attrs['userName']  || userNickname;
      userEmail               = attrs['email']    || attrs['userEmail'] || userEmail;
      userId                  = attrs['id']                             || userId;
      userRoles               = attrs['roles']                          || userRoles;
      showsAds                = attrs['showsAds'];
      followingUsers          = attrs['followingUsers']                 || followingUsers;
      followingTags           = attrs['followingTags']                  || followingTags;
      helpScoutSignature      = attrs ['helpScoutSignature']            || helpScoutSignature;
      isModerator             = attrs['isModerator']                    || isModerator;
      isDKOfficial            = attrs['isDKOfficial']                   || isDKOfficial;
      isTrusted               = (attrs['roles'] || userRoles || []).includes('TrustedUser');
      isDonor                 = (attrs['roles'] || userRoles || []).includes('Donor');
      isSubscriber            = (attrs['roles'] || userRoles || []).includes('Subscriber');
      isPrismOfficial         = (attrs['roles'] || userRoles || []).includes('PrismOfficial');
      canRecComment           = attrs['canRecComment']                  || canRecComment;
      canRecStory             = attrs['canRecStory']                    || canRecStory;
      canComment              = attrs['canComment']                     || canComment;
      canHideShowAds          = attrs['canHideShowAds']                 || canHideShowAds;
      canFlagComment          = attrs['canFlagComment']                 || canFlagComment;
      canSubscribe            = attrs['canSubscribe']                   || canSubscribe;
      hideRatesRemaining      = attrs['hideRatesRemaining']             || hideRatesRemaining;
      canQueueToRescue        = attrs['canQueueToRescue']               || canQueueToRescue;
      canRepublish            = attrs['canRepublish']                   || canRepublish;
      canHotlist              = attrs['canHotlist']                     || canHotlist;
      canBuyLifetimeSubscription = attrs['canBuyLifetimeSubscription']  || canBuyLifetimeSubscription;
      canEvadeImageWhitelist  = attrs['canEvadeImageWhitelist']         || canEvadeImageWhitelist;
      canEvadeIframeWhitelist = attrs['canEvadeIframeWhitelist']        || canEvadeIframeWhitelist;
      preferAutoRefresh       = attrs['preferAutoRefresh']              || preferAutoRefresh || !userId;
      preferCommentNotifications = attrs['preferCommentNotifications']  || preferCommentNotifications;
      preferHiddenComments    = attrs['preferHiddenComments']           || preferHiddenComments;
      preferHiddenCommentsUntilIHide = attrs['preferHiddenCommentsUntilIHide'] || preferHiddenCommentsUntilIHide;
      preferFoldedComments    = attrs['preferFoldedComments']           || preferFoldedComments;
      canViewCommentFlagData  = attrs['canViewCommentFlagData']         || canViewCommentFlagData;
      canZeroRateComments     = attrs['canZeroRateComments']            || canZeroRateComments;
      userAvatar              = attrs['userAvatar']                     || userAvatar;
      userBlogs               = attrs['blogs']                          || userBlogs;
      userBlogPerms           = attrs['blogPerms']                      || userBlogPerms;
      warnings                = attrs['warnings']                       || warnings;
      notifications           = attrs['notifications']                  || notifications;
      progressiveRollout      = attrs['progressiveRollout']             || progressiveRollout || '-1';


      if(!!userNickname && !!userId)
        isLoggedIn = true;

      if(_(userRoles).contains('admin'))
        isAdminUser = true;
    },

    showAlert: function(text) {
      return alert(text);
    },
    showConfirm: function(text) {
      return confirm(text);
    },
    log: function(str){
      if (DailyKos.debug === true)
        console.log(str);
    }
  });

})(jQuery);
(function($) {
  if(!window.DailyKos) window.DailyKos = {};
  if(!window.DailyKos.Whoami) window.DailyKos.Whoami = {};

  var self = window.DailyKos.Whoami,
      whoamiCachedEvent = 'dailykos.whoami.cached',
      whoamiLoadedEvent = 'dailykos.whoami.loaded',
      localStorageKey   = 'dk.whoami',
      loadState = 'none',
      whoamiJson = null;

  var hasSignedInCookie = DailyKos.hasSignedInCookie(),
      cachedWhoamiData  = simpleStorage.get(localStorageKey);

  if(cachedWhoamiData) {
    if(!hasSignedInCookie && cachedWhoamiData['loggedIn']) {
      // Looks like we were logged out. Clear the cached /whoami data:
      simpleStorage.deleteKey(localStorageKey);
      cachedWhoamiData = undefined;
    } else if(hasSignedInCookie && !cachedWhoamiData['loggedIn']) {
      // Looks like we just logged in. Nuke the cached data.
      simpleStorage.deleteKey(localStorageKey);
      cachedWhoamiData = undefined;
    }
  }

  if(cachedWhoamiData && !whoamiJson) {
    whoamiJson = cachedWhoamiData;
    DailyKos.setUser(whoamiJson);

    loadState = 'cached';
    $(document).trigger(whoamiCachedEvent, whoamiJson);
  }

  $.extend(window.DailyKos.Whoami, {
    onLoad: function(func) {
      if(loadState == 'loaded') {
        _.defer(func, whoamiLoadedEvent, whoamiJson);
      } else {
        $(document).on(whoamiLoadedEvent, func);
      }
    },
    // Note: onLoadAndFromCache will be called twice, once for the cached data and
    //  once for the newest data. if this is not ideal, use `onLoad`
    onLoadAndFromCache: function (func) {
      switch(loadState) {
      case 'loaded':
        _.defer(func, whoamiLoadedEvent, whoamiJson);
        break;
      case 'cached':
        _.defer(func, whoamiLoadedEvent, whoamiJson);
        $(document).on(whoamiLoadedEvent, func);
        break;
      default:
        $(document).on(whoamiCachedEvent, func);
        $(document).on(whoamiLoadedEvent, func);
      }
    },
    ready: function() {
      DailyKos.Whoami.onLoadAndFromCache(self.setCSRFToken);
      DailyKos.Whoami.onLoadAndFromCache(self.decorateHeader);
      DailyKos.Whoami.onLoadAndFromCache(self.initUserAvatar);

      if ($('a.user-profile__profile-item').length > 0) {
        DailyKos.Whoami.onLoadAndFromCache(self.showLoggedInOrLoggedOutMastheadItems);
        DailyKos.Whoami.onLoadAndFromCache(self.addUserNameToLinks);
        DailyKos.Whoami.onLoadAndFromCache(self.addDraftsCount);
        DailyKos.Whoami.onLoadAndFromCache(self.replaceCommentText);
        DailyKos.Whoami.onLoadAndFromCache(self.replaceMessageText);
        DailyKos.Whoami.onLoadAndFromCache(self.initFrontPageUserAvatar);
        DailyKos.Whoami.onLoadAndFromCache(self.initFrontPageMobileNav);
        DailyKos.Whoami.onLoadAndFromCache(self.linkToReplies);
        DailyKos.Whoami.onLoadAndFromCache(self.linkToMessages);
        DailyKos.Whoami.onLoadAndFromCache(self.toggleSubscribeLink);
        DailyKos.Whoami.onLoadAndFromCache(self.toggleManageQueueButton);
      }
    },
    load: function() {
      return self.loadRemote();
    },
    loadRemote: function() {
      var retries     = 0,
          tryUserLoad = {
            url:      "/whoami.json",
            cache:    false,
            success:  function(json) {
              if(json.reload === true) {
                 window.location.reload();
              }

              DailyKos.setUser(json);

              whoamiJson  = json;
              loadState   = 'received';

              // Save it in local storage for subsequent page loads:
              simpleStorage.set(localStorageKey, json);

              $(function() {
                loadState = 'loaded';
                $(document).trigger(whoamiLoadedEvent, json);
              });
            },
            error: function() {
              if(retries > 5) return;

              setTimeout(function() { $.ajax(tryUserLoad) }, 10000 );
              retries++;
            }
          };

      $.ajax(tryUserLoad);
    },

    // for front page redesign FIXME: move to dk6
    showLoggedInOrLoggedOutMastheadItems: function(env, json) {
      if(DailyKos.isLoggedIn()) {
        $("#logged-in-items").removeClass("hide-logged-in");
        if(typeof json['userAvatar'] !== 'undefined') {
          $("#update-avatar").attr('src', json['userAvatar']);
        }
      } else {
        $("#logged-out-items").removeClass("hide-logged-out");
        $("#logged-out-hamburger-navigation").removeClass("hidden");
      };
    },

    toggleSubscribeLink: function(env, json) {
      if(json['canSubscribe'] === false || json['canHideShowAds']) {
        $(".user-profile__profile-item--subscribe").remove();
      }
      if(json['canHideShowAds']) {
        $("#toggle-show-hide-ads").show();
        if(json['showsAds']) {
          $('.user-profile__profile-item--show-ads').hide();
          $('.user-profile__profile-item--hide-ads').show();
        } else {
          $('.user-profile__profile-item--show-ads').show();
          $('.user-profile__profile-item--hide-ads').hide();
        }
      } else {
        $("#toggle-show-hide-ads").hide();
      }
    },

    addUserNameToLinks: function(env, json) {
      var userName = json['userName'];
      if(typeof userName !== 'undefined') {
        $('a.user-profile__profile-item, a.masthead__icon').each(function(idx, el) {
          el.href = el.href.replace("__nickname__", userName);
        });
      }
    },

    addDraftsCount: function(env, json) {
      var $el = $('.user-profile__profile-item--drafts');
      var draftsCount = json['draftsCount'];
      $el.text('Drafts (' + draftsCount + ')');
    },

    replaceCommentText: function(env, json) {
      if(json['newReplies'] === undefined) { return; }

      var commentCount = json['newReplies'].length;
      var $el = $(".user-profile__reply-count");
      $el.attr('href', $el.attr('href').replace("__nickname__", json['userName']));

      if(commentCount === 1) {
        $el.html('1<div class="user-profile__comment-count-label">New Reply</div>');
        $el.attr('title', '1 New Reply');
      } else {
        $el.html(commentCount + '<div class="user-profile__comment-count-label">New Replies</div>');
        $el.attr('title', commentCount + ' New Replies');
        if (commentCount === 0) { $el.addClass("user-profile__reply-count--zero"); }
      };
    },

    replaceMessageText: function(env, json) {
      var messageCount = json['newMessages'];
      var $el = $(".user-profile__message-count");
      $el.attr('href', $el.attr('href').replace("__nickname__", json['userName']));

      if(messageCount === '1') {
        $el.html('1<div class="user-profile__message-count-label">New Message</div>');
        $el.attr('title', '1 New Message');
      } else {
        $el.html(messageCount + '<div class="user-profile__message-count-label">New Messages</div>');
        $el.attr('title', messageCount + ' New Messages');
        if(messageCount === '0') { $el.addClass("user-profile__message-count--zero"); }
      };
    },

    initFrontPageUserAvatar: function(e, json) {
      $('body').keydown(function(e) {
        if (e.keyCode === 27) {
          e.preventDefault();
          $(".user-profile").css('visibility', 'hidden');
        }
      });

      $(".masthead__avatar").click(function(e){
         $(".user-profile").css('visibility', 'visible');
         $(".user-profile__reply-count").focus();
         e.stopPropagation();
         $('.BeaconFabButtonFrame').hide();
         Beacon('close');
      });

      $(".masthead__avatar").keyup(function(e){
        if (e.keyCode === 13) {
          e.preventDefault();
          if ($(".user-profile").css('visibility') === 'hidden') {
            $(".user-profile").css('visibility', 'visible');
            $(".user-profile__reply-count").focus();
            $('.BeaconFabButtonFrame').hide();
            Beacon('close');
          }
        }
      });

      $(".user-profile__close-btn").keyup(function(e){
        if (e.keyCode === 13) {
          e.preventDefault();
          if ($(".user-profile").css('visibility') === 'visible') {
            $(".user-profile").css('visibility', 'hidden');
          }
        }
      });

      $(".user-profile__close-btn").click(function(e){
        if ($(".user-profile").css('visibility') === 'visible') {
          $(".user-profile").css('visibility', 'hidden');
        }
      });
    },

    initFrontPageMobileNav: function(e, json) {
      var hamburgerNav = $(".hamburger-navigation__menu");

      $('.hamburger-navigation__sections-list a').click(function(e) {
        hamburgerNav.css('display', 'none');
      });

      $('.user-profile__profile-item--image-library').on('click', function(e) {
        e.preventDefault();
        hamburgerNav.css('display', 'none');
        DailyKos.Library.open();
      });

      $('body').keydown(function(e) {
        if (e.keyCode === 27) {
          hamburgerNav.css('display', 'none');
        }
      });

      $("#hamburger-nav-menu").click(function(e){
         hamburgerNav.css('display', 'block');
         $(".hamburger-navigation__header--logo").focus();
         e.stopPropagation();
         $('.BeaconFabButtonFrame').hide();
         Beacon('close');
      });

      $("#hamburger-nav-menu").keyup(function(e){
        if (e.keyCode === 13) {
          e.preventDefault();
          hamburgerNav.css('display', 'block');
          $(".hamburger-navigation__header--logo").focus();
          $('.BeaconFabButtonFrame').hide();
          Beacon('close');
         }
      });

      $('.hamburger-navigation__header--close-btn').click(function(e){
        hamburgerNav.css('display', 'none');
      });

      $('.hamburger-navigation__header--close-btn').keydown(function(e) {
        if (e.keyCode === 13) {
          hamburgerNav.css('display', 'none');
        }
      });
    },

    linkToReplies: function(e, json) {
      $("#masthead__replies").click(function(e){
        window.location.replace("/user/" + json['userName'] + "/replies");
      });

      $("#masthead__replies").click(function(e){
        e.stopPropagation();
      });
    },

    linkToMessages: function(e, json) {
      $("#masthead__messages").click(function(e){
        window.location.replace("/user/" + json['userName'] + "/messages");
      });

      $("#masthead__messages").click(function(e){
        e.stopPropagation();
      });
    },

    toggleManageQueueButton: function(e) {
      if (DailyKos.canManageQueue()) {
        $('.user-profile__btn--manage-queue').css('display', 'block');
      };
    },
    // end front page redesign

    setCSRFToken: function(ev, json) {
      $("meta[name='csrf-token']").attr('content', json['csrfToken']);
      $("meta[name='csrf-param']").attr('content', json['csrfParam']);
    },

    decorateHeader: function(ev, json) {
      if(DailyKos.isLoggedIn() !== true) {
        $(".user-sign-in").removeClass("hidden");
        return;
      }

      $('body').addClass('logged-in');

      if(DailyKos.canHotlist()) $('body').addClass('can-hotlist');

      if(DailyKos.userBlogPerms().length) {
        var frontPagePerms = DailyKos.userBlogPerms().filter(function (b) { return b.blog_id === 1 });
        if (frontPagePerms.length && frontPagePerms[0].permissions.includes('blog_admin')) {
          $('body').addClass('can-pin-front-page');
        }
      }

      if(typeof json['newMessages'] !== 'undefined') {
        $(".new-messages-count").text(json['newMessages']);
        $('.masthead__indicator--messages').text(json['newMessages']).removeClass('hidden');
      }

      var $newMessageIndicatorLink = $('.masthead__indicator--messages').parent();
      var messageCount = parseInt(json['newMessages']);
      switch(true) {
        case messageCount === 0:
          $(".dksocial-counts .new-messages-count").text("");
          $("#profile-messages").addClass("none");
          $('.new-messages-count').text('');
          $('.masthead__indicator--messages').text('').addClass('hidden');
          $newMessageIndicatorLink.attr("aria-label", "You have no unread private messages.");
          break;
        case messageCount === 1:
          $newMessageIndicatorLink.attr("aria-label", "You have one unread private message.");
          break;
        case messageCount > 1:
          $newMessageIndicatorLink.attr("aria-label", "You have " + messageCount + " unread private messages.");
          break;
        default:
          $newMessageIndicatorLink.attr("aria-label", "You have no unread private messages.");
        }

      // Show badge with number of unread new-replies
      var replies = json.newReplies;
      var ariaLabelText = "You have no new replies to your comments.";

      if (replies) {
        var storyTracker = App.Tracker.Shared.storyTracker;

        $(".item-count.new-replies-count").css("display", "none");
        $('.masthead__indicator--replies').addClass('hidden');

        // Handles Lazy Comments data
        if (window.showNewComments) {
          _(replies).each(function(reply){
            var tracker = storyTracker({storyId: reply.story_id});
            var readIds = tracker.readIds();
            if (readIds === undefined || !readIds.includes(reply.comment_id)) {
              $(".item-count.new-replies-count").css("display", "block");
              $('.masthead__indicator--replies').removeClass('hidden');
              ariaLabelText = "You have new replies to your comments.";
            }
          });
        } else {
          // Handles old comments data
          var newRepliesCt = 0;
          _(replies).each(function(reply){
            var tracker = storyTracker({storyId: reply.story_id});
            var isUnreadComment = tracker.isUnreadComment('comment-' + reply.comment_id);
            if (isUnreadComment) newRepliesCt++;
          });

          if (newRepliesCt) {
            $(".item-count.new-replies-count").css("display", "block");
            $('.masthead__indicator--replies').removeClass('hidden');
            ariaLabelText = "You have new replies to your comments.";
          }
        }
      }

      var $newReplyIndicatorLink = $('.masthead__indicator--replies').parent();
      $newReplyIndicatorLink.attr("aria-label", ariaLabelText);

      if(typeof json['userAvatar'] !== 'undefined') {
        $(".user-avatar img.avatar").attr("src", json['userAvatar']);
      }

      if(typeof json['userName'] !== 'undefined') {
        $(".user-display-name.name-heading").text(json['userName']);

        // Href's needing the username have a __nickname__ string in the href string
        $("a.user-href").each(function(idx, el) {
          el.href = el.href.replace("__nickname__", json['userName']);
        });

        $('img.masthead__tooltip').each(function(idx, el) {
          el.alt = el.alt.replace("__nickname__", json['userName']);
          el.title = el.title.replace("__nickname__", json['userName']);
        });
      }

      $(".user-profile-wrapper, .dksocial-counts").removeClass("hidden");
    },

    initUserAvatar: function(ev, json) {
      var avatarImg     = $(".user-avatar img.avatar");
      if (!avatarImg || !avatarImg.offset()) return;

      var avatarTop     = avatarImg.offset().top,
          avatarOffset  = avatarTop - 6, // 6px is the affix top position for the avatar
          avatarTooltip = null;

      // Make the user profile sticky with the page:
      var wrapper = $(".avatar-wrapper"),
          avatarTarget = $(".avatar-group"),
          userProfile = $(".user-avatar"),
          avatarTooltipIsOpen = false;

      avatarTooltip = avatarTarget.tooltip({
        html:       true,
        trigger:    'click',
        placement:  'bottom',
        container:  userProfile,
        title:      function() { return $(".avatar-tooltip-wrapper").html(); }
      });

      $(".user-display-name").off('click');
      $(".user-display-name").on('click', function() { avatarTooltip.tooltip('toggle'); });

      if(json['canSubscribe'] === false || json['canHideShowAds']) {
        $(".subscribe-link .unsubscribed").remove();
      }
      if(json['canHideShowAds']) {
        $("#toggle-show-hide-ads-links").show();
        if(json['showsAds']) {
          $('#toggle-show-hide-ads-links .show-ads').hide();
          $('#toggle-show-hide-ads-links .hide-ads').show();
        } else {
          $('#toggle-show-hide-ads-links .show-ads').show();
          $('#toggle-show-hide-ads-links .hide-ads').hide();
        }
      } else {
        $("#toggle-show-hide-ads-links").hide();
      }

      if(!DailyKos.isTouchScreen) {
        $(".avatar-inner").affix({
          offset: {
            top: avatarOffset //wrapper.position().top
          }
        });
      }

      // Track tooltip state, so we can avoid spinning jQuery to do nothing:
      avatarTooltip.on('hidden.bs.tooltip', function() { avatarTooltipIsOpen  = false; });
      avatarTooltip.on('shown.bs.tooltip', function() {
        avatarTooltipIsOpen   = true;
        $('.BeaconFabButtonFrame').hide();
        Beacon('close');

        userProfile.find('a.show-image-library').on('click', function(e) {
          e.preventDefault();
          avatarTooltip.tooltip('hide'); // hide the user dropdown tooltip
          DailyKos.Library.open();
        });
      });

      // Now, close the tooltip if you click outside of it:
      $("body").on('click', function(e) {
        if(avatarTooltipIsOpen !== true) return; // It's not open, don't waste cycles
        if(userProfile.has(e.target).length) return; // Do nothing!

        // Otherwise, try to hide the tooltip:
        avatarTarget.tooltip('hide');
      });

      // Also, close the tooltip if we press escape:
      $(document).keydown(function(e) {
        if (e.keyCode == 27) {
          avatarTarget.tooltip("hide");
        }
      });
    },
    set: function(key, val) {
      if (!DailyKos.currentUserId()) return;

      try {
        var whoami = simpleStorage.get('dk.whoami') || {};
        whoami[key] = val;
        simpleStorage.set('dk.whoami', whoami);
      } catch (e) {
        console.warn('whoami update failed while setting comment filter.');
      }
    }
  });

  if(!window.skipWhoami)
    DailyKos.Whoami.load();

})(jQuery);
(function($) {

  if(!window.DailyKos) window.DailyKos = {};

  var self = window.DailyKos;

  $.extend(window.DailyKos, {
    isFollowingUser:  function(userID) { return _(self.followedUsers()).contains(userID); },
    followUser:       function(userID, cb) {
      return $.ajax({
        url:      '/users/' + userID + '/follow',
        method:   'POST',
        success:  function(data) {
          self.setFollowedUsers(data['followingUsers']);

          if(cb) cb(data);
        },
        error: function (data) {
          DailyKos.showAlert("There was an error trying to follow the user. Please try again later.");
        }
      });
    },
    unfollowUser:     function(userID, cb) {
      return $.ajax({
        url:      '/users/' + userID + '/unfollow',
        method:   'POST',
        success:  function(data) {
          self.setFollowedUsers(data['followingUsers']);

          if(cb) cb(data);
        },
        error: function (data) {
          DailyKos.showAlert("There was an error trying to unfollow the user. Please try again later.");
        }
      });
    },

  });

})(jQuery);
(function($) {
  if(!window.DailyKos) window.DailyKos = {};

  var self = window.DailyKos.Time = {};

  var timeZoneTable = {};
  var timeZone = strftime('%z');

  var defaultTimeFormat = '%B %d &middot; %I:%M:%S %p';

  var isWindows = false,
      replaceTimezone = false;

  if(navigator.userAgent.indexOf("Windows") >= 0)
    isWindows = true;

  if(isWindows) {
    var tzBefore  = strftime('%Z');
    var tzAfter   = tzBefore.replace(/[a-z\s]/g, '');

    // %Z in Windows = "Pacific Standard Time" instead of "PST", FML:
    if(tzBefore !== tzAfter) replaceTimezone = true;
  }

  $.extend(self, {
    timeZone: timeZone,

    getTZobj: function () {
      if(!timeZoneTable[self.timeZone]) {
        timeZoneTable[self.timeZone] = strftime.timezone(self.timeZone);
      }

      return timeZoneTable[self.timeZone];
    },

    localizeAll: function ($targetEl) {
      if(!$targetEl) $targetEl = $(document);

      var strftimeTZ = self.getTZobj();

      $targetEl.find('[data-localize-time]')
        .not('[data-time-zone="' + self.timeZone + '"]')
        .each(function (idx, tzEl) {

          var $el     = $(tzEl),
              data    = $el.data(),
              format  = data['timeFormat'],
              date    = new Date(data['epochTime']);

          var formattedTime = strftimeTZ(format, date);

          if(replaceTimezone) {
            var tzBefore  = strftimeTZ('%Z', date);
            var tzAfter   = tzBefore.replace(/[a-z\s]/g, '');

            formattedTime = formattedTime.replace(tzBefore, tzAfter);
          }

          $el.html(formattedTime);
          $el.attr('data-time-zone', self.timeZone);
        });
    },
    localizeCommentTime: function (epochTimeStamp) {
      return(self.localTimeFor(epochTimeStamp, defaultTimeFormat));
    },
    localTimeFor: function (epochTimestamp, format) {
      var date;

      if(epochTimestamp instanceof Date) {
        date = epochTimestamp;
      } else {
        date = new Date(epochTimestamp);
      }

      if(!format) format = defaultTimeFormat;

      var strftimeTZ = self.getTZobj();
      var formattedTime = strftimeTZ(format, date);

      if(replaceTimezone) {
        var tzBefore  = strftimeTZ('%Z', date);
        var tzAfter   = tzBefore.replace(/[a-z\s]/g, '');

        formattedTime = formattedTime.replace(tzBefore, tzAfter);
      }

      return formattedTime;
    }
  });
  
})(jQuery);
(function ($) {
  if(!window.DailyKos) window.DailyKos = {};
  if(!window.DailyKos.MiniProfile) window.DailyKos.MiniProfile = {};

  var self = window.DailyKos.MiniProfile;

  var profileElemID = function (userID) {
    return elemID = 'user-' + userID + '-mini-profile';
  };

  var determinePlacement = function(tooltipEl, targetEl) {
    var targetPos = targetEl.getBoundingClientRect().top,
        winHeight = $(window).height();

    $(tooltipEl).removeClass('top bottom');

    var spaceBelowTarget = winHeight - targetPos;

    if(targetPos >= 450)          return 'top'; // 450px = max height
    if(spaceBelowTarget >= 450)   return 'bottom';

    // Go with whichever side above/below has the most space:
    return (targetPos >= spaceBelowTarget) ? 'top' : 'bottom';
  };

  var cachedAuthorProfiles = {},
      escapeListenerCreated = false;

  $.extend(window.DailyKos.MiniProfile, {
    closePopoverOnEscapeListener: function() {
      if(escapeListenerCreated) return; // don't create repeatedly

      $(document).keydown(function(e) {
        if (e.keyCode == 27) {
          $('.popover.mini-profile').detach();
        }
      });

      escapeListenerCreated = true;
    },
    __getMiniProfile: function (userID, callback) {
      var profile = cachedAuthorProfiles[userID];

      if(profile) {
        return callback && callback(profile) || profile;
      }

      $.get('/users/' + userID + '/mini-profile', function (data) {
        profile = cachedAuthorProfiles[userID] = data;

        return callback && callback(profile) || profile;
      });
    },
    getMiniProfile: function (userID, profileEl, targetEl, opts) {
      return self.__getMiniProfile(userID, function (data) {
        var $profile = $(profileEl);
        if($profile.length > 0) {
          $profile.html(data);

          var popObj = $(targetEl).data('bs.popover');

          var placement = opts['placement'] || determinePlacement(profileEl, targetEl);

          var actualWidth  = popObj.$tip[0].offsetWidth;
          var actualHeight = popObj.$tip[0].offsetHeight;
          var calculatedOffset = popObj.getCalculatedOffset(placement, popObj.getPosition(), actualWidth, actualHeight);

          popObj.applyPlacement(calculatedOffset, placement);
        }
      });
    },
    followUser: function (userID) {
      DailyKos.followUser(userID, function (data) {
        var $profile = $('#' + profileElemID(userID));

        $profile.addClass('following');
        $profile.find('.stat.followers').text(data['userFollowersCount']);

        // Store updated mini-profile, so the correct follower counts display:
        cachedAuthorProfiles[userID] = $profile.html();
      })
    },
    unfollowUser: function (userID) {
      DailyKos.unfollowUser(userID, function (data) {
        var $profile = $('#' + profileElemID(userID));

        $profile.removeClass('following');
        $profile.find('.stat.followers').text(data['userFollowersCount']);

        // Store updated mini-profile, so the correct follower counts display:
        cachedAuthorProfiles[userID] = $profile.html();
      })
    },
    setupPopover: function (collection, userID, opts) {
      self.closePopoverOnEscapeListener();

      $(collection).each(function(idx) {
        var $this   = $(this);
        var _userID = userID || $this.data('user-id');
        var _opts   = opts || {};

        if(typeof _userID === 'undefined') return; // Can't display the popover without a user.
        _userID = parseInt(_userID);
        if (!_userID) return;

        var placement = _opts['placement'] || $this.data('placement');

        if(placement) _opts['placement'] = placement;

        var popArgs = self.popoverOptions(_userID, _opts, this);

        var getProfileTimeout;
        $this.hover(
          function () { // hover in
            getProfileTimeout = setTimeout(function () {
              self.__getMiniProfile(_userID);
            }, 2);
            $this.closest('.comment').addClass('showing-miniprofile');
          },
          function () {
            $this.closest('.comment').removeClass('showing-miniprofile');
            clearTimeout(getProfileTimeout);
          } // hover out
        )

        // Create popover:
        $this.popover(_.extend({ container: this }, popArgs));

        // Set the follow status before displaying the popover:
        var popObj = $this.data('bs.popover');
        $this.on('show.bs.popover', function () {
          if(DailyKos.isFollowingUser(_userID) !== !!popObj.followStatus) {
            if(popObj.followStatus = DailyKos.isFollowingUser(_userID)) {
              popObj.tip().find(profileElemID(userID)).addClass('following');
            } else {
              popObj.tip().find(profileElemID(userID)).removeClass('following');
            }
          }
        });
      });
    },
    popoverOptions: function(userID, opts, targetEl) {
      var popObj;
      var popupArgs = {
        html:       true,
        trigger:    'hover',
        placement:  determinePlacement,
        delay:      { show: 666, hide: 999 },
        template:   '<div class="popover mini-profile">' +
                      '<div class="arrow"></div>' +
                      '<div class="popover-content"></div>' +
                    '</div>',
        content:    function() {
          var triggerEl = this,
              $this     = $(this),
              elemID    = profileElemID(userID),
              classStr  = '';

          if(!popObj) popObj = $this.data('bs.popover');

          popObj.followStatus = DailyKos.isFollowingUser(userID);
          if(popObj.followStatus) {
            classStr = ' class="following"';
          }

          var profileHtml = '<div id="' + elemID + '"' + classStr + '>' +
                              (self.getMiniProfile(userID, '#' + elemID, targetEl, opts) || 'Loading...') +
                            '</div>';

          return profileHtml;
        }
      }

      if(typeof opts === 'object') popupArgs = _.extend(popupArgs, opts);

      return popupArgs;
    }
  });

  $(function () {
    DailyKos.MiniProfile.setupPopover($('[data-toggle="mini-profile"]'))
  })
})(jQuery);
(function($) {
  if(!window.DailyKos) window.DailyKos = {};
  if(!window.DailyKos.Modal) window.DailyKos.Modal = {};

  var self = DailyKos.Modal;

  var type = {
    error:        'error',
    message:      'message',
    confirmation: 'confirmation'
  };

  $.extend(window.DailyKos.Modal, {
    show: show,
    showMessage:  function(content, title) {
      var opts = { modalType: type.message };
      show(content, title, opts);
    },
    showError: function(content, title) {
      show(content, title, {isError: true, modalType: type.error});
    },
    showConfirmation: function(content, title, options) {
      options = options || {};
      options = _(options).defaults({
        primaryBtnLabel: 'OK',
        modalType: type.confirmation
      });

      show(content, title, options);
    },
    close: closeModal
  });

  function show(content, title, options) {
    $(function() { _show(content, title, options); });
  }

  function _show(content, title, options) {
    if(typeof(options) !== "object") options = {};

    $('#modal').attr('data-modalType', options.modalType);
    $("#modal .modal-footer").addClass("hidden");

    if(options.skipFooter !== true) {
      if(options.isError) {
        $("#modal .error-footer").removeClass("hidden");
      } else {
        $("#modal .message-footer").removeClass("hidden");
      }
    } // if(!options.skipFooter)

    if(title) {
      $("#modal .modal-title").removeClass("hidden");
      $("#modal .modal-title").text(title);
    } else {
      $("#modal .modal-title").addClass("hidden");
    } // if(title)

    $("#modal .modal-body").html(content);
    $("#modal .btn-primary").html(options.primaryBtnLabel || "Save changes");
    $("#modal .btn-default").html(options.defaultBtnLabel || "Close");

    // Submit/Cancel Button Listeners
    addListener('.btn-primary', closeModal);
    if (options.onSubmit) addListener('.btn-primary',            _.once(options.onSubmit));
    if (options.onCancel) addListener('.btn[data-dismiss]',      _.once(options.onCancel));

    $("#modal").modal('show');
  }

  function addListener(selector, func) {
    var modal  = $("#modal");
    var el     = modal.find(selector);

    modal.
      on('show.bs.modal', function (e) {  // upon modal-show event...
        el.on('click', func);             // add click listener
      }).
      on('hidden.bs.modal', function (e) { // upon modal-hide event...
        el.off();                           // remove click listener
        modal.unbind('show.bs.modal');
        modal.unbind('hidden.bs.modal');
      });
  }

  function closeModal() {
    $('#modal').modal('hide');
  }

})(jQuery);
(function($) {
  if(!window.DailyKos) window.DailyKos = {};
  if(!window.DailyKos.RecommendsPopover) window.DailyKos.RecommendsPopover = {};

  var self = window.DailyKos.RecommendsPopover;

  var escapeListenerCreated = false;

  $.extend(window.DailyKos.RecommendsPopover, {
    closePopoverOnEscapeListener: function() {
      if(escapeListenerCreated) return; // don't create repeatedly

      $(document).keydown(function(e){
        if (e.keyCode == 27) {
          DailyKos.RecommendsPopover.hide();
        }
      });

      escapeListenerCreated = true;
    },
    hide: function(){
      $('.popover.recommends').detach();
    },
    setupPopover: function(collection, recTextFn, opts) {
      self.closePopoverOnEscapeListener();

      var popArgs = self.popoverOptions(recTextFn, opts);

      $(collection).each(function(idx) {
        var $this = $(this);

        // Create popover:
        $this.popover(_.extend({ container: this }, popArgs));

        // Setup scroll blocker:
        $this.on('shown.bs.popover', function() {
          var popoverEl     = $this.find('.popover'),
              closeEl       = popoverEl.find('.popover-close'),
              contentEl     = popoverEl.find('.popover-content');

          closeEl.on('click', function(event) {
            popoverEl.detach();
          }); // closeEl.on 'click'

          contentEl.on('mousewheel', function(event, delta) {
            var height        = popoverEl.height(),
                scrollHeight  = contentEl[0].scrollHeight + 20; // 20 = spacing on close area is odd.

            if((this.scrollTop === (scrollHeight - height) && delta < 0) || (this.scrollTop === 0 && delta > 0)) {
              event.preventDefault();
            }
          }); // contentEl.on 'mousewheel'
        }); // on 'shown.bs.popover'
      });
    },
    popoverOptions: function(recTextFn, opts) {
      var popupArgs = {
        html:       true,
        trigger:    'hover',
        delay:      { show: 1200, hide: 1000 },
        template:   '<div class="popover recommends"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-close pull-right"><span class="sr-only">Close</span><span class="icon dkons x"></span></div><div class="popover-content"></div></div>',
        placement:  function(tooltipEl, targetEl) {
          var targetPos = targetEl.getBoundingClientRect().top,
              winHeight = $(window).height();

          $(tooltipEl).removeClass('top bottom');

          if(targetPos >= 450)              return 'top'; // 450px = max height
          if(winHeight - targetPos >= 450)  return 'bottom';

          return 'top'; // their browser window is really small
        },
        content:    function(el) {
          var recStr = recTextFn($(this));

          if(typeof recStr !== 'string') return;

          var recommenders  = recStr.split(","),
              recText       = '',
              currentUser   = DailyKos.currentUserNickname();

          _(recommenders).each(function(recommender) {
            recText += ((recommender === currentUser) ?
                        '<div class="current-user">' : '<div>') +
                          '<a href="/user/'+recommender+'" target="_blank">' +
                            recommender +
                          '</a>' +
                        '</div>';
          });

          return recText;
        }
      }

      if(typeof opts === 'object') _.extend(popupArgs, opts);

      return popupArgs;
    }
  });
})(jQuery);
(function($) {
  if(!window.DailyKos) window.DailyKos = {};
  if(!window.DailyKos.SignIn) window.DailyKos.SignIn = {};

  var self = window.DailyKos.SignIn;

  $.extend(window.DailyKos.SignIn, {
    initParent: function(args) {
      if (location.protocol === 'http:') return; // don't allow logins over http

      var signInElem = $(args.signInDiv);

      var loginUrl    = 'https://'      + window.location.host +
                        '/login.embed#' + window.location.toString();

      var signInTxt   = signInElem.find(".sign-in-txt"),
          signInIcon  = signInElem.find(".sign-in-icon");

      signInElem.find(".log-in-group, .sign-in-icon, .log-in-group span").click(function(e) {
        // Don't inhibit CMD-Clicks from opening a new tab. Don't be a jork!
        if(e.metaKey || e.ctrlKey) {
          e.stopPropagation();
          return;
        }

        // Close the login window if we press escape:
        $(document).keydown(function(e) {
          if (e.keyCode == 27) {
            signInIcon.popover('hide');
          }
        });

        if(signInTxt.is(e.target)) {
          e.stopPropagation();
          signInIcon.popover("toggle");
        }

        e.preventDefault();
      });

      signInIcon.popover({
        animation:  false,
        html:       true,
        trigger:    'click',
        placement:  'bottom',
        container:  'body',
        template:   $('<div class="popover sign-in" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'),
        content:    $('<iframe id="login-frame" src="' + loginUrl + '" width="250px" style="padding-right: 5px;" frameborder="0" />')
      });

      $.receiveMessage(function(e) {
        if(_.isEmpty(e.data)) { return; }
        if(typeof e.data !== 'string') { return; }

        if(e.data.indexOf('action=reload') >= 0) {
          signInIcon.popover('hide');
          return window.location.reload();
        }

        var h = Number( e.data.replace( /.*frameHeight=(\d+)(?:&|$)/, '$1' ) );

        if ( !isNaN( h ) && h > 0) {
          // Height has changed, update the iframe.
          $('#login-frame').height(h);
        }
      });

      if(!$.cookie('dk4_logged_in')) {
        signInElem.removeClass("hidden");
      }
    },
    initFrame: function(args) {
      var parentUrl = decodeURIComponent( document.location.hash.replace( /^#/, '' ) );

      if(_.isEmpty(parentUrl)) {
        parentUrl = 'https://' + document.location.host;
      }

      function resizeFrame() {
        var height = $('body').outerHeight( true );

        $.postMessage({ frameHeight: height }, parentUrl, parent);
      }

      function setErrorText(text) {
        var errorEl = $(".login-container p.error");

        if(_.isEmpty(text)) {
          return errorEl.addClass("invisible");
        }

        errorEl.html('<span class="error alert">Error!</span>&nbsp;&nbsp;' + text);
        errorEl.find('a').attr({'target': '_blank'});
        errorEl.removeClass("hidden invisible");
        resizeFrame();
      }

      resizeFrame();

      var submitTriggered = false;

      $("#login-form").submit(function(e) {
        e.preventDefault();
      })

      $("#login-form")
        .on('ajax:beforeSend', function(jqXHR, settings) {
          setErrorText('');
          $("#login-btn").attr('disabled', 'disabled');
        })
        .on('ajax:success', function(data, status, jqXHR) {
          if(window === window.top) {
            this.submit();
            window.location = $("#return_to").val() || "/";
          } else {
            $.postMessage({ action: 'reload' }, parentUrl, parent);
            this.submit();
            window.top.location = $("#return_to").val() || "/";
          }
        })
        .on('ajax:error', function(jqXHR, status, errorThrown) {
          var json  = status.responseJSON,
              error;

          if(typeof json !== "undefined")
            error = json['error'];

          if(!error) error = "Login failed.";

          setErrorText(error);
          $("#login-btn").removeAttr('disabled');
        })
        .on('ajax:complete', function(jqXHR, status) {
          // TBD
        })
        .on('submit', function(e) {
          if(submitTriggered) {
            submitTriggered = false;
            return;
          }

          e.preventDefault();
          e.stopPropagation();
          submitTriggered = true;
          $("#login-form").trigger('submit');
        });

        $("button#login-btn").click(function(e) {
          $("#login-form").trigger('submit');
          return false;
        });

        $("#login-form").find('input').keypress(function(e) {
          // If the key pressed was enter
          if (e.which == '13') {
            $("#login-form").trigger('submit');
            return false;
          }
        });
    }
  });
})(jQuery);
(function($) {
  if(!window.DailyKos) window.DailyKos = {};
  if(!window.DailyKos.Taboola) window.DailyKos.Taboola = {};

  var self = window.DailyKos.Taboola;

  function pushTaboola(container, parentEl, mode,  placement, target_type) {
    $(parentEl).removeClass('hidden');
    window._taboola = window._taboola || [];
    _taboola.push({
      mode: mode,
      container: container,
      placement: placement,
      target_type: target_type
    });
  }

  $.extend(window.DailyKos.Taboola, {
    push: function (options) {
      // container, parentEl, mode,  placement, target_type
      if (typeof options['container'] == 'undefined' ||
          typeof options['parentEl'] == 'undefined') {
        return false;
      }
      // Set taboola ad defaults
      var container   = options['container'];
      var parentEl    = options['parentEl'];
      var mode        = typeof options['mode']        !== 'undefined' ? options['mode'] : 'alternating-thumbnails-a';
      var placement   = typeof options['placement']   !== 'undefined' ? options['placement'] : 'Right Rail Thumbnails';
      var target_type = typeof options['target_type'] !== 'undefined' ? options['target_type'] : 'mix';

      $(document).ready(function () {
        if (DailyKos.showsAds()) {
          // true if not signed in or has not disabled ads:
          return pushTaboola(container, parentEl, mode,  placement, target_type);
        } else {
          $(parentEl).addClass('hidden');
        }
      });
    },

  });
})(jQuery);

DailyKos.onSubtreeModificationResetScrolltop = function(){
  var $window = $(window);
  var scrollThreshold = 100; // pixels; we'll only adjust the scrolltop if you've scrolled past this threshold

  var resetScrollTop = _.throttle(function(){
    var $el = $(this);

    var winTop    = $window.scrollTop();
    var winBottom = $window.height() + winTop;
    var elTop     = $el.offset().top;
    var elBottom  = $el.height() + elTop;
    var windowIsBelowElement = winBottom > elBottom;

    var thisHeight = $el.height();
    var prevHeight = $el.data('prevHeight');
    var diffHeight = thisHeight - prevHeight;

    if (windowIsBelowElement && winTop > scrollThreshold) {
      window.scrollTo(0, winTop + diffHeight);
    }

    // and then remember the height, for next time ...
    $el.data({prevHeight: thisHeight});
  }, 10);

  $('.on-subtree-modification-reset-scrolltop').each(function(i, el){
    var $el    = $(el);
    var height = $el.height();

    $el.data({prevHeight: height});

    $el.on('DOMSubtreeModified', resetScrollTop);
  });
};
(function($) {
  if(!window.DailyKos) window.DailyKos = {};

  window.DailyKos.Unveil = function ($el, height) {
    if(!height) height = $(window).height();
    if(height < 768) height = 768;

    return $el.unveil(height, function () {
      $(this).load(function() {
        this.removeAttribute('style');
        $(this).parents('figure').find('figcaption').removeAttr('data-unloaded');
      });
    });
  }

})(jQuery);
_.namespace('App.Tracker.Shared');

App.Tracker.Shared.archiver = function() {
  if (archivedRecently()) return;

  archiveStoryTrack();

  if (!localStorageTooLarge()) return;

  splitArchivedStorage();

  if (!localStorageTooLarge()) return;

  splitUnarchivedStorage();


  // archives all unarchived story/comment tracking data that is stored in local storage
  function archiveStoryTrack () {
    var story      = App.Tracker.Shared.storyTracker;
    var archiveNow = function (key) { story({storyKey: key}).archiveNow(); };
    var storyKeys  = getStoryKeys();

    _(storyKeys).each(archiveNow);

    touchLastArchiveDate();
  }

  // Typical browser limit is 5mb
  function localStorageTooLarge (argument) {
    var mb4 = 4000000;
    return JSON.stringify(localStorage).length > mb4;
  }

  // Delete older archived stories
  function splitArchivedStorage () {
    var archive   = simpleStorage.get('story-archive');
    var keys      = _(archive).keys().sort();
    var half      = Math.ceil(keys.length / 2);
    var firstHalf = keys.slice(0, half);

    archive = _(archive).omit(firstHalf);

    simpleStorage.set('story-archive', archive);
  }

  // Delete older unarchived stories
  function splitUnarchivedStorage () {
    var keys      = getStoryKeys().sort();
    var half      = Math.ceil(keys.length / 2);
    var halfKeys  = keys.slice(0, half);
    var deleteKey = function (key) { simpleStorage.set(key); };

    _(halfKeys).each(deleteKey);
  }

  function getStoryKeys () {
    var keys       = simpleStorage.index();
    var isStoryKey = function(k) { return !!k.match(/^story-\d+$/); };
    var storyKeys  = _(keys).filter(isStoryKey);

    return storyKeys;
  }

  function archivedRecently () {
    return lastMonth() < lastArchiveDate();
  }

  function lastArchiveDate () {
    return simpleStorage.get('last-tracker-archive-date') || 0;
  }

  function touchLastArchiveDate () {
    simpleStorage.set('last-tracker-archive-date', _.now());
  }

  function lastMonth () {
    return _.now() - (1000 * 60 * 60 * 24 * 30);
  }
};
_.namespace('App.Tracker.Shared');

//
// This updates unread-comment counts on the blog and story pages.
//
(function () {
  var select;
  App.Tracker.Shared.updateReadCommentStats = function () {
    select  = select  || App.Tracker.StoryPage.selectors();

    var datas = getData();

    _(datas).each(update);
  };

  function update(data) {
    var stats    = data.unread ? data.unread + ' new' : '';
    var selector = select.getStoryUnreadCommentCount(data.storyKey);

    $(selector).html(stats);
  }

  function getData () {
    var tracker = App.Tracker.Shared.storyTracker;
    var $counts = $(select.commentCount);

    var datas = _($counts).map(function (el) {
      var $el   =  $(el);
      var data  =  $el.closest('[data-story-id]').data();
      var total = +$el.html()            || 0;

      var storyKey = 'story-' + data.storyId;
      var read     = tracker({storyKey: storyKey}).numCommentsRead();
      var unread   = Math.max(total - read, 0);

      return {
        storyKey: storyKey,
        unread:   unread
      };
    });

    return datas;
  }
})();
_.namespace('App.Tracker.Shared');

//
// Usage:
//
//   track = storyTracker({storykey: 'story-123'})
//
//   track.numCommentsRead()
//   => 3
//   => Infinity
//
//   track.isReadComment(commentKey)
//   => true
//
//   track.setReadComment(commentKey)
//

;(function (){
  var archive;

  App.Tracker.Shared.storyTracker = function (opts) {
    var self = {};
    var select = App.Tracker.StoryPage.selectors();

    init(opts || {});

    return {
      numCommentsRead: numCommentsRead,
      isReadComment:   isReadComment,
      isUnreadComment: isUnreadComment,
      setReadComment:  setReadComment,
      archiveNow:      archiveNow,
      readIds:         readIds
    };

    function init (opts) {
      loadStorage(opts);

      if (!commentsClosed() && isArchived()) unarchiveNow(); // comments re-opened
    }

    //
    // Accessors
    //

    function numCommentsRead () {
      if (window.showNewComments) return numCommentsReadForNewComments();

      if (isArchived()) return Infinity;

      return refetchCommentsRead().length;
    }

    function numCommentsReadForNewComments() {
      var ids = readIds();

      return ids
        ? ids.split(',').length
        : 0
    }

    function storyKeyToStoryId(key) {
      if (!key) return;
      var m = key.match(/story-(\d+)/);
      return m && m[1];
    }

    function readIds() {
      var storyId = storyKeyToStoryId(self.storyKey)
      var readKey = 'story:' + storyId + ':read-comment-ids'
      var readIds = localStorage[readKey]

      return readIds
    }

    function isReadComment (commentKey) {
      if (!commentKey) return console.warn('storytracker isReadComment: missing commentKey');
      if (isArchived()) return true;

      return _(refetchCommentsRead()).contains(commentKey);
    }

    function isUnreadComment (commentKey) {
      return !isReadComment(commentKey);
    }

    function setReadComment (commentKey) {
      if (!commentKey) return console.warn('storytracker setReadComment: missing commentKey');
      if (isArchived()) return;

      var comments = refetchCommentsRead();
      var exists   = _(comments).contains(commentKey);

      if (!exists) comments.push(commentKey);

      self.storage.lastVisited     = _.now();
      self.storage.commentsCloseAt = self.commentsCloseAt; // 10679624330

      save();
    }

    function refetchCommentsRead () {
      var story = simpleStorage.get(self.storyKey) || {commentsRead: []};

      return (self.storage.commentsRead = story.commentsRead || []);
    }

    function commentsRead () {
      return self.storage.commentsRead;
    }

    //
    // Local storage
    //

    function save () {
      simpleStorage.set(self.storyKey, self.storage);
    }

    function loadStorage (opts) { // and self
      self.storyKey = getStoryKey(opts);

      self.storage = _(simpleStorage.get(self.storyKey) || {}).defaults({
        commentsRead:    [],
        commentsCloseAt: 0,
        lastVisited:     0
      });

      self.commentsCloseAt = opts.commentsCloseAt || DK.commentsCloseAt || self.storage.commentsCloseAt || 0;

      archive = archive || simpleStorage.get('story-archive') || {};

      return true;
    }

    function getStoryKey (opts) {
      if (opts.storyKey) return opts.storyKey;
      if (opts.storyId)  return 'story-' + opts.storyId;

      console.warn('storytracker: missing storyKey');
    }

    //
    // Data archival
    //

    function isArchived () {
      return !!archive[self.storyKey];
    }

    function archiveNow () {
      if (!canBeArchived()) return;

      // delete story record
      simpleStorage.set(self.storyKey);

      // add to archive, set to 1 for truthiness
      archive[self.storyKey] = 1;
      simpleStorage.set('story-archive', archive);
    }

    function unarchiveNow () {
      archive[self.storyKey] = 0;
      simpleStorage.set('story-archive', archive);
    }

    function canBeArchived () {
      if (!commentsClosed())  return false;
      if (visitedRecently())  return false;

      return true;
    }

    function commentsClosed () {
      return self.commentsCloseAt < _.now();
    }

    function visitedRecently () {
      return self.storage.lastVisited > lastMonth();
    }

    function lastMonth () {
      return _.now() - (1000 * 60 * 60 * 24 * 30);
    }
  };
})();
_.namespace('App.Tracker.StoryPage');

//
// Story page comment tracking
//
// - on keynav, saves comments that are selected to local storage
// - on scroll, saves comments that are in viewport to localstorage
// - updates dom on read:
//   - removes the new indicator dot
//   - updates unread counts in the story stats after 60 seconds
//

App.Tracker.StoryPage.init = function () {
  if (!simpleStorage.canUse()) {
    localStorage.removeItem("simpleStorage"); //if storage is full, remove it so it can be rebuilt
    return;
  }

  var scroll  = App.Tracker.StoryPage.scroll();
  var keynav  = App.Tracker.StoryPage.keynav();
  var onRead  = App.Tracker.StoryPage.onRead();
  var select  = App.Tracker.StoryPage.selectors();
  var tracker = App.Tracker.StoryPage.storyPageTracker();


  if (CommentApp.selectedComment)
    return setTimeout(init, 5000); // wait for selectedComment scrolling
  else
    init();



  function init () {
    $(document).on('comment-keynav-start', markReadOnKeyNav)
               .on('comment-selected', markReadOnKeyNav)
               .on('comment-auto-updated', scroll.markReadOnScroll)
               .on('scroll', scroll.markReadOnScroll)
               .on('comment-folded', scroll.markReadOnScroll)
               .on('comment-read', onRead.updateDom)
               .on('comment-posted', markSelectedCommentRead);

    // Mark selected comment read, if any
    markSelectedCommentRead();

    // Mark hidden comments read, if any
    setTimeout(markHiddenCommentsRead, 3000);

    // Attempt to archive tracking data in 5 minutes
    setTimeout(App.Tracker.Shared.archiver, 300000);
  }

  function markReadOnKeyNav () {
    scroll.snoozeScrollListener();
    keynav.markReadOnKeyNav();
  }

  function markHiddenCommentsRead () {
    $(select.hiddenComment).each(markEachRead);
  }

  function markSelectedCommentRead () {
    $(select.selectedComment).each(markEachRead);
  }

  function markEachRead (i, el) {
    tracker.markCommentRead($(el));
  }
};
_.namespace('App.Tracker.StoryPage');

(function () {
  var self;

  App.Tracker.StoryPage.keynav = function () {
    if (self) return self.keynav;

    self = {};
    self.storyPageTracker  = App.Tracker.StoryPage.storyPageTracker();
    self.select            = App.Tracker.StoryPage.selectors();

    return (self.keynav = {
      markReadOnKeyNav: markReadOnKeyNav
    });
  };

  function markReadOnKeyNav () {
    self.storyPageTracker.debounceMarkCommentAsRead(
      $(self.select.selectedComment),
      {if: isSelected}
    );
  }

  function isSelected ($comment) {
    return $comment.is(self.select.selectedComment);
  }
})();
_.namespace('App.Tracker.StoryPage');

(function () {
  var UPDATE_READ_COUNT_DELAY = 60000;
  var self;
  var $document;
  var _updateReadCount;

  App.Tracker.StoryPage.onRead = function () {
    if (self) return self.tracker;

    init();

    return (self.tracker = {
      updateDom: updateDom
    });
  };

  function init () {
    $document    = $(document);
    self         = {};
    self.select  = App.Tracker.StoryPage.selectors();
    _updateReadCount = _.debounce(updateReadCount, UPDATE_READ_COUNT_DELAY);
  }

  function updateDom (e, data) {
    markRead(data.$comment);
    _updateReadCount();
  }

  function markRead ($comment) {
    $comment.find(self.select.newIndicator).remove();
  }

  function updateReadCount () {
    App.Tracker.Shared.updateReadCommentStats();
  }
})();
_.namespace('App.Tracker.StoryPage');

(function () {
  // Time in ms required to elapse before repeated calls to markReadOnScroll are actually invoked.
  // fires on trailing edge.
  var SCROLL_THROTTLE = 500;

  // When checking if a comment is scrolled into view, don't check the top and bottom of the viewport.
  // The goal is to mark a comment read when it's near the center of the screen.
  var EXCLUDE_MARGINS = 90;
  var offsetTop;

  var self;

  App.Tracker.StoryPage.scroll = function () {
    if (self) return self.scroll;

    // snooze the scroll listener for:
    // - the duration that it takes to scroll via the comment keyboard shortcuts.
    // - the duration of SCROLL_THROTTLE, since _.throttle fires on the trailing edge.
    var sleepDuration       = App.Comments.KeyboardShortcuts.scrollDuration + SCROLL_THROTTLE;
    var wakeScrollListener  = _.debounce(enableScrollListener, sleepDuration);

    if (offsetTop === undefined) offsetTop = affixedElem.fixedTopHeight();

    self = {};
    self.storyPageTracker   = App.Tracker.StoryPage.storyPageTracker();
    self.select             = App.Tracker.StoryPage.selectors();
    self.viewport           = viewPort({offsetTop: offsetTop + EXCLUDE_MARGINS, offsetBot: EXCLUDE_MARGINS});
    self.tMarkReadOnScroll  = _.throttle(markReadOnScroll, SCROLL_THROTTLE);

    enableScrollListener();

    return (self.scroll = {
      markReadOnScroll: function(){
        self.markReadOnScroll();
      },
      snoozeScrollListener: function () {
        disableScrollListener();
        wakeScrollListener();
      },
    });
  };

  function markReadOnScroll () {
    $(self.select.comment).each(function() {
      var $comment  = $(this);
      var id        = $comment.attr('id');
      var isVisible = self.viewport.contains;

      if (!isVisible($comment)) return;

      self.storyPageTracker.delayMarkCommentAsRead(
        $comment,
        {if: function($comment) {
          if (!isVisible($comment))   return false;
          if ($comment.is('.folded')) return false;

          return true;
        }}
      );
    });
  }

  function enableScrollListener  () { self.markReadOnScroll = self.tMarkReadOnScroll; }
  function disableScrollListener () { self.markReadOnScroll = noop; }
  function noop () {}
})();
_.namespace('App.Tracker.StoryPage');

(function () {
  var selectors;

  App.Tracker.StoryPage.selectors = function () {
    return selectors || (selectors = {
      exploreBar:                '.explore-wrapper',
      comment:                   '.comment:visible:not(.preview):not(.folded)',
      hiddenComment:             '.comment:not(:visible):not(.preview)',
      newIndicator:              '.new_comment_indicator:visible',
      selectedComment:           '.comment.selected:visible:not(.folded)',
      commentCount:              '.total-comments',
      unreadCommentCount:        '.unread-comments',

      getStoryUnreadCommentCount: function (storyKey) { // => 'story-1275859'
        var selector = '#{storyKey} {unreadCommentCount}';

        return selector
          .replace('{storyKey}',           storyKey)
          .replace('{unreadCommentCount}', selectors.unreadCommentCount);
      }
    });
  };
})();
_.namespace('App.Tracker.StoryPage');

//
// Used by the story page only.
//   - Uses DailyKos.currentStoryID on the story-page to determine the current story.
//   - Uses DailyKos.commentsCloseAt to determine close date for archiving.
//   - When given a comment, writes to localstorage to mark it as having been read.
//   - When given a comment, reads from localstorage to determine whether it has been read.
//
(function () {
  var DELAY_TIME    = 5000; // Time required to elapse upon SCROLL. if comment is still VISIBLE  after this time, mark it read.
  var DEBOUNCE_TIME = 1000; // Time required to elapse upon KEYNAV. if comment is still SELECTED after this time, mark it read.

  var self;

  App.Tracker.StoryPage.storyPageTracker = function () {
    if (!DailyKos.currentStoryID) return console.warn('storyPageTracker: story-undefined');

    if (self) return self.storyPageTracker;

    init();

    return (self.storyPageTracker = {
      markCommentRead:           markCommentRead,
      isUnreadComment:           isUnreadComment,
      delayMarkCommentAsRead:    function ($comment, opts) { _(markCommentRead).delay(DELAY_TIME, $comment, opts); },
      debounceMarkCommentAsRead: _.debounce(markCommentRead, DEBOUNCE_TIME)
    });
  };

  function init () {
    var storyKey   = 'story-' + DailyKos.currentStoryID;
    var closeAt    = DailyKos.commentsCloseAt;

    self           = {};
    self.select    = App.Tracker.StoryPage.selectors();
    self.tracker   = App.Tracker.Shared.storyTracker({storyKey: storyKey, commentsCloseAt: closeAt});
    self.$document = $(document);
  }

  function markCommentRead ($comment, opts) {
    opts = opts || {} ;

    if (opts.if && !opts.if($comment)) return;

    var commentKey = $comment.attr('id');

    self.tracker.setReadComment(commentKey);

    self.$document.trigger('comment-read', {$comment: $comment});
  }

  // Takes comment key.
  // Returns true if this comment has been read.
  // isReadComment({id:  '52586'});
  // isReadComment({key: 'comment-52586'});
  function isReadComment (opts) {
    var commentKey   = opts.key || 'comment-' + opts.id;
    var isRead       = self.tracker.isReadComment(commentKey);

    return isRead;
  }

  function isUnreadComment (opts) {
    return !isReadComment(opts);
  }
})();










(function($) {
  if(!window.DailyKos) window.DailyKos = {};
  if(!window.DailyKos.Story) window.DailyKos.Story = {};

  var self = window.DailyKos.Story;

  var isStoryPage   = false,
      storyPageID   = null,
      storyAuthorID = null;

  var __storyData   = {}
  var setStoryData  = function(storyID, data) { return __storyData[storyID.toString()] = data; }
  var getStoryData  = function(storyID) {
    return storyID ? __storyData[storyID.toString()] : __storyData
  }
  var dataLoadedKey = function (storyID) {
    return 'loaded_story_data_' + storyID;
  };

  $.extend(window.DailyKos.Story, {
    dataLoadedKey: dataLoadedKey,
    getRecommenders: function(storyID) {
      var data = getStoryData(storyID);

      if(!data) setStoryData(storyID, {});

      return data && data['recommenders'] || null;
    },
    addRecommender: function(storyID, recommender) {
      var recommenders = self.getRecommenders(storyID) || '';

      recommenders += ',' + recommender;

      getStoryData(storyID)['recommenders'] = recommenders;

      self.reloadRecommendersContent(storyID, true);
    },
    removeRecommender: function(storyID, recommender) {
      var recommenders = self.getRecommenders(storyID) || '';

      if(!recommenders) return;

      if(recommenders === recommender)
        recommenders = ''
      else
        recommenders = recommenders.replace(',' + recommender, '');

      getStoryData(storyID)['recommenders'] = recommenders;

      self.reloadRecommendersContent(storyID);
    },
    reloadRecommendersContent: function(storyID, scrollDown) {
      if(!isStoryPage) return;

      var recsHover = $('#story-' + storyID + ' .show-recs-hover');

      recsHover.each(function(idx, el) {
        var $el         = $(el),
            popContent  = $el.find('.popover-content'),
            popover     = $el.data('bs.popover');

        if(popContent.length == 0) return; // Nothing to do here

        if(_.isEmpty(self.getRecommenders(storyID))) {
          return $el.find('.popover.recommends').detach();
        }

        var scrollPos = popContent.scrollTop();

        popover.show(); // re-show the popover

        if(scrollDown)
          popContent.scrollTop(popContent[0].scrollHeight);
        else
          popContent.scrollTop(scrollPos);
      });
    },
    setRecommended: function(storyID) {
      var domScope = isStoryPage ? $('body') : $("#story-" + storyID);

      domScope.addClass('story-recommended');
      domScope.removeClass('story-unrecommended');
    },
    setUnrecommended: function(storyID) {
      var domScope         = isStoryPage ?  $('body') : $("#story-" + storyID);
      var unrecommendedBtn = domScope.find('.story-recommends');
      function showMessage(){ alert('You cannot recommend this story, because you have already unrecommended it.'); }

      domScope.addClass('story-unrecommended');
      domScope.removeClass('story-recommended');
      unrecommendedBtn.click(showMessage);
    },
    onDataLoad: function(storyID, func) {
      var loadEvent = dataLoadedKey(storyID);
      _.on[loadEvent](func);
    },
    initBlogStories: function (opts) {
      var storyIDs = opts['storyIDs'];

      declareLoadEvents(storyIDs);

      DailyKos.Whoami.onLoadAndFromCache(self.whoamiLoaded);

      self.loadStoryData(storyIDs);

      $(function() {
        _(storyIDs).each(function(storyID) {
          self.setupLinkListeners(storyID);
        })
      });
      $(DailyKos.Polls.initialize);
    },
    initStoryPage: function(opts) {
      isStoryPage   = true;
      this.storyID = storyPageID = String(opts.storyID);
      storyAuthorID = parseInt(opts.authorID);

      declareLoadEvents([storyPageID]);

      DailyKos.Whoami.onLoadAndFromCache(self.whoamiLoaded);
      DailyKos.Story.renderStoryPageBlogList(storyPageID);

      self.loadStoryData(storyPageID);

      $(function() { self.setupLinkListeners(storyPageID) });
      $(DailyKos.Polls.initialize);
    },
    initBackboneComments: function(opts) {

      $.getJSON(opts.commentsPath, function(comments) {
        CommentApp.initialize(comments, opts);
      });
    }, // initAndLoadComments
    whoamiLoaded: function(ev, json) {
      var body = $('body');

      if(DailyKos.canQueueToRescue()) body.addClass('can-rescue');
      if(DailyKos.canRepublish())     body.addClass('can-reblog');

      if(!DailyKos.canRecStory()) return; // User can't recommend

      var curUserID = DailyKos.currentUserId();

      if(isStoryPage) {
        if(curUserID != storyAuthorID) {
          body.addClass('can-story-recommend');
        }
      }
    },
    loadStoryData: function (storyIDs) {
      if(typeof storyIDs === 'string') storyIDs = [storyIDs];

      var storyIDParams = _(storyIDs).join(',');

      $.ajax({
        url:      '/stories/' + storyIDParams + '/user-data',
        cache:    false,
        success:  function(jsonData) {
          _(jsonData).each(function (sData, storyID) {
            setStoryData(storyID, sData);

            var commentRatings   = sData['commentRatings'],
                recommenders     = sData['recommenders'],
                queueableBlogs   = sData['queueableBlogs'],
                rebloggableBlogs = sData['rebloggableBlogs'],
                blogUrls         = sData['blogUrls'],
                blogStories      = sData['blogStories'],
                publishedTo      = sData['publishedTo'],
                isRescued        = sData['isRescued'],
                canRescueStory   = sData['canRescueStory'],
                canEditTags      = sData['canEditTags'],
                canUpdateStory   = sData['canUpdateStory'],
                canPublishStory  = sData['canPublishStory'],
                canReblogStory   = sData['canReblogStory'],
                canEditStory     = sData['canEditStory'],
                recommendCount   = sData['recommendCount'],
                isBackendAdmin   = sData['isBackendAdmin'];

            self.setStoryRatingCount({id: storyID, rating: recommendCount});
            self.handleRecommended(storyID);

            if(isStoryPage) {
              var body = $('body');
              if(canEditStory) body.addClass('can-edit-story');
              if(canRescueStory) body.addClass('can-rescue-story');
              if(canReblogStory) body.addClass('can-reblog-story');
              if(canUpdateStory) body.addClass('can-update-story');
              if(canPublishStory) body.addClass('can-publish-story');
              if(canEditTags)    body.addClass('can-edit-tags');
              if(isRescued)      body.addClass('is-rescued');
              if(isBackendAdmin) body.addClass('is-backend-admin');
              $(document).trigger('permissions-loaded');

              DailyKos.queueableBlogs = queueableBlogs;
              DailyKos.rebloggableBlogs = rebloggableBlogs;
              DailyKos.blogUrls       = blogUrls;
              DailyKos.blogStories    = blogStories;
              if(!showNewComments) {
                CommentApp.setRatings(commentRatings);
              }

              self.createRecommendsPopover(storyID);
            }

            var loadEvent = dataLoadedKey(storyID);
            _.trigger[loadEvent](getStoryData(storyID));
          });
        }
      });
    },
    handleRecommended: function(storyID) {
      var sData = getStoryData(storyID);

      var $story = $('#story-' + storyID),
          elData = $story.data(),
          curUserID = DailyKos.currentUserId();

      if(curUserID != elData['authorId'])
        $story.addClass('can-story-recommend');

      switch(sData.isRecommended) {
        case true:  self.setRecommended(storyID);   break;
        case false: self.setUnrecommended(storyID); break;
      }
    },
    createRecommendsPopover: function(storyID) {
      var storyRecHoverElems = $('#story-' + storyID + ' .show-recs-hover');

      DailyKos.RecommendsPopover.setupPopover(
        storyRecHoverElems,
        function($el) { return self.getRecommenders(storyID); },
        { placement: 'right' }
      );
    },
    setupLinkListeners: function(storyID) {
      $('.scroll-to-comments').click(function(e) {
        if ($('body').attr('id') == "blogs") return //default link is working just fine on blog pages
        e.preventDefault();

        var commentsAnchor = $('a.anchor[name="comments"]');

        $(document).scrollTop( commentsAnchor.offset().top );
      });

      var recommending = false;

      var $story = $('#story-' + storyID);

      $story.find('.recommend.rec-story, .story-recommend-btn').click(function(e) {
        e.preventDefault();

        if(recommending) return;

        if (!DailyKos.isLoggedIn()) {
          $('#show-log-in-to-recommend').parent().css('height', '8.375rem');
          $('#show-log-in-to-recommend').slideDown('fast');
          return;
        }

        recommending = true;
        $.ajax({
          url: "/stories/" + storyID + "/recommend.json",
          method: 'POST',
          success:  function(json) {
            self.setRecommended(storyID);
            self.addRecommender(storyID, DailyKos.currentUserNickname());
            self.setStoryRatingCount({id: storyID, rating: json.count});
          },
          complete: function() { recommending = false; }
        })
      })

      $story.find('.unrecommend.unrec-story, .story-recommend-btn').click(function(e) {
        e.preventDefault();

        if(recommending || !DailyKos.isLoggedIn()) return;

        var yes_no = DailyKos.showConfirm(
          "Are you sure you want to remove your recommendation? "     +
          " You can only recommend a story once, so you will not be " +
          " able to re-recommend it afterwards."
        );

        if(!yes_no) return;

        recommending = true;
        $.ajax({
          url: "/stories/" + storyID + "/unrecommend.json",
          method: 'POST',
          success:  function(json) {
            self.setUnrecommended(storyID);
            self.removeRecommender(storyID, DailyKos.currentUserNickname());
            self.setStoryRatingCount({id: storyID, rating: json.count});
          },
          complete: function() { recommending = false; }
        })
      })
    },
    // Render number of story-recs on the blog and story pages.
    // self.setStoryRatingCount({rating: 10, $el: $story-rec-count});
    // self.setStoryRatingCount({rating: 10,  id: storyID});
    setStoryRatingCount: function(story) {
      var $el = story.$el || $("#story-" + story.id + " .story-rec-count");
      var rating = story.rating || '0';

      $el.text(rating)
         .attr('data-story-rec-count', rating);
    },
    popoverDismissOnClick: function(){
      // Dismiss popovers when .close-popover is clicked
      $('body').on('click', '.close-popover', function(e){
        e.preventDefault();
        var container = $(this).closest('.popover');
        $(container).parent().
                     find('[data-toggle="popover"]').
                     popover('hide');
      });

      $('body').on('click', '.confirm-close-popover', function(e){
        e.preventDefault();

        var $container = $(this).closest('.popover');
        DailyKos.Modal.showConfirmation(
          '<p>Your updates will be lost when you close the update box.</p>',
          'Are you sure you want to close the update box?', {
          primaryBtnLabel: 'Close anyway',
          defaultBtnLabel: 'Cancel',
          onSubmit: function() {
            $container.parent().find('[data-toggle="popover"]').popover('hide');
          }
        });
      });
    },
    // Disables the jump caused <a href='#'> popovers.
    popoverPreventDefault: function(){
      $('[data-toggle="popover"]').on('click',function(e){
        e.preventDefault();
      }).popover();
    },

    updateDisclaimerBox: function() {
      var currentUserId = DailyKos.currentUserId();

      var existing_user_text = "<a href='/stories/new'>Click here</a> to write your own story on Daily Kos.";
      var non_user_text = "<a href='/login'>Login</a> or create an <a href='/signup'>account</a>.";

      if (currentUserId) {
        $(".story-community-disclaimer .disclaimer-action").html(existing_user_text);
      } else {
        $(".story-community-disclaimer .disclaimer-action").html(non_user_text);
      }
    },

    // Auto fetch "live-updates" from story-page.
    // Requires:
    // - user prefs.autorefreshMode is enabled
    // - newly posted live-updates
    autoUpdateStory: function(storyPath){
      hoursOld = Math.abs((new Date()) - $(".author-date").children().attr("data-epoch-time"))/ 3600000
      if (hoursOld > 24) return

      function autoUpdateStory() { $('#story-full-content').autoUpdateStory(storyPath); }

      // If user-preference for auto-update is loaded, then init auto-updates. Terminate.
      if (DK.preferAutoRefresh()) return autoUpdateStory();

      // Otherwise, wait until the preference is loaded and then check for the pref again.
      $(document).on('permissions-loaded', function(){
        if (DK.preferAutoRefresh()) autoUpdateStory();
      });
    },

    // Call this to run render All The Things for stories: embeds, timetrack, format local time, etc.
    //
    // DailyKos.story.postRender('123')
    //
    // If you only need to perform postRender on a particular element of the story,
    // you can specify the $node. Hacky afterthought since we're essentially doing $('#story-123').find($child)
    //
    // It'd be nice to just pass $el to postRender someday.
    //
    // DailyKos.story.postRender('123', $somechild)
    //
    // Shared Code between:
    // - Blog
    // - Story
    postRender: function(storyID, $specificNode) {
      _.defer(function() {
        var isStoryPage = $('body#stories').length;
        var $storyEl    = $('#story-' + storyID);
        var $container  = (isStoryPage) ? $storyEl.find('.story-column')
                                        : $storyEl.find('.story-intro-wrapper');

        if ($specificNode) $container = $container.find($specificNode);

        DailyKos.Time.localizeAll($container);

        insertEmbeds($container);
        DK.Instagram.instagramRenderEmbeds();
        DK.AssociatedPress.renderEmbeds();
        $container.twtRenderTweets();
        $container.actionNetworkRender(storyID);
        $(function () {
          // this is called after rendering: blog, story, live-story-updates, and possibly more.
          if(!isStoryPage) return;
          $container = $container.add('.top-story-image');
          DailyKos.loadAttributions($container);
          if ($('.story-column').height() < 460) {
            $('.story-stats .social-blocks-container').addClass('short-story');
            $('#story-tag').addClass('short-story');
          }
        });
      });
    }
  });

  function insertEmbeds ($container) {
    $container
      .find('object')
      .each(function(i, embed){
        var $embed  = $(embed);
        var html = ($embed[0]).outerHTML;
        html = html.replace(/http(s)?:\/\//g, 'https://');
        $embed.replaceWith(html);
      });

    $container
      .find('.iframe_placeholder, iframe')
      .each(function(i, iframe) {
        var $iframe  = $(iframe);
        var $wrapper = $iframe.closest('.dk-editor-embed');

        var html = ($wrapper[0] || $iframe[0]).outerHTML;
        html = html.replace(/http(s)?:\/\//g, 'https://');
        html = DK.Embeds.Prerender.html(html);
        $iframe.replaceWith(html);
      });
  }

  var textElements = [
    'P', 'A', 'BLOCKQUOTE', 'SPAN', 'EM', 'PRE', 'H1', 'H2', 'H3', 'H4',
    'STRING', 'DEL', 'INS', 'SUB', 'SUP', 'TT', 'OL', 'UL', 'LI'
  ]

  function isTextElement(node) {
    if(textElements.indexOf(node.nodeName) >= 0) {
      // Make sure it contains actual text! Wow!
      return node.textContent.trim() !== "";
    }

    if(node.nodeName === '#text' && node.wholeText.trim() !== "") {
      return true;
    }

    return false;
  }

  function declareLoadEvents (storyIDs) {
    var events = _(storyIDs).map(dataLoadedKey);
    _.events(events);
  }
})(jQuery);
(function($) {
  if(!window.DailyKos) window.DailyKos = {};
  if(!window.DailyKos.Polls) window.DailyKos.Polls = {};

  var self = DailyKos.Polls;

  var storyPollStorageKey = 'story-poll-';

  initializedPolls = {};

  $.extend(window.DailyKos.Polls, {
    initialize: function () {
      $('.blog-story-wrapper, .full-story-wrapper').each(function (_idx, wrapperEl) {
        var $wrapperEl  = $(wrapperEl),
            storyPolls  = $wrapperEl.find('.story-poll');

        storyPolls.each(function (idx, el) {
          var storyPoll   = $(el),
              spData      = storyPoll.data(),
              pollId      = spData['pollId'],
              storyId     = spData['storyId'];

          if(initializedPolls[pollId]) return;
          initializedPolls[pollId] = true;

          var voteDiv     = storyPoll.find('.story-poll-vote-wrapper'),
              resultDiv   = storyPoll.find('.story-poll-results-wrapper'),
              votedAid    = simpleStorage.get(storyPollStorageKey + storyId),
              pollIsVoted = !!votedAid,
              isVoting    = false;

          var setAsVoted = function() {
            pollIsVoted = true;
            if(!votedAid) votedAid = true;

            simpleStorage.set(storyPollStorageKey + storyId, votedAid);

            voteDiv.css('display', '');
            resultDiv.css('display', '');

            $wrapperEl.addClass('has-voted');
            $('#result-' + votedAid).addClass('user-voted');
          }

          DailyKos.Story.onDataLoad(storyId, function (event, json) {
            if(!json['poll']) return;

            var pollData = json['poll'];

            if(pollData['userVoted']) {
              setAsVoted();
            }

            self.updateStoryPollWithData(storyPoll, pollData);
          });

          if(pollIsVoted) {
            setAsVoted();
          } else {
            // You (probably) haven't yet voted (story user-data may correct this)

            // Setup toggling between Cast-Vote & View-Results
            storyPoll.find('.toggle-vote-results').click(function (event) {
              event.preventDefault();
              // New product requirement: Viewing results disables your ability to vote
              var confirmed = DailyKos.showConfirm("Warning: You won't be able to vote if you view results. Continue?");

              if(confirmed) setAsVoted();
              // voteDiv.toggle();
              // resultDiv.toggle();
            });

            // Function for removing the email text box if the user has a cookie
            // showing we have their email goes here
            var dk_signed_list_cookie = $.cookie('dk_signed_list');
            if (dk_signed_list_cookie !== null && dk_signed_list_cookie.length > 0) {
              storyPoll.find('.poll-boilerplate').hide();
              storyPoll.find('#poll_vote_email').hide();
            }


            // Listen to the form submission, so we can toggle the poll voted-state:
            storyPoll.find('form.new_poll_vote')
              .on('ajax:before', function (e) {
                var email = $("input#poll_vote_email");
                if (email.is(":visible") && email.val() === "") {
                  alert("Please provide your email address to vote");
                  return false;
                }
                var isSelected = $(e.target).find('input:checked').length;
                var continueSubmit = true;
                if (!isSelected) {
                  DailyKos.Modal.showError("<p>Please make a selection to vote.</p>", "Poll Error");
                }
                if (!isSelected || isVoting) {
                  e.preventDefault();
                  e.stopPropagation();
                  return false
                }
                if (!!isSelected)  {
                  votedAid = storyPoll.find('input[name="poll_vote[poll_answer_id]"]:checked')[0].value;
                }
                isVoting = true;

              })
              .on('ajax:success', function (event, data, status, xhr) {
                setAsVoted();
                var cookie = App.Ads.Splash.Cookies;

                // Use id 0 for poll email votes
                cookie.addToSignedSplash("0");
                cookie.setCookie('dk_signed_list', cookie.signedIds, false);

                if(xhr && xhr.responseJSON) {
                  self.updateStoryPollWithData(storyPoll, xhr.responseJSON['poll']);
                }
              })
              .on('ajax:error', function (event, xhr, status, error) {
                isVoting = false;
                event.preventDefault();

                var errorMsg = "There was an error submitting your vote. Please try again.";

                if(xhr && xhr.responseJSON) {
                  var json = xhr.responseJSON;

                  if(/already voted/.test(json['error'])) {
                    return setAsVoted();
                  }

                  if(json['error']) errorMsg = json['error'];
                }

                DailyKos.showAlert(errorMsg);
              })
          }
        });
      });

      isInitialized = true;
    },
    updateStoryPollWithData: function (storyPoll, pollData) {
      if(!pollData) return;

      var numVoters = pollData['num_voters'];

      if(!numVoters) return; // Can't really calculate anything
      numVoters = parseInt(numVoters);

      storyPoll.find('.vote-count').text(numVoters);

      _(pollData['answers']).each(function(pollAnswer) {
        var votes       = pollAnswer['num_votes'],
            answerId    = pollAnswer['id'],
            percentage  = pollAnswer['percentage'];

        if(!votes) return; // wat

        var $answerResult = storyPoll.find('#result-' + answerId),
            $progressBar = $answerResult.find('.progress-bar'),
            $numVotes = $answerResult.find('.num-votes'),
            $smallPercentageLabel = $progressBar.next('.small-percentage-label');

        $progressBar.attr({
          'aria-valuenow': percentage,
          'style': 'width: ' + percentage + '%'
        })

        if(percentage >= 10) {
          $progressBar.text(percentage + '%').removeClass('small-poll-percentage')
          $smallPercentageLabel.text('')
        } else {
          $progressBar.text('.').addClass('small-poll-percentage')
          $smallPercentageLabel.text(percentage + '%')
        }

        if(votes == 1)
          $numVotes.text("1 vote")
        else
          $numVotes.text(votes + " votes")
      })
    }
  });
})(jQuery);
(function($) {
  if(!window.DailyKos) window.DailyKos = {};
  if(!window.DailyKos.Story) window.DailyKos.Story = {};
  if(!window.DailyKos.Story.Tags) window.DailyKos.Story.Tags = {};

  var Story = DailyKos.Story,
      self = DailyKos.Story.Tags;

  $.extend(self, {
    init: function() {
      DailyKos.Whoami.onLoadAndFromCache(function() { self.setupFollowTagsJS(); });
      $(function() { setTimeout(self.setupScrollFade, 3000); });
    },
    markFollowedTags: function() {
      if(DailyKos.isLoggedIn() !== true) return;
      if(DailyKos.followedTags().length <= 0) return;

      var storyTagsParent     = $('#story-tag'),
          prevFollowedTags    = storyTagsParent.find('.following'),
          currentFollowedTags = [];

      _(DailyKos.followedTags()).each(function(tagId) {
        var $tagEl = storyTagsParent.find('#' + tagId).addClass('following');

        currentFollowedTags.push($tagEl[0]);
      });

      prevFollowedTags.not(currentFollowedTags).removeClass('following');
    },
    setupFollowTagsJS: function(ev, json) {
      self.markFollowedTags();

      if(DailyKos.canHotlist() !== true) return;

      // Follow a tag:
      var container = $('#story-tag');
      container.delegate('.follow-tag-icons .not-following-tag', 'ajax:success', function(data, status, jqXHR) {
        var $this = $(this), data = $this.data();

        $('#' + data['tagId'] + '.story-tag').addClass('following');
      });

      // Unfollow a tag:
      container.delegate('.follow-tag-icons .following-tag', 'ajax:success', function(data, status, jqXHR) {
        var $this = $(this), data = $this.data();

        $('#' + data['tagId'] + '.story-tag').removeClass('following');
      });
    },
    // This is really only a thing if there are a LOT of tags attached to the story
    setupScrollFade: function() {
      var moreTags = $('.story-tags-wrapper .more-tags-indicator');
      var storyTags = $('.story-tags-wrapper #story-tag');

      if (isScrollBottom())
        moreTags.fadeOut();
      else
        moreTags.fadeIn(200);

      $('.story-tags-wrapper').hover(
        function() { moreTags.fadeOut(); },
        function() {
          if(isScrollBottom())
            return; // we're scrolled to the bottom, so don't display the bottom fade
          else
            moreTags.fadeIn(200);
        }
      );
      function isScrollBottom() {
        if(storyTags[0]) {
          return storyTags[0].scrollHeight - storyTags.scrollTop() == storyTags.outerHeight();
        }
        return true; // Shoo!
      }
    }
  });

})(jQuery);
// Tag editor for the single story view page.

(function(){
  if(!window.DailyKos) window.DailyKos = {};
  if(!window.DailyKos.TagEditor) window.DailyKos.TagEditor = {};
  var instance = null; // tagit.js object instance
  var MODE     = {view: 'story-tag', edit: 'story-tag-edit'}; // edit/view class
  var storyID  = null;

  window.DailyKos.TagEditor.init = function() {
    if (!canEditTags()) return;

    _(window.DailyKos.TagEditor).extend({
      onClickEdit: function() {
        renderSwitch(MODE.edit);
        inputField().focus();
        return false;
      },
      onClickDone: function() {
        // attempt to save any data left in a new tagit box
        var $openBox = $('#story-tag-edit li.tagit-new input');
        if($openBox.length > 0 && $openBox.val().length > 0) {
          var boxKeyDown = jQuery.Event( 'keydown', { which: $.ui.keyCode.ENTER } );
          $openBox.trigger(boxKeyDown);
        }

        renderSwitch(MODE.view);
        fetchStoryTagHistory();
        return false;
      },
      onClickRestore: function(elem) {
        updateTags($(elem).data('tag-list').join(), 'PUT', storyTagRestoreUrl());
        $('#story-tag-history-modal').modal('hide');
        renderSwitch(MODE.view);
        fetchStoryTagHistory();
        return false;
      },
      onClickCancel: function() {
        return false;
      },
    });

    switchToLink('edit');
    disableTagDeleteOnBackspace();
    DailyKos.TagEditor.disableSpaceKey('.story-tags-wrapper');
  };

  // Call DailyKos.TagEditor.init() when both
  // 'init-story-tag-editor' and 'perms-loaded' events have triggered.
  $(document).onSync('init-story-tag-editor permissions-loaded', function(e, data){
    storyID = data['init-story-tag-editor'].storyID;
    DailyKos.TagEditor.init();
  });

  return;

  // -- Helpers --

  function canEditTags()        { return !!$('body.can-edit-tags').length; }
  function id(str)              { return '#' + str; }
  function inputField()         { return $('.tagit-new input'); }
  function doneLink()           { return $('#story-tag-done-link a'); }
  function storyTagUrl()        { return '/stories/' + storyID + '/story_tags'; }
  function storyTagRestoreUrl() { return '/stories/' + storyID + '/story_tags/restore'; }
  function tagList()            { return $('#story-tag-edit').tagit('assignedTags'); }

  function displayError(msg) {
    alert(msg || "An error occurred. Please try again later.");
  }

  function rawTagList()    {
    return $('.story-tags-wrapper').find('a.tag-name').map(function () {
      return decode($(this).text());
    });
  }

  function renderSwitch(mode) {
    render(mode);
    switchTo(mode);
  }

  function tagitInit(el) {
    instance = el.tagit(tagitOptions());
    instance.keydown(function(e) {
      if (e.which === 9) return false; // prevent tab key from leaving input box
    });
  }

  // renders the dom elements
  function render(mode) {
    if (mode === MODE.edit) {
      renderEdit();
    } else if (mode === MODE.view) {
      renderView();
    }

    return;
  }

  function renderEdit() {
    clearEditTag();
    showMoreTagsIndicator(false);

    var tagView = $(id(MODE.view));
    var tagEdit = tagView.clone();

    $('.story-tags-wrapper').addClass('editing-tags');
    tagEdit.attr({id: MODE.edit});
    tagEdit.find('.follow-tag-icons').remove();
    tagEdit.find('a').each(function(){this.outerHTML = this.innerHTML;});
    tagEdit.insertAfter(tagView);

    tagitInit(tagEdit);

    switchToLink('save');
    scrollToBottomOf(id(MODE.edit));

    function clearEditTag() { $(id(MODE.edit)).remove(); }
  }

  function renderView() {
    showMoreTagsIndicator(true);

    var tags = tagList();
    if (!tags) return alert('tags must not be empty');

    switchToLink('edit');
    scrollToBottomOf(id(MODE.view));
  }

  function renderTags(tags) {
    var tagListItems = _(tags).map(function(tag){
      var a  = $('<a href="/tags/' + tag + '">').append(tag);
      var li = $('<li class="story-tag">').append(a);
      return li;
    });

    $(id(MODE.view)).html(tagListItems);
  }

  function showMoreTagsIndicator(visible) {
    if (visible) setTimeout(setVisibility, 2000);
    else         setVisibility();

    function setVisibility() {
      var show = 0;
      var hide = -1000;
      $('.more-tags-indicator').css('left', visible ? show : hide);
    }
  }

  function switchToLink(linkType) {
    if (linkType === 'save') {
      $('#story-tag-done-link').show();
      $('#story-tag-edit-link').hide();
      $('#story-tag-history-link').hide();
    } else if (linkType === 'edit') {
      $('#story-tag-edit-link').show();
      $('#story-tag-history-link').show();
      $('#story-tag-done-link').hide();
    }
  }

  // show selected mode
  // hide other modes
  function switchTo(mode) {
    var hideList = _(MODE).without(mode);
    _(hideList).each(hide);
    $(id(mode)).show();
    function hide(m) { $(id(m)).hide(); }
  }

  function updateTags(story_tags, mode, url) {
    doneLink().html('Saving...');

    $.ajax({
      url:         url,
      data:        {story_tags: story_tags},
      type:        mode,
      success: function(tagListItems, textStatus, xhr){
        $('#story-tag').html(tagListItems);
        if (url == storyTagRestoreUrl()) { renderSwitch(MODE.view); }
        fetchStoryTagHistory();
      },
      error: function(xhr){
        var message = getXHRErrorMessage(xhr);
        displayError(message);
      },
      complete: function(){
        hideGradient();
        doneLink().html('Done Editing Tags');
      },
    });

    var success = true;
    return success;
  }

  function hideGradient() {
    $('.story-tags-wrapper').trigger('mouseenter');
  }

  function getXHRErrorMessage(xhr) {
    try {
      switch(xhr.status) {
        case 0:
          return "Please check your internet connection and try again.";
        case 401:
          return xhr.responseText;
        case 403:
        case 404:
          return "You do not have permission to modify these story tags.";
        case 500:
          return "There was a server error. Please try again later.";
        default:
          return xhr.responseJSON.errors.join('; ');
      }
    } catch(e) {
      return null;
    }
  }

  function tagitOptions() {
    return {
      placeholderText:      "Add a tag...",
      allowSpaces:          true,
      caseSensitive:        false,
      animate:              false,
      preprocessTag:        DailyKos.TagEditor.preprocessTag,
      onTagExists:          DailyKos.TagEditor.onTagExists,
      beforeTagAdded:       beforeTagAdded,
      afterTagAdded:        afterTagAdded,
      onTagRemoved:         onTagRemoved,
      removeConfirmation:   true,
      disableInputFocus:    true,
    };

    function afterTagAdded(event, ui) {
      scrollToBottomOf(id(MODE.edit));
    }

    function beforeTagAdded(event, ui) {
      var tagLabel = decode(ui.tagLabel);
      var tagIndex = rawTagList().toArray().indexOf(tagLabel);

      if (isInvalidTag(tagLabel)) return false;
      if (tagIndex == -1) {
        updateTags(tagLabel, 'POST', storyTagUrl());
      }
      updateTagLabel();

      function updateTagLabel() {
        ui.tag.find('.tagit-label').text(tagLabel);
        ui.tag.find('input').val(tagLabel);
      }
    }

    function onTagRemoved(event, ui) {
      if (!(rawTagList().length > 1)) return alert('You must enter at least one tag.');

      var tagLabel = decode(ui.find('.tagit-label').html());

      updateTags(tagLabel, 'DELETE', storyTagUrl());
    }
  }

  // Warning: H4x
  // The goal here is to disable the ability to remove tags via the backspace
  // key. This is something tagit.js doesn't have an option for by default.
  // We can't use preventDefault because our bind on keydown (below) fires
  // after the tagit.js keydown bind to remove the tag. Tagit.js has an option
  // for removeConfirmation - which requires the user to hit backspace twice
  // to remove the tag. On the first backspace, it adds a class ('remove') to
  // the last tag added. On the second backspace, it checks if the 'remove'
  // class exists then removes the last tag. We exploit this behavior by
  // enabling the 'removeConfirmation' option and, upon backspace, always
  // clear the 'remove' class - thereby preventing tags from being deleted
  // via backspace.
  function disableTagDeleteOnBackspace() {
    var tagContainer = '.story-tags-wrapper';
    var tagInputBox  = '.ui-widget-content.ui-autocomplete-input';

    $(tagContainer).delegate(tagInputBox, 'keydown', removeConfirmationClass);

    function removeConfirmationClass(event) {
      if (event.which === $.ui.keyCode.BACKSPACE) {
        instance.children('.tagit-choice:last').removeClass('remove');
      }
    }
  }

  function isInvalidTag(tag) {
    var invalid = (/[^a-zA-Z0-9&\.-]|\.$/).test(tag);
    if (!invalid) return false;

    var titleMessage = tag + " is not a valid tag.";
    var errorMessage = "Allowed characters are: letters, numbers, and -.&.  Trailing periods are not allowed.";

    DailyKos.Modal.showError(errorMessage, titleMessage);

    return true;
  }

  function scrollToBottomOf(selector) {
    _.defer(function(){
      $('.story-tags-wrapper ul').scrollTop($(selector).prop("scrollHeight"));
    });
  }

  // "&amp;" becomes "&"
  function decode(str) {
    try {
      var decoded = $('<a>').html(str).text();
      if (decoded) return decoded;
    } catch(e) {
      // parse fail
    }
    return '';
  }

  function storyTagHistoryUrl() {
    return '/stories/' + storyID + '/tags/history';
  }

  function fetchStoryTagHistory() {
    $.ajax({
      url:     storyTagHistoryUrl(),
      type:    "GET",
      success: function(tagHistoryHtml, textStatus, xhr){
        $('#story-tag-history-modal').html(tagHistoryHtml);
      },
      error: function(xhr){
        var message = getXHRErrorMessage(xhr);
        displayError(message);
      }
    });
  }
})();
// Renders the list of blogs that this story is published to in the sidebar.
//
// Basically, this takes the list of blog_stories and renders them in the sidebar.
// We do this via JS, instead of ERB because varnish caches the page.
//
// When a story is reblogged it needs to be seen by the user right away,
// otherwise they'll think the reblog failed. So, here we are. JS.
//
// Ideally, we'd invalidate varnish cache - maybe later.

DailyKos.Story.renderStoryPageBlogList = function(storyID){
  var blogListContainer = $('#story-blog-list');
  var loadEvent = DK.Story.dataLoadedKey(storyID);

  _.on[loadEvent](renderBlogList);

  function renderBlogList(e, storyData) {
    var publishedTo = storyData.publishedTo;

    _(_.pairs(publishedTo)).each(insertBlog);

    $('.story-blog-info').show();
  }

  function insertBlog(entry){
    var li = renderListItem(entry[0], entry[1]);

    var blogListText = blogListContainer.text();
    var blogPathUrl = blogPath(entry[1].url_name);

    if (blogListText.indexOf(entry[0]) == -1
      && blogListText.indexOf(blogPathUrl) == -1) {
      blogListContainer.append(li);
    }
  }

  function renderListItem(name, details) {
    var listItem = '<li><a class="designation-{{blogDesignation}}" href="{{blogPath}}">{{blogName}}</a></li>'
                   .replace('{{blogDesignation}}', details.designation)
                   .replace('{{blogPath}}', blogPath(details.url_name))
                   .replace('{{blogName}}', name);

    return $(listItem);
  }

  function blogPath(url_name) {
    return '/blogs/' + encodeURIComponent(url_name);
  }
};
(function(){
  DailyKos.Story.Image = {
    getImageClass:             getImageClass
  };

return;

  // The measurements below are based on the width of the .story-full-content container
  // at all the various bootstrap grid sizes. So when the window is at it narrowest,
  // .story-full-content is 540px, divide that by two and you get 220px. We divide it by
  // two because that's the midpoint of the container. If the image is less than
  // half the width of the container, our CSS will align-right the image. If the image
  // is greater than half the width of the container, our CSS will full-size the image.
  //
  //                        .story-full-content      Midpoint (x/2)
  // Bootstrap-grid-small   540px                    220px
  // Bootstrap-grid-medium  624px                    312px
  // Bootstrap-grid-large   764px                    382px
  //
  function getImageClass(el){
    var width = el.naturalWidth || el.width; // old browser fallback

    if      (width < 220) return 'width-sm';
    else if (width < 312) return 'width-md';
    else if (width < 382) return 'width-lg';
    else                  return 'width-xl';
  }
})();
(function () {
  if(!window.DailyKos) window.DailyKos = {};

  window.DailyKos.loadAttributions = function($container) {
    $container = $container || $('.image_container, .intro_image, .story-intro-wrapper, .story-body');

    var attributions = {};
    var containers = $container.find('img');

    containers.each(function (idx, el) {
      var $self = $(el);
      var src =  $self.attr("data-src") || $self.attr("src");
      if(!src) return;

      var match = src.match(/\/images\/(\d*)\//);

      if (!(match && match[1])) return;

      var id = match[1];

      if(attributions[id])
        attributions[id].push($self);
      else
        attributions[id] = [$self];
    });

    if(_.isEmpty(attributions)) return;

    $.getJSON("/attribution_check/" + _.keys(attributions).join(',') + "/attributions.json", function(data) {

      for(var id in data) {
        _(attributions[id]).each(function ($el) {
          var attribution = data[id];

          attribution = (attribution) ? "attribution: " + attribution : ''; // set/un-set attributions. Required for story-editor primary-image where attributions are replaced.

          var $figure  = $el.closest('figure');

          if (!$figure.length) return;

          var $caption = getFigcaption($figure);

          $caption.attr({
            'data-image-attribution': attribution,
            'title':                  attribution
          });
        });
      }
    });
  };

  window.DailyKos.loadAttributionsForComments = function() {
    if(showNewComments) { return; }

    if (CommentApp && CommentApp.initComplete) {
      fnLoadAttributions();
    } else {
      $(document).on('comments-loaded', fnLoadAttributions);
    }

    function fnLoadAttributions() { DailyKos.loadAttributions($('#comments .comment-text')); }
  };

  // Takes a figure element
  // Finds or creates a figcaption
  function getFigcaption ($figure) {
    var $caption = $figure.find("figcaption");

    if ($caption.length) {
      return $caption;
    } else {
      $caption = $('<figcaption>');
      $figure.append($caption);
      return $caption;
    }
  }
})();

(function() {
  if(!window.DailyKos) window.DailyKos = {};
  if(!window.DailyKos.Story) window.DailyKos.Story = {};

  DailyKos.Story.ConfirmBumpPost = ConfirmBumpPost;

  function ConfirmBumpPost(target) {
    var url = target.href;

    DailyKos.Modal.showConfirmation(
      '<p>Please confirm that you would like to bump this story to the top of the page.</p>',
      'Please confirm',
      {
        primaryBtnLabel: 'Confirm',
        defaultBtnLabel: 'Cancel',
        onSubmit: function() { window.location.href = url; }
      }
    );
    return false;
  }

})();
(function() {
  var CKE = _.namespace('DailyKos.CKE');

  _(CKE).extend({
    instance:                     instance,
    getCursorStart:               getCursorStart,
    getClosest:                   getClosest,
    getContainer:                 getContainer,
    getSelection:                 getSelection,
    setCursorBefore:              setCursorBefore,
    setCursorAfter:               setCursorAfter,
    setSelection:                 setSelection,
    element:                      element,
    addButtonPlugin:              addButtonPlugin,
    setDialogButtonOrderInIE:     setDialogButtonOrderInIE,
    currentEditorInstance:        null,
    setLinkPopover:               setLinkPopover //setLinkPopover
  });

  _($.fn).extend({
    ckeTopLevelEl: $ckeTopLevelEl
  });

return;

  // -- Helper Definitions --

  // Returns the editor instance that is currently
  // in focus from the set of CKEDITOR.instances.
  // Returns null if no editor is in focus.
  function instance() {
    return CKE.currentEditorInstance || // This is set upon focus by us; reliable.
           CKEDITOR.currentInstance;    // This is set by ckeditor; becomes null when browser loses focus and is slow to be reassigned
  }

  // Get the start position of the cursor.
  function getCursorStart() {
    return getSelection().getStartElement().$;
  }

  // Find the parent with the provided selector.
  // Get the start position of the cursor.
  function getClosest(selector){
    return $(getCursorStart()).closest(selector);
  }

  function getContainer(){
    try {
      return $(instance().container.$);
    } catch(e) {
      return $();
    }
  }

  // Get cursor/caret selection.
  function getSelection() {
    return instance().getSelection();
  }

  function setCursorBefore(el) {
    setSelection(el, 0, el, 0);
  }

  function setCursorAfter(el) {
    setSelection(el, 1, el, 1);
  }

  // Selects the on-screen text.
  // See diagram at: http://www.w3.org/TR/DOM-Level-2-Traversal-Range/ranges.html
  // Usage: Provide the element and the offset. The element is the
  // dom node and the offset is the number of characters (if your element
  // has children, then the offset indicates the nth-child)
  function setSelection(elStart, offsetStart, elEnd, offsetEnd) {
    elStart = node(elStart);
    elEnd   = node(elEnd);

    if (!elStart || !elEnd) return;

    var elementStart = element(elStart);
    var elementEnd   = elStart === elEnd ? elementStart : element(elEnd);
    var ranges       = getSelection().getRanges();

    // set range start & end
    ranges[0].setStart(elementStart, offsetStart);
    ranges[0].setEnd(elementEnd,     offsetEnd);

    // apply the range to the selection
    getSelection().selectRanges(ranges);

    // // alternative method of performing selections
    // // instantiate a range object
    // var range = instance().createRange();
    // range.setStart(element, 1 );
    // range.setEnd(element, 1 );
    // // apply the range to the selection
    // instance().getSelection().selectRanges([ range ]);
  }

  // Given an element, returns a CKEDITOR.dom.element.
  // Acceptable parameters can be any of the following types:
  // 'span' or $('span') or $('span')[0]
  function element(el) {
    el = _.isString(el) ? el : node(el);

    return new CKEDITOR.dom.element(el);
  }

  // Adds a button to the CKE toolbar.
  // Use this function to add a button with a click event to the toolbar.
  //
  // Usage Example:
  //   // Use this when you need a custom event to happen on button click
  //   DailyKos.CKE.addButtonPlugin({
  //     /* Plugin Options */
  //     pluginName:     'pluginName',           // String - The plugin name at /ckeditor/plugins/(...)/plugin.js
  //     init:           init,                   // Function - Called when CKE initializes
  //     afterInit:      afterInit,              // Function - A function called on initialization of every editor instance created on the page after the init call task. This feature makes it possible to use things that were initialized in the init function of other plugins.
  //     /* Button Options */
  //     command:        'openImageLibrary',     // String - The name of the exec command.
  //     label:          'Image Library',        // String - The tool tip displayed on hover.
  //     commandDef:     {exec: func}            // Object - obj.func is called upon button click. If hasDialog is true, this is ignored.
  //   });

  //   // Use this when you need to open a CKE dialog
  //   DailyKos.CKE.addButtonPlugin({
  //     /* Plugin Options */
  //     pluginName:     'pluginName',           // String - The plugin name at /ckeditor/plugins/(...)/plugin.js
  //     init:           init,                   // Function - Called when CKE initializes
  //     afterInit:      afterInit,              // Function - A function called on initialization of every editor instance created on the page after the init call task. This feature makes it possible to use things that were initialized in the init function of other plugins.
  //     /* Button Options */
  //     command:        'openImageLibrary',     // String - The name of the exec command.
  //     label:          'Image Library',        // String - The tool tip displayed on hover.
  //     hasDialog:      true,                   // Boolean - On button click, opens dialog box. If hasDialog is true, opts.exec is ignored. You must define a dialog in ./plugins/pluginName/dialogs/pluginName.js. See http://docs.ckeditor.com/#!/guide/plugin_sdk_sample_1 for details.
  //   });
  function addButtonPlugin(opts) {
    var pluginName = opts.pluginName;

    CKEDITOR.plugins.add(pluginName, {
      afterInit:   opts.afterInit,
      icons:       pluginName,
      init:        init,
      onLoad:      opts.onLoad
    });

    // On init add button to UI and invoke the
    // user-provided initialization function.
    function init(editor) {
      if (!editor.ui.addButton) return alert('editor.ui.addButton does not exist');

      // Register custom command
      opts.hasDialog ? addDialog.call(this) : addExec.call(this);

      // Add button to toolbar
      editor.ui.addButton(pluginName, {
        label:   opts.label,
        command: opts.command
      });

      // Call user provided init
      if (opts.init) opts.init.call(this, editor);

      // Seems necessary, otherwise link popovers
      // can be orphaned when they are deleted.
      editor.on("change", function() {
        $('.link-popover').hide();
      });

      return;

      function addExec() {
        editor.addCommand(opts.command, opts.commandDef);
      }

      function addDialog() {
        var dialogName = opts.pluginName + 'dialog';
        editor.addCommand(opts.command, new CKEDITOR.dialogCommand(dialogName));
        CKEDITOR.dialog.add(dialogName, this.path + 'dialogs/' + pluginName + '.js');
      }
    }
  }

  // This is for the dialog pop up buttons. (Link, Embed, etc.)
  // The cancel button should be on the left. The primary button should be on the right.
  // In IE, CKE renders the buttons in the opposite order. (The <td> order is reversed.)
  // This checks if the browser is IE, then switches the buttons back into the right order.
  function setDialogButtonOrderInIE($dialog) {
    if (!$.browser.msie) return;
    var first = $dialog.find('.cke_dialog_ui_hbox_first');
    var last  = $dialog.find('.cke_dialog_ui_hbox_last');
    first.insertAfter(last);
  }

  // If a jQuery object is provided,
  // it is normalized to a native DOM node.
  function node(el) {
    return (el instanceof jQuery) ? el[0] : el; // el oh el i worked hard for this.
  }

  function showPopover($link, event) {
  //destroy and initialize the popover each time we show it so it doesn't get into a zombie state
    $link.popover("destroy");

    $link.popover({
      placement: "top",
      trigger: 'manual',
      container: 'body',
      content: "<a href='" + $link.attr("href") +  "' class='popover-link' target='_blank'>Open link in new tab</a>",
      html: true,
      template: '<div class="popover link-popover" role="tooltip"><div class="arrow"></div><div class="popover-content"></div></div>',
      delay: { show: 1250, hide: 2999 }
    });

    $link.popover("show");

    if(event) {
      var $popover = $($link.data("bs.popover").$tip);
      var top = calculatePopoverTopPosition($link, $popover, event);

      $popover.offset({top: top, left: (event.pageX - ($popover.width()/2))});

    }
  }

  function calculatePopoverTopPosition($link, $popover, event) {
    var linkLineHeight = parseInt($link.css("line-height"), 10);
    var linkTopOffset = $link.offset().top;
    var mouseTopOffset = event.pageY;
    var hoveredLine = Math.floor((mouseTopOffset - linkTopOffset) / linkLineHeight) + 1;
    var paddingTop = 10;

    return (linkTopOffset + (hoveredLine * linkLineHeight) - linkLineHeight - $popover.height() - paddingTop);
  }

  // hide popover if:
  // - mouseleave link, unless hovering over popover
  // - mouseleave popoover
  function hidePopover($link) {
    setTimeout(function () {
      var $popover = $link.data("bs.popover");

      if($popover) {
        var $tip = $($link.data("bs.popover").$tip);
        if (!$tip.is(":hover") && !$link.is(":hover")) {
          $link.popover("hide")
        }
      }
    }, 100);
  }



  // $el.ckeTopLevelEl() gets the top level `element` in ckeditor.
  //
  // This element is the:
  // - ancestor of your selected `element`
  // - immediate child of the CKE container
  //
  // Given dom structure:
  //   <div class='cke_textarea_inline'>    // container
  //     <table>                            // top level element    (return value)
  //       <tr>
  //         <td>                           // the selected element (`this`)
  //
  // The following returns <table>, because it is the immediate child of the CKE container.
  //   table = $('td').ckeTopLevelEl();
  function $ckeTopLevelEl(){
    var container = DailyKos.CKE.getContainer();

    if (container.length)
      return this.parentsUntil(container).last();

    return null;
  };

  function setLinkPopover(){
    $('body').on('mouseover', '.cke_textarea_inline.cke_editable a:not(.popover-link):not(a[href^="#"])', function(event) {
      showPopover($(this), event);
    });

    $('body').on('mouseout', '.cke_textarea_inline.cke_editable a:not(.popover-link):not(a[href^="#"])', function() {
      hidePopover($(this));
    });

    $('body').on('mouseleave', '.popover:has(.popover-link)', function(event){
      $('.cke_textarea_inline').find('a').each(function(e) {
        hidePopover($(this));
      });
    });
  };
})();
function fixElementScrolling(elementToScrollFix, elementSection) {
  var section = elementSection || elementToScrollFix;
  var position = 'unfixed';

  var fixedMarginTop = affixedElem.fixedTopHeight(),
      absoluteMarginTop = 0,
      fixedZIndex = 999,
      absoluteZIndex = 999;

  if (DailyKos.isTouchScreen) { fixedMarginTop = 0; }

  elementToScrollFix.scrollToFixed({
    removeOffsets: true,
    limit: function() {
      var limit = 0;
      var topBoundingElem = section.find('.story-card').last();
      var offset = topBoundingElem.offset();

      if(offset) limit = offset.top;

      return limit;
    },
    marginTop: function() {
      return position == 'absolute' ? absoluteMarginTop : fixedMarginTop;
    },
    zIndex: function() {
      return position == 'absolute' ? absoluteZIndex : fixedZIndex;
    },
    fixed:        function() { position = 'fixed'; },
    unfixed:      function() { position = 'unfixed'; },
    preAbsolute:  function() { position = 'absolute'; }
  });
};

(function($) {
  var self = window.DailyKos.SidebarStories = {};

  var sidebarSections = [
    'recommended',
    'community-spotlight',
    'most-shared',
    'recent-diaries',
  ];

  function setStoryHighlight(sidebar) {
    sidebar.find(".sidebar-story").each(function(idx, elem) {
      var sidebarStory  = $(elem),
          sidebarStats  = sidebarStory.find('.story-stats'),
          hasHover      = false;

      // sidebarStory.find(".story-summary, .story-byline").hover(
      sidebarStory.mouseover(
        function() {
          if(hasHover || sidebarStats.is(":hover"))
            return; // we've either already added the class or are hovering over the stats

          sidebarStory.addClass('group-hover');
          hasHover = true;
        });   // hover-in
      sidebarStory.mouseout(
        function() {
          if(hasHover) sidebarStory.removeClass('group-hover');

          hasHover = false;
        } // hover-out
      );
    });
  } // setStoryHighlight()

  function fixSidebarHeading(section) {
    var $section = $(section);

    if(!$section.find('.story-card').length) return;

    var sidebarHeading = $section.find('.sidebar-heading');

    if($section.is('.folded')) {
      sidebarHeading.trigger('detach.ScrollToFixed');
      return false;
    }

    fixElementScrolling(sidebarHeading, $section);
  }; // fixSidebarHeading()

  function setStoryCardReadCounts(sectionEl) {
    var tracker = App.Tracker.Shared.storyTracker;

    sectionEl.find('.story-card .new-comments-count').each(function(idx, el) {
      var $el = $(el),
          data = $el.data(),
          storyID = data['storyId'],
          storyKey = 'story-' + data['storyId'],
          totalComments = data['totalComments'],
          readCommentCount = tracker({storyKey: storyKey}).numCommentsRead();
      if(readCommentCount) {
        var newCommentCount = totalComments - readCommentCount;
        if (newCommentCount < 0 ) newCommentCount = 0;
        $el.text(newCommentCount);
        $el.removeClass('hidden');
        if(newCommentCount > 0) {
          $el.parent().addClass('new-comments');
        }
      }
    });
  }; // setStoryCardReadCounts()
  function fitStoryCardThumbnails(sectionEl) {
    var THUMBNAIL_WIDTH   = 100,
        THUMBNAIL_HEIGHT  = 70,
        MIN_WIDTH         = 95;

    sectionEl.find('.story-image img').each(function(idx, el) {
      var $img      = $(el),
          $fakeImg  = $('<img/>');

      $fakeImg
        .on('load', function () { handleStoryCardThumbnail($img, $fakeImg) })
        .attr('src', $img.attr('src'));
    });

    function handleStoryCardThumbnail($img, $fakeImg) {
      var img         = $img[0],
          rawWidth    = img.width,
          rawHeight   = img.height,
          resizeMult  = rawHeight / THUMBNAIL_HEIGHT, // Image may not always be "visible"
          imgHeight   = THUMBNAIL_HEIGHT,
          imgWidth    = rawWidth / resizeMult;

      if(imgWidth <= imgHeight) {
        $img.removeClass('landscape');
        $img.addClass('portrait');
        return;
      }

      if(imgWidth >= THUMBNAIL_WIDTH) return;
      else {
        var multiplier    = THUMBNAIL_WIDTH / imgWidth,
            newMaxHeight  = THUMBNAIL_HEIGHT * multiplier;

        $img.css('max-height', newMaxHeight + 'px');
      }
    }
  }; // fitStoryCardThumbnails()



  function setup() {
    var foldedSidebarNames = simpleStorage.get("folded-sidebar-names");

    _.each(foldedSidebarNames, function(foldedSidebarName) {
      $("." + foldedSidebarName).addClass('folded');
    });

    $('.fold, .unfold').click(function() {
      var $toggledSection = $(this).closest('.more-stories-sidebar');
      $toggledSection.toggleClass('folded');
      fixSidebarHeading($toggledSection);

      foldedSidebarNames = _.map($('.more-stories-sidebar'), function(story) {
                             if($(story).hasClass('folded')) {
                               return $(story).attr('class').
                               match(/community-spotlight|recommended|recent-diaries|most-shared/)[0];
                            }
                          });
      foldedSidebarNames = _.compact(foldedSidebarNames);
      simpleStorage.set("folded-sidebar-names", foldedSidebarNames);
    });
  }

  self.fitStoryCardThumbnails = fitStoryCardThumbnails;

  function nativeAdTpl (adIndex) {
    var adUnit = "DSK_Native_Sidebar";
    var index = adIndex.get();

    return DK.Handlebars.nativeAdSidebar({adUnit: adUnit, index: index});
  }

  function insertSidebarNativeAds ($sectionEl, sectionName, adIndex) {
    var maxAds = 99; // Maximum number of allowed native-ads for this section
    var curAds = 0;  // Current number of native-ads that we've inserted so far

    if (sectionName === 'community-spotlight') maxAds = 0; // No Native Ads in Community Spotlight
    if (sectionName === 'recent-diaries') maxAds = 1;
    if (sectionName === 'recommended') maxAds = 1;
    if (sectionName === 'most-shared') maxAds = 0;

    $sectionEl.find('.story-card').each(function (i, story) {
      if (curAds >= maxAds) return false; // break loop

      if ((i + 1) % 4 !== 0) return; // insert after every 4, 8, 12, etc.

      if(DK.Handlebars) {
        $(nativeAdTpl(adIndex)).insertAfter(story);
      }

      curAds++;
    });
  }

  function addPageMetricsParams ($sectionEl, sectionName) {
    var isStoryPage = DailyKos.pageType === 'stories';

    if (isStoryPage && sectionName) {
      var metricsParams = '?pm_source=story_sidebar&pm_medium=web&pm_campaign=' + sectionName;

      $sectionEl.find('a.story-card').each(function(_, el) {
        var oldUrl = el.href;
        var urlEnd = oldUrl.indexOf('?');

        if (urlEnd < 0) {
          urlEnd = oldUrl.length;
        }

        var newUrl = oldUrl.substring(0, urlEnd) + metricsParams;
        el.href = newUrl;
      });
    }
  }

  self.ready = function(_sidebarSections) {
    setup();

    var sections = _sidebarSections || sidebarSections;
    var url = '/blogs/sidebars?sections=' + sections.join(',');

    $.ajax({
      url:    url,
      cache:  true,
      headers: {
        'Use-Vesi': 'true'
      },
      success: function(xml) {
        var $xml = $(xml);

        var adIndex = {
          idx: 0,
          get: function () { return this.idx++; }
        };

        $xml.find("section").each(function (idx, section) {
          var sectionName = section.getAttribute("name");
          var $sectionEl = $(".more-stories-sidebar." + sectionName);

          $sectionEl.append(section.innerHTML);
          addPageMetricsParams($sectionEl, sectionName);

          $sectionEl.removeClass('hidden');
          var $sectionEl = $(".more-stories-sidebar." + sectionName);

          setStoryHighlight($sectionEl);
          fixSidebarHeading($sectionEl);
          setStoryCardReadCounts($sectionEl);
          fitStoryCardThumbnails($sectionEl);
          insertSidebarNativeAds($sectionEl, sectionName, adIndex);

          DailyKos.Unveil($sectionEl.find('img'));
        })

        $(DailyKos.Blogs.shimTitleTransitions)
      }
    });
  } // ready()
})(jQuery);
(function($) {
  var self = window.DailyKos.ExploreBar = {};

  var subnavSections = []
  self.registerSubnavs = function(sectionsData) {
    subnavSections = subnavSections.concat(sectionsData);
  }

  self.init = function () {
    loadSubnavs();    // Fetch all subnav data
    setupSubnavJS();  // Tweak behavior / on DOM ready callbacks
  }

  function loadSubnavs() {
    var urlCssMap = {}
    var urlNames = []

    _(subnavSections).each(function (section) {
      urlCssMap[section.url_name] = section.css
      urlNames.push(section.url_name)
    })

    var url = "/blogs/explore-subnavs?sections=" + urlNames.join(',');

    $.ajax({
      url: url,
      headers: {
        'Use-Vesi': 'true'
      },
      success: function (xml) {
        var $xml = $(xml);
        $xml.find("section").each(function (idx, section) {
          var urlName = section.getAttribute("name")
          var css = urlCssMap[urlName]

          var $subnavSection = $("#" + css + "-section .explore-content-inner");

          $subnavSection.append(section.innerHTML);

          DailyKos.Unveil($subnavSection.find('img'));

          // Re-use the story card / thumbnail adjust logic:
          DailyKos.SidebarStories.fitStoryCardThumbnails($subnavSection);
        })
      }
    })
  } // loadSubnavs()

  self.truncateTitle = function(){                                 //  Truncate the story title to the specified height. Add multiline ellipsis.
    $(".explore-story-title").dotdotdot({
      ellipsis          : '... ',                                  //  The text to add as ellipsis.
      wrap              : 'word',                                  //  How to cut off the text/html: 'word'/'letter'/'children'
      fallbackToLetter  : true,                                    //  Wrap-option fallback to 'letter' for long words
      after             : null,                                    //  jQuery-selector for the element to keep and put after the ellipsis.
      watch             : false,                                   //  Whether to update the ellipsis: true/'window'
      height            : 50,                                      //  Optionally set a max-height, if null, the height will be measured.
      tolerance         : 0,                                       //  Deviation for the height-option.
      callback          : function( isTruncated, orgContent ) {},  //  Callback function that is fired after the ellipsis is added, receives two parameters: isTruncated(boolean), orgContent(string).
      lastCharacter     : {
        remove          : [ ' ', ',', ';', '.', '!', '?' ],        //  Remove these characters from the end of the truncated text.
        noEllipsis      : []                                       //  Don't add an ellipsis if this array contains the last character of the truncated text.
      }
    });
  }

  function setupSubnavJS() {
    $(function() {
      var wrapper = $(".explore-wrapper"),
          navbar  = $(".explore-bar");

      $('body').on('touchstart.dropdown', '.dropdown-menu', function (e) { e.stopPropagation(); });

      // Don't affix if it's a mobile device. Bootstrap dropdown aren't working when affixed
      if(!DailyKos.isTouchScreen) {
        navbar.affix({
          offset: {
            top: wrapper.position().top
          }
        });
      }

      $('#dk-search .search-icon').on('click', function() {
        var searchField = $('#dk-search .search-field');
         if(searchField.val()) {
           return document.location = "/search?" + $('#dk-search').serialize();
         } else {
           searchField.focus();
         }
      });

      // Hide the subnavs when escape is pressed:
      $(document).keydown(function(e) {
        if (e.keyCode == 27) {
          $(".explore-sections section").removeClass("open");
        }
      });

      $("#dk-search .search-field").on('focusin', function(e) {
        $("#dk-search .search-icon").addClass("active");
      });

      $("#dk-search .search-field").on('focusout', function(e) {
        $("#dk-search .search-icon").removeClass("active");
      });

      $(".explore-sections .dropdown-menu").on('click', function(e) {
        e.stopPropagation();
      });

      $(".explore-sections section, .explore-sections .dropdown-toggle")
        .on('show.bs.dropdown shown.bs.dropdown', function(e) {
          navbar.find('img').trigger('unveil');
          navbar.addClass('dropdown-open');
          DailyKos.ExploreBar.truncateTitle();
        })
        .on('hide.bs.dropdown hidden.bs.dropdown', function(e) {
          if($(".explore-sections section.open").length === 0)
            navbar.removeClass('dropdown-open');
        });

      // Stop Firefox from closing the dropdown on right-click:
      try {
      var _clearMenus = $._data(document, "events").click.filter(function (el) {
        return el.namespace === 'bs.data-api.dropdown' && el.selector === undefined
      })[0].handler;
      // disable the old listener
      $(document)
        .off('click.data-api.dropdown', _clearMenus)
        .on('click.data-api.dropdown', function (e) {
          // call the handler only when not right-click
          e.button === 2 || _clearMenus()
        });
      } catch(e) { /* Oh, ok. Probably just <IE8 */ }
    });

    $(function() {
      var targetParents, targetContent;

      if(DailyKos.isTouchScreen) {
        $(".explore-sidenav a.btn").removeClass("hover") // Don't do :hover links for iOS. ugly
        $(".explore-sidenav a.btn:not('.grouping')").on("touchstart", function(data){
          activateSubnav($(data.target).parent());
        });
      } else {
        $(".explore-subnav-buttons").menuAim({
          rowSelector: ".btn:not('.grouping')",
          activate: activateSubnav // fired on row activation,
        });
      }

      targetParents = $('.explore-subnav .btn.active');

      _.each(targetParents, function(tp) {
        targetContent = $('#' + $(tp).data().section);
        targetContent.addClass('show');
      });

      function activateSubnav(row) {
        targetContent = $('#' + $(row).data().section);

        $('.explore-sidenav .btn:visible').removeClass('active');
        if($(row).data().section !== "more-section") {
          $(row).addClass('active');
          $('.explore-subnav .row .explore-content:visible').removeClass('show');
          targetContent.addClass('show');
        }

        DailyKos.ExploreBar.truncateTitle();
      };
    });
  }

})(jQuery);
function toggleHelpScout($beaconButton) {
  if ($beaconButton.is(":hidden")) {
    $beaconButton.show();
    Beacon('open');
    $(".avatar-group").tooltip('hide');
  } else {
    $beaconButton.hide();
    Beacon('close');
  }
}

function setHelpDeskListeners($helpDeskLink) {
  $helpDeskLink.click(function(e) {
    e.stopPropagation();
    toggleHelpScout($('.BeaconFabButtonFrame'));
  });

  $helpDeskLink.on('keypress',function(e) {
    if (e.which === 13) {
      toggleHelpScout($('.BeaconFabButtonFrame'));
    }
  });
}

$(document).ready(function() {
  setHelpDeskListeners($('#toggle-helpscout-story-page'));
});
if(!DailyKos) var DailyKos = {};

DailyKos.Blogs = (function() {
  var followBlog = function(blogId, targetLink) {
    if(!$(targetLink).hasClass('requesting')) {
      $(targetLink).addClass('requesting');
      $.post('/blog_streams', { blog_id: blogId })
      .done(function() {
        $(targetLink).html("<span class='heart'>&#x2665;</span> Unfollow");
        $(targetLink).attr('onclick', 'DailyKos.Blogs.unfollowBlog(' + blogId + ', this); return false;');
      })
      .fail(function() { DailyKos.showAlert('An error occurred. Please try again later.');})
      .always(function() { $(targetLink).removeClass('requesting');});
    }
    return false;
  }

  var unfollowBlog = function(blogId, targetLink) {
    if(!$(targetLink).hasClass('requesting')) {
      $(targetLink).addClass('requesting');
      $.ajax({
        type: "DELETE",
        url: ("/blog_streams/" + blogId),
        data: { blog_id: blogId},
        success: function(data, textStatus, jqXHR) {
          $(targetLink).html("<span class='heart'>&#x2665;</span> Follow");
          $(targetLink).attr('onclick', 'DailyKos.Blogs.followBlog(' + blogId + ', this); return false;');
          $(targetLink).removeClass('requesting');
        },
        error: function(data, textStatus, jqXHR) {
          DailyKos.showAlert('An error occurred. Please try again later.');
          $(targetLink).removeClass('requesting');
        },
        dataType: "json"
      });
    }
    return false;
  }

  var permissions = function(){
    var el = $('#blog_permissions').data();
    if (el)
      return el['blogPermissions'];
    else
      throw "Error: an element with the 'blog_permissions' data attribute is required";
  };

  var isBlogMember = function(blogId) {
    return _.any(DailyKos.userBlogs(), function(blog) {
      return blog.blog_id === blogId;
    });
  };

  var canPostToBlog = function(blogId) {
    return _.any(DailyKos.userBlogPerms(), function(userBlogPerm) {
      perms = userBlogPerm.permissions;
      return (userBlogPerm.blog_id === blogId) && (perms.indexOf("blog_post") >= 0);
    });
  };

  var checkBlogPrivileges = function(blogId) {
    if(isBlogMember(blogId)) {
      $('body').addClass('has-blog-privileges');
    } else {
      $('body').removeClass('has-blog-privileges');
    }

    if (canPostToBlog(blogId)) {
      $('body').addClass('can-post-to-blog');

      if (!$("#blogs")) { return false };
      $('.requires-can-post-to-blog').map(function (idx, elem) {
        var storyId = $(elem).closest('.blog-story-wrapper').attr('data-story-id');
        var bumpPostMarkup = "<a class='dkons bump-post-link icon-admin-bump pull-right' href='/blogs/" + blogId + "/bump_post/" + storyId + "' onclick='return DailyKos.Story.ConfirmBumpPost(this)' title='Bump Post'></a>";
        $(elem).append(bumpPostMarkup);
      });
    } else {
      $('body').removeClass('can-post-to-blog');
    }
    return false;
  };

  var ready = function(blogId) {
    DailyKos.Whoami.onLoadAndFromCache(function() {
      DailyKos.Blogs.checkBlogPrivileges(blogId);
      return false;
    });
  }

  // Adds a shim for fake 'title' (tytle) attribute for IE < 11
  // or other browsers that cannot use pointer events and transitions
  var shimTitleTransitions = function() {
    var storyCardsWithTitles = $('.story-card[data-title]');

    if(storyCardsWithTitles.length === 0) return false;

    var hideTytle = "<style type='text/css' class='hide-tytle'>.story-card:after { display: none; }</style>";

    if(DailyKos.isTouchScreen) {
      $('head').append(hideTytle);
      return false;
    }

    if(DailyKos.Blogs.requiresShim()) {
      var showDelay;

      $('head').append(hideTytle);
      storyCardsWithTitles.css('cursor', 'pointer');

      storyCardsWithTitles.mouseenter(function() {
        showDelay = setTimeout(function() {
          $('.hide-tytle').remove();
          }, 1250);
      }).mouseleave(function() {
        clearTimeout(showDelay);
        $('head').append(hideTytle);
      });
    }
    return false;
  }

  // Code for testing pointer events is from:
  // https://github.com/ausi/Feature-detection-technique-for-pointer-events/blob/master/modernizr-pointerevents.js
  var requiresShim = function() {
    if(document.documentElement.style.transition !== '') return true;

    var element = document.createElement('x');
    element.style.cssText = 'pointer-events:auto';
    return element.style.pointerEvents !== 'auto';
  }

  return {
    followBlog: followBlog,
    unfollowBlog: unfollowBlog,
    permissions: permissions,
    checkBlogPrivileges: checkBlogPrivileges,
    ready: ready,
    shimTitleTransitions: shimTitleTransitions,
    requiresShim: requiresShim
  }
}());
if(!DailyKos) var DailyKos = {};

DailyKos.setSwitchFrontPageMenu = function() {
  var link = document.getElementById('switch-frontpage-link');
  var cookies = document.cookie.split('; ') || [];
  var newFp;
  for (var i = 0; i < cookies.length; i++) {
    if (cookies[i].match(/^dk4_newfp/)) {
      newFp = cookies[i];
    }
  }
  var useNewFp = true;
  if (newFp) {
    var cookieValue = newFp.split('=')[1];
    if (Number(cookieValue) >= 100) {
      useNewFp = false;
    }
  }
  var text;
  if (useNewFp) {
    var text = 'Switch to old frontpage design'
    link.href = '/softlaunch/set_default';
    link.classList.add('user-profile__profile-item--back-to-old-frontpage');
  } else {
    var text = 'Switch to new frontpage design'
    link.href = '/softlaunch/set_default?to_new_page=true';
    link.classList.add('user-profile__profile-item--goto-new-frontpage');
  }
  link.title = text;
  link.innerText = text;
};
DailyKos.initReblogger = function(){
  var options = getRebloggableOptions();
  var blogSelect = $('#story_schedule_blog_id');
  var republishBtn = $('#republish-button');

  if (_.isEmpty(options)) return disable(blogSelect);

  blogSelect.setSelectOptions(options);

  var userID = DailyKos.currentUserId();
  $('input[name*="[user_id]"]').val(userID);

  var form      = $('#reblog-form');
  var toggle    = $('#reblog-toggle'); // open/close popover when clicked
  var republish = $('#republish-button');
  var reblog    = $('#reblog-button');

  onClickClose(republish);
  onClickClose(reblog);
  togglePublishButton();

  reblog.click(postTo('/story_schedules', confirmNavigateToQueuePage));
  republish.click(confirmRepublishStory);

  function getRebloggableOptions() {
    var queueableBlogs = DailyKos.queueableBlogs;     // list of story_sched's that *could* be added
    var blogStories    = DailyKos.blogStories;        // list of blogs that this story is published to

    var blogStoryNames        = _(blogStories).pluck('name');
    var queueableBlogsByName  = _(queueableBlogs).invert();
    queueableBlogsByName      = _.omit(queueableBlogsByName, blogStoryNames);

    return _(queueableBlogsByName).invert();
  }

  function postTo(reblogUrl, confirmNavigate) {
    return function(e){
      $.ajax({
        type: 'POST',
        url:  reblogUrl,
        data: form.serialize(),
        success: function() {
          if (confirmNavigate) {
            confirmNavigate();
          } else {
            location.reload();
          }
        },
        error: function(xhr) {
          var errorMsg = getXHRErrorMessage(xhr) || "Oops. That didn't work.";
          alert(errorMsg);
        }
      });
    };
  }

  function getXHRErrorMessage(xhr) {
    try {
      if (xhr.responseJSON && xhr.responseJSON.error) {
        return xhr.responseJSON.error;
      }

      switch(xhr.status) {
        case 0:
          return "Please check your internet connection and try again.";
        case 400:
        case 401:
        case 402:
          return xhr.responseText;
        case 403:
        case 404:
          return "You do not have permission.";
        case 500:
          return "There was a server error. Please try again later.";
        default:
          return "Sorry, something went wrong. Please reload the page and try again.";
      }
    } catch(e) {
      return null;
    }
  }

  function confirmNavigateToQueuePage() {
    var title    = 'Success! Your story has been queued.';
    var question = 'Would you like to see the "' + selectedBlogName() + '" queue list?';
    var options  = { primaryBtnLabel: 'See Queue', onSubmit: goToQueuePage, onCancel: reloadPage };
    DailyKos.Modal.show(question, title, options);

    function goToQueuePage(e) {
      window.open('/group/' + selectedBlogUrlName(), '_blank');
      reloadPage();
    }

    function reloadPage() {
      location.reload();
    }
  }

  function confirmRepublishStory(e) {
    var path     = republishPath();
    var title    = 'Publish';
    var question = 'Are you sure you want to publish this story to "' + selectedBlogName() + '"?';
    var publish  = postTo(path);
    var options  = { primaryBtnLabel: 'Publish', onSubmit: publish };

    DailyKos.Modal.show(question, title, options);
  }

  function onClickClose(el) {
    el.click(function(e){
      e.preventDefault();
      toggle.popover('hide');
    });
  }

  function disable(blogSelect){
    blogSelect.attr('disabled', true)
              .setSelectOptions({0: 'No groups available'});
  }

  function republishPath() {
    var storyID   = DailyKos.Story.storyID;
    var blogID    = $('#story_schedule_blog_id').val();
    var userNotes = $('#story_schedule_q_notes').val() || 'none';

    var path = '/blogs/:blogID/stories/:storyID/user_notes/:userNotes';

    return path.replace(':blogID',      blogID)
               .replace(':storyID',     storyID)
               .replace(':userNotes',   userNotes);
  }

  function togglePublishButton() {
    blogSelect.
      change(function(e){
        var selected        = this.value;
        var rebloggables    = DailyKos.rebloggableBlogs;
        var canPublish      = !!rebloggables[selected];
        var isDisabled      = !canPublish;

        if (isDisabled)
          republishBtn.attr('disabled', true);
        else
          republishBtn.removeAttr('disabled');
      }).
      trigger('change'); // perform check on init to determine whether to disable the button.
  }

  function selectedBlogName() {
    return blogSelect.find('option:selected').text();
  }

  function selectedBlogUrlName() {
    return DailyKos.blogUrls[selectedBlogName()] || '';
  }
};
/* ========================================================================
 * Bootstrap: affix.js v3.4.1
 * https://getbootstrap.com/docs/3.4/javascript/#affix
 * ========================================================================
 * Copyright 2011-2019 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */


+function ($) {
  'use strict';

  // AFFIX CLASS DEFINITION
  // ======================

  var Affix = function (element, options) {
    this.options = $.extend({}, Affix.DEFAULTS, options)

    var target = this.options.target === Affix.DEFAULTS.target ? $(this.options.target) : $(document).find(this.options.target)

    this.$target = target
      .on('scroll.bs.affix.data-api', $.proxy(this.checkPosition, this))
      .on('click.bs.affix.data-api',  $.proxy(this.checkPositionWithEventLoop, this))

    this.$element     = $(element)
    this.affixed      = null
    this.unpin        = null
    this.pinnedOffset = null

    this.checkPosition()
  }

  Affix.VERSION  = '3.4.1'

  Affix.RESET    = 'affix affix-top affix-bottom'

  Affix.DEFAULTS = {
    offset: 0,
    target: window
  }

  Affix.prototype.getState = function (scrollHeight, height, offsetTop, offsetBottom) {
    var scrollTop    = this.$target.scrollTop()
    var position     = this.$element.offset()
    var targetHeight = this.$target.height()

    if (offsetTop != null && this.affixed == 'top') return scrollTop < offsetTop ? 'top' : false

    if (this.affixed == 'bottom') {
      if (offsetTop != null) return (scrollTop + this.unpin <= position.top) ? false : 'bottom'
      return (scrollTop + targetHeight <= scrollHeight - offsetBottom) ? false : 'bottom'
    }

    var initializing   = this.affixed == null
    var colliderTop    = initializing ? scrollTop : position.top
    var colliderHeight = initializing ? targetHeight : height

    if (offsetTop != null && scrollTop <= offsetTop) return 'top'
    if (offsetBottom != null && (colliderTop + colliderHeight >= scrollHeight - offsetBottom)) return 'bottom'

    return false
  }

  Affix.prototype.getPinnedOffset = function () {
    if (this.pinnedOffset) return this.pinnedOffset
    this.$element.removeClass(Affix.RESET).addClass('affix')
    var scrollTop = this.$target.scrollTop()
    var position  = this.$element.offset()
    return (this.pinnedOffset = position.top - scrollTop)
  }

  Affix.prototype.checkPositionWithEventLoop = function () {
    setTimeout($.proxy(this.checkPosition, this), 1)
  }

  Affix.prototype.checkPosition = function () {
    if (!this.$element.is(':visible')) return

    var height       = this.$element.height()
    var offset       = this.options.offset
    var offsetTop    = offset.top
    var offsetBottom = offset.bottom
    var scrollHeight = Math.max($(document).height(), $(document.body).height())

    if (typeof offset != 'object')         offsetBottom = offsetTop = offset
    if (typeof offsetTop == 'function')    offsetTop    = offset.top(this.$element)
    if (typeof offsetBottom == 'function') offsetBottom = offset.bottom(this.$element)

    var affix = this.getState(scrollHeight, height, offsetTop, offsetBottom)

    if (this.affixed != affix) {
      if (this.unpin != null) this.$element.css('top', '')

      var affixType = 'affix' + (affix ? '-' + affix : '')
      var e         = $.Event(affixType + '.bs.affix')

      this.$element.trigger(e)

      if (e.isDefaultPrevented()) return

      this.affixed = affix
      this.unpin = affix == 'bottom' ? this.getPinnedOffset() : null

      this.$element
        .removeClass(Affix.RESET)
        .addClass(affixType)
        .trigger(affixType.replace('affix', 'affixed') + '.bs.affix')
    }

    if (affix == 'bottom') {
      this.$element.offset({
        top: scrollHeight - height - offsetBottom
      })
    }
  }


  // AFFIX PLUGIN DEFINITION
  // =======================

  function Plugin(option) {
    return this.each(function () {
      var $this   = $(this)
      var data    = $this.data('bs.affix')
      var options = typeof option == 'object' && option

      if (!data) $this.data('bs.affix', (data = new Affix(this, options)))
      if (typeof option == 'string') data[option]()
    })
  }

  var old = $.fn.affix

  $.fn.affix             = Plugin
  $.fn.affix.Constructor = Affix


  // AFFIX NO CONFLICT
  // =================

  $.fn.affix.noConflict = function () {
    $.fn.affix = old
    return this
  }


  // AFFIX DATA-API
  // ==============

  $(window).on('load', function () {
    $('[data-spy="affix"]').each(function () {
      var $spy = $(this)
      var data = $spy.data()

      data.offset = data.offset || {}

      if (data.offsetBottom != null) data.offset.bottom = data.offsetBottom
      if (data.offsetTop    != null) data.offset.top    = data.offsetTop

      Plugin.call($spy, data)
    })
  })

}(jQuery);
/* ========================================================================
 * Bootstrap: alert.js v3.4.1
 * https://getbootstrap.com/docs/3.4/javascript/#alerts
 * ========================================================================
 * Copyright 2011-2019 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */


+function ($) {
  'use strict';

  // ALERT CLASS DEFINITION
  // ======================

  var dismiss = '[data-dismiss="alert"]'
  var Alert   = function (el) {
    $(el).on('click', dismiss, this.close)
  }

  Alert.VERSION = '3.4.1'

  Alert.TRANSITION_DURATION = 150

  Alert.prototype.close = function (e) {
    var $this    = $(this)
    var selector = $this.attr('data-target')

    if (!selector) {
      selector = $this.attr('href')
      selector = selector && selector.replace(/.*(?=#[^\s]*$)/, '') // strip for ie7
    }

    selector    = selector === '#' ? [] : selector
    var $parent = $(document).find(selector)

    if (e) e.preventDefault()

    if (!$parent.length) {
      $parent = $this.closest('.alert')
    }

    $parent.trigger(e = $.Event('close.bs.alert'))

    if (e.isDefaultPrevented()) return

    $parent.removeClass('in')

    function removeElement() {
      // detach from parent, fire event then clean up data
      $parent.detach().trigger('closed.bs.alert').remove()
    }

    $.support.transition && $parent.hasClass('fade') ?
      $parent
        .one('bsTransitionEnd', removeElement)
        .emulateTransitionEnd(Alert.TRANSITION_DURATION) :
      removeElement()
  }


  // ALERT PLUGIN DEFINITION
  // =======================

  function Plugin(option) {
    return this.each(function () {
      var $this = $(this)
      var data  = $this.data('bs.alert')

      if (!data) $this.data('bs.alert', (data = new Alert(this)))
      if (typeof option == 'string') data[option].call($this)
    })
  }

  var old = $.fn.alert

  $.fn.alert             = Plugin
  $.fn.alert.Constructor = Alert


  // ALERT NO CONFLICT
  // =================

  $.fn.alert.noConflict = function () {
    $.fn.alert = old
    return this
  }


  // ALERT DATA-API
  // ==============

  $(document).on('click.bs.alert.data-api', dismiss, Alert.prototype.close)

}(jQuery);
/* ========================================================================
 * Bootstrap: button.js v3.4.1
 * https://getbootstrap.com/docs/3.4/javascript/#buttons
 * ========================================================================
 * Copyright 2011-2019 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */


+function ($) {
  'use strict';

  // BUTTON PUBLIC CLASS DEFINITION
  // ==============================

  var Button = function (element, options) {
    this.$element  = $(element)
    this.options   = $.extend({}, Button.DEFAULTS, options)
    this.isLoading = false
  }

  Button.VERSION  = '3.4.1'

  Button.DEFAULTS = {
    loadingText: 'loading...'
  }

  Button.prototype.setState = function (state) {
    var d    = 'disabled'
    var $el  = this.$element
    var val  = $el.is('input') ? 'val' : 'html'
    var data = $el.data()

    state += 'Text'

    if (data.resetText == null) $el.data('resetText', $el[val]())

    // push to event loop to allow forms to submit
    setTimeout($.proxy(function () {
      $el[val](data[state] == null ? this.options[state] : data[state])

      if (state == 'loadingText') {
        this.isLoading = true
        $el.addClass(d).attr(d, d).prop(d, true)
      } else if (this.isLoading) {
        this.isLoading = false
        $el.removeClass(d).removeAttr(d).prop(d, false)
      }
    }, this), 0)
  }

  Button.prototype.toggle = function () {
    var changed = true
    var $parent = this.$element.closest('[data-toggle="buttons"]')

    if ($parent.length) {
      var $input = this.$element.find('input')
      if ($input.prop('type') == 'radio') {
        if ($input.prop('checked')) changed = false
        $parent.find('.active').removeClass('active')
        this.$element.addClass('active')
      } else if ($input.prop('type') == 'checkbox') {
        if (($input.prop('checked')) !== this.$element.hasClass('active')) changed = false
        this.$element.toggleClass('active')
      }
      $input.prop('checked', this.$element.hasClass('active'))
      if (changed) $input.trigger('change')
    } else {
      this.$element.attr('aria-pressed', !this.$element.hasClass('active'))
      this.$element.toggleClass('active')
    }
  }


  // BUTTON PLUGIN DEFINITION
  // ========================

  function Plugin(option) {
    return this.each(function () {
      var $this   = $(this)
      var data    = $this.data('bs.button')
      var options = typeof option == 'object' && option

      if (!data) $this.data('bs.button', (data = new Button(this, options)))

      if (option == 'toggle') data.toggle()
      else if (option) data.setState(option)
    })
  }

  var old = $.fn.button

  $.fn.button             = Plugin
  $.fn.button.Constructor = Button


  // BUTTON NO CONFLICT
  // ==================

  $.fn.button.noConflict = function () {
    $.fn.button = old
    return this
  }


  // BUTTON DATA-API
  // ===============

  $(document)
    .on('click.bs.button.data-api', '[data-toggle^="button"]', function (e) {
      var $btn = $(e.target).closest('.btn')
      Plugin.call($btn, 'toggle')
      if (!($(e.target).is('input[type="radio"], input[type="checkbox"]'))) {
        // Prevent double click on radios, and the double selections (so cancellation) on checkboxes
        e.preventDefault()
        // The target component still receive the focus
        if ($btn.is('input,button')) $btn.trigger('focus')
        else $btn.find('input:visible,button:visible').first().trigger('focus')
      }
    })
    .on('focus.bs.button.data-api blur.bs.button.data-api', '[data-toggle^="button"]', function (e) {
      $(e.target).closest('.btn').toggleClass('focus', /^focus(in)?$/.test(e.type))
    })

}(jQuery);
/* ========================================================================
 * Bootstrap: carousel.js v3.4.1
 * https://getbootstrap.com/docs/3.4/javascript/#carousel
 * ========================================================================
 * Copyright 2011-2019 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */


+function ($) {
  'use strict';

  // CAROUSEL CLASS DEFINITION
  // =========================

  var Carousel = function (element, options) {
    this.$element    = $(element)
    this.$indicators = this.$element.find('.carousel-indicators')
    this.options     = options
    this.paused      = null
    this.sliding     = null
    this.interval    = null
    this.$active     = null
    this.$items      = null

    this.options.keyboard && this.$element.on('keydown.bs.carousel', $.proxy(this.keydown, this))

    this.options.pause == 'hover' && !('ontouchstart' in document.documentElement) && this.$element
      .on('mouseenter.bs.carousel', $.proxy(this.pause, this))
      .on('mouseleave.bs.carousel', $.proxy(this.cycle, this))
  }

  Carousel.VERSION  = '3.4.1'

  Carousel.TRANSITION_DURATION = 600

  Carousel.DEFAULTS = {
    interval: 5000,
    pause: 'hover',
    wrap: true,
    keyboard: true
  }

  Carousel.prototype.keydown = function (e) {
    if (/input|textarea/i.test(e.target.tagName)) return
    switch (e.which) {
      case 37: this.prev(); break
      case 39: this.next(); break
      default: return
    }

    e.preventDefault()
  }

  Carousel.prototype.cycle = function (e) {
    e || (this.paused = false)

    this.interval && clearInterval(this.interval)

    this.options.interval
      && !this.paused
      && (this.interval = setInterval($.proxy(this.next, this), this.options.interval))

    return this
  }

  Carousel.prototype.getItemIndex = function (item) {
    this.$items = item.parent().children('.item')
    return this.$items.index(item || this.$active)
  }

  Carousel.prototype.getItemForDirection = function (direction, active) {
    var activeIndex = this.getItemIndex(active)
    var willWrap = (direction == 'prev' && activeIndex === 0)
                || (direction == 'next' && activeIndex == (this.$items.length - 1))
    if (willWrap && !this.options.wrap) return active
    var delta = direction == 'prev' ? -1 : 1
    var itemIndex = (activeIndex + delta) % this.$items.length
    return this.$items.eq(itemIndex)
  }

  Carousel.prototype.to = function (pos) {
    var that        = this
    var activeIndex = this.getItemIndex(this.$active = this.$element.find('.item.active'))

    if (pos > (this.$items.length - 1) || pos < 0) return

    if (this.sliding)       return this.$element.one('slid.bs.carousel', function () { that.to(pos) }) // yes, "slid"
    if (activeIndex == pos) return this.pause().cycle()

    return this.slide(pos > activeIndex ? 'next' : 'prev', this.$items.eq(pos))
  }

  Carousel.prototype.pause = function (e) {
    e || (this.paused = true)

    if (this.$element.find('.next, .prev').length && $.support.transition) {
      this.$element.trigger($.support.transition.end)
      this.cycle(true)
    }

    this.interval = clearInterval(this.interval)

    return this
  }

  Carousel.prototype.next = function () {
    if (this.sliding) return
    return this.slide('next')
  }

  Carousel.prototype.prev = function () {
    if (this.sliding) return
    return this.slide('prev')
  }

  Carousel.prototype.slide = function (type, next) {
    var $active   = this.$element.find('.item.active')
    var $next     = next || this.getItemForDirection(type, $active)
    var isCycling = this.interval
    var direction = type == 'next' ? 'left' : 'right'
    var that      = this

    if ($next.hasClass('active')) return (this.sliding = false)

    var relatedTarget = $next[0]
    var slideEvent = $.Event('slide.bs.carousel', {
      relatedTarget: relatedTarget,
      direction: direction
    })
    this.$element.trigger(slideEvent)
    if (slideEvent.isDefaultPrevented()) return

    this.sliding = true

    isCycling && this.pause()

    if (this.$indicators.length) {
      this.$indicators.find('.active').removeClass('active')
      var $nextIndicator = $(this.$indicators.children()[this.getItemIndex($next)])
      $nextIndicator && $nextIndicator.addClass('active')
    }

    var slidEvent = $.Event('slid.bs.carousel', { relatedTarget: relatedTarget, direction: direction }) // yes, "slid"
    if ($.support.transition && this.$element.hasClass('slide')) {
      $next.addClass(type)
      if (typeof $next === 'object' && $next.length) {
        $next[0].offsetWidth // force reflow
      }
      $active.addClass(direction)
      $next.addClass(direction)
      $active
        .one('bsTransitionEnd', function () {
          $next.removeClass([type, direction].join(' ')).addClass('active')
          $active.removeClass(['active', direction].join(' '))
          that.sliding = false
          setTimeout(function () {
            that.$element.trigger(slidEvent)
          }, 0)
        })
        .emulateTransitionEnd(Carousel.TRANSITION_DURATION)
    } else {
      $active.removeClass('active')
      $next.addClass('active')
      this.sliding = false
      this.$element.trigger(slidEvent)
    }

    isCycling && this.cycle()

    return this
  }


  // CAROUSEL PLUGIN DEFINITION
  // ==========================

  function Plugin(option) {
    return this.each(function () {
      var $this   = $(this)
      var data    = $this.data('bs.carousel')
      var options = $.extend({}, Carousel.DEFAULTS, $this.data(), typeof option == 'object' && option)
      var action  = typeof option == 'string' ? option : options.slide

      if (!data) $this.data('bs.carousel', (data = new Carousel(this, options)))
      if (typeof option == 'number') data.to(option)
      else if (action) data[action]()
      else if (options.interval) data.pause().cycle()
    })
  }

  var old = $.fn.carousel

  $.fn.carousel             = Plugin
  $.fn.carousel.Constructor = Carousel


  // CAROUSEL NO CONFLICT
  // ====================

  $.fn.carousel.noConflict = function () {
    $.fn.carousel = old
    return this
  }


  // CAROUSEL DATA-API
  // =================

  var clickHandler = function (e) {
    var $this   = $(this)
    var href    = $this.attr('href')
    if (href) {
      href = href.replace(/.*(?=#[^\s]+$)/, '') // strip for ie7
    }

    var target  = $this.attr('data-target') || href
    var $target = $(document).find(target)

    if (!$target.hasClass('carousel')) return

    var options = $.extend({}, $target.data(), $this.data())
    var slideIndex = $this.attr('data-slide-to')
    if (slideIndex) options.interval = false

    Plugin.call($target, options)

    if (slideIndex) {
      $target.data('bs.carousel').to(slideIndex)
    }

    e.preventDefault()
  }

  $(document)
    .on('click.bs.carousel.data-api', '[data-slide]', clickHandler)
    .on('click.bs.carousel.data-api', '[data-slide-to]', clickHandler)

  $(window).on('load', function () {
    $('[data-ride="carousel"]').each(function () {
      var $carousel = $(this)
      Plugin.call($carousel, $carousel.data())
    })
  })

}(jQuery);
/* ========================================================================
 * Bootstrap: collapse.js v3.4.1
 * https://getbootstrap.com/docs/3.4/javascript/#collapse
 * ========================================================================
 * Copyright 2011-2019 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */

/* jshint latedef: false */

+function ($) {
  'use strict';

  // COLLAPSE PUBLIC CLASS DEFINITION
  // ================================

  var Collapse = function (element, options) {
    this.$element      = $(element)
    this.options       = $.extend({}, Collapse.DEFAULTS, options)
    this.$trigger      = $('[data-toggle="collapse"][href="#' + element.id + '"],' +
                           '[data-toggle="collapse"][data-target="#' + element.id + '"]')
    this.transitioning = null

    if (this.options.parent) {
      this.$parent = this.getParent()
    } else {
      this.addAriaAndCollapsedClass(this.$element, this.$trigger)
    }

    if (this.options.toggle) this.toggle()
  }

  Collapse.VERSION  = '3.4.1'

  Collapse.TRANSITION_DURATION = 350

  Collapse.DEFAULTS = {
    toggle: true
  }

  Collapse.prototype.dimension = function () {
    var hasWidth = this.$element.hasClass('width')
    return hasWidth ? 'width' : 'height'
  }

  Collapse.prototype.show = function () {
    if (this.transitioning || this.$element.hasClass('in')) return

    var activesData
    var actives = this.$parent && this.$parent.children('.panel').children('.in, .collapsing')

    if (actives && actives.length) {
      activesData = actives.data('bs.collapse')
      if (activesData && activesData.transitioning) return
    }

    var startEvent = $.Event('show.bs.collapse')
    this.$element.trigger(startEvent)
    if (startEvent.isDefaultPrevented()) return

    if (actives && actives.length) {
      Plugin.call(actives, 'hide')
      activesData || actives.data('bs.collapse', null)
    }

    var dimension = this.dimension()

    this.$element
      .removeClass('collapse')
      .addClass('collapsing')[dimension](0)
      .attr('aria-expanded', true)

    this.$trigger
      .removeClass('collapsed')
      .attr('aria-expanded', true)

    this.transitioning = 1

    var complete = function () {
      this.$element
        .removeClass('collapsing')
        .addClass('collapse in')[dimension]('')
      this.transitioning = 0
      this.$element
        .trigger('shown.bs.collapse')
    }

    if (!$.support.transition) return complete.call(this)

    var scrollSize = $.camelCase(['scroll', dimension].join('-'))

    this.$element
      .one('bsTransitionEnd', $.proxy(complete, this))
      .emulateTransitionEnd(Collapse.TRANSITION_DURATION)[dimension](this.$element[0][scrollSize])
  }

  Collapse.prototype.hide = function () {
    if (this.transitioning || !this.$element.hasClass('in')) return

    var startEvent = $.Event('hide.bs.collapse')
    this.$element.trigger(startEvent)
    if (startEvent.isDefaultPrevented()) return

    var dimension = this.dimension()

    this.$element[dimension](this.$element[dimension]())[0].offsetHeight

    this.$element
      .addClass('collapsing')
      .removeClass('collapse in')
      .attr('aria-expanded', false)

    this.$trigger
      .addClass('collapsed')
      .attr('aria-expanded', false)

    this.transitioning = 1

    var complete = function () {
      this.transitioning = 0
      this.$element
        .removeClass('collapsing')
        .addClass('collapse')
        .trigger('hidden.bs.collapse')
    }

    if (!$.support.transition) return complete.call(this)

    this.$element
      [dimension](0)
      .one('bsTransitionEnd', $.proxy(complete, this))
      .emulateTransitionEnd(Collapse.TRANSITION_DURATION)
  }

  Collapse.prototype.toggle = function () {
    this[this.$element.hasClass('in') ? 'hide' : 'show']()
  }

  Collapse.prototype.getParent = function () {
    return $(document).find(this.options.parent)
      .find('[data-toggle="collapse"][data-parent="' + this.options.parent + '"]')
      .each($.proxy(function (i, element) {
        var $element = $(element)
        this.addAriaAndCollapsedClass(getTargetFromTrigger($element), $element)
      }, this))
      .end()
  }

  Collapse.prototype.addAriaAndCollapsedClass = function ($element, $trigger) {
    var isOpen = $element.hasClass('in')

    $element.attr('aria-expanded', isOpen)
    $trigger
      .toggleClass('collapsed', !isOpen)
      .attr('aria-expanded', isOpen)
  }

  function getTargetFromTrigger($trigger) {
    var href
    var target = $trigger.attr('data-target')
      || (href = $trigger.attr('href')) && href.replace(/.*(?=#[^\s]+$)/, '') // strip for ie7

    return $(document).find(target)
  }


  // COLLAPSE PLUGIN DEFINITION
  // ==========================

  function Plugin(option) {
    return this.each(function () {
      var $this   = $(this)
      var data    = $this.data('bs.collapse')
      var options = $.extend({}, Collapse.DEFAULTS, $this.data(), typeof option == 'object' && option)

      if (!data && options.toggle && /show|hide/.test(option)) options.toggle = false
      if (!data) $this.data('bs.collapse', (data = new Collapse(this, options)))
      if (typeof option == 'string') data[option]()
    })
  }

  var old = $.fn.collapse

  $.fn.collapse             = Plugin
  $.fn.collapse.Constructor = Collapse


  // COLLAPSE NO CONFLICT
  // ====================

  $.fn.collapse.noConflict = function () {
    $.fn.collapse = old
    return this
  }


  // COLLAPSE DATA-API
  // =================

  $(document).on('click.bs.collapse.data-api', '[data-toggle="collapse"]', function (e) {
    var $this   = $(this)

    if (!$this.attr('data-target')) e.preventDefault()

    var $target = getTargetFromTrigger($this)
    var data    = $target.data('bs.collapse')
    var option  = data ? 'toggle' : $this.data()

    Plugin.call($target, option)
  })

}(jQuery);
/* ========================================================================
 * Bootstrap: dropdown.js v3.4.1
 * https://getbootstrap.com/docs/3.4/javascript/#dropdowns
 * ========================================================================
 * Copyright 2011-2019 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */


+function ($) {
  'use strict';

  // DROPDOWN CLASS DEFINITION
  // =========================

  var backdrop = '.dropdown-backdrop'
  var toggle   = '[data-toggle="dropdown"]'
  var Dropdown = function (element) {
    $(element).on('click.bs.dropdown', this.toggle)
  }

  Dropdown.VERSION = '3.4.1'

  function getParent($this) {
    var selector = $this.attr('data-target')

    if (!selector) {
      selector = $this.attr('href')
      selector = selector && /#[A-Za-z]/.test(selector) && selector.replace(/.*(?=#[^\s]*$)/, '') // strip for ie7
    }

    var $parent = selector !== '#' ? $(document).find(selector) : null

    return $parent && $parent.length ? $parent : $this.parent()
  }

  function clearMenus(e) {
    if (e && e.which === 3) return
    $(backdrop).remove()
    $(toggle).each(function () {
      var $this         = $(this)
      var $parent       = getParent($this)
      var relatedTarget = { relatedTarget: this }

      if (!$parent.hasClass('open')) return

      if (e && e.type == 'click' && /input|textarea/i.test(e.target.tagName) && $.contains($parent[0], e.target)) return

      $parent.trigger(e = $.Event('hide.bs.dropdown', relatedTarget))

      if (e.isDefaultPrevented()) return

      $this.attr('aria-expanded', 'false')
      $parent.removeClass('open').trigger($.Event('hidden.bs.dropdown', relatedTarget))
    })
  }

  Dropdown.prototype.toggle = function (e) {
    var $this = $(this)

    if ($this.is('.disabled, :disabled')) return

    var $parent  = getParent($this)
    var isActive = $parent.hasClass('open')

    clearMenus()

    if (!isActive) {
      if ('ontouchstart' in document.documentElement && !$parent.closest('.navbar-nav').length) {
        // if mobile we use a backdrop because click events don't delegate
        $(document.createElement('div'))
          .addClass('dropdown-backdrop')
          .insertAfter($(this))
          .on('click', clearMenus)
      }

      var relatedTarget = { relatedTarget: this }
      $parent.trigger(e = $.Event('show.bs.dropdown', relatedTarget))

      if (e.isDefaultPrevented()) return

      $this
        .trigger('focus')
        .attr('aria-expanded', 'true')

      $parent
        .toggleClass('open')
        .trigger($.Event('shown.bs.dropdown', relatedTarget))
    }

    return false
  }

  Dropdown.prototype.keydown = function (e) {
    if (!/(38|40|27|32)/.test(e.which) || /input|textarea/i.test(e.target.tagName)) return

    var $this = $(this)

    e.preventDefault()
    e.stopPropagation()

    if ($this.is('.disabled, :disabled')) return

    var $parent  = getParent($this)
    var isActive = $parent.hasClass('open')

    if (!isActive && e.which != 27 || isActive && e.which == 27) {
      if (e.which == 27) $parent.find(toggle).trigger('focus')
      return $this.trigger('click')
    }

    var desc = ' li:not(.disabled):visible a'
    var $items = $parent.find('.dropdown-menu' + desc)

    if (!$items.length) return

    var index = $items.index(e.target)

    if (e.which == 38 && index > 0)                 index--         // up
    if (e.which == 40 && index < $items.length - 1) index++         // down
    if (!~index)                                    index = 0

    $items.eq(index).trigger('focus')
  }


  // DROPDOWN PLUGIN DEFINITION
  // ==========================

  function Plugin(option) {
    return this.each(function () {
      var $this = $(this)
      var data  = $this.data('bs.dropdown')

      if (!data) $this.data('bs.dropdown', (data = new Dropdown(this)))
      if (typeof option == 'string') data[option].call($this)
    })
  }

  var old = $.fn.dropdown

  $.fn.dropdown             = Plugin
  $.fn.dropdown.Constructor = Dropdown


  // DROPDOWN NO CONFLICT
  // ====================

  $.fn.dropdown.noConflict = function () {
    $.fn.dropdown = old
    return this
  }


  // APPLY TO STANDARD DROPDOWN ELEMENTS
  // ===================================

  $(document)
    .on('click.bs.dropdown.data-api', clearMenus)
    .on('click.bs.dropdown.data-api', '.dropdown form', function (e) { e.stopPropagation() })
    .on('click.bs.dropdown.data-api', toggle, Dropdown.prototype.toggle)
    .on('keydown.bs.dropdown.data-api', toggle, Dropdown.prototype.keydown)
    .on('keydown.bs.dropdown.data-api', '.dropdown-menu', Dropdown.prototype.keydown)

}(jQuery);
/* ========================================================================
 * Bootstrap: tab.js v3.4.1
 * https://getbootstrap.com/docs/3.4/javascript/#tabs
 * ========================================================================
 * Copyright 2011-2019 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */


+function ($) {
  'use strict';

  // TAB CLASS DEFINITION
  // ====================

  var Tab = function (element) {
    // jscs:disable requireDollarBeforejQueryAssignment
    this.element = $(element)
    // jscs:enable requireDollarBeforejQueryAssignment
  }

  Tab.VERSION = '3.4.1'

  Tab.TRANSITION_DURATION = 150

  Tab.prototype.show = function () {
    var $this    = this.element
    var $ul      = $this.closest('ul:not(.dropdown-menu)')
    var selector = $this.data('target')

    if (!selector) {
      selector = $this.attr('href')
      selector = selector && selector.replace(/.*(?=#[^\s]*$)/, '') // strip for ie7
    }

    if ($this.parent('li').hasClass('active')) return

    var $previous = $ul.find('.active:last a')
    var hideEvent = $.Event('hide.bs.tab', {
      relatedTarget: $this[0]
    })
    var showEvent = $.Event('show.bs.tab', {
      relatedTarget: $previous[0]
    })

    $previous.trigger(hideEvent)
    $this.trigger(showEvent)

    if (showEvent.isDefaultPrevented() || hideEvent.isDefaultPrevented()) return

    var $target = $(document).find(selector)

    this.activate($this.closest('li'), $ul)
    this.activate($target, $target.parent(), function () {
      $previous.trigger({
        type: 'hidden.bs.tab',
        relatedTarget: $this[0]
      })
      $this.trigger({
        type: 'shown.bs.tab',
        relatedTarget: $previous[0]
      })
    })
  }

  Tab.prototype.activate = function (element, container, callback) {
    var $active    = container.find('> .active')
    var transition = callback
      && $.support.transition
      && ($active.length && $active.hasClass('fade') || !!container.find('> .fade').length)

    function next() {
      $active
        .removeClass('active')
        .find('> .dropdown-menu > .active')
        .removeClass('active')
        .end()
        .find('[data-toggle="tab"]')
        .attr('aria-expanded', false)

      element
        .addClass('active')
        .find('[data-toggle="tab"]')
        .attr('aria-expanded', true)

      if (transition) {
        element[0].offsetWidth // reflow for transition
        element.addClass('in')
      } else {
        element.removeClass('fade')
      }

      if (element.parent('.dropdown-menu').length) {
        element
          .closest('li.dropdown')
          .addClass('active')
          .end()
          .find('[data-toggle="tab"]')
          .attr('aria-expanded', true)
      }

      callback && callback()
    }

    $active.length && transition ?
      $active
        .one('bsTransitionEnd', next)
        .emulateTransitionEnd(Tab.TRANSITION_DURATION) :
      next()

    $active.removeClass('in')
  }


  // TAB PLUGIN DEFINITION
  // =====================

  function Plugin(option) {
    return this.each(function () {
      var $this = $(this)
      var data  = $this.data('bs.tab')

      if (!data) $this.data('bs.tab', (data = new Tab(this)))
      if (typeof option == 'string') data[option]()
    })
  }

  var old = $.fn.tab

  $.fn.tab             = Plugin
  $.fn.tab.Constructor = Tab


  // TAB NO CONFLICT
  // ===============

  $.fn.tab.noConflict = function () {
    $.fn.tab = old
    return this
  }


  // TAB DATA-API
  // ============

  var clickHandler = function (e) {
    e.preventDefault()
    Plugin.call($(this), 'show')
  }

  $(document)
    .on('click.bs.tab.data-api', '[data-toggle="tab"]', clickHandler)
    .on('click.bs.tab.data-api', '[data-toggle="pill"]', clickHandler)

}(jQuery);
/* ========================================================================
 * Bootstrap: transition.js v3.4.1
 * https://getbootstrap.com/docs/3.4/javascript/#transitions
 * ========================================================================
 * Copyright 2011-2019 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */


+function ($) {
  'use strict';

  // CSS TRANSITION SUPPORT (Shoutout: https://modernizr.com/)
  // ============================================================

  function transitionEnd() {
    var el = document.createElement('bootstrap')

    var transEndEventNames = {
      WebkitTransition : 'webkitTransitionEnd',
      MozTransition    : 'transitionend',
      OTransition      : 'oTransitionEnd otransitionend',
      transition       : 'transitionend'
    }

    for (var name in transEndEventNames) {
      if (el.style[name] !== undefined) {
        return { end: transEndEventNames[name] }
      }
    }

    return false // explicit for ie8 (  ._.)
  }

  // https://blog.alexmaccaw.com/css-transitions
  $.fn.emulateTransitionEnd = function (duration) {
    var called = false
    var $el = this
    $(this).one('bsTransitionEnd', function () { called = true })
    var callback = function () { if (!called) $($el).trigger($.support.transition.end) }
    setTimeout(callback, duration)
    return this
  }

  $(function () {
    $.support.transition = transitionEnd()

    if (!$.support.transition) return

    $.event.special.bsTransitionEnd = {
      bindType: $.support.transition.end,
      delegateType: $.support.transition.end,
      handle: function (e) {
        if ($(e.target).is(this)) return e.handleObj.handler.apply(this, arguments)
      }
    }
  })

}(jQuery);
/* ========================================================================
 * Bootstrap: scrollspy.js v3.4.1
 * https://getbootstrap.com/docs/3.4/javascript/#scrollspy
 * ========================================================================
 * Copyright 2011-2019 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */


+function ($) {
  'use strict';

  // SCROLLSPY CLASS DEFINITION
  // ==========================

  function ScrollSpy(element, options) {
    this.$body          = $(document.body)
    this.$scrollElement = $(element).is(document.body) ? $(window) : $(element)
    this.options        = $.extend({}, ScrollSpy.DEFAULTS, options)
    this.selector       = (this.options.target || '') + ' .nav li > a'
    this.offsets        = []
    this.targets        = []
    this.activeTarget   = null
    this.scrollHeight   = 0

    this.$scrollElement.on('scroll.bs.scrollspy', $.proxy(this.process, this))
    this.refresh()
    this.process()
  }

  ScrollSpy.VERSION  = '3.4.1'

  ScrollSpy.DEFAULTS = {
    offset: 10
  }

  ScrollSpy.prototype.getScrollHeight = function () {
    return this.$scrollElement[0].scrollHeight || Math.max(this.$body[0].scrollHeight, document.documentElement.scrollHeight)
  }

  ScrollSpy.prototype.refresh = function () {
    var that          = this
    var offsetMethod  = 'offset'
    var offsetBase    = 0

    this.offsets      = []
    this.targets      = []
    this.scrollHeight = this.getScrollHeight()

    if (!$.isWindow(this.$scrollElement[0])) {
      offsetMethod = 'position'
      offsetBase   = this.$scrollElement.scrollTop()
    }

    this.$body
      .find(this.selector)
      .map(function () {
        var $el   = $(this)
        var href  = $el.data('target') || $el.attr('href')
        var $href = /^#./.test(href) && $(href)

        return ($href
          && $href.length
          && $href.is(':visible')
          && [[$href[offsetMethod]().top + offsetBase, href]]) || null
      })
      .sort(function (a, b) { return a[0] - b[0] })
      .each(function () {
        that.offsets.push(this[0])
        that.targets.push(this[1])
      })
  }

  ScrollSpy.prototype.process = function () {
    var scrollTop    = this.$scrollElement.scrollTop() + this.options.offset
    var scrollHeight = this.getScrollHeight()
    var maxScroll    = this.options.offset + scrollHeight - this.$scrollElement.height()
    var offsets      = this.offsets
    var targets      = this.targets
    var activeTarget = this.activeTarget
    var i

    if (this.scrollHeight != scrollHeight) {
      this.refresh()
    }

    if (scrollTop >= maxScroll) {
      return activeTarget != (i = targets[targets.length - 1]) && this.activate(i)
    }

    if (activeTarget && scrollTop < offsets[0]) {
      this.activeTarget = null
      return this.clear()
    }

    for (i = offsets.length; i--;) {
      activeTarget != targets[i]
        && scrollTop >= offsets[i]
        && (offsets[i + 1] === undefined || scrollTop < offsets[i + 1])
        && this.activate(targets[i])
    }
  }

  ScrollSpy.prototype.activate = function (target) {
    this.activeTarget = target

    this.clear()

    var selector = this.selector +
      '[data-target="' + target + '"],' +
      this.selector + '[href="' + target + '"]'

    var active = $(selector)
      .parents('li')
      .addClass('active')

    if (active.parent('.dropdown-menu').length) {
      active = active
        .closest('li.dropdown')
        .addClass('active')
    }

    active.trigger('activate.bs.scrollspy')
  }

  ScrollSpy.prototype.clear = function () {
    $(this.selector)
      .parentsUntil(this.options.target, '.active')
      .removeClass('active')
  }


  // SCROLLSPY PLUGIN DEFINITION
  // ===========================

  function Plugin(option) {
    return this.each(function () {
      var $this   = $(this)
      var data    = $this.data('bs.scrollspy')
      var options = typeof option == 'object' && option

      if (!data) $this.data('bs.scrollspy', (data = new ScrollSpy(this, options)))
      if (typeof option == 'string') data[option]()
    })
  }

  var old = $.fn.scrollspy

  $.fn.scrollspy             = Plugin
  $.fn.scrollspy.Constructor = ScrollSpy


  // SCROLLSPY NO CONFLICT
  // =====================

  $.fn.scrollspy.noConflict = function () {
    $.fn.scrollspy = old
    return this
  }


  // SCROLLSPY DATA-API
  // ==================

  $(window).on('load.bs.scrollspy.data-api', function () {
    $('[data-spy="scroll"]').each(function () {
      var $spy = $(this)
      Plugin.call($spy, $spy.data())
    })
  })

}(jQuery);
/* ========================================================================
 * Bootstrap: modal.js v3.4.1
 * https://getbootstrap.com/docs/3.4/javascript/#modals
 * ========================================================================
 * Copyright 2011-2019 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */


+function ($) {
  'use strict';

  // MODAL CLASS DEFINITION
  // ======================

  var Modal = function (element, options) {
    this.options = options
    this.$body = $(document.body)
    this.$element = $(element)
    this.$dialog = this.$element.find('.modal-dialog')
    this.$backdrop = null
    this.isShown = null
    this.originalBodyPad = null
    this.scrollbarWidth = 0
    this.ignoreBackdropClick = false
    this.fixedContent = '.navbar-fixed-top, .navbar-fixed-bottom'

    if (this.options.remote) {
      this.$element
        .find('.modal-content')
        .load(this.options.remote, $.proxy(function () {
          this.$element.trigger('loaded.bs.modal')
        }, this))
    }
  }

  Modal.VERSION = '3.4.1'

  Modal.TRANSITION_DURATION = 300
  Modal.BACKDROP_TRANSITION_DURATION = 150

  Modal.DEFAULTS = {
    backdrop: true,
    keyboard: true,
    show: true
  }

  Modal.prototype.toggle = function (_relatedTarget) {
    return this.isShown ? this.hide() : this.show(_relatedTarget)
  }

  Modal.prototype.show = function (_relatedTarget) {
    var that = this
    var e = $.Event('show.bs.modal', { relatedTarget: _relatedTarget })

    this.$element.trigger(e)

    if (this.isShown || e.isDefaultPrevented()) return

    this.isShown = true

    this.checkScrollbar()
    this.setScrollbar()
    this.$body.addClass('modal-open')

    this.escape()
    this.resize()

    this.$element.on('click.dismiss.bs.modal', '[data-dismiss="modal"]', $.proxy(this.hide, this))

    this.$dialog.on('mousedown.dismiss.bs.modal', function () {
      that.$element.one('mouseup.dismiss.bs.modal', function (e) {
        if ($(e.target).is(that.$element)) that.ignoreBackdropClick = true
      })
    })

    this.backdrop(function () {
      var transition = $.support.transition && that.$element.hasClass('fade')

      if (!that.$element.parent().length) {
        that.$element.appendTo(that.$body) // don't move modals dom position
      }

      that.$element
        .show()
        .scrollTop(0)

      that.adjustDialog()

      if (transition) {
        that.$element[0].offsetWidth // force reflow
      }

      that.$element.addClass('in')

      that.enforceFocus()

      var e = $.Event('shown.bs.modal', { relatedTarget: _relatedTarget })

      transition ?
        that.$dialog // wait for modal to slide in
          .one('bsTransitionEnd', function () {
            that.$element.trigger('focus').trigger(e)
          })
          .emulateTransitionEnd(Modal.TRANSITION_DURATION) :
        that.$element.trigger('focus').trigger(e)
    })
  }

  Modal.prototype.hide = function (e) {
    if (e) e.preventDefault()

    e = $.Event('hide.bs.modal')

    this.$element.trigger(e)

    if (!this.isShown || e.isDefaultPrevented()) return

    this.isShown = false

    this.escape()
    this.resize()

    $(document).off('focusin.bs.modal')

    this.$element
      .removeClass('in')
      .off('click.dismiss.bs.modal')
      .off('mouseup.dismiss.bs.modal')

    this.$dialog.off('mousedown.dismiss.bs.modal')

    $.support.transition && this.$element.hasClass('fade') ?
      this.$element
        .one('bsTransitionEnd', $.proxy(this.hideModal, this))
        .emulateTransitionEnd(Modal.TRANSITION_DURATION) :
      this.hideModal()
  }

  Modal.prototype.enforceFocus = function () {
    $(document)
      .off('focusin.bs.modal') // guard against infinite focus loop
      .on('focusin.bs.modal', $.proxy(function (e) {
        if (document !== e.target &&
          this.$element[0] !== e.target &&
          !this.$element.has(e.target).length) {
          this.$element.trigger('focus')
        }
      }, this))
  }

  Modal.prototype.escape = function () {
    if (this.isShown && this.options.keyboard) {
      this.$element.on('keydown.dismiss.bs.modal', $.proxy(function (e) {
        e.which == 27 && this.hide()
      }, this))
    } else if (!this.isShown) {
      this.$element.off('keydown.dismiss.bs.modal')
    }
  }

  Modal.prototype.resize = function () {
    if (this.isShown) {
      $(window).on('resize.bs.modal', $.proxy(this.handleUpdate, this))
    } else {
      $(window).off('resize.bs.modal')
    }
  }

  Modal.prototype.hideModal = function () {
    var that = this
    this.$element.hide()
    this.backdrop(function () {
      that.$body.removeClass('modal-open')
      that.resetAdjustments()
      that.resetScrollbar()
      that.$element.trigger('hidden.bs.modal')
    })
  }

  Modal.prototype.removeBackdrop = function () {
    this.$backdrop && this.$backdrop.remove()
    this.$backdrop = null
  }

  Modal.prototype.backdrop = function (callback) {
    var that = this
    var animate = this.$element.hasClass('fade') ? 'fade' : ''

    if (this.isShown && this.options.backdrop) {
      var doAnimate = $.support.transition && animate

      this.$backdrop = $(document.createElement('div'))
        .addClass('modal-backdrop ' + animate)
        .appendTo(this.$body)

      this.$element.on('click.dismiss.bs.modal', $.proxy(function (e) {
        if (this.ignoreBackdropClick) {
          this.ignoreBackdropClick = false
          return
        }
        if (e.target !== e.currentTarget) return
        this.options.backdrop == 'static'
          ? this.$element[0].focus()
          : this.hide()
      }, this))

      if (doAnimate) this.$backdrop[0].offsetWidth // force reflow

      this.$backdrop.addClass('in')

      if (!callback) return

      doAnimate ?
        this.$backdrop
          .one('bsTransitionEnd', callback)
          .emulateTransitionEnd(Modal.BACKDROP_TRANSITION_DURATION) :
        callback()

    } else if (!this.isShown && this.$backdrop) {
      this.$backdrop.removeClass('in')

      var callbackRemove = function () {
        that.removeBackdrop()
        callback && callback()
      }
      $.support.transition && this.$element.hasClass('fade') ?
        this.$backdrop
          .one('bsTransitionEnd', callbackRemove)
          .emulateTransitionEnd(Modal.BACKDROP_TRANSITION_DURATION) :
        callbackRemove()

    } else if (callback) {
      callback()
    }
  }

  // these following methods are used to handle overflowing modals

  Modal.prototype.handleUpdate = function () {
    this.adjustDialog()
  }

  Modal.prototype.adjustDialog = function () {
    var modalIsOverflowing = this.$element[0].scrollHeight > document.documentElement.clientHeight

    this.$element.css({
      paddingLeft: !this.bodyIsOverflowing && modalIsOverflowing ? this.scrollbarWidth : '',
      paddingRight: this.bodyIsOverflowing && !modalIsOverflowing ? this.scrollbarWidth : ''
    })
  }

  Modal.prototype.resetAdjustments = function () {
    this.$element.css({
      paddingLeft: '',
      paddingRight: ''
    })
  }

  Modal.prototype.checkScrollbar = function () {
    var fullWindowWidth = window.innerWidth
    if (!fullWindowWidth) { // workaround for missing window.innerWidth in IE8
      var documentElementRect = document.documentElement.getBoundingClientRect()
      fullWindowWidth = documentElementRect.right - Math.abs(documentElementRect.left)
    }
    this.bodyIsOverflowing = document.body.clientWidth < fullWindowWidth
    this.scrollbarWidth = this.measureScrollbar()
  }

  Modal.prototype.setScrollbar = function () {
    var bodyPad = parseInt((this.$body.css('padding-right') || 0), 10)
    this.originalBodyPad = document.body.style.paddingRight || ''
    var scrollbarWidth = this.scrollbarWidth
    if (this.bodyIsOverflowing) {
      this.$body.css('padding-right', bodyPad + scrollbarWidth)
      $(this.fixedContent).each(function (index, element) {
        var actualPadding = element.style.paddingRight
        var calculatedPadding = $(element).css('padding-right')
        $(element)
          .data('padding-right', actualPadding)
          .css('padding-right', parseFloat(calculatedPadding) + scrollbarWidth + 'px')
      })
    }
  }

  Modal.prototype.resetScrollbar = function () {
    this.$body.css('padding-right', this.originalBodyPad)
    $(this.fixedContent).each(function (index, element) {
      var padding = $(element).data('padding-right')
      $(element).removeData('padding-right')
      element.style.paddingRight = padding ? padding : ''
    })
  }

  Modal.prototype.measureScrollbar = function () { // thx walsh
    var scrollDiv = document.createElement('div')
    scrollDiv.className = 'modal-scrollbar-measure'
    this.$body.append(scrollDiv)
    var scrollbarWidth = scrollDiv.offsetWidth - scrollDiv.clientWidth
    this.$body[0].removeChild(scrollDiv)
    return scrollbarWidth
  }


  // MODAL PLUGIN DEFINITION
  // =======================

  function Plugin(option, _relatedTarget) {
    return this.each(function () {
      var $this = $(this)
      var data = $this.data('bs.modal')
      var options = $.extend({}, Modal.DEFAULTS, $this.data(), typeof option == 'object' && option)

      if (!data) $this.data('bs.modal', (data = new Modal(this, options)))
      if (typeof option == 'string') data[option](_relatedTarget)
      else if (options.show) data.show(_relatedTarget)
    })
  }

  var old = $.fn.modal

  $.fn.modal = Plugin
  $.fn.modal.Constructor = Modal


  // MODAL NO CONFLICT
  // =================

  $.fn.modal.noConflict = function () {
    $.fn.modal = old
    return this
  }


  // MODAL DATA-API
  // ==============

  $(document).on('click.bs.modal.data-api', '[data-toggle="modal"]', function (e) {
    var $this = $(this)
    var href = $this.attr('href')
    var target = $this.attr('data-target') ||
      (href && href.replace(/.*(?=#[^\s]+$)/, '')) // strip for ie7

    var $target = $(document).find(target)
    var option = $target.data('bs.modal') ? 'toggle' : $.extend({ remote: !/#/.test(href) && href }, $target.data(), $this.data())

    if ($this.is('a')) e.preventDefault()

    $target.one('show.bs.modal', function (showEvent) {
      if (showEvent.isDefaultPrevented()) return // only register focus restorer if modal will actually get shown
      $target.one('hidden.bs.modal', function () {
        $this.is(':visible') && $this.trigger('focus')
      })
    })
    Plugin.call($target, option, this)
  })

}(jQuery);
// Delete this file when this bug is fixed:
//  https://github.com/twbs/bootstrap/pull/14273
// As well as:
//  https://github.com/twbs/bootstrap/pull/13718


/* ========================================================================
 * Bootstrap: tooltip.js v3.2.0
 * http://getbootstrap.com/javascript/#tooltip
 * Inspired by the original jQuery.tipsy by Jason Frame
 * ========================================================================
 * Copyright 2011-2014 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */


+function ($) {
  'use strict';

  // TOOLTIP PUBLIC CLASS DEFINITION
  // ===============================

  var Tooltip = function (element, options) {
    this.type       =
    this.options    =
    this.enabled    =
    this.timeout    =
    this.hoverState =
    this.$element   = null

    this.init('tooltip', element, options)
  }

  Tooltip.VERSION  = '3.2.0'

  Tooltip.TRANSITION_DURATION = 150

  Tooltip.DEFAULTS = {
    animation: true,
    placement: 'top',
    selector: false,
    template: '<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',
    trigger: 'hover focus',
    title: '',
    delay: 0,
    html: false,
    container: false,
    viewport: {
      selector: 'body',
      padding: 0
    }
  }

  Tooltip.prototype.init = function (type, element, options) {
    this.enabled   = true
    this.type      = type
    this.$element  = $(element)
    this.options   = this.getOptions(options)
    this.$viewport = this.options.viewport && $(this.options.viewport.selector || this.options.viewport)

    var triggers = this.options.trigger.split(' ')

    for (var i = triggers.length; i--;) {
      var trigger = triggers[i]

      if (trigger == 'click') {
        this.$element.on('click.' + this.type, this.options.selector, $.proxy(this.toggle, this))
      } else if (trigger != 'manual') {
        var eventIn  = trigger == 'hover' ? 'mouseenter' : 'focusin'
        var eventOut = trigger == 'hover' ? 'mouseleave' : 'focusout'

        this.$element.on(eventIn  + '.' + this.type, this.options.selector, $.proxy(this.enter, this))
        this.$element.on(eventOut + '.' + this.type, this.options.selector, $.proxy(this.leave, this))
      }
    }

    this.options.selector ?
      (this._options = $.extend({}, this.options, { trigger: 'manual', selector: '' })) :
      this.fixTitle()
  }

  Tooltip.prototype.getDefaults = function () {
    return Tooltip.DEFAULTS
  }

  Tooltip.prototype.getOptions = function (options) {
    options = $.extend({}, this.getDefaults(), this.$element.data(), options)

    if (options.delay && typeof options.delay == 'number') {
      options.delay = {
        show: options.delay,
        hide: options.delay
      }
    }

    return options
  }

  Tooltip.prototype.getDelegateOptions = function () {
    var options  = {}
    var defaults = this.getDefaults()

    this._options && $.each(this._options, function (key, value) {
      if (defaults[key] != value) options[key] = value
    })

    return options
  }

  Tooltip.prototype.enter = function (obj) {
    var self = obj instanceof this.constructor ?
      obj : $(obj.currentTarget).data('bs.' + this.type)

    if (self && self.$tip && self.$tip.is(':visible')) {
      self.hoverState = 'in'
      return
    }

    if (!self) {
      self = new this.constructor(obj.currentTarget, this.getDelegateOptions())
      $(obj.currentTarget).data('bs.' + this.type, self)
    }

    clearTimeout(self.timeout)

    self.hoverState = 'in'

    if (!self.options.delay || !self.options.delay.show) return self.show()

    self.timeout = setTimeout(function () {
      if (self.hoverState == 'in') self.show()
    }, self.options.delay.show)
  }

  Tooltip.prototype.leave = function (obj) {
    var self = obj instanceof this.constructor ?
      obj : $(obj.currentTarget).data('bs.' + this.type)

    if (!self) {
      self = new this.constructor(obj.currentTarget, this.getDelegateOptions())
      $(obj.currentTarget).data('bs.' + this.type, self)
    }

    clearTimeout(self.timeout)

    self.hoverState = 'out'

    if (!self.options.delay || !self.options.delay.hide) return self.hide()

    self.timeout = setTimeout(function () {
      if (self.hoverState == 'out') self.hide()
    }, self.options.delay.hide)
  }

  Tooltip.prototype.show = function () {
    var e = $.Event('show.bs.' + this.type)

    if (this.hasContent() && this.enabled) {
      this.$element.trigger(e)

      var inDom = $.contains(document.documentElement, this.$element[0])
      if (e.isDefaultPrevented() || !inDom) return
      var that = this

      var $tip = this.tip()

      var tipId = this.getUID(this.type)

      this.setContent()
      $tip.attr('id', tipId)
      this.$element.attr('aria-describedby', tipId)

      if (this.options.animation) $tip.addClass('fade')

      var placement = typeof this.options.placement == 'function' ?
        this.options.placement.call(this, $tip[0], this.$element[0]) :
        this.options.placement

      var autoToken = /\s?auto?\s?/i
      var autoPlace = autoToken.test(placement)
      if (autoPlace) placement = placement.replace(autoToken, '') || 'top'

      $tip
        .detach()
        .css({ top: 0, left: 0, display: 'block' })
        .addClass(placement)
        .data('bs.' + this.type, this)

      this.options.container ? $tip.appendTo(this.options.container) : $tip.insertAfter(this.$element)

      var pos          = this.getPosition()
      var actualWidth  = $tip[0].offsetWidth
      var actualHeight = $tip[0].offsetHeight

      if (autoPlace) {
        var orgPlacement = placement
        var $parent      = this.$element.parent()
        var parentDim    = this.getPosition($parent)

        placement = placement == 'bottom' && pos.top   + pos.height       + actualHeight - parentDim.scroll > parentDim.height ? 'top'    :
                    placement == 'top'    && pos.top   - parentDim.scroll - actualHeight < 0                                   ? 'bottom' :
                    placement == 'right'  && pos.right + actualWidth      > parentDim.width                                    ? 'left'   :
                    placement == 'left'   && pos.left  - actualWidth      < parentDim.left                                     ? 'right'  :
                    placement

        $tip
          .removeClass(orgPlacement)
          .addClass(placement)
      }

      var calculatedOffset = this.getCalculatedOffset(placement, pos, actualWidth, actualHeight)

      this.applyPlacement(calculatedOffset, placement)

      var complete = function () {
        that.$element.trigger('shown.bs.' + that.type)
        that.hoverState = null
      }

      $.support.transition && this.$tip.hasClass('fade') ?
        $tip
          .one('bsTransitionEnd', complete)
          .emulateTransitionEnd(Tooltip.TRANSITION_DURATION) :
        complete()
    }
  }

  Tooltip.prototype.applyPlacement = function (offset, placement) {
    var $tip   = this.tip()
    var width  = $tip[0].offsetWidth
    var height = $tip[0].offsetHeight

    // manually read margins because getBoundingClientRect includes difference
    var marginTop = parseInt($tip.css('margin-top'), 10)
    var marginLeft = parseInt($tip.css('margin-left'), 10)

    // we must check for NaN for ie 8/9
    if (isNaN(marginTop))  marginTop  = 0
    if (isNaN(marginLeft)) marginLeft = 0

    offset.top  = offset.top  + marginTop
    offset.left = offset.left + marginLeft

    // $.fn.offset doesn't round pixel values
    // so we use setOffset directly with our own function B-0
    $.offset.setOffset($tip[0], $.extend({
      using: function (props) {
        $tip.css({
          top: Math.round(props.top),
          left: Math.round(props.left)
        })
      }
    }, offset), 0)

    $tip.addClass('in')

    // check to see if placing tip in new offset caused the tip to resize itself
    var actualWidth  = $tip[0].offsetWidth
    var actualHeight = $tip[0].offsetHeight

    if (placement == 'top' && actualHeight != height) {
      offset.top = offset.top + height - actualHeight
    }

    var delta = this.getViewportAdjustedDelta(placement, offset, actualWidth, actualHeight)

    if (delta.left) offset.left += delta.left
    else offset.top += delta.top

    // var arrowDelta          = delta.left ? delta.left * 2 - width + actualWidth : delta.top * 2 - height + actualHeight
    // var arrowPosition       = delta.left ? 'left'        : 'top'
    // var arrowOffsetPosition = delta.left ? 'offsetWidth' : 'offsetHeight'

    var topBottom           = /top|bottom/.test(placement)
    var arrowDelta          = topBottom ? delta.left * 2 - width + actualWidth : delta.top * 2 - height + actualHeight
    var arrowOffsetPosition = topBottom ? 'offsetWidth' : 'offsetHeight'
 
    $tip.offset(offset)
    // if(arrowDelta) debugger
    // this.replaceArrow(arrowDelta, $tip[0][arrowOffsetPosition], arrowPosition)
    this.replaceArrow(arrowDelta, $tip[0][arrowOffsetPosition], topBottom)
    
  }

  // Tooltip.prototype.replaceArrow = function (delta, dimension, position) {
  //   this.arrow().css(position, delta ? (50 * (1 - delta / dimension) + '%') : '')
  // }

  Tooltip.prototype.replaceArrow = function (delta, dimension, rightLeft) {
    this.arrow()
      .css(rightLeft ? 'left' : 'top', 50 * (1 - delta / dimension) + '%')
  }

  Tooltip.prototype.setContent = function () {
    var $tip  = this.tip()
    var title = this.getTitle()

    $tip.find('.tooltip-inner')[this.options.html ? 'html' : 'text'](title)
    $tip.removeClass('fade in top bottom left right')
  }

  Tooltip.prototype.hide = function () {
    var that = this
    var $tip = this.tip()
    var e    = $.Event('hide.bs.' + this.type)

    this.$element.removeAttr('aria-describedby')

    function complete() {
      if (that.hoverState != 'in') $tip.detach()
      that.$element.trigger('hidden.bs.' + that.type)
    }

    this.$element.trigger(e)

    if (e.isDefaultPrevented()) return

    $tip.removeClass('in')

    $.support.transition && this.$tip.hasClass('fade') ?
      $tip
        .one('bsTransitionEnd', complete)
        .emulateTransitionEnd(Tooltip.TRANSITION_DURATION) :
      complete()

    this.hoverState = null

    return this
  }

  Tooltip.prototype.fixTitle = function () {
    var $e = this.$element
    if ($e.attr('title') || typeof ($e.attr('data-original-title')) != 'string') {
      $e.attr('data-original-title', $e.attr('title') || '').attr('title', '')
    }
  }

  Tooltip.prototype.hasContent = function () {
    return this.getTitle()
  }

  Tooltip.prototype.getPosition = function ($element) {
    $element   = $element || this.$element

    var el     = $element[0]
    var isBody = el.tagName == 'BODY'
    var isSvg  = window.SVGElement && el instanceof window.SVGElement

    var elRect    = el.getBoundingClientRect ? el.getBoundingClientRect() : null
    var elOffset  = isBody ? { top: 0, left: 0 } : $element.offset()
    var scroll    = { scroll: isBody ? document.documentElement.scrollTop || document.body.scrollTop : $element.scrollTop() }
    var outerDims = isSvg ? {} : {
      width:  isBody ? $(window).width()  : $element.outerWidth(),
      height: isBody ? $(window).height() : $element.outerHeight()
    }

    return $.extend({}, elRect, scroll, outerDims, elOffset)
  }

  Tooltip.prototype.getCalculatedOffset = function (placement, pos, actualWidth, actualHeight) {
    return placement == 'bottom' ? { top: pos.top + pos.height,   left: pos.left + pos.width / 2 - actualWidth / 2  } :
           placement == 'top'    ? { top: pos.top - actualHeight, left: pos.left + pos.width / 2 - actualWidth / 2  } :
           placement == 'left'   ? { top: pos.top + pos.height / 2 - actualHeight / 2, left: pos.left - actualWidth } :
        /* placement == 'right' */ { top: pos.top + pos.height / 2 - actualHeight / 2, left: pos.left + pos.width   }

  }

  Tooltip.prototype.getViewportAdjustedDelta = function (placement, pos, actualWidth, actualHeight) {
    var delta = { top: 0, left: 0 }
    if (!this.$viewport) return delta

    var viewportPadding = this.options.viewport && this.options.viewport.padding || 0
    var viewportDimensions = this.getPosition(this.$viewport)

    if (/right|left/.test(placement)) {
      var topEdgeOffset    = pos.top - viewportPadding - viewportDimensions.scroll
      var bottomEdgeOffset = pos.top + viewportPadding - viewportDimensions.scroll + actualHeight
      if (topEdgeOffset < viewportDimensions.top) { // top overflow
        delta.top = viewportDimensions.top - topEdgeOffset
      } else if (bottomEdgeOffset > viewportDimensions.top + viewportDimensions.height) { // bottom overflow
        delta.top = viewportDimensions.top + viewportDimensions.height - bottomEdgeOffset
      }
    } else {
      var leftEdgeOffset  = pos.left - viewportPadding
      var rightEdgeOffset = pos.left + viewportPadding + actualWidth
      if (leftEdgeOffset < viewportDimensions.left) { // left overflow
        delta.left = viewportDimensions.left - leftEdgeOffset
      } else if (rightEdgeOffset > viewportDimensions.width) { // right overflow
        delta.left = viewportDimensions.left + viewportDimensions.width - rightEdgeOffset
      }
    }

    return delta
  }

  Tooltip.prototype.getTitle = function () {
    var title
    var $e = this.$element
    var o  = this.options

    title = $e.attr('data-original-title')
      || (typeof o.title == 'function' ? o.title.call($e[0]) :  o.title)

    return title
  }

  Tooltip.prototype.getUID = function (prefix) {
    do prefix += ~~(Math.random() * 1000000)
    while (document.getElementById(prefix))
    return prefix
  }

  Tooltip.prototype.tip = function () {
    return (this.$tip = this.$tip || $(this.options.template))
  }

  Tooltip.prototype.arrow = function () {
    return (this.$arrow = this.$arrow || this.tip().find('.tooltip-arrow'))
  }

  Tooltip.prototype.validate = function () {
    if (!this.$element[0].parentNode) {
      this.hide()
      this.$element = null
      this.options  = null
    }
  }

  Tooltip.prototype.enable = function () {
    this.enabled = true
  }

  Tooltip.prototype.disable = function () {
    this.enabled = false
  }

  Tooltip.prototype.toggleEnabled = function () {
    this.enabled = !this.enabled
  }

  Tooltip.prototype.toggle = function (e) {
    var self = this
    if (e) {
      self = $(e.currentTarget).data('bs.' + this.type)
      if (!self) {
        self = new this.constructor(e.currentTarget, this.getDelegateOptions())
        $(e.currentTarget).data('bs.' + this.type, self)
      }
    }

    self.tip().hasClass('in') ? self.leave(self) : self.enter(self)
  }

  Tooltip.prototype.destroy = function () {
    clearTimeout(this.timeout)
    this.hide().$element.off('.' + this.type).removeData('bs.' + this.type)
  }


  // TOOLTIP PLUGIN DEFINITION
  // =========================

  function Plugin(option) {
    return this.each(function () {
      var $this   = $(this)
      var data    = $this.data('bs.tooltip')
      var options = typeof option == 'object' && option

      if (!data && option == 'destroy') return
      if (!data) $this.data('bs.tooltip', (data = new Tooltip(this, options)))
      if (typeof option == 'string') data[option]()
    })
  }

  var old = $.fn.tooltip

  $.fn.tooltip             = Plugin
  $.fn.tooltip.Constructor = Tooltip


  // TOOLTIP NO CONFLICT
  // ===================

  $.fn.tooltip.noConflict = function () {
    $.fn.tooltip = old
    return this
  }

}(jQuery);
/* ========================================================================
 * Bootstrap: popover.js v3.4.1
 * https://getbootstrap.com/docs/3.4/javascript/#popovers
 * ========================================================================
 * Copyright 2011-2019 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */


+function ($) {
  'use strict';

  // POPOVER PUBLIC CLASS DEFINITION
  // ===============================

  var Popover = function (element, options) {
    this.init('popover', element, options)
  }

  if (!$.fn.tooltip) throw new Error('Popover requires tooltip.js')

  Popover.VERSION  = '3.4.1'

  Popover.DEFAULTS = $.extend({}, $.fn.tooltip.Constructor.DEFAULTS, {
    placement: 'right',
    trigger: 'click',
    content: '',
    template: '<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'
  })


  // NOTE: POPOVER EXTENDS tooltip.js
  // ================================

  Popover.prototype = $.extend({}, $.fn.tooltip.Constructor.prototype)

  Popover.prototype.constructor = Popover

  Popover.prototype.getDefaults = function () {
    return Popover.DEFAULTS
  }

  Popover.prototype.setContent = function () {
    var $tip    = this.tip()
    var title   = this.getTitle()
    var content = this.getContent()

    if (this.options.html) {
      var typeContent = typeof content

      if (this.options.sanitize) {
        title = this.sanitizeHtml(title)

        if (typeContent === 'string') {
          content = this.sanitizeHtml(content)
        }
      }

      $tip.find('.popover-title').html(title)
      $tip.find('.popover-content').children().detach().end()[
        typeContent === 'string' ? 'html' : 'append'
      ](content)
    } else {
      $tip.find('.popover-title').text(title)
      $tip.find('.popover-content').children().detach().end().text(content)
    }

    $tip.removeClass('fade top bottom left right in')

    // IE8 doesn't accept hiding via the `:empty` pseudo selector, we have to do
    // this manually by checking the contents.
    if (!$tip.find('.popover-title').html()) $tip.find('.popover-title').hide()
  }

  Popover.prototype.hasContent = function () {
    return this.getTitle() || this.getContent()
  }

  Popover.prototype.getContent = function () {
    var $e = this.$element
    var o  = this.options

    return $e.attr('data-content')
      || (typeof o.content == 'function' ?
        o.content.call($e[0]) :
        o.content)
  }

  Popover.prototype.arrow = function () {
    return (this.$arrow = this.$arrow || this.tip().find('.arrow'))
  }


  // POPOVER PLUGIN DEFINITION
  // =========================

  function Plugin(option) {
    return this.each(function () {
      var $this   = $(this)
      var data    = $this.data('bs.popover')
      var options = typeof option == 'object' && option

      if (!data && /destroy|hide/.test(option)) return
      if (!data) $this.data('bs.popover', (data = new Popover(this, options)))
      if (typeof option == 'string') data[option]()
    })
  }

  var old = $.fn.popover

  $.fn.popover             = Plugin
  $.fn.popover.Constructor = Popover


  // POPOVER NO CONFLICT
  // ===================

  $.fn.popover.noConflict = function () {
    $.fn.popover = old
    return this
  }

}(jQuery);
// Delete this file when this bug is fixed:
//  https://github.com/twbs/bootstrap/pull/14273
// Also delete the bootstrap-tooltip.js file.












;
// @ts-ignore
(function(){var t=this;var e=t.Backbone;var i=[];var r=i.push;var s=i.slice;var n=i.splice;var a;if(typeof exports!=="undefined"){a=exports}else{a=t.Backbone={}}a.VERSION="1.0.0";var h=t._;if(!h&&typeof require!=="undefined")h=require("underscore");a.$=t.jQuery||t.Zepto||t.ender||t.$;a.noConflict=function(){t.Backbone=e;return this};a.emulateHTTP=false;a.emulateJSON=false;var o=a.Events={on:function(t,e,i){if(!l(this,"on",t,[e,i])||!e)return this;this._events||(this._events={});var r=this._events[t]||(this._events[t]=[]);r.push({callback:e,context:i,ctx:i||this});return this},once:function(t,e,i){if(!l(this,"once",t,[e,i])||!e)return this;var r=this;var s=h.once(function(){r.off(t,s);e.apply(this,arguments)});s._callback=e;return this.on(t,s,i)},off:function(t,e,i){var r,s,n,a,o,u,c,f;if(!this._events||!l(this,"off",t,[e,i]))return this;if(!t&&!e&&!i){this._events={};return this}a=t?[t]:h.keys(this._events);for(o=0,u=a.length;o<u;o++){t=a[o];if(n=this._events[t]){this._events[t]=r=[];if(e||i){for(c=0,f=n.length;c<f;c++){s=n[c];if(e&&e!==s.callback&&e!==s.callback._callback||i&&i!==s.context){r.push(s)}}}if(!r.length)delete this._events[t]}}return this},trigger:function(t){if(!this._events)return this;var e=s.call(arguments,1);if(!l(this,"trigger",t,e))return this;var i=this._events[t];var r=this._events.all;if(i)c(i,e);if(r)c(r,arguments);return this},stopListening:function(t,e,i){var r=this._listeners;if(!r)return this;var s=!e&&!i;if(typeof e==="object")i=this;if(t)(r={})[t._listenerId]=t;for(var n in r){r[n].off(e,i,this);if(s)delete this._listeners[n]}return this}};var u=/\s+/;var l=function(t,e,i,r){if(!i)return true;if(typeof i==="object"){for(var s in i){t[e].apply(t,[s,i[s]].concat(r))}return false}if(u.test(i)){var n=i.split(u);for(var a=0,h=n.length;a<h;a++){t[e].apply(t,[n[a]].concat(r))}return false}return true};var c=function(t,e){var i,r=-1,s=t.length,n=e[0],a=e[1],h=e[2];switch(e.length){case 0:while(++r<s)(i=t[r]).callback.call(i.ctx);return;case 1:while(++r<s)(i=t[r]).callback.call(i.ctx,n);return;case 2:while(++r<s)(i=t[r]).callback.call(i.ctx,n,a);return;case 3:while(++r<s)(i=t[r]).callback.call(i.ctx,n,a,h);return;default:while(++r<s)(i=t[r]).callback.apply(i.ctx,e)}};var f={listenTo:"on",listenToOnce:"once"};h.each(f,function(t,e){o[e]=function(e,i,r){var s=this._listeners||(this._listeners={});var n=e._listenerId||(e._listenerId=h.uniqueId("l"));s[n]=e;if(typeof i==="object")r=this;e[t](i,r,this);return this}});o.bind=o.on;o.unbind=o.off;h.extend(a,o);var d=a.Model=function(t,e){var i;var r=t||{};e||(e={});this.cid=h.uniqueId("c");this.attributes={};h.extend(this,h.pick(e,p));if(e.parse)r=this.parse(r,e)||{};if(i=h.result(this,"defaults")){r=h.defaults({},r,i)}this.set(r,e);this.changed={};this.initialize.apply(this,arguments)};var p=["url","urlRoot","collection"];h.extend(d.prototype,o,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(t){return h.clone(this.attributes)},sync:function(){return a.sync.apply(this,arguments)},get:function(t){return this.attributes[t]},escape:function(t){return h.escape(this.get(t))},has:function(t){return this.get(t)!=null},set:function(t,e,i){var r,s,n,a,o,u,l,c;if(t==null)return this;if(typeof t==="object"){s=t;i=e}else{(s={})[t]=e}i||(i={});if(!this._validate(s,i))return false;n=i.unset;o=i.silent;a=[];u=this._changing;this._changing=true;if(!u){this._previousAttributes=h.clone(this.attributes);this.changed={}}c=this.attributes,l=this._previousAttributes;if(this.idAttribute in s)this.id=s[this.idAttribute];for(r in s){e=s[r];if(!h.isEqual(c[r],e))a.push(r);if(!h.isEqual(l[r],e)){this.changed[r]=e}else{delete this.changed[r]}n?delete c[r]:c[r]=e}if(!o){if(a.length)this._pending=true;for(var f=0,d=a.length;f<d;f++){this.trigger("change:"+a[f],this,c[a[f]],i)}}if(u)return this;if(!o){while(this._pending){this._pending=false;this.trigger("change",this,i)}}this._pending=false;this._changing=false;return this},unset:function(t,e){return this.set(t,void 0,h.extend({},e,{unset:true}))},clear:function(t){var e={};for(var i in this.attributes)e[i]=void 0;return this.set(e,h.extend({},t,{unset:true}))},hasChanged:function(t){if(t==null)return!h.isEmpty(this.changed);return h.has(this.changed,t)},changedAttributes:function(t){if(!t)return this.hasChanged()?h.clone(this.changed):false;var e,i=false;var r=this._changing?this._previousAttributes:this.attributes;for(var s in t){if(h.isEqual(r[s],e=t[s]))continue;(i||(i={}))[s]=e}return i},previous:function(t){if(t==null||!this._previousAttributes)return null;return this._previousAttributes[t]},previousAttributes:function(){return h.clone(this._previousAttributes)},fetch:function(t){t=t?h.clone(t):{};if(t.parse===void 0)t.parse=true;var e=this;var i=t.success;t.success=function(r){if(!e.set(e.parse(r,t),t))return false;if(i)i(e,r,t);e.trigger("sync",e,r,t)};R(this,t);return this.sync("read",this,t)},save:function(t,e,i){var r,s,n,a=this.attributes;if(t==null||typeof t==="object"){r=t;i=e}else{(r={})[t]=e}if(r&&(!i||!i.wait)&&!this.set(r,i))return false;i=h.extend({validate:true},i);if(!this._validate(r,i))return false;if(r&&i.wait){this.attributes=h.extend({},a,r)}if(i.parse===void 0)i.parse=true;var o=this;var u=i.success;i.success=function(t){o.attributes=a;var e=o.parse(t,i);if(i.wait)e=h.extend(r||{},e);if(h.isObject(e)&&!o.set(e,i)){return false}if(u)u(o,t,i);o.trigger("sync",o,t,i)};R(this,i);s=this.isNew()?"create":i.patch?"patch":"update";if(s==="patch")i.attrs=r;n=this.sync(s,this,i);if(r&&i.wait)this.attributes=a;return n},destroy:function(t){t=t?h.clone(t):{};var e=this;var i=t.success;var r=function(){e.trigger("destroy",e,e.collection,t)};t.success=function(s){if(t.wait||e.isNew())r();if(i)i(e,s,t);if(!e.isNew())e.trigger("sync",e,s,t)};if(this.isNew()){t.success();return false}R(this,t);var s=this.sync("delete",this,t);if(!t.wait)r();return s},url:function(){var t=h.result(this,"urlRoot")||h.result(this.collection,"url")||U();if(this.isNew())return t;return t+(t.charAt(t.length-1)==="/"?"":"/")+encodeURIComponent(this.id)},parse:function(t,e){return t},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return this.id==null},isValid:function(t){return this._validate({},h.extend(t||{},{validate:true}))},_validate:function(t,e){if(!e.validate||!this.validate)return true;t=h.extend({},this.attributes,t);var i=this.validationError=this.validate(t,e)||null;if(!i)return true;this.trigger("invalid",this,i,h.extend(e||{},{validationError:i}));return false}});var v=["keys","values","pairs","invert","pick","omit"];h.each(v,function(t){d.prototype[t]=function(){var e=s.call(arguments);e.unshift(this.attributes);return h[t].apply(h,e)}});var g=a.Collection=function(t,e){e||(e={});if(e.url)this.url=e.url;if(e.model)this.model=e.model;if(e.comparator!==void 0)this.comparator=e.comparator;this._reset();this.initialize.apply(this,arguments);if(t)this.reset(t,h.extend({silent:true},e))};var m={add:true,remove:true,merge:true};var y={add:true,merge:false,remove:false};h.extend(g.prototype,o,{model:d,initialize:function(){},toJSON:function(t){return this.map(function(e){return e.toJSON(t)})},sync:function(){return a.sync.apply(this,arguments)},add:function(t,e){return this.set(t,h.defaults(e||{},y))},remove:function(t,e){t=h.isArray(t)?t.slice():[t];e||(e={});var i,r,s,n;for(i=0,r=t.length;i<r;i++){n=this.get(t[i]);if(!n)continue;delete this._byId[n.id];delete this._byId[n.cid];s=this.indexOf(n);this.models.splice(s,1);this.length--;if(!e.silent){e.index=s;n.trigger("remove",n,this,e)}this._removeReference(n)}return this},set:function(t,e){e=h.defaults(e||{},m);if(e.parse)t=this.parse(t,e);if(!h.isArray(t))t=t?[t]:[];var i,s,a,o,u,l;var c=e.at;var f=this.comparator&&c==null&&e.sort!==false;var d=h.isString(this.comparator)?this.comparator:null;var p=[],v=[],g={};for(i=0,s=t.length;i<s;i++){if(!(a=this._prepareModel(t[i],e)))continue;if(u=this.get(a)){if(e.remove)g[u.cid]=true;if(e.merge){u.set(a.attributes,e);if(f&&!l&&u.hasChanged(d))l=true}}else if(e.add){p.push(a);a.on("all",this._onModelEvent,this);this._byId[a.cid]=a;if(a.id!=null)this._byId[a.id]=a}}if(e.remove){for(i=0,s=this.length;i<s;++i){if(!g[(a=this.models[i]).cid])v.push(a)}if(v.length)this.remove(v,e)}if(p.length){if(f)l=true;this.length+=p.length;if(c!=null){n.apply(this.models,[c,0].concat(p))}else{r.apply(this.models,p)}}if(l)this.sort({silent:true});if(e.silent)return this;for(i=0,s=p.length;i<s;i++){(a=p[i]).trigger("add",a,this,e)}if(l)this.trigger("sort",this,e);return this},reset:function(t,e){e||(e={});for(var i=0,r=this.models.length;i<r;i++){this._removeReference(this.models[i])}e.previousModels=this.models;this._reset();this.add(t,h.extend({silent:true},e));if(!e.silent)this.trigger("reset",this,e);return this},push:function(t,e){t=this._prepareModel(t,e);this.add(t,h.extend({at:this.length},e));return t},pop:function(t){var e=this.at(this.length-1);this.remove(e,t);return e},unshift:function(t,e){t=this._prepareModel(t,e);this.add(t,h.extend({at:0},e));return t},shift:function(t){var e=this.at(0);this.remove(e,t);return e},slice:function(t,e){return this.models.slice(t,e)},get:function(t){if(t==null)return void 0;return this._byId[t.id!=null?t.id:t.cid||t]},at:function(t){return this.models[t]},where:function(t,e){if(h.isEmpty(t))return e?void 0:[];return this[e?"find":"filter"](function(e){for(var i in t){if(t[i]!==e.get(i))return false}return true})},findWhere:function(t){return this.where(t,true)},sort:function(t){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");t||(t={});if(h.isString(this.comparator)||this.comparator.length===1){this.models=this.sortBy(this.comparator,this)}else{this.models.sort(h.bind(this.comparator,this))}if(!t.silent)this.trigger("sort",this,t);return this},sortedIndex:function(t,e,i){e||(e=this.comparator);var r=h.isFunction(e)?e:function(t){return t.get(e)};return h.sortedIndex(this.models,t,r,i)},pluck:function(t){return h.invoke(this.models,"get",t)},fetch:function(t){t=t?h.clone(t):{};if(t.parse===void 0)t.parse=true;var e=t.success;var i=this;t.success=function(r){var s=t.reset?"reset":"set";i[s](r,t);if(e)e(i,r,t);i.trigger("sync",i,r,t)};R(this,t);return this.sync("read",this,t)},create:function(t,e){e=e?h.clone(e):{};if(!(t=this._prepareModel(t,e)))return false;if(!e.wait)this.add(t,e);var i=this;var r=e.success;e.success=function(s){if(e.wait)i.add(t,e);if(r)r(t,s,e)};t.save(null,e);return t},parse:function(t,e){return t},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0;this.models=[];this._byId={}},_prepareModel:function(t,e){if(t instanceof d){if(!t.collection)t.collection=this;return t}e||(e={});e.collection=this;var i=new this.model(t,e);if(!i._validate(t,e)){this.trigger("invalid",this,t,e);return false}return i},_removeReference:function(t){if(this===t.collection)delete t.collection;t.off("all",this._onModelEvent,this)},_onModelEvent:function(t,e,i,r){if((t==="add"||t==="remove")&&i!==this)return;if(t==="destroy")this.remove(e,r);if(e&&t==="change:"+e.idAttribute){delete this._byId[e.previous(e.idAttribute)];if(e.id!=null)this._byId[e.id]=e}this.trigger.apply(this,arguments)}});var _=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","indexOf","shuffle","lastIndexOf","isEmpty","chain"];h.each(_,function(t){g.prototype[t]=function(){var e=s.call(arguments);e.unshift(this.models);return h[t].apply(h,e)}});var w=["groupBy","countBy","sortBy"];h.each(w,function(t){g.prototype[t]=function(e,i){var r=h.isFunction(e)?e:function(t){return t.get(e)};return h[t](this.models,r,i)}});var b=a.View=function(t){this.cid=h.uniqueId("view");this._configure(t||{});this._ensureElement();this.initialize.apply(this,arguments);this.delegateEvents()};var x=/^(\S+)\s*(.*)$/;var E=["model","collection","el","id","attributes","className","tagName","events"];h.extend(b.prototype,o,{tagName:"div",$:function(t){return this.$el.find(t)},initialize:function(){},render:function(){return this},remove:function(){this.$el.remove();this.stopListening();return this},setElement:function(t,e){if(this.$el)this.undelegateEvents();this.$el=t instanceof a.$?t:a.$(t);this.el=this.$el[0];if(e!==false)this.delegateEvents();return this},delegateEvents:function(t){if(!(t||(t=h.result(this,"events"))))return this;this.undelegateEvents();for(var e in t){var i=t[e];if(!h.isFunction(i))i=this[t[e]];if(!i)continue;var r=e.match(x);var s=r[1],n=r[2];i=h.bind(i,this);s+=".delegateEvents"+this.cid;if(n===""){this.$el.on(s,i)}else{this.$el.on(s,n,i)}}return this},undelegateEvents:function(){this.$el.off(".delegateEvents"+this.cid);return this},_configure:function(t){if(this.options)t=h.extend({},h.result(this,"options"),t);h.extend(this,h.pick(t,E));this.options=t},_ensureElement:function(){if(!this.el){var t=h.extend({},h.result(this,"attributes"));if(this.id)t.id=h.result(this,"id");if(this.className)t["class"]=h.result(this,"className");var e=a.$("<"+h.result(this,"tagName")+">").attr(t);this.setElement(e,false)}else{this.setElement(h.result(this,"el"),false)}}});a.sync=function(t,e,i){var r=k[t];h.defaults(i||(i={}),{emulateHTTP:a.emulateHTTP,emulateJSON:a.emulateJSON});var s={type:r,dataType:"json"};if(!i.url){s.url=h.result(e,"url")||U()}if(i.data==null&&e&&(t==="create"||t==="update"||t==="patch")){s.contentType="application/json";s.data=JSON.stringify(i.attrs||e.toJSON(i))}if(i.emulateJSON){s.contentType="application/x-www-form-urlencoded";s.data=s.data?{model:s.data}:{}}if(i.emulateHTTP&&(r==="PUT"||r==="DELETE"||r==="PATCH")){s.type="POST";if(i.emulateJSON)s.data._method=r;var n=i.beforeSend;i.beforeSend=function(t){t.setRequestHeader("X-HTTP-Method-Override",r);if(n)return n.apply(this,arguments)}}if(s.type!=="GET"&&!i.emulateJSON){s.processData=false}if(s.type==="PATCH"&&window.ActiveXObject&&!(window.external&&window.external.msActiveXFilteringEnabled)){s.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")}}var o=i.xhr=a.ajax(h.extend(s,i));e.trigger("request",e,o,i);return o};var k={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};a.ajax=function(){return a.$.ajax.apply(a.$,arguments)};var S=a.Router=function(t){t||(t={});if(t.routes)this.routes=t.routes;this._bindRoutes();this.initialize.apply(this,arguments)};var $=/\((.*?)\)/g;var T=/(\(\?)?:\w+/g;var H=/\*\w+/g;var A=/[\-{}\[\]+?.,\\\^$|#\s]/g;h.extend(S.prototype,o,{initialize:function(){},route:function(t,e,i){if(!h.isRegExp(t))t=this._routeToRegExp(t);if(h.isFunction(e)){i=e;e=""}if(!i)i=this[e];var r=this;a.history.route(t,function(s){var n=r._extractParameters(t,s);i&&i.apply(r,n);r.trigger.apply(r,["route:"+e].concat(n));r.trigger("route",e,n);a.history.trigger("route",r,e,n)});return this},navigate:function(t,e){a.history.navigate(t,e);return this},_bindRoutes:function(){if(!this.routes)return;this.routes=h.result(this,"routes");var t,e=h.keys(this.routes);while((t=e.pop())!=null){this.route(t,this.routes[t])}},_routeToRegExp:function(t){t=t.replace(A,"\\$&").replace($,"(?:$1)?").replace(T,function(t,e){return e?t:"([^/]+)"}).replace(H,"(.*?)");return new RegExp("^"+t+"$")},_extractParameters:function(t,e){var i=t.exec(e).slice(1);return h.map(i,function(t){return t?decodeURIComponent(t):null})}});var I=a.History=function(){this.handlers=[];h.bindAll(this,"checkUrl");if(typeof window!=="undefined"){this.location=window.location;this.history=window.history}};var N=/^[#\/]|\s+$/g;var P=/^\/+|\/+$/g;var O=/msie [\w.]+/;var C=/\/$/;I.started=false;h.extend(I.prototype,o,{interval:50,getHash:function(t){var e=(t||this).location.href.match(/#(.*)$/);return e?e[1]:""},getFragment:function(t,e){if(t==null){if(this._hasPushState||!this._wantsHashChange||e){t=this.location.pathname;var i=this.root.replace(C,"");if(!t.indexOf(i))t=t.substr(i.length)}else{t=this.getHash()}}return t.replace(N,"")},start:function(t){if(I.started)throw new Error("Backbone.history has already been started");I.started=true;this.options=h.extend({},{root:"/"},this.options,t);this.root=this.options.root;this._wantsHashChange=this.options.hashChange!==false;this._wantsPushState=!!this.options.pushState;this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var e=this.getFragment();var i=document.documentMode;var r=O.exec(navigator.userAgent.toLowerCase())&&(!i||i<=7);this.root=("/"+this.root+"/").replace(P,"/");if(r&&this._wantsHashChange){this.iframe=a.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow;this.navigate(e)}if(this._hasPushState){a.$(window).on("popstate",this.checkUrl)}else if(this._wantsHashChange&&"onhashchange"in window&&!r){a.$(window).on("hashchange",this.checkUrl)}else if(this._wantsHashChange){this._checkUrlInterval=setInterval(this.checkUrl,this.interval)}this.fragment=e;var s=this.location;var n=s.pathname.replace(/[^\/]$/,"$&/")===this.root;if(this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!n){this.fragment=this.getFragment(null,true);this.location.replace(this.root+this.location.search+"#"+this.fragment);return true}else if(this._wantsPushState&&this._hasPushState&&n&&s.hash){this.fragment=this.getHash().replace(N,"");this.history.replaceState({},document.title,this.root+this.fragment+s.search)}if(!this.options.silent)return this.loadUrl()},stop:function(){a.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl);clearInterval(this._checkUrlInterval);I.started=false},route:function(t,e){this.handlers.unshift({route:t,callback:e})},checkUrl:function(t){var e=this.getFragment();if(e===this.fragment&&this.iframe){e=this.getFragment(this.getHash(this.iframe))}if(e===this.fragment)return false;if(this.iframe)this.navigate(e);this.loadUrl()||this.loadUrl(this.getHash())},loadUrl:function(t){var e=this.fragment=this.getFragment(t);var i=h.any(this.handlers,function(t){if(t.route.test(e)){t.callback(e);return true}});return i},navigate:function(t,e){if(!I.started)return false;if(!e||e===true)e={trigger:e};t=this.getFragment(t||"");if(this.fragment===t)return;this.fragment=t;var i=this.root+t;if(this._hasPushState){this.history[e.replace?"replaceState":"pushState"]({},document.title,i)}else if(this._wantsHashChange){this._updateHash(this.location,t,e.replace);if(this.iframe&&t!==this.getFragment(this.getHash(this.iframe))){if(!e.replace)this.iframe.document.open().close();this._updateHash(this.iframe.location,t,e.replace)}}else{return this.location.assign(i)}if(e.trigger)this.loadUrl(t)},_updateHash:function(t,e,i){if(i){var r=t.href.replace(/(javascript:|#).*$/,"");t.replace(r+"#"+e)}else{t.hash="#"+e}}});a.history=new I;var j=function(t,e){var i=this;var r;if(t&&h.has(t,"constructor")){r=t.constructor}else{r=function(){return i.apply(this,arguments)}}h.extend(r,i,e);var s=function(){this.constructor=r};s.prototype=i.prototype;r.prototype=new s;if(t)h.extend(r.prototype,t);r.__super__=i.prototype;return r};d.extend=g.extend=S.extend=b.extend=I.extend=j;var U=function(){throw new Error('A "url" property or function must be specified')};var R=function(t,e){var i=e.error;e.error=function(r){if(i)i(t,r,e);t.trigger("error",t,r,e)}}}).call(this);
/**!

 @license
 handlebars v4.0.14

Copyright (C) 2011-2017 by Yehuda Katz

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.

*/
(function webpackUniversalModuleDefinition(root, factory) {
	if(typeof exports === 'object' && typeof module === 'object')
		module.exports = factory();
	else if(typeof define === 'function' && define.amd)
		define([], factory);
	else if(typeof exports === 'object')
		exports["Handlebars"] = factory();
	else
		root["Handlebars"] = factory();
})(this, function() {
return /******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};

/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {

/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId])
/******/ 			return installedModules[moduleId].exports;

/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			exports: {},
/******/ 			id: moduleId,
/******/ 			loaded: false
/******/ 		};

/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);

/******/ 		// Flag the module as loaded
/******/ 		module.loaded = true;

/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}


/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;

/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;

/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";

/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(0);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ (function(module, exports, __webpack_require__) {

	'use strict';

	var _interopRequireDefault = __webpack_require__(1)['default'];

	exports.__esModule = true;

	var _handlebarsRuntime = __webpack_require__(2);

	var _handlebarsRuntime2 = _interopRequireDefault(_handlebarsRuntime);

	// Compiler imports

	var _handlebarsCompilerAst = __webpack_require__(35);

	var _handlebarsCompilerAst2 = _interopRequireDefault(_handlebarsCompilerAst);

	var _handlebarsCompilerBase = __webpack_require__(36);

	var _handlebarsCompilerCompiler = __webpack_require__(41);

	var _handlebarsCompilerJavascriptCompiler = __webpack_require__(42);

	var _handlebarsCompilerJavascriptCompiler2 = _interopRequireDefault(_handlebarsCompilerJavascriptCompiler);

	var _handlebarsCompilerVisitor = __webpack_require__(39);

	var _handlebarsCompilerVisitor2 = _interopRequireDefault(_handlebarsCompilerVisitor);

	var _handlebarsNoConflict = __webpack_require__(34);

	var _handlebarsNoConflict2 = _interopRequireDefault(_handlebarsNoConflict);

	var _create = _handlebarsRuntime2['default'].create;
	function create() {
	  var hb = _create();

	  hb.compile = function (input, options) {
	    return _handlebarsCompilerCompiler.compile(input, options, hb);
	  };
	  hb.precompile = function (input, options) {
	    return _handlebarsCompilerCompiler.precompile(input, options, hb);
	  };

	  hb.AST = _handlebarsCompilerAst2['default'];
	  hb.Compiler = _handlebarsCompilerCompiler.Compiler;
	  hb.JavaScriptCompiler = _handlebarsCompilerJavascriptCompiler2['default'];
	  hb.Parser = _handlebarsCompilerBase.parser;
	  hb.parse = _handlebarsCompilerBase.parse;

	  return hb;
	}

	var inst = create();
	inst.create = create;

	_handlebarsNoConflict2['default'](inst);

	inst.Visitor = _handlebarsCompilerVisitor2['default'];

	inst['default'] = inst;

	exports['default'] = inst;
	module.exports = exports['default'];

/***/ }),
/* 1 */
/***/ (function(module, exports) {

	"use strict";

	exports["default"] = function (obj) {
	  return obj && obj.__esModule ? obj : {
	    "default": obj
	  };
	};

	exports.__esModule = true;

/***/ }),
/* 2 */
/***/ (function(module, exports, __webpack_require__) {

	'use strict';

	var _interopRequireWildcard = __webpack_require__(3)['default'];

	var _interopRequireDefault = __webpack_require__(1)['default'];

	exports.__esModule = true;

	var _handlebarsBase = __webpack_require__(4);

	var base = _interopRequireWildcard(_handlebarsBase);

	// Each of these augment the Handlebars object. No need to setup here.
	// (This is done to easily share code between commonjs and browse envs)

	var _handlebarsSafeString = __webpack_require__(21);

	var _handlebarsSafeString2 = _interopRequireDefault(_handlebarsSafeString);

	var _handlebarsException = __webpack_require__(6);

	var _handlebarsException2 = _interopRequireDefault(_handlebarsException);

	var _handlebarsUtils = __webpack_require__(5);

	var Utils = _interopRequireWildcard(_handlebarsUtils);

	var _handlebarsRuntime = __webpack_require__(22);

	var runtime = _interopRequireWildcard(_handlebarsRuntime);

	var _handlebarsNoConflict = __webpack_require__(34);

	var _handlebarsNoConflict2 = _interopRequireDefault(_handlebarsNoConflict);

	// For compatibility and usage outside of module systems, make the Handlebars object a namespace
	function create() {
	  var hb = new base.HandlebarsEnvironment();

	  Utils.extend(hb, base);
	  hb.SafeString = _handlebarsSafeString2['default'];
	  hb.Exception = _handlebarsException2['default'];
	  hb.Utils = Utils;
	  hb.escapeExpression = Utils.escapeExpression;

	  hb.VM = runtime;
	  hb.template = function (spec) {
	    return runtime.template(spec, hb);
	  };

	  return hb;
	}

	var inst = create();
	inst.create = create;

	_handlebarsNoConflict2['default'](inst);

	inst['default'] = inst;

	exports['default'] = inst;
	module.exports = exports['default'];

/***/ }),
/* 3 */
/***/ (function(module, exports) {

	"use strict";

	exports["default"] = function (obj) {
	  if (obj && obj.__esModule) {
	    return obj;
	  } else {
	    var newObj = {};

	    if (obj != null) {
	      for (var key in obj) {
	        if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key];
	      }
	    }

	    newObj["default"] = obj;
	    return newObj;
	  }
	};

	exports.__esModule = true;

/***/ }),
/* 4 */
/***/ (function(module, exports, __webpack_require__) {

	'use strict';

	var _interopRequireDefault = __webpack_require__(1)['default'];

	exports.__esModule = true;
	exports.HandlebarsEnvironment = HandlebarsEnvironment;

	var _utils = __webpack_require__(5);

	var _exception = __webpack_require__(6);

	var _exception2 = _interopRequireDefault(_exception);

	var _helpers = __webpack_require__(10);

	var _decorators = __webpack_require__(18);

	var _logger = __webpack_require__(20);

	var _logger2 = _interopRequireDefault(_logger);

	var VERSION = '4.0.14';
	exports.VERSION = VERSION;
	var COMPILER_REVISION = 7;

	exports.COMPILER_REVISION = COMPILER_REVISION;
	var REVISION_CHANGES = {
	  1: '<= 1.0.rc.2', // 1.0.rc.2 is actually rev2 but doesn't report it
	  2: '== 1.0.0-rc.3',
	  3: '== 1.0.0-rc.4',
	  4: '== 1.x.x',
	  5: '== 2.0.0-alpha.x',
	  6: '>= 2.0.0-beta.1',
	  7: '>= 4.0.0'
	};

	exports.REVISION_CHANGES = REVISION_CHANGES;
	var objectType = '[object Object]';

	function HandlebarsEnvironment(helpers, partials, decorators) {
	  this.helpers = helpers || {};
	  this.partials = partials || {};
	  this.decorators = decorators || {};

	  _helpers.registerDefaultHelpers(this);
	  _decorators.registerDefaultDecorators(this);
	}

	HandlebarsEnvironment.prototype = {
	  constructor: HandlebarsEnvironment,

	  logger: _logger2['default'],
	  log: _logger2['default'].log,

	  registerHelper: function registerHelper(name, fn) {
	    if (_utils.toString.call(name) === objectType) {
	      if (fn) {
	        throw new _exception2['default']('Arg not supported with multiple helpers');
	      }
	      _utils.extend(this.helpers, name);
	    } else {
	      this.helpers[name] = fn;
	    }
	  },
	  unregisterHelper: function unregisterHelper(name) {
	    delete this.helpers[name];
	  },

	  registerPartial: function registerPartial(name, partial) {
	    if (_utils.toString.call(name) === objectType) {
	      _utils.extend(this.partials, name);
	    } else {
	      if (typeof partial === 'undefined') {
	        throw new _exception2['default']('Attempting to register a partial called "' + name + '" as undefined');
	      }
	      this.partials[name] = partial;
	    }
	  },
	  unregisterPartial: function unregisterPartial(name) {
	    delete this.partials[name];
	  },

	  registerDecorator: function registerDecorator(name, fn) {
	    if (_utils.toString.call(name) === objectType) {
	      if (fn) {
	        throw new _exception2['default']('Arg not supported with multiple decorators');
	      }
	      _utils.extend(this.decorators, name);
	    } else {
	      this.decorators[name] = fn;
	    }
	  },
	  unregisterDecorator: function unregisterDecorator(name) {
	    delete this.decorators[name];
	  }
	};

	var log = _logger2['default'].log;

	exports.log = log;
	exports.createFrame = _utils.createFrame;
	exports.logger = _logger2['default'];

/***/ }),
/* 5 */
/***/ (function(module, exports) {

	'use strict';

	exports.__esModule = true;
	exports.extend = extend;
	exports.indexOf = indexOf;
	exports.escapeExpression = escapeExpression;
	exports.isEmpty = isEmpty;
	exports.createFrame = createFrame;
	exports.blockParams = blockParams;
	exports.appendContextPath = appendContextPath;
	var escape = {
	  '&': '&amp;',
	  '<': '&lt;',
	  '>': '&gt;',
	  '"': '&quot;',
	  "'": '&#x27;',
	  '`': '&#x60;',
	  '=': '&#x3D;'
	};

	var badChars = /[&<>"'`=]/g,
	    possible = /[&<>"'`=]/;

	function escapeChar(chr) {
	  return escape[chr];
	}

	function extend(obj /* , ...source */) {
	  for (var i = 1; i < arguments.length; i++) {
	    for (var key in arguments[i]) {
	      if (Object.prototype.hasOwnProperty.call(arguments[i], key)) {
	        obj[key] = arguments[i][key];
	      }
	    }
	  }

	  return obj;
	}

	var toString = Object.prototype.toString;

	exports.toString = toString;
	// Sourced from lodash
	// https://github.com/bestiejs/lodash/blob/master/LICENSE.txt
	/* eslint-disable func-style */
	var isFunction = function isFunction(value) {
	  return typeof value === 'function';
	};
	// fallback for older versions of Chrome and Safari
	/* istanbul ignore next */
	if (isFunction(/x/)) {
	  exports.isFunction = isFunction = function (value) {
	    return typeof value === 'function' && toString.call(value) === '[object Function]';
	  };
	}
	exports.isFunction = isFunction;

	/* eslint-enable func-style */

	/* istanbul ignore next */
	var isArray = Array.isArray || function (value) {
	  return value && typeof value === 'object' ? toString.call(value) === '[object Array]' : false;
	};

	exports.isArray = isArray;
	// Older IE versions do not directly support indexOf so we must implement our own, sadly.

	function indexOf(array, value) {
	  for (var i = 0, len = array.length; i < len; i++) {
	    if (array[i] === value) {
	      return i;
	    }
	  }
	  return -1;
	}

	function escapeExpression(string) {
	  if (typeof string !== 'string') {
	    // don't escape SafeStrings, since they're already safe
	    if (string && string.toHTML) {
	      return string.toHTML();
	    } else if (string == null) {
	      return '';
	    } else if (!string) {
	      return string + '';
	    }

	    // Force a string conversion as this will be done by the append regardless and
	    // the regex test will do this transparently behind the scenes, causing issues if
	    // an object's to string has escaped characters in it.
	    string = '' + string;
	  }

	  if (!possible.test(string)) {
	    return string;
	  }
	  return string.replace(badChars, escapeChar);
	}

	function isEmpty(value) {
	  if (!value && value !== 0) {
	    return true;
	  } else if (isArray(value) && value.length === 0) {
	    return true;
	  } else {
	    return false;
	  }
	}

	function createFrame(object) {
	  var frame = extend({}, object);
	  frame._parent = object;
	  return frame;
	}

	function blockParams(params, ids) {
	  params.path = ids;
	  return params;
	}

	function appendContextPath(contextPath, id) {
	  return (contextPath ? contextPath + '.' : '') + id;
	}

/***/ }),
/* 6 */
/***/ (function(module, exports, __webpack_require__) {

	'use strict';

	var _Object$defineProperty = __webpack_require__(7)['default'];

	exports.__esModule = true;

	var errorProps = ['description', 'fileName', 'lineNumber', 'message', 'name', 'number', 'stack'];

	function Exception(message, node) {
	  var loc = node && node.loc,
	      line = undefined,
	      column = undefined;
	  if (loc) {
	    line = loc.start.line;
	    column = loc.start.column;

	    message += ' - ' + line + ':' + column;
	  }

	  var tmp = Error.prototype.constructor.call(this, message);

	  // Unfortunately errors are not enumerable in Chrome (at least), so `for prop in tmp` doesn't work.
	  for (var idx = 0; idx < errorProps.length; idx++) {
	    this[errorProps[idx]] = tmp[errorProps[idx]];
	  }

	  /* istanbul ignore else */
	  if (Error.captureStackTrace) {
	    Error.captureStackTrace(this, Exception);
	  }

	  try {
	    if (loc) {
	      this.lineNumber = line;

	      // Work around issue under safari where we can't directly set the column value
	      /* istanbul ignore next */
	      if (_Object$defineProperty) {
	        Object.defineProperty(this, 'column', {
	          value: column,
	          enumerable: true
	        });
	      } else {
	        this.column = column;
	      }
	    }
	  } catch (nop) {
	    /* Ignore if the browser is very particular */
	  }
	}

	Exception.prototype = new Error();

	exports['default'] = Exception;
	module.exports = exports['default'];

/***/ }),
/* 7 */
/***/ (function(module, exports, __webpack_require__) {

	module.exports = { "default": __webpack_require__(8), __esModule: true };

/***/ }),
/* 8 */
/***/ (function(module, exports, __webpack_require__) {

	var $ = __webpack_require__(9);
	module.exports = function defineProperty(it, key, desc){
	  return $.setDesc(it, key, desc);
	};

/***/ }),
/* 9 */
/***/ (function(module, exports) {

	var $Object = Object;
	module.exports = {
	  create:     $Object.create,
	  getProto:   $Object.getPrototypeOf,
	  isEnum:     {}.propertyIsEnumerable,
	  getDesc:    $Object.getOwnPropertyDescriptor,
	  setDesc:    $Object.defineProperty,
	  setDescs:   $Object.defineProperties,
	  getKeys:    $Object.keys,
	  getNames:   $Object.getOwnPropertyNames,
	  getSymbols: $Object.getOwnPropertySymbols,
	  each:       [].forEach
	};

/***/ }),
/* 10 */
/***/ (function(module, exports, __webpack_require__) {

	'use strict';

	var _interopRequireDefault = __webpack_require__(1)['default'];

	exports.__esModule = true;
	exports.registerDefaultHelpers = registerDefaultHelpers;

	var _helpersBlockHelperMissing = __webpack_require__(11);

	var _helpersBlockHelperMissing2 = _interopRequireDefault(_helpersBlockHelperMissing);

	var _helpersEach = __webpack_require__(12);

	var _helpersEach2 = _interopRequireDefault(_helpersEach);

	var _helpersHelperMissing = __webpack_require__(13);

	var _helpersHelperMissing2 = _interopRequireDefault(_helpersHelperMissing);

	var _helpersIf = __webpack_require__(14);

	var _helpersIf2 = _interopRequireDefault(_helpersIf);

	var _helpersLog = __webpack_require__(15);

	var _helpersLog2 = _interopRequireDefault(_helpersLog);

	var _helpersLookup = __webpack_require__(16);

	var _helpersLookup2 = _interopRequireDefault(_helpersLookup);

	var _helpersWith = __webpack_require__(17);

	var _helpersWith2 = _interopRequireDefault(_helpersWith);

	function registerDefaultHelpers(instance) {
	  _helpersBlockHelperMissing2['default'](instance);
	  _helpersEach2['default'](instance);
	  _helpersHelperMissing2['default'](instance);
	  _helpersIf2['default'](instance);
	  _helpersLog2['default'](instance);
	  _helpersLookup2['default'](instance);
	  _helpersWith2['default'](instance);
	}

/***/ }),
/* 11 */
/***/ (function(module, exports, __webpack_require__) {

	'use strict';

	exports.__esModule = true;

	var _utils = __webpack_require__(5);

	exports['default'] = function (instance) {
	  instance.registerHelper('blockHelperMissing', function (context, options) {
	    var inverse = options.inverse,
	        fn = options.fn;

	    if (context === true) {
	      return fn(this);
	    } else if (context === false || context == null) {
	      return inverse(this);
	    } else if (_utils.isArray(context)) {
	      if (context.length > 0) {
	        if (options.ids) {
	          options.ids = [options.name];
	        }

	        return instance.helpers.each(context, options);
	      } else {
	        return inverse(this);
	      }
	    } else {
	      if (options.data && options.ids) {
	        var data = _utils.createFrame(options.data);
	        data.contextPath = _utils.appendContextPath(options.data.contextPath, options.name);
	        options = { data: data };
	      }

	      return fn(context, options);
	    }
	  });
	};

	module.exports = exports['default'];

/***/ }),
/* 12 */
/***/ (function(module, exports, __webpack_require__) {

	'use strict';

	var _interopRequireDefault = __webpack_require__(1)['default'];

	exports.__esModule = true;

	var _utils = __webpack_require__(5);

	var _exception = __webpack_require__(6);

	var _exception2 = _interopRequireDefault(_exception);

	exports['default'] = function (instance) {
	  instance.registerHelper('each', function (context, options) {
	    if (!options) {
	      throw new _exception2['default']('Must pass iterator to #each');
	    }

	    var fn = options.fn,
	        inverse = options.inverse,
	        i = 0,
	        ret = '',
	        data = undefined,
	        contextPath = undefined;

	    if (options.data && options.ids) {
	      contextPath = _utils.appendContextPath(options.data.contextPath, options.ids[0]) + '.';
	    }

	    if (_utils.isFunction(context)) {
	      context = context.call(this);
	    }

	    if (options.data) {
	      data = _utils.createFrame(options.data);
	    }

	    function execIteration(field, index, last) {
	      if (data) {
	        data.key = field;
	        data.index = index;
	        data.first = index === 0;
	        data.last = !!last;

	        if (contextPath) {
	          data.contextPath = contextPath + field;
	        }
	      }

	      ret = ret + fn(context[field], {
	        data: data,
	        blockParams: _utils.blockParams([context[field], field], [contextPath + field, null])
	      });
	    }

	    if (context && typeof context === 'object') {
	      if (_utils.isArray(context)) {
	        for (var j = context.length; i < j; i++) {
	          if (i in context) {
	            execIteration(i, i, i === context.length - 1);
	          }
	        }
	      } else {
	        var priorKey = undefined;

	        for (var key in context) {
	          if (context.hasOwnProperty(key)) {
	            // We're running the iterations one step out of sync so we can detect
	            // the last iteration without have to scan the object twice and create
	            // an itermediate keys array.
	            if (priorKey !== undefined) {
	              execIteration(priorKey, i - 1);
	            }
	            priorKey = key;
	            i++;
	          }
	        }
	        if (priorKey !== undefined) {
	          execIteration(priorKey, i - 1, true);
	        }
	      }
	    }

	    if (i === 0) {
	      ret = inverse(this);
	    }

	    return ret;
	  });
	};

	module.exports = exports['default'];

/***/ }),
/* 13 */
/***/ (function(module, exports, __webpack_require__) {

	'use strict';

	var _interopRequireDefault = __webpack_require__(1)['default'];

	exports.__esModule = true;

	var _exception = __webpack_require__(6);

	var _exception2 = _interopRequireDefault(_exception);

	exports['default'] = function (instance) {
	  instance.registerHelper('helperMissing', function () /* [args, ]options */{
	    if (arguments.length === 1) {
	      // A missing field in a {{foo}} construct.
	      return undefined;
	    } else {
	      // Someone is actually trying to call something, blow up.
	      throw new _exception2['default']('Missing helper: "' + arguments[arguments.length - 1].name + '"');
	    }
	  });
	};

	module.exports = exports['default'];

/***/ }),
/* 14 */
/***/ (function(module, exports, __webpack_require__) {

	'use strict';

	exports.__esModule = true;

	var _utils = __webpack_require__(5);

	exports['default'] = function (instance) {
	  instance.registerHelper('if', function (conditional, options) {
	    if (_utils.isFunction(conditional)) {
	      conditional = conditional.call(this);
	    }

	    // Default behavior is to render the positive path if the value is truthy and not empty.
	    // The `includeZero` option may be set to treat the condtional as purely not empty based on the
	    // behavior of isEmpty. Effectively this determines if 0 is handled by the positive path or negative.
	    if (!options.hash.includeZero && !conditional || _utils.isEmpty(conditional)) {
	      return options.inverse(this);
	    } else {
	      return options.fn(this);
	    }
	  });

	  instance.registerHelper('unless', function (conditional, options) {
	    return instance.helpers['if'].call(this, conditional, { fn: options.inverse, inverse: options.fn, hash: options.hash });
	  });
	};

	module.exports = exports['default'];

/***/ }),
/* 15 */
/***/ (function(module, exports) {

	'use strict';

	exports.__esModule = true;

	exports['default'] = function (instance) {
	  instance.registerHelper('log', function () /* message, options */{
	    var args = [undefined],
	        options = arguments[arguments.length - 1];
	    for (var i = 0; i < arguments.length - 1; i++) {
	      args.push(arguments[i]);
	    }

	    var level = 1;
	    if (options.hash.level != null) {
	      level = options.hash.level;
	    } else if (options.data && options.data.level != null) {
	      level = options.data.level;
	    }
	    args[0] = level;

	    instance.log.apply(instance, args);
	  });
	};

	module.exports = exports['default'];

/***/ }),
/* 16 */
/***/ (function(module, exports) {

	'use strict';

	exports.__esModule = true;

	exports['default'] = function (instance) {
	  instance.registerHelper('lookup', function (obj, field) {
	    if (!obj) {
	      return obj;
	    }
	    if (field === 'constructor' && !obj.propertyIsEnumerable(field)) {
	      return undefined;
	    }
	    return obj[field];
	  });
	};

	module.exports = exports['default'];

/***/ }),
/* 17 */
/***/ (function(module, exports, __webpack_require__) {

	'use strict';

	exports.__esModule = true;

	var _utils = __webpack_require__(5);

	exports['default'] = function (instance) {
	  instance.registerHelper('with', function (context, options) {
	    if (_utils.isFunction(context)) {
	      context = context.call(this);
	    }

	    var fn = options.fn;

	    if (!_utils.isEmpty(context)) {
	      var data = options.data;
	      if (options.data && options.ids) {
	        data = _utils.createFrame(options.data);
	        data.contextPath = _utils.appendContextPath(options.data.contextPath, options.ids[0]);
	      }

	      return fn(context, {
	        data: data,
	        blockParams: _utils.blockParams([context], [data && data.contextPath])
	      });
	    } else {
	      return options.inverse(this);
	    }
	  });
	};

	module.exports = exports['default'];

/***/ }),
/* 18 */
/***/ (function(module, exports, __webpack_require__) {

	'use strict';

	var _interopRequireDefault = __webpack_require__(1)['default'];

	exports.__esModule = true;
	exports.registerDefaultDecorators = registerDefaultDecorators;

	var _decoratorsInline = __webpack_require__(19);

	var _decoratorsInline2 = _interopRequireDefault(_decoratorsInline);

	function registerDefaultDecorators(instance) {
	  _decoratorsInline2['default'](instance);
	}

/***/ }),
/* 19 */
/***/ (function(module, exports, __webpack_require__) {

	'use strict';

	exports.__esModule = true;

	var _utils = __webpack_require__(5);

	exports['default'] = function (instance) {
	  instance.registerDecorator('inline', function (fn, props, container, options) {
	    var ret = fn;
	    if (!props.partials) {
	      props.partials = {};
	      ret = function (context, options) {
	        // Create a new partials stack frame prior to exec.
	        var original = container.partials;
	        container.partials = _utils.extend({}, original, props.partials);
	        var ret = fn(context, options);
	        container.partials = original;
	        return ret;
	      };
	    }

	    props.partials[options.args[0]] = options.fn;

	    return ret;
	  });
	};

	module.exports = exports['default'];

/***/ }),
/* 20 */
/***/ (function(module, exports, __webpack_require__) {

	'use strict';

	exports.__esModule = true;

	var _utils = __webpack_require__(5);

	var logger = {
	  methodMap: ['debug', 'info', 'warn', 'error'],
	  level: 'info',

	  // Maps a given level value to the `methodMap` indexes above.
	  lookupLevel: function lookupLevel(level) {
	    if (typeof level === 'string') {
	      var levelMap = _utils.indexOf(logger.methodMap, level.toLowerCase());
	      if (levelMap >= 0) {
	        level = levelMap;
	      } else {
	        level = parseInt(level, 10);
	      }
	    }

	    return level;
	  },

	  // Can be overridden in the host environment
	  log: function log(level) {
	    level = logger.lookupLevel(level);

	    if (typeof console !== 'undefined' && logger.lookupLevel(logger.level) <= level) {
	      var method = logger.methodMap[level];
	      if (!console[method]) {
	        // eslint-disable-line no-console
	        method = 'log';
	      }

	      for (var _len = arguments.length, message = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {
	        message[_key - 1] = arguments[_key];
	      }

	      console[method].apply(console, message); // eslint-disable-line no-console
	    }
	  }
	};

	exports['default'] = logger;
	module.exports = exports['default'];

/***/ }),
/* 21 */
/***/ (function(module, exports) {

	// Build out our basic SafeString type
	'use strict';

	exports.__esModule = true;
	function SafeString(string) {
	  this.string = string;
	}

	SafeString.prototype.toString = SafeString.prototype.toHTML = function () {
	  return '' + this.string;
	};

	exports['default'] = SafeString;
	module.exports = exports['default'];

/***/ }),
/* 22 */
/***/ (function(module, exports, __webpack_require__) {

	'use strict';

	var _Object$seal = __webpack_require__(23)['default'];

	var _interopRequireWildcard = __webpack_require__(3)['default'];

	var _interopRequireDefault = __webpack_require__(1)['default'];

	exports.__esModule = true;
	exports.checkRevision = checkRevision;
	exports.template = template;
	exports.wrapProgram = wrapProgram;
	exports.resolvePartial = resolvePartial;
	exports.invokePartial = invokePartial;
	exports.noop = noop;

	var _utils = __webpack_require__(5);

	var Utils = _interopRequireWildcard(_utils);

	var _exception = __webpack_require__(6);

	var _exception2 = _interopRequireDefault(_exception);

	var _base = __webpack_require__(4);

	function checkRevision(compilerInfo) {
	  var compilerRevision = compilerInfo && compilerInfo[0] || 1,
	      currentRevision = _base.COMPILER_REVISION;

	  if (compilerRevision !== currentRevision) {
	    if (compilerRevision < currentRevision) {
	      var runtimeVersions = _base.REVISION_CHANGES[currentRevision],
	          compilerVersions = _base.REVISION_CHANGES[compilerRevision];
	      throw new _exception2['default']('Template was precompiled with an older version of Handlebars than the current runtime. ' + 'Please update your precompiler to a newer version (' + runtimeVersions + ') or downgrade your runtime to an older version (' + compilerVersions + ').');
	    } else {
	      // Use the embedded version info since the runtime doesn't know about this revision yet
	      throw new _exception2['default']('Template was precompiled with a newer version of Handlebars than the current runtime. ' + 'Please update your runtime to a newer version (' + compilerInfo[1] + ').');
	    }
	  }
	}

	function template(templateSpec, env) {
	  /* istanbul ignore next */
	  if (!env) {
	    throw new _exception2['default']('No environment passed to template');
	  }
	  if (!templateSpec || !templateSpec.main) {
	    throw new _exception2['default']('Unknown template object: ' + typeof templateSpec);
	  }

	  templateSpec.main.decorator = templateSpec.main_d;

	  // Note: Using env.VM references rather than local var references throughout this section to allow
	  // for external users to override these as psuedo-supported APIs.
	  env.VM.checkRevision(templateSpec.compiler);

	  function invokePartialWrapper(partial, context, options) {
	    if (options.hash) {
	      context = Utils.extend({}, context, options.hash);
	      if (options.ids) {
	        options.ids[0] = true;
	      }
	    }

	    partial = env.VM.resolvePartial.call(this, partial, context, options);
	    var result = env.VM.invokePartial.call(this, partial, context, options);

	    if (result == null && env.compile) {
	      options.partials[options.name] = env.compile(partial, templateSpec.compilerOptions, env);
	      result = options.partials[options.name](context, options);
	    }
	    if (result != null) {
	      if (options.indent) {
	        var lines = result.split('\n');
	        for (var i = 0, l = lines.length; i < l; i++) {
	          if (!lines[i] && i + 1 === l) {
	            break;
	          }

	          lines[i] = options.indent + lines[i];
	        }
	        result = lines.join('\n');
	      }
	      return result;
	    } else {
	      throw new _exception2['default']('The partial ' + options.name + ' could not be compiled when running in runtime-only mode');
	    }
	  }

	  // Just add water
	  var container = {
	    strict: function strict(obj, name) {
	      if (!(name in obj)) {
	        throw new _exception2['default']('"' + name + '" not defined in ' + obj);
	      }
	      return obj[name];
	    },
	    lookup: function lookup(depths, name) {
	      var len = depths.length;
	      for (var i = 0; i < len; i++) {
	        if (depths[i] && depths[i][name] != null) {
	          return depths[i][name];
	        }
	      }
	    },
	    lambda: function lambda(current, context) {
	      return typeof current === 'function' ? current.call(context) : current;
	    },

	    escapeExpression: Utils.escapeExpression,
	    invokePartial: invokePartialWrapper,

	    fn: function fn(i) {
	      var ret = templateSpec[i];
	      ret.decorator = templateSpec[i + '_d'];
	      return ret;
	    },

	    programs: [],
	    program: function program(i, data, declaredBlockParams, blockParams, depths) {
	      var programWrapper = this.programs[i],
	          fn = this.fn(i);
	      if (data || depths || blockParams || declaredBlockParams) {
	        programWrapper = wrapProgram(this, i, fn, data, declaredBlockParams, blockParams, depths);
	      } else if (!programWrapper) {
	        programWrapper = this.programs[i] = wrapProgram(this, i, fn);
	      }
	      return programWrapper;
	    },

	    data: function data(value, depth) {
	      while (value && depth--) {
	        value = value._parent;
	      }
	      return value;
	    },
	    merge: function merge(param, common) {
	      var obj = param || common;

	      if (param && common && param !== common) {
	        obj = Utils.extend({}, common, param);
	      }

	      return obj;
	    },
	    // An empty object to use as replacement for null-contexts
	    nullContext: _Object$seal({}),

	    noop: env.VM.noop,
	    compilerInfo: templateSpec.compiler
	  };

	  function ret(context) {
	    var options = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];

	    var data = options.data;

	    ret._setup(options);
	    if (!options.partial && templateSpec.useData) {
	      data = initData(context, data);
	    }
	    var depths = undefined,
	        blockParams = templateSpec.useBlockParams ? [] : undefined;
	    if (templateSpec.useDepths) {
	      if (options.depths) {
	        depths = context != options.depths[0] ? [context].concat(options.depths) : options.depths;
	      } else {
	        depths = [context];
	      }
	    }

	    function main(context /*, options*/) {
	      return '' + templateSpec.main(container, context, container.helpers, container.partials, data, blockParams, depths);
	    }
	    main = executeDecorators(templateSpec.main, main, container, options.depths || [], data, blockParams);
	    return main(context, options);
	  }
	  ret.isTop = true;

	  ret._setup = function (options) {
	    if (!options.partial) {
	      container.helpers = container.merge(options.helpers, env.helpers);

	      if (templateSpec.usePartial) {
	        container.partials = container.merge(options.partials, env.partials);
	      }
	      if (templateSpec.usePartial || templateSpec.useDecorators) {
	        container.decorators = container.merge(options.decorators, env.decorators);
	      }
	    } else {
	      container.helpers = options.helpers;
	      container.partials = options.partials;
	      container.decorators = options.decorators;
	    }
	  };

	  ret._child = function (i, data, blockParams, depths) {
	    if (templateSpec.useBlockParams && !blockParams) {
	      throw new _exception2['default']('must pass block params');
	    }
	    if (templateSpec.useDepths && !depths) {
	      throw new _exception2['default']('must pass parent depths');
	    }

	    return wrapProgram(container, i, templateSpec[i], data, 0, blockParams, depths);
	  };
	  return ret;
	}

	function wrapProgram(container, i, fn, data, declaredBlockParams, blockParams, depths) {
	  function prog(context) {
	    var options = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];

	    var currentDepths = depths;
	    if (depths && context != depths[0] && !(context === container.nullContext && depths[0] === null)) {
	      currentDepths = [context].concat(depths);
	    }

	    return fn(container, context, container.helpers, container.partials, options.data || data, blockParams && [options.blockParams].concat(blockParams), currentDepths);
	  }

	  prog = executeDecorators(fn, prog, container, depths, data, blockParams);

	  prog.program = i;
	  prog.depth = depths ? depths.length : 0;
	  prog.blockParams = declaredBlockParams || 0;
	  return prog;
	}

	function resolvePartial(partial, context, options) {
	  if (!partial) {
	    if (options.name === '@partial-block') {
	      partial = options.data['partial-block'];
	    } else {
	      partial = options.partials[options.name];
	    }
	  } else if (!partial.call && !options.name) {
	    // This is a dynamic partial that returned a string
	    options.name = partial;
	    partial = options.partials[partial];
	  }
	  return partial;
	}

	function invokePartial(partial, context, options) {
	  // Use the current closure context to save the partial-block if this partial
	  var currentPartialBlock = options.data && options.data['partial-block'];
	  options.partial = true;
	  if (options.ids) {
	    options.data.contextPath = options.ids[0] || options.data.contextPath;
	  }

	  var partialBlock = undefined;
	  if (options.fn && options.fn !== noop) {
	    (function () {
	      options.data = _base.createFrame(options.data);
	      // Wrapper function to get access to currentPartialBlock from the closure
	      var fn = options.fn;
	      partialBlock = options.data['partial-block'] = function partialBlockWrapper(context) {
	        var options = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];

	        // Restore the partial-block from the closure for the execution of the block
	        // i.e. the part inside the block of the partial call.
	        options.data = _base.createFrame(options.data);
	        options.data['partial-block'] = currentPartialBlock;
	        return fn(context, options);
	      };
	      if (fn.partials) {
	        options.partials = Utils.extend({}, options.partials, fn.partials);
	      }
	    })();
	  }

	  if (partial === undefined && partialBlock) {
	    partial = partialBlock;
	  }

	  if (partial === undefined) {
	    throw new _exception2['default']('The partial ' + options.name + ' could not be found');
	  } else if (partial instanceof Function) {
	    return partial(context, options);
	  }
	}

	function noop() {
	  return '';
	}

	function initData(context, data) {
	  if (!data || !('root' in data)) {
	    data = data ? _base.createFrame(data) : {};
	    data.root = context;
	  }
	  return data;
	}

	function executeDecorators(fn, prog, container, depths, data, blockParams) {
	  if (fn.decorator) {
	    var props = {};
	    prog = fn.decorator(prog, props, container, depths && depths[0], data, blockParams, depths);
	    Utils.extend(prog, props);
	  }
	  return prog;
	}

/***/ }),
/* 23 */
/***/ (function(module, exports, __webpack_require__) {

	module.exports = { "default": __webpack_require__(24), __esModule: true };

/***/ }),
/* 24 */
/***/ (function(module, exports, __webpack_require__) {

	__webpack_require__(25);
	module.exports = __webpack_require__(30).Object.seal;

/***/ }),
/* 25 */
/***/ (function(module, exports, __webpack_require__) {

	// 19.1.2.17 Object.seal(O)
	var isObject = __webpack_require__(26);

	__webpack_require__(27)('seal', function($seal){
	  return function seal(it){
	    return $seal && isObject(it) ? $seal(it) : it;
	  };
	});

/***/ }),
/* 26 */
/***/ (function(module, exports) {

	module.exports = function(it){
	  return typeof it === 'object' ? it !== null : typeof it === 'function';
	};

/***/ }),
/* 27 */
/***/ (function(module, exports, __webpack_require__) {

	// most Object methods by ES6 should accept primitives
	var $export = __webpack_require__(28)
	  , core    = __webpack_require__(30)
	  , fails   = __webpack_require__(33);
	module.exports = function(KEY, exec){
	  var fn  = (core.Object || {})[KEY] || Object[KEY]
	    , exp = {};
	  exp[KEY] = exec(fn);
	  $export($export.S + $export.F * fails(function(){ fn(1); }), 'Object', exp);
	};

/***/ }),
/* 28 */
/***/ (function(module, exports, __webpack_require__) {

	var global    = __webpack_require__(29)
	  , core      = __webpack_require__(30)
	  , ctx       = __webpack_require__(31)
	  , PROTOTYPE = 'prototype';

	var $export = function(type, name, source){
	  var IS_FORCED = type & $export.F
	    , IS_GLOBAL = type & $export.G
	    , IS_STATIC = type & $export.S
	    , IS_PROTO  = type & $export.P
	    , IS_BIND   = type & $export.B
	    , IS_WRAP   = type & $export.W
	    , exports   = IS_GLOBAL ? core : core[name] || (core[name] = {})
	    , target    = IS_GLOBAL ? global : IS_STATIC ? global[name] : (global[name] || {})[PROTOTYPE]
	    , key, own, out;
	  if(IS_GLOBAL)source = name;
	  for(key in source){
	    // contains in native
	    own = !IS_FORCED && target && key in target;
	    if(own && key in exports)continue;
	    // export native or passed
	    out = own ? target[key] : source[key];
	    // prevent global pollution for namespaces
	    exports[key] = IS_GLOBAL && typeof target[key] != 'function' ? source[key]
	    // bind timers to global for call from export context
	    : IS_BIND && own ? ctx(out, global)
	    // wrap global constructors for prevent change them in library
	    : IS_WRAP && target[key] == out ? (function(C){
	      var F = function(param){
	        return this instanceof C ? new C(param) : C(param);
	      };
	      F[PROTOTYPE] = C[PROTOTYPE];
	      return F;
	    // make static versions for prototype methods
	    })(out) : IS_PROTO && typeof out == 'function' ? ctx(Function.call, out) : out;
	    if(IS_PROTO)(exports[PROTOTYPE] || (exports[PROTOTYPE] = {}))[key] = out;
	  }
	};
	// type bitmap
	$export.F = 1;  // forced
	$export.G = 2;  // global
	$export.S = 4;  // static
	$export.P = 8;  // proto
	$export.B = 16; // bind
	$export.W = 32; // wrap
	module.exports = $export;

/***/ }),
/* 29 */
/***/ (function(module, exports) {

	// https://github.com/zloirock/core-js/issues/86#issuecomment-115759028
	var global = module.exports = typeof window != 'undefined' && window.Math == Math
	  ? window : typeof self != 'undefined' && self.Math == Math ? self : Function('return this')();
	if(typeof __g == 'number')__g = global; // eslint-disable-line no-undef

/***/ }),
/* 30 */
/***/ (function(module, exports) {

	var core = module.exports = {version: '1.2.6'};
	if(typeof __e == 'number')__e = core; // eslint-disable-line no-undef

/***/ }),
/* 31 */
/***/ (function(module, exports, __webpack_require__) {

	// optional / simple context binding
	var aFunction = __webpack_require__(32);
	module.exports = function(fn, that, length){
	  aFunction(fn);
	  if(that === undefined)return fn;
	  switch(length){
	    case 1: return function(a){
	      return fn.call(that, a);
	    };
	    case 2: return function(a, b){
	      return fn.call(that, a, b);
	    };
	    case 3: return function(a, b, c){
	      return fn.call(that, a, b, c);
	    };
	  }
	  return function(/* ...args */){
	    return fn.apply(that, arguments);
	  };
	};

/***/ }),
/* 32 */
/***/ (function(module, exports) {

	module.exports = function(it){
	  if(typeof it != 'function')throw TypeError(it + ' is not a function!');
	  return it;
	};

/***/ }),
/* 33 */
/***/ (function(module, exports) {

	module.exports = function(exec){
	  try {
	    return !!exec();
	  } catch(e){
	    return true;
	  }
	};

/***/ }),
/* 34 */
/***/ (function(module, exports) {

	/* WEBPACK VAR INJECTION */(function(global) {/* global window */
	'use strict';

	exports.__esModule = true;

	exports['default'] = function (Handlebars) {
	  /* istanbul ignore next */
	  var root = typeof global !== 'undefined' ? global : window,
	      $Handlebars = root.Handlebars;
	  /* istanbul ignore next */
	  Handlebars.noConflict = function () {
	    if (root.Handlebars === Handlebars) {
	      root.Handlebars = $Handlebars;
	    }
	    return Handlebars;
	  };
	};

	module.exports = exports['default'];
	/* WEBPACK VAR INJECTION */}.call(exports, (function() { return this; }())))

/***/ }),
/* 35 */
/***/ (function(module, exports) {

	'use strict';

	exports.__esModule = true;
	var AST = {
	  // Public API used to evaluate derived attributes regarding AST nodes
	  helpers: {
	    // a mustache is definitely a helper if:
	    // * it is an eligible helper, and
	    // * it has at least one parameter or hash segment
	    helperExpression: function helperExpression(node) {
	      return node.type === 'SubExpression' || (node.type === 'MustacheStatement' || node.type === 'BlockStatement') && !!(node.params && node.params.length || node.hash);
	    },

	    scopedId: function scopedId(path) {
	      return (/^\.|this\b/.test(path.original)
	      );
	    },

	    // an ID is simple if it only has one part, and that part is not
	    // `..` or `this`.
	    simpleId: function simpleId(path) {
	      return path.parts.length === 1 && !AST.helpers.scopedId(path) && !path.depth;
	    }
	  }
	};

	// Must be exported as an object rather than the root of the module as the jison lexer
	// must modify the object to operate properly.
	exports['default'] = AST;
	module.exports = exports['default'];

/***/ }),
/* 36 */
/***/ (function(module, exports, __webpack_require__) {

	'use strict';

	var _interopRequireDefault = __webpack_require__(1)['default'];

	var _interopRequireWildcard = __webpack_require__(3)['default'];

	exports.__esModule = true;
	exports.parse = parse;

	var _parser = __webpack_require__(37);

	var _parser2 = _interopRequireDefault(_parser);

	var _whitespaceControl = __webpack_require__(38);

	var _whitespaceControl2 = _interopRequireDefault(_whitespaceControl);

	var _helpers = __webpack_require__(40);

	var Helpers = _interopRequireWildcard(_helpers);

	var _utils = __webpack_require__(5);

	exports.parser = _parser2['default'];

	var yy = {};
	_utils.extend(yy, Helpers);

	function parse(input, options) {
	  // Just return if an already-compiled AST was passed in.
	  if (input.type === 'Program') {
	    return input;
	  }

	  _parser2['default'].yy = yy;

	  // Altering the shared object here, but this is ok as parser is a sync operation
	  yy.locInfo = function (locInfo) {
	    return new yy.SourceLocation(options && options.srcName, locInfo);
	  };

	  var strip = new _whitespaceControl2['default'](options);
	  return strip.accept(_parser2['default'].parse(input));
	}

/***/ }),
/* 37 */
/***/ (function(module, exports) {

	// File ignored in coverage tests via setting in .istanbul.yml
	/* Jison generated parser */
	"use strict";

	exports.__esModule = true;
	var handlebars = (function () {
	    var parser = { trace: function trace() {},
	        yy: {},
	        symbols_: { "error": 2, "root": 3, "program": 4, "EOF": 5, "program_repetition0": 6, "statement": 7, "mustache": 8, "block": 9, "rawBlock": 10, "partial": 11, "partialBlock": 12, "content": 13, "COMMENT": 14, "CONTENT": 15, "openRawBlock": 16, "rawBlock_repetition_plus0": 17, "END_RAW_BLOCK": 18, "OPEN_RAW_BLOCK": 19, "helperName": 20, "openRawBlock_repetition0": 21, "openRawBlock_option0": 22, "CLOSE_RAW_BLOCK": 23, "openBlock": 24, "block_option0": 25, "closeBlock": 26, "openInverse": 27, "block_option1": 28, "OPEN_BLOCK": 29, "openBlock_repetition0": 30, "openBlock_option0": 31, "openBlock_option1": 32, "CLOSE": 33, "OPEN_INVERSE": 34, "openInverse_repetition0": 35, "openInverse_option0": 36, "openInverse_option1": 37, "openInverseChain": 38, "OPEN_INVERSE_CHAIN": 39, "openInverseChain_repetition0": 40, "openInverseChain_option0": 41, "openInverseChain_option1": 42, "inverseAndProgram": 43, "INVERSE": 44, "inverseChain": 45, "inverseChain_option0": 46, "OPEN_ENDBLOCK": 47, "OPEN": 48, "mustache_repetition0": 49, "mustache_option0": 50, "OPEN_UNESCAPED": 51, "mustache_repetition1": 52, "mustache_option1": 53, "CLOSE_UNESCAPED": 54, "OPEN_PARTIAL": 55, "partialName": 56, "partial_repetition0": 57, "partial_option0": 58, "openPartialBlock": 59, "OPEN_PARTIAL_BLOCK": 60, "openPartialBlock_repetition0": 61, "openPartialBlock_option0": 62, "param": 63, "sexpr": 64, "OPEN_SEXPR": 65, "sexpr_repetition0": 66, "sexpr_option0": 67, "CLOSE_SEXPR": 68, "hash": 69, "hash_repetition_plus0": 70, "hashSegment": 71, "ID": 72, "EQUALS": 73, "blockParams": 74, "OPEN_BLOCK_PARAMS": 75, "blockParams_repetition_plus0": 76, "CLOSE_BLOCK_PARAMS": 77, "path": 78, "dataName": 79, "STRING": 80, "NUMBER": 81, "BOOLEAN": 82, "UNDEFINED": 83, "NULL": 84, "DATA": 85, "pathSegments": 86, "SEP": 87, "$accept": 0, "$end": 1 },
	        terminals_: { 2: "error", 5: "EOF", 14: "COMMENT", 15: "CONTENT", 18: "END_RAW_BLOCK", 19: "OPEN_RAW_BLOCK", 23: "CLOSE_RAW_BLOCK", 29: "OPEN_BLOCK", 33: "CLOSE", 34: "OPEN_INVERSE", 39: "OPEN_INVERSE_CHAIN", 44: "INVERSE", 47: "OPEN_ENDBLOCK", 48: "OPEN", 51: "OPEN_UNESCAPED", 54: "CLOSE_UNESCAPED", 55: "OPEN_PARTIAL", 60: "OPEN_PARTIAL_BLOCK", 65: "OPEN_SEXPR", 68: "CLOSE_SEXPR", 72: "ID", 73: "EQUALS", 75: "OPEN_BLOCK_PARAMS", 77: "CLOSE_BLOCK_PARAMS", 80: "STRING", 81: "NUMBER", 82: "BOOLEAN", 83: "UNDEFINED", 84: "NULL", 85: "DATA", 87: "SEP" },
	        productions_: [0, [3, 2], [4, 1], [7, 1], [7, 1], [7, 1], [7, 1], [7, 1], [7, 1], [7, 1], [13, 1], [10, 3], [16, 5], [9, 4], [9, 4], [24, 6], [27, 6], [38, 6], [43, 2], [45, 3], [45, 1], [26, 3], [8, 5], [8, 5], [11, 5], [12, 3], [59, 5], [63, 1], [63, 1], [64, 5], [69, 1], [71, 3], [74, 3], [20, 1], [20, 1], [20, 1], [20, 1], [20, 1], [20, 1], [20, 1], [56, 1], [56, 1], [79, 2], [78, 1], [86, 3], [86, 1], [6, 0], [6, 2], [17, 1], [17, 2], [21, 0], [21, 2], [22, 0], [22, 1], [25, 0], [25, 1], [28, 0], [28, 1], [30, 0], [30, 2], [31, 0], [31, 1], [32, 0], [32, 1], [35, 0], [35, 2], [36, 0], [36, 1], [37, 0], [37, 1], [40, 0], [40, 2], [41, 0], [41, 1], [42, 0], [42, 1], [46, 0], [46, 1], [49, 0], [49, 2], [50, 0], [50, 1], [52, 0], [52, 2], [53, 0], [53, 1], [57, 0], [57, 2], [58, 0], [58, 1], [61, 0], [61, 2], [62, 0], [62, 1], [66, 0], [66, 2], [67, 0], [67, 1], [70, 1], [70, 2], [76, 1], [76, 2]],
	        performAction: function anonymous(yytext, yyleng, yylineno, yy, yystate, $$, _$) {

	            var $0 = $$.length - 1;
	            switch (yystate) {
	                case 1:
	                    return $$[$0 - 1];
	                    break;
	                case 2:
	                    this.$ = yy.prepareProgram($$[$0]);
	                    break;
	                case 3:
	                    this.$ = $$[$0];
	                    break;
	                case 4:
	                    this.$ = $$[$0];
	                    break;
	                case 5:
	                    this.$ = $$[$0];
	                    break;
	                case 6:
	                    this.$ = $$[$0];
	                    break;
	                case 7:
	                    this.$ = $$[$0];
	                    break;
	                case 8:
	                    this.$ = $$[$0];
	                    break;
	                case 9:
	                    this.$ = {
	                        type: 'CommentStatement',
	                        value: yy.stripComment($$[$0]),
	                        strip: yy.stripFlags($$[$0], $$[$0]),
	                        loc: yy.locInfo(this._$)
	                    };

	                    break;
	                case 10:
	                    this.$ = {
	                        type: 'ContentStatement',
	                        original: $$[$0],
	                        value: $$[$0],
	                        loc: yy.locInfo(this._$)
	                    };

	                    break;
	                case 11:
	                    this.$ = yy.prepareRawBlock($$[$0 - 2], $$[$0 - 1], $$[$0], this._$);
	                    break;
	                case 12:
	                    this.$ = { path: $$[$0 - 3], params: $$[$0 - 2], hash: $$[$0 - 1] };
	                    break;
	                case 13:
	                    this.$ = yy.prepareBlock($$[$0 - 3], $$[$0 - 2], $$[$0 - 1], $$[$0], false, this._$);
	                    break;
	                case 14:
	                    this.$ = yy.prepareBlock($$[$0 - 3], $$[$0 - 2], $$[$0 - 1], $$[$0], true, this._$);
	                    break;
	                case 15:
	                    this.$ = { open: $$[$0 - 5], path: $$[$0 - 4], params: $$[$0 - 3], hash: $$[$0 - 2], blockParams: $$[$0 - 1], strip: yy.stripFlags($$[$0 - 5], $$[$0]) };
	                    break;
	                case 16:
	                    this.$ = { path: $$[$0 - 4], params: $$[$0 - 3], hash: $$[$0 - 2], blockParams: $$[$0 - 1], strip: yy.stripFlags($$[$0 - 5], $$[$0]) };
	                    break;
	                case 17:
	                    this.$ = { path: $$[$0 - 4], params: $$[$0 - 3], hash: $$[$0 - 2], blockParams: $$[$0 - 1], strip: yy.stripFlags($$[$0 - 5], $$[$0]) };
	                    break;
	                case 18:
	                    this.$ = { strip: yy.stripFlags($$[$0 - 1], $$[$0 - 1]), program: $$[$0] };
	                    break;
	                case 19:
	                    var inverse = yy.prepareBlock($$[$0 - 2], $$[$0 - 1], $$[$0], $$[$0], false, this._$),
	                        program = yy.prepareProgram([inverse], $$[$0 - 1].loc);
	                    program.chained = true;

	                    this.$ = { strip: $$[$0 - 2].strip, program: program, chain: true };

	                    break;
	                case 20:
	                    this.$ = $$[$0];
	                    break;
	                case 21:
	                    this.$ = { path: $$[$0 - 1], strip: yy.stripFlags($$[$0 - 2], $$[$0]) };
	                    break;
	                case 22:
	                    this.$ = yy.prepareMustache($$[$0 - 3], $$[$0 - 2], $$[$0 - 1], $$[$0 - 4], yy.stripFlags($$[$0 - 4], $$[$0]), this._$);
	                    break;
	                case 23:
	                    this.$ = yy.prepareMustache($$[$0 - 3], $$[$0 - 2], $$[$0 - 1], $$[$0 - 4], yy.stripFlags($$[$0 - 4], $$[$0]), this._$);
	                    break;
	                case 24:
	                    this.$ = {
	                        type: 'PartialStatement',
	                        name: $$[$0 - 3],
	                        params: $$[$0 - 2],
	                        hash: $$[$0 - 1],
	                        indent: '',
	                        strip: yy.stripFlags($$[$0 - 4], $$[$0]),
	                        loc: yy.locInfo(this._$)
	                    };

	                    break;
	                case 25:
	                    this.$ = yy.preparePartialBlock($$[$0 - 2], $$[$0 - 1], $$[$0], this._$);
	                    break;
	                case 26:
	                    this.$ = { path: $$[$0 - 3], params: $$[$0 - 2], hash: $$[$0 - 1], strip: yy.stripFlags($$[$0 - 4], $$[$0]) };
	                    break;
	                case 27:
	                    this.$ = $$[$0];
	                    break;
	                case 28:
	                    this.$ = $$[$0];
	                    break;
	                case 29:
	                    this.$ = {
	                        type: 'SubExpression',
	                        path: $$[$0 - 3],
	                        params: $$[$0 - 2],
	                        hash: $$[$0 - 1],
	                        loc: yy.locInfo(this._$)
	                    };

	                    break;
	                case 30:
	                    this.$ = { type: 'Hash', pairs: $$[$0], loc: yy.locInfo(this._$) };
	                    break;
	                case 31:
	                    this.$ = { type: 'HashPair', key: yy.id($$[$0 - 2]), value: $$[$0], loc: yy.locInfo(this._$) };
	                    break;
	                case 32:
	                    this.$ = yy.id($$[$0 - 1]);
	                    break;
	                case 33:
	                    this.$ = $$[$0];
	                    break;
	                case 34:
	                    this.$ = $$[$0];
	                    break;
	                case 35:
	                    this.$ = { type: 'StringLiteral', value: $$[$0], original: $$[$0], loc: yy.locInfo(this._$) };
	                    break;
	                case 36:
	                    this.$ = { type: 'NumberLiteral', value: Number($$[$0]), original: Number($$[$0]), loc: yy.locInfo(this._$) };
	                    break;
	                case 37:
	                    this.$ = { type: 'BooleanLiteral', value: $$[$0] === 'true', original: $$[$0] === 'true', loc: yy.locInfo(this._$) };
	                    break;
	                case 38:
	                    this.$ = { type: 'UndefinedLiteral', original: undefined, value: undefined, loc: yy.locInfo(this._$) };
	                    break;
	                case 39:
	                    this.$ = { type: 'NullLiteral', original: null, value: null, loc: yy.locInfo(this._$) };
	                    break;
	                case 40:
	                    this.$ = $$[$0];
	                    break;
	                case 41:
	                    this.$ = $$[$0];
	                    break;
	                case 42:
	                    this.$ = yy.preparePath(true, $$[$0], this._$);
	                    break;
	                case 43:
	                    this.$ = yy.preparePath(false, $$[$0], this._$);
	                    break;
	                case 44:
	                    $$[$0 - 2].push({ part: yy.id($$[$0]), original: $$[$0], separator: $$[$0 - 1] });this.$ = $$[$0 - 2];
	                    break;
	                case 45:
	                    this.$ = [{ part: yy.id($$[$0]), original: $$[$0] }];
	                    break;
	                case 46:
	                    this.$ = [];
	                    break;
	                case 47:
	                    $$[$0 - 1].push($$[$0]);
	                    break;
	                case 48:
	                    this.$ = [$$[$0]];
	                    break;
	                case 49:
	                    $$[$0 - 1].push($$[$0]);
	                    break;
	                case 50:
	                    this.$ = [];
	                    break;
	                case 51:
	                    $$[$0 - 1].push($$[$0]);
	                    break;
	                case 58:
	                    this.$ = [];
	                    break;
	                case 59:
	                    $$[$0 - 1].push($$[$0]);
	                    break;
	                case 64:
	                    this.$ = [];
	                    break;
	                case 65:
	                    $$[$0 - 1].push($$[$0]);
	                    break;
	                case 70:
	                    this.$ = [];
	                    break;
	                case 71:
	                    $$[$0 - 1].push($$[$0]);
	                    break;
	                case 78:
	                    this.$ = [];
	                    break;
	                case 79:
	                    $$[$0 - 1].push($$[$0]);
	                    break;
	                case 82:
	                    this.$ = [];
	                    break;
	                case 83:
	                    $$[$0 - 1].push($$[$0]);
	                    break;
	                case 86:
	                    this.$ = [];
	                    break;
	                case 87:
	                    $$[$0 - 1].push($$[$0]);
	                    break;
	                case 90:
	                    this.$ = [];
	                    break;
	                case 91:
	                    $$[$0 - 1].push($$[$0]);
	                    break;
	                case 94:
	                    this.$ = [];
	                    break;
	                case 95:
	                    $$[$0 - 1].push($$[$0]);
	                    break;
	                case 98:
	                    this.$ = [$$[$0]];
	                    break;
	                case 99:
	                    $$[$0 - 1].push($$[$0]);
	                    break;
	                case 100:
	                    this.$ = [$$[$0]];
	                    break;
	                case 101:
	                    $$[$0 - 1].push($$[$0]);
	                    break;
	            }
	        },
	        table: [{ 3: 1, 4: 2, 5: [2, 46], 6: 3, 14: [2, 46], 15: [2, 46], 19: [2, 46], 29: [2, 46], 34: [2, 46], 48: [2, 46], 51: [2, 46], 55: [2, 46], 60: [2, 46] }, { 1: [3] }, { 5: [1, 4] }, { 5: [2, 2], 7: 5, 8: 6, 9: 7, 10: 8, 11: 9, 12: 10, 13: 11, 14: [1, 12], 15: [1, 20], 16: 17, 19: [1, 23], 24: 15, 27: 16, 29: [1, 21], 34: [1, 22], 39: [2, 2], 44: [2, 2], 47: [2, 2], 48: [1, 13], 51: [1, 14], 55: [1, 18], 59: 19, 60: [1, 24] }, { 1: [2, 1] }, { 5: [2, 47], 14: [2, 47], 15: [2, 47], 19: [2, 47], 29: [2, 47], 34: [2, 47], 39: [2, 47], 44: [2, 47], 47: [2, 47], 48: [2, 47], 51: [2, 47], 55: [2, 47], 60: [2, 47] }, { 5: [2, 3], 14: [2, 3], 15: [2, 3], 19: [2, 3], 29: [2, 3], 34: [2, 3], 39: [2, 3], 44: [2, 3], 47: [2, 3], 48: [2, 3], 51: [2, 3], 55: [2, 3], 60: [2, 3] }, { 5: [2, 4], 14: [2, 4], 15: [2, 4], 19: [2, 4], 29: [2, 4], 34: [2, 4], 39: [2, 4], 44: [2, 4], 47: [2, 4], 48: [2, 4], 51: [2, 4], 55: [2, 4], 60: [2, 4] }, { 5: [2, 5], 14: [2, 5], 15: [2, 5], 19: [2, 5], 29: [2, 5], 34: [2, 5], 39: [2, 5], 44: [2, 5], 47: [2, 5], 48: [2, 5], 51: [2, 5], 55: [2, 5], 60: [2, 5] }, { 5: [2, 6], 14: [2, 6], 15: [2, 6], 19: [2, 6], 29: [2, 6], 34: [2, 6], 39: [2, 6], 44: [2, 6], 47: [2, 6], 48: [2, 6], 51: [2, 6], 55: [2, 6], 60: [2, 6] }, { 5: [2, 7], 14: [2, 7], 15: [2, 7], 19: [2, 7], 29: [2, 7], 34: [2, 7], 39: [2, 7], 44: [2, 7], 47: [2, 7], 48: [2, 7], 51: [2, 7], 55: [2, 7], 60: [2, 7] }, { 5: [2, 8], 14: [2, 8], 15: [2, 8], 19: [2, 8], 29: [2, 8], 34: [2, 8], 39: [2, 8], 44: [2, 8], 47: [2, 8], 48: [2, 8], 51: [2, 8], 55: [2, 8], 60: [2, 8] }, { 5: [2, 9], 14: [2, 9], 15: [2, 9], 19: [2, 9], 29: [2, 9], 34: [2, 9], 39: [2, 9], 44: [2, 9], 47: [2, 9], 48: [2, 9], 51: [2, 9], 55: [2, 9], 60: [2, 9] }, { 20: 25, 72: [1, 35], 78: 26, 79: 27, 80: [1, 28], 81: [1, 29], 82: [1, 30], 83: [1, 31], 84: [1, 32], 85: [1, 34], 86: 33 }, { 20: 36, 72: [1, 35], 78: 26, 79: 27, 80: [1, 28], 81: [1, 29], 82: [1, 30], 83: [1, 31], 84: [1, 32], 85: [1, 34], 86: 33 }, { 4: 37, 6: 3, 14: [2, 46], 15: [2, 46], 19: [2, 46], 29: [2, 46], 34: [2, 46], 39: [2, 46], 44: [2, 46], 47: [2, 46], 48: [2, 46], 51: [2, 46], 55: [2, 46], 60: [2, 46] }, { 4: 38, 6: 3, 14: [2, 46], 15: [2, 46], 19: [2, 46], 29: [2, 46], 34: [2, 46], 44: [2, 46], 47: [2, 46], 48: [2, 46], 51: [2, 46], 55: [2, 46], 60: [2, 46] }, { 13: 40, 15: [1, 20], 17: 39 }, { 20: 42, 56: 41, 64: 43, 65: [1, 44], 72: [1, 35], 78: 26, 79: 27, 80: [1, 28], 81: [1, 29], 82: [1, 30], 83: [1, 31], 84: [1, 32], 85: [1, 34], 86: 33 }, { 4: 45, 6: 3, 14: [2, 46], 15: [2, 46], 19: [2, 46], 29: [2, 46], 34: [2, 46], 47: [2, 46], 48: [2, 46], 51: [2, 46], 55: [2, 46], 60: [2, 46] }, { 5: [2, 10], 14: [2, 10], 15: [2, 10], 18: [2, 10], 19: [2, 10], 29: [2, 10], 34: [2, 10], 39: [2, 10], 44: [2, 10], 47: [2, 10], 48: [2, 10], 51: [2, 10], 55: [2, 10], 60: [2, 10] }, { 20: 46, 72: [1, 35], 78: 26, 79: 27, 80: [1, 28], 81: [1, 29], 82: [1, 30], 83: [1, 31], 84: [1, 32], 85: [1, 34], 86: 33 }, { 20: 47, 72: [1, 35], 78: 26, 79: 27, 80: [1, 28], 81: [1, 29], 82: [1, 30], 83: [1, 31], 84: [1, 32], 85: [1, 34], 86: 33 }, { 20: 48, 72: [1, 35], 78: 26, 79: 27, 80: [1, 28], 81: [1, 29], 82: [1, 30], 83: [1, 31], 84: [1, 32], 85: [1, 34], 86: 33 }, { 20: 42, 56: 49, 64: 43, 65: [1, 44], 72: [1, 35], 78: 26, 79: 27, 80: [1, 28], 81: [1, 29], 82: [1, 30], 83: [1, 31], 84: [1, 32], 85: [1, 34], 86: 33 }, { 33: [2, 78], 49: 50, 65: [2, 78], 72: [2, 78], 80: [2, 78], 81: [2, 78], 82: [2, 78], 83: [2, 78], 84: [2, 78], 85: [2, 78] }, { 23: [2, 33], 33: [2, 33], 54: [2, 33], 65: [2, 33], 68: [2, 33], 72: [2, 33], 75: [2, 33], 80: [2, 33], 81: [2, 33], 82: [2, 33], 83: [2, 33], 84: [2, 33], 85: [2, 33] }, { 23: [2, 34], 33: [2, 34], 54: [2, 34], 65: [2, 34], 68: [2, 34], 72: [2, 34], 75: [2, 34], 80: [2, 34], 81: [2, 34], 82: [2, 34], 83: [2, 34], 84: [2, 34], 85: [2, 34] }, { 23: [2, 35], 33: [2, 35], 54: [2, 35], 65: [2, 35], 68: [2, 35], 72: [2, 35], 75: [2, 35], 80: [2, 35], 81: [2, 35], 82: [2, 35], 83: [2, 35], 84: [2, 35], 85: [2, 35] }, { 23: [2, 36], 33: [2, 36], 54: [2, 36], 65: [2, 36], 68: [2, 36], 72: [2, 36], 75: [2, 36], 80: [2, 36], 81: [2, 36], 82: [2, 36], 83: [2, 36], 84: [2, 36], 85: [2, 36] }, { 23: [2, 37], 33: [2, 37], 54: [2, 37], 65: [2, 37], 68: [2, 37], 72: [2, 37], 75: [2, 37], 80: [2, 37], 81: [2, 37], 82: [2, 37], 83: [2, 37], 84: [2, 37], 85: [2, 37] }, { 23: [2, 38], 33: [2, 38], 54: [2, 38], 65: [2, 38], 68: [2, 38], 72: [2, 38], 75: [2, 38], 80: [2, 38], 81: [2, 38], 82: [2, 38], 83: [2, 38], 84: [2, 38], 85: [2, 38] }, { 23: [2, 39], 33: [2, 39], 54: [2, 39], 65: [2, 39], 68: [2, 39], 72: [2, 39], 75: [2, 39], 80: [2, 39], 81: [2, 39], 82: [2, 39], 83: [2, 39], 84: [2, 39], 85: [2, 39] }, { 23: [2, 43], 33: [2, 43], 54: [2, 43], 65: [2, 43], 68: [2, 43], 72: [2, 43], 75: [2, 43], 80: [2, 43], 81: [2, 43], 82: [2, 43], 83: [2, 43], 84: [2, 43], 85: [2, 43], 87: [1, 51] }, { 72: [1, 35], 86: 52 }, { 23: [2, 45], 33: [2, 45], 54: [2, 45], 65: [2, 45], 68: [2, 45], 72: [2, 45], 75: [2, 45], 80: [2, 45], 81: [2, 45], 82: [2, 45], 83: [2, 45], 84: [2, 45], 85: [2, 45], 87: [2, 45] }, { 52: 53, 54: [2, 82], 65: [2, 82], 72: [2, 82], 80: [2, 82], 81: [2, 82], 82: [2, 82], 83: [2, 82], 84: [2, 82], 85: [2, 82] }, { 25: 54, 38: 56, 39: [1, 58], 43: 57, 44: [1, 59], 45: 55, 47: [2, 54] }, { 28: 60, 43: 61, 44: [1, 59], 47: [2, 56] }, { 13: 63, 15: [1, 20], 18: [1, 62] }, { 15: [2, 48], 18: [2, 48] }, { 33: [2, 86], 57: 64, 65: [2, 86], 72: [2, 86], 80: [2, 86], 81: [2, 86], 82: [2, 86], 83: [2, 86], 84: [2, 86], 85: [2, 86] }, { 33: [2, 40], 65: [2, 40], 72: [2, 40], 80: [2, 40], 81: [2, 40], 82: [2, 40], 83: [2, 40], 84: [2, 40], 85: [2, 40] }, { 33: [2, 41], 65: [2, 41], 72: [2, 41], 80: [2, 41], 81: [2, 41], 82: [2, 41], 83: [2, 41], 84: [2, 41], 85: [2, 41] }, { 20: 65, 72: [1, 35], 78: 26, 79: 27, 80: [1, 28], 81: [1, 29], 82: [1, 30], 83: [1, 31], 84: [1, 32], 85: [1, 34], 86: 33 }, { 26: 66, 47: [1, 67] }, { 30: 68, 33: [2, 58], 65: [2, 58], 72: [2, 58], 75: [2, 58], 80: [2, 58], 81: [2, 58], 82: [2, 58], 83: [2, 58], 84: [2, 58], 85: [2, 58] }, { 33: [2, 64], 35: 69, 65: [2, 64], 72: [2, 64], 75: [2, 64], 80: [2, 64], 81: [2, 64], 82: [2, 64], 83: [2, 64], 84: [2, 64], 85: [2, 64] }, { 21: 70, 23: [2, 50], 65: [2, 50], 72: [2, 50], 80: [2, 50], 81: [2, 50], 82: [2, 50], 83: [2, 50], 84: [2, 50], 85: [2, 50] }, { 33: [2, 90], 61: 71, 65: [2, 90], 72: [2, 90], 80: [2, 90], 81: [2, 90], 82: [2, 90], 83: [2, 90], 84: [2, 90], 85: [2, 90] }, { 20: 75, 33: [2, 80], 50: 72, 63: 73, 64: 76, 65: [1, 44], 69: 74, 70: 77, 71: 78, 72: [1, 79], 78: 26, 79: 27, 80: [1, 28], 81: [1, 29], 82: [1, 30], 83: [1, 31], 84: [1, 32], 85: [1, 34], 86: 33 }, { 72: [1, 80] }, { 23: [2, 42], 33: [2, 42], 54: [2, 42], 65: [2, 42], 68: [2, 42], 72: [2, 42], 75: [2, 42], 80: [2, 42], 81: [2, 42], 82: [2, 42], 83: [2, 42], 84: [2, 42], 85: [2, 42], 87: [1, 51] }, { 20: 75, 53: 81, 54: [2, 84], 63: 82, 64: 76, 65: [1, 44], 69: 83, 70: 77, 71: 78, 72: [1, 79], 78: 26, 79: 27, 80: [1, 28], 81: [1, 29], 82: [1, 30], 83: [1, 31], 84: [1, 32], 85: [1, 34], 86: 33 }, { 26: 84, 47: [1, 67] }, { 47: [2, 55] }, { 4: 85, 6: 3, 14: [2, 46], 15: [2, 46], 19: [2, 46], 29: [2, 46], 34: [2, 46], 39: [2, 46], 44: [2, 46], 47: [2, 46], 48: [2, 46], 51: [2, 46], 55: [2, 46], 60: [2, 46] }, { 47: [2, 20] }, { 20: 86, 72: [1, 35], 78: 26, 79: 27, 80: [1, 28], 81: [1, 29], 82: [1, 30], 83: [1, 31], 84: [1, 32], 85: [1, 34], 86: 33 }, { 4: 87, 6: 3, 14: [2, 46], 15: [2, 46], 19: [2, 46], 29: [2, 46], 34: [2, 46], 47: [2, 46], 48: [2, 46], 51: [2, 46], 55: [2, 46], 60: [2, 46] }, { 26: 88, 47: [1, 67] }, { 47: [2, 57] }, { 5: [2, 11], 14: [2, 11], 15: [2, 11], 19: [2, 11], 29: [2, 11], 34: [2, 11], 39: [2, 11], 44: [2, 11], 47: [2, 11], 48: [2, 11], 51: [2, 11], 55: [2, 11], 60: [2, 11] }, { 15: [2, 49], 18: [2, 49] }, { 20: 75, 33: [2, 88], 58: 89, 63: 90, 64: 76, 65: [1, 44], 69: 91, 70: 77, 71: 78, 72: [1, 79], 78: 26, 79: 27, 80: [1, 28], 81: [1, 29], 82: [1, 30], 83: [1, 31], 84: [1, 32], 85: [1, 34], 86: 33 }, { 65: [2, 94], 66: 92, 68: [2, 94], 72: [2, 94], 80: [2, 94], 81: [2, 94], 82: [2, 94], 83: [2, 94], 84: [2, 94], 85: [2, 94] }, { 5: [2, 25], 14: [2, 25], 15: [2, 25], 19: [2, 25], 29: [2, 25], 34: [2, 25], 39: [2, 25], 44: [2, 25], 47: [2, 25], 48: [2, 25], 51: [2, 25], 55: [2, 25], 60: [2, 25] }, { 20: 93, 72: [1, 35], 78: 26, 79: 27, 80: [1, 28], 81: [1, 29], 82: [1, 30], 83: [1, 31], 84: [1, 32], 85: [1, 34], 86: 33 }, { 20: 75, 31: 94, 33: [2, 60], 63: 95, 64: 76, 65: [1, 44], 69: 96, 70: 77, 71: 78, 72: [1, 79], 75: [2, 60], 78: 26, 79: 27, 80: [1, 28], 81: [1, 29], 82: [1, 30], 83: [1, 31], 84: [1, 32], 85: [1, 34], 86: 33 }, { 20: 75, 33: [2, 66], 36: 97, 63: 98, 64: 76, 65: [1, 44], 69: 99, 70: 77, 71: 78, 72: [1, 79], 75: [2, 66], 78: 26, 79: 27, 80: [1, 28], 81: [1, 29], 82: [1, 30], 83: [1, 31], 84: [1, 32], 85: [1, 34], 86: 33 }, { 20: 75, 22: 100, 23: [2, 52], 63: 101, 64: 76, 65: [1, 44], 69: 102, 70: 77, 71: 78, 72: [1, 79], 78: 26, 79: 27, 80: [1, 28], 81: [1, 29], 82: [1, 30], 83: [1, 31], 84: [1, 32], 85: [1, 34], 86: 33 }, { 20: 75, 33: [2, 92], 62: 103, 63: 104, 64: 76, 65: [1, 44], 69: 105, 70: 77, 71: 78, 72: [1, 79], 78: 26, 79: 27, 80: [1, 28], 81: [1, 29], 82: [1, 30], 83: [1, 31], 84: [1, 32], 85: [1, 34], 86: 33 }, { 33: [1, 106] }, { 33: [2, 79], 65: [2, 79], 72: [2, 79], 80: [2, 79], 81: [2, 79], 82: [2, 79], 83: [2, 79], 84: [2, 79], 85: [2, 79] }, { 33: [2, 81] }, { 23: [2, 27], 33: [2, 27], 54: [2, 27], 65: [2, 27], 68: [2, 27], 72: [2, 27], 75: [2, 27], 80: [2, 27], 81: [2, 27], 82: [2, 27], 83: [2, 27], 84: [2, 27], 85: [2, 27] }, { 23: [2, 28], 33: [2, 28], 54: [2, 28], 65: [2, 28], 68: [2, 28], 72: [2, 28], 75: [2, 28], 80: [2, 28], 81: [2, 28], 82: [2, 28], 83: [2, 28], 84: [2, 28], 85: [2, 28] }, { 23: [2, 30], 33: [2, 30], 54: [2, 30], 68: [2, 30], 71: 107, 72: [1, 108], 75: [2, 30] }, { 23: [2, 98], 33: [2, 98], 54: [2, 98], 68: [2, 98], 72: [2, 98], 75: [2, 98] }, { 23: [2, 45], 33: [2, 45], 54: [2, 45], 65: [2, 45], 68: [2, 45], 72: [2, 45], 73: [1, 109], 75: [2, 45], 80: [2, 45], 81: [2, 45], 82: [2, 45], 83: [2, 45], 84: [2, 45], 85: [2, 45], 87: [2, 45] }, { 23: [2, 44], 33: [2, 44], 54: [2, 44], 65: [2, 44], 68: [2, 44], 72: [2, 44], 75: [2, 44], 80: [2, 44], 81: [2, 44], 82: [2, 44], 83: [2, 44], 84: [2, 44], 85: [2, 44], 87: [2, 44] }, { 54: [1, 110] }, { 54: [2, 83], 65: [2, 83], 72: [2, 83], 80: [2, 83], 81: [2, 83], 82: [2, 83], 83: [2, 83], 84: [2, 83], 85: [2, 83] }, { 54: [2, 85] }, { 5: [2, 13], 14: [2, 13], 15: [2, 13], 19: [2, 13], 29: [2, 13], 34: [2, 13], 39: [2, 13], 44: [2, 13], 47: [2, 13], 48: [2, 13], 51: [2, 13], 55: [2, 13], 60: [2, 13] }, { 38: 56, 39: [1, 58], 43: 57, 44: [1, 59], 45: 112, 46: 111, 47: [2, 76] }, { 33: [2, 70], 40: 113, 65: [2, 70], 72: [2, 70], 75: [2, 70], 80: [2, 70], 81: [2, 70], 82: [2, 70], 83: [2, 70], 84: [2, 70], 85: [2, 70] }, { 47: [2, 18] }, { 5: [2, 14], 14: [2, 14], 15: [2, 14], 19: [2, 14], 29: [2, 14], 34: [2, 14], 39: [2, 14], 44: [2, 14], 47: [2, 14], 48: [2, 14], 51: [2, 14], 55: [2, 14], 60: [2, 14] }, { 33: [1, 114] }, { 33: [2, 87], 65: [2, 87], 72: [2, 87], 80: [2, 87], 81: [2, 87], 82: [2, 87], 83: [2, 87], 84: [2, 87], 85: [2, 87] }, { 33: [2, 89] }, { 20: 75, 63: 116, 64: 76, 65: [1, 44], 67: 115, 68: [2, 96], 69: 117, 70: 77, 71: 78, 72: [1, 79], 78: 26, 79: 27, 80: [1, 28], 81: [1, 29], 82: [1, 30], 83: [1, 31], 84: [1, 32], 85: [1, 34], 86: 33 }, { 33: [1, 118] }, { 32: 119, 33: [2, 62], 74: 120, 75: [1, 121] }, { 33: [2, 59], 65: [2, 59], 72: [2, 59], 75: [2, 59], 80: [2, 59], 81: [2, 59], 82: [2, 59], 83: [2, 59], 84: [2, 59], 85: [2, 59] }, { 33: [2, 61], 75: [2, 61] }, { 33: [2, 68], 37: 122, 74: 123, 75: [1, 121] }, { 33: [2, 65], 65: [2, 65], 72: [2, 65], 75: [2, 65], 80: [2, 65], 81: [2, 65], 82: [2, 65], 83: [2, 65], 84: [2, 65], 85: [2, 65] }, { 33: [2, 67], 75: [2, 67] }, { 23: [1, 124] }, { 23: [2, 51], 65: [2, 51], 72: [2, 51], 80: [2, 51], 81: [2, 51], 82: [2, 51], 83: [2, 51], 84: [2, 51], 85: [2, 51] }, { 23: [2, 53] }, { 33: [1, 125] }, { 33: [2, 91], 65: [2, 91], 72: [2, 91], 80: [2, 91], 81: [2, 91], 82: [2, 91], 83: [2, 91], 84: [2, 91], 85: [2, 91] }, { 33: [2, 93] }, { 5: [2, 22], 14: [2, 22], 15: [2, 22], 19: [2, 22], 29: [2, 22], 34: [2, 22], 39: [2, 22], 44: [2, 22], 47: [2, 22], 48: [2, 22], 51: [2, 22], 55: [2, 22], 60: [2, 22] }, { 23: [2, 99], 33: [2, 99], 54: [2, 99], 68: [2, 99], 72: [2, 99], 75: [2, 99] }, { 73: [1, 109] }, { 20: 75, 63: 126, 64: 76, 65: [1, 44], 72: [1, 35], 78: 26, 79: 27, 80: [1, 28], 81: [1, 29], 82: [1, 30], 83: [1, 31], 84: [1, 32], 85: [1, 34], 86: 33 }, { 5: [2, 23], 14: [2, 23], 15: [2, 23], 19: [2, 23], 29: [2, 23], 34: [2, 23], 39: [2, 23], 44: [2, 23], 47: [2, 23], 48: [2, 23], 51: [2, 23], 55: [2, 23], 60: [2, 23] }, { 47: [2, 19] }, { 47: [2, 77] }, { 20: 75, 33: [2, 72], 41: 127, 63: 128, 64: 76, 65: [1, 44], 69: 129, 70: 77, 71: 78, 72: [1, 79], 75: [2, 72], 78: 26, 79: 27, 80: [1, 28], 81: [1, 29], 82: [1, 30], 83: [1, 31], 84: [1, 32], 85: [1, 34], 86: 33 }, { 5: [2, 24], 14: [2, 24], 15: [2, 24], 19: [2, 24], 29: [2, 24], 34: [2, 24], 39: [2, 24], 44: [2, 24], 47: [2, 24], 48: [2, 24], 51: [2, 24], 55: [2, 24], 60: [2, 24] }, { 68: [1, 130] }, { 65: [2, 95], 68: [2, 95], 72: [2, 95], 80: [2, 95], 81: [2, 95], 82: [2, 95], 83: [2, 95], 84: [2, 95], 85: [2, 95] }, { 68: [2, 97] }, { 5: [2, 21], 14: [2, 21], 15: [2, 21], 19: [2, 21], 29: [2, 21], 34: [2, 21], 39: [2, 21], 44: [2, 21], 47: [2, 21], 48: [2, 21], 51: [2, 21], 55: [2, 21], 60: [2, 21] }, { 33: [1, 131] }, { 33: [2, 63] }, { 72: [1, 133], 76: 132 }, { 33: [1, 134] }, { 33: [2, 69] }, { 15: [2, 12] }, { 14: [2, 26], 15: [2, 26], 19: [2, 26], 29: [2, 26], 34: [2, 26], 47: [2, 26], 48: [2, 26], 51: [2, 26], 55: [2, 26], 60: [2, 26] }, { 23: [2, 31], 33: [2, 31], 54: [2, 31], 68: [2, 31], 72: [2, 31], 75: [2, 31] }, { 33: [2, 74], 42: 135, 74: 136, 75: [1, 121] }, { 33: [2, 71], 65: [2, 71], 72: [2, 71], 75: [2, 71], 80: [2, 71], 81: [2, 71], 82: [2, 71], 83: [2, 71], 84: [2, 71], 85: [2, 71] }, { 33: [2, 73], 75: [2, 73] }, { 23: [2, 29], 33: [2, 29], 54: [2, 29], 65: [2, 29], 68: [2, 29], 72: [2, 29], 75: [2, 29], 80: [2, 29], 81: [2, 29], 82: [2, 29], 83: [2, 29], 84: [2, 29], 85: [2, 29] }, { 14: [2, 15], 15: [2, 15], 19: [2, 15], 29: [2, 15], 34: [2, 15], 39: [2, 15], 44: [2, 15], 47: [2, 15], 48: [2, 15], 51: [2, 15], 55: [2, 15], 60: [2, 15] }, { 72: [1, 138], 77: [1, 137] }, { 72: [2, 100], 77: [2, 100] }, { 14: [2, 16], 15: [2, 16], 19: [2, 16], 29: [2, 16], 34: [2, 16], 44: [2, 16], 47: [2, 16], 48: [2, 16], 51: [2, 16], 55: [2, 16], 60: [2, 16] }, { 33: [1, 139] }, { 33: [2, 75] }, { 33: [2, 32] }, { 72: [2, 101], 77: [2, 101] }, { 14: [2, 17], 15: [2, 17], 19: [2, 17], 29: [2, 17], 34: [2, 17], 39: [2, 17], 44: [2, 17], 47: [2, 17], 48: [2, 17], 51: [2, 17], 55: [2, 17], 60: [2, 17] }],
	        defaultActions: { 4: [2, 1], 55: [2, 55], 57: [2, 20], 61: [2, 57], 74: [2, 81], 83: [2, 85], 87: [2, 18], 91: [2, 89], 102: [2, 53], 105: [2, 93], 111: [2, 19], 112: [2, 77], 117: [2, 97], 120: [2, 63], 123: [2, 69], 124: [2, 12], 136: [2, 75], 137: [2, 32] },
	        parseError: function parseError(str, hash) {
	            throw new Error(str);
	        },
	        parse: function parse(input) {
	            var self = this,
	                stack = [0],
	                vstack = [null],
	                lstack = [],
	                table = this.table,
	                yytext = "",
	                yylineno = 0,
	                yyleng = 0,
	                recovering = 0,
	                TERROR = 2,
	                EOF = 1;
	            this.lexer.setInput(input);
	            this.lexer.yy = this.yy;
	            this.yy.lexer = this.lexer;
	            this.yy.parser = this;
	            if (typeof this.lexer.yylloc == "undefined") this.lexer.yylloc = {};
	            var yyloc = this.lexer.yylloc;
	            lstack.push(yyloc);
	            var ranges = this.lexer.options && this.lexer.options.ranges;
	            if (typeof this.yy.parseError === "function") this.parseError = this.yy.parseError;
	            function popStack(n) {
	                stack.length = stack.length - 2 * n;
	                vstack.length = vstack.length - n;
	                lstack.length = lstack.length - n;
	            }
	            function lex() {
	                var token;
	                token = self.lexer.lex() || 1;
	                if (typeof token !== "number") {
	                    token = self.symbols_[token] || token;
	                }
	                return token;
	            }
	            var symbol,
	                preErrorSymbol,
	                state,
	                action,
	                a,
	                r,
	                yyval = {},
	                p,
	                len,
	                newState,
	                expected;
	            while (true) {
	                state = stack[stack.length - 1];
	                if (this.defaultActions[state]) {
	                    action = this.defaultActions[state];
	                } else {
	                    if (symbol === null || typeof symbol == "undefined") {
	                        symbol = lex();
	                    }
	                    action = table[state] && table[state][symbol];
	                }
	                if (typeof action === "undefined" || !action.length || !action[0]) {
	                    var errStr = "";
	                    if (!recovering) {
	                        expected = [];
	                        for (p in table[state]) if (this.terminals_[p] && p > 2) {
	                            expected.push("'" + this.terminals_[p] + "'");
	                        }
	                        if (this.lexer.showPosition) {
	                            errStr = "Parse error on line " + (yylineno + 1) + ":\n" + this.lexer.showPosition() + "\nExpecting " + expected.join(", ") + ", got '" + (this.terminals_[symbol] || symbol) + "'";
	                        } else {
	                            errStr = "Parse error on line " + (yylineno + 1) + ": Unexpected " + (symbol == 1 ? "end of input" : "'" + (this.terminals_[symbol] || symbol) + "'");
	                        }
	                        this.parseError(errStr, { text: this.lexer.match, token: this.terminals_[symbol] || symbol, line: this.lexer.yylineno, loc: yyloc, expected: expected });
	                    }
	                }
	                if (action[0] instanceof Array && action.length > 1) {
	                    throw new Error("Parse Error: multiple actions possible at state: " + state + ", token: " + symbol);
	                }
	                switch (action[0]) {
	                    case 1:
	                        stack.push(symbol);
	                        vstack.push(this.lexer.yytext);
	                        lstack.push(this.lexer.yylloc);
	                        stack.push(action[1]);
	                        symbol = null;
	                        if (!preErrorSymbol) {
	                            yyleng = this.lexer.yyleng;
	                            yytext = this.lexer.yytext;
	                            yylineno = this.lexer.yylineno;
	                            yyloc = this.lexer.yylloc;
	                            if (recovering > 0) recovering--;
	                        } else {
	                            symbol = preErrorSymbol;
	                            preErrorSymbol = null;
	                        }
	                        break;
	                    case 2:
	                        len = this.productions_[action[1]][1];
	                        yyval.$ = vstack[vstack.length - len];
	                        yyval._$ = { first_line: lstack[lstack.length - (len || 1)].first_line, last_line: lstack[lstack.length - 1].last_line, first_column: lstack[lstack.length - (len || 1)].first_column, last_column: lstack[lstack.length - 1].last_column };
	                        if (ranges) {
	                            yyval._$.range = [lstack[lstack.length - (len || 1)].range[0], lstack[lstack.length - 1].range[1]];
	                        }
	                        r = this.performAction.call(yyval, yytext, yyleng, yylineno, this.yy, action[1], vstack, lstack);
	                        if (typeof r !== "undefined") {
	                            return r;
	                        }
	                        if (len) {
	                            stack = stack.slice(0, -1 * len * 2);
	                            vstack = vstack.slice(0, -1 * len);
	                            lstack = lstack.slice(0, -1 * len);
	                        }
	                        stack.push(this.productions_[action[1]][0]);
	                        vstack.push(yyval.$);
	                        lstack.push(yyval._$);
	                        newState = table[stack[stack.length - 2]][stack[stack.length - 1]];
	                        stack.push(newState);
	                        break;
	                    case 3:
	                        return true;
	                }
	            }
	            return true;
	        }
	    };
	    /* Jison generated lexer */
	    var lexer = (function () {
	        var lexer = { EOF: 1,
	            parseError: function parseError(str, hash) {
	                if (this.yy.parser) {
	                    this.yy.parser.parseError(str, hash);
	                } else {
	                    throw new Error(str);
	                }
	            },
	            setInput: function setInput(input) {
	                this._input = input;
	                this._more = this._less = this.done = false;
	                this.yylineno = this.yyleng = 0;
	                this.yytext = this.matched = this.match = '';
	                this.conditionStack = ['INITIAL'];
	                this.yylloc = { first_line: 1, first_column: 0, last_line: 1, last_column: 0 };
	                if (this.options.ranges) this.yylloc.range = [0, 0];
	                this.offset = 0;
	                return this;
	            },
	            input: function input() {
	                var ch = this._input[0];
	                this.yytext += ch;
	                this.yyleng++;
	                this.offset++;
	                this.match += ch;
	                this.matched += ch;
	                var lines = ch.match(/(?:\r\n?|\n).*/g);
	                if (lines) {
	                    this.yylineno++;
	                    this.yylloc.last_line++;
	                } else {
	                    this.yylloc.last_column++;
	                }
	                if (this.options.ranges) this.yylloc.range[1]++;

	                this._input = this._input.slice(1);
	                return ch;
	            },
	            unput: function unput(ch) {
	                var len = ch.length;
	                var lines = ch.split(/(?:\r\n?|\n)/g);

	                this._input = ch + this._input;
	                this.yytext = this.yytext.substr(0, this.yytext.length - len - 1);
	                //this.yyleng -= len;
	                this.offset -= len;
	                var oldLines = this.match.split(/(?:\r\n?|\n)/g);
	                this.match = this.match.substr(0, this.match.length - 1);
	                this.matched = this.matched.substr(0, this.matched.length - 1);

	                if (lines.length - 1) this.yylineno -= lines.length - 1;
	                var r = this.yylloc.range;

	                this.yylloc = { first_line: this.yylloc.first_line,
	                    last_line: this.yylineno + 1,
	                    first_column: this.yylloc.first_column,
	                    last_column: lines ? (lines.length === oldLines.length ? this.yylloc.first_column : 0) + oldLines[oldLines.length - lines.length].length - lines[0].length : this.yylloc.first_column - len
	                };

	                if (this.options.ranges) {
	                    this.yylloc.range = [r[0], r[0] + this.yyleng - len];
	                }
	                return this;
	            },
	            more: function more() {
	                this._more = true;
	                return this;
	            },
	            less: function less(n) {
	                this.unput(this.match.slice(n));
	            },
	            pastInput: function pastInput() {
	                var past = this.matched.substr(0, this.matched.length - this.match.length);
	                return (past.length > 20 ? '...' : '') + past.substr(-20).replace(/\n/g, "");
	            },
	            upcomingInput: function upcomingInput() {
	                var next = this.match;
	                if (next.length < 20) {
	                    next += this._input.substr(0, 20 - next.length);
	                }
	                return (next.substr(0, 20) + (next.length > 20 ? '...' : '')).replace(/\n/g, "");
	            },
	            showPosition: function showPosition() {
	                var pre = this.pastInput();
	                var c = new Array(pre.length + 1).join("-");
	                return pre + this.upcomingInput() + "\n" + c + "^";
	            },
	            next: function next() {
	                if (this.done) {
	                    return this.EOF;
	                }
	                if (!this._input) this.done = true;

	                var token, match, tempMatch, index, col, lines;
	                if (!this._more) {
	                    this.yytext = '';
	                    this.match = '';
	                }
	                var rules = this._currentRules();
	                for (var i = 0; i < rules.length; i++) {
	                    tempMatch = this._input.match(this.rules[rules[i]]);
	                    if (tempMatch && (!match || tempMatch[0].length > match[0].length)) {
	                        match = tempMatch;
	                        index = i;
	                        if (!this.options.flex) break;
	                    }
	                }
	                if (match) {
	                    lines = match[0].match(/(?:\r\n?|\n).*/g);
	                    if (lines) this.yylineno += lines.length;
	                    this.yylloc = { first_line: this.yylloc.last_line,
	                        last_line: this.yylineno + 1,
	                        first_column: this.yylloc.last_column,
	                        last_column: lines ? lines[lines.length - 1].length - lines[lines.length - 1].match(/\r?\n?/)[0].length : this.yylloc.last_column + match[0].length };
	                    this.yytext += match[0];
	                    this.match += match[0];
	                    this.matches = match;
	                    this.yyleng = this.yytext.length;
	                    if (this.options.ranges) {
	                        this.yylloc.range = [this.offset, this.offset += this.yyleng];
	                    }
	                    this._more = false;
	                    this._input = this._input.slice(match[0].length);
	                    this.matched += match[0];
	                    token = this.performAction.call(this, this.yy, this, rules[index], this.conditionStack[this.conditionStack.length - 1]);
	                    if (this.done && this._input) this.done = false;
	                    if (token) return token;else return;
	                }
	                if (this._input === "") {
	                    return this.EOF;
	                } else {
	                    return this.parseError('Lexical error on line ' + (this.yylineno + 1) + '. Unrecognized text.\n' + this.showPosition(), { text: "", token: null, line: this.yylineno });
	                }
	            },
	            lex: function lex() {
	                var r = this.next();
	                if (typeof r !== 'undefined') {
	                    return r;
	                } else {
	                    return this.lex();
	                }
	            },
	            begin: function begin(condition) {
	                this.conditionStack.push(condition);
	            },
	            popState: function popState() {
	                return this.conditionStack.pop();
	            },
	            _currentRules: function _currentRules() {
	                return this.conditions[this.conditionStack[this.conditionStack.length - 1]].rules;
	            },
	            topState: function topState() {
	                return this.conditionStack[this.conditionStack.length - 2];
	            },
	            pushState: function begin(condition) {
	                this.begin(condition);
	            } };
	        lexer.options = {};
	        lexer.performAction = function anonymous(yy, yy_, $avoiding_name_collisions, YY_START) {

	            function strip(start, end) {
	                return yy_.yytext = yy_.yytext.substr(start, yy_.yyleng - end);
	            }

	            var YYSTATE = YY_START;
	            switch ($avoiding_name_collisions) {
	                case 0:
	                    if (yy_.yytext.slice(-2) === "\\\\") {
	                        strip(0, 1);
	                        this.begin("mu");
	                    } else if (yy_.yytext.slice(-1) === "\\") {
	                        strip(0, 1);
	                        this.begin("emu");
	                    } else {
	                        this.begin("mu");
	                    }
	                    if (yy_.yytext) return 15;

	                    break;
	                case 1:
	                    return 15;
	                    break;
	                case 2:
	                    this.popState();
	                    return 15;

	                    break;
	                case 3:
	                    this.begin('raw');return 15;
	                    break;
	                case 4:
	                    this.popState();
	                    // Should be using `this.topState()` below, but it currently
	                    // returns the second top instead of the first top. Opened an
	                    // issue about it at https://github.com/zaach/jison/issues/291
	                    if (this.conditionStack[this.conditionStack.length - 1] === 'raw') {
	                        return 15;
	                    } else {
	                        yy_.yytext = yy_.yytext.substr(5, yy_.yyleng - 9);
	                        return 'END_RAW_BLOCK';
	                    }

	                    break;
	                case 5:
	                    return 15;
	                    break;
	                case 6:
	                    this.popState();
	                    return 14;

	                    break;
	                case 7:
	                    return 65;
	                    break;
	                case 8:
	                    return 68;
	                    break;
	                case 9:
	                    return 19;
	                    break;
	                case 10:
	                    this.popState();
	                    this.begin('raw');
	                    return 23;

	                    break;
	                case 11:
	                    return 55;
	                    break;
	                case 12:
	                    return 60;
	                    break;
	                case 13:
	                    return 29;
	                    break;
	                case 14:
	                    return 47;
	                    break;
	                case 15:
	                    this.popState();return 44;
	                    break;
	                case 16:
	                    this.popState();return 44;
	                    break;
	                case 17:
	                    return 34;
	                    break;
	                case 18:
	                    return 39;
	                    break;
	                case 19:
	                    return 51;
	                    break;
	                case 20:
	                    return 48;
	                    break;
	                case 21:
	                    this.unput(yy_.yytext);
	                    this.popState();
	                    this.begin('com');

	                    break;
	                case 22:
	                    this.popState();
	                    return 14;

	                    break;
	                case 23:
	                    return 48;
	                    break;
	                case 24:
	                    return 73;
	                    break;
	                case 25:
	                    return 72;
	                    break;
	                case 26:
	                    return 72;
	                    break;
	                case 27:
	                    return 87;
	                    break;
	                case 28:
	                    // ignore whitespace
	                    break;
	                case 29:
	                    this.popState();return 54;
	                    break;
	                case 30:
	                    this.popState();return 33;
	                    break;
	                case 31:
	                    yy_.yytext = strip(1, 2).replace(/\\"/g, '"');return 80;
	                    break;
	                case 32:
	                    yy_.yytext = strip(1, 2).replace(/\\'/g, "'");return 80;
	                    break;
	                case 33:
	                    return 85;
	                    break;
	                case 34:
	                    return 82;
	                    break;
	                case 35:
	                    return 82;
	                    break;
	                case 36:
	                    return 83;
	                    break;
	                case 37:
	                    return 84;
	                    break;
	                case 38:
	                    return 81;
	                    break;
	                case 39:
	                    return 75;
	                    break;
	                case 40:
	                    return 77;
	                    break;
	                case 41:
	                    return 72;
	                    break;
	                case 42:
	                    yy_.yytext = yy_.yytext.replace(/\\([\\\]])/g, '$1');return 72;
	                    break;
	                case 43:
	                    return 'INVALID';
	                    break;
	                case 44:
	                    return 5;
	                    break;
	            }
	        };
	        lexer.rules = [/^(?:[^\x00]*?(?=(\{\{)))/, /^(?:[^\x00]+)/, /^(?:[^\x00]{2,}?(?=(\{\{|\\\{\{|\\\\\{\{|$)))/, /^(?:\{\{\{\{(?=[^\/]))/, /^(?:\{\{\{\{\/[^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=[=}\s\/.])\}\}\}\})/, /^(?:[^\x00]*?(?=(\{\{\{\{)))/, /^(?:[\s\S]*?--(~)?\}\})/, /^(?:\()/, /^(?:\))/, /^(?:\{\{\{\{)/, /^(?:\}\}\}\})/, /^(?:\{\{(~)?>)/, /^(?:\{\{(~)?#>)/, /^(?:\{\{(~)?#\*?)/, /^(?:\{\{(~)?\/)/, /^(?:\{\{(~)?\^\s*(~)?\}\})/, /^(?:\{\{(~)?\s*else\s*(~)?\}\})/, /^(?:\{\{(~)?\^)/, /^(?:\{\{(~)?\s*else\b)/, /^(?:\{\{(~)?\{)/, /^(?:\{\{(~)?&)/, /^(?:\{\{(~)?!--)/, /^(?:\{\{(~)?![\s\S]*?\}\})/, /^(?:\{\{(~)?\*?)/, /^(?:=)/, /^(?:\.\.)/, /^(?:\.(?=([=~}\s\/.)|])))/, /^(?:[\/.])/, /^(?:\s+)/, /^(?:\}(~)?\}\})/, /^(?:(~)?\}\})/, /^(?:"(\\["]|[^"])*")/, /^(?:'(\\[']|[^'])*')/, /^(?:@)/, /^(?:true(?=([~}\s)])))/, /^(?:false(?=([~}\s)])))/, /^(?:undefined(?=([~}\s)])))/, /^(?:null(?=([~}\s)])))/, /^(?:-?[0-9]+(?:\.[0-9]+)?(?=([~}\s)])))/, /^(?:as\s+\|)/, /^(?:\|)/, /^(?:([^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=([=~}\s\/.)|]))))/, /^(?:\[(\\\]|[^\]])*\])/, /^(?:.)/, /^(?:$)/];
	        lexer.conditions = { "mu": { "rules": [7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44], "inclusive": false }, "emu": { "rules": [2], "inclusive": false }, "com": { "rules": [6], "inclusive": false }, "raw": { "rules": [3, 4, 5], "inclusive": false }, "INITIAL": { "rules": [0, 1, 44], "inclusive": true } };
	        return lexer;
	    })();
	    parser.lexer = lexer;
	    function Parser() {
	        this.yy = {};
	    }Parser.prototype = parser;parser.Parser = Parser;
	    return new Parser();
	})();exports["default"] = handlebars;
	module.exports = exports["default"];

/***/ }),
/* 38 */
/***/ (function(module, exports, __webpack_require__) {

	'use strict';

	var _interopRequireDefault = __webpack_require__(1)['default'];

	exports.__esModule = true;

	var _visitor = __webpack_require__(39);

	var _visitor2 = _interopRequireDefault(_visitor);

	function WhitespaceControl() {
	  var options = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];

	  this.options = options;
	}
	WhitespaceControl.prototype = new _visitor2['default']();

	WhitespaceControl.prototype.Program = function (program) {
	  var doStandalone = !this.options.ignoreStandalone;

	  var isRoot = !this.isRootSeen;
	  this.isRootSeen = true;

	  var body = program.body;
	  for (var i = 0, l = body.length; i < l; i++) {
	    var current = body[i],
	        strip = this.accept(current);

	    if (!strip) {
	      continue;
	    }

	    var _isPrevWhitespace = isPrevWhitespace(body, i, isRoot),
	        _isNextWhitespace = isNextWhitespace(body, i, isRoot),
	        openStandalone = strip.openStandalone && _isPrevWhitespace,
	        closeStandalone = strip.closeStandalone && _isNextWhitespace,
	        inlineStandalone = strip.inlineStandalone && _isPrevWhitespace && _isNextWhitespace;

	    if (strip.close) {
	      omitRight(body, i, true);
	    }
	    if (strip.open) {
	      omitLeft(body, i, true);
	    }

	    if (doStandalone && inlineStandalone) {
	      omitRight(body, i);

	      if (omitLeft(body, i)) {
	        // If we are on a standalone node, save the indent info for partials
	        if (current.type === 'PartialStatement') {
	          // Pull out the whitespace from the final line
	          current.indent = /([ \t]+$)/.exec(body[i - 1].original)[1];
	        }
	      }
	    }
	    if (doStandalone && openStandalone) {
	      omitRight((current.program || current.inverse).body);

	      // Strip out the previous content node if it's whitespace only
	      omitLeft(body, i);
	    }
	    if (doStandalone && closeStandalone) {
	      // Always strip the next node
	      omitRight(body, i);

	      omitLeft((current.inverse || current.program).body);
	    }
	  }

	  return program;
	};

	WhitespaceControl.prototype.BlockStatement = WhitespaceControl.prototype.DecoratorBlock = WhitespaceControl.prototype.PartialBlockStatement = function (block) {
	  this.accept(block.program);
	  this.accept(block.inverse);

	  // Find the inverse program that is involed with whitespace stripping.
	  var program = block.program || block.inverse,
	      inverse = block.program && block.inverse,
	      firstInverse = inverse,
	      lastInverse = inverse;

	  if (inverse && inverse.chained) {
	    firstInverse = inverse.body[0].program;

	    // Walk the inverse chain to find the last inverse that is actually in the chain.
	    while (lastInverse.chained) {
	      lastInverse = lastInverse.body[lastInverse.body.length - 1].program;
	    }
	  }

	  var strip = {
	    open: block.openStrip.open,
	    close: block.closeStrip.close,

	    // Determine the standalone candiacy. Basically flag our content as being possibly standalone
	    // so our parent can determine if we actually are standalone
	    openStandalone: isNextWhitespace(program.body),
	    closeStandalone: isPrevWhitespace((firstInverse || program).body)
	  };

	  if (block.openStrip.close) {
	    omitRight(program.body, null, true);
	  }

	  if (inverse) {
	    var inverseStrip = block.inverseStrip;

	    if (inverseStrip.open) {
	      omitLeft(program.body, null, true);
	    }

	    if (inverseStrip.close) {
	      omitRight(firstInverse.body, null, true);
	    }
	    if (block.closeStrip.open) {
	      omitLeft(lastInverse.body, null, true);
	    }

	    // Find standalone else statments
	    if (!this.options.ignoreStandalone && isPrevWhitespace(program.body) && isNextWhitespace(firstInverse.body)) {
	      omitLeft(program.body);
	      omitRight(firstInverse.body);
	    }
	  } else if (block.closeStrip.open) {
	    omitLeft(program.body, null, true);
	  }

	  return strip;
	};

	WhitespaceControl.prototype.Decorator = WhitespaceControl.prototype.MustacheStatement = function (mustache) {
	  return mustache.strip;
	};

	WhitespaceControl.prototype.PartialStatement = WhitespaceControl.prototype.CommentStatement = function (node) {
	  /* istanbul ignore next */
	  var strip = node.strip || {};
	  return {
	    inlineStandalone: true,
	    open: strip.open,
	    close: strip.close
	  };
	};

	function isPrevWhitespace(body, i, isRoot) {
	  if (i === undefined) {
	    i = body.length;
	  }

	  // Nodes that end with newlines are considered whitespace (but are special
	  // cased for strip operations)
	  var prev = body[i - 1],
	      sibling = body[i - 2];
	  if (!prev) {
	    return isRoot;
	  }

	  if (prev.type === 'ContentStatement') {
	    return (sibling || !isRoot ? /\r?\n\s*?$/ : /(^|\r?\n)\s*?$/).test(prev.original);
	  }
	}
	function isNextWhitespace(body, i, isRoot) {
	  if (i === undefined) {
	    i = -1;
	  }

	  var next = body[i + 1],
	      sibling = body[i + 2];
	  if (!next) {
	    return isRoot;
	  }

	  if (next.type === 'ContentStatement') {
	    return (sibling || !isRoot ? /^\s*?\r?\n/ : /^\s*?(\r?\n|$)/).test(next.original);
	  }
	}

	// Marks the node to the right of the position as omitted.
	// I.e. {{foo}}' ' will mark the ' ' node as omitted.
	//
	// If i is undefined, then the first child will be marked as such.
	//
	// If mulitple is truthy then all whitespace will be stripped out until non-whitespace
	// content is met.
	function omitRight(body, i, multiple) {
	  var current = body[i == null ? 0 : i + 1];
	  if (!current || current.type !== 'ContentStatement' || !multiple && current.rightStripped) {
	    return;
	  }

	  var original = current.value;
	  current.value = current.value.replace(multiple ? /^\s+/ : /^[ \t]*\r?\n?/, '');
	  current.rightStripped = current.value !== original;
	}

	// Marks the node to the left of the position as omitted.
	// I.e. ' '{{foo}} will mark the ' ' node as omitted.
	//
	// If i is undefined then the last child will be marked as such.
	//
	// If mulitple is truthy then all whitespace will be stripped out until non-whitespace
	// content is met.
	function omitLeft(body, i, multiple) {
	  var current = body[i == null ? body.length - 1 : i - 1];
	  if (!current || current.type !== 'ContentStatement' || !multiple && current.leftStripped) {
	    return;
	  }

	  // We omit the last node if it's whitespace only and not preceeded by a non-content node.
	  var original = current.value;
	  current.value = current.value.replace(multiple ? /\s+$/ : /[ \t]+$/, '');
	  current.leftStripped = current.value !== original;
	  return current.leftStripped;
	}

	exports['default'] = WhitespaceControl;
	module.exports = exports['default'];

/***/ }),
/* 39 */
/***/ (function(module, exports, __webpack_require__) {

	'use strict';

	var _interopRequireDefault = __webpack_require__(1)['default'];

	exports.__esModule = true;

	var _exception = __webpack_require__(6);

	var _exception2 = _interopRequireDefault(_exception);

	function Visitor() {
	  this.parents = [];
	}

	Visitor.prototype = {
	  constructor: Visitor,
	  mutating: false,

	  // Visits a given value. If mutating, will replace the value if necessary.
	  acceptKey: function acceptKey(node, name) {
	    var value = this.accept(node[name]);
	    if (this.mutating) {
	      // Hacky sanity check: This may have a few false positives for type for the helper
	      // methods but will generally do the right thing without a lot of overhead.
	      if (value && !Visitor.prototype[value.type]) {
	        throw new _exception2['default']('Unexpected node type "' + value.type + '" found when accepting ' + name + ' on ' + node.type);
	      }
	      node[name] = value;
	    }
	  },

	  // Performs an accept operation with added sanity check to ensure
	  // required keys are not removed.
	  acceptRequired: function acceptRequired(node, name) {
	    this.acceptKey(node, name);

	    if (!node[name]) {
	      throw new _exception2['default'](node.type + ' requires ' + name);
	    }
	  },

	  // Traverses a given array. If mutating, empty respnses will be removed
	  // for child elements.
	  acceptArray: function acceptArray(array) {
	    for (var i = 0, l = array.length; i < l; i++) {
	      this.acceptKey(array, i);

	      if (!array[i]) {
	        array.splice(i, 1);
	        i--;
	        l--;
	      }
	    }
	  },

	  accept: function accept(object) {
	    if (!object) {
	      return;
	    }

	    /* istanbul ignore next: Sanity code */
	    if (!this[object.type]) {
	      throw new _exception2['default']('Unknown type: ' + object.type, object);
	    }

	    if (this.current) {
	      this.parents.unshift(this.current);
	    }
	    this.current = object;

	    var ret = this[object.type](object);

	    this.current = this.parents.shift();

	    if (!this.mutating || ret) {
	      return ret;
	    } else if (ret !== false) {
	      return object;
	    }
	  },

	  Program: function Program(program) {
	    this.acceptArray(program.body);
	  },

	  MustacheStatement: visitSubExpression,
	  Decorator: visitSubExpression,

	  BlockStatement: visitBlock,
	  DecoratorBlock: visitBlock,

	  PartialStatement: visitPartial,
	  PartialBlockStatement: function PartialBlockStatement(partial) {
	    visitPartial.call(this, partial);

	    this.acceptKey(partial, 'program');
	  },

	  ContentStatement: function ContentStatement() /* content */{},
	  CommentStatement: function CommentStatement() /* comment */{},

	  SubExpression: visitSubExpression,

	  PathExpression: function PathExpression() /* path */{},

	  StringLiteral: function StringLiteral() /* string */{},
	  NumberLiteral: function NumberLiteral() /* number */{},
	  BooleanLiteral: function BooleanLiteral() /* bool */{},
	  UndefinedLiteral: function UndefinedLiteral() /* literal */{},
	  NullLiteral: function NullLiteral() /* literal */{},

	  Hash: function Hash(hash) {
	    this.acceptArray(hash.pairs);
	  },
	  HashPair: function HashPair(pair) {
	    this.acceptRequired(pair, 'value');
	  }
	};

	function visitSubExpression(mustache) {
	  this.acceptRequired(mustache, 'path');
	  this.acceptArray(mustache.params);
	  this.acceptKey(mustache, 'hash');
	}
	function visitBlock(block) {
	  visitSubExpression.call(this, block);

	  this.acceptKey(block, 'program');
	  this.acceptKey(block, 'inverse');
	}
	function visitPartial(partial) {
	  this.acceptRequired(partial, 'name');
	  this.acceptArray(partial.params);
	  this.acceptKey(partial, 'hash');
	}

	exports['default'] = Visitor;
	module.exports = exports['default'];

/***/ }),
/* 40 */
/***/ (function(module, exports, __webpack_require__) {

	'use strict';

	var _interopRequireDefault = __webpack_require__(1)['default'];

	exports.__esModule = true;
	exports.SourceLocation = SourceLocation;
	exports.id = id;
	exports.stripFlags = stripFlags;
	exports.stripComment = stripComment;
	exports.preparePath = preparePath;
	exports.prepareMustache = prepareMustache;
	exports.prepareRawBlock = prepareRawBlock;
	exports.prepareBlock = prepareBlock;
	exports.prepareProgram = prepareProgram;
	exports.preparePartialBlock = preparePartialBlock;

	var _exception = __webpack_require__(6);

	var _exception2 = _interopRequireDefault(_exception);

	function validateClose(open, close) {
	  close = close.path ? close.path.original : close;

	  if (open.path.original !== close) {
	    var errorNode = { loc: open.path.loc };

	    throw new _exception2['default'](open.path.original + " doesn't match " + close, errorNode);
	  }
	}

	function SourceLocation(source, locInfo) {
	  this.source = source;
	  this.start = {
	    line: locInfo.first_line,
	    column: locInfo.first_column
	  };
	  this.end = {
	    line: locInfo.last_line,
	    column: locInfo.last_column
	  };
	}

	function id(token) {
	  if (/^\[.*\]$/.test(token)) {
	    return token.substr(1, token.length - 2);
	  } else {
	    return token;
	  }
	}

	function stripFlags(open, close) {
	  return {
	    open: open.charAt(2) === '~',
	    close: close.charAt(close.length - 3) === '~'
	  };
	}

	function stripComment(comment) {
	  return comment.replace(/^\{\{~?!-?-?/, '').replace(/-?-?~?\}\}$/, '');
	}

	function preparePath(data, parts, loc) {
	  loc = this.locInfo(loc);

	  var original = data ? '@' : '',
	      dig = [],
	      depth = 0;

	  for (var i = 0, l = parts.length; i < l; i++) {
	    var part = parts[i].part,

	    // If we have [] syntax then we do not treat path references as operators,
	    // i.e. foo.[this] resolves to approximately context.foo['this']
	    isLiteral = parts[i].original !== part;
	    original += (parts[i].separator || '') + part;

	    if (!isLiteral && (part === '..' || part === '.' || part === 'this')) {
	      if (dig.length > 0) {
	        throw new _exception2['default']('Invalid path: ' + original, { loc: loc });
	      } else if (part === '..') {
	        depth++;
	      }
	    } else {
	      dig.push(part);
	    }
	  }

	  return {
	    type: 'PathExpression',
	    data: data,
	    depth: depth,
	    parts: dig,
	    original: original,
	    loc: loc
	  };
	}

	function prepareMustache(path, params, hash, open, strip, locInfo) {
	  // Must use charAt to support IE pre-10
	  var escapeFlag = open.charAt(3) || open.charAt(2),
	      escaped = escapeFlag !== '{' && escapeFlag !== '&';

	  var decorator = /\*/.test(open);
	  return {
	    type: decorator ? 'Decorator' : 'MustacheStatement',
	    path: path,
	    params: params,
	    hash: hash,
	    escaped: escaped,
	    strip: strip,
	    loc: this.locInfo(locInfo)
	  };
	}

	function prepareRawBlock(openRawBlock, contents, close, locInfo) {
	  validateClose(openRawBlock, close);

	  locInfo = this.locInfo(locInfo);
	  var program = {
	    type: 'Program',
	    body: contents,
	    strip: {},
	    loc: locInfo
	  };

	  return {
	    type: 'BlockStatement',
	    path: openRawBlock.path,
	    params: openRawBlock.params,
	    hash: openRawBlock.hash,
	    program: program,
	    openStrip: {},
	    inverseStrip: {},
	    closeStrip: {},
	    loc: locInfo
	  };
	}

	function prepareBlock(openBlock, program, inverseAndProgram, close, inverted, locInfo) {
	  if (close && close.path) {
	    validateClose(openBlock, close);
	  }

	  var decorator = /\*/.test(openBlock.open);

	  program.blockParams = openBlock.blockParams;

	  var inverse = undefined,
	      inverseStrip = undefined;

	  if (inverseAndProgram) {
	    if (decorator) {
	      throw new _exception2['default']('Unexpected inverse block on decorator', inverseAndProgram);
	    }

	    if (inverseAndProgram.chain) {
	      inverseAndProgram.program.body[0].closeStrip = close.strip;
	    }

	    inverseStrip = inverseAndProgram.strip;
	    inverse = inverseAndProgram.program;
	  }

	  if (inverted) {
	    inverted = inverse;
	    inverse = program;
	    program = inverted;
	  }

	  return {
	    type: decorator ? 'DecoratorBlock' : 'BlockStatement',
	    path: openBlock.path,
	    params: openBlock.params,
	    hash: openBlock.hash,
	    program: program,
	    inverse: inverse,
	    openStrip: openBlock.strip,
	    inverseStrip: inverseStrip,
	    closeStrip: close && close.strip,
	    loc: this.locInfo(locInfo)
	  };
	}

	function prepareProgram(statements, loc) {
	  if (!loc && statements.length) {
	    var firstLoc = statements[0].loc,
	        lastLoc = statements[statements.length - 1].loc;

	    /* istanbul ignore else */
	    if (firstLoc && lastLoc) {
	      loc = {
	        source: firstLoc.source,
	        start: {
	          line: firstLoc.start.line,
	          column: firstLoc.start.column
	        },
	        end: {
	          line: lastLoc.end.line,
	          column: lastLoc.end.column
	        }
	      };
	    }
	  }

	  return {
	    type: 'Program',
	    body: statements,
	    strip: {},
	    loc: loc
	  };
	}

	function preparePartialBlock(open, program, close, locInfo) {
	  validateClose(open, close);

	  return {
	    type: 'PartialBlockStatement',
	    name: open.path,
	    params: open.params,
	    hash: open.hash,
	    program: program,
	    openStrip: open.strip,
	    closeStrip: close && close.strip,
	    loc: this.locInfo(locInfo)
	  };
	}

/***/ }),
/* 41 */
/***/ (function(module, exports, __webpack_require__) {

	/* eslint-disable new-cap */

	'use strict';

	var _interopRequireDefault = __webpack_require__(1)['default'];

	exports.__esModule = true;
	exports.Compiler = Compiler;
	exports.precompile = precompile;
	exports.compile = compile;

	var _exception = __webpack_require__(6);

	var _exception2 = _interopRequireDefault(_exception);

	var _utils = __webpack_require__(5);

	var _ast = __webpack_require__(35);

	var _ast2 = _interopRequireDefault(_ast);

	var slice = [].slice;

	function Compiler() {}

	// the foundHelper register will disambiguate helper lookup from finding a
	// function in a context. This is necessary for mustache compatibility, which
	// requires that context functions in blocks are evaluated by blockHelperMissing,
	// and then proceed as if the resulting value was provided to blockHelperMissing.

	Compiler.prototype = {
	  compiler: Compiler,

	  equals: function equals(other) {
	    var len = this.opcodes.length;
	    if (other.opcodes.length !== len) {
	      return false;
	    }

	    for (var i = 0; i < len; i++) {
	      var opcode = this.opcodes[i],
	          otherOpcode = other.opcodes[i];
	      if (opcode.opcode !== otherOpcode.opcode || !argEquals(opcode.args, otherOpcode.args)) {
	        return false;
	      }
	    }

	    // We know that length is the same between the two arrays because they are directly tied
	    // to the opcode behavior above.
	    len = this.children.length;
	    for (var i = 0; i < len; i++) {
	      if (!this.children[i].equals(other.children[i])) {
	        return false;
	      }
	    }

	    return true;
	  },

	  guid: 0,

	  compile: function compile(program, options) {
	    this.sourceNode = [];
	    this.opcodes = [];
	    this.children = [];
	    this.options = options;
	    this.stringParams = options.stringParams;
	    this.trackIds = options.trackIds;

	    options.blockParams = options.blockParams || [];

	    // These changes will propagate to the other compiler components
	    var knownHelpers = options.knownHelpers;
	    options.knownHelpers = {
	      'helperMissing': true,
	      'blockHelperMissing': true,
	      'each': true,
	      'if': true,
	      'unless': true,
	      'with': true,
	      'log': true,
	      'lookup': true
	    };
	    if (knownHelpers) {
	      // the next line should use "Object.keys", but the code has been like this a long time and changing it, might
	      // cause backwards-compatibility issues... It's an old library...
	      // eslint-disable-next-line guard-for-in
	      for (var _name in knownHelpers) {
	        this.options.knownHelpers[_name] = knownHelpers[_name];
	      }
	    }

	    return this.accept(program);
	  },

	  compileProgram: function compileProgram(program) {
	    var childCompiler = new this.compiler(),
	        // eslint-disable-line new-cap
	    result = childCompiler.compile(program, this.options),
	        guid = this.guid++;

	    this.usePartial = this.usePartial || result.usePartial;

	    this.children[guid] = result;
	    this.useDepths = this.useDepths || result.useDepths;

	    return guid;
	  },

	  accept: function accept(node) {
	    /* istanbul ignore next: Sanity code */
	    if (!this[node.type]) {
	      throw new _exception2['default']('Unknown type: ' + node.type, node);
	    }

	    this.sourceNode.unshift(node);
	    var ret = this[node.type](node);
	    this.sourceNode.shift();
	    return ret;
	  },

	  Program: function Program(program) {
	    this.options.blockParams.unshift(program.blockParams);

	    var body = program.body,
	        bodyLength = body.length;
	    for (var i = 0; i < bodyLength; i++) {
	      this.accept(body[i]);
	    }

	    this.options.blockParams.shift();

	    this.isSimple = bodyLength === 1;
	    this.blockParams = program.blockParams ? program.blockParams.length : 0;

	    return this;
	  },

	  BlockStatement: function BlockStatement(block) {
	    transformLiteralToPath(block);

	    var program = block.program,
	        inverse = block.inverse;

	    program = program && this.compileProgram(program);
	    inverse = inverse && this.compileProgram(inverse);

	    var type = this.classifySexpr(block);

	    if (type === 'helper') {
	      this.helperSexpr(block, program, inverse);
	    } else if (type === 'simple') {
	      this.simpleSexpr(block);

	      // now that the simple mustache is resolved, we need to
	      // evaluate it by executing `blockHelperMissing`
	      this.opcode('pushProgram', program);
	      this.opcode('pushProgram', inverse);
	      this.opcode('emptyHash');
	      this.opcode('blockValue', block.path.original);
	    } else {
	      this.ambiguousSexpr(block, program, inverse);

	      // now that the simple mustache is resolved, we need to
	      // evaluate it by executing `blockHelperMissing`
	      this.opcode('pushProgram', program);
	      this.opcode('pushProgram', inverse);
	      this.opcode('emptyHash');
	      this.opcode('ambiguousBlockValue');
	    }

	    this.opcode('append');
	  },

	  DecoratorBlock: function DecoratorBlock(decorator) {
	    var program = decorator.program && this.compileProgram(decorator.program);
	    var params = this.setupFullMustacheParams(decorator, program, undefined),
	        path = decorator.path;

	    this.useDecorators = true;
	    this.opcode('registerDecorator', params.length, path.original);
	  },

	  PartialStatement: function PartialStatement(partial) {
	    this.usePartial = true;

	    var program = partial.program;
	    if (program) {
	      program = this.compileProgram(partial.program);
	    }

	    var params = partial.params;
	    if (params.length > 1) {
	      throw new _exception2['default']('Unsupported number of partial arguments: ' + params.length, partial);
	    } else if (!params.length) {
	      if (this.options.explicitPartialContext) {
	        this.opcode('pushLiteral', 'undefined');
	      } else {
	        params.push({ type: 'PathExpression', parts: [], depth: 0 });
	      }
	    }

	    var partialName = partial.name.original,
	        isDynamic = partial.name.type === 'SubExpression';
	    if (isDynamic) {
	      this.accept(partial.name);
	    }

	    this.setupFullMustacheParams(partial, program, undefined, true);

	    var indent = partial.indent || '';
	    if (this.options.preventIndent && indent) {
	      this.opcode('appendContent', indent);
	      indent = '';
	    }

	    this.opcode('invokePartial', isDynamic, partialName, indent);
	    this.opcode('append');
	  },
	  PartialBlockStatement: function PartialBlockStatement(partialBlock) {
	    this.PartialStatement(partialBlock);
	  },

	  MustacheStatement: function MustacheStatement(mustache) {
	    this.SubExpression(mustache);

	    if (mustache.escaped && !this.options.noEscape) {
	      this.opcode('appendEscaped');
	    } else {
	      this.opcode('append');
	    }
	  },
	  Decorator: function Decorator(decorator) {
	    this.DecoratorBlock(decorator);
	  },

	  ContentStatement: function ContentStatement(content) {
	    if (content.value) {
	      this.opcode('appendContent', content.value);
	    }
	  },

	  CommentStatement: function CommentStatement() {},

	  SubExpression: function SubExpression(sexpr) {
	    transformLiteralToPath(sexpr);
	    var type = this.classifySexpr(sexpr);

	    if (type === 'simple') {
	      this.simpleSexpr(sexpr);
	    } else if (type === 'helper') {
	      this.helperSexpr(sexpr);
	    } else {
	      this.ambiguousSexpr(sexpr);
	    }
	  },
	  ambiguousSexpr: function ambiguousSexpr(sexpr, program, inverse) {
	    var path = sexpr.path,
	        name = path.parts[0],
	        isBlock = program != null || inverse != null;

	    this.opcode('getContext', path.depth);

	    this.opcode('pushProgram', program);
	    this.opcode('pushProgram', inverse);

	    path.strict = true;
	    this.accept(path);

	    this.opcode('invokeAmbiguous', name, isBlock);
	  },

	  simpleSexpr: function simpleSexpr(sexpr) {
	    var path = sexpr.path;
	    path.strict = true;
	    this.accept(path);
	    this.opcode('resolvePossibleLambda');
	  },

	  helperSexpr: function helperSexpr(sexpr, program, inverse) {
	    var params = this.setupFullMustacheParams(sexpr, program, inverse),
	        path = sexpr.path,
	        name = path.parts[0];

	    if (this.options.knownHelpers[name]) {
	      this.opcode('invokeKnownHelper', params.length, name);
	    } else if (this.options.knownHelpersOnly) {
	      throw new _exception2['default']('You specified knownHelpersOnly, but used the unknown helper ' + name, sexpr);
	    } else {
	      path.strict = true;
	      path.falsy = true;

	      this.accept(path);
	      this.opcode('invokeHelper', params.length, path.original, _ast2['default'].helpers.simpleId(path));
	    }
	  },

	  PathExpression: function PathExpression(path) {
	    this.addDepth(path.depth);
	    this.opcode('getContext', path.depth);

	    var name = path.parts[0],
	        scoped = _ast2['default'].helpers.scopedId(path),
	        blockParamId = !path.depth && !scoped && this.blockParamIndex(name);

	    if (blockParamId) {
	      this.opcode('lookupBlockParam', blockParamId, path.parts);
	    } else if (!name) {
	      // Context reference, i.e. `{{foo .}}` or `{{foo ..}}`
	      this.opcode('pushContext');
	    } else if (path.data) {
	      this.options.data = true;
	      this.opcode('lookupData', path.depth, path.parts, path.strict);
	    } else {
	      this.opcode('lookupOnContext', path.parts, path.falsy, path.strict, scoped);
	    }
	  },

	  StringLiteral: function StringLiteral(string) {
	    this.opcode('pushString', string.value);
	  },

	  NumberLiteral: function NumberLiteral(number) {
	    this.opcode('pushLiteral', number.value);
	  },

	  BooleanLiteral: function BooleanLiteral(bool) {
	    this.opcode('pushLiteral', bool.value);
	  },

	  UndefinedLiteral: function UndefinedLiteral() {
	    this.opcode('pushLiteral', 'undefined');
	  },

	  NullLiteral: function NullLiteral() {
	    this.opcode('pushLiteral', 'null');
	  },

	  Hash: function Hash(hash) {
	    var pairs = hash.pairs,
	        i = 0,
	        l = pairs.length;

	    this.opcode('pushHash');

	    for (; i < l; i++) {
	      this.pushParam(pairs[i].value);
	    }
	    while (i--) {
	      this.opcode('assignToHash', pairs[i].key);
	    }
	    this.opcode('popHash');
	  },

	  // HELPERS
	  opcode: function opcode(name) {
	    this.opcodes.push({ opcode: name, args: slice.call(arguments, 1), loc: this.sourceNode[0].loc });
	  },

	  addDepth: function addDepth(depth) {
	    if (!depth) {
	      return;
	    }

	    this.useDepths = true;
	  },

	  classifySexpr: function classifySexpr(sexpr) {
	    var isSimple = _ast2['default'].helpers.simpleId(sexpr.path);

	    var isBlockParam = isSimple && !!this.blockParamIndex(sexpr.path.parts[0]);

	    // a mustache is an eligible helper if:
	    // * its id is simple (a single part, not `this` or `..`)
	    var isHelper = !isBlockParam && _ast2['default'].helpers.helperExpression(sexpr);

	    // if a mustache is an eligible helper but not a definite
	    // helper, it is ambiguous, and will be resolved in a later
	    // pass or at runtime.
	    var isEligible = !isBlockParam && (isHelper || isSimple);

	    // if ambiguous, we can possibly resolve the ambiguity now
	    // An eligible helper is one that does not have a complex path, i.e. `this.foo`, `../foo` etc.
	    if (isEligible && !isHelper) {
	      var _name2 = sexpr.path.parts[0],
	          options = this.options;

	      if (options.knownHelpers[_name2]) {
	        isHelper = true;
	      } else if (options.knownHelpersOnly) {
	        isEligible = false;
	      }
	    }

	    if (isHelper) {
	      return 'helper';
	    } else if (isEligible) {
	      return 'ambiguous';
	    } else {
	      return 'simple';
	    }
	  },

	  pushParams: function pushParams(params) {
	    for (var i = 0, l = params.length; i < l; i++) {
	      this.pushParam(params[i]);
	    }
	  },

	  pushParam: function pushParam(val) {
	    var value = val.value != null ? val.value : val.original || '';

	    if (this.stringParams) {
	      if (value.replace) {
	        value = value.replace(/^(\.?\.\/)*/g, '').replace(/\//g, '.');
	      }

	      if (val.depth) {
	        this.addDepth(val.depth);
	      }
	      this.opcode('getContext', val.depth || 0);
	      this.opcode('pushStringParam', value, val.type);

	      if (val.type === 'SubExpression') {
	        // SubExpressions get evaluated and passed in
	        // in string params mode.
	        this.accept(val);
	      }
	    } else {
	      if (this.trackIds) {
	        var blockParamIndex = undefined;
	        if (val.parts && !_ast2['default'].helpers.scopedId(val) && !val.depth) {
	          blockParamIndex = this.blockParamIndex(val.parts[0]);
	        }
	        if (blockParamIndex) {
	          var blockParamChild = val.parts.slice(1).join('.');
	          this.opcode('pushId', 'BlockParam', blockParamIndex, blockParamChild);
	        } else {
	          value = val.original || value;
	          if (value.replace) {
	            value = value.replace(/^this(?:\.|$)/, '').replace(/^\.\//, '').replace(/^\.$/, '');
	          }

	          this.opcode('pushId', val.type, value);
	        }
	      }
	      this.accept(val);
	    }
	  },

	  setupFullMustacheParams: function setupFullMustacheParams(sexpr, program, inverse, omitEmpty) {
	    var params = sexpr.params;
	    this.pushParams(params);

	    this.opcode('pushProgram', program);
	    this.opcode('pushProgram', inverse);

	    if (sexpr.hash) {
	      this.accept(sexpr.hash);
	    } else {
	      this.opcode('emptyHash', omitEmpty);
	    }

	    return params;
	  },

	  blockParamIndex: function blockParamIndex(name) {
	    for (var depth = 0, len = this.options.blockParams.length; depth < len; depth++) {
	      var blockParams = this.options.blockParams[depth],
	          param = blockParams && _utils.indexOf(blockParams, name);
	      if (blockParams && param >= 0) {
	        return [depth, param];
	      }
	    }
	  }
	};

	function precompile(input, options, env) {
	  if (input == null || typeof input !== 'string' && input.type !== 'Program') {
	    throw new _exception2['default']('You must pass a string or Handlebars AST to Handlebars.precompile. You passed ' + input);
	  }

	  options = options || {};
	  if (!('data' in options)) {
	    options.data = true;
	  }
	  if (options.compat) {
	    options.useDepths = true;
	  }

	  var ast = env.parse(input, options),
	      environment = new env.Compiler().compile(ast, options);
	  return new env.JavaScriptCompiler().compile(environment, options);
	}

	function compile(input, options, env) {
	  if (options === undefined) options = {};

	  if (input == null || typeof input !== 'string' && input.type !== 'Program') {
	    throw new _exception2['default']('You must pass a string or Handlebars AST to Handlebars.compile. You passed ' + input);
	  }

	  options = _utils.extend({}, options);
	  if (!('data' in options)) {
	    options.data = true;
	  }
	  if (options.compat) {
	    options.useDepths = true;
	  }

	  var compiled = undefined;

	  function compileInput() {
	    var ast = env.parse(input, options),
	        environment = new env.Compiler().compile(ast, options),
	        templateSpec = new env.JavaScriptCompiler().compile(environment, options, undefined, true);
	    return env.template(templateSpec);
	  }

	  // Template is only compiled on first use and cached after that point.
	  function ret(context, execOptions) {
	    if (!compiled) {
	      compiled = compileInput();
	    }
	    return compiled.call(this, context, execOptions);
	  }
	  ret._setup = function (setupOptions) {
	    if (!compiled) {
	      compiled = compileInput();
	    }
	    return compiled._setup(setupOptions);
	  };
	  ret._child = function (i, data, blockParams, depths) {
	    if (!compiled) {
	      compiled = compileInput();
	    }
	    return compiled._child(i, data, blockParams, depths);
	  };
	  return ret;
	}

	function argEquals(a, b) {
	  if (a === b) {
	    return true;
	  }

	  if (_utils.isArray(a) && _utils.isArray(b) && a.length === b.length) {
	    for (var i = 0; i < a.length; i++) {
	      if (!argEquals(a[i], b[i])) {
	        return false;
	      }
	    }
	    return true;
	  }
	}

	function transformLiteralToPath(sexpr) {
	  if (!sexpr.path.parts) {
	    var literal = sexpr.path;
	    // Casting to string here to make false and 0 literal values play nicely with the rest
	    // of the system.
	    sexpr.path = {
	      type: 'PathExpression',
	      data: false,
	      depth: 0,
	      parts: [literal.original + ''],
	      original: literal.original + '',
	      loc: literal.loc
	    };
	  }
	}

/***/ }),
/* 42 */
/***/ (function(module, exports, __webpack_require__) {

	'use strict';

	var _interopRequireDefault = __webpack_require__(1)['default'];

	exports.__esModule = true;

	var _base = __webpack_require__(4);

	var _exception = __webpack_require__(6);

	var _exception2 = _interopRequireDefault(_exception);

	var _utils = __webpack_require__(5);

	var _codeGen = __webpack_require__(43);

	var _codeGen2 = _interopRequireDefault(_codeGen);

	function Literal(value) {
	  this.value = value;
	}

	function JavaScriptCompiler() {}

	JavaScriptCompiler.prototype = {
	  // PUBLIC API: You can override these methods in a subclass to provide
	  // alternative compiled forms for name lookup and buffering semantics
	  nameLookup: function nameLookup(parent, name /* , type*/) {
	    if (name === 'constructor') {
	      return ['(', parent, '.propertyIsEnumerable(\'constructor\') ? ', parent, '.constructor : undefined', ')'];
	    }
	    if (JavaScriptCompiler.isValidJavaScriptVariableName(name)) {
	      return [parent, '.', name];
	    } else {
	      return [parent, '[', JSON.stringify(name), ']'];
	    }
	  },
	  depthedLookup: function depthedLookup(name) {
	    return [this.aliasable('container.lookup'), '(depths, "', name, '")'];
	  },

	  compilerInfo: function compilerInfo() {
	    var revision = _base.COMPILER_REVISION,
	        versions = _base.REVISION_CHANGES[revision];
	    return [revision, versions];
	  },

	  appendToBuffer: function appendToBuffer(source, location, explicit) {
	    // Force a source as this simplifies the merge logic.
	    if (!_utils.isArray(source)) {
	      source = [source];
	    }
	    source = this.source.wrap(source, location);

	    if (this.environment.isSimple) {
	      return ['return ', source, ';'];
	    } else if (explicit) {
	      // This is a case where the buffer operation occurs as a child of another
	      // construct, generally braces. We have to explicitly output these buffer
	      // operations to ensure that the emitted code goes in the correct location.
	      return ['buffer += ', source, ';'];
	    } else {
	      source.appendToBuffer = true;
	      return source;
	    }
	  },

	  initializeBuffer: function initializeBuffer() {
	    return this.quotedString('');
	  },
	  // END PUBLIC API

	  compile: function compile(environment, options, context, asObject) {
	    this.environment = environment;
	    this.options = options;
	    this.stringParams = this.options.stringParams;
	    this.trackIds = this.options.trackIds;
	    this.precompile = !asObject;

	    this.name = this.environment.name;
	    this.isChild = !!context;
	    this.context = context || {
	      decorators: [],
	      programs: [],
	      environments: []
	    };

	    this.preamble();

	    this.stackSlot = 0;
	    this.stackVars = [];
	    this.aliases = {};
	    this.registers = { list: [] };
	    this.hashes = [];
	    this.compileStack = [];
	    this.inlineStack = [];
	    this.blockParams = [];

	    this.compileChildren(environment, options);

	    this.useDepths = this.useDepths || environment.useDepths || environment.useDecorators || this.options.compat;
	    this.useBlockParams = this.useBlockParams || environment.useBlockParams;

	    var opcodes = environment.opcodes,
	        opcode = undefined,
	        firstLoc = undefined,
	        i = undefined,
	        l = undefined;

	    for (i = 0, l = opcodes.length; i < l; i++) {
	      opcode = opcodes[i];

	      this.source.currentLocation = opcode.loc;
	      firstLoc = firstLoc || opcode.loc;
	      this[opcode.opcode].apply(this, opcode.args);
	    }

	    // Flush any trailing content that might be pending.
	    this.source.currentLocation = firstLoc;
	    this.pushSource('');

	    /* istanbul ignore next */
	    if (this.stackSlot || this.inlineStack.length || this.compileStack.length) {
	      throw new _exception2['default']('Compile completed with content left on stack');
	    }

	    if (!this.decorators.isEmpty()) {
	      this.useDecorators = true;

	      this.decorators.prepend('var decorators = container.decorators;\n');
	      this.decorators.push('return fn;');

	      if (asObject) {
	        this.decorators = Function.apply(this, ['fn', 'props', 'container', 'depth0', 'data', 'blockParams', 'depths', this.decorators.merge()]);
	      } else {
	        this.decorators.prepend('function(fn, props, container, depth0, data, blockParams, depths) {\n');
	        this.decorators.push('}\n');
	        this.decorators = this.decorators.merge();
	      }
	    } else {
	      this.decorators = undefined;
	    }

	    var fn = this.createFunctionContext(asObject);
	    if (!this.isChild) {
	      var ret = {
	        compiler: this.compilerInfo(),
	        main: fn
	      };

	      if (this.decorators) {
	        ret.main_d = this.decorators; // eslint-disable-line camelcase
	        ret.useDecorators = true;
	      }

	      var _context = this.context;
	      var programs = _context.programs;
	      var decorators = _context.decorators;

	      for (i = 0, l = programs.length; i < l; i++) {
	        if (programs[i]) {
	          ret[i] = programs[i];
	          if (decorators[i]) {
	            ret[i + '_d'] = decorators[i];
	            ret.useDecorators = true;
	          }
	        }
	      }

	      if (this.environment.usePartial) {
	        ret.usePartial = true;
	      }
	      if (this.options.data) {
	        ret.useData = true;
	      }
	      if (this.useDepths) {
	        ret.useDepths = true;
	      }
	      if (this.useBlockParams) {
	        ret.useBlockParams = true;
	      }
	      if (this.options.compat) {
	        ret.compat = true;
	      }

	      if (!asObject) {
	        ret.compiler = JSON.stringify(ret.compiler);

	        this.source.currentLocation = { start: { line: 1, column: 0 } };
	        ret = this.objectLiteral(ret);

	        if (options.srcName) {
	          ret = ret.toStringWithSourceMap({ file: options.destName });
	          ret.map = ret.map && ret.map.toString();
	        } else {
	          ret = ret.toString();
	        }
	      } else {
	        ret.compilerOptions = this.options;
	      }

	      return ret;
	    } else {
	      return fn;
	    }
	  },

	  preamble: function preamble() {
	    // track the last context pushed into place to allow skipping the
	    // getContext opcode when it would be a noop
	    this.lastContext = 0;
	    this.source = new _codeGen2['default'](this.options.srcName);
	    this.decorators = new _codeGen2['default'](this.options.srcName);
	  },

	  createFunctionContext: function createFunctionContext(asObject) {
	    var varDeclarations = '';

	    var locals = this.stackVars.concat(this.registers.list);
	    if (locals.length > 0) {
	      varDeclarations += ', ' + locals.join(', ');
	    }

	    // Generate minimizer alias mappings
	    //
	    // When using true SourceNodes, this will update all references to the given alias
	    // as the source nodes are reused in situ. For the non-source node compilation mode,
	    // aliases will not be used, but this case is already being run on the client and
	    // we aren't concern about minimizing the template size.
	    var aliasCount = 0;
	    for (var alias in this.aliases) {
	      // eslint-disable-line guard-for-in
	      var node = this.aliases[alias];

	      if (this.aliases.hasOwnProperty(alias) && node.children && node.referenceCount > 1) {
	        varDeclarations += ', alias' + ++aliasCount + '=' + alias;
	        node.children[0] = 'alias' + aliasCount;
	      }
	    }

	    var params = ['container', 'depth0', 'helpers', 'partials', 'data'];

	    if (this.useBlockParams || this.useDepths) {
	      params.push('blockParams');
	    }
	    if (this.useDepths) {
	      params.push('depths');
	    }

	    // Perform a second pass over the output to merge content when possible
	    var source = this.mergeSource(varDeclarations);

	    if (asObject) {
	      params.push(source);

	      return Function.apply(this, params);
	    } else {
	      return this.source.wrap(['function(', params.join(','), ') {\n  ', source, '}']);
	    }
	  },
	  mergeSource: function mergeSource(varDeclarations) {
	    var isSimple = this.environment.isSimple,
	        appendOnly = !this.forceBuffer,
	        appendFirst = undefined,
	        sourceSeen = undefined,
	        bufferStart = undefined,
	        bufferEnd = undefined;
	    this.source.each(function (line) {
	      if (line.appendToBuffer) {
	        if (bufferStart) {
	          line.prepend('  + ');
	        } else {
	          bufferStart = line;
	        }
	        bufferEnd = line;
	      } else {
	        if (bufferStart) {
	          if (!sourceSeen) {
	            appendFirst = true;
	          } else {
	            bufferStart.prepend('buffer += ');
	          }
	          bufferEnd.add(';');
	          bufferStart = bufferEnd = undefined;
	        }

	        sourceSeen = true;
	        if (!isSimple) {
	          appendOnly = false;
	        }
	      }
	    });

	    if (appendOnly) {
	      if (bufferStart) {
	        bufferStart.prepend('return ');
	        bufferEnd.add(';');
	      } else if (!sourceSeen) {
	        this.source.push('return "";');
	      }
	    } else {
	      varDeclarations += ', buffer = ' + (appendFirst ? '' : this.initializeBuffer());

	      if (bufferStart) {
	        bufferStart.prepend('return buffer + ');
	        bufferEnd.add(';');
	      } else {
	        this.source.push('return buffer;');
	      }
	    }

	    if (varDeclarations) {
	      this.source.prepend('var ' + varDeclarations.substring(2) + (appendFirst ? '' : ';\n'));
	    }

	    return this.source.merge();
	  },

	  // [blockValue]
	  //
	  // On stack, before: hash, inverse, program, value
	  // On stack, after: return value of blockHelperMissing
	  //
	  // The purpose of this opcode is to take a block of the form
	  // `{{#this.foo}}...{{/this.foo}}`, resolve the value of `foo`, and
	  // replace it on the stack with the result of properly
	  // invoking blockHelperMissing.
	  blockValue: function blockValue(name) {
	    var blockHelperMissing = this.aliasable('helpers.blockHelperMissing'),
	        params = [this.contextName(0)];
	    this.setupHelperArgs(name, 0, params);

	    var blockName = this.popStack();
	    params.splice(1, 0, blockName);

	    this.push(this.source.functionCall(blockHelperMissing, 'call', params));
	  },

	  // [ambiguousBlockValue]
	  //
	  // On stack, before: hash, inverse, program, value
	  // Compiler value, before: lastHelper=value of last found helper, if any
	  // On stack, after, if no lastHelper: same as [blockValue]
	  // On stack, after, if lastHelper: value
	  ambiguousBlockValue: function ambiguousBlockValue() {
	    // We're being a bit cheeky and reusing the options value from the prior exec
	    var blockHelperMissing = this.aliasable('helpers.blockHelperMissing'),
	        params = [this.contextName(0)];
	    this.setupHelperArgs('', 0, params, true);

	    this.flushInline();

	    var current = this.topStack();
	    params.splice(1, 0, current);

	    this.pushSource(['if (!', this.lastHelper, ') { ', current, ' = ', this.source.functionCall(blockHelperMissing, 'call', params), '}']);
	  },

	  // [appendContent]
	  //
	  // On stack, before: ...
	  // On stack, after: ...
	  //
	  // Appends the string value of `content` to the current buffer
	  appendContent: function appendContent(content) {
	    if (this.pendingContent) {
	      content = this.pendingContent + content;
	    } else {
	      this.pendingLocation = this.source.currentLocation;
	    }

	    this.pendingContent = content;
	  },

	  // [append]
	  //
	  // On stack, before: value, ...
	  // On stack, after: ...
	  //
	  // Coerces `value` to a String and appends it to the current buffer.
	  //
	  // If `value` is truthy, or 0, it is coerced into a string and appended
	  // Otherwise, the empty string is appended
	  append: function append() {
	    if (this.isInline()) {
	      this.replaceStack(function (current) {
	        return [' != null ? ', current, ' : ""'];
	      });

	      this.pushSource(this.appendToBuffer(this.popStack()));
	    } else {
	      var local = this.popStack();
	      this.pushSource(['if (', local, ' != null) { ', this.appendToBuffer(local, undefined, true), ' }']);
	      if (this.environment.isSimple) {
	        this.pushSource(['else { ', this.appendToBuffer("''", undefined, true), ' }']);
	      }
	    }
	  },

	  // [appendEscaped]
	  //
	  // On stack, before: value, ...
	  // On stack, after: ...
	  //
	  // Escape `value` and append it to the buffer
	  appendEscaped: function appendEscaped() {
	    this.pushSource(this.appendToBuffer([this.aliasable('container.escapeExpression'), '(', this.popStack(), ')']));
	  },

	  // [getContext]
	  //
	  // On stack, before: ...
	  // On stack, after: ...
	  // Compiler value, after: lastContext=depth
	  //
	  // Set the value of the `lastContext` compiler value to the depth
	  getContext: function getContext(depth) {
	    this.lastContext = depth;
	  },

	  // [pushContext]
	  //
	  // On stack, before: ...
	  // On stack, after: currentContext, ...
	  //
	  // Pushes the value of the current context onto the stack.
	  pushContext: function pushContext() {
	    this.pushStackLiteral(this.contextName(this.lastContext));
	  },

	  // [lookupOnContext]
	  //
	  // On stack, before: ...
	  // On stack, after: currentContext[name], ...
	  //
	  // Looks up the value of `name` on the current context and pushes
	  // it onto the stack.
	  lookupOnContext: function lookupOnContext(parts, falsy, strict, scoped) {
	    var i = 0;

	    if (!scoped && this.options.compat && !this.lastContext) {
	      // The depthed query is expected to handle the undefined logic for the root level that
	      // is implemented below, so we evaluate that directly in compat mode
	      this.push(this.depthedLookup(parts[i++]));
	    } else {
	      this.pushContext();
	    }

	    this.resolvePath('context', parts, i, falsy, strict);
	  },

	  // [lookupBlockParam]
	  //
	  // On stack, before: ...
	  // On stack, after: blockParam[name], ...
	  //
	  // Looks up the value of `parts` on the given block param and pushes
	  // it onto the stack.
	  lookupBlockParam: function lookupBlockParam(blockParamId, parts) {
	    this.useBlockParams = true;

	    this.push(['blockParams[', blockParamId[0], '][', blockParamId[1], ']']);
	    this.resolvePath('context', parts, 1);
	  },

	  // [lookupData]
	  //
	  // On stack, before: ...
	  // On stack, after: data, ...
	  //
	  // Push the data lookup operator
	  lookupData: function lookupData(depth, parts, strict) {
	    if (!depth) {
	      this.pushStackLiteral('data');
	    } else {
	      this.pushStackLiteral('container.data(data, ' + depth + ')');
	    }

	    this.resolvePath('data', parts, 0, true, strict);
	  },

	  resolvePath: function resolvePath(type, parts, i, falsy, strict) {
	    // istanbul ignore next

	    var _this = this;

	    if (this.options.strict || this.options.assumeObjects) {
	      this.push(strictLookup(this.options.strict && strict, this, parts, type));
	      return;
	    }

	    var len = parts.length;
	    for (; i < len; i++) {
	      /* eslint-disable no-loop-func */
	      this.replaceStack(function (current) {
	        var lookup = _this.nameLookup(current, parts[i], type);
	        // We want to ensure that zero and false are handled properly if the context (falsy flag)
	        // needs to have the special handling for these values.
	        if (!falsy) {
	          return [' != null ? ', lookup, ' : ', current];
	        } else {
	          // Otherwise we can use generic falsy handling
	          return [' && ', lookup];
	        }
	      });
	      /* eslint-enable no-loop-func */
	    }
	  },

	  // [resolvePossibleLambda]
	  //
	  // On stack, before: value, ...
	  // On stack, after: resolved value, ...
	  //
	  // If the `value` is a lambda, replace it on the stack by
	  // the return value of the lambda
	  resolvePossibleLambda: function resolvePossibleLambda() {
	    this.push([this.aliasable('container.lambda'), '(', this.popStack(), ', ', this.contextName(0), ')']);
	  },

	  // [pushStringParam]
	  //
	  // On stack, before: ...
	  // On stack, after: string, currentContext, ...
	  //
	  // This opcode is designed for use in string mode, which
	  // provides the string value of a parameter along with its
	  // depth rather than resolving it immediately.
	  pushStringParam: function pushStringParam(string, type) {
	    this.pushContext();
	    this.pushString(type);

	    // If it's a subexpression, the string result
	    // will be pushed after this opcode.
	    if (type !== 'SubExpression') {
	      if (typeof string === 'string') {
	        this.pushString(string);
	      } else {
	        this.pushStackLiteral(string);
	      }
	    }
	  },

	  emptyHash: function emptyHash(omitEmpty) {
	    if (this.trackIds) {
	      this.push('{}'); // hashIds
	    }
	    if (this.stringParams) {
	      this.push('{}'); // hashContexts
	      this.push('{}'); // hashTypes
	    }
	    this.pushStackLiteral(omitEmpty ? 'undefined' : '{}');
	  },
	  pushHash: function pushHash() {
	    if (this.hash) {
	      this.hashes.push(this.hash);
	    }
	    this.hash = { values: [], types: [], contexts: [], ids: [] };
	  },
	  popHash: function popHash() {
	    var hash = this.hash;
	    this.hash = this.hashes.pop();

	    if (this.trackIds) {
	      this.push(this.objectLiteral(hash.ids));
	    }
	    if (this.stringParams) {
	      this.push(this.objectLiteral(hash.contexts));
	      this.push(this.objectLiteral(hash.types));
	    }

	    this.push(this.objectLiteral(hash.values));
	  },

	  // [pushString]
	  //
	  // On stack, before: ...
	  // On stack, after: quotedString(string), ...
	  //
	  // Push a quoted version of `string` onto the stack
	  pushString: function pushString(string) {
	    this.pushStackLiteral(this.quotedString(string));
	  },

	  // [pushLiteral]
	  //
	  // On stack, before: ...
	  // On stack, after: value, ...
	  //
	  // Pushes a value onto the stack. This operation prevents
	  // the compiler from creating a temporary variable to hold
	  // it.
	  pushLiteral: function pushLiteral(value) {
	    this.pushStackLiteral(value);
	  },

	  // [pushProgram]
	  //
	  // On stack, before: ...
	  // On stack, after: program(guid), ...
	  //
	  // Push a program expression onto the stack. This takes
	  // a compile-time guid and converts it into a runtime-accessible
	  // expression.
	  pushProgram: function pushProgram(guid) {
	    if (guid != null) {
	      this.pushStackLiteral(this.programExpression(guid));
	    } else {
	      this.pushStackLiteral(null);
	    }
	  },

	  // [registerDecorator]
	  //
	  // On stack, before: hash, program, params..., ...
	  // On stack, after: ...
	  //
	  // Pops off the decorator's parameters, invokes the decorator,
	  // and inserts the decorator into the decorators list.
	  registerDecorator: function registerDecorator(paramSize, name) {
	    var foundDecorator = this.nameLookup('decorators', name, 'decorator'),
	        options = this.setupHelperArgs(name, paramSize);

	    this.decorators.push(['fn = ', this.decorators.functionCall(foundDecorator, '', ['fn', 'props', 'container', options]), ' || fn;']);
	  },

	  // [invokeHelper]
	  //
	  // On stack, before: hash, inverse, program, params..., ...
	  // On stack, after: result of helper invocation
	  //
	  // Pops off the helper's parameters, invokes the helper,
	  // and pushes the helper's return value onto the stack.
	  //
	  // If the helper is not found, `helperMissing` is called.
	  invokeHelper: function invokeHelper(paramSize, name, isSimple) {
	    var nonHelper = this.popStack(),
	        helper = this.setupHelper(paramSize, name),
	        simple = isSimple ? [helper.name, ' || '] : '';

	    var lookup = ['('].concat(simple, nonHelper);
	    if (!this.options.strict) {
	      lookup.push(' || ', this.aliasable('helpers.helperMissing'));
	    }
	    lookup.push(')');

	    this.push(this.source.functionCall(lookup, 'call', helper.callParams));
	  },

	  // [invokeKnownHelper]
	  //
	  // On stack, before: hash, inverse, program, params..., ...
	  // On stack, after: result of helper invocation
	  //
	  // This operation is used when the helper is known to exist,
	  // so a `helperMissing` fallback is not required.
	  invokeKnownHelper: function invokeKnownHelper(paramSize, name) {
	    var helper = this.setupHelper(paramSize, name);
	    this.push(this.source.functionCall(helper.name, 'call', helper.callParams));
	  },

	  // [invokeAmbiguous]
	  //
	  // On stack, before: hash, inverse, program, params..., ...
	  // On stack, after: result of disambiguation
	  //
	  // This operation is used when an expression like `{{foo}}`
	  // is provided, but we don't know at compile-time whether it
	  // is a helper or a path.
	  //
	  // This operation emits more code than the other options,
	  // and can be avoided by passing the `knownHelpers` and
	  // `knownHelpersOnly` flags at compile-time.
	  invokeAmbiguous: function invokeAmbiguous(name, helperCall) {
	    this.useRegister('helper');

	    var nonHelper = this.popStack();

	    this.emptyHash();
	    var helper = this.setupHelper(0, name, helperCall);

	    var helperName = this.lastHelper = this.nameLookup('helpers', name, 'helper');

	    var lookup = ['(', '(helper = ', helperName, ' || ', nonHelper, ')'];
	    if (!this.options.strict) {
	      lookup[0] = '(helper = ';
	      lookup.push(' != null ? helper : ', this.aliasable('helpers.helperMissing'));
	    }

	    this.push(['(', lookup, helper.paramsInit ? ['),(', helper.paramsInit] : [], '),', '(typeof helper === ', this.aliasable('"function"'), ' ? ', this.source.functionCall('helper', 'call', helper.callParams), ' : helper))']);
	  },

	  // [invokePartial]
	  //
	  // On stack, before: context, ...
	  // On stack after: result of partial invocation
	  //
	  // This operation pops off a context, invokes a partial with that context,
	  // and pushes the result of the invocation back.
	  invokePartial: function invokePartial(isDynamic, name, indent) {
	    var params = [],
	        options = this.setupParams(name, 1, params);

	    if (isDynamic) {
	      name = this.popStack();
	      delete options.name;
	    }

	    if (indent) {
	      options.indent = JSON.stringify(indent);
	    }
	    options.helpers = 'helpers';
	    options.partials = 'partials';
	    options.decorators = 'container.decorators';

	    if (!isDynamic) {
	      params.unshift(this.nameLookup('partials', name, 'partial'));
	    } else {
	      params.unshift(name);
	    }

	    if (this.options.compat) {
	      options.depths = 'depths';
	    }
	    options = this.objectLiteral(options);
	    params.push(options);

	    this.push(this.source.functionCall('container.invokePartial', '', params));
	  },

	  // [assignToHash]
	  //
	  // On stack, before: value, ..., hash, ...
	  // On stack, after: ..., hash, ...
	  //
	  // Pops a value off the stack and assigns it to the current hash
	  assignToHash: function assignToHash(key) {
	    var value = this.popStack(),
	        context = undefined,
	        type = undefined,
	        id = undefined;

	    if (this.trackIds) {
	      id = this.popStack();
	    }
	    if (this.stringParams) {
	      type = this.popStack();
	      context = this.popStack();
	    }

	    var hash = this.hash;
	    if (context) {
	      hash.contexts[key] = context;
	    }
	    if (type) {
	      hash.types[key] = type;
	    }
	    if (id) {
	      hash.ids[key] = id;
	    }
	    hash.values[key] = value;
	  },

	  pushId: function pushId(type, name, child) {
	    if (type === 'BlockParam') {
	      this.pushStackLiteral('blockParams[' + name[0] + '].path[' + name[1] + ']' + (child ? ' + ' + JSON.stringify('.' + child) : ''));
	    } else if (type === 'PathExpression') {
	      this.pushString(name);
	    } else if (type === 'SubExpression') {
	      this.pushStackLiteral('true');
	    } else {
	      this.pushStackLiteral('null');
	    }
	  },

	  // HELPERS

	  compiler: JavaScriptCompiler,

	  compileChildren: function compileChildren(environment, options) {
	    var children = environment.children,
	        child = undefined,
	        compiler = undefined;

	    for (var i = 0, l = children.length; i < l; i++) {
	      child = children[i];
	      compiler = new this.compiler(); // eslint-disable-line new-cap

	      var existing = this.matchExistingProgram(child);

	      if (existing == null) {
	        this.context.programs.push(''); // Placeholder to prevent name conflicts for nested children
	        var index = this.context.programs.length;
	        child.index = index;
	        child.name = 'program' + index;
	        this.context.programs[index] = compiler.compile(child, options, this.context, !this.precompile);
	        this.context.decorators[index] = compiler.decorators;
	        this.context.environments[index] = child;

	        this.useDepths = this.useDepths || compiler.useDepths;
	        this.useBlockParams = this.useBlockParams || compiler.useBlockParams;
	        child.useDepths = this.useDepths;
	        child.useBlockParams = this.useBlockParams;
	      } else {
	        child.index = existing.index;
	        child.name = 'program' + existing.index;

	        this.useDepths = this.useDepths || existing.useDepths;
	        this.useBlockParams = this.useBlockParams || existing.useBlockParams;
	      }
	    }
	  },
	  matchExistingProgram: function matchExistingProgram(child) {
	    for (var i = 0, len = this.context.environments.length; i < len; i++) {
	      var environment = this.context.environments[i];
	      if (environment && environment.equals(child)) {
	        return environment;
	      }
	    }
	  },

	  programExpression: function programExpression(guid) {
	    var child = this.environment.children[guid],
	        programParams = [child.index, 'data', child.blockParams];

	    if (this.useBlockParams || this.useDepths) {
	      programParams.push('blockParams');
	    }
	    if (this.useDepths) {
	      programParams.push('depths');
	    }

	    return 'container.program(' + programParams.join(', ') + ')';
	  },

	  useRegister: function useRegister(name) {
	    if (!this.registers[name]) {
	      this.registers[name] = true;
	      this.registers.list.push(name);
	    }
	  },

	  push: function push(expr) {
	    if (!(expr instanceof Literal)) {
	      expr = this.source.wrap(expr);
	    }

	    this.inlineStack.push(expr);
	    return expr;
	  },

	  pushStackLiteral: function pushStackLiteral(item) {
	    this.push(new Literal(item));
	  },

	  pushSource: function pushSource(source) {
	    if (this.pendingContent) {
	      this.source.push(this.appendToBuffer(this.source.quotedString(this.pendingContent), this.pendingLocation));
	      this.pendingContent = undefined;
	    }

	    if (source) {
	      this.source.push(source);
	    }
	  },

	  replaceStack: function replaceStack(callback) {
	    var prefix = ['('],
	        stack = undefined,
	        createdStack = undefined,
	        usedLiteral = undefined;

	    /* istanbul ignore next */
	    if (!this.isInline()) {
	      throw new _exception2['default']('replaceStack on non-inline');
	    }

	    // We want to merge the inline statement into the replacement statement via ','
	    var top = this.popStack(true);

	    if (top instanceof Literal) {
	      // Literals do not need to be inlined
	      stack = [top.value];
	      prefix = ['(', stack];
	      usedLiteral = true;
	    } else {
	      // Get or create the current stack name for use by the inline
	      createdStack = true;
	      var _name = this.incrStack();

	      prefix = ['((', this.push(_name), ' = ', top, ')'];
	      stack = this.topStack();
	    }

	    var item = callback.call(this, stack);

	    if (!usedLiteral) {
	      this.popStack();
	    }
	    if (createdStack) {
	      this.stackSlot--;
	    }
	    this.push(prefix.concat(item, ')'));
	  },

	  incrStack: function incrStack() {
	    this.stackSlot++;
	    if (this.stackSlot > this.stackVars.length) {
	      this.stackVars.push('stack' + this.stackSlot);
	    }
	    return this.topStackName();
	  },
	  topStackName: function topStackName() {
	    return 'stack' + this.stackSlot;
	  },
	  flushInline: function flushInline() {
	    var inlineStack = this.inlineStack;
	    this.inlineStack = [];
	    for (var i = 0, len = inlineStack.length; i < len; i++) {
	      var entry = inlineStack[i];
	      /* istanbul ignore if */
	      if (entry instanceof Literal) {
	        this.compileStack.push(entry);
	      } else {
	        var stack = this.incrStack();
	        this.pushSource([stack, ' = ', entry, ';']);
	        this.compileStack.push(stack);
	      }
	    }
	  },
	  isInline: function isInline() {
	    return this.inlineStack.length;
	  },

	  popStack: function popStack(wrapped) {
	    var inline = this.isInline(),
	        item = (inline ? this.inlineStack : this.compileStack).pop();

	    if (!wrapped && item instanceof Literal) {
	      return item.value;
	    } else {
	      if (!inline) {
	        /* istanbul ignore next */
	        if (!this.stackSlot) {
	          throw new _exception2['default']('Invalid stack pop');
	        }
	        this.stackSlot--;
	      }
	      return item;
	    }
	  },

	  topStack: function topStack() {
	    var stack = this.isInline() ? this.inlineStack : this.compileStack,
	        item = stack[stack.length - 1];

	    /* istanbul ignore if */
	    if (item instanceof Literal) {
	      return item.value;
	    } else {
	      return item;
	    }
	  },

	  contextName: function contextName(context) {
	    if (this.useDepths && context) {
	      return 'depths[' + context + ']';
	    } else {
	      return 'depth' + context;
	    }
	  },

	  quotedString: function quotedString(str) {
	    return this.source.quotedString(str);
	  },

	  objectLiteral: function objectLiteral(obj) {
	    return this.source.objectLiteral(obj);
	  },

	  aliasable: function aliasable(name) {
	    var ret = this.aliases[name];
	    if (ret) {
	      ret.referenceCount++;
	      return ret;
	    }

	    ret = this.aliases[name] = this.source.wrap(name);
	    ret.aliasable = true;
	    ret.referenceCount = 1;

	    return ret;
	  },

	  setupHelper: function setupHelper(paramSize, name, blockHelper) {
	    var params = [],
	        paramsInit = this.setupHelperArgs(name, paramSize, params, blockHelper);
	    var foundHelper = this.nameLookup('helpers', name, 'helper'),
	        callContext = this.aliasable(this.contextName(0) + ' != null ? ' + this.contextName(0) + ' : (container.nullContext || {})');

	    return {
	      params: params,
	      paramsInit: paramsInit,
	      name: foundHelper,
	      callParams: [callContext].concat(params)
	    };
	  },

	  setupParams: function setupParams(helper, paramSize, params) {
	    var options = {},
	        contexts = [],
	        types = [],
	        ids = [],
	        objectArgs = !params,
	        param = undefined;

	    if (objectArgs) {
	      params = [];
	    }

	    options.name = this.quotedString(helper);
	    options.hash = this.popStack();

	    if (this.trackIds) {
	      options.hashIds = this.popStack();
	    }
	    if (this.stringParams) {
	      options.hashTypes = this.popStack();
	      options.hashContexts = this.popStack();
	    }

	    var inverse = this.popStack(),
	        program = this.popStack();

	    // Avoid setting fn and inverse if neither are set. This allows
	    // helpers to do a check for `if (options.fn)`
	    if (program || inverse) {
	      options.fn = program || 'container.noop';
	      options.inverse = inverse || 'container.noop';
	    }

	    // The parameters go on to the stack in order (making sure that they are evaluated in order)
	    // so we need to pop them off the stack in reverse order
	    var i = paramSize;
	    while (i--) {
	      param = this.popStack();
	      params[i] = param;

	      if (this.trackIds) {
	        ids[i] = this.popStack();
	      }
	      if (this.stringParams) {
	        types[i] = this.popStack();
	        contexts[i] = this.popStack();
	      }
	    }

	    if (objectArgs) {
	      options.args = this.source.generateArray(params);
	    }

	    if (this.trackIds) {
	      options.ids = this.source.generateArray(ids);
	    }
	    if (this.stringParams) {
	      options.types = this.source.generateArray(types);
	      options.contexts = this.source.generateArray(contexts);
	    }

	    if (this.options.data) {
	      options.data = 'data';
	    }
	    if (this.useBlockParams) {
	      options.blockParams = 'blockParams';
	    }
	    return options;
	  },

	  setupHelperArgs: function setupHelperArgs(helper, paramSize, params, useRegister) {
	    var options = this.setupParams(helper, paramSize, params);
	    options = this.objectLiteral(options);
	    if (useRegister) {
	      this.useRegister('options');
	      params.push('options');
	      return ['options=', options];
	    } else if (params) {
	      params.push(options);
	      return '';
	    } else {
	      return options;
	    }
	  }
	};

	(function () {
	  var reservedWords = ('break else new var' + ' case finally return void' + ' catch for switch while' + ' continue function this with' + ' default if throw' + ' delete in try' + ' do instanceof typeof' + ' abstract enum int short' + ' boolean export interface static' + ' byte extends long super' + ' char final native synchronized' + ' class float package throws' + ' const goto private transient' + ' debugger implements protected volatile' + ' double import public let yield await' + ' null true false').split(' ');

	  var compilerWords = JavaScriptCompiler.RESERVED_WORDS = {};

	  for (var i = 0, l = reservedWords.length; i < l; i++) {
	    compilerWords[reservedWords[i]] = true;
	  }
	})();

	JavaScriptCompiler.isValidJavaScriptVariableName = function (name) {
	  return !JavaScriptCompiler.RESERVED_WORDS[name] && /^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(name);
	};

	function strictLookup(requireTerminal, compiler, parts, type) {
	  var stack = compiler.popStack(),
	      i = 0,
	      len = parts.length;
	  if (requireTerminal) {
	    len--;
	  }

	  for (; i < len; i++) {
	    stack = compiler.nameLookup(stack, parts[i], type);
	  }

	  if (requireTerminal) {
	    return [compiler.aliasable('container.strict'), '(', stack, ', ', compiler.quotedString(parts[i]), ')'];
	  } else {
	    return stack;
	  }
	}

	exports['default'] = JavaScriptCompiler;
	module.exports = exports['default'];

/***/ }),
/* 43 */
/***/ (function(module, exports, __webpack_require__) {

	/* global define */
	'use strict';

	exports.__esModule = true;

	var _utils = __webpack_require__(5);

	var SourceNode = undefined;

	try {
	  /* istanbul ignore next */
	  if (false) {
	    // We don't support this in AMD environments. For these environments, we asusme that
	    // they are running on the browser and thus have no need for the source-map library.
	    var SourceMap = require('source-map');
	    SourceNode = SourceMap.SourceNode;
	  }
	} catch (err) {}
	/* NOP */

	/* istanbul ignore if: tested but not covered in istanbul due to dist build  */
	if (!SourceNode) {
	  SourceNode = function (line, column, srcFile, chunks) {
	    this.src = '';
	    if (chunks) {
	      this.add(chunks);
	    }
	  };
	  /* istanbul ignore next */
	  SourceNode.prototype = {
	    add: function add(chunks) {
	      if (_utils.isArray(chunks)) {
	        chunks = chunks.join('');
	      }
	      this.src += chunks;
	    },
	    prepend: function prepend(chunks) {
	      if (_utils.isArray(chunks)) {
	        chunks = chunks.join('');
	      }
	      this.src = chunks + this.src;
	    },
	    toStringWithSourceMap: function toStringWithSourceMap() {
	      return { code: this.toString() };
	    },
	    toString: function toString() {
	      return this.src;
	    }
	  };
	}

	function castChunk(chunk, codeGen, loc) {
	  if (_utils.isArray(chunk)) {
	    var ret = [];

	    for (var i = 0, len = chunk.length; i < len; i++) {
	      ret.push(codeGen.wrap(chunk[i], loc));
	    }
	    return ret;
	  } else if (typeof chunk === 'boolean' || typeof chunk === 'number') {
	    // Handle primitives that the SourceNode will throw up on
	    return chunk + '';
	  }
	  return chunk;
	}

	function CodeGen(srcFile) {
	  this.srcFile = srcFile;
	  this.source = [];
	}

	CodeGen.prototype = {
	  isEmpty: function isEmpty() {
	    return !this.source.length;
	  },
	  prepend: function prepend(source, loc) {
	    this.source.unshift(this.wrap(source, loc));
	  },
	  push: function push(source, loc) {
	    this.source.push(this.wrap(source, loc));
	  },

	  merge: function merge() {
	    var source = this.empty();
	    this.each(function (line) {
	      source.add(['  ', line, '\n']);
	    });
	    return source;
	  },

	  each: function each(iter) {
	    for (var i = 0, len = this.source.length; i < len; i++) {
	      iter(this.source[i]);
	    }
	  },

	  empty: function empty() {
	    var loc = this.currentLocation || { start: {} };
	    return new SourceNode(loc.start.line, loc.start.column, this.srcFile);
	  },
	  wrap: function wrap(chunk) {
	    var loc = arguments.length <= 1 || arguments[1] === undefined ? this.currentLocation || { start: {} } : arguments[1];

	    if (chunk instanceof SourceNode) {
	      return chunk;
	    }

	    chunk = castChunk(chunk, this, loc);

	    return new SourceNode(loc.start.line, loc.start.column, this.srcFile, chunk);
	  },

	  functionCall: function functionCall(fn, type, params) {
	    params = this.generateList(params);
	    return this.wrap([fn, type ? '.' + type + '(' : '(', params, ')']);
	  },

	  quotedString: function quotedString(str) {
	    return '"' + (str + '').replace(/\\/g, '\\\\').replace(/"/g, '\\"').replace(/\n/g, '\\n').replace(/\r/g, '\\r').replace(/\u2028/g, '\\u2028') // Per Ecma-262 7.3 + 7.8.4
	    .replace(/\u2029/g, '\\u2029') + '"';
	  },

	  objectLiteral: function objectLiteral(obj) {
	    var pairs = [];

	    for (var key in obj) {
	      if (obj.hasOwnProperty(key)) {
	        var value = castChunk(obj[key], this);
	        if (value !== 'undefined') {
	          pairs.push([this.quotedString(key), ':', value]);
	        }
	      }
	    }

	    var ret = this.generateList(pairs);
	    ret.prepend('{');
	    ret.add('}');
	    return ret;
	  },

	  generateList: function generateList(entries) {
	    var ret = this.empty();

	    for (var i = 0, len = entries.length; i < len; i++) {
	      if (i) {
	        ret.add(',');
	      }

	      ret.add(castChunk(entries[i], this));
	    }

	    return ret;
	  },

	  generateArray: function generateArray(entries) {
	    var ret = this.generateList(entries);
	    ret.prepend('[');
	    ret.add(']');

	    return ret;
	  }
	};

	exports['default'] = CodeGen;
	module.exports = exports['default'];

/***/ })
/******/ ])
});
;
if(!DailyKos) var DailyKos = {};

DailyKos.Recommend = (function() {	
	return {
		init: function() {
			
			$(".sharetools").on("click", ".recommend", function() {
				if($(this).hasClass("inactive")) {
					// Logic here to show login prompt
				} else if($(this).hasClass("requesting")) {
					// Do Nothing, already recommended and unrecommended or in middle of request

				} else if($(this).hasClass("unrecommend")) {
					$(this).addClass("requesting");
					$.post("/stories/" + $(this).parents(".story").data("story_id") + "/unrecommend.js", { dataType: 'script' });
				} else {
					$(this).addClass("requesting");
					$.post("/stories/" + $(this).parents(".story").data("story_id") + "/recommend.js", { dataType: 'script' });	
				}
				return false;
			});
		}
	};
}());

$(document).ready(function() {
	DailyKos.Recommend.init();
});
// Generated by CoffeeScript 1.7.1
(function() {
  var autoLink,
    __slice = [].slice;

  autoLink = function() {
    var k, linkAttributes, option, options, pattern, v;
    options = 1 <= arguments.length ? __slice.call(arguments, 0) : [];

    pattern = /(^|[\s\n]|<br\/?>)((?:https?|ftp):\/\/[\-A-Z0-9+\u0026\u2019@#\/%?=()~_|!:,.;]*[\-A-Z0-9+\u0026@#\/%=~()_|])/gi;
    if (!(options.length > 0)) {
      return this.replace(pattern, "$1<a href='$2'>$2</a>");
    }
    option = options[0];
    linkAttributes = ((function() {
      var _results;
      _results = [];
      for (k in option) {
        v = option[k];
        if (k !== 'callback') {
          _results.push(" " + k + "='" + v + "'");
        }
      }
      return _results;
    })()).join('');
    return this.replace(pattern, function(match, space, url) {
      var link;
      link = (typeof option.callback === "function" ? option.callback(url) : void 0) || ("<a href='" + url + "'" + linkAttributes + ">" + url + "</a>");
      return "" + space + link;
    });
  };

  String.prototype['autoLink'] = autoLink;

}).call(this);

(function(){

  DailyKos.TextHelpers = {
    // Takes plain text, if text matches a url, it creates anchor tags around it.
    //
    // Usage:
    // linkify(plaintext)
    // linkify(plaintext, shortenAnchor)
    //
    // Example:
    // linkify('Visit www.foo.com')
    // => Visit <a href='http://www.foo.com'>www.foo.com</a>
    //
    //
    // If 'shortenAnchor' is true, the link text will be abbreviated as FQDN.
    // Example:
    // linkify('Visit http://www.foo.com/long/url/here', true)
    // => Visit <a href='http://www.foo.com/long/url/here'>www.foo.com/...</a>
    linkify:                linkify,

    // Given a full url string, returns only the fqdn part of the url.
    //
    // Usage:
    // getFqdn(plaintext)
    //
    // Example:
    // fqdn('http://www.google.com/long/url/here')
    // => www.google.com
    getFqdn:                getFqdn,

    // Convert to https
    // http://foo.com/bar => https://foo.com/bar
    urlToHttps:             urlToHttps,

    // Given a string that contains an anchor tag, returns the link text shortened to the FQDN
    //
    // Usage:
    // shortenAnchorText(plaintext)
    //
    // Example:
    // shortenAnchorText('Visit <a href="http://foo.com/loo/fah">http://foo.com/loo/fah</a>')
    // => Visit <a href="http://foo.com/loo/fah">foo.com/...</a>
    shortenAnchorText:      shortenAnchorText,

    // Given escaped html, returns unescaped html
    unescapeHtml:           unescapeHtml,
  };

return;

  function linkify(text, shortenAnchor) {
    text = text.autoLink({target: "_blank", rel: "nofollow" });

    if (shortenAnchor)
      text = shortenAnchorText(text);

    return text;
  }

  function shortenAnchorText(text) {
    var replaceLinkWithFqdn = function(){
      var url, fqdn, isTruncated, urlSplit;

      url  = this.innerText;
      fqdn = getFqdn(this.innerText);

      if (fqdn === url) return;

      // if url got truncated by 'getFqdn', show ellipses
      urlSplit    = url.split(fqdn + '/');
      isTruncated = (urlSplit.length > 1) && (urlSplit[1] !== '');
      if (isTruncated) fqdn += '/...';

      this.innerText = fqdn;
    };

    text = $('<div>').html(text);
    text.find('a').each(replaceLinkWithFqdn);
    text = text.html();

    return text;
  }

  function getFqdn(text) {
    var fqdn;

    var re1 ='.*?';  // Non-greedy match on filler
    var re2 ='((?:[a-z][a-z\\.\\d\\-]+)\\.(?:[a-z][a-z\\-]+))(?![\\w\\.])';  // get fully qualified domain name of url
    var p = new RegExp(re1+re2,["i"]);
    var m = p.exec(text);

    if (m) fqdn = m[1] || m[0];

    return fqdn || text; // fqdn or fallback
  }

  function urlToHttps (url) {
    return url && url.replace(/^http:\/\//i, 'https://');
  }

  function unescapeHtml (html) {
    if (!html) return html;

    var isEncoded = /&lt;|&gt;/i;

    if (!isEncoded.test(html)) return html;

    return $('<textarea>').html(html).text();
  }
})();
if (!DailyKos.CKE) DailyKos.CKE = {};

// Creates the jQuery helper function ckeInline.
// Usage: $('textarea').ckeInline();
// This creates an inline CKEditor.
$.fn.ckeInline = function() {
  var textareas = this;
  textareas.each(function(i, textarea){
    try {
      var ckeEditor = CKEDITOR.inline(textarea);
      // When clicking away from CKEditor
      // copy contents from cke to textarea.
      ckeEditor.on('blur', function(e){ e.sender.updateElement(); });
      // Set data on textarea so we can retrieve the
      // editor later by using $('textarea').ckeditorGet();
      $(textarea).data('ckeditorInstance', ckeEditor);
    } catch (e) {
      console.log(e);    // The editor instance "editor1" is already attached to the provided element.
      console.log(this); // ... And here's the element
    }
  });

  return this;
};
/* globals $ _ */

if(!DailyKos) var DailyKos = {};

DailyKos.Embeds = (function () {
  /* filter the content from the paste event in ckeditor
   * return the unescaped content if everything in the paste
   * passes the filters.
   */
  var errorMessages = {
    filterErrors:[],
    dimensionErrors:[],
    srcErrors: [],
    imgErrors: [],
    dimensionErrorMsg: function() {
      return "The following iframe(s) do not meet the minimum" +
      " dimensions and have been removed from your story: \r\n" +
      this.dimensionErrors.join("\r\n") + "\r\n\r\n";
    },
    srcErrorMsg: function() {
      return "The following iframe(s) were not allowed because they" +
        " do not have a src attribute: \r\n" +
        this.srcErrors.join("\r\n") + "\r\n\r\n";
    },
    filterErrorMsg: function() {
      var msg;

      if (DailyKos.canEvadeImageWhitelist()) {
        msg = "Warning: You're pasting in " + this.filterErrors.length +
          " non-whitelisted iframe(s): \r\n" + this.filterErrors.join("\r\n") + "\r\n\r\n";
        } else {
          msg = this.filterErrors.length + " non-whitelisted iframe(s) " +
          "have been removed from your story: \r\n" +
          this.filterErrors.join("\r\n") + "\r\n\r\n";
        }

      return msg;
    },
    imageErrorMsg: function() {
      var msg;

      if (DailyKos.canEvadeImageWhitelist()) {
        msg = "Warning: You're pasting in " + this.imgErrors.length +
          " non-whitelisted image(s): \r\n" + this.imgErrors.join("\r\n") + "\r\n\r\n";
        } else {
          msg = this.imgErrors.length + " non-whitelisted image(s) " +
          "have been removed from your story: \r\n" +
          this.imgErrors.join("\r\n") + "\r\n\r\n";
        }

      return msg;
    },
    reset: function() {
      _.each(this.errorHandlers, function(handler) {
          handler.errStorage.call(errorMessages).length = 0;
      });

      return false;
    },
    errorsPresent: function() {
      return _.any(this.errorHandlers, function(handler) {
        return handler.errStorage.call(errorMessages).length > 0;
      });
    },
    alertErrors: function() {
      var msg="";

      _.each(this.errorHandlers, function(handler) {
        if(handler.errStorage.call(errorMessages).length > 0) {
          msg += handler.errMessage.call(errorMessages);
        }
      });

      this.reset();
      alert(msg);
    },
    errorHandlers: [
                     { errStorage: function() { return this.srcErrors },
                       errMessage: function() { return this.srcErrorMsg() }},
                     { errStorage: function() { return this.filterErrors },
                       errMessage: function() { return this.filterErrorMsg() }},
                     { errStorage: function() { return this.dimensionErrors },
                       errMessage: function() { return this.dimensionErrorMsg() }},
                     { errStorage: function() { return this.imgErrors },
                       errMessage: function() { return this.imageErrorMsg() }}
                    ]
  };

  // In Internet Explorer, when an embed URL is pasted into CKE, such as:
  //   https://www.youtube.com/watch?v=dQw4w9WgXcQ
  // The URL is automatically hyperlinked by Internet Explorer to become:
  //   <a href='https://www.youtube.com/watch?v=dQw4w9WgXcQ'>
  //     https://www.youtube.com/watch?v=dQw4w9WgXcQ
  //   </a>
  //
  // This happens in other situations also, such as when copying the URL from chrome's address bar
  // and pasting it into CKE within Safari.
  //
  // Since this breaks the embed, this function unlinks the hyperlink and returns just the URL:
  // - if the user is pasting exactly one hyperlink (e.g. "<a href=...>...</a>")
  // - then return just the link (e.g. "https://www.youtube.com/watch?v=dQw4w9WgXcQ")
  // - otherwise, return the original pasted data
  function unlink(pasteData) {
    var paste = $('<div>').html(pasteData);
    var anchor = paste.find('a:not(.dk-action-link)');

    if (anchor.length !== 1) return pasteData; // is there exactly one anchor tag?
    if (anchor[0].outerHTML !== paste[0].innerHTML) return pasteData; // does the paste consist of just that anchor tag?

    return anchor.attr('href');
  }

  function filterPasteContent(pasteData, ed) {
    var decoded, iframes, images, links, scripts, spans, tweets, instagrams, petitions;

    pasteData = unlink(pasteData);

    //process links, render tweets and instagrams
    pasteData = renderLinkedContent(pasteData, ed);

    $div  = $('<div />');
    $div.html(_.unescape(pasteData).trim());

    decoded = $div.html();

    var $divCopy = $div.clone();

    iframes = $divCopy.find('iframe');
    images  = $divCopy.find('img');
    scripts = $divCopy.find('script');
    spans   = $divCopy.find('span');
    tweets  = $divCopy.find('blockquote.twitter-tweet');
    petitions = $divCopy.find('.dk-action-embed');
    instagrams = $divCopy.find('blockquote.instagram-media');
    elections = $divCopy.find('div[id*=ap_widget_container]');
    styles  = $divCopy.find('style');

    if(spanConversionNeeded(spans)) {
      decoded = $(spans[0]).html();
    }

    if(scriptConversionNeeded(scripts)) {
      decoded = convertScript(scripts[0]);
      $div.html(decoded);
    }

    decoded = replaceNodes($div, 'script', scripts, { replaceFunction: function(tempNode) {
       return "";
    }});

    decoded = replaceNodes($div, 'style', styles, { replaceFunction: function(tempNode) {
       return "";
    }});

    decoded = replaceNodes($div, 'iframe', iframes, { replaceFunction: function(tempNode) {
       return wrappedIframe(tempNode, false);
      },
      validator: function(iframe) {
        return validateIframe(iframe);
      }
    });

    ifHttpImagesNotifyUser(images);

    decoded = replaceNodes($div, 'img', images, { replaceFunction: function (tempNode) {
        return imgToHttps(tempNode);
      },
      onFailedValidation: function (img, removedElement) {
        var $img   = $(img);
        var $cke   = $img.closest('.cke_widget_wrapper');
        var $image = ($cke.length) ? $cke : $img;

        $image.replaceWith(removedElement);
      },
      validator: function(image) {
        return validateImage(image);
      }
    });

    $div.find('figure').each(function () {
      changeFigureToHttps(this);
    });

    decoded = replaceNodes($div, 'blockquote.twitter-tweet', tweets, { replaceFunction: function(tempNode) {
       return wrappedTweet(tempNode.outerHTML);
    }});

    decoded = replaceNodes($div, 'blockquote.instagram-media', instagrams, { replaceFunction: function(tempNode) {
       return DK.Instagram.wrappedInstagram(tempNode.outerHTML);
    }});

    decoded = replaceNodes($div, '.dk-action-embed', petitions, {replaceFunction: petitionLink});

    if (errorMessages.errorsPresent()) {
      errorMessages.alertErrors();
    }

    return decoded;
  };

  function changeFigureToHttps (figure) {
    try {
      var encodedBlob = figure.getAttribute('data-cke-widget-data');
      var data = JSON.parse(decodeURIComponent(encodedBlob));

      data.src = DK.TextHelpers.urlToHttps(data.src);

      figure.setAttribute('data-cke-widget-data', encodeURIComponent(JSON.stringify(data)));
    } catch (e) {
      console.error('Unable to convert figure to https.');
    }
  }

  function imgToHttps (img) {
    try {
      var src = DK.TextHelpers.urlToHttps(img.getAttribute('src'));

      img.setAttribute('src', src);
      img.setAttribute('data-cke-saved-src', src);
    } catch (e) {
      console.error('Unable to convert image to https.');
    }

    return img;
  }

  function ifHttpImagesNotifyUser (images) {
    var isHttp = _.some(images, function (img) {
      var imgsrc = (img.src || '').trim();

      return imgsrc.indexOf('http://') === 0;
    });

    if (isHttp) {
      alert("You have inserted an image with an HTTP url. We have upgraded the url for the image to HTTPS, for added security. If you don't see your image, please use an image host that supports HTTPS.");
    }
  }

  function unwrapPastedText(html) {
    var $html = $('<div>').html(html);
    var $wrap = $html.find('>');

    return ($wrap.length === 1)
      ? $html.text()
      : html;
  }

  function renderLinkedContent (pasteData, ed) {
    var result;

    var normalized = unwrapPastedText(pasteData);

    if (pastedLink(normalized)) {
      if (pastedTweet(normalized)) {
        return insertOembedTweet(normalized, ed);
      } else if (imageExtensionPresent(normalized)) {
        return createImageTag(normalized);
      } else if (normalized !== (result = replaceIframeLink(normalized))) {
        return result;
      } else if (result = DK.Instagram.getIDFromURL(normalized)) {
        DK.Instagram.insertInstagram(result, ed);
        return '';
      } else {
        return DailyKos.TextHelpers.linkify(normalized, true);
      }
    }

    return pasteData;
  }

  function replaceNodes($div, selector, nodeList, opts) {
    var tempNode, $tempNodes = $('<div />');
    var removedElement = "<p><strong>Element removed</strong></p>";

    if(nodeList.length < 1) return $div.html();

    $div.find(selector).each(function(index, element) {
      tempNode = nodeList[index];
      // retreive the children of the div that contains iframe wrapper elements

      if(!opts['validator'] || opts['validator'].call(this, element)) {
        $tempNodes.
          html(opts['replaceFunction'].
          call(this, tempNode))

        $(this).replaceWith($tempNodes.children());
      } else {
        if (opts.onFailedValidation) {
          opts.onFailedValidation(element, removedElement);
        } else {
          $tempNodes.html(removedElement);
          $(this).replaceWith($tempNodes.children());
        }
      }
    });

    return $div.html();
  }

  function isTweetEmbed(blockquotes) {
    return blockquotes.length === 1  &&
      blockquotes[0].attr("class") === "twitter-tweet";
  }

  function validateIframe(iframe) {
    return iframeSrc(iframe) && iframeFilterMismatch(iframe); // iframeDimensionsValid(iframe);
  };

  function iframeSrc(iframe) {
    if(!$(iframe).attr('src')) {
      errorMessages.srcErrors.push(truncateError(iframe.outerHTML));
      return false;
    }

    return true;
  }

  function iframeFilterMismatch(iframe) {

    var iframeFilter = /youtube(?:-nocookie)?\.com|player\.vimeo\.com|embed\.gettyimages\.com|soundcloud\.com|storify\.com|google\.com|scribd\.com|media\.mtvnservices\.com|player\.theplatform\.com|elections\.huffingtonpost\.com|staging\.dailykoselections\.com|elections\.dailykos\.com|dailykos(:?beta|-test)?\.(?:com|local)|civiqs\.com|libsyn\.com|flickr\.com|facebook\.com|elections.ap\.org/;
    var filterMatch = $(iframe).attr('src').match(iframeFilter);

    if (!filterMatch) {
      errorMessages.filterErrors.push(truncateError($(iframe).attr('src')));
    }

    return filterMatch || DailyKos.canEvadeImageWhitelist();
  }

  function iframeDimensionsValid(iframe) {
    var dimensionsAllowed = parseInt($(iframe).attr('height')) >= 45 && parseInt($(iframe).attr('width')) >= 50;

    if (!dimensionsAllowed) {
      errorMessages.dimensionErrors.push(truncateError($(iframe).attr('src')));
    }

    return dimensionsAllowed;
  }

  function truncateError(data) {
    return data.length > 99 ? data.substring(0, 99) + ". . ." : data
  }

  function validateImage(image) {
    var imgSrc = $(image).attr('src');

    if (skipImageValidation(imgSrc)) return true;

    var hostMatch = imageHostMatch(imgSrc);

    if(!hostMatch) {
      errorMessages.imgErrors.push(imgSrc);
    }

    return hostMatch || DailyKos.canEvadeImageWhitelist();
  }

  function skipImageValidation(imgSrc) {
    var dragHandle = "data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==";

    return (imgSrc === dragHandle);
  }

  function imageHostMatch(imgSrc) {
    var imageFilter;
    if(!imgSrc) return false;

    imageFilter = /secure\.actblue\.com|imageshack\.us|photobucket\.com|flickr\.com|smugmug\.com|allyoucanupload\.com|yearlykosconvention\.org|picturetrail\.com|me\.com|webshots\.com|editgrid\.com|coinkitty\.net| actblue\.com|tinypic\.com|skitch\.com|mac\.com|google\.com|googleusercontent\.com|twitpic\.com|twimg\.com|dropbox\.com|imgur\.com|yimg\.com|imageshack\.com|public\.tableausoftware\.com|narcosphere\.narconews\.com|fastly\.net|dailykos\.com|dailykosbeta\.com|dkstage\.com/;

    return imgSrc.match(imageFilter);
  };

  function imageExtensionPresent(imageSrc) {
    return imageSrc.match(/\.(?:jpg|jpeg|bmp|tiff|png|gif)/i);
  };

  function createImageTag(imageSrc) {
    return "<img src='" + imageSrc + "'>";
  };

  /* For some embed providers (like youTube), it's easy to get the
   * embed code from the url. For others, like storify, that don't
   * support oembed, we can get it from the url. Otherwise, use oembed
   * if supported.
   *
   * First, we search for matching `urlSchemes` against the user-provided link.
   * When a match is found, we regex-capture the embed ID of the link using `templateRegex`.
   * Finally, we inject the ID into the `iframeTemplate`.
   *
   * `templateRegex` and `iframeTemplate` always come in corresponding pairs.
   *
   * When an embed code has multiple templateRegexes (because the provider changed the embed code format),
   * we define multiple templateRegexes in a `templates` object that we iterate through to search for a match.
   * Once a match is found, we regex capture and inject the ID into the corresponding `iframeTemplate`.
   */

  // Called on paste
  // Embed-rendering on paste #zxcv
  function replaceIframeLink(link) {
    var iframe, $iframe, iframeURL, embedProvider, embedProviders, regExp, urlResult;

    /* regexes based on
     * https://github.com/starfishmod/jquery-oembed-all/blob/master/jquery.oembed.js
     */
    embedProviders = {
      facebook: {
        urlSchemes: ["facebook.com\/.+\/video.+"],
        providerName: "facebook",
        isVideoProvider: true
      },
      youTube: {
        urlSchemes: ["youtube\\.com/watch.+v=[\\w-]+&?", "youtu\\.be/[\\w-]+","youtube.com/embed"],
        templateRegex: /.*(?:v\=|be\/|embed\/)([\w\-]+)&?.*/i,
        iframeTemplate: '<iframe src="https://www.youtube.com/embed/$1" width="500" height="281" frameborder="0" allowfullscreen></iframe>',
        providerName: "youTube",
        isVideoProvider: true
      },
      vimeo: {
        urlSchemes: ["www\.vimeo\.com\/groups\/.*\/videos\/.*", "www\.vimeo\.com\/.*", "vimeo\.com\/groups\/.*\/videos\/.*", "vimeo\.com\/.*"],
        endpointUrl: {
          base: "https://vimeo.com/api/oembed.json",
          defaultOptions: {
            width: "500",
            height: "281"
          }
        },
        providerName: "vimeo",
        isVideoProvider: true
      },
      soundCloud: {
        urlSchemes: ["soundcloud\\.com\/.+","snd\\.sc\/.+"],
        endpointUrl: {
          base: "https://soundcloud.com/oembed",
          defaultOptions: {
            format: "json"
          }
        },
        providerName: "soundCloud"
      },
      storify: {
        urlSchemes: ["storify\\.com\/[a-zA-Z0-9-]+\/[a-zA-Z0-9-]+"],
        templateRegex: /.*storify\.com\/([a-zA-Z0-9-]+\/[a-zA-Z0-9-]+).*/i,
        iframeTemplate: '<iframe src="https://storify.com/$1/embed?border=false" frameborder=no allowtransparency=true></iframe>',
        providerName: "storify"
      },
      scribd: {
        urlSchemes:  ["scribd\\.com/.+"],
        templateRegex: /.*(?:doc|embeds)\/([^\/]+).*/,
        iframeTemplate: '<iframe src="https://www.scribd.com/embeds/$1/content?start_page=1&view_mode=lis" frameborder=no allowtransparency=true></iframe>',
        providerName: "scribd"
      },
      getty: {
        urlSchemes: ["gty\\.im/.+", "gettyimages\\.com/.*\\d+"],
        endpointUrl: {
          base: "https://embed.gettyimages.com/oembed",
          defaultOptions: {}
        },
        providerName: "getty"
      },
      talkingPointsMemo: {
        urlSchemes: ["polltracker\\.talkingpointsmemo\\.com/contests/.+"],
        templateRegex: /.*contests\/(.+)/,
        iframeTemplate: '<iframe scrolling="no" style="overflow:hidden:border:none" src="https://core.talkingpointsmemo.com/pt/charts/contest/$1"></iframe>',
        providerName: "talkingPointsMemo"
      },
      huffpoPollster: {
        urlSchemes: ["elections\\.huffingtonpost\\.com/pollster.+"],
        templateRegex: /.*elections\.huffingtonpost\.com\/pollster\/(?:embed\/)?(.+)/,
        iframeTemplate: '<iframe class="dk-embed-huffpollster" src="https://elections.huffingtonpost.com/pollster/embed/$1"></iframe>',
        providerName: "huffpoPollster"
      },
      googleDocsDocument: {
        urlSchemes: ["docs\\.google\\.com.*/document"],
        templates: [{
          templateRegex: /.*docs\.google\.com.*\/document\/d\/([a-zA-Z0-9-_]+)\/pub.*/,
          iframeTemplate: '<iframe class="dk-embed-google-doc-style-a" frameborder="0" src="https://docs.google.com/document/d/$1/pub?embedded=true"></iframe>'
        }, {
          templateRegex: /^https:\/\/docs.google.com\/a\/dailykos\.com\/document(.*)/,
          iframeTemplate: '<iframe class="dk-embed-google-doc-style-b" frameborder="0" src="https://docs.google.com/a/dailykos.com/document$1"></iframe>'
        }, {
          templateRegex: /^https:\/\/docs.google.com\/document(.*)/,
          iframeTemplate: '<iframe class="dk-embed-google-doc-style-c" frameborder="0" src="https://docs.google.com/document$1"></iframe>'
        }],
        providerName: "googleDocsDocument"
      },
      googleDocsSpreadsheet: {
        urlSchemes: ["docs\\.google\\.com.*/spreadsheet"],
        templates: [{
          templateRegex: /^https:\/\/docs.google.com\/a\/dailykos\.com\/spreadsheet(.*)/,
          iframeTemplate: '<iframe class="dk-embed-google-sheet-style-a" frameborder="0" src="https://docs.google.com/a/dailykos.com/spreadsheet$1"></iframe>'
        }, {
          templateRegex: /^https:\/\/docs.google.com\/spreadsheet(.*)/,
          iframeTemplate: '<iframe class="dk-embed-google-sheet-style-b" frameborder="0" src="https://docs.google.com/spreadsheet$1"></iframe>'
        }],
        providerName: "googleDocsSpreadsheet"
      },
      googleDocsPresentation: {
        urlSchemes: ["docs\\.google\\.com/presentation"],
        templateRegex: /.*docs\.google\.com.*\/presentation\/d\/([a-zA-Z0-9-_]+)\/.*/,
        iframeTemplate: '<iframe class="dk-embed-google-presentation-style-a" frameborder="0" allowfullscreen="true" mozallowfullscreen="true" webkitallowfullscreen="true" src="https://docs.google.com/presentation/d/$1/embed?start=false&loop=false&delayms=3000"></iframe>',
        providerName: "googleDocsPresentation"
      },
      libsyn: {
        urlSchemes:  ["html5-player\.libsyn\.com\/embed"],
        templateRegex: /episode\/id\/(\d+)/,
        iframeTemplate: '<iframe class="dk-embed-libsyn" src="https://html5-player.libsyn.com/embed/episode/id/$1/height/45/width/500/theme/standard/direction/no/autoplay/no/autonext/no/thumbnail/no/preload/no/no_addthis/no/" height="45" scrolling="no"></iframe>',
        providerName: "libsyn"
      }
    };

    embedProvider = _.find(embedProviders, function(provider) {
      urlResult = _.find(provider.urlSchemes, function(urlScheme) {
        regExp = new RegExp(urlScheme, "i");
        return link.match(regExp) !== null;
      });

      return urlResult !== undefined;
    });

    if(!!embedProvider && (embedProvider.iframeTemplate || embedProvider.templates)) {
      iframe    = generateIframe(link, embedProvider);
      $iframe   = $('<div>').html(iframe);
      iframeURL = $iframe.find('iframe').attr('src');

      if (!iframeURL) return link;
      if (embedProvider.errorMessage && !testIframeURL(iframeURL, embedProvider)) return link;

      return wrappedIframe(iframe, link, embedProvider.isVideoProvider);
    }

    if(!!embedProvider) {
      return retrieveOembedData(link, embedProvider.endpointUrl);
    }

    return link;
  }

  // Given an embed URL
  //   google.com/spreadsheets/123456
  // Generate iframe src provided by iframeTemplate
  //   google.com/spreadsheets/123456/pubdoc
  function generateIframe(link, embedProvider) {
    var templateRegex  = embedProvider.templateRegex;
    var iframeTemplate = embedProvider.iframeTemplate;
    var match;

    if (templateRegex && iframeTemplate) {
      match = link.match(templateRegex);

      if (!match || !match[1]) return link;
      var finalSourceUrl = match[1];

      if (embedProvider.providerName === "youTube") {
        var timestampMatch1 = link.substr(link.indexOf('?')).match(/start=(\d+)/);
        var isTimeStampFormat2 = !!link.substr(link.indexOf('?')).match(/t=(\d+)[hmsHMS]/);
        if(!!timestampMatch1) {
          finalSourceUrl = match[1] + "?" + timestampMatch1[0];
        } else if (isTimeStampFormat2) {
          var timeStamp = link.substr(link.indexOf("t=")+2);
          finalSourceUrl = match[1] + "?" + "start=" + convertTimeStampToSecs(timeStamp);
        }
      }

      return iframeTemplate.replace('$1', finalSourceUrl);
    }

    var templates = embedProvider.templates;
    if (!templates) return link;
    var template = _(templates).find(function(template){
      return link.match(template.templateRegex);
    });

    return (template) ? generateIframe(link, template) : link;
  }

  // Test if the provided iframe url works.
  // Returns false if there was an error.
  //
  // If there's an error with fetching the URL (e.g. sameorigin), it'll invoke the onError callback.
  //
  // /* Display custom error message */
  // testIframeURL('https://docs.google.com/my/spreadsheet/123', {
  //   errorMessage: 'The Google spreadsheet is unpublished.'
  // });
  //
  // /* Perform custom error handling */
  // testIframeURL('https://docs.google.com/my/spreadsheet/123', {
  //   onError: function(){ ...do something... }
  // });
  //
  // /* Display default error message */
  // testIframeURL('https://docs.google.com/my/spreadsheet/123')
  function testIframeURL(url, opts) {
    opts   = opts || {};

    var isOK   = true;
    var errMsg = opts.errorMessage || 'There was an error loading the embed iframe.';

    var result = $.ajax({
      url:   url,
      async: false,
      error: function(){
        if (opts.onError)
          opts.onError();
        else
          alert(errMsg);

        isOK = false;
      }
    });

    return isOK;
  }

  /* Most services provide CORS headers now
   * but test in IE8-9, may require JSONP or XDomainRequest object.
   */
  function retrieveOembedData(link, endpointUrl) {
    var result;
    var params = _.extend(endpointUrl.defaultOptions, { url: link });

    $.ajax({
      url: endpointUrl.base,
      data: params,
      async: false
    }).done(function(data) {
      result = data.html;
    });

    return wrappedIframe(result, link);
  };

  function wrappedIframe(iframe, link, isVideo) {
    if(!!link) link = "#";

    if (typeof(iframe) == "object") {
      iframe.src = iframe.src.replace(/http(s)?:/i, 'https:');
    } else {
      iframe = iframe.replace(/src=\"http(s)?:/i, 'src="https:');
    }

    var tempContainer = $('<div>');
    tempContainer.html(iframe);
    iframe = tempContainer.html();

    var classes = 'dk-editor-embed center-block';

    if (DK.Text.isSalsaEmbedUrl(link || iframe)) {
      var classes = 'dk-editor-embed campaign-embed'
    }

    if (DK.Text.isElectionsEmbed(iframe)) {
      var classes = 'dk-elections-embed dk-editor-embed'
      return "<div class='" + classes + "'>" +
        "<a href='" + link + "' class='new_iframe_placeholder'>" + iframe + "</a></div>"
    }

    if (DK.Text.isCiviqsEmbed(iframe)) {
      var classes = 'dk-civiqs-embed dk-editor-embed'
    }

    if (isVideo || DK.Text.isVideoEmbed(iframe)) {
      var classes = 'dk-editor-embed embed-responsive embed-responsive-16by9 center-block'
    }

    if (DK.Text.isFacebookEmbedUrl(iframe)) {
      var classes = 'dk-editor-embed facebook-embed-responsive center-block'
    }

    if (DK.Text.isGoogleEmbedUrl(iframe)) {
      var iframeSrc = $(iframe).attr('src');
      var iframeClass = DK.Embeds.Googledoc.getClass(iframeSrc);

      iframe = $(iframe).addClass(iframeClass).prop('outerHTML');
    }

    if (DK.Text.isHuffPoEmbedUrl(iframe)) {
      var classes = 'dk-editor-embed dk-embed-huffpollster';
    }

    var html = "<div class='" + classes + "'>" +
        "<div class='remove-embed-content'>x</div>" +
        "<a href='" + link + "' class='new_iframe_placeholder'>" + iframe + "</a></div>";

    if (DK.Text.isFacebookEmbedUrl(iframe)) {
      html = DK.Embeds.Facebook.AspectRatio.addStyleOnPaste(html);
    }

    return html;
  };

  function pastedLink(pastedText) {
    if(pastedText.match(/[\s]+/)) return false;

    return pastedText.match(/^(https?:)?(\/\/)?[\da-z\.-]+\.[a-z\.]{2,6}\//i);
  };

  function pastedTweet(pastedText) {
    return pastedText.match(/^(?:https:\/\/)?(?:www\.)?twitter.com\/[a-zA-Z0-9_]{1,15}\//);
  };

  //wrap pasted Twitter link
  function insertOembedTweet(pastedText, ed) {
    var tweetMatch;

    tweetMatch = pastedText.match(/\/status(?:es)?\/([0-9]+)/);

    if(tweetMatch && tweetMatch[1]) {
      $.ajax({
        url: "https://api.twitter.com/1/statuses/oembed.json?omit_script=true&id="+tweetMatch[1],
        dataType: 'jsonp',
        success: function(data, textStatus, jqXHR) {
          ed.fire('delayInsert', wrappedTweet(data.html));
          DailyKos.Twitter.renderTweetEmbeds();
        }
      });

      return '';
    }
    return pastedText;
  };

  //wrap pasted Twitter embed code
  function wrappedTweet(pastedText) {
    return "<div class='dk-editor-embed center-block' data-twitter-content='" +
    escapedEmbed(pastedText) + "'>" +
    "<div class='remove-embed-content'>x</div>" +  pastedText +
    "</div>" +
    "<p><br></p>";
  }

  // Given embed $el, return petition <a> link.
  // "<a src="https://www.dailykos.com/campaigns/petition/lorem-petition-name" data-format="js" data-source="widget" data-action="petition" data-slug="lorem-petition-name" data-campaign-id="id">Petition</a>"
  function petitionLink (el) {
    var $el       = $(el);
    var src       = $el.find('script[src]').attr('src') || $el.data('src');
    var data      = actionNetworkData(src);

    // Load petition data from action network
    // $.getScript('https://www.dailykos.com/extern/action/widgets/v3/petition/' + data.slug + '?format=js&source=widget&campaign-id=<id>');
    var $link = $("<a>Petition</a>").attr({
      'href':             'https://' + data.host + '/campaigns/' + data.action + '/' + data.slug,
      'class':            'dk-action-link',
      'data-src':         src,
      'data-action':      data.action,
      'data-slug':        data.slug,
      'data-campaign-id': data.campaign_id,
    });

    return $link[0].outerHTML;

    // Given:   'https://dailykos.com/extern/action/widgets/v3/petition/lorem-petition-name?format=js&source=widget&campaign-id=<id>'
    // Returns: {format: "js", source: "widget", action: "petition", slug: "lorem-petition-name"}
    function actionNetworkData(originalSrc) {
      try {
        var src  = originalSrc;
        var data = _.parseQueryString(src);

        src = src.split(/\/v[0-9]+\//i)[1]; // petition/lorem-petition-name?format=js&source=widget&campaign-id=<id>
        src = src.split('?')[0];    // petition/lorem-petition-name
        src = src.split('/');       // ['petition', 'lorem-petition-name']

        data.action = src[0];
        data.slug   = src[1];
        data.host = _.parseUrl(originalSrc).host;

        return data;
      } catch (e) {
        console.warn("Caught exception in embed.js:actionNetworkData" + e);
      }
    }
  }


  function escapedEmbed(embed) {
    embed = embed.replace(/'/g, "&#39;");
    embed = $('<div/>').text(embed).html();
    return _.escape(embed);
  }

  function scriptConversionNeeded(scripts) {
    var src, conversionFilter;
    if(scripts.length !== 1) return false;

    src = $(scripts[0]).attr('src');
    conversionFilter = /elections\.huffingtonpost\.com\/pollster/i;

    return src.match(conversionFilter);
  };

  function spanConversionNeeded(spans) {
    if(spans.length !== 1) return false;

    if(spans.children().length > 1) return false;
    return spans.find('a').length === 1;
  };

  // For Huffpo embeds. They are a script tag, but the iframe
  // can easily be constructed from the src attribute on the script,
  // so we use that instead.
  function convertScript(script) {
    return $(script).attr('src').replace('/embed.js', '');
  };

  function renderTextMatch (text) {
    if (text.match(/twitter-tweet/i))       DK.Twitter.renderTweetEmbeds();
    if (text.match(/instagram-media/i))     DK.Instagram.instagramRenderEmbeds();
    if (text.match(/elections.ap.org\/widgets\/content\//i)) DK.AssociatedPress.renderEmbeds();
  }

  function convertTimeStampToSecs(timeStamp) {
    var timeInSeconds = 0;
    timeInSeconds = timeStamp.match(/([0-9]+)s/i) ?  parseInt(timeStamp.match(/([0-9]+)s/i)[1]) : 0;
    timeInSeconds += (timeStamp.match(/([0-9]+)m/i) ?  parseInt(timeStamp.match(/([0-9]+)m/i)[1]) : 0) * 60;
    timeInSeconds += (timeStamp.match(/([0-9]+)h/i) ?  parseInt(timeStamp.match(/([0-9]+)h/i)[1]) : 0) * 60 * 60;
    return timeInSeconds;
  }

  return {
    filterPasteContent: filterPasteContent,
    renderTextMatch: renderTextMatch,
    escapedEmbed:  escapedEmbed
  };
})();
//! moment.js
//! version : 2.9.0
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com
// @ts-ignore
(function(a){function b(a,b,c){switch(arguments.length){case 2:return null!=a?a:b;case 3:return null!=a?a:null!=b?b:c;default:throw new Error("Implement me")}}function c(a,b){return Bb.call(a,b)}function d(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function e(a){vb.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+a)}function f(a,b){var c=!0;return o(function(){return c&&(e(a),c=!1),b.apply(this,arguments)},b)}function g(a,b){sc[a]||(e(b),sc[a]=!0)}function h(a,b){return function(c){return r(a.call(this,c),b)}}function i(a,b){return function(c){return this.localeData().ordinal(a.call(this,c),b)}}function j(a,b){var c,d,e=12*(b.year()-a.year())+(b.month()-a.month()),f=a.clone().add(e,"months");return 0>b-f?(c=a.clone().add(e-1,"months"),d=(b-f)/(f-c)):(c=a.clone().add(e+1,"months"),d=(b-f)/(c-f)),-(e+d)}function k(a,b,c){var d;return null==c?b:null!=a.meridiemHour?a.meridiemHour(b,c):null!=a.isPM?(d=a.isPM(c),d&&12>b&&(b+=12),d||12!==b||(b=0),b):b}function l(){}function m(a,b){b!==!1&&H(a),p(this,a),this._d=new Date(+a._d),uc===!1&&(uc=!0,vb.updateOffset(this),uc=!1)}function n(a){var b=A(a),c=b.year||0,d=b.quarter||0,e=b.month||0,f=b.week||0,g=b.day||0,h=b.hour||0,i=b.minute||0,j=b.second||0,k=b.millisecond||0;this._milliseconds=+k+1e3*j+6e4*i+36e5*h,this._days=+g+7*f,this._months=+e+3*d+12*c,this._data={},this._locale=vb.localeData(),this._bubble()}function o(a,b){for(var d in b)c(b,d)&&(a[d]=b[d]);return c(b,"toString")&&(a.toString=b.toString),c(b,"valueOf")&&(a.valueOf=b.valueOf),a}function p(a,b){var c,d,e;if("undefined"!=typeof b._isAMomentObject&&(a._isAMomentObject=b._isAMomentObject),"undefined"!=typeof b._i&&(a._i=b._i),"undefined"!=typeof b._f&&(a._f=b._f),"undefined"!=typeof b._l&&(a._l=b._l),"undefined"!=typeof b._strict&&(a._strict=b._strict),"undefined"!=typeof b._tzm&&(a._tzm=b._tzm),"undefined"!=typeof b._isUTC&&(a._isUTC=b._isUTC),"undefined"!=typeof b._offset&&(a._offset=b._offset),"undefined"!=typeof b._pf&&(a._pf=b._pf),"undefined"!=typeof b._locale&&(a._locale=b._locale),Kb.length>0)for(c in Kb)d=Kb[c],e=b[d],"undefined"!=typeof e&&(a[d]=e);return a}function q(a){return 0>a?Math.ceil(a):Math.floor(a)}function r(a,b,c){for(var d=""+Math.abs(a),e=a>=0;d.length<b;)d="0"+d;return(e?c?"+":"":"-")+d}function s(a,b){var c={milliseconds:0,months:0};return c.months=b.month()-a.month()+12*(b.year()-a.year()),a.clone().add(c.months,"M").isAfter(b)&&--c.months,c.milliseconds=+b-+a.clone().add(c.months,"M"),c}function t(a,b){var c;return b=M(b,a),a.isBefore(b)?c=s(a,b):(c=s(b,a),c.milliseconds=-c.milliseconds,c.months=-c.months),c}function u(a,b){return function(c,d){var e,f;return null===d||isNaN(+d)||(g(b,"moment()."+b+"(period, number) is deprecated. Please use moment()."+b+"(number, period)."),f=c,c=d,d=f),c="string"==typeof c?+c:c,e=vb.duration(c,d),v(this,e,a),this}}function v(a,b,c,d){var e=b._milliseconds,f=b._days,g=b._months;d=null==d?!0:d,e&&a._d.setTime(+a._d+e*c),f&&pb(a,"Date",ob(a,"Date")+f*c),g&&nb(a,ob(a,"Month")+g*c),d&&vb.updateOffset(a,f||g)}function w(a){return"[object Array]"===Object.prototype.toString.call(a)}function x(a){return"[object Date]"===Object.prototype.toString.call(a)||a instanceof Date}function y(a,b,c){var d,e=Math.min(a.length,b.length),f=Math.abs(a.length-b.length),g=0;for(d=0;e>d;d++)(c&&a[d]!==b[d]||!c&&C(a[d])!==C(b[d]))&&g++;return g+f}function z(a){if(a){var b=a.toLowerCase().replace(/(.)s$/,"$1");a=lc[a]||mc[b]||b}return a}function A(a){var b,d,e={};for(d in a)c(a,d)&&(b=z(d),b&&(e[b]=a[d]));return e}function B(b){var c,d;if(0===b.indexOf("week"))c=7,d="day";else{if(0!==b.indexOf("month"))return;c=12,d="month"}vb[b]=function(e,f){var g,h,i=vb._locale[b],j=[];if("number"==typeof e&&(f=e,e=a),h=function(a){var b=vb().utc().set(d,a);return i.call(vb._locale,b,e||"")},null!=f)return h(f);for(g=0;c>g;g++)j.push(h(g));return j}}function C(a){var b=+a,c=0;return 0!==b&&isFinite(b)&&(c=b>=0?Math.floor(b):Math.ceil(b)),c}function D(a,b){return new Date(Date.UTC(a,b+1,0)).getUTCDate()}function E(a,b,c){return jb(vb([a,11,31+b-c]),b,c).week}function F(a){return G(a)?366:365}function G(a){return a%4===0&&a%100!==0||a%400===0}function H(a){var b;a._a&&-2===a._pf.overflow&&(b=a._a[Db]<0||a._a[Db]>11?Db:a._a[Eb]<1||a._a[Eb]>D(a._a[Cb],a._a[Db])?Eb:a._a[Fb]<0||a._a[Fb]>24||24===a._a[Fb]&&(0!==a._a[Gb]||0!==a._a[Hb]||0!==a._a[Ib])?Fb:a._a[Gb]<0||a._a[Gb]>59?Gb:a._a[Hb]<0||a._a[Hb]>59?Hb:a._a[Ib]<0||a._a[Ib]>999?Ib:-1,a._pf._overflowDayOfYear&&(Cb>b||b>Eb)&&(b=Eb),a._pf.overflow=b)}function I(b){return null==b._isValid&&(b._isValid=!isNaN(b._d.getTime())&&b._pf.overflow<0&&!b._pf.empty&&!b._pf.invalidMonth&&!b._pf.nullInput&&!b._pf.invalidFormat&&!b._pf.userInvalidated,b._strict&&(b._isValid=b._isValid&&0===b._pf.charsLeftOver&&0===b._pf.unusedTokens.length&&b._pf.bigHour===a)),b._isValid}function J(a){return a?a.toLowerCase().replace("_","-"):a}function K(a){for(var b,c,d,e,f=0;f<a.length;){for(e=J(a[f]).split("-"),b=e.length,c=J(a[f+1]),c=c?c.split("-"):null;b>0;){if(d=L(e.slice(0,b).join("-")))return d;if(c&&c.length>=b&&y(e,c,!0)>=b-1)break;b--}f++}return null}function L(a){var b=null;if(!Jb[a]&&Lb)try{b=vb.locale(),require("./locale/"+a),vb.locale(b)}catch(c){}return Jb[a]}function M(a,b){var c,d;return b._isUTC?(c=b.clone(),d=(vb.isMoment(a)||x(a)?+a:+vb(a))-+c,c._d.setTime(+c._d+d),vb.updateOffset(c,!1),c):vb(a).local()}function N(a){return a.match(/\[[\s\S]/)?a.replace(/^\[|\]$/g,""):a.replace(/\\/g,"")}function O(a){var b,c,d=a.match(Pb);for(b=0,c=d.length;c>b;b++)d[b]=rc[d[b]]?rc[d[b]]:N(d[b]);return function(e){var f="";for(b=0;c>b;b++)f+=d[b]instanceof Function?d[b].call(e,a):d[b];return f}}function P(a,b){return a.isValid()?(b=Q(b,a.localeData()),nc[b]||(nc[b]=O(b)),nc[b](a)):a.localeData().invalidDate()}function Q(a,b){function c(a){return b.longDateFormat(a)||a}var d=5;for(Qb.lastIndex=0;d>=0&&Qb.test(a);)a=a.replace(Qb,c),Qb.lastIndex=0,d-=1;return a}function R(a,b){var c,d=b._strict;switch(a){case"Q":return _b;case"DDDD":return bc;case"YYYY":case"GGGG":case"gggg":return d?cc:Tb;case"Y":case"G":case"g":return ec;case"YYYYYY":case"YYYYY":case"GGGGG":case"ggggg":return d?dc:Ub;case"S":if(d)return _b;case"SS":if(d)return ac;case"SSS":if(d)return bc;case"DDD":return Sb;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return Wb;case"a":case"A":return b._locale._meridiemParse;case"x":return Zb;case"X":return $b;case"Z":case"ZZ":return Xb;case"T":return Yb;case"SSSS":return Vb;case"MM":case"DD":case"YY":case"GG":case"gg":case"HH":case"hh":case"mm":case"ss":case"ww":case"WW":return d?ac:Rb;case"M":case"D":case"d":case"H":case"h":case"m":case"s":case"w":case"W":case"e":case"E":return Rb;case"Do":return d?b._locale._ordinalParse:b._locale._ordinalParseLenient;default:return c=new RegExp($(Z(a.replace("\\","")),"i"))}}function S(a){a=a||"";var b=a.match(Xb)||[],c=b[b.length-1]||[],d=(c+"").match(jc)||["-",0,0],e=+(60*d[1])+C(d[2]);return"+"===d[0]?e:-e}function T(a,b,c){var d,e=c._a;switch(a){case"Q":null!=b&&(e[Db]=3*(C(b)-1));break;case"M":case"MM":null!=b&&(e[Db]=C(b)-1);break;case"MMM":case"MMMM":d=c._locale.monthsParse(b,a,c._strict),null!=d?e[Db]=d:c._pf.invalidMonth=b;break;case"D":case"DD":null!=b&&(e[Eb]=C(b));break;case"Do":null!=b&&(e[Eb]=C(parseInt(b.match(/\d{1,2}/)[0],10)));break;case"DDD":case"DDDD":null!=b&&(c._dayOfYear=C(b));break;case"YY":e[Cb]=vb.parseTwoDigitYear(b);break;case"YYYY":case"YYYYY":case"YYYYYY":e[Cb]=C(b);break;case"a":case"A":c._meridiem=b;break;case"h":case"hh":c._pf.bigHour=!0;case"H":case"HH":e[Fb]=C(b);break;case"m":case"mm":e[Gb]=C(b);break;case"s":case"ss":e[Hb]=C(b);break;case"S":case"SS":case"SSS":case"SSSS":e[Ib]=C(1e3*("0."+b));break;case"x":c._d=new Date(C(b));break;case"X":c._d=new Date(1e3*parseFloat(b));break;case"Z":case"ZZ":c._useUTC=!0,c._tzm=S(b);break;case"dd":case"ddd":case"dddd":d=c._locale.weekdaysParse(b),null!=d?(c._w=c._w||{},c._w.d=d):c._pf.invalidWeekday=b;break;case"w":case"ww":case"W":case"WW":case"d":case"e":case"E":a=a.substr(0,1);case"gggg":case"GGGG":case"GGGGG":a=a.substr(0,2),b&&(c._w=c._w||{},c._w[a]=C(b));break;case"gg":case"GG":c._w=c._w||{},c._w[a]=vb.parseTwoDigitYear(b)}}function U(a){var c,d,e,f,g,h,i;c=a._w,null!=c.GG||null!=c.W||null!=c.E?(g=1,h=4,d=b(c.GG,a._a[Cb],jb(vb(),1,4).year),e=b(c.W,1),f=b(c.E,1)):(g=a._locale._week.dow,h=a._locale._week.doy,d=b(c.gg,a._a[Cb],jb(vb(),g,h).year),e=b(c.w,1),null!=c.d?(f=c.d,g>f&&++e):f=null!=c.e?c.e+g:g),i=kb(d,e,f,h,g),a._a[Cb]=i.year,a._dayOfYear=i.dayOfYear}function V(a){var c,d,e,f,g=[];if(!a._d){for(e=X(a),a._w&&null==a._a[Eb]&&null==a._a[Db]&&U(a),a._dayOfYear&&(f=b(a._a[Cb],e[Cb]),a._dayOfYear>F(f)&&(a._pf._overflowDayOfYear=!0),d=fb(f,0,a._dayOfYear),a._a[Db]=d.getUTCMonth(),a._a[Eb]=d.getUTCDate()),c=0;3>c&&null==a._a[c];++c)a._a[c]=g[c]=e[c];for(;7>c;c++)a._a[c]=g[c]=null==a._a[c]?2===c?1:0:a._a[c];24===a._a[Fb]&&0===a._a[Gb]&&0===a._a[Hb]&&0===a._a[Ib]&&(a._nextDay=!0,a._a[Fb]=0),a._d=(a._useUTC?fb:eb).apply(null,g),null!=a._tzm&&a._d.setUTCMinutes(a._d.getUTCMinutes()-a._tzm),a._nextDay&&(a._a[Fb]=24)}}function W(a){var b;a._d||(b=A(a._i),a._a=[b.year,b.month,b.day||b.date,b.hour,b.minute,b.second,b.millisecond],V(a))}function X(a){var b=new Date;return a._useUTC?[b.getUTCFullYear(),b.getUTCMonth(),b.getUTCDate()]:[b.getFullYear(),b.getMonth(),b.getDate()]}function Y(b){if(b._f===vb.ISO_8601)return void ab(b);b._a=[],b._pf.empty=!0;var c,d,e,f,g,h=""+b._i,i=h.length,j=0;for(e=Q(b._f,b._locale).match(Pb)||[],c=0;c<e.length;c++)f=e[c],d=(h.match(R(f,b))||[])[0],d&&(g=h.substr(0,h.indexOf(d)),g.length>0&&b._pf.unusedInput.push(g),h=h.slice(h.indexOf(d)+d.length),j+=d.length),rc[f]?(d?b._pf.empty=!1:b._pf.unusedTokens.push(f),T(f,d,b)):b._strict&&!d&&b._pf.unusedTokens.push(f);b._pf.charsLeftOver=i-j,h.length>0&&b._pf.unusedInput.push(h),b._pf.bigHour===!0&&b._a[Fb]<=12&&(b._pf.bigHour=a),b._a[Fb]=k(b._locale,b._a[Fb],b._meridiem),V(b),H(b)}function Z(a){return a.replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(a,b,c,d,e){return b||c||d||e})}function $(a){return a.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function _(a){var b,c,e,f,g;if(0===a._f.length)return a._pf.invalidFormat=!0,void(a._d=new Date(0/0));for(f=0;f<a._f.length;f++)g=0,b=p({},a),null!=a._useUTC&&(b._useUTC=a._useUTC),b._pf=d(),b._f=a._f[f],Y(b),I(b)&&(g+=b._pf.charsLeftOver,g+=10*b._pf.unusedTokens.length,b._pf.score=g,(null==e||e>g)&&(e=g,c=b));o(a,c||b)}function ab(a){var b,c,d=a._i,e=fc.exec(d);if(e){for(a._pf.iso=!0,b=0,c=hc.length;c>b;b++)if(hc[b][1].exec(d)){a._f=hc[b][0]+(e[6]||" ");break}for(b=0,c=ic.length;c>b;b++)if(ic[b][1].exec(d)){a._f+=ic[b][0];break}d.match(Xb)&&(a._f+="Z"),Y(a)}else a._isValid=!1}function bb(a){ab(a),a._isValid===!1&&(delete a._isValid,vb.createFromInputFallback(a))}function cb(a,b){var c,d=[];for(c=0;c<a.length;++c)d.push(b(a[c],c));return d}function db(b){var c,d=b._i;d===a?b._d=new Date:x(d)?b._d=new Date(+d):null!==(c=Mb.exec(d))?b._d=new Date(+c[1]):"string"==typeof d?bb(b):w(d)?(b._a=cb(d.slice(0),function(a){return parseInt(a,10)}),V(b)):"object"==typeof d?W(b):"number"==typeof d?b._d=new Date(d):vb.createFromInputFallback(b)}function eb(a,b,c,d,e,f,g){var h=new Date(a,b,c,d,e,f,g);return 1970>a&&h.setFullYear(a),h}function fb(a){var b=new Date(Date.UTC.apply(null,arguments));return 1970>a&&b.setUTCFullYear(a),b}function gb(a,b){if("string"==typeof a)if(isNaN(a)){if(a=b.weekdaysParse(a),"number"!=typeof a)return null}else a=parseInt(a,10);return a}function hb(a,b,c,d,e){return e.relativeTime(b||1,!!c,a,d)}function ib(a,b,c){var d=vb.duration(a).abs(),e=Ab(d.as("s")),f=Ab(d.as("m")),g=Ab(d.as("h")),h=Ab(d.as("d")),i=Ab(d.as("M")),j=Ab(d.as("y")),k=e<oc.s&&["s",e]||1===f&&["m"]||f<oc.m&&["mm",f]||1===g&&["h"]||g<oc.h&&["hh",g]||1===h&&["d"]||h<oc.d&&["dd",h]||1===i&&["M"]||i<oc.M&&["MM",i]||1===j&&["y"]||["yy",j];return k[2]=b,k[3]=+a>0,k[4]=c,hb.apply({},k)}function jb(a,b,c){var d,e=c-b,f=c-a.day();return f>e&&(f-=7),e-7>f&&(f+=7),d=vb(a).add(f,"d"),{week:Math.ceil(d.dayOfYear()/7),year:d.year()}}function kb(a,b,c,d,e){var f,g,h=fb(a,0,1).getUTCDay();return h=0===h?7:h,c=null!=c?c:e,f=e-h+(h>d?7:0)-(e>h?7:0),g=7*(b-1)+(c-e)+f+1,{year:g>0?a:a-1,dayOfYear:g>0?g:F(a-1)+g}}function lb(b){var c,d=b._i,e=b._f;return b._locale=b._locale||vb.localeData(b._l),null===d||e===a&&""===d?vb.invalid({nullInput:!0}):("string"==typeof d&&(b._i=d=b._locale.preparse(d)),vb.isMoment(d)?new m(d,!0):(e?w(e)?_(b):Y(b):db(b),c=new m(b),c._nextDay&&(c.add(1,"d"),c._nextDay=a),c))}function mb(a,b){var c,d;if(1===b.length&&w(b[0])&&(b=b[0]),!b.length)return vb();for(c=b[0],d=1;d<b.length;++d)b[d][a](c)&&(c=b[d]);return c}function nb(a,b){var c;return"string"==typeof b&&(b=a.localeData().monthsParse(b),"number"!=typeof b)?a:(c=Math.min(a.date(),D(a.year(),b)),a._d["set"+(a._isUTC?"UTC":"")+"Month"](b,c),a)}function ob(a,b){return a._d["get"+(a._isUTC?"UTC":"")+b]()}function pb(a,b,c){return"Month"===b?nb(a,c):a._d["set"+(a._isUTC?"UTC":"")+b](c)}function qb(a,b){return function(c){return null!=c?(pb(this,a,c),vb.updateOffset(this,b),this):ob(this,a)}}function rb(a){return 400*a/146097}function sb(a){return 146097*a/400}function tb(a){vb.duration.fn[a]=function(){return this._data[a]}}function ub(a){"undefined"==typeof ender&&(wb=zb.moment,zb.moment=a?f("Accessing Moment through the global scope is deprecated, and will be removed in an upcoming release.",vb):vb)}for(var vb,wb,xb,yb="2.9.0",zb="undefined"==typeof global||"undefined"!=typeof window&&window!==global.window?this:global,Ab=Math.round,Bb=Object.prototype.hasOwnProperty,Cb=0,Db=1,Eb=2,Fb=3,Gb=4,Hb=5,Ib=6,Jb={},Kb=[],Lb="undefined"!=typeof module&&module&&module.exports,Mb=/^\/?Date\((\-?\d+)/i,Nb=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,Ob=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,Pb=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|x|X|zz?|ZZ?|.)/g,Qb=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Rb=/\d\d?/,Sb=/\d{1,3}/,Tb=/\d{1,4}/,Ub=/[+\-]?\d{1,6}/,Vb=/\d+/,Wb=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,Xb=/Z|[\+\-]\d\d:?\d\d/gi,Yb=/T/i,Zb=/[\+\-]?\d+/,$b=/[\+\-]?\d+(\.\d{1,3})?/,_b=/\d/,ac=/\d\d/,bc=/\d{3}/,cc=/\d{4}/,dc=/[+-]?\d{6}/,ec=/[+-]?\d+/,fc=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,gc="YYYY-MM-DDTHH:mm:ssZ",hc=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],ic=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],jc=/([\+\-]|\d\d)/gi,kc=("Date|Hours|Minutes|Seconds|Milliseconds".split("|"),{Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6}),lc={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",D:"date",w:"week",W:"isoWeek",M:"month",Q:"quarter",y:"year",DDD:"dayOfYear",e:"weekday",E:"isoWeekday",gg:"weekYear",GG:"isoWeekYear"},mc={dayofyear:"dayOfYear",isoweekday:"isoWeekday",isoweek:"isoWeek",weekyear:"weekYear",isoweekyear:"isoWeekYear"},nc={},oc={s:45,m:45,h:22,d:26,M:11},pc="DDD w W M D d".split(" "),qc="M D H h m s w W".split(" "),rc={M:function(){return this.month()+1},MMM:function(a){return this.localeData().monthsShort(this,a)},MMMM:function(a){return this.localeData().months(this,a)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(a){return this.localeData().weekdaysMin(this,a)},ddd:function(a){return this.localeData().weekdaysShort(this,a)},dddd:function(a){return this.localeData().weekdays(this,a)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return r(this.year()%100,2)},YYYY:function(){return r(this.year(),4)},YYYYY:function(){return r(this.year(),5)},YYYYYY:function(){var a=this.year(),b=a>=0?"+":"-";return b+r(Math.abs(a),6)},gg:function(){return r(this.weekYear()%100,2)},gggg:function(){return r(this.weekYear(),4)},ggggg:function(){return r(this.weekYear(),5)},GG:function(){return r(this.isoWeekYear()%100,2)},GGGG:function(){return r(this.isoWeekYear(),4)},GGGGG:function(){return r(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.localeData().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.localeData().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return C(this.milliseconds()/100)},SS:function(){return r(C(this.milliseconds()/10),2)},SSS:function(){return r(this.milliseconds(),3)},SSSS:function(){return r(this.milliseconds(),3)},Z:function(){var a=this.utcOffset(),b="+";return 0>a&&(a=-a,b="-"),b+r(C(a/60),2)+":"+r(C(a)%60,2)},ZZ:function(){var a=this.utcOffset(),b="+";return 0>a&&(a=-a,b="-"),b+r(C(a/60),2)+r(C(a)%60,2)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},x:function(){return this.valueOf()},X:function(){return this.unix()},Q:function(){return this.quarter()}},sc={},tc=["months","monthsShort","weekdays","weekdaysShort","weekdaysMin"],uc=!1;pc.length;)xb=pc.pop(),rc[xb+"o"]=i(rc[xb],xb);for(;qc.length;)xb=qc.pop(),rc[xb+xb]=h(rc[xb],2);rc.DDDD=h(rc.DDD,3),o(l.prototype,{set:function(a){var b,c;for(c in a)b=a[c],"function"==typeof b?this[c]=b:this["_"+c]=b;this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(a){return this._months[a.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(a){return this._monthsShort[a.month()]},monthsParse:function(a,b,c){var d,e,f;for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),d=0;12>d;d++){if(e=vb.utc([2e3,d]),c&&!this._longMonthsParse[d]&&(this._longMonthsParse[d]=new RegExp("^"+this.months(e,"").replace(".","")+"$","i"),this._shortMonthsParse[d]=new RegExp("^"+this.monthsShort(e,"").replace(".","")+"$","i")),c||this._monthsParse[d]||(f="^"+this.months(e,"")+"|^"+this.monthsShort(e,""),this._monthsParse[d]=new RegExp(f.replace(".",""),"i")),c&&"MMMM"===b&&this._longMonthsParse[d].test(a))return d;if(c&&"MMM"===b&&this._shortMonthsParse[d].test(a))return d;if(!c&&this._monthsParse[d].test(a))return d}},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(a){return this._weekdays[a.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(a){return this._weekdaysShort[a.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(a){return this._weekdaysMin[a.day()]},weekdaysParse:function(a){var b,c,d;for(this._weekdaysParse||(this._weekdaysParse=[]),b=0;7>b;b++)if(this._weekdaysParse[b]||(c=vb([2e3,1]).day(b),d="^"+this.weekdays(c,"")+"|^"+this.weekdaysShort(c,"")+"|^"+this.weekdaysMin(c,""),this._weekdaysParse[b]=new RegExp(d.replace(".",""),"i")),this._weekdaysParse[b].test(a))return b},_longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY LT",LLLL:"dddd, MMMM D, YYYY LT"},longDateFormat:function(a){var b=this._longDateFormat[a];return!b&&this._longDateFormat[a.toUpperCase()]&&(b=this._longDateFormat[a.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(a){return a.slice(1)}),this._longDateFormat[a]=b),b},isPM:function(a){return"p"===(a+"").toLowerCase().charAt(0)},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(a,b,c){return a>11?c?"pm":"PM":c?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(a,b,c){var d=this._calendar[a];return"function"==typeof d?d.apply(b,[c]):d},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(a,b,c,d){var e=this._relativeTime[c];return"function"==typeof e?e(a,b,c,d):e.replace(/%d/i,a)},pastFuture:function(a,b){var c=this._relativeTime[a>0?"future":"past"];return"function"==typeof c?c(b):c.replace(/%s/i,b)},ordinal:function(a){return this._ordinal.replace("%d",a)},_ordinal:"%d",_ordinalParse:/\d{1,2}/,preparse:function(a){return a},postformat:function(a){return a},week:function(a){return jb(a,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6},firstDayOfWeek:function(){return this._week.dow},firstDayOfYear:function(){return this._week.doy},_invalidDate:"Invalid date",invalidDate:function(){return this._invalidDate}}),vb=function(b,c,e,f){var g;return"boolean"==typeof e&&(f=e,e=a),g={},g._isAMomentObject=!0,g._i=b,g._f=c,g._l=e,g._strict=f,g._isUTC=!1,g._pf=d(),lb(g)},vb.suppressDeprecationWarnings=!1,vb.createFromInputFallback=f("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(a){a._d=new Date(a._i+(a._useUTC?" UTC":""))}),vb.min=function(){var a=[].slice.call(arguments,0);return mb("isBefore",a)},vb.max=function(){var a=[].slice.call(arguments,0);return mb("isAfter",a)},vb.utc=function(b,c,e,f){var g;return"boolean"==typeof e&&(f=e,e=a),g={},g._isAMomentObject=!0,g._useUTC=!0,g._isUTC=!0,g._l=e,g._i=b,g._f=c,g._strict=f,g._pf=d(),lb(g).utc()},vb.unix=function(a){return vb(1e3*a)},vb.duration=function(a,b){var d,e,f,g,h=a,i=null;return vb.isDuration(a)?h={ms:a._milliseconds,d:a._days,M:a._months}:"number"==typeof a?(h={},b?h[b]=a:h.milliseconds=a):(i=Nb.exec(a))?(d="-"===i[1]?-1:1,h={y:0,d:C(i[Eb])*d,h:C(i[Fb])*d,m:C(i[Gb])*d,s:C(i[Hb])*d,ms:C(i[Ib])*d}):(i=Ob.exec(a))?(d="-"===i[1]?-1:1,f=function(a){var b=a&&parseFloat(a.replace(",","."));return(isNaN(b)?0:b)*d},h={y:f(i[2]),M:f(i[3]),d:f(i[4]),h:f(i[5]),m:f(i[6]),s:f(i[7]),w:f(i[8])}):null==h?h={}:"object"==typeof h&&("from"in h||"to"in h)&&(g=t(vb(h.from),vb(h.to)),h={},h.ms=g.milliseconds,h.M=g.months),e=new n(h),vb.isDuration(a)&&c(a,"_locale")&&(e._locale=a._locale),e},vb.version=yb,vb.defaultFormat=gc,vb.ISO_8601=function(){},vb.momentProperties=Kb,vb.updateOffset=function(){},vb.relativeTimeThreshold=function(b,c){return oc[b]===a?!1:c===a?oc[b]:(oc[b]=c,!0)},vb.lang=f("moment.lang is deprecated. Use moment.locale instead.",function(a,b){return vb.locale(a,b)}),vb.locale=function(a,b){var c;return a&&(c="undefined"!=typeof b?vb.defineLocale(a,b):vb.localeData(a),c&&(vb.duration._locale=vb._locale=c)),vb._locale._abbr},vb.defineLocale=function(a,b){return null!==b?(b.abbr=a,Jb[a]||(Jb[a]=new l),Jb[a].set(b),vb.locale(a),Jb[a]):(delete Jb[a],null)},vb.langData=f("moment.langData is deprecated. Use moment.localeData instead.",function(a){return vb.localeData(a)}),vb.localeData=function(a){var b;if(a&&a._locale&&a._locale._abbr&&(a=a._locale._abbr),!a)return vb._locale;if(!w(a)){if(b=L(a))return b;a=[a]}return K(a)},vb.isMoment=function(a){return a instanceof m||null!=a&&c(a,"_isAMomentObject")},vb.isDuration=function(a){return a instanceof n};for(xb=tc.length-1;xb>=0;--xb)B(tc[xb]);vb.normalizeUnits=function(a){return z(a)},vb.invalid=function(a){var b=vb.utc(0/0);return null!=a?o(b._pf,a):b._pf.userInvalidated=!0,b},vb.parseZone=function(){return vb.apply(null,arguments).parseZone()},vb.parseTwoDigitYear=function(a){return C(a)+(C(a)>68?1900:2e3)},vb.isDate=x,o(vb.fn=m.prototype,{clone:function(){return vb(this)},valueOf:function(){return+this._d-6e4*(this._offset||0)},unix:function(){return Math.floor(+this/1e3)},toString:function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){var a=vb(this).utc();return 0<a.year()&&a.year()<=9999?"function"==typeof Date.prototype.toISOString?this.toDate().toISOString():P(a,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):P(a,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var a=this;return[a.year(),a.month(),a.date(),a.hours(),a.minutes(),a.seconds(),a.milliseconds()]},isValid:function(){return I(this)},isDSTShifted:function(){return this._a?this.isValid()&&y(this._a,(this._isUTC?vb.utc(this._a):vb(this._a)).toArray())>0:!1},parsingFlags:function(){return o({},this._pf)},invalidAt:function(){return this._pf.overflow},utc:function(a){return this.utcOffset(0,a)},local:function(a){return this._isUTC&&(this.utcOffset(0,a),this._isUTC=!1,a&&this.subtract(this._dateUtcOffset(),"m")),this},format:function(a){var b=P(this,a||vb.defaultFormat);return this.localeData().postformat(b)},add:u(1,"add"),subtract:u(-1,"subtract"),diff:function(a,b,c){var d,e,f=M(a,this),g=6e4*(f.utcOffset()-this.utcOffset());return b=z(b),"year"===b||"month"===b||"quarter"===b?(e=j(this,f),"quarter"===b?e/=3:"year"===b&&(e/=12)):(d=this-f,e="second"===b?d/1e3:"minute"===b?d/6e4:"hour"===b?d/36e5:"day"===b?(d-g)/864e5:"week"===b?(d-g)/6048e5:d),c?e:q(e)},from:function(a,b){return vb.duration({to:this,from:a}).locale(this.locale()).humanize(!b)},fromNow:function(a){return this.from(vb(),a)},calendar:function(a){var b=a||vb(),c=M(b,this).startOf("day"),d=this.diff(c,"days",!0),e=-6>d?"sameElse":-1>d?"lastWeek":0>d?"lastDay":1>d?"sameDay":2>d?"nextDay":7>d?"nextWeek":"sameElse";return this.format(this.localeData().calendar(e,this,vb(b)))},isLeapYear:function(){return G(this.year())},isDST:function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},day:function(a){var b=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=a?(a=gb(a,this.localeData()),this.add(a-b,"d")):b},month:qb("Month",!0),startOf:function(a){switch(a=z(a)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===a?this.weekday(0):"isoWeek"===a&&this.isoWeekday(1),"quarter"===a&&this.month(3*Math.floor(this.month()/3)),this},endOf:function(b){return b=z(b),b===a||"millisecond"===b?this:this.startOf(b).add(1,"isoWeek"===b?"week":b).subtract(1,"ms")},isAfter:function(a,b){var c;return b=z("undefined"!=typeof b?b:"millisecond"),"millisecond"===b?(a=vb.isMoment(a)?a:vb(a),+this>+a):(c=vb.isMoment(a)?+a:+vb(a),c<+this.clone().startOf(b))},isBefore:function(a,b){var c;return b=z("undefined"!=typeof b?b:"millisecond"),"millisecond"===b?(a=vb.isMoment(a)?a:vb(a),+a>+this):(c=vb.isMoment(a)?+a:+vb(a),+this.clone().endOf(b)<c)},isBetween:function(a,b,c){return this.isAfter(a,c)&&this.isBefore(b,c)},isSame:function(a,b){var c;return b=z(b||"millisecond"),"millisecond"===b?(a=vb.isMoment(a)?a:vb(a),+this===+a):(c=+vb(a),+this.clone().startOf(b)<=c&&c<=+this.clone().endOf(b))},min:f("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(a){return a=vb.apply(null,arguments),this>a?this:a}),max:f("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(a){return a=vb.apply(null,arguments),a>this?this:a}),zone:f("moment().zone is deprecated, use moment().utcOffset instead. https://github.com/moment/moment/issues/1779",function(a,b){return null!=a?("string"!=typeof a&&(a=-a),this.utcOffset(a,b),this):-this.utcOffset()}),utcOffset:function(a,b){var c,d=this._offset||0;return null!=a?("string"==typeof a&&(a=S(a)),Math.abs(a)<16&&(a=60*a),!this._isUTC&&b&&(c=this._dateUtcOffset()),this._offset=a,this._isUTC=!0,null!=c&&this.add(c,"m"),d!==a&&(!b||this._changeInProgress?v(this,vb.duration(a-d,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,vb.updateOffset(this,!0),this._changeInProgress=null)),this):this._isUTC?d:this._dateUtcOffset()},isLocal:function(){return!this._isUTC},isUtcOffset:function(){return this._isUTC},isUtc:function(){return this._isUTC&&0===this._offset},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},parseZone:function(){return this._tzm?this.utcOffset(this._tzm):"string"==typeof this._i&&this.utcOffset(S(this._i)),this},hasAlignedHourOffset:function(a){return a=a?vb(a).utcOffset():0,(this.utcOffset()-a)%60===0},daysInMonth:function(){return D(this.year(),this.month())},dayOfYear:function(a){var b=Ab((vb(this).startOf("day")-vb(this).startOf("year"))/864e5)+1;return null==a?b:this.add(a-b,"d")},quarter:function(a){return null==a?Math.ceil((this.month()+1)/3):this.month(3*(a-1)+this.month()%3)},weekYear:function(a){var b=jb(this,this.localeData()._week.dow,this.localeData()._week.doy).year;return null==a?b:this.add(a-b,"y")},isoWeekYear:function(a){var b=jb(this,1,4).year;return null==a?b:this.add(a-b,"y")},week:function(a){var b=this.localeData().week(this);return null==a?b:this.add(7*(a-b),"d")},isoWeek:function(a){var b=jb(this,1,4).week;return null==a?b:this.add(7*(a-b),"d")},weekday:function(a){var b=(this.day()+7-this.localeData()._week.dow)%7;return null==a?b:this.add(a-b,"d")},isoWeekday:function(a){return null==a?this.day()||7:this.day(this.day()%7?a:a-7)},isoWeeksInYear:function(){return E(this.year(),1,4)},weeksInYear:function(){var a=this.localeData()._week;return E(this.year(),a.dow,a.doy)},get:function(a){return a=z(a),this[a]()},set:function(a,b){var c;if("object"==typeof a)for(c in a)this.set(c,a[c]);else a=z(a),"function"==typeof this[a]&&this[a](b);return this},locale:function(b){var c;return b===a?this._locale._abbr:(c=vb.localeData(b),null!=c&&(this._locale=c),this)},lang:f("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(b){return b===a?this.localeData():this.locale(b)}),localeData:function(){return this._locale},_dateUtcOffset:function(){return 15*-Math.round(this._d.getTimezoneOffset()/15)}}),vb.fn.millisecond=vb.fn.milliseconds=qb("Milliseconds",!1),vb.fn.second=vb.fn.seconds=qb("Seconds",!1),vb.fn.minute=vb.fn.minutes=qb("Minutes",!1),vb.fn.hour=vb.fn.hours=qb("Hours",!0),vb.fn.date=qb("Date",!0),vb.fn.dates=f("dates accessor is deprecated. Use date instead.",qb("Date",!0)),vb.fn.year=qb("FullYear",!0),vb.fn.years=f("years accessor is deprecated. Use year instead.",qb("FullYear",!0)),vb.fn.days=vb.fn.day,vb.fn.months=vb.fn.month,vb.fn.weeks=vb.fn.week,vb.fn.isoWeeks=vb.fn.isoWeek,vb.fn.quarters=vb.fn.quarter,vb.fn.toJSON=vb.fn.toISOString,vb.fn.isUTC=vb.fn.isUtc,o(vb.duration.fn=n.prototype,{_bubble:function(){var a,b,c,d=this._milliseconds,e=this._days,f=this._months,g=this._data,h=0;g.milliseconds=d%1e3,a=q(d/1e3),g.seconds=a%60,b=q(a/60),g.minutes=b%60,c=q(b/60),g.hours=c%24,e+=q(c/24),h=q(rb(e)),e-=q(sb(h)),f+=q(e/30),e%=30,h+=q(f/12),f%=12,g.days=e,g.months=f,g.years=h},abs:function(){return this._milliseconds=Math.abs(this._milliseconds),this._days=Math.abs(this._days),this._months=Math.abs(this._months),this._data.milliseconds=Math.abs(this._data.milliseconds),this._data.seconds=Math.abs(this._data.seconds),this._data.minutes=Math.abs(this._data.minutes),this._data.hours=Math.abs(this._data.hours),this._data.months=Math.abs(this._data.months),this._data.years=Math.abs(this._data.years),this},weeks:function(){return q(this.days()/7)},valueOf:function(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*C(this._months/12)
// @ts-ignore
},humanize:function(a){var b=ib(this,!a,this.localeData());return a&&(b=this.localeData().pastFuture(+this,b)),this.localeData().postformat(b)},add:function(a,b){var c=vb.duration(a,b);return this._milliseconds+=c._milliseconds,this._days+=c._days,this._months+=c._months,this._bubble(),this},subtract:function(a,b){var c=vb.duration(a,b);return this._milliseconds-=c._milliseconds,this._days-=c._days,this._months-=c._months,this._bubble(),this},get:function(a){return a=z(a),this[a.toLowerCase()+"s"]()},as:function(a){var b,c;if(a=z(a),"month"===a||"year"===a)return b=this._days+this._milliseconds/864e5,c=this._months+12*rb(b),"month"===a?c:c/12;switch(b=this._days+Math.round(sb(this._months/12)),a){case"week":return b/7+this._milliseconds/6048e5;case"day":return b+this._milliseconds/864e5;case"hour":return 24*b+this._milliseconds/36e5;case"minute":return 24*b*60+this._milliseconds/6e4;case"second":return 24*b*60*60+this._milliseconds/1e3;case"millisecond":return Math.floor(24*b*60*60*1e3)+this._milliseconds;default:throw new Error("Unknown unit "+a)}},lang:vb.fn.lang,locale:vb.fn.locale,toIsoString:f("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",function(){return this.toISOString()}),toISOString:function(){var a=Math.abs(this.years()),b=Math.abs(this.months()),c=Math.abs(this.days()),d=Math.abs(this.hours()),e=Math.abs(this.minutes()),f=Math.abs(this.seconds()+this.milliseconds()/1e3);return this.asSeconds()?(this.asSeconds()<0?"-":"")+"P"+(a?a+"Y":"")+(b?b+"M":"")+(c?c+"D":"")+(d||e||f?"T":"")+(d?d+"H":"")+(e?e+"M":"")+(f?f+"S":""):"P0D"},localeData:function(){return this._locale},toJSON:function(){return this.toISOString()}}),vb.duration.fn.toString=vb.duration.fn.toISOString;for(xb in kc)c(kc,xb)&&tb(xb.toLowerCase());vb.duration.fn.asMilliseconds=function(){return this.as("ms")},vb.duration.fn.asSeconds=function(){return this.as("s")},vb.duration.fn.asMinutes=function(){return this.as("m")},vb.duration.fn.asHours=function(){return this.as("h")},vb.duration.fn.asDays=function(){return this.as("d")},vb.duration.fn.asWeeks=function(){return this.as("weeks")},vb.duration.fn.asMonths=function(){return this.as("M")},vb.duration.fn.asYears=function(){return this.as("y")},vb.locale("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(a){var b=a%10,c=1===C(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th";return a+c}}),Lb?module.exports=vb:"function"==typeof define&&define.amd?(define(function(a,b,c){return c.config&&c.config()&&c.config().noGlobal===!0&&(zb.moment=wb),vb}),ub(!0)):ub()}).call(this);
/*! http://mths.be/placeholder v2.0.8 by @mathias */
// @ts-ignore
;(function(window,document,$){var isOperaMini=Object.prototype.toString.call(window.operamini)=="[object OperaMini]";var isInputSupported="placeholder"in document.createElement("input")&&!isOperaMini;var isTextareaSupported="placeholder"in document.createElement("textarea")&&!isOperaMini;var prototype=$.fn;var valHooks=$.valHooks;var propHooks=$.propHooks;var hooks;var placeholder;if(isInputSupported&&isTextareaSupported){placeholder=prototype.placeholder=function(){return this};placeholder.input=placeholder.textarea=true}else{placeholder=prototype.placeholder=function(){var $this=this;$this.filter((isInputSupported?"textarea":":input")+"[placeholder]").not(".placeholder").bind({"focus.placeholder":clearPlaceholder,"blur.placeholder":setPlaceholder}).data("placeholder-enabled",true).trigger("blur.placeholder");return $this};placeholder.input=isInputSupported;placeholder.textarea=isTextareaSupported;hooks={get:function(element){var $element=$(element);var $passwordInput=$element.data("placeholder-password");if($passwordInput){return $passwordInput[0].value}return $element.data("placeholder-enabled")&&$element.hasClass("placeholder")?"":element.value},set:function(element,value){var $element=$(element);var $passwordInput=$element.data("placeholder-password");if($passwordInput){return $passwordInput[0].value=value}if(!$element.data("placeholder-enabled")){return element.value=value}if(value==""){element.value=value;if(element!=safeActiveElement()){setPlaceholder.call(element)}}else if($element.hasClass("placeholder")){clearPlaceholder.call(element,true,value)||(element.value=value)}else{element.value=value}return $element}};if(!isInputSupported){valHooks.input=hooks;propHooks.value=hooks}if(!isTextareaSupported){valHooks.textarea=hooks;propHooks.value=hooks}$(function(){$(document).delegate("form","submit.placeholder",function(){var $inputs=$(".placeholder",this).each(clearPlaceholder);setTimeout(function(){$inputs.each(setPlaceholder)},10)})});$(window).bind("beforeunload.placeholder",function(){$(".placeholder").each(function(){this.value=""})})}function args(elem){var newAttrs={};var rinlinejQuery=/^jQuery\d+$/;$.each(elem.attributes,function(i,attr){if(attr.specified&&!rinlinejQuery.test(attr.name)){newAttrs[attr.name]=attr.value}});return newAttrs}function clearPlaceholder(event,value){var input=this;var $input=$(input);if(input.value==$input.attr("placeholder")&&$input.hasClass("placeholder")){if($input.data("placeholder-password")){$input=$input.hide().next().show().attr("id",$input.removeAttr("id").data("placeholder-id"));if(event===true){return $input[0].value=value}$input.focus()}else{input.value="";$input.removeClass("placeholder");input==safeActiveElement()&&input.select()}}}function setPlaceholder(){var $replacement;var input=this;var $input=$(input);var id=this.id;if(input.value==""){if(input.type=="password"){if(!$input.data("placeholder-textinput")){try{$replacement=$input.clone().attr({type:"text"})}catch(e){$replacement=$("<input>").attr($.extend(args(this),{type:"text"}))}$replacement.removeAttr("name").data({"placeholder-password":$input,"placeholder-id":id}).bind("focus.placeholder",clearPlaceholder);$input.data({"placeholder-textinput":$replacement,"placeholder-id":id}).before($replacement)}$input=$input.removeAttr("id").hide().prev().attr("id",id).show()}$input.addClass("placeholder");$input[0].value=$input.attr("placeholder")}else{$input.removeClass("placeholder")}}function safeActiveElement(){try{return document.activeElement}catch(exception){}}})(this,document,jQuery);
(function($) {
  $.fn.extend({ ragadjust: function() {
    var smallwords = /(\s|^)(([a-zA-Z-_(]{1}('|’)*\s)+)/gi, // words with 1 character
    dashes     = /\s*\S*[-—]\S*\s*/gi,
    elehtml;

    this.each(function()  {
      elehtml = $(this).html().replace(smallwords, function(contents, p1, p2) {
        return p1 + p2.replace(/\s/g, '&#160;');
      }).
      replace(dashes, function(contents) {
        if(contents.match(/[-—]\s+/))
          contents = contents.replace(/\s$/g, '&#160;');

        if(contents.match(/\s+[-—]/))
          contents = contents.replace(/^\s+/g, '&#160;');

        if(contents.match(/\S+[-—]\S+/))
          contents = contents.replace(/(\S+[-—]\S+)/g,  "<span style='white-space: nowrap'>$1</span>");

          return contents
      });

      $(this).html(elehtml);
    });

    return false;
    }
  });
})(jQuery);
_.namespace('DailyKos.Twitter');

(function($){
  var didInjectTwitter = false;
  // renders twitter links into tweet embeds
  window.DailyKos.Twitter.renderTweetEmbeds = function(node) {
    if(didInjectTwitter === false) {
      didInjectTwitter = true;
      loadTwitter();
    }

    twttr.ready(function (twttr) {
      twttr.widgets.load(node);
    });
  };

  // Get all tweets.
  // $('body').twtGetTweets()
  $.fn.twtGetTweets = function() {
    return this.find('.twitter-tweet').parent();
  };

  // Get rendered tweets.
  // $('body').twtGetRenderedTweets()
  $.fn.twtGetRenderedTweets = function() {
    return this.find('.twitter-tweet-rendered').parent();
  };

  // Get a list of rendered tweets that have no inner body html.
  // $('body').twtGetEmptyTweets()
  $.fn.twtGetEmptyTweets = function() {
    var emptyBody = function(i, el){
      try {
        return !el.getElementsByTagName('iframe')[0].contentDocument.body.innerHTML;
      } catch(e) {
        return false;
      }
    };

    return this.twtGetRenderedTweets().filter(emptyBody);
  };

  // Render tweet placeholders in child nodes.
  // $('body').twtRenderTweets()
  $.fn.twtRenderTweets = function() {
    this.each(function(i, el){
      DailyKos.Twitter.renderTweetEmbeds(el);
    });

    return this;
  };

  // Looks in child node and re-renders empty tweets.
  // Use when you have a situation where you have a tweet iframe but it's empty.
  // $('#story').twtRepairTweets()
  $.fn.twtRepairTweets = function() {
    var emptyTweets = this.
      twtGetEmptyTweets().
      map(function(i, tweet){
        var strHtml = tweet.attributes['data-twitter-content'].value;
        strHtml = _.unescape(strHtml);
        var $html = $(strHtml);
        $(this).find('iframe').replaceWith($html);
        return $html[0];
      });

    emptyTweets.parent().twtRenderTweets();

    return this;
  };

  function loadTwitter () {
    window.twttr = (function(d, s, id) {
      var js, fjs = d.getElementsByTagName(s)[0],
        t = window.twttr || {};
      if (d.getElementById(id)) return;
      js = d.createElement(s);
      js.id = id;
      js.src = "https://platform.twitter.com/widgets.js";
      fjs.parentNode.insertBefore(js, fjs);

      t._e = [];
      t.ready = function(f) {
        t._e.push(f);
      };

      return t;
    }(document, "script", "twitter-wjs"));
  }
})(jQuery);
/* globals DK jQuery _ instgrm */

_.namespace('DK.Instagram');

(function ($) {
  DK.Instagram.getIDFromURL = function (url) {
    var match = url.match(/^(?:(http:|https:)\/\/)?(?:www\.)?(instagram.com|instagr.am)\/p\/([a-zA-Z0-9_-]+)/);
    if (match) {
      return match[3];
    }
  };

  DK.Instagram.insertInstagram = function (instagramId, ed) {
    $.ajax({
      url: 'https://graph.facebook.com/v8.0/instagram_oembed?' + 'url=https://www.instagram.com/p/' + instagramId + '&access_token=' + DailyKos.INSTAGRAM_ACCESS_TOKEN,
      dataType: 'jsonp',
      success: function (data, textStatus, jqXHR) {
        console.log("returned from instagram");
        if (data['error']) {
          ed.insertHtml(DK.Instagram.wrappedInstagram(data['error']['message'] + ". Post may be private."));
        } else {
          ed.insertHtml(DK.Instagram.wrappedInstagram(data.html));
        }
        console.log("inserted instagram")
        DK.Instagram.instagramRenderEmbeds();
      },
      error: function(data, textStatus, errorThrown) {
        console.error('Error in DK.Instagram.insertInstagram: ', errorThrown);
      }
    });
  };

  // wrap pasted Instagram embed code
  DK.Instagram.wrappedInstagram = function (pastedText) {
    return '' +
    '<div class="dk-editor-embed center-block" data-instagram-content="' +
    DailyKos.Embeds.escapedEmbed(pastedText) + '">' +
      '<div class="remove-embed-content">x</div>' + pastedText +
      '</div>';
  };

  var hasBeenCalledBefore = false;
  DK.Instagram.instagramRenderEmbeds = function () {
    console.log("about to load script to render embeds");
    if (hasBeenCalledBefore) {
      return $(document).trigger('calledInstagramRender');
    }

    hasBeenCalledBefore = true;

    $.getScript('https://platform.instagram.com/en_US/embeds.js').done(function (data, textStatus, jqxhr) {
      $(document).trigger('loadedInstagram');
      console.log("loaded instagram script");
    })
    .fail(function(jqxhr, settings, exception){
      console.error("failed to load instagram script")
    });
  };

  $(document).onSync('loadedInstagram calledInstagramRender', function (events, datum) {
    instgrm.Embeds.process();
    console.log("processed instagram(s)");
  });
})(jQuery);
/* globals DK jQuery _ ap */

_.namespace('DK.AssociatedPress');

(function ($) {
  DK.AssociatedPress.resizeIFrameToFitContent = function(iframeSelector) {
    window.addEventListener('load', function(e) {
      iFrameResize({ checkOrigin: false }, iframeSelector);
    });
  }

  DK.AssociatedPress.renderEmbeds = function () {
    var iframes = $("iframe[src*='//elections.ap.org/widgets/content/']");
    jQuery.map(iframes, function(iframe) {
      var iframeSrc = iframe.attributes['src'].value;
      DK.AssociatedPress.resizeIFrameToFitContent("iframe[src='" + iframeSrc + "']");
    });
  }
})(jQuery);
if(!DailyKos) var DailyKos = {};
if (!DailyKos.Domain) {
  var resultDomain = window.location.host.toString().match(/\w+\.(stage|prod)\.dkos\.us|\w+\.com|\w+\.local/i);
  if (resultDomain != null) {
    DailyKos.Domain = resultDomain[0];
  }
}

DailyKos.CookieDomain = "." + DailyKos.Domain;
DailyKos.MobileDomain = "m." + DailyKos.Domain;

DailyKos.viewMobileSwitch = (function() {
  var cookieOptions = function(){
    return {
      path: '/',
      domain: DailyKos.CookieDomain,
      expires: 7
    };
  };

  var viewMobileSite = function(path = '') {
    $.cookie('skip_mobile', 'off', cookieOptions());
    location.replace(location.protocol + '//' + DailyKos.MobileDomain + path);
  };

  var displayViewMobileLink = function() {
    if ($.cookie('skip_mobile') == 'on') {
      $(".will-paginate").removeClass("col-sm-10")
      $(".will-paginate").addClass("col-sm-9");
      $(".blog-rss-link").removeClass("col-sm-2");
      $(".blog-rss-link").addClass("col-sm-1");
      $(".view-mobile-site-link").removeClass("hidden");
    }
    return false;
  }

  return {
    viewMobileSite: viewMobileSite,
    displayViewMobileLink: displayViewMobileLink
  }

})();
(function ($) {
  var defaultTimeout   = 30000;  // Default time to wait between fetches if timeout arg not provided.
  var prevStoryData    = null;   // A copy of the last story fetch.
  var latestUpdateTime = null;   // The time of the last story-update.
  var timeout;

  $.fn.autoUpdateStory = function(_url, _timeout) {
    timeout = _timeout || defaultTimeout;
    waitAndUpdate(_url);
  };

  function waitAndUpdate(url) {
    setTimeout(function(){
      $.ajax({
        url: url + "?cache_key=" + cache_key_by_time(),
        success: function(data) {
          if(!storyChanged(data)) return;
          var storyID = DailyKos.Story.storyID;
          var story = $('<div>').html(data);
          var updates = getUpdates(story);
          append(updates);
          updates.each(function(){ DailyKos.Story.postRender(storyID, this); });
        },
        complete: function(){ waitAndUpdate(url); }
      });
    }, timeout);
  }

  // Use this to treat the last live update time as the cache key.
  // Usually, we'll be waiting for varnish to clear after 1.minute
  function cache_key_by_update() {
    return getLatestUpdateTime();
  }

  // Use this to varnish cache for x seconds.
  //
  // This returns the time since epoch in increments of x;
  // where x is the defaultTimeout.
  //
  // The downside is the user's browser time could be off by minutes (hours?)
  function cache_key_by_time() {
    // Get seconds since epoch (same around the world regardless of timezone)
    var msec = new Date();
    // Round down to nearest timeout interval
    msec = Math.floor(msec / timeout) * timeout;

    return msec;
  }

  // Return a list of new (incoming) live-updates;
  // this is the set of live-updates fetched from the server
  // minus live-updates that are already on the page.
  function getUpdates(story) {
    var thisUpdateTime = getLatestUpdateTime();

    var byNewUpdates = function(i, el){
      var updateTime  = el.dataset.epochTime;
      var isNewUpdate = updateTime > thisUpdateTime;
      if (isNewUpdate) latestUpdateTime = updateTime;
      return isNewUpdate;
    };

    return story.find('.live-update-wrapper').filter(byNewUpdates);
  }

  function append (updates) {
    var $intro = $('.story-intro');
    var $body  = $('.story-body');

    var $story = ($body.length) ? $body : $intro;

    $story.append(updates);
  }

  // Return the most recent .live-update-wrapper off the story-page.
  function getLatestUpdateTime() {
    if (latestUpdateTime) return latestUpdateTime;

    // This is our first time scraping the page for updates.
    $('.live-update-wrapper').each(function(i, el){
      var updateTime = el.dataset.epochTime;
      if (updateTime > latestUpdateTime)
        latestUpdateTime = updateTime;
    });

    // Default last update to '0' if we scraped and found no live-updates.
    latestUpdateTime = latestUpdateTime || '0';

    return latestUpdateTime;
  }

  // Keep a copy of previous story data fetch
  // Compare with current story data fetch
  function storyChanged(storyStr) {
    var changed = (prevStoryData !== storyStr);
    prevStoryData = storyStr;
    return changed;
  }
})(jQuery);
/* globals $ _ DK */

_.namespace('DK.CKE.Clipboard');

(function () {
  // Returns 'text/plain' OR normalized 'text/html' from the clipboard.
  DK.CKE.Clipboard.getFormattedPaste = function (evt) {
    var data;

    if (shouldUsePlainText(evt)) {
      data = evt.data.dataTransfer.getData('text/plain'); // or 'text/html'
      data = $('<div>').text(data).html();
    } else {
      var escapedIframeTag = /\&gt\;\&lt\;\/iframe\&gt\;/i;
      if (escapedIframeTag.test(evt.data.dataValue)) {
        data = evt.data.dataTransfer.getData('text/plain');
      } else {
        data = evt.data.dataValue;
        data = DK.CKE.Normalize.all(data, evt);
      }

      data = DK.Embeds.filterPasteContent(data, evt.editor);
    }

    return data;
  };

  // Determines whether the paste should be treated as plain text.
  function shouldUsePlainText (evt) {
    var pasteTxt = evt.data.dataValue;

    // TODO Add tests that ensure this is WYSIWYG in both scenarios:
    // - https://dailykos.slack.com/archives/D02GKB93K/p1484095432000008
    // - https://www.pivotaltracker.com/story/show/112442257

    // Some users write HTML in Gmail. Gmail will both: HYPERLINK-urls and ESCAPE-html. When this happens, we should return plain text.
    // This ignores gmail's hyperlinking and treats the body as plain text, which is what we want.
    //
    // For example, send yourself this email:
    //   <div class="dkimg-r"><span class="image_container"><img src="http://images.dailykos.com/images/112631/small/White-Barn-Owl-w-text.jpg?1414103373" alt="" width="200" height="163"></img></span></div>
    //
    // Google will hyperlink the url AND escape the tags:
    //   <div style="color: rgb(34, 34, 34); font-family: arial, sans-serif; font-size: 12.8px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);">&lt;div class="dkimg-r"&gt;&lt;span class="image_container"&gt;&lt;img src="<a href="http://images.dailykos.com/images/112631/small/White-Barn-Owl-w-text.jpg?1414103373" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=http://images.dailykos.com/images/11…=gmail&amp;ust=1484184358541000&amp;usg=AFQjCNGX_kZcKnvSWeYdTCFDq0aVm6k12g" style="color: rgb(17, 85, 204);">http://images.dailykos.<wbr>com/images/112631/small/White-<wbr>Barn-Owl-w-text.jpg?1414103373</a><wbr>" alt="" width="200" height="163"&gt;&lt;/img&gt;&lt;/span&gt;&lt;/<wbr>div&gt;</div>
    //
    // Just treat it like plain text.
    var gmailImgTag = /&lt;img src="</i;
    if (gmailImgTag.test(pasteTxt)) return true;

    return false;
  }
})();
// Problem description:
// 1. Paste an unrendered ActionNetwork embed into CKE.
// 2. Perform a CKE-widget-upcast.
// 3. Render the ActionNetwork embed from within CKE.
// >  When editor.getData() is called, CKE will crash.
//
// Dev commentary:
// This is likely happening because the rendering (3) alters elements inside the ActionNetwork embed.
// Then, when editor.getData() is called, CKE grabs elements/attributes from the DOM based on its
// internal data structure (in memory / not in DOM) and since the two are out of sync, it crashes.
//
// Workaround:
// Ok, so here's the strategy:
// When you paste an Action Network embed into the CKE, we'll render the embed outside of CKE
// (in a hidden element inside <body>), then when it's rendered, we'll insert that HTML into CKE.

;(function () {

  var Embeds = _.namespace('DK.Embeds');
  var id     = 'dk-hidden-embed';

  // Given a string of HTML, this will render the ActionNetwork embed
  // Once rendered, the callback is invoked with the rendered HTML as a string argument.
  Embeds.renderHtmlString = function (html, callback) {
    if (!isActionNetwork(html))
      return renderCallback(html, callback);

    var $div = getHiddenDiv();
    $div.html(html);
    render(callback, $div);
  };

return;

  // Return the hidden div where we'll be rendering.
  function getHiddenDiv() {
    var $div = $('#'+id);

    // Return found div
    if ($div.length) return $div;

    // Create new div
    $div = $('<div id="'+id+'" class="hidden" />');
    $('body').append($div);
    return $div;
  }

  // On render complete, send rendered html to callback.
  function render(callback, $div) {
    $div.actionNetworkRender();

    $(document).one('can_embed_loaded:post-post-render', function (e, data) {
      var $div = $('#'+id);
      var html = $div.html();

      renderCallback(html, callback);

      $div.empty();
    });
  }

  // Invoke the user's callback with the html
  // Render twitter or instagram embed
  function renderCallback(html, callback) {
    callback(html);
    Embeds.renderTextMatch(html);
  }

  // Does this string of HTML contain an action-network embed?
  function isActionNetwork(str) {
    return str.match(/dk-action-embed|dk-action-link/i);
  }

})();
/* globals _ DK */

_.namespace('DK.CKE.Normalize');

DK.CKE.Normalize.all = function (html, evt) {
  var Normalize = DK.CKE.Normalize;

  html = html.replace(/[\n\r]/g, '');
  html = DailyKos.textHelpers.trimWhitespace(html);
  html = Normalize.twitter(html);
  html = Normalize.actionnetwork(html);
  html = Normalize.iframe(html);
  html = Normalize.table(html, evt);
  html = Normalize.whiteSpace(html);
  html = Normalize.removeJunk(html);

  return html;
};
// this is a space-separated list of all classes that could possibly contain an embed.
DK.CKE.Normalize.wrapperClasses = '.cke_widget_wrapper, .dk-editor-embed, .cke_widget_element';
DK.CKE.Normalize.actionnetwork = function (html) {
  var $html = $('<div>').html(html);

  $html
    .find('.dk-action-embed')
    .each(convertToLink);

  return $html.html();

  function convertToLink () {
    var $embed   = $(this);
    var $wrapper = $embed.closest('.cke_widget_wrapper');

    if (!$wrapper.length) return;

    var data  = $wrapper.find('.dk-action-embed').data();
    var $link = $("<a>Campaign Action</a>").attr({
      "class":        "dk-action-link",
      "href":         data.href,
      "data-action":  data.action,
      "data-slug":    data.slug,
      "data-src":     data.src
    });

    $wrapper.replaceWith($link);
  }
};
// Handle copy/pasting for all other iframe embeds (anything non-twitter, basically).
//
// Here, we remove upcasted embeds (e.g. embeds that were wrapped in '.dk-editor-embed') and
// replace it with the original embed-iframe. "FilterPasteContent" will do the upcasting/wrapping.
// We do this so that embeds are never upcasted multiple times and wrapped in multiple
// dk-editor-embed blocks.
DK.CKE.Normalize.iframe = function (html) {
  var wrapperClasses = DK.CKE.Normalize.wrapperClasses;

  var $html      = $('<div>').html(html);
  var $iframes   = $html.find('iframe');

  $iframes.removeAttr('width height style'); // remove user-defined attributes

  $iframes.each(function(){
    var $iframe  = $(this);
    var $wrapper = $iframe.parents(wrapperClasses).last(); // get greatest ancestor
    $wrapper.replaceWith($iframe);
  });

  return $html.html();
};
/* globals $ DK */

(function () {
  DK.CKE.Normalize.removeJunk = function (html) {
    var $html = $('<div>').html(html);

    unwrapLiveupdate($html);

    return $html.html();
  };

  function unwrapLiveupdate ($html) {
    $html.find('.live-update-wrapper >').unwrap();
    $html.find('.live-update-content >').unwrap();
  }
})();
/* globals $ DK */

// Wrap tables in .table-wrapper, which provides a scrolling container when it is too wide.
(function () {
  DK.CKE.Normalize.table = function (html, evt) {
    var $html = $('<div>').html(html);
    var $tables = $html.find('table');

    // Add a table-wrapper, which adds scrollability for large tables
    var unwrappedTables = $tables.not('div.table-wrapper table');
    unwrappedTables.wrap('<div class="table-wrapper"></div>');

    // Classify
    // $tables.addClass(tableClass(evt));

    // Return normalized table
    return $html.html();
  };

  // Figure out if a dk5-table was in the raw clipboard.
  function tableClass (evt) {
    var isDk5Table = false;

    try {
      isDk5Table = evt.data.dataTransfer.getData('text/html').match(/dk5-table/i);
    } catch (e) {
      console.warn(e);
    }

    return (isDk5Table) ? 'dk5-table' : 'basic-table';
  }
})();
// Handle twitter-embed copy/pasting.
//
// When you copy/paste a twitter-embed, we're going to replace the entire embed with the
// data-twitter-content attr, which contains the minimum elements necessary to render a twitter
// embed. "FilterPasteContent" will then convert your link into an actual iframe embed. We do this
// so that twitter embeds are never upcasted multiple times and wrapped in multiple dk-editor-embed
// blocks. (When copying an embed and pasting it again, CKE & our code will try to upcast embeds
// into widgets).
DK.CKE.Normalize.twitter = function (html) {
  var wrapperClasses = DK.CKE.Normalize.wrapperClasses;

  var $html      = $('<div>').html(html);
  var $tweets    = $html.find('[data-twitter-content]');

  $tweets.each(function(){
    var $tweet   = $(this);
    var $wrapper = $tweet.parents(wrapperClasses).last(); // get greatest ancestor
    var content  = $tweet.data('twitterContent');
    if (!$wrapper.length) $wrapper = $tweet; // you have no wrappers, this pasted tweet came from a published story

    $wrapper.replaceWith(content);
  });

  return $html.html();
};
/* globals $ DK */

// Convert consecutive spaces/nbsps into interleaving spaces/nbsps
//
// The result always starts with a [space]
//
// Given: "[space][space]"         Return: "[space][nbsp]"
// Given: "[nbsp][nbsp]"           Return: "[space][nbsp]"
// Given: "[nbsp][nbsp][nbsp]"     Return: "[space][nbsp][space]"
//
// - Receives a string of HTML
// - We can't just regex and replace the HTML, because HTML commonly is indented with 2/4 spaces.
// - We need to regex and replace only the text nodes.
(function () {
  DK.CKE.Normalize.whiteSpace = function (html) {
    var $html = $('<div>').html(html);

    $html.getTextNodes().each(function (i, textNode) {
      var txt = textNode.nodeValue;

      // If this text node only contains return characters(*), then don't interleave nbsps into this node.
      // If we proceed to interleave with nbsps, it will create a blank line, where there was none before.
      // (*) ascii carriage returns (i.e. CRLF), not HTML (i.e. <br> or <p>)
      if (txt.trim() === '') return;

      // Interleave spaces on this text node.
      textNode.nodeValue = interleaveSpaces(txt);
    });

    return $html.html();
  };

  // Interleave spaces
  //
  // [space][space]        => [space][nbsp;]
  // [nbsp;][nbsp;]        => [space][nbsp;]
  // [space][nbsp;]        => [space][nbsp;]
  // [nbsp;][space]        => [space][nbsp;]
  // [space][space][space] => [space][nbsp;][space]
  function interleaveSpaces (str) {
    if (!str) return str;

    // Convert spaces (including hard-spaces such as &nbsp;)
    // into regular spaces
    str = str.replace(/\s|&nbsp;/ig, ' ');

    // Match any 2 consecutive spaces and/or &nbsp; characters
    // and replace them with a space and &nbsp;
    //
    // Note:
    //    The code below contains hidden nbsps.
    //    str.replace(/\s{2}/g, ' &nbsp;');
    str = str.replace(/\s{2}/g, '  ');

    return str;
  }
})();
/* globals $ _ DailyKos */

_.namespace('DailyKos.textHelpers');
    // CKEDITOR ONLY
DailyKos.textHelpers.trimWhitespace = function (textToTrim) {
  if (!textToTrim) return;
  var wrappedTextToTrim =  $("<div>").html(textToTrim);
  wrappedTextToTrim.markTextNodes();
  wrappedTextToTrim.find('.is-empty-p + .is-empty-p').remove();
  wrappedTextToTrim = DailyKos.textHelpers.removeDuplicateLineBreaks(wrappedTextToTrim);
  wrappedTextToTrim = DailyKos.textHelpers.removeFirstAndLastBreaks(wrappedTextToTrim);
  wrappedTextToTrim.unmarkTextNodes();
  var cleanTextToTrim = wrappedTextToTrim.html();
  return cleanTextToTrim;
};

DailyKos.textHelpers.removeDuplicateLineBreaks = function ($node) {
  $node
    .find('p, div')
    .find('> br + br')
    .nextUntil(':not(br)')
    .remove();

  $node
    .find('> br')
    .nextUntil(':not(br)')
    .remove();

  return $node;
};

DailyKos.textHelpers.removeFirstAndLastBreaks = function ($node) {
  var $blocks = $node.find('p, div');

  $blocks.each(function (i, block) {
    var $block = $(block);
    var contents = $block.contents();

    if (!contents.first().isTextNode()) $block.find('br:first-child:not(:only-child)').remove();
    if (!contents.last().isTextNode()) $block.find('br:last-child:not(:only-child)').remove();
  });

  return $node;
};

(function($) {
  if(!window.DailyKos) window.DailyKos = {};
  if(!window.DailyKos.Ads) window.DailyKos.Ads = {};

  var self = window.DailyKos.Ads;

  $.extend(window.DailyKos.Ads, {
    whoamiLoaded: function (ev, json) {
      var body = $('body');

      if (DailyKos.canSubscribe()) {
        body.addClass('is-unsubscribed');
        body.addClass('show-ads');
      } else {
        if (DailyKos.canHideShowAds()) {
          body.addClass('can-hide-show-ads');

          if (DailyKos.showsAds()) {
            body.removeClass('hide-ads');
            body.addClass('show-ads');
          } else {
            body.removeClass('show-ads');
            body.addClass('hide-ads');
          }
        } else {
          body.addClass('show-ads');
        }
      }
    },

    push: function (parentEl, delaysLoad, cb) {
      // Callback function should take parentEl as an argument

      if (DailyKos.showsAds()) {
        // true if not signed in or has not disabled ads:
        if(delaysLoad) {
          $(window).load(function () {
            $(parentEl).removeClass('hidden');

            // Invoke callback function after window loads and if present
            if (cb) {
              cb(parentEl);
            }
          });
        } else {
          $(parentEl).removeClass('hidden');
        }
      }
      else {
        $(parentEl).addClass('hidden');
      }
    },

    pushMobile: function (parentEl, delaysLoad) {
      if ($.browser.mobile) {
        self.push(parentEl, delaysLoad);
      }
    },

    getLastSplashed: function() {
      var lastSplashed = +$.cookie('_dk_last_splashed');
      if (lastSplashed) {
        var lastSplashedDate = new Date(lastSplashed);
        return lastSplashedDate.toString();
      } else {
        return '';
      }
    },

    getSignedPetitions: function() {
      if ($.cookie('dk_signed_list') != null) {
        return $.cookie('dk_signed_list');
      } else {
        return '';
      }
    },

    isFrontPage: function() {
      var fp_list = ['legacy-front-page', 'front-page'];
      if (DailyKos.pageType) return fp_list.indexOf(DailyKos.pageType) !== -1;
    },

    isBlogsPage: function() {
      if (DailyKos.pageType) return DailyKos.pageType === 'blogs';
    },

    isStoryPage: function() {
      if (DailyKos.pageType) return DailyKos.pageType === 'stories';
    },

    isAdsPage: function() {
      return (DailyKos.showsAds() && (DailyKos.Ads.isFrontPage() || DailyKos.Ads.isBlogsPage() || DailyKos.Ads.isStoryPage()));
    },

    fixScrolling: function(parentEl) {
      var $parentEl = $(parentEl)
      fixElementScrolling($parentEl);
      $parentEl.addClass('fixed-ad');
    },

  });

  DailyKos.Whoami.onLoadAndFromCache(DailyKos.Ads.whoamiLoaded);
})(jQuery);
// Disable ads via query string parameters.
//
// Visiting: https://www.dailykos.com?debug=true&adSlotName1=false
// Disables: adSlotName1
// Enables:  debug output

_.namespace('DailyKos.Ads.Google');

(function () {
  DailyKos.Ads.Google.init = init;

  function init () {
    _([
      'defineSlot',
      'defineOutOfPageSlot'
    ]).each(defineFunction);

    return DailyKos.Ads.Google;
  }

  function defineFunction (fn) {
    DailyKos.Ads.Google[fn] = function (id) {
      if (isEnabled(id))
        return googletag[fn].apply(googletag, arguments);
      else
        return {addService: noop};
    };
  }

  function isEnabled(adUnitPath) {
    var adUnitName  = adName(adUnitPath);
    var queryString = location.search.toLowerCase();
    var disableFlag = (adUnitName + '=false').toLowerCase();
    var isDisabled  = queryString.match(disableFlag);

    log('Ad slot ' + adUnitName + ' enabled: ' + !isDisabled);

    return !isDisabled;
  }

  function adName(adUnitPath) {
    var paths = adUnitPath.split('/');

    return _(paths).last();
  }

  function log(msg) {
    if (location.search.match('debug=true'))
      console.log(msg);
  }

  function noop () { }
})();
_.namespace('DailyKos.Ads.Google');

(function () {
  DailyKos.Ads.Google.addMobilePetitionEventListeners = function ($IFrame) {
    resizeMobilePetition($IFrame);
  }

  return;

  // Resize the Google Ad IFrame to fit the content of the DFP Ad.
  function resizeMobilePetition ($IFrame) {
    var resizeAdIFrame = getIFrameResizer($IFrame);

    resizeAdIFrame();
    $(window).resize(resizeAdIFrame);
  }

  // Returns a function that re-sizes the IFrame to fit the ad-content
  function getIFrameResizer ($IFrame) {
    var resizer = function () {
      try {
        $IFrame.width('100%');
        var $ad = $IFrame[0].contentWindow.$('#ad');
        var adHeight = $ad.outerHeight();

        $IFrame.height(adHeight);
      } catch (e) {
        console.warn('getIFrameResizer: nothing to resize. petition has already removed');
      }
    }

    return _.debounce(resizer, 200);
  }
})();
_.namespace('App.Ads.Splash.Cookies');

// App.Ads.Splash.Cookies.signedIds is a list of signed splash ids ['1', '!2', '3']; NOTE: if it begins with '!' it is the hash of a splash name

(function(){
  var cookie = App.Ads.Splash.Cookies;

  _(App.Ads.Splash.Cookies).extend({
    setCookie: setCookie,
    getCookie: getCookie,
    hash: hash,
    isSigned: isSigned,
    addToSignedSplash: addToSignedSplash,
    cleanupCookies: cleanupCookies,
  });

  function setCookie(key, val, expires) {
    if (cookie.setSplashCookie === 'No') return;

    if (expires === false) expires = 70000; // NO EXPIRATION

    var domain;
    var resultDomain = window.location.host.toString().match(/\w+\.(stage|prod)\.dkos\.us|\w+\.com|\w+\.local/i);
    if (resultDomain != null) {
      domain = resultDomain[0];
    }

    try {
      var opts = {
        path:     '/',
        expires:  expires,
        domain:   domain
      };
      $.cookie(key, val, opts);
    } catch(e) {
      console.warn('Error calling setCookie');
      console.warn(e);
    }
  }

  function getCookie(key) {
    return $.cookie(key);
  }

  function hash(str) {
    var h = 0, i, chr, len;
    if (!str) return '!0';
    for (i = 0, len = str.length; i < len; i++) {
      chr   = str.charCodeAt(i);
      h  = ((h << 5) - h) + chr;
      h |= 0;
    }
    return '!' + h;
  }

  function isSigned(splashID) {
    splashID = '' + splashID;
    return _(cookie.signedIds).contains(splashID);
  }

  function addToSignedSplash(id) {
    id = '' + id;
    if (!id)          return; // No ID
    if (isSigned(id)) return; // ID already exists
    cookie.signedIds = cookie.signedIds || [];
    cookie.signedIds.push(id);
  }

  function cleanupCookies(){
    var signedNames;

    cookie.signedIds = getSplashSignedIds();
    signedNames = getSplashSignedNames();
    _(signedNames).each(function(name) { addToSignedSplash(hash(name)); });

    cookie.signedIds = capSignedPetitions(cookie.signedIds);
    setCookie('dk_signed_list', cookie.signedIds, false);
    _(signedNames).each(function(name) { setCookie(name, null, 0); });
  }

  function capSignedPetitions(signedIds) {
    var MAX_COOKIE_BYTES = 4096 * 0.75;
    var KEEP_RATIO       = 0.8;
    var numToKeep        = Math.ceil(signedIds.length * KEEP_RATIO);
    var isCookieTooLarge = signedIds.toString().length > MAX_COOKIE_BYTES;
    var oldestToNewest   = function(i){ return !!(+i) && +i; };

    if (!isCookieTooLarge) return signedIds;

    return _(signedIds)
      .chain()
      .sortBy(oldestToNewest)
      .last(numToKeep)
      .value();
  }

  function getSplashSignedIds() {
    var str = getCookie('dk_signed_list');
    if (!str) return [];
    var ids = str.split(',');
    var trim     = function(s){ return s.trim(); };
    var nonBlank = function(s){ return s; };
    return _(ids).map(trim).filter(nonBlank);
  }

  function getSplashSignedNames() {
    var cookieStrings  = document.cookie.split('; ');
    var isSplashCookie = function (cookieName) { return cookieName.match(/^dk_splash_/i); };
    var formatted = function(cookieString) {
      var cookieName = cookieString.split('=')[0];
      return decodeURIComponent(cookieName);
    };
    return _(cookieStrings).map(formatted).filter(isSplashCookie);
  }
})();
_.namespace('App.Ads.Splash');

(function() {
  var cookie = App.Ads.Splash.Cookies;

  function adOpts(opts) {
    return _({
      $iframeContainer: $(),  // the container of the iframe.
      hideAd:           noop, // a user-defined function that is called to hide the ad
      showAd:           noop, // a user-defined function that is called to show the ad
      onLoad:           noop  // a user-defined function that is called after the ad is loaded
    }).extend(opts)
  }

  // Load iframe
  // If splash data found, call main.
  // If no splash data found, wait for splash-data-ready event, then load, and call main.
  App.Ads.Splash.init = function(opts) {
    try {
      var ad      = adOpts(opts);
      var $iframe = ad.$iframeContainer.find('iframe:first');
      var iframe  = loadIFrame($iframe);

      if (iframe.isLoaded) {
        main(ad, iframe);
      } else {
        $(iframe.window).on('splash-data-ready', function() {
          iframe = loadIFrame($iframe);
          main(ad, iframe);
        });
      }
    } catch (e) {
      console.log(e);
      ad.$iframeContainer.remove();
    }
  };

  function main(ad, iframe) {
    cookie.cleanupCookies();

    if(!correctlyTraffickedAd(ad, iframe)) return ad.$iframeContainer.remove();
    if(!shouldShow(iframe)) return ad.$iframeContainer.remove();

    ad.showAd();

    iframe.window.placeSplash();
    addClickListeners(ad, iframe);

    ad.onLoad();

    if(iframe.splash.afterInitialize) iframe.splash.afterInitialize();
  }

  function loadIFrame($iframe) {
    var iframe = {
      isLoaded: false,
      splash: $iframe[0].contentWindow.Splash,
      window: $iframe[0].contentWindow,
      body:   $iframe.contents()
    };

    if (iframe.splash) {
      cookie.setSplashCookie = iframe.splash.setCookie;

      // If the splash code from DFP defines its own loading function,
      // call it and send it our current window so it can manipulate outside the iframe.
      if (iframe.splash.onload) iframe.splash.onload(window);

      iframe.isLoaded = true;
    }

    return iframe;
  }

  function shouldShow(iframe) {
    var lastSplashed   = parseInt(cookie.getCookie('_dk_last_splashed')) || 0;
    var splashSigned   = cookie.isSigned(iframe.splash.id) || cookie.isSigned(cookie.hash(iframe.splash.longCampaignName));
    var splashUnsigned = cookie.getCookie(iframe.splash.unsignedCookieName) === 'done';
    var timeSinceLastSplash = new Date() - lastSplashed;

    return (
      !splashSigned   &&
      !splashUnsigned &&
      timeSinceLastSplash > iframe.splash.minWaitPeriod
    );
  }

  function correctlyTraffickedAd (ad, iframe) {
    try {
      var adSlot = ad.$iframeContainer.attr('class');
      var adType = iframe.splash.type || 'Splash'; // Legacy splashes didn't have a splash.type

      // Correctly trafficked
      if (adType === 'Splash' && adSlot.match(/interstitial-ad/i))     return true;
      if (adType === 'Stripe' && adSlot.match(/desktop-stripe-ad/i))   return true;
      if (adType === 'Mobile' && adSlot.match(/mobile-petition-ad/i))  return true;

      // Incorrectly trafficked
      console.error('=============================================================================');
      console.error('#Activism - You have trafficked an ad to DFP incorrectly.');
      console.error('The ad is a', adType, 'but was trafficked to the', adSlot, 'slot');
      console.error('Title:', iframe.splash.title);
      console.error('=============================================================================');
    } catch (e) {
      console.error('Daily Kos error in correctlyTraffickedAd', e);
    }

    return false;
  }

  function addClickListeners (ad, iframe) {
    addSignButtonClickListeners(ad, iframe);
    addDismissButtonClickListeners(ad, iframe);
  }

  function addSignButtonClickListeners (ad, iframe) {
    var $document = $(iframe.window.document);
    var adBody = $document.find('#ad');

    if(adBody && adBody.hasClass('splash03')) {
      // When an action-network form is submitted successfully, mark it signed.
      $document.on('can_embed_submitted', function (e) { markSignedPetition(ad, iframe); });
    } else {
      // When a regular "take action" button is signed from the splash/stripe/petition, mark it signed.
      iframe.body.on('click', '#ad-button', function (e) { markSigned(ad, iframe); });
    }

    // Warning: do not remove this!
    // When an action-network form is submitted successfully, action-network will respond with a redirect to dailykos.com (this is configurable from Action Network's dashboard.)
    // Without this, an exception will be raised from non-production envs. On production the full-screen iframe will point at dailykos.com.
    $document.on('can_embed_submitted', preventDefault);

    return;

    function markSigned (ad, iframe) {
      cookie.addToSignedSplash(iframe.splash.id);
      cookie.setCookie('dk_signed_list', cookie.signedIds, false);
      cookie.setCookie('_dk_last_splashed', +(new Date()), false);
      dismissAd(ad);
      console.log('markSigned');
    }

    function markSignedPetition (ad, iframe) {
      $(iframe.window.find('body')).css({"display": 'none'});
      cookie.addToSignedSplash(iframe.splash.id);
      cookie.setCookie('dk_signed_list', cookie.signedIds, false);
      cookie.setCookie('_dk_last_splashed', +(new Date()), false);
      cookie.setCookie('dk_signed_location', document.location, new Date().getTime() + 30000);
      document.location = iframe.splash.clickUrl;
      console.log('markSigned');
    }

    function preventDefault (e) {
      e.preventDefault();
      e.stopPropagation();
      return false;
    }
  }

  function addDismissButtonClickListeners (ad, iframe) {
    iframe.body.on('touchstart click', '#ad-close, #scrim', markDismissed);

    $(document).keyup(function(e) {
      try {
        if (e.key.toLowerCase() === "escape") {
          markDismissed();
        }
      } catch (err) {
        console.error(err);
      }
    });

    function markDismissed (e) {
      cookie.setCookie(iframe.splash.unsignedCookieName, 'done', iframe.splash.closeCookieDuration);
      cookie.setCookie('_dk_last_splashed', +(new Date()), false);
      dismissAd(ad);
      e.preventDefault();
      console.log('markDismissed');
    }
  }

  function dismissAd (ad) {
    var $container = ad.$iframeContainer;
    var hideAd     = ad.hideAd;

    $container.fadeOut(hideAd);
  }

  function noop () { }
})();
// Short-widgets
//
// Defines a jQuery function `actionNetworkRender` that renders an action network short-widget.
//
// $('#el').actionNetworkRender()

;(function () {
  $.fn.actionNetworkRender = init;

  // Wraps the embed. ActionNetwork injects their widget into here.
  var EMBED_WRAP = "<div data-campaign-id='<%=campaignId%>' data-action='<%=action%>' data-slug='<%=slug%>' data-src='<%=src%>' data-href='<%=href%>' class='dk-action-embed dk-editor-embed'>" +
                     "<div id='<%=id_attr%>' class='can-<%=action%>-area-<%=slug%>' style='width: 100%'></div>" +
                   "</div>";
  // This is the <script src='...'>. This src is the path to the ActionNetwork javascript.
  // Ideally, we'd use "https://www.daiykos.com/extern/action/widgets/v3/<%=action%>/<%=slug%>?format=js&source=widget&can_widget_id=<%=id_attr%>"
  // However, when a widget is signed, a cookie is set from actionnetwork.org called can2_session that remembers your information. This can only be achieved if the script origin is actionnetwork.org.
  var SCRIPT_SRC = "https://actionnetwork.org/widgets/v3/<%=action%>/<%=slug%>?format=js&source=<%= source %>&can_widget_id=<%=id_attr%>";
  // ID attribute for EMBED_WRAP.
  var ID_ATTR    = "can-<%=action%>-area-<%=slug%>-<%=rand%>";
  var HREF       = "/campaigns/<%=action%>/<%=slug%>";

  var source = 'widget';
  // On the first call to $.actionNetworkRender, init, then call actionNetworkRender.
  function init (storyID) {
    EMBED_WRAP = _.template(EMBED_WRAP);
    ID_ATTR    = _.template(ID_ATTR);
    SCRIPT_SRC = _.template(SCRIPT_SRC);
    HREF       = _.template(HREF);
    if (storyID) {
      source = "story_" + storyID;
    }

    $.fn.actionNetworkRender = actionNetworkRender;
    this.actionNetworkRender();
  }

  function actionNetworkRender () {
    this.find('.dk-action-link')
        .each(renderEmbed);
  }

return;

  // Render petition link into an ActionNetwork embed
  function renderEmbed () {
    var $petition = $(this);
    var data = getData($petition);
    // _.template needs the key to be present. This avoids breaking embeds that
    // don't have a campaign-id data attribute.
    if (!data['campaignId']) {
      data['campaignId'] = '';
    }
    var html = EMBED_WRAP(data);

    $petition.replaceWith(html);
    getScript(data);
  }

  function getData($petition) {
    var data = $petition.data();

    data.source = source;
    data.rand    = _.random(1000000);
    data.id_attr = ID_ATTR(data);
    data.src     = SCRIPT_SRC(data);
    data.href    = HREF(data);

    return data;
  }

  // In the embed-code, ActionNetwork's javascript renders the form.
  // The act of downloading their javascript renders the form.
  // After that happens, we can do some post rendering of our own
  function getScript(data) {
    $.getScript(data.src, function(url, status, xhr) {
      if (status !== 'success')
        console.error('Erorr loading ActionNetwork file: ' + data.src);
    });
  }
})();
/* globals $ _ DailyKos */

// For long and short widgets.
//
// Written by Christian at Blue Bulldog Digital for action network integration.
//
// ==============================
// 2016-11-18
// Add support for rendering multiple embeds
// ==============================
// 2016-05-04
// Show embed codes pointing to https://www.dailykos.com/extern/action
// ==============================
// 2016-05-03
// Fix: Got this working for stories.
// ==============================
// 2016-05-03
// Fix: Multiple-headlines on mobile viewport.
// Add: Show "thank you" message on short-widgets and don't redirect when signed.
// Add: Use ActionNetwork's `.full` class to identify full-widgets.
// ==============================
// 2016-04-28
// Update: Fixes for the letter campaign form.
// ==============================
// 2016-04-28
// Fix: On the long-widget, the form on the right is now on the same line with the H2 header.
// ==============================

_.namespace("DailyKos.Embeds.ActionNetwork");

//
// Renders a single longform/shortform ActionNetwork widget
//
DailyKos.Embeds.ActionNetwork.prenderEmbed = function($embed) {
  // We need an extra box for who we're petitioning
  if ($embed.find(".can_embed h4.action_target").length) {
    // but only if it's has action targets, prevents this from firing on other content types
    var actiontarget = $embed
      .find(".can_embed h4.action_target")
      .detach()
      .children()
      .remove()
      .end()
      .text();
    $(
      '<div class="action_petitioning_box">\
      <div class="action_petitioning_title"><h5>Petitioning</h5></div>\
      <div class="action_petitioning_wrap">\
      <div class="action_petitioning clearfix">\
      <div class="action_petitiontarget_right">\
      <div class="action_petitiontarget_user">' +
        actiontarget +
        " </div> \
      </div> \
      </div> \
      </div> \
      </div>"
    ).insertBefore($embed.find(".action_owner_box"));

    $(
      "<p class='message_to'>Our Message to" + actiontarget + ":</p>"
    ).insertBefore($embed.find(".action_letter")); // add the petition targets to the other place we want them.
    $embed.find("#can_embed_form input[type='submit']").val("Sign Now"); // change the submit button to what we want it to say for actions
  }

  // Change the header to what we want
  if ($embed.find(".letter_delivery").length) {
    // but only if it's a letter type action.
    $embed.find(".action_sidebar > h4").text("Take Action");
  }

  // Moves the custom fields to before the comment box, where they should be.
  if ($embed.find(".control-group").length) {
    $embed.find(".control-group").insertAfter($embed.find("#form-zip_code"));
  }

  // Assume action takers are in the US
  if ($embed.find("#form-country").length) {
    $("#form-country").val("US");
  }

  // Change wording for newsletter signup if goal slider is visible
  if ($embed.find(".action_status_running_total").length) {
    var newsletterTrigger = RegExp(/up.*for.*newsletter/);

    if (newsletterTrigger.test($(".custom_fields").html())) {
      var $sliderDiv = $embed.find(".action_status_running_total");
      var oldHTML = $sliderDiv.html();
      var newHTML = oldHTML.replace("Actions Taken", "Subscribers");
      $sliderDiv.html(newHTML);
    }
  }

  //move some other things to better places
  $embed
    .find(".action_status_tracker")
    .insertAfter($embed.find(".action_sidebar > h4"));
  $embed
    .find(".main_action_image")
    .insertAfter($embed.find(".action_sidebar h4"));
  $embed
    .find("#can_main_col .entry-title")
    .clone()
    .prependTo($embed.find("#can_embed_form"));

  if (
    $embed.find(".an-attribution").length &&
    $embed.find(".main_action_image").length
  ) {
    $embed.find(".main_action_image").after($(".an-attribution"));
  }

  // Embed re-renders on logout, so rerender when logging out
  $("#log-out").on("click", function(event) {
    $embed.removeClass("embed-rendered");
  });

  if ($(".action_owner_title").length && DailyKos.sponsoredRegex) {
    var sponsoredRegex = RegExp(DailyKos.sponsoredRegex, "i");

    if (sponsoredRegex.test($(".action_info_user:last a").html())) {
      $(".action_owner_title:last").html(
        "<h5><a href='https://helpdesk.dailykos.com/article/34-promoted-by-content-on-daily-kos'>Promoted By</a></h5>"
      );
    }
  }

  DailyKos.Embeds.ActionNetwork.handlePhoneNumber($embed);

  var actionurl =
    $embed.data("src") || $embed.find("script:last-of-type").attr("src"); // story-page    - short-widgets // campaign-page - long-widgets

  //build the embed
  if (actionurl.length) {
    var pieces = actionurl.split("/");
    var type = pieces[5];
    var actionname = pieces[6].split("?");

    $embed
      .find(".action_sidebar")
      .append(
        "<div class='dk-action-embed-code'>Embed Code</div> <div class='dk-action-embed-code-div' style='display:none;'><textarea class='dk-action-embed-code-textarea'><div class='dk-action-embed user-embed'><link href='https://" +
          document.location.hostname +
          "/extern/action/css/style-embed-whitelabel.css' rel='stylesheet' type='text/css' /><script>window.yepnope || document.write('<script src=\"https://" +
          document.location.hostname +
          "/extern/action/includes/js/yepnope154-min.js\"><\\/script>');</script><script src='https://" +
          document.location.hostname +
          "/extern/action/widgets/v3/" +
          type +
          "/" +
          actionname[0] +
          `?format=js&source=widget&campaign_id=${DailyKos.campaignId}'></script><div id='can-` +
          type +
          "-area-" +
          actionname[0] +
          "' style='width: 100%'></div></div></textarea><p class='dk-action-embed-code'>copy and paste the embed code above.</p></div>"
      );

    $embed.find(".dk-action-embed-code").click(function() {
      $embed.find(".dk-action-embed-code-div").slideToggle();
    });
  }

  // This thing creates an ugly space, when it's empty
  var $formOutput = $embed.find(".form_builder_output");
  if ($formOutput.children().length === 0) {
    $formOutput.remove();
  }

  DailyKos.Embeds.ActionNetwork.handleSMSOptIn($embed);
  DailyKos.Embeds.ActionNetwork.handleSMSOptInDisclaimer($embed);
};

/*
 * Create a dummy phone field for inputting phone numbers,
 * then format the phone number in a standard way in the
 * real field. Submit the phone number if it is valid.
 *
 */
DailyKos.Embeds.ActionNetwork.handlePhoneNumber = function($embed) {
  var $phoneRow, $tempPhoneRow, $tempPhoneField, $phoneField, parsedVal;

  $phoneField = $embed.find("#phone-number");
  if (!$phoneField.length) {
    return false;
  }

  $phoneRow = $phoneField.parent();
  $tempPhoneRow = $phoneRow.clone();
  $tempPhoneField = $tempPhoneRow.find("#phone-number");

  $tempPhoneField.attr("id", "temp-phone-number");
  $tempPhoneField.attr("name", "");
  $phoneField.removeClass("required");

  _.defer(function() {
    if (typeof jq_can !== "undefined") {
      var oldId = $embed.children("div").attr("id");
      var selector = "#" + oldId + " .can_embed form";
      var rules = jq_can(selector)
        .find("#phone-number")
        .rules();

      jq_can(selector)
        .find("#temp-phone-number")
        .rules("add", rules);
      jq_can(selector)
        .find("#phone-number")
        .rules("remove", "regex required");
    }
  });

  $tempPhoneRow.insertAfter($phoneRow);
  $phoneRow.hide();
  $tempPhoneField.on("keyup focusin change blur", function(event) {
    parsedVal = $(this)
      .val()
      .replace(/\D/g, "");
    if (parsedVal[0] !== "1" && parsedVal.length === 10) {
      parsedVal = "1" + parsedVal;
    }
    $phoneField.val(parsedVal);
  });
};

DailyKos.Embeds.ActionNetwork.handleSMSOptIn = function($embed) {
  var $customOptIn = $("div#mobile_opt_in_dk_custom");
  var $defaultOptIn = $("#mobile_opt_in_default");

  if (!$customOptIn.length || !$defaultOptIn.length) {
    return null;
  }

  var customDisclaimerLanguage = $customOptIn.html();
  $defaultOptIn.html(customDisclaimerLanguage);
  $defaultOptIn.addClass("custom_fields");
  $customOptIn.remove();
};

DailyKos.Embeds.ActionNetwork.handleSMSOptInDisclaimer = function($embed) {
  var $formPhoneInput = $embed.find("#form-phone");
  var phoneInputIsVisible = $formPhoneInput.length > 0 && $formPhoneInput.is(":visible");
  var useDefaultText = ("#mobile_opt_in_default.custom_fields") && $("#mobile_opt_in_default.custom_fields").length === 0;

  if (phoneInputIsVisible && useDefaultText) {
    $(".actions__featured .featured-petition__form .disclaimer__sms").show();
  }
};

//
// When an ActionNetwork longform/shortform widget is loaded, render.
//
$(document).on("can_embed_loaded", function() {
  // Let ActionNetwork inject its payload, then apply our custom rendering
  _.defer(function() {
    var $embeds;

    // Get embeds that have not been rendered by us
    $embeds = $(".dk-action-embed:not(.embed-rendered)");

    // Get embeds that contain the Action Network js payload
    $embeds = $embeds.filter(hasActionNetworkPayload);

    // Full Render
    $embeds.each(function() {
      DailyKos.Embeds.ActionNetwork.renderEmbed(this);
    });
  });

  function hasActionNetworkPayload(i, embed) {
    return $(embed).find(".can_embed").length;
  }
});

//
// Fully render a single embed
//
DailyKos.Embeds.ActionNetwork.renderEmbed = function(embed) {
  try {
    var $embed = $(embed);

    DailyKos.Embeds.ActionNetwork.prenderEmbed($embed);

    // Only set campaign attrs for pmetrics if on a story page
    DailyKos.currentController === 'stories' &&
      populateDailyKosFields(extractCampaignPmetricsFields($embed));

    $embed.addClass("embed-rendered");

    var data = { $embeds: $embed };
    $(document).trigger("can_embed_loaded:post-render", data);
    $(document).trigger("can_embed_loaded:post-post-render", data);

    // Set extra pmetrics attrs when a user clicks on submit button. Attrs will
    // only be collected on the pmtrics side when submission is successful
    setCampaignSubmitPmetricsFields($embed);
  } catch (e) {
    console.warn(e);
  }
};

function renderActBlueForm(frontPageFormDiv) {
  var url =
    "https://secure.actblue.com/donate/" +
    DailyKos.sponsoredUrl +
    "&express_lane=true&amount=";
  frontPageFormDiv
    .find(".act-blue-donation-form__amounts")
    .html(
      "<a class='donation-link' href='" +
        url +
        "5'>$5</a>" +
        "<a class='donation-link' href='" +
        url +
        "10'>$10</a>" +
        "<a class='donation-link' href='" +
        url +
        "15'>$15</a>" +
        "<a class='donation-link' href='" +
        url +
        "25'>$25</a>" +
        "<a class='donation-link' href='" +
        url +
        "50'>$50</a>" +
        "<a class='donation-link' href='" +
        url +
        "'>Other</a>"
    );
  frontPageFormDiv
    .find(".thank-you-message__title")
    .append(" " + DailyKos.sponsoredAsk);
  frontPageFormDiv.find(".act-blue-donation-form").fadeIn(1000);
}

function parseSponsoredUrlFromParams(redirectUrl) {
  if (!redirectUrl) {
    return null;
  } else {
    var params = new URL(redirectUrl).searchParams;
    var abPageName = params.get("ab_page_name");
    var abRefcode = params.get("ab_refcode");
    if (!!abPageName && !!abRefcode) {
      return abPageName + "?refcode=" + abRefcode;
    } else {
      return null;
    }
  }
}

function modifyFrontPageShareStyles() {
  var $shareThisMessage = $("#can_embed_form .clearfix .can_thank_you-block");
  var frontPageFormDiv = $(".featured-petition__form");

  if ($shareThisMessage.length > 0) {
    if (!!DailyKos.sponsoredAsk && !!DailyKos.sponsoredUrl) {
      $shareThisMessage.hide();
      frontPageFormDiv.find(".dk-action-target, .form-details").remove();
      frontPageFormDiv.find(".thank-you-message").fadeIn(1000);
      renderActBlueForm(frontPageFormDiv);
    } else {
      var facebookButton = $shareThisMessage.find("a.share-facebook");
      var twitterButton = $shareThisMessage.find("a.share-twitter");

      facebookButton.html("<div>Share This</div>");
      twitterButton.html("<div>Tweet This</div>");

      var shareLink = $shareThisMessage.find("input.js-direct_link");

      twitterButton.insertAfter(shareLink);
      facebookButton.insertAfter(shareLink);
      $('<h4 class="widget_title">Direct Link</h4>').insertBefore(shareLink);
    }
  }
}

//
// When an ActionNetwork longform/shortform widget is signed, display a thank you message.
//
$(document).on("can_embed_submitted", function(event) {
  var $embed = window.$lastSubmittedCampaign;

  if (!$embed) return;

  var thankyou = "<h2 class='submitted-title'>Thank you for signing!</h2>";
  var redirectUrl = $embed.find("#redirect").val();
  var frontPageFormDiv = $(".featured-petition__form");
  var sponsoredUrl = parseSponsoredUrlFromParams(redirectUrl);

  if (sponsoredUrl) {
    // If redirectUrl contains an ab_page_name and refcode params, then override
    // the DailyKos.sponsoredAsk and DailyKos.sponsoredUrl values and show ActBlue form.
    DailyKos.sponsoredAsk = "Donate today to help make a difference.";
    DailyKos.sponsoredUrl = sponsoredUrl;
  }

  // If on front page AND a redirect value is present,
  // skip redirect and show thank you screen with redirect as a link.
  if (frontPageFormDiv.length > 0 && redirectUrl && redirectUrl.length > 0) {
    event.preventDefault();
    frontPageFormDiv.find(".dk-action-target, .form-details").remove();
    frontPageFormDiv.find(".thank-you-message__link").attr("href", redirectUrl);
    frontPageFormDiv.find(".thank-you-message").fadeIn(1000);

    if (!!DailyKos.sponsoredAsk && !!DailyKos.sponsoredUrl) {
      renderActBlueForm(frontPageFormDiv);
    }
  } else if ($embed.find("div.can_embed").hasClass("full")) {
    $embed.find("#can_thank_you").html(thankyou);
  } else {
    event.preventDefault();
    $embed.find("#can_embed_form form").html(thankyou);
  }

  modifyFrontPageShareStyles();
});

function extractCampaignPmetricsFields($embed) {
  return {
    campaignTitle: $embed.find('h2').first().text().trim() || undefined,
    campaignType: $embed.data('action') || undefined,
    campaignId: $embed.data('campaign-id') || undefined,
    campaignEmbeddedOn: document.location.origin + document.location.pathname,
    campaignZipCode: $embed.find('#form-zip_code').val() || undefined,
  };
}

function setCampaignSubmitPmetricsFields($embed) {
  document
    .querySelector('.dk-action-embed input[name="commit"]')
    .addEventListener('click', function() {
      populateDailyKosFields(extractCampaignPmetricsFields($embed));
    });
}

function populateDailyKosFields(attributeObject) {
  // Avoid overwritting DailyKos object keys, avoid passing empty strings
  // through the pmetrics data pipeline, filter by truthy value
  Object.keys(attributeObject)
    .filter(k => attributeObject[k] && !DailyKos[k])
    .forEach(k => DailyKos[k] = attributeObject[k]);
};
/* globals $ */

// --------------------------------------------------------------------------
// Short-widgets
// - When an embed is done loading
// - Trigger 'actionnetwork_render' event
// --------------------------------------------------------------------------

;(function () {
  $(document).on('can_embed_loaded:post-render', postRender);

  // Always called after action network renders their embed
  function postRender (event, data) {
    var $embeds = data.$embeds;

    // Fix styling in CKE
    // - style-embed-whitelabel.css (vendor css) is responsible for the base-style of the action network embed.
    // - the presence of can_float breaks styling.
    $embeds.find('.can_float').removeClass('can_float');

    $embeds.each(setHeadingAndButtonText);

    $embeds.each(applyLinkToEmbedHeader);

    $embeds.each(showSponsorText);
  }

  function applyLinkToEmbedHeader () {
    try {
      var $embed = $(this);
      var $finners = $embed.find('#can_embed_form_inner');

      var actionType = $embed.attr("data-src").split(/\/v[0-9]+\//i)[1].split("/")[0];
      var actionSlug = $embed.attr("data-slug");

      $finners.find("h2").wrap("<a href='https://" + document.location.hostname + "/campaigns/" + actionType + "s/" + actionSlug + "?pm_source=storypage&pm_medium=web&pm_campaign=" + document.location.origin + document.location.pathname + "'></a>");
    } catch (e) {
      console.warn(e)
    }
  }

  function setHeadingAndButtonText () {
    var $embed = $(this);
    var $form = $embed.find('form');
    var $finners = $embed.find('#can_embed_form_inner');
    var $heading = $("<span class='action-heading'>SIGN THE PETITION<span>");
    var headingTxt = $embed.find('.can_embed h4').html();
    var targetUrl = $form.attr('action') || '';

    // Reword heading and button value if necessary
    if (targetUrl.match(/\/petitions/i)) $embed.find("input[name='commit']").val('Sign Now');
    if (targetUrl.match(/\/letters/i)) headingTxt = 'Take Action';
    if (headingTxt) $heading.html(headingTxt);

    // Heading
    $finners.prepend($heading);
  }

  function showSponsorText() {
    if(DailyKos.sponsoredRegex) {
      var $embed = $(this);
      var sponsoredRegex = RegExp(DailyKos.sponsoredRegex, 'i');
      var $sponsorContainer = $embed.find('.action_info_user:last');
      var sponsorHTML = $sponsorContainer.html();

      if(sponsoredRegex.test(sponsorHTML)){
        var replacementString = "<strong><a href='https://helpdesk.dailykos.com/article/34-promoted-by-content-on-daily-kos'>Promoted By:</strong></a><br />";
        sponsorHTML = sponsorHTML.replace(/<strong>.*<\/strong>/, replacementString);
        $sponsorContainer.html(sponsorHTML);
        $embed.addClass('sponsored');
        $embed.find('#action_info').addClass('sponsored');
      }
    }
  }
})();

// --------------------------------------------------------------------------
// Display a facebook share button when an action-network embed is signed.
// --------------------------------------------------------------------------
(function () {
  $(document).on('can_embed_loaded', function (e) {
    $('.dk-action-embed form:not(.has-submit-listener)')
      .submit(setLastSubmittedCampaign)
      .addClass('has-submit-listener');
  });

  $(document).on('can_embed_submitted', function (event) {
    _.defer(function () {
      if (!window.$lastSubmittedCampaign)              return;
      if (!$lastSubmittedCampaign.length)              return; // no campaign submitted
      if ($lastSubmittedCampaign.find('.full').length) return; // abort if full widget

      var $embed    = $lastSubmittedCampaign.find('.can_embed');
      if($embed.parents('.dk-action-embed').hasClass('sponsored')) {
        showActBlueWidget($embed);
      } else {
        showThankYouText($embed);
      }
    });
  });

  function showActBlueWidget($embed) {
    $embed.hide();
    $embed.html(sponsoredActBlueWidget());
    $embed.fadeIn("slow");
  }

  // ActBlue link example
  // <a class="donation-link" href="https://secure.actblue.com/donate/sign-up-thankyou?refcode=BPI2018-LB-DK-DIA-COR&amp;express_lane=true&amp;amount=5">$5</a>

  function sponsoredActBlueWidget() {
    var url = DailyKos.sponsoredUrl;
    return '<div class="widget-actblue-sponsored">' +
      '<div id="ab-widget-dk-logo"></div>' +
      "<div id='ab-header-text'>" + DailyKos.sponsoredAsk + "</div>" +
      '<div class="ab_amounts">' +
        '<div class="button">' +
          '<a class="donation-link" href="https://secure.actblue.com/donate/'
          + url + '&amp;express_lane=true&amp;amount=5">$5</a>' +
        '</div>' +
        '<div class="button">' +
          '<a class="donation-link" href="https://secure.actblue.com/donate/'
           + url + '&amp;express_lane=true&amp;amount=10">$10</a>' +
        '</div>' +
        '<div class="button">' +
          '<a class="donation-link" href="https://secure.actblue.com/donate/'
           + url + '&amp;express_lane=true&amp;amount=15">$15</a>' +
        '</div>' +
        '<div class="button">' +
          '<a class="donation-link" href="https://secure.actblue.com/donate/'
           + url + '&amp;express_lane=true&amp;amount=25">$25</a>' +
        '</div>' +
        '<div class="button">' +
          '<a class="donation-link" href="https://secure.actblue.com/donate/'
           + url + '&amp;express_lane=true&amp;amount=50">$50</a>' +
        '</div>' +
        '<div class="button">' +
          '<a class="donation-link" href="https://secure.actblue.com/donate/'
           + url + '&amp;express_lane=true&amp;amount=">Other</a>' +
        '</div>' +
      '</div>' +
      '<div id="ab-widget-ab-logo"></div>' +
      '<div class="ab_disclaimer">' +
        "If you've saved your payment information with ActBlue Express, your donation will go through immediately" +
      '</div>' +
    '</div>';
  }



  function showThankYouText($embed) {
    applyLinkToThankYouTitle ($lastSubmittedCampaign);

    if (!!App.Facebook) {
      var facebookShareUrl = location.origin + $lastSubmittedCampaign.data('href');
      var $btn      = App.Facebook.createSmallButton({url: facebookShareUrl});
      var $clearfix = $("<div class='clearfix'>");

      // Add the facebook button to the widget
      $embed.append($btn);
      $embed.append($clearfix);

      // Set the facebook share count
      App.Facebook.setCampaignShareCounts({scope: $embed});
    }
  }

  function setLastSubmittedCampaign (e) {
    $lastSubmittedCampaign = $(e.target).closest('.dk-action-embed');
  }

  function applyLinkToThankYouTitle ($submittedCampaign) {
    var $thanksEmbed = $($submittedCampaign.find('.can_embed'));
    if ($thanksEmbed.hasClass('letter')) {
      var $letterEmbed = $submittedCampaign;
      var actionSlug = $letterEmbed.attr("data-slug");
      $thanksEmbed.find('.line').wrap("<a href='https://www.dailykos.com/campaigns/letters/" +
        actionSlug +"'></a>");
    }
  }
})();

function modifyFrontPageEmbedStyles() {
  //move error message below welcome back message on front page
  $('.alert_message.mb20').insertAfter('#action_welcome_message');
  //make submitter name bold on front page
  var $welcomeMessage = $('#action_welcome_message_inner .left div:first-of-type');
  if($welcomeMessage.length === 1 && $welcomeMessage.html() !== undefined) {
    var submitterName = $welcomeMessage.html().replace(/.*,\s*/, "").replace(/\s*\!?\s*$/, "");
    $welcomeMessage.html("Welcome back, <strong>" + submitterName + "</strong>!");
  }
}

(function () {
  $(document).on('can_embed_loaded', function (e) {
    //after we click "Start Writing" on a letter campaign, the title of the intermediate step embed should be linked
    _.defer(function (e) {
      //make sure we set $lastSubmittedCampaign when users hit "Click here"
      $('.letter').each(setLastSubmittedCampaignClickHere);
      modifyFrontPageEmbedStyles();

      if (!window.$lastSubmittedCampaign) return;
      try {
        var $intermediateStepEmbed = $lastSubmittedCampaign.find('.can_embed');
        if ($intermediateStepEmbed.hasClass('letter')) {
          var $letterEmbed = $lastSubmittedCampaign;
          var actionSlug = $letterEmbed.attr("data-slug");
          $intermediateStepEmbed.find('.line').wrap("<a href='https://www.dailykos.com/campaigns/letters/" +
            actionSlug +"'></a>");
        }
      } catch (e) {
        console.warn(e)
      }
    });

    function setLastSubmittedCampaignClickHere (e) {
      var $clickHereLink = $(this).find("#log-out:not(.has-submit-listener)");
      if ($clickHereLink.length > 0 ) {
        $clickHereLink.click(setLastSubmittedCampaign);
        $clickHereLink.addClass("has-submit-listener")
      }
    }

    function setLastSubmittedCampaign (e) {
      $lastSubmittedCampaign = $(e.target).closest('.dk-action-embed');
    }
  })
})();
/* globals DK, $, _ */

(function (DK, $, _) {
  _.namespace('DK.Embeds.Facebook.AspectRatio');

  DK.Embeds.Facebook.AspectRatio.addStyleOnPaste = onPaste;
  DK.Embeds.Facebook.AspectRatio.addStyleOnRender = onRender;

  return;

  function onPaste (html) {
    var $div = $('<div>').html(html);
    var $embed = $div.find('.facebook-embed-responsive');
    var $iframe = $embed.find('iframe');

    addStyle($embed, +$iframe.attr('height'), +$iframe.attr('width'));

    return $div.html();
  }

  function onRender ($iframe) {
    var $embed = $iframe.parent('.facebook-embed-responsive');
    var data = $iframe.data() || {};

    addStyle($embed, data.height, data.width);
  }

  // Add style to wrapper to maintain the aspect-ratio on Facebook embeds.
  // Demo: https://jsfiddle.net/mmnybxsq/2
  function addStyle ($embed, height, width) {
    if (!$embed.length) {
      return;
    }

    if (!height || !width) {
      height = width = 1;
    }

    var css = 'calc(height / width * 100% - 6px)'
      .replace('height', height)
      .replace('width', width);

    $embed.css('padding-bottom', css);
  }
})(DK, $, _);
/* globals $ _ DK  */

_.namespace('DK.Embeds.Googledoc');

(function () {
  DK.Embeds.Googledoc.getClass = function (iframeSrc) {
    var m = _(MATCHES).find(function (match) {
      return match.regex.test(iframeSrc);
    });

    if (m) {
      return m.style;
    } else {
      return '';
    }
  };

  var MATCHES = [
    {
      style: 'dk-embed-google-doc-style-a',
      regex: /\/\/docs\.google\.com.*\/document\/d\/([a-zA-Z0-9-_]+)\/pub.*/i
    },
    {
      style: 'dk-embed-google-doc-style-b',
      regex: /\/\/docs.google.com\/a\/dailykos\.com\/document(.*)/i
    },
    {
      style: 'dk-embed-google-doc-style-c',
      regex: /\/\/docs.google.com\/document(.*)/i
    },
    {
      style: 'dk-embed-google-sheet-style-a',
      regex: /\/\/docs.google.com\/a\/dailykos\.com\/spreadsheet(.*)/i
    },
    {
      style: 'dk-embed-google-sheet-style-b',
      regex: /\/\/docs.google.com\/spreadsheet(.*)/i
    },
    {
      style: 'dk-embed-google-presentation-style-a',
      regex: /\/\/docs.google.com.*\/presentation\/d\/([a-zA-Z0-9-_]+)\/.*/i
    }
  ];
})();
;(function () {
  _.namespace('DK.Embeds.Prerender');

  // actionHtml takes the HTML of a campaign-action-placeholder and swaps it out with
  // HTML necessary to render a campaign action. You'll need to call postRender/actionNetworkRender
  // to render the HTML into a campaign-action-embed.
  DK.Embeds.Prerender.actionHtml = function (html) {
    if (!DK.Text.isSalsaEmbedUrl(html)) return html;

    var $div = $('<div>').html(html);

    $div.getSalsaEmbeds().each(function () {
      var $salsa    = $(this);

      var salsaSrc  = ($salsa.is('iframe')) ? $salsa.attr('src')
                                            : $salsa.getIframePlaceholder().data('src');
      var $actNet   = getActNetHtml(salsaSrc);

      $salsa.replaceWith($actNet);
    });

    return $div.html();
  };

  function getActNetHtml (salsaSrc) {
    var match  = salsaSrc.match(/\/campaigns\/(\d+)/i);
    var id     = (match && match[1]) || 0;

    var resp = $.ajax({
      url:       url(id),
      async:     false
    });

    return (resp.status === 200) ? resp.responseText : '';
  }

  function url (id) {
    var proto = _.isDev() ? 'http://' : 'https://';

    return proto + location.host + '/campaigns/' + id + '/embed_placeholder';
  }
})();
;(function () {
  var Prerender = _.namespace('DK.Embeds.Prerender');

  // Prerender.html pre-formats HTML so that embeds can be rendered (iframes, widgets, etc)
  //
  // Takes an HTML string containing unrendered embeds (e.g. html straight from the database)
  // Returns an HTML string with:
  // - salsa placeholders replaced with Action Network placeholders
  // - iframe_placeholder replaced with iframes
  Prerender.html = function (html) {
    html = Prerender.actionHtml(html);
    html = Prerender.iframeHtml(html);

    return html;
  };
})();
// iframeHtml
//
// Takes a string of HTML.
// Replaces IFrame placeholders with actual IFrames.
// Used by story-show/blog-show/story-editor.
;(function () {
  var Prerender = _.namespace('DK.Embeds.Prerender');

  Prerender.iframeHtml = function (html) {
    var $div  = $('<div />');

    $div.html(html);

    var placeholders = $div.find('.iframe_placeholder');

    _.each(placeholders, function(placeholder) {
      var $iframe = $('<iframe></iframe>');
      var $placeholder = $(placeholder);

      addStylesToIFrame(placeholder);

      _.each($placeholder.data(), function(value, key) {
        $iframe.attr(key, value);
      });

      var isVideo = DK.Text.isVideoEmbed(placeholder);

      if (isVideo && isVideo[0] === "youtube") {
        $iframe.attr('allowFullScreen', '');
      }

      if (typeof($iframe[0]) == "object") {
        $iframe[0].src = $iframe[0].src.replace(/http(s)?:/, '');
      } else {
        $iframe[0] = $iframe[0].replace(/src=\"http(s)?:/, 'src="');
      }

      var wrapper = $placeholder.parent();

      if (wrapper.length === 0) {
        $iframe = wrapInDiv($iframe, isCampaignEmbed(placeholder), DK.Text.isVideoEmbed(placeholder));
      } else {
        var $embed = $placeholder.parents().find(".dk-editor-embed");

        $embed.removeClass('cke_widget_element').removeData();
      }

      DK.Embeds.Facebook.AspectRatio.addStyleOnRender($placeholder);

      $placeholder.replaceWith($iframe);
    });

    return $div.html();
  };

  /* Add styles to iframes
   * Embed-rendering on page load #zxcv
   */
  function addStylesToIFrame(placeholder) {
    if(isCampaignEmbed(placeholder)) {
      $(placeholder).data('style', "box-shadow: 0px 3px 10px 6px #EBEBEB;margin: 0px 15px 10px 15px;float:right;");
    } else if (isFacebookEmbed(placeholder)) {
      $(placeholder).data({
        'allowFullScreen': 'true','allowTransparency':'true', 'frameborder':'0',
        'scrolling': 'no', 'style': 'border: none;overflow: hidden;'});
    } else if (isGoogleEmbed(placeholder)) {
      var iframeSrc = $(placeholder).data('src');
      var classes = DK.Embeds.Googledoc.getClass(iframeSrc);

      $(placeholder).data({'class': classes});
    } else if (isHuffPoEmbedUrl(placeholder)) {
      $(placeholder).data({'class': 'dk-embed-huffpollster'});
    } else {
      $(placeholder).addClass('center-block');
    }
    return false;
  }


  /*
   * This is a guard that we may not need against the iframe not having
   * the correct wrapper class when we render it back out,
   * but leaving this in for now since it will be a good starting point
   * for when we have to render legacy content.
   */
  function wrapInDiv($iframe, campaignEmbed, isVideoEmbed) {
    var $iframeWrapper;

    var campaignWrapper = '<div class="dk-editor-embed campaign-embed">' +
                          '<div class="remove-embed-content">x</div></div>';
    var videoWrapper    = '<div class="dk-editor-embed embed-responsive embed-responsive-16by9">' +
                          '<div class="remove-embed-content">x</div></div>';
    var genericWrapper  = '<div class="dk-editor-embed">' +
                          '<div class="remove-embed-content">x</div></div>';

     if (campaignEmbed) {
       $iframeWrapper = $(campaignWrapper);
       return $iframeWrapper.html($frame);
     }
     if (isVideoEmbed) {
       $iframeWrapper = $(videoWrapper);
       return $iframeWrapper.html($frame);
     }

     $iframeWrapper = $(genericWrapper);
     return $iframeWrapper.html($frame);
  }

  function isCampaignEmbed(placeholder){
    var $ph   = $(placeholder),
        data  = $ph.data(),
        iframeSrc;

    if(data) {
      iframeSrc = data.src
    } else if(typeof(placeholder) == 'string') {
      irameSrc = placeholder;
    }

    return DK.Text.isSalsaEmbedUrl(iframeSrc);
  }

  function isFacebookEmbed(placeholder){
    var $ph   = $(placeholder),
      data  = $ph.data(),
      iframeSrc;

    if(data) {
      iframeSrc = data.src
    } else if(typeof(placeholder) === 'string') {
      irameSrc = placeholder;
    }

    return DK.Text.isFacebookEmbedUrl(iframeSrc);
  }

  function isGoogleEmbed(placeholder) {
    var src = $(placeholder).data('src');
    return DK.Text.isGoogleEmbedUrl(src);
  }

  function isHuffPoEmbedUrl (placeholder) {
    var src = $(placeholder).data('src');
    return DK.Text.isHuffPoEmbedUrl(src);
  }
})();
if (!window.App)          App          = {};
if (!window.App.Facebook) App.Facebook = {};

(function($) {
  App.Facebook.getBlogAndStoryShareCount  = getBlogAndStoryShareCount;
  App.Facebook.setBlogAndStoryShareCounts = setBlogAndStoryShareCounts;
  App.Facebook.openShareDialog = openShareDialog;

  // We are disabling the call to fetch the share counts as FB API has changed
  // and is no longer available from the front end. If we decide to remove
  // the share counts, this whole file can be deleted. If not, we will use
  // this with a passthrough to the back end where we can make the request
  // with an access token.
  // $(document).ready(App.Facebook.setBlogAndStoryShareCounts);

  // Get the sharecount for the url
  function getBlogAndStoryShareCount (urlString, callback) {
    $.ajax({
      url: "https://graph.facebook.com",
      data: {ids: urlString},
      success: function(data) {
        callback(data);
      }
    });
  }

  function setBlogAndStoryShareCounts () {
    var $btns = $('.dk-social-btn.facebook-share');
    if ($btns.length == 0) return;
    var urlString = "";
    _($btns).each( function(btn) {
      if (urlString == "") {
        urlString = $(btn).data('url');
      } else {
        urlString = urlString + "," + $(btn).data('url');
      }
    });


    getBlogAndStoryShareCount(urlString, function(shareCountdataObject) {
      // now that we have our share counts from facebook
      // we can iterate through our facebook buttons
      _.each($btns, function (btn) {
        // get share count
        var url = $(btn).data('url')   // url => 'https://www.dailykos.com/stories/333'
        if (shareCountdataObject[url].share) {
          var fbshares = shareCountdataObject[url].share.share_count
        } else {
          var fbshares = 0;
        }

        // set share count
        $(btn).find('.dk-social-count').text(fbshares);
        label = _.pluralize(fbshares, 'Share');
        $(btn).find('.dk-social-label').text(label);
      })
    });
  }

  function openShareDialog (el) {
    var url = $(el).data('url');

    FB.ui({
      method: 'share',
      href: url
    }, function(response){});

    return false;
  }
})(jQuery);
if (!window.App)          App          = {};
if (!window.App.Facebook) App.Facebook = {};

(function() {
  App.Facebook.getCampaignShareCount  = getCampaignShareCount;
  App.Facebook.setCampaignShareCounts = setCampaignShareCounts;
  App.Facebook.openShareDialog = openShareDialog;

  // Get the sharecount for the url
  //
  // App.Facebook.getShareCount('https://www.dailykos.com', function(count) {
  //   alert(count);
  // });
  function getCampaignShareCount (url, callback) {
    $.getJSON('https://graph.facebook.com/?ids='+url, function (data) {
      var shares;

      data = data && data[url];

      if (data && data.share) {
        shares = data.share.share_count;
      } else {
        console.warn('Unable to retrieve facebook share count.');
      }

      callback(shares || 0);
    });
  }

  function setCampaignShareCounts (opts) {
    opts       = opts          || {};
    var $scope = opts.scope    || $('body');
    var $btns  = $scope.find('.dksb-fb-share');

    _($btns).chain()
      .groupBy(btnUrl)
      .each(function(btnGroup, url) {
        getCampaignShareCount(url, function(count) {
          var btn   = $btns.filter(function() { return btnUrl(this) === url; });

          btn.find('.dksb-inner-count').attr('data-count', count);
        });
      });
  }

  function btnUrl (btn) {
    return $(btn).data('url');
  }

  function openShareDialog (el) {
    var url = $(el).data('url');

    FB.ui({
      method: 'share',
      href: url
    }, function(response){});

    return false;
  }
})();
// Disable this, if we readd it we will need to create a
// passthrough to the back end
// $(window).load(App.Facebook.setCampaignShareCounts);
if (!window.App)          App          = {};
if (!window.App.Facebook) App.Facebook = {};

(function () {

  App.Facebook.createSmallButton = function (opts) {
    var html = "<div class='dksb dksb-count dksb-fb-share' data-url='{{url}}' onclick='return App.Facebook.openShareDialog(this)' style='float:right;'>" +
                 "<div class='dksb-inner-icon'></div>" +
                 "<div class='dksb-inner-label'></div>" +
                 "<div class='dksb-inner-count'></div>" +
               "</div>";

    html = html.replace('{{url}}', opts.url);

    return $(html);
  }

})();
/* globals $ _ DK */

_.namespace('DK.Https');

(function () {
  DK.Https.getHtmlWithHttpsImgSrc = function (html) {
    if (DK.DISABLE_SSL) return html;

    var $html = $('<div>');

    // Unset src otherwise the element will be
    // fetched by the browser when it is set to $html (in safari).
    html = unsetSrc(html);
    $html.html(html);

    // Convert src to https
    $html
      .find('[data-original-src^="http://"],[data-src^="http://"]')
      .each(setSrcToHttps);

    // Re-set the src.
    html = $html.html();
    html = resetSrc(html);

    return html;
  };

  function resetSrc (html) {
    return html.replace(
      /(<.+?\s)data-original-src=(.+?>)/gi,
      '$1src=$2'
    );
  }

  function unsetSrc (html) {
    return html.replace(
      /(<.+?\s)src=(.+?>)/gi,
      '$1data-original-src=$2'
    );
  }

  function setSrcToHttps (i, el) {
    var toHttps = DK.TextHelpers.urlToHttps;
    var $el = $(el);

    $el.attr({
      'data-original-src':
        toHttps($el.attr('data-original-src')),
      'data-src':
        toHttps($el.attr('data-src'))
    });
  }
})();
/* globals $ _ DK */

_.namespace('DK.Https');

DK.Https.upgradeToHttps = function (dom) {
  if (!dom) {
    return console.error('missing content');
  }

  if (dom.getElementsByTagName('script').length) {
    return console.error('aborting script injection');
  }

  var html;
  html = dom.textContent;
  html = DK.TextHelpers.unescapeHtml(html);
  html = DK.Https.getHtmlWithHttpsImgSrc(html);

  $(dom).replaceWith(html);
};
// I18n.js
// =======
//
// This small library provides the Rails I18n API on the Javascript.
// You don't actually have to use Rails (or even Ruby) to use I18n.js.
// Just make sure you export all translations in an object like this:
//
//     I18n.translations.en = {
//       hello: "Hello World"
//     };
//
// See tests for specific formatting like numbers and dates.
//

// Using UMD pattern from
// https://github.com/umdjs/umd#regular-module
// `returnExports.js` version
;(function (root, factory) {
  if (typeof define === 'function' && define.amd) {
    // AMD. Register as an anonymous module.
    define("i18n", function(){ return factory(root);});
  } else if (typeof module === 'object' && module.exports) {
    // Node. Does not work with strict CommonJS, but
    // only CommonJS-like environments that support module.exports,
    // like Node.
    module.exports = factory(root);
  } else {
    // Browser globals (root is window)
    root.I18n = factory(root);
  }
}(this, function(global) {
  "use strict";

  // Use previously defined object if exists in current scope
  var I18n = global && global.I18n || {};

  // Just cache the Array#slice function.
  var slice = Array.prototype.slice;

  // Apply number padding.
  var padding = function(number) {
    return ("0" + number.toString()).substr(-2);
  };

  // Improved toFixed number rounding function with support for unprecise floating points
  // JavaScript's standard toFixed function does not round certain numbers correctly (for example 0.105 with precision 2).
  var toFixed = function(number, precision) {
    return decimalAdjust('round', number, -precision).toFixed(precision);
  };

  // Is a given variable an object?
  // Borrowed from Underscore.js
  var isObject = function(obj) {
    var type = typeof obj;
    return type === 'function' || type === 'object'
  };

  var isFunction = function(func) {
    var type = typeof func;
    return type === 'function'
  };

  // Check if value is different than undefined and null;
  var isSet = function(value) {
    return typeof(value) !== 'undefined' && value !== null;
  };

  // Is a given value an array?
  // Borrowed from Underscore.js
  var isArray = function(val) {
    if (Array.isArray) {
      return Array.isArray(val);
    }
    return Object.prototype.toString.call(val) === '[object Array]';
  };

  var isString = function(val) {
    return typeof val === 'string' || Object.prototype.toString.call(val) === '[object String]';
  };

  var isNumber = function(val) {
    return typeof val === 'number' || Object.prototype.toString.call(val) === '[object Number]';
  };

  var isBoolean = function(val) {
    return val === true || val === false;
  };

  var isNull = function(val) {
    return val === null;
  };

  var decimalAdjust = function(type, value, exp) {
    // If the exp is undefined or zero...
    if (typeof exp === 'undefined' || +exp === 0) {
      return Math[type](value);
    }
    value = +value;
    exp = +exp;
    // If the value is not a number or the exp is not an integer...
    if (isNaN(value) || !(typeof exp === 'number' && exp % 1 === 0)) {
      return NaN;
    }
    // Shift
    value = value.toString().split('e');
    value = Math[type](+(value[0] + 'e' + (value[1] ? (+value[1] - exp) : -exp)));
    // Shift back
    value = value.toString().split('e');
    return +(value[0] + 'e' + (value[1] ? (+value[1] + exp) : exp));
  };

  var lazyEvaluate = function(message, scope) {
    if (isFunction(message)) {
      return message(scope);
    } else {
      return message;
    }
  };

  var merge = function (dest, obj) {
    var key, value;
    for (key in obj) if (obj.hasOwnProperty(key)) {
      value = obj[key];
      if (isString(value) || isNumber(value) || isBoolean(value) || isArray(value) || isNull(value)) {
        dest[key] = value;
      } else {
        if (dest[key] == null) dest[key] = {};
        merge(dest[key], value);
      }
    }
    return dest;
  };

  // Set default days/months translations.
  var DATE = {
      day_names: ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"]
    , abbr_day_names: ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"]
    , month_names: [null, "January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"]
    , abbr_month_names: [null, "Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"]
    , meridian: ["AM", "PM"]
  };

  // Set default number format.
  var NUMBER_FORMAT = {
      precision: 3
    , separator: "."
    , delimiter: ","
    , strip_insignificant_zeros: false
  };

  // Set default currency format.
  var CURRENCY_FORMAT = {
      unit: "$"
    , precision: 2
    , format: "%u%n"
    , sign_first: true
    , delimiter: ","
    , separator: "."
  };

  // Set default percentage format.
  var PERCENTAGE_FORMAT = {
      unit: "%"
    , precision: 3
    , format: "%n%u"
    , separator: "."
    , delimiter: ""
  };

  // Set default size units.
  var SIZE_UNITS = [null, "kb", "mb", "gb", "tb"];

  // Other default options
  var DEFAULT_OPTIONS = {
    // Set default locale. This locale will be used when fallback is enabled and
    // the translation doesn't exist in a particular locale.
      defaultLocale: "en"
    // Set the current locale to `en`.
    , locale: "en"
    // Set the translation key separator.
    , defaultSeparator: "."
    // Set the placeholder format. Accepts `{{placeholder}}` and `%{placeholder}`.
    , placeholder: /(?:\{\{|%\{)(.*?)(?:\}\}?)/gm
    // Set if engine should fallback to the default locale when a translation
    // is missing.
    , fallbacks: false
    // Set the default translation object.
    , translations: {}
    // Set missing translation behavior. 'message' will display a message
    // that the translation is missing, 'guess' will try to guess the string
    , missingBehaviour: 'message'
    // if you use missingBehaviour with 'message', but want to know that the
    // string is actually missing for testing purposes, you can prefix the
    // guessed string by setting the value here. By default, no prefix!
    , missingTranslationPrefix: ''
  };

  // Set default locale. This locale will be used when fallback is enabled and
  // the translation doesn't exist in a particular locale.
  I18n.reset = function() {
    var key;
    for (key in DEFAULT_OPTIONS) {
      this[key] = DEFAULT_OPTIONS[key];
    }
  };

  // Much like `reset`, but only assign options if not already assigned
  I18n.initializeOptions = function() {
    var key;
    for (key in DEFAULT_OPTIONS) if (!isSet(this[key])) {
      this[key] = DEFAULT_OPTIONS[key];
    }
  };
  I18n.initializeOptions();

  // Return a list of all locales that must be tried before returning the
  // missing translation message. By default, this will consider the inline option,
  // current locale and fallback locale.
  //
  //     I18n.locales.get("de-DE");
  //     // ["de-DE", "de", "en"]
  //
  // You can define custom rules for any locale. Just make sure you return a array
  // containing all locales.
  //
  //     // Default the Wookie locale to English.
  //     I18n.locales["wk"] = function(locale) {
  //       return ["en"];
  //     };
  //
  I18n.locales = {};

  // Retrieve locales based on inline locale, current locale or default to
  // I18n's detection.
  I18n.locales.get = function(locale) {
    var result = this[locale] || this[I18n.locale] || this["default"];

    if (isFunction(result)) {
      result = result(locale);
    }

    if (isArray(result) === false) {
      result = [result];
    }

    return result;
  };

  // The default locale list.
  I18n.locales["default"] = function(locale) {
    var locales = []
      , list = []
    ;

    // Handle the inline locale option that can be provided to
    // the `I18n.t` options.
    if (locale) {
      locales.push(locale);
    }

    // Add the current locale to the list.
    if (!locale && I18n.locale) {
      locales.push(I18n.locale);
    }

    // Add the default locale if fallback strategy is enabled.
    if (I18n.fallbacks && I18n.defaultLocale) {
      locales.push(I18n.defaultLocale);
    }

    // Locale code format 1:
    // According to RFC4646 (http://www.ietf.org/rfc/rfc4646.txt)
    // language codes for Traditional Chinese should be `zh-Hant`
    //
    // But due to backward compatibility
    // We use older version of IETF language tag
    // @see http://www.w3.org/TR/html401/struct/dirlang.html
    // @see http://en.wikipedia.org/wiki/IETF_language_tag
    //
    // Format: `language-code = primary-code ( "-" subcode )*`
    //
    // primary-code uses ISO639-1
    // @see http://en.wikipedia.org/wiki/List_of_ISO_639-1_codes
    // @see http://www.iso.org/iso/home/standards/language_codes.htm
    //
    // subcode uses ISO 3166-1 alpha-2
    // @see http://en.wikipedia.org/wiki/ISO_3166
    // @see http://www.iso.org/iso/country_codes.htm
    //
    // @note
    //   subcode can be in upper case or lower case
    //   defining it in upper case is a convention only


    // Locale code format 2:
    // Format: `code = primary-code ( "-" region-code )*`
    // primary-code uses ISO 639-1
    // script-code uses ISO 15924
    // region-code uses ISO 3166-1 alpha-2
    // Example: zh-Hant-TW, en-HK, zh-Hant-CN
    //
    // It is similar to RFC4646 (or actually the same),
    // but seems to be limited to language, script, region

    // Compute each locale with its country code.
    // So this will return an array containing
    // `de-DE` and `de`
    // or
    // `zh-hans-tw`, `zh-hans`, `zh`
    // locales.
    locales.forEach(function(locale) {
      var localeParts = locale.split("-");
      var firstFallback = null;
      var secondFallback = null;
      if (localeParts.length === 3) {
        firstFallback = [
          localeParts[0],
          localeParts[1]
        ].join("-");
        secondFallback = localeParts[0];
      }
      else if (localeParts.length === 2) {
        firstFallback = localeParts[0];
      }

      if (list.indexOf(locale) === -1) {
        list.push(locale);
      }

      if (! I18n.fallbacks) {
        return;
      }

      [
        firstFallback,
        secondFallback
      ].forEach(function(nullableFallbackLocale) {
        // We don't want null values
        if (typeof nullableFallbackLocale === "undefined") { return; }
        if (nullableFallbackLocale === null) { return; }
        // We don't want duplicate values
        //
        // Comparing with `locale` first is faster than
        // checking whether value's presence in the list
        if (nullableFallbackLocale === locale) { return; }
        if (list.indexOf(nullableFallbackLocale) !== -1) { return; }

        list.push(nullableFallbackLocale);
      });
    });

    // No locales set? English it is.
    if (!locales.length) {
      locales.push("en");
    }

    return list;
  };

  // Hold pluralization rules.
  I18n.pluralization = {};

  // Return the pluralizer for a specific locale.
  // If no specify locale is found, then I18n's default will be used.
  I18n.pluralization.get = function(locale) {
    return this[locale] || this[I18n.locale] || this["default"];
  };

  // The default pluralizer rule.
  // It detects the `zero`, `one`, and `other` scopes.
  I18n.pluralization["default"] = function(count) {
    switch (count) {
      case 0: return ["zero", "other"];
      case 1: return ["one"];
      default: return ["other"];
    }
  };

  // Return current locale. If no locale has been set, then
  // the current locale will be the default locale.
  I18n.currentLocale = function() {
    return this.locale || this.defaultLocale;
  };

  // Check if value is different than undefined and null;
  I18n.isSet = isSet;

  // Find and process the translation using the provided scope and options.
  // This is used internally by some functions and should not be used as an
  // public API.
  I18n.lookup = function(scope, options) {
    options = options || {};

    var locales = this.locales.get(options.locale).slice()
      , locale
      , scopes
      , fullScope
      , translations
    ;

    fullScope = this.getFullScope(scope, options);

    while (locales.length) {
      locale = locales.shift();
      scopes = fullScope.split(options.separator || this.defaultSeparator);
      translations = this.translations[locale];

      if (!translations) {
        continue;
      }
      while (scopes.length) {
        translations = translations[scopes.shift()];

        if (translations === undefined || translations === null) {
          break;
        }
      }

      if (translations !== undefined && translations !== null) {
        return translations;
      }
    }

    if (isSet(options.defaultValue)) {
      return lazyEvaluate(options.defaultValue, scope);
    }
  };

  // lookup pluralization rule key into translations
  I18n.pluralizationLookupWithoutFallback = function(count, locale, translations) {
    var pluralizer = this.pluralization.get(locale)
      , pluralizerKeys = pluralizer(count)
      , pluralizerKey
      , message;

    if (isObject(translations)) {
      while (pluralizerKeys.length) {
        pluralizerKey = pluralizerKeys.shift();
        if (isSet(translations[pluralizerKey])) {
          message = translations[pluralizerKey];
          break;
        }
      }
    }

    return message;
  };

  // Lookup dedicated to pluralization
  I18n.pluralizationLookup = function(count, scope, options) {
    options = options || {};
    var locales = this.locales.get(options.locale).slice()
      , locale
      , scopes
      , translations
      , message
    ;
    scope = this.getFullScope(scope, options);

    while (locales.length) {
      locale = locales.shift();
      scopes = scope.split(options.separator || this.defaultSeparator);
      translations = this.translations[locale];

      if (!translations) {
        continue;
      }

      while (scopes.length) {
        translations = translations[scopes.shift()];
        if (!isObject(translations)) {
          break;
        }
        if (scopes.length === 0) {
          message = this.pluralizationLookupWithoutFallback(count, locale, translations);
        }
      }
      if (typeof message !== "undefined" && message !== null) {
        break;
      }
    }

    if (typeof message === "undefined" || message === null) {
      if (isSet(options.defaultValue)) {
        if (isObject(options.defaultValue)) {
          message = this.pluralizationLookupWithoutFallback(count, options.locale, options.defaultValue);
        } else {
          message = options.defaultValue;
        }
        translations = options.defaultValue;
      }
    }

    return { message: message, translations: translations };
  };

  // Rails changed the way the meridian is stored.
  // It started with `date.meridian` returning an array,
  // then it switched to `time.am` and `time.pm`.
  // This function abstracts this difference and returns
  // the correct meridian or the default value when none is provided.
  I18n.meridian = function() {
    var time = this.lookup("time");
    var date = this.lookup("date");

    if (time && time.am && time.pm) {
      return [time.am, time.pm];
    } else if (date && date.meridian) {
      return date.meridian;
    } else {
      return DATE.meridian;
    }
  };

  // Merge serveral hash options, checking if value is set before
  // overwriting any value. The precedence is from left to right.
  //
  //     I18n.prepareOptions({name: "John Doe"}, {name: "Mary Doe", role: "user"});
  //     #=> {name: "John Doe", role: "user"}
  //
  I18n.prepareOptions = function() {
    var args = slice.call(arguments)
      , options = {}
      , subject
    ;

    while (args.length) {
      subject = args.shift();

      if (typeof(subject) != "object") {
        continue;
      }

      for (var attr in subject) {
        if (!subject.hasOwnProperty(attr)) {
          continue;
        }

        if (isSet(options[attr])) {
          continue;
        }

        options[attr] = subject[attr];
      }
    }

    return options;
  };

  // Generate a list of translation options for default fallbacks.
  // `defaultValue` is also deleted from options as it is returned as part of
  // the translationOptions array.
  I18n.createTranslationOptions = function(scope, options) {
    var translationOptions = [{scope: scope}];

    // Defaults should be an array of hashes containing either
    // fallback scopes or messages
    if (isSet(options.defaults)) {
      translationOptions = translationOptions.concat(options.defaults);
    }

    // Maintain support for defaultValue. Since it is always a message
    // insert it in to the translation options as such.
    if (isSet(options.defaultValue)) {
      translationOptions.push({ message: options.defaultValue });
    }

    return translationOptions;
  };

  // Translate the given scope with the provided options.
  I18n.translate = function(scope, options) {
    options = options || {};

    var translationOptions = this.createTranslationOptions(scope, options);

    var translation;
    var usedScope = scope;

    var optionsWithoutDefault = this.prepareOptions(options)
    delete optionsWithoutDefault.defaultValue

    // Iterate through the translation options until a translation
    // or message is found.
    var translationFound =
      translationOptions.some(function(translationOption) {
        if (isSet(translationOption.scope)) {
          usedScope = translationOption.scope;
          translation = this.lookup(usedScope, optionsWithoutDefault);
        } else if (isSet(translationOption.message)) {
          translation = lazyEvaluate(translationOption.message, scope);
        }

        if (translation !== undefined && translation !== null) {
          return true;
        }
      }, this);

    if (!translationFound) {
      return this.missingTranslation(scope, options);
    }

    if (typeof(translation) === "string") {
      translation = this.interpolate(translation, options);
    } else if (isArray(translation)) {
      translation = translation.map(function(t) {
        return (typeof(t) === "string" ? this.interpolate(t, options) : t);
      }, this);
    } else if (isObject(translation) && isSet(options.count)) {
      translation = this.pluralize(options.count, usedScope, options);
    }

    return translation;
  };

  // This function interpolates the all variables in the given message.
  I18n.interpolate = function(message, options) {
    if (message == null) {
      return message;
    }

    options = options || {};
    var matches = message.match(this.placeholder)
      , placeholder
      , value
      , name
      , regex
    ;

    if (!matches) {
      return message;
    }

    while (matches.length) {
      placeholder = matches.shift();
      name = placeholder.replace(this.placeholder, "$1");

      if (isSet(options[name])) {
        value = options[name].toString().replace(/\$/gm, "_#$#_");
      } else if (name in options) {
        value = this.nullPlaceholder(placeholder, message, options);
      } else {
        value = this.missingPlaceholder(placeholder, message, options);
      }

      regex = new RegExp(placeholder.replace(/{/gm, "\\{").replace(/}/gm, "\\}"));
      message = message.replace(regex, value);
    }

    return message.replace(/_#\$#_/g, "$");
  };

  // Pluralize the given scope using the `count` value.
  // The pluralized translation may have other placeholders,
  // which will be retrieved from `options`.
  I18n.pluralize = function(count, scope, options) {
    options = this.prepareOptions({count: String(count)}, options)
    var pluralizer, result;

    result = this.pluralizationLookup(count, scope, options);
    if (typeof result.translations === "undefined" || result.translations == null) {
      return this.missingTranslation(scope, options);
    }

    if (typeof result.message !== "undefined" && result.message != null) {
      return this.interpolate(result.message, options);
    }
    else {
      pluralizer = this.pluralization.get(options.locale);
      return this.missingTranslation(scope + '.' + pluralizer(count)[0], options);
    }
  };

  // Return a missing translation message for the given parameters.
  I18n.missingTranslation = function(scope, options) {
    //guess intended string
    if(this.missingBehaviour === 'guess'){
      //get only the last portion of the scope
      var s = scope.split('.').slice(-1)[0];
      //replace underscore with space && camelcase with space and lowercase letter
      return (this.missingTranslationPrefix.length > 0 ? this.missingTranslationPrefix : '') +
          s.replace(/_/g,' ').replace(/([a-z])([A-Z])/g,
          function(match, p1, p2) {return p1 + ' ' + p2.toLowerCase()} );
    }

    var localeForTranslation = (options != null && options.locale != null) ? options.locale : this.currentLocale();
    var fullScope           = this.getFullScope(scope, options);
    var fullScopeWithLocale = [localeForTranslation, fullScope].join(options.separator || this.defaultSeparator);

    return '[missing "' + fullScopeWithLocale + '" translation]';
  };

  // Return a missing placeholder message for given parameters
  I18n.missingPlaceholder = function(placeholder, message, options) {
    return "[missing " + placeholder + " value]";
  };

  I18n.nullPlaceholder = function() {
    return I18n.missingPlaceholder.apply(I18n, arguments);
  };

  // Format number using localization rules.
  // The options will be retrieved from the `number.format` scope.
  // If this isn't present, then the following options will be used:
  //
  // - `precision`: `3`
  // - `separator`: `"."`
  // - `delimiter`: `","`
  // - `strip_insignificant_zeros`: `false`
  //
  // You can also override these options by providing the `options` argument.
  //
  I18n.toNumber = function(number, options) {
    options = this.prepareOptions(
        options
      , this.lookup("number.format")
      , NUMBER_FORMAT
    );

    var negative = number < 0
      , string = toFixed(Math.abs(number), options.precision).toString()
      , parts = string.split(".")
      , precision
      , buffer = []
      , formattedNumber
      , format = options.format || "%n"
      , sign = negative ? "-" : ""
    ;

    number = parts[0];
    precision = parts[1];

    while (number.length > 0) {
      buffer.unshift(number.substr(Math.max(0, number.length - 3), 3));
      number = number.substr(0, number.length -3);
    }

    formattedNumber = buffer.join(options.delimiter);

    if (options.strip_insignificant_zeros && precision) {
      precision = precision.replace(/0+$/, "");
    }

    if (options.precision > 0 && precision) {
      formattedNumber += options.separator + precision;
    }

    if (options.sign_first) {
      format = "%s" + format;
    }
    else {
      format = format.replace("%n", "%s%n");
    }

    formattedNumber = format
      .replace("%u", options.unit)
      .replace("%n", formattedNumber)
      .replace("%s", sign)
    ;

    return formattedNumber;
  };

  // Format currency with localization rules.
  // The options will be retrieved from the `number.currency.format` and
  // `number.format` scopes, in that order.
  //
  // Any missing option will be retrieved from the `I18n.toNumber` defaults and
  // the following options:
  //
  // - `unit`: `"$"`
  // - `precision`: `2`
  // - `format`: `"%u%n"`
  // - `delimiter`: `","`
  // - `separator`: `"."`
  //
  // You can also override these options by providing the `options` argument.
  //
  I18n.toCurrency = function(number, options) {
    options = this.prepareOptions(
        options
      , this.lookup("number.currency.format", options)
      , this.lookup("number.format", options)
      , CURRENCY_FORMAT
    );

    return this.toNumber(number, options);
  };

  // Localize several values.
  // You can provide the following scopes: `currency`, `number`, or `percentage`.
  // If you provide a scope that matches the `/^(date|time)/` regular expression
  // then the `value` will be converted by using the `I18n.toTime` function.
  //
  // It will default to the value's `toString` function.
  //
  I18n.localize = function(scope, value, options) {
    options || (options = {});

    switch (scope) {
      case "currency":
        return this.toCurrency(value, options);
      case "number":
        scope = this.lookup("number.format", options);
        return this.toNumber(value, scope);
      case "percentage":
        return this.toPercentage(value, options);
      default:
        var localizedValue;

        if (scope.match(/^(date|time)/)) {
          localizedValue = this.toTime(scope, value, options);
        } else {
          localizedValue = value.toString();
        }

        return this.interpolate(localizedValue, options);
    }
  };

  // Parse a given `date` string into a JavaScript Date object.
  // This function is time zone aware.
  //
  // The following string formats are recognized:
  //
  //    yyyy-mm-dd
  //    yyyy-mm-dd[ T]hh:mm::ss
  //    yyyy-mm-dd[ T]hh:mm::ss
  //    yyyy-mm-dd[ T]hh:mm::ssZ
  //    yyyy-mm-dd[ T]hh:mm::ss+0000
  //    yyyy-mm-dd[ T]hh:mm::ss+00:00
  //    yyyy-mm-dd[ T]hh:mm::ss.123Z
  //
  I18n.parseDate = function(date) {
    var matches, convertedDate, fraction;
    // A date input of `null` or `undefined` will be returned as-is
    if (date == null) {
      return date;
    }
    // we have a date, so just return it.
    if (typeof(date) === "object") {
      return date;
    }

    matches = date.toString().match(/(\d{4})-(\d{2})-(\d{2})(?:[ T](\d{2}):(\d{2}):(\d{2})([\.,]\d{1,3})?)?(Z|\+00:?00)?/);

    if (matches) {
      for (var i = 1; i <= 6; i++) {
        matches[i] = parseInt(matches[i], 10) || 0;
      }

      // month starts on 0
      matches[2] -= 1;

      fraction = matches[7] ? 1000 * ("0" + matches[7]) : null;

      if (matches[8]) {
        convertedDate = new Date(Date.UTC(matches[1], matches[2], matches[3], matches[4], matches[5], matches[6], fraction));
      } else {
        convertedDate = new Date(matches[1], matches[2], matches[3], matches[4], matches[5], matches[6], fraction);
      }
    } else if (typeof(date) == "number") {
      // UNIX timestamp
      convertedDate = new Date();
      convertedDate.setTime(date);
    } else if (date.match(/([A-Z][a-z]{2}) ([A-Z][a-z]{2}) (\d+) (\d+:\d+:\d+) ([+-]\d+) (\d+)/)) {
      // This format `Wed Jul 20 13:03:39 +0000 2011` is parsed by
      // webkit/firefox, but not by IE, so we must parse it manually.
      convertedDate = new Date();
      convertedDate.setTime(Date.parse([
        RegExp.$1, RegExp.$2, RegExp.$3, RegExp.$6, RegExp.$4, RegExp.$5
      ].join(" ")));
    } else if (date.match(/\d+ \d+:\d+:\d+ [+-]\d+ \d+/)) {
      // a valid javascript format with timezone info
      convertedDate = new Date();
      convertedDate.setTime(Date.parse(date));
    } else {
      // an arbitrary javascript string
      convertedDate = new Date();
      convertedDate.setTime(Date.parse(date));
    }

    return convertedDate;
  };

  // Formats time according to the directives in the given format string.
  // The directives begins with a percent (%) character. Any text not listed as a
  // directive will be passed through to the output string.
  //
  // The accepted formats are:
  //
  //     %a     - The abbreviated weekday name (Sun)
  //     %A     - The full weekday name (Sunday)
  //     %b     - The abbreviated month name (Jan)
  //     %B     - The full month name (January)
  //     %c     - The preferred local date and time representation
  //     %d     - Day of the month (01..31)
  //     %-d    - Day of the month (1..31)
  //     %H     - Hour of the day, 24-hour clock (00..23)
  //     %-H/%k - Hour of the day, 24-hour clock (0..23)
  //     %I     - Hour of the day, 12-hour clock (01..12)
  //     %-I/%l - Hour of the day, 12-hour clock (1..12)
  //     %m     - Month of the year (01..12)
  //     %-m    - Month of the year (1..12)
  //     %M     - Minute of the hour (00..59)
  //     %-M    - Minute of the hour (0..59)
  //     %p     - Meridian indicator (AM  or  PM)
  //     %P     - Meridian indicator (am  or  pm)
  //     %S     - Second of the minute (00..60)
  //     %-S    - Second of the minute (0..60)
  //     %w     - Day of the week (Sunday is 0, 0..6)
  //     %y     - Year without a century (00..99)
  //     %-y    - Year without a century (0..99)
  //     %Y     - Year with century
  //     %z/%Z  - Timezone offset (+0545)
  //
  I18n.strftime = function(date, format, options) {
    var options = this.lookup("date", options)
      , meridianOptions = I18n.meridian()
    ;

    if (!options) {
      options = {};
    }

    options = this.prepareOptions(options, DATE);

    if (isNaN(date.getTime())) {
      throw new Error('I18n.strftime() requires a valid date object, but received an invalid date.');
    }

    var weekDay = date.getDay()
      , day = date.getDate()
      , year = date.getFullYear()
      , month = date.getMonth() + 1
      , hour = date.getHours()
      , hour12 = hour
      , meridian = hour > 11 ? 1 : 0
      , secs = date.getSeconds()
      , mins = date.getMinutes()
      , offset = date.getTimezoneOffset()
      , absOffsetHours = Math.floor(Math.abs(offset / 60))
      , absOffsetMinutes = Math.abs(offset) - (absOffsetHours * 60)
      , timezoneoffset = (offset > 0 ? "-" : "+") +
          (absOffsetHours.toString().length < 2 ? "0" + absOffsetHours : absOffsetHours) +
          (absOffsetMinutes.toString().length < 2 ? "0" + absOffsetMinutes : absOffsetMinutes)
    ;

    if (hour12 > 12) {
      hour12 = hour12 - 12;
    } else if (hour12 === 0) {
      hour12 = 12;
    }

    format = format.replace("%a", options.abbr_day_names[weekDay]);
    format = format.replace("%A", options.day_names[weekDay]);
    format = format.replace("%b", options.abbr_month_names[month]);
    format = format.replace("%B", options.month_names[month]);
    format = format.replace("%d", padding(day));
    format = format.replace("%e", day);
    format = format.replace("%-d", day);
    format = format.replace("%H", padding(hour));
    format = format.replace("%-H", hour);
    format = format.replace("%k", hour);
    format = format.replace("%I", padding(hour12));
    format = format.replace("%-I", hour12);
    format = format.replace("%l", hour12);
    format = format.replace("%m", padding(month));
    format = format.replace("%-m", month);
    format = format.replace("%M", padding(mins));
    format = format.replace("%-M", mins);
    format = format.replace("%p", meridianOptions[meridian]);
    format = format.replace("%P", meridianOptions[meridian].toLowerCase());
    format = format.replace("%S", padding(secs));
    format = format.replace("%-S", secs);
    format = format.replace("%w", weekDay);
    format = format.replace("%y", padding(year));
    format = format.replace("%-y", padding(year).replace(/^0+/, ""));
    format = format.replace("%Y", year);
    format = format.replace("%z", timezoneoffset);
    format = format.replace("%Z", timezoneoffset);

    return format;
  };

  // Convert the given dateString into a formatted date.
  I18n.toTime = function(scope, dateString, options) {
    var date = this.parseDate(dateString)
      , format = this.lookup(scope, options)
    ;

    // A date input of `null` or `undefined` will be returned as-is
    if (date == null) {
      return date;
    }

    var date_string = date.toString()
    if (date_string.match(/invalid/i)) {
      return date_string;
    }

    if (!format) {
      return date_string;
    }

    return this.strftime(date, format, options);
  };

  // Convert a number into a formatted percentage value.
  I18n.toPercentage = function(number, options) {
    options = this.prepareOptions(
        options
      , this.lookup("number.percentage.format", options)
      , this.lookup("number.format", options)
      , PERCENTAGE_FORMAT
    );

    return this.toNumber(number, options);
  };

  // Convert a number into a readable size representation.
  I18n.toHumanSize = function(number, options) {
    var kb = 1024
      , size = number
      , iterations = 0
      , unit
      , precision
      , fullScope
    ;

    while (size >= kb && iterations < 4) {
      size = size / kb;
      iterations += 1;
    }

    if (iterations === 0) {
      fullScope = this.getFullScope("number.human.storage_units.units.byte", options);
      unit = this.t(fullScope, {count: size});
      precision = 0;
    } else {
      fullScope = this.getFullScope("number.human.storage_units.units." + SIZE_UNITS[iterations], options);
      unit = this.t(fullScope);
      precision = (size - Math.floor(size) === 0) ? 0 : 1;
    }

    options = this.prepareOptions(
        options
      , {unit: unit, precision: precision, format: "%n%u", delimiter: ""}
    );

    return this.toNumber(size, options);
  };

  I18n.getFullScope = function(scope, options) {
    options = options || {};

    // Deal with the scope as an array.
    if (isArray(scope)) {
      scope = scope.join(options.separator || this.defaultSeparator);
    }

    // Deal with the scope option provided through the second argument.
    //
    //    I18n.t('hello', {scope: 'greetings'});
    //
    if (options.scope) {
      scope = [options.scope, scope].join(options.separator || this.defaultSeparator);
    }

    return scope;
  };
  /**
   * Merge obj1 with obj2 (shallow merge), without modifying inputs
   * @param {Object} obj1
   * @param {Object} obj2
   * @returns {Object} Merged values of obj1 and obj2
   *
   * In order to support ES3, `Object.prototype.hasOwnProperty.call` is used
   * Idea is from:
   * https://stackoverflow.com/questions/8157700/object-has-no-hasownproperty-method-i-e-its-undefined-ie8
   */
  I18n.extend = function ( obj1, obj2 ) {
    if (typeof(obj1) === "undefined" && typeof(obj2) === "undefined") {
      return {};
    }
    return merge(obj1, obj2);
  };

  // Set aliases, so we can save some typing.
  I18n.t = I18n.translate.bind(I18n);
  I18n.l = I18n.localize.bind(I18n);
  I18n.p = I18n.pluralize.bind(I18n);

  return I18n;
}));
// https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/indexOf
if (!Array.prototype.indexOf) {
    Array.prototype.indexOf = function (searchElement /*, fromIndex */ ) {
        "use strict";
        if (this == null) {
            throw new TypeError();
        }
        var t = Object(this);
        var len = t.length >>> 0;
        if (len === 0) {
            return -1;
        }
        var n = 0;
        if (arguments.length > 1) {
            n = Number(arguments[1]);
            if (n != n) { // shortcut for verifying if it's NaN
                n = 0;
            } else if (n != 0 && n != Infinity && n != -Infinity) {
                n = (n > 0 || -1) * Math.floor(Math.abs(n));
            }
        }
        if (n >= len) {
            return -1;
        }
        var k = n >= 0 ? n : Math.max(len - Math.abs(n), 0);
        for (; k < len; k++) {
            if (k in t && t[k] === searchElement) {
                return k;
            }
        }
        return -1;
    }
}

// Production steps of ECMA-262, Edition 5, 15.4.4.18
// Reference: http://es5.github.com/#x15.4.4.18
// https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/forEach
if ( !Array.prototype.forEach ) {

  Array.prototype.forEach = function forEach( callback, thisArg ) {

    var T, k;

    if ( this == null ) {
      throw new TypeError( "this is null or not defined" );
    }

    // 1. Let O be the result of calling ToObject passing the |this| value as the argument.
    var O = Object(this);

    // 2. Let lenValue be the result of calling the Get internal method of O with the argument "length".
    // 3. Let len be ToUint32(lenValue).
    var len = O.length >>> 0; // Hack to convert O.length to a UInt32

    // 4. If IsCallable(callback) is false, throw a TypeError exception.
    // See: http://es5.github.com/#x9.11
    if ( {}.toString.call(callback) !== "[object Function]" ) {
      throw new TypeError( callback + " is not a function" );
    }

    // 5. If thisArg was supplied, let T be thisArg; else let T be undefined.
    if ( thisArg ) {
      T = thisArg;
    }

    // 6. Let k be 0
    k = 0;

    // 7. Repeat, while k < len
    while( k < len ) {

      var kValue;

      // a. Let Pk be ToString(k).
      //   This is implicit for LHS operands of the in operator
      // b. Let kPresent be the result of calling the HasProperty internal method of O with argument Pk.
      //   This step can be combined with c
      // c. If kPresent is true, then
      if ( Object.prototype.hasOwnProperty.call(O, k) ) {

        // i. Let kValue be the result of calling the Get internal method of O with argument Pk.
        kValue = O[ k ];

        // ii. Call the Call internal method of callback with T as the this value and
        // argument list containing kValue, k, and O.
        callback.call( T, kValue, k, O );
      }
      // d. Increase k by 1.
      k++;
    }
    // 8. return undefined
  };
}

// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/some
if (!Array.prototype.some)
{
  Array.prototype.some = function(fun /*, thisArg */)
  {
    'use strict';

    if (this === void 0 || this === null)
      throw new TypeError();

    var t = Object(this);
    var len = t.length >>> 0;
    if (typeof fun !== 'function')
      throw new TypeError();

    var thisArg = arguments.length >= 2 ? arguments[1] : void 0;
    for (var i = 0; i < len; i++)
    {
      if (i in t && fun.call(thisArg, t[i], i, t))
        return true;
    }

    return false;
  };
}

// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/map
if (!Array.prototype.map) {

  Array.prototype.map = function(callback/*, thisArg*/) {

    var T, A, k;

    if (this == null) {
      throw new TypeError('this is null or not defined');
    }

    // 1. Let O be the result of calling ToObject passing the |this| 
    //    value as the argument.
    var O = Object(this);

    // 2. Let lenValue be the result of calling the Get internal 
    //    method of O with the argument "length".
    // 3. Let len be ToUint32(lenValue).
    var len = O.length >>> 0;

    // 4. If IsCallable(callback) is false, throw a TypeError exception.
    // See: http://es5.github.com/#x9.11
    if (typeof callback !== 'function') {
      throw new TypeError(callback + ' is not a function');
    }

    // 5. If thisArg was supplied, let T be thisArg; else let T be undefined.
    if (arguments.length > 1) {
      T = arguments[1];
    }

    // 6. Let A be a new array created as if by the expression new Array(len) 
    //    where Array is the standard built-in constructor with that name and 
    //    len is the value of len.
    A = new Array(len);

    // 7. Let k be 0
    k = 0;

    // 8. Repeat, while k < len
    while (k < len) {

      var kValue, mappedValue;

      // a. Let Pk be ToString(k).
      //   This is implicit for LHS operands of the in operator
      // b. Let kPresent be the result of calling the HasProperty internal 
      //    method of O with argument Pk.
      //   This step can be combined with c
      // c. If kPresent is true, then
      if (k in O) {

        // i. Let kValue be the result of calling the Get internal 
        //    method of O with argument Pk.
        kValue = O[k];

        // ii. Let mappedValue be the result of calling the Call internal 
        //     method of callback with T as the this value and argument 
        //     list containing kValue, k, and O.
        mappedValue = callback.call(T, kValue, k, O);

        // iii. Call the DefineOwnProperty internal method of A with arguments
        // Pk, Property Descriptor
        // { Value: mappedValue,
        //   Writable: true,
        //   Enumerable: true,
        //   Configurable: true },
        // and false.

        // In browsers that support Object.defineProperty, use the following:
        // Object.defineProperty(A, k, {
        //   value: mappedValue,
        //   writable: true,
        //   enumerable: true,
        //   configurable: true
        // });

        // For best browser support, use the following:
        A[k] = mappedValue;
      }
      // d. Increase k by 1.
      k++;
    }

    // 9. return A
    return A;
  };
}

// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_objects/Function/bind
if (!Function.prototype.bind) (function(){
  var ArrayPrototypeSlice = Array.prototype.slice;
  Function.prototype.bind = function(otherThis) {
    if (typeof this !== 'function') {
      // closest thing possible to the ECMAScript 5
      // internal IsCallable function
      throw new TypeError('Function.prototype.bind - what is trying to be bound is not callable');
    }

    var baseArgs= ArrayPrototypeSlice .call(arguments, 1),
        baseArgsLength = baseArgs.length,
        fToBind = this,
        fNOP    = function() {},
        fBound  = function() {
          baseArgs.length = baseArgsLength; // reset to default base arguments
          baseArgs.push.apply(baseArgs, arguments);
          return fToBind.apply(
                 fNOP.prototype.isPrototypeOf(this) ? this : otherThis, baseArgs
          );
        };

    if (this.prototype) {
      // Function.prototype doesn't have a prototype property
      fNOP.prototype = this.prototype; 
    }
    fBound.prototype = new fNOP();

    return fBound;
  };
})();

// Using UMD pattern from
// https://github.com/umdjs/umd#regular-module
// `returnExports.js` version
;(function (root, factory) {
  if (typeof define === 'function' && define.amd) {
    // AMD. Register as an anonymous module.
    define(["i18n"], factory);
  } else if (typeof module === 'object' && module.exports) {
    // Node. Does not work with strict CommonJS, but
    // only CommonJS-like environments that support module.exports,
    // like Node.
    factory(require("i18n"));
  } else {
    // Browser globals (root is window)
    factory(root.I18n);
  }
}(this, function(I18n) {
  "use strict";

  I18n.translations = {"ar":{"active_admin":{"access_denied":{"message":"لم يُصرّح لك بهذا الإجراء."},"any":"أي","batch_actions":{"action_label":"اُختير %{title}","button_label":"إجراءات متعددة","default_confirmation":"هل أنت متأكّد؟","delete_confirmation":"هل أنت متأكّد من حذف هذه %{plural_model}؟","labels":{"destroy":"حذف"},"selection_toggle_explanation":"(تتبيث الخيار)","succesfully_destroyed":{"one":"حُذف بنجاح 1 %{model}","other":"حُذف بنجاح %{count} %{plural_model}"}},"blank_slate":{"content":"لايوجد %{resource_name} بعد.","link":"إنشاء"},"cancel":"إلغاء","comments":{"add":"إضافة تعليق","author":"مؤلّف","author_missing":"مجهول","author_type":"نوع الؤلّف","body":"هيكل","created_at":"أُنشئ","delete":"حذف تعليق","delete_confirmation":"هل أنت متأكّد من حذف هذه التعليقات؟","errors":{"empty_text":"لم يُحفظ التعليق، النص فارغ."},"no_comments_yet":"لا يوجد تعليقات بعد.","resource":"مصدر","resource_type":"نوع المصدر","title_content":"تعليقات (%{count})"},"dashboard":"لوحة تحكم","dashboard_welcome":{"call_to_action":"لإضافة أقسام إلى  لوحة التحكم, راجع: 'app/admin/dashboard.rb'","welcome":"مرحبًا بك في في صفحة الإدارة، وهذه هي الصفحة الإفتراضيّة."},"delete":"حذف","delete_confirmation":"هل تريد تأكيد الحذف؟","delete_model":"حذف %{model}","details":"تفاصيل %{model}","devise":{"change_password":{"submit":"تغير كلمة المرور خاصتي","title":"تغير كلمة المرور خاصتك"},"email":{"title":"البريد الإلكترونيّ"},"links":{"forgot_your_password":"هل نسيت كلمة المرور؟","resend_confirmation_instructions":"إعادة إرسال تعليمات تأكيد الحساب","resend_unlock_instructions":"إعادة إرسال تعليمات تنشيط الحساب","sign_in":"تسجيل الدخول","sign_in_with_omniauth_provider":"تسجيل الدخول بـ %{provider}","sign_up":"التسجيل"},"login":{"remember_me":"تذكرني","submit":"تسجيل الدخول","title":"تسجيل الدخول"},"password":{"title":"كلمة المرور"},"resend_confirmation_instructions":{"submit":"إعادة ارسال تعليمات التأكيد","title":"إعادة ارسال تعليمات التأكيد"},"reset_password":{"submit":"استرجاع كلمة المرور","title":"هل نسيت كلمة المرور؟"},"sign_up":{"submit":"تسجيل","title":"تسجيل"},"subdomain":{"title":"مجال فرعي"},"unlock":{"submit":"إعادة إرسال تعليمات فك الحظر","title":"إعادة إرسال تعليمات فك الحظر"},"username":{"title":"اسم المستخدم"}},"download":"تحميل","dropdown_actions":{"button_label":"إجراءات"},"edit":"تعديل","edit_model":"تعديل %{model}","empty":"فارغ","filters":{"buttons":{"clear":"تفريغ التصفية","filter":"تصفية"},"predicates":{"contains":"يحتوي","ends_with":"ينتهي بـ","equals":"متساوي","greater_than":"أكبر من","less_than":"أقل من","starts_with":"يبدأ بـ"}},"has_many_delete":"حذف","has_many_new":"إضافة %{model} جديد","has_many_remove":"إزالة","index_list":{"block":"قائمة","blog":"مدونة","grid":"شبكة","table":"جدول"},"logout":"تسجيل الخروج","main_content":"الرجاء تنفيذ %{model}#main_content لعرض المحتوى.","new_model":"%{model} جديد","next":"التالي","pagination":{"empty":"لا يوجد %{model} ","entry":{"one":"مدخل","other":"مدخلات"},"multiple":"عرض %{model} <b>%{from}&nbsp;-&nbsp;%{to}</b> من <b>%{total}</b> بالمجمل","multiple_without_total":"عرض %{model} <b>%{from}&nbsp;-&nbsp;%{to}</b>","one":"عرض <b>1</b> %{model}","one_page":"عرض <b>all %{n}</b> %{model}"},"powered_by":"تنفيذ %{active_admin} %{version}","previous":"السابق","search_status":{"current_filters":"المُرشحات الحاليّة:","current_scope":"المجال:","headline":"حالات البحث:","no_current_filters":"بدون"},"sidebars":{"filters":"المُرشحات","search_status":"حالات البحث"},"status_tag":{"no":"لا","unset":"لا","yes":"نعم"},"unsupported_browser":{"headline":"يُرجى مُلاحظة أن (أكتف أدمن) لم تعد تدعم المُتصفّح إنترنت اكسبلوررالإصدار الثامن وما قبله","recommendation":"ننصح بالتحديث إلى الإصدارات الأخيرة من: <a href=\"http://windows.microsoft.com/ie\">Internet Explorer</a>, <a href=\"https://chrome.google.com/\">Google Chrome</a>, أو <a href=\"https://mozilla.org/firefox/\">Firefox</a>.","turn_off_compatibility_view":"إن كنت تستخدم الإصدار التاسع وما يليه من إنترنت إكسبلورر تأكّد من <a href=\"https://support.microsoft.com/ar-ae/help/17471\">تعطيل \"Compatibility View\"</a>."},"view":"عرض"},"ransack":{"all":"كل","and":"و","any":"أيُّ","asc":"تصاعدي","attribute":"خاصية","combinator":"دالة توافقية","condition":"شرط","desc":"تنازلي","or":"أو","predicate":"فاعل","predicates":{"blank":"فراغ","cont":"محتو","cont_all":"محتو لجميع","cont_any":"محتو لواحد على اﻷقل","does_not_match":"لا يتواءم","does_not_match_all":"لا يتواءم مع الجميع","does_not_match_any":"لا يتواءم مع واحد على اﻷقل","end":"ينتهي بـ","end_all":"ينتهي بالجميع","end_any":"ينتهي بواحد على اﻷقل","eq":"معادل","eq_all":"معادل للجميع","eq_any":"معادل على اﻷقل لواحد","false":"خطأ","gt":"أكبر من","gt_all":"أكبر من الجميع","gt_any":"أكبر من واحد على اﻷقل","gteq":"أكبر أو مساو لـ","gteq_all":"أكبر أو مساو للجميع","gteq_any":"أكبر أو مساو لواحد على اﻷقل","in":"متضمن لـ","in_all":"متضمن للجميع","in_any":"متضمن لواحد على اﻷقل","lt":"أصغر من","lt_all":"أصغر من الجميع","lt_any":"أصغر لواحد على اﻷقل","lteq":"أصغر أو مساو لـ","lteq_all":"أصغر أو مساو للجميع","lteq_any":"أصغر أو مساو لواحد على اﻷقل","matches":"موائم","matches_all":"موائم للجميع","matches_any":"موائم لواحد على اﻷقل","not_cont":"غير محتو","not_cont_all":"غير محتو للجميع","not_cont_any":"غير محتو لواحد على اﻷقل","not_end":"لا ينتهي بـ","not_end_all":"لا ينتهي بالجميع","not_end_any":"لا ينتهي بواحد على اﻷقل","not_eq":"ليس معادلا لـ","not_eq_all":"ليس معادلا للجميع","not_eq_any":"ليس معادلا على اﻷقل لواحد","not_in":"غير متضمن","not_in_all":"غير متضمن للجميع","not_in_any":"غير متضمن لواحد على اﻷقل","not_null":"غير مساو لقيمة عدم","not_start":"لا يبدأ بـ","not_start_all":"لا يبدأ بالجميع","not_start_any":"لا يبدأ بواحد على اﻷقل","null":"عدم","present":"مستقبل","start":"يبدأ بـ","start_all":"يبدأ بالجميع","start_any":"يبدأ بواحد على اﻷقل","true":"صحيح"},"search":"بحث","sort":"ترتيب","value":"قيمة"}},"az":{"active_admin":{"access_denied":{"message":"Bunu etmək üçün daxil olmalısınız."},"any":"İstənilən","batch_actions":{"action_label":"%{title} seçilmiş","button_label":"Qrup əməliyyatları","default_confirmation":"Siz bunu etməyinizə əminsiniz?","delete_confirmation":"Siz %{plural_model} silməyə əminsiniz?","labels":{"destroy":"Sil"},"selection_toggle_explanation":"(Hamısını seç / Seçilmişləri sıfırla)","succesfully_destroyed":{"few":"Uğurla silindi: %{count} %{plural_model}","many":"Uğurla silindi: %{count} %{plural_model}","one":"Uğurla silindi: 1 %{model}","other":"Uğurla silindi: %{count} %{plural_model}"}},"blank_slate":{"content":"%{resource_name} hələ yoxdur.","link":"Yarat"},"cancel":"İmtina","comments":{"add":"Şərh əlavə et","author":"Müəllif","author_missing":"Naməlum","author_type":"Müəllifin tipi","body":"Mətn","created_at":"Yaranma tarixi","delete":"Şərhi sil","delete_confirmation":"Siz bu şərhi silmək istədiyinizdən əminsiniz?","errors":{"empty_text":"Şərh yadda saxlanılmadı, mətn boş ola bilməz."},"no_comments_yet":"Hələ şərhlər yoxdur.","resource":"Resurs","resource_type":"Resursun tipi","title_content":"Şərhlər (%{count})"},"dashboard":"İdarəetmə paneli","dashboard_welcome":{"call_to_action":"Buraya nə isə əlavə etmək üçün 'app/admin/dashboard.rb' sənədini dəyişin","welcome":"Active Admin-ə xoş gəlmişsiniz. Bu saytla idarəetmənin standart səhifəsidir."},"delete":"Sil","delete_confirmation":"Siz bunu silmək istədiyinizdən əminsiniz?","delete_model":"%{model} sil","details":"%{model} haqqında","devise":{"change_password":{"submit":"Şifrəni dəyiş","title":"Şifrənin dəyişdirilməsi"},"email":{"title":"E-poçt"},"links":{"forgot_your_password":"Şifrəni unutmusunuz?","resend_confirmation_instructions":"Aktivləşdirmə ismarışını yenidən göndərilməsi","resend_unlock_instructions":"Blokdan çıxarma üzrə təlimatı yenidən göndərilməsi","sign_in":"Giriş","sign_in_with_omniauth_provider":"%{provider} vasitəsilə daxil ol","sign_up":"Qeydiyyat"},"login":{"remember_me":"Məni yadda saxla","submit":"Daxil ol","title":"Giriş"},"password":{"title":"Şifrə"},"resend_confirmation_instructions":{"submit":"Aktivləşdirmə ismarışını yenidən göndərmək","title":"Aktivləşdirmə ismarışını yenidən göndərmək"},"reset_password":{"submit":"Şifrəni sıfırla","title":"Şifrəni unutmusunuz?"},"sign_up":{"submit":"Qeydiyyatdan keç","title":"Qeydiyyat"},"subdomain":{"title":"Subdomen"},"unlock":{"submit":"Blokdan çıxarma üzrə təlimatı yenidən göndərmək","title":"Blokdan çıxarma üzrə təlimatı yenidən göndərmək"},"username":{"title":"İstifadəçi adı"}},"download":"Yüklənmə:","dropdown_actions":{"button_label":"Əməliyyatlar"},"edit":"Dəyiş","edit_model":"%{model} dəyiş","empty":"Boş","filters":{"buttons":{"clear":"Təmizlə","filter":"Filtrlə"},"predicates":{"contains":"Yerləşir","ends_with":"Bitir","equals":"Bərabərdir","greater_than":"böyük","less_than":"kiçik","starts_with":"Başlayır"}},"has_many_delete":"Sil","has_many_new":"%{model} əlavə et","has_many_remove":"Yığışdır","index_list":{"block":"Siyahı","blog":"Bloq","grid":"Tor","table":"Cədvəl"},"logout":"Çıxış","main_content":"Создайте %{model}#main_content для отображения содержимого.","new_model":"%{model} yarat","next":"İrəli","pagination":{"empty":"%{model} tapılmadı","entry":{"few":"yazı","many":"yazı","one":"yazı","other":"yazı"},"multiple":"Nəticə: %{model} <b>%{from}&nbsp;-&nbsp;%{to}</b> <b>%{total}</b>","multiple_without_total":"Nəticə: %{model} <b>%{from}&nbsp;-&nbsp;%{to}</b>","one":"Nəticə: <b>1</b> %{model}","one_page":"Nəticə: <b>%{n}</b> %{model}"},"powered_by":"Работает на %{active_admin} %{version}","previous":"Geri","search_status":{"current_filters":"Cari filter:","current_scope":"Sahə:","headline":"Axtarışın statusu:","no_current_filters":"Heç biri"},"sidebars":{"filters":"Filterlə","search_status":"Axtarışın statusu"},"status_tag":{"no":"Xeyr","yes":"Bəli"},"unsupported_browser":{"headline":"Zəhmət olmasa, bilin ki, Active Admin artıq Internet Explorer-in köhnə versiyalarını daha dəstəkləmir və yalnız IE 8 versiyasından başlayaraq dəstəkləyir","recommendation":"Biz sizin brauzerinizin versiyasını yeniləməyi məsləhət görürük (<a href=\"http://windows.microsoft.com/ie\">Internet Explorer</a>, <a href=\"https://chrome.google.com/\">Google Chrome</a>, və ya <a href=\"https://mozilla.org/firefox/\">Firefox</a>).","turn_off_compatibility_view":"Əgər siz IE 9  və ya daha yeni versiya istifadə edirsinizsə, əmin olun ki, <a href=\"https://support.microsoft.com/ru-ru/help/17471\">\"Uyğunluğun rejimində baxış\"</a> seçimini söndürmüsünüz."},"view":"Aç"},"ransack":{"all":"hamısı","and":"və","any":"hər hansı","asc":"artan","attribute":"xüsusiyyət","combinator":"birləşdirici","condition":"şərt","desc":"azalan","or":"və ya","predicate":"təsdiqlə","predicates":{"blank":"boş","cont":"ehtiva edən","cont_all":"hamısını ehtiva edən","cont_any":"hər hansı birini ehtiva edən","does_not_match":"uyğunlaşmayan","does_not_match_all":"heç biri ilə uyğunlaşmayan","does_not_match_any":"hər hansı biri ilə uyğunlaşmayan","end":"ilə bitən","end_all":"hamısı ilə bitən","end_any":"hər hansı biri ilə bitən","eq":"bərabər","eq_all":"hamısına bərabər","eq_any":"hər hansı birinə bərabər","false":"yanlış","gt":"daha böyük ","gt_all":"hamısından daha böyük","gt_any":"hər hansı birindən daha böyük","gteq":"daha böyük və ya bərabər","gteq_all":"daha böyük və ya hamısıne bərabər","gteq_any":"daha böyük və ya hər hansı birine bərabər","in":"içində","in_all":"hamısında","in_any":"hər hansı birində","lt":"daha kiçik","lt_all":"hamısından kiçik","lt_any":"hər hansı birindən kiçik","lteq":"daha kiçik və ya bərabər","lteq_all":"daha kiçik və ya hamısına bərabər","lteq_any":"daha kiçik və ya hər hansı birinə bərabər","matches":"uyğunlaşan","matches_all":"hamısı ilə uyğunlaşan","matches_any":"hər hansı biri ilə uyğunlaşan","not_cont":"ehtiva etməyən","not_cont_all":"heç birini birini ehtiva etməyən","not_cont_any":"hər hansı birini ehtiva etməyən","not_end":"ilə bitməyən","not_end_all":"heç biri ilə bitməyən","not_end_any":"hər hansı biri ilə bitməyən","not_eq":"bərabər deyil","not_eq_all":"heç birinə bərabər deyil","not_eq_any":"hər hansı birinə bərabər deyil","not_in":"içində deyil","not_in_all":"heç birində deyil","not_in_any":"hər hansı birində deyil","not_null":"keçərli","not_start":"ilə başlamayan","not_start_all":"hiçbiri ilə başlamayan","not_start_any":"hər hansı biri ilə başlamayan","null":"keçərsiz","present":"mövcüd","start":"ilə başlayan","start_all":"hamısı ilə başlayan","start_any":"hər hansı biri ilə başlayan","true":"doğru"},"search":"axtar","sort":"sırala","value":"dəyər"}},"bg":{"active_admin":{"access_denied":{"message":"Нямате права да извършите това действие."},"any":"Без значение","batch_actions":{"action_label":"%{title} избран","button_label":"Масови действия","default_confirmation":"Наистина ли искате да направите това?","delete_confirmation":"Сигурни ли сте, че искате да изтриете тези %{plural_model}?","labels":{"destroy":"Изтриване"},"selection_toggle_explanation":"(Инвертиране на маркирането)","succesfully_destroyed":{"one":"Успешно изтриване на 1 %{model}","other":"Успешно изтриване на %{count} %{plural_model}"}},"blank_slate":{"content":"Все още няма добавени %{resource_name}.","link":"Създаване"},"cancel":"Отказ","comments":{"add":"Добавяне на коментар","author":"Автор","author_missing":"Анонимен","author_type":"Тип автор","body":"Текст","errors":{"empty_text":"Коментарът с празен текст не беше запазен."},"no_comments_yet":"Все още няма коментари.","resource":"Ресурс","resource_type":"Тип ресурс","title_content":"Коментари (%{count})"},"dashboard":"Табло","dashboard_welcome":{"call_to_action":"За да добавите секции, редактирайте 'app/admin/dashboard.rb'","welcome":"Добре дошли в Active Admin. Това е таблото по подразбиране."},"delete":"Изтриване","delete_confirmation":"Сигурни ли сте, че искате да изтриете това?","delete_model":"Изтриване на %{model}","details":"%{model} детайли","devise":{"change_password":{"submit":"Промяна на паролата","title":"Промяна на паролата"},"email":{"title":"Поща"},"links":{"forgot_your_password":"Забравена парола?","sign_in":"Вход","sign_in_with_omniauth_provider":"Влез с %{provider}"},"login":{"remember_me":"Запомни ме","submit":"Вход","title":"Вход"},"password":{"title":"Парола"},"resend_confirmation_instructions":{"submit":"Изпрати отново инструкциите за потвърждаване","title":"Изпрати отново инструкциите за потвърждаване"},"reset_password":{"submit":"Изпращане на нова парола","title":"Забравена парола?"},"sign_up":{"submit":"Регистрация","title":"Регистрация"},"subdomain":{"title":"Поддомейн"},"unlock":{"submit":"Изпрати отново инструкциите за отключване","title":"Изпрати отново инструкциите за отключване"},"username":{"title":"Потребителско име"}},"download":"Изтегляне:","dropdown_actions":{"button_label":"действия"},"edit":"Редакция","edit_model":"Редакция на %{model}","empty":"Празно","filters":{"buttons":{"clear":"Изчистване","filter":"Филтриране"},"predicates":{"contains":"съдържа","ends_with":"Завършва с","equals":"равно на","greater_than":"по-голямо от","less_than":"по-малко от","starts_with":"Започва с"}},"has_many_delete":"Изтриване","has_many_new":"Добавяне на %{model}","has_many_remove":"Премахване","index_list":{"block":"Списък","blog":"Блог","grid":"Грид","table":"Таблица"},"logout":"Изход","main_content":"Добавете %{model}#main_content за да видите съдържание.","new_model":"Създаване на %{model}","next":"Следващо","pagination":{"empty":"Не са намерени %{model}","entry":{"one":"запис","other":"записи"},"multiple":"Показване %{model} <b>%{from}&nbsp;-&nbsp;%{to}</b> от общо <b>%{total}</b>","multiple_without_total":"Показване %{model} <b>%{from}&nbsp;-&nbsp;%{to}</b>","one":"Показване на <b>1</b> %{model}","one_page":"Показване на <b>всички %{n}</b> %{model}"},"powered_by":"Задвижва се от %{active_admin} %{version}","previous":"Предишно","sidebars":{"filters":"Филтри"},"status_tag":{"no":"не","unset":"не","yes":"Да"},"view":"Преглед"},"ckeditor":{"buttons":{"cancel":"Откажи","delete":"Изтрий","next":"Следващ","upload":"Качи"},"confirm_delete":"Сигурни ли сте, че искате да изтриете този файл?","page_title":"Списък с файлове"},"ransack":{"all":"всички","and":"и","any":"всякакво","asc":"възходящ","attribute":"атрибут","combinator":"комбинатор","condition":"условие","desc":"низходящ","or":"или","predicate":"предикат","predicates":{"blank":"е празно","cont":"съдържа","cont_all":"съдържа всички","cont_any":"съдържа всякое","does_not_match":"не съвпада","does_not_match_all":"не съвпада с всички","does_not_match_any":"не съвпада с никое","end":"завършва с","end_all":"завършва с всички","end_any":"завършва с всякое","eq":"се равнява на","eq_all":"се равнява на всички","eq_any":"се равнява на всяко","false":"неистина","gt":"по-голямо от","gt_all":"по-голямо от всички","gt_any":"по-голямо от всякое","gteq":"по-голямо или равно на","gteq_all":"по-голямо или равно на всички","gteq_any":"по-голямо или равно на всякое","in":"в","in_all":"във всички","in_any":"във всякое","lt":"по-малко от","lt_all":"по-малко от всички","lt_any":"по-малко от някое","lteq":"по-малко или равно на","lteq_all":"по-малко или равно на всички","lteq_any":"по-малко или равно на някое","matches":"съвпада","matches_all":"съвпада с всички","matches_any":"съвпада с някое","not_cont":"не съдържа","not_cont_all":"не съдържа всички","not_cont_any":"не съдържа никое","not_end":"не завършва с","not_end_all":"не завършва с всички","not_end_any":"не завършва с никое","not_eq":"не е равно на","not_eq_all":"не е равно на всички","not_eq_any":"не е равно на никое от","not_in":"не в","not_in_all":"не във всички","not_in_any":"не в никое","not_null":"не е нула","not_start":"не започва с","not_start_all":"не започва с всички","not_start_any":"не започва с никое","null":"е нула","present":"присъства","start":"започва с","start_all":"започва с всички","start_any":"започва с всякое","true":"истина"},"search":"търсене","sort":"сортиране","value":"стойност"}},"bs":{"active_admin":{"access_denied":{"message":"Nemaš dopuštenja."},"any":"Bilo koji","batch_actions":{"action_label":"%{title} označene","button_label":"Grupne akcije","default_confirmation":"Jeste li sigurni da želite to učiniti?","delete_confirmation":"Jeste li sigurni da želite obrisati %{plural_model}?","labels":{"destroy":"Obriši"},"selection_toggle_explanation":"(Izmijeni odabir)","succesfully_destroyed":{"few":"Uspješno su obrisana %{count} %{plural_model}","many":"Uspješno je obrisano %{count} %{plural_model}","one":"Uspješno je obrisan 1 %{model}","other":"Uspješno je obrisano %{count} %{plural_model}"}},"blank_slate":{"content":"Još uvijek ne postoji niti jedan zapis tipa %{resource_name}.","link":"Izradi jedan"},"cancel":"Odustani","comments":{"add":"Dodaj komentar","author":"Autor","author_missing":"Anoniman","author_type":"Tip autora","body":"Sadržaj","errors":{"empty_text":"Komentar nije spremljen, sadržaj je prazan."},"no_comments_yet":"Još nema komentara.","resource":"Objekt","resource_type":"Tip objekta","title_content":"Komentari (%{count})"},"dashboard":"Upravljačka ploča","dashboard_welcome":{"call_to_action":"Da biste dodali nove odjeljke na upravljačku ploču, pogledajte 'app/admin/dashboard.rb'","welcome":"Dobrodošli u Active Admin. Ovo je početna upravljačka ploča."},"delete":"Obriši","delete_confirmation":"Jeste li sigurni da želite ovo obrisati?","delete_model":"Obriši %{model}","details":"%{model} detalji","devise":{"change_password":{"submit":"Izmijeni lozinku","title":"Izmjena lozinke"},"email":{"title":"Email"},"links":{"forgot_your_password":"Zaboravljena lozinka?","sign_in":"Prijavi se","sign_in_with_omniauth_provider":"Prijavite se za %{provider}"},"login":{"remember_me":"Zapamti me","submit":"Prijavi se","title":"Prijava"},"password":{"title":"Lozinka"},"resend_confirmation_instructions":{"submit":"Pošalji","title":"Ponovno slanje uputstva za potvrdu"},"reset_password":{"submit":"Resetuj lozinku","title":"Zaboravljena lozinka?"},"sign_up":{"submit":"Registruj","title":"Registracija"},"subdomain":{"title":"Poddomena"},"unlock":{"submit":"Pošalji","title":"Ponovno slanje uputstva za otključavanje"},"username":{"title":"Korisničko ime"}},"download":"Spremi na računalo:","edit":"Uredi","edit_model":"Uredi %{model}","empty":"Prazno","filters":{"buttons":{"clear":"Ukloni filtere","filter":"Filtriraj"},"predicates":{"contains":"Sadrži","ends_with":"Završava sa","equals":"Jednako","greater_than":"Veće od","less_than":"Manje od","starts_with":"počinje s"}},"has_many_delete":"Obriši","has_many_new":"Dodaj novi %{model}","has_many_remove":"Ukloniti","index_list":{"block":"Lista","blog":"Blog","grid":"Rešetka","table":"Tabela"},"logout":"Odjavi se","main_content":"Molim Vas, implementirajte %{model}#main_content da biste prikazali sadržaj.","new_model":"Novi %{model}","next":"Sljedeći","pagination":{"empty":"Nije pronađen niti jedan %{model}.","entry":{"few":"zapisa","many":"zapisa","one":"zapis","other":"zapisa"},"multiple":"Prikazani %{model} <b>%{from}&nbsp;-&nbsp;%{to}</b> od ukupno <b>%{total}</b>","multiple_without_total":"Prikazani %{model} <b>%{from}&nbsp;-&nbsp;%{to}</b>","one":"Prikazan <b>1</b> %{model}","one_page":"Prikazano <b>svih %{n}</b> %{model}"},"powered_by":"Powered by %{active_admin} %{version}","previous":"Prethodni","sidebars":{"filters":"Filtriranje"},"status_tag":{"no":"Nema","unset":"Nema","yes":"Da"},"view":"Pregledaj"}},"ca":{"active_admin":{"access_denied":{"message":"No esta autoritzat a realitzar aquesta acció."},"any":"Qualsevol","batch_actions":{"action_label":"%{title} seleccionat","button_label":"les accions per lots","default_confirmation":"¿Esteu segur que voleu fer-ho?","delete_confirmation":"¿Està segur que desitja eliminar aquests %{plural_model}?","labels":{"destroy":"esborrar"},"selection_toggle_explanation":"(Selecció de Canviar)","succesfully_destroyed":{"one":"Va destruir amb èxit 1 %{model}","other":"Va destruir amb èxit %{count} %{plural_model}"}},"blank_slate":{"content":"Encara no hi ha cap %{resource_name}.","link":"Crea'n un/a"},"cancel":"Cancel·lar","comments":{"add":"Afegeix comentari","author":"autor","body":"Cos","errors":{"empty_text":"El comentari no es va salvar, el text estava buida."},"no_comments_yet":"No hi ha comentaris","resource":"Recurs","title_content":"comentaris (%{count})"},"dashboard":"Tauler","dashboard_welcome":{"call_to_action":"Mira l'arxiu 'app/admin/dashboard.rb' per afegir seccions al tauler","welcome":"Benvingut a Active Admin. Aquest és el tauler per defecte."},"delete":"Elimina","delete_confirmation":"Segur que vols eliminar-ho?","delete_model":"Eliminar %{model}","details":"Detalls de %{model}","devise":{"change_password":{"submit":"Canviar la contrasenya","title":"Canvieu la contrasenya"},"links":{"forgot_your_password":"Heu perdut la contrasenya?","sign_in":"Registrar","sign_in_with_omniauth_provider":"Connecta't amb %{provider}"},"login":{"remember_me":"Recordar","submit":"iniciar sessió","title":"iniciar sessió"},"resend_confirmation_instructions":{"submit":"Reenviar instruccions de confirmació","title":"Reenviar instruccions de confirmació"},"reset_password":{"submit":"Restablir la contrasenya","title":"Heu perdut la contrasenya?"},"unlock":{"submit":"Reenvia instruccions per a desbloquejar","title":"Reenvia instruccions per a desbloquejar"}},"download":"Descarregar:","dropdown_actions":{"button_label":"accions"},"edit":"Edita","edit_model":"Editar %{model}","empty":"Buit","filters":{"buttons":{"clear":"Treure filtres","filter":"Filtrar"},"predicates":{"contains":"Conté","ends_with":"Acaba amb","equals":"Igual a","greater_than":"Més gran que","less_than":"Més petit que","starts_with":"Comença amb"}},"has_many_delete":"Eliminar","has_many_new":"Afegir %{model}","has_many_remove":"Treure","index_list":{"block":"Llista","blog":"Bloc","grid":"Graella","table":"Taula"},"logout":"Desconnecta't","main_content":"Implementa %{model}#main_content per mostrar contingut.","new_model":"Crear %{model}","next":"Següent","pagination":{"empty":"No hi ha %{model}","entry":{"one":"entrada","other":"entrades"},"multiple":"S'estan mostrant %{model} <b>%{from}&nbsp;-&nbsp;%{to}</b> de <b>%{total}</b> en total","multiple_without_total":"S'estan mostrant %{model} <b>%{from}&nbsp;-&nbsp;%{to}</b>","one":"S'està mostrant <b>1</b> %{model}","one_page":"S'estan mostrant <b>tots %{n}</b> %{model}"},"powered_by":"Powered by %{active_admin} %{version}","previous":"Anterior","sidebars":{"filters":"Filtres"},"status_tag":{"no":"No","unset":"No","yes":"Sí"},"view":"Mostra"},"formtastic":{"cancel":"Cancel·lar","create":"Crear %{model}","no":"No","required":"obligatori","reset":"Restablir %{model}","submit":"Acceptar","update":"Actualitzar %{model}","yes":"Sí"},"ransack":{"all":"tots","and":"i","any":"qualsevol","asc":"ascendent","attribute":"atribut","combinator":"combinador","condition":"condició","desc":"descendent","or":"o","predicate":"predicat","predicates":{"blank":"està en blanc","cont":"conté","cont_all":"conté tots","cont_any":"conté qualsevol","does_not_match":"no coincideix","does_not_match_all":"no coincideix amb tots","does_not_match_any":"no coincideix amb cap","end":"acaba en","end_all":"acaba en tot","end_any":"acaba en qualsevol","eq":"és igual a","eq_all":"és igual a tots","eq_any":"és igual a qualsevol","false":"és fals","gt":"major que","gt_all":"major que tots","gt_any":"major que qualsevol","gteq":"major que o igual a","gteq_all":"major que o igual a tots","gteq_any":"major que o igual a qualsevol","in":"en","in_all":"en tots","in_any":"en qualsevol","lt":"menor que","lt_all":"menor o igual a","lt_any":"menor que qualsevol","lteq":"menor que o igual a","lteq_all":"menor o igual a tots","lteq_any":"menor o igual a qualsevol","matches":"coincideix","matches_all":"coincideix a tots","matches_any":"coincideix a qualsevol","not_cont":"no conté","not_cont_all":"no conté tota","not_cont_any":"no conté cap","not_end":"no acaba en","not_end_all":"no acaba en tot","not_end_any":"no acaba en qualsevol","not_eq":"no és igual a","not_eq_all":"no és igual a tots","not_eq_any":"no és igual a qualsevol","not_in":"no en","not_in_all":"no en tots","not_in_any":"no en qualsevol","not_null":"no és nul","not_start":"no comença per","not_start_all":"no comença per tot","not_start_any":"no comença per qualsevol","null":"és nul","present":"és present","start":"comença per","start_all":"comença per tot","start_any":"comença per qualsevol","true":"és verdader"},"search":"cercar","sort":"ordenar","value":"valor"}},"cs":{"active_admin":{"access_denied":{"message":"Nemáte oprávnění k provedení této akce."},"any":"Kterákoliv","batch_actions":{"action_label":"%{title}","button_label":"Hromadné akce","default_confirmation":"Jste si jisti, že chcete provést?","delete_confirmation":"Jste si jisti, že chcete smazat tyto %{plural_model}?","labels":{"destroy":"Vymazat"},"selection_toggle_explanation":"(Změnit výběr)","succesfully_destroyed":{"few":"Úspěšně smazány %{count} %{plural_model}","one":"Úspěšně smazán %{model}","other":"Úspěšně smazáno %{count} %{plural_model}","zero":"Nebyl smazán žádný %{model}"}},"blank_slate":{"content":"Zatím zde není žádný obsah.","link":"Vytvořit"},"cancel":"Zrušit","comments":{"add":"Přidat komentář","author":"Autor","author_missing":"Anonymní","author_type":"Typ autora","body":"Tělo","errors":{"empty_text":"Komentář nebyl uložen, je prázdný."},"no_comments_yet":"Žádný komentář","resource":"Zdroj","resource_type":"Typ zdroje","title_content":"Komentáře administrátorů (%{count})"},"dashboard":"Úvod","dashboard_welcome":{"call_to_action":"Pro přidání sekcí na nástěnku se podívejte do souboru 'app/admin/dashboard.rb'","welcome":"Vítejte v Active Admin. Toto je nástěnka."},"delete":"Smazat","delete_confirmation":"Jste si jistí, že chcete tuto položku smazat?","delete_model":"Smazat","details":"Detaily","devise":{"change_password":{"submit":"Změnit své heslo","title":"Změnit heslo"},"links":{"forgot_your_password":"Zapomněli jste heslo?","sign_in":"Přihlásit se","sign_in_with_omniauth_provider":"Přihlásit se přes %{provider}","sign_up":"Registrovat se"},"login":{"remember_me":"Zapamatovat si mě","submit":"Přihlásit","title":"Přihlášení"},"reset_password":{"submit":"Obnovit heslo","title":"Zapomněli jste heslo?"},"unlock":{"submit":"Zaslat instrukce k odemčení účtu","title":"Zaslání instrukcí k odemčení účtu"}},"download":"Stáhnout:","dropdown_actions":{"button_label":"Akce"},"edit":"Upravit","edit_model":"Upravit","empty":"Prázdné","filters":{"buttons":{"clear":"Vyčistit filtry","filter":"Filtrovat"},"predicates":{"contains":"Obsahuje","ends_with":"Končí na","equals":"Odpovídá","greater_than":"Větší než","less_than":"Menší než","starts_with":"Začíná na"}},"has_many_delete":"Smazat","has_many_new":"Přidat nový","has_many_remove":"Odstranit","index_list":{"block":"Seznam","blog":"Blog","grid":"Tabulka","table":"Tabulka"},"logout":"Odhlásit","main_content":"Implementujte prosím %{model}#main_content pro zobrazení obsahu.","new_model":"Vytvořit","next":"Následující","pagination":{"empty":"Nenalezen.","entry":{"few":"položky","one":"položka","other":"položky"},"multiple":"<b>%{from}&nbsp;-&nbsp;%{to}</b> z <b>%{total}</b>","multiple_without_total":"<b>%{from}&nbsp;-&nbsp;%{to}</b>","one":"Zobrazena  <b>1</b> položka","one_page":"Počet zobrazených položek %{n}"},"powered_by":"%{active_admin} %{version}","previous":"Předchozí","sidebars":{"filters":"Filtry"},"status_tag":{"no":"Ne","unset":"Ne","yes":"Ano"},"view":"Zobrazit"},"ckeditor":{"buttons":{"cancel":"Zrušit","delete":"Smazat","next":"Next","upload":"Nahrát"},"confirm_delete":"Smazat soubor ?","page_title":"CKEditor Správce souborů"},"ransack":{"all":"každou","and":"a","any":"kteroukoliv","asc":"vzestupné","attribute":"atribut","combinator":"kombinátor","condition":"podmínka","desc":"sestupné","or":"nebo","predicate":"predikát","predicates":{"blank":"je prázdné","cont":"obsahuje","cont_all":"obsahuje všechny","cont_any":"obsahuje kterékoliv","does_not_match":"neodpovídá","does_not_match_all":"neodpovídá všem","does_not_match_any":"neodpovídá kterékoliv","end":"končí s","end_all":"končí se všemi","end_any":"končí s kteroukoliv","eq":"rovno","eq_all":"rovno všem","eq_any":"rovno kterékoliv","false":"není pravdivé","gt":"větší než","gt_all":"větší než všechny","gt_any":"větší než kterákoliv","gteq":"větší nebo rovno než","gteq_all":"větší nebo rovno než všechny","gteq_any":"větší nebo rovno než kterákoliv","in":"v","in_all":"ve všech","in_any":"v kterékoliv","lt":"menší než","lt_all":"menší než všechny","lt_any":"menší než kterákoliv","lteq":"menší nebo rovno než","lteq_all":"menší nebo rovno než všechny","lteq_any":"menší nebo rovno než kterákoliv","matches":"odpovídá","matches_all":"odpovídá všem","matches_any":"odpovídá kterékoliv","not_cont":"neobsahuje","not_cont_all":"neobsahuje všechny","not_cont_any":"neobsahuje kteroukoliv","not_end":"nekončí s","not_end_all":"nekončí se všemi","not_end_any":"nekončí s kteroukoliv","not_eq":"nerovno","not_eq_all":"nerovno všem","not_eq_any":"nerovno kterékoliv","not_in":"není v","not_in_all":"není ve všech","not_in_any":"není v kterékoliv","not_null":"není null","not_start":"nezačíná s","not_start_all":"nezačíná se všemi","not_start_any":"nezačíná s kteroukoliv","null":"je null","present":"je vyplněné","start":"začíná s","start_all":"začíná se všemi","start_any":"začíná s kteroukoliv","true":"je pravdivé"},"search":"vyhledávání","sort":"řazení","value":"hodnota"}},"da":{"active_admin":{"access_denied":{"message":"Du har ikke rettigheder til at udføre denne handling."},"any":"Alle","batch_actions":{"action_label":"%{title} Valgte","button_label":"Batch Handlinger","default_confirmation":"Er du sikker på du vil gøre dette?","delete_confirmation":"Er du sikker på du vil slette disse %{plural_model}?","labels":{"destroy":"Slet"},"selection_toggle_explanation":"(Skift valg)","succesfully_destroyed":{"one":"Vellykket ødelagt 1 %{model}","other":"Vellykket ødelagt %{count} %{plural_model}"}},"blank_slate":{"content":"Der er ingen %{resource_name} endnu.","link":"Opret"},"cancel":"Fortryd","comments":{"add":"Tilføj Kommentar","author":"Forfatter","author_missing":"Anonym","author_type":"Forfatter type","body":"Krop","created_at":"Oprettet","delete":"Slet kommentar","delete_confirmation":"Er du sikker på du vil slette disse kommentarer?","errors":{"empty_text":"Kommentar blev ikke gemt, tekst var tom."},"no_comments_yet":"Ingen kommentarer endnu.","resource":"Resource","resource_type":"Resource type","title_content":"Kommentarer (%{count})"},"create_another":"Opret endnu en %{model}","dashboard":"Kontrolpanel","dashboard_welcome":{"call_to_action":"Rediger 'app/admin/dashboard.rb' for at tilføje nye elementer til oversigtssiden.","welcome":"Velkommen til Active Admin. Dette er standardoversigtssiden."},"delete":"Slet","delete_confirmation":"Er du sikker på, at du ønsker at slette?","delete_model":"Slet %{model}","details":"%{model} detaljer","devise":{"change_password":{"submit":"Skift min adgangskode","title":"Skift din adgangskode"},"email":{"title":"Email"},"links":{"forgot_your_password":"Glemt din adgangskode?","resend_confirmation_instructions":"Send oplåsningsinstruktioner igen","resend_unlock_instructions":"Send oplåsningsinstruktioner igen","sign_in":"Log ind","sign_in_with_omniauth_provider":"Log ind med %{provider}","sign_up":"Opret bruger"},"login":{"remember_me":"Husk mig","submit":"Login","title":"Login"},"password":{"title":"Kodeord"},"resend_confirmation_instructions":{"submit":"Send bekræftigelsesinstruktioner igen","title":"Send bekræftigelsesinstruktioner igen"},"reset_password":{"submit":"Nulstille min adgangskode","title":"Glemt din adgangskode?"},"sign_up":{"submit":"Opret bruger","title":"Opret bruger"},"subdomain":{"title":"Underdomæne"},"unlock":{"submit":"Send oplåsningsinstruktioner igen","title":"Send oplåsningsinstruktioner igen"},"username":{"title":"Brugernavn"}},"download":"Download:","dropdown_actions":{"button_label":"Handlinger"},"edit":"Rediger","edit_model":"Rediger %{model}","empty":"Tom","filters":{"buttons":{"clear":"Ryd filtre","filter":"Filtrer"},"predicates":{"contains":"Indeholder","ends_with":"Slutter med","equals":"Lig","greater_than":"Større end","less_than":"Mindre end","starts_with":"Begynder med"}},"has_many_delete":"Slet","has_many_new":"Tilføj ny(t) %{model}","has_many_remove":"Fjern","index_list":{"block":"Liste","blog":"Blog","grid":"Gitter","table":"Tabel"},"logout":"Log ud","main_content":"Implementer venligst %{model}#main_content for at vise noget indhold.","new_model":"Ny(t) %{model}","next":"Næste","pagination":{"empty":"Ingen %{model} fundet","entry":{"one":"post","other":"poster"},"multiple":"Viser %{model} <b>%{from}&nbsp;-&nbsp;%{to}</b> af <b>%{total}</b> i alt","multiple_without_total":"Viser %{model} <b>%{from}&nbsp;-&nbsp;%{to}</b>","one":"Viser <b>1</b> %{model}","one_page":"Viser <b>alle %{n}</b> %{model}","per_page":"Per side: "},"powered_by":"Powered by %{active_admin} %{version}","previous":"Forrige","search_status":{"current_filters":"Valgte filtre:","current_scope":"Perspektiv:","headline":"Søgestatus:","no_current_filters":"Ingen"},"sidebars":{"filters":"Filtre","search_status":"Søgestatus"},"status_tag":{"no":"Nej","unset":"Nej","yes":"Ja"},"unsupported_browser":{"headline":"Vær venligst opmærksom på, at ActiveAdmin ikke længere understøtter Internet Explorer version 8 eller tidligere.","recommendation":"Vi anbefaler at du opgraderer til den nyeste <a href=\"http://windows.microsoft.com/ie\">Internet Explorer</a>, <a href=\"https://chrome.google.com/\">Google Chrome</a>, eller <a href=\"https://mozilla.org/firefox/\">Firefox</a>.","turn_off_compatibility_view":"Hvis du bruger IE 9 eller senere, så vær sikker på, at du <a href=\"https://support.microsoft.com/da-dk/help/17471\">slår \"Compatibility View\" fra</a>."},"view":"Vis"},"ransack":{"all":"alle","and":"og","any":"anhver","asc":"opstigende","attribute":"attribut","combinator":"kombinering","condition":"betingelse","desc":"faldende","or":"eller","predicate":"predicate","predicates":{"blank":"er blank","cont":"indeholder","cont_all":"indeholder alle","cont_any":"indeholder nogen","does_not_match":"matcher ikke","does_not_match_all":"matcher ikke alle","does_not_match_any":"matcher ikke nogen","end":"slutter med","end_all":"slutter med alle","end_any":"slutter med nogen","eq":"lig med","eq_all":"lig med alle","eq_any":"lig med enhver","false":"er falsk","gt":"større end","gt_all":"større end alle","gt_any":"større end nogen","gteq":"større end eller lig med","gteq_all":"større end eller lig med alle","gteq_any":"større end eller lig med nogen","in":"i","in_all":"i alle","in_any":"i nogen","lt":"mindre end","lt_all":"mindre end alle","lt_any":"mindre end nogen","lteq":"mindre end eller lig med","lteq_all":"mindre end eller lig med alle","lteq_any":"mindre end eller lig med nogen","matches":"matcher","matches_all":"matcher alle","matches_any":"matcher enhver","not_cont":"indeholder ikke","not_cont_all":"indeholder ikke alle","not_cont_any":"indeholder ikke nogen","not_end":"slutter ikke med","not_end_all":"slutter ikke med alle","not_end_any":"slutter ikke med nogen","not_eq":"ikke lig med","not_eq_all":"ikke lig med alle","not_eq_any":"ikke lig med nogen","not_in":"ikke i","not_in_all":"ikke i alle","not_in_any":"ikke i nogen","not_null":"er ikke nul","not_start":"starter ikke med","not_start_all":"starter ikke med alle","not_start_any":"starter ikke med nogen","null":"er nul","present":"er til stede","start":"starter med","start_all":"starter med alle","start_any":"starter med nogen","true":"er sand"},"search":"søg","sort":"sorter","value":"værdi"}},"de":{"active_admin":{"access_denied":{"message":"Sie haben nicht die Berechtigung um diese Aktion auszuführen."},"any":"Alle","batch_actions":{"action_label":"%{title} ausgewählte","button_label":"Stapelverarbeitung","default_confirmation":"Bist du sicher, dass Sie dies tun wollen?","delete_confirmation":"Sind Sie sicher dass sie diese %{plural_model} löschen wollen?","labels":{"destroy":"Lösche"},"selection_toggle_explanation":"(Auswahl umschalten)","succesfully_destroyed":{"one":"Erfolgreich 1 %{model} gelöscht","other":"Erfolgreich %{count} %{plural_model} gelöscht"}},"blank_slate":{"content":"Es gibt noch keine %{resource_name}.","link":"Erstellen"},"cancel":"Abbrechen","comments":{"add":"Kommentar hinzufügen","author":"Autor","author_missing":"Unbekannt","author_type":"Autor-Typ","body":"Inhalt","created_at":"Erstellt","delete":"Löschen","delete_confirmation":"Sind Sie sicher dass sie diesen Kommentar löschen wollen?","errors":{"empty_text":"Der Kommentar wurde nicht gespeichert, da der Text fehlt."},"no_comments_yet":"Es gibt noch keine Kommentare.","resource":"Res­sour­ce","resource_type":"Res­sour­cen-Typ","title_content":"Kommentare (%{count})"},"create_another":"Mehr %{model} erstellen","dashboard":"Übersicht","dashboard_welcome":{"call_to_action":"Siehe 'app/admin/dashboard.rb', um Übersichts-Bereiche hinzuzufügen.","welcome":"Willkommen in Active Admin. Dies ist die Standard-Übersichtsseite."},"delete":"Löschen","delete_confirmation":"Wollen Sie dieses Element wirklich löschen?","delete_model":"%{model} löschen","details":"%{model} Details","devise":{"change_password":{"submit":"Mein Passwort ändern","title":"Ändern Sie Ihr Passwort"},"email":{"title":"E-Mail-Adresse"},"links":{"forgot_your_password":"Passwort vergessen?","resend_confirmation_instructions":"Bestätigungsanweisung erneut senden","resend_unlock_instructions":"Entsperrungsanweisung erneut senden","sign_in":"Anmeldung","sign_in_with_omniauth_provider":"Anmeldung mit %{provider}","sign_up":"Registrieren"},"login":{"remember_me":"Angemeldet bleiben","submit":"Login","title":"Login"},"password":{"title":"Passwort"},"password_confirmation":{"title":"Passwort Bestätigung"},"resend_confirmation_instructions":{"submit":"Anleitung zur Bestätigung noch mal schicken","title":"Anleitung zur Bestätigung noch mal schicken"},"reset_password":{"submit":"Mein Passwort zurücksetzen","title":"Passwort vergessen?"},"sign_up":{"submit":"Registrieren","title":"Registrieren"},"subdomain":{"title":"Subdomain"},"unlock":{"submit":"Entsperrungsanweisung erneut senden","title":"Entsperrungsanweisung erneut senden"},"username":{"title":"Benutzername"}},"download":"Herunterladen:","dropdown_actions":{"button_label":"Aktionen"},"edit":"Bearbeiten","edit_model":"%{model} bearbeiten","empty":"Leer","filters":{"buttons":{"clear":"Filter entfernen","filter":"Filtern"},"predicates":{"contains":"Enthält","ends_with":"Endet mit","equals":"Gleich","from":"Von","greater_than":"Größer als","gteq_datetime":"Größer gleich","less_than":"Kleiner als","lteq_datetime":"Kleiner gleich","starts_with":"Beginnt mit","to":"Bis"}},"has_many_delete":"Löschen","has_many_new":"%{model} hinzufügen","has_many_remove":"Entfernen","index_list":{"block":"Liste","blog":"Blog","grid":"Gitter","table":"Tabelle"},"logout":"Abmelden","main_content":"Bitte implementieren Sie %{model}#main_content, um Inhalte anzuzeigen.","move":"Bewegen","new_model":"%{model} erstellen","next":"Weiter","pagination":{"empty":"Keine %{model} gefunden","entry":{"one":"Eintrag","other":"Einträge"},"multiple":"Zeige %{model} <b>%{from}&nbsp;–&nbsp;%{to}</b> von <b>%{total}</b>","multiple_without_total":"Zeige %{model} <b>%{from}&nbsp;–&nbsp;%{to}</b>","one":"Zeige <b>1</b> %{model}","one_page":"Zeige <b>alle %{n}</b> %{model}","per_page":"Pro Seite: "},"powered_by":"Powered by %{active_admin} %{version}","previous":"Zurück","scopes":{"all":"Alle"},"search_status":{"current_filters":"Aktuelle Filter:","current_scope":"Anwendungsbereich:","headline":"Filter","no_current_filters":"Keine"},"sidebars":{"filters":"Filter","search_status":"Suchstatus"},"status_tag":{"no":"Nein","unset":"Nein","yes":"Ja"},"unsupported_browser":{"headline":"ActiveAdmin unterstützt nicht länger den Internet Explorer in Version 8 oder niedriger.","recommendation":"Wir empfehlen die Nutzung von <a href=\"http://windows.microsoft.com/ie\">Internet Explorer</a>, <a href=\"https://chrome.google.com/\">Google Chrome</a>, oder <a href=\"https://mozilla.org/firefox/\">Firefox</a>.","turn_off_compatibility_view":"Wenn sie IE 9 oder neuer benutzen, stellen sie sicher das sie den <a href=\"https://support.microsoft.com/de-de/help/17471\">\"Kompatibilitätsansicht\" ausgeschaltet</a> haben."},"view":"Anzeigen"},"activerecord":{"attributes":{"active_admin/comment":{"author_type":"Autortyp","body":"Inhalt","created_at":"Erstellt","namespace":"Namensraum","resource_type":"Ressourcentyp","updated_at":"Aktualisiert"}},"models":{"active_admin/comment":{"one":"Kommentar","other":"Kommentare"},"comment":{"one":"Kommentar","other":"Kommentare"}}},"ckeditor":{"buttons":{"cancel":"Abbrechen","delete":"Löschen","next":"Next","upload":"Hochladen"},"confirm_delete":"Datei löschen?","page_title":"CKEditor Dateimanager"},"devise":{"failure":{"expired":"Ihr Account ist aufgrund zu langer Inaktivität abgelaufen. Bitte kontaktieren Sie den Administrator.","session_limited":"Ihre Anmeldedaten wurden in einem anderen Browser genutzt. Bitte melden Sie sich erneut an, um in diesem Browser fortzufahren."},"invalid_captcha":"Die Captcha-Eingabe ist nicht gültig.","paranoid_verify":{"code_required":"Bitte geben Sie den Code ein, den unser Support-Team zur Verfügung gestellt hat."},"password_expired":{"change_required":"Ihr Passwort ist abgelaufen. Bitte vergeben Sie ein neues Passwort.","updated":"Das neue Passwort wurde übernommen."}},"errors":{"messages":{"equal_to_current_password":"darf nicht dem aktuellen Passwort entsprechen.","password_complexity":{"digit":{"one":"muss mindestens eine Ziffer enthalten","other":"muss mindestens %{count} Ziffern enthalten"},"lower":{"one":"muss mindestens einen Kleinbuchstaben enthalten","other":"muss mindestens %{count} Kleinbuchstaben enthalten"},"symbol":{"one":"muss mindestens ein Satzzeichen enthalten","other":"muss mindestens %{count} Satzzeichen enthalten"},"upper":{"one":"muss mindestens einen Großbuchstaben enthalten","other":"muss mindestens %{count} Großbuchstaben enthalten"}},"taken_in_past":"wurde bereits in der Vergangenheit verwendet."}},"formtastic":{"cancel":"Abbrechen","create":"%{model} anlegen","no":"Nein","required":"Pflichtfeld","reset":"%{model} zurücksetzen","submit":"Abschicken","update":"%{model} aktualisieren","yes":"Ja"},"ransack":{"all":"alle","and":"und","any":"beliebige","asc":"aufsteigend","attribute":"Attribut","combinator":"Kombinator","condition":"Bedingung","desc":"absteigend","or":"oder","predicate":"Eigenschaft","predicates":{"blank":"ist leer","cont":"enthält","cont_all":"enthält alle","cont_any":"enthält beliebige","does_not_match":"stimmt nicht überein","does_not_match_all":"stimmt nicht mit allen überein","does_not_match_any":"erfüllt ein beliebiger/s nicht","end":"endet mit","end_all":"endet mit allen","end_any":"endet mit beliebigen","eq":"gleicht","eq_all":"gleicht allen","eq_any":"gleicht beliebigen","false":"ist falsch","gt":"größer als","gt_all":"größer als alle","gt_any":"größer als ein beliebiger/s","gteq":"größer oder gleich","gteq_all":"größer oder gleich alle","gteq_any":"größer oder gleich als ein beliebiger/s","in":"in","in_all":"in allen","in_any":"ist nicht in einem beliebigen","lt":"kleiner als","lt_all":"kleiner als alle als alle","lt_any":"kleiner als ein beliebiger/s","lteq":"kleiner oder gleich","lteq_all":"kleiner oder gleich allen","lteq_any":"kleiner oder gleich beliebige","matches":"entspricht","matches_all":"stimmt mit allen überein","matches_any":"stimmt überein mit einem beliebigen","not_cont":"enthält nicht","not_cont_all":"enthält keine/s","not_cont_any":"enthält ein beliebiger/s nicht","not_end":"endet nicht mit","not_end_all":"endet nicht mit allen","not_end_any":"endet nicht mit beliebigen","not_eq":"ungleich","not_eq_all":"ungleich allen","not_eq_any":"ungleich beliebigen","not_in":"nicht in","not_in_all":"nicht in allen","not_in_any":"nicht in beliebige","not_null":"ist nicht null","not_start":"beginnt nicht mit","not_start_all":"beginnt nicht mit allen","not_start_any":"beginnt nicht mit beliebigen","null":"ist null","present":"ist vorhanden","start":"beginnt mit","start_all":"beginnt mit allen","start_any":"beginnt mit beliebigen","true":"ist wahr"},"search":"suchen","sort":"sortieren","value":"Wert"}},"de-CH":{"active_admin":{"any":"Alle","batch_actions":{"action_label":"%{title} ausgewählte","button_label":"Stapelverarbeitung","default_confirmation":"Bist du sicher, dass Sie dies tun wollen?","delete_confirmation":"Sind Sie sicher dass sie diese %{plural_model} löschen wollen?","labels":{"destroy":"Lösche"},"selection_toggle_explanation":"(Auswahl umschalten)","succesfully_destroyed":{"one":"Erfolgreich 1 %{model} gelöscht","other":"Erfolgreich %{count} %{plural_model} gelöscht"}},"blank_slate":{"content":"Es gibt noch keine %{resource_name}.","link":"Erstellen"},"cancel":"Abbrechen","comments":{"add":"Kommentar hinzufügen","author":"Autor","body":"Inhalt","delete":"Löschen","delete_confirmation":"Sind Sie sicher dass sie diesen Kommentar löschen wollen?","errors":{"empty_text":"Der Kommentar wurde nicht gespeichert, da der Text fehlt."},"no_comments_yet":"Es gibt noch keine Kommentare.","resource":"Resource","title_content":"Kommentare (%{count})"},"dashboard":"Übersicht","dashboard_welcome":{"call_to_action":"Siehe 'app/admin/dashboards.rb', um Übersichts-Bereiche hinzuzufügen.","welcome":"Willkommen in Active Admin. Dies ist die Standard-Übersichtsseite."},"delete":"Löschen","delete_confirmation":"Wollen Sie dieses Element wirklich löschen?","delete_model":"%{model} löschen","details":"%{model} Details","devise":{"change_password":{"submit":"Mein Passwort ändern","title":"Ändern Sie Ihr Passwort"},"links":{"forgot_your_password":"Passwort vergessen?","resend_confirmation_instructions":"Bestätigungsanweisung erneut senden","resend_unlock_instructions":"Entsperrungsanweisung erneut senden","sign_in":"Anmeldung","sign_in_with_omniauth_provider":"Anmeldung mit %{provider}","sign_up":"Registrieren"},"login":{"remember_me":"erinnere dich an mich","submit":"Login","title":"Login"},"reset_password":{"submit":"Mein Passwort zurücksetzen","title":"Passwort vergessen?"}},"download":"Herunterladen:","dropdown_actions":{"button_label":"Aktionen"},"edit":"Bearbeiten","edit_model":"%{model} bearbeiten","empty":"Leer","filters":{"buttons":{"clear":"Filter entfernen","filter":"Filtern"},"predicates":{"contains":"Enthält","ends_with":"Endet mit","equals":"Gleich","greater_than":"Grösser als","less_than":"Kleiner als","starts_with":"Beginnt mit"}},"has_many_delete":"Löschen","has_many_new":"%{model} hinzufügen","has_many_remove":"Entfernen","logout":"Abmelden","main_content":"Bitte implementieren Sie %{model}#main_content, um Inhalte anzuzeigen.","new_model":"%{model} erstellen","next":"Weiter","pagination":{"empty":"Keine %{model} gefunden","entry":{"one":"Eintrag","other":"Einträge"},"multiple":"Zeige %{model} <b>%{from}&nbsp;–&nbsp;%{to}</b> von <b>%{total}</b>","multiple_without_total":"Zeige %{model} <b>%{from}&nbsp;–&nbsp;%{to}</b>","one":"Zeige <b>1</b> %{model}","one_page":"Zeige <b>alle %{n}</b> %{model}"},"powered_by":"Powered by %{active_admin} %{version}","previous":"Zurück","sidebars":{"filters":"Filter"},"status_tag":{"no":"Nicht","unset":"Nicht","yes":"Ja"},"unsupported_browser":{"headline":"ActiveAdmin unterstützt nicht länger den Internet Explorer in Version 8 oder niedriger.","recommendation":"Wir empfehlen die Nutzung von <a href=\"http://windows.microsoft.com/ie\">Internet Explorer</a>, <a href=\"https://chrome.google.com/\">Google Chrome</a>, oder <a href=\"https://mozilla.org/firefox/\">Firefox</a>.","turn_off_compatibility_view":"Wenn sie IE 9 oder neuer benutzen, stellen sie sicher das sie den <a href=\"https://support.microsoft.com/de-ch/help/17471\">\"Kompatibilitätsansicht\" ausgeschaltet</a> haben."},"view":"Anzeigen"}},"el":{"active_admin":{"access_denied":{"message":"Δεν έχετε πρόσβαση για αυτή την ενέργεια."},"any":"Όλες οι εγγραφές","batch_actions":{"action_label":"%{title} επιλεγμένων","button_label":"Μαζικές Ενέργειες","default_confirmation":"Είστε σίγουρος πως θέλετε να το κάνετε αυτό;","delete_confirmation":"Είστε σίγουρος πως θέλετε να διαγράψετε αυτά τα %{plural_model}?","labels":{"destroy":"Διαγραφή"},"selection_toggle_explanation":"(Αντιστροφή επιλογών)","succesfully_destroyed":{"one":"Διαγράφηκε επιτυχώς 1 %{model}","other":"Διαγράφηκαν επιτυχώς %{count} %{plural_model}"}},"blank_slate":{"content":"Δεν υπάρχουν %{resource_name} ακόμα.","link":"Δημιουργήστε μία εγγραφή"},"cancel":"Ακύρωση","comments":{"add":"Προσθήκη Σχολίου","author":"Συγγραφέας","author_missing":"Ανώνυμος","author_type":"Τύπος Συγγραφέα","body":"Κείμενο","errors":{"empty_text":"Το σχόλιο δε σώθηκε, το κείμενο ήταν κενό."},"no_comments_yet":"Δεν υπάρχει κανένα σχόλιο.","resource":"Εγγραφή","resource_type":"Τύπος Εγγραφής","title_content":"Σχόλια (%{count})"},"dashboard":"Σελίδα διαχείρισης","dashboard_welcome":{"call_to_action":"Για να προσθέσετε ενότητες, ανατρέξτε στο αρχείο 'app/admin/dashboard.rb'","welcome":"Καλωσορίσατε στο Active Admin. Αυτή είναι η αρχική σελίδα διαχείρισης."},"delete":"Διαγραφή","delete_confirmation":"Είστε σίγουρος πως θέλετε να το διαγράψετε;","delete_model":"Διαγραφή %{model}","details":"Λεπτομέρειες %{model}","devise":{"change_password":{"submit":"Αλλαγή του κωδικού","title":"Αλλάξτε τον κωδικό σας"},"email":{"title":"Email"},"links":{"forgot_your_password":"Ξεχάσατε τον κωδικό σας;","resend_confirmation_instructions":"Αποστολή οδηγιών επιβεβαίωσης","resend_unlock_instructions":"Αποστολή οδηγιών ξεκλειδώματος","sign_in":"Σύνδεση","sign_in_with_omniauth_provider":"Σύνδεση με %{provider}","sign_up":"Εγγραφή"},"login":{"remember_me":"Να με θυμάσαι","submit":"Σύνδεση","title":"Σύνδεση"},"password":{"title":"Κωδικός"},"resend_confirmation_instructions":{"submit":"Αποστολή οδηγιών επιβεβαίωσης","title":"Αποστολή οδηγιών επιβεβαίωσης"},"reset_password":{"submit":"Επαναφορά κωδικού","title":"Ξεχάσατε τον κωδικό σας;"},"sign_up":{"submit":"Εγγραφή","title":"Εγγραφή"},"subdomain":{"title":"Subdomain"},"unlock":{"submit":"Αποστολή οδηγιών ξεκλειδώματος","title":"Αποστολή οδηγιών ξεκλειδώματος"},"username":{"title":"Όνομα χρήστη"}},"download":"Κατέβασμα:","dropdown_actions":{"button_label":"Ενέργειες"},"edit":"Επεξεργασία","edit_model":"Επεξεργασία %{model}","empty":"Άδειο","filters":{"buttons":{"clear":"Καθαρισμός Φίλτρων","filter":"Φίλτρα"},"predicates":{"contains":"Περιέχει","ends_with":"Καταλήγει σε","equals":"Είναι ίσο με","greater_than":"Μεγαλύτερο από","less_than":"Μικρότερο από","starts_with":"Αρχίζει με"}},"has_many_delete":"Διαγραφή","has_many_new":"Προσθήκη Νέου %{model}","has_many_remove":"Αφαίρεση","index_list":{"block":"Λίστα","blog":"Blog","grid":"Πλέγμα","table":"Πίνακας"},"logout":"Αποσύνδεση","main_content":"Παρακαλώ υλοποιήστε την %{model}#main_content για να εμφανίσετε περιεχόμενο.","new_model":"Δημιουργία %{model}","next":"Επόμενη","pagination":{"empty":"Δε βρέθηκαν %{model}","entry":{"one":"εγγραφή","other":"εγγραφές"},"multiple":"Εμφανίζονται %{model} <b>%{from}&nbsp;-&nbsp;%{to}</b> από <b>%{total}</b> συνολικά","multiple_without_total":"Εμφανίζονται %{model} <b>%{from}&nbsp;-&nbsp;%{to}</b>","one":"Εμφάνιζεται <b>1</b> %{model}","one_page":"Εμφανίζονται <b>όλες οι %{n}</b> εγγραφές %{model}"},"powered_by":"Powered by %{active_admin} %{version}","previous":"Προηγούμενη","sidebars":{"filters":"Φίλτρα"},"status_tag":{"no":"Όχι","unset":"Όχι","yes":"Ναι"},"unsupported_browser":{"headline":"Το ActiveAdmin δεν υποστηρίζει πλεον τον Internet Explorer έκδοση 8 η μικρότερη.","recommendation":"Σας προτείνουμε να αναβαθμίσετε στην τελευταία <a href=\"http://windows.microsoft.com/ie\">Internet Explorer</a>, <a href=\"https://chrome.google.com/\">Google Chrome</a>, or <a href=\"https://mozilla.org/firefox/\">Firefox</a>.","turn_off_compatibility_view":"Αν χρησιμοποιείτε IE 9 ή μεγαλύτερη έκδοση, σιγουρευτείτε ότι <a href=\"https://support.microsoft.com/el-gr/help/17471\">turn off \"Compatibility View\"</a>."},"view":"Προβολή"},"ransack":{"all":"όλα","and":"και","any":"οποιοδήποτε","asc":"αύξουσα","attribute":"ιδιότητα","combinator":"συνδυαστής","condition":"συνθήκη","desc":"φθίνουσα","or":"ή","predicate":"κατηγορούμενο","predicates":{"blank":"είναι κενό","cont":"περιέχει","cont_all":"περιέχει όλα","cont_any":"περιέχει οποιοδήποτε","does_not_match":"δεν αντιστοιχεί","does_not_match_all":"δεν αντιστοιχεί με όλα","does_not_match_any":"δεν αντιστοιχεί με οποιοδήποτε","end":"τελειώνει με","end_all":"τελειώνει με όλα","end_any":"τελειώνει οποιοδήποτε","eq":"ίσον","eq_all":"ισούται με όλα","eq_any":"ισούται με οποιοδήποτε","false":"ψευδές","gt":"μεγαλύτερο από","gt_all":"μεγαλύτερο από όλα\"","gt_any":"μεγαλύτερο από οποιοδήποτε","gteq":"μεγαλύτερο ή ίσον από","gteq_all":"μεγαλύτερο ή ίσον από όλα","gteq_any":"μεγαλύτερο ή ίσον από οποιοδήποτε","in":"περιέχεται","in_all":"περιέχεται σε όλα","in_any":"περιέχεται σε οποιοδήποτε","lt":"μικρότερο από","lt_all":"μικρότερο από όλα","lt_any":"μικρότερο από οποιοδήποτε","lteq":"μικρότερο ή ίσον","lteq_all":"μικρότερο ή ίσον από όλα","lteq_any":"μικρότερο ή ίσον από οποιοδήποτε","matches":"αντιστοιχεί","matches_all":"αντιστοιχεί με όλα","matches_any":"αντιστοιχεί με οποιοδήποτε","not_cont":"δεν περιέχει","not_cont_all":"δεν περιέχει όλα","not_cont_any":"δεν περιέχει οποιοδήποτε","not_end":"δεν τελειώνει με","not_end_all":"δεν τελειώνει με όλα","not_end_any":"δεν τελειώνει οποιοδήποτε","not_eq":"άνισο","not_eq_all":"άνισο με όλα","not_eq_any":"άνισο με οποιοδήποτε","not_in":"δεν περιέχεται","not_in_all":"δεν περιέχεται σε όλα","not_in_any":"δεν περιέχεται σε οποιοδήποτε","not_null":"δεν είναι άκυρο","not_start":"δεν αρχίζει με","not_start_all":"δεν αρχίζει με όλα","not_start_any":"δεν αρχίζει με οποιοδήποτε","null":"άκυρο","present":"υπάρχει","start":"αρχίζει με","start_all":"αρχίζει με όλα","start_any":"αρχίζει με οποιοδήποτε","true":"αληθές"},"search":"αναζήτηση","sort":"ταξινόμηση","value":"τιμή"}},"el-GR":{"ckeditor":{"buttons":{"cancel":"Ακύρωση","delete":"Διαγραφή","next":"Next","upload":"Μεταφόρτωση"},"confirm_delete":"Διαγραφή αρχείου;","page_title":"CKEditor Διαχείρηση Αρχείων"}},"en":{"active_admin":{"access_denied":{"message":"You are not authorized to perform this action."},"any":"Any","batch_actions":{"action_label":"%{title} Selected","button_label":"Batch Actions","default_confirmation":"Are you sure you want to do this?","delete_confirmation":"Are you sure you want to delete these %{plural_model}?","labels":{"destroy":"Delete"},"selection_toggle_explanation":"(Toggle Selection)","succesfully_destroyed":{"one":"Successfully deleted 1 %{model}","other":"Successfully deleted %{count} %{plural_model}"}},"blank_slate":{"content":"There are no %{resource_name} yet.","link":"Create one"},"cancel":"Cancel","comments":{"add":"Add Comment","author":"Author","author_missing":"Anonymous","author_type":"Author Type","body":"Body","created_at":"Created","delete":"Delete Comment","delete_confirmation":"Are you sure you want to delete these comments?","errors":{"empty_text":"Comment wasn't saved, text was empty."},"no_comments_yet":"No comments yet.","resource":"Resource","resource_type":"Resource Type","title_content":"Comments (%{count})"},"create_another":"Create another %{model}","dashboard":"Dashboard","dashboard_welcome":{"call_to_action":"To add dashboard sections, checkout 'app/admin/dashboard.rb'","welcome":"Welcome to Active Admin. This is the default dashboard page."},"delete":"Delete","delete_confirmation":"Are you sure you want to delete this?","delete_model":"Delete %{model}","details":"%{model} Details","devise":{"change_password":{"submit":"Change my password","title":"Change your password"},"email":{"title":"Email"},"links":{"forgot_your_password":"Forgot your password?","resend_confirmation_instructions":"Resend confirmation instructions","resend_unlock_instructions":"Resend unlock instructions","sign_in":"Sign in","sign_in_with_omniauth_provider":"Sign in with %{provider}","sign_up":"Sign up"},"login":{"remember_me":"Remember me","submit":"Login","title":"Login"},"password":{"title":"Password"},"password_confirmation":{"title":"Confirm Password"},"resend_confirmation_instructions":{"submit":"Resend confirmation instructions","title":"Resend confirmation instructions"},"reset_password":{"submit":"Reset My Password","title":"Forgot your password?"},"sign_up":{"submit":"Sign up","title":"Sign up"},"subdomain":{"title":"Subdomain"},"unlock":{"submit":"Resend unlock instructions","title":"Resend unlock instructions"},"username":{"title":"Username"}},"download":"Download:","dropdown_actions":{"button_label":"Actions"},"edit":"Edit","edit_model":"Edit %{model}","empty":"Empty","filters":{"buttons":{"clear":"Clear Filters","filter":"Filter"},"predicates":{"contains":"Contains","ends_with":"Ends with","equals":"Equals","from":"From","greater_than":"Greater than","gteq_datetime":"Greater or equal to","less_than":"Less than","lteq_datetime":"Lesser or equal to","starts_with":"Starts with","to":"To"}},"has_many_delete":"Delete","has_many_new":"Add New %{model}","has_many_remove":"Remove","index_list":{"block":"List","blog":"Blog","grid":"Grid","table":"Table"},"logout":"Logout","main_content":"Please implement %{model}#main_content to display content.","move":"Move","new_model":"New %{model}","next":"Next","pagination":{"empty":"No %{model} found","entry":{"one":"entry","other":"entries"},"multiple":"Displaying %{model} <b>%{from}&nbsp;-&nbsp;%{to}</b> of <b>%{total}</b> in total","multiple_without_total":"Displaying %{model} <b>%{from}&nbsp;-&nbsp;%{to}</b>","one":"Displaying <b>1</b> %{model}","one_page":"Displaying <b>all %{n}</b> %{model}","per_page":"Per page: "},"powered_by":"Powered by %{active_admin} %{version}","previous":"Previous","scopes":{"all":"All"},"search_status":{"current_filters":"Current filters:","current_scope":"Scope:","headline":"Search status:","no_current_filters":"None"},"sidebars":{"filters":"Filters","search_status":"Search Status"},"status_tag":{"no":"No","unset":"No","yes":"Yes"},"unsupported_browser":{"headline":"Please note that ActiveAdmin no longer supports Internet Explorer versions 8 or less.","recommendation":"We recommend that you <a href=\"http://browsehappy.com/\">upgrade your browser</a> to improve your experience.","turn_off_compatibility_view":"If you are using IE 9 or later, make sure you <a href=\"https://support.microsoft.com/en-us/help/17471\">turn off \"Compatibility View\"</a>."},"view":"View"},"activerecord":{"attributes":{"active_admin/comment":{"author_type":"Author type","body":"Body","created_at":"Created","namespace":"Namespace","resource_type":"Resource type","updated_at":"Updated"},"story":{"story_tags":"Tags"},"story_schedule":{"posttime":"Scheduled time"},"user":{"avatar_content_type":"Image type"}},"errors":{"messages":{"record_invalid":"Validation failed: %{errors}","restrict_dependent_destroy":{"has_many":"Cannot delete record because dependent %{record} exist","has_one":"Cannot delete record because a dependent %{record} exists"}},"models":{"user":{"attributes":{"unlock_token":{"blank":"is blank. You may have navigated to this page by mistake. Try signing in again.","invalid":"is expired. Most likely this is because the account is already unlocked. Try signing in again."}}}}},"models":{"active_admin/comment":{"one":"Comment","other":"Comments"},"comment":{"one":"Comment","other":"Comments"}}},"api":{"errors":{"forbidden_operation":"forbidden operation","invalid_role":"invalid role","invitation_accepted":"invitation already accepted","last_group_admin":"last group admin","resource_not_found":"resource not found","unauthorized":"unauthorized user","user_not_found":"user not found"}},"ckeditor":{"buttons":{"cancel":"Cancel","delete":"Delete","next":"Next","upload":"Upload"},"confirm_delete":"Delete file?","page_title":"CKEditor Files Manager"},"config":{"new_fp_page_type":"front-page","old_fp_page_type":"legacy-front-page"},"date":{"abbr_day_names":["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],"abbr_month_names":[null,"Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"day_names":["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],"formats":{"default":"%Y-%m-%d","long":"%B %d, %Y","short":"%b %d"},"month_names":[null,"January","February","March","April","May","June","July","August","September","October","November","December"],"order":["year","month","day"]},"datetime":{"distance_in_words":{"about_x_hours":{"one":"about 1 hour","other":"about %{count} hours"},"about_x_months":{"one":"about 1 month","other":"about %{count} months"},"about_x_years":{"one":"about 1 year","other":"about %{count} years"},"almost_x_years":{"one":"almost 1 year","other":"almost %{count} years"},"half_a_minute":"half a minute","less_than_x_minutes":{"one":"less than a minute","other":"less than %{count} minutes"},"less_than_x_seconds":{"one":"less than 1 second","other":"less than %{count} seconds"},"over_x_years":{"one":"over 1 year","other":"over %{count} years"},"x_days":{"one":"1 day","other":"%{count} days"},"x_minutes":{"one":"1 minute","other":"%{count} minutes"},"x_months":{"one":"1 month","other":"%{count} months"},"x_seconds":{"one":"1 second","other":"%{count} seconds"}},"prompts":{"day":"Day","hour":"Hour","minute":"Minute","month":"Month","second":"Seconds","year":"Year"}},"devise":{"confirmations":{"confirmed":"Your account was successfully confirmed. You are now signed in.","send_instructions":"You will receive an email with instructions for how to confirm your email address in a few minutes.","send_paranoid_instructions":"If your email address exists in our database, you will receive an email with instructions for how to confirm your email address in a few minutes."},"failure":{"already_authenticated":"You are already signed in.","expired":"Your account has expired due to inactivity. Please contact the site administrator.","inactive":"Your account is not activated yet.","invalid":"Invalid %{authentication_keys} or password.","last_attempt":"You have one more attempt before your account is locked.","locked":"Your account is locked due to too many failed login attempts. You will receive an email with instructions for how to restore your access in a few minutes. You can also visit the <a href=\"/helpdesk_redirect/\">helpdesk</a> to get your access restored or report suspicious activity.","not_found_in_database":"Invalid user name or password.","session_limited":"Your login credentials were used in another browser. Please sign in again to continue in this browser.","timeout":"You were logged out because your password expired. <a href=\"/users/sign_in\">Log in</a> to renew your password. If you were in the middle of something, it may be wise to copy and paste your text into an offline text editor so you do not lose any work.","unauthenticated":"We cannot recognize who you are! Please <a href=\"/users/signup\">sign up</a> or <a href=\"/users/sign_in\">log in</a> to continue. If you were in the middle of something, it may be wise to copy and paste your text into an offline text editor so you do not lose any work.","unconfirmed":"You have to confirm your account before continuing. <a href=\"/users/confirmation/new\">Resend confirmation</a>"},"invalid_captcha":"The captcha input was invalid.","invalid_security_question":"The security question answer was invalid.","mailer":{"confirmation_instructions":{"subject":"Confirmation instructions"},"email_changed":{"subject":"Email Changed"},"password_change":{"subject":"Password Changed"},"reset_password_instructions":{"subject":"Reset password instructions"},"unlock_instructions":{"subject":"Unlock instructions"}},"omniauth_callbacks":{"failure":"Could not authorize you from %{kind} because \"%{reason}\".","success":"Successfully authorized from %{kind} account."},"paranoid_verify":{"code_required":"Please enter the code our support team provided"},"password_expired":{"change_required":"Your password is expired. Please renew your password.","updated":"Your new password is saved."},"password_matches_nickname":"If your password matches your username, it is very easy to guess. Please pick another.","password_prohibited":"That password is very commonly used and too easy to guess. Please pick another.","passwords":{"no_token":"You can't access this page without coming from a password reset email. If you do come from a password reset email, please make sure you used the full URL provided.","send_instructions":"You will receive an email with instructions on how to reset your password in a few minutes.","send_paranoid_instructions":"If your email address exists in our database, you will receive a password recovery link at your email address in a few minutes.","updated":"Your password has been changed successfully. You are now signed in.","updated_not_active":"Your password has been changed successfully."},"registrations":{"destroyed":"Bye! Your account has been successfully cancelled. We hope to see you again soon.","signed_up":"Welcome! You have signed up successfully.","signed_up_but_inactive":"You have signed up successfully. However, we could not sign you in because your account is not yet activated.","signed_up_but_locked":"You have signed up successfully. However, we could not sign you in because your account is locked.","signed_up_but_unconfirmed":"A message with a confirmation link has been sent to your email address. Please follow the link to activate your account.","update_needs_confirmation":"You updated your account successfully, but we need to verify your new email address. Please check your email and follow the confirm link to confirm your new email address.","updated":"Your account has been updated successfully.","updated_but_not_signed_in":"Your account has been updated successfully, but since your password was changed, you need to sign in again"},"sessions":{"already_signed_out":"Signed out successfully.","signed_in":"Signed in successfully.","signed_out":"Signed out successfully."},"stories":{"no_permission":"You don't have permission to perform this action. If this does not make sense to you, you can report your problem to the helpdesk. It may be wise to copy and paste your text into an offline text editor so you don't lose any work."},"unlocks":{"send_instructions":"You will receive an email with instructions for how to unlock your account in a few minutes.","send_paranoid_instructions":"If your account exists, you will receive an email with instructions for how to unlock it in a few minutes.","unlocked":"Your account has been unlocked successfully. Please sign in to continue."}},"errors":{"format":"%{attribute} %{message}","messages":{"accepted":"must be accepted","already_confirmed":"was already confirmed, please try signing in","blank":"can't be blank","confirmation":"doesn't match %{attribute}","confirmation_period_expired":"needs to be confirmed within %{period}, please request a new one","empty":"can't be empty","equal_to":"must be equal to %{count}","equal_to_current_password":"must be different than the current password.","even":"must be even","exclusion":"is reserved","expired":"has expired, please request a new one","greater_than":"must be greater than %{count}","greater_than_or_equal_to":"must be greater than or equal to %{count}","in_between":"must be in between %{min} and %{max}","inclusion":"is not included in the list","invalid":"is invalid","less_than":"must be less than %{count}","less_than_or_equal_to":"must be less than or equal to %{count}","model_invalid":"Validation failed: %{errors}","not_a_number":"is not a number","not_an_integer":"must be an integer","not_found":"not found","not_locked":"was not locked","not_saved":{"one":"1 error prohibited this %{resource} from being saved:","other":"%{count} errors prohibited this %{resource} from being saved:"},"odd":"must be odd","other_than":"must be other than %{count}","password_complexity":{"digit":{"one":"must contain at least one digit","other":"must contain at least %{count} numerals"},"lower":{"one":"must contain at least one lower-case letter","other":"must contain at least %{count} lower-case letters"},"symbol":{"one":"must contain at least one punctuation mark or symbol","other":"must contain at least %{count} puncutation marks or symbols"},"upper":{"one":"must contain at least one upper-case letter","other":"must contain at least %{count} upper-case letters"}},"present":"must be blank","required":"must exist","spoofed_media_type":"has contents that are not what they are reported to be","taken":"has already been taken","taken_in_past":"was used previously.","too_long":{"one":"is too long (maximum is 1 character)","other":"is too long (maximum is %{count} characters)"},"too_short":{"one":"is too short (minimum is 1 character)","other":"is too short (minimum is %{count} characters)"},"wrong_length":{"one":"is the wrong length (should be 1 character)","other":"is the wrong length (should be %{count} characters)"}}},"flash":{"actions":{"create":{"notice":"%{resource_name} was successfully created."},"destroy":{"alert":"%{resource_name} could not be destroyed.","notice":"%{resource_name} was successfully destroyed."},"update":{"notice":"%{resource_name} was successfully updated."}}},"helpers":{"page_entries_info":{"entry":{"one":"entry","other":"entries","zero":"entries"},"more_pages":{"display_entries":"Displaying %{entry_name} <b>%{first}&nbsp;-&nbsp;%{last}</b> of <b>%{total}</b> in total"},"one_page":{"display_entries":{"one":"Displaying <b>1</b> %{entry_name}","other":"Displaying <b>all %{count}</b> %{entry_name}","zero":"No %{entry_name} found"}}},"select":{"prompt":"Please select"},"submit":{"create":"Create %{model}","submit":"Save %{model}","update":"Update %{model}"}},"number":{"currency":{"format":{"delimiter":",","format":"%u%n","precision":2,"separator":".","significant":false,"strip_insignificant_zeros":false,"unit":"$"}},"format":{"delimiter":",","precision":3,"separator":".","significant":false,"strip_insignificant_zeros":false},"human":{"decimal_units":{"format":"%n%u","units":{"billion":"B","million":"M","quadrillion":"Q","thousand":"K","trillion":"T","unit":""}},"format":{"delimiter":"","precision":3,"significant":true,"strip_insignificant_zeros":true},"storage_units":{"format":"%n %u","units":{"byte":{"one":"Byte","other":"Bytes"},"eb":"EB","gb":"GB","kb":"KB","mb":"MB","pb":"PB","tb":"TB"}}},"nth":{"ordinalized":{},"ordinals":{}},"percentage":{"format":{"delimiter":"","format":"%n%"}},"precision":{"format":{"delimiter":""}}},"ransack":{"all":"all","and":"and","any":"any","asc":"ascending","attribute":"attribute","combinator":"combinator","condition":"condition","desc":"descending","or":"or","predicate":"predicate","predicates":{"blank":"is blank","cont":"contains","cont_all":"contains all","cont_any":"contains any","does_not_match":"doesn't match","does_not_match_all":"doesn't match all","does_not_match_any":"doesn't match any","end":"ends with","end_all":"ends with all","end_any":"ends with any","eq":"equals","eq_all":"equals all","eq_any":"equals any","false":"is false","gt":"greater than","gt_all":"greater than all","gt_any":"greater than any","gteq":"greater than or equal to","gteq_all":"greater than or equal to all","gteq_any":"greater than or equal to any","in":"in","in_all":"in all","in_any":"in any","lt":"less than","lt_all":"less than all","lt_any":"less than any","lteq":"less than or equal to","lteq_all":"less than or equal to all","lteq_any":"less than or equal to any","matches":"matches","matches_all":"matches all","matches_any":"matches any","not_cont":"doesn't contain","not_cont_all":"doesn't contain all","not_cont_any":"doesn't contain any","not_end":"doesn't end with","not_end_all":"doesn't end with all","not_end_any":"doesn't end with any","not_eq":"not equal to","not_eq_all":"not equal to all","not_eq_any":"not equal to any","not_in":"not in","not_in_all":"not in all","not_in_any":"not in any","not_null":"is not null","not_start":"doesn't start with","not_start_all":"doesn't start with all","not_start_any":"doesn't start with any","null":"is null","present":"is present","start":"starts with","start_all":"starts with all","start_any":"starts with any","true":"is true"},"search":"search","sort":"sort","value":"value"},"recaptcha":{"errors":{"recaptcha_unreachable":"Oops, we failed to validate your reCAPTCHA response. Please try again.","verification_failed":"reCAPTCHA verification failed, please try again."}},"support":{"array":{"last_word_connector":", and ","two_words_connector":" and ","words_connector":", "}},"time":{"am":"am","formats":{"default":"%a, %d %b %Y %H:%M:%S %z","long":"%B %d, %Y %H:%M","short":"%d %b %H:%M"},"pm":"pm"},"views":{"groups":{"show":{"not_found_html":"Sorry, that group could not be found."}},"pagination":{"first":"&laquo; First","last":"Last &raquo;","next":"Next &rsaquo;","previous":"&lsaquo; Prev","truncate":"&hellip;"},"sessions":{"commons":{"need_help":"Need help?","return_to_login":"Return to Login"},"passwords":{"reset":{"email_field_placeholder":"Email address","heading":"Password Reset","instructions":"We'll email you instructions on how to reset your password.","need_help":"Need help?","return_to_login":"Return to Login","submit":"Reset Password"},"reset_instructions":{"heading":"Check Your Email","instructions":"An email with instructions on how to reset your password has been sent to the address you provided. If you don’t receive it within an hour, check your spam folder.","need_help":"Need help?","return_to_login":"Return to Login"}}},"tags":{"show":{"not_found_html":"Sorry, that tag could not be found."}},"ui":{"frontpage":{"action_block":{"anonymous_button_text":"Create an Account","anonymous_subhead":"Join the Community","anonymous_text":"Create an account to leave comments, recommend posts and write your very own stories."},"actions":{"disclaimer_text":"By signing this form, you are agreeing to receive occasional emails on this and related campaigns from Daily Kos. You may of course unsubscribe at any time.","embed_instructions":"Copy and paste the embed code above.","embed_link":"Embed Code","header":"Sign These Petitions","long_blog_link":"See all petitions","petition_label":"Daily Kos petition","sms_disclaimer_text":"By checking the opt-in box and entering your mobile phone number you will receive mobile messages, including periodic updates on news, offers and activism opportunities, from Daily Kos (from 63240). Text STOP to cancel. Text HELP for help. Message and data rates may apply. Periodic Messages. Message frequency varies.","submit_label":"Sign this Petition","thank_you_link":"Click here","thank_you_title":"Thank you for signing!"},"ads":{"label_text":"Advertisement"},"black_history_month_banner":{"long_text":"Daily Kos celebrates Black History Month and the innumerable contributions of Black Americans to American history.","page_button_label":"Join us","page_description":"Black History Month","page_url":"https://www.dailykos.com/blogs/celebrating%20black%20history%20and%20black%20futures"},"blm_ad":{"long_text":"Daily Kos moves in solidarity with the Black community across the country and around the world in demanding an end to the murders of Black people at the hands of police and white supremacist vigilantes.","page_button_label":"Learn More","page_description":"Black Lives Matter page","page_url":"https://www.dailykos.com/blacklivesmatter/","resources_button_label":"Anti-racist resources","resources_url":"https://www.dailykos.com/blacklivesmatter/#resources"},"civiqs":{"more_link":"View all"},"comics":{"blog_link":"See more comics","header":"Daily Kos Comics","short_blog_link":"See more"},"community_groups":{"header":"Community Groups","long_blog_link":"All Community Groups","user_button_text":"Read Stories","user_subhead":"Group"},"community_recent":{"header":"More Community stories","long_blog_link":"All Community Stories"},"elections":{"header":"Daily Kos Elections","long_blog_link":"See All 2020 Elections Coverage"},"from_markos_desk":{"header":"From Markos' Desk","img_alt":"Image of Markos Moulitsas, Daily Kos Founder"},"hamburger_navigation":{"actions_section":"Actions","advertising_link":"Advertising Overview","blm":{"button_label":"Learn More","description":"Black Lives Matter page","tagline":"Daily Kos moves in solidarity with the Black community.","url":"https://www.dailykos.com/blacklivesmatter/"},"civiqs_section":"Civiqs","comics_section":"Comics","community_groups_section":"Community Groups","community_section":"Community","contact_us_link":"Work With Us","dcma_link":"DMCA Copyright Notice","elections_section":"Elections","from_markos_desk_section":"From Markos' Desk","help_desk_link":"Help Desk","jobs_link":"Jobs","latest_community_section":"Community Stories","liberation_league_section":"Liberation League","log_in_txt":"Log in","prism_section":"Prism","privacy_link":"Privacy Policy","sign_up_txt":"Create a free account","staff_section":"Staff","terms_link":"Terms of Use","top_news_section":"News","trending_section":"Trending"},"header":{"help_desk_txt":"Help Desk","login_btn_txt":"Log In","logo_image_alt":"Daily Kos logo","new_story_txt":"Write a story","short_search_placeholder":"Search...","signup_btn_txt":"Sign Up"},"latest_community":{"header":"Latest Community Stories","long_blog_link":"All community stories"},"liberation_league":{"header":"Daily Kos Liberation League","long_blog_link":"See all stories by Daily Kos Liberation League","short_blog_link":"See all","subhead":"The Daily Kos Liberation League features highly recommended posts about racial justice, gender equality, LGBTQ and disability rights."},"modal":{"existing_account":"Already have an account?","forgot_password_text":"Forgot your password?","join_tagline":"Join the largest liberal community online.","login_text":"Log in","not_signed_up":"Not signed up for Daily Kos yet?","signup_text":"Create a free account","subscribe_text":"Subscribe to the Action Alert mailing list","user_login_placeholder":"Username or email","user_password_placeholder":"Password","user_zipcode_placeholder":"Zip Code (US Only)"},"prism":{"description":"Daily Kos is proud to feature the work of Prism, a BIPOC-led 501(c)(3) nonprofit news outlet that centers the people, places, and issues currently underreported by national media.","long_blog_link":"See all stories by Prism","short_blog_link":"See all"},"staff_recent":{"header":"More recent news","long_blog_link":"See all Daily Kos News"},"trending":{"header":"Trending Stories","long_blog_link":"See More Trending Stories"},"user_profile":{"comments_link":"My Comments","drafts_link":"Drafts","groups_link":"My Groups","hide_ads":"Hide Ads","image_library_link":"Image Library","logout_link":"Sign Out","manage_queue_link":"Manage Front Page Queue","new_story_link":"New Blog Entry","profile_link":"Profile","show_ads":"Show Ads","stories_link":"My Stories","stream_link":"My Activity Stream","subscribe_link":"Subscribe to Hide Ads"}},"list_view":{"community":{"header":"Community Stories"},"elections":{"header":"Daily Kos Elections Stories"},"from_markos_desk":{"header":"Stories from Markos' Desk"},"liberation_league":{"header":"Daily Kos Liberation League"},"prism":{"header":"Prism Stories"},"recent":{"header":"All Stories"},"staff":{"header":"Daily Kos Staff Stories"},"trending":{"header":"Trending Stories"}},"subscriptions":{"annual":{"description":"Help fund Daily Kos initiatives and remove ads when you’re signed in","details":"Annual subscriptions are recurringly billed once a year. You may cancel your subscription at any time.","expiration_notification":"Your subscription has expired. Thank you so much for your support of Daily Kos. If you'd like to renew, you can do so <a href='/subscribe'>here</a> or using the subscribe link in the upper right corner.","header_description":"Annual Subscription Membership","name":"Annual Subscription","price":"$40","single_subscription_error":"Recurring subscription already exists for this user"},"cancel":{"close_cancel_text":"Nevermind, I want to continue supporting Daily Kos and browse ad-free","modal_header":"You are about to cancel your annual subscription","submit_text":"Yes, please cancel my subscription","subscription_link":"Cancel Subscription","uncancel_link":"Renew Plan"},"description":"Daily Kos subscriptions help fund the site’s activities. Plus, subscribers get to turn off all site advertising, while knowing that they’re helping make a real difference in this country. You may also gift a subscription to another user.","gift":{"anon_option":"Send gift anonymously","banned_user":"User is banned","description":"Help fund Daily Kos initiatives and give someone a year of ad-free browsing with a gift subscription.","details":"Gift subscriptions are billed once and do not recur automatically.","gift_option":"This is a gift for someone else","header_description":"Gift Subscription Membership","invalid_username":"Username is not valid","lifetime_user":"User is a lifetime subscriber","message_text":"Message for the recipient","name":"Gift a Subscription","price":"$40","recipient_text":"Recipient's Username","staff_user":"User is a staff member","submit_text":"Purchase as a gift","valid_username":"Valid username"},"header":"Subscribe to Daily Kos","lifetime":{"description":"Support our causes while giving someone a lifetime gift of ad-free Daily Kos viewing.","details":"Lifetime subscriptions are only charged once for ongoing membership.","header_description":"Thank you for supporting Daily Kos with a lifetime subscription.","ineligible_error":"Lifetime subscriptions are no longer available","logged_out_error":"User must be logged in to buy a subscription","name":"Lifetime Subscription","price":"$100"},"logged_in_header":"Your subscription","submit_text":"Subscribe Now","thank_you":{"donate_link":"Make a Donation","header":"Thank you for subscribing!","link_list_title":"More ways you can support Daily Kos","petitions_link":"Sign & Share Petitions","quote_attribution":"Markos Moulitsas, Founder","quote_line_1":"Thank you for joining us in this fight for the future of our country! Daily Kos doesn't happen without you, and neither does building our more equitable, just, and progressive America.","quote_line_2":"You have our deepest gratitude.","title":"Thank you for Subscribing","write_story_link":"Write a Story"},"title":"Purchase a Subscription","update_payment_link":"View/Update Payment Method"}},"users":{"show":{"not_found_html":"Sorry, that user could not be found."}}},"will_paginate":{"container_aria_label":"Pagination","next_label":"Next &#8594;","page_aria_label":"Page %{page}","page_entries_info":{"multi_page":"Displaying %{model} %{from} - %{to} of %{count} in total","multi_page_html":"Displaying %{model} <b>%{from}&nbsp;-&nbsp;%{to}</b> of <b>%{count}</b> in total","single_page":{"one":"Displaying 1 %{model}","other":"Displaying all %{count} %{model}","zero":"No %{model} found"},"single_page_html":{"one":"Displaying <b>1</b> %{model}","other":"Displaying <b>all&nbsp;%{count}</b> %{model}","zero":"No %{model} found"}},"page_gap":"&hellip;","previous_label":"&#8592; Previous"}},"en-CA":{"active_admin":{"access_denied":{"message":"You are not authorized to perform this action."},"any":"Any","batch_actions":{"action_label":"%{title} Selected","button_label":"Batch Actions","default_confirmation":"Are you sure you want to do this?","delete_confirmation":"Are you sure you want to delete these %{plural_model}?","labels":{"destroy":"Delete"},"selection_toggle_explanation":"(Toggle Selection)","succesfully_destroyed":{"one":"Successfully deleted 1 %{model}","other":"Successfully deleted %{count} %{plural_model}"}},"blank_slate":{"content":"There are no %{resource_name} yet.","link":"Create one"},"cancel":"Cancel","comments":{"add":"Add Comment","author":"Author","author_missing":"Anonymous","author_type":"Author Type","body":"Body","created_at":"Created","delete":"Delete Comment","delete_confirmation":"Are you sure you want to delete these comments?","errors":{"empty_text":"Comment wasn't saved, text was empty."},"no_comments_yet":"No comments yet.","resource":"Resource","resource_type":"Resource Type","title_content":"Comments (%{count})"},"create_another":"Create another %{model}","dashboard":"Dashboard","dashboard_welcome":{"call_to_action":"To add dashboard sections, checkout 'app/admin/dashboards.rb'","welcome":"Welcome to Active Admin. This is the default dashboard page."},"delete":"Delete","delete_confirmation":"Are you sure you want to delete this?","delete_model":"Delete %{model}","details":"%{model} Details","devise":{"change_password":{"submit":"Change my password","title":"Change your password"},"email":{"title":"Email"},"links":{"forgot_your_password":"Forgot your password?","resend_confirmation_instructions":"Resend confirmation instructions","resend_unlock_instructions":"Resend unlock instructions","sign_in":"Sign in","sign_in_with_omniauth_provider":"Sign in with %{provider}","sign_up":"Sign up"},"login":{"remember_me":"Remember me","submit":"Login","title":"Login"},"password":{"title":"Password"},"password_confirmation":{"title":"Confirm Password"},"resend_confirmation_instructions":{"submit":"Resend confirmation instructions","title":"Resend confirmation instructions"},"reset_password":{"submit":"Reset My Password","title":"Forgot your password?"},"sign_up":{"submit":"Sign up","title":"Sign up"},"subdomain":{"title":"Subdomain"},"unlock":{"submit":"Resend unlock instructions","title":"Resend unlock instructions"},"username":{"title":"Username"}},"download":"Download:","dropdown_actions":{"button_label":"Actions"},"edit":"Edit","edit_model":"Edit %{model}","empty":"Empty","filters":{"buttons":{"clear":"Clear Filters","filter":"Filter"},"predicates":{"contains":"Contains","ends_with":"Ends with","equals":"Equals","greater_than":"Greater than","less_than":"Less than","starts_with":"Starts with"}},"has_many_delete":"Delete","has_many_new":"Add New %{model}","has_many_remove":"Remove","index_list":{"block":"List","blog":"Blog","grid":"Grid","table":"Table"},"logout":"Logout","main_content":"Please implement %{model}#main_content to display content.","new_model":"New %{model}","next":"Next","pagination":{"empty":"No %{model} found","entry":{"one":"entry","other":"entries"},"multiple":"Displaying %{model} <b>%{from}&nbsp;-&nbsp;%{to}</b> of <b>%{total}</b> in total","multiple_without_total":"Displaying %{model} <b>%{from}&nbsp;-&nbsp;%{to}</b>","one":"Displaying <b>1</b> %{model}","one_page":"Displaying <b>all %{n}</b> %{model}","per_page":"Per page: "},"powered_by":"Powered by %{active_admin} %{version}","previous":"Previous","search_status":{"current_filters":"Current filters:","current_scope":"Scope:","headline":"Search status:","no_current_filters":"None"},"sidebars":{"filters":"Filters","search_status":"Search Status"},"status_tag":{"no":"No","unset":"No","yes":"Yes"},"unsupported_browser":{"headline":"Please note that ActiveAdmin no longer supports Internet Explorer versions 8 or less.","recommendation":"We recommend upgrading to the latest <a href=\"http://windows.microsoft.com/ie\">Internet Explorer</a>, <a href=\"https://chrome.google.com/\">Google Chrome</a>, or <a href=\"https://mozilla.org/firefox/\">Firefox</a>.","turn_off_compatibility_view":"If you are using IE 9 or later, make sure you <a href=\"https://support.microsoft.com/en-ca/help/17471\">turn off \"Compatibility View\"</a>."},"view":"View"}},"en-GB":{"active_admin":{"access_denied":{"message":"You are not authorised to perform this action."},"any":"Any","batch_actions":{"action_label":"%{title} Selected","button_label":"Batch Actions","default_confirmation":"Are you sure you want to do this?","delete_confirmation":"Are you sure you want to delete these %{plural_model}?","labels":{"destroy":"Delete"},"selection_toggle_explanation":"(Toggle Selection)","succesfully_destroyed":{"one":"Successfully deleted 1 %{model}","other":"Successfully deleted %{count} %{plural_model}"}},"blank_slate":{"content":"There are no %{resource_name} yet.","link":"Create one"},"cancel":"Cancel","comments":{"add":"Add Comment","author":"Author","author_missing":"Anonymous","author_type":"Author Type","body":"Body","created_at":"Created","delete":"Delete Comment","delete_confirmation":"Are you sure you want to delete these comments?","errors":{"empty_text":"Comment wasn't saved, text was empty."},"no_comments_yet":"No comments yet.","resource":"Resource","resource_type":"Resource Type","title_content":"Comments (%{count})"},"create_another":"Create another %{model}","dashboard":"Dashboard","dashboard_welcome":{"call_to_action":"To add dashboard sections, checkout 'app/admin/dashboards.rb'","welcome":"Welcome to Active Admin. This is the default dashboard page."},"delete":"Delete","delete_confirmation":"Are you sure you want to delete this?","delete_model":"Delete %{model}","details":"%{model} Details","devise":{"change_password":{"submit":"Change my password","title":"Change your password"},"email":{"title":"Email"},"links":{"forgot_your_password":"Forgot your password?","resend_confirmation_instructions":"Resend confirmation instructions","resend_unlock_instructions":"Resend unlock instructions","sign_in":"Sign in","sign_in_with_omniauth_provider":"Sign in with %{provider}","sign_up":"Sign up"},"login":{"remember_me":"Remember me","submit":"Login","title":"Login"},"password":{"title":"Password"},"password_confirmation":{"title":"Confirm Password"},"resend_confirmation_instructions":{"submit":"Resend confirmation instructions","title":"Resend confirmation instructions"},"reset_password":{"submit":"Reset My Password","title":"Forgot your password?"},"sign_up":{"submit":"Sign up","title":"Sign up"},"subdomain":{"title":"Subdomain"},"unlock":{"submit":"Resend unlock instructions","title":"Resend unlock instructions"},"username":{"title":"Username"}},"download":"Download:","dropdown_actions":{"button_label":"Actions"},"edit":"Edit","edit_model":"Edit %{model}","empty":"Empty","filters":{"buttons":{"clear":"Clear Filters","filter":"Filter"},"predicates":{"contains":"Contains","ends_with":"Ends with","equals":"Equals","greater_than":"Greater than","less_than":"Less than","starts_with":"Starts with"}},"has_many_delete":"Delete","has_many_new":"Add New %{model}","has_many_remove":"Remove","index_list":{"block":"List","blog":"Blog","grid":"Grid","table":"Table"},"logout":"Logout","main_content":"Please implement %{model}#main_content to display content.","new_model":"New %{model}","next":"Next","pagination":{"empty":"No %{model} found","entry":{"one":"entry","other":"entries"},"multiple":"Displaying %{model} <b>%{from}&nbsp;-&nbsp;%{to}</b> of <b>%{total}</b> in total","multiple_without_total":"Displaying %{model} <b>%{from}&nbsp;-&nbsp;%{to}</b>","one":"Displaying <b>1</b> %{model}","one_page":"Displaying <b>all %{n}</b> %{model}","per_page":"Per page: "},"powered_by":"Powered by %{active_admin} %{version}","previous":"Previous","search_status":{"current_filters":"Current filters:","current_scope":"Scope:","headline":"Search status:","no_current_filters":"None"},"sidebars":{"filters":"Filters","search_status":"Search Status"},"status_tag":{"no":"No","unset":"No","yes":"Yes"},"unsupported_browser":{"headline":"Please note that ActiveAdmin no longer supports Internet Explorer versions 8 or less.","recommendation":"We recommend upgrading to the latest <a href=\"http://windows.microsoft.com/ie\">Internet Explorer</a>, <a href=\"https://chrome.google.com/\">Google Chrome</a>, or <a href=\"https://mozilla.org/firefox/\">Firefox</a>.","turn_off_compatibility_view":"If you are using IE 9 or later, make sure you <a href=\"https://support.microsoft.com/en-gb/help/17471\">turn off \"Compatibility View\"</a>."},"view":"View"}},"eo":{"active_admin":{"access_denied":{"message":"Vi ne rajtas fari tiun agon."},"any":"Ĉiuj","batch_actions":{"action_label":"%{title} elektita","button_label":"Amasagoj","default_confirmation":"Ĉu vi certas, ke vi volas fari tion?","delete_confirmation":"Ĉu vi certas, ke vi volas forigi tiujn %{plural_model}?","labels":{"destroy":"Forigi"},"selection_toggle_explanation":"(Baskuligi elekton)","succesfully_destroyed":{"one":"1 %{model} sukcese forigita","other":"%{count} %{plural_model} sukcese forigitaj"}},"blank_slate":{"content":"Ankoraŭ ne estas %{resource_name}.","link":"Krei novan"},"cancel":"Nuligi","comments":{"add":"Aldoni komenton","author":"Aŭtoro","author_missing":"Anonimulo","author_type":"Aŭtorotipo","body":"Enhavo","created_at":"Kreita","delete":"Forigi komenton","delete_confirmation":"Ĉu vi certas, ke vi volas forigi tiun komenton?","errors":{"empty_text":"La komento ne estis konservita, la teksto estis malplena."},"no_comments_yet":"Ankoraŭ neniu komento.","resource":"Resurso","resource_type":"Resursotipo","title_content":"Komentoj (%{count})"},"create_another":"Krei alian %{model}","dashboard":"Panelo","dashboard_welcome":{"call_to_action":"Por aldoni sekciojn al via panelo, vidu 'app/admin/dashboard.rb'","welcome":"Bonvenon al Active Admin. Jen la defaŭlta panela paĝo."},"delete":"Forigi","delete_confirmation":"Ĉu vi certas, ke vi volas forigi tion?","delete_model":"Forigi %{model}","details":"Detaloj de %{model}","devise":{"change_password":{"submit":"Ŝanĝi mian pasvorton","title":"Ŝanĝi vian pasvorton"},"email":{"title":"Retpoŝtadreso"},"links":{"forgot_your_password":"Ĉu vi forgesis vian pasvorton?","resend_confirmation_instructions":"Resendi klarigojn por konfirmi","resend_unlock_instructions":"Resendi klarigojn por malŝlosi","sign_in":"Ensaluti","sign_in_with_omniauth_provider":"Ensaluti per %{provider}","sign_up":"Registriĝi"},"login":{"remember_me":"Memori min","submit":"Ensaluti","title":"Ensaluti"},"password":{"title":"Pasvorto"},"password_confirmation":{"title":"Konfirmi pasvorton"},"resend_confirmation_instructions":{"submit":"Resendi klarigojn por konfirmi","title":"Resendi klarigojn por konfirmi"},"reset_password":{"submit":"Restarigi mian pasvorton","title":"Ĉu vi forgesis vian pasvorton?"},"sign_up":{"submit":"Registriĝi","title":"Registriĝi"},"subdomain":{"title":"Subdomajno"},"unlock":{"submit":"Resendi klarigojn por malŝlosi","title":"Resendi klarigojn por malŝlosi"},"username":{"title":"Uzantnomo"}},"download":"Elŝuti:","dropdown_actions":{"button_label":"Agoj"},"edit":"Redakti","edit_model":"Redakti %{model}","empty":"Malplena","filters":{"buttons":{"clear":"Viŝi filtrilojn","filter":"Filtri"},"predicates":{"contains":"Enhavas","ends_with":"Finiĝas per","equals":"Egalas al","from":"De","greater_than":"Pli grandas ol","gteq_datetime":"Pli grandas ol aŭ egalas al","less_than":"Malpli grandas ol","lteq_datetime":"Malpli grandas ol aŭ egalas al","starts_with":"Komenciĝas per","to":"Al"}},"has_many_delete":"Forigi","has_many_new":"Aldoni novan %{model}","has_many_remove":"Forigi","index_list":{"block":"Listo","blog":"Blogo","grid":"Krado","table":"Tabelo"},"logout":"Elsaluti","main_content":"Aldonu %{model}#main_content por montri la enhavon.","move":"Movi","new_model":"Nova %{model}","next":"Sekva","pagination":{"empty":"Neniu %{model} trovita","entry":{"one":"ero","other":"eroj"},"multiple":"Montras %{model} <b>%{from}&nbsp;-&nbsp;%{to}</b> de <b>%{total}</b> entute","multiple_without_total":"Montras %{model} <b>%{from}&nbsp;-&nbsp;%{to}</b>","one":"Montras <b>1</b> %{model}","one_page":"Montras <b>ĉiujn %{n}</b> %{model}","per_page":"Paĝe: "},"powered_by":"Povigita de %{active_admin} %{version}","previous":"Antaŭa","search_status":{"current_filters":"Nunaj filtriloj:","current_scope":"Regiono:","headline":"Serĉstato:","no_current_filters":"Neniu"},"sidebars":{"filters":"Filtriloj","search_status":"Serĉstato"},"status_tag":{"no":"Ne","unset":"Ne","yes":"Jes"},"unsupported_browser":{"headline":"Rimarku ke ActiveAdmin ne plu subtenas versiojn 8 kaj mal de Internet Explorer.","recommendation":"Ni rekomendas, ke vi <a href=\"http://browsehappy.com/\">ĝisdatigu vian retumilon</a> por plibonigi vian sperton.","turn_off_compatibility_view":"Se vi uzas version 8 aŭ pli novan de Internet Explorer, estu certa, ke vi <a href=\"https://support.microsoft.com/en-us/help/17471\">malŝaltu \"kongruecan reĝimon\"</a>."},"view":"Vidi"}},"es":{"active_admin":{"access_denied":{"message":"No está autorizado/a a realizar esta acción."},"any":"Cualquiera","batch_actions":{"action_label":"%{title} seleccionados","button_label":"Acciones en masa","default_confirmation":"¿Seguro que quieres hacer esto?","delete_confirmation":"Se eliminarán %{plural_model}. ¿Desea continuar?","labels":{"destroy":"Borrar"},"selection_toggle_explanation":"(Cambiar selección)","succesfully_destroyed":{"one":"Se ha destruido 1 %{model} con éxito","other":"Se han destruido %{count} %{plural_model} con éxito"}},"blank_slate":{"content":"No hay %{resource_name} aún.","link":"Añadir"},"cancel":"Cancelar","comments":{"add":"Comentar","author":"Autor","author_missing":"Anónimo","author_type":"Tipo de autor","body":"Cuerpo","created_at":"Fecha de creación","delete":"Borrar Comentario","delete_confirmation":"¿Confirma que desea borrar este comentario?","errors":{"empty_text":"El comentario no fue guardado, el texto estaba vacío."},"no_comments_yet":"No hay comentarios aún.","resource":"Recurso","resource_type":"Tipo de recurso","title_content":"Comentarios (%{count})"},"create_another":"Crear otro %{model}","dashboard":"Inicio","dashboard_welcome":{"call_to_action":"Para agregar secciones edite 'app/admin/dashboard.rb'","welcome":"Bienvenido a Active Admin. Esta es la página de inicio predeterminada."},"delete":"Eliminar","delete_confirmation":"¿Confirma que desea borrar este elemento?","delete_model":"Eliminar %{model}","details":"Detalles de %{model}","devise":{"change_password":{"submit":"Cambiar mi contraseña","title":"Cambie su contraseña"},"email":{"title":"Email"},"links":{"forgot_your_password":"¿Olvidó su contraseña?","resend_confirmation_instructions":"Reenviar instrucciones de confirmación","resend_unlock_instructions":"Reenviar instrucciones de desbloqueo","sign_in":"Iniciar Sesión","sign_in_with_omniauth_provider":"Conéctate con %{provider}","sign_up":"Registrarse"},"login":{"remember_me":"Recordarme","submit":"Iniciar Sesión","title":"Iniciar Sesión"},"password":{"title":"Contraseña"},"password_confirmation":{"title":"Confirmar Contraseña"},"resend_confirmation_instructions":{"submit":"Reenviar instrucciones de confirmación","title":"Reenviar instrucciones de confirmación"},"reset_password":{"submit":"Restablecer mi contraseña","title":"¿Olvidó su contraseña?"},"sign_up":{"submit":"Registrarse","title":"Registrarse"},"subdomain":{"title":"Subdominio"},"unlock":{"submit":"Reenviar instrucciones de desbloqueo","title":"Reenviar instrucciones de desbloqueo"},"username":{"title":"Nombre de usuario"}},"download":"Descargar:","dropdown_actions":{"button_label":"Acciones"},"edit":"Editar","edit_model":"Editar %{model}","empty":"Vacío","filters":{"buttons":{"clear":"Quitar Filtros","filter":"Filtrar"},"predicates":{"contains":"Contiene","ends_with":"Termina con","equals":"Igual a","from":"Desde","greater_than":"Mayor que","gteq_datetime":"Mayor o igual que","less_than":"Menor que","lteq_datetime":"Menor o igual que","starts_with":"Empieza con","to":"Hasta"}},"has_many_delete":"Eliminar","has_many_new":"Añadir %{model}","has_many_remove":"Quitar","index_list":{"block":"Lista","blog":"Blog","grid":"Grilla","table":"Tabla"},"logout":"Salir","main_content":"Por favor implemente %{model}#main_content para mostrar contenido.","move":"Mover","new_model":"Añadir %{model}","next":"Siguiente","pagination":{"empty":"No se han encontrado %{model}","entry":{"one":"registro","other":"registros"},"multiple":"Mostrando %{model} <b>%{from}&nbsp;-&nbsp;%{to}</b> de un total de <b>%{total}</b>","multiple_without_total":"Mostrando %{model} <b>%{from}&nbsp;-&nbsp;%{to}</b>","one":"Mostrando <b>1</b> %{model}","one_page":"Mostrando <b>un total de %{n}</b> %{model}","per_page":"Por página: "},"powered_by":"Funciona con %{active_admin} %{version}","previous":"Anterior","scopes":{"all":"Todos"},"search_status":{"current_filters":"Filtros actuales:","current_scope":"Alcance:","headline":"Estado de la búsqueda:","no_current_filters":"Ninguno"},"sidebars":{"filters":"Filtros","search_status":"Estado de la búsqueda"},"status_tag":{"no":"No","unset":"No","yes":"Sí"},"unsupported_browser":{"headline":"Por favor tenga en cuenta que Active Admin no soporta versiones de Internet Explorer menores a 8.","recommendation":"Recomendamos que actualice a la última versión de <a href=\"http://windows.microsoft.com/ie\">Internet Explorer</a>, <a href=\"https://chrome.google.com/\">Google Chrome</a>, o <a href=\"https://mozilla.org/firefox/\">Firefox</a>.","turn_off_compatibility_view":"Si está usando IE 9 o superior, asegúrese de <a href=\"https://support.microsoft.com/es-es/help/17471\">apagar la \"Vista de compatibilidad\"</a>."},"view":"Ver"},"activerecord":{"attributes":{"active_admin/comment":{"author_type":"Tipo de autor","body":"Cuerpo","created_at":"Fecha de creación","namespace":"Espacio de nombres","resource_type":"Tipo de recurso","updated_at":"Fecha de actualización"}},"models":{"active_admin/comment":{"one":"Comentario","other":"Comentarios"},"comment":{"one":"Comentario","other":"Comentarios"}}},"ckeditor":{"buttons":{"cancel":"Cancelar","delete":"Borrar","next":"Next","upload":"Subir"},"confirm_delete":"¿Borrar archivo?","page_title":"Administrador de Archivos CKEditor"},"devise":{"failure":{"expired":"Su cuenta ha expirado debido a inactividad. Por favor contacte al administrador de la aplicación.","session_limited":"Sus credenciales de inicio de sesión fueron usadas en otro navegador. Por favor inicie sesión nuevamente para continuar en éste navegador."},"invalid_captcha":"El captcha ingresado es inválido.","invalid_security_question":"La respuesta a la pregunta de suguridad fue incorrecta.","paranoid_verify":{"code_required":"Por favor ingrese el código provisto por nuestro equipo de soporte"},"password_expired":{"change_required":"Su contraña ha expirado. Por favor renueve su contraseña.","updated":"Su nueva contraña ha sido guardada."}},"errors":{"messages":{"equal_to_current_password":"tiene que ser diferente a la contraseña actual.","password_complexity":{"digit":{"one":"tiene que contener al menos un digito","other":"tiene que contener al menos %{count} digitos"},"lower":{"one":"tiene que contener al menos un minúscula","other":"tiene que contener al menos %{count} minúsculas"},"symbol":{"one":"tiene que contener al menos un signo de puntuación","other":"tiene que contener al menos %{count} signos de puntuación"},"upper":{"one":"tiene que contener al menos un mayúscula","other":"tiene que contener al menos %{count} mayúsculas"}},"taken_in_past":"la contraseña fue usada previamente, favor elegir otra."}},"formtastic":{"cancel":"Cancelar","create":"Guardar %{model}","no":"No","required":"requerido","reset":"Restablecer %{model}","submit":"Aceptar","update":"Guardar %{model}","yes":"Sí"},"ransack":{"all":"todos","and":"y","any":"cualquier","asc":"ascendente","attribute":"atributo","combinator":"combinador","condition":"condición","desc":"descendente","or":"o","predicate":"predicado","predicates":{"blank":"está en blanco","cont":"contiene","cont_all":"contiene todos","cont_any":"contiene cualquier","does_not_match":"no coincide con","does_not_match_all":"no coincide con todos","does_not_match_any":"no coincide con ninguno","end":"termina en","end_all":"termina en todos","end_any":"termina en cualquier","eq":"es igual a","eq_all":"es igual a todos","eq_any":"es igual a cualquier","false":"es falso","gt":"mayor que","gt_all":"mayor que todos","gt_any":"mayor que cualquier","gteq":"mayor que o igual a","gteq_all":"mayor que o igual a todos","gteq_any":"mayor que o igual a cualquier","in":"en","in_all":"en todos","in_any":"en cualquier","lt":"menor que","lt_all":"menor o igual a","lt_any":"menor que cualquier","lteq":"menor que o igual a","lteq_all":"menor o igual a todos","lteq_any":"menor o igual a cualquier","matches":"coincide con","matches_all":"coincide con todos","matches_any":"coincide con cualquier","not_cont":"no contiene","not_cont_all":"no contiene todos","not_cont_any":"no contiene ninguno","not_end":"no termina en","not_end_all":"no termina en todos","not_end_any":"no termina en cualquier","not_eq":"no es igual a","not_eq_all":"no es igual a todos","not_eq_any":"no es igual a cualquier","not_in":"no en","not_in_all":"no en todos","not_in_any":"no en cualquier","not_null":"no es nulo","not_start":"no comienza con","not_start_all":"no comienza con todos","not_start_any":"no comienza con cualquier","null":"es nulo","present":"está presente","start":"comienza con","start_all":"comienza con todos","start_any":"comienza con cualquier","true":"es verdadero"},"search":"buscar","sort":"ordenar","value":"valor"}},"es-MX":{"active_admin":{"any":"Cualquiera","batch_actions":{"action_label":"%{title} seleccionados","button_label":"Acciones en masa","default_confirmation":"¿Seguro que quieres hacer esto?","delete_confirmation":"Eliminar %{plural_model}: ¿Está seguro?","labels":{"destroy":"Borrar"},"selection_toggle_explanation":"(Cambiar selección)","succesfully_destroyed":{"one":"Se ha destruido 1 %{model} con éxito","other":"Se han destruido %{count} %{plural_model} con éxito"}},"blank_slate":{"content":"No hay %{resource_name} aún.","link":"Añadir"},"cancel":"Cancelar","comments":{"add":"Comentar","author":"Autor","body":"Cuerpo","errors":{"empty_text":"El comentario no fue guardado, el texto estaba vacío."},"no_comments_yet":"Aún sin comentarios.","resource":"Recurso","title_content":"Comentarios (%{count})"},"dashboard":"Inicio","dashboard_welcome":{"call_to_action":"Para agregar secciones edite 'app/admin/dashboard.rb'","welcome":"Bienvenido a Active Admin. Esta es la página de inicio predeterminada."},"delete":"Eliminar","delete_confirmation":"¿Está seguro de que quiere eliminar esto?","delete_model":"Eliminar %{model}","details":"Detalles de %{model}","devise":{"change_password":{"submit":"Cambiar mi contraseña","title":"Cambie su contraseña"},"links":{"forgot_your_password":"¿Olvidó su contraseña?","sign_in":"Iniciar Sesión","sign_in_with_omniauth_provider":"Conéctate con %{provider}","sign_up":"Registrarse"},"login":{"remember_me":"Recordarme","submit":"Iniciar Sesión","title":"Iniciar Sesión"},"reset_password":{"submit":"Restablecer mi contraseña","title":"¿Olvidó su contraseña?"}},"download":"Descargar:","dropdown_actions":{"button_label":"Acciones"},"edit":"Editar","edit_model":"Editar %{model}","empty":"Vacío","filters":{"buttons":{"clear":"Quitar Filtros","filter":"Filtrar"},"predicates":{"contains":"Contiene","ends_with":"Termina con","equals":"Igual a","greater_than":"Mayor que","less_than":"Menor que","starts_with":"Empieza con"}},"has_many_delete":"Eliminar","has_many_new":"Añadir %{model}","has_many_remove":"Quitar","index_list":{"block":"Lista","blog":"Blog","grid":"Cuadrícula","table":"Tabla"},"logout":"Salir","main_content":"Por favor implemente %{model}#main_content para mostrar contenido.","new_model":"Añadir %{model}","next":"Siguiente","pagination":{"empty":"No se han encontrado %{model}","entry":{"one":null,"other":null},"multiple":"Mostrando %{model} <b>%{from}&nbsp;-&nbsp;%{to}</b> de un total de <b>%{total}</b>","one":"Mostrando <b>1</b> %{model}","one_page":"Mostrando <b>un total de %{n}</b> %{model}"},"powered_by":"Powered by %{active_admin} %{version}","previous":"Anterior","sidebars":{"filters":"Filtros"},"status_tag":{"no":"No","unset":"No","yes":"Sí"},"view":"Ver"}},"fa":{"active_admin":{"access_denied":{"message":"شما دسترسی لازم برای انجام این عملیات را ندارید."},"any":"هرکدام","batch_actions":{"action_label":"%{title} انتخاب شده است","button_label":"عملیات‌های دسته‌ای","default_confirmation":"آیا برای اجرای این عملیات اطمینان دارید؟","delete_confirmation":"آیا برای حذف همه رکوردهای %{plural_model} اطمینان دارید؟","labels":{"destroy":"حذف"},"selection_toggle_explanation":"(انتخاب‌ها برعکس شوند)","succesfully_destroyed":{"one":"1 %{model} با موفقیت حذف شد","other":"%{count} %{plural_model} با موفقت حذف شدند."}},"blank_slate":{"content":"هنوز هیچ رکوردی از %{resource_name} درج نشده.","link":"درج اولین رکورد"},"cancel":"لغو","comments":{"add":"افزودن کامنت","author":"ایجاد کننده","author_missing":"بی‌نام","author_type":"نوع ایجاد کننده","body":"بدنه","errors":{"empty_text":"کامنت درج نشد، متن کامنت خالی بود."},"no_comments_yet":"هنوز هیچ کامنتی نوشته نشده.","resource":"رکورد","resource_type":"نوع رکورد","title_content":"کامنت‌ها (%{count})"},"dashboard":"داشبرد","dashboard_welcome":{"call_to_action":"برای اضافه کردن قسمت‌هایی به داشبرد اینجا را چک کنید: 'app/admin/dashboard.rb'","welcome":"به اکتیو ادمین خوش آمدید. این صفحه اول داشبرد است."},"delete":"حذف","delete_confirmation":"آیا برای حذف این آیتم اطمینان دارید؟","delete_model":"حذف %{model}","details":"جزئیات %{model}","devise":{"change_password":{"submit":"تغییر کلمه عبور","title":"تغییر کلمه عبور"},"email":{"title":"ایمیل"},"links":{"forgot_your_password":"کلمه عبور را فراموش کرده‌اید؟","sign_in":"ورود","sign_in_with_omniauth_provider":"ورود با حساب %{provider}"},"login":{"remember_me":"مرا به خاطر بسپار","submit":"ورود","title":"ورود"},"password":{"title":"کلمه‌عبور"},"resend_confirmation_instructions":{"submit":"ارسال مجدد تاییدیه ایمیل","title":"ارسال مجدد تاییدیه ایمیل"},"reset_password":{"submit":"دریافت کلمه عبور جدید","title":"کلمه عبور را فراموش کرده‌اید؟"},"sign_up":{"submit":"ثبت‌نام","title":"ثبت‌نام"},"subdomain":{"title":"Subdomain"},"unlock":{"submit":"ارسال مجدد دستورالعمل بازگشایی حساب کاربری","title":"ارسال مجدد دستورالعمل بازگشایی حساب کاربری"},"username":{"title":"نام کاربری"}},"download":"دریافت:","dropdown_actions":{"button_label":"عملیات"},"edit":"ویرایش","edit_model":"ویرایش %{model}","empty":"خالی","filters":{"buttons":{"clear":"پاک کردن فیلتر","filter":"فیلتر"},"predicates":{"contains":"شامل","ends_with":"پایان با","equals":"برابر با","greater_than":"بزرگتر از","less_than":"کوچکتر از","starts_with":"شروع با"}},"has_many_delete":"حذف","has_many_new":"اضافه کردن %{model} جدید","has_many_remove":"حذف","index_list":{"block":"لیست","blog":"وبلاگ","grid":"گرید","table":"جدول"},"logout":"خروج","main_content":"لطفا %{model}#main_content را پیاده سازی کنید تا محتوی نمایش داده شود.","new_model":"%{model} جدید","next":"بعدی","pagination":{"empty":"هیچ رکورد %{model} یافت نشد","entry":{"one":"آیتم","other":"آیتم‌ها"},"multiple":"نمایش %{model} <b>%{from}&nbsp;-&nbsp;%{to}</b> از کل <b>%{total}</b> رکورد","multiple_without_total":"نمایش %{model} <b>%{from}&nbsp;-&nbsp;%{to}</b>","one":"نمایش <b>1</b> %{model}","one_page":"نمایش <b>همه %{n}</b> %{model}"},"powered_by":"قدرت گرفته از %{active_admin} %{version}","previous":"قبلی","sidebars":{"filters":"فیلتر‌ها"},"status_tag":{"no":"بدون","unset":"بدون","yes":"بله"},"view":"نمایش"},"ransack":{"all":"همه","and":"و","any":"هر کدام","asc":"صعودی","attribute":"ویژگی","combinator":"ترکیب کننده","condition":"شرایط","desc":"نزولی","or":"یا","predicate":"پیش فرض","predicates":{"blank":"خالی است","cont":"حاوی","cont_all":"حاوی همه","cont_any":"حاوی حداقل یکی","does_not_match":"بدون شباهت","does_not_match_all":"شبیه هیچ کدام نیست","does_not_match_any":"شبیه یکی هم نیست","end":"به پایان می رسد با","end_all":"به پایان می رسد با  همه","end_any":"به پایان می رسد با حداقل یکی","eq":"مساوی با","eq_all":"مساوی با همه","eq_any":"مساوی با حداقل یکی","false":"نادرست است","gt":"بیشتر از","gt_all":"بیشتر از همه","gt_any":"بیشتر از حداقل یکی","gteq":"بیشتر یا مساوی با","gteq_all":"بیشتر یا مساوی با همه","gteq_any":"بیشتر یا مساوی با حداقل یکی","in":"در","in_all":"در همه","in_any":"در حداقل یکی","lt":"کمتر از","lt_all":"کمتر از همه","lt_any":"کمتر از حداقل یکی","lteq":"کمتر یا مساوی با","lteq_all":"کمتر یا مساوی با همه","lteq_any":"کمتر یا مساوی با حداقل یکی","matches":"مشابهات","matches_all":"شبیه همه","matches_any":"شبیه حداقل یکی","not_cont":"حاوی این نمیشود","not_cont_all":"حاوی هیچ کدام نمیشود","not_cont_any":"حاوی حتی یکی هم نمیشود","not_end":"پایان نمی یابد با","not_end_all":"پایان نمی یابد با هیچ کدام","not_end_any":"پایان نمی یابد با حتی یکی","not_eq":"غیر مساوی با","not_eq_all":"غیر مساوی با همه","not_eq_any":"غیر مساوی با هیچ کدام","not_in":"نه در","not_in_all":"در هیچ کدام","not_in_any":"نه حتی در یکی","not_null":"صفر نیست","not_start":"شروع نمی شود با","not_start_all":"شروع نمی شود با هیچ کدام","not_start_any":"شروع نمی شود با حتی یکی","null":"صفر است","present":"موجود است","start":"شروع می شود با","start_all":"شروع می شود با همه","start_any":"شروع می شود با حداقل یکی","true":"درست است"},"search":"جستجو","sort":"مرتب سازی","value":"مقدار"}},"fi":{"active_admin":{"access_denied":{"message":"Sinulla ei ole oikeuksia suorittaa yrittämääsi toimintoa."},"any":"mikä vain","batch_actions":{"action_label":"%{title} Valittu","button_label":"Toimet","default_confirmation":"Oletko varma, että haluat tehdä tämän?","delete_confirmation":"Oletko varma, että haluat poistaa nämä %{plural_model}:t?","labels":{"destroy":"Poista"},"selection_toggle_explanation":"(Vaihda valintaa)","succesfully_destroyed":{"one":"1 %{model} poistettu","other":"%{count} %{plural_model}:a poistettu"}},"blank_slate":{"content":"Järjestelmässä ei ole yhtään %{resource_name}:ia vielä.","link":"Luo ensimmäinen"},"cancel":"Peruuta","comments":{"add":"Lisää kommentti","author":"Luoja","author_type":"Luoja-tyyppi","body":"Runko","errors":{"empty_text":"Kommenttia ei pystytty tallentamaan, et kirjoittanut kommenttitekstiä."},"no_comments_yet":"Ei kommentteja.","resource":"Resurssi","resource_type":"Resurssityyppi","title_content":"Kommentteja (%{count})"},"dashboard":"Etusivu","dashboard_welcome":{"call_to_action":"Lisätäksesi etusivun osioita katso: 'app/admin/dashboard.rb'","welcome":"Tervetuloa! Tämä on Active Adminin oletusetusivu."},"delete":"Poista","delete_confirmation":"Oletko varma, että haluat poistaa tämän?","delete_model":"Poista %{model}","details":"%{model} Tiedot","devise":{"change_password":{"submit":"Vaihda salasana","title":"Vaihda salasana"},"email":{"title":"Sähköposti"},"links":{"forgot_your_password":"Unohtunut salasana?","sign_in":"Kirjaudu sisään","sign_in_with_omniauth_provider":"Kirjaudu sisään %{provider}:ia käyttäen"},"login":{"remember_me":"Muista minut","submit":"Kirjaudu sisään","title":"Sisäänkirjautuminen"},"password":{"title":"Salasana"},"reset_password":{"submit":"Resetoi salasana","title":"Unohtunut salasana?"},"subdomain":{"title":"Subdomain"},"unlock":{"submit":"Lähetä ohjeet lukituksen poistoon","title":"Lähetä ohjeet lukituksen poistoon"},"username":{"title":"Käyttäjänimi"}},"download":"Lataa:","dropdown_actions":{"button_label":"Acciones"},"edit":"Muokkaa","edit_model":"Muokkaa %{model}","empty":"Tyhjä","filters":{"buttons":{"clear":"Tyhjennä valinnat","filter":"Hae"},"predicates":{"contains":"Sisältää","ends_with":"Päättyy","equals":"On yhtä kuin","greater_than":"Suurempi kuin","less_than":"Pienempi kuin","starts_with":"Alkaa"}},"has_many_delete":"Poista","has_many_new":"Lisää uusi %{model}","has_many_remove":"Poista","index_list":{"block":"Lista","blog":"Blogi","grid":"Ruudukko","table":"Taulukko"},"logout":"Kirjaudu ulos","main_content":"Ole hyvä, käytä %{model}#main_content:ia nähdäksesi jotain.","new_model":"Uusi %{model}","next":"Seuraava","pagination":{"empty":"%{model}:ia ei löytynyt","entry":{"one":"syöte","other":"syötteet"},"multiple":"Näytetään %{model} <b>%{from}&nbsp;-&nbsp;%{to}</b> (yhteensä <b>%{total}</b>)","multiple_without_total":"Näytetään %{model} <b>%{from}&nbsp;-&nbsp;%{to}</b>","one":"Näytetään <b>1</b> %{model}","one_page":"Näytetään <b>kaikki %{n}</b> %{model}:it"},"powered_by":"Käyttää %{active_admin} %{version}:ia","previous":"Edellinen","sidebars":{"filters":"Haku"},"status_tag":{"no":"Ei","unset":"Ei","yes":"Kyllä"},"view":"Katso"},"ransack":{"all":"kaikki","and":"ja","any":"jokin","asc":"nouseva","attribute":"attribuutti","combinator":"kombinaattori","condition":"ehto","desc":"laskeva","or":"tai","predicate":"predikaatti","predicates":{"blank":"on tyhjä","cont":"sisältää","cont_all":"sisältää kaikki","cont_any":"sisältää jonkin","does_not_match":"ei täsmää","does_not_match_all":"ei täsmää kaikkien kanssa","does_not_match_any":"ei täsmää minkään kanssa","end":"päättyy","end_all":"päättyy millään","end_any":"päättyy jollakin","eq":"sama kuin","eq_all":"sama kuin kaikki","eq_any":"sama kuin jokin","false":"ei ole tosi","gt":"suurempi kuin","gt_all":"suurempi kuin mikään","gt_any":"suurempi kuin jokin","gteq":"suurempi tai yhtä suuri kuin","gteq_all":"suurempi tai yhtä suuri kuin mikään","gteq_any":"suurempi tai yhtä suuri kuin jokin","in":"kohteessa","in_all":"kaikissa kohteissa","in_any":"jossakin kohteessa","lt":"vähemmän kuin","lt_all":"vähemmän kuin mikään","lt_any":"vähemmän kuin jokin","lteq":"vähemmän tai sama kuin","lteq_all":"vähemmän tai sama kuin mikään","lteq_any":"vähemmän tai sama kuin jokin","matches":"täsmää","matches_all":"täsmää kaikkien kanssa","matches_any":"täsmää jonkun kanssa","not_cont":"ei sisällä","not_cont_all":"ei sisällä mitään","not_cont_any":"ei sisällä jotakin","not_end":"ei pääty","not_end_all":"ei pääty millään","not_end_any":"ei pääty jollakin","not_eq":"eri kuin","not_eq_all":"eri kuin kaikki","not_eq_any":"eri kuin jokin","not_in":"ei kohteessa","not_in_all":"ei missään kohteista","not_in_any":"ei jossakin kohteista","not_null":"on määritetty","not_start":"ei ala","not_start_all":"ei ala millään","not_start_any":"ei ala jollakin","null":"on määrittämätön","present":"on läsnä","start":"alkaa","start_all":"alkaa kaikilla","start_any":"alkaa jollakin","true":"on tosi"},"search":"haku","sort":"järjestys","value":"arvo"}},"fr":{"active_admin":{"access_denied":{"message":"Vous n'êtes pas autorisé à exécuter cette action"},"any":"N'importe lequel","batch_actions":{"action_label":"%{title} les éléments sélectionnés","button_label":"Actions groupées","default_confirmation":"Voulez-vous vraiment faire cela ?","delete_confirmation":"Voulez-vous vraiment supprimer ces %{plural_model} ?","labels":{"destroy":"Supprimer"},"selection_toggle_explanation":"(Inverser la sélection)","succesfully_destroyed":{"one":"1 %{model} supprimé","other":"%{count} %{plural_model} supprimés"}},"blank_slate":{"content":"Il n'y a pas encore de %{resource_name}.","link":"Créez en un"},"cancel":"Annuler","comments":{"add":"Ajouter un commentaire","author":"Auteur","author_missing":"Anonyme","author_type":"Profil de l'auteur","body":"Corps","created_at":"Créé le","delete":"Supprimer ce commentaire","delete_confirmation":"Voulez-vous vraiment supprimer ce commentaire ?","errors":{"empty_text":"Le commentaire n'a pas été enregistré puisque le texte était vide."},"no_comments_yet":"Aucun commentaire actuellement","resource":"Ressource","resource_type":"Type de ressource","title_content":"Commentaires (%{count})"},"create_another":"Créer autre %{model}","dashboard":"Tableau de bord","dashboard_welcome":{"call_to_action":"Pour ajouter des sections au tableau de bord, consultez 'app/admin/dashboard.rb'","welcome":"Bienvenue dans Active Admin. Ceci est la page par défaut."},"delete":"Supprimer","delete_confirmation":"Voulez-vous vraiment supprimer ceci ?","delete_model":"Supprimer %{model}","details":"Détails de %{model}","devise":{"change_password":{"submit":"Changer mon mot de passe","title":"Changez votre mot de passe"},"email":{"title":"Email"},"links":{"forgot_your_password":"Vous avez oublié votre mot de passe ?","resend_confirmation_instructions":"Renvoyer les instructions de confirmation","resend_unlock_instructions":"Renvoyer les informations de déverrouillage","sign_in":"Connectez-vous","sign_in_with_omniauth_provider":"Connectez-vous avec %{provider}","sign_up":"Inscrivez-vous"},"login":{"remember_me":"Garder ma session ouverte","submit":"Se connecter","title":"Connexion"},"password":{"title":"Mot de passe"},"resend_confirmation_instructions":{"submit":"Renvoyer les instructions de confirmation","title":"Renvoyer les instructions de confirmation"},"reset_password":{"submit":"Réinitialiser mon mot de passe","title":"Vous avez oublié votre mot de passe ?"},"sign_up":{"submit":"S'inscrire","title":"S'inscrire"},"subdomain":{"title":"Sous-domaine"},"unlock":{"submit":"Renvoyer les informations de déverrouillage","title":"Renvoyer les informations de déverrouillage"},"username":{"title":"Nom d'utilisateur"}},"download":"Télécharger :","dropdown_actions":{"button_label":"Actions"},"edit":"Modifier","edit_model":"Modifier %{model}","empty":"Vide","filters":{"buttons":{"clear":"Supprimer les filtres","filter":"Filtrer"},"predicates":{"contains":"Contient","ends_with":"Se termine par","equals":"Égal à","from":"De","greater_than":"Plus grand que","gteq_datetime":"Ultérieur ou égal à","less_than":"Plus petit que","lteq_datetime":"Antérieur ou égal à","starts_with":"Commence par","to":"À"}},"has_many_delete":"Supprimer","has_many_new":"Ajouter un(e) %{model}","has_many_remove":"Enlever","index_list":{"block":"Liste","blog":"Blog","grid":"Grille","table":"Tableau"},"logout":"Déconnexion","main_content":"Veuillez implémenter %{model}#main_content pour afficher le contenu.","new_model":"Créer %{model}","next":"Suivant","pagination":{"empty":"Aucun %{model} trouvé","entry":{"one":"entrée","other":"entrées"},"multiple":"Affichage de %{model} <b>%{from}&nbsp;-&nbsp;%{to}</b> sur un total de <b>%{total}</b>","multiple_without_total":"Affichage de %{model} <b>%{from}&nbsp;-&nbsp;%{to}</b>","one":"Affichage de <b>1</b> %{model}","one_page":"Affichage des <b>%{n}</b> %{model}","per_page":"Par page: "},"powered_by":"Propulsé par %{active_admin} %{version}","previous":"Précédent","search_status":{"current_filters":"Filtres actuels :","current_scope":"Etendu du filtre :","headline":"Statut de la recherche :","no_current_filters":"Aucun filtres"},"sidebars":{"filters":"Filtres","search_status":"Statut de la recherche"},"status_tag":{"no":"Non","unset":"Non","yes":"Oui"},"unsupported_browser":{"headline":"Veuillez noter que ActiveAdmin ne supporte plus les versions d'Internet Explorer 8 ou moins.","recommendation":"Nous vous recommandons de <a href=\"http://browsehappy.com/\">mettre à jour votre navigateur</a> pour améliorer votre expérience.","turn_off_compatibility_view":"Si vous utilisez IE 9 ou une version ultérieure, assurez-vous d'<a href=\"https://support.microsoft.com/fr-fr/help/17471\">activer \"Affichage de compatibilité\"</a>."},"view":"Voir"},"ckeditor":{"buttons":{"cancel":"Annuler","delete":"Supprimer","next":"Next","upload":"Ajouter"},"confirm_delete":"Supprimer le fichier ?","page_title":"CKEditor - Gestionnaire de fichiers"},"devise":{"failure":{"expired":"Votre compte a expiré pour cause d'inactivité. Veuillez contacter l'administrateur du site","session_limited":"Vos identifiants de connexion ont été utilisés dans un autre navigateur. Veuillez vous reconnecter pour continuer dans ce navigateur"},"invalid_captcha":"Le captcha n'est pas valide","invalid_security_question":"La réponse à la question de sécurité est invalide","paranoid_verify":{"code_required":"Veuillez entrer le code fourni par notre équipe de support"},"password_expired":{"change_required":"Votre mot de passe a expiré. Veuillez en choisir un autre","updated":"Votre nouveau mot de passe est enregistré"}},"errors":{"messages":{"equal_to_current_password":"doit être différent de l'actuel","password_complexity":{"digit":{"one":"doit contenir au moins un chiffre","other":"doit contenir au moins %{count} chiffres"},"lower":{"one":"doit contenir au moins une lettre miniscule","other":"doit contenir au moins %{count} lettres miniscules"},"symbol":{"one":"doit contenir au moins un signe de ponctuation","other":"doit contenir au moins %{count} signes de ponctuation"},"upper":{"one":"doit contenir au moins une lettre majuscule","other":"doit contenir au moins %{count} lettres majuscules"}},"taken_in_past":"a été utilisé trop récemment. Veuillez en choisir un autre"}},"formtastic":{"cancel":"Annuler","create":"Créer un(e) %{model}","no":"Non","required":"requis(e)","reset":"Réinitialiser ce(tte) %{model}","submit":"Enregistrer ce(tte) %{model}","update":"Modifier ce(tte) %{model}","yes":"Oui"},"ransack":{"all":"tous","and":"et","any":"au moins un","asc":"ascendant","attribute":"attribut","combinator":"combinateur","condition":"condition","desc":"descendant","or":"ou","predicate":"prédicat","predicates":{"blank":"est blanc","cont":"contient","cont_all":"contient tous","cont_any":"contient au moins un","does_not_match":"ne correspond pas à","does_not_match_all":"ne correspond à aucun","does_not_match_any":"ne correspond pas à au moins un","end":"finit par","end_all":"finit par tous","end_any":"finit par au moins un","eq":"égal à","eq_all":"égal à tous","eq_any":"égal à au moins un","false":"est faux","gt":"supérieur à","gt_all":"supérieur à tous","gt_any":"supérieur à au moins un","gteq":"supérieur ou égal à","gteq_all":"supérieur ou égal à tous","gteq_any":"supérieur ou égal à au moins un","in":"inclus dans","in_all":"inclus dans tous","in_any":"inclus dans au moins un","lt":"inférieur à","lt_all":"inférieur à tous","lt_any":"inférieur à au moins un","lteq":"inférieur ou égal à","lteq_all":"inférieur ou égal à tous","lteq_any":"inférieur ou égal à au moins un","matches":"correspond à","matches_all":"correspond à tous","matches_any":"correspond à au moins un","not_cont":"ne contient pas","not_cont_all":"ne contient pas tous","not_cont_any":"ne contient pas au moins un","not_end":"ne finit pas par","not_end_all":"ne finit pas par tous","not_end_any":"ne finit pas par au moins un","not_eq":"différent de","not_eq_all":"différent de tous","not_eq_any":"différent d'au moins un","not_in":"non inclus dans","not_in_all":"non inclus dans tous","not_in_any":"non inclus dans au moins un","not_null":"n'est pas null","not_start":"ne commence pas par","not_start_all":"ne commence pas par tous","not_start_any":"ne commence pas par au moins un","null":"est null","present":"est présent","start":"commence par","start_all":"commence par tous","start_any":"commence par au moins un","true":"est vrai"},"search":"recherche","sort":"tri","value":"valeur"}},"he":{"active_admin":{"access_denied":{"message":"אינך רשאי לבצע פעולה זו."},"any":"Any","batch_actions":{"action_label":"%{title} נבחר","button_label":"פעולות מרובות","default_confirmation":"אתה בטוח שאתה רוצה לעשות את זה?","delete_confirmation":"האם הנך בטוח שאתה רוצה למרוח את %{plural_model}?","labels":{"destroy":"מחק"},"selection_toggle_explanation":"(שינוי בחירה)","succesfully_destroyed":{"one":"1 %{model} נמחק בהצלחה","other":"%{count} %{plural_model} נמחק בהצלחה"}},"blank_slate":{"content":"כרגע אין עוד אף %{resource_name}.","link":"צור אחד"},"cancel":"ביטול","comments":{"add":"הוסף תגובה","author":"נוצר ע\"י","author_missing":"אנונימי","author_type":"סוג מחבר","body":"תוכן","created_at":"נוצר","delete":"מחק תגובה","delete_confirmation":"האם אתה בטוח שברצונך למחוק תגובה זאת?","errors":{"empty_text":"התגובה לא נשמרה, שדה התוכן ריק."},"no_comments_yet":"אין עדיין תגובות.","resource":"רשומה","resource_type":"סוג רישום","title_content":"תגובות (%{count})"},"create_another":"צור עוד %{model}","dashboard":"פנל ניהול","dashboard_welcome":{"call_to_action":"כדי להוסיף אזורים בפנל הניהול, אנא בדוק את,  'app/admin/dashboard.rb'","welcome":"ברוכים הבאים לאקטיב אדמין. זהו פנל הניהול"},"delete":"מחיקה","delete_confirmation":"האם אתה בטוח שאתה רוצה למחוק את זה?","delete_model":"מחיקת %{model}","details":"פרטים על %{model}","devise":{"change_password":{"submit":"שנה את הסיסמא שלי","title":"שנה את הסיסמא שלך"},"email":{"title":"כתובת דוא״ל"},"links":{"forgot_your_password":"שכחת את הסיסמא שלך?","resend_confirmation_instructions":"שלח שוב הוראות אישור","resend_unlock_instructions":"שלח שוב הוראות שיחרור","sign_in":"כניסה","sign_in_with_omniauth_provider":"%{provider} היכנס עם","sign_up":"הרשמה"},"login":{"remember_me":"זכור אותי","submit":"הכנס","title":"כניסה"},"password":{"title":"סיסמא"},"password_confirmation":{"title":"אישור סיסמא"},"resend_confirmation_instructions":{"submit":"שלח שוב הוראות אישור","title":"שלח שוב הוראות אישור"},"reset_password":{"submit":"אפס את הסיסמא שלי","title":"שכחת סיסמא?"},"sign_up":{"submit":"הרשמה","title":"הרשמה"},"subdomain":{"title":"תת-דומיין"},"unlock":{"submit":"שלח שוב הוראות שיחרור","title":"שלח שוב הוראות שיחרור"},"username":{"title":"שם משתמש"}},"download":"הורד:","dropdown_actions":{"button_label":"פעולו"},"edit":"עריכה","edit_model":"ערוך %{model}","empty":"ריק","filters":{"buttons":{"clear":"איפוס שדות","filter":"סינון"},"predicates":{"contains":"מכיל","ends_with":"מסתיים ב","equals":"שווה ל","greater_than":"גדול מ","gteq_datetime":"אחרי או בתאריך","less_than":"פחות מ","lteq_datetime":"לפני או בתאריך","starts_with":"מתחיל עם"}},"has_many_delete":"מחיקה","has_many_new":"הוספת %{model} חדש","has_many_remove":"להסיר","index_list":{"block":"רשימה","blog":"בלוג","grid":"גריד","table":"טבלה"},"logout":"התנתקות","main_content":"אנא הטמע את %{model}#main_content בכדי להציג תוכן.","new_model":"%{model} חדש","next":"הבא","pagination":{"empty":"אין %{model} בנמצא","entry":{"one":"רשומה בודדה","other":"רשומות"},"multiple":"מציג %{model} <b>%{from}&nbsp;-&nbsp;%{to}</b> מתוך <b>%{total}</b> בסך הכל","multiple_without_total":"מציג %{model} <b>%{from}&nbsp;-&nbsp;%{to}</b>","one":"מציג <b>1</b> %{model}","one_page":"הצגת <b>כל %{n}</b> %{model}","per_page":"בדף: "},"powered_by":"ממונע בעזרת %{active_admin} %{version}","previous":"הקודם","search_status":{"current_filters":"מסננים:","current_scope":"תחום:","headline":"תוצאות חיפוש:","no_current_filters":"ללא"},"sidebars":{"filters":"סינון","search_status":"מצב החיפוש"},"status_tag":{"no":"לא","unset":"לא","yes":"כן"},"unsupported_browser":{"headline":"שים לב ש-ActiveAdmin אינו תומך יותר ב-Internet Explorer גרסא 8 ומטה.","recommendation":"אנו ממליצים <a href=\"http://browsehappy.com/\">לשדרג את הדפדפן שלך</a> על מנת לשפר את חווית הגלישה.","turn_off_compatibility_view":"אם אתה משתמש ב- IE 9 ואילך, ודא ש<a href=\"https://support.microsoft.com/he-il/help/17471\">כיבית \"תצוגת תאימות\"</a>."},"view":"צפייה"}},"hr":{"active_admin":{"access_denied":{"message":"Nemaš dopuštenja."},"any":"Bilo koji","batch_actions":{"action_label":"%{title} označene","button_label":"Grupne akcije","default_confirmation":"Jeste li sigurni da želite to učiniti?","delete_confirmation":"Jeste li sigurni da želite obrisati %{plural_model}?","labels":{"destroy":"Obriši"},"selection_toggle_explanation":"(Izmijeni odabir)","succesfully_destroyed":{"few":"Uspješno su obrisana %{count} %{plural_model}","many":"Uspješno je obrisano %{count} %{plural_model}","one":"Uspješno je obrisan 1 %{model}","other":"Uspješno je obrisano %{count} %{plural_model}"}},"blank_slate":{"content":"Još uvijek ne postoji niti jedan zapis tipa %{resource_name}.","link":"Izradi jedan"},"cancel":"Odustani","comments":{"add":"Dodaj komentar","author":"Autor","author_missing":"Anoniman","author_type":"Tip autora","body":"Sadržaj","errors":{"empty_text":"Komentar nije spremljen, sadržaj je prazan."},"no_comments_yet":"Još nema komentara.","resource":"Objekt","resource_type":"Tip objekta","title_content":"Komentari (%{count})"},"dashboard":"Upravljačka ploča","dashboard_welcome":{"call_to_action":"Da biste dodali nove odjeljke na upravljačku ploču, pogledajte 'app/admin/dashboard.rb'","welcome":"Dobrodošli u Active Admin. Ovo je početna upravljačka ploča."},"delete":"Obriši","delete_confirmation":"Jeste li sigurni da želite ovo obrisati?","delete_model":"Obriši %{model}","details":"%{model} detalji","devise":{"change_password":{"submit":"Izmijeni lozinku","title":"Izmjena lozinke"},"email":{"title":"Email"},"links":{"forgot_your_password":"Zaboravljena lozinka?","sign_in":"Prijavi se","sign_in_with_omniauth_provider":"Prijavite se za %{provider}"},"login":{"remember_me":"Zapamti me","submit":"Prijavi se","title":"Prijava"},"password":{"title":"Lozinka"},"resend_confirmation_instructions":{"submit":"Pošalji","title":"Ponovno slanje uputstva za potvrdu"},"reset_password":{"submit":"Resetiraj lozinku","title":"Zaboravljena lozinka?"},"sign_up":{"submit":"Registruj","title":"Registracija"},"subdomain":{"title":"Poddomena"},"unlock":{"submit":"Pošalji","title":"Ponovno slanje uputstva za otključavanje"},"username":{"title":"Korisničko ime"}},"download":"Spremi na računalo:","dropdown_actions":{"button_label":"Ukrepi"},"edit":"Uredi","edit_model":"Uredi %{model}","empty":"Prazno","filters":{"buttons":{"clear":"Očisti filtere","filter":"Filtriraj"},"predicates":{"contains":"Sadrži","ends_with":"Završava sa","equals":"Jednako","greater_than":"Veće od","less_than":"Manje od","starts_with":"počinje s"}},"has_many_delete":"Obriši","has_many_new":"Dodaj novi %{model}","has_many_remove":"Ukloniti","index_list":{"block":"Lista","blog":"Blog","grid":"Rešetka","table":"Tabela"},"logout":"Odjavi se","main_content":"Molim Vas, implementirajte %{model}#main_content da biste prikazali sadržaj.","new_model":"Novi %{model}","next":"Sljedeći","pagination":{"empty":"Nije pronađen niti jedan %{model}.","entry":{"few":"zapisa","many":"zapisa","one":"zapis","other":"zapisa"},"multiple":"Prikazani %{model} <b>%{from}&nbsp;-&nbsp;%{to}</b> od ukupno <b>%{total}</b>","multiple_without_total":"Prikazani %{model} <b>%{from}&nbsp;-&nbsp;%{to}</b>","one":"Prikazan <b>1</b> %{model}","one_page":"Prikazano <b>svih %{n}</b> %{model}"},"powered_by":"Powered by %{active_admin} %{version}","previous":"Prijašnji","sidebars":{"filters":"Filtriranje"},"status_tag":{"no":"Nema","unset":"Nema","yes":"Da"},"view":"Pregledaj"}},"hu":{"active_admin":{"any":"Összes","batch_actions":{"action_label":"%{title} kiválasztva","button_label":"Tömeges műveletek","default_confirmation":"Biztos vagy benne, hogy a ön akar-hoz csinál ez?","delete_confirmation":"Biztosan törli ezeket a %{plural_model}?","labels":{"destroy":"Törlés"},"selection_toggle_explanation":"(Kijelölés megfordítása)","succesfully_destroyed":{"one":"1 %{model} sikeresen törölve","other":"%{count} %{plural_model} sikeresen törölve"}},"blank_slate":{"content":"Még nincs létrehozva %{resource_name}.","link":"Létrehozás most"},"cancel":"Mégsem","comments":{"add":"Új hozzászólás","author":"Szerző","body":"Törzs","errors":{"empty_text":"A hozzászólás nem lett mentve, a törzs nem lehet üres."},"no_comments_yet":"Nincsenek hozzászólások.","resource":"Erőforrás","title_content":"%{count} hozzászólás"},"dashboard":"Vezérlőpult","dashboard_welcome":{"call_to_action":"Elemek hozzáadásához nézze meg a 'app/admin/dashboard.rb' fájlt","welcome":"Üdvözöljük az Active Admin felületén. Ez a vezérlőpult kezdőlapja"},"delete":"Törlés","delete_confirmation":"Biztosan törli ezt az elemet?","delete_model":"%{model} törlése","details":"%{model} részletei","devise":{"change_password":{"submit":"Jelszó módosítása","title":"A jelszó módosítása"},"links":{"forgot_your_password":"Elfelejtette a jelszavát?","sign_in":"Bejelentkezés","sign_in_with_omniauth_provider":"Jelentkezzen be a %{provider}"},"login":{"remember_me":"Emlékezz rám","submit":"Belépés","title":"Bejelentkezés"},"resend_confirmation_instructions":{"submit":"Megerősítő levél újraküldése","title":"Megerősítő levél újraküldése"},"reset_password":{"submit":"Jelszó visszaállítása","title":"Elfelejtette a jelszavát?"},"unlock":{"submit":"Újraküldés unlock utasítások","title":"Újraküldés unlock utasítások"}},"download":"Letöltés:","dropdown_actions":{"button_label":"Műveletek"},"edit":"Szerkesztés","edit_model":"%{model} módosítása","empty":"Üres","filters":{"buttons":{"clear":"Feltételek törlése","filter":"Szűrés"},"predicates":{"contains":"Tartalmazza","ends_with":"végződik","equals":"Pontosan","from":"-tól","greater_than":"Nagyobb, mint","gteq_datetime":"Nagyobb vagy egyenlő, mint","less_than":"Kisebb, mint","lteq_datetime":"Kisebb vagy egyenlő, mint","starts_with":"kezdődik","to":"-ig"}},"has_many_delete":"Törlés","has_many_new":"Új %{model} hozzáadása","has_many_remove":"Eltávolít","logout":"Kilépés","main_content":"Kérem, implementálja a %{model}#main_content metódust a tartalom megjelenítéséhez.","new_model":"Új %{model}","next":"Következő","pagination":{"empty":"Nincs több %{model}","entry":{"one":"elem","other":"elem"},"multiple":"%{model} listájának megjelenítése, <b>%{from}&nbsp;-&nbsp;%{to}</b>/<b>%{total}</b> ","multiple_without_total":"%{model} listájának megjelenítése, <b>%{from}&nbsp;-&nbsp;%{to}</b> ","one":"<b>Egy</b> %{model} megjelenítése","one_page":"<b>Az összes (%{n} db)</b> %{model} megjelenítése"},"powered_by":"Powered by %{active_admin} %{version}","previous":"Előző","sidebars":{"filters":"Szűrők"},"status_tag":{"no":"Nem","unset":"Nem","yes":"Igen"},"view":"Megtekintés"},"ckeditor":{"buttons":{"cancel":"Mégsem","delete":"Törlés","next":"Next","upload":"Feltöltés"},"confirm_delete":"Biztosan töröljük a fájlt?","page_title":"CKEditor fájlkezelő"},"ransack":{"all":"mindegyik","and":"és","any":"bármely","asc":"növekvő","attribute":"attribute","combinator":"combinator","condition":"feltétel","desc":"csökkenő","or":"vagy","predicate":"állítás","predicates":{"blank":"üres","cont":"tartalmazza","cont_all":"mindet tartalmazza","cont_any":"bármelyiket tartalmazza","does_not_match":"nem egyezik","does_not_match_all":"nem egyezik az összessel","does_not_match_any":"nem egyezik semelyikkel","end":"így végződik","end_all":"ezekkel végződik","end_any":"bármelyikkel végződik","eq":"egyenlő","eq_all":"minddel egyenlő","eq_any":"bármelyikkel egyenlő","false":"hamis","gt":"nagyobb, mint","gt_all":"mindegyiknél nagyobb","gt_any":"bármelyiknél nagyobb","gteq":"nagyobb vagy egyenlő, mint","gteq_all":"mindegyiknél nagyobb vagy egyenlő","gteq_any":"bármelyiknél nagyobb vagy egyenlő","in":"értéke","in_all":"értéke mindegyik","in_any":"értéke bármelyik","lt":"kisebb, mint","lt_all":"mindegyiknél kisebb","lt_any":"bármelyiknél kisebb","lteq":"kisebb vagy egyenlő, mint","lteq_all":"mindegyiknél kisebb vagy egyenlő","lteq_any":"bármelyiknél kisebb vagy egyenlő","matches":"egyezik","matches_all":"minddel egyezik","matches_any":"bármelyikkel egyezik","not_cont":"nem tartalmazza","not_cont_all":"nem tartalmazza mindet","not_cont_any":"egyiket sem tartalmazza","not_end":"nem úgy végződik","not_end_all":"nem ezekkel végződik","not_end_any":"nem ezek egyikével végződik","not_eq":"nem egyenlő","not_eq_all":"nem egyenlő egyikkel sem","not_eq_any":"nem egyenlő bármelyikkel","not_in":"nem ez az értéke","not_in_all":"értéke nem ezek az elemek","not_in_any":"értéke egyik sem","not_null":"nem null","not_start":"nem így kezdődik","not_start_all":"nem ezekkel kezdődik","not_start_any":"nem ezek egyikével kezdődik","null":"null","present":"létezik","start":"így kezdődik","start_all":"ezekkel kezdődik","start_any":"bármelyikkel kezdődik","true":"igaz"},"search":"keresés","sort":"rendezés","value":"érték"}},"id":{"active_admin":{"access_denied":{"message":"Anda tidak diperkenankan melakukan aksi tersebut."},"any":"Apapun","batch_actions":{"action_label":"%{title} terpilih","button_label":"Tindakan Serentak","default_confirmation":"Apakah anda yakin akan melakukan ini?","delete_confirmation":"Apakah anda yakin akan menghapus %{plural_model}?","labels":{"destroy":"Hapus"},"selection_toggle_explanation":"(Tampilkan Pilihan)","succesfully_destroyed":{"one":"Berhasil menghapus %{model}","other":"Berhasil menghapus %{count} %{plural_model}"}},"blank_slate":{"content":"%{resource_name} masih belum ada sama sekali.","link":"Tambah data"},"cancel":"Batal","comments":{"add":"Tambah Komentar","author":"Penulis","author_missing":"Anonim","author_type":"Tipe Penulis","body":"Isi","created_at":"Dibuat","delete":"Hapus Komentar","delete_confirmation":"Apakah anda yakin akan menghapus komentar tersebut?","errors":{"empty_text":"Komentar tak bisa disimpan, text tidak boleh dikosongi."},"no_comments_yet":"Belum ada komentar sama sekali.","resource":"Resource","resource_type":"Jenis Resource","title_content":"Komentar (%{count})"},"dashboard":"Dashboard","dashboard_welcome":{"call_to_action":"Tampilan halaman ini bisa diubah di file 'app/admin/dashboard.rb'","welcome":"Selamat datang di Active Admin. Ini adalah tampilan standar halaman dashboard."},"delete":"Hapus","delete_confirmation":"Apakah anda yakin ingin menghapus data ini?","delete_model":"Hapus %{model}","details":"Detail %{model}","devise":{"change_password":{"submit":"Kirimkan instruksi pengaturan ulang password","title":" - Atur Ulang Password"},"email":{"title":"Email"},"links":{"forgot_your_password":"Lupa password?","resend_confirmation_instructions":"Kirim lagi instruksi konfirmasi akun","resend_unlock_instructions":"Kirim instruksi pengaktifan kembali akun","sign_in":"Masuk","sign_in_with_omniauth_provider":"Daftar melalui %{provider}","sign_up":"Daftar"},"login":{"remember_me":"Ingat saya","submit":"Masuk","title":" - Masuk"},"password":{"title":"Password"},"resend_confirmation_instructions":{"submit":"Kirimkan lagi instruksi konfirmasi akun","title":" - Kirim Lagi Instruksi Konfirmasi Akun"},"reset_password":{"submit":"Atur ulang password","title":" - Form Atur Ulang Password"},"sign_up":{"submit":"Daftar","title":" - Daftar"},"subdomain":{"title":"Subdomain"},"unlock":{"submit":"Kirimkan instruksi pengaktifan kembali akun","title":" - Kirim Instruksi Pengaktifan Kembali Akun"},"username":{"title":"Username"}},"download":"Unduh:","dropdown_actions":{"button_label":"Tindakan"},"edit":"Ubah","edit_model":"Ubah %{model}","empty":"Kosong","filters":{"buttons":{"clear":"Hapus Filters","filter":"Filter"},"predicates":{"contains":"Mengandung","ends_with":"Diakhiri dengan","equals":"Sama dengan","greater_than":"Lebih besar dari","less_than":"Lebih kecil dari","starts_with":"Diawali dengan"}},"has_many_delete":"Hapus","has_many_new":"Tambah %{model} baru","has_many_remove":"Hapus","index_list":{"block":"Daftar","blog":"Blog","grid":"Grid","table":"Tabel"},"logout":"Keluar","main_content":"Harap mengimplementasikan %{model}#main_content untuk menampilkan konten.","new_model":"Tambah %{model} baru","next":"Berikutnya","pagination":{"empty":"Tidak ada %{model} yang bisa ditemukan","entry":{"one":"data","other":"data"},"multiple":"Menampilkan <b>%{from}&nbsp;-&nbsp;%{to}</b> dari <b>%{total}</b> keseluruhan %{model}","multiple_without_total":"Menampilkan <b>%{from}&nbsp;-&nbsp;%{to} %{model}</b>","one":"Menampilkan <b>1</b> %{model}","one_page":"Menampilkan <b>semua %{n}</b> %{model}"},"powered_by":"Dibuat dengan %{active_admin} %{version}","previous":"Sebelumnya","search_status":{"current_filters":"Filter kini:","current_scope":"Scope:","headline":"Status Pencarian:","no_current_filters":"Tidak ada"},"sidebars":{"filters":"Filter","search_status":"Status Pencarian"},"status_tag":{"no":"Tidak","unset":"Tidak","yes":"Ya"},"unsupported_browser":{"headline":"Harap dicatat bahwa ActiveAdmin sudah tidak mendukung InternetExplorer versi 8 atau versi sebelum itu.","recommendation":"Kami sarankan agar anda mengupgrade ke versi <a href=\"http://windows.microsoft.com/ie\">Internet Explorer</a>, <a href=\"https://chrome.google.com/\">Google Chrome</a>, atau <a href=\"https://mozilla.org/firefox/\">Firefox</a> yang terbaru.","turn_off_compatibility_view":"Kalau anda menggunakan IE 9 atau yang lebih baru, pastikan anda <a href=\"https://support.microsoft.com/id-id/help/17471\">mematikan \"Compatibility View\"</a>."},"view":"Lihat"},"ransack":{"all":"semua","and":"dan","any":"apapun","asc":"ascending","attribute":"atribut","combinator":"kombinasi","condition":"kondisi","desc":"descending","or":"atau","predicate":"predikat","predicates":{"blank":"kosong","cont":"mengandung","cont_all":"mengandung semua","cont_any":"mengandung beberapa","does_not_match":"tidak mirip dengan","does_not_match_all":"tidak mirip semua dengan","does_not_match_any":"tidak mirip beberapa dengan","end":"diakhiri dengan","end_all":"diakhiri semua dengan","end_any":"diakhiri beberapa dengan","eq":"sama dengan","eq_all":"sama seluruhnya dengan","eq_any":"sama beberapa dengan","false":"bernilai salah","gt":"lebih besar daripada","gt_all":"lebih besar semua dengan","gt_any":"lebih besar beberapa dengan","gteq":"lebih besar atau sama dengan","gteq_all":"semua lebih besar atau sama dengan","gteq_any":"beberapa lebih besar atau sama dengan","in":"di","in_all":"di semua","in_any":"di beberapa","lt":"kurang dari","lt_all":"kurang seluruhnya dengan","lt_any":"kurang beberapa dengan","lteq":"kurang lebih","lteq_all":"kurang lebih semua dengan","lteq_any":"kurang lebih beberapa dengan","matches":"mirip","matches_all":"mirip semua dengan","matches_any":"mirip beberapa dengan","not_cont":"tidak mengandung","not_cont_all":"tidak mengandung semua","not_cont_any":"tidak mengandung beberapa","not_end":"tidak diakhiri dengan","not_end_all":"tidak diakhiri dengan semua","not_end_any":"tidak diakhiri dengan beberapa","not_eq":"tidak sama dengan","not_eq_all":"tidak semua seluruhnya dengan","not_eq_any":"tidak sama beberapa dengan","not_in":"tidak di","not_in_all":"tidak semua di","not_in_any":"tidak di beberapa","not_null":"tidak null","not_start":"tidak diawali dengan","not_start_all":"tidak diawali semua dengan","not_start_any":"tidak diawali beberapa dengan","null":"null","present":"ada","start":"diawali dengan","start_all":"diawali semua dengan","start_any":"diawali beberapa dengan","true":"bernilai benar"},"search":"cari","sort":"urutan","value":"data"}},"it":{"active_admin":{"access_denied":{"message":"Non hai le autorizzazioni necessarie per eseguire questa azione."},"any":"Qualsiasi","batch_actions":{"action_label":"%{title} Selezionati","button_label":"Azioni multiple","default_confirmation":"Sei sicuro di che voler proseguire?","delete_confirmation":"Sei sicuro di volere cancellare %{plural_model}?","labels":{"destroy":"Elimina"},"selection_toggle_explanation":"(cambia selezione)","succesfully_destroyed":{"one":"Eliminato con successo 1 %{model}","other":"Eliminati con successo %{count} %{plural_model}"}},"blank_slate":{"content":"Non sono presenti %{resource_name}","link":"Crea nuovo/a"},"cancel":"Annulla","comments":{"add":"Aggiungi Commento","author":"Autore","author_missing":"Anonimo","author_type":"Tipo di Autore","body":"Corpo","created_at":"Creato il","delete":"Cancella Commento","delete_confirmation":"Sei sicuro di voler cancellare questo commento?","errors":{"empty_text":"Il commento non può essere salvato, il testo è vuoto."},"no_comments_yet":"Nessun commento.","resource":"Risorsa","resource_type":"Tipo di risorsa","title_content":"Commenti (%{count})"},"create_another":"Crea un altro %{model}","dashboard":"Dashboard","dashboard_welcome":{"call_to_action":"Per aggiungere sezioni alla dashboard controlla il file 'app/admin/dashboard.rb'","welcome":"Benvenuti in Active Admin. Questa è la pagina dashboard di default."},"delete":"Rimuovi","delete_confirmation":"Sei sicuro di volerlo rimuovere?","delete_model":"Rimuovi %{model}","details":"Dettagli %{model}","devise":{"change_password":{"submit":"Cambia la mia password","title":"Cambia la tua password"},"email":{"title":"Email"},"links":{"forgot_your_password":"Dimenticato la password?","resend_confirmation_instructions":"Invia di nuovo le istruzioni per la conferma","resend_unlock_instructions":"Invia di nuovo le istruzioni per lo sblocco","sign_in":"Entra","sign_in_with_omniauth_provider":"Collegati a %{provider}","sign_up":"Iscriviti"},"login":{"remember_me":"Ricordami","submit":"Entra","title":"Entra"},"password":{"title":"Password"},"password_confirmation":{"title":"Conferma password"},"resend_confirmation_instructions":{"submit":"Invia di nuovo le istruzioni per la conferma","title":"Invia di nuovo le istruzioni per la conferma"},"reset_password":{"submit":"Reimposta la tua password","title":"Dimenticato la password?"},"sign_up":{"submit":"Iscriviti","title":"Iscriviti"},"subdomain":{"title":"Sottodominio"},"unlock":{"submit":"Invia di nuovo le istruzioni per sbloccare","title":"Invia di nuovo le istruzioni per sbloccare"},"username":{"title":"Nome Utente"}},"download":"Scarica:","dropdown_actions":{"button_label":"Azioni"},"edit":"Modifica","edit_model":"Modifica %{model}","empty":"Vuoto","filters":{"buttons":{"clear":"Rimuovi filtri","filter":"Filtra"},"predicates":{"contains":"Contiene","ends_with":"Finisce con","equals":"Uguale a","from":"Da","greater_than":"Maggiore di","gteq_datetime":"Maggiore o uguale a","less_than":"Minore di","lteq_datetime":"Minore o uguale a","starts_with":"Inizia con","to":"A"}},"has_many_delete":"Rimuovi","has_many_new":"Aggiungi nuovo/a %{model}","has_many_remove":"Rimuovi","index_list":{"block":"Lista","blog":"Blog","grid":"Griglia","table":"Tabella"},"logout":"Esci","main_content":"Devi implemetare %{model}#main_content per mostrarne il contenuto.","move":"Sposta","new_model":"Aggiungi %{model}","next":"Prossimo","pagination":{"empty":"Nessun %{model} trovato","entry":{"one":"voce","other":"voci"},"multiple":"Sto mostrando %{model} <b>%{from}&nbsp;-&nbsp;%{to}</b> di <b>%{total}</b> in totale","multiple_without_total":"Sto mostrando %{model} <b>%{from}&nbsp;-&nbsp;%{to}</b>","one":"Sto mostrando <b>1</b> %{model}","one_page":"Sto mostrando <b>%{n}</b> %{model}. Lista completa.","per_page":"Oggetti per pagina: "},"powered_by":"Powered by %{active_admin} %{version}","previous":"Precedente","scopes":{"all":"Tutti"},"search_status":{"current_filters":"Filtri attivi:","current_scope":"Contesto selezionato:","headline":"Situazione filtri:","no_current_filters":"Nessuno"},"sidebars":{"filters":"Filtri","search_status":"Informazioni sulla ricerca"},"status_tag":{"no":"No","unset":"No","yes":"Sì"},"unsupported_browser":{"headline":"Avviso: ActiveAdmin non supporta Internet Explorer 8 o inferiore","recommendation":"Ti raccomandiamo di aggiornare alla versione più recente di <a href=\"http://windows.microsoft.com/ie\">Internet Explorer</a>, <a href=\"https://chrome.google.com/\">Google Chrome</a>, o <a href=\"https://mozilla.org/firefox/\">Firefox</a>.","turn_off_compatibility_view":"Se stai utilizzando Internet Explorer 9 o successivo, assicurati di <a href=\"https://support.microsoft.com/it-it/help/17471\">disabilitare la \"Modalità Compatibilità\"</a>."},"view":"Mostra"},"activerecord":{"attributes":{"active_admin/comment":{"author_type":"Tipo di Autore","body":"Corpo","created_at":"Creato il","namespace":"Namespace","resource_type":"Tipo di risorsa","updated_at":"Aggiornato il"}},"models":{"active_admin/comment":{"one":"Commento","other":"Commenti"},"comment":{"one":"Commento","other":"Commenti"}}},"ckeditor":{"buttons":{"cancel":"Annulla","delete":"Elimina","next":"Next","upload":"Carica"},"confirm_delete":"Cancellare il file?","page_title":"CKEditor Files Manager"},"devise":{"invalid_captcha":"Il captcha inserito non e' valido!","password_expired":{"change_required":"La tua password e' scaduta. Si prega di rinnovarla!","updated":"La tua nuova password e' stata salvata."}},"errors":{"messages":{"equal_to_current_password":" deve essere differente dalla password corrente!","taken_in_past":"e' stata gia' utilizzata in passato!"}},"formtastic":{"cancel":"Annulla","create":"Crea %{model}","no":"No","required":"obbligatorio","reset":"Ripristina %{model}","submit":"Invia","update":"Aggiorna %{model}","yes":"Sì"},"ransack":{"all":"tutti","and":"e","any":"qualsiasi","asc":"crescente","attribute":"attributo","combinator":"combinatore","condition":"condizione","desc":"decrescente","or":"o","predicate":"predicato","predicates":{"blank":"è vuoto","cont":"contiene","cont_all":"contiene tutti","cont_any":"contiene almeno un","does_not_match":"non corrisponde","does_not_match_all":"non corrisponde con nessuno","does_not_match_any":"non corrisponde ad uno qualsiasi","end":"finisce con","end_all":"finisce con tutti","end_any":"finisce con almeno un","eq":"uguale a","eq_all":"uguale ad ognuno","eq_any":"uguale ad almeno un","false":"è falso","gt":"maggiore di","gt_all":"maggiore di tutti","gt_any":"maggiore di almeno un","gteq":"maggiore o uguale a","gteq_all":"maggiore o uguale a tutti","gteq_any":"maggiore o uguale ad almeno un","in":"in","in_all":"in tutti","in_any":"in almeno un","lt":"minore di","lt_all":"minore di tutti","lt_any":"minore di almeno un","lteq":"minore o uguale a","lteq_all":"minore o uguale a tutti","lteq_any":"minore o uguale ad almeno un","matches":"combacia con","matches_all":"combacia con tutti","matches_any":"combacia con almeno un","not_cont":"non contiene","not_cont_all":"non contiene nessuno","not_cont_any":"non contiene un qualsiasi","not_end":"non finisce con","not_end_all":"non finisce con nessuno","not_end_any":"non finisce con uno qualsiasi","not_eq":"diverso da","not_eq_all":"diverso da tutti","not_eq_any":"diverso da uno qualsiasi","not_in":"non in","not_in_all":"non in tutti","not_in_any":"non in almeno un","not_null":"non è nullo","not_start":"non inizia con","not_start_all":"non inizia con nessuno","not_start_any":"non inizia con uno qualsiasi","null":"è nullo","present":"è presente","start":"inizia con","start_all":"inizia con tutti","start_any":"inizia con almeno un","true":"è vero"},"search":"cerca","sort":"ordinamento","value":"valore"}},"ja":{"active_admin":{"access_denied":{"message":"アクションを実行する権限がありません"},"any":"任意","batch_actions":{"action_label":"選択した行を%{title}","button_label":"一括操作","default_confirmation":"本当によろしいですか？","delete_confirmation":"%{plural_model} を削除してもよろしいですか？","labels":{"destroy":"削除する"},"selection_toggle_explanation":"(選択)","succesfully_destroyed":{"one":"1件の %{model} を削除しました","other":"%{count}件の %{plural_model} を削除しました"}},"blank_slate":{"content":"%{resource_name} はまだありません。","link":"作成する"},"cancel":"取り消す","comments":{"add":"コメントを追加","author":"作成者","author_missing":"匿名ユーザ","author_type":"作成者種別","body":"本文","created_at":"作成日","delete":"コメントを削除","delete_confirmation":"本当にコメントを削除しますか？","errors":{"empty_text":"テキストが空のため、コメントは保存されませんでした。"},"no_comments_yet":"コメントはまだありません。","resource":"リソース","resource_type":"リソース種別","title_content":"コメント (%{count})"},"create_another":"%{model} を続けて作成する","dashboard":"ダッシュボード","dashboard_welcome":{"call_to_action":"ダッシュボードに項目を追加するために 'app/admin/dashboard.rb' を編集してください。","welcome":"Active Admin へようこそ。ダッシュボードの初期ページを表示しています。"},"delete":"削除","delete_confirmation":"本当に削除しますか？","delete_model":"%{model} を削除する","details":"%{model} の詳細","devise":{"change_password":{"submit":"パスワードを変更する","title":"パスワードを変更する"},"email":{"title":"メールアドレス"},"links":{"forgot_your_password":"パスワードをお忘れですか？","resend_confirmation_instructions":"ユーザ確認手順を再送する","resend_unlock_instructions":"ロックの解除方法を再送する","sign_in":"サインイン","sign_in_with_omniauth_provider":"%{provider}のアカウントを使ってログイン","sign_up":"ユーザ登録"},"login":{"remember_me":"次回から自動的にログイン","submit":"ログイン","title":"ログイン"},"password":{"title":"パスワード"},"resend_confirmation_instructions":{"submit":"確認方法を再送信する","title":"確認方法を再送信する"},"reset_password":{"submit":"パスワードをリセットする","title":"パスワードをお忘れですか？"},"sign_up":{"submit":"登録","title":"登録"},"subdomain":{"title":"サブドメイン"},"unlock":{"submit":"ロックの解除方法を送る","title":"ロックの解除方法を送る"},"username":{"title":"ユーザ名"}},"download":"ダウンロード:","dropdown_actions":{"button_label":"操作"},"edit":"編集","edit_model":"%{model} を編集する","empty":"空","filters":{"buttons":{"clear":"条件を削除する","filter":"絞り込む"},"predicates":{"contains":"を含む","ends_with":"で終わる","equals":"等しい","from":"開始","greater_than":"より大きい","gteq_datetime":"以上","less_than":"より小さい","lteq_datetime":"以下","starts_with":"で始まる","to":"終了"}},"has_many_delete":"削除する","has_many_new":"%{model} を追加する","has_many_remove":"削除する","index_list":{"block":"リスト","blog":"ブログ","grid":"グリッド","table":"テーブル"},"logout":"ログアウト","main_content":"内容を表示するために %{model}#main_content を実装してください。","new_model":"%{model} を作成する","next":"次","pagination":{"empty":"%{model} は見つかりませんでした","entry":{"one":"レコード","other":"レコード"},"multiple":"全 <b>%{total}</b> 件中 <b>%{from}&nbsp;-&nbsp;%{to}</b> 件の %{model} を表示しています","multiple_without_total":"<b>%{from}&nbsp;-&nbsp;%{to}</b> 件の %{model} を表示しています","one":"<b>1</b> 件の %{model} を表示しています","one_page":"<b>全 %{n}</b> 件の %{model} を表示しています","per_page":"表示件数: "},"powered_by":"Powered by %{active_admin} %{version}","previous":"前","search_status":{"current_filters":"現在の絞り込み:","current_scope":"範囲:","headline":"検索条件:","no_current_filters":"なし"},"sidebars":{"filters":"検索条件","search_status":"検索状態"},"status_tag":{"no":"いいえ","unset":"いいえ","yes":"はい"},"unsupported_browser":{"headline":"ActiveAdminは、Internet Explorer 8以下はサポートはしていません。","recommendation":"最新版の<a href=\"http://windows.microsoft.com/ie\">Internet Explorer</a>、<a href=\"https://chrome.google.com/\">Google Chrome</a>、もしくは<a href=\"https://mozilla.org/firefox/\">Firefox</a>を使うことを推奨します。","turn_off_compatibility_view":"Internet Explorer 9以降を使っている場合、<a href=\"https://support.microsoft.com/ja-jp/help/17471\">互換表示をオフ</a>にしてください。"},"view":"閲覧"},"ckeditor":{"buttons":{"cancel":"キャンセル","delete":"削除","next":"次へ","upload":"アップロード"},"confirm_delete":"ファイルを削除しますか？","page_title":"CKEditor ファイル・マネージャー"},"devise":{"failure":{"expired":"活動がなかったため、あなたのアカウントは期限切れとなりました。サイト管理者に連絡してください。","session_limited":"他のブラウザでログインされました。このブラウザで続ける場合は、もう一度サインインしてください。"},"invalid_captcha":"キャプチャ入力が不正です。","invalid_security_question":"セキュリティ質問に対すつ回答が不正です。","paranoid_verify":{"code_required":"サポートチームに提供された認証コードを入力してください。"},"password_expired":{"change_required":"パスワードが期限切れです。パスワードを新しく設定してください。","updated":"新しいパスワードが保存されました。"}},"errors":{"messages":{"equal_to_current_password":"は現在のパスワードと異なるものである必要があります。","password_complexity":{"digit":{"one":"は最低1つの数字を含む必要があります。","other":"は最低%{count}つの数字を含む必要があります。"},"lower":{"one":"は最低1つの小文字英字を含む必要があります。","other":"は最低%{count}つの小文字英字を含む必要があります。"},"symbol":{"one":"は最低1つの記号を含む必要があります。","other":"は最低%{count}つの記号を含む必要があります。"},"upper":{"one":"は最低1つの大文字英字を含む必要があります。","other":"は最低%{count}つの大文字英字を含む必要があります。"}},"taken_in_past":"は既に使われています。"}},"formtastic":{"cancel":"中止","create":"%{model}を作成","no":"いいえ","required":"必須","reset":"リセット","submit":"送信","update":"%{model}を更新","yes":"はい"},"ransack":{"all":"全て","and":"と","any":"いずれか","asc":"昇順","attribute":"属性","combinator":"組み合わせ","condition":"状態","desc":"降順","or":"あるいは","predicate":"は以下である","predicates":{"blank":"は空である","cont":"は以下を含む","cont_all":"は以下の全てを含む","cont_any":"はいずれかを含む","does_not_match":"は以下と合致していない","does_not_match_all":"は以下の全てに合致していない","does_not_match_any":"は以下のいずれかに合致していない","end":"は以下で終わる","end_all":"は以下の全てで終わる","end_any":"は以下のいずれかで終わる","eq":"は以下と等しい","eq_all":"は以下の全てに等しい","eq_any":"は以下のいずれかに等しい","false":"偽","gt":"は以下より大きい","gt_all":"は以下の全てより大きい","gt_any":"は以下のいずれかより大きい","gteq":"は以下より大きいか等しい","gteq_all":"は以下の全てより大きいか等しい","gteq_any":"は以下のいずれかより大きいか等しい","in":"は以下の範囲内である","in_all":"は以下の全ての範囲内である","in_any":"は以下のいずれかの範囲内である","lt":"は以下よりも小さい","lt_all":"は以下の全てよりも小さい","lt_any":"は以下のいずれかより小さい","lteq":"は以下より小さいか等しい","lteq_all":"は以下の全てより小さいか等しい","lteq_any":"は以下のいずれかより小さいか等しい","matches":"は以下と合致している","matches_all":"は以下の全てと合致している","matches_any":"は以下のいずれかと合致している","not_cont":"は含まない","not_cont_all":"は以下の全てを含まない","not_cont_any":"は以下のいずれかを含まない","not_end":"は以下のどれでも終わらない","not_end_all":"は以下の全てで終わらない","not_end_any":"は以下のいずれかで終わらない","not_eq":"は以下と等しくない","not_eq_all":"は以下の全てと等しくない","not_eq_any":"は以下のいずれかに等しくない","not_in":"は以下の範囲内でない","not_in_all":"は以下の全ての範囲内","not_in_any":"は以下のいずれかの範囲内でない","not_null":"は無効ではない","not_start":"は以下で始まらない","not_start_all":"は以下の全てで始まらない","not_start_any":"は以下のいずれかで始まらない","null":"無効","present":"は存在する","start":"は以下で始まる","start_all":"は以下の全てで始まる","start_any":"は以下のどれかで始まる","true":"真"},"search":"検索","sort":"分類","value":"値"}},"ko":{"active_admin":{"any":"어떤","batch_actions":{"action_label":"%{title} 선택됨","button_label":"배치 작업","default_confirmation":"확실하십니까?","delete_confirmation":"%{plural_model}을/를 삭제하시겠습니까?","labels":{"destroy":"삭제"},"selection_toggle_explanation":"(선택 항목 바꾸기)","succesfully_destroyed":{"one":"성공적으로 1개 %{model}을/를 삭제하였습니다","other":"성공적으로 %{count}개의 %{plural_model}을/를 삭제하였습니다"}},"blank_slate":{"content":"아직 %{resource_name} 이/가 없습니다.","link":"추가하기"},"cancel":"취소","comments":{"add":"댓글 추가","author":"글쓴이","author_type":"글쓴이 종류","body":"내용","created_at":"작성시간","errors":{"empty_text":"댓글이 저장되지 않았습니다. 내용을 입력해주세요."},"no_comments_yet":"아직 댓글이 없습니다.","resource":"첨부파일","resource_type":"첨부파일 형태","title_content":"댓글 (%{count})"},"dashboard":"대시보드","dashboard_welcome":{"call_to_action":"대시보드에 섹션을 추가하시려면 'app/admin/dashboard.rb' 파일을 수정하십시오.","welcome":"ActiveAdmin에 오신 것을 환영합니다. 기본 대시보드 페이지 입니다."},"delete":"삭제","delete_confirmation":"정말로 삭제 하시겠습니까?","delete_model":"%{model} 삭제","details":"%{model} 상세보기","devise":{"change_password":{"submit":"내 비밀번호 변경","title":"비밀번호 변경"},"email":{"title":"이메일"},"links":{"forgot_your_password":"비밀번호를 잊으셨나요?","resend_confirmation_instructions":"계정 승인 요청하기","resend_unlock_instructions":"계정 잠금 해제하기","sign_in":"로그인","sign_in_with_omniauth_provider":"%{provider} 으로 로그인"},"login":{"remember_me":"내 계정 정보 기억","submit":"로그인","title":"로그인"},"password":{"title":"비밀번호"},"resend_confirmation_instructions":{"submit":"계정 승인 요청하기","title":"계정 승인 요청하기"},"reset_password":{"submit":"비밀번호 재설정","title":"비밀번호를 잊으셨나요?"},"sign_up":{"submit":"가입하기","title":"가입하기"},"subdomain":{"title":"서브도메인"},"unlock":{"submit":"계정 잠금 해제하기","title":"계정 잠금 해제하기"},"username":{"title":"아이디"}},"download":"다운로드:","dropdown_actions":{"button_label":"작업"},"edit":"수정","edit_model":"%{model} 수정","empty":"내용이 없습니다","filters":{"buttons":{"clear":"필터 초기화","filter":"필터"},"predicates":{"contains":"포함하는 문구","ends_with":"종료하는 문구","equals":"일치하는 문구","greater_than":"초과","less_than":"미만","starts_with":"시작하는 문구"}},"has_many_delete":"삭제","has_many_new":"%{model} 추가","has_many_remove":"삭제","logout":"로그아웃","main_content":"내용을 보시려면 %{model}#main_content의 코드를 먼저 구현해 주시기 바랍니다.","new_model":"%{model} 추가","next":"다음","pagination":{"empty":"%{model} 이/가 없습니다.","entry":{"one":"항목","other":"항목들"},"multiple":"<b>%{total}</b>개 중 <b>%{from}&nbsp;-&nbsp;%{to}</b> %{model} 표시중","multiple_without_total":"<b>%{from}&nbsp;-&nbsp;%{to}</b> %{model} 표시중","one":"<b>1</b>개 %{model} 표시중","one_page":"<b>%{n}</b>개 %{model} 표시중"},"powered_by":"Powered by %{active_admin} %{version}","previous":"이전","search_status":{"current_filters":"적용된 필터:","current_scope":"검색 범위:","headline":"검색 상태:","no_current_filters":"현재 적용된 필터가 없습니다"},"sidebars":{"filters":"필터 목록","search_status":"검색 상태"},"status_tag":{"no":"없음","unset":"없음","yes":"있음"},"view":"보기"}},"lt":{"active_admin":{"access_denied":{"message":"Jūs nesate įgaliotas atlikti šį veiksmą."},"any":"Bet kokia","batch_actions":{"action_label":"%{title} Pasirinkta","button_label":"Veiksmai su pažymėtais","default_confirmation":"Ar jūs tikrai norite tai padaryti?","delete_confirmation":"Ar jūs tikrai norite pašalinti šiuos %{plural_model}?","labels":{"destroy":"Šalinti"},"selection_toggle_explanation":"(Žymėti)","succesfully_destroyed":{"one":"Sėkmingai pašalintas 1 %{model}","other":"Sėkmingai pašalinti %{count} %{plural_model}"}},"blank_slate":{"content":"Nėra %{resource_name}.","link":"Sukurti"},"cancel":"Atšaukti","comments":{"add":"Pridėti komentarą","author":"Autorius","author_missing":"Anonimas","author_type":"Autoriaus Tipas","body":"Įrašas","created_at":"Sukurta","delete":"Trinti komentarą","delete_confirmation":"Ar tikrai norite ištrinti šį komentarą?","errors":{"empty_text":"Komentaras neišsaugotas, tekstas buvo tuščias."},"no_comments_yet":"Dar nėra komentarų.","resource":"Išteklių","resource_type":"Resurso Tipas","title_content":"Komentarai (%{count})"},"dashboard":"Valdymo skydelis","dashboard_welcome":{"call_to_action":"Norėdami pridėti skydelyje skyrius, žiūrėkite app/admin/dashboard.rb","welcome":"Sveiki atvykę į Active Admin. Tai yra numatytasis valdymo skydelis."},"delete":"Šalinti","delete_confirmation":"Ar jūs tikrai norite tai pašalinti?","delete_model":"Pašalinti %{model}","details":"%{model} Informacija","devise":{"change_password":{"submit":"Pakeisti mano slaptažodį","title":"Slaptažodžio Keitimas"},"email":{"title":"El. paštas"},"links":{"forgot_your_password":"Pamiršote slaptažodį?","resend_confirmation_instructions":"Persiųsti patvirtinimo instrukcijas","resend_unlock_instructions":"Persiųsti pakartotinio atrakinimo instrukcijas","sign_in":"Prisijungti","sign_in_with_omniauth_provider":"Prisijungti su %{provider}","sign_up":"Užsiregistruoti"},"login":{"remember_me":"Prisiminti Mane","submit":"Prisijungti","title":"Prisijungimas"},"password":{"title":"Slaptažodis"},"password_confirmation":{"title":"Pakartokite slaptažodį"},"resend_confirmation_instructions":{"submit":"Siųsti patvirtinimo instrukcijas","title":"Patvirtinimo Instrukcijos"},"reset_password":{"submit":"Sukurti Naują Slaptažodį","title":"Pamiršote slaptažodį?"},"sign_up":{"submit":"Užsiregistruoti","title":"Registracija"},"subdomain":{"title":"Subdomenas"},"unlock":{"submit":"Pakartotinai siųsti atrakinimo instrukcijas","title":"Pakartotinio Atrakinimo Instrukcijos"},"username":{"title":"Vartotojo Vardas"}},"download":"Atsisiųsti","dropdown_actions":{"button_label":"Veiksmai"},"edit":"Redaguoti","edit_model":"Redaguoti %{model}","empty":"Tuščia","filters":{"buttons":{"clear":"Išvalyti filtrus","filter":"Filtras"},"predicates":{"contains":"Sudėtyje yra","ends_with":"Baigiasi","equals":"lygus","from":"Nuo","greater_than":"didesnis nei","gteq_datetime":"daugiau arba lygu nei","less_than":"mažiau nei","lteq_datetime":"mažiau arba lygu nei","starts_with":"Prasideda nuo","to":"Iki"}},"has_many_delete":"Šalinti","has_many_new":"Pridėti naują %{model}","has_many_remove":"Pašalinti","index_list":{"block":"Sąrašas","blog":"Blog","grid":"Tinklelis","table":"Lentelė"},"logout":"Išeiti","main_content":"Prašome realizuoti %{model}#main_content turiniui vaizduoti.","new_model":"Naujas %{model}","next":"Toliau","pagination":{"empty":"%{model} nerastas","entry":{"one":"įrašas","other":"įrašai"},"multiple":"Rodomi %{model} <b>%{from}&nbsp;-&nbsp;%{to} </ b> iš<b>%{total} </ b> iš viso","multiple_without_total":"Rodomi %{model} <b>%{from}&nbsp;-&nbsp;%{to} </ b> ","one":"Rodoma <B> 1 </ b> %{model}","one_page":"Rodoma <b>visi %{n} </ b> %{model}","per_page":"Puslapyje: "},"powered_by":"Powered by %{active_admin} %{version}","previous":"Atgal","search_status":{"current_filters":"Esami filtrai:","current_scope":"Apimtis:","headline":"Paieškos būsena:","no_current_filters":"nėra"},"sidebars":{"filters":"Filtrai","search_status":"Paieškos būsena"},"status_tag":{"no":"Nėra","unset":"Nėra","yes":"Taip"},"unsupported_browser":{"headline":"Atkreipiame dėmesį, kad ActiveAdmin nebepalaiko Internet Explorer 8 arba žemesnių versijų.","recommendation":"Rekomenduojame atsinaujinti į naujausią <a href=\"http://windows.microsoft.com/ie\">Internet Explorer</a>, <a href=\"https://chrome.google.com/\">Google Chrome</a>, arba <a href=\"https://mozilla.org/firefox/\">Firefox</a>.","turn_off_compatibility_view":"Jei naudojate IE 9 ar vėlesnę versiją, įsitikinkite kad <a href=\"http://windows.microsoft.com/en-US/windows7/webpages-look-incorrect-in-Internet-Explorer\">išjungėte \"Suderinamumo rodinį\"</a>."},"view":"Žiūrėti"}},"lv":{"active_admin":{"any":"Jebkurš","batch_actions":{"action_label":"%{title} Selected","button_label":"Batch Actions","default_confirmation":"Vai tiešām vēlaties to darīt?","delete_confirmation":"Vai tiešām vēlaties dzēst šos %{plural_model}?","labels":{"destroy":"Delete"},"selection_toggle_explanation":"(Toggle Selection)","succesfully_destroyed":{"one":"Successfully deleted 1 %{model}","other":"Successfully deleted %{count} %{plural_model}"}},"blank_slate":{"content":"Sadaļā '%{resource_name}' nav neviena ieraksta.","link":"Izveidot jaunu"},"cancel":"Atcelt","comments":{"add":"Pievienot komentāru","author":"Autors","body":"Saturs","errors":{"empty_text":"Komentārs netika saglabāts - nekas nav ierakstīts"},"no_comments_yet":"Nav neviena komentāra.","resource":"Resurss","title_content":"Komentāri (%{count})"},"dashboard":"Panelis","dashboard_welcome":{"call_to_action":"Izmantojiet 'app/admin/dashboard.rb', lai pievienotu sadaļas panelim.","welcome":"Laipni lūgti Active Admin."},"delete":"Dzēst","delete_confirmation":"Vai Tu tiešām vēlies dzēst?","delete_model":"Dzēst '%{model}' ierakstu","details":"Apraksts","devise":{"change_password":{"submit":"Nomainīt savu paroli","title":"Nomainīt paroli"},"links":{"forgot_your_password":"Aizmirsāt savu paroli?","sign_in":"pierakstīties","sign_in_with_omniauth_provider":"Pierakstieties ar %{provider}"},"login":{"remember_me":"atcerēties mani","submit":"Ielogojaties","title":"Ielogojaties"},"reset_password":{"submit":"Atjaunotu savu paroli","title":"Aizmirsāt savu paroli?"}},"download":"Lejuplādēt:","dropdown_actions":{"button_label":"Actions"},"edit":"Labot","edit_model":"Labot '%{model}' ierakstu","empty":"Tukšs","filters":{"buttons":{"clear":"Novākt filtrus","filter":"Filtrēt"},"predicates":{"contains":"Satur","ends_with":"Beidzas ar","equals":"Vienāds ar","greater_than":"Lielāks par","less_than":"Mazāks par","starts_with":"Sākas ar"}},"has_many_delete":"Dzēst","has_many_new":"Pievienot jaunu '%{model}' ierakstu","has_many_remove":"Noņemt","logout":"Iziet","main_content":"Lūdzu implementēt %{model}#main_content, lai rādītos saturs.","new_model":"Pievienot '%{model}' ierakstu","next":"Nākošā","pagination":{"empty":"Nav ierakstu","entry":{"one":"ieraksts","other":"ieraksti"},"multiple":"<b>%{from}&nbsp;-&nbsp;%{to}</b> ieraksti no <b>%{total}</b> kopā","multiple_without_total":"<b>%{from}&nbsp;-&nbsp;%{to}</b>","one":"<b>1</b> ieraksts","one_page":"<b>%{n}</b> ieraksti"},"powered_by":"Powered by %{active_admin} %{version}","previous":"Iepriekšējā","sidebars":{"filters":"Filtri"},"status_tag":{"no":"Nē","unset":"Nē","yes":"Jā"},"view":"Apskatīt"}},"mk":{"active_admin":{"access_denied":{"message":"Немате овластување да ја извршите оваа активност."},"any":"Било кој","batch_actions":{"action_label":"%{title} го селектираното","button_label":"Групни активности","default_confirmation":"Дали сте сигурни?","delete_confirmation":"Дали сте сигурни дека сакате да ги избришете %{plural_model}?","labels":{"destroy":"Избриши"},"selection_toggle_explanation":"(Toggle Selection)","succesfully_destroyed":{"one":"Успешно е избришан 1 %{model}","other":"Успешно се избришани %{count} %{plural_model}"}},"blank_slate":{"content":"Не се креирани записи од типот на %{resource_name}.","link":"Креирај нов"},"cancel":"Откажи","create_another":"Креирај нов %{model}","dashboard":"Почетна","dashboard_welcome":{"call_to_action":"За да додадете секции на почетната страна, прегледајте го 'app/admin/dashboard.rb'.","welcome":"Добредојдовте во Active Admin. Ова е стандардна верзија на почетната страна."},"delete":"Избриши","delete_confirmation":"Дали сте сигурни дека сакате да го избришете записот?","delete_model":"Избриши %{model}","details":"Детали за %{model}","devise":{"change_password":{"submit":"Промени лозинка","title":"Променете ја лозинката"},"email":{"title":"Е-маил"},"links":{"forgot_your_password":"Ја заборавивте Вашата лозинка?","resend_confirmation_instructions":"Повторно испрати инструкции за потврдување на профил","resend_unlock_instructions":"Повторно испрати инструкции за отклучување на профил","sign_in":"Најави се","sign_in_with_omniauth_provider":"Најави се со %{provider}","sign_up":"Креирај профил"},"login":{"remember_me":"Запомни ме","submit":"Најави се","title":"Најави се"},"password":{"title":"Лозинка"},"password_confirmation":{"title":"Потврди Лозинка"},"resend_confirmation_instructions":{"submit":"Инспрати инструкции","title":"Повторно испраќање на инструкции за потврдување на профил"},"reset_password":{"submit":"Промени лозинка","title":"Ја заборавивте Вашата лозинка?"},"sign_up":{"submit":"Креирај","title":"Креирај профил"},"unlock":{"submit":"Испрати инструкции","title":"Повторно испраќање на инструкции за отклучување на профил"},"username":{"title":"Корисничко име"}},"download":"Преземи во понудените формати:","dropdown_actions":{"button_label":"Активности"},"edit":"Измени","edit_model":"Измени %{model}","empty":"Празно","filters":{"buttons":{"clear":"Исчисти филтри","filter":"Пребарај"},"predicates":{"contains":"Содржи","ends_with":"Завршува сo","equals":"Е еднакво со","from":"Од","greater_than":"Е поголемо од","gteq_datetime":"Е поголемо или еднакво со","less_than":"Е помало од","lteq_datetime":"Е помало или еднакво со","starts_with":"Започнува со","to":"До"}},"has_many_delete":"Избриши","has_many_new":"Додај нов %{model}","has_many_remove":"Отстрани","index_list":{"block":"Листа","blog":"Блог","grid":"Грид","table":"Табела"},"logout":"Одјави се","main_content":"Ве замолуваме имплементирајте %{model}#main_content за да прикажете содржина.","move":"Премести","new_model":"Додај нов %{model}","next":"Следно","pagination":{"empty":"Нема пронајдени записи за %{model}","entry":{"one":"запис","other":"записи"},"multiple":"Прикажани %{model} <b>%{from}&nbsp;-&nbsp;%{to}</b> од вкупно <b>%{total}</b>","multiple_without_total":"Прикажани %{model} <b>%{from}&nbsp;-&nbsp;%{to}</b>","one":"Прикажан <b>1</b> %{model}","one_page":"Прикажани <b>сите %{n}</b> %{model}","per_page":"Прикази на записи по страна:"},"powered_by":"Овозможено од %{active_admin} %{version}","previous":"Претходно","search_status":{"current_filters":"Резултати врз основа на следниве филтри:","headline":"Пронајдени резултати:","no_current_filters":"Моментално нема филтри"},"sidebars":{"filters":"Филтри за пребарување","search_status":"Резултати од пребарување"},"status_tag":{"no":"Не","unset":"Не","yes":"Да"},"unsupported_browser":{"headline":"Ве замолуваме, имајте во предвид дека ActiveAdmin не нуди поддршка за Internet Explorer 8 верзијата или претходни верзии.","recommendation":"Ви порачуваме да го <a href=\"http://browsehappy.com/\"> ажурирате Вашиот пребарувач</a> за да си го подобрите пребарувањето.","turn_off_compatibility_view":"Доколку користите IE 9 или понова верзија, Ве замолуваме <a href=\"https://support.microsoft.com/en-us/help/17471\">да исклучите \"Compatibility View\"</a>."},"view":"Прегледај"},"activerecord":{"models":{"active_admin/comment":{"one":"Коментар","other":"Коментари"},"comment":{"one":"Коментар","other":"Коментари"}}}},"nb":{"active_admin":{"access_denied":{"message":"Du er ikke autorisert til å utføre denne handlingen."},"any":"Alle","batch_actions":{"action_label":"%{title} valgt","button_label":"Gruppehandlinger","delete_confirmation":"Er du sikker på at du vil slette disse %{plural_model}? Dette kan ikke reverseres.","labels":{"destroy":"Slett"},"selection_toggle_explanation":"(Toggle Selection)","succesfully_destroyed":{"one":"Slettet én %{model}","other":"Slettet %{count} %{plural_model}"}},"blank_slate":{"content":"Her er det ingen %{resource_name} enda.","link":"Opprett en"},"cancel":"Avbryt","comments":{"add":"Legg til kommentar","author":"Forfatter","author_missing":"Anonym","author_type":"Forfattertype","body":"Brødtekst","created_at":"Opprettet","delete":"Slett kommentar","delete_confirmation":"Er du sikker på at du ønsker å slette kommentaren?","errors":{"empty_text":"Kommentar ble ikke lagret, teksten var tom."},"no_comments_yet":"Ingen kommentarer ennå.","resource":"Ressurs","resource_type":"Ressurstype","title_content":"Kommentarer (%{count})"},"dashboard":"Oversikt","dashboard_welcome":{"call_to_action":"Rediger 'app/admin/dashboard.rb' for å legge til elementer i oversikten.","welcome":"Velkommen til Active Admin. Dette er standardoversiktssiden."},"delete":"Slett","delete_confirmation":"Er du sikker på at du vil slette denne?","delete_model":"Slett %{model}","details":"%{model} Detaljer","devise":{"change_password":{"submit":"Endre mitt passord","title":"Endre passordet"},"email":{"title":"E-post"},"links":{"forgot_your_password":"Glemt passord?","sign_in":"Logg inn","sign_in_with_omniauth_provider":"Logg på med %{provider}"},"login":{"remember_me":"Husk meg","submit":"Logg inn","title":"Innlogging"},"password":{"title":"Passord"},"resend_confirmation_instructions":{"submit":"Send bekreftelsesinformasjon på nytt","title":"Send bekreftelsesinformasjon på nytt"},"reset_password":{"submit":"Tilbakestille passordet mitt","title":"Glemt passord?"},"sign_up":{"submit":"Opprett","title":"Opprett brukerkonto"},"subdomain":{"title":"Subdomene"},"unlock":{"submit":"Send info om gjenoppretting på nytt","title":"Send info om gjenoppretting på nytt"},"username":{"title":"Brukernavn"}},"download":"Last ned:","dropdown_actions":{"button_label":"Handlinger"},"edit":"Rediger","edit_model":"Rediger %{model}","empty":"Tom","filters":{"buttons":{"clear":"Fjern filter","filter":"Filter"},"predicates":{"contains":"Inneholder","ends_with":"Slutter med","equals":"Er lik","from":"Fra","greater_than":"Større enn","gteq_datetime":"Større enn eller lik","less_than":"Mindre enn","lteq_datetime":"Mindre enn eller lik","starts_with":"Starter med","to":"Til"}},"has_many_delete":"Slett","has_many_new":"Legg til ny %{model}","has_many_remove":"Fjern","index_list":{"block":"Liste","blog":"Blogg","grid":"Gitter","table":"Tabell"},"logout":"Logg ut","main_content":"Vennligst implementer %{model}#main_content for å vise innhold.","new_model":"Ny %{model}","next":"Neste","pagination":{"empty":"Fant ingen %{model}","entry":{"one":"innslag","other":"innslag"},"multiple":"Viser %{model} <b>%{from}&nbsp;-&nbsp;%{to}</b> av <b>%{total}</b> totalt","multiple_without_total":"Viser %{model} <b>%{from}&nbsp;-&nbsp;%{to}</b>","one":"Viser <b>1</b> %{model}","one_page":"Viser <b>alle %{n}</b> %{model}"},"powered_by":"Powered by %{active_admin} %{version}","previous":"Forrige","search_status":{"current_filters":"Gjeldende filtre:","current_scope":"Søkeområde:","headline":"Søkestatus:","no_current_filters":"Ingen"},"sidebars":{"filters":"Filtere"},"status_tag":{"no":"Nei","unset":"Nei","yes":"Ja"},"view":"Vis"},"ckeditor":{"buttons":{"cancel":"Avbryt","delete":"Slett","next":"Neste","upload":"Last opp"},"confirm_delete":"Slette filen?","page_title":"CKEditor filbehandlingr"}},"nl":{"active_admin":{"access_denied":{"message":"U bent niet gemachtigd voor deze actie."},"any":"Alle","batch_actions":{"action_label":"%{title} geselecteerde","button_label":"Batch acties","default_confirmation":"Weet u zeker dat u dit wilt doen?","delete_confirmation":"Weet u zeker dat u deze %{plural_model} wilt verwijderen?","labels":{"destroy":"Verwijder"},"selection_toggle_explanation":"(Toggle selectie)","succesfully_destroyed":{"one":"1 %{model} verwijderd.","other":"%{count} %{plural_model} verwijderd."}},"blank_slate":{"content":"Er zijn geen %{resource_name} gevonden.","link":"Maak aan"},"cancel":"Annuleren","comments":{"add":"Voeg commentaar toe","author":"Auteur","author_missing":"Anoniem","author_type":"Auteur Type","body":"Tekst","created_at":"Aangemaakt op","delete":"Verwijder commentaar","delete_confirmation":"Weet u zeker dat u dit commentaar wilt verwijderen?","errors":{"empty_text":"De reactie is niet opgeslagen, de tekst was leeg."},"no_comments_yet":"Nog geen reacties.","resource":"Resource","resource_type":"Resource Type","title_content":"Reacties (%{count})"},"create_another":"Maak nog een %{model}","dashboard":"Dashboard","dashboard_welcome":{"call_to_action":"Pas uw eigen dashboard aan in het bestand 'app/admin/dashboard.rb'","welcome":"Welkom bij Active Admin. Dit is de standaard dashboard pagina"},"delete":"Verwijder","delete_confirmation":"Weet u zeker dat je dit item wilt verwijderen?","delete_model":"Verwijder %{model}","details":"%{model} details","devise":{"change_password":{"submit":"Mijn wachtwoord wijzigen","title":"Wijzig uw wachtwoord"},"email":{"title":"Email"},"links":{"forgot_your_password":"Wachtwoord vergeten?","resend_confirmation_instructions":"Bevestigingsinstructies opnieuw versturen","resend_unlock_instructions":"Ontgrendelinstructies opnieuw versturen","sign_in":"Meld u aan","sign_in_with_omniauth_provider":"Log in met %{provider}","sign_up":"Registreren"},"login":{"remember_me":"Onthoud mij","submit":"inloggen","title":"inloggen"},"password":{"title":"Wachtwoord"},"password_confirmation":{"title":"Bevestig password"},"resend_confirmation_instructions":{"submit":"Verstuur bevestigingsinstructies opnieuw","title":"Verstuur bevestigingsinstructies opnieuw"},"reset_password":{"submit":"Reset mijn wachtwoord vergeten","title":"Wachtwoord vergeten?"},"sign_up":{"submit":"Registreren","title":"Registreren"},"subdomain":{"title":"Subdomein"},"unlock":{"submit":"Verstuur ontgrendelinstructies opnieuw","title":"Verstuur ontgrendelinstructies opnieuw"},"username":{"title":"Gebruikersnaam"}},"download":"Download","dropdown_actions":{"button_label":"Acties"},"edit":"Wijzig","edit_model":"Wijzig %{model}","empty":"Leeg","filters":{"buttons":{"clear":"Maak Filters Ongedaan","filter":"Filter"},"predicates":{"contains":"Bevat","ends_with":"Eindigt op","equals":"Gelijk aan","from":"Van","greater_than":"Groter dan","gteq_datetime":"Groter of gelijk aan","less_than":"Kleiner dan","lteq_datetime":"Kleiner of gelijk aan","starts_with":"Begint met","to":"Tot"}},"has_many_delete":"Verwijderen","has_many_new":"Voeg nieuwe %{model} toe","has_many_remove":"Verwijderen","index_list":{"block":"Lijst","blog":"Blog","grid":"Rooster","table":"Tabel"},"logout":"Uitloggen","main_content":"Implementeer %{model}#main_content om de content weer te geven.","move":"Verplaats","new_model":"Nieuwe %{model}","next":"Volgende","pagination":{"empty":"Geen %{model} gevonden","entry":{"one":"entry","other":"entries"},"multiple":"Geeft %{model} <b>%{from}&nbsp;-&nbsp;%{to}</b> van de <b>%{total}</b> weer","multiple_without_total":"Geeft %{model} <b>%{from}&nbsp;-&nbsp;%{to}</b>","one":"Geeft <b>1</b> %{model} weer","one_page":"Geeft <b>%{n}</b> %{model} weer","per_page":"Per pagina: "},"powered_by":"Mogelijk gemaakt door %{active_admin} %{version}","previous":"Vorige","search_status":{"current_filters":"Huidige filters:","current_scope":"Scope:","headline":"Zoek status","no_current_filters":"Geen"},"sidebars":{"filters":"Filters","search_status":"Zoek status"},"status_tag":{"no":"Geen","unset":"Geen","yes":"Ja"},"unsupported_browser":{"headline":"Opgelet, ActiveAdmin bied geen support meer voor Internet Explorer 8 of lager","recommendation":"Wij raden aan om te upgraden naar de nieuwste <a href=\"http://windows.microsoft.com/ie\">Internet Explorer</a>, <a href=\"https://chrome.google.com/\">Google Chrome</a>, of <a href=\"https://mozilla.org/firefox/\">Firefox</a>.","turn_off_compatibility_view":"Als u IE 9 of nieuwer gebruikt, zorg ervoor dat u <a href=\"https://support.microsoft.com/nl-nl/help/17471\"> \"Compatibility View\" uit zet</a>."},"view":"Bekijk"},"ckeditor":{"buttons":{"cancel":"Cancel","delete":"Delete","next":"Next","upload":"Upload"},"confirm_delete":"Delete file?","page_title":"CKEditor Files Manager"},"ransack":{"all":"alle","and":"en","any":"enig","asc":"oplopend","attribute":"attribuut","combinator":"combinator","condition":"conditie","desc":"aflopend","or":"of","predicate":"eigenschap","predicates":{"blank":"is afwezig","cont":"bevat","cont_all":"bevat alle","cont_any":"bevat enig","does_not_match":"evenaart niet","does_not_match_all":"evenaart niet voor alle","does_not_match_any":"evenaart niet voor enig","end":"eindigt met","end_all":"eindigt met alle","end_any":"eindigt met enig","eq":"gelijk","eq_all":"gelijk alle","eq_any":"gelijk enig","false":"is niet waar","gt":"groter dan","gt_all":"groter dan alle","gt_any":"groter dan enig","gteq":"groter dan of gelijk aan","gteq_all":"groter dan of gelijk aan alle","gteq_any":"groter dan of gelijk aan enig","in":"in","in_all":"in alle","in_any":"in enig","lt":"kleiner dan","lt_all":"kleiner dan alle","lt_any":"kleiner dan enig","lteq":"kleiner dan of gelijk aan","lteq_all":"kleiner dan of gelijk aan alle","lteq_any":"kleiner dan of gelijk aan enig","matches":"evenaart","matches_all":"evenaart alle","matches_any":"evenaart enig","not_cont":"bevat niet","not_cont_all":"bevat niet alle","not_cont_any":"bevat niet enig","not_end":"eindigt niet met","not_end_all":"eindigt niet met alle","not_end_any":"eindigt niet met enig","not_eq":"niet gelijk aan","not_eq_all":"niet gelijk aan alle","not_eq_any":"niet gelijk aan enig","not_in":"niet in","not_in_all":"niet in alle","not_in_any":"niet in enig","not_null":"is niet null","not_start":"start niet met","not_start_all":"start niet met alle","not_start_any":"start niet met enig","null":"is null","present":"is aanwezig","start":"start met","start_all":"start met alle","start_any":"start met enig","true":"is waar"},"search":"zoeken","sort":"sorteren","value":"waarde"}},"pl":{"active_admin":{"access_denied":{"message":"Nie masz uprawnień wystarczających do wykonania tej akcji."},"any":"Jakikolwiek","batch_actions":{"action_label":"%{title} zaznaczone","button_label":"Akcje na partiach","default_confirmation":"Czy na pewno chcesz to zrobić?","delete_confirmation":"Czy na pewno chcesz usunąć te %{plural_model}?","labels":{"destroy":"Usuń"},"selection_toggle_explanation":"(Przełącz zaznaczenie)","succesfully_destroyed":{"few":"Poprawnie usunięto %{count} %{plural_model}","many":"Poprawnie usunięto %{count} %{plural_model}","one":"Poprawnie usunięto 1 %{model}","other":"Poprawnie usunięto %{count} %{plural_model}"}},"blank_slate":{"content":"Nie ma jeszcze zasobu %{resource_name}.","link":"Utwórz go"},"cancel":"Anuluj","comments":{"add":"Dodaj komentarz","author":"Autor","author_missing":"Anonim","author_type":"Typ autora","body":"Treść","created_at":"Utworzony","delete":"Usuń komentarz","delete_confirmation":"Czy na pewno chcesz usunąć ten komentarz?","errors":{"empty_text":"Komentarz nie został zapisany, zawartość była pusta."},"no_comments_yet":"Nie ma jeszcze komentarzy.","resource":"Zasób","resource_type":"Typ zasobu","title_content":"Komentarze (%{count})"},"create_another":"Utwórz kolejny %{model}","dashboard":"Pulpit","dashboard_welcome":{"call_to_action":"Aby dodać sekcje do pulpitu, sprawdź 'app/admin/dashboard.rb'","welcome":"Witaj w Active Adminie. To jest domyślny pulpit."},"delete":"Usuń","delete_confirmation":"Jesteś pewien, że chcesz to usunąć?","delete_model":"Usuń %{model}","details":"Szczegóły %{model}","devise":{"change_password":{"submit":"Zmień hasło","title":"Zmień hasło"},"email":{"title":"Email"},"links":{"forgot_your_password":"Nie pamiętasz hasła?","resend_confirmation_instructions":"Ponownie wyślij instrukcje aktywacji","resend_unlock_instructions":"Ponownie wyślij instrukcję odblokowania konta","sign_in":"Zaloguj się","sign_in_with_omniauth_provider":"Zaloguj się z %{provider}","sign_up":"Zarejestruj się"},"login":{"remember_me":"Zapamiętaj mnie","submit":"Zaloguj się","title":"Logowanie"},"password":{"title":"Hasło"},"password_confirmation":{"title":"Powtórz hasło"},"resend_confirmation_instructions":{"submit":"Ponownie wyślij instrukcje aktywacji","title":"Ponownie wyślij instrukcje aktywacji"},"reset_password":{"submit":"Zresetować hasło","title":"Nie pamiętasz hasła?"},"sign_up":{"submit":"Zarejestruj się","title":"Rejestracja"},"subdomain":{"title":"Subdomena"},"unlock":{"submit":"Ponownie wyślij instrukcję odblokowania konta","title":"Ponownie wyślij instrukcję odblokowania konta"},"username":{"title":"Nazwa użytkownika"}},"download":"Pobierz:","dropdown_actions":{"button_label":"Akcje"},"edit":"Edytuj","edit_model":"Edytuj %{model}","empty":"Pusty","filters":{"buttons":{"clear":"Wyczyść Filtry","filter":"Filtruj"},"predicates":{"contains":"Zawiera","ends_with":"Kończy się","equals":"Równe","from":"Od","greater_than":"Większe niż","gteq_datetime":"Większe lub równe","less_than":"Mniejsze niż","lteq_datetime":"Mniejsze lub równe","starts_with":"Zaczyna się","to":"Do"}},"has_many_delete":"Usuń","has_many_new":"Dodaj nowy %{model}","has_many_remove":"Usuń","index_list":{"block":"Lista","blog":"Blog","grid":"Siatka","table":"Tabela"},"logout":"Wyloguj","main_content":"Zaimplementuj %{model}#main_content aby wyświetlić treść.","move":"Przenieś","new_model":"Nowy %{model}","next":"Następna","pagination":{"empty":"Nie znaleziono %{model}","entry":{"one":null,"other":null},"multiple":"Wyświetlanie %{model} <b>%{from}&nbsp;-&nbsp;%{to}</b> z <b>%{total}</b>","multiple_without_total":"Wyświetlanie %{model} <b>%{from}&nbsp;-&nbsp;%{to}</b>","one":"Wyświetlanie <b>1</b> %{model}","one_page":"Wyświetlanie <b>wszystkich %{n}</b> %{model}","per_page":"Na stronę: "},"powered_by":"Powered by %{active_admin} %{version}","previous":"Poprzednia","scopes":{"all":"Wszystko"},"search_status":{"current_filters":"Aktywne filtry:","current_scope":"Aktywny zakres:","headline":"Status wyszukiwania:","no_current_filters":"Brak"},"sidebars":{"filters":"Filtry","search_status":"Status wyszukiwania"},"status_tag":{"no":"Nie","unset":"Nie","yes":"Tak"},"unsupported_browser":{"headline":"ActiveAdmin nie wspiera przeglądarki Internet Explorer w wersjach 8 i niższych.","recommendation":"Polecamy <a href=\"http://browsehappy.com/\">aktualizację przeglądarki</a>.","turn_off_compatibility_view":"Jeśli używasz Internet Explorera w wersji 9 lub nowszej, upewnij się, że <a href=\"https://support.microsoft.com/en-us/help/17471\">\"tryb zgodności\" został wyłączony.</a>."},"view":"Podgląd"},"activerecord":{"attributes":{"active_admin/comment":{"author_type":"Typ autora","body":"Treść","created_at":"Utworzony","namespace":"Namespace","resource_type":"Typ zasobu","updated_at":"Zaktualizowany"}},"models":{"active_admin/comment":{"few":"Komentarze","many":"Komentarzy","one":"Komentarz","other":"Komentarze"},"comment":{"few":"Komentarze","many":"Komentarzy","one":"Komentarz","other":"Komentarze"}}},"ckeditor":{"buttons":{"cancel":"Anuluj","delete":"Skasuj","next":"Next","upload":"Wyślij"},"confirm_delete":"Usunąć plik?","page_title":"CKEditor Menadżer Plików"},"formtastic":{"create":"Utwórz %{model}","update":"Aktualizuj %{model}"}},"pt":{"formtastic":{"cancel":"Cancelar %{model}","create":"Criar %{model}","no":"Não","required":"obrigatório","reset":"Resetar %{model}","submit":"Salvar %{model}","update":"Atualizar %{model}","yes":"Sim"}},"pt-BR":{"active_admin":{"access_denied":{"message":"Você não tem permissão para realizar o solicitado"},"any":"Qualquer","batch_actions":{"action_label":"%{title} Selecionado","button_label":"Ações em lote","default_confirmation":"Tem certeza que quer fazer isso?","delete_confirmation":"Tem certeza que deseja excluir estes %{plural_model}?","labels":{"destroy":"Excluir"},"selection_toggle_explanation":"(Alternar Seleção)","succesfully_destroyed":{"one":"Excluiu com sucesso 1 %{model}","other":"Excluiu com sucesso %{count} %{plural_model}"}},"blank_slate":{"content":"Não existem %{resource_name} ainda.","link":"Novo"},"cancel":"Cancelar","comments":{"add":"Adicionar Comentário","author":"Autor","author_missing":"Anônimo","author_type":"Tipo de Autor","body":"Conteúdo","created_at":"Criado em","delete":"Deletar comentário","delete_confirmation":"Tem certeza que deseja excluir este comentário?","errors":{"empty_text":"O comentário não foi salvo porque o texto estava vazio."},"no_comments_yet":"Nenhum comentário.","resource":"Objeto","resource_type":"Tipo de Objeto","title_content":"Comentários: %{count}"},"create_another":"Criar outro %{model}","dashboard":"Painel Administrativo","dashboard_welcome":{"call_to_action":"Para adicionar seções ao painel, verifique 'app/admin/dashboard.rb'","welcome":"Bem vindo ao Active Admin. Esta é a página de painéis padrão."},"delete":"Remover","delete_confirmation":"Você tem certeza que deseja remover este item?","delete_model":"Remover %{model}","details":"Detalhes do(a) %{model}","devise":{"change_password":{"submit":"Troque minha senha","title":"Troque sua senha"},"email":{"title":"E-mail"},"links":{"forgot_your_password":"Esqueceu sua senha?","resend_confirmation_instructions":"Reenviar instruções de confirmação","resend_unlock_instructions":"Reenviar instruções de desbloqueio","sign_in":"Entrar","sign_in_with_omniauth_provider":"Entre com o %{provider}","sign_up":"Criar conta"},"login":{"remember_me":"Lembrar da senha","submit":"Entrar","title":"Conta"},"password":{"title":"Senha"},"password_confirmation":{"title":"Confirmação de senha"},"resend_confirmation_instructions":{"submit":"Reenviar instruções de confirmação","title":"Reenviar instruções de confirmação"},"reset_password":{"submit":"Reinicie minha senha","title":"Esqueceu sua senha?"},"sign_up":{"submit":"Continuar","title":"Cadastre-se"},"subdomain":{"title":"Subdomínio"},"unlock":{"submit":"Reenviar instruções de desbloqueio","title":"Reenviar instruções de desbloqueio"},"username":{"title":"Nome de Usuário"}},"download":"Baixar:","dropdown_actions":{"button_label":"Ações"},"edit":"Editar","edit_model":"Editar %{model}","empty":"Vazio","filters":{"buttons":{"clear":"Limpar Filtros","filter":"Filtrar"},"predicates":{"contains":"Contém","ends_with":"Termina com","equals":"Igual A","from":"A partir de","greater_than":"Maior Que","gteq_datetime":"Maior ou igual a","less_than":"Menor Que","lteq_datetime":"Menor ou igual a","starts_with":"Começa com","to":"Até"}},"has_many_delete":"Remover","has_many_new":"Adicionar Novo(a) %{model}","has_many_remove":"Remover","index_list":{"block":"Lista","blog":"Blog","grid":"Grid","table":"Tabela"},"logout":"Sair","main_content":"Por favor implemente %{model}#main_content para exibir conteúdo.","new_model":"Novo(a) %{model}","next":"Próximo","pagination":{"empty":"Nenhum(a) %{model} encontrado(a)","entry":{"one":"registro","other":"registros"},"multiple":"Exibindo %{model} <b>%{from}&nbsp;-&nbsp;%{to}</b> de um total de <b>%{total}</b>","multiple_without_total":"Exibindo %{model} <b>%{from}&nbsp;-&nbsp;%{to}</b>","one":"Exibindo <b>1</b> %{model}","one_page":"Exibindo <b>todos(as) os(as) %{n}</b> %{model}","per_page":"Por página: "},"powered_by":"Powered by %{active_admin} %{version}","previous":"Anterior","search_status":{"current_filters":"Filtros escolhidos:","current_scope":"Em:","headline":"Buscou:","no_current_filters":"Nenhum"},"sidebars":{"filters":"Filtros","search_status":"Buscou"},"status_tag":{"no":"Não","unset":"Não","yes":"Sim"},"unsupported_browser":{"headline":"O ActiveAdmin não oferece suporte ao Internet Explorer versão 8 ou inferior.","recommendation":"Nós recomendamos atualizar para a última versão do <a href=\"http://windows.microsoft.com/ie\">Internet Explorer</a>, <a href=\"https://chrome.google.com/\">Google Chrome</a>, ou <a href=\"https://mozilla.org/firefox/\">Firefox</a>.","turn_off_compatibility_view":"Se você está usando o IE 9 ou superior, <a href=\"https://support.microsoft.com/pt-br/help/17471\">desligue o \"Modo de Exibição de Compatibilidade\"</a>."},"view":"Visualizar"},"ckeditor":{"buttons":{"cancel":"Cancelar","delete":"Apagar","next":"Next","upload":"Enviar"},"confirm_delete":"Apagar arquivo?","page_title":"Gerenciador de arquivos do CKEditor"},"formtastic":{"cancel":"Cancelar %{model}","create":"Criar %{model}","no":"Não","required":"obrigatório","reset":"Voltar %{model}","submit":"Salvar %{model}","update":"Atualizar %{model}","yes":"Sim"},"ransack":{"all":"todos","and":"e","any":"algum","asc":"ascendente","attribute":"atributo","combinator":"combinador","condition":"condição","desc":"descendente","or":"ou","predicate":"predicado","predicates":{"blank":"está em branco","cont":"contém","cont_all":"contém todos","cont_any":"contém algum","does_not_match":"não corresponde","does_not_match_all":"não corresponde a todos","does_not_match_any":"não corresponde a algum","end":"termina com","end_all":"termina com todos","end_any":"termina com algum","eq":"igual","eq_all":"igual a todos","eq_any":"igual a algum","false":"é falso","gt":"maior que","gt_all":"maior que todos","gt_any":"maior que algum","gteq":"maior que ou igual a","gteq_all":"maior que ou igual a todos","gteq_any":"maior que ou igual a algum","in":"em","in_all":"em todos","in_any":"em algum","lt":"menor que","lt_all":"menor que todos","lt_any":"menor que algum","lteq":"menor ou igual a","lteq_all":"menor ou igual a todos","lteq_any":"menor ou igual a algum","matches":"corresponde","matches_all":"corresponde a todos","matches_any":"corresponde a algum","not_cont":"não contém","not_cont_all":"não contém todos","not_cont_any":"não contém algum","not_end":"não termina com","not_end_all":"não termina com todos","not_end_any":"não termina com algum","not_eq":"não é igual a","not_eq_all":"não é igual a todos","not_eq_any":"não é igual a algum","not_in":"não em","not_in_all":"não em todos","not_in_any":"não em algum","not_null":"não é nulo","not_start":"não começa com","not_start_all":"não começa com algum","not_start_any":"não começa com algum","null":"é nulo","present":"está presente","start":"começa com","start_all":"começa com todos","start_any":"começa com algum","true":"é verdadeiro"},"search":"pesquisar","sort":"classificar","value":"valor"}},"pt-PT":{"active_admin":{"any":"Qualquer","batch_actions":{"action_label":"%{title} Selecionado","button_label":"Ações em quantidade","default_confirmation":"Tem a certeza que quer fazer isso?","delete_confirmation":"Tem a certeza de que deseja excluir estes %{plural_model}?","labels":{"destroy":"Excluir"},"selection_toggle_explanation":"(Alternar Seleção)","succesfully_destroyed":{"one":"Excluiu com sucesso 1 %{model}","other":"Excluiu com sucesso %{count} %{plural_model}"}},"blank_slate":{"content":"Ainda não existem %{resource_name}.","link":"Novo"},"cancel":"Cancelar","comments":{"add":"Adicionar Comentário","author":"Autor","body":"Conteúdo","errors":{"empty_text":"O comentário não foi guardado porque o texto estava vazio."},"no_comments_yet":"Nenhum comentário.","resource":"Objeto","title_content":"Comentários: %{count}"},"dashboard":"Painel de Administração","dashboard_welcome":{"call_to_action":"Se pretende adicionar seções ao painel, consulte 'app/admin/dashboard.rb'","welcome":"Bem-vindo ao Active Admin. Esta é a página padrão."},"delete":"Remover","delete_confirmation":"Não tem a certeza de que deseja remover este ítem?","delete_model":"Remover %{model}","details":"Detalhes do(a) %{model}","devise":{"change_password":{"submit":"Trocar a minha senha","title":"Troque a sua senha"},"links":{"forgot_your_password":"Esqueceu-se da sua senha?","sign_in":"Entrar","sign_in_with_omniauth_provider":"Entre com o %{provider}"},"login":{"remember_me":"Lembrar-me","submit":"Entrar","title":"Conta"},"reset_password":{"submit":"Reiniciar a minha senha","title":"Esqueceu-de da sua senha?"}},"download":"Baixar:","dropdown_actions":{"button_label":"Ações"},"edit":"Editar","edit_model":"Editar %{model}","empty":"Vazio","filters":{"buttons":{"clear":"Limpar Filtros","filter":"Filtrar"},"predicates":{"contains":"Contém","ends_with":"Termina com","equals":"Igual A","greater_than":"Maior Que","less_than":"Menor Que","starts_with":"Começa com"}},"has_many_delete":"Remover","has_many_new":"Adicionar Novo(a) %{model}","has_many_remove":"Remover","logout":"Sair","main_content":"Por favor implemente %{model}#main_content para mostrar o conteúdo.","new_model":"Novo(a) %{model}","next":"Próximo","pagination":{"empty":"Nenhum(a) %{model} encontrado(a)","entry":{"one":"registro","other":"registros"},"multiple":"Mostrando %{model} <b>%{from}&nbsp;-&nbsp;%{to}</b> de um total de <b>%{total}</b>","multiple_without_total":"Mostrando %{model} <b>%{from}&nbsp;-&nbsp;%{to}</b>","one":"Mostrando <b>1</b> %{model}","one_page":"Mostrando <b>todos(as) os(as) %{n}</b> %{model}"},"powered_by":"Powered by %{active_admin} %{version}","previous":"Anterior","sidebars":{"filters":"Filtros"},"status_tag":{"no":"Não","unset":"Não","yes":"Sim"},"view":"Visualizar"},"ckeditor":{"buttons":{"cancel":"Cancelar","delete":"Apagar","next":"Next","upload":"Enviar"},"confirm_delete":"Apagar arquivo?","page_title":"Gestor de arquivos do CKEditor"}},"ro":{"active_admin":{"any":"Oricare","batch_actions":{"action_label":"%{title} Selectat","button_label":"Grupare Actiuni","default_confirmation":"Sunteţi sigur că doriţi să faceţi acest lucru?","delete_confirmation":"Sunteţi sigur că doriţi să stergeţi aceste %{plural_model}?","labels":{"destroy":"Sterge"},"selection_toggle_explanation":"(Modifica Selectia)","succesfully_destroyed":{"few":"%{count} %{plural_model} sterse","one":"1 %{model} sters","other":"%{count} %{plural_model} sterse"}},"blank_slate":{"content":"Momentan nu exista %{resource_name}.","link":"Creati un"},"cancel":"Renuntati","comments":{"add":"Adaugati comentariu","author":"Autor","body":"Text","errors":{"empty_text":"Comentariul nu a fost salvat, textul lipseste."},"no_comments_yet":"Nu exista comentarii.","resource":"Resursa","title_content":"Comentarii (%{count})"},"dashboard":"Pagina Principala","dashboard_welcome":{"call_to_action":"Pentru a adauga sectiuni, vedeti 'app/admin/dashboard.rb'","welcome":"Bine ati venit pe Active Admin. Aceasta este pagina principala."},"delete":"Stergeti","delete_confirmation":"Sigur vreti sa stergeti?","delete_model":"Stergeti %{model}","details":"Detalii %{model}","devise":{"change_password":{"submit":"Schimbă parola","title":"Schimbați parola"},"links":{"forgot_your_password":"Ați uitat parola?","sign_in":"Autentificare","sign_in_with_omniauth_provider":"Conectați-vă cu %{provider}"},"login":{"remember_me":"Tine-ma minte","submit":"Autentificare","title":"Autentificare"},"reset_password":{"submit":"Reseta parola","title":"Ați uitat parola?"},"unlock":{"submit":"Retrimite instrucțiunile de deblocare","title":"Retrimite instrucțiunile de deblocare"}},"download":"Descarcati:","dropdown_actions":{"button_label":"Actiuni"},"edit":"Modificati","edit_model":"Modificati %{model}","empty":"Gol","filters":{"buttons":{"clear":"Stergeti filtrele","filter":"Cautati"},"predicates":{"contains":"Conține","ends_with":"se termină cu","equals":"Egal Cu","greater_than":"Mai Mare Decat","less_than":"Mai Mic Decat","starts_with":"începe cu"}},"has_many_delete":"Stergeti","has_many_new":"Adaugati un nou %{model}","has_many_remove":"Scoate","logout":"Iesire","main_content":"Va rugam sa implementati %{model}#main_content pentru a afisa continut.","new_model":"Un nou %{model}","next":"Inainte","pagination":{"empty":"Nu am gasit nici un %{model}","entry":{"one":"inregistrare","other":"inregistrari"},"multiple":"Sunt afisate <b>%{from}&nbsp;-&nbsp;%{to}</b> din <b>%{total}</b> inregistrari","multiple_without_total":"Sunt afisate <b>%{from}&nbsp;-&nbsp;%{to}</b>","one":"Afisare <b>1</b> %{model}","one_page":"Sunt afisate <b>toate %{n}</b> inregistrarile"},"powered_by":"Powered by %{active_admin} %{version}","previous":"Inapoi","sidebars":{"filters":"Filtre"},"status_tag":{"no":"Nu","unset":"Nu","yes":"Da"},"view":"Vizualizati"},"ransack":{"all":"toate","and":"și","any":"oricare","asc":"crescător","attribute":"atribut","combinator":"combinator","condition":"condiție","desc":"descrescător","or":"sau","predicate":"predicat","predicates":{"blank":"este gol","cont":"conține","cont_all":"conține toate","cont_any":"conține unul din","does_not_match":"nu corespunde","does_not_match_all":"nu corespunde cu toate","does_not_match_any":"nu corespunde cu nici un","end":"se termină cu","end_all":"se termină cu toate","end_any":"se termină cu unul din","eq":"egal cu","eq_all":"egal cu toate","eq_any":"egal cu unul din","false":"este fals","gt":"mai mare de","gt_all":"mai mare decât toate","gt_any":"mai mare decât cel puțin unul din","gteq":"mai mare sau egal decât","gteq_all":"mai mare sau egal decât toate","gteq_any":"mai mare sau egal decât cel puțin unul din","in":"inclus în","in_all":"inclus în toate","in_any":"inclus într-unul din","lt":"mai mic de","lt_all":"mai mic decât toate","lt_any":"mai mic decât cel puțin unul din","lteq":"mai mic sau egal decât","lteq_all":"mai mic sau egal decât toate","lteq_any":"mai mic sau egal decât cel puțin unul din","matches":"corespunde","matches_all":"corespunde cu toate","matches_any":"corespunde cu unul din","not_cont":"nu conține","not_cont_all":"nu conține toate","not_cont_any":"nu conține unul din","not_end":"nu se termină cu","not_end_all":"nu se termină cu toate","not_end_any":"nu se termină cu unul din","not_eq":"diferit de","not_eq_all":"nu este egal cu toate","not_eq_any":"diferit de toate","not_in":"nu este inclus în","not_in_all":"nu este inclus în toate","not_in_any":"nu este inclus într-unul din","not_null":"nu este nul","not_start":"nu începe","not_start_all":"nu începe cu toate","not_start_any":"nu începe cu unul din","null":"este nul","present":"este prezent","start":"începe cu","start_all":"începe cu toate","start_any":"începe cu unul din","true":"este adevărat"},"search":"caută","sort":"sortează","value":"valoare"}},"ru":{"active_admin":{"access_denied":{"message":"Вы не авторизованы для выполнения данного действия."},"any":"Любой","batch_actions":{"action_label":"%{title} выбранное","button_label":"Групповые операции","default_confirmation":"Вы уверены, что вы хотите это сделать?","delete_confirmation":"Вы уверены, что хотите удалить %{plural_model}?","labels":{"destroy":"Удалить"},"selection_toggle_explanation":"(Отметить всё / Снять выделение)","succesfully_destroyed":{"few":"Успешно удалено: %{count} %{plural_model}","many":"Успешно удалено: %{count} %{plural_model}","one":"Успешно удалено: 1 %{model}","other":"Успешно удалено: %{count} %{plural_model}"}},"blank_slate":{"content":"Пока нет %{resource_name}.","link":"Создать"},"cancel":"Отмена","comments":{"add":"Добавить Комментарий","author":"Автор","author_missing":"Аноним","author_type":"Тип автора","body":"Текст","created_at":"Дата создания","delete":"Удалить Комментарий","delete_confirmation":"Вы уверены, что хотите удалить этот комментарий?","errors":{"empty_text":"Комментарий не сохранен, текст не должен быть пустым."},"no_comments_yet":"Пока нет комментариев.","resource":"Ресурс","resource_type":"Тип ресурса","title_content":"Комментарии (%{count})"},"dashboard":"Панель управления","dashboard_welcome":{"call_to_action":"Чтобы добавить сюда что-нибудь загляните в 'app/admin/dashboard.rb'","welcome":"Добро пожаловать в Active Admin. Это стандартная страница управления сайтом."},"delete":"Удалить","delete_confirmation":"Вы уверены, что хотите удалить это?","delete_model":"Удалить %{model}","details":"%{model} подробнее","devise":{"change_password":{"submit":"Изменение пароля","title":"Изменение пароля"},"email":{"title":"Эл. почта"},"links":{"forgot_your_password":"Забыли пароль?","resend_confirmation_instructions":"Повторная отправка инструкций подтверждения","resend_unlock_instructions":"Повторная отправка инструкций разблокировки","sign_in":"Войти","sign_in_with_omniauth_provider":"Войти с помощью %{provider}","sign_up":"Зарегистрироваться"},"login":{"remember_me":"Запомнить меня","submit":"Войти","title":"Войти"},"password":{"title":"Пароль"},"resend_confirmation_instructions":{"submit":"Выслать повторно письмо с активацией","title":"Выслать повторно письмо с активацией"},"reset_password":{"submit":"Сбросить пароль","title":"Забыли пароль?"},"sign_up":{"submit":"Зарегистрироваться","title":"Зарегистрироваться"},"subdomain":{"title":"Поддомен"},"unlock":{"submit":"Повторно отправить инструкции по разблокировке","title":"Повторно отправить инструкции по разблокировке"},"username":{"title":"Имя пользователя"}},"download":"Загрузка:","dropdown_actions":{"button_label":"Oперации"},"edit":"Изменить","edit_model":"Изменить %{model}","empty":"Пусто","filters":{"buttons":{"clear":"Очистить","filter":"Фильтровать"},"predicates":{"contains":"Содержит","ends_with":"Заканчивается","equals":"Равно","from":"От","greater_than":"больше","less_than":"меньше","starts_with":"Начинается с","to":"До"}},"has_many_delete":"Удалить","has_many_new":"Добавить %{model}","has_many_remove":"Убрать","index_list":{"block":"Список","blog":"Блог","grid":"Сетка","table":"Таблица"},"logout":"Выйти","main_content":"Создайте %{model}#main_content для отображения содержимого.","new_model":"Создать %{model}","next":"След.","pagination":{"empty":"%{model} не найдено","entry":{"few":"записи","many":"записей","one":"запись","other":"записей"},"multiple":"Результат: %{model} <b>%{from}&nbsp;-&nbsp;%{to}</b> из <b>%{total}</b>","multiple_without_total":"Результат: %{model} <b>%{from}&nbsp;-&nbsp;%{to}</b>","one":"Результат: <b>1</b> %{model}","one_page":"Результат: <b>%{n}</b> %{model}"},"powered_by":"Работает на %{active_admin} %{version}","previous":"Пред.","search_status":{"current_filters":"Текущий фильтр:","current_scope":"Область:","headline":"Статус поиска:","no_current_filters":"Ни один"},"sidebars":{"filters":"Фильтры","search_status":"Статус поиска"},"status_tag":{"no":"Нет","unset":"Нет","yes":"Да"},"unsupported_browser":{"headline":"Пожалуйста, обратите внимание, что Active Admin больше не поддерживает старые версии Internet Explorer начиная с версии IE 8","recommendation":"Мы рекомендуем обновить версию вашего браузера (<a href=\"http://windows.microsoft.com/ie\">Internet Explorer</a>, <a href=\"https://chrome.google.com/\">Google Chrome</a>, или <a href=\"https://mozilla.org/firefox/\">Firefox</a>).","turn_off_compatibility_view":"Если вы используете IE 9 или новее, убедитесь, что <a href=\"https://support.microsoft.com/ru-ru/help/17471\">вы выключили опцию \"Просмотр в режиме совместимости\"</a>."},"view":"Открыть"},"ckeditor":{"buttons":{"cancel":"Отмена","delete":"Удалить","next":"Показать еще","upload":"Загрузить"},"confirm_delete":"Удалить файл?","page_title":"CKEditor Загрузка файлов"},"ransack":{"all":"все","and":"и","any":"любое","asc":"по возрастанию","attribute":"аттрибут","combinator":"combinator","condition":"условие","desc":"по убыванию","or":"или","predicate":"predicate","predicates":{"blank":"пусто","cont":"содержит","cont_all":"содержит все","cont_any":"содержит любое","does_not_match":"не совпадение","does_not_match_all":"не совпадение всем","does_not_match_any":"не совпадение любому","end":"кончается с","end_all":"кончается со всего","end_any":"кончается с любого","eq":"равный","eq_all":"равный всем","eq_any":"равный любому","false":"не верно","gt":"больше чем","gt_all":"больше чем все","gt_any":"больше чем любое","gteq":"больше чем или равен","gteq_all":"больше чем или равен всем","gteq_any":"больше чем или равен любому","in":"в","in_all":"во всех","in_any":"в любом из","lt":"меньше чем","lt_all":"меньше чем все","lt_any":"меньше чем любое","lteq":"меньше чем или равен","lteq_all":"меньше чем или равен всем","lteq_any":"меньше чем или равен любому","matches":"совпадение","matches_all":"совпадение всем","matches_any":"совпадение любому","not_cont":"не содержит","not_cont_all":"не содержит все","not_cont_any":"не содержит любое","not_end":"не кончается с","not_end_all":"не кончается со всего","not_end_any":"не кончается с любого","not_eq":"не равный любому","not_eq_all":"не равный всем","not_eq_any":"не равный любому","not_in":"нет в","not_in_all":"нет во всех","not_in_any":"не в каком из","not_null":"не нулевой","not_start":"не начинается с","not_start_all":"не начинается со всего","not_start_any":"не начинается с любого","null":"нулевой","present":"настоящее","start":"начинается с","start_all":"начинается с всего","start_any":"начинается с любого","true":"верно"},"search":"Поиск","sort":"сортировка","value":"значение"}},"sk":{"active_admin":{"access_denied":{"message":"Nemáte oprávnenie k vykonaniu tejto akcie."},"any":"Akákoľvek","batch_actions":{"action_label":"%{title}","button_label":"Hromadné akcie","default_confirmation":"Ste si istí, že to chcete spraviť?","delete_confirmation":"Ste si istí, že chcete zmazať tieto %{plural_model}?","labels":{"destroy":"Vymazať"},"selection_toggle_explanation":"(Zmeniť výber)","succesfully_destroyed":{"few":"Úspešne zmazané %{count} %{plural_model}","one":"Úspešne zmazaný %{model}","other":"Úspešne zmazaných %{count} %{plural_model}","zero":"Nebol zmazaný žiaden %{model}"}},"blank_slate":{"content":"Zatiaľ tu nie je žiadny obsah.","link":"Vytvoriť"},"cancel":"Zrušiť","comments":{"add":"Pridať komentár","author":"Autor","author_missing":"Anonymný","author_type":"Typ autora","body":"Telo","created_at":"Vytvorený","delete":"Zmazať komentár","delete_confirmation":"Naozaj chcete zmazať tento komentár?","errors":{"empty_text":"Komentár nebol uložený, je prázdny."},"no_comments_yet":"Žiadny komentár","resource":"Zdroj","resource_type":"Typ zdroja","title_content":"Komentáre administrátorov (%{count})"},"create_another":"Vytvoriť ďalší %{model}","dashboard":"Úvod","dashboard_welcome":{"call_to_action":"Pre pridanie sekcie na nástenku se pozrite do súboru 'app/admin/dashboard.rb'","welcome":"Vitajte v Active Admin. Toto je nástenka."},"delete":"Zmazať","delete_confirmation":"Ste si istí, že chcete túto položku zmazať?","delete_model":"Zmazať","details":"Detaily","devise":{"change_password":{"submit":"Zmeniť svoje heslo","title":"Zmeniť heslo"},"email":{"title":"Email"},"links":{"forgot_your_password":"Zabudli ste heslo?","resend_confirmation_instructions":"Preposlať potvrdzovacie inštrukcie","resend_unlock_instructions":"Poslať znovu inštrukcie na odomknutie účtu","sign_in":"Prihlásiť sa","sign_in_with_omniauth_provider":"Prihlásiť sa cez %{provider}","sign_up":"Registrovať sa"},"login":{"remember_me":"Zapamätať si ma","submit":"Prihlásiť","title":"Prihlásenie"},"password":{"title":"Heslo"},"password_confirmation":{"title":"Potvrdenie hesla"},"resend_confirmation_instructions":{"submit":"Preposlať potvrdzovacie inštrukcie","title":"Preposlanie potvrdzovacie inštrukcie"},"reset_password":{"submit":"Obnoviť heslo","title":"Zabudli ste heslo?"},"sign_up":{"submit":"Registrovať","title":"Registrácia"},"subdomain":{"title":"Subdoména"},"unlock":{"submit":"Zaslať inštrukcií k odomknutiu účtu","title":"Zaslanie inštrukcií k odomknutiu účtu"},"username":{"title":"Užívateľské meno"}},"download":"Stiahnúť:","dropdown_actions":{"button_label":"Akcie"},"edit":"Upraviť","edit_model":"Upraviť","empty":"Prázdne","filters":{"buttons":{"clear":"Vyčistiť filtre","filter":"Filtrovať"},"predicates":{"contains":"Obsahuje","ends_with":"Končí na","equals":"Je presne","from":"Od","greater_than":"Väčší ako","gteq_datetime":"Od","less_than":"Menší ako","lteq_datetime":"Do","starts_with":"Začína na","to":"Do"}},"has_many_delete":"Zmazať","has_many_new":"Pridať nový","has_many_remove":"Odstrániť","index_list":{"block":"Zoznam","blog":"Blog","grid":"Tabuľka","table":"Tabuľka"},"logout":"Odhlásiť","main_content":"Implementujte prosím %{model}#main_content pre zobrazenie obsahu.","move":"Presunúť","new_model":"Vytvoriť","next":"Nasledujúce","pagination":{"empty":"Nenájdený.","entry":{"few":"položky","one":"položka","other":"položky"},"multiple":"<b>%{from}&nbsp;-&nbsp;%{to}</b> z <b>%{total}</b>","multiple_without_total":"<b>%{from}&nbsp;-&nbsp;%{to}</b>","one":"Zobrazená  <b>1</b> položka","one_page":"Počet zobrazených položiek %{n}"},"powered_by":"%{active_admin} %{version}","previous":"Predchádzajúce","scopes":{"all":"Všetko"},"search_status":{"current_filters":"Filtre:","current_scope":"Scope:","headline":"Stav vyhľadávania:","no_current_filters":"Žiadne"},"sidebars":{"filters":"Filtre","search_status":"Stav vyhľadávania"},"status_tag":{"no":"Nie","unset":"Nie","yes":"Áno"},"unsupported_browser":{"headline":"ActiveAdmin nepodporuje Internet Explorer vo verzii <= 8.","recommendation":"Odporúčame <a href=\"http://browsehappy.com/\">aktualizovať Váš prehliadač</a>.","turn_off_compatibility_view":"Ak používate Internet Explorer vo verzii >= 9, uistite sa, že <a href=\"https://support.microsoft.com/en-us/help/17471\">\"režim kompatibility\" je vypnutý</a>"},"view":"Zobraziť"},"activerecord":{"attributes":{"active_admin/comment":{"author_type":"Typ autora","body":"Telo","created_at":"Vytvorený","namespace":"Namespace","resource_type":"Typ komentovanej položky","updated_at":"Upravený"}},"models":{"active_admin/comment":{"few":"Komentáre","many":"Komentárov","one":"Komentár","other":"Komentáre"},"comment":{"few":"Komentáre","many":"Komentárov","one":"Komentár","other":"Komentáre"}}},"ransack":{"all":"každý","and":"a","any":"akýkoľvek","asc":"vzostupne","attribute":"atribút","combinator":"kombinátor","condition":"podmienka","desc":"zostupne","or":"alebo","predicate":"predikát","predicates":{"blank":"je prázdne","cont":"obsahuje","cont_all":"obsahuje všetky","cont_any":"obsahuje akúkoľvek","does_not_match":"nezodpovedá","does_not_match_all":"nezodpovedá všetkým","does_not_match_any":"nezodpovedá akémukoľvek","end":"končí s","end_all":"končí so všetkými","end_any":"končí s akoukoľvek","eq":"sa rovná","eq_all":"sa rovná všetkým","eq_any":"sa rovná akémukoľvek","false":"nie je pravdivé","gt":"väčší ako","gt_all":"väčší ako všetky","gt_any":"väčší ako akýkoľvek","gteq":"väčší alebo rovný","gteq_all":"väčší alebo rovný všetkým","gteq_any":"väčší alebo rovný akémukoľvek","in":"v","in_all":"vo všetkých","in_any":"v akejkoľvek","lt":"menší ako","lt_all":"menší ako všetky","lt_any":"menší ako akýkoľvek","lteq":"menší alebo rovný","lteq_all":"menší alebo rovný všetkým","lteq_any":"menší alebo rovný akémukoľvek","matches":"zodpovedá","matches_all":"zodpovedá všetkým","matches_any":"zodpovedá akémukoľvek","not_cont":"neobsahuje","not_cont_all":"neobsahuje všetky","not_cont_any":"neobsahuje akúkoľvek","not_end":"nekončí s","not_end_all":"nekončí so všetkými","not_end_any":"nekončí s akoukoľvek","not_eq":"sa nerovná","not_eq_all":"sa nerovná všetkým","not_eq_any":"sa nerovná akémukoľvek","not_in":"nie je v","not_in_all":"nie je vo všetkých","not_in_any":"nie je v akejkoľvek","not_null":"nie je null","not_start":"nezačíná s","not_start_all":"nezačíná so všetkými","not_start_any":"nezačíná s akoukoľvek","null":"je null","present":"je vyplnené","start":"začína na","start_all":"začína so všetkými","start_any":"začína s akoukoľvek","true":"je pravdivé"},"search":"vyhľadávanie","sort":"poradie","value":"hodnota"}},"sv-SE":{"active_admin":{"access_denied":{"message":"Du har inte rättighet att utföra denna åtgärd."},"any":"Någon","batch_actions":{"action_label":"%{title} Markerad","button_label":"Batch behandling","default_confirmation":"Är du säker på att du vill göra detta?","delete_confirmation":"Är du säker på att du vill radera dessa %{plural_model}?","labels":{"destroy":"Radera"},"selection_toggle_explanation":"(Toggle Selection)","succesfully_destroyed":{"one":"Lyckades radera 1 %{model}","other":"Lyckades radera %{count} %{plural_model}"}},"blank_slate":{"content":"Finns inga %{resource_name} än.","link":"Skapa en"},"cancel":"Avbryt","comments":{"add":"Lägg till kommentar","author":"Författare","author_missing":"Anonym","author_type":"Författar typ","body":"Innehåll","created_at":"Skapad","errors":{"empty_text":"Kommentaren sparades inte, måste innehålla text."},"no_comments_yet":"Inga kommentarer än.","resource":"Resurs","resource_type":"Resurs typ","title_content":"Kommentarer (%{count})"},"dashboard":"Skrivbord","dashboard_welcome":{"call_to_action":"För att lägga till sektioner, gör en checkout på 'app/admin/dashboard.rb'","welcome":"Välkommen till Active Admin. Detta är ditt standardskrivbord."},"delete":"Ta bort","delete_confirmation":"Är du säker att du vill ta bort denna?","delete_model":"Ta bort %{model}","details":"Detaljvy för %{model}","devise":{"change_password":{"submit":"Ändra mitt lösenord","title":"Ändra ditt lösenord"},"email":{"title":"Epost"},"links":{"forgot_your_password":"Glömt ditt lösenord?","resend_confirmation_instructions":"Skicka bekräftnings instruktioner","resend_unlock_instructions":"Skicka upplåsnings instruktioner","sign_in":"Logga in","sign_in_with_omniauth_provider":"Logga in med %{provider}","sign_up":"Registera"},"login":{"remember_me":"Kom ihåg mig","submit":"Inloggning","title":"Inloggning"},"password":{"title":"Lösenord"},"resend_confirmation_instructions":{"submit":"Skicka bekräftnings instruktioner","title":"Skicka bekräftnings instruktioner"},"reset_password":{"submit":"Återställa mitt lösenord","title":"Glömt ditt lösenord?"},"sign_up":{"submit":"Registera","title":"Registera"},"subdomain":{"title":"Subdomän"},"unlock":{"submit":"Skicka upplåsnings instruktioner","title":"Skicka upplåsnings instruktioner"},"username":{"title":"Användarnamn"}},"download":"Ladda ner:","dropdown_actions":{"button_label":"Behandling"},"edit":"Redigera","edit_model":"Redigera %{model}","empty":"Tom","filters":{"buttons":{"clear":"Rensa filter","filter":"Filter"},"predicates":{"contains":"Innehåller","ends_with":"Slutar med","equals":"Lika med","from":"Från","greater_than":"Större än","less_than":"Mindre än","starts_with":"Börjar med","to":"Till"}},"has_many_delete":"Ta bort","has_many_new":"Skapa en ny %{model}","has_many_remove":"Ta bort","index_list":{"block":"Lista","blog":"Blogg","grid":"Rutnät","table":"Tabell"},"logout":"Logga ut","main_content":"Implementera %{model}#main_content för att kunna visa något.","new_model":"Ny %{model}","next":"Nästa","pagination":{"empty":"Ingen %{model} funnen","entry":{"one":"inlägg","other":"inlägg"},"multiple":"Visar %{model} <b>%{from}&nbsp;-&nbsp;%{to}</b> av <b>%{total}</b> totalt","multiple_without_total":"Visar %{model} <b>%{from}&nbsp;-&nbsp;%{to}</b>","one":"Visar <b>1</b> utav %{model}","one_page":"Visar <b>alla %{n}</b> utav %{model}"},"powered_by":"Powered by %{active_admin} %{version}","previous":"Föregående","search_status":{"current_filters":"Nuvarande filter:","current_scope":"Scope:","headline":"Sök status:","no_current_filters":"Inga"},"sidebars":{"filters":"Filter","search_status":"Sök status"},"status_tag":{"no":"Nej","unset":"Nej","yes":"Ja"},"unsupported_browser":{"headline":"Notera att ActiveAdmin inte längre stödjer Internet Explorer version 8 eller mindre.","recommendation":"Vi rekommenderar dig att uppgradera till den senaste versionen av <a href=\"http://windows.microsoft.com/ie\">Internet Explorer</a>, <a href=\"https://chrome.google.com/\">Google Chrome</a>, eller <a href=\"https://mozilla.org/firefox/\">Firefox</a>.","turn_off_compatibility_view":"Om du använder IE 9 eller senare, se till att <a href=\"https://support.microsoft.com/sv-se/help/17471\">stäng av \"Compatibility View\"</a>."},"view":"Visa"},"ckeditor":{"buttons":{"cancel":"Avbryt","delete":"Ta bort","next":"Next","upload":"Ladda upp"},"confirm_delete":"Ta bort fil?","page_title":"CKEditor filhanterare"}},"tr":{"active_admin":{"access_denied":{"message":"Bu işlemi gerçekleştirmek için yetkiniz yok."},"any":"Herhangi biri","batch_actions":{"action_label":"Seçilenleri %{title}","button_label":"Toplu İşlemler","default_confirmation":"Bunu yapmak istediğinizden emin misiniz?","delete_confirmation":"Bu %{plural_model} kayıtlarını silmek istediğinizden emin misiniz?","labels":{"destroy":"Sil"},"selection_toggle_explanation":"(Seçimi Değiştir)","succesfully_destroyed":{"one":"1 %{model} başarıyla silindi","other":"Toplam %{count} %{plural_model} başarıyla silindi"}},"blank_slate":{"content":"Henüz %{resource_name} yok.","link":"Bir tane oluşturun"},"cancel":"İptal","comments":{"add":"Yorum Ekle","author":"Yazar","author_missing":"Anonim","author_type":"Yazar Tipi","body":"Ayrıntı","created_at":"Oluşturma Tarihi","delete":"Yorumu Sil","delete_confirmation":"Bu yorumları silmek istediğinizden emin misiniz?","errors":{"empty_text":"Yorum boş olarak kaydedilemez."},"no_comments_yet":"Henüz yorum yok.","resource":"Kayıt","resource_type":"Kayıt Tipi","title_content":"Yorumlar (%{count})"},"create_another":"Başka bir %{model} oluştur","dashboard":"Gösterge Paneli","dashboard_welcome":{"call_to_action":"Buraya bölümler eklemek için 'app/admin/dashboard.rb' dosyasına bakabilirsiniz.","welcome":"Active Admin'e hoş geldiniz. Burası varsayılan gösterge paneli sayfasıdır."},"delete":"Sil","delete_confirmation":"Bu kaydı silmek istediğinizden emin misiniz?","delete_model":"%{model} Kaydını Sil","details":"%{model} Ayrıntıları","devise":{"change_password":{"submit":"Şifremi değiştir","title":"Şifrenizi değiştirin"},"email":{"title":"E-posta adresi"},"links":{"forgot_your_password":"Şifrenizi mi unuttunuz?","resend_confirmation_instructions":"Onaylama talimatlarını tekrar gönder","resend_unlock_instructions":"Hesap geri açma talimatlarını tekrar gönder","sign_in":"Giriş yap","sign_in_with_omniauth_provider":"%{provider} ile giriş yapın","sign_up":"Kaydol"},"login":{"remember_me":"Beni hatırla","submit":"Giriş yap","title":"Giriş yap"},"password":{"title":"Şifre"},"password_confirmation":{"title":"Şifreyi Tekrarla"},"resend_confirmation_instructions":{"submit":"Onaylama talimatlarını tekrar gönder","title":"Onaylama talimatlarını tekrar gönder"},"reset_password":{"submit":"Şifremi sıfırla","title":"Şifrenizi mi unuttunuz?"},"sign_up":{"submit":"Kaydol","title":"Kaydol"},"subdomain":{"title":"Alt alan adı"},"unlock":{"submit":"Hesap geri açma talimatlarını tekrar gönder","title":"Hesap geri açma talimatlarını tekrar gönder"},"username":{"title":"Kullanıcı adı"}},"download":"İndir:","dropdown_actions":{"button_label":"İşlemler"},"edit":"Düzenle","edit_model":"%{model} Kaydını Düzenle","empty":"Boş","filters":{"buttons":{"clear":"Filtreleri Temizle","filter":"Filtrele"},"predicates":{"contains":"İçerir","ends_with":"İle biter","equals":"Eşittir","from":"Başlangıç","greater_than":"Büyüktür","gteq_datetime":"Büyük yada eşit","less_than":"Küçüktür","lteq_datetime":"Küçük yada eşit","starts_with":"İle başlar","to":"Bitiş"}},"has_many_delete":"Sil","has_many_new":"Yeni %{model} Ekle","has_many_remove":"Çıkar","index_list":{"block":"Liste","blog":"Blog","grid":"Izgara","table":"Tablo"},"logout":"Çıkış Yap","main_content":"İçeriği görüntülemek için lütfen %{model}#main_content metodunu ekleyin.","move":"Taşı","new_model":"Yeni %{model}","next":"Sonraki","pagination":{"empty":"Hiç %{model} yok","entry":{"one":"kayıt","other":"kayıtlar"},"multiple":"<b>%{from}&nbsp;-&nbsp;%{to}</b> arası %{model} görüntüleniyor (toplam %{total} kayıt)","multiple_without_total":"<b>%{from}&nbsp;-&nbsp;%{to}</b> arası %{model} görüntüleniyor","one":"<b>1</b> %{model} görüntüleniyor","one_page":"<b>%{n}</b> %{model} kaydının tamamı görüntüleniyor","per_page":"Sayfa Başına: "},"powered_by":"%{active_admin} %{version} tarafından desteklenmektedir.","previous":"Önceki","search_status":{"current_filters":"Seçili filtreler:","current_scope":"Kapsam:","headline":"Arama","no_current_filters":"Yok"},"sidebars":{"filters":"Filtreler","search_status":"Arama Durumu"},"status_tag":{"no":"Hayır","unset":"Hayır","yes":"Evet"},"unsupported_browser":{"headline":"ActiveAdmin Internet Explorer 8 ve altı artık desteklememektedir.","recommendation":"Son sürüm <a href=\"http://windows.microsoft.com/ie\">Internet Explorer</a>, <a href=\"https://chrome.google.com/\">Google Chrome</a>, ya da <a href=\"https://mozilla.org/firefox/\">Firefox</a> tarayıcılarından birine geçmenizi tavsiye ederiz.","turn_off_compatibility_view":"IE 9 ya da üstünü kullanıyorsanız, <a href=\"http://windows.microsoft.com/tr-tr/internet-explorer/use-compatibility-view\">\"Uyumluluk Görünümü\"</a>nü kapatmayı unutmayın."},"view":"Görüntüle"},"ckeditor":{"buttons":{"cancel":"İptal","delete":"Sil","next":"Sonraki","upload":"Yükle"},"confirm_delete":"Dosyayı sil?","page_title":"CKEditor Dosya Yöneticisi"},"devise":{"failure":{"expired":"Hesabınız aktif olarak kullanılmadığı için artık geçerli değil. Lütfen yönetici ile irtibata geçin.","session_limited":"Hesabınıza başka bir tarayıcıdan giriş yapılmış. Lütfen devam etmek için yeniden giriş yapın."},"invalid_captcha":"Captcha hatalı.","invalid_security_question":"Güvenlik sorusunun cevabı yanlış.","paranoid_verify":{"code_required":"Destek ekibimizden aldığınız kodu girin."},"password_expired":{"change_required":"Parolanızın geçerlilik süresi dolmuş. Lütfen parolanızı yenileyin.","updated":"Yeni parolanız kaydedildi."}},"errors":{"messages":{"equal_to_current_password":"mevcut paroladan farklı olmalı.","password_format":"büyük, küçük harfler ve sayılar içermeli.","taken_in_past":"daha önce kullanıldı."}},"formtastic":{"cancel":"İptal","create":"%{model} oluştur","no":"Hayır","required":"Zorunlu","reset":"%{model} sıfırla","submit":"Gönder","update":"%{model} güncelle","yes":"Evet"},"ransack":{"all":"hepsi","and":"ve","any":"herhangi","asc":"artan","attribute":"nitelik","combinator":"birleştirici","condition":"şart","desc":"azalan","or":"veya","predicate":"doğrula","predicates":{"blank":"boş","cont":"içeren","cont_all":"hepsini içeren","cont_any":"herhangi birini içeren","does_not_match":"eşleşmeyen","does_not_match_all":"hiçbiri ile eşleşmeyen","does_not_match_any":"herhangi biri ile eşleşmeyen","end":"ile biten","end_all":"hepsi ile biten","end_any":"herhangi biriyle biten","eq":"eşit","eq_all":"hepsine eşit","eq_any":"herhangi birine eşit","false":"yanlış","gt":"daha büyük ","gt_all":"hepsinden daha büyük","gt_any":"herhangi birinden daha büyük","gteq":"daha büyük veya eşit","gteq_all":"daha büyük veya hepsine eşit","gteq_any":"daha büyük veya herhangi birine eşit","in":"içinde","in_all":"hepsinde","in_any":"herhangi birinde","lt":"daha küçük","lt_all":"hepsinden küçük","lt_any":"herhangi birinden küçük","lteq":"daha küçük veya eşit","lteq_all":"daha küçük veya hepsine eşit","lteq_any":"daha küçük veya herhangi birine eşit","matches":"eşleşen","matches_all":"hepsi ile eşleşen","matches_any":"herhangi biri ile eşleşen","not_cont":"içermeyen","not_cont_all":"hiçbirini birini içermeyen","not_cont_any":"herhangi birini içermeyen","not_end":"ile bitmeyen","not_end_all":"hiçbiriyle bitmeyen","not_end_any":"herhangi biriyle bitmeyen","not_eq":"eşit değil","not_eq_all":"hiçbirine eşit değil","not_eq_any":"herhangi birine eşit değil","not_in":"içinde değil","not_in_all":"hiçbirinde değil","not_in_any":"herhangi birinde değil","not_null":"geçerli","not_start":"ile başlamayan","not_start_all":"hiçbiriyle başlamayan","not_start_any":"herhangi biriyle başlamayan","null":"geçersiz","present":"mevcut","start":"ile başlayan","start_all":"hepsiyle başlayan","start_any":"herhangi biriyle başlayan","true":"doğru"},"search":"ara","sort":"sırala","value":"değer"}},"uk":{"active_admin":{"access_denied":{"message":"Ви не авторизовані для виконання даної дії."},"any":"Будь-який","batch_actions":{"action_label":"%{title} вибране","button_label":"Групові операції","default_confirmation":"Ви справді бажаєте це зробити?","delete_confirmation":"Ви впевнені, що хочете видалити %{plural_model}?","labels":{"destroy":"Видалити"},"selection_toggle_explanation":"(Скасувати все / Зняти виділення)","succesfully_destroyed":{"few":"Успішно видалено: %{count} %{plural_model}","many":"Успішно видалено: %{count} %{plural_model}","one":"Успішно видалено: 1 %{model}","other":"Успішно видалено: %{count} %{plural_model}"}},"blank_slate":{"content":"Поки-що немає %{resource_name}.","link":"Створити"},"cancel":"Скасувати","comments":{"add":"Додати Коментар","author":"Автор","author_missing":"Анонім","author_type":"Тип автора","body":"Текст","errors":{"empty_text":"Коментар не збережено, текст не повинен бути пустим."},"no_comments_yet":"Поки-що немає коментарів.","resource":"Ресурс","resource_type":"Тип ресурса","title_content":"Коментарі (%{count})"},"dashboard":"Панель керування","dashboard_welcome":{"call_to_action":"Щоб додати сюди що-небудь, зазирніть у 'app/admin/dashboard.rb'","welcome":"Ласкаво просимо до Active Admin. Це стандартна сторінка керування сайтом."},"delete":"Видалити","delete_confirmation":"Ви впевнені, що хочете це видалити?","delete_model":"Видалити %{model}","details":"%{model} детальніше","devise":{"change_password":{"submit":"Змінити пароль","title":"Зміна паролю"},"email":{"title":"Електронна пошта"},"links":{"forgot_your_password":"Забули пароль?","resend_confirmation_instructions":"Повторна відправка інструкцій підтвердження","resend_unlock_instructions":"Повторна відправка інструкцій розблокування","sign_in":"Увійти","sign_in_with_omniauth_provider":"Увійти з допомогою %{provider}","sign_up":"Зареєструватись"},"login":{"remember_me":"Запам'ятати мене","submit":"Увійти","title":"Вхід"},"password":{"title":"Пароль"},"resend_confirmation_instructions":{"submit":"Відправити повторно листа з активацією","title":"Відправити повторно листа з активацією"},"reset_password":{"submit":"Скинути пароль","title":"Забули пароль?"},"sign_up":{"submit":"Зареєструватися","title":"Зареєструватися"},"subdomain":{"title":"Піддомен"},"unlock":{"submit":"Відправити повторно інструкції з розблокування","title":"Відправити повторно інструкції з розблокування"},"username":{"title":"Ім'я користувача"}},"download":"Завантаження:","dropdown_actions":{"button_label":"Oперації"},"edit":"Змінити","edit_model":"Змінити %{model}","empty":"Пусто","filters":{"buttons":{"clear":"Очистити","filter":"Фільтрувати"},"predicates":{"contains":"Містить","ends_with":"Закінчується","equals":"=","from":"від","greater_than":"більше","less_than":"менше","starts_with":"Починається з","to":"до"}},"has_many_delete":"Прибрати","has_many_new":"Додати %{model}","has_many_remove":"Видалити","index_list":{"block":"Список","blog":"Блог","grid":"Сітка","table":"Таблиця"},"logout":"Вийти","main_content":"Створіть %{model}#main_content для відображення вмісту.","new_model":"Створити %{model}","next":"Наст.","pagination":{"empty":"%{model} не знайдено","entry":{"few":"записи","many":"записів","one":"запис","other":"записів"},"multiple":"Результат: %{model} <b>%{from}&nbsp;-&nbsp;%{to}</b> з <b>%{total}</b>","multiple_without_total":"Результат: %{model} <b>%{from}&nbsp;-&nbsp;%{to}</b>","one":"Результат: <b>1</b> %{model}","one_page":"Результат: <b>%{n}</b> %{model}"},"powered_by":"Powered by %{active_admin} %{version}","previous":"Поперед.","search_status":{"current_filters":"Поточний фільтр:","current_scope":"Область:","headline":"Статус пошуку:","no_current_filters":"Жоден"},"sidebars":{"filters":"Фільтри","search_status":"Статус пошуку"},"status_tag":{"no":"Ні","unset":"Ні","yes":"Так"},"unsupported_browser":{"headline":"Зверніть, будь-ласка, увагу, що ActiveAdmin більше не підтримує Internet Explorer 8 версії і нижче","recommendation":"Ми рекомендуємо оновити версію вашого браузеру (<a href=\"http://windows.microsoft.com/ie\">Internet Explorer</a>, <a href=\"https://chrome.google.com/\">Google Chrome</a>, або <a href=\"https://mozilla.org/firefox/\">Firefox</a>).","turn_off_compatibility_view":"Якщо ви використовуєте IE 9 і вище, переконайтесь, що <a href=\"https://support.microsoft.com/uk-ua/help/17471\">ви вимкнули опцію \"Перегляд в режимі сумісності\"</a>."},"view":"Переглянути"},"ckeditor":{"buttons":{"cancel":"Відміна","delete":"Видалити","next":"Показати більше","upload":"Завантажити"},"confirm_delete":"Видалити файл?","page_title":"CKEditor Завантаження файлів"}},"vi":{"active_admin":{"access_denied":{"message":"Bạn không có quyền thực hiện tính năng này"},"any":"Bất kỳ","batch_actions":{"action_label":"%{title} được chọn","button_label":"Hành động hàng loạt","default_confirmation":"Bạn có chắc bạn muốn làm điều này?","delete_confirmation":"Bạn có chắc chắn muốn xóa những %{plural_model}?","labels":{"destroy":"Xóa"},"selection_toggle_explanation":"(Thay đổi lựa chọn)","succesfully_destroyed":{"one":"Đã xóa thành công 1 %{model}","other":"Đã xóa thành công %{count} %{plural_model}"}},"blank_slate":{"content":"Chưa có %{resource_name}.","link":"Tạo mới"},"cancel":"Hủy","comments":{"add":"Thêm bình luận","author":"Tác giả","author_missing":"Vô danh","body":"Nội dung","created_at":"Đã tạo","delete":"Xoá bình luận","delete_confirmation":"Bạn có chắc chắn muốn xóa những bình luận này?","errors":{"empty_text":"Lời bình luận chưa được lưu, vì nội dung còn trống."},"no_comments_yet":"Chưa có bình luận.","resource":"Resource","resource_type":"Resource Type","title_content":"Bình luận (%{count})"},"create_another":"Tạo thêm %{model}","dashboard":"Bảng điều khiển","dashboard_welcome":{"call_to_action":"Để thêm thành phần cho trang điều khiển hãy chỉnh sửa 'app/admin/dashboard.rb'","welcome":"Chào mừng bạn đến với Active Admin. Đây là trang điều khiển mặc định."},"delete":"Xóa","delete_confirmation":"Bạn có chắc chắn rằng mình muốn xóa không?","delete_model":"Xóa %{model}","details":"%{model} Chi tiết","devise":{"change_password":{"submit":"Thay đổi mật khẩu của tôi","title":"Thay đổi mật khẩu của bạn"},"email":{"title":"Email"},"links":{"forgot_your_password":"Quên mật khẩu của bạn?","sign_in":"Đăng nhập","sign_in_with_omniauth_provider":"Đăng nhập với %{provider}"},"login":{"remember_me":"Ghi nhớ tôi","submit":"Đăng nhập","title":"Đăng nhập"},"password":{"title":"Mật khẩu"},"password_confirmation":{"title":"Mật khẩu xác nhận"},"resend_confirmation_instructions":{"submit":"Gởi lại hướng dẫn xác nhận","title":"Gởi lại hướng dẫn xác nhận"},"reset_password":{"submit":"Thiết lập lại mật khẩu của tôi","title":"Quên mật khẩu của bạn?"},"sign_up":{"submit":"Đăng ký","title":"Đăng ký"},"subdomain":{"title":"Tên miền phụ"},"unlock":{"submit":"Gởi lại hướng dẫn mở khoá","title":"Gởi lại hướng dẫn mở khoá"},"username":{"title":"Tên người dùng"}},"download":"Tải về:","dropdown_actions":{"button_label":"Hành động"},"edit":"Chỉnh sửa","edit_model":"Chỉnh sửa %{model}","empty":"Trống","filters":{"buttons":{"clear":"Xóa dữ liệu lọc","filter":"Lọc"},"predicates":{"contains":"Có chứa","ends_with":"Kết thúc bởi","equals":"Bằng","from":"Từ","greater_than":"Lớn hơn","gteq_datetime":"Lớn hơn hoặc bằng","less_than":"Nhỏ hơn","lteq_datetime":"Nhỏ hơn hoặc bằng","starts_with":"Bắt đầu với","to":"Đến"}},"has_many_delete":"Xóa","has_many_new":"Thêm mới %{model}","has_many_remove":"Hủy bỏ","index_list":{"block":"Danh sách","blog":"Blog","grid":"Lưới","table":"Bảng"},"logout":"Đăng xuất","main_content":"Xin bổ sung %{model}#main_content để hiển thị nội dung.","new_model":"Tạo mới %{model}","next":"Sau","pagination":{"empty":"Không có %{model} nào được tìm thấy","entry":{"one":"entry","other":"entries"},"multiple":"Đang hiển thị %{model} <b>%{from}&nbsp;-&nbsp;%{to}</b> of <b>%{total}</b> trong tất cả.","multiple_without_total":"Đang hiển thị %{model} <b>%{from}&nbsp;-&nbsp;%{to}</b>.","one":"Đang hiển thị <b>1</b> %{model}","one_page":"Đang hiển thị <b>tất cả %{n}</b> %{model}","per_page":"Mỗi trang: "},"powered_by":"Powered by %{active_admin} %{version}","previous":"Trước","search_status":{"current_filters":"Bộ lộc hiện tại:","current_scope":"Phạm vi:","headline":"Danh sách tìm kiếm:","no_current_filters":"Không có"},"sidebars":{"filters":"Bộ Lọc","search_status":"Trạng thái tìm kiếm"},"status_tag":{"no":"Không Có","unset":"Không Có","yes":"Có"},"view":"Xem"}},"zh-CN":{"active_admin":{"access_denied":{"message":"您无权处理此操作"},"any":"任何","batch_actions":{"action_label":"%{title} 被选中","button_label":"批处理","default_confirmation":"你确定你要这样做？","delete_confirmation":"你确定要删除这些%{plural_model}?","labels":{"destroy":"删除"},"selection_toggle_explanation":"(切换选择)","succesfully_destroyed":{"one":"成功删除 1 %{model}","other":"成功删除 %{count} %{plural_model}"}},"blank_slate":{"content":"暂时还没有%{resource_name}.","link":"新建一个"},"cancel":"取消","comments":{"add":"添加评论","author":"作者","author_missing":"匿名","author_type":"作者类型","body":"内容","created_at":"创建于","delete":"删除评论","delete_confirmation":"你确定删除这些评论？","errors":{"empty_text":"评论保存失败，内空不能为空."},"no_comments_yet":"暂时没有评论","resource":"资源","resource_type":"资源类型","title_content":"(%{count})条评论"},"create_another":"新建另一个%{model}","dashboard":"控制面板","dashboard_welcome":{"call_to_action":"若要添加新的面板内容, 请修改 'app/admin/dashboard.rb'","welcome":"欢迎使用Active Admin. 这是默认的控制面板页."},"delete":"删除","delete_confirmation":"确定删除?","delete_model":"删除%{model}","details":"%{model}详情","devise":{"change_password":{"submit":"修改密码","title":"修改密码"},"email":{"title":"邮箱"},"links":{"forgot_your_password":"忘记了密码？","resend_confirmation_instructions":"重发确认邮件","resend_unlock_instructions":"重发解锁邮件","sign_in":"登录","sign_in_with_omniauth_provider":"通过%{provider}登录","sign_up":"注册"},"login":{"remember_me":"记住我","submit":"登录","title":"登录"},"password":{"title":"密码"},"password_confirmation":{"title":"确认密码"},"resend_confirmation_instructions":{"submit":" 重新发送确认指示","title":" 重新发送确认指示"},"reset_password":{"submit":"重置我的密码","title":"忘记了密码？"},"sign_up":{"submit":"注册","title":"注册"},"subdomain":{"title":"子域"},"unlock":{"submit":"重新发送送解锁命令","title":"重新发送送解锁命令"},"username":{"title":"用户名"}},"download":"下载:","dropdown_actions":{"button_label":"行动"},"edit":"编辑","edit_model":"编辑%{model}","empty":"未定义","filters":{"buttons":{"clear":"清除条件","filter":"过滤"},"predicates":{"contains":"包含","ends_with":"完与","equals":"等于","from":"起","greater_than":"大于","gteq_datetime":"大于等于","less_than":"小于","lteq_datetime":"小于等于","starts_with":"开头","to":"止"}},"has_many_delete":"删除","has_many_new":"新建一个%{model}","has_many_remove":"清除","index_list":{"block":"列表","blog":"博客","grid":"网格","table":"表格"},"logout":"退出","main_content":"请执行 %{model}#main_content 来显示内容.","new_model":"新建%{model}","next":"下一个","pagination":{"empty":"暂时没有%{model}","entry":{"one":"条目","other":"条目"},"multiple":"显示所有 <b>%{total}</b> %{model}中的<b>%{from}&nbsp;-&nbsp;%{to}</b> 条","multiple_without_total":"%{model}中的<b>%{from}&nbsp;-&nbsp;%{to}</b> 条","one":"显示 <b>1</b> %{model}","one_page":"显示 <b>所有 %{n}</b> %{model}","per_page":"每页："},"powered_by":"Powered by %{active_admin} %{version}","previous":"上一个","search_status":{"current_filters":"过滤条件：","current_scope":"搜索范围：","headline":"搜索条件：","no_current_filters":"无"},"sidebars":{"filters":"所有条件","search_status":"搜索条件"},"status_tag":{"no":"否","unset":"否","yes":"是"},"unsupported_browser":{"headline":"很抱歉，ActiveAdmin 已不再支持 Internet Explorer 8 以下版本的浏览器。","recommendation":"建议您升级到最新版本的<a href=\"http://windows.microsoft.com/ie\">Internet Explorer</a>，<a href=\"https://chrome.google.com/\">Google Chrome</a>，或是 <a href=\"https://mozilla.org/firefox/\">Firefox</a>。","turn_off_compatibility_view":"如果您使用的是 IE 9 或更新的版本，请确认<a href=\"https://support.microsoft.com/zh-cn/help/17472/windows-internet-explorer-11-fix-site-display-problems-compatibility-view\">已关闭“兼容性视图”</a>。"},"view":"查看"},"ckeditor":{"buttons":{"cancel":"取消","delete":"删除","next":"下一个","upload":"上传"},"confirm_delete":"删除文件?","page_title":"CKEditor - 文件管理"},"formtastic":{"cancel":"取消","create":"新建%{model}","no":"NO","required":"必须的","reset":"重置%{model}","submit":"确认","update":"更新%{model}","yes":"YES"},"ransack":{"all":"所有","and":"并且","any":"任意","asc":"升序","attribute":"属性","combinator":"条件组合(combinator)","condition":"条件","desc":"降序","or":"或者","predicate":"基于(predicate)","predicates":{"blank":"为空","cont":"包含","cont_all":"包含所有值","cont_any":"包含任意一个值","does_not_match":"不符合","does_not_match_all":"不符合所有条件","does_not_match_any":"符合任意条件","end":"止于","end_all":"止于任意值","end_any":"止于任一值","eq":"等于","eq_all":"等于所有值","eq_any":"等于任意值","false":"等于false","gt":"大于","gt_all":"大于所有值","gt_any":"大于任意一个值","gteq":"大于等于","gteq_all":"大于等于所有值","gteq_any":"大于等于任意一个值","in":"被包含","in_all":"被所有值包含","in_any":"被任意值包含","lt":"小于","lt_all":"小于所有值","lt_any":"小于任意一个值","lteq":"小于等于","lteq_all":"小于等于所有值","lteq_any":"小于等于任意一个值","matches":"符合","matches_all":"符合所有条件","matches_any":"符合任意条件","not_cont":"不包含","not_cont_all":"不包含所有值","not_cont_any":"不包含任意一个值","not_end":"非止于","not_end_all":"非止于任意值","not_end_any":"非止于任一值","not_eq":"不等于","not_eq_all":"不等于所有值","not_eq_any":"不等于任意值","not_in":"不被包含","not_in_all":"不被所有值包含","not_in_any":"不被任意值包含","not_null":"不是null","not_start":"非始于","not_start_all":"非始于任意值","not_start_any":"非始于任一值","null":"是null","present":"有值","start":"始于","start_all":"始于任意值","start_any":"始于任一值","true":"等于true"},"search":"搜索","sort":"排序","value":"数值"}},"zh-TW":{"active_admin":{"access_denied":{"message":"您沒有權限執行此項操作"},"any":"任何","batch_actions":{"action_label":"%{title} 已選取","button_label":"批次作業","default_confirmation":"你確定你要這樣做？","delete_confirmation":"你確定要刪除這些 %{plural_model} 嗎？","labels":{"destroy":"刪除"},"selection_toggle_explanation":"（切換選取）","succesfully_destroyed":{"one":"成功刪除 1 %{model}","other":"成功刪除 %{count} %{plural_model}"}},"blank_slate":{"content":"尚無 %{resource_name}","link":"建立一筆"},"cancel":"取消","comments":{"add":"新增評論","author":"作者","author_missing":"匿名","author_type":"作者身份","body":"內文","created_at":"建立","delete":"刪除評論","delete_confirmation":"你確定要刪除這些評論嗎？","errors":{"empty_text":"評論儲存失敗，不允許空白的內容。"},"no_comments_yet":"尚無評論","resource":"資源","resource_type":"資源種類","title_content":"(%{count}) 則評論"},"dashboard":"儀表板","dashboard_welcome":{"call_to_action":"要新增儀表板內容，請查看 'app/admin/dashboard.rb'","welcome":"歡迎來到 Active Admin，這是預設的儀表板頁面。"},"delete":"刪除","delete_confirmation":"你確定要刪除嗎？","delete_model":"刪除 %{model}","details":"%{model} 明細","devise":{"change_password":{"submit":"更改我的密碼","title":"更改你的密碼"},"email":{"title":"電子郵件信箱"},"links":{"forgot_your_password":"忘記密碼？","resend_confirmation_instructions":"重新發送確認信","resend_unlock_instructions":"重新發送解鎖指示","sign_in":"登入","sign_in_with_omniauth_provider":"使用 %{provider} 登入","sign_up":"註冊"},"login":{"remember_me":"記住我","submit":"登入","title":"登入"},"password":{"title":"密碼"},"resend_confirmation_instructions":{"submit":"重新發送確認信","title":"重新發送確認信"},"reset_password":{"submit":"重置密碼","title":"忘記密碼？"},"sign_up":{"submit":"註冊","title":"註冊"},"subdomain":{"title":"子網域"},"unlock":{"submit":"重新發送解鎖指示","title":"重新發送解鎖指示"},"username":{"title":"帳號"}},"download":"下載:","dropdown_actions":{"button_label":"操作"},"edit":"編輯","edit_model":"編輯 %{model}","empty":"空的","filters":{"buttons":{"clear":"清除篩選條件","filter":"篩選"},"predicates":{"contains":"包含","ends_with":"結尾為","equals":"等於","greater_than":"大於","less_than":"小於","starts_with":"開頭為"}},"has_many_delete":"刪除","has_many_new":"增加新的 %{model}","has_many_remove":"清除","index_list":{"block":"清單","blog":"部落格","grid":"格狀","table":"表格"},"logout":"登出","main_content":"請實作 %{model}#main_content 以顯示內容。","new_model":"新增 %{model}","next":"下一個","pagination":{"empty":"找不到 %{model} ","entry":{"one":"筆","other":"筆"},"multiple":"總計 <b>%{total}</b> 顯示 %{model} 中<b>%{from}&nbsp;-&nbsp;%{to}</b> 筆","multiple_without_total":"顯示 %{model} 中<b>%{from}&nbsp;-&nbsp;%{to}</b> 筆","one":"顯示 <b>1</b> %{model}","one_page":"顯示 <b>全部 %{n}</b> %{model}"},"powered_by":"Powered by %{active_admin} %{version}","previous":"前一個","search_status":{"current_filters":"目前篩選條件：","current_scope":"子集：","headline":"搜尋條件:","no_current_filters":"無"},"sidebars":{"filters":"篩選條件","search_status":"搜尋條件"},"status_tag":{"no":"否","unset":"否","yes":"是"},"unsupported_browser":{"headline":"很抱歉，ActiveAdmin 已不再支援 Internet Explorer 8 以下版本的瀏覽器。","recommendation":"建議您升級到最新版本的<a href=\"http://windows.microsoft.com/ie\">Internet Explorer</a>，<a href=\"https://chrome.google.com/\">Google Chrome</a>，或是 <a href=\"https://mozilla.org/firefox/\">Firefox</a>。","turn_off_compatibility_view":"若您是使用 IE 9 或更新的版本，請確認<a href=\"https://support.microsoft.com/zh-tw/help/17471\">「相容性檢視」是關閉的</a>。"},"view":"檢視"},"ckeditor":{"buttons":{"cancel":"取消","delete":"删除","next":"下一個","upload":"上傳"},"confirm_delete":"删除文件?","page_title":"CKEditor - 文件管理"},"ransack":{"all":"所有","and":"而且","any":"任何","asc":"升冪排序","attribute":"屬性","combinator":"條件組合","condition":"條件","desc":"降冪排序","or":"或者","predicate":"基於","predicates":{"blank":"為空","cont":"包含","cont_all":"包含所有值","cont_any":"包含任何一個值","does_not_match":"不符合","does_not_match_all":"不符合所有條件","does_not_match_any":"不符合任何一個條件","end":"以某個值結尾","end_all":"以所有值結尾","end_any":"以任何一個值結尾","eq":"等於","eq_all":"等於所有值","eq_any":"等於任何一個值","false":"為假","gt":"大於","gt_all":"大於所有值","gt_any":"大於任何一個值","gteq":"大於或等於","gteq_all":"大於或等於所有值","gteq_any":"大於或等於任何一個值","in":"被包含於","in_all":"被包含於所有值","in_any":"被包含於任何一個值","lt":"小於","lt_all":"小於所有值","lt_any":"小於任何一個值","lteq":"小於或等於","lteq_all":"小於或等於所有值","lteq_any":"小於或等於任何一個值","matches":"符合","matches_all":"符合所有條件","matches_any":"符合任何一個條件","not_cont":"不包含","not_cont_all":"不包含所有值","not_cont_any":"不包含任何一個值","not_end":"不以某個值結尾","not_end_all":"不以所有值結尾","not_end_any":"不以任何一個值結尾","not_eq":"不等於","not_eq_all":"不等於所有值","not_eq_any":"不等於任何一個值","not_in":"不被包含於","not_in_all":"不被包含於所有值","not_in_any":"不被包含於任何一個值","not_null":"不為 null","not_start":"不以某個值開始","not_start_all":"不以所有值開始","not_start_any":"不以任何一值開始","null":"為 null","present":"有值","start":"以某個值開始","start_all":"以所有值開始","start_any":"以任何一個值開始","true":"為真"},"search":"搜尋","sort":"排序","value":"數值"}}};
}));



$(function() {
  var $togglePin = $('#toggle-front-page-story-pin');

  if (DailyKos.userBlogPerms() && $togglePin.length) {
    var $toggleText = $('#pin-story-label-text');
    var storyId = $togglePin.data('storyId');

    $.ajax('/api/v1/pinned_stories/stories/' + storyId + '/pin', { cache: false })
    .done(function(data) {
      if (data.pinned_stories.length > 0) {
        $togglePin.data('isPinned', 'true');
        $toggleText.text('Unpin');
      } else {
        $togglePin.data('isPinned', 'false');
        $toggleText.text('Pin');
      }
    });

    $togglePin.click(function() {
      var isPinned = $togglePin.data('isPinned');

      if(isPinned === 'true') {
        var confirmUnpin = DailyKos.showConfirm("Are you sure you want to unpin this story from the front page?");
        if (confirmUnpin === true) {
          $.post('/api/v1/pinned_stories/stories/' + storyId + '/unpin', {'_method': 'delete'})
          .done(function() {
            $togglePin.data('isPinned', 'false');
            $toggleText.text('Pin');
          })
          .fail(function() { DailyKos.showAlert('An error occurred while unpinning this story. Please refresh the page and try again.');})
        }
      } else {
        var confirmPin = DailyKos.showConfirm("Are you sure you want to pin this story to the front page?");
        if (confirmPin === true) {
          $.post('/api/v1/pinned_stories/stories/' + storyId + '/pin')
          .done(function() {
            $togglePin.data('isPinned', 'true');
            $toggleText.text('Unpin');
          })
          .fail(function() { DailyKos.showAlert('An error occurred while pinning this story. Please refresh the page and try again.');})
        }
      }
    });
  }
});























































(function() {
  // Localize any timestamps on the rendered page:
  $(function () { DailyKos.Time.localizeAll(); });

  $(function() {
    var img = '.content-section img[data-src], .explore-wrapper img[data-src]';

    DailyKos.Unveil($(img));

    // Double call in case JS bindings are somehow lost. wtf?
    $(window).load(function () {
      DailyKos.Unveil($(img));
    })
  });

  // var checkOnError = function() {
  //   if(window.onerror !== DailyKos.Airbrake.onerror) {
  //     window.onerror = DailyKos.Airbrake.onerror;
  //   }
  //   setTimeout(checkOnError, 1000);
  // }
  // $(checkOnError);

  // Swap out the "read-more" anchor so if the URL is copied to someone,
  //  we don't auto-scroll them to the second half of the story.
  $(function() {
    var hash = window.location.hash;

    if(hash.indexOf('read-more') >= 0) {
      var readMoreAnchor = $('#read-more');

      if(readMoreAnchor.length) $(document).scrollTop( readMoreAnchor.offset().top );

      // I think the following commented out line is causing problems
      // with the jump as well - JMG
      // window.location.hash = hash.replace('read-more', 'view-story');
    }
  });
})();
