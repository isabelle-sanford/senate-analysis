(window.webpackJsonp=window.webpackJsonp||[]).push([[57],{553:function(e,t,n){"use strict";n.d(t,"k",(function(){return r})),n.d(t,"j",(function(){return i})),n.d(t,"f",(function(){return a})),n.d(t,"p",(function(){return o})),n.d(t,"O",(function(){return s})),n.d(t,"o",(function(){return c})),n.d(t,"N",(function(){return u})),n.d(t,"r",(function(){return l})),n.d(t,"Q",(function(){return d})),n.d(t,"y",(function(){return h})),n.d(t,"X",(function(){return f})),n.d(t,"x",(function(){return p})),n.d(t,"W",(function(){return v})),n.d(t,"n",(function(){return y})),n.d(t,"M",(function(){return g})),n.d(t,"t",(function(){return m})),n.d(t,"S",(function(){return E})),n.d(t,"u",(function(){return b})),n.d(t,"T",(function(){return T})),n.d(t,"B",(function(){return _})),n.d(t,"ab",(function(){return O})),n.d(t,"q",(function(){return P})),n.d(t,"P",(function(){return I})),n.d(t,"d",(function(){return S})),n.d(t,"F",(function(){return w})),n.d(t,"s",(function(){return R})),n.d(t,"R",(function(){return k})),n.d(t,"z",(function(){return C})),n.d(t,"Y",(function(){return A})),n.d(t,"A",(function(){return D})),n.d(t,"Z",(function(){return L})),n.d(t,"h",(function(){return M})),n.d(t,"I",(function(){return j})),n.d(t,"v",(function(){return N})),n.d(t,"U",(function(){return U})),n.d(t,"m",(function(){return x})),n.d(t,"L",(function(){return F})),n.d(t,"l",(function(){return V})),n.d(t,"K",(function(){return B})),n.d(t,"e",(function(){return W})),n.d(t,"G",(function(){return G})),n.d(t,"w",(function(){return H})),n.d(t,"V",(function(){return K})),n.d(t,"b",(function(){return J})),n.d(t,"D",(function(){return Q})),n.d(t,"c",(function(){return Y})),n.d(t,"E",(function(){return z})),n.d(t,"i",(function(){return q})),n.d(t,"J",(function(){return X})),n.d(t,"a",(function(){return $})),n.d(t,"C",(function(){return Z})),n.d(t,"g",(function(){return ee})),n.d(t,"H",(function(){return te}));var r={PAUSE_REQUESTED:"PAUSE_REQUESTED",PLAY_REQUESTED:"PLAY_REQUESTED"},i={MUTE_REQUESTED:"MUTE_REQUESTED",UNMUTE_REQUESTED:"UNMUTE_REQUESTED"},a={CAPTIONS_ON_REQUESTED:"CAPTIONS_ON_REQUESTED",CAPTIONS_OFF_REQUESTED:"CAPTIONS_OFF_REQUESTED",CAPTIONS_RESET_REQUESTED:"CAPTIONS_RESET_REQUESTED"},o="REQUEST_PLAY",s=function(e){return{type:o,playerId:e}},c="REQUEST_PAUSE",u=function(e){return{type:c,playerId:e}},l="REQUEST_REPLAY",d=function(e){return{type:l,playerId:e}},h="VIDEO_PLAYED",f=function(e){return{type:h,playerId:e}},p="VIDEO_PAUSED",v=function(e){return{type:p,playerId:e}},y="REQUEST_MUTE",g=function(e){return{type:y,playerId:e}},m="REQUEST_UNMUTE",E=function(e){return{type:m,playerId:e}},b="REQUEST_VOLUME_CHANGE",T=function(e,t){return{type:b,volume:t,playerId:e}},_="VIDEO_VOLUME_CHANGED",O=function(e,t,n){return{type:_,isMuted:t,volume:n,playerId:e}},P="REQUEST_PLAYBACK_TIME_RANGE",I=function(e,t,n){return{type:P,startTimeS:t,endTimeS:n,playerId:e}},S="CANCEL_PLAYBACK_TIME_RANGE",w=function(e){return{type:S,playerId:e}},R="REQUEST_SCRUB_TO_FRACTION",k=function(e,t){return{type:R,fraction:t,playerId:e}},C="VIDEO_SEEKED",A=function(e){return{type:C,playerId:e}},D="VIDEO_SEEKING",L=function(e){return{type:D,playerId:e}},M="HIDE_CONTROLS",j=function(e){return{type:M,playerId:e}},N="SHOW_CONTROLS",U=function(e){return{type:N,playerId:e}},x="REQUEST_CAPTIONS_ON",F=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return{type:x,isUserSet:t,playerId:e}},V="REQUEST_CAPTIONS_OFF",B=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return{type:V,isUserSet:t,playerId:e}},W="CAPTIONS_TOGGLED",G=function(e,t){return{type:W,areCaptionsShown:t,playerId:e}},H="UPDATE_VISIBILITY",K=function(e,t,n,r){return{type:H,playerId:e,percentVisible:t,percentOfViewportOccupied:n,sizesInfo:r}},J="CALL_TO_ACTION_CLICKED",Q=function(e){return{type:J,playerId:e}},Y="CALL_TO_ACTION_IMPRESSION",z=function(e){return{type:Y,playerId:e}},q="LIVE_CLICKTHROUGH_CLICKED",X=function(e){return{type:q,playerId:e}},$="AUTOPLAY_DISABLED",Z=function(e){return{type:$,playerId:e}},ee="DATA_USAGE_COLLECTED",te=function(e,t){return{type:ee,playerId:e,bytes:t}}},554:function(e,t,n){"use strict";n.d(t,"a",(function(){return N}));n(56),n(23),n(42),n(28),n(37),n(15),n(18),n(43);var r=n(2),i=n.n(r),a=n(38),o=n.n(a),s=n(3),c=n.n(s),u=n(4),l=n.n(u),d=n(6),h=n.n(d),f=n(16),p=n.n(f),v=n(20),y=n.n(v),g=n(10),m=n.n(g),E=n(1),b=n.n(E),T=(n(36),n(0)),_=n(558),O=n(34),P=n.n(O),I=(n(90),n(432));function S(e){var t=w(e);return function(e){var n=w(e);return Object(I.a)(t,n)||(t=n),t}}function w(e){if(!e||"object"!==P()(e))return e;var t=JSON.parse(JSON.stringify(e));return delete t.dataUsageBytes,t.tracks=t.tracks.map((function(e){return"number"==typeof e.currentTimeMs&&delete e.currentTimeMs,e})),t}var R=n(694),k=n(69),C=n.n(k),A=n(5),D=n(641);function L(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function M(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?L(Object(n),!0).forEach((function(t){b()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):L(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function j(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=m()(e);if(t){var i=m()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return y()(this,n)}}function N(e){var t=e.periodic,n=e.children,r=t?U.PeriodicContext.Consumer:U.Context.Consumer;return T.createElement(r,null,(function(e){var t=e.aspectRatio,r=e.guestsState,i=e.playerApi,a=e.playerState,o=e.containerRef;return i&&o&&a?n({aspectRatio:t,guestsState:r,playerApi:i,playerState:a,containerRef:o}):null}))}var U=function(e){p()(n,e);var t=j(n);function n(){var e;c()(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return e=t.call.apply(t,[this].concat(i)),b()(h()(e),"_cache",{stablePlayerState:S(null)}),b()(h()(e),"state",{hasError:null,guestsState:null,playerApi:null,playerState:null,stablePlayerState:null}),b()(h()(e),"_renderCustomOverlay",(function(){var t=e.props.children,n=e.state,r=n.guestsState,i=n.playerApi,a=n.stablePlayerState;return i&&t?"function"==typeof t?t({guestsState:r,playerApi:i,playerState:a,containerRef:e._containerRef}):t:null})),b()(h()(e),"_handleReload",(function(){return e.setState((function(){return{hasError:null}}))})),b()(h()(e),"_handlePlayerApi",(function(t){return function(n){var r=e.props.playerId;e.setState({playerApi:n}),e.props.onApiReady&&e.props.onApiReady(n),r&&t&&(e._unregister=t(r,n)),e._unsubscribe=n.subscribe((function(t,n){var r=e._cache.stablePlayerState(t);e.setState({stablePlayerState:r,playerState:t,guestsState:n}),e.props.onStateUpdate&&e.props.onStateUpdate(t,n)}))}})),e}return l()(n,[{key:"componentWillUnmount",value:function(){this._unregister&&this._unregister(),this._unsubscribe&&this._unsubscribe()}},{key:"componentDidUpdate",value:function(){if(!this._containerRef){var e=C.a.findDOMNode(this);e&&e instanceof HTMLElement&&(this._containerRef=e)}}},{key:"componentDidCatch",value:function(e,t){var n={error:e,info:t};console.error(n),this.setState((function(){return{hasError:n}}))}},{key:"render",value:function(){var e=this,t=this.state,r=t.guestsState,a=t.playerApi,s=t.playerState,c=t.stablePlayerState,u=this.props,l=u.aspectRatio,d=(u.children,u.objectFitVideo),h=(u.onApiReady,u.onStateUpdate,u.playerId,u.basePlayerClass),f=u.size,p=o()(u,["aspectRatio","children","objectFitVideo","onApiReady","onStateUpdate","playerId","basePlayerClass","size"]),v={aspectRatio:this.props.aspectRatio,guestsState:r,playerApi:a,playerState:s,containerRef:this._containerRef},y=M(M({},v),{},{playerState:c});return T.createElement(_.a,{ratio:l,style:[x.root,x[f]]},this.state.hasError?T.createElement(R.a,{onReloadPress:this._handleReload}):T.createElement(n.Context.Provider,{value:y},T.createElement(n.PeriodicContext.Provider,{value:v},T.createElement(D.a.RegistrationContext.Consumer,null,(function(t){var n=t.registerPlayer;return T.createElement(h,i()({},p,{customOverlay:e._renderCustomOverlay(),displayOptions:{objectFitVideo:d},setPlayerApi:e._handlePlayerApi(n)}))})))))}}]),n}(T.Component);b()(U,"Consumer",N),b()(U,"defaultProps",{aspectRatio:A.a.theme.aspectRatios.landscape,size:"fill"}),b()(U,"Context",T.createContext({aspectRatio:A.a.theme.aspectRatios.landscape,guestsState:null,playerApi:null,playerState:null,containerRef:null})),b()(U,"PeriodicContext",T.createContext({aspectRatio:A.a.theme.aspectRatios.landscape,guestsState:null,playerApi:null,playerState:null,containerRef:null}));var x=A.a.create({root:{position:"relative"},fill:{width:"100%",height:"100%"},small:{width:480,height:270},medium:{width:640,height:360},large:{width:800,height:450}});t.b=U},555:function(e,t,n){"use strict";t.a={BROADCAST_REQUEST_ERROR:"BROADCAST_REQUEST_ERROR",BROADCAST_ENDED_NO_REPLAY:"BROADCAST_ENDED_NO_REPLAY",BROADCAST_NOT_FOUND:"BROADCAST_NOT_FOUND",CONFIG_USER_DATA_NETWORK_ERROR:"CONFIG_USER_DATA_NETWORK_ERROR",CONFIG_NETWORK_ERROR:"CONFIG_NETWORK_ERROR",DMCA_TAKEDOWN_ERROR:"DMCA_TAKEDOWN_ERROR",EUROPEAN_COPYRIGHT_VIOLATION:"EUROPEAN_COPYRIGHT_VIOLATION",LIVE_PARSE_ERROR:"LIVE_PARSE_ERROR",LIVE_STREAM_ACQUISITION_MISSING_CONTENT_ID:"LIVE_STREAM_ACQUISITION_MISSING_CONTENT_ID",LIVE_STREAM_ACQUISITION_NETWORK_ERROR:"LIVE_STREAM_ACQUISITION_NETWORK_ERROR",LIVE_VIDEO_GEOBLOCK_ERROR:"LIVE_VIDEO_GEOBLOCK_ERROR",LIVE_VIDEO_COPYRIGHT_VIOLATION_ERROR:"LIVE_VIDEO_COPYRIGHT_VIOLATION_ERROR",LIVE_VIDEO_GEOLOCATION_PROMPT:"LIVE_VIDEO_GEOLOCATION_PROMPT",LIVE_VIDEO_NO_COOKIES_ERROR:"LIVE_VIDEO_NO_COOKIES_ERROR",MEDIA_NOT_SUPPORTED:"MEDIA_NOT_SUPPORTED",MEDIA_SRC_INVALID_ERROR:"MEDIA_SRC_INVALID_ERROR",MEDIA_ABORTED:"MEDIA_ABORTED",MEDIA_NETWORK_ERROR:"MEDIA_NETWORK_ERROR",MEDIA_DECODE_ERROR:"MEDIA_DECODE_ERROR",MEDIA_GEOBLOCK_ERROR:"MEDIA_GEOBLOCK_ERROR",MEDIA_TEARDOWN_ERROR:"MEDIA_TEARDOWN_ERROR",MEDIA_UNKNOWN_CODE_ERROR:"MEDIA_UNKNOWN_CODE_ERROR",ORIGINAL_CONTEXT_DELETED:"ORIGINAL_CONTEXT_DELETED",UNSUPPORTED_TYPE:"UNSUPPORTED_TYPE",VMAP_NETWORK_ERROR:"VMAP_NETWORK_ERROR",VMAP_PARSE_ERROR:"VMAP_PARSE_ERROR"}},557:function(e,t,n){"use strict";n.d(t,"c",(function(){return G})),n.d(t,"e",(function(){return K})),n.d(t,"a",(function(){return Q})),n.d(t,"f",(function(){return Y})),n.d(t,"b",(function(){return z})),n.d(t,"i",(function(){return X})),n.d(t,"g",(function(){return $})),n.d(t,"j",(function(){return Z})),n.d(t,"d",(function(){return ee}));n(23),n(42),n(37),n(15),n(18),n(43);var r=n(38),i=n.n(r),a=n(61),o=n.n(a),s=n(1),c=n.n(s),u=(n(319),n(28),n(36),n(565)),l=n(679),d=n(583),h=(n(322),n(63),n(78),n(3)),f=n.n(h),p=n(4),v=n.n(p),y=n(596),g=n(581),m=n(555),E=n(53),b=n.n(E);n(19),n(103);var T=/^[0-9]{1,6}(\.[0-9]+)?$/,_=/^([0-9]{0,3}[hH])?([0-9]{0,2}[mM])?([0-9]{0,6}[sS])?$/,O=n(643),P=(n(66),n(94),n(48),n(580));function I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var w={features:{fatalErrorRetryMax:3},translations:{}},R=function(){function e(t,n){f()(this,e),this.httpClient=t,this.logger=n}return v()(e,[{key:"load",value:function(e,t){var n=this;if(!this.httpClient)return Promise.reject(m.a.MEDIA_TEARDOWN_ERROR);var r=e.videoConfig,a=i()(e,["videoConfig"]);return(r&&(r.vmapUrl||e.videoConfig.variants&&e.videoConfig.variants.length>0)?this.loadStaticConfigState(r,e.source):this.loadDynamicConfigState(e.source,r,t)).then((function(e){return n.convertConfigStateToPlayerState(e,a,t)}))}},{key:"loadStaticConfigState",value:function(e,t){var n=this,r=function(){try{return JSON.parse(window.sessionStorage.getItem("TwitterVideoPlayerUserConfig"))}catch(e){}}(),i={eventId:e.eventId,posterImage:e.poster,track:{contentId:e.contentId,contentType:e.contentType,cta:e.cta,durationMs:e.durationMs,expandedUrl:e.expandedUrl,mediaAvailability:e.mediaAvailability,publisherId:e.publisherId,shouldLoop:e.loop,variants:e.variants,viewCount:e.viewCount,vmapUrl:e.vmapUrl}};if(!e.shouldLoadTranslations||!this._shouldLoadStaticConfig(t))return Promise.resolve(S(S({},w),i));var a=this.httpClient.dispatch({method:"GET",path:"/1.1/videos/static/config.json",host:"https://api.twitter.com"}).then((function(e){if(200!==e.status)throw new Error("".concat(m.a.CONFIG_USER_DATA_NETWORK_ERROR,":").concat(e.status));var t=JSON.parse(e.body);return function(e){try{window.sessionStorage.setItem("TwitterVideoPlayerUserConfig",JSON.stringify(e))}catch(e){}}(t),t}),(function(){throw new Error(m.a.CONFIG_USER_DATA_NETWORK_ERROR)})).catch((function(e){return n.logger.log("ConfigurationLoader","failed to load static configuration: ".concat(e)),S({},w)}));return(r?Promise.resolve(r):a).then((function(e){var t=e.features,n=e.translations;return S(S({},i),{},{features:t,translations:n})}))}},{key:"loadDynamicConfigState",value:function(e,t,n){if(e.type===P.a.BROADCAST&&t&&!t.shouldLoadTranslations)return Promise.resolve(S({},w));try{return this.httpClient.dispatch({method:"GET",path:this.getApiEndpointForPlayerSource(e),host:"https://api.twitter.com",params:{bitrate_cap:n.bitrateCap}}).then((function(e){if(200!==e.status)throw new Error("".concat(m.a.CONFIG_NETWORK_ERROR,":").concat(e.status));var n=JSON.parse(e.body);return t&&t.poster&&(n.posterImage=t.poster),n}),(function(){throw new Error(m.a.CONFIG_NETWORK_ERROR)}))}catch(e){return Promise.reject(e)}}},{key:"convertConfigStateToPlayerState",value:function(e,t,n){var r,a,o=e.track,s=e.translations,c=i()(e,["track","translations"]),u=n.reloadTimecode,l=function(e){if(T.test(e))return+e;var t=_.exec(e);if(t&&t[0]){var n=b()(t,4),r=n[1],i=n[2],a=n[3],o=0;return r&&(o+=3600*+r.slice(0,-1)),i&&(o+=60*+i.slice(0,-1)),a&&(o+=+a.slice(0,-1)),o}}(n.requestedTimecode),d=l>0||0===l?l:-1;!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e}(s),o&&(a=o.mediaAvailability,n.maxLoopCount&&(o.maxLoopCount=n.maxLoopCount,o.loopCounter=0),o.variants&&o.variants.length>0?r=o.variants:o.playbackUrl&&o.playbackType&&(r=[{src:o.playbackUrl,type:o.playbackType}])),Object(O.a)()&&(r=Object(g.a)(r));var h,f=Object(y.a)(a);if(f)switch(f){case m.a.ORIGINAL_CONTEXT_DELETED:case m.a.DMCA_TAKEDOWN_ERROR:throw new Error(f);case m.a.EUROPEAN_COPYRIGHT_VIOLATION:throw(h=new Error(f)).copyrightHolder=a.unavailability_info.copyright_violation.copyright_holder_name,h}return S(S(S({},t),c),{},{tracks:[S(S({},o),{},{id:0,displayType:"content",requestedTimecode:d,reloadTimecode:u,rotation:0,variants:r,currentVariantIndex:0})],currentTrackId:0,source:S(S({},t.source),{},{trackId:0}),mediaAvailability:a})}},{key:"getApiEndpointForPlayerSource",value:function(e){switch(e.type){case P.a.TWEET:var t=e.index>0?"/".concat(e.index):"";return"".concat("/1.1/videos/","tweet/config/").concat(e.id).concat(t,".json");case P.a.BROADCAST:return"".concat("/1.1/videos/","broadcast/config/").concat(e.id,".json");case P.a.DM:return"".concat("/1.1/videos/","dm/config/").concat(e.id,".json");default:throw new Error("".concat(m.a.UNSUPPORTED_TYPE,":").concat(e.type))}}},{key:"_shouldLoadStaticConfig",value:function(e){return e.type!==P.a.STATIC_BROADCAST}}]),e}(),k=n(582);function C(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function A(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?C(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var D="error",L="playback",M=function(){function e(t,n,r,i,a){f()(this,e),this.dispatch=t,this.httpClient=n,this.twitterAuthedHttpClient=r,this.playerId=i,this.showGeolocationPrompt=a}return v()(e,[{key:"load",value:function(e){if(!this.httpClient||!this.twitterAuthedHttpClient)return Promise.reject(m.a.MEDIA_TEARDOWN_ERROR);var t=e.tracks[0];return"live"!==t.contentType&&"broadcast"!==t.contentType?Promise.resolve(e):t.contentId?this.getUserPermission(t).then(this.getUserGeolocation.bind(this)).then(this.parseGeolocationData.bind(this)).then(this.acquireLiveStream.bind(this,e)).then(this.parseStreamAcquisitionResponse.bind(this)).then(this.setCookies.bind(this)).then(this.checkCookies.bind(this)).catch(this.handleRejectedPromises.bind(this)).then((function(n){var r=n.isLiveTimecode,i=n.playbackUrl,a=n.lifecycleToken,o=n.chatToken,s=n.broadcastShareUrl,c=n.restrictions;if(void 0!==c){if(void 0!==c.find((function(e){return"geoblocked"===e.restriction})))throw new Error(m.a.LIVE_VIDEO_GEOBLOCK_ERROR);var u=c.find((function(e){return"copyright-violation"===e.restriction}));if(void 0!==u){var l,d=u.copyright_violation_type;l=void 0!==d&&"TYPE_1"===d?m.a.EUROPEAN_COPYRIGHT_VIOLATION:m.a.LIVE_VIDEO_COPYRIGHT_VIOLATION_ERROR;var h=new Error(l);throw h.copyrightHolder=u.copyright_violation_copyright_holder_name,h}}return A(A({},e),{},{tracks:[A(A({},t),{},{isLive:"live"===t.contentType||t.isLive,isLiveTimecode:r,variants:[{src:i,type:"application/x-mpegURL"}],lifecycleToken:a,chatToken:o,broadcastShareUrl:s})]})})):Promise.reject(Error(m.a.LIVE_STREAM_ACQUISITION_MISSING_CONTENT_ID))}},{key:"getUserPermission",value:function(e){return e.isEventGeoblocked?this.showGeolocationPrompt?Promise.resolve({shouldGetGeolocation:!0}):"permissions"in navigator?navigator.permissions.query({name:"geolocation"}).then((function(e){var t="granted"===e.state;return Promise.resolve({shouldGetGeolocation:t})})):Promise.resolve({shouldGetGeolocation:!1}):Promise.resolve({shouldGetGeolocation:!1})}},{key:"getUserGeolocation",value:function(e){return e.shouldGetGeolocation&&"geolocation"in navigator?(this.dispatch(Object(u.g)(this.playerId)),new Promise((function(e){navigator.geolocation.getCurrentPosition((function(t){return e(t)}),(function(){return e()}))}))):Promise.resolve()}},{key:"parseGeolocationData",value:function(e){return Promise.resolve({latitude:e&&e.coords.latitude,longitude:e&&e.coords.longitude})}},{key:"acquireLiveStream",value:function(e,t){var n=this,r=this.getLiveStreamAcquisitionDetails(e,t),i=r.params,a=r.path,o=r.isLiveTimecode;return this.twitterAuthedHttpClient.dispatch({host:"https://api.twitter.com",method:"GET",params:i,path:a}).then((function(e){return e.status<200||e.status>=400?Promise.reject({type:D,reason:m.a.LIVE_STREAM_ACQUISITION_NETWORK_ERROR}):(n.dispatch(Object(u.f)(n.playerId)),Promise.resolve({body:e.body,isLiveTimecode:o}))}),(function(){return Promise.reject({type:D,reason:m.a.LIVE_STREAM_ACQUISITION_NETWORK_ERROR})}))}},{key:"getLiveStreamAcquisitionDetails",value:function(e,t){var n=t.latitude,r=t.longitude,i=e.client,a=e.source,o=a&&a.trackId||0,s=e.tracks[o],c={client:i,use_syndication_guest_id:"tfw"===i,lat:n,lng:r,cookie_set_host:new k.a(window.location.href).getHostname()},u=e.features&&e.features.isLiveTimecodeEnabled&&(s.requestedTimecode>0||0===s.requestedTimecode);return u&&(c.latest_replay_playlist=!0),{params:c,isLiveTimecode:u,path:"".concat("/1.1/live_video_stream/status/").concat(s.contentId)}}},{key:"parseStreamAcquisitionResponse",value:function(e){var t=JSON.parse(e.body);return t&&t.source&&t.source.noRedirectPlaybackUrl?Promise.resolve({cookieSetUrl:t.source.cookieSetUrl,isLiveTimecode:e.isLiveTimecode,playbackUrl:t.source.noRedirectPlaybackUrl,lifecycleToken:t.lifecycleToken,chatToken:t.chatToken,broadcastShareUrl:t.shareUrl,restrictions:t.restrictions}):Promise.reject({type:D,reason:m.a.LIVE_PARSE_ERROR})}},{key:"setCookies",value:function(e){var t=e.cookieSetUrl,n=i()(e,["cookieSetUrl"]);return t?this.httpClient.dispatch({method:"GET",path:t,host:"",withCredentials:!0}).then((function(){return Promise.resolve(e)}),(function(){return Promise.reject({type:L,payload:n})})):Promise.reject({type:L,payload:n})}},{key:"checkCookies",value:function(e){var t=new k.a(e.cookieSetUrl);return window.location.host===t.getHostname()?Promise.resolve(e):this.httpClient.dispatch({method:"GET",path:"https://t.lv.twimg.com/live_video_stream/cookie_check",host:"",withCredentials:!0}).then((function(t){return 400!==t.status?Promise.resolve(e):Promise.reject({type:D,reason:m.a.LIVE_VIDEO_NO_COOKIES_ERROR})}),(function(){return Promise.reject({type:D,reason:m.a.LIVE_VIDEO_NO_COOKIES_ERROR})}))}},{key:"handleRejectedPromises",value:function(e){if(e.type===L)return Promise.resolve(e.payload);var t=e.reason?new Error(e.reason):e;return Promise.reject(t)}}]),e}();n(665),n(330);function j(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function N(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var U=function(){function e(t){f()(this,e),this.httpClient=t}return v()(e,[{key:"load",value:function(e){var t=this;if(!this.httpClient)return Promise.reject(m.a.MEDIA_TEARDOWN_ERROR);var n=e.tracks[0];return"vmap"!==n.contentType?Promise.resolve(e):this.httpClient.dispatch({method:"GET",path:n.vmapUrl,host:"",withCredentials:!1}).then((function(r){if(r.status<200||r.status>=400)throw new Error(m.a.VMAP_NETWORK_ERROR);var i=t.parseVmap(r.body);return N(N({},e),{},{tracks:[N(N({},n),i)]})}),(function(){throw new Error(m.a.VMAP_NETWORK_ERROR)}))}},{key:"parseVmap",value:function(e){var t=(new window.DOMParser).parseFromString(e,"application/xml").getElementsByTagNameNS("http://twitter.com/schema/videoVMapV2.xsd","content")[0];if(void 0===t)throw new Error(m.a.VMAP_PARSE_ERROR);var n=t.getElementsByTagName("MediaFile")[0];if(void 0===n)throw new Error(m.a.VMAP_PARSE_ERROR);var r=n.textContent.trim().replace(/^http:\/\/amp\.twimg\.com\//,"https://amp.twimg.com/"),i=n.getAttribute("type")||function(e){var t=new k.a(e).getPath();return".m3u8"===t.slice(t.lastIndexOf("."))?"application/x-mpegURL":"video/mp4"}(r);return{publisherId:t.getAttribute("ownerId"),contentId:t.getAttribute("contentId"),variants:[{src:r,type:i}],cta:this.getCta(t)}}},{key:"getCta",value:function(e){var t=e.getElementsByTagNameNS("http://twitter.com/schema/videoVMapV2.xsd","cta_open_url")[0],n=e.getElementsByTagNameNS("http://twitter.com/schema/videoVMapV2.xsd","cta_watch_now")[0];return void 0!==t?{type:"url",url:t.getAttribute("url")}:void 0!==n?{type:"watch",url:n.getAttribute("url")}:void 0}}]),e}(),x=function(e,t,n,r,i,a,o){return[new R(n,o),new d.b(n,a),new U(t),new M(e,t,n,r,i)]},F=function(e,t,n,r){var i=Promise.resolve({source:e,videoConfig:t});return n.reduce((function(e,t){return e.then((function(e){return t.load(e,r)}))}),i)},V=n(570);function B(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function W(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?B(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var G="CONFIGURE_PLAYER",H=function(e,t,n,r,i,a,o,s,c){return{type:G,source:t,session:n,analytics:r,playerId:e,adProvider:i,videoConfig:a,promotedContext:o,initiallyMutedCaptions:s,intentToPlayTime:c}},K="RELOADING_PLAYER",J=function(e,t,n){return{type:K,playerId:e,source:t,session:n}},Q="BROADCAST_UPDATED",Y=function(e,t){return{type:Q,updatedState:t,playerId:e}},z="CONFIGURATION_LOADED",q=function(e,t){return{type:z,playerState:t,playerId:e}},X=function(e,t){return{type:"FEATURES_LOADED",features:t,playerId:e}},$=function(e,t,n,r,i,a,o,s){var c=arguments.length>8&&void 0!==arguments[8]?arguments[8]:{},l=arguments.length>9?arguments[9]:void 0;return function(h){return h(H(e,t,r,i,a,n,c.promotedContext,c.initiallyMutedCaptions,c.intentToPlayTime)),F(t,n,x(h,Object(V.c)(e),Object(V.e)(e),e,c.showGeolocationPrompt,c.includeBroadcastEventAssociation,l),c).then((function(t){if(h(q(e,t)),o(),Object(d.c)(t)){var n=t.source.id,r=new d.a(h,Object(V.e)(e),e,n,c.includeBroadcastEventAssociation);return r.queueUpdate(t.isLive).catch((function(t){h(Object(u.d)(e,t))})),r}})).catch((function(t){h(Object(u.d)(e,t)),s()}))}},Z=function(e,t,n,r,i,a){var o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{},s=arguments.length>7?arguments[7]:void 0;return function(c){return c(J(e,t,r)),F(t,n,x(c,Object(V.c)(e),Object(V.e)(e),e,o.showGeolocationPrompt,o.includeBroadcastEventAssociation,s),o).then((function(t){c(q(e,t)),i()})).catch((function(t){c(Object(u.d)(e,t)),a()}))}},ee=(t.h=function(e,t){switch(t.type){case G:case K:return W(W(W({},e),t.promotedContext),{},{source:t.source,session:t.session,playerId:t.playerId,configuration:{loading:!0}});case z:var n=e.currentTrackId?e.currentTrackId:t.playerState.currentTrackId,r=[].concat(o()(t.playerState.tracks||[]),o()(e.tracks||[]));return t.playerState.features.isDebuggingEnabled&&(l.a.debuggingEnabled=!0),W(W(W({},e),t.playerState),{},{currentTrackId:n,features:W(W({},e.features),t.playerState.features),tracks:r,configuration:{loading:!1}});case"FEATURES_LOADED":return W(W({},e),{},{features:W(W({},e.features),t.features)});case Q:var a=t.updatedState,s=a.cta,c=a.isLive,u=a.viewerCount,d=a.viewCount,h=i()(a,["cta","isLive","viewerCount","viewCount"]),f=function(e){var t=e.tracks;return{sourceTrack:t.find((function(t){return t.id===e.source.trackId})),otherTracks:t.filter((function(t){return t.id!==e.source.trackId}))}}(e),p=f.sourceTrack,v=f.otherTracks;return p&&(0===p.requestedTimecode||p.requestedTimecode>0)&&delete h.posterImage,W(W(W({},e),h),{},{tracks:[].concat(o()(v),[W(W({},p),{},{cta:s,isLive:c,viewerCount:u,viewCount:d})])});default:return e}},{configuration:{loading:!1,error:void 0},tracks:[]})},559:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return a}));var r={EVENT:"event",VISIT:"url",WATCH:"watch",IMAGE:"image",WATCH_NOW:"watch_now",SHOP:"shop"},i=3,a=["cover","contain"]},561:function(e,t,n){"use strict";n.d(t,"c",(function(){return l})),n.d(t,"f",(function(){return d})),n.d(t,"b",(function(){return h})),n.d(t,"e",(function(){return f})),n.d(t,"a",(function(){return p}));n(23),n(42),n(28),n(37),n(15),n(18),n(43);var r=n(1),i=n.n(r),a=(n(319),n(557)),o=n(571),s=n(553);function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var l="PLAY_PREVIEW",d=function(e){return{type:l,playerId:e}},h="PAUSE_PREVIEW",f=function(e){return{type:h,playerId:e}};t.d=function(e,t){switch(t.type){case a.c:return u(u({},e),{},{initiallyMutedCaptions:t.initiallyMutedCaptions});case l:return e.isPlaying?e:u(u({},e),{},{isPreview:!0,controls:u(u({},e.controls),{},{muteState:s.j.MUTE_REQUESTED})});case h:return u(u({},e),{},{isPreview:!0,controls:u(u({},e.controls),{},{muteState:s.j.MUTE_REQUESTED})});case s.p:case s.r:case s.t:case s.u:case s.s:case o.b:if(!e.isPreview)return e;var n=e.tracks.find((function(t){return t.id===e.currentTrackId}));if(!n)return e;var r="gif"===n.contentType?void 0:s.j.UNMUTE_REQUESTED;return u(u({},e),{},{isPreview:!1,controls:u(u({},e.controls),{},{muteState:r})});default:return e}};var p={isPreview:!1}},564:function(e,t,n){"use strict";n.d(t,"e",(function(){return h})),n.d(t,"q",(function(){return f})),n.d(t,"f",(function(){return p})),n.d(t,"r",(function(){return v})),n.d(t,"c",(function(){return y})),n.d(t,"n",(function(){return g})),n.d(t,"d",(function(){return m})),n.d(t,"o",(function(){return E})),n.d(t,"p",(function(){return b})),n.d(t,"b",(function(){return T})),n.d(t,"k",(function(){return _})),n.d(t,"l",(function(){return I})),n.d(t,"m",(function(){return S})),n.d(t,"i",(function(){return w})),n.d(t,"h",(function(){return R})),n.d(t,"g",(function(){return k})),n.d(t,"a",(function(){return M}));n(23),n(42),n(37),n(15),n(18),n(43);var r=n(61),i=n.n(r),a=n(869),o=n.n(a),s=n(1),c=n.n(s),u=(n(319),n(28),n(156),n(103),n(36),n(553));function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var h="TICK",f=function(e,t,n,r,i,a){return{type:h,currentTimeMs:t,absoluteTimeMs:n,durationMs:r,playerId:e,hasCaptions:i,currentVariantIndex:a}},p="TRACK_FINISHED",v=function(e){return{type:p,playerId:e}},y="NEXT_TRACK",g=function(e){return{type:y,playerId:e}},m="PLAYER_READY",E=function(e){return{type:m,playerId:e}},b=function(e,t){return{type:"ROTATION_UPDATED",playerId:e,rotation:t}},T="HLSJS_READY",_=function(e){return{type:T,playerId:e}},O=new Date("Jan 01 1900 GMT").getTime(),P=new Date("Jan 01 1970 GMT").getTime()-O,I=function(e,t){return{type:"ID3_METADATA",playerId:e,metadata:t}},S=function(e,t){return{type:"ID3_TAG_DATA",playerId:e,id3Json:t,currentNtpTime:(Date.now()+P)/1e3}},w=function(e){return{type:"BUFFER_START",playerId:e}},R=function(e){return{type:"BUFFER_END",playerId:e}},k=function(e,t){return{type:"BITRATE_SWITCHED",playerId:e,bitrate:t}},C=function(e){var t=e.tracks;return{currentTrack:t.find((function(t){return t.id===e.currentTrackId})),otherTracks:t.filter((function(t){return t.id!==e.currentTrackId}))}},A=function(e,t){var n=C(e),r=n.currentTrack,i=n.otherTracks;return i.splice(e.currentTrackId,0,t(r)),d(d({},e),{},{tracks:i})},D=function(e,t){return A(e,(function(e){return d(d({},e),t)}))};t.j=function(e,t){switch(t.type){case h:return D(e,{durationMs:t.durationMs,currentTimeMs:t.currentTimeMs,absoluteTimeMs:t.absoluteTimeMs,hasCaptions:t.hasCaptions,currentVariantIndex:t.currentVariantIndex});case u.y:return d(d({},A(e,(function(e){return d(d({},e),{},{playbackCompleted:!1})}))),{},{tracksFinished:!1});case m:return D(e,{playerReady:!0});case"ROTATION_UPDATED":return D(e,{rotation:t.rotation});case"ID3_METADATA":var n=t.metadata,r=e;return n&&(r=D(r,{metadata:n})),r;case"ID3_TAG_DATA":var i=t.id3Json,a=t.currentNtpTime,o=i.ntp,s=e;if(o)s=D(s,{liveLatencyMs:1e3*(a-o)});return s;case"BITRATE_SWITCHED":return D(e,{currentBitrate:t.bitrate});case"BUFFER_START":return D(e,{isBuffering:!0});case"BUFFER_END":return D(e,{isBuffering:!1});case y:return L(e,!0);case p:var c=A(e,(function(e){return d(d({},e),{},{playbackCompleted:!0})}));return L(c);default:return e}};var L=function(e,t){var n,r=C(e).currentTrack,a=!1!==r.shouldAutoAdvance||t,s="ad"===r.displayType&&(null===(n=e.errorInfo)||void 0===n?void 0:n.adFailed);if(e.nextTrackIds.length>0&&a){var c=o()(e.nextTrackIds),l=c[0],h=c.slice(1),f=e.tracks,p=f.find((function(e){return e.id===l})),v=f.filter((function(e){return e.id!==l}));return d(d({},e),{},{currentTrackId:l,nextTrackIds:h,error:s?void 0:e.error,controls:d(d({},e.controls),{},{playState:s&&!e.isPlaying?void 0:u.k.PLAY_REQUESTED,captionsState:e.areCaptionsShown?u.f.CAPTIONS_ON_REQUESTED:u.f.CAPTIONS_OFF_REQUESTED}),intentToPlayTime:void 0,tracks:[].concat(i()(v),[d(d({},p),{},{playerReady:!1})])})}return d(d({},e),{},{intentToPlayTime:void 0,isPlaying:!!r.shouldLoop,tracksFinished:!r.shouldLoop&&0===e.nextTrackIds.length})},M={nextTrackIds:[]}},565:function(e,t,n){"use strict";n.d(t,"c",(function(){return l})),n.d(t,"h",(function(){return d})),n.d(t,"a",(function(){return h})),n.d(t,"d",(function(){return f})),n.d(t,"f",(function(){return p})),n.d(t,"g",(function(){return v})),n.d(t,"b",(function(){return E}));n(23),n(42),n(28),n(37),n(15),n(18),n(43);var r=n(1),i=n.n(r),a=(n(323),n(596)),o=n(555),s=n(557);function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var l="PLAYBACK_ERROR",d=function(e,t){return{type:l,playerId:e,thrownError:t,isFatal:!0}},h="CONFIGURATION_LOAD_ERROR",f=function(e,t){return{type:h,playerId:e,thrownError:t,isFatal:!0}},p=function(e){return{type:"ERROR_RESOLVED",playerId:e}},v=function(e){return{type:"GEOLOCATION_PROMPT",playerId:e}},y=function(e){switch(e.message){case o.a.BROADCAST_ENDED_NO_REPLAY:case o.a.BROADCAST_NOT_FOUND:case o.a.DMCA_TAKEDOWN_ERROR:case o.a.EUROPEAN_COPYRIGHT_VIOLATION:case o.a.ORIGINAL_CONTEXT_DELETED:case o.a.LIVE_VIDEO_GEOBLOCK_ERROR:case o.a.LIVE_VIDEO_COPYRIGHT_VIOLATION_ERROR:case o.a.LIVE_VIDEO_GEOLOCATION_PROMPT:case o.a.MEDIA_GEOBLOCK_ERROR:case o.a.MEDIA_NOT_SUPPORTED:return!1;default:return!0}},g=function(e){if(!y(e))return!1;switch(e.message){case o.a.LIVE_VIDEO_NO_COOKIES_ERROR:return!1;default:return!0}},m=function(e,t){var n,r=t.currentTrackId,i=t.errorInfo,a=t.tracks,o=i.count+1,s=y(e),c=g(e)&&o<=i.retryMax,u="ad"===(null==a||null===(n=a[r])||void 0===n?void 0:n.displayType)?!c||!s:t.errorInfo.adFailed;return{backoffMs:c?1e3*t.errorInfo.count:E.backoffMs,count:o,canRetry:s,autoRetry:c,adFailed:u}};t.e=function(e,t){switch(t.type){case s.b:var n=parseInt(e.features.fatalErrorRetryMax,10),r=isNaN(n)?E.errorInfo.retryMax:n;return u(u({},e),{},{errorInfo:u(u({},e.errorInfo),{},{retryMax:r})});case s.e:return u(u({},e),{},{error:void 0,errorInfo:u(u({},e.errorInfo),{},{autoRetry:!1,canRetry:!1})});case h:var i,c=t.thrownError,d=m(c,e);return c.message!==o.a.LIVE_VIDEO_COPYRIGHT_VIOLATION_ERROR&&c.message!==o.a.EUROPEAN_COPYRIGHT_VIOLATION||(i={copyrightHolder:c.copyrightHolder}),u(u({},e),{},{error:c.message,errorData:i,errorInfo:u(u({},e.errorInfo),d)});case l:var f=t.thrownError,p=Object(a.a)(e.mediaAvailability),v=p?new Error(p):f,b=m(v,e);return u(u({},e),{},{error:v.message,errorInfo:u(u({},e.errorInfo),b)});case"ERROR_RESOLVED":return u(u({},e),{},{error:void 0,errorInfo:u(u({},e.errorInfo),{},{autoRetry:!1,canRetry:!1})});case"GEOLOCATION_PROMPT":var T=new Error(o.a.LIVE_VIDEO_GEOLOCATION_PROMPT);return u(u({},e),{},{error:T.message,errorInfo:u(u({},e.errorInfo),{},{autoRetry:g(T),canRetry:y(T)})});default:return e}};var E={error:void 0,errorInfo:{adFailed:!1,autoRetry:!1,backoffMs:void 0,canRetry:!1,count:0,retryMax:0},errorData:void 0}},568:function(e,t,n){n(198)("iterator")},570:function(e,t,n){"use strict";n.d(t,"f",(function(){return i})),n.d(t,"h",(function(){return a})),n.d(t,"c",(function(){return o})),n.d(t,"e",(function(){return s})),n.d(t,"d",(function(){return c})),n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return l})),n.d(t,"g",(function(){return h}));n(319),n(103),n(28);var r={},i=function(e,t,n,i,a,o){r[e]={httpClient:t,twitterAuthedHttpClient:n,errorLogger:i,hlsJsDataUsageTracker:a,featureProvider:o}},a=function(e){delete r[e]},o=function(e){return r[e]&&r[e].httpClient},s=function(e){return r[e]&&r[e].twitterAuthedHttpClient},c=function(e,t){r[e]&&t(r[e].errorLogger)},u=function(e){return function(e){return r[e]||{}}(e).featureProvider},l=function(e,t){r[e]&&t(r[e].hlsJsDataUsageTracker)},d=[],h=function(e){if(!e)throw new SyntaxError("Missing parameter: playbackSessionId");var t=d.find((function(t){return t.playbackSessionId===e}));return d=d.filter((function(t){return t.playbackSessionId!==e})),t}},571:function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"f",(function(){return c})),n.d(t,"c",(function(){return u})),n.d(t,"g",(function(){return l})),n.d(t,"d",(function(){return d})),n.d(t,"h",(function(){return h})),n.d(t,"a",(function(){return f}));n(23),n(42),n(28),n(37),n(15),n(18),n(43);var r=n(1),i=n.n(r);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var s="REQUEST_FULLSCREEN",c=function(e,t,n){return{type:s,playerId:e,containerEl:t,videoEl:n}},u="REQUEST_SHRINK",l=function(e,t){return{playerId:e,type:u,element:t}},d="SET_FULLSCREEN_STATE",h=function(e,t){return{type:d,playerId:e,isFullscreen:t}};t.e=function(e,t){switch(t.type){case d:return o(o({},e),{},{fullscreen:o(o({},e.fullscreen),{},{isFullscreen:t.isFullscreen})});default:return e}};var f={fullscreen:{isFullscreen:!1}}},580:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));n(65);var r=Object.freeze({BROADCAST:"broadcast",DM:"dm",TWEET:"tweet",STATIC_BROADCAST:"static_broadcast"})},581:function(e,t,n){"use strict";n.d(t,"d",(function(){return c})),n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return l})),n.d(t,"a",(function(){return h}));var r=n(1),i=n.n(r),a=(n(319),n(28),n(94),n(19),n(66),n(90),n(63),n(23),n(42),n(37),n(15),n(18),n(43),n(582));function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var c=function(e,t){if(e.tracks)return e.tracks.find((function(e){return e.id===t}))},u=function(e){return c(e,e.currentTrackId)},l=function(e){return e.tracks?e.tracks.filter((function(t){return t.id!==e.currentTrackId})):[]},d=new RegExp(/^https:\/\/[\w-]+.twimg.com\/.+\.m3u8/),h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.map(f)},f=function(e){var t=e.src;if(d.test(t)){var n=new a.a(t);n.addSearchParam("descending",!0),t=n.toString()}return s(s({},e),{},{src:t})}},582:function(e,t,n){"use strict";n.d(t,"b",(function(){return s}));var r=n(3),i=n.n(r),a=n(4),o=n.n(a);n(114),n(90),n(23),n(36),n(332),n(63),n(92),n(93),n(115),n(80),n(19),n(197);function s(e){return Object.keys(e).map((function(t){var n=void 0===e[t]?"":encodeURIComponent(e[t]);return"".concat(encodeURIComponent(t),"=").concat(n)})).join("&")}var c=function(){function e(t){i()(this,e);try{this.parser=new URL(t)}catch(e){this.parser=document.createElement("a"),this.parser.href=t}}return o()(e,[{key:"getHostname",value:function(){return this.parser.hostname}},{key:"getPath",value:function(){return this.parser.pathname}},{key:"isSafe",value:function(){return!!this.parser.protocol.match(/^https?:$/)}},{key:"addSearchParam",value:function(e,t){this.parser.search?this.parser.search="".concat(this.parser.search,"&").concat(e,"=").concat(t):this.parser.search="?".concat(e,"=").concat(t)}},{key:"toString",value:function(){return this.parser.href}}]),e}();t.a=c},583:function(e,t,n){"use strict";n.d(t,"c",(function(){return T})),n.d(t,"a",(function(){return _})),n.d(t,"b",(function(){return O}));var r=n(3),i=n.n(r),a=n(4),o=n.n(a),s=n(1),c=n.n(s),u=n(38),l=n.n(u),d=(n(114),n(322),n(63),n(36),n(42),n(193),n(323),n(23),n(28),n(37),n(15),n(18),n(43),n(557)),h=n(559),f=n(555),p=n(581),v=n(580);function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return{ids:e.join(","),include_events:t}},E=function(e,t,n){try{return e.dispatch({method:"GET",host:"https://api.twitter.com",path:"/1.1/broadcasts/show.json",params:m([t],n),withCredentials:!0}).then((function(e){if(200!==e.status)return Promise.reject("".concat(f.a.BROADCAST_REQUEST_ERROR,":").concat(e.status));var n=JSON.parse(e.body),r=n.broadcasts,i=n.events;if(!r||!r[t]||!r[t].broadcast_id)return Promise.reject(f.a.BROADCAST_NOT_FOUND);if("RUNNING"!==r[t].state&&!r[t].available_for_replay)return Promise.reject(f.a.BROADCAST_ENDED_NO_REPLAY);var a={broadcast:r[t]};return i&&i[t]&&i[t].length&&(a.associatedEvent=i[t][0]),a}),(function(e){return console.log(e),Promise.reject(f.a.BROADCAST_REQUEST_ERROR)}))}catch(e){return Promise.reject(e)}},b=function(e){var t=e.broadcast,n=e.associatedEvent,r=void 0===n?{}:n,i=t.state,a=t.total_watched,o=t.total_watching,s=t.image_url,c=t.start_ms,u=t.ping_ms,l=t.timedout_ms,d=t.end_ms,f=r.description,p=r.title,v=r.url,y=r.id,g="RUNNING"===i,m=s,E=parseInt(o,10)||0,b=parseInt(a,10)||0,T={isLive:g,viewerCount:g?E:b,posterImage:m,eventDescription:f,eventTitle:p,eventUrl:v,eventId:y};if(p&&v&&(T.cta={label:p,type:h.a.EVENT,url:v}),!g){var _=(d||l||u||c)-c;T.durationMs=_}return T},T=function(e){return e.source&&e.source.type===v.a.BROADCAST},_=function(){function e(t,n,r,a,o){i()(this,e),this.dispatch=t,this.httpClient=n,this.playerId=r,this.broadcastId=a,this.includeBroadcastEventAssociation=o,this.updaterTimeout=null}return o()(e,[{key:"queueUpdate",value:function(e){var t,n,r=this,i=e?15:30,a=new Promise((function(e,r){t=e,n=r}));return this.updaterTimeout=setTimeout((function(){var e,i,a;(e=r.httpClient,i=r.broadcastId,a=r.includeBroadcastEventAssociation,E(e,i,a).then((function(e){return b(e)}),(function(e){throw new Error(e)}))).then((function(e){null!=r.updaterTimeout&&(r.queueUpdate(e.isLive),r.dispatch(Object(d.f)(r.playerId,e))),t()}),(function(e){console.log(e),n(e)}))}),1e3*i),a}},{key:"cancelUpdate",value:function(){clearTimeout(this.updaterTimeout),this.updaterTimeout=null}}]),e}(),O=function(){function e(t,n){i()(this,e),this.httpClient=t,this.includeBroadcastEventAssociation=n}return o()(e,[{key:"load",value:function(e){return this.httpClient?function(e,t,n){if(!T(t))return Promise.resolve(t);var r=t.source.id;return E(e,r,n).then((function(e){var n,r,i,a,o,s,c,u,d,h,f=Object(p.d)(t,0),v=(n=e.broadcast,r=n.broadcast_id,i=n.media_key,a=n.profile_image_url,o=n.replay_edited_start_time,s=n.requires_fine_grain_geoblocking,c=n.twitter_user_id,u=n.user_id,d=n.unavailable_in_periscope,h=n.user_display_name,{broadcastId:r,contentId:i,contentType:"broadcast",displayType:"content",expandedUrl:"https://www.pscp.tv/w/".concat(r),isEventGeoblocked:s,playbackType:"application/x-mpegURL",publisherDisplayName:h,publisherId:c,periscopePublisherId:u,publisherProfileImageUrl:a,replayEditedStartTime:o,shouldLoop:!1,unavailableInPeriscope:d}),y=b(e),m=y.cta,E=y.durationMs,T=y.isLive,_=y.viewerCount,O=y.viewCount,P=l()(y,["cta","durationMs","isLive","viewerCount","viewCount"]);return t.posterImage&&delete P.posterImage,g(g(g({},t),P),{},{client:"web",tracks:[g(g(g({},f),v),{},{cta:m,durationMs:E,id:0,isLive:T,viewerCount:_,viewCount:O})],currentTrackId:0,source:g(g({},t.source),{},{trackId:0})})}),(function(e){throw new Error(e)}))}(this.httpClient,e,this.includeBroadcastEventAssociation):Promise.reject(f.a.MEDIA_TEARDOWN_ERROR)}}]),e}()},593:function(e,t){var n,r,i=e.exports={};function a(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===a||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:a}catch(e){n=a}try{r="function"==typeof clearTimeout?clearTimeout:o}catch(e){r=o}}();var c,u=[],l=!1,d=-1;function h(){l&&c&&(l=!1,c.length?u=c.concat(u):d=-1,u.length&&f())}function f(){if(!l){var e=s(h);l=!0;for(var t=u.length;t;){for(c=u,u=[];++d<t;)c&&c[d].run();d=-1,t=u.length}c=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===o||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function v(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new p(e,t)),1!==u.length||l||s(f)},p.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=v,i.addListener=v,i.once=v,i.off=v,i.removeListener=v,i.removeAllListeners=v,i.emit=v,i.prependListener=v,i.prependOnceListener=v,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},594:function(e,t,n){"use strict";n(23),n(42),n(28),n(37),n(15),n(18),n(43);var r=n(1),i=n.n(r),a=n(860);function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var c={showControls:!0,promotedContext:{}};t.a={createPlayer:function(e){var t=e.domElement,n=e.source,r=e.videoConfig,i=e.httpClient,o=e.twitterAuthedHttpClient,u=e.options,l=void 0===u?{}:u;return new a.a({videoConfig:r,source:n,domElement:t,httpClient:i,twitterAuthedHttpClient:o,options:s(s({},c),l)})}}},595:function(e,t,n){"use strict";t.a={BROADCAST_EVENT_ASSOCIATION_UPDATED:"broadcastEventAssociationUpdated",FULLSCREEN_ENTERED:"fullscreenEntered",FULLSCREEN_EXITED:"fullscreenExited",HLSJS_INSTANTIATED:"hlsJsInstantiated",GEOBLOCK_ERROR:"geoblockError",LIVE_ENDED:"liveEnded",LIVE_STARTED:"liveStarted",LIVE_CLICKTHROUGH:"liveClickthrough",MUTE:"mute",NO_COOKIES_ERROR:"noCookiesError",PAUSE:"pause",PLAY:"play",PLAYBACK_COMPLETE:"playbackComplete",READY:"ready",UNMUTE:"unmute"}},596:function(e,t,n){"use strict";n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return o}));n(319),n(23);var r=n(555);function i(e,t){var n=e.getState();if(n&&n.players&&n.players[t])return n.players[t]}var a=function(e){if(e&&"unavailable"===e.status)switch(e.reason){case"geoblocked":return r.a.MEDIA_GEOBLOCK_ERROR;case"deleted":return r.a.ORIGINAL_CONTEXT_DELETED;case"dmcaed":return r.a.DMCA_TAKEDOWN_ERROR;case"copyright_violation":return r.a.EUROPEAN_COPYRIGHT_VIOLATION}return null},o=function(e,t){var n=Object.keys(e).find((function(n){return t(e[n])}));return void 0!==n?e[n]:void 0}},597:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return a})),n.d(t,"d",(function(){return o})),n.d(t,"e",(function(){return s}));var r="web_video_bitrate_persistence_enabled",i="web_video_hlsjs_version",a="web_video_hlsjs_worker_enabled",o="web_video_smart_buffering_enabled",s="web_video_smart_buffering_preroll_prebuffering_enabled"},606:function(e,t,n){"use strict";n.d(t,"a",(function(){return C})),n.d(t,"c",(function(){return A}));n(23),n(42),n(28),n(37),n(15),n(18),n(43);var r=n(1),i=n.n(r),a=(n(78),n(680)),o=n(561),s=n(34),c=n.n(s),u=n(61),l=n.n(u),d=n(38),h=n.n(d),f=(n(90),n(36),n(437),n(438),n(193),n(63),n(194),n(557)),p=n(564),v=n(553),y=n(581);function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function E(e){var t=function(e,t){if("object"!==c()(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==c()(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===c()(t)?t:String(t)}var b=function(e,t){e[t];return h()(e,[t].map(E))},T=function(e){var t=e.intentToPlayTime;return void 0===t?new Date:t},_={volume:1,areCaptionsShown:!1,hasCaptions:!1,hasPlaybackStarted:!1,intentToPlayTime:void 0,isMuted:!1,isPlaying:!1,isScrubbing:!1,controls:{isHidden:!0,isPosterShown:!0}},O=n(565),P=n(571),I=n(644);function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var R=w(w(w(w(w(w(w(w(w({},a.a),o.a),_),f.d),O.b),P.a),I.b),p.a),{},{percentVisible:1,percentOfViewportOccupied:1,sizesInfo:{}}),k=[a.c,f.h,function(e,t){var n;switch(t.type){case f.c:return m(m({},e),{},{intentToPlayTime:t.intentToPlayTime});case v.p:case o.c:return e.isPlaying&&e.controls.playState!==v.k.PAUSE_REQUESTED?e:m(m({},e),{},{intentToPlayTime:T(e),controls:m(m({},e.controls),{},{playState:v.k.PLAY_REQUESTED})});case o.b:case v.o:case v.b:return e.isPlaying||e.controls.playState===v.k.PLAY_REQUESTED?m(m({},e),{},{controls:m(m({},e.controls),{},{playState:v.k.PAUSE_REQUESTED})}):e;case v.r:var r=Object(y.b)(e),i=Object(y.c)(e);return r&&"maxLoopCount"in r&&(r.loopCounter=0,r.shouldLoop=!0),m(m({},e),{},{intentToPlayTime:T(e),tracks:r?[].concat(l()(i),[m({},r)]):e.tracks,controls:m(m({},e.controls),{},{isReplayButtonShown:!1,playState:v.k.PLAY_REQUESTED})});case v.y:return n=b(e.controls,"playState"),e.controls.playState!==v.k.PLAY_REQUESTED&&(n.playState=e.controls.playState),n.isPosterShown=!1,m(m({},e),{},{controls:n,hasPlaybackStarted:!0,isPlaying:!0});case v.x:return n=b(e.controls,"playState"),e.controls.playState!==v.k.PAUSE_REQUESTED&&(n.playState=e.controls.playState),m(m({},e),{},{controls:n,isPlaying:!1});case v.n:return m(m({},e),{},{controls:m(m({},e.controls),{},{muteState:v.j.MUTE_REQUESTED})});case v.t:return n=m(m({},e.controls),{},{muteState:v.j.UNMUTE_REQUESTED}),0!==e.volume||e.controls.volume>0||(n.volume=1),m(m({},e),{},{controls:n});case v.u:return n=m(m({},e.controls),{},{volume:t.volume}),0!==t.volume||e.isMuted?t.volume>0&&e.isMuted&&(n.muteState=v.j.UNMUTE_REQUESTED):n.muteState=v.j.MUTE_REQUESTED,m(m({},e),{},{controls:n});case v.B:return n=b(b(e.controls,"muteState"),"volume"),e.controls.muteState!==v.j.MUTE_REQUESTED||t.isMuted?e.controls.muteState===v.j.UNMUTE_REQUESTED&&t.isMuted&&(n.muteState=v.j.UNMUTE_REQUESTED):n.muteState=v.j.MUTE_REQUESTED,t.volume!==e.controls.volume&&(n.volume=e.controls.volume),m(m({},e),{},{controls:n,volume:t.volume,isMuted:t.isMuted});case v.s:return m(m({},e),{},{isScrubbing:!0,controls:m(m({},e.controls),{},{scrubToFraction:t.fraction})});case v.q:var a=t.startTimeS,s=t.endTimeS;return m(m({},e),{},{controls:m(m({},e.controls),{},{playbackTimeRange:{startTimeS:a,endTimeS:s}})});case v.z:return n=b(e.controls,"scrubToFraction"),m(m({},e),{},{isScrubbing:!1,controls:n});case v.d:return n=b(e.controls,"playbackTimeRange"),m(m({},e),{},{controls:n});case v.A:return m(m({},e),{},{isScrubbing:!0});case v.h:return m(m({},e),{},{controls:m(m({},e.controls),{},{isHidden:!0})});case v.v:return m(m({},e),{},{controls:m(m({},e.controls),{},{isHidden:!1})});case v.m:return m(m({},e),{},{userSpecifiedCaptions:t.isUserSet,controls:m(m({},e.controls),{},{captionsState:v.f.CAPTIONS_ON_REQUESTED})});case v.l:return m(m({},e),{},{userSpecifiedCaptions:t.isUserSet,controls:m(m({},e.controls),{},{captionsState:v.f.CAPTIONS_OFF_REQUESTED})});case v.e:return n=b(e.controls,"captionsState"),m(m({},e),{},{areCaptionsShown:t.areCaptionsShown,controls:n});case p.f:var c=m({},e),u=Object(y.b)(e),d=Object(y.c)(e);u&&"maxLoopCount"in u&&(u.loopCounter>=u.maxLoopCount-1?u.shouldLoop=!1:u.loopCounter+=1,c.tracks=[].concat(l()(d),[m({},u)]));var h=(u||{}).shouldLoop;return 0===e.nextTrackIds.length&&(e.isPreview?c.controls=m(m({},e.controls),{},{isPosterShown:!h}):c.controls=m(m({},e.controls),{},{isHidden:h,isReplayButtonShown:!h,playState:h?void 0:v.k.PAUSE_REQUESTED})),c;case v.w:return m(m({},e),{},{percentVisible:t.percentVisible,percentOfViewportOccupied:t.percentOfViewportOccupied,sizesInfo:t.sizesInfo||{}});case v.a:n=b(e.controls,"playState"),e.controls.playState!==v.k.PLAY_REQUESTED&&(n.playState=e.controls.playState);var g=Object(y.b)(e),E=Object(y.c)(e);return m(m({},e),{},{controls:m(m({},n),{},{isPosterShown:!0}),tracks:[].concat(l()(E),[m(m({},g),{},{isBuffering:!1})])});case v.g:var _=void 0===e.dataUsageBytes?t.bytes:e.dataUsageBytes+t.bytes;return m(m({},e),{},{dataUsageBytes:_});case v.i:var O=e.liveClickthroughClicked||0;return m(m({},e),{},{liveClickthroughClicked:1+O});default:return e}},p.j,o.d,O.e,P.e,I.e],C="TEARDOWN_PLAYER",A=function(e){return{type:C,playerId:e}},D=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;return n.reduce((function(e,n){return n(e,t)}),e)};t.b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:k;if(void 0!==t.playerId){if(t.type===C){var r=w({},e);return delete r[t.playerId],r}var a=e[t.playerId];if(t.type===f.e){if(!a)return e;a=w(w({},R),{},{errorInfo:a.errorInfo,features:a.features})}var o=D(a,t,n);if(void 0!==o)return w(w({},e),{},i()({},t.playerId,o))}return e}},623:function(e,t,n){var r=n(59),i=Date.prototype,a=i.toString,o=i.getTime;new Date(NaN)+""!="Invalid Date"&&r(i,"toString",(function(){var e=o.call(this);return e==e?a.call(this):"Invalid Date"}))},624:function(e,t,n){n(9)({target:"Array",stat:!0},{isArray:n(127)})},626:function(e,t,n){n(9)({target:"Number",stat:!0},{MAX_SAFE_INTEGER:9007199254740991})},640:function(e,t,n){var r=n(9),i=n(448);r({target:"Object",stat:!0,forced:Object.assign!==i},{assign:i})},641:function(e,t,n){"use strict";n.d(t,"a",(function(){return w}));n(56),n(23),n(42),n(28),n(37),n(15),n(18),n(43),n(437),n(438),n(193),n(194);var r=n(34),i=n.n(r),a=n(38),o=n.n(a),s=n(3),c=n.n(s),u=n(4),l=n.n(u),d=n(6),h=n.n(d),f=n(16),p=n.n(f),v=n(20),y=n.n(v),g=n(10),m=n.n(g),E=n(1),b=n.n(E),T=(n(36),n(322),n(63),n(90),n(0));function _(e){var t=function(e,t){if("object"!==i()(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==i()(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===i()(t)?t:String(t)}function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){b()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function I(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=m()(e);if(t){var i=m()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return y()(this,n)}}var S=function(e){p()(n,e);var t=I(n);function n(){var e;c()(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return e=t.call.apply(t,[this].concat(i)),b()(h()(e),"state",{playerApi:void 0,playerState:void 0,guestsState:void 0}),b()(h()(e),"_initializeState",(function(t){t&&(e._unsubscribe&&e._unsubscribe(),e.setState({playerApi:t}),e._unsubscribe=t.subscribe((function(t,n){return e.setState({playerState:t,guestsState:n})})))})),e}return l()(n,[{key:"componentDidMount",value:function(){this._initializeState(this.props.playerApi)}},{key:"componentDidUpdate",value:function(e){var t=this.props.playerApi;t!==e.playerApi&&this._initializeState(t)}},{key:"render",value:function(){return this.props.children(this.state)}}]),n}(T.Component),w=function(e){p()(n,e);var t=I(n);function n(){var e;c()(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return e=t.call.apply(t,[this].concat(i)),b()(h()(e),"state",{players:{}}),b()(h()(e),"_mounted",!1),b()(h()(e),"_registerPlayer",(function(t,n){var r=new Promise((function(r){setTimeout((function(){e._mounted?e.setState((function(e){return{players:P(P({},e.players),{},b()({},t,n))}}),r):r()}))}));return function(){r.then((function(){return e._unregisterPlayer(t)}))}})),b()(h()(e),"_unregisterPlayer",(function(t){e._mounted&&e.setState((function(n){var r=e.state.players;r[t];return{players:o()(r,[t].map(_))}}))})),b()(h()(e),"_registrationContext",{registerPlayer:e._registerPlayer}),e}return l()(n,[{key:"componentDidMount",value:function(){this._mounted=!0}},{key:"componentWillUnmount",value:function(){this._mounted=!1}},{key:"render",value:function(){return T.createElement(n.RegistrationContext.Provider,{value:this._registrationContext},T.createElement(n.ProviderContext.Provider,{value:this.state},this.props.children))}}]),n}(T.Component);b()(w,"MetadataSubscriber",(function(e){var t=e.playerId,n=e.children;return T.createElement(w.ProviderContext.Consumer,null,(function(e){var r=e.players;return T.createElement(S,{playerApi:r&&r[t]},n)}))})),b()(w,"RegistrationContext",T.createContext({registerPlayer:void 0})),b()(w,"ProviderContext",T.createContext({players:{}}))},642:function(e,t,n){"use strict";var r=n(674);t.__esModule=!0,t.default=void 0;var i=n(675);t.updateAudioLevels=i.updateAudioLevels;var a=n(676);t.updateGuestInfo=a.updateGuestInfo;var o=r(n(864));t.hydraMiddleware=o.default,t.registerExperience=o.registerExperience;var s=r(n(677));t.resetGuestState=s.resetGuestState,t.teardownExperience=s.teardownExperience;var c=s.default;t.default=c},643:function(e,t,n){"use strict";n.d(t,"c",(function(){return r})),n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return a}));n(64);var r=function(){var e=window.navigator;return 0===e.vendor.indexOf("Apple")&&/\sSafari\//.test(e.userAgent)},i=function(){var e=window.navigator;return r()&&/iPad|iPhone/.test(e.userAgent)},a=function(){return r()&&!i()}},644:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"c",(function(){return l})),n.d(t,"f",(function(){return d})),n.d(t,"d",(function(){return h})),n.d(t,"g",(function(){return f})),n.d(t,"h",(function(){return p})),n.d(t,"b",(function(){return v}));n(23),n(42),n(28),n(37),n(15),n(18),n(43);var r=n(1),i=n.n(r),a=n(564),o=n(597);function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var u={IDLE:"IDLE",BUFFERING_REQUESTED:"BUFFERING_REQUESTED",PREBUFFERING_COMPLETED:"PREBUFFERING_COMPLETED",BUFFERING_COMPLETED:"BUFFERING_COMPLETED"},l="SET_BUFFERING_STATUS",d=function(e,t,n){return{type:l,playerId:e,bufferingStatus:t,maximumBufferLength:n}},h="SET_TARGET_DURATION",f=function(e,t){return{type:h,targetDuration:t,playerId:e}},p=function(e,t){return{type:"UPDATE_BUFFER_LENGTH",maximumBufferLength:t,playerId:e}};t.e=function(e,t){switch(t.type){case a.b:var n,r,i=null==e||null===(n=e.features)||void 0===n?void 0:n[o.d],s=null==e||null===(r=e.features)||void 0===r?void 0:r[o.e];if(!i&&!s)return e;if(!i&&s)return c(c({},e),{},{maximumBufferLength:void 0,targetDuration:void 0});var d=void 0===e.bufferingStatus?u.IDLE:e.bufferingStatus;return c(c({},e),{},{bufferingStatus:d,maximumBufferLength:void 0,targetDuration:void 0});case l:return c(c({},e),{},{bufferingStatus:t.bufferingStatus,maximumBufferLength:void 0!==t.maximumBufferLength?t.maximumBufferLength:e.maximumBufferLength});case"UPDATE_BUFFER_LENGTH":var f;return t.maximumBufferLength===e.maximumBufferLength?e:c(c({},e),{},{bufferingStatus:null!=e&&null!==(f=e.features)&&void 0!==f&&f[o.d]?u.BUFFERING_REQUESTED:void 0,maximumBufferLength:t.maximumBufferLength});case h:return c(c({},e),{},{targetDuration:t.targetDuration});default:return e}};var v={bufferingStatus:void 0,maximumBufferLength:void 0,targetDuration:void 0}},645:function(e,t,n){"use strict";n.d(t,"b",(function(){return s}));var r=n(1),i=n.n(r),a=n(557),o=n(570),s=function(e,t){return{feature:t,playerId:e,type:"GET_FEATURE_VALUE"}};t.a=function(e){return function(t){return function(n){if("GET_FEATURE_VALUE"===n.type){var r,s=n.feature,c=n.playerId,u=Object(o.a)(c);return u&&u.getValue&&(r=u.getValue(s),e.dispatch(Object(a.i)(c,i()({},s,r)))),r}return t(n)}}}},646:function(e,t,n){"use strict";n(322),n(63);var r=n(0),i=n(159),a=Object(i.a)({loader:function(){return n.e(54).then(n.bind(null,882))},renderPlaceholder:function(){return r.createElement("div",null)}});t.a=a},674:function(e,t,n){var r=n(34).default;function i(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return i=function(){return e},e}e.exports=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t=i();if(t&&t.has(e))return t.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var s=a?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=e[o]}return n.default=e,t&&t.set(e,n),n},e.exports.default=e.exports,e.exports.__esModule=!0},675:function(e,t,n){"use strict";n(103),n(640),t.__esModule=!0,t.default=t.InitialState=t.updateAudioLevels=t.UPDATE_AUDIO_LEVELS=void 0;t.UPDATE_AUDIO_LEVELS="UPDATE_AUDIO_LEVELS";t.updateAudioLevels=function(e,t){return{type:"UPDATE_AUDIO_LEVELS",audioLevels:t,experienceId:e}};var r={guests:{},host:0};t.InitialState=r;t.default=function(e,t){switch(void 0===e&&(e=r),t.type){case"UPDATE_AUDIO_LEVELS":for(var n=t.audioLevels,i=n[0],a=n.slice(1),o={},s=0;s<a.length;s++)o[s]=a[s];return Object.assign({},e,{guests:o,host:i});default:return e}}},676:function(e,t,n){"use strict";t.__esModule=!0,t.default=t.updateGuestInfo=t.UPDATE_GUEST_INFO=void 0;t.UPDATE_GUEST_INFO="UPDATE_GUEST_INFO";t.updateGuestInfo=function(e,t){return{type:"UPDATE_GUEST_INFO",guestInfo:t,experienceId:e}};t.default=function(e,t){switch(void 0===e&&(e={}),t.type){case"UPDATE_GUEST_INFO":for(var n=t.guestInfo,r={},i=0;i<n.length;i++){var a=n[i],o=a.ParticipantIndex,s=a.ProfileUrl,c=a.SessionId,u=a.StreamName,l=a.UserId,d=a.UserName;r[i]={ParticipantIndex:o,ProfileUrl:s,SessionId:c,StreamName:u,UserId:l,UserName:d}}return r;default:return e}}},677:function(e,t,n){"use strict";var r=n(674),i=n(11);n(640),t.__esModule=!0,t.default=t.resetGuestState=t.RESET_GUEST_STATE=t.teardownExperience=t.TEARDOWN_EXPERIENCE=t.initializeExperience=t.INITIALIZE_EXPERIENCE=void 0;var a=n(868),o=i(n(676)),s=r(n(675));t.INITIALIZE_EXPERIENCE="INITIALIZE_EXPERIENCE";t.initializeExperience=function(e){return{type:"INITIALIZE_EXPERIENCE",experienceId:e}};t.TEARDOWN_EXPERIENCE="TEARDOWN_EXPERIENCE";t.teardownExperience=function(e){return{type:"TEARDOWN_EXPERIENCE",experienceId:e}};t.RESET_GUEST_STATE="RESET_GUEST_STATE";t.resetGuestState=function(e){return{type:"RESET_GUEST_STATE",experienceId:e}};var c={audioLevels:s.InitialState,guests:{}},u=(0,a.combineReducers)({audioLevels:s.default,guests:o.default});t.default=function(e,t,n){var r;if(void 0===e&&(e={}),void 0===n&&(n=u),void 0!==t.experienceId)switch(t.type){case"INITIALIZE_EXPERIENCE":case"RESET_GUEST_STATE":return Object.assign({},e,((r={})[t.experienceId]=c,r));case"TEARDOWN_EXPERIENCE":var i=Object.assign({},e);return delete i[t.experienceId],i;default:var a,o=n(e[t.experienceId],t);return Object.assign({},e,((a={})[t.experienceId]=o,a))}return e}},678:function(e,t,n){"use strict";n.d(t,"a",(function(){return g})),n.d(t,"c",(function(){return m}));var r,i=n(34),a=n.n(i),o=n(1),s=n.n(o),c=(n(15),n(18),n(319),n(557)),u=n(555),l=n(595),d=n(565),h=n(571),f=n(564),p=n(553),v=(r={},s()(r,f.b,l.a.HLSJS_INSTANTIATED),s()(r,f.d,l.a.READY),s()(r,f.f,l.a.PLAYBACK_COMPLETE),s()(r,p.x,l.a.PAUSE),s()(r,p.y,l.a.PLAY),r),y={},g=function(e,t,n){void 0===y[e]&&(y[e]={}),void 0===y[e][t]&&(y[e][t]=[]),y[e][t].push(n)},m=function(e){delete y[e]};t.b=function(e){return function(t){return function(n){var r,i,o=n.playerId,s=n.type,f=e.getState().players[o],g=t(n),m=e.getState().players[o];if(o in y){var E=f.tracks.find((function(e){return"content"===e.displayType})),b=m.tracks.find((function(e){return"content"===e.displayType}));switch(s){case d.c:n.thrownError.message===u.a.LIVE_VIDEO_GEOBLOCK_ERROR?r=l.a.GEOBLOCK_ERROR:n.thrownError.message===u.a.LIVE_VIDEO_NO_COOKIES_ERROR&&(r=l.a.NO_COOKIES_ERROR);break;case p.B:!f.isMuted&&m.isMuted?r=l.a.MUTE:f.isMuted&&!m.isMuted&&(r=l.a.UNMUTE);break;case c.a:if(void 0!==E&&void 0!==b&&(E.isLive&&!b.isLive?r=l.a.LIVE_ENDED:!E.isLive&&b.isLive&&(r=l.a.LIVE_STARTED)),!r&&(f.eventTitle!==m.eventTitle||f.eventDescription!==m.eventDescription||f.eventUrl!==m.eventUrl)){var T=m.eventTitle,_=m.eventDescription,O=m.eventUrl;r=l.a.BROADCAST_EVENT_ASSOCIATION_UPDATED,i={eventTitle:T,eventDescription:_,eventUrl:O}}break;case p.i:f.liveClickthroughClicked!==m.liveClickthroughClicked&&(r=l.a.LIVE_CLICKTHROUGH);break;case h.d:var P=f.fullscreen.isFullscreen,I=m.fullscreen.isFullscreen;!P&&I?r=l.a.FULLSCREEN_ENTERED:P&&!I&&(r=l.a.FULLSCREEN_EXITED);break;default:r=v[s]}!function(e,t,n){t in y[e]&&a()(y[e][t])&&y[e][t].forEach((function(e){"function"==typeof e&&e(n)}))}(o,r,i),r===l.a.READY&&function(e,t){t in y[e]&&delete y[e][t]}(o,r)}return g}}}},679:function(e,t,n){"use strict";var r=n(3),i=n.n(r),a=n(1),o=n.n(a),s=(n(36),n(114),n(332),n(63),n(92),n(93),n(115),function e(t){var n=this;i()(this,e),o()(this,"clearLogs",(function(){try{window.sessionStorage.removeItem(n.storageKey)}catch(e){}})),o()(this,"log",(function(t,r){if(e.debuggingEnabled){var i="".concat(t,": ").concat(r);n.logItemInSessionStorage(i)}})),o()(this,"logItemInSessionStorage",(function(e){try{var t=window.sessionStorage.getItem(n.storageKey),r=t?JSON.parse(t):[];r.push(e),window.sessionStorage.setItem(n.storageKey,JSON.stringify(r))}catch(e){}})),this.storageKey=e.generateStorageKey(t),this.clearLogs()});o()(s,"debuggingEnabled",!1),o()(s,"generateStorageKey",(function(e){return"".concat("TwitterVideoPlayerDebugLog",":").concat(e)})),o()(s,"getDebugFileLink",(function(e){var t=window.sessionStorage.getItem(s.generateStorageKey(e)),n=new window.Blob([JSON.parse(t).join("\n")],{type:"application/octet-stream"});return window.URL.createObjectURL(n)})),t.a=s},680:function(e,t,n){"use strict";n.d(t,"d",(function(){return d})),n.d(t,"b",(function(){return h})),n.d(t,"a",(function(){return f}));n(23),n(42),n(28),n(37),n(15),n(18),n(43);var r=n(61),i=n.n(r),a=n(1),o=n.n(a),s=(n(319),n(64),n(36),n(561)),c=n(553);function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var d=function(e,t,n){return function(r){var i=t();r(h(e,i)),r(n?Object(s.f)(e):Object(c.O)(e))}},h=function(e,t){return{type:"AD_LOADED",playerId:e,adResponse:t}};t.c=function(e,t){switch(t.type){case"AD_LOADED":var n=e.tracks,r=t.adResponse;if(void 0===r.mediaInfo)return l(l({},e),{},{adLoaded:!0});var a=r.mediaInfo.variants.find((function(e){return 0===e.content_type.indexOf("application/x-mpegURL")}));if(void 0===a)return l(l({},e),{},{adLoaded:!0});var o,s=r.promotedContent||{};return r.mediaInfo.call_to_action&&(o={type:r.mediaInfo.call_to_action.type,url:r.mediaInfo.call_to_action.url}),l(l({},e),{},{currentTrackId:1,nextTrackIds:[0],tracks:[].concat(i()(n),[{id:1,displayType:"ad",cta:o,contentId:r.adId,contentType:"media_entity",publisherId:r.mediaInfo.publisher_id_str,durationMs:r.mediaInfo.duration_millis,shouldLoop:!1,shouldAutoAdvance:r.shouldAutoAdvance,impressionId:s.impressionId,disclosureType:s.disclosureType,dynamicPrerollType:r.dynamicPrerollType,rotation:0,variants:[{src:a.url,type:a.content_type}],currentVariantIndex:0,advertiserName:r.advertiserName,advertiserProfileImageUrl:r.advertiserProfileImageUrl,useRedesignedPrerollUx:r.useRedesignedPrerollUx}]),videoAnalyticsScribePassthrough:r.videoAnalyticsScribePassthrough,adLoaded:!0});default:return e}};var f={adLoaded:!1}},681:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return i}));var r=function(e,t){try{window.localStorage.setItem(e,t)}catch(e){}},i=function(e,t){try{return window.localStorage.getItem(e)}catch(e){return t}}},682:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));n(23),n(42),n(28),n(37),n(15),n(18),n(43);var r=n(1),i=n.n(r);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var s=function(e){return{type:"BANDWIDTH_ESTIMATE",bandwidthEstimate:e}};t.b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"BANDWIDTH_ESTIMATE":return o(o({},e),{},{mostRecentBandwidthEst:t.bandwidthEstimate});default:return e}}},693:function(e,t,n){"use strict";var r=n(2),i=n.n(r),a=n(0),o=n(884).a,s=n(554),c=n(646),u=function(e){var t=e.poster;return a.createElement(s.b,i()({},e,{basePlayerClass:o}),(function(e){var n=e.guestsState,r=e.playerApi,i=e.playerState,o=e.containerRef;return a.createElement(c.a,{containerRef:o,guestsState:n,playerApi:r,playerState:i,poster:t})}))};u.defaultProps={size:"small"};t.a=u},694:function(e,t,n){"use strict";n.d(t,"a",(function(){return O}));n(23),n(42),n(28),n(37),n(15),n(18),n(43);var r=n(1),i=n.n(r),a=n(0),o=n(24),s=n(324),c=n(113),u=n.n(c),l=n(545),d=n(546),h=n(79);function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(h.a)("svg",p(p({},e),{},{style:[d.a.root,e.style],viewBox:"0 0 24 24"}),l.createElement("g",null,l.createElement("path",{d:"M15.644 11.58L10.43 8.26c-.155-.1-.35-.105-.51-.018-.16.088-.26.256-.26.438v6.64c0 .183.1.35.26.438.074.04.157.062.24.062.093 0 .187-.026.27-.078l5.214-3.32c.144-.09.23-.25.23-.42s-.086-.332-.23-.423zM2.5 22.25c-.192 0-.384-.073-.53-.22-.293-.293-.293-.768 0-1.06l5.25-5.25c.293-.294.768-.294 1.06 0s.294.767 0 1.06l-5.25 5.25c-.146.147-.338.22-.53.22zM15.208 9.542c-.192 0-.384-.073-.53-.22-.293-.293-.293-.768 0-1.06L20.97 1.97c.293-.293.768-.293 1.06 0s.294.768 0 1.06l-6.29 6.293c-.148.146-.34.22-.532.22z"}),l.createElement("path",{d:"M3.815 17.062c-.27 0-.53-.146-.664-.4C2.4 15.236 2 13.623 2 12 2 6.486 6.486 2 12 2c1.592 0 3.176.384 4.582 1.11.368.188.512.64.322 1.01-.19.368-.643.515-1.01.32-1.21-.624-2.52-.94-3.894-.94-4.687 0-8.5 3.813-8.5 8.5 0 1.38.338 2.75.978 3.96.193.367.053.82-.313 1.015-.112.06-.232.087-.35.087zM12 22c-1.59 0-3.175-.384-4.58-1.11-.37-.188-.513-.64-.323-1.01.19-.366.644-.514 1.01-.32 1.21.624 2.52.94 3.893.94 4.687 0 8.5-3.813 8.5-8.5 0-1.364-.33-2.72-.957-3.922-.19-.367-.05-.82.318-1.012.37-.19.82-.05 1.013.318C21.61 8.8 22 10.396 22 12c0 5.514-4.486 10-10 10z"})))};v.metadata={width:24,height:24};var y=v,g=n(5),m=n(326),E=n(32);function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function T(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var _=u.a.a9edea48;function O(e){var t=e.displayBackgroundImage,n=void 0!==t&&t,r=e.errorMessage,i=e.iconPlayError,c=e.imageSrc,u=e.onReloadPress;return a.createElement(E.a,{style:[g.a.absoluteFill,n?null:P.blankOverlay]},n?a.createElement(a.Fragment,null,a.createElement(E.a,{style:P.backgroundImage},c&&a.createElement(m.a,{resizeMode:"cover",source:c,style:g.a.absoluteFill})),a.createElement(E.a,{style:P.overlay})):null,a.createElement(E.a,{style:P.errorContainer},a.createElement(E.a,null,i?a.createElement(y,{style:P.playErrorIcon}):null),a.createElement(E.a,{focusable:!0},a.createElement(o.c,{style:n?P.errorMsgTextWhite:P.errorMsgTextGray},r)),u?a.createElement(s.a,{onPress:u,style:P.buttonContainer,type:"primary"},_):null))}var P=g.a.create((function(e){return{backgroundImage:T(T({},g.a.absoluteFillObject),{},{filter:"blur(5px)"}),overlay:T(T({},g.a.absoluteFillObject),{},{backgroundColor:e.colors.translucentBlack77}),blankOverlay:{backgroundColor:e.colors.gray0},buttonContainer:{justifyContent:"center",alignSelf:"center"},errorContainer:{justifyContent:"center",height:"100%",marginHorizontal:e.spaces.space32},errorMsgTextWhite:{color:e.colors.white,textAlign:"center",marginBottom:e.spaces.space20},errorMsgTextGray:{color:e.colors.gray600,textAlign:"center",marginBottom:e.spaces.space20},playErrorIcon:{fill:e.colors.gray600,height:e.spaces.space48,width:e.spaces.space48,marginHorizontal:"auto",paddingBottom:e.spaces.space20,textAlignVertical:"middle"}}}))},855:function(e,t,n){"use strict";n(42),n(193),n(568),n(319),n(15),n(327),n(64),n(624),n(93),n(90),n(78),n(103),n(856),n(623),n(857),n(435),n(194),n(858),n(626),n(640),n(23),n(63),n(322),n(19),n(66),n(92),n(18),n(115),n(859);var r,i,a,o,s=n(6),c=n.n(s),u=n(151),l=n.n(u),d=n(1),h=n.n(d),f=n(158),p=n.n(f);function v(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return y(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(n=e[Symbol.iterator]()).next.bind(n)}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var g="AD_SKIP_EVENT",m="CAPTIONS_TOGGLED_EVENT",E="CONFIG_LOADED_EVENT",b="CTA_CLICK_EVENT",T="CTA_IMPRESSION_EVENT",_="ERROR_EVENT",O="FULL_SCREEN_EVENT",P="GROUPM_VIEW_EVENT",I="HEARTBEAT_EVENT",S="HEARTBEAT_START_EVENT",w="INITIAL_CTA_IMPRESSION_EVENT",R="INITIAL_INTEND_TO_PLAY_EVENT",k="INTEND_TO_PLAY_EVENT",C="LOOP_EVENT",A="MRC_AUDIBLE_VIEW_EVENT",D="MRC_VIEW_EVENT",L="MUTE_EVENT",M="ONE_SEC_VIEW_EVENT",j="SIX_SEC_VIEW_EVENT",N="SHORT_FORM_COMPLETE_EVENT",U="PAUSE_EVENT",x="PLAY_EVENT",F="PLAY_FROM_TAP_EVENT",V="PLAYBACK_25_EVENT",B="PLAYBACK_50_EVENT",W="PLAYBACK_75_EVENT",G="PLAYBACK_95_EVENT",H="PLAYBACK_COMPLETE_EVENT",K="PLAYBACK_ERROR_EVENT",J="PLAYBACK_LAPSE_EVENT",Q="PLAYBACK_START_EVENT",Y="REPLAY_EVENT",z="REWIND_EVENT",q="SHRINK_EVENT",X="STARTUP_ERROR_EVENT",$="TEARDOWN_EVENT",Z="TICK_EVENT",ee="TRACK_FINISHED_EVENT",te="UNMUTE_EVENT",ne="VIDEO_SESSION_EVENT",re="VIDEO_QUALITY_VIEW_EVENT",ie="VIDEO_VIEW_EVENT",ae="VIEW_THRESHOLD_EVENT",oe="ad",se="content",ce="broadcast",ue="gif",le="live",de="media_entity",he="partner_video",fe="periscope",pe="vine",ve="vmap",ye={event:"url",go_to:"url",image:"url",url:"url",shop:"url",see_more:"url",visit:"url",visit_site:"url",watch:"url",watch_now:"watch"};function ge(e){return Ee(e,e.source.trackId)}function me(e){return Ee(e,e.currentTrackId)}function Ee(e,t){return e.tracks.find((function(e){return t===e.id}))}function be(e){return e.tracks.find((function(e){return oe===e.displayType}))}function Te(e){return Boolean(e)&&e.isPlaying&&!e.isScrubbing&&!e.isMuted}var _e=((r={})[ie]="creativeView",r[V]="firstQuartile",r[B]="midpoint",r[W]="thirdQuartile",r[H]="complete",r[x]="resume",r[U]="pause",r[z]="rewind",r[_]="adError",r),Oe=function(){function e(e){var t=this;Object.keys(_e).forEach((function(n){e.on(n,(function(e){t.fireBeacon(_e[n],e)}))})),e.on(Q,this.onPlaybackStart.bind(this))}var t=e.prototype;return t.onPlaybackStart=function(e){this.fireBeacon("start",e),this.fireBeacon("adImpression",e)},t.fireBeacon=function(e,t){var n=me(t);if(void 0!==n&&void 0!==n.beacons&&void 0!==n.beacons[e])for(var r,i=v(n.beacons[e]);!(r=i()).done;){var a=r.value;(new window.Image).src=a}},e}(),Pe=function(){function e(e){this.analytics=e,this.analytics.on(Z,this.onTickEvent.bind(this))}return e.prototype.onTickEvent=function(e){var t=e.areCaptionsShown,n=this.currentCaptionsState;n!==t&&((!1===n&&!0===t||!0===n&&!1===t)&&this.analytics.emit(m,e,t),this.currentCaptionsState=t)},e}(),Ie=function(){function e(e){this.analytics=e,this.hasFiredOnTrackMap={},this.analytics.on(T,this.onCtaImpressionEvent.bind(this))}return e.prototype.onCtaImpressionEvent=function(e){var t=e.currentTrackId;this.hasFiredOnTrackMap[t]||(this.hasFiredOnTrackMap[t]=!0,this.analytics.emit(w,e))},e}(),Se=function(){function e(e){this.analytics=e,this.hasStarted=!1,this.hasFired=!1,this.analytics.on(Q,this.onPlaybackStartEvent.bind(this)),this.analytics.on(k,this.onShowEvent.bind(this)),this.analytics.on(_,this.onErrorEvent.bind(this))}var t=e.prototype;return t.onPlaybackStartEvent=function(){this.hasStarted=!0},t.onShowEvent=function(){this.intentToPlayTime=new Date},t.onErrorEvent=function(e,t){var n=this.constructClientMediaEventError(e,t);if(!this.hasStarted&&!this.hasFired){var r,i=void 0!==this.intentToPlayTime?new Date-this.intentToPlayTime:void 0;n&&(r={latency_millis:i,error:n}),this.analytics.emit(X,e,Object.assign({latency:i},t),r),this.hasFired=!0}this.analytics.emit(K,e,t,n)},t.constructClientMediaEventError=function(e,t){var n=t&&t.media_details&&t.media_details.media_error||{};return{is_fatal:n.is_fatal,category:n.category,message:n.message,retry_count:n.retry_count}},e}(),we=function(){function e(e){this.bufferingCount=0,this.bufferingDurationMs=0,this.bufferingBeginTimeMs=void 0,e.on(Z,this.onTickEvent.bind(this)),e.on(S,this.onHeartbeatStart.bind(this)),e.on(I,this.onHeartbeat.bind(this))}var t=e.prototype;return t.onHeartbeat=function(e){this.reset(e)},t.onHeartbeatStart=function(e){this.reset(e)},t.onTickEvent=function(e){var t=me(e);void 0!==t&&(t.isBuffering&&null==this.bufferingBeginTimeMs?(this.bufferingBeginTimeMs=Date.now(),this.bufferingCount++):t.isBuffering||null==this.bufferingBeginTimeMs||(this.bufferingDurationMs+=Date.now()-this.bufferingBeginTimeMs,this.bufferingBeginTimeMs=void 0))},t.getBufferTime=function(e){var t=me(e);if(void 0!==t){var n=this.bufferingDurationMs;return t.isBuffering&&null!=this.bufferingBeginTimeMs&&(n+=Date.now()-this.bufferingBeginTimeMs),n}},t.reset=function(e){var t=me(e);void 0!==t&&(this.bufferingBeginTimeMs=t.isBuffering?Date.now():void 0,this.bufferingCount=t.isBuffering?1:0,this.bufferingDurationMs=0)},e}();function Re(e){return"number"!=typeof e||Number.isNaN(e)||e===1/0||e===-1/0?"string"==typeof e?e:void 0:e.toString()}var ke=function(){function e(e){this.analytics=e,this.bufferingDurationListener=new we(e),this.lastKnownDataUsageBytes=0,this.audibleDuration=0,this.bitrateHistory=[],this.latencyHistory=[],this.previousTickTimestamp,this.analytics.on(Z,this.onTickEvent.bind(this)),this.analytics.on(x,this.onPlayEvent.bind(this)),this.analytics.on(Q,this.onPlaybackStartEvent.bind(this)),this.analytics.on(ee,this.onTrackFinishedEvent.bind(this)),this.analytics.on(_,this.onErrorEvent.bind(this)),this.analytics.on(U,this.onPauseEvent.bind(this)),this.analytics.on($,this.onTeardownEvent.bind(this)),this.analytics.on(C,this.onLoopEvent.bind(this)),this.analytics.on(g,this.onAdSkip.bind(this))}var t=e.prototype;return t.onTickEvent=function(e){var t=me(e);if(void 0!==t){if(this.updateTimesOnTick(t,e),this.updatePerfMetrics(t),e.isScrubbing?this.stopPolling():e.isPlaying&&this.startPolling(e),void 0!==this.lastKnownPlayerState){var n=this.lastKnownPlayerState.percentVisible,r=e.percentVisible;(n>0&&0===r||0===n&&r>0)&&(this.stopPolling(),this.startPolling(e))}this.lastKnownPlayerState=e,this.previousTickTimestamp=Date.now()}},t.onPlayEvent=function(e){this.hasPlaybackStarted&&this.startPolling(e),this.lastKnownPlayerState=e},t.onPlaybackStartEvent=function(e){this.startPolling(e),this.lastKnownPlayerState=e,this.hasPlaybackStarted=!0},t.onTrackFinishedEvent=function(e){this.hasPlaybackStarted=!1,void 0!==me(e)&&(this.stopPolling(),this.lastKnownPlayerState=e)},t.onErrorEvent=function(e,t){t&&t.media_details&&t.media_details.media_error&&t.media_details.media_error.is_fatal&&(this.stopPolling(),this.lastKnownPlayerState=e)},t.onPauseEvent=function(e,t){this.stopPolling(),this.lastKnownPlayerState=e},t.onTeardownEvent=function(e,t){this.stopPolling(!0),this.lastKnownPlayerState=e},t.onLoopEvent=function(e){this.startPolling(e)},t.onAdSkip=function(){this.stopPolling()},t.updateTimesOnTick=function(e,t){var n;void 0!==(n=e.contentType===ce||e.contentType===le||e.contentType===fe?e.absoluteTimeMs:e.currentTimeMs)&&(Te(t)&&void 0!==this.lastTimeMs&&(this.audibleDuration+=n-this.lastTimeMs),this.lastTimeMs=n,void 0===this.startTimeMs&&(this.startTimeMs=n))},t.startPolling=function(e){var t=ge(e);void 0===this.intervalId&&void 0!==t&&t.contentType!==pe&&(this.analytics.emit(S,e),this.onHeartbeatStart(e))},t.stopPolling=function(e){(this.intervalId||e)&&(this.onHeartbeat(),this.lastTimeMs=void 0,this.startTimeMs=void 0),void 0!==this.intervalId&&(clearInterval(this.intervalId),this.intervalId=void 0)},t.onHeartbeatStart=function(e){this.intervalId=setInterval(this.onHeartbeat.bind(this),e.heartbeatIntervalMs||5e3),this.lastTimeMs=void 0,this.startTimeMs=void 0,this.bitrateHistory=[],this.latencyHistory=[]},t.updatePerfMetrics=function(e){if(this.previousTickTimestamp){var t=Date.now()-this.previousTickTimestamp;e.currentBitrate&&this.bitrateHistory.push({value:e.currentBitrate,weight:t}),e.liveLatencyMs&&this.latencyHistory.push({value:e.liveLatencyMs,weight:t})}},t.onHeartbeat=function(){var e=this.lastKnownPlayerState;if(e){var t=me(e),n=this.getProgramDateTimeMs();if(void 0!==n&&void 0!==t){var r=t.currentBitrate?{sampled_bitrate:t.currentBitrate}:{},i=0;e.dataUsageBytes&&(i=e.dataUsageBytes-this.lastKnownDataUsageBytes,this.lastKnownDataUsageBytes=e.dataUsageBytes);var a,o,s={data_usage_bytes:i},c=this.bufferingDurationListener.bufferingCount,u=this.bufferingDurationListener.getBufferTime(e),l=Math.floor(100*e.percentVisible),d=Object.assign({buffering_duration_millis:u,video_visibility:l},{start_program_date_time_millis:n.start_program_date_time_millis,end_program_date_time_millis:n.end_program_date_time_millis},r,s),h={buffering_duration_millis:Re(u),buffering_count:c,percent_in_view:l,sampled_bits_per_second:t.currentBitrate,data_usage_bytes:Re(s.data_usage_bytes),start_program_date_time_millis:Re(n.start_program_date_time_millis),end_program_date_time_millis:Re(n.end_program_date_time_millis),audible_duration_millis:Re(n.audible_duration_millis),bandwidth_estimate_bps:Re(e.bandwidthEstimateBps),bitrate_metrics:(a=this.bitrateHistory,o=Ae(a),o&&{min_bps:Math.round(o.min),max_bps:Math.round(o.max),avg_bps:Math.round(o.avg)}),live_or_non_live_heartbeat_metrics:Ce(t.isLive,this.latencyHistory)};this.analytics.emit(I,e,d,h)}}},t.getProgramDateTimeMs=function(){if(void 0!==this.startTimeMs&&void 0!==this.lastTimeMs){var e=this.startTimeMs,t=this.lastTimeMs,n=this.audibleDuration;return this.startTimeMs=this.lastTimeMs,this.audibleDuration=0,{start_program_date_time_millis:Math.round(e),end_program_date_time_millis:Math.round(t),audible_duration_millis:Math.round(n)}}return{}},e}();function Ce(e,t){var n=Ae(t);return e?{live_heartbeat_metrics:{latency_metrics:n&&{min_ms:Math.round(n.min),max_ms:Math.round(n.max),avg_ms:Math.round(n.avg)}}}:{non_live_heartbeat_metrics:{}}}function Ae(e){if(e&&e.length){var t=function(e){if(!e||0===e.length)return[Math.min(),Math.max()];for(var t,n=1/0,r=-1/0,i=v(e);!(t=i()).done;){var a=t.value;n=Math.min(n,a),r=Math.max(r,a)}return[n,r]}(e.map((function(e){return e.value})));return{min:t[0],max:t[1],avg:function(e){var t=e.reduce((function(e,t){return e+t.weight}),0);return e.reduce((function(e,t){return e+t.value*t.weight}),0)/t}(e)}}}var De=function(){function e(e){this.analytics=e,this.hasFiredOnTrackMap={},this.analytics.on(k,this.onIntendToPlayEvent.bind(this)),this.analytics.on(Y,this.onIntendToPlayEvent.bind(this)),this.analytics.on(ee,this.onTrackFinishedEvent.bind(this))}var t=e.prototype;return t.onIntendToPlayEvent=function(e){this.hasFiredOnTrackMap[e.currentTrackId]||(this.hasFiredOnTrackMap[e.currentTrackId]=!0,this.analytics.emit(R,e))},t.onTrackFinishedEvent=function(e){var t=me(e);t&&(t.shouldLoop||(this.hasFiredOnTrackMap[e.currentTrackId]=!1))},e}(),Le=function(){function e(e){this.analytics=e,this.analytics.on(ee,this.onTrackFinishedEvent.bind(this))}return e.prototype.onTrackFinishedEvent=function(e){var t=me(e);void 0!==t&&t.shouldLoop&&this.analytics.emit(C,e)},e}(),Me={home:"HomeTimeline",list:"Lists",live_broadcast:"BroadcastPage",live_event_timeline:"EventPage",me:"UserTimeline",moments:"Moments",permalink:"TweetCard",profile:"UserTimeline",search:"Search"},je=function(e){return"/api/v2/"+e};function Ne(e,t,n,r){return{start:{method:e,path:je(t)},ping:{method:e,path:je(n)},stop:{method:e,path:je(r)}}}var Ue,xe={public:{live:Ne("GET","startPublic","pingPublic","stopPublic"),replay:Ne("GET","replayViewedPublic","pingReplayViewedPublic","endReplayViewedPublic")},auth:{live:Ne("POST","startWatching","pingWatching","stopWatching"),replay:Ne("POST","replayViewed","pingReplayViewed","endReplayViewed")}},Fe=function(){function e(e,t){if(this.httpClient=e,this.authToken=null==t?void 0:t.periscopeAuthToken,this.lifecycles=this.authToken?xe.auth:xe.public,(null==t?void 0:t.scribeContext)&&(null==t?void 0:t.periscopeComponent)){var n=t.scribeContext,r=t.periscopeComponent;this.pageContext=this.getPageContext(n),this.componentContext=r}}var t=e.prototype;return t.getPageContext=function(e){var t=e.page;return"permalink_overlay"===e.section?"TweetCard":Me[t]||""},t.call=function(e,t){var n=Date.now(),r={"X-Idempotence":Ue=n<=Ue?Ue+1:n,"X-Attempt":1,"X-Periscope-User-Agent":"Twitter/video-analytics","content-type":"application/json"},i=Object.assign({},t);this.authToken&&(i.cookie=this.authToken);var a=e.method,o=e.path,s={};return"POST"===a?s.data=i:s.params=i,this.httpClient.dispatch(Object.assign({headers:r,host:"https://proxsee.pscp.tv",method:a,path:o},s))},t.videoStartWatching=function(e,t,n){var r=this;return new Promise((function(i,a){("string"!=typeof e||e.length<1)&&a(new Error("Cannot videoStartWatching. lifecycleToken not valid, lifecycleToken="+e));var o=t?r.lifecycles.replay.start:r.lifecycles.live.start,s={life_cycle_token:e,auto_play:!!n};r.pageContext&&(s.page=r.pageContext),r.componentContext&&(s.component=r.componentContext),r.call(o,s).then((function(e){var t=JSON.parse(e.body).session;t?i(t):a("No valid Session")}),a)}))},t.videoPingWatching=function(e,t){var n=this;return new Promise((function(r,i){("string"!=typeof e||e.length<1)&&i(new Error("Cannot videoPingWatching. session not valid, session="+e));var a=t?n.lifecycles.replay.ping:n.lifecycles.live.ping;n.call(a,{session:e}).then((function(e){JSON.parse(e.body).success?r():i("Ping request failed")}),i)}))},t.videoStopWatching=function(e,t){var n=this;return new Promise((function(r,i){("string"!=typeof e||e.length<1)&&i(new Error("Cannot videoStopWatching. session not valid, session="+e));var a=t?n.lifecycles.replay.stop:n.lifecycles.live.stop;n.call(a,{session:e}).then((function(e){JSON.parse(e.body).success?r():i("StopWatching request failed")}),i)}))},e}();var Ve=function(){function e(e){this.api=e,this.handleStartWatching=this.handleStartWatching.bind(this),this.updateSession=this.updateSession.bind(this),this.startPingWatching=this.startPingWatching.bind(this),this.isVideoPreview=!1,this.isReplay=!0}var t=e.prototype;return t.updateSession=function(e){this.session=e},t.setStartWatchingTimer=function(){this.startWatchingTimer=setTimeout(this.handleStartWatching,3e3)},t.clearStartWatchingTimer=function(){this.startWatchingTimer&&clearTimeout(this.startWatchingTimer)},t.handleStartWatching=function(){if(!this.isWatching){this.stopPingWatching();var e=this.api.videoStartWatching(this.lifecycleToken,this.isReplay,this.isVideoPreview).then(this.updateSession).then(this.startPingWatching);return this.isWatching=!0,e}},t.startPingWatching=function(){var e=this;this.stopPingWatching(),this.pingWatchingTimer=setInterval((function(){e.isWatching?e.api.videoPingWatching(e.session,e.isReplay):e.stopPingWatching()}),3e4)},t.stopPingWatching=function(){clearInterval(this.pingWatchingTimer)},t.updateLifecycleToken=function(e){void 0!==e&&e!==this.lifecycleToken&&(this.lifecycleToken=e,this.isWatching&&(this.stopWatching(),this.handleStartWatching()))},t.updateIsReplay=function(e){void 0!==e&&e!==this.isReplay&&(this.isReplay=e)},t.startWatching=function(){return this.isVideoPreview=!1,this.handleStartWatching()},t.startWatchingPreview=function(){this.isVideoPreview=!0,this.clearStartWatchingTimer(),this.setStartWatchingTimer()},t.stopWatching=function(){this.isWatching&&(this.stopPingWatching(),this.session&&this.api.videoStopWatching(this.session,this.isReplay),this.isWatching=!1)},t.destroy=function(){this.stopWatching(),this.clearStartWatchingTimer(),this.isVideoPreview=void 0,this.lifecycleToken=void 0,this.session=void 0,this.isReplay=void 0,this.isWatching=void 0,this.pingWatchingTimer=void 0},e}(),Be=[E,x,U,ee,$],We=function(){function e(e,t){var n=this;this.analytics=e,this.lifecycleController=t,Be.map((function(e){return n.analytics.on(e,n.possiblyHandleEvent.bind(n,e))}))}var t=e.prototype;return t.possiblyHandleEvent=function(e,t){if(this.shouldSendPeriscopeAnalytics(t)){var n=me(t);switch(e){case E:this.updateLifecycleToken(t),this.updateReplayState(!n.isLive);break;case x:this.handleStartWatching(t);break;case U:this.handleStopWatching(t);break;case ee:this.handleStopWatching(t),this.updateReplayState(!0);break;case $:this.teardownPeriscopeLifecycle()}}},t.shouldSendPeriscopeAnalytics=function(e){var t=me(e);return void 0!==t&&(t.contentType===fe||t.contentType===ce)},t.getLifecycleToken=function(e){return me(e).lifecycleToken},t.updateLifecycleToken=function(e){var t=this.getLifecycleToken(e);this.lifecycleController.updateLifecycleToken(t)},t.updateReplayState=function(e){this.lifecycleController.updateIsReplay(e)},t.handleStartWatching=function(e){this.getLifecycleToken(e)&&(e.isPreview?this.lifecycleController.startWatchingPreview():this.lifecycleController.startWatching())},t.handleStopWatching=function(e){this.getLifecycleToken(e)&&this.lifecycleController.stopWatching()},t.teardownPeriscopeLifecycle=function(){this.lifecycleController.destroy(),this.lifecycleController=null},e}(),Ge=function(){function e(e){this.analytics=e,this.lapseMap={},this.analytics.on(Z,this.onTickEvent.bind(this)),this.analytics.on(ee,this.onTrackFinishedEvent.bind(this)),this.analytics.on(g,this.onAdSkipEvent.bind(this)),this.analytics.on(ie,this.onVideoViewEvent.bind(this))}var t=e.prototype;return t.onTrackFinishedEvent=function(e){var t=me(e);if(void 0!==t){var n=this.lapseMap[t.id];if(void 0!==n){n.timePlayedToMs=0;var r=ge(e);r&&r.contentType!==ue&&!t.shouldLoop&&(this.emit(n,e),n.viewFired=!1)}}},t.onAdSkipEvent=function(e){this.onTickEvent(e);var t=me(e);if(void 0!==t){var n=this.lapseMap[t.id];this.emit(n,e)}},t.onVideoViewEvent=function(e){var t=me(e);if(void 0!==t){var n=this.lapseMap[t.id];void 0===n&&(n=this.initializeLapseMapForTrack(t),this.lapseMap[t.id]=n),n.viewFired=!0}},t.onTickEvent=function(e){var t=me(e);if(void 0!==t){var n=this.lapseMap[t.id];void 0===n&&(n=this.initializeLapseMapForTrack(t),this.lapseMap[t.id]=n),e.isScrubbing?n.timePlayedToMs=t.currentTimeMs:(this.updateTimingData(t,n),this.checkPlaybackLapse(n,e))}},t.initializeLapseMapForTrack=function(e){return{timePlayedMs:0,timePlayedToMs:e.currentTimeMs,viewFired:!1}},t.updateTimingData=function(e,t){var n=e.currentTimeMs-t.timePlayedToMs;t.timePlayedToMs=e.currentTimeMs,t.timePlayedMs+=n},t.checkPlaybackLapse=function(e,t){e.timePlayedMs>1e4&&this.emit(e,t)},t.emit=function(e,t){var n=ge(t),r=e.viewFired,i=e.timePlayedMs;r&&i>0&&n&&n.contentType!==le&&(this.analytics.emit(J,t,{playback_lapse_ms:Math.round(i)}),e.timePlayedMs=0)},e}(),He=function(e){return t="AD_CTA_TO_ENGAGEMENT_MAPPING_ERROR",(n=new Error("Unable to map CTA type to engagement type for: "+e)).name=t,n;var t,n},Ke=function(){function e(){}return e.set=function(t){e.report=t},e}();h()(Ke,"report",(function(e){return console.warn(e)}));var Je=((i={})[Q]="playback_start",i[V]="playback_25",i[B]="playback_50",i[W]="playback_75",i[G]="playback_95",i[H]="playback_complete",i[D]="mrc_view",i[P]="groupm_view",i[M]="1sec_view",i[j]="6sec_view",i[N]="short_form_complete",i[ie]="view",i[F]="play_from_tap",i[ae]="view_threshold",i),Qe=function(){function e(e,t){var n=this;this.promotedLogHandler=t,Object.keys(Je).forEach((function(t){e.on(t,(function(e,r){var i=me(e);void 0!==i&&n.log(n.buildEventName(t,i),e,r)}))})),e.on(Q,this.logImpression.bind(this)),e.on(b,this.onCtaClickEvent.bind(this)),e.on(ne,this.onVideoSessionEvent.bind(this))}var t=e.prototype;return t.buildEventName=function(e,t){var n=Je[e];return"video_"+t.displayType+"_"+n},t.log=function(e,t,n,r){void 0===n&&(n={});var i=me(t),a=this.getPromotedEventData(t,i);if(void 0!==a.impression_id){var o=this.getAmplifyDetailsData(t,i,n),s=JSON.stringify({amplify_details:o}),c=r&&JSON.stringify(r),u=Object.assign(a,o,{event:e,card_event:s,engagement_metadata:c});this.promotedLogHandler.log(u)}},t.logImpression=function(e){var t=me(e);this.isPromotedTrack(e,t)&&this.log("impression",e)},t.onCtaClickEvent=function(e){var t=me(e),n=null==t?void 0:t.cta,r=ye[null==n?void 0:n.type];if(!r)return Ke.report(He(null==n?void 0:n.type));t.displayType===oe?this.log("video_"+t.displayType+"_cta_"+r+"_click",e):this.log("video_cta_"+r+"_click",e)},t.onVideoSessionEvent=function(e,t){void 0!==t&&this.log("video_session",e,{},t)},t.isPromotedTrack=function(e,t){return t&&t.impressionId&&t.disclosureType},t.getPromotedEventData=function(e,t){var n=t.disclosureType||e.disclosureType;return{impression_id:t.impressionId||e.impressionId,earned:"earned"===n}},t.getAmplifyDetailsData=function(e,t,n){var r=ge(e),i=be(e)||{};return Object.assign({content_id:r.contentId,dynamic_preroll_type:i.dynamicPrerollType,preroll_uuid:i.contentId,preroll_owner_id:i.publisherId,video_uuid:t.contentId,video_type:t.displayType===se?"video":"ad",video_is_muted:e.isMuted,video_visibility:Math.floor(100*e.percentVisible)},n)},e}(),Ye=function(){function e(e){this.analytics=e,this.analytics.on(Z,this.onTickEvent.bind(this))}return e.prototype.onTickEvent=function(e){var t=me(e);void 0!==t&&(e.isScrubbing&&void 0===this.scrubbingStartTime?this.scrubbingStartTime=t.currentTimeMs:e.isScrubbing||void 0===this.scrubbingStartTime||(t.currentTimeMs<this.scrubbingStartTime&&this.analytics.emit(z,e),this.scrubbingStartTime=void 0))},e}(),ze=((a={})[ie]="video_view",a[F]="play_from_tap",a[ae]="view_threshold",a[A]="video_mrc_audible_view",a[D]="video_mrc_view",a[j]="video_6sec_view",a[N]="video_short_form_complete",a[Q]="playback_start",a[V]="playback_25",a[B]="playback_50",a[W]="playback_75",a[G]="playback_95",a[H]="playback_complete",a[R]="intent_to_play",a[x]="play",a[U]="pause",a[Y]="replay",a[C]="loop",a[L]="mute",a[te]="unmute",a[O]="full_screen",a[q]="shrink",a[J]="playback_lapse",a[K]="error",a[X]="playback_startup_error",a[re]="video_quality_view",a[g]="video_ad_skip",a),qe=["playback_lapse","video_1sec_view","shrink","full_screen"].reduce((function(e,t){return e[t]=!0,e}),{}),Xe="tweet",$e="client_event",Ze="live_video_heartbeat_event",et=7,tt=13,nt=16,rt=26,it=28,at=1,ot=2,st=1,ct=2,ut=["appplayer","poll2choice_video","poll3choice_video","poll4choice_video","promo_video_convo","promo_video_website","video_direct_message"],lt=/^([0-9]{1,2})_([0-9]+)$/,dt=function(){function e(e,t,n){var r=this;this.scribeHandler=t,this.context=n||{},this.isAdFormatsCard=-1!==ut.indexOf(this.context.cardType),Object.keys(ze).forEach((function(t){e.on(t,(function(e,n,i){r.scribe(ze[t],e,n,i)}))})),e.on(b,this.onCtaClickEvent.bind(this)),e.on(w,this.onCtaImpressionEvent.bind(this)),e.on(I,this.onHeartbeatEvent.bind(this)),e.on(m,this.onCaptionsToggledEvent.bind(this))}var t=e.prototype;return t.onCaptionsToggledEvent=function(e,t){var n=t?"enable":"disable",r={page:"settings",section:"captions",element:"display_audio_transcriptions",action:n};this.scribe(n,e,{},{},$e,r)},t.onCtaClickEvent=function(e){var t=me(e).cta,n=ye[null==t?void 0:t.type];if(!n)return Ke.report(He(null==t?void 0:t.type));this.scribe("cta_"+n+"_click",e)},t.onCtaImpressionEvent=function(e){var t=me(e).cta,n=ye[null==t?void 0:t.type];if(!n)return Ke.report(He(null==t?void 0:t.type));this.scribe("cta_"+n+"_impression",e)},t.onHeartbeatEvent=function(e,t,n){var r=ge(e);if(void 0!==r){var i;switch(r.contentType){case le:case ce:i=Ze;break;default:i=$e}this.scribe("heartbeat",e,t,n,i)}},t.scribe=function(e,t,n,r,i,a){void 0===n&&(n={}),void 0===r&&(r={}),void 0===i&&(i=$e),void 0===a&&(a=null);var o,s,c=ge(t)||{},u=me(t)||{},l=be(t)||{},d=t.session||{},h=(t.features||{}).isLiveTimecodeEnabled&&u.requestedTimecode>0?1e3*u.requestedTimecode:void 0;this.isActionSupportedInClientMediaEvent(e)&&(o={media_client_event_type:(s={},s[e]=r,s),session_state:{session_id:d.id,content_video_identifier:ft(this.getContentIdentifier(c),this.context.scribeContext),video_ads_passthrough_data:t.videoAnalyticsScribePassthrough,live_event_identifier:this.getLiveEventIdentifier(t,c.contentType),tweet_id:this.getTweetId(t.source,c.contentType)},playing_media_state:{video_type:u.displayType===se?ot:at,media_asset_url:this.getVariantUrl(u),media_timecode_millis:Re(h),media_metadata:{broadcast_id:u.broadcastId,twitter_publisher_id:Re(u.publisherId),publisher_identifier:pt(u.publisherId,u.periscopePublisherId,this.context.scribeContext)},broadcast_media_state:vt(u.contentType,u.isLive)},player_state:{is_muted:t.isMuted}});var f=Object.assign({},this.getBaseItem(t.source,t.eventId),{media_asset_url:this.getVariantUrl(u),video_uuid:u.contentId,video_owner_id:u.publisherId,video_type:u.displayType===se?"video":"ad",promoted_id:u.impressionId||t.impressionId,content_id:c.contentId,dynamic_preroll_type:l.dynamicPrerollType,preroll_uuid:l.contentId,preroll_owner_id:l.publisherId,publisher_id:c.publisherId,media_session_id:d.id,video_analytics_scribe_passthrough:t.videoAnalyticsScribePassthrough,client_media_event:o,media_timecode_millis:h,disclosure_type:u.disclosureType||t.disclosureType},n,this.getLexMetadata(t,c)),p=a||{element:this.getScribeElement(c),action:e};this.scribeHandler.log({namespace:p,category:i,data:{items:[f]}})},t.getContentIdentifier=function(e){var t=e.contentId,n=this.parseMediaKeyString(t);if(n)return{media_platform_identifier:n};switch(e.contentType){case de:case ue:case le:case ce:return this.getMediaPlatformIdentifierUsingDefaultCategory(e);case ve:return this.isAdFormatsCard?{media_platform_identifier:{media_category:this.getMediaEntityCategoryUsingPlaybackUrl(e),media_id:t}}:{amplify_card_identifier:{vmap_url:e.vmapUrl,content_id:t}};case pe:case fe:case he:default:return{unknown_identifier:{content_id:t}}}},t.parseMediaKeyString=function(e){var t=lt.exec(e)||[],n=t[1],r=t[2],i=+n;if(i&&r)return{media_category:i,media_id:r}},t.getMediaPlatformIdentifierUsingDefaultCategory=function(e){var t=this.defaultMediaCategory(e);return t?{media_platform_identifier:{media_category:t,media_id:e.contentId}}:{unknown_identifier:{content_id:e.contentId}}},t.getMediaEntityCategoryUsingPlaybackUrl=function(e){var t=this.getVariantUrl(e);if(t){if(-1!==t.indexOf("amplify_video"))return tt;if(-1!==t.indexOf("ext_tw_video"))return et}},t.defaultMediaCategory=function(e){switch(e.contentType){case ue:return nt;case le:return rt;case ce:return it;case de:return this.getMediaEntityCategoryUsingPlaybackUrl(e);default:return}},t.getLiveEventIdentifier=function(e,t){return e.eventId?{lex_event_identifier:{lex_event_id:e.eventId}}:t===le?{legacy_live_event_identifier:{legacy_live_event_id:e.source.id}}:void 0},t.getTweetId=function(e,t){return t===ce||t===le?e.tweetId:e.type===Xe?e.id:void 0},t.getScribeElement=function(e){switch(e.contentType){case pe:return"vine_player";case ue:return"gif_player";case ve:return"platform_amplify_card";case le:case ce:return"live_video_player";case he:return"partner_video_player";case fe:return"periscope_player";case de:default:return"video_player"}},t.getBaseItem=function(e,t){var n=this.context.baseScribeItem;return n||(e.type===Xe?{id:e.id,item_type:"0"}:e.tweetId?{id:e.tweetId,item_type:"0"}:t?{id:t,item_type:"28"}:void 0)},t.getLexMetadata=function(e,t){var n=this.context.scribeContext||{},r={},i={};return t.broadcastId&&(r.is_replay_broadcast=!t.isLive,i.tweet_id=e.source.tweetId,"live_event_timeline"===n.page&&"tweet"!==n.component?r.host_broadcast_id=t.broadcastId:r.target_broadcast_id=t.broadcastId),e.eventId&&("live_event_timeline"===n.page&&"tweet"!==n.component?i.host_event_id=e.eventId:i.target_event_id=e.eventId),{live_broadcast_details:r,live_video_event_details:i}},t.getVariantUrl=function(e){var t=e.variants&&e.variants[e.currentVariantIndex];return t&&t.src},t.isActionSupportedInClientMediaEvent=function(e){return!qe[e]},e}();function ht(e){return e&&"messages"===e.page}function ft(e,t){return ht(t)?{scrubbed_identifier:{}}:e}function pt(e,t,n){return ht(n)?{scrubbed_publisher_identifier:{}}:e&&t?{twitter_periscope_publisher_identifier:{twitter_id:Re(e),periscope_id:t}}:e?{twitter_publisher_identifier:{id:Re(e)}}:t?{periscope_publisher_identifier:{id:t}}:{unknown_publisher_identifier:{}}}function vt(e,t){if(e===ce||e===le||e===fe)return{broadcast_state:t?st:ct}}var yt=function(){function e(e){this.analytics=e,this.analytics.on(Y,this.onReplayEvent.bind(this)),this.analytics.on(ee,this.onTrackFinishedEvent.bind(this)),this.analytics.on(R,this.onInitialIntendToPlayEvent.bind(this))}var t=e.prototype;return t.onInitialIntendToPlayEvent=function(e){this.resetLatencyStartDate(e.intentToPlayTime)},t.onReplayEvent=function(){this.resetLatencyStartDate()},t.onTrackFinishedEvent=function(e){this.resetLatencyStartDate(),this.trackId!==e.currentTrackId&&(this.trackId=e.currentTrackId)},t.resetLatencyStartDate=function(e){this.latencyStartDate=e||new Date},t.getLatencyData=function(){if(void 0!==this.latencyStartDate)return{latency:new Date-this.latencyStartDate}},e}(),gt=[{progress:.25,event:V},{progress:.5,event:B},{progress:.75,event:W},{progress:.95,event:G},{progress:1,event:H}],mt=function(){function e(e){this.analytics=e,this.eventMap={},this.playbackLatencyListener=new yt(e),this.analytics.on(ee,this.onTrackFinishedEvent.bind(this)),this.analytics.on(Z,this.onTickEvent.bind(this))}var t=e.prototype;return t.onTrackFinishedEvent=function(e){var t=me(e);void 0!==t&&(t.shouldLoop||(this.eventMap[e.currentTrackId]={}))},t.onTickEvent=function(e){var t=me(e);if(void 0!==t&&t.durationMs){var n=this.eventMap[t.id];void 0===n&&(n={},this.eventMap[t.id]=n),this.checkAllTentpoles(t,n,e)}},t.checkAllTentpoles=function(e,t,n){if(n.isPlaying){var r=e.durationMs,i=e.currentTimeMs,a=this.playbackLatencyListener.getLatencyData()||{},o={latency_millis:a.latency,cache_info:{notCached:{}}};this.emitOnce(Q,t,n,a,o),e.isLive||this.checkProgressTentpoles(r,i,t,n)}},t.checkProgressTentpoles=function(e,t,n,r){var i=this;gt.forEach((function(a){var o=a.progress*e;t>=o-1e3&&t<=o+1e3&&i.emitOnce(a.event,n,r)}))},t.emitOnce=function(e,t,n,r,i){t[e]||(this.analytics.emit(e,n,r,i),t[e]=!0)},e}(),Et=[0,5,10,15,20,25,30,35,40,45,50,55,60,65,70,75,80,85,90,95,100],bt=((o={})[pe]=2,o[ue]=3,o[ve]=1,o[de]=1,o[le]=1,o[fe]=5,o[ce]=1,o),Tt=function(){function e(e){this.analytics=e,this.sessionDataStore={},this.analytics.on(Z,this.onTickEvent.bind(this)),this.analytics.on(O,this.onFullscreenEvent.bind(this)),this.analytics.on(q,this.onShrinkEvent.bind(this)),this.analytics.on(ee,this.onTrackFinishedEvent.bind(this)),this.analytics.on(g,this.onTrackInterrupt.bind(this)),this.analytics.on($,this.onTrackInterrupt.bind(this))}var t=e.prototype;return t.onTickEvent=function(e){var t=me(e);if(void 0!==t){var n=this.getOrCreateNewSessionDataForTrack(t,e);e.isScrubbing?n.currentTimeMs=t.currentTimeMs:this.updateViewData(t,n,e)}},t.onFullscreenEvent=function(e){var t=me(e);void 0!==t&&(this.getOrCreateNewSessionDataForTrack(t,e).isFullscreenMode=!0)},t.onShrinkEvent=function(e){var t=me(e);void 0!==t&&(this.getOrCreateNewSessionDataForTrack(t,e).isFullscreenMode=!1)},t.onTrackFinishedEvent=function(e){var t=me(e);if(void 0!==t){var n=this.sessionDataStore[t.id];if(void 0!==n)if(t.shouldLoop)n.currentTimeMs=0;else{if(n.timeWatchedMs>0){var r=this.constructVideoSessionDetails(n,t);this.emitVideoSessionEvent(e,r)}this.sessionDataStore[t.id]=void 0}}},t.onTrackInterrupt=function(e){var t=me(e);if(void 0!==t){var n=this.sessionDataStore[t.id];if(void 0!==n){if(n.timeWatchedMs>0){var r=this.constructVideoSessionDetails(n,t);this.emitVideoSessionEvent(e,r)}this.sessionDataStore[t.id]=void 0}}},t.getOrCreateNewSessionDataForTrack=function(e,t){var n=this.sessionDataStore[e.id];return void 0===n&&(n={sizesInfoAtTheStart:t.sizesInfo,currentTimeMs:e.currentTimeMs,isFullscreenMode:!1,timeWatchedMs:0,timeWatchedFullscreenMs:0,timeWatchedWithAudioMs:0,timeWatchedFullscreenWithAudioMs:0,watchedMsByInViewPct:this.generateNewAggregateHistogram(),watchedWithAudioMsByInViewPct:this.generateNewAggregateHistogram(),watchedMsByViewportPct:this.generateNewAggregateHistogram(),maxContinuousWatchedMsByInViewPct:this.generateNewMaxContinuousHistogram(),maxContinuousWatchedWithAudioMsByInViewPct:this.generateNewMaxContinuousHistogram()},this.sessionDataStore[e.id]=n),n},t.generateNewAggregateHistogram=function(){for(var e,t={},n=v(Et);!(e=n()).done;){t[e.value]=0}return t},t.generateNewMaxContinuousHistogram=function(){for(var e,t={},n=v(Et);!(e=n()).done;){t[e.value]={current:0,max:0}}return t},t.resetContinuousViewDataForHistogram=function(e){for(var t,n=v(Et);!(t=n()).done;){var r=t.value;this.resetContinuousViewDataForBucket(e[r])}},t.resetContinuousViewDataForBucket=function(e){e.max=Math.max(e.current,e.max),e.current=0},t.updateViewData=function(e,t,n){var r=e.currentTimeMs-t.currentTimeMs,i=t.isFullscreenMode?1:n.percentVisible,a=t.isFullscreenMode?1:n.percentOfViewportOccupied;t.currentTimeMs=e.currentTimeMs,r<0||(t.timeWatchedMs+=r,this.updateAggregateHistogram(t.watchedMsByInViewPct,i,r),this.updateAggregateHistogram(t.watchedMsByViewportPct,a,r),this.updateMaxContinuousHistogram(t.maxContinuousWatchedMsByInViewPct,i,r),n.isMuted?this.resetContinuousViewDataForHistogram(t.maxContinuousWatchedWithAudioMsByInViewPct):(t.timeWatchedWithAudioMs+=r,this.updateAggregateHistogram(t.watchedWithAudioMsByInViewPct,i,r),this.updateMaxContinuousHistogram(t.maxContinuousWatchedWithAudioMsByInViewPct,i,r)),t.isFullscreenMode&&(t.timeWatchedFullscreenMs+=r,n.isMuted||(t.timeWatchedFullscreenWithAudioMs+=r)))},t.updateAggregateHistogram=function(e,t,n){if(0!==t)for(var r,i=100*t,a=v(Et);!(r=a()).done;){var o=r.value;i>=o&&(e[o]+=n)}},t.updateMaxContinuousHistogram=function(e,t,n){if(0!==t)for(var r,i=100*t,a=v(Et);!(r=a()).done;){var o=r.value;i>=o?e[o].current+=n:e[o].current>0&&this.resetContinuousViewDataForBucket(e[o])}else this.resetContinuousViewDataForHistogram(e)},t.constructVideoSessionDetails=function(e,t){return{video_details:{is_preroll_video:t.displayType===oe,video_length:Math.round(t.durationMs),time_watched:Math.round(e.timeWatchedMs),time_watched_fullscreen:Math.round(e.timeWatchedFullscreenMs),time_watched_with_audio:Math.round(e.timeWatchedWithAudioMs),time_watched_fullscreen_with_audio:Math.round(e.timeWatchedFullscreenWithAudioMs),time_watched_100_with_audio:Math.round(e.watchedWithAudioMsByInViewPct[100]),video_type:bt[t.contentType],watched_ms_by_in_view_pct:this.constructAggregateHistogramPayload(e.watchedMsByInViewPct),watched_with_audio_ms_by_in_view_pct:this.constructAggregateHistogramPayload(e.watchedWithAudioMsByInViewPct),watched_ms_by_viewport_pct:this.constructAggregateHistogramPayload(e.watchedMsByViewportPct),max_continuous_watched_ms_by_in_view_pct:this.constructMaxContinuousHistogramPayload(e.maxContinuousWatchedMsByInViewPct),max_continuous_watched_with_audio_ms_by_in_view_pct:this.constructMaxContinuousHistogramPayload(e.maxContinuousWatchedWithAudioMsByInViewPct),sizes_info_at_the_start:{viewport_size:e.sizesInfoAtTheStart.viewportSize,ad_size:e.sizesInfoAtTheStart.mediaSize}}}},t.constructAggregateHistogramPayload=function(e){for(var t,n={},r=v(Et);!(t=r()).done;){var i=t.value;n[i]=Math.round(e[i])}return{histogram:n}},t.constructMaxContinuousHistogramPayload=function(e){for(var t,n={},r=v(Et);!(t=r()).done;){var i=t.value,a=e[i];n[i]=Math.round(Math.max(a.current,a.max))}return{histogram:n}},t.emitVideoSessionEvent=function(e,t){this.analytics.emit(ne,e,t)},e}(),_t=[ie,F,ae,M,P,A,D,re,j,N],Ot=[M,A,D,re],Pt=function(){function e(e,t){this.analytics=e,this.context=t,this.eventMap={},this.analytics.on(Z,this.onTickEvent.bind(this)),this.analytics.on(ee,this.onTrackFinishedEvent.bind(this)),this.analytics.on(U,this.onPauseEvent.bind(this)),this.analytics.on(H,this.onPlaybackComplete.bind(this))}var t=e.prototype;return t.onTrackFinishedEvent=function(e){var t=me(e);if(void 0!==t){var n=this.eventMap[t.id];void 0!==n&&(t.shouldLoop?n.timePlayedToMs=0:this.eventMap[t.id]=void 0)}},t.onPlaybackComplete=function(e){var t=me(e);if(void 0!==t){var n=this.eventMap[t.id];void 0!==n&&this.context&&this.context.enableShortFormCompleteLogging&&this.emitOnce(N,n,e)}},t.onPauseEvent=function(e){this.resetContinuousViewEventTimingData(e)},t.onTickEvent=function(e){var t=me(e);if(void 0!==t){var n=this.eventMap[t.id];if(void 0===n){n={timePlayedToMs:t.currentTimeMs};for(var r,i=v(_t);!(r=i()).done;){n[r.value]={timePlayedMs:0,visibilityWeightedTimePlayedMs:0,fired:!1}}this.eventMap[t.id]=n}e.isScrubbing?(n.timePlayedToMs=t.currentTimeMs,this.resetContinuousViewEventTimingData(e)):(this.updateTimingData(t,n,e),this.checkViewEvents(t,n,e)),this.checkPlayFromTap(n,e)}},t.updateTimingData=function(e,t,n){var r=e.currentTimeMs-t.timePlayedToMs;t.timePlayedToMs=e.currentTimeMs;var i=n.percentVisible;i>=1&&(t[ae].timePlayedMs+=r),i>=1?t[M].timePlayedMs+=r:t[M].timePlayedMs=0,i>=.5&&Te(n)?t[A].timePlayedMs+=r:t[A].timePlayedMs=0,i>=.5?t[D].timePlayedMs+=r:t[D].timePlayedMs=0,i>=1&&!n.isMuted&&(t[P].timePlayedMs+=r),i>=.5?t[re].timePlayedMs+=r:t[re].timePlayedMs=0,t[j].timePlayedMs+=r,i>=.5&&(t[j].visibilityWeightedTimePlayedMs+=i*r),t[N].timePlayedMs+=r},t.resetContinuousViewEventTimingData=function(e){var t=this.eventMap[e.currentTrackId];if(void 0!==t)for(var n,r=v(Ot);!(n=r()).done;){t[n.value].timePlayedMs=0}},t.checkViewEvents=function(e,t,n){var r;t[ae].timePlayedMs>=(!(r=e).isLive&&r.durationMs>0&&!r.shouldLoop?Math.min(r.durationMs-500,3e3):3e3)&&(this.emitOnce(ae,t,n),this.emitOnce(ie,t,n)),t[M].timePlayedMs>=1e3&&this.emitOnce(M,t,n),t[P].timePlayedMs>=function(e){return!e.isLive&&e.durationMs>0?.5*e.durationMs:Number.MAX_SAFE_INTEGER}(e)&&this.emitOnce(P,t,n),t[A].timePlayedMs>=2e3&&this.emitOnce(A,t,n),t[D].timePlayedMs>=2e3&&this.emitOnce(D,t,n),t[re].timePlayedMs>=function(e){return!e.isLive&&e.durationMs>0?Math.min(.95*e.durationMs,1e4):1e4}(e)&&this.emitOnce(re,t,n);var i=t[j];i.timePlayedMs>=function(e){return!e.isLive&&e.durationMs>0?Math.min(.95*e.durationMs,6e3):6e3}(e)&&i.visibilityWeightedTimePlayedMs>=function(e){return!e.isLive&&e.durationMs>0?Math.min(.5*e.durationMs,3e3):3e3}(e)&&this.emitOnce(j,t,n),this.context&&this.context.enableShortFormCompleteLogging&&t[N].timePlayedMs>=15e3&&this.emitOnce(N,t,n)},t.checkPlayFromTap=function(e,t){t.isPlaying&&!t.isPreview&&(this.emitOnce(F,e,t),this.emitOnce(ie,e,t))},t.emitOnce=function(e,t,n){t[e].fired||(this.analytics.emit(e,n),t[e].fired=!0)},e}(),It=function(e){function t(t,n,r,i){var a;(a=e.call(this)||this).scribeListener=new dt(c()(a),t,i),a.promotedLogListener=new Qe(c()(a),n),a.tentpoleListener=new mt(c()(a)),a.viewListener=new Pt(c()(a),i),a.playbackLapseListener=new Ge(c()(a)),a.errorListener=new Se(c()(a)),a.beaconListener=new Oe(c()(a)),a.rewindListener=new Ye(c()(a)),a.heartbeatListener=new ke(c()(a)),a.loopListener=new Le(c()(a)),a.intendToPlayListener=new De(c()(a)),a.videoSessionListener=new Tt(c()(a)),a.ctaImpressionListener=new Ie(c()(a)),a.captionsListener=new Pe(c()(a));var o=new Fe(r,i),s=new Ve(o);return a.lifecycleListener=new We(c()(a),s),a}l()(t,e);var n=t.prototype;return n.onTickEvent=function(e){this.emit(Z,e)},n.onReplay=function(e){var t=me(e);void 0!==t&&(t.shouldLoop||this.emit(Y,e))},n.onTrackFinished=function(e){this.emit(ee,e)},n.onIntendToPlay=function(e){this.emit(k,e)},n.onPlay=function(e){this.emit(x,e)},n.onPause=function(e){this.emit(U,e)},n.onMute=function(e){this.emit(L,e)},n.onUnmute=function(e){this.emit(te,e)},n.onFullScreen=function(e){this.emit(O,e)},n.onShrink=function(e){this.emit(q,e)},n.onAdSkip=function(e){this.emit(g,e)},n.onCtaImpression=function(e){this.emit(T,e)},n.onCtaClick=function(e){this.emit(b,e)},n.onConfigLoaded=function(e){this.emit(E,e)},n.onError=function(e,t){this.emit(_,e,t)},n.onTeardown=function(e){this.emit($,e)},t}(p.a);t.a=It},856:function(e,t,n){n(9)({target:"Date",stat:!0},{now:function(){return(new Date).getTime()}})},857:function(e,t,n){n(9)({target:"Function",proto:!0},{bind:n(440)})},858:function(e,t,n){n(9)({target:"Number",stat:!0},{isNaN:function(e){return e!=e}})},859:function(e,t,n){var r=n(9),i=n(14),a=n(200),o=[].slice,s=function(e){return function(t,n){var r=arguments.length>2,i=r?o.call(arguments,2):void 0;return e(r?function(){("function"==typeof t?t:Function(t)).apply(this,i)}:t,n)}};r({global:!0,bind:!0,forced:/MSIE .\./.test(a)},{setTimeout:s(i.setTimeout),setInterval:s(i.setInterval)})},860:function(e,t,n){"use strict";(function(e){n(42),n(28),n(37),n(43);var r=n(3),i=n.n(r),a=n(4),o=n.n(a),s=n(1),c=n.n(s),u=(n(15),n(18),n(64),n(322),n(63),n(23),n(553)),l=n(555),d=n(595),h=n(581),f=n(876),p=n(679),v=n(564),y=n(559),g=n(565),m=n(874),E=n(875),b=n(580),T=n(881),_=n(606),O=n(861),P=n.n(O),I=n(883),S=n(678),w=n(557),R=n(570),k=n(561),C=n(642),A=n(571);function D(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function L(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?D(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var M=function(){function t(n){var r=this,a=n.source,o=void 0===a?{}:a,s=n.videoConfig,l=n.domElement,O=n.httpClient,I=n.twitterAuthedHttpClient,D=n.options,M=void 0===D?{}:D;i()(this,t),c()(this,"teardown",(function(){r.broadcastUpdater&&r.broadcastUpdater.cancelUpdate(),r.unsubscribeCalls.forEach((function(e){e()})),r.unsubscribeCalls=[],Object(S.c)(r.id),r.source=void 0,r.session=void 0,void 0!==r.hydraExperienceId&&T.a.dispatch(Object(C.teardownExperience)(r.hydraExperienceId)),r.video&&r.video.teardown(),T.a.dispatch(Object(_.c)(r.id)),Object(R.h)(r.id),r.logger.clearLogs(),r.rejectPlayerReadyPromise()})),c()(this,"play",(function(){return r.initiallyMuted?r.playPreview():r.playerReadyPromise.then((function(){r._dispatch(u.O(r.id))})),r})),c()(this,"pause",(function(){return r.playerReadyPromise.then((function(){r._dispatch(u.N(r.id))})),r})),c()(this,"replay",(function(){return r.playerReadyPromise.then((function(){r._dispatch(u.Q(r.id))})),r})),c()(this,"mute",(function(){return r.playerReadyPromise.then((function(){r._dispatch(u.M(r.id))})),r})),c()(this,"unmute",(function(){return r.playerReadyPromise.then((function(){r._dispatch(u.S(r.id))})),r})),c()(this,"scrubToFraction",(function(e){return r.playerReadyPromise.then((function(){r._dispatch(u.R(r.id,e))})),r})),c()(this,"setVolume",(function(e){return r.playerReadyPromise.then((function(){r._dispatch(u.T(r.id,e))})),r})),c()(this,"setPlaybackTimeRange",(function(e){var t=e.startTimeS,n=e.endTimeS;return r.playerReadyPromise.then((function(){t<=0&&n>=r.video.getVideoTag().duration?r._dispatch(u.F(r.id)):r._dispatch(u.P(r.id,t,n))})),r})),c()(this,"fullScreen",(function(e){var t=e||r.domElement;return T.a.dispatch(Object(A.f)(r.id,t,r.video.getVideoTag())),r})),c()(this,"exitFullScreen",(function(){return T.a.dispatch(Object(A.g)(r.id)),r})),c()(this,"hideControls",(function(){return r.playerReadyPromise.then((function(){r._dispatch(u.I(r.id))})),r})),c()(this,"showControls",(function(){return r.playerReadyPromise.then((function(){r._dispatch(u.U(r.id))})),r})),c()(this,"playPreview",(function(){return r.playerReadyPromise.then((function(){r._dispatch(Object(k.f)(r.id)),r.initiallyMuted&&(r.initiallyMuted=!1)})),r})),c()(this,"pausePreview",(function(){return r.playerReadyPromise.then((function(){r._dispatch(Object(k.e)(r.id))})),r})),c()(this,"objectFitVideo",(function(e){return-1!==y.c.indexOf(e)&&r.video&&(r.video.objectFitVideo=e),r})),c()(this,"toggleCaptions",(function(){return r.playerReadyPromise.then((function(){var e=T.a.getState(),t=e&&e.players&&e.players[r.id],n=!(!t||!t.areCaptionsShown);r._dispatch(n?u.K(r.id,!0):u.L(r.id,!0))})),r})),c()(this,"nextTrack",(function(){return r.playerReadyPromise.then((function(){r._dispatch(Object(v.n)(r.id))})),r})),c()(this,"triggerError",(function(e){var t=new Error(e||"synthetic");return T.a.dispatch(Object(g.h)(r.id,t)),r})),c()(this,"reload",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.requestedTimecode,n=e.autoPlay,i=void 0!==n&&n;r.playerReadyPromise=new Promise((function(e,t){r.resolvePlayerReadyPromise=e,r.rejectPlayerReadyPromise=t})).catch((function(){}));var a=T.a.getState()||{players:{}},o=a.players[r.id],s=-1;if(o){if(void 0!==t)r.playerOptions.requestedTimecode=t;else if(0===o.currentTrackId){var c=Object(h.b)(o);s=c.currentTimeMs/1e3}var l=o.isPreview,d=o.isPlaying,f=o.isMuted,p=d||i;r.playerReadyPromise.then((function(){l?p?r._dispatch(Object(k.f)(r.id)):r._dispatch(Object(k.e)(r.id)):(p&&r._dispatch(u.O(r.id)),f&&r._dispatch(u.M(r.id)))}))}return r.video&&r.video.teardownPlayer(),T.a.dispatch(r._reloadPlayer(r.id,r.source,r.videoConfig,r.session,r.resolvePlayerReadyPromise,r.rejectPlayerReadyPromise,L(L({},r.playerOptions),{},{reloadTimecode:s}),r.logger)),r})),c()(this,"on",(function(e,t){return Object.keys(d.a).forEach((function(n){d.a[n]===e&&Object(S.a)(r.id,e,t)})),r})),c()(this,"updatePosition",(function(e){var t=e.percentVisible,n=e.percentOfViewportOccupied,i=e.sizesInfo;return r.playerReadyPromise.then((function(){r._dispatch(u.V(r.id,t,n,i))})),r})),c()(this,"callToActionClicked",(function(){return r.playerReadyPromise.then((function(){r._dispatch(u.D(r.id))})),r})),c()(this,"callToActionImpression",(function(){return r.playerReadyPromise.then((function(){r._dispatch(u.E(r.id))})),r})),c()(this,"liveClickthroughClicked",(function(){return r.playerReadyPromise.then((function(){r._dispatch(u.J(r.id))})),r})),c()(this,"subscribe",(function(e){var t=T.a.getState(),n=r._getPlayerState(t),i=r._getHydraState(t),a=T.a.subscribe((function(){var t=T.a.getState(),a=r._getPlayerState(t),o=r._getHydraState(t);void 0!==a&&(n!==a||i!==o)&&(n=a,i=o,e(a,o))}));return r.unsubscribeCalls.push(a),a})),c()(this,"onStoreUpdate",(function(e){var t=Object(h.b)(e),n="ad"===(null==t?void 0:t.displayType),i=e.errorInfo,a=i.adFailed,o=i.autoRetry,s=i.backoffMs,c=n&&a&&!1!==t.shouldAutoAdvance;(o||c)&&setTimeout((function(){r.reload()}),(c?0:s)||0)})),this.id=t.id,t.id+=1,this.unsubscribeCalls=[],this.source=o,this.videoConfig=s,this.session={id:P()()},this.playbackSessionId=M.playbackSessionId,this.initiallyMuted=M.initiallyMuted,this._reloadPlayer=w.j,this.playerReadyPromise=new Promise((function(e,t){r.resolvePlayerReadyPromise=e,r.rejectPlayerReadyPromise=t})).then(Promise.resolve()).catch((function(){})),M.autoplay&&this.play(),this.logger=new p.a(this.id),e.env.VIDEO_PLAYER_DEBUG&&(p.a.debuggingEnabled=!0),Object(R.f)(this.id,new m.a(new E.a(O)),new m.a(new E.a(I||O)),this.logger,new f.a,M.featureProvider),this.subscribe(this.onStoreUpdate),this.source.type!==b.a.BROADCAST&&this.source.type!==b.a.STATIC_BROADCAST||(this.hydraExperienceId=M.hydraExperienceId=T.a.dispatch(Object(C.registerExperience)())),this.options=M;var j=-1,N=this.playbackSessionId?Object(R.g)(this.playbackSessionId):void 0;N&&(this.options.videoEl=M.videoEl||N.videoEl,j=N.reloadTimecode);var U=this.options,x=U.bitrateCap,F=U.featureProvider,V=U.includeBroadcastEventAssociation,B=U.initiallyMutedCaptions,W=U.intentToPlayTime,G=U.maxLoopCount,H=U.promotedContext,K=U.requestedTimecode,J=U.showGeolocationPrompt;this.playerOptions={bitrateCap:x,featureProvider:F,includeBroadcastEventAssociation:V,initiallyMutedCaptions:B,intentToPlayTime:W,maxLoopCount:G,promotedContext:H,reloadTimecode:j,requestedTimecode:K,showGeolocationPrompt:J},T.a.dispatch(Object(w.g)(this.id,o,s,this.session,M.analytics,M.adProvider,this.resolvePlayerReadyPromise,this.rejectPlayerReadyPromise,this.playerOptions,this.logger)).then((function(e){r.broadcastUpdater=e})),l&&this.attach(l)}return o()(t,[{key:"attach",value:function(e){this.video||(this.domElement=e,this.video=new I.a(this.domElement,this.id,T.a,this.reload,this.logger,this.options))}},{key:"_getPlayerState",value:function(e){if(e.players)return e.players[this.id]}},{key:"_getHydraState",value:function(e){if(void 0!==this.hydraExperienceId&&e.hydraExperiences)return e.hydraExperiences[this.hydraExperienceId]}},{key:"_dispatch",value:function(e){var t=T.a.getState();this._getPlayerState(t)?T.a.dispatch(e):this.triggerError(l.a.MEDIA_TEARDOWN_ERROR)}}]),t}();c()(M,"id",0),t.a=M}).call(this,n(593))},861:function(e,t,n){var r=n(862),i=n(863);e.exports=function(e,t,n){var a=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var o=(e=e||{}).random||(e.rng||r)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,t)for(var s=0;s<16;++s)t[a+s]=o[s];return t||i(o)}},862:function(e,t){var n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(n){var r=new Uint8Array(16);e.exports=function(){return n(r),r}}else{var i=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),i[t]=e>>>((3&t)<<3)&255;return i}}},863:function(e,t){for(var n=[],r=0;r<256;++r)n[r]=(r+256).toString(16).substr(1);e.exports=function(e,t){var r=t||0,i=n;return[i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]]].join("")}},864:function(e,t,n){"use strict";var r=n(11);n(90),n(194),n(865),n(867),n(23),t.__esModule=!0,t.default=t.registerExperience=t.REGISTER_EXPERIENCE=void 0;var i=r(n(61)),a=n(677);t.REGISTER_EXPERIENCE="REGISTER_EXPERIENCE";t.registerExperience=function(){return{type:"REGISTER_EXPERIENCE"}};t.default=function(e){return function(t){return function(n){switch(n.type){case"REGISTER_EXPERIENCE":var r=e.getState(),o=Object.keys(r.hydraExperiences||{}).map((function(e){return Number.parseInt(e,10)})),s=Math.max.apply(Math,(0,i.default)(o))+1;return Number.isFinite(s)||(s=0),e.dispatch((0,a.initializeExperience)(s)),s;default:return t(n)}}}}},865:function(e,t,n){n(9)({target:"Number",stat:!0},{isFinite:n(866)})},866:function(e,t,n){var r=n(14).isFinite;e.exports=Number.isFinite||function(e){return"number"==typeof e&&r(e)}},867:function(e,t,n){var r=n(9),i=n(445);r({target:"Number",stat:!0,forced:Number.parseInt!=i},{parseInt:i})},868:function(e,t,n){"use strict";n(78),n(23),t.__esModule=!0,t.combineReducers=void 0;t.combineReducers=function(e){return function(t,n){return Object.keys(e).reduce((function(r,i){return r[i]=e[i](t[i],n),r}),{})}}},869:function(e,t,n){var r=n(441),i=n(439),a=n(336),o=n(442);e.exports=function(e){return r(e)||i(e)||a(e)||o()},e.exports.default=e.exports,e.exports.__esModule=!0},870:function(e,t,n){"use strict";(function(e,r){var i,a=n(872);i="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==e?e:r;var o=Object(a.a)(i);t.a=o}).call(this,n(155),n(871)(e))},871:function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}},872:function(e,t,n){"use strict";function r(e){var t,n=e.Symbol;return"function"==typeof n?n.observable?t=n.observable:(t=n("observable"),n.observable=t):t="@@observable",t}n.d(t,"a",(function(){return r}))},873:function(e,t,n){"use strict";(function(e){var n="object"==typeof e&&e&&e.Object===Object&&e;t.a=n}).call(this,n(155))},874:function(e,t,n){"use strict";var r=n(3),i=n.n(r),a=n(4),o=n.n(a),s=(n(36),n(582)),c={},u=function(){function e(t){i()(this,e),this.httpClient=t}return o()(e,[{key:"dispatch",value:function(e){if("get"===e.method.toLowerCase()){var t=e.params?Object(s.b)(e.params):"",n=t?"?".concat(t):"",r="".concat(e.host).concat(e.path).concat(n);return c[r]||(c[r]=this.httpClient.dispatch(e).then((function(e){return delete c[r],e})).catch((function(e){throw delete c[r],e}))),c[r]}return this.httpClient.dispatch(e)}}]),e}();t.a=u},875:function(e,t,n){"use strict";var r=n(3),i=n.n(r),a=n(4),o=n.n(a),s=(n(322),n(63),function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200;i()(this,e),this.httpClient=t,this.backOffMSec=n}return o()(e,[{key:"dispatch",value:function(e){var t=this;return new Promise((function(n,r){t._dispatchOnce(0,n,r,e)}))}},{key:"_dispatchOnce",value:function(e,t,n,r){var i=this;this.httpClient.dispatch(r).then((function(a){i._handleResponse(e,t,n,r,a)})).catch((function(a){i._handleReject(e,t,n,r,a)}))}},{key:"_handleResponse",value:function(e,t,n,r,i){var a=this,o=!1;switch(i.status){case 404:case 425:case 429:case 500:case 502:case 503:case 504:case 508:o=!0}!o||e>=3?t(i):setTimeout((function(){a._dispatchOnce(e+1,t,n,r)}),this._backOffMSec(e))}},{key:"_handleReject",value:function(e,t,n,r,i){var a=this;e>=3?n(i):setTimeout((function(){a._dispatchOnce(e+1,t,n,r)}),this._backOffMSec(e))}},{key:"_backOffMSec",value:function(e){var t=this.backOffMSec,n=Math.pow(3,e)*t;return t+Math.random()*(n-t)}}]),e}());t.a=s},876:function(e,t,n){"use strict";var r=n(3),i=n.n(r),a=n(4),o=n.n(a),s=function(){function e(){i()(this,e),this.byteAccumulator=0}return o()(e,[{key:"add",value:function(e){this.byteAccumulator+=e}},{key:"getAndReset",value:function(){var e=this.byteAccumulator;return this.byteAccumulator=0,e}}]),e}();t.a=s},881:function(e,t,n){"use strict";var r=n(645),i=n(561),a=n(553),o=n(606),s=n(597),c=n(680),u=n(557),l={},d=n(682),h=(n(319),n(570)),f=n(565),p=n(564),v={},y=n(596),g=n(571),m=n(678),E=(n(23),n(42),n(28),n(37),n(15),n(18),n(43),n(3)),b=n.n(E),T=n(4),_=n.n(T),O=n(1),P=n.n(O);function I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var S=function(){function e(t){var n=this;b()(this,e),P()(this,"onNativeFullscreenBegin",(function(){n.setFullscreen(!0)})),P()(this,"onNativeFullscreenEnd",(function(){n.setFullscreen(!1)})),P()(this,"onFullscreenChanged",(function(){var e=(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)===n.fullscreenTarget;e||(n.fullscreenTarget=void 0,n.removeDocumentListeners()),n.setFullscreen(e)})),P()(this,"expand",(function(e,t,r){t&&(n.expandTimeout=setTimeout((function(){n.setFullscreen(!1)}),1e3),n.fullscreenTarget&&(n.fullscreenTarget.removeEventListener("touchstart",n._swipeStart),n.fullscreenTarget.removeEventListener("transitionend",n._fullscreenTransitionEnd),n.setFullscreen(!1)),n.fullscreenTarget=t,n.playerId=e,n.addDocumentListeners(),t.requestFullscreen?t.requestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullscreen?t.webkitRequestFullscreen():t.msRequestFullscreen?t.msRequestFullscreen():t.webkitEnterFullscreen?(n.addElementListeners(t),t.webkitEnterFullscreen()):null!=r&&r.webkitEnterFullscreen?(n.fullscreenTarget=r,n.addElementListeners(r),r.webkitEnterFullscreen()):(n.removeDocumentListeners(),n.removeElementListeners(),n.nonFullscreenStyle=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I(Object(n),!0).forEach((function(t){P()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t.style),n.nonFullscreenPosition=t.getBoundingClientRect(),t.style.position="fixed",t.style.width="".concat(n.nonFullscreenPosition.right-n.nonFullscreenPosition.left,"px"),t.style.height="".concat(n.nonFullscreenPosition.bottom-n.nonFullscreenPosition.top,"px"),t.style.top="".concat(n.nonFullscreenPosition.top,"px"),t.style.left="".concat(n.nonFullscreenPosition.left,"px"),t.style.zIndex="100",window.requestAnimationFrame((function(){t.style.transition="width 0.25s, height 0.25s, top 0.25s, left 0.25s",t.style.width="100%",t.style.height="100%",t.style.top="0",t.style.left="0",t.addEventListener("transitionend",n._fullscreenTransitionEnd)}))))})),P()(this,"shrink",(function(e){e===n.playerId&&(document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen?document.msExitFullscreen():n.fullscreenTarget.webkitExitFullscreen?n.fullscreenTarget.webkitExitFullscreen():(n.fullscreenTarget.style.width="".concat(n.nonFullscreenPosition.right-n.nonFullscreenPosition.left,"px"),n.fullscreenTarget.style.height="".concat(n.nonFullscreenPosition.bottom-n.nonFullscreenPosition.top,"px"),n.fullscreenTarget.style.top="".concat(n.nonFullscreenPosition.top,"px"),n.fullscreenTarget.style.left="".concat(n.nonFullscreenPosition.left,"px"),n.fullscreenTarget.style.transition="width 0.25s, height 0.25s, top 0.25s, left 0.25s",n.fullscreenTarget.addEventListener("transitionend",n._shrinkTransitionEnd),n.fullscreenTarget.removeEventListener("touchstart",n._swipeStart)))})),P()(this,"_swipeStart",(function(e){n.addSwipeListeners(),n.touchStart=e.touches[0]})),P()(this,"_swipeMove",(function(e){e.preventDefault();var t=e.touches[0].pageY-n.touchStart.pageY;n.swipeVector=Math.abs(t);var r=t/n.swipeVector*Math.min(n.swipeVector,n.swipeVector/(n.swipeVector+3*n.fullscreenTarget.clientHeight/4)*n.fullscreenTarget.clientHeight*1/2);n.fullscreenTarget.style.top="".concat(r,"px")})),P()(this,"_swipeEnd",(function(){n.removeSwipeListeners(),n.swipeVector>n.fullscreenTarget.clientHeight/4?n.shrink(n.playerId):n.fullscreenTarget.style.top="0"})),P()(this,"_fullscreenTransitionEnd",(function(){n.fullscreenTarget.style.transition="",n.fullscreenTarget.removeEventListener("transitionend",n._fullscreenTransitionEnd),n.fullscreenTarget.addEventListener("touchstart",n._swipeStart),n.setFullscreen(!0)})),P()(this,"_shrinkTransitionEnd",(function(){n.fullscreenTarget.removeEventListener("transitionend",n._shrinkTransitionEnd),n.fullscreenTarget.style.transition="",n.fullscreenTarget.style.position=n.nonFullscreenStyle.position,n.fullscreenTarget.style.width=n.nonFullscreenStyle.width,n.fullscreenTarget.style.height=n.nonFullscreenStyle.height,n.fullscreenTarget.style.top=n.nonFullscreenStyle.top,n.fullscreenTarget.style.left=n.nonFullscreenStyle.left,n.fullscreenTarget.style.zIndex=n.nonFullscreenStyle.zIndex,n.setFullscreen(!1),n.fullscreenTarget=void 0})),this.fullscreenTarget=void 0,this.playerId=void 0,this.onChange=t,this.isFullscreen=!1}return _()(e,[{key:"addDocumentListeners",value:function(){document.addEventListener("webkitfullscreenchange",this.onFullscreenChanged),document.addEventListener("mozfullscreenchange",this.onFullscreenChanged),document.addEventListener("MSFullscreenChange",this.onFullscreenChanged),document.addEventListener("fullscreenchange",this.onFullscreenChanged)}},{key:"removeDocumentListeners",value:function(){document.removeEventListener("webkitfullscreenchange",this.onFullscreenChanged),document.removeEventListener("mozfullscreenchange",this.onFullscreenChanged),document.removeEventListener("MSFullscreenChange",this.onFullscreenChanged),document.removeEventListener("fullscreenchange",this.onFullscreenChanged)}},{key:"addSwipeListeners",value:function(){document.addEventListener("touchend",this._swipeEnd),document.addEventListener("touchmove",this._swipeMove)}},{key:"addElementListeners",value:function(e){e.addEventListener("webkitbeginfullscreen",this.onNativeFullscreenBegin),e.addEventListener("webkitendfullscreen",this.onNativeFullscreenEnd)}},{key:"removeElementListeners",value:function(){var e=this.fullscreenTarget;e&&(e.removeEventListener("webkitbeginfullscreen",this.onNativeFullscreenBegin),e.removeEventListener("webkitendfullscreen",this.onNativeFullscreenEnd),e.removeEventListener("transitionend",this._fullscreenTransitionEnd),e.removeEventListener("transitionend",this._shrinkTransitionEnd))}},{key:"removeSwipeListeners",value:function(){document.removeEventListener("touchend",this._swipeEnd),document.removeEventListener("touchmove",this._swipeMove)}},{key:"setFullscreen",value:function(e){clearTimeout(this.expandTimeout),this.onChange(this.playerId,e),e||(this.cleanup(),this.fullscreenTarget=void 0,this.playerId=void 0)}},{key:"cleanup",value:function(){clearTimeout(this.expandTimeout),this.removeDocumentListeners(),this.removeElementListeners(),this.removeSwipeListeners()}}]),e}(),w=(n(341),n(681));function R(e){Object(w.b)("captions",e)}n(323);var k=n(559),C=n(644),A=C.a.BUFFERING_COMPLETED,D=C.a.BUFFERING_REQUESTED,L=C.a.IDLE,M=C.a.PREBUFFERING_COMPLETED,j=function(e,t){Object.keys(t).forEach((function(n){n=parseInt(n,10);var r=(null==t?void 0:t[n])||{},i=r.bufferingStatus,a=r.targetDuration;!(i===A)&&void 0!==i&&!(i===M)&&a&&e.dispatch(Object(C.f)(n,D,k.b*a))}))};function N(e){return function(t){var n=t.dispatch,r=t.getState;return function(t){return function(i){return"function"==typeof i?i(n,r,e):t(i)}}}}var U=N();U.withExtraArgument=N;var x=U,F=n(873),V="object"==typeof self&&self&&self.Object===Object&&self,B=(F.a||V||Function("return this")()).Symbol,W=Object.prototype,G=W.hasOwnProperty,H=W.toString,K=B?B.toStringTag:void 0;var J=function(e){var t=G.call(e,K),n=e[K];try{e[K]=void 0;var r=!0}catch(e){}var i=H.call(e);return r&&(t?e[K]=n:delete e[K]),i},Q=Object.prototype.toString;var Y=function(e){return Q.call(e)},z=B?B.toStringTag:void 0;var q=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":z&&z in Object(e)?J(e):Y(e)};var X=function(e,t){return function(n){return e(t(n))}}(Object.getPrototypeOf,Object);var $=function(e){return null!=e&&"object"==typeof e},Z=Function.prototype,ee=Object.prototype,te=Z.toString,ne=ee.hasOwnProperty,re=te.call(Object);var ie=function(e){if(!$(e)||"[object Object]"!=q(e))return!1;var t=X(e);if(null===t)return!0;var n=ne.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&te.call(n)==re},ae=n(870),oe="@@redux/INIT";function se(e,t){var n=t&&t.type;return"Given action "+(n&&'"'+n.toString()+'"'||"an action")+', reducer "'+e+'" returned undefined. To ignore an action, you must explicitly return the previous state. If you want this reducer to hold no value, you can return null instead of undefined.'}function ce(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}var ue=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};var le=n(642),de=n.n(le),he=[function(e){return function(t){return function(n){switch(n.type){case u.c:l[n.playerId]=function(){return"function"==typeof n.adProvider?n.adProvider():{}};break;case o.a:delete l[n.playerId];break;case a.p:case i.c:var d,h,f=e.getState().players[n.playerId],p=null==f||null===(d=f.features)||void 0===d?void 0:d[s.e];if(f&&!f.adLoaded&&l[n.playerId]&&!p&&(null===(h=f.errorInfo)||void 0===h||!h.adFailed))return t(Object(c.d)(n.playerId,l[n.playerId],n.type===i.c));break;case u.b:var v,y=e.dispatch(Object(r.b)(n.playerId,s.e)),g=e.getState().players[n.playerId];if(l[n.playerId]&&y&&g&&(null===(v=g.errorInfo)||void 0===v||!v.adFailed)){var m=l[n.playerId]();e.dispatch(Object(c.b)(n.playerId,m))}}return t(n)}}},function(e){return function(t){return function(n){switch(n.type){case i.c:var r=Object(y.c)(e,n.playerId)||{},o=r.initiallyMutedCaptions,s=r.userSpecifiedCaptions;o&&!s&&e.dispatch(Object(a.L)(n.playerId,!1));break;case a.p:case a.r:case a.t:case a.u:case a.s:case g.b:var c=Object(y.c)(e,n.playerId)||{},u=c.isPreview,l=c.userSpecifiedCaptions;u&&!l&&e.dispatch(Object(a.K)(n.playerId,!1))}return t(n)}}},r.a,function(e){var t=new S((function(t,n){e.dispatch(Object(g.h)(t,n))}));return function(n){return function(r){var i=e.getState().players[r.playerId],a=r.type;return!i||a!==g.b&&a!==g.c||(a===g.b?(e.dispatch(Object(g.h)(r.playerId,!0)),t.expand(r.playerId,r.containerEl,r.videoEl)):t.shrink(r.playerId)),n(r)}}},function(e){return function(t){return function(n){switch(n.type){case u.c:switch(e.dispatch(Object(a.T)(n.playerId,(i=parseFloat(Object(w.a)("volume")),isNaN(i)?1:i))),function(){var e,t=Object(w.a)("captions");if("ENABLED"===(e=t)||"DISABLED"===e)return t}()){case"ENABLED":e.dispatch(Object(a.L)(n.playerId,!0));break;case"DISABLED":e.dispatch(Object(a.K)(n.playerId,!0))}break;case a.B:(r=n.volume)>=0&&null!==r&&Object(w.b)("volume",r);break;case a.m:n.isUserSet&&R("ENABLED");break;case a.l:n.isUserSet&&R("DISABLED")}var r,i;return t(n)}}},function(e){return function(t){return function(n){var r,o=e.getState().players,c=o[n.playerId],u=c||{},l=u.bufferingStatus,d=u.targetDuration,h=null==c||null===(r=c.features)||void 0===r?void 0:r[s.d];switch(n.type){case i.b:case a.o:h&&void 0!==l&&j(e,o);break;case i.c:case a.p:if(h&&void 0!==l){var f=l===A;if(d){var p=d*k.b;e.dispatch(Object(C.h)(n.playerId,p))}f||function(e,t,n){Object.keys(t).forEach((function(r){r=parseInt(r,10);var i=(null==t?void 0:t[r])||{},a=i.bufferingStatus,o=i.controls,s=i.isPlaying,c=void 0!==a,u=a===A,l=a===M,d="PLAY_REQUESTED"===(null==o?void 0:o.playState)||s;!u&&!d&&c&&r!==n&&!l&&e.dispatch(Object(C.f)(r,L,0))}))}(e,o,n.playerId)}break;case C.c:if(h){var v,g=n.bufferingStatus===A,m="PLAY_REQUESTED"===(null==c||null===(v=c.controls)||void 0===v?void 0:v.playState)||(null==c?void 0:c.isPlaying);g&&m&&j(e,o)}break;case C.d:if(n.targetDuration&&h){var E=Object(y.b)(o,(function(e){var t;return((null==e?void 0:e.isPlaying)||"PLAY_REQUESTED"===(null==e||null===(t=e.controls)||void 0===t?void 0:t.playState))&&void 0!==(null==e?void 0:e.bufferingStatus)&&(null==e?void 0:e.bufferingStatus)!==A}));if(void 0===E||E.playerId===n.playerId){var b=n.targetDuration*k.b;e.dispatch(Object(C.h)(n.playerId,b))}else E.playerId!==n.playerId&&e.dispatch(Object(C.f)(n.playerId,L,0))}else if(n.targetDuration){var T=n.targetDuration*k.b;e.dispatch(Object(C.h)(n.playerId,T))}}return t(n)}}},function(e){return function(t){return function(n){if(void 0!==n.playerId&&Object(h.d)(n.playerId,(function(e){e.log("redux",n.type)})),n.type===u.c)return v[n.playerId]=n.analytics,t(n);var r=e.getState().players[n.playerId];if(!r)return t(n);var s=t(n),c=e.getState().players[n.playerId],l=v[n.playerId];if(void 0!==l){switch(n.type){case p.e:case a.A:l.onTickEvent(c);break;case p.f:l.onTrackFinished(r),c.currentTrackId!==r.currentTrackId&&l.onIntendToPlay(c);break;case p.c:var d,y=r.tracks.find((function(e){return e.id===r.currentTrackId}));"ad"!==y.displayType||y.playbackCompleted||!r||null!==(d=r.errorInfo)&&void 0!==d&&d.adFailed||l.onAdSkip(r),c.currentTrackId!==r.currentTrackId&&l.onIntendToPlay(c);break;case a.p:case i.c:l.onIntendToPlay(c);break;case a.r:l.onReplay(c);break;case a.B:r.isMuted&&!c.isMuted?l.onUnmute(r):!r.isMuted&&c.isMuted&&l.onMute(r);break;case a.b:l.onCtaClick(r);break;case a.c:l.onCtaImpression(r);break;case o.a:l.onTeardown(r),delete v[n.playerId];break;case u.b:l.onConfigLoaded(c);break;case f.a:case f.c:var g,m=c.errorInfo,E=m.autoRetry?m.count:void 0;g=n.type===f.a||n.type===f.c?n.thrownError.message:n.error,l.onError(r,{error_code:n.type,error_message:g,media_details:{media_error:{category:n.type,is_fatal:n.isFatal,message:g,retry_count:E}}})}c&&c.isPlaying!==r.isPlaying&&(c.isPlaying?l.onPlay(c):l.onPause(c))}return s}}},m.b,le.hydraMiddleware,x];t.a=function e(t,n,r){var i;if("function"==typeof n&&void 0===r&&(r=n,n=void 0),void 0!==r){if("function"!=typeof r)throw new Error("Expected the enhancer to be a function.");return r(e)(t,n)}if("function"!=typeof t)throw new Error("Expected the reducer to be a function.");var a=t,o=n,s=[],c=s,u=!1;function l(){c===s&&(c=s.slice())}function d(){return o}function h(e){if("function"!=typeof e)throw new Error("Expected listener to be a function.");var t=!0;return l(),c.push(e),function(){if(t){t=!1,l();var n=c.indexOf(e);c.splice(n,1)}}}function f(e){if(!ie(e))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if(void 0===e.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(u)throw new Error("Reducers may not dispatch actions.");try{u=!0,o=a(o,e)}finally{u=!1}for(var t=s=c,n=0;n<t.length;n++){(0,t[n])()}return e}return f({type:oe}),(i={dispatch:f,subscribe:h,getState:d,replaceReducer:function(e){if("function"!=typeof e)throw new Error("Expected the nextReducer to be a function.");a=e,f({type:oe})}})[ae.a]=function(){var e,t=h;return(e={subscribe:function(e){if("object"!=typeof e)throw new TypeError("Expected the observer to be an object.");function n(){e.next&&e.next(d())}return n(),{unsubscribe:t(n)}}})[ae.a]=function(){return this},e},i}(function(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var i=t[r];0,"function"==typeof e[i]&&(n[i]=e[i])}var a=Object.keys(n),o=void 0;try{!function(e){Object.keys(e).forEach((function(t){var n=e[t];if(void 0===n(void 0,{type:oe}))throw new Error('Reducer "'+t+"\" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined. If you don't want to set a value for this reducer, you can use null instead of undefined.");if(void 0===n(void 0,{type:"@@redux/PROBE_UNKNOWN_ACTION_"+Math.random().toString(36).substring(7).split("").join(".")}))throw new Error('Reducer "'+t+"\" returned undefined when probed with a random type. Don't try to handle "+oe+' or other actions in "redux/*" namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined, but can be null.')}))}(n)}catch(e){o=e}return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];if(o)throw o;for(var r=!1,i={},s=0;s<a.length;s++){var c=a[s],u=n[c],l=e[c],d=u(l,t);if(void 0===d){var h=se(c,t);throw new Error(h)}i[c]=d,r=r||d!==l}return r?i:e}}({players:o.b,hydraExperiences:de.a,allPlayers:d.b}),function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return function(n,r,i){var a,o=e(n,r,i),s=o.dispatch,c={getState:o.getState,dispatch:function(e){return s(e)}};return a=t.map((function(e){return e(c)})),s=ce.apply(void 0,a)(o.dispatch),ue({},o,{dispatch:s})}}}.apply(void 0,he))},883:function(e,t,n){"use strict";n(327),n(92),n(42),n(193),n(568),n(93),n(115),n(23),n(28),n(37),n(15),n(18),n(43);var r=n(3),i=n.n(r),a=n(4),o=n.n(a),s=n(1),c=n.n(s),u=(n(322),n(63),n(36),n(114),n(197),n(19),n(103),n(435),n(319),n(553)),l=n(682),d=n(555),h=n(581),f=n(645),p=n(570),v=n(559),y=(n(56),n(6)),g=n.n(y),m=n(16),E=n.n(m),b=n(20),T=n.n(b),_=n(10),O=n.n(_);function P(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var i=O()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return T()(this,n)}}var I=n(565),S=n(582),w=n(564),R=n(644),k=(n(64),n(643)),C=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=t();return n>0?i.catch((function(i){return new Promise((function(i){setTimeout((function(){i(e(t,n-1,2*r))}),r)}))})):i},A="application/x-mpegURL",D=function(e){var t;switch(e){case"0.13.2":t=C((function(){return n.e(52).then(n.bind(null,903))}));case"0.14.17":default:t=C((function(){return n.e(53).then(n.bind(null,904))}))}return t.then((function(e){return e.default}))},L=function(){var e=window.MediaSource||window.WebKitMediaSource,t=window.SourceBuffer||window.WebKitSourceBuffer,n=e&&"function"==typeof e.isTypeSupported&&e.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),r=!t||t.prototype&&"function"==typeof t.prototype.appendBuffer&&"function"==typeof t.prototype.remove;return n&&r},M=function(e){var t=document.createElement("video");return t.canPlayType&&t.canPlayType(e)};n(150);function j(e){return"captions"===e.kind&&e.cues&&e.cues.length>0||"subtitles"===e.kind}function N(e,t){if(t&&e){var n=t.split("-")[0];return e.toLowerCase()===n.toLowerCase()}}var U,x=n(681),F=n(642),V=n(597);function B(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function W(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return G(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return G(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function G(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var H=1,K=2,J=3,Q=4,Y="captions",z="metadata",q="subtitles",X="disabled",$="hidden",Z="showing",ee=function(){function e(t,n,r,a,o){var s=this,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};i()(this,e),c()(this,"onLoadStart",(function(){s.playerRenderPromise||s.dispatchPlayerReady()})),this.domElement=t,this.playerId=n,this.hydraExperienceId=u.hydraExperienceId,this.store=r,this.reload=a,this.showControls=u.showControls,this.objectFitVideo=u.objectFitVideo,this.playerHandlesRotations=u.playerHandlesRotations,this.language=u.language,this.precache=u.precache,this.videoEl=u.videoEl,this.accessibilityLabel=u.accessibilityLabel,this.id3Disabled=!1,this.activeCues={},this.shouldRetryAutoplayMuted=u.shouldRetryAutoplayMuted,this.enablePiP=u.enablePiP||!1,Object(k.c)()||(this.hlsjsVersion=r.dispatch(Object(f.b)(n,V.b)),this.smartBufferingExperimentEnabled=this.store.dispatch(Object(f.b)(this.playerId,V.d)),this.hlsJsSegmentsToPrebuffer=v.b),this.isHlsWorkerEnabled=r.dispatch(Object(f.b)(n,V.c))||!1,this.liveAdDomainRegex=/t.lv.twimg.com$|ton.twitter.com$/,this.logger=o,this.onLoadedMetadata=this.onLoadedMetadata.bind(this),this.onTimeUpdate=this.onTimeUpdate.bind(this),this.onCanPlay=this.onCanPlay.bind(this),this.onPlay=this.onPlay.bind(this),this.onPlaying=this.onPlaying.bind(this),this.onPause=this.onPause.bind(this),this.onVolumeChange=this.onVolumeChange.bind(this),this.onSeeked=this.onSeeked.bind(this),this.onSeeking=this.onSeeking.bind(this),this.onEnded=this.onEnded.bind(this),this.onError=this.onError.bind(this),this.onHlsJsError=this.onHlsJsError.bind(this),this.onId3CueWithInfo=this.onId3CueWithInfo.bind(this),this.onId3CueWithData=this.onId3CueWithData.bind(this),this.onFragmentLoading=this.onFragmentLoading.bind(this),this.onFragmentParsingInitSegment=this.onFragmentParsingInitSegment.bind(this),this.onLevelSwitching=this.onLevelSwitching.bind(this),this.onLevelLoaded=this.onLevelLoaded.bind(this),this.onBufferAppended=this.onBufferAppended.bind(this),this.onBufferEOS=this.onBufferEOS.bind(this),this.onBufferStart=this.onBufferStart.bind(this),this.onManifestParsed=this.onManifestParsed.bind(this),this.render=this.render.bind(this),this.dispatchPlayerReady=this.dispatchPlayerReady.bind(this),this.hlsJsPlay=this.hlsJsPlay.bind(this),this.shouldUseBitratePersistence=this.shouldUseBitratePersistence.bind(this),this.unsubscribeFromStore=this.store.subscribe(this.render),this.playPromise=Promise.resolve(),this.renderVideoTag(),this.render()}return o()(e,[{key:"teardownPlayer",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.trackDataUsage();var t=this.hlsJs;if(t){t.detachMedia();var n=function(){t.destroy()};this.hlsJs=void 0,this.playPromise.then(n).catch(n)}if(this.videoTag){this.stopListeningForId3Tags(),this.videoTag.removeEventListener("loadedmetadata",this.onLoadedMetadata),this.videoTag.removeEventListener("timeupdate",this.onTimeUpdate),this.videoTag.removeEventListener("canplay",this.onCanPlay),this.videoTag.removeEventListener("play",this.onPlay),this.videoTag.removeEventListener("playing",this.onPlaying),this.videoTag.removeEventListener("pause",this.onPause),this.videoTag.removeEventListener("volumechange",this.onVolumeChange),this.videoTag.removeEventListener("seeked",this.onSeeked),this.videoTag.removeEventListener("seeking",this.onSeeking),this.videoTag.removeEventListener("ended",this.onEnded),this.videoTag.removeEventListener("error",this.onError),this.videoTag.removeEventListener("waiting",this.onBufferStart),this.videoTag.removeEventListener("loadstart",this.onLoadStart),this.videoTag.textTracks&&(this.videoTag.textTracks.onaddtrack=void 0);try{this.videoTag.pause(),this.videoTag.removeAttribute("src"),this.videoTag.removeAttribute("poster"),this.videoTag.load()}catch(e){}this.videoTag.parentNode&&this.videoTag.parentNode.removeChild(this.videoTag),this.videoTag=void 0}this.renderedTrackId=void 0,this.hasEndedOnce=!1,this.activeCues=void 0,e&&(this.renderVideoTag(),this.activeCues={})}},{key:"teardown",value:function(){this.teardownPlayer(!1),this.domElement.parentNode&&this.domElement.parentNode.removeChild(this.domElement),this.unsubscribeFromStore()}},{key:"getVideoTag",value:function(){return this.videoTag}},{key:"renderVideoTag",value:function(){this.videoTag=this.videoEl||document.createElement("video"),this.videoTag.setAttribute("preload","none"),this.videoTag.setAttribute("playsinline",""),this.showControls&&this.videoTag.setAttribute("controls",""),this.accessibilityLabel&&this.videoTag.setAttribute("aria-label",this.accessibilityLabel),this.enablePiP||this.videoTag.setAttribute("disablePictureInPicture",""),this.videoTag.style.width="100%",this.videoTag.style.height="100%",this.videoTag.style.position="absolute",this.videoTag.style.backgroundColor="black",this.videoTag.addEventListener("loadstart",this.onLoadStart,!1),this.videoTag.addEventListener("loadedmetadata",this.onLoadedMetadata),this.videoTag.addEventListener("timeupdate",this.onTimeUpdate),this.videoTag.addEventListener("play",this.onPlay),this.videoTag.addEventListener("pause",this.onPause),this.videoTag.addEventListener("volumechange",this.onVolumeChange),this.videoTag.addEventListener("seeked",this.onSeeked),this.videoTag.addEventListener("seeking",this.onSeeking),this.videoTag.addEventListener("ended",this.onEnded),this.videoTag.addEventListener("error",this.onError),this.videoTag.addEventListener("playing",this.onPlaying),this.videoTag.addEventListener("waiting",this.onBufferStart),this.videoTag.addEventListener("canplay",this.onCanPlay),this.videoTag.textTracks&&(this.videoTag.textTracks.onaddtrack=this.handleTrackAdded.bind(this)),this.hasEndedOnce=!1}},{key:"onLoadedMetadata",value:function(){this.checkInitialSeek()}},{key:"onTimeUpdate",value:function(){var e,t,n;if(void 0===this.dateTimeAnchor&&void 0!==this.videoTag.getStartDate){var r=this.videoTag.getStartDate();r&&(this.dateTimeAnchor={streamTimeMs:0,absoluteTimeMs:r.getTime()})}var i,a=1e3*this.videoTag.currentTime;void 0!==this.dateTimeAnchor&&(i=a-this.dateTimeAnchor.streamTimeMs+this.dateTimeAnchor.absoluteTimeMs);var o=0,s=this.videoTag.currentSrc;if(s){var c=this.getCurrentTrack();if(void 0===c)return;var u=c.variants;if(void 0===u)return;for(var d=0;d<u.length;d++)if(u[d].src===s){o=d;break}}this.store.dispatch(Object(w.q)(this.playerId,a,i,1e3*this.videoTag.duration,this.hasCaptions(),o));var h=null===(e=this.hlsJs)||void 0===e?void 0:e.bandwidthEstimate;void 0!==h&&!isNaN(h)&&this.store.dispatch(Object(l.a)(h)),this.trackDataUsage();var f=null===(t=this.getPlayerState())||void 0===t||null===(n=t.controls)||void 0===n?void 0:n.playbackTimeRange;if(f){var p=this.clipScrubTime(f.startTimeS),v=this.clipScrubTime(f.endTimeS),y=window.isFinite(p)&&window.isFinite(v)&&p<v,g=this.videoTag.currentTime<p||this.videoTag.currentTime>v;y&&g&&!this.seeking&&(this.videoTag.currentTime=p)}}},{key:"trackDataUsage",value:function(){var e=this;Object(p.b)(this.playerId,(function(t){var n=t.getAndReset();n>0&&e.store.dispatch(u.H(e.playerId,n))}))}},{key:"checkInitialSeek",value:function(){var e=this.videoTag,t=this.getInitialTimeCode();this.isSeekable(t)&&!this.hasInitialSeeked&&t>-1&&(this.hasInitialSeeked=!0,e.currentTime=t)}},{key:"onCanPlay",value:function(){this.checkInitialSeek(),this.onBufferEnd()}},{key:"onPlay",value:function(){var e=this.videoTag.duration;this.isLooping||this.isLive&&(this.hlsJs?this.hlsJs.liveSyncPosition&&(this.videoTag.currentTime=this.hlsJs.liveSyncPosition):e&&window.isFinite(e)&&(this.videoTag.currentTime=e))}},{key:"onPlaying",value:function(){this.videoTag.paused||(this.isEnded=!1,this.reloadTimecode=void 0,this.store.dispatch(u.X(this.playerId)),this.onBufferEnd(),this.onTimeUpdate())}},{key:"onPause",value:function(){this.videoTag.ended||this.store.dispatch(u.W(this.playerId)),this.onBufferEnd()}},{key:"onVolumeChange",value:function(){this.store.dispatch(u.ab(this.playerId,this.videoTag.muted,this.videoTag.volume)),Object(x.b)("volume",this.videoTag.volume)}},{key:"onSeeking",value:function(){this.seeking||this.isLooping||(this.seeking=!0,this.store.dispatch(u.Z(this.playerId))),this.store.dispatch(Object(F.resetGuestState)(this.hydraExperienceId)),this.hasInitialSeeked=!0}},{key:"onSeeked",value:function(){this.seeking=!1,this.isEnded=!1,this.isLooping=!1,this.store.dispatch(u.Y(this.playerId)),this.onBufferEnd(),this.updateRotation()}},{key:"updateRotation",value:function(){var e,t,n,r=(this.getId3Track()||{}).cues||[],i=r.length,a=this.videoTag.currentTime;for(e=0;e<i&&r[e].startTime<=a;e++)"TXXX"===(t=r[e]).value.key&&"JSONMetadata"===t.value.info&&(n=t);if(n)try{var o=JSON.parse(n.value.data),s=this.normalizeRotation(o.rotation),c=this.getCurrentTrack();void 0!==s&&s!==c.rotation&&this.store.dispatch(Object(w.p)(this.playerId,s))}catch(e){}}},{key:"onEnded",value:function(){this.onBufferEnd(),this.isEnded=this.hasEndedOnce=!0,this.store.dispatch(Object(w.r)(this.playerId));var e=this.getCurrentTrack();if(void 0!==e){var t=e.shouldLoop;if(this.shouldLoop=t,this.shouldLoop){this.isLooping=!0;var n=this.videoTag.play()||Promise.resolve();this.playPromise=n.catch((function(){}))}var r=this.getCurrentTrack(),i=r.isLive,a=r.isLiveTimecode;i&&(a&&this.reload({requestedTimecode:-1,autoPlay:!0}),this.reload()),this.hasInitialSeeked=!1}}},{key:"onHlsJsError",value:function(e,t,n){if(n.fatal){var r=n.response&&n.response.code;this.teardownPlayer(),403===r?"broadcast"===e||"live"===e||"periscope"===e?this.store.dispatch(Object(I.h)(this.playerId,new Error(d.a.LIVE_VIDEO_GEOBLOCK_ERROR))):this.store.dispatch(Object(I.h)(this.playerId,new Error(d.a.MEDIA_GEOBLOCK_ERROR))):(r=r?":".concat(r):"",this.store.dispatch(Object(I.h)(this.playerId,new Error("".concat(n.type,":").concat(n.details).concat(r)))))}}},{key:"onError",value:function(e,t){if(this.videoTag.error){var n;switch(this.videoTag.error.code){case H:n=d.a.MEDIA_ABORTED;break;case K:n=d.a.MEDIA_NETWORK_ERROR;break;case J:n=d.a.MEDIA_DECODE_ERROR;break;case Q:n=d.a.MEDIA_SRC_INVALID_ERROR;break;default:n=d.a.MEDIA_UNKNOWN_CODE_ERROR}this.store.dispatch(Object(I.h)(this.playerId,new Error(n))),this.teardownPlayer()}}},{key:"normalizeRotation",value:function(e){var t=90*Math.floor((Math.floor(e)+45)/90)%360;return 270===t?-90:t}},{key:"isMissingDataProp",value:function(e){var t,n,r=W(e);try{for(r.s();!(n=r.n()).done;){var i=n.value;if("TXXX"===i.value.key){t=i;break}}}catch(e){r.e(e)}finally{r.f()}return t&&""===t.value.data&&/\[.*\]|\{.*\}$/.test(t.value.info)}},{key:"onId3CueWithInfo",value:function(e){var t=/(\[|\{)/,n=e.currentTarget.activeCues,r=this.activeCues;this.activeCues={};var i,a=W(n);try{for(a.s();!(i=a.n()).done;){var o=i.value,s=o.value,c=s.key,u=s.info,l=[o.startTime,c,u].join("|");if(this.activeCues[l]=!0,!r[l]&&"TXXX"===c){var d=u.search(t);if(-1!==d){var h=u.slice(0,d),f=u.slice(d);this.parseId3Data(h,f)}}}}catch(e){a.e(e)}finally{a.f()}}},{key:"onId3CueWithData",value:function(e){var t=e.currentTarget.activeCues,n=this.activeCues;this.activeCues={};var r,i=[],a=W(t);try{for(a.s();!(r=a.n()).done;){var o=r.value,s=o.value,c=s.key,u=s.info,l=s.data,d=[o.startTime,c,u,l].join("|");this.activeCues[d]=!0,n[d]||("TXXX"===c&&this.parseId3Data(u,l),o.value&&i.push(o.value))}}catch(e){a.e(e)}finally{a.f()}this.store.dispatch(Object(w.l)(this.playerId,i))}},{key:"parseId3Data",value:function(e,t){try{var n=JSON.parse(t);if("JSONMetadata"===e){var r=this.normalizeRotation(n.rotation);this.store.dispatch(Object(w.p)(this.playerId,r)),this.store.dispatch(Object(w.m)(this.playerId,n))}else"HydraAudioLevel"===e?this.store.dispatch(Object(F.updateAudioLevels)(this.hydraExperienceId,n)):"HydraParticipants"===e&&this.store.dispatch(Object(F.updateGuestInfo)(this.hydraExperienceId,n))}catch(e){}}},{key:"onBufferAppended",value:function(e,t){if(0===this.pendingSegments){var n=this.getPlayerState(),r=n.controls,i=n.hasPlaybackStarted,a=n.nextTrackIds,o=(null==r?void 0:r.playState)===u.k.PLAY_REQUESTED;if(this.bufferedSegments+=1,!i&&!o&&this.hlsJs){this.prebufferedSegments+=1;var s=a&&0!==a.length;this.prebufferedSegments!==this.expectedSegments||s?(this.prebufferedSegments===v.b||this.prebufferedSegments===this.expectedSegments&&s)&&(this.maximumBufferLength=this.hlsJs.config.maxMaxBufferLength=0,this.store.dispatch(Object(R.f)(this.playerId,R.a.PREBUFFERING_COMPLETED,0))):this.store.dispatch(Object(R.f)(this.playerId,R.a.BUFFERING_COMPLETED))}}this.pendingSegments=null==t?void 0:t.pending}},{key:"onBufferEOS",value:function(e,t){var n=this.getPlayerState(),r=n.bufferingStatus,i=n.nextTrackIds,a=r===R.a.BUFFERING_COMPLETED,o=i&&0!==i.length;this.bufferedSegments!==this.expectedSegments||a||o||!this.hlsJs||this.store.dispatch(Object(R.f)(this.playerId,R.a.BUFFERING_COMPLETED))}},{key:"onFragmentLoading",value:function(e,t){void 0!==t&&void 0!==t.frag&&t.frag.programDateTime&&(this.dateTimeAnchor={streamTimeMs:1e3*t.frag.start,absoluteTimeMs:te(t.frag.programDateTime)})}},{key:"onFragmentParsingInitSegment",value:function(e,t){if(void 0!==t&&void 0!==t.frag&&void 0!==t.frag.level&&void 0!==this.hlsJs){var n=this.hlsJs.levels[t.frag.level];void 0!==n&&void 0!==n.details&&void 0!==n.details.programDateTime&&void 0!==n.details.fragments&&void 0!==n.details.fragments[0]&&(this.dateTimeAnchor={streamTimeMs:1e3*n.details.fragments[0].start,absoluteTimeMs:te(n.details.programDateTime)})}}},{key:"onLevelSwitching",value:function(e,t){if(this.hlsJs&&this.hlsJs.levels){var n=this.hlsJs.levels[t.level].bitrate;void 0!==n&&this.store.dispatch(Object(w.g)(this.playerId,n))}}},{key:"onLevelLoaded",value:function(e,t){if(this.hlsJs&&!this.maximumBufferLength){var n,r,i,a=null==t||null===(n=t.details)||void 0===n?void 0:n.targetduration;if(this.expectedSegments=null==t||null===(r=t.details)||void 0===r||null===(i=r.fragments)||void 0===i?void 0:i.length,a){var o=a*this.hlsJsSegmentsToPrebuffer;this.maximumBufferLength=this.hlsJs.config.maxMaxBufferLength=o,this.store.dispatch(Object(R.g)(this.playerId,a))}}}},{key:"onBufferStart",value:function(){var e=this,t=!this.hasEndedOnce||this.videoTag&&this.videoTag.currentTime>=2;this.shouldLoop&&!t||(this.buffering=!0,setTimeout((function(){e.buffering&&e.store.dispatch(Object(w.i)(e.playerId))}),20))}},{key:"onBufferEnd",value:function(){this.buffering&&(this.buffering=!1,this.store.dispatch(Object(w.h)(this.playerId)))}},{key:"getCaptionsTrack",value:function(e){var t=e||this.videoTag.textTracks||[],n=this.language;return n?function(e,t){for(var n,r,i=e.length,a=0;a<i;a++){var o=e[a],s=o.language;if(j(o)){if(s&&t&&s.toLowerCase()===t.toLowerCase())return o;!r&&N(s,t)?r=o:n||s||(n=o)}}return r||n}(t,n):function(e){for(var t=e.length,n=0;n<t;n++){var r=e[n];if(j(r))return r}}(t)}},{key:"getSubtitlesTrack",value:function(){return this.getCaptionsTrack(function(e){for(var t=e.length,n=[],r=0;r<t;r++){var i=e[r];"captions"!==i.kind&&n.push(i)}return n}(this.videoTag.textTracks))}},{key:"getId3Track",value:function(){for(var e=0;e<this.videoTag.textTracks.length;e++){var t=this.videoTag.textTracks[e];if(t.kind===z)return t}}},{key:"handleTrackAdded",value:function(e){var t=e.track,n=Y,r=z,i=q;t.kind===r?this.startListeningForId3Tags():t.mode=t.kind===n?$:X,!Object(k.c)()||t.kind!==n&&t.kind!==i||(this.id3Disabled=!0,this.stopListeningForId3Tags())}},{key:"startListeningForId3Tags",value:function(){var e=this.getId3Track();if(void 0!==e&&!this.id3Disabled){var t=e.cues;void 0===this.missingDataProp&&t&&(this.missingDataProp=this.isMissingDataProp(t)),e.oncuechange=this.missingDataProp?this.onId3CueWithInfo:this.onId3CueWithData,e.mode=$}}},{key:"stopListeningForId3Tags",value:function(){var e=this.getId3Track();void 0!==e&&(e.oncuechange=null,e.mode=X)}},{key:"handleControlUpdate",value:function(e){var t=this;switch(e.muteState){case u.j.MUTE_REQUESTED:this.videoTag.muted=!0;break;case u.j.UNMUTE_REQUESTED:this.videoTag.muted=!1}switch(e.playState){case u.k.PAUSE_REQUESTED:var n=function(){t.videoTag&&(t.videoTag.pause(),t.stopListeningForId3Tags())};this.videoTag.paused?n():this.playPromise.then(n);break;case u.k.PLAY_REQUESTED:var r=this.hlsJs?this.hlsJsPlay():this.videoTag.play()||Promise.resolve();this.playPromise=r.catch((function(e){t.videoTag&&t.videoTag.paused&&(t.shouldRetryAutoplayMuted&&e instanceof DOMException&&"NotAllowedError"===e.name?(t.shouldRetryAutoplayMuted=!1,t.store.dispatch(u.M(t.playerId))):t.store.dispatch(u.C(t.playerId)))})),this.startListeningForId3Tags()}if(e.captionsState&&this.hasCaptions()&&this.videoTag.readyState>=2){var i=this.getCaptionsTrack();switch(e.captionsState){case u.f.CAPTIONS_ON_REQUESTED:if(this.isUserRequestedCaptions())i.mode=Z,this.store.dispatch(u.G(this.playerId,!0));else{var a=this.getSubtitlesTrack();a&&(a.mode=Z,this.store.dispatch(u.G(this.playerId,!0)))}break;case u.f.CAPTIONS_OFF_REQUESTED:i.mode=i.kind===Y?$:X,this.store.dispatch(u.G(this.playerId,!1))}}if(!this.seeking){var o=this.clipScrubTime(this.videoTag.duration*e.scrubToFraction);window.isFinite(o)&&(this.videoTag.currentTime=o)}e.volume>=0&&(this.videoTag.volume=e.volume)}},{key:"clipScrubTime",value:function(e){return Math.max(0,Math.min(this.videoTag.duration-.5,e))}},{key:"hlsJsPlay",value:function(){var e=this;return new Promise((function(t){if(e.videoTag&&(e.videoTag.readyState>=3||e.isEnded))t();else{e.videoTag.addEventListener("canplay",(function n(){e.videoTag&&e.videoTag.readyState>=3&&(t(),e.videoTag.removeEventListener("canplay",n))}))}})).then((function(){return e.checkInitialSeek(),e.videoTag.play()||Promise.resolve()}))}},{key:"xhrSetup",value:function(e,t,n){var r=new S.a(t).getHostname(),i=r&&this.liveAdDomainRegex.test(r),a=n===U.ResourceTypes.KEY;(i||a)&&(e.withCredentials=!0)}},{key:"hasCaptions",value:function(){return void 0!==this.getCaptionsTrack()}},{key:"renderVideoVariant",value:function(){var e=this.getCurrentTrack(),t=e.contentType,n=e.variants,r=this.getPlayerState().features.bitrateCap,i=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.enableSafariMse,r=void 0!==n&&n,i=e.find((function(e){return 0===e.type.indexOf("video/mp4")})),a=e.find((function(e){return 0===e.type.indexOf(A)}));if(!a)return{useMse:!1,selectedVariant:i};var o=M(A),s=L();if(Object(k.c)()&&s&&!r&&(s=!1),s)return{useMse:!0,selectedVariant:a};var c=o?a:i;return{useMse:!1,selectedVariant:c}}(n),a=i.useMse,o=i.selectedVariant;return o?a?this.renderHlsJs(o,r,t):this.renderHtml5(o):(this.store.dispatch(Object(I.h)(this.playerId,new Error(d.a.MEDIA_NOT_SUPPORTED))),Promise.resolve())}},{key:"renderHlsJs",value:function(e,t,n){var r=this,a=this.getInitialTimeCode();return this.bufferedSegments=this.expectedSegments=this.pendingSegments=this.prebufferedSegments=0,D(this.hlsjsVersion).then((function(o){U=o;var s,u,l={autoStartLoad:!0,enableWorker:r.isHlsWorkerEnabled,fragLoadingMaxRetry:6,fragLoadingRetryDelay:500,fragLoadingTimeOut:2e4,levelLoadingMaxRetry:4,levelLoadingTimeOut:2e4,loader:(s=r.playerId,u=U,function(e){E()(n,e);var t=P(n);function n(e){var r;i()(this,n);var a=(r=t.call(this,e)).load.bind(g()(r));return r.load=function(e,t,n){var r=n.onSuccess;n.onSuccess=function(e,t,n){Object(p.b)(s,(function(e){e.add(t.total)})),r(e,t,n)},a(e,t,n)},r}return n}(u.DefaultConfig.loader)),manifestLoadingMaxRetry:4,manifestLoadingTimeOut:2e4,maxBufferHole:1.5,maxSeekHole:5,startLevel:-1,startPosition:a,xhrSetup:r.xhrSetup.bind(r),capLevelToPlayerSize:!t,debug:{trace:function(e){r.logger.log("HlsJs.trace",e)},debug:function(e){r.logger.log("HlsJs.debug",e)},log:function(e){r.logger.log("HlsJs.log",e)},warn:function(e){r.logger.log("HlsJs.warn",e)},info:function(e){r.logger.log("HlsJs.info",e)},error:function(e){r.logger.log("HlsJs.error",e)}}};r.hlsJs=new U(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?B(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},l)),r.smartBufferingExperimentEnabled&&(r.hlsJs.on(U.Events.BUFFER_APPENDED,r.onBufferAppended),r.hlsJs.on(U.Events.BUFFER_EOS,r.onBufferEOS)),r.hlsJs.on(U.Events.ERROR,r.onHlsJsError.bind(r,n)),r.hlsJs.on(U.Events.FRAG_LOADING,r.onFragmentLoading),r.hlsJs.on(U.Events.FRAG_PARSING_INIT_SEGMENT,r.onFragmentParsingInitSegment),r.hlsJs.on(U.Events.LEVEL_SWITCHING,r.onLevelSwitching),r.hlsJs.on(U.Events.LEVEL_LOADED,r.onLevelLoaded),r.hlsJs.on(U.Events.MANIFEST_PARSED,r.onManifestParsed.bind(r,t)),r.hlsJs.attachMedia(r.videoTag),r.hlsJs.loadSource(e.src),r.store.dispatch(Object(w.k)(r.playerId))})).catch((function(){r.store.dispatch(Object(I.h)(r.playerId,new Error("".concat(d.a.CONFIG_NETWORK_ERROR,":HlsJsChunk"))))}))}},{key:"renderHtml5",value:function(e){return this.videoTag.setAttribute("preload",this.precache?"auto":"none"),this.videoTag.setAttribute("src",e.src),this.videoTag.setAttribute("type",e.type),Promise.resolve()}},{key:"onManifestParsed",value:function(e,t,n){var r,i=n.levels,a=i.length;if(e){var o;for(o=1;o<i.length&&!(i[o].bitrate>e);o++);this.hlsJs.autoLevelCapping=o-1,a=o-1}var s=null===(r=this.store.getState().allPlayers)||void 0===r?void 0:r.mostRecentBandwidthEst;if(this.shouldUseBitratePersistence()&&void 0!==s){var c,u=a===i.length?i:i.slice(0,a);for(c=1;c<u.length&&!(i[c].bitrate>s);c++);this.hlsJs.startLevel=c-1}this.dispatchPlayerReady()}},{key:"dispatchPlayerReady",value:function(){this.store.dispatch(Object(w.o)(this.playerId))}},{key:"renderContainer",value:function(){var e=document.createElement("div");if(e.style.position="relative",e.style.width="100%",e.style.height="100%",e.style.backgroundColor="transparent",e.style.overflow="hidden",e.appendChild(this.videoTag),Object(k.b)()){var t=document.createElement("style"),n=document.createTextNode("video::-webkit-media-controls { display: none !important; }");t.appendChild(n),e.appendChild(t)}this.domElement.innerHTML="",this.domElement.appendChild(e)}},{key:"getPlayerState",value:function(){return this.store.getState().players[this.playerId]||{}}},{key:"getCurrentTrack",value:function(){var e=this.getPlayerState();return Object(h.b)(e)}},{key:"getInitialTimeCode",value:function(){var e=this.reloadTimecode;if(void 0===this.getCurrentTrack())return-1;var t=this.getCurrentTrack(),n=t.isLive,r=t.isLiveTimecode,i=[e,t.requestedTimecode,t.replayEditedStartTime].find((function(e){return e>0||0===e}));return n&&!r||void 0===i?-1:i}},{key:"isUserRequestedCaptions",value:function(){return this.getPlayerState().userSpecifiedCaptions}},{key:"isSeekable",value:function(e){if(0===e||e>0)for(var t=this.videoTag.seekable,n=t.length,r=0;r<n;r++)if(t.start(r)<=e&&e<=t.end(r))return!0;return!1}},{key:"cleanupVideoElement",value:function(){if(this.hasCaptions()){var e=this.getCaptionsTrack();if(Array.isArray(e.cues))for(;e.cues.length;)e.removeCue(e.cues[0])}}},{key:"render",value:function(){var e=this,t=this.getPlayerState(),n=t.posterImage;if(void 0!==t.currentTrackId)if(t.error)this.teardownPlayer();else{var r=this.getCurrentTrack();if(this.renderedTrackId!==t.currentTrackId){this.cleanupVideoElement(),this.hlsJs&&(this.hlsJs.destroy(),this.hlsJs=void 0),n&&this.videoTag.setAttribute("poster",n);var i=r.isLive,a=r.shouldLoop,o=r.reloadTimecode;i||(this.reloadTimecode=o),this.hasInitialSeeked=!1,this.renderedTrackId=t.currentTrackId,this.playerRenderPromise=this.renderVideoVariant(),this.playerRenderPromise.then((function(){e.renderContainer(),e.isLive=i,e.shouldLoop=a,e.videoTag.volume=Object(x.a)("volume",1)||1,e.playerRenderPromise=void 0}))}if(r.playerReady){var s=t.fullscreen.isFullscreen,c=r.rotation;this.handleControlUpdate(t.controls),this.renderRotationAndScale(c,s)}this.hlsJs&&this.maximumBufferLength!==t.maximumBufferLength&&(this.maximumBufferLength=t.maximumBufferLength,this.hlsJs.config.maxMaxBufferLength=this.maximumBufferLength)}}},{key:"renderRotationAndScale",value:function(e,t){var n=this.videoTag,r=100,i=100,a=0,o=0,s=!1!==this.playerHandlesRotations;if(s&&(90===e||-90===e)){var c=n.parentNode||{},u=c.offsetWidth/c.offsetHeight;isFinite(u)&&(a=(100-(i=100*u))/2,o=(100-(r=100/u))/2)}n.style.width="".concat(r,"%"),n.style.height="".concat(i,"%"),n.style.top="".concat(a,"%"),n.style.left="".concat(o,"%"),s&&(t?(n.style.transform="rotate(".concat(e,"deg) scale(1.005)"),n.style.objectFit="contain"):(n.style.transform="rotate(".concat(e,"deg) scale(1.005)"),n.style.objectFit=this.objectFitVideo))}},{key:"shouldUseBitratePersistence",value:function(){return this.store.dispatch(Object(f.b)(this.playerId,V.a))}}]),e}();function te(e){return void 0!==e.getTime?e.getTime():e}t.a=ee},884:function(e,t,n){"use strict";n(56);var r=n(3),i=n.n(r),a=n(4),o=n.n(a),s=n(6),c=n.n(s),u=n(16),l=n.n(u),d=n(20),h=n.n(d),f=n(10),p=n.n(f),v=n(1),y=n.n(v),g=n(0),m=n(594),E=n(559),b=n(91),T=n.n(b);T.a.string,T.a.func,T.a.object,T.a.bool,T.a.number,T.a.string,T.a.oneOf(["media_entity","gif","vmap"]),T.a.bool,T.a.object,T.a.node,T.a.shape({objectFitVideo:T.a.oneOf(E.c),playerHandlesRotations:T.a.bool}),T.a.number,T.a.string,T.a.shape({getValue:T.a.func}),T.a.bool,T.a.object,T.a.bool,T.a.bool,T.a.bool,T.a.instanceOf(Date),T.a.string,T.a.bool,T.a.number,T.a.object,T.a.string,T.a.string,T.a.bool,T.a.object,T.a.string,T.a.string,T.a.func,T.a.bool,T.a.bool,T.a.object,T.a.arrayOf(T.a.shape({src:T.a.string,type:T.a.string})),T.a.object,T.a.object,T.a.oneOfType([T.a.string,T.a.number]),T.a.string;function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p()(e);if(t){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}var O={base:{height:"100%",position:"relative",transform:"translateZ(0)",width:"100%"},wrapper:{height:"100%",position:"absolute",width:"100%"}},P=function(e){l()(n,e);var t=_(n);function n(e){var r;return i()(this,n),r=t.call(this,e),y()(c()(r),"_setVideoRef",(function(e){e&&r.videoPlayer.attach(e)})),y()(c()(r),"_setContainerRef",(function(e){r.containerDomElement=e})),y()(c()(r),"_renderCustomOverlay",(function(){if(r.props.customOverlay)return r.props.customOverlay})),r.videoPlayer=m.a.createPlayer({source:r.props.videoId,videoConfig:{contentId:r.props.contentId,contentType:r.props.contentType,cta:r.props.cta,durationMs:r.props.durationMs,expandedUrl:r.props.expandedUrl,eventId:r.props.eventId,mediaAvailability:r.props.mediaAvailability,publisherId:r.props.publisherId,poster:r.props.poster,loop:r.props.loop,shouldLoadTranslations:r.props.shouldLoadTranslations,variants:r.props.variants,viewCount:r.props.viewCount,vmapUrl:r.props.vmapUrl},httpClient:r.props.httpClient,twitterAuthedHttpClient:r.props.twitterAuthedHttpClient,options:{accessibilityLabel:r.props.accessibilityLabel,autoplay:r.props.autoplay,adProvider:r.props.adProvider,analytics:r.props.analytics,bitrateCap:r.props.bitrateCap,featureProvider:r.props.featureProvider,hlsjsVersion:r.props.hlsjsVersion,includeBroadcastEventAssociation:r.props.includeBroadcastEventAssociation,initiallyMuted:r.props.initiallyMuted,initiallyMutedCaptions:r.props.initiallyMutedCaptions,intentToPlayTime:r.props.intentToPlayTime,language:r.props.language,maxLoopCount:r.props.maxLoopCount,objectFitVideo:r.props.displayOptions.objectFitVideo,playbackSessionId:r.props.playbackSessionId,playerHandlesRotations:r.props.displayOptions.playerHandlesRotations,precache:r.props.precache,promotedContext:r.props.promotedContext,requestedTimecode:r.props.requestedTimecode,showControls:!1,showGeolocationPrompt:r.props.geolocationPrompt,shouldRetryAutoplayMuted:r.props.shouldRetryAutoplayMuted,videoEl:r.props.videoEl}}),r.props.setPlayerApi&&r.props.setPlayerApi(r.videoPlayer),r}return o()(n,[{key:"componentWillUnmount",value:function(){try{this.videoPlayer.teardown()}catch(e){}}},{key:"render",value:function(){return g.createElement("div",{ref:this._setContainerRef,style:O.base},g.createElement("div",{ref:this._setVideoRef,style:O.wrapper}),this._renderCustomOverlay())}}]),n}(g.PureComponent);y()(P,"defaultProps",{displayOptions:{},variants:[]}),P.propTypes={};t.a=P}}]);