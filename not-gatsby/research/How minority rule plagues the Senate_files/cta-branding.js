!function(){try{var t="1.0.74",e="cta-branding",r=24,a=r+7,n=104,i=10,o=.98,s=22,l=.1,d={},f=0,u=Math.random()<.05,c=null,m=document.createElement("canvas"),g=u?(window.location.href||"").slice(0,200):"";if("cta-test"===e){var v={};try{for(var _=window.location.href.split("?")[1].split("&"),b=0;b<_.length;b++){var h=_[b],p=h.split("=")[0],D=h.split("=")[1];v[p]=D}}catch(t){console.error("*** had issues while reading url parameters")}}function x(t){return t.offsetHeight+T(t,"margin-top",0)+T(t,"margin-bottom",0)}function w(t){var e=0;if(["border-bottom-width","border-top-width","padding-bottom","padding-top"].forEach(function(r){e+=T(t,r)||0}),t.hasChildNodes())for(var r=t.childNodes,a=0;a<r.length;a++){var n=r[a];if(!n.classList.contains("video-cta-href")){var i=x(n);e+=i}}return e}function T(t,e,r){var a=window.getComputedStyle(t);if(!a[e])return r||null;var n=parseInt(a[e]);return isNaN(n)?a[e]:n}d.globalConfig={},d.hooks={"item-renderer":function(r,a,n){if(!c){var s,m=r.rbox;m.formatsData=m.formatsData||{},r.formatsData=r.formatsData||{},r.formatsData.sendAbTestEvent=function(r,a,n){"cta-test"===e&&console.log("cta-test",r,a,n,this.innerText);if(!u)return;var i=this.formatsData.style||{},o={location:g,itemId:this.formatsData.itemId,rating:this.formatsData.rating,price:this.formatsData.price,text:this.formatsData.actionText,type:null!=a?a:"event",description:n,module:e,version:t,event:r,cardIndexOnPage:this.formatsData.cardIndex,index:this.formatsData.index,placement:this.formatsData.placement,innerText:this.innerText,config:{borderColor:i.borderColor,color:i.color,fontSize:i.fontSize,isInheritTitleColor:this.formatsData.isInheritTitleColor}};window.TRCImpl.sendAbTestEvent("CTA",JSON.stringify(o)),window.TRCImpl.sendAbTestEvent(e,r)}.bind(r),r.formatsData.cardIndex=f++,r.formatsData.index=a.itemIndex,r.formatsData.placement=m.placement,r.formatsData.itemId=u?(a["item-id"]||a.id||"").slice(0,40):"";try{var _=a["cta-text"],b=a.fpr||a["cta-price"],h=a["stars-rating"];if(null==c){var p=C("disable-cta-on-custom-module",n);r.formatsData.sendAbTestEvent(p?"disable_custom":"enable_custom");var D=window.TRCImpl&&window.TRCImpl.global&&window.TRCImpl.global["disable-cta-on-custom-module"];if(r.formatsData.sendAbTestEvent(D?"disable_global":"enable_global"),D||p)return void(c=!0);c=!1}if("cta-test"===e){u="true"===v["cta-report"];var x="true"===v["cta-rating"],A="true"===v["cta-always"];if("false"===v["cta-always"])return;var y=Math.random(),E=2+(x?1:0);x&&y>2/E||b||h?(_=_||"Download Today Today",h=parseFloat(h)||5*Math.random(),b=b||"4$"):(y>1/E||A)&&(_=decodeURIComponent(v["cta-text"])||_||"Learn More")}if(!_)return;if(r.formatsData.sendAbTestEvent("has_cta_text"),!function(t,e,r){if(!e.isSyndicated||e["is-in-network"])return t.formatsData.sendAbTestEvent("filtered_non_sc"),!1;if(r.options&&r.options.trcResponse&&r.options.trcResponse.nup)return t.formatsData.sendAbTestEvent("filtered_next_up"),!1;var a=!window.TRCImpl||!window.TRCImpl.global||function(t,e){if(null==t)return e;return t}(window.TRCImpl.global["enable-cta-with-description"],!0);if(e.description&&!a)return t.formatsData.sendAbTestEvent("filterd_item_with_description"),!1;var n=t.detail_order;if(n&&n.length&&"branding"===n[0])return t.formatsData.sendAbTestEvent("filterd_item_branding_before_title"),!1;if(!t.link)return t.formatsData.sendAbTestEvent("filtered_no_title"),!1;var s=t.querySelector(".video-label-box");if(!s)return t.formatsData.sendAbTestEvent("filtered_no_video_label_box"),!1;var d=s.querySelector(".branding");if(!d)return t.formatsData.sendAbTestEvent("filtered_no_branding"),!1;var f=d.getBoundingClientRect();if(f&&f.width>0){var u=parseFloat(T(d,"margin-left",0))/f.width;if(u>l)return t.formatsData.sendAbTestEvent("filtered_high_margin_left"),!1;var c=parseFloat(T(d,"margin-right",0))/f.width;if(c>l)return t.formatsData.sendAbTestEvent("filtered_high_margin_right"),!1}var m=T(d,"position");if(m&&"absolute"===m)return t.formatsData.sendAbTestEvent("filtered_branding_absolute_position_item_renderer"),!1;var g=d.querySelector(".branding-inner");if(g){var v=T(g,"position");if(v&&"absolute"===v)return t.formatsData.sendAbTestEvent("filtered_branding_inner_absolute_position"),!1}var _=d.querySelector("div.logoDiv");if(_){var b=T(_,"position");if(b&&"absolute"===b)return t.formatsData.sendAbTestEvent("filtered_branding_logo_div_inner_absolute_position"),!1}var h=t.getBoundingClientRect().width;if(h>0&&h<170)return t.formatsData.sendAbTestEvent("filtered_below_min_width"),!1;if(t.rbox.mode_name&&t.rbox.mode_name.indexOf("hero")>-1)return t.formatsData.sendAbTestEvent("filtered_item_in_hero_widget"),!1;if(t.rbox.container.querySelector(".story-widget"))return t.formatsData.sendAbTestEvent("filterd_item_in_reco_reel_story_widget"),!1;if(t.classList.contains("tbl-next-up-widget-item"))return t.formatsData.sendAbTestEvent("filterd_item_next_up"),!1;if(t.querySelector(".added-icon-svg"))return t.formatsData.sendAbTestEvent("filterd_item_branding_has_icon"),!1;var p=T(s,"height");if(p){var D=w(s);if(p+i<D)return t.formatsData.sendAbTestEvent("filtered_videoLabelBox_smaller_than_children"),!1}var x=T(s,"boxSizing",null);if(!x||"border-box"!==x){var A=s.getBoundingClientRect();if(A&&A.width>0){var y=parseFloat(T(s,"width",0))/A.width;if(y>o){var E=T(s,"paddingLeft",0),C=T(s,"paddingRight",0);if(E>0||C>0)return t.formatsData.sendAbTestEvent("filtered_padding_on_full_width"),!1}}}return!0}(r,a,n))return;if(r.formatsData.style={borderColor:C("border-color",n,!0),color:C("title-color",n,!0),fontSize:C("cta-font-size",n,!0)},r.formatsData.isInheritTitleColor=C("inherit-title-color",n,!0),r.formatsData.shouldRenderAsCTA=!0,r.formatsData.actionText=_.slice(0,15),r.formatsData.price=b,h&&(r.formatsData.rating=(s=h,Math.round(2*s)/2)),r.formatsData.isAppInstall=function(t){if(!t.formatsData.rating&&!t.formatsData.price)return!1;return!0}(r),r.formatsData.isAppInstall?r.formatsData.sendAbTestEvent("cta_app_render_candidate"):r.formatsData.sendAbTestEvent("cta_render_candidate"),m.formatsData.isInit)return;m.formatsData.isInit=!0,m.formatsData.hasCTAItem=!0,m.formatsData.isStream=function(t){return"autowidget-template-stream"===t.trc.getProperty(t.mode_name,"widget-creator-layout",t.propertiesOverride)}(m),m.formatsData.shouldAdjustAllItemsHeight=!m.formatsData.isStream&&!function(t){var e=t.getEffectiveResponsiveRule();if(e&&1===e.cells)return!0;return!1}(m)}catch(t){throw r.formatsData.sendAbTestEvent(t.message,"error",t.stack.split("\n",2)[1].trim()),t}}function C(t,e,r){var a=e&&e.globalTrcResponseJSON&&e.globalTrcResponseJSON.dcga&&e.globalTrcResponseJSON.dcga.pubConfigOverride,n=a&&a[t];return n&&r&&(d.globalConfig[t]=n),n||d.globalConfig[t]}},"list-suffix":function(t,e){if(!c){var d=e.boxes,f=!1,g=0;d.forEach(function(t){try{var r=t.rbox.formatsData;if(!r||!r.hasCTAItem)return;if(!t.formatsData.shouldRenderAsCTA&&!r.shouldAdjustAllItemsHeight)return;var a=t.querySelector(".video-label-box");if(!a)return void t.formatsData.sendAbTestEvent("filtered_no_videoLabelBox_list_suffix");if(t.rbox.container.querySelector(".story-widget"))return void t.formatsData.sendAbTestEvent("filterd_item_in_reco_reel_story_widget_list_suffix");var s=a.querySelector(".branding");if(s&&t.formatsData.shouldRenderAsCTA&&t.formatsData.isAppInstall&&function(t,e,r){t.formatsData.sendAbTestEvent("renderedAppInstall");var a=function(t){var e=document.createElement("span");if(e.classList.add("video-branding-flex-cta-rating"),t.formatsData.price){var r=document.createElement("span");r.innerText=t.formatsData.price,r.classList.add("video-branding-flex-cta-price-wrapper"),e.appendChild(r)}if(t.formatsData.price&&t.formatsData.rating){var a=document.createElement("span");a.classList.add("video-branding-flex-cta-oval-wrapper");var n='<svg class="cta-rating-oval"  width="3px" height="3px" viewBox="0 0 3 3" version="1.1" xmlns="http://www.w3.org/2000/svg">    <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">        <g transform="translate(-172.000000, -485.000000)" fill="#666666" fill-rule="nonzero">            <circle cx="173.5" cy="486.5" r="1.5"></circle>        </g>    </g></svg>';a.insertAdjacentHTML("beforeend",n),e.appendChild(a)}if(t.formatsData.rating){for(var i=t.formatsData.cardIndex,o=document.createElement("span"),s=0;s<5;s++){var l=Math.min(Math.max(t.formatsData.rating-s,0),1),d=b(i,s,l);o.insertAdjacentHTML("beforeend",d)}o.classList.add("video-branding-flex-cta-stars-wrapper"),e.appendChild(o)}return e}(t);e.insertBefore(a,r)}(t,a,s),r.shouldAdjustAllItemsHeight&&(g=Math.max(g,h(t,a,s))),!s)return void t.formatsData.sendAbTestEvent("filtered_no_branding_list_suffix");var d=s.getBoundingClientRect();if(d&&d.width>0){if(parseFloat(T(s,"margin-left",0))/d.width>l)return void t.formatsData.sendAbTestEvent("filtered_high_margin_left_list_suffix");if(parseFloat(T(s,"margin-right",0))/d.width>l)return void t.formatsData.sendAbTestEvent("filtered_high_margin_right_list_suffix");if(u)if(t.formatsData.brandingHeightBefore=d.height,C=a.getBoundingClientRect()){var c;if(!window.TRCImpl.direction||"ltr"===window.TRCImpl.direction)(c=(d.left-C.left)/C.width)<.15&&(t.formatsData.brandingDirection="ltr",t.formatsData.brandingLocation=c);if("rtl"===window.TRCImpl.direction)(c=(C.right-d.right)/C.width)<.15&&(t.formatsData.brandingDirection="rtl",t.formatsData.brandingLocation=c)}}var m=T(a,"height"),p=T(a,"max-height");if(g>p)return void t.formatsData.sendAbTestEvent("filtered_videoLabelBox_smaller_than_max_height_list_suffix");if(m){var D=w(a);if(m+i<D)return void t.formatsData.sendAbTestEvent("filtered_videoLabelBox_smaller_than_children_list_suffix")}if(t.formatsData.shouldRenderAsCTA){var x=T(s,"position");if(x&&"absolute"===x)return void t.formatsData.sendAbTestEvent("filtered_branding_absolute_position_list_suffix");var A=s.querySelector("div.logoDiv");if(A){var y=T(A,"position");if(y&&"absolute"===y)return void t.formatsData.sendAbTestEvent("filtered_branding_logo_div_inner_absolute_position_list_suffix")}var E=function(t,e){return T(function(t,e){if(t.rbox.formatsData.isStream)return e.querySelector(".video-label")||e;return e}(t,e),"width")-n}(t,a)||0;if(function(t,e){var r=T(t,"font-weight"),a=e.formatsData.style.fontSize||T(t,"font-size"),n=T(t,"font-family"),i=v(t,":before",e),o=v(t,":after",e),s=_(e,e.video_data["branding-text"],r,a,n)||0;return i+s+o}(s,t)>=E)return void t.formatsData.sendAbTestEvent("filtered_large_branding_width_list_suffix");if((function(t){var e=t.querySelector(".branding-inner"),r=t.querySelector(".branding-separator"),a=t.querySelector(".logoDiv"),n=e&&TRC.dom.getOuterWidth(e)||0,i=r&&TRC.dom.getOuterWidth(r)||0,o=a&&TRC.dom.getOuterWidth(a)||0;return n+i+o}(s)||0)>=E)return void t.formatsData.sendAbTestEvent("filtered_large_branding_parts_width_list_suffix");var C,S=T(a,"boxSizing",null);if(!S||"border-box"!==S)if((C=a.getBoundingClientRect())&&C.width>0)if(parseFloat(T(a,"width",0))/C.width>o){var B=T(a,"paddingLeft",0),L=T(a,"paddingRight",0);if(B>0||L>0)return void t.formatsData.sendAbTestEvent("filtered_padding_on_full_width_list_suffix")}f=!0,function(t,e,r){t.formatsData.sendAbTestEvent("rendered");var a=function(t,e){var r=document.createElement("a"),a=function(t,e){var r=document.createElement("Button");return r.type="button",r.classList.add("video-cta-button","video-cta-style"),r.innerText=t.formatsData.actionText,I(e,r,"color"),I(e,r,"font-family"),r}(t,e);return r.classList.add("video-cta-href"),r.target="_blank",r.href=function(t){var e,r=t.link,a=t.rbox;if(a.shiftRedirOnclick)e=r.logger_url;else{var n=a.attachHeatMapDataToLink(r.logger_url,null);e=n}return e+="&cta=true"}(t),r.ctaButton=a,function(t,e){if(Object.keys(t.formatsData.style).forEach(function(r){t.formatsData.style[r]&&(e.style[r]=t.formatsData.style[r])}),t.formatsData.isInheritTitleColor){var r=t.querySelector(".video-title"),a=T(r,"color");a.indexOf("rgb(0, 0, 0)")<0&&window.TRCImpl.sendAbTestEvent("CTA_Title_Not_Black",t.formatsData.itemId),I(r,e,"color")}}(t,a),r.appendChild(a),r}(t,r);(function(t,e,r,a){var n=function(t){var e=R(t);return!e||!t.link||t.link===e}(e)?e.link:R(e);n&&n.classList.add("video-cta-style"),!e.rbox.isFeedCard&&n&&n.classList.add("non-feed-cta-item"),r&&r.classList.add("video-label-box-cta"),r&&!TRC.Browser.ie&&r.classList.add("video-label-box-cta-non-ie");var i=r.querySelectorAll(".video-label");if(i)for(var o=0;o<i.length;o++){var s=i[o];s.classList.add("video-label-flex-cta-item")}a&&function(t,e,r){if(e.classList.add("video-branding-flex-cta-item"),t.rbox.formatsData.isStream){var a=T(e,"margin-top");a?r.style.marginTop=a+1+"px":e.classList.add("video-branding-flex-cta-item-no-stream")}else e.classList.add("video-branding-flex-cta-item-no-stream");e.style.order=1}(e,a,t),r.appendChild(t)})(a,t,e,r),function(t,e){e.onclick=function(){t.formatsData.sendAbTestEvent("cta_button_clicked")}}(t,a.ctaButton),t.formatsData.renderedCtaButton=!0}(t,a,s),a.classList.contains("video-label-box-cta")&&function(t,e){if(t.fixResponsiveBoxTitleAndDesc(e),window.TRC.dom.on(window,"resize",function(){t.fixResponsiveBoxTitleAndDesc(e)}),e.video_data){var r=t.getDetailSpansFromLabelsBoxes("branding",e);r.length&&setTimeout(function(){for(var a=0;a<r.length;a++)t.fixBoxOverflow(r[a],e.video_data["branding-text"],!0,!0)},0)}}(e,t)}}catch(e){throw t.formatsData.sendAbTestEvent(e.message,"error",e.stack.split("\n",2)[1].trim()),e}}),f&&d.forEach(function(t){!function(t,e){var r=t.querySelector(".video-label-box");if(t.rbox.formatsData.shouldAdjustAllItemsHeight){if(e<=0)return;return void(r.style.height=e+"px")}var a=r.querySelector(".branding"),n=h(t,r,a);if(n<=0)return;r.style.height=n+"px";var i=T(r,"max-height",0);i>0&&i<n&&(r.style.maxHeight=n+"px")}(t,g)}),function(t){if(!u)return;var e=[];if(t.forEach(function(t){t.formatsData.renderedCtaButton&&e.push(t)}),e.length<=0)return;var a=!1;window.TRC.dom.on(window,"scroll",function(){if(!a){var t=e[0];try{var n=!1;if(e.forEach(function(t){var e,r,i,o;n||(r=(e=t).getBoundingClientRect(),i=e.ownerDocument,o=i.defaultView||i.parentWindow,r.top>=0&&r.left>=0&&r.bottom<=(o.innerHeight||i.clientHeight)&&r.right<=(o.innerWidth||i.clientWidth)&&(n=!0,a=!0))}),!n)return;setTimeout(function(){try{e.forEach(function(t){var e=t.formatsData;e.sendAbTestEvent("visible","report");var a=t.querySelector(".video-label-box"),n=a?a.querySelector(".video-cta-href"):null,i=n?n.querySelector(".video-cta-button"):null,o=a?a.querySelector(".branding"):null,s=A(a,"videoLabelBox")||A(n,"ctaAnchor")||A(i,"ctaButton")||A(o,"branding")||y(n,"ctaAnchor")||y(i,"ctaButton")||C(n,t,"ctaAnchor","videoCube")||C(n,a,"ctaAnchor","videoLabelBox")||C(i,n,"ctaButton","ctaAnchor")||E(n,o,"ctaAnchor","branding")||function(t,e,r,a){var n=t.getBoundingClientRect(),i=e.getBoundingClientRect();if(0===n.width||0===n.height||0===i.width||0===i.height)return null;if(n.left>i.right||n.right<i.left||n.top>i.bottom||n.bottom<i.top)return null;return r+"_intersects_with_"+a}(n,o,"ctaAnchor","branding")||D(i,"ctaButton",r+5,"too")||D(n,"ctaAnchor",r+5,"too")||p(n,o,"ctaAnchor","branding",4)||p(o,n,"branding","ctaAnchor",4)||function(t,e,r,a,n,i){if(null==n||!i)return null;var o=t.getBoundingClientRect(),s=e.getBoundingClientRect();if(o&&s){if("ltr"===i){var l=(o.left-s.left)/s.width;if(l>n+.1)return r+"_moved_from_left"}if("rtl"===i){var l=(s.right-o.right)/s.width;if(l>n+.1)return r+"_moved_from_right"}}return null}(o,a,"branding",0,e.brandingLocation,e.brandingDirection)||D(o,"branding",1.9*e.brandingHeightBefore,"became");s&&e.sendAbTestEvent(s,"report")})}catch(e){t.formatsData.sendAbTestEvent("error_reporting_with_timeout","report",e.message)}},3e3)}catch(e){t.formatsData.sendAbTestEvent("error_reporting","report",e.message)}}})}(d)}function v(t,e,r){var a=0,n=window.getComputedStyle(t,e,r);return n&&"none"!==n.content&&(r.formatsData.sendAbTestEvent("has_pseudo_el"),a=function(t,e){var r=parseInt(t.width),a=t.content;isNaN(r)&&a.length>0&&(r=_(e,a,t.fontWeight,t.fontSize,t.fontFamily),e.formatsData.sendAbTestEvent("has_text_pseudo_el"));return r}(n,r)),a}function _(t,e,r,a,n){try{if(null==e||""===e)return null;if(null==a&&(null==n||""===n))return null;if(null==m)return t.formatsData.sendAbTestEvent("measureText_no_canvas"),null;var i=m.getContext("2d");if(null==i)return t.formatsData.sendAbTestEvent("measureText_no_canvas_context"),null;var o=[];if(null!=r&&o.push(r.toString()),null!=a&&o.push(parseInt(a)+"px"),null!=n&&o.push(n),0===o.length)return t.formatsData.sendAbTestEvent("measureText_no_font_parts"),null;var s=o.join(" ");if(null==s||""===s)return t.formatsData.sendAbTestEvent("measureText_empty_font_value"),null;i.font=s;var l=i.measureText(e);return null==l?(t.formatsData.sendAbTestEvent("measureText_no_metrics"),null):l.width}catch(e){return t.formatsData.sendAbTestEvent("filtered_error_measure_text_list_suffix"),null}}function b(t,e,r){return'<svg class="cta-rating-star" height="9px" version="1.1" viewBox="0 0 9 9" width="9px" xmlns="http://www.w3.org/2000/svg">    <g fill="none" fill-rule="evenodd" stroke="none" stroke-width="1">        <linearGradient id="lg'+e+"-"+t+'" x1="0" x2="1" y1="0.5" y2="0.5">            <stop offset="0" stop-color="#737373" stop-opacity="1"/>            <stop offset="'+r+'" stop-color="#737373" stop-opacity="1"/>            <stop offset="'+r+'" stop-color="#737373" stop-opacity="0.5"/>            <stop offset="1" stop-color="#737373" stop-opacity="0.5"/>        </linearGradient>        <g fill="url(#lg'+e+"-"+t+')" fill-rule="nonzero" transform="translate(-21.000000, -19.000000)">            <polygon points="25.5 26.4626165 22.7188471 28 23.25 24.7437694 21 22.4376941 24.1094235 21.9626165 25.5 19 26.8905765 21.9626165 30 22.4376941 27.75 24.7437694 28.2811529 28"></polygon>        </g>    </g></svg>'}function h(t,e,r){var n=w(e);if((!n||0===n)&&(n=T(e,"height"))<=0)return 0;if(!t.formatsData.shouldRenderAsCTA||!r)return t.rbox.formatsData.shouldAdjustAllItemsHeight?n:0;var i=t.formatsData.isAppInstall?s:0,o=x(r),l=n+i-o+Math.max(a,o);return l<=n?t.rbox.formatsData.shouldAdjustAllItemsHeight?n:0:l}function p(t,e,r,a,n){return x(t)-x(e)>n?r+"_is_larger_by_"+n+"_than_"+a:null}function D(t,e,r,a){return t.getBoundingClientRect().height>r?e+"_"+a+"_large":null}function A(t,e){return t?null:e+"_not_exists"}function y(t,e){return"none"===T(t,"display","unknown")?e+"_display_none":null}function E(t,e,r,a){var n=t.getBoundingClientRect(),i=e.getBoundingClientRect();return n.top>i.bottom?r+"_below_"+a:n.bottom<i.top?r+"_above_"+a:null}function C(t,e,r,a){var n=E(t,e,r,a);if(n)return n;var i=t.getBoundingClientRect(),o=e.getBoundingClientRect();return i.left<o.left?r+"_left_border_outside_of_"+a:i.right>o.right?r+"_right_border_outside_of_"+a:i.bottom>o.bottom?r+"_bottom_border_outside_of_"+a:i.top<o.top?r+"_top_border_outside_of_"+a:null}function R(t){return t.querySelector(".item-label-href")}function I(t,e,r){if(e&&t){var a=T(t,r);a&&(e.style[r]=a)}}}},window.TRC.customHooks[e]=d}catch(t){window.__trcError("Error in CTA module: "+t.message)}}();
